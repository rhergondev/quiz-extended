"use strict";(globalThis.webpackChunkquiz_extended=globalThis.webpackChunkquiz_extended||[]).push([[334],{4953:(e,r,o)=>{o.d(r,{batchEnrollUsers:()=>u,enrollUserInCourse:()=>i,getUserEnrollments:()=>t,unenrollUserFromCourse:()=>c});var s=o(5236),n=o(9700),l=o(1663);const t=async e=>{try{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Valid user ID is required");const r=(0,s.getApiConfig)(),o=`${r.apiUrl}/qe/v1/users/${e}/enrollments`;console.log(`üìö Fetching enrollments for user ${e}...`);const l=await(0,n.qb)(o,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},credentials:"same-origin"}),t=l.data?.data||l.data;return console.log(`‚úÖ Fetched ${Array.isArray(t)?t.length:0} enrollments for user ${e}`),Array.isArray(t)?t:[]}catch(r){return console.error(`‚ùå Error fetching user enrollments for user ${e}:`,r),(0,l.hS)(r,l.By.FETCH,{resource:"user-enrollments",userId:e,action:"getUserEnrollments"})}},i=async(e,r)=>{try{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Valid user ID is required");if(!r||!Number.isInteger(r)||r<=0)throw new Error("Valid course ID is required");const o=(0,s.getApiConfig)(),l=`${o.apiUrl}/qe/v1/users/${e}/enrollments`;console.log(`‚ûï Enrolling user ${e} in course ${r}...`);const t=await(0,n.qb)(l,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":o.nonce},credentials:"same-origin",body:JSON.stringify({course_id:r})});return console.log(`‚úÖ User ${e} successfully enrolled in course ${r}`),t.data}catch(o){return console.error(`‚ùå Error enrolling user ${e} in course ${r}:`,o),(0,l.hS)(o,l.By.CREATE,{resource:"user-enrollment",userId:e,courseId:r,action:"enrollUserInCourse"})}},c=async(e,r)=>{try{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Valid user ID is required");if(!r||!Number.isInteger(r)||r<=0)throw new Error("Valid course ID is required");const o=(0,s.getApiConfig)(),l=`${o.apiUrl}/qe/v1/users/${e}/enrollments/${r}`;console.log(`‚ûñ Unenrolling user ${e} from course ${r}...`);const t=await(0,n.qb)(l,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":o.nonce},credentials:"same-origin"});return console.log(`‚úÖ User ${e} successfully unenrolled from course ${r}`),t.data}catch(o){return console.error(`‚ùå Error unenrolling user ${e} from course ${r}:`,o),(0,l.hS)(o,l.By.DELETE,{resource:"user-enrollment",userId:e,courseId:r,action:"unenrollUserFromCourse"})}},u=async(e,r)=>{try{if(!Array.isArray(e)||0===e.length)throw new Error("User IDs array is required");if(!r||!Number.isInteger(r)||r<=0)throw new Error("Valid course ID is required");console.log(`üì¶ Batch enrolling ${e.length} users in course ${r}...`);const o={success:[],failed:[],total:e.length},s=5;for(let n=0;n<e.length;n+=s){const l=e.slice(n,n+s);(await Promise.allSettled(l.map(e=>i(e,r)))).forEach((e,r)=>{const s=l[r];"fulfilled"===e.status&&!1!==e.value?.success?o.success.push(s):o.failed.push({userId:s,error:e.reason?.message||"Unknown error"})})}return console.log(`‚úÖ Batch enrollment complete: ${o.success.length} success, ${o.failed.length} failed`),o}catch(e){throw console.error("‚ùå Error in batch enrollment:",e),e}}}}]);