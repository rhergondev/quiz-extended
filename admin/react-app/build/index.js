(()=>{var e,t,r,n,s={2:(e,t,r)=>{var n=r(2199),s=r(4664),a=r(5950);e.exports=function(e){return n(e,a,s)}},8:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6773);t.debounce=function(e,t=0,r={}){"object"!=typeof r&&(r={});const{leading:s=!1,trailing:a=!0,maxWait:o}=r,i=Array(2);let l;s&&(i[0]="leading"),a&&(i[1]="trailing");let c=null;const d=n.debounce(function(...t){l=e.apply(this,t),c=null},t,{edges:i}),u=function(...t){return null!=o&&(null===c&&(c=Date.now()),Date.now()-c>=o)?(l=e.apply(this,t),c=Date.now(),d.cancel(),d.schedule(),l):(d.apply(this,t),l)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),l),u}},25:(e,t,r)=>{e.exports=r(1334).last},58:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9181);t.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&n.isLength(e.length)}},79:(e,t,r)=>{var n=r(3702),s=r(80),a=r(4739),o=r(8655),i=r(1175);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},80:(e,t,r)=>{var n=r(6025),s=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():s.call(t,r,1),--this.size,0))}},104:(e,t,r)=>{var n=r(3661);function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],a=r.cache;if(a.has(s))return a.get(s);var o=e.apply(this,n);return r.cache=a.set(s,o)||a,o};return r.cache=new(s.Cache||n),r}s.Cache=n,e.exports=s},179:(e,t,r)=>{var n=r(4932),s=r(9999),a=r(9931),o=r(1769),i=r(1791),l=r(3138),c=r(8816),d=r(3349),u=c(function(e,t){var r={};if(null==e)return r;var c=!1;t=n(t,function(t){return t=o(t,e),c||(c=t.length>1),t}),i(e,d(e),r),c&&(r=s(r,7,l));for(var u=t.length;u--;)a(r,t[u]);return r});e.exports=u},181:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},184:(e,t,r)=>{e.exports=r(4259).sortBy},270:(e,t,r)=>{var n=r(7068),s=r(346);e.exports=function e(t,r,a,o,i){return t===r||(null==t||null==r||!s(t)&&!s(r)?t!=t&&r!=r:n(t,r,a,o,e,i))}},289:(e,t,r)=>{var n=r(2651);e.exports=function(e){return n(this,e).get(e)}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},305:(e,t,r)=>{e.exports=r(4200).get},311:e=>{"use strict";e.exports=function(e,t,r,n,s,a,o,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,s,a,o,i],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},316:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8509),s=r(58),a=r(4905),o=r(6761);t.isIterateeCall=function(e,t,r){return!!a.isObject(r)&&!!("number"==typeof t&&s.isArrayLike(r)&&n.isIndex(t)&&t<r.length||"string"==typeof t&&t in r)&&o.eq(r[t],e)}},317:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},583:(e,t,r)=>{var n=r(7237),s=r(7255),a=r(8586),o=r(7797);e.exports=function(e){return a(e)?n(o(e)):s(e)}},631:(e,t,r)=>{var n=r(8077),s=r(9326);e.exports=function(e,t){return null!=e&&s(e,t,n)}},641:(e,t,r)=>{var n=r(6649),s=r(5950);e.exports=function(e,t){return e&&n(e,t,s)}},645:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},659:(e,t,r)=>{var n=r(1873),s=Object.prototype,a=s.hasOwnProperty,o=s.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var s=o.call(e);return n&&(t?e[i]=r:delete e[i]),s}},689:(e,t,r)=>{var n=r(2),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,o,i){var l=1&r,c=n(e),d=c.length;if(d!=n(t).length&&!l)return!1;for(var u=d;u--;){var f=c[u];if(!(l?f in t:s.call(t,f)))return!1}var p=i.get(e),m=i.get(t);if(p&&m)return p==t&&m==e;var h=!0;i.set(e,t),i.set(t,e);for(var g=l;++u<d;){var x=e[f=c[u]],y=t[f];if(a)var b=l?a(y,x,f,t,e,i):a(x,y,f,e,t,i);if(!(void 0===b?x===y||o(x,y,r,a,i):b)){h=!1;break}g||(g="constructor"==f)}if(h&&!g){var v=e.constructor,w=t.constructor;v==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof w&&w instanceof w||(h=!1)}return i.delete(e),i.delete(t),h}},695:(e,t,r)=>{var n=r(8096),s=r(2428),a=r(6449),o=r(3656),i=r(361),l=r(7167),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),d=!r&&s(e),u=!r&&!d&&o(e),f=!r&&!d&&!u&&l(e),p=r||d||u||f,m=p?n(e.length,String):[],h=m.length;for(var g in e)!t&&!c.call(e,g)||p&&("length"==g||u&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,h))||m.push(g);return m}},717:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8273);t.isMatch=function(e,t){return n.isMatchWith(e,t,()=>{})}},756:(e,t,r)=>{var n=r(3805);e.exports=function(e){return e==e&&!n(e)}},776:(e,t,r)=>{var n=r(756),s=r(5950);e.exports=function(e){for(var t=s(e),r=t.length;r--;){var a=t[r],o=e[a];t[r]=[a,o,n(o)]}return t}},909:(e,t,r)=>{var n=r(641),s=r(8329)(n);e.exports=s},938:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},945:(e,t,r)=>{var n=r(79),s=r(8223),a=r(3661);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var o=r.__data__;if(!s||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(o)}return r.set(e,t),this.size=r.size,this}},1013:(e,t,r)=>{var n=r(5160),s=r(6800),a=r(1489),o=Math.ceil,i=Math.max;e.exports=function(e,t,r){t=(r?s(e,t,r):void 0===t)?1:i(a(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var c=0,d=0,u=Array(o(l/t));c<l;)u[d++]=n(e,c,c+=t);return u}},1033:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},1042:(e,t,r)=>{var n=r(6110)(Object,"create");e.exports=n},1081:(e,t,r)=>{e.exports=r(2810).uniqBy},1175:(e,t,r)=>{var n=r(6025);e.exports=function(e,t){var r=this.__data__,s=n(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}},1331:(e,t,r)=>{var n=r(2552),s=r(8879),a=r(346),o=Function.prototype,i=Object.prototype,l=o.toString,c=i.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=s(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==d}},1334:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(645),s=r(4483),a=r(58);t.last=function(e){if(a.isArrayLike(e))return n.last(s.toArray(e))}},1366:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}},1380:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1420:(e,t,r)=>{var n=r(79);e.exports=function(){this.__data__=new n,this.size=0}},1455:e=>{"use strict";e.exports=window.wp.apiFetch},1459:e=>{e.exports=function(e){return this.__data__.has(e)}},1465:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}},1489:(e,t,r)=>{var n=r(7400);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},1549:(e,t,r)=>{var n=r(2032),s=r(3862),a=r(6721),o=r(2749),i=r(5749);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},1574:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=109)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),s=r(18),a=r(19),o=r(45),i=r(46),l=r(47),c=r(48),d=r(49),u=r(12),f=r(32),p=r(33),m=r(31),h=r(1),g={Scope:h.Scope,create:h.create,find:h.find,query:h.query,register:h.register,Container:n.default,Format:s.default,Leaf:a.default,Embed:c.default,Scroll:o.default,Block:l.default,Inline:i.default,Text:d.default,Attributor:{Attribute:u.default,Class:f.default,Style:p.default,Store:m.default}};t.default=g},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=this;return t="[Parchment] "+t,(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,r}return s(t,e),t}(Error);t.ParchmentError=a;var o,i={},l={},c={},d={};function u(e,t){var r;if(void 0===t&&(t=o.ANY),"string"==typeof e)r=d[e]||i[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=d.text;else if("number"==typeof e)e&o.LEVEL&o.BLOCK?r=d.block:e&o.LEVEL&o.INLINE&&(r=d.inline);else if(e instanceof HTMLElement){var n=(e.getAttribute("class")||"").split(/\s+/);for(var s in n)if(r=l[n[s]])break;r=r||c[e.tagName]}return null==r?null:t&o.LEVEL&r.scope&&t&o.TYPE&r.scope?r:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(o=t.Scope||(t.Scope={})),t.create=function(e,t){var r=u(e);if(null==r)throw new a("Unable to create "+e+" blot");var n=r,s=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(t);return new n(s,t)},t.find=function e(r,n){return void 0===n&&(n=!1),null==r?null:null!=r[t.DATA_KEY]?r[t.DATA_KEY].blot:n?e(r.parentNode,n):null},t.query=u,t.register=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>1)return t.map(function(t){return e(t)});var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new a("Invalid definition");if("abstract"===n.blotName)throw new a("Cannot register abstract class");return d[n.blotName||n.attrName]=n,"string"==typeof n.keyName?i[n.keyName]=n:(null!=n.className&&(l[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(function(e){return e.toUpperCase()}):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(function(e){null!=c[e]&&null!=n.className||(c[e]=n)}))),n}},function(e,t,r){var n=r(51),s=r(11),a=r(3),o=r(20),i=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},l.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=a(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&(t-=1,"object"!=typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(s(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],r=[];return this.forEach(function(n){(e(n)?t:r).push(n)}),[t,r]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+o.length(t):t.delete?e-t.delete:e},0)},l.prototype.length=function(){return this.reduce(function(e,t){return e+o.length(t)},0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r=[],n=o.iterator(this.ops),s=0;s<t&&n.hasNext();){var a;s<e?a=n.next(e-s):(a=n.next(t-s),r.push(a)),s+=o.length(a)}return new l(r)},l.prototype.compose=function(e){var t=o.iterator(this.ops),r=o.iterator(e.ops),n=[],a=r.peek();if(null!=a&&"number"==typeof a.retain&&null==a.attributes){for(var i=a.retain;"insert"===t.peekType()&&t.peekLength()<=i;)i-=t.peekLength(),n.push(t.next());a.retain-i>0&&r.next(a.retain-i)}for(var c=new l(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())c.push(r.next());else if("delete"===t.peekType())c.push(t.next());else{var d=Math.min(t.peekLength(),r.peekLength()),u=t.next(d),f=r.next(d);if("number"==typeof f.retain){var p={};"number"==typeof u.retain?p.retain=d:p.insert=u.insert;var m=o.attributes.compose(u.attributes,f.attributes,"number"==typeof u.retain);if(m&&(p.attributes=m),c.push(p),!r.hasNext()&&s(c.ops[c.ops.length-1],p)){var h=new l(t.rest());return c.concat(h).chop()}}else"number"==typeof f.delete&&"number"==typeof u.retain&&c.push(f)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var r=[this,e].map(function(t){return t.map(function(r){if(null!=r.insert)return"string"==typeof r.insert?r.insert:i;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")}),a=new l,c=n(r[0],r[1],t),d=o.iterator(this.ops),u=o.iterator(e.ops);return c.forEach(function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case n.INSERT:r=Math.min(u.peekLength(),t),a.push(u.next(r));break;case n.DELETE:r=Math.min(t,d.peekLength()),d.next(r),a.delete(r);break;case n.EQUAL:r=Math.min(d.peekLength(),u.peekLength(),t);var i=d.next(r),l=u.next(r);s(i.insert,l.insert)?a.retain(r,o.attributes.diff(i.attributes,l.attributes)):a.push(l).delete(r)}t-=r}}),a.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var r=o.iterator(this.ops),n=new l,s=0;r.hasNext();){if("insert"!==r.peekType())return;var a=r.peek(),i=o.length(a)-r.peekLength(),c="string"==typeof a.insert?a.insert.indexOf(t,i)-i:-1;if(c<0)n.push(r.next());else if(c>0)n.push(r.next(c));else{if(!1===e(n,r.next(1).attributes||{},s))return;s+=1,n=new l}}n.length()>0&&e(n,{},s)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=o.iterator(this.ops),n=o.iterator(e.ops),s=new l;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())s.push(n.next());else{var a=Math.min(r.peekLength(),n.peekLength()),i=r.next(a),c=n.next(a);if(i.delete)continue;c.delete?s.push(c):s.retain(a,o.attributes.transform(i.attributes,c.attributes,t))}else s.retain(o.length(r.next()));return s.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var r=o.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var s=r.peekLength(),a=r.peekType();r.next(),"delete"!==a?("insert"===a&&(n<e||!t)&&(e+=s),n+=s):e-=Math.min(s,e-n)}return e},e.exports=l},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},i=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,s=r.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!s&&!a)return!1;for(t in e);return void 0===t||r.call(e,t)},l=function(e,t){s&&"__proto__"===t.name?s(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(a)return a(e,t).value}return e[t]};e.exports=function e(){var t,r,n,s,a,d,u=arguments[0],f=1,p=arguments.length,m=!1;for("boolean"==typeof u&&(m=u,u=arguments[1]||{},f=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});f<p;++f)if(null!=(t=arguments[f]))for(r in t)n=c(u,r),u!==(s=c(t,r))&&(m&&s&&(i(s)||(a=o(s)))?(a?(a=!1,d=n&&o(n)?n:[]):d=n&&i(n)?n:{},l(u,{name:r,newValue:e(m,d,s)})):void 0!==s&&l(u,{name:r,newValue:s}));return u}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=u(r(3)),o=u(r(2)),i=u(r(0)),l=u(r(16)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),n(t,[{key:"attach",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new i.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new o.default).insert(this.value(),(0,a.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var r=i.default.query(e,i.default.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,t)}},{key:"formatAt",value:function(e,t,r,n){this.format(r,n)}},{key:"insertAt",value:function(e,r,n){if("string"==typeof r&&r.endsWith("\n")){var a=i.default.create(g.blotName);this.parent.insertBefore(a,0===e?this:this.next),a.insertAt(0,r.slice(0,-1))}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n)}}]),t}(i.default.Embed);h.scope=i.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){f(this,t);var r=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cache={},r}return m(t,e),n(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(i.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),x(t))},new o.default).insert("\n",x(this))),this.cache.delta}},{key:"deleteAt",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),this.cache={}}},{key:"formatAt",value:function(e,r,n,a){r<=0||(i.default.query(n,i.default.Scope.BLOCK)?e+r===this.length()&&this.format(n,a):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(r,this.length()-e-1),n,a),this.cache={})}},{key:"insertAt",value:function(e,r,n){if(null!=n)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);if(0!==r.length){var a=r.split("\n"),o=a.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var i=this;a.reduce(function(e,t){return(i=i.split(e,!0)).insertAt(0,t),t.length},e+o.length)}}},{key:"insertBefore",value:function(e,r){var n=this.children.head;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r),n instanceof l.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,r),this.cache={}}},{key:"optimize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(0===e||e>=this.length()-1)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var a=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,r);return this.cache={},a}}]),t}(i.default.Block);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,a.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:x(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,i.default.Embed,d.default],t.bubbleFormats=x,t.BlockEmbed=h,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(50);var o=g(r(2)),i=g(r(14)),l=g(r(8)),c=g(r(9)),d=g(r(0)),u=r(15),f=g(u),p=g(r(3)),m=g(r(10)),h=g(r(34));function g(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,m.default)("quill"),b=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=v(t,n),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=d.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new i.default(this.scroll),this.selection=new f.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e){e===l.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(e,t){var n=r.selection.lastRange,s=n&&0===n.length?n.index:void 0;w.call(r,function(){return r.editor.update(null,t,s)},e)});var a=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+s+"<p><br></p></div>");this.setContents(a),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),m.default.level(e)}},{key:"find",value:function(e){return e.__quill||d.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&y.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var s=e.attrName||e.blotName;"string"==typeof s?this.register("formats/"+s,e,t):Object.keys(e).forEach(function(n){r.register(n,e[n],t)})}else null==this.imports[e]||n||y.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?d.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),a(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var r=e;(e=document.createElement("div")).classList.add(r)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var n=this,a=j(e,t,r),o=s(a,4);return e=o[0],t=o[1],r=o[3],w.call(this,function(){return n.editor.deleteText(e,t)},r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return w.call(this,function(){var n=r.getSelection(!0),s=new o.default;if(null==n)return s;if(d.default.query(e,d.default.Scope.BLOCK))s=r.editor.formatLine(n.index,n.length,x({},e,t));else{if(0===n.length)return r.selection.format(e,t),s;s=r.editor.formatText(n.index,n.length,x({},e,t))}return r.setSelection(n,l.default.sources.SILENT),s},n)}},{key:"formatLine",value:function(e,t,r,n,a){var o,i=this,l=j(e,t,r,n,a),c=s(l,4);return e=c[0],t=c[1],o=c[2],a=c[3],w.call(this,function(){return i.editor.formatLine(e,t,o)},a,e,0)}},{key:"formatText",value:function(e,t,r,n,a){var o,i=this,l=j(e,t,r,n,a),c=s(l,4);return e=c[0],t=c[1],o=c[2],a=c[3],w.call(this,function(){return i.editor.formatText(e,t,o)},a,e,0)}},{key:"getBounds",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t="number"==typeof e?this.selection.getBounds(e,r):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:t.bottom-n.top,height:t.height,left:t.left-n.left,right:t.right-n.left,top:t.top-n.top,width:t.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),n=s(r,2);return e=n[0],t=n[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),n=s(r,2);return e=n[0],t=n[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,r,n){var s=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return w.call(this,function(){return s.editor.insertEmbed(t,r,n)},a,t)}},{key:"insertText",value:function(e,t,r,n,a){var o,i=this,l=j(e,0,r,n,a),c=s(l,4);return e=c[0],o=c[2],a=c[3],w.call(this,function(){return i.editor.insertText(e,t,o)},a,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var n=this,a=j(e,t,r),o=s(a,4);return e=o[0],t=o[1],r=o[3],w.call(this,function(){return n.editor.removeFormat(e,t)},r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,function(){e=new o.default(e);var r=t.getLength(),n=t.editor.deleteText(0,r),s=t.editor.applyDelta(e),a=s.ops[s.ops.length-1];return null!=a&&"string"==typeof a.insert&&"\n"===a.insert[a.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),s.delete(1)),n.compose(s)},r)}},{key:"setSelection",value:function(t,r,n){if(null==t)this.selection.setRange(null,r||e.sources.API);else{var a=j(t,r,n),o=s(a,4);t=o[0],r=o[1],n=o[3],this.selection.setRange(new u.Range(t,r),n),n!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,r=(new o.default).insert(e);return this.setContents(r,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return w.call(this,function(){return e=new o.default(e),t.editor.applyDelta(e,r)},r,!0)}}]),e}();function v(e,t){if((t=(0,p.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==b.DEFAULTS.theme){if(t.theme=b.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=h.default;var r=(0,p.default)(!0,{},t.theme.DEFAULTS);[r,t].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});var n=Object.keys(r.modules).concat(Object.keys(t.modules)).reduce(function(e,t){var r=b.import("modules/"+t);return null==r?y.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e},{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,p.default)(!0,{},b.DEFAULTS,{modules:n},r,t),["bounds","container","scrollingContainer"].forEach(function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),t.modules=Object.keys(t.modules).reduce(function(e,r){return t.modules[r]&&(e[r]=t.modules[r]),e},{}),t}function w(e,t,r,n){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new o.default;var s=null==r?null:this.getSelection(),a=this.editor.delta,i=e();if(null!=s&&(!0===r&&(r=s.index),null==n?s=N(s,i,t):0!==n&&(s=N(s,r,n,t)),this.setSelection(s,l.default.sources.SILENT)),i.length()>0){var c,d,u=[l.default.events.TEXT_CHANGE,i,a,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(u)),t!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,u)}return i}function j(e,t,r,s,a){var o={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(a=s,s=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(a=s,s=r,r=t,t=0),"object"===(void 0===r?"undefined":n(r))?(o=r,a=s):"string"==typeof r&&(null!=s?o[r]=s:a=r),[e,t,o,a=a||l.default.sources.API]}function N(e,t,r,n){if(null==e)return null;var a=void 0,i=void 0;if(t instanceof o.default){var c=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,n!==l.default.sources.USER)}),d=s(c,2);a=d[0],i=d[1]}else{var f=[e.index,e.index+e.length].map(function(e){return e<t||e===t&&n===l.default.sources.USER?e:r>=0?e+r:Math.max(t,e+r)}),p=s(f,2);a=p[0],i=p[1]}return new u.Range(a,i-a)}b.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},b.events=l.default.events,b.sources=l.default.sources,b.version="1.3.7",b.imports={delta:o.default,parchment:d.default,"core/module":c.default,"core/theme":h.default},t.expandConfig=v,t.overload=j,t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=i(r(7)),o=i(r(0));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"formatAt",value:function(e,r,n,a){if(t.compare(this.statics.blotName,n)<0&&o.default.query(n,o.default.Scope.BLOT)){var i=this.isolate(e,r);a&&i.wrap(n,a)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,a)}},{key:"optimize",value:function(e){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(e,r){var n=t.order.indexOf(e),s=t.order.indexOf(r);return n>=0||s>=0?n-s:e===r?0:e<r?-1:1}}]),t}(o.default.Inline);l.allowedChildren=[l,o.default.Embed,a.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(0))&&n.__esModule?n:{default:n}).default.Text);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=o(r(54));function o(e){return e&&e.__esModule?e:{default:e}}var i=(0,o(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){var r;e.__quill&&e.__quill.emitter&&(r=e.__quill.emitter).handleDOM.apply(r,t)})})});var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",i.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(){i.log.apply(i,arguments),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach(function(t){var n=t.node,s=t.handler;(e.target===n||n.contains(e.target))&&s.apply(void 0,[e].concat(r))})}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(a.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r};n.DEFAULTS={},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["error","warn","log","info"],s="warn";function a(e){if(n.indexOf(e)<=n.indexOf(s)){for(var t,r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];(t=console)[e].apply(t,a)}}function o(e){return n.reduce(function(t,r){return t[r]=a.bind(console,r,e),t},{})}a.level=o.level=function(e){s=e},t.default=o},function(e,t,r){var n=Array.prototype.slice,s=r(52),a=r(53),o=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,d;if(i(e)||i(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=n.call(e),t=n.call(t),o(e,t,r));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var u=s(e),f=s(t)}catch(e){return!1}if(u.length!=f.length)return!1;for(u.sort(),f.sort(),c=u.length-1;c>=0;c--)if(u[c]!=f[c])return!1;for(c=u.length-1;c>=0;c--)if(d=u[c],!o(e[d],t[d],r))return!1;return typeof e==typeof t}(e,t,r))};function i(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=function(){function e(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;var s=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&n.Scope.LEVEL|s:this.scope=n.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=u(r(2)),i=u(r(0)),l=u(r(4)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),t}(c.default);h.blotName="code",h.tagName="CODE";var g=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),s(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,r){return t.insert(r).insert("\n",e.formats())},new o.default)}},{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r){var s=this.descendant(d.default,this.length()-1),o=n(s,1)[0];null!=o&&o.deleteAt(o.length()-1,1),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}},{key:"formatAt",value:function(e,r,n,s){if(0!==r&&null!=i.default.query(n,i.default.Scope.BLOCK)&&(n!==this.statics.blotName||s!==this.statics.formats(this.domNode))){var a=this.newlineIndex(e);if(!(a<0||a>=e+r)){var o=this.newlineIndex(e,!0)+1,l=a-o+1,c=this.isolate(o,l),d=c.next;c.format(n,s),d instanceof t&&d.formatAt(0,e-o+r-l,n,s)}}}},{key:"insertAt",value:function(e,t,r){if(null==r){var s=this.descendant(d.default,e),a=n(s,2),o=a[0],i=a[1];o.insertAt(i,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(i.default.create("text","\n")),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===r.statics.formats(r.domNode)&&(r.optimize(e),r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=i.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof i.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("spellcheck",!1),r}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=h,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=x(r(2)),i=x(r(20)),l=x(r(0)),c=x(r(13)),d=x(r(24)),u=r(4),f=x(u),p=x(r(16)),m=x(r(21)),h=x(r(11)),g=x(r(3));function x(e){return e&&e.__esModule?e:{default:e}}var y=/^[ -~]*$/,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return a(e,[{key:"applyDelta",value:function(e){var t=this,r=!1;this.scroll.update();var a=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce(function(e,t){if(1===t.insert){var r=(0,m.default)(t.attributes);return delete r.image,e.insert({image:t.attributes.image},r)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,m.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)},new o.default)}(e)).reduce(function(e,o){var c=o.retain||o.delete||o.insert.length||1,d=o.attributes||{};if(null!=o.insert){if("string"==typeof o.insert){var p=o.insert;p.endsWith("\n")&&r&&(r=!1,p=p.slice(0,-1)),e>=a&&!p.endsWith("\n")&&(r=!0),t.scroll.insertAt(e,p);var m=t.scroll.line(e),h=s(m,2),x=h[0],y=h[1],b=(0,g.default)({},(0,u.bubbleFormats)(x));if(x instanceof f.default){var v=x.descendant(l.default.Leaf,y),w=s(v,1)[0];b=(0,g.default)(b,(0,u.bubbleFormats)(w))}d=i.default.attributes.diff(b,d)||{}}else if("object"===n(o.insert)){var j=Object.keys(o.insert)[0];if(null==j)return e;t.scroll.insertAt(e,j,o.insert[j])}a+=c}return Object.keys(d).forEach(function(r){t.scroll.formatAt(e,c,r,d[r])}),e+c},0),e.reduce(function(e,r){return"number"==typeof r.delete?(t.scroll.deleteAt(e,r.delete),e):e+(r.retain||r.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new o.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach(function(s){if(null==r.scroll.whitelist||r.scroll.whitelist[s]){var a=r.scroll.lines(e,Math.max(t,1)),o=t;a.forEach(function(t){var a=t.length();if(t instanceof c.default){var i=e-t.offset(r.scroll),l=t.newlineIndex(i+o)-i+1;t.formatAt(i,l,s,n[s])}else t.format(s,n[s]);o-=a})}}),this.scroll.optimize(),this.update((new o.default).retain(e).retain(t,(0,m.default)(n)))}},{key:"formatText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach(function(s){r.scroll.formatAt(e,t,s,n[s])}),this.update((new o.default).retain(e).retain(t,(0,m.default)(n)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new o.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=[];0===t?this.scroll.path(e).forEach(function(e){var t=s(e,1)[0];t instanceof f.default?r.push(t):t instanceof l.default.Leaf&&n.push(t)}):(r=this.scroll.lines(e,t),n=this.scroll.descendants(l.default.Leaf,e,t));var a=[r,n].map(function(e){if(0===e.length)return{};for(var t=(0,u.bubbleFormats)(e.shift());Object.keys(t).length>0;){var r=e.shift();if(null==r)return t;t=v((0,u.bubbleFormats)(r),t)}return t});return g.default.apply(g.default,a)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"==typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new o.default).retain(e).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r)))}},{key:"insertText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach(function(s){r.scroll.formatAt(e,t.length,s,n[s])}),this.update((new o.default).retain(e).insert(t,(0,m.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===f.default.blotName&&!(e.children.length>1)&&e.children.head instanceof p.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),n=this.scroll.line(e+t),a=s(n,2),i=a[0],l=a[1],d=0,u=new o.default;null!=i&&(d=i instanceof c.default?i.newlineIndex(l)-l+1:i.length()-l,u=i.delta().slice(l,l+d-1).insert("\n"));var f=this.getContents(e,t+d).diff((new o.default).insert(r).concat(u)),p=(new o.default).retain(e).concat(f);return this.applyDelta(p)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(y)&&l.default.find(t[0].target)){var s=l.default.find(t[0].target),a=(0,u.bubbleFormats)(s),i=s.offset(this.scroll),c=t[0].oldValue.replace(d.default.CONTENTS,""),f=(new o.default).insert(c),p=(new o.default).insert(s.value());e=(new o.default).retain(i).concat(f.diff(p,r)).reduce(function(e,t){return t.insert?e.insert(t.insert,a):e.push(t)},new o.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&(0,h.default)(n.compose(e),this.delta)||(e=n.diff(this.delta,r));return e}}]),e}();function v(e,t){return Object.keys(t).reduce(function(r,n){return null==e[n]||(t[n]===e[n]?r[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(r[n]=t[n].concat([e[n]])):r[n]=[t[n],e[n]]),r},{})}t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=c(r(0)),o=c(r(21)),i=c(r(11)),l=c(r(8));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=(0,c(r(10)).default)("quill:selection"),p=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this.index=t,this.length=r},m=function(){function e(t,r){var n=this;u(this,e),this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=a.default.create("cursor",this),this.lastRange=this.savedRange=new p(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){n.mouseDown||setTimeout(n.update.bind(n,l.default.sources.USER),1)}),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&n.update(l.default.sources.SILENT)}),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,function(){if(n.hasFocus()){var e=n.getNativeRange();null!=e&&e.start.node!==n.cursor.textNode&&n.emitter.once(l.default.events.SCROLL_UPDATE,function(){try{n.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(e){}})}}),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,function(e,t){if(t.range){var r=t.range,s=r.startNode,a=r.startOffset,o=r.endNode,i=r.endOffset;n.setNativeRange(s,a,o,i)}}),this.update(l.default.sources.SILENT)}return s(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(l.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!a.default.query(e,a.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var n=a.default.find(r.start.node,!1);if(null==n)return;if(n instanceof a.default.Leaf){var s=n.split(r.start.offset);n.parent.insertBefore(this.cursor,s)}else n.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;var s=void 0,a=this.scroll.leaf(e),o=n(a,2),i=o[0],l=o[1];if(null==i)return null;var c=i.position(l,!0),d=n(c,2);s=d[0],l=d[1];var u=document.createRange();if(t>0){u.setStart(s,l);var f=this.scroll.leaf(e+t),p=n(f,2);if(i=p[0],l=p[1],null==i)return null;var m=i.position(l,!0),h=n(m,2);return s=h[0],l=h[1],u.setEnd(s,l),u.getBoundingClientRect()}var g="left",x=void 0;return s instanceof Text?(l<s.data.length?(u.setStart(s,l),u.setEnd(s,l+1)):(u.setStart(s,l-1),u.setEnd(s,l),g="right"),x=u.getBoundingClientRect()):(x=i.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:x.top+x.height,height:x.height,left:x[g],right:x[g],top:x.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var r=this.normalizeNative(t);return f.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);var s=r.map(function(e){var r=n(e,2),s=r[0],o=r[1],i=a.default.find(s,!0),l=i.offset(t.scroll);return 0===o?l:i instanceof a.default.Container?l+i.length():l+i.index(s,o)}),o=Math.min(Math.max.apply(Math,d(s)),this.scroll.length()-1),i=Math.min.apply(Math,[o].concat(d(s)));return new p(i,o-i)}},{key:"normalizeNative",value:function(e){if(!h(this.root,e.startContainer)||!e.collapsed&&!h(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r}),t}},{key:"rangeToNative",value:function(e){var t=this,r=e.collapsed?[e.index]:[e.index,e.index+e.length],s=[],a=this.scroll.length();return r.forEach(function(e,r){e=Math.min(a-1,e);var o,i=t.scroll.leaf(e),l=n(i,2),c=l[0],d=l[1],u=c.position(d,0!==r),f=n(u,2);o=f[0],d=f[1],s.push(o,d)}),s.length<2&&(s=s.concat(s)),s}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var r=this.getBounds(t.index,t.length);if(null!=r){var s=this.scroll.length()-1,a=this.scroll.line(Math.min(t.index,s)),o=n(a,1)[0],i=o;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,s));i=n(l,1)[0]}if(null!=o&&null!=i){var c=e.getBoundingClientRect();r.top<c.top?e.scrollTop-=c.top-r.top:r.bottom>c.bottom&&(e.scrollTop+=r.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(f.info("setNativeRange",e,t,r,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=r.parentNode){var a=document.getSelection();if(null!=a)if(null!=e){this.hasFocus()||this.root.focus();var o=(this.getNativeRange()||{}).native;if(null==o||s||e!==o.startContainer||t!==o.startOffset||r!==o.endContainer||n!==o.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==r.tagName&&(n=[].indexOf.call(r.parentNode.childNodes,r),r=r.parentNode);var i=document.createRange();i.setStart(e,t),i.setEnd(r,n),a.removeAllRanges(),a.addRange(i)}}else a.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof t&&(r=t,t=!1),f.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,d(n).concat([t]))}else this.setNativeRange(null);this.update(r)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,r=this.getRange(),s=n(r,2),a=s[0],c=s[1];if(this.lastRange=a,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,i.default)(t,this.lastRange)){var d;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var u,f=[l.default.events.SELECTION_CHANGE,(0,o.default)(this.lastRange),(0,o.default)(t),e];(d=this.emitter).emit.apply(d,[l.default.events.EDITOR_CHANGE].concat(f)),e!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,f)}}}]),e}();function h(e,t){try{t.parentNode}catch(e){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=p,t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"insertInto",value:function(e,r){0===e.children.length?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((n=r(0))&&n.__esModule?n:{default:n}).default.Embed);o.blotName="break",o.tagName="BR",t.default=o},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(44),o=r(30),i=r(1),l=function(e){function t(t){var r=e.call(this,t)||this;return r.build(),r}return s(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},t.prototype.build=function(){var e=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var r=c(t);e.insertBefore(r,e.children.head||void 0)}catch(e){if(e instanceof i.ParchmentError)return;throw e}})},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,function(e,t,r){e.deleteAt(t,r)})},t.prototype.descendant=function(e,r){var n=this.children.find(r),s=n[0],a=n[1];return null==e.blotName&&e(s)||null!=e.blotName&&s instanceof e?[s,a]:s instanceof t?s.descendant(e,a):[null,-1]},t.prototype.descendants=function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=Number.MAX_VALUE);var s=[],a=n;return this.children.forEachAt(r,n,function(r,n,o){(null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e)&&s.push(r),r instanceof t&&(s=s.concat(r.descendants(e,n,a))),a-=o}),s},t.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,r,n){this.children.forEachAt(e,t,function(e,t,s){e.formatAt(t,s,r,n)})},t.prototype.insertAt=function(e,t,r){var n=this.children.find(e),s=n[0],a=n[1];if(s)s.insertAt(a,t,r);else{var o=null==r?i.create("text",t):i.create(t,r);this.appendChild(o)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new i.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},t.prototype.moveChildren=function(e,t){this.children.forEach(function(r){e.insertBefore(r,t)})},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var r=i.create(this.statics.defaultChild);this.appendChild(r),r.optimize(t)}else this.remove()},t.prototype.path=function(e,r){void 0===r&&(r=!1);var n=this.children.find(e,r),s=n[0],a=n[1],o=[[this,e]];return s instanceof t?o.concat(s.path(a,r)):(null!=s&&o.push([s,a]),o)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(e,this.length(),function(e,n,s){e=e.split(n,t),r.appendChild(e)}),r},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var r=this,n=[],s=[];e.forEach(function(e){e.target===r.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),s.push.apply(s,e.removedNodes))}),s.forEach(function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=i.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==r.domNode||t.detach())}}),n.filter(function(e){return e.parentNode==r.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var t=null;null!=e.nextSibling&&(t=i.find(e.nextSibling));var n=c(e);n.next==t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(r),r.insertBefore(n,t||void 0))})},t}(o.default);function c(e){var t=i.find(e);if(null==t)try{t=i.create(e)}catch(r){t=i.create(i.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(e){t.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(12),o=r(31),i=r(17),l=r(1),c=function(e){function t(t){var r=e.call(this,t)||this;return r.attributes=new o.default(r.domNode),r}return s(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var r=l.query(e);r instanceof a.default?this.attributes.attribute(r,t):t&&(null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,r){var n=e.prototype.replaceWith.call(this,t,r);return this.attributes.copy(n),n},t.prototype.update=function(t,r){var n=this;e.prototype.update.call(this,t,r),t.some(function(e){return e.target===n.domNode&&"attributes"===e.type})&&this.attributes.build()},t.prototype.wrap=function(r,n){var s=e.prototype.wrap.call(this,r,n);return s instanceof t&&s.statics.scope===this.statics.scope&&this.attributes.move(s),s},t}(i.default);t.default=c},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(30),o=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=o.Scope.INLINE_BLOT,t}(a.default);t.default=i},function(e,t,r){var n=r(11),s=r(3),a={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=s(!0,{},t);for(var a in r||(n=Object.keys(n).reduce(function(e,t){return null!=n[t]&&(e[t]=n[t]),e},{})),e)void 0!==e[a]&&void 0===t[a]&&(n[a]=e[a]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce(function(r,s){return n(e[s],t[s])||(r[s]=void 0===t[s]?null:t[s]),r},{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!=typeof e)return t;if("object"==typeof t){if(!r)return t;var n=Object.keys(t).reduce(function(r,n){return void 0===e[n]&&(r[n]=t[n]),r},{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new o(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function o(e){this.ops=e,this.index=0,this.offset=0}o.prototype.hasNext=function(){return this.peekLength()<1/0},o.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,n=a.length(t);if(e>=n-r?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var s={};return t.attributes&&(s.attributes=t.attributes),"number"==typeof t.retain?s.retain=e:"string"==typeof t.insert?s.insert=t.insert.substr(r,e):s.insert=t.insert,s}return{retain:1/0}},o.prototype.peek=function(){return this.ops[this.index]},o.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},o.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},o.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]},e.exports=a},function(e,t){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{n=Promise}catch(e){n=function(){}}function s(a,i,l,c,d){"object"==typeof i&&(l=i.depth,c=i.prototype,d=i.includeNonEnumerable,i=i.circular);var u=[],f=[],p="undefined"!=typeof Buffer;return void 0===i&&(i=!0),void 0===l&&(l=1/0),function a(l,m){if(null===l)return null;if(0===m)return l;var h,g;if("object"!=typeof l)return l;if(e(l,t))h=new t;else if(e(l,r))h=new r;else if(e(l,n))h=new n(function(e,t){l.then(function(t){e(a(t,m-1))},function(e){t(a(e,m-1))})});else if(s.__isArray(l))h=[];else if(s.__isRegExp(l))h=new RegExp(l.source,o(l)),l.lastIndex&&(h.lastIndex=l.lastIndex);else if(s.__isDate(l))h=new Date(l.getTime());else{if(p&&Buffer.isBuffer(l))return h=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(h),h;e(l,Error)?h=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),h=Object.create(g)):(h=Object.create(c),g=c)}if(i){var x=u.indexOf(l);if(-1!=x)return f[x];u.push(l),f.push(h)}for(var y in e(l,t)&&l.forEach(function(e,t){var r=a(t,m-1),n=a(e,m-1);h.set(r,n)}),e(l,r)&&l.forEach(function(e){var t=a(e,m-1);h.add(t)}),l){var b;g&&(b=Object.getOwnPropertyDescriptor(g,y)),b&&null==b.set||(h[y]=a(l[y],m-1))}if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(l);for(y=0;y<v.length;y++){var w=v[y];(!(N=Object.getOwnPropertyDescriptor(l,w))||N.enumerable||d)&&(h[w]=a(l[w],m-1),N.enumerable||Object.defineProperty(h,w,{enumerable:!1}))}}if(d){var j=Object.getOwnPropertyNames(l);for(y=0;y<j.length;y++){var N,k=j[y];(N=Object.getOwnPropertyDescriptor(l,k))&&N.enumerable||(h[k]=a(l[k],m-1),Object.defineProperty(h,k,{enumerable:!1}))}}return h}(a,l)}function a(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return s.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},s.__objToStr=a,s.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},s.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},s.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},s.__getRegExpFlags=o,s}();"object"==typeof e&&e.exports&&(e.exports=r)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=p(r(0)),i=p(r(8)),l=r(4),c=p(l),d=p(r(16)),u=p(r(13)),f=p(r(25));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){return e instanceof c.default||e instanceof l.BlockEmbed}var h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emitter=r.emitter,Array.isArray(r.whitelist)&&(n.whitelist=r.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),n.domNode.addEventListener("DOMNodeInserted",function(){}),n.optimize(),n.enable(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,r){var s=this.line(e),o=n(s,2),i=o[0],c=o[1],f=this.line(e+r),p=n(f,1)[0];if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),null!=p&&i!==p&&c>0){if(i instanceof l.BlockEmbed||p instanceof l.BlockEmbed)return void this.optimize();if(i instanceof u.default){var m=i.newlineIndex(i.length(),!0);if(m>-1&&(i=i.split(m+1))===p)return void this.optimize()}else if(p instanceof u.default){var h=p.newlineIndex(0);h>-1&&p.split(h+1)}var g=p.children.head instanceof d.default?null:p.children.head;i.moveChildren(p,g),i.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,r,n,s){(null==this.whitelist||this.whitelist[n])&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,s),this.optimize())}},{key:"insertAt",value:function(e,r,n){if(null==n||null==this.whitelist||this.whitelist[r]){if(e>=this.length())if(null==n||null==o.default.query(r,o.default.Scope.BLOCK)){var s=o.default.create(this.statics.defaultChild);this.appendChild(s),null==n&&r.endsWith("\n")&&(r=r.slice(0,-1)),s.insertAt(0,r,n)}else{var i=o.default.create(r,n);this.appendChild(i)}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);this.optimize()}}},{key:"insertBefore",value:function(e,r){if(e.statics.scope===o.default.Scope.INLINE_BLOT){var n=o.default.create(this.statics.defaultChild);n.appendChild(e),e=n}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(m,e)}},{key:"lines",value:function(){return function e(t,r,n){var s=[],a=n;return t.children.forEachAt(r,n,function(t,r,n){m(t)?s.push(t):t instanceof o.default.Container&&(s=s.concat(e(t,r,a))),a-=n}),s}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,r),e.length>0&&this.emitter.emit(i.default.events.SCROLL_OPTIMIZE,e,r))}},{key:"path",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var r=i.default.sources.USER;"string"==typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(i.default.events.SCROLL_BEFORE_UPDATE,r,e),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(i.default.events.SCROLL_UPDATE,r,e)}}}]),t}(o.default.Scroll);h.blotName="scroll",h.className="ql-editor",h.tagName="DIV",h.defaultChild="block",h.allowedChildren=[c.default,l.BlockEmbed,f.default],t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=h(r(21)),i=h(r(11)),l=h(r(3)),c=h(r(2)),d=h(r(20)),u=h(r(0)),f=h(r(5)),p=h(r(10)),m=h(r(9));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(0,p.default)("quill:keyboard"),y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.bindings={},Object.keys(n.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])}),n.addBinding({key:t.keys.ENTER,shiftKey:null},k),n.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},w),n.addBinding({key:t.keys.DELETE},{collapsed:!0},j)):(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},w),n.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},j)),n.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},N),n.addBinding({key:t.keys.DELETE},{collapsed:!1},N),n.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},w),n.listen(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"match",value:function(e,t){return t=S(t),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(r){return!!t[r]!==e[r]&&null!==t[r]})&&t.key===(e.which||e.keyCode)}}]),a(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S(e);if(null==n||null==n.key)return x.warn("Attempted to add invalid keyboard binding",n);"function"==typeof t&&(t={handler:t}),"function"==typeof r&&(r={handler:r}),n=(0,l.default)(n,t,r),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",function(r){if(!r.defaultPrevented){var a=r.which||r.keyCode,o=(e.bindings[a]||[]).filter(function(e){return t.match(r,e)});if(0!==o.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),d=s(c,2),f=d[0],p=d[1],m=e.quill.getLeaf(l.index),h=s(m,2),g=h[0],x=h[1],y=0===l.length?[g,x]:e.quill.getLeaf(l.index+l.length),b=s(y,2),v=b[0],w=b[1],j=g instanceof u.default.Text?g.value().slice(0,x):"",N=v instanceof u.default.Text?v.value().slice(w):"",k={collapsed:0===l.length,empty:0===l.length&&f.length()<=1,format:e.quill.getFormat(l),offset:p,prefix:j,suffix:N};o.some(function(t){if(null!=t.collapsed&&t.collapsed!==k.collapsed)return!1;if(null!=t.empty&&t.empty!==k.empty)return!1;if(null!=t.offset&&t.offset!==k.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==k.format[e]}))return!1}else if("object"===n(t.format)&&!Object.keys(t.format).every(function(e){return!0===t.format[e]?null!=k.format[e]:!1===t.format[e]?null==k.format[e]:(0,i.default)(t.format[e],k.format[e])}))return!1;return!(null!=t.prefix&&!t.prefix.test(k.prefix)||null!=t.suffix&&!t.suffix.test(k.suffix)||!0===t.handler.call(e,l,k))})&&r.preventDefault()}}}})}}]),t}(m.default);function v(e,t){var r,n=e===b.keys.LEFT?"prefix":"suffix";return g(r={key:e,shiftKey:t,altKey:null},n,/^$/),g(r,"handler",function(r){var n=r.index;e===b.keys.RIGHT&&(n+=r.length+1);var a=this.quill.getLeaf(n);return!(s(a,1)[0]instanceof u.default.Embed&&(e===b.keys.LEFT?t?this.quill.setSelection(r.index-1,r.length+1,f.default.sources.USER):this.quill.setSelection(r.index-1,f.default.sources.USER):t?this.quill.setSelection(r.index,r.length+1,f.default.sources.USER):this.quill.setSelection(r.index+r.length+1,f.default.sources.USER),1))}),r}function w(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var r=this.quill.getLine(e.index),n=s(r,1)[0],a={};if(0===t.offset){var o=this.quill.getLine(e.index-1),i=s(o,1)[0];if(null!=i&&i.length()>1){var l=n.formats(),c=this.quill.getFormat(e.index-1,1);a=d.default.attributes.diff(l,c)||{}}}var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-u,u,f.default.sources.USER),Object.keys(a).length>0&&this.quill.formatLine(e.index-u,u,a,f.default.sources.USER),this.quill.focus()}}function j(e,t){var r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-r)){var n={},a=0,o=this.quill.getLine(e.index),i=s(o,1)[0];if(t.offset>=i.length()-1){var l=this.quill.getLine(e.index+1),c=s(l,1)[0];if(c){var u=i.formats(),p=this.quill.getFormat(e.index,1);n=d.default.attributes.diff(u,p)||{},a=c.length()}}this.quill.deleteText(e.index,r,f.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index+a-1,r,n,f.default.sources.USER)}}function N(e){var t=this.quill.getLines(e),r={};if(t.length>1){var n=t[0].formats(),s=t[t.length-1].formats();r=d.default.attributes.diff(s,n)||{}}this.quill.deleteText(e,f.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index,1,r,f.default.sources.USER),this.quill.setSelection(e.index,f.default.sources.SILENT),this.quill.focus()}function k(e,t){var r=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var n=Object.keys(t.format).reduce(function(e,r){return u.default.query(r,u.default.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e},{});this.quill.insertText(e.index,"\n",n,f.default.sources.USER),this.quill.setSelection(e.index+1,f.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach(function(e){null==n[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],f.default.sources.USER))})}function _(e){return{key:b.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var r=u.default.query("code-block"),n=t.index,a=t.length,o=this.quill.scroll.descendant(r,n),i=s(o,2),l=i[0],c=i[1];if(null!=l){var d=this.quill.getIndex(l),p=l.newlineIndex(c,!0)+1,m=l.newlineIndex(d+c+a),h=l.domNode.textContent.slice(p,m).split("\n");c=0,h.forEach(function(t,s){e?(l.insertAt(p+c,r.TAB),c+=r.TAB.length,0===s?n+=r.TAB.length:a+=r.TAB.length):t.startsWith(r.TAB)&&(l.deleteAt(p+c,r.TAB.length),c-=r.TAB.length,0===s?n-=r.TAB.length:a-=r.TAB.length),c+=t.length+1}),this.quill.update(f.default.sources.USER),this.quill.setSelection(n,a,f.default.sources.SILENT)}}}}function C(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,r){this.quill.format(e,!r.format[e],f.default.sources.USER)}}}function S(e){if("string"==typeof e||"number"==typeof e)return S({key:e});if("object"===(void 0===e?"undefined":n(e))&&(e=(0,o.default)(e,!1)),"string"==typeof e.key)if(null!=b.keys[e.key.toUpperCase()])e.key=b.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[y]=e.shortKey,delete e.shortKey),e}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:C("bold"),italic:C("italic"),underline:C("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",f.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",f.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",f.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,f.default.sources.USER)}},"indent code-block":_(!0),"outdent code-block":_(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,f.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,f.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,f.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,f.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,f.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),r=s(t,2),n=r[0],a=r[1],o=(0,l.default)({},n.formats(),{list:"checked"}),i=(new c.default).retain(e.index).insert("\n",o).retain(n.length()-a-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,f.default.sources.USER),this.quill.setSelection(e.index+1,f.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),n=s(r,2),a=n[0],o=n[1],i=(new c.default).retain(e.index).insert("\n",t.format).retain(a.length()-o-1).retain(1,{header:null});this.quill.updateContents(i,f.default.sources.USER),this.quill.setSelection(e.index+1,f.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,n=this.quill.getLine(e.index),a=s(n,2),o=a[0],i=a[1];if(i>r)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",f.default.sources.USER),this.quill.history.cutoff();var d=(new c.default).retain(e.index-i).delete(r+1).retain(o.length()-2-i).retain(1,{list:l});this.quill.updateContents(d,f.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,f.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),r=s(t,2),n=r[0],a=r[1],o=(new c.default).retain(e.index+n.length()-a-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(o,f.default.sources.USER)}},"embed left":v(b.keys.LEFT,!1),"embed left shift":v(b.keys.LEFT,!0),"embed right":v(b.keys.RIGHT,!1),"embed right shift":v(b.keys.RIGHT,!0)}},t.default=b,t.SHORTKEY=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=i(r(0)),o=i(r(7));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selection=r,n.textNode=document.createTextNode(t.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"value",value:function(){}}]),s(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,r){if(0!==this._length)return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);for(var s=this,o=0;null!=s&&s.statics.scope!==a.default.Scope.BLOCK_BLOT;)o+=s.offset(s.parent),s=s.parent;null!=s&&(this._length=t.CONTENTS.length,s.optimize(),s.formatAt(o,t.CONTENTS.length,e,r),this._length=0)}},{key:"index",value:function(e,r){return e===this.textNode?0:n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,r=this.selection.getNativeRange(),n=void 0,s=void 0,i=void 0;if(null!=r&&r.start.node===e&&r.end.node===e){var l=[e,r.start.offset,r.end.offset];n=l[0],s=l[1],i=l[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var c=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof o.default?(n=this.next.domNode,this.next.insertAt(0,c),this.textNode.data=t.CONTENTS):(this.textNode.data=c,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=s){var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}([s,i].map(function(e){return Math.max(0,Math.min(n.data.length,e-1))}),2);return s=d[0],i=d[1],{startNode:n,startOffset:s,endNode:n,endOffset:i}}}}},{key:"update",value:function(e,t){var r=this;if(e.some(function(e){return"characterData"===e.type&&e.target===r.textNode})){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}]),t}(a.default.Embed);l.blotName="cursor",l.className="ql-cursor",l.tagName="span",l.CONTENTS="\ufeff",t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(0)),s=r(4),a=o(s);function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default.Container);i.allowedChildren=[a.default,s.BlockEmbed,i],t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=(n=r(0))&&n.__esModule?n:{default:n},i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"value",value:function(e){var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return r.startsWith("rgb(")?"#"+(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join(""):r}}]),t}(o.default.Attributor.Style),l=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),c=new i("color","color",{scope:o.default.Scope.INLINE});t.ColorAttributor=i,t.ColorClass=l,t.ColorStyle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);r=this.constructor.sanitize(r),this.domNode.setAttribute("href",r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return i(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);function i(e,t){var r=document.createElement("a");r.href=e;var n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}o.blotName="link",o.tagName="A",o.SANITIZED_URL="about:blank",o.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=o,t.sanitize=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=i(r(23)),o=i(r(107));function i(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var d=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){r.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case a.default.keys.ENTER:r.togglePicker();break;case a.default.keys.ESCAPE:r.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return s(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",function(){t.selectItem(r,!0)}),r.addEventListener("keydown",function(e){switch(e.keyCode){case a.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case a.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=o.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach(function(r){var n=e.buildItem(r);t.appendChild(n),!0===r.selected&&e.selectItem(n)}),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":n(Event))){var s=document.createEvent("Event");s.initEvent("change",!0,!0),this.select.dispatchEvent(s)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var r=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(r(0)),s=x(r(5)),a=r(4),o=x(a),i=x(r(16)),l=x(r(25)),c=x(r(24)),d=x(r(35)),u=x(r(6)),f=x(r(22)),p=x(r(7)),m=x(r(55)),h=x(r(42)),g=x(r(23));function x(e){return e&&e.__esModule?e:{default:e}}s.default.register({"blots/block":o.default,"blots/block/embed":a.BlockEmbed,"blots/break":i.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":d.default,"blots/inline":u.default,"blots/scroll":f.default,"blots/text":p.default,"modules/clipboard":m.default,"modules/history":h.default,"modules/keyboard":g.default}),n.default.register(o.default,i.default,c.default,u.default,f.default,p.default),t.default=s.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=function(){function e(e){this.domNode=e,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return n.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,r,s){var a=this.isolate(e,t);if(null!=n.query(r,n.Scope.BLOT)&&s)a.wrap(r,s);else if(null!=n.query(r,n.Scope.ATTRIBUTE)){var o=n.create(this.statics.scope);a.wrap(o),o.format(r,s)}},e.prototype.insertAt=function(e,t,r){var s=null==r?n.create("text",t):n.create(t,r),a=this.split(e);this.parent.insertBefore(s,a)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var r=this.split(e);return r.split(t),r},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var r="string"==typeof e?n.create(e,t):e;return r.replace(this),r},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var r="string"==typeof e?n.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(r,this.next),r.appendChild(this),r},e.blotName="abstract",e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),s=r(32),a=r(33),o=r(1),i=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=n.default.keys(this.domNode),r=s.default.keys(this.domNode),i=a.default.keys(this.domNode);t.concat(r).concat(i).forEach(function(t){var r=o.query(t,o.Scope.ATTRIBUTE);r instanceof n.default&&(e.attributes[r.attrName]=r)})},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(r){var n=t.attributes[r].value(t.domNode);e.format(r,n)})},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,r){return t[r]=e.attributes[r].value(e.domNode),t},{})},e}();t.default=i},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});function a(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){a(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(a(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=o},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});function a(e){var t=e.split("-"),r=t.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return t[0]+r}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){return e.split(":")[0].trim()})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[a(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[a(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[a(this.keyName)];return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r,this.modules={}}return n(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();s.DEFAULTS={modules:{}},s.themes={default:s},t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=i(r(0)),o=i(r(7));function i(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(e){r.contentNode.appendChild(e)}),r.leftGuard=document.createTextNode(l),r.rightGuard=document.createTextNode(l),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"index",value:function(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"restore",value:function(e){var t=void 0,r=void 0,n=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof o.default){var s=this.prev.length();this.prev.insertAt(s,n),t={startNode:this.prev.domNode,startOffset:s+n.length}}else r=document.createTextNode(n),this.parent.insertBefore(a.default.create(r),this),t={startNode:r,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof o.default?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(r=document.createTextNode(n),this.parent.insertBefore(a.default.create(r),this.next),t={startNode:r,startOffset:n.length}));return e.data=l,t}},{key:"update",value:function(e,t){var r=this;e.forEach(function(e){if("characterData"===e.type&&(e.target===r.leftGuard||e.target===r.rightGuard)){var n=r.restore(e.target);n&&(t.range=n)}})}}]),t}(a.default.Embed);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var n,s=(n=r(0))&&n.__esModule?n:{default:n},a={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},o=new s.default.Attributor.Attribute("align","align",a),i=new s.default.Attributor.Class("align","ql-align",a),l=new s.default.Attributor.Style("align","text-align",a);t.AlignAttribute=o,t.AlignClass=i,t.AlignStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n,s=(n=r(0))&&n.__esModule?n:{default:n},a=r(26),o=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),i=new a.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});t.BackgroundClass=o,t.BackgroundStyle=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var n,s=(n=r(0))&&n.__esModule?n:{default:n},a={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},o=new s.default.Attributor.Attribute("direction","dir",a),i=new s.default.Attributor.Class("direction","ql-direction",a),l=new s.default.Attributor.Style("direction","direction",a);t.DirectionAttribute=o,t.DirectionClass=i,t.DirectionStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=(n=r(0))&&n.__esModule?n:{default:n},i={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},l=new o.default.Attributor.Class("font","ql-font",i),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"value",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(o.default.Attributor.Style),d=new c("font","font-family",i);t.FontStyle=d,t.FontClass=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var n,s=(n=r(0))&&n.__esModule?n:{default:n},a=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),o=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=a,t.SizeStyle=o},function(e,t,r){"use strict";e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=o(r(0)),a=o(r(5));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(a.default.events.EDITOR_CHANGE,function(e,t,r,s){e!==a.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&s!==a.default.sources.USER?n.transform(t):n.record(t,r))}),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var r=this.stack[e].pop();this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],a.default.sources.USER),this.ignoreChange=!1;var n=l(r[e]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var r=this.quill.getContents().diff(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var s=this.stack.undo.pop();r=r.compose(s.undo),e=s.redo.compose(e)}else this.lastRecorded=n;this.stack.undo.push({redo:e,undo:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(o(r(9)).default);function l(e){var t=e.reduce(function(e,t){return e+(t.delete||0)},0),r=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(e){return null!=s.default.query(e,s.default.Scope.BLOCK)}))}(e)&&(r-=1),r}i.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=i,t.getLastChangeIndex=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=m(r(3)),o=m(r(2)),i=m(r(8)),l=m(r(23)),c=m(r(34)),d=m(r(59)),u=m(r(60)),f=m(r(28)),p=m(r(61));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],v=[!1,"serif","monospace"],w=["1","2","3",!1],j=["small",!1,"large","huge"],N=function(e){function t(e,r){h(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return e.emitter.listenDOM("click",document.body,function t(r){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(r.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach(function(e){e.container.contains(r.target)||e.close()})}),n}return x(t,e),n(t,[{key:"addModule",value:function(e){var r=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(r),r}},{key:"buildButtons",value:function(e,t){e.forEach(function(e){(e.getAttribute("class")||"").split(/\s+/).forEach(function(r){if(r.startsWith("ql-")&&(r=r.slice(3),null!=t[r]))if("direction"===r)e.innerHTML=t[r][""]+t[r].rtl;else if("string"==typeof t[r])e.innerHTML=t[r];else{var n=e.value||"";null!=n&&t[r][n]&&(e.innerHTML=t[r][n])}})})}},{key:"buildPickers",value:function(e,t){var r=this;this.pickers=e.map(function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&_(e,y),new u.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var r=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&_(e,b,"background"===r?"#ffffff":"#000000"),new d.default(e,t[r])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?_(e,v):e.classList.contains("ql-header")?_(e,w):e.classList.contains("ql-size")&&_(e,j)),new f.default(e)}),this.quill.on(i.default.events.EDITOR_CHANGE,function(){r.pickers.forEach(function(e){e.update()})})}}]),t}(c.default);N.DEFAULTS=(0,a.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",function(){if(null!=t.files&&null!=t.files[0]){var r=new FileReader;r.onload=function(r){var n=e.quill.getSelection(!0);e.quill.updateContents((new o.default).retain(n.index).delete(n.length).insert({image:r.target.result}),i.default.sources.USER),e.quill.setSelection(n.index+1,i.default.sources.SILENT),t.value=""},r.readAsDataURL(t.files[0])}}),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var k=function(e){function t(e,r){h(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return x(t,e),n(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e,t,r=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var n=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",r,i.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",r,i.default.sources.USER)),this.quill.root.scrollTop=n;break;case"video":r=(t=(e=r).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e;case"formula":if(!r)break;var s=this.quill.getSelection(!0);if(null!=s){var a=s.index+s.length;this.quill.insertEmbed(a,this.root.getAttribute("data-mode"),r,i.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(a+1," ",i.default.sources.USER),this.quill.setSelection(a+2,i.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(p.default);function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(function(t){var n=document.createElement("option");t===r?n.setAttribute("selected","selected"):n.setAttribute("value",t),e.appendChild(n)})}t.BaseTooltip=k,t.default=N},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,n=this.iterator();r=n();){var s=r.length();if(e<s||t&&e===s&&(null==r.next||0!==r.next.length()))return[r,e];e-=s}return[null,0]},e.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},e.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var n,s=this.find(e),a=s[0],o=e-s[1],i=this.iterator(a);(n=i())&&o<e+t;){var l=n.length();e>o?r(n,e-o,Math.min(t,o+l-e)):r(n,0,Math.min(l,e+t-o)),o+=l}},e.prototype.map=function(e){return this.reduce(function(t,r){return t.push(e(r)),t},[])},e.prototype.reduce=function(e,t){for(var r,n=this.iterator();r=n();)t=e(t,r);return t},e}();t.default=n},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),o=r(1),i={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var r=e.call(this,t)||this;return r.scroll=r,r.observer=new MutationObserver(function(e){r.update(e)}),r.observer.observe(r.domNode,i),r.attach(),r}return s(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,r){this.update(),0===t&&r===this.length()?this.children.forEach(function(e){e.remove()}):e.prototype.deleteAt.call(this,t,r)},t.prototype.formatAt=function(t,r,n,s){this.update(),e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.insertAt=function(t,r,n){this.update(),e.prototype.insertAt.call(this,t,r,n)},t.prototype.optimize=function(t,r){var n=this;void 0===t&&(t=[]),void 0===r&&(r={}),e.prototype.optimize.call(this,r);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)t.push(s.pop());for(var i=function(e,t){void 0===t&&(t=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(null==e.domNode[o.DATA_KEY].mutations&&(e.domNode[o.DATA_KEY].mutations=[]),t&&i(e.parent))},l=function(e){null!=e.domNode[o.DATA_KEY]&&null!=e.domNode[o.DATA_KEY].mutations&&(e instanceof a.default&&e.children.forEach(l),e.optimize(r))},c=t,d=0;c.length>0;d+=1){if(d>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(e){var t=o.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(i(o.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){var t=o.find(e,!1);i(t,!1),t instanceof a.default&&t.children.forEach(function(e){i(e,!1)})})):"attributes"===e.type&&i(t.prev)),i(t))}),this.children.forEach(l),s=(c=[].slice.call(this.observer.takeRecords())).slice();s.length>0;)t.push(s.pop())}},t.prototype.update=function(t,r){var n=this;void 0===r&&(r={}),(t=t||this.observer.takeRecords()).map(function(e){var t=o.find(e.target,!0);return null==t?null:null==t.domNode[o.DATA_KEY].mutations?(t.domNode[o.DATA_KEY].mutations=[e],t):(t.domNode[o.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==n&&null!=e.domNode[o.DATA_KEY]&&e.update(e.domNode[o.DATA_KEY].mutations||[],r)}),null!=this.domNode[o.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,r),this.optimize(t,r)},t.blotName="scroll",t.defaultChild="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="DIV",t}(a.default);t.default=l},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(18),o=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(r){if(r.tagName!==t.tagName)return e.formats.call(this,r)},t.prototype.format=function(r,n){var s=this;r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):(this.children.forEach(function(e){e instanceof a.default||(e=e.wrap(t.blotName,!0)),s.attributes.copy(e)}),this.unwrap())},t.prototype.formatAt=function(t,r,n,s){null!=this.formats()[n]||o.query(n,o.Scope.ATTRIBUTE)?this.isolate(t,r).format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var s=this.next;s instanceof t&&s.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(n,s.formats())&&(s.moveChildren(this),s.remove())},t.blotName="inline",t.scope=o.Scope.INLINE_BLOT,t.tagName="SPAN",t}(a.default);t.default=i},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(18),o=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(r){var n=o.query(t.blotName).tagName;if(r.tagName!==n)return e.formats.call(this,r)},t.prototype.format=function(r,n){null!=o.query(r,o.Scope.BLOCK)&&(r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,r,n,s){null!=o.query(n,o.Scope.BLOCK)?this.format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.insertAt=function(t,r,n){if(null==n||null!=o.query(r,o.Scope.INLINE))e.prototype.insertAt.call(this,t,r,n);else{var s=this.split(t),a=o.create(r,n);s.parent.insertBefore(a,s)}},t.prototype.update=function(t,r){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,r)},t.blotName="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="P",t}(a.default);t.default=i},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(e){},t.prototype.format=function(t,r){e.prototype.formatAt.call(this,0,this.length(),t,r)},t.prototype.formatAt=function(t,r,n,s){0===t&&r===this.length()?this.format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(r(19).default);t.default=a},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(19),o=r(1),i=function(e){function t(t){var r=e.call(this,t)||this;return r.text=r.statics.value(r.domNode),r}return s(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,r,n){null==n?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,r,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=o.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},t.prototype.update=function(e,t){var r=this;e.some(function(e){return"characterData"===e.type&&e.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.Scope.INLINE_BLOT,t}(a.default);t.default=i},function(e,t,r){"use strict";var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:s.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,s=arguments[1],a=0;a<n;a++)if(t=r[a],e.call(s,t,a,r))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,t){var r=-1;function n(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var d=a(e,t),u=e.substring(0,d);d=o(e=e.substring(d),t=t.substring(d));var f=e.substring(e.length-d),p=function(e,t){var i;if(!e)return[[1,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,d=l.indexOf(c);if(-1!=d)return i=[[1,l.substring(0,d)],[0,c],[1,l.substring(d+c.length)]],e.length>t.length&&(i[0][0]=i[2][0]=r),i;if(1==c.length)return[[r,e],[1,t]];var u=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function s(e,t,r){for(var n,s,i,l,c=e.substring(r,r+Math.floor(e.length/4)),d=-1,u="";-1!=(d=t.indexOf(c,d+1));){var f=a(e.substring(r),t.substring(d)),p=o(e.substring(0,r),t.substring(0,d));u.length<p+f&&(u=t.substring(d-p,d)+t.substring(d,d+f),n=e.substring(0,r-p),s=e.substring(r+f),i=t.substring(0,d-p),l=t.substring(d+f))}return 2*u.length>=e.length?[n,s,i,l,u]:null}var i,l,c,d,u,f=s(r,n,Math.ceil(r.length/4)),p=s(r,n,Math.ceil(r.length/2));return f||p?(i=p?f&&f[4].length>p[4].length?f:p:f,e.length>t.length?(l=i[0],c=i[1],d=i[2],u=i[3]):(d=i[0],u=i[1],l=i[2],c=i[3]),[l,c,d,u,i[4]]):null}(e,t);if(u){var f=u[0],p=u[1],m=u[2],h=u[3],g=u[4],x=n(f,m),y=n(p,h);return x.concat([[0,g]],y)}return function(e,t){for(var n=e.length,a=t.length,o=Math.ceil((n+a)/2),i=o,l=2*o,c=new Array(l),d=new Array(l),u=0;u<l;u++)c[u]=-1,d[u]=-1;c[i+1]=0,d[i+1]=0;for(var f=n-a,p=f%2!=0,m=0,h=0,g=0,x=0,y=0;y<o;y++){for(var b=-y+m;b<=y-h;b+=2){for(var v=i+b,w=(C=b==-y||b!=y&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1)-b;C<n&&w<a&&e.charAt(C)==t.charAt(w);)C++,w++;if(c[v]=C,C>n)h+=2;else if(w>a)m+=2;else if(p&&(k=i+f-b)>=0&&k<l&&-1!=d[k]&&C>=(N=n-d[k]))return s(e,t,C,w)}for(var j=-y+g;j<=y-x;j+=2){for(var N,k=i+j,_=(N=j==-y||j!=y&&d[k-1]<d[k+1]?d[k+1]:d[k-1]+1)-j;N<n&&_<a&&e.charAt(n-N-1)==t.charAt(a-_-1);)N++,_++;if(d[k]=N,N>n)x+=2;else if(_>a)g+=2;else if(!p){var C;if((v=i+f-j)>=0&&v<l&&-1!=c[v]&&(w=i+(C=c[v])-v,C>=(N=n-N)))return s(e,t,C,w)}}}return[[r,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-d),t=t.substring(0,t.length-d));return u&&p.unshift([0,u]),f&&p.push([0,f]),i(p),null!=l&&(p=function(e,t){var n=function(e,t){if(0===t)return[0,e];for(var n=0,s=0;s<e.length;s++){var a=e[s];if(a[0]===r||0===a[0]){var o=n+a[1].length;if(t===o)return[s+1,e];if(t<o){e=e.slice();var i=t-n,l=[a[0],a[1].slice(0,i)],c=[a[0],a[1].slice(i)];return e.splice(s,1,l,c),[s+1,e]}n=o}}throw new Error("cursor_pos is out of bounds!")}(e,t),s=n[1],a=n[0],o=s[a],i=s[a+1];if(null==o)return e;if(0!==o[0])return e;if(null!=i&&o[1]+i[1]===i[1]+o[1])return s.splice(a,2,i,o),c(s,a,2);if(null!=i&&0===i[1].indexOf(o[1])){s.splice(a,2,[i[0],o[1]],[0,o[1]]);var l=i[1].slice(o[1].length);return l.length>0&&s.splice(a+2,0,[i[0],l]),c(s,a,3)}return e}(p,l)),function(e){for(var t=!1,n=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},s=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},a=2;a<e.length;a+=1)0===e[a-2][0]&&s(e[a-2][1])&&e[a-1][0]===r&&n(e[a-1][1])&&1===e[a][0]&&n(e[a][1])&&(t=!0,e[a-1][1]=e[a-2][1].slice(-1)+e[a-1][1],e[a][1]=e[a-2][1].slice(-1)+e[a][1],e[a-2][1]=e[a-2][1].slice(0,-1));if(!t)return e;var o=[];for(a=0;a<e.length;a+=1)e[a][1].length>0&&o.push(e[a]);return o}(p)}function s(e,t,r,s){var a=e.substring(0,r),o=t.substring(0,s),i=e.substring(r),l=t.substring(s),c=n(a,o),d=n(i,l);return c.concat(d)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,a=0;r<s;)e.substring(a,s)==t.substring(a,s)?a=r=s:n=s,s=Math.floor((n-r)/2+r);return s}function o(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,a=0;r<s;)e.substring(e.length-s,e.length-a)==t.substring(t.length-s,t.length-a)?a=r=s:n=s,s=Math.floor((n-r)/2+r);return s}function i(e){e.push([0,""]);for(var t,n=0,s=0,l=0,c="",d="";n<e.length;)switch(e[n][0]){case 1:l++,d+=e[n][1],n++;break;case r:s++,c+=e[n][1],n++;break;case 0:s+l>1?(0!==s&&0!==l&&(0!==(t=a(d,c))&&(n-s-l>0&&0==e[n-s-l-1][0]?e[n-s-l-1][1]+=d.substring(0,t):(e.splice(0,0,[0,d.substring(0,t)]),n++),d=d.substring(t),c=c.substring(t)),0!==(t=o(d,c))&&(e[n][1]=d.substring(d.length-t)+e[n][1],d=d.substring(0,d.length-t),c=c.substring(0,c.length-t))),0===s?e.splice(n-l,s+l,[1,d]):0===l?e.splice(n-s,s+l,[r,c]):e.splice(n-s-l,s+l,[r,c],[1,d]),n=n-s-l+(s?1:0)+(l?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,s=0,c="",d=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&i(e)}var l=n;function c(e,t,r){for(var n=t+r-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var s=e[n],a=e[n+1];s[0]===a[1]&&e.splice(n,2,[s[0],s[1]+a[1]])}return e}l.INSERT=1,l.DELETE=r,l.EQUAL=0,e.exports=l},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function s(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:s).supported=n,t.unsupported=s},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function s(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,t,s=[];if(0===this._eventsCount)return s;for(t in e=this._events)r.call(e,t)&&s.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},o.prototype.listeners=function(e,t){var r=n?n+e:e,s=this._events[r];if(t)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var a=0,o=s.length,i=new Array(o);a<o;a++)i[a]=s[a].fn;return i},o.prototype.emit=function(e,t,r,s,a,o){var i=n?n+e:e;if(!this._events[i])return!1;var l,c,d=this._events[i],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,s),!0;case 5:return d.fn.call(d.context,t,r,s,a),!0;case 6:return d.fn.call(d.context,t,r,s,a,o),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var f,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,s);break;default:if(!l)for(f=1,l=new Array(u-1);f<u;f++)l[f-1]=arguments[f];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,r){var s=new a(t,r||this),o=n?n+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],s]:this._events[o].push(s):(this._events[o]=s,this._eventsCount++),this},o.prototype.once=function(e,t,r){var s=new a(t,r||this,!0),o=n?n+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],s]:this._events[o].push(s):(this._events[o]=s,this._eventsCount++),this},o.prototype.removeListener=function(e,t,r,a){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return 0===--this._eventsCount?this._events=new s:delete this._events[o],this;var i=this._events[o];if(i.fn)i.fn!==t||a&&!i.once||r&&i.context!==r||(0===--this._eventsCount?this._events=new s:delete this._events[o]);else{for(var l=0,c=[],d=i.length;l<d;l++)(i[l].fn!==t||a&&!i[l].once||r&&i[l].context!==r)&&c.push(i[l]);c.length?this._events[o]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new s:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new s:delete this._events[t])):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=n,o.EventEmitter=o,void 0!==e&&(e.exports=o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=b(r(3)),i=b(r(2)),l=b(r(0)),c=b(r(5)),d=b(r(10)),u=b(r(9)),f=r(36),p=r(37),m=b(r(13)),h=r(26),g=r(38),x=r(39),y=r(40);function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=(0,d.default)("quill:clipboard"),j="__ql-matcher",N=[[Node.TEXT_NODE,L],[Node.TEXT_NODE,z],["br",function(e,t){return O(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,z],[Node.ELEMENT_NODE,q],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,A],[Node.ELEMENT_NODE,function(e,t){var r={},n=e.style||{};return n.fontStyle&&"italic"===E(e).fontStyle&&(r.italic=!0),n.fontWeight&&(E(e).fontWeight.startsWith("bold")||parseInt(E(e).fontWeight)>=700)&&(r.bold=!0),Object.keys(r).length>0&&(t=S(t,r)),parseFloat(n.textIndent||0)>0&&(t=(new i.default).insert("\t").concat(t)),t}],["li",function(e,t){var r=l.default.query(e);if(null==r||"list-item"!==r.blotName||!O(t,"\n"))return t;for(var n=-1,s=e.parentNode;!s.classList.contains("ql-clipboard");)"list"===(l.default.query(s)||{}).blotName&&(n+=1),s=s.parentNode;return n<=0?t:t.compose((new i.default).retain(t.length()-1).retain(1,{indent:n}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new i.default}]],k=[f.AlignAttribute,g.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),_=[f.AlignStyle,p.BackgroundStyle,h.ColorStyle,g.DirectionStyle,x.FontStyle,y.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),C=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],N.concat(n.options.matchers).forEach(function(e){var t=s(e,2),a=t[0],o=t[1];(r.matchVisual||o!==D)&&n.addMatcher(a,o)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[m.default.blotName]){var r=this.container.innerText;return this.container.innerHTML="",(new i.default).insert(r,v({},m.default.blotName,t[m.default.blotName]))}var n=this.prepareMatching(),a=s(n,2),o=a[0],l=a[1],c=T(this.container,o,l);return O(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new i.default).retain(c.length()-1).delete(1))),w.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var n=this.convert(t);this.quill.updateContents((new i.default).retain(e).concat(n),r),this.quill.setSelection(e+n.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),n=(new i.default).retain(r.index),s=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){n=n.concat(t.convert()).delete(r.length),t.quill.updateContents(n,c.default.sources.USER),t.quill.setSelection(n.length()-r.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=s,t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],r=[];return this.matchers.forEach(function(n){var a=s(n,2),o=a[0],i=a[1];switch(o){case Node.TEXT_NODE:r.push(i);break;case Node.ELEMENT_NODE:t.push(i);break;default:[].forEach.call(e.container.querySelectorAll(o),function(e){e[j]=e[j]||[],e[j].push(i)})}}),[t,r]}}]),t}(u.default);function S(e,t,r){return"object"===(void 0===t?"undefined":n(t))?Object.keys(t).reduce(function(e,r){return S(e,r,t[r])},e):e.reduce(function(e,n){return n.attributes&&n.attributes[t]?e.push(n):e.insert(n.insert,(0,o.default)({},v({},t,r),n.attributes))},new i.default)}function E(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function O(e,t){for(var r="",n=e.ops.length-1;n>=0&&r.length<t.length;--n){var s=e.ops[n];if("string"!=typeof s.insert)break;r=s.insert+r}return r.slice(-1*t.length)===t}function M(e){if(0===e.childNodes.length)return!1;var t=E(e);return["block","list-item"].indexOf(t.display)>-1}function T(e,t,r){return e.nodeType===e.TEXT_NODE?r.reduce(function(t,r){return r(e,t)},new i.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(n,s){var a=T(s,t,r);return s.nodeType===e.ELEMENT_NODE&&(a=t.reduce(function(e,t){return t(s,e)},a),a=(s[j]||[]).reduce(function(e,t){return t(s,e)},a)),n.concat(a)},new i.default):new i.default}function P(e,t,r){return S(r,e,!0)}function A(e,t){var r=l.default.Attributor.Attribute.keys(e),n=l.default.Attributor.Class.keys(e),s=l.default.Attributor.Style.keys(e),a={};return r.concat(n).concat(s).forEach(function(t){var r=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=r&&(a[r.attrName]=r.value(e),a[r.attrName])||(null==(r=k[t])||r.attrName!==t&&r.keyName!==t||(a[r.attrName]=r.value(e)||void 0),null==(r=_[t])||r.attrName!==t&&r.keyName!==t||(r=_[t],a[r.attrName]=r.value(e)||void 0))}),Object.keys(a).length>0&&(t=S(t,a)),t}function q(e,t){var r=l.default.query(e);if(null==r)return t;if(r.prototype instanceof l.default.Embed){var n={},s=r.value(e);null!=s&&(n[r.blotName]=s,t=(new i.default).insert(n,r.formats(e)))}else"function"==typeof r.formats&&(t=S(t,r.blotName,r.formats(e)));return t}function z(e,t){return O(t,"\n")||(M(e)||t.length()>0&&e.nextSibling&&M(e.nextSibling))&&t.insert("\n"),t}function D(e,t){if(M(e)&&null!=e.nextElementSibling&&!O(t,"\n\n")){var r=e.offsetHeight+parseFloat(E(e).marginTop)+parseFloat(E(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")}return t}function L(e,t){var r=e.data;if("O:P"===e.parentNode.tagName)return t.insert(r.trim());if(0===r.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!E(e.parentNode).whiteSpace.startsWith("pre")){var n=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&M(e.parentNode)||null!=e.previousSibling&&M(e.previousSibling))&&(r=r.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&M(e.parentNode)||null!=e.nextSibling&&M(e.nextSibling))&&(r=r.replace(/\s+$/,n.bind(n,!1)))}return t.insert(r)}C.DEFAULTS={matchers:[],matchVisual:!0},t.default=C,t.matchAttributor=A,t.matchBlot=q,t.matchNewline=z,t.matchSpacing=D,t.matchText=L},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);o.blotName="bold",o.tagName=["STRONG","B"],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=d(r(2)),o=d(r(0)),i=d(r(5)),l=d(r(10)),c=d(r(9));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=(0,l.default)("quill:toolbar"),p=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s,a=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(Array.isArray(a.options.container)){var o=document.createElement("div");h(o,a.options.container),e.container.parentNode.insertBefore(o,e.container),a.container=o}else"string"==typeof a.options.container?a.container=document.querySelector(a.options.container):a.container=a.options.container;return a.container instanceof HTMLElement?(a.container.classList.add("ql-toolbar"),a.controls=[],a.handlers={},Object.keys(a.options.handlers).forEach(function(e){a.addHandler(e,a.options.handlers[e])}),[].forEach.call(a.container.querySelectorAll("button, select"),function(e){a.attach(e)}),a.quill.on(i.default.events.EDITOR_CHANGE,function(e,t){e===i.default.events.SELECTION_CHANGE&&a.update(t)}),a.quill.on(i.default.events.SCROLL_OPTIMIZE,function(){var e=a.quill.selection.getRange(),t=n(e,1)[0];a.update(t)}),a):(s=f.error("Container required for toolbar",a.options),u(a,s))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,r=[].find.call(e.classList,function(e){return 0===e.indexOf("ql-")});if(r){if(r=r.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[r]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[r])return void f.warn("ignoring attaching to disabled format",r,e);if(null==o.default.query(r))return void f.warn("ignoring attaching to nonexistent format",r,e)}var s="SELECT"===e.tagName?"change":"click";e.addEventListener(s,function(s){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),s.preventDefault();t.quill.focus();var d=t.quill.selection.getRange(),u=n(d,1)[0];if(null!=t.handlers[r])t.handlers[r].call(t,l);else if(o.default.query(r).prototype instanceof o.default.Embed){if(!(l=prompt("Enter "+r)))return;t.quill.updateContents((new a.default).retain(u.index).delete(u.length).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,l)),i.default.sources.USER)}else t.quill.format(r,l,i.default.sources.USER);t.update(u)}),this.controls.push([r,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach(function(r){var s=n(r,2),a=s[0],o=s[1];if("SELECT"===o.tagName){var i=void 0;if(null==e)i=null;else if(null==t[a])i=o.querySelector("option[selected]");else if(!Array.isArray(t[a])){var l=t[a];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),i=o.querySelector('option[value="'+l+'"]')}null==i?(o.value="",o.selectedIndex=-1):i.selected=!0}else if(null==e)o.classList.remove("ql-active");else if(o.hasAttribute("value")){var c=t[a]===o.getAttribute("value")||null!=t[a]&&t[a].toString()===o.getAttribute("value")||null==t[a]&&!o.getAttribute("value");o.classList.toggle("ql-active",c)}else o.classList.toggle("ql-active",null!=t[a])})}}]),t}(c.default);function m(e,t,r){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=r&&(n.value=r),e.appendChild(n)}function h(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(function(e){if("string"==typeof e)m(r,e);else{var t=Object.keys(e)[0],n=e[t];Array.isArray(n)?function(e,t,r){var n=document.createElement("select");n.classList.add("ql-"+t),r.forEach(function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),n.appendChild(t)}),e.appendChild(n)}(r,t,n):m(r,t,n)}}),e.appendChild(r)})}p.DEFAULTS={},p.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var r=this.quill.getFormat();Object.keys(r).forEach(function(t){null!=o.default.query(t,o.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,i.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",i.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,i.default.sources.USER),this.quill.format("direction",e,i.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0);if("+1"===e||"-1"===e){var s="+1"===e?1:-1;"rtl"===r.direction&&(s*=-1),this.quill.format("indent",n+s,i.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,i.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t);"check"===e?"checked"===r.list||"unchecked"===r.list?this.quill.format("list",!1,i.default.sources.USER):this.quill.format("list","unchecked",i.default.sources.USER):this.quill.format("list",e,i.default.sources.USER)}}},t.default=p,t.addControls=h},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.label.innerHTML=r,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"buildItem",value:function(e){var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return r.style.backgroundColor=e.getAttribute("value")||"",r}},{key:"selectItem",value:function(e,r){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r);var n=this.label.querySelector(".ql-color-label"),s=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=s:n.style.fill=s)}}]),t}(((n=r(28))&&n.__esModule?n:{default:n}).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=r[e.getAttribute("data-value")||""]}),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"selectItem",value:function(e,r){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((n=r(28))&&n.__esModule?n:{default:n}).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"}),this.hide()}return n(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect(),a=0;if(s.right>n.right&&(a=n.right-s.right,this.root.style.left=t+a+"px"),s.left<n.left&&(a=n.left-s.left,this.root.style.left=t+a+"px"),s.bottom>n.bottom){var o=s.bottom-s.top,i=e.bottom-e.top+o;this.root.style.top=r-i+"px",this.root.classList.add("ql-flip")}return a}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=f(r(3)),o=f(r(8)),i=r(43),l=f(i),c=f(r(27)),d=r(15),u=f(r(41));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],x=function(e){function t(e,r){p(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=g);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-snow"),n}return h(t,e),s(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default),this.tooltip=new y(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,r){e.handlers.link.call(e,!r.format.link)})}}]),t}(l.default);x.DEFAULTS=(0,a.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),this.quill.theme.tooltip.edit("link",r)}else this.quill.format("link",!1)}}}}});var y=function(e){function t(e,r){p(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.preview=n.root.querySelector("a.ql-preview"),n}return h(t,e),s(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=e.linkRange){var r=e.linkRange;e.restoreFocus(),e.quill.formatText(r,"link",!1,o.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()}),this.quill.on(o.default.events.SELECTION_CHANGE,function(t,r,n){if(null!=t){if(0===t.length&&n===o.default.sources.USER){var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&o.return&&o.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e.quill.scroll.descendant(c.default,t.index),2),a=s[0],i=s[1];if(null!=a){e.linkRange=new d.Range(t.index-i,a.length());var l=c.default.formats(a.domNode);return e.preview.textContent=l,e.preview.setAttribute("href",l),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}})}},{key:"show",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(i.BaseTooltip);y.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=z(r(29)),s=r(36),a=r(38),o=r(64),i=z(r(65)),l=z(r(66)),c=r(67),d=z(c),u=r(37),f=r(26),p=r(39),m=r(40),h=z(r(56)),g=z(r(68)),x=z(r(27)),y=z(r(69)),b=z(r(70)),v=z(r(71)),w=z(r(72)),j=z(r(73)),N=r(13),k=z(N),_=z(r(74)),C=z(r(75)),S=z(r(57)),E=z(r(41)),O=z(r(28)),M=z(r(59)),T=z(r(60)),P=z(r(61)),A=z(r(108)),q=z(r(62));function z(e){return e&&e.__esModule?e:{default:e}}n.default.register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":f.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":p.FontClass,"attributors/class/size":m.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":f.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":p.FontStyle,"attributors/style/size":m.SizeStyle},!0),n.default.register({"formats/align":s.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":o.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":f.ColorStyle,"formats/font":p.FontClass,"formats/size":m.SizeClass,"formats/blockquote":i.default,"formats/code-block":k.default,"formats/header":l.default,"formats/list":d.default,"formats/bold":h.default,"formats/code":N.Code,"formats/italic":g.default,"formats/link":x.default,"formats/script":y.default,"formats/strike":b.default,"formats/underline":v.default,"formats/image":w.default,"formats/video":j.default,"formats/list/item":c.ListItem,"modules/formula":_.default,"modules/syntax":C.default,"modules/toolbar":S.default,"themes/bubble":A.default,"themes/snow":q.default,"ui/icons":E.default,"ui/picker":O.default,"ui/icon-picker":T.default,"ui/color-picker":M.default,"ui/tooltip":P.default},!0),t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=(n=r(0))&&n.__esModule?n:{default:n},i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"add",value:function(e,r){if("+1"===r||"-1"===r){var n=this.value(e)||0;r="+1"===r?n+1:n-1}return 0===r?(this.remove(e),!0):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(e,r){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,r)||a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(r))}},{key:"value",value:function(e){return parseInt(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(o.default.Attributor.Class),l=new i("indent","ql-indent",{scope:o.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(4))&&n.__esModule?n:{default:n}).default);s.blotName="blockquote",s.tagName="blockquote",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((n=r(4))&&n.__esModule?n:{default:n}).default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=l(r(0)),o=l(r(4)),i=l(r(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"format",value:function(e,r){e!==p.blotName||r?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r):this.replaceWith(a.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,r){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,r),this):(this.parent.unwrap(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,r))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:s(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(o.default);f.blotName="list-item",f.tagName="LI";var p=function(e){function t(e){c(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=function(t){if(t.target.parentNode===e){var n=r.statics.formats(e),s=a.default.find(t.target);"checked"===n?s.format("list","unchecked"):"unchecked"===n&&s.format("list","checked")}};return e.addEventListener("touchstart",n),e.addEventListener("mousedown",n),r}return u(t,e),n(t,null,[{key:"create",value:function(e){var r="ordered"===e?"OL":"UL",n=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,r);return"checked"!==e&&"unchecked"!==e||n.setAttribute("data-checked","checked"===e),n}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,r){if(e instanceof f)s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r);else{var n=null==r?this.length():r.offset(this),a=this.split(n);a.parent.insertBefore(e,a)}}},{key:"optimize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&r.domNode.tagName===this.domNode.tagName&&r.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var r=a.default.create(this.statics.defaultChild);e.moveChildren(r),this.appendChild(r)}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(i.default);p.blotName="list",p.scope=a.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[f],t.ListItem=f,t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(56))&&n.__esModule?n:{default:n}).default);s.blotName="italic",s.tagName=["EM","I"],t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);o.blotName="script",o.tagName=["SUB","SUP"],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);s.blotName="strike",s.tagName="S",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);s.blotName="underline",s.tagName="U",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=(n=r(0))&&n.__esModule?n:{default:n},i=r(27),l=["alt","height","width"],c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){l.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return l.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,i.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.default.Embed);c.blotName="image",c.tagName="IMG",t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},o=r(4),i=(n=r(27))&&n.__esModule?n:{default:n},l=["height","width"],c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){l.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return l.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"sanitize",value:function(e){return i.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.BlockEmbed);c.blotName="video",c.className="ql-video",c.tagName="IFRAME",t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=l(r(35)),o=l(r(5)),i=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,null,[{key:"create",value:function(e){var r=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(a.default);f.blotName="formula",f.className="ql-formula",f.tagName="SPAN";var p=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return u(t,e),n(t,null,[{key:"register",value:function(){o.default.register(f,!0)}}]),t}(i.default);t.FormulaBlot=f,t.default=p},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},a=l(r(0)),o=l(r(5)),i=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(r(13)).default);f.className="ql-syntax";var p=new a.default.Attributor.Class("token","hljs",{scope:a.default.Scope.INLINE}),m=function(e){function t(e,r){c(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if("function"!=typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var s=null;return n.quill.on(o.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(s),s=setTimeout(function(){n.highlight(),s=null},n.options.interval)}),n.highlight(),n}return u(t,e),n(t,null,[{key:"register",value:function(){o.default.register(p,!0),o.default.register(f,!0)}}]),n(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(o.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(f).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(o.default.sources.SILENT),null!=t&&this.quill.setSelection(t,o.default.sources.SILENT)}}}]),t}(i.default);m.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=f,t.CodeToken=p,t.default=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var n=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in s)return s.value;var o=s.get;return void 0!==o?o.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=u(r(3)),o=u(r(8)),i=r(43),l=u(i),c=r(15),d=u(r(41));function u(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,r){f(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=h);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-bubble"),n}return m(t,e),s(t,[{key:"extendToolbar",value:function(e){this.tooltip=new x(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default)}}]),t}(l.default);g.DEFAULTS=(0,a.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var x=function(e){function t(e,r){f(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.on(o.default.events.EDITOR_CHANGE,function(e,t,r,s){if(e===o.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&s===o.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var a=n.quill.getLines(t.index,t.length);if(1===a.length)n.position(n.quill.getBounds(t));else{var i=a[a.length-1],l=n.quill.getIndex(i),d=Math.min(i.length()-1,t.index+t.length-l),u=n.quill.getBounds(new c.Range(l,d));n.position(u)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()}),n}return m(t,e),s(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(o.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var r=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),s=this.root.querySelector(".ql-tooltip-arrow");if(s.style.marginLeft="",0===r)return r;s.style.marginLeft=-1*r-s.offsetWidth/2+"px"}}]),t}(i.BaseTooltip);x.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=x,t.default=g},function(e,t,r){e.exports=r(63)}]).default},e.exports=t()},1609:e=>{"use strict";e.exports=window.React},1663:(e,t,r)=>{"use strict";r.d(t,{By:()=>n,hS:()=>i});const n={NETWORK:"NETWORK_ERROR",API:"API_ERROR",VALIDATION:"VALIDATION_ERROR",AUTH:"AUTH_ERROR",NOT_FOUND:"NOT_FOUND",PERMISSION:"PERMISSION_ERROR",TIMEOUT:"TIMEOUT_ERROR",UNKNOWN:"UNKNOWN_ERROR"},s=e=>{const t=e.message?.toLowerCase()||"";return t.includes("network")||t.includes("fetch")?n.NETWORK:t.includes("404")?n.NOT_FOUND:t.includes("401")||t.includes("unauthorized")?n.AUTH:t.includes("403")||t.includes("forbidden")?n.PERMISSION:t.includes("validation")?n.VALIDATION:t.includes("timeout")?n.TIMEOUT:t.includes("api error")?n.API:n.UNKNOWN},a=(e,t)=>{const r={[n.NETWORK]:"Network error. Please check your connection.",[n.API]:"Server error. Please try again later.",[n.VALIDATION]:"Invalid data provided.",[n.AUTH]:"Authentication required. Please log in.",[n.NOT_FOUND]:"Resource not found.",[n.PERMISSION]:"You do not have permission to perform this action.",[n.TIMEOUT]:"Request timeout. Please try again.",[n.UNKNOWN]:"An unexpected error occurred."};return r[e]||r[n.UNKNOWN]},o=(e,t={})=>{const r=((e,t={})=>{const r=s(e);return{type:r,message:e.message,userMessage:a(r),originalError:e,context:t,timestamp:(new Date).toISOString(),stack:void 0}})(e,t);console.error(" Error:",{type:r.type,message:r.message,context:r.context,timestamp:r.timestamp})},i=async(e,t={})=>{const{maxRetries:r=3,retryDelay:a=1e3,shouldRetry:i=e=>{const t=s(e);return t===n.NETWORK||t===n.TIMEOUT}}=t;let l;for(let t=0;t<=r;t++)try{return await e()}catch(e){if(l=e,t===r)break;if(!i(e))throw e;console.warn(` Retry attempt ${t+1}/${r}`,e.message),await new Promise(e=>setTimeout(e,a*(t+1)))}throw o(l,{maxRetries:r,apiCall:e.name}),l}},1747:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,n,a,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var i=new s(n,a||e,o),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],i]:e._events[l].push(i):(e._events[l]=i,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),i.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},i.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,a=n.length,o=new Array(a);s<a;s++)o[s]=n[s].fn;return o},i.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},i.prototype.emit=function(e,t,n,s,a,o){var i=r?r+e:e;if(!this._events[i])return!1;var l,c,d=this._events[i],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,s),!0;case 5:return d.fn.call(d.context,t,n,s,a),!0;case 6:return d.fn.call(d.context,t,n,s,a,o),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var f,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,s);break;default:if(!l)for(f=1,l=new Array(u-1);f<u;f++)l[f-1]=arguments[f];d[c].fn.apply(d[c].context,l)}}return!0},i.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},i.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},i.prototype.removeListener=function(e,t,n,s){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var i=this._events[a];if(i.fn)i.fn!==t||s&&!i.once||n&&i.context!==n||o(this,a);else{for(var l=0,c=[],d=i.length;l<d;l++)(i[l].fn!==t||s&&!i[l].once||n&&i[l].context!==n)&&c.push(i[l]);c.length?this._events[a]=1===c.length?c[0]:c:o(this,a)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=r,i.EventEmitter=i,e.exports=i},1769:(e,t,r)=>{var n=r(6449),s=r(8586),a=r(1802),o=r(3222);e.exports=function(e,t){return n(e)?e:s(e,t)?[e]:a(o(e))}},1791:(e,t,r)=>{var n=r(6547),s=r(3360);e.exports=function(e,t,r,a){var o=!r;r||(r={});for(var i=-1,l=t.length;++i<l;){var c=t[i],d=a?a(r[c],e[c],c,r,e):void 0;void 0===d&&(d=e[c]),o?s(r,c,d):n(r,c,d)}return r}},1799:(e,t,r)=>{var n=r(7217),s=r(270);e.exports=function(e,t,r,a){var o=r.length,i=o,l=!a;if(null==e)return!i;for(e=Object(e);o--;){var c=r[o];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<i;){var d=(c=r[o])[0],u=e[d],f=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var p=new n;if(a)var m=a(u,f,d,e,t,p);if(!(void 0===m?s(f,u,3,a,p):m))return!1}}return!0}},1800:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},1802:(e,t,r)=>{var n=r(2224),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s,function(e,r,n,s){t.push(n?s.replace(a,"$1"):r||e)}),t});e.exports=o},1811:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var s=t(),a=16-(s-n);if(n=s,a>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},1840:function(e){e.exports=function(){"use strict";return function(e,t,r){var n=t.prototype,s=function(e){return e&&(e.indexOf?e:e.s)},a=function(e,t,r,n,a){var o=e.name?e:e.$locale(),i=s(o[t]),l=s(o[r]),c=i||l.map(function(e){return e.slice(0,n)});if(!a)return c;var d=o.weekStart;return c.map(function(e,t){return c[(t+(d||0))%7]})},o=function(){return r.Ls[r.locale()]},i=function(e,t){return e.formats[t]||function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,r){return t||r.slice(1)})}(e.formats[t.toUpperCase()])},l=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):a(e,"months")},monthsShort:function(t){return t?t.format("MMM"):a(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):a(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):a(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):a(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return i(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};n.localeData=function(){return l.bind(this)()},r.localeData=function(){var e=o();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(t){return i(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},r.months=function(){return a(o(),"months")},r.monthsShort=function(){return a(o(),"monthsShort","months",3)},r.weekdays=function(e){return a(o(),"weekdays",null,null,e)},r.weekdaysShort=function(e){return a(o(),"weekdaysShort","weekdays",3,e)},r.weekdaysMin=function(e){return a(o(),"weekdaysMin","weekdays",2,e)}}}()},1846:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"==typeof e&&null!==e}},1863:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}},1873:(e,t,r)=>{var n=r(9325).Symbol;e.exports=n},1882:(e,t,r)=>{var n=r(2552),s=r(3805);e.exports=function(e){if(!s(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1961:(e,t,r)=>{var n=r(9653);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},1986:(e,t,r)=>{var n=r(1873),s=r(7828),a=r(5288),o=r(5911),i=r(317),l=r(4247),c=n?n.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,u,f){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new s(e),new s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=i;case"[object Set]":var m=1&n;if(p||(p=l),e.size!=t.size&&!m)return!1;var h=f.get(e);if(h)return h==t;n|=2,f.set(e,t);var g=o(p(e),p(t),n,c,u,f);return f.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},2032:(e,t,r)=>{var n=r(1042);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},2049:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},2162:(e,t,r)=>{"use strict";var n=r(1609),s=r(9888),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=s.useSyncExternalStore,i=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var u=i(null);if(null===u.current){var f={hasValue:!1,value:null};u.current=f}else f=u.current;u=c(function(){function e(e){if(!l){if(l=!0,o=e,e=n(e),void 0!==s&&f.hasValue){var t=f.value;if(s(t,e))return i=t}return i=e}if(t=i,a(o,e))return t;var r=n(e);return void 0!==s&&s(t,r)?(o=e,t):(o=e,i=r)}var o,i,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,s]);var p=o(e,u[0],u[1]);return l(function(){f.hasValue=!0,f.value=p},[p]),d(p),p}},2199:(e,t,r)=>{var n=r(4528),s=r(6449);e.exports=function(e,t,r){var a=t(e);return s(e)?a:n(a,r(e))}},2224:(e,t,r)=>{var n=r(104);e.exports=function(e){var t=n(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},2271:(e,t,r)=>{var n=r(1791),s=r(4664);e.exports=function(e,t){return n(e,s(e),t)}},2404:(e,t,r)=>{var n=r(270);e.exports=function(e,t){return n(e,t)}},2428:(e,t,r)=>{var n=r(7534),s=r(346),a=Object.prototype,o=a.hasOwnProperty,i=a.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return s(e)&&o.call(e,"callee")&&!i.call(e,"callee")};e.exports=l},2520:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}},2523:e=>{e.exports=function(e,t,r,n){for(var s=e.length,a=r+(n?1:-1);n?a--:++a<s;)if(t(e[a],a,e))return a;return-1}},2552:(e,t,r)=>{var n=r(1873),s=r(659),a=r(9350),o=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?s(e):a(e)}},2651:(e,t,r)=>{var n=r(4218);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},2694:(e,t,r)=>{"use strict";var n=r(6925);function s(){}function a(){}a.resetWarningCache=s,e.exports=function(){function e(e,t,r,s,a,o){if(o!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:s};return r.PropTypes=r,r}},2749:(e,t,r)=>{var n=r(1042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:s.call(t,e)}},2779:(e,t,r)=>{"use strict";var n=r(1609);"function"==typeof Object.is&&Object.is,n.useSyncExternalStore,n.useRef,n.useEffect,n.useMemo,n.useDebugValue},2799:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},2804:(e,t,r)=>{var n=r(6110)(r(9325),"Promise");e.exports=n},2810:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8805),s=r(6440),a=r(8161),o=r(8202);t.uniqBy=function(e,t=s.identity){return a.isArrayLikeObject(e)?n.uniqBy(Array.from(e),o.iteratee(t)):[]}},2865:(e,t,r)=>{var n=r(9570),s=r(1811)(n);e.exports=s},2903:(e,t,r)=>{var n=r(3805),s=r(5527),a=r(181),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return a(e);var t=s(e),r=[];for(var i in e)("constructor"!=i||!t&&o.call(e,i))&&r.push(i);return r}},2938:(e,t,r)=>{e.exports=r(8695).isPlainObject},2949:(e,t,r)=>{var n=r(2651);e.exports=function(e,t){var r=n(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}},2984:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2049);t.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===n.getTag(e)}},3007:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},3025:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1863),s=r(1465);t.toPath=function(e){if(Array.isArray(e))return e.map(s.toKey);if("symbol"==typeof e)return[e];const t=[],r=(e=n.toString(e)).length;if(0===r)return t;let a=0,o="",i="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),a++);a<r;){const n=e[a];i?"\\"===n&&a+1<r?(a++,o+=e[a]):n===i?i="":o+=n:l?'"'===n||"'"===n?i=n:"]"===n?(l=!1,t.push(o),o=""):o+=n:"["===n?(l=!0,o&&(t.push(o),o="")):"."===n?o&&(t.push(o),o=""):o+=n,a++}return o&&t.push(o),t}},3031:(e,t,r)=>{var n=r(3120),s=r(6155),a=r(9302),o=r(6800),i=a(function(e,t){if(null==e)return[];var r=t.length;return r>1&&o(e,t[0],t[1])?t=[]:r>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),s(e,n(t,1),[])});e.exports=i},3036:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(717),s=r(1465),a=r(3923),o=r(4200),i=r(7324);t.matchesProperty=function(e,t){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=s.toKey(e)}return t=a.cloneDeep(t),function(r){const s=o.get(r,e);return void 0===s?i.has(r,e):void 0===t?void 0===s:n.isMatch(s,t)}}},3040:(e,t,r)=>{var n=r(1549),s=r(79),a=r(8223);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||s),string:new n}}},3097:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3500),s=r(3998),a=r(3025);t.orderBy=function(e,t,r,o){if(null==e)return[];r=o?void 0:r,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));const i=(e,t)=>{let r=e;for(let e=0;e<t.length&&null!=r;++e)r=r[t[e]];return r},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||s.isKey(e)?e:{key:e,path:a.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:i(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?i(t,e):"object"==typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let s=0;s<l.length;s++){const a=n.compareValues(e.criteria[s],t.criteria[s],r[s]);if(0!==a)return a}return 0}).map(e=>e.original)}},3120:(e,t,r)=>{var n=r(4528),s=r(5891);e.exports=function e(t,r,a,o,i){var l=-1,c=t.length;for(a||(a=s),i||(i=[]);++l<c;){var d=t[l];r>0&&a(d)?r>1?e(d,r-1,a,o,i):n(i,d):o||(i[i.length]=d)}return i}},3138:(e,t,r)=>{var n=r(1331);e.exports=function(e){return n(e)?void 0:e}},3181:(e,t,r)=>{var n=r(5508)();e.exports=n},3200:function(e){e.exports=function(){"use strict";return function(e,t,r){var n=function(e,t){if(!t||!t.length||1===t.length&&!t[0]||1===t.length&&Array.isArray(t[0])&&!t[0].length)return null;var r;1===t.length&&t[0].length>0&&(t=t[0]),r=(t=t.filter(function(e){return e}))[0];for(var n=1;n<t.length;n+=1)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r};r.max=function(){var e=[].slice.call(arguments,0);return n("isAfter",e)},r.min=function(){var e=[].slice.call(arguments,0);return n("isBefore",e)}}}()},3201:e=>{var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},3221:e=>{e.exports=function(e){return function(t,r,n){for(var s=-1,a=Object(t),o=n(t),i=o.length;i--;){var l=o[e?i:++s];if(!1===r(a[l],l,a))break}return t}}},3222:(e,t,r)=>{var n=r(7556);e.exports=function(e){return null==e?"":n(e)}},3243:(e,t,r)=>{var n=r(6110),s=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=s},3290:(e,t,r)=>{e=r.nmd(e);var n=r(9325),s=t&&!t.nodeType&&t,a=s&&e&&!e.nodeType&&e,o=a&&a.exports===s?n.Buffer:void 0,i=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=i?i(r):new e.constructor(r);return e.copy(n),n}},3345:e=>{e.exports=function(){return[]}},3349:(e,t,r)=>{var n=r(2199),s=r(6375),a=r(7241);e.exports=function(e){return n(e,a,s)}},3360:(e,t,r)=>{var n=r(3243);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},3403:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4200);t.property=function(e){return function(t){return n.get(t,e)}}},3412:(e,t,r)=>{e.exports=r(5012).range},3488:e=>{e.exports=function(e){return e}},3500:(e,t)=>{"use strict";function r(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.compareValues=(e,t,n)=>{if(e!==t){const s=r(e),a=r(t);if(s===a&&0===s){if(e<t)return"desc"===n?1:-1;if(e>t)return"desc"===n?-1:1}return"desc"===n?a-s:s-a}return 0}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},3650:(e,t,r)=>{var n=r(4335)(Object.keys,Object);e.exports=n},3656:(e,t,r)=>{e=r.nmd(e);var n=r(9325),s=r(9935),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a?n.Buffer:void 0,l=(i?i.isBuffer:void 0)||s;e.exports=l},3661:(e,t,r)=>{var n=r(3040),s=r(7670),a=r(289),o=r(4509),i=r(2949);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},3663:(e,t,r)=>{var n=r(1799),s=r(776),a=r(7197);e.exports=function(e){var t=s(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},3714:(e,t,r)=>{var n=r(3730);e.exports=function(e,t,r){for(var s=-1,a=e.criteria,o=t.criteria,i=a.length,l=r.length;++s<i;){var c=n(a[s],o[s]);if(c)return s>=l?c:c*("desc"==r[s]?-1:1)}return e.index-t.index}},3729:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},3730:(e,t,r)=>{var n=r(4394);e.exports=function(e,t){if(e!==t){var r=void 0!==e,s=null===e,a=e==e,o=n(e),i=void 0!==t,l=null===t,c=t==t,d=n(t);if(!l&&!d&&!o&&e>t||o&&i&&c&&!l&&!d||s&&i&&c||!r&&c||!a)return 1;if(!s&&!o&&!d&&e<t||d&&r&&a&&!s&&!o||l&&r&&a||!i&&a||!c)return-1}return 0}},3736:(e,t,r)=>{var n=r(1873),s=n?n.prototype:void 0,a=s?s.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3826:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,s,a){var o=s.prototype;a.utc=function(e){return new s({date:e,utc:!0,args:arguments})},o.utc=function(t){var r=a(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var i=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),i.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=o.utcOffset;o.utcOffset=function(n,s){var a=this.$utils().u;if(a(n))return this.$u?0:a(this.$offset)?c.call(this):this.$offset;if("string"==typeof n&&(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var s=(""+n[0]).match(r)||["-",0,0],a=s[0],o=60*+s[1]+ +s[2];return 0===o?0:"+"===a?o:-o}(n),null===n))return this;var o=Math.abs(n)<=16?60*n:n;if(0===o)return this.utc(s);var i=this.clone();if(s)return i.$offset=o,i.$u=!1,i;var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(i=this.local().add(o+l,e)).$offset=o,i.$x.$localOffset=l,i};var d=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var u=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),s=a(e).local();return f.call(n,s,t,r)}}}()},3838:(e,t,r)=>{var n=r(1791),s=r(7241);e.exports=function(e,t){return e&&n(t,s(t),e)}},3844:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3964);t.cloneDeep=function(e){return n.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},3908:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3916:(e,t,r)=>{var n=r(3360),s=r(641),a=r(5389);e.exports=function(e,t){var r={};return t=a(t,3),s(e,function(e,s,a){n(r,s,t(e,s,a))}),r}},3923:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9467);t.cloneDeep=function(e){return n.cloneDeepWith(e)}},3937:e=>{e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},3964:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6012),s=r(2049),a=r(9184),o=r(2520),i=r(3908);function l(e,t,r,n=new Map,d=void 0){const u=d?.(e,t,r,n);if(void 0!==u)return u;if(o.isPrimitive(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=l(e[s],s,r,n,d);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[s,a]of e)t.set(s,l(a,s,r,n,d));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const s of e)t.add(l(s,void 0,r,n,d));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(i.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=l(e[s],s,r,n,d);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),c(t,e,r,n,d),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),c(t,e,r,n,d),t}if("undefined"!=typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,r,n,d),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof Number){const t=new Number(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof String){const t=new String(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if("object"==typeof e&&function(e){switch(s.getTag(e)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),c(t,e,r,n,d),t}return e}function c(e,t,r=e,s,a){const o=[...Object.keys(t),...n.getSymbols(t)];for(let n=0;n<o.length;n++){const i=o[n],c=Object.getOwnPropertyDescriptor(e,i);(null==c||c.writable)&&(e[i]=l(t[i],i,r,s,a))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},3998:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1366),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!n.isSymbol(e))||"string"==typeof e&&(a.test(e)||!s.test(e))||null!=t&&Object.hasOwn(t,e))}},4128:(e,t,r)=>{var n=r(1800),s=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}},4200:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8193),s=r(5112),a=r(1465),o=r(3025);t.get=function e(t,r,i){if(null==t)return i;switch(typeof r){case"string":{if(n.isUnsafeProperty(r))return i;const a=t[r];return void 0===a?s.isDeepKey(r)?e(t,o.toPath(r),i):i:a}case"number":case"symbol":{"number"==typeof r&&(r=a.toKey(r));const e=t[r];return void 0===e?i:e}default:{if(Array.isArray(r))return function(e,t,r){if(0===t.length)return r;let s=e;for(let e=0;e<t.length;e++){if(null==s)return r;if(n.isUnsafeProperty(t[e]))return r;s=s[t[e]]}return void 0===s?r:s}(t,r,i);if(r=Object.is(r?.valueOf(),-0)?"-0":String(r),n.isUnsafeProperty(r))return i;const e=t[r];return void 0===e?i:e}}}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4247:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},4248:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},4259:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3097),s=r(5711),a=r(316);t.sortBy=function(e,...t){const r=t.length;return r>1&&a.isIterateeCall(e,t[0],t[1])?t=[]:r>2&&a.isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),n.orderBy(e,s.flatten(t),["asc"])}},4297:(e,t,r)=>{e.exports=r(5259).throttle},4335:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},4363:(e,t,r)=>{"use strict";r(2799)},4394:(e,t,r)=>{var n=r(2552),s=r(346);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==n(e)}},4483:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},4509:(e,t,r)=>{var n=r(2651);e.exports=function(e){return n(this,e).has(e)}},4528:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}},4569:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8919);t.toFinite=function(e){return e?(e=n.toNumber(e))===1/0||e===-1/0?(e<0?-1:1)*Number.MAX_VALUE:e==e?e:0:0===e?e:0}},4629:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}}()},4664:(e,t,r)=>{var n=r(9770),s=r(3345),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,i=o?function(e){return null==e?[]:(e=Object(e),n(o(e),function(t){return a.call(e,t)}))}:s;e.exports=i},4684:(e,t,r)=>{var n=r(9302),s=r(5288),a=r(6800),o=r(7241),i=Object.prototype,l=i.hasOwnProperty,c=n(function(e,t){e=Object(e);var r=-1,n=t.length,c=n>2?t[2]:void 0;for(c&&a(t[0],t[1],c)&&(n=1);++r<n;)for(var d=t[r],u=o(d),f=-1,p=u.length;++f<p;){var m=u[f],h=e[m];(void 0===h||s(h,i[m])&&!l.call(e,m))&&(e[m]=d[m])}return e});e.exports=c},4713:(e,t,r)=>{var n=r(2523),s=r(5389),a=r(1489),o=Math.max;e.exports=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var l=null==r?0:a(r);return l<0&&(l=o(i+l,0)),n(e,s(t,3),l)}},4733:(e,t,r)=>{var n=r(1791),s=r(5950);e.exports=function(e,t){return e&&n(t,s(t),e)}},4739:(e,t,r)=>{var n=r(6025);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},4840:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},4894:(e,t,r)=>{var n=r(1882),s=r(294);e.exports=function(e){return null!=e&&s(e.length)&&!n(e)}},4901:(e,t,r)=>{var n=r(2552),s=r(294),a=r(346),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&s(e.length)&&!!o[n(e)]}},4905:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},4915:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},4932:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}},5012:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(316),s=r(4569);t.range=function(e,t,r){r&&"number"!=typeof r&&n.isIterateeCall(e,t,r)&&(t=r=void 0),e=s.toFinite(e),void 0===t?(t=e,e=0):t=s.toFinite(t),r=void 0===r?e<t?1:-1:s.toFinite(r);const a=Math.max(Math.ceil((t-e)/(r||1)),0),o=new Array(a);for(let t=0;t<a;t++)o[t]=e,e+=r;return o}},5083:(e,t,r)=>{var n=r(1882),s=r(7296),a=r(3805),o=r(7473),i=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,f=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||s(e))&&(n(e)?f:i).test(o(e))}},5112:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},5128:(e,t,r)=>{var n=r(909),s=r(4894);e.exports=function(e,t){var r=-1,a=s(e)?Array(e.length):[];return n(e,function(e,n,s){a[++r]=t(e,n,s)}),a}},5160:e=>{e.exports=function(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(s);++n<s;)a[n]=e[n+t];return a}},5236:(e,t,r)=>{"use strict";r.d(t,{getApiConfig:()=>n});const n=()=>{const e=window.qe_data||window.qeApiConfig||{},{api_url:t,nonce:r,endpoints:n}=e;if(console.log(" API Config Debug:",{hasQeData:!!window.qe_data,hasQeApiConfig:!!window.qeApiConfig,apiUrl:t,hasNonce:!!r,hasEndpoints:!!n}),!t||!r)throw new Error(`WordPress API configuration not found. \n      Ensure qe_data is properly localized in WordPress. \n      Available data: ${JSON.stringify(e,null,2)}`);const s={apiUrl:t,nonce:r,endpoints:n||{courses:`${t}/wp/v2/qe_course`,lessons:`${t}/wp/v2/qe_lesson`,quizzes:`${t}/wp/v2/qe_quiz`,questions:`${t}/wp/v2/qe_question`,books:`${t}/wp/v2/book`,categories:`${t}/wp/v2/qe_category`,topics:`${t}/wp/v2/qe_topic`,difficulties:`${t}/wp/v2/qe_difficulty`,courseTypes:`${t}/wp/v2/course_type`,media:`${t}/wp/v2/media`,users:`${t}/wp/v2/users`},debug:e.debug||!1,user:e.user||null};return console.log(" Final API Configuration:",s),s}},5259:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8);t.throttle=function(e,t=0,r={}){const{leading:s=!0,trailing:a=!0}=r;return n.debounce(e,t,{leading:s,maxWait:t,trailing:a})}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5338:(e,t,r)=>{"use strict";var n=r(5795);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},5389:(e,t,r)=>{var n=r(3663),s=r(7978),a=r(3488),o=r(6449),i=r(583);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?s(e[0],e[1]):n(e):i(e)}},5481:(e,t,r)=>{var n=r(9325)["__core-js_shared__"];e.exports=n},5508:(e,t,r)=>{var n=r(6151),s=r(6800),a=r(7400);e.exports=function(e){return function(t,r,o){return o&&"number"!=typeof o&&s(t,r,o)&&(r=o=void 0),t=a(t),void 0===r?(r=t,t=0):r=a(r),o=void 0===o?t<r?1:-1:a(o),n(t,r,o,e)}}},5527:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},5529:(e,t,r)=>{var n=r(9344),s=r(8879),a=r(5527);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(s(e))}},5556:(e,t,r)=>{e.exports=r(2694)()},5580:(e,t,r)=>{var n=r(6110)(r(9325),"DataView");e.exports=n},5708:function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,i=a.length;o<i;o++,s++)n[s]=a[o];return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=i(r(1609)),c=i(r(5795)),d=i(r(2404)),u=i(r(1574)),f=function(e){function t(t){var r=e.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(e,t,n,s){var a,o,i,l;"text-change"===e?null===(o=(a=r).onEditorChangeText)||void 0===o||o.call(a,r.editor.root.innerHTML,t,s,r.unprivilegedEditor):"selection-change"===e&&(null===(l=(i=r).onEditorChangeSelection)||void 0===l||l.call(i,t,s,r.unprivilegedEditor))};var n=r.isControlled()?t.value:t.defaultValue;return r.value=null!=n?n:"",r}return s(t,e),t.prototype.validateProps=function(e){var t;if(l.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(l.default.Children.count(e.children)&&"textarea"===(null===(t=l.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var r,n=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var s=this.getEditorContents(),a=null!=(r=e.value)?r:"";this.isEqualValue(a,s)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),o(this.cleanProps,this.dirtyProps).some(function(t){return!d.default(e[t],n.props[t])})},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some(function(r){return!d.default(e[r],t.props[r])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var a=this.regenerationSnapshot,o=(n=a.delta,a.selection);delete this.regenerationSnapshot,this.instantiateEditor();var i=this.editor;i.setContents(n),p(function(){return r.setEditorSelection(i,o)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var r=new u.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?d.default(e.ops,t.ops):d.default(e,t)},t.prototype.setEditorContents=function(e,t){var r=this;this.value=t;var n=this.getEditorSelection();"string"==typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),p(function(){return r.setEditorSelection(e,n)})},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var r,n;(null===(n=null===(r=e)||void 0===r?void 0:r.scroll)||void 0===n?void 0:n.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=c.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,r=t.children,n=t.preserveWhitespace,s={key:this.state.generation,ref:function(t){e.editingArea=t}};return l.default.Children.count(r)?l.default.cloneElement(l.default.Children.only(r),s):n?l.default.createElement("pre",a({},s)):l.default.createElement("div",a({},s))},t.prototype.render=function(){var e;return l.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!=e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,r,n){var s,a;if(this.editor){var o=this.isDelta(this.value)?n.getContents():n.getHTML();o!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=o,null===(a=(s=this.props).onChange)||void 0===a||a.call(s,e,t,r,n))}},t.prototype.onEditorChangeSelection=function(e,t,r){var n,s,a,o,i,l;if(this.editor){var c=this.getEditorSelection(),u=!c&&e,f=c&&!e;d.default(e,c)||(this.selection=e,null===(s=(n=this.props).onChangeSelection)||void 0===s||s.call(n,e,t,r),u?null===(o=(a=this.props).onFocus)||void 0===o||o.call(a,e,t,r):f&&(null===(l=(i=this.props).onBlur)||void 0===l||l.call(i,c,t,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=u.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(l.default.Component);function p(e){Promise.resolve().then(e)}e.exports=f},5711:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e,t=1){const r=[],n=Math.floor(t),s=(e,t)=>{for(let a=0;a<e.length;a++){const o=e[a];Array.isArray(o)&&t<n?s(o,t+1):r.push(o)}};return s(e,0),r}},5749:(e,t,r)=>{var n=r(1042);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},5750:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,r,n){var s=r.prototype,a=s.format;n.en.formats=e,s.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var r=this.$locale().formats,n=function(t,r){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,n,s){var a=s&&s.toUpperCase();return n||r[s]||e[s]||r[a].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,r){return t||r.slice(1)})})}(t,void 0===r?{}:r);return a.call(this,n)}}}()},5795:e=>{"use strict";e.exports=window.ReactDOM},5861:(e,t,r)=>{var n=r(5580),s=r(8223),a=r(2804),o=r(6545),i=r(8303),l=r(2552),c=r(7473),d="[object Map]",u="[object Promise]",f="[object Set]",p="[object WeakMap]",m="[object DataView]",h=c(n),g=c(s),x=c(a),y=c(o),b=c(i),v=l;(n&&v(new n(new ArrayBuffer(1)))!=m||s&&v(new s)!=d||a&&v(a.resolve())!=u||o&&v(new o)!=f||i&&v(new i)!=p)&&(v=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case h:return m;case g:return d;case x:return u;case y:return f;case b:return p}return t}),e.exports=v},5891:(e,t,r)=>{var n=r(1873),s=r(2428),a=r(6449),o=n?n.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||s(e)||!!(o&&e&&e[o])}},5911:(e,t,r)=>{var n=r(8859),s=r(4248),a=r(9219);e.exports=function(e,t,r,o,i,l){var c=1&r,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var f=l.get(e),p=l.get(t);if(f&&p)return f==t&&p==e;var m=-1,h=!0,g=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++m<d;){var x=e[m],y=t[m];if(o)var b=c?o(y,x,m,t,e,l):o(x,y,m,e,t,l);if(void 0!==b){if(b)continue;h=!1;break}if(g){if(!s(t,function(e,t){if(!a(g,t)&&(x===e||i(x,e,r,o,l)))return g.push(t)})){h=!1;break}}else if(x!==y&&!i(x,y,r,o,l)){h=!1;break}}return l.delete(e),l.delete(t),h}},5950:(e,t,r)=>{var n=r(695),s=r(8984),a=r(4894);e.exports=function(e){return a(e)?n(e):s(e)}},5970:(e,t,r)=>{var n=r(3120);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},6009:(e,t,r)=>{e=r.nmd(e);var n=r(4840),s=t&&!t.nodeType&&t,a=s&&e&&!e.nodeType&&e,o=a&&a.exports===s&&n.process,i=function(){try{return a&&a.require&&a.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i},6012:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6025:(e,t,r)=>{var n=r(5288);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},6038:(e,t,r)=>{var n=r(5861),s=r(346);e.exports=function(e){return s(e)&&"[object Set]"==n(e)}},6110:(e,t,r)=>{var n=r(5083),s=r(392);e.exports=function(e,t){var r=s(e,t);return n(r)?r:void 0}},6151:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,s,a){for(var o=-1,i=r(t((n-e)/(s||1)),0),l=Array(i);i--;)l[a?i:++o]=e,e+=s;return l}},6155:(e,t,r)=>{var n=r(4932),s=r(7422),a=r(5389),o=r(5128),i=r(3937),l=r(7301),c=r(3714),d=r(3488),u=r(6449);e.exports=function(e,t,r){t=t.length?n(t,function(e){return u(e)?function(t){return s(t,1===e.length?e[0]:e)}:e}):[d];var f=-1;t=n(t,l(a));var p=o(e,function(e,r,s){return{criteria:n(t,function(t){return t(e)}),index:++f,value:e}});return i(p,function(e,t){return c(e,t,r)})}},6169:(e,t,r)=>{var n=r(9653);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},6189:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},6375:(e,t,r)=>{var n=r(4528),s=r(8879),a=r(4664),o=r(3345),i=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=s(e);return t}:o;e.exports=i},6416:(e,t,r)=>{"use strict";r.d(t,{getCourseLessons:()=>o});var n=r(9700),s=r(5236),a=r(1663);const o=async(e,t={})=>{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid course ID provided");const{page:r=1,perPage:o=100,status:i="publish,draft,private"}=t;try{console.log(` Getting lessons for course ${e}...`);const t=(0,s.getApiConfig)();console.log(" API Config:",t);const a=new URLSearchParams({page:r.toString(),per_page:o.toString(),status:i}),l=`${t.apiUrl}/qe/v1/courses/${e}/lessons?${a.toString()}`;console.log(" Requesting URL:",l);const c=await(0,n.qb)(l,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce}});return console.log(" Raw API Result:",c),console.log(" Lessons data:",c.data),console.log(" DEBUG: Orden de IDs recibidos de la API:",c.data.data?.map(e=>e.id)),console.log(` Retrieved ${c.data.data?.length||0} lessons for course ${e}`),{data:c.data.data||[],pagination:c.data.pagination||{total:0,total_pages:0,current_page:1,per_page:o,has_more:!1}}}catch(t){throw console.error(` Error getting lessons for course ${e}:`,t),console.error(" Error details:",t.message,t.stack),(0,a.hS)(t,"Failed to get course lessons")}}},6440:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},6449:e=>{var t=Array.isArray;e.exports=t},6545:(e,t,r)=>{var n=r(6110)(r(9325),"Set");e.exports=n},6547:(e,t,r)=>{var n=r(3360),s=r(5288),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var o=e[t];a.call(e,t)&&s(o,r)&&(void 0!==r||t in e)||n(e,t,r)}},6649:(e,t,r)=>{var n=r(3221)();e.exports=n},6721:(e,t,r)=>{var n=r(1042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return s.call(t,e)?t[e]:void 0}},6757:(e,t,r)=>{var n=r(1033),s=Math.max;e.exports=function(e,t,r){return t=s(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,i=s(a.length-t,0),l=Array(i);++o<i;)l[o]=a[t+o];o=-1;for(var c=Array(t+1);++o<t;)c[o]=a[o];return c[t]=r(l),n(e,this,c)}}},6761:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},6773:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t,{signal:r,edges:n}={}){let s,a=null;const o=null!=n&&n.includes("leading"),i=null==n||n.includes("trailing"),l=()=>{null!==a&&(e.apply(s,a),s=void 0,a=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,i&&l(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),s=void 0,a=null},f=function(...e){if(r?.aborted)return;s=this,a=e;const t=null==c;d(),o&&t&&l()};return f.schedule=d,f.cancel=u,f.flush=()=>{l()},r?.addEventListener("abort",u,{once:!0}),f}},6800:(e,t,r)=>{var n=r(5288),s=r(4894),a=r(361),o=r(3805);e.exports=function(e,t,r){if(!o(r))return!1;var i=typeof t;return!!("number"==i?s(r)&&a(t,r.length):"string"==i&&t in r)&&n(r[t],e)}},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},7068:(e,t,r)=>{var n=r(7217),s=r(5911),a=r(1986),o=r(689),i=r(5861),l=r(6449),c=r(3656),d=r(7167),u="[object Arguments]",f="[object Array]",p="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,h,g,x){var y=l(e),b=l(t),v=y?f:i(e),w=b?f:i(t),j=(v=v==u?p:v)==p,N=(w=w==u?p:w)==p,k=v==w;if(k&&c(e)){if(!c(t))return!1;y=!0,j=!1}if(k&&!j)return x||(x=new n),y||d(e)?s(e,t,r,h,g,x):a(e,t,v,r,h,g,x);if(!(1&r)){var _=j&&m.call(e,"__wrapped__"),C=N&&m.call(t,"__wrapped__");if(_||C){var S=_?e.value():e,E=C?t.value():t;return x||(x=new n),g(S,E,r,h,x)}}return!!k&&(x||(x=new n),o(e,t,r,h,g,x))}},7167:(e,t,r)=>{var n=r(4901),s=r(7301),a=r(6009),o=a&&a.isTypedArray,i=o?s(o):n;e.exports=i},7197:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},7199:(e,t,r)=>{var n=r(9653),s=r(6169),a=r(3201),o=r(3736),i=r(1961);e.exports=function(e,t,r){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return s(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i(e,r);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return a(e);case"[object Symbol]":return o(e)}}},7217:(e,t,r)=>{var n=r(79),s=r(1420),a=r(938),o=r(3605),i=r(9817),l=r(945);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=s,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=l,e.exports=c},7237:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7241:(e,t,r)=>{var n=r(695),s=r(2903),a=r(4894);e.exports=function(e){return a(e)?n(e,!0):s(e)}},7255:(e,t,r)=>{var n=r(7422);e.exports=function(e){return function(t){return n(t,e)}}},7296:(e,t,r)=>{var n,s=r(5481),a=(n=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!a&&a in e}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},7324:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5112),s=r(8509),a=r(2984),o=r(3025);t.has=function(e,t){let r;if(r=Array.isArray(t)?t:"string"==typeof t&&n.isDeepKey(t)&&null==e?.[t]?o.toPath(t):[t],0===r.length)return!1;let i=e;for(let e=0;e<r.length;e++){const t=r[e];if(!(null!=i&&Object.hasOwn(i,t)||(Array.isArray(i)||a.isArguments(i))&&s.isIndex(t)&&t<i.length))return!1;i=i[t]}return!0}},7334:e=>{e.exports=function(e){return function(){return e}}},7400:(e,t,r)=>{var n=r(9374),s=1/0;e.exports=function(e){return e?(e=n(e))===s||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},7422:(e,t,r)=>{var n=r(1769),s=r(7797);e.exports=function(e,t){for(var r=0,a=(t=n(t,e)).length;null!=e&&r<a;)e=e[s(t[r++])];return r&&r==a?e:void 0}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7534:(e,t,r)=>{var n=r(2552),s=r(346);e.exports=function(e){return s(e)&&"[object Arguments]"==n(e)}},7556:(e,t,r)=>{var n=r(1873),s=r(4932),a=r(6449),o=r(4394),i=n?n.prototype:void 0,l=i?i.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return s(t,e)+"";if(o(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},7670:(e,t,r)=>{var n=r(2651);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},7730:(e,t,r)=>{var n=r(9172),s=r(7301),a=r(6009),o=a&&a.isMap,i=o?s(o):n;e.exports=i},7797:(e,t,r)=>{var n=r(4394);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7828:(e,t,r)=>{var n=r(9325).Uint8Array;e.exports=n},7861:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(717),s=r(3844);t.matches=function(e){return e=s.cloneDeep(e),t=>n.isMatch(t,e)}},7872:function(e){e.exports=function(){"use strict";return function(e,t,r){t.prototype.isBetween=function(e,t,n,s){var a=r(e),o=r(t),i="("===(s=s||"()")[0],l=")"===s[1];return(i?this.isAfter(a,n):!this.isBefore(a,n))&&(l?this.isBefore(o,n):!this.isAfter(o,n))||(i?this.isBefore(a,n):!this.isAfter(a,n))&&(l?this.isAfter(o,n):!this.isBefore(o,n))}}}()},7978:(e,t,r)=>{var n=r(270),s=r(8156),a=r(631),o=r(8586),i=r(756),l=r(7197),c=r(7797);e.exports=function(e,t){return o(e)&&i(t)?l(c(e),t):function(r){var o=s(r,e);return void 0===o&&o===t?a(r,e):n(t,o,3)}}},8077:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8090:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},8096:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},8156:(e,t,r)=>{var n=r(7422);e.exports=function(e,t,r){var s=null==e?void 0:n(e,t);return void 0===s?r:s}},8161:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(58),s=r(1846);t.isArrayLikeObject=function(e){return s.isObjectLike(e)&&n.isArrayLike(e)}},8193:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},8202:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6440),s=r(3403),a=r(7861),o=r(3036);t.iteratee=function(e){if(null==e)return n.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?o.matchesProperty(e[0],e[1]):a.matches(e);case"string":case"symbol":case"number":return s.property(e)}}},8223:(e,t,r)=>{var n=r(6110)(r(9325),"Map");e.exports=n},8243:(e,t,r)=>{"use strict";r.d(t,{E5:()=>f,EJ:()=>j,KJ:()=>p,Kf:()=>x,Nc:()=>N,Rz:()=>d,Yq:()=>v,ZH:()=>w,ee:()=>i,i8:()=>b,iV:()=>u,j4:()=>c,kM:()=>l,o5:()=>o,se:()=>m,vQ:()=>k,w3:()=>g,wb:()=>y,xV:()=>a,zi:()=>h});const n=["publish","draft","private","pending","future","trash"],s={true:["true","yes","1",1,!0],false:["false","no","0",0,!1,"",null,void 0]},a=(e,t="")=>null==e?t:(e=>{if("string"!=typeof e)return e;const t=document.createElement("textarea");return t.innerHTML=e,t.value})(String(e).trim()),o=(e,t=0,r=0)=>{const n=parseInt(e);return isNaN(n)||n<r?t:n},i=(e,t=1)=>{if(""===e||null==e)return null;const r=parseInt(e);return isNaN(r)||r<t?null:r},l=(e,t=!1)=>!!s.true.includes(e)||!s.false.includes(e)&&t,c=e=>((e,t=0,r=2,n=0)=>{const s=parseFloat(e);return isNaN(s)||s<n?t:Math.round(s*Math.pow(10,r))/Math.pow(10,r)})(e,0,2,0),d=e=>((e,t=2,r=.01)=>{if(""===e||null==e)return null;const n=parseFloat(e);return isNaN(n)||n<r?null:Math.round(n*Math.pow(10,t))/Math.pow(10,t)})(e,2,.01),u=e=>{if(!e||""===e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const t=new Date(e);if(!isNaN(t.getTime()))return e}const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]},f=e=>Array.isArray(e)?e.map(e=>parseInt(e)).filter(e=>!isNaN(e)&&e>0):[],p=e=>{if(!e)return[];if(Array.isArray(e))return f(e);const t=parseInt(e);return!isNaN(t)&&t>0?[t]:[]},m=(e,t="draft")=>{const r=a(e,t).toLowerCase();return n.includes(r)?r:t},h=(e,t,r)=>{const n=a(e,r).toLowerCase();return t.includes(n)?n:r},g=e=>{if(!e)return"";if("object"==typeof e&&null!==e){const t=e.rendered||e.raw||"";return a(t)}return a(e)},x=(e,t)=>null==e||""===e?`${t} is required`:null,y=(e,t)=>{if(!e||!t)return null;const r=new Date(e),n=new Date(t);return isNaN(r.getTime())||isNaN(n.getTime())?"Invalid date format":r>=n?"End date must be after start date":null},b=(e,t,r,n)=>{const s=parseFloat(e);return isNaN(s)?`${n} must be a valid number`:s<t||s>r?`${n} must be between ${t} and ${r}`:null},v=(e,t="en-US")=>{if(!e)return"";const r=new Date(e);return isNaN(r.getTime())?"":r.toLocaleDateString(t)},w=e=>{const t=a(e);return t?t.charAt(0).toUpperCase()+t.slice(1):""},j=(e,t,r="...")=>{const n=a(e);return n.length<=t?n:n.substring(0,t)+r},N=e=>{const t=e._embedded?.["wp:featuredmedia"]?.[0];return t&&(t.source_url||t.media_details?.sizes?.medium?.source_url||t.media_details?.sizes?.thumbnail?.source_url)||""},k=(e=[])=>({isValid:0===e.length,errors:e})},8273:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4905),s=r(2520),a=r(6761);function o(e,t,r,c){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,n){if(null==t)return!0;if(Array.isArray(t))return i(e,t,r,n);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[s,a]of t.entries())if(!1===r(e.get(s),a,s,e,t,n))return!1;return!0}(e,t,r,n);if(t instanceof Set)return l(e,t,r,n);const a=Object.keys(t);if(null==e)return 0===a.length;if(0===a.length)return!0;if(n?.has(t))return n.get(t)===e;n?.set(t,e);try{for(let o=0;o<a.length;o++){const i=a[o];if(!s.isPrimitive(e)&&!(i in e))return!1;if(void 0===t[i]&&void 0!==e[i])return!1;if(null===t[i]&&null!==e[i])return!1;if(!r(e[i],t[i],i,e,t,n))return!1}return!0}finally{n?.delete(t)}}(e,t,r,c);case"function":return Object.keys(t).length>0?o(e,{...t},r,c):a.eq(e,t);default:return n.isObject(e)?"string"!=typeof t||""===t:a.eq(e,t)}}function i(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const s=new Set;for(let a=0;a<t.length;a++){const o=t[a];let i=!1;for(let l=0;l<e.length;l++){if(s.has(l))continue;let c=!1;if(r(e[l],o,a,e,t,n)&&(c=!0),c){s.add(l),i=!0;break}}if(!i)return!1}return!0}function l(e,t,r,n){return 0===t.size||e instanceof Set&&i([...e],[...t],r,n)}t.isMatchWith=function e(t,r,n){return"function"!=typeof n?e(t,r,()=>{}):o(t,r,function e(t,r,s,a,i,l){const c=n(t,r,s,a,i,l);return void 0!==c?Boolean(c):o(t,r,e,l)},new Map)},t.isSetMatch=l},8303:(e,t,r)=>{var n=r(6110)(r(9325),"WeakMap");e.exports=n},8329:(e,t,r)=>{var n=r(4894);e.exports=function(e,t){return function(r,s){if(null==r)return r;if(!n(r))return e(r,s);for(var a=r.length,o=t?a:-1,i=Object(r);(t?o--:++o<a)&&!1!==s(i[o],o,i););return r}}},8351:function(e,t,r){var n;!function(){"use strict";var s,a=1e9,o={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},i=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,f=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,h=u(1286742750677284.5),g={};function x(e,t){var r,n,s,a,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),i?S(t,f):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),a=o-s){for(a<0?(n=c,a=-a,l=d.length):(n=d,s=o,l=c.length),a>(l=(o=Math.ceil(f/7))>l?o+1:l+1)&&(a=l,n.length=1),n.reverse();a--;)n.push(0);n.reverse()}for((l=c.length)-(a=d.length)<0&&(a=l,n=d,d=c,c=n),r=0;a;)r=(c[--a]=c[a]+d[a]+r)/m|0,c[a]%=m;for(r&&(c.unshift(r),++s),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=s,i?S(t,f):t}function y(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function b(e){var t,r,n,s=e.length-1,a="",o=e[0];if(s>0){for(a+=o,t=1;t<s;t++)(r=7-(n=e[t]+"").length)&&(a+=k(r)),a+=n;(r=7-(n=(o=e[t])+"").length)&&(a+=k(r))}else if(0===o)return"0";for(;o%10==0;)o/=10;return a+o}g.absoluteValue=g.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},g.comparedTo=g.cmp=function(e){var t,r,n,s,a=this;if(e=new a.constructor(e),a.s!==e.s)return a.s||-e.s;if(a.e!==e.e)return a.e>e.e^a.s<0?1:-1;for(t=0,r=(n=a.d.length)<(s=e.d.length)?n:s;t<r;++t)if(a.d[t]!==e.d[t])return a.d[t]>e.d[t]^a.s<0?1:-1;return n===s?0:n>s^a.s<0?1:-1},g.decimalPlaces=g.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},g.dividedBy=g.div=function(e){return v(this,new this.constructor(e))},g.dividedToIntegerBy=g.idiv=function(e){var t=this.constructor;return S(v(this,new t(e),0,1),t.precision)},g.equals=g.eq=function(e){return!this.cmp(e)},g.exponent=function(){return j(this)},g.greaterThan=g.gt=function(e){return this.cmp(e)>0},g.greaterThanOrEqualTo=g.gte=function(e){return this.cmp(e)>=0},g.isInteger=g.isint=function(){return this.e>this.d.length-2},g.isNegative=g.isneg=function(){return this.s<0},g.isPositive=g.ispos=function(){return this.s>0},g.isZero=function(){return 0===this.s},g.lessThan=g.lt=function(e){return this.cmp(e)<0},g.lessThanOrEqualTo=g.lte=function(e){return this.cmp(e)<1},g.logarithm=g.log=function(e){var t,r=this,n=r.constructor,a=n.precision,o=a+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(s))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(s)?new n(0):(i=!1,t=v(_(r,o),_(e,o),o),i=!0,S(t,a))},g.minus=g.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?E(t,e):x(t,(e.s=-e.s,e))},g.modulo=g.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(i=!1,t=v(r,e,0,1).times(e),i=!0,r.minus(t)):S(new n(r),s)},g.naturalExponential=g.exp=function(){return w(this)},g.naturalLogarithm=g.ln=function(){return _(this)},g.negated=g.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},g.plus=g.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x(t,e):E(t,(e.s=-e.s,e))},g.precision=g.sd=function(e){var t,r,n,s=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=j(s)+1,r=7*(n=s.d.length-1)+1,n=s.d[n]){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},g.squareRoot=g.sqrt=function(){var e,t,r,n,s,a,o,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=j(c),i=!1,0==(s=Math.sqrt(+c))||s==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),n=new d(t=s==1/0?"5e"+e:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new d(s.toString()),s=o=(r=d.precision)+3;;)if(n=(a=n).plus(v(c,a,o+2)).times(.5),b(a.d).slice(0,o)===(t=b(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&"4999"==t){if(S(a,r+1,0),a.times(a).eq(c)){n=a;break}}else if("9999"!=t)break;o+=4}return i=!0,S(n,r)},g.times=g.mul=function(e){var t,r,n,s,a,o,l,c,d,u=this,f=u.constructor,p=u.d,h=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,(c=p.length)<(d=h.length)&&(a=p,p=h,h=a,o=c,c=d,d=o),a=[],n=o=c+d;n--;)a.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=a[s]+h[n]*p[s-n-1]+t,a[s--]=l%m|0,t=l/m|0;a[s]=(a[s]+t)%m|0}for(;!a[--o];)a.pop();return t?++r:a.shift(),e.d=a,e.e=r,i?S(e,f.precision):e},g.toDecimalPlaces=g.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(y(e,0,a),void 0===t?t=n.rounding:y(t,0,8),S(r,e+j(r)+1,t))},g.toExponential=function(e,t){var r,n=this,s=n.constructor;return void 0===e?r=O(n,!0):(y(e,0,a),void 0===t?t=s.rounding:y(t,0,8),r=O(n=S(new s(n),e+1,t),!0,e+1)),r},g.toFixed=function(e,t){var r,n,s=this,o=s.constructor;return void 0===e?O(s):(y(e,0,a),void 0===t?t=o.rounding:y(t,0,8),r=O((n=S(new o(s),e+j(s)+1,t)).abs(),!1,e+j(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)},g.toInteger=g.toint=function(){var e=this,t=e.constructor;return S(new t(e),j(e)+1,t.rounding)},g.toNumber=function(){return+this},g.toPower=g.pow=function(e){var t,r,n,a,o,c,d=this,f=d.constructor,p=+(e=new f(e));if(!e.s)return new f(s);if(!(d=new f(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(s))return d;if(n=f.precision,e.eq(s))return S(d,n);if(c=(t=e.e)>=(r=e.d.length-1),o=d.s,c){if((r=p<0?-p:p)<=9007199254740991){for(a=new f(s),t=Math.ceil(n/7+4),i=!1;r%2&&M((a=a.times(d)).d,t),0!==(r=u(r/2));)M((d=d.times(d)).d,t);return i=!0,e.s<0?new f(s).div(a):S(a,n)}}else if(o<0)throw Error(l+"NaN");return o=o<0&&1&e.d[Math.max(t,r)]?-1:1,d.s=1,i=!1,a=e.times(_(d,n+12)),i=!0,(a=w(a)).s=o,a},g.toPrecision=function(e,t){var r,n,s=this,o=s.constructor;return void 0===e?n=O(s,(r=j(s))<=o.toExpNeg||r>=o.toExpPos):(y(e,1,a),void 0===t?t=o.rounding:y(t,0,8),n=O(s=S(new o(s),e,t),e<=(r=j(s))||r<=o.toExpNeg,e)),n},g.toSignificantDigits=g.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(y(e,1,a),void 0===t?t=r.rounding:y(t,0,8)),S(new r(this),e,t)},g.toString=g.valueOf=g.val=g.toJSON=function(){var e=this,t=j(e),r=e.constructor;return O(e,t<=r.toExpNeg||t>=r.toExpPos)};var v=function(){function e(e,t){var r,n=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+n,e[s]=r%m|0,n=r/m|0;return n&&e.unshift(n),e}function t(e,t,r,n){var s,a;if(r!=n)a=r>n?1:-1;else for(s=a=0;s<r;s++)if(e[s]!=t[s]){a=e[s]>t[s]?1:-1;break}return a}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*m+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,s,a,o){var i,c,d,u,f,p,h,g,x,y,b,v,w,N,k,_,C,E,O=n.constructor,M=n.s==s.s?1:-1,T=n.d,P=s.d;if(!n.s)return new O(n);if(!s.s)throw Error(l+"Division by zero");for(c=n.e-s.e,C=P.length,k=T.length,g=(h=new O(M)).d=[],d=0;P[d]==(T[d]||0);)++d;if(P[d]>(T[d]||0)&&--c,(v=null==a?a=O.precision:o?a+(j(n)-j(s))+1:a)<0)return new O(0);if(v=v/7+2|0,d=0,1==C)for(u=0,P=P[0],v++;(d<k||u)&&v--;d++)w=u*m+(T[d]||0),g[d]=w/P|0,u=w%P|0;else{for((u=m/(P[0]+1)|0)>1&&(P=e(P,u),T=e(T,u),C=P.length,k=T.length),N=C,y=(x=T.slice(0,C)).length;y<C;)x[y++]=0;(E=P.slice()).unshift(0),_=P[0],P[1]>=m/2&&++_;do{u=0,(i=t(P,x,C,y))<0?(b=x[0],C!=y&&(b=b*m+(x[1]||0)),(u=b/_|0)>1?(u>=m&&(u=m-1),1==(i=t(f=e(P,u),x,p=f.length,y=x.length))&&(u--,r(f,C<p?E:P,p))):(0==u&&(i=u=1),f=P.slice()),(p=f.length)<y&&f.unshift(0),r(x,f,y),-1==i&&(i=t(P,x,C,y=x.length))<1&&(u++,r(x,C<y?E:P,y)),y=x.length):0===i&&(u++,x=[0]),g[d++]=u,i&&x[0]?x[y++]=T[N]||0:(x=[T[N]],y=1)}while((N++<k||void 0!==x[0])&&v--)}return g[0]||g.shift(),h.e=c,S(h,o?a+j(h)+1:a)}}();function w(e,t){var r,n,a,o,l,c=0,u=0,p=e.constructor,m=p.precision;if(j(e)>16)throw Error(d+j(e));if(!e.s)return new p(s);for(null==t?(i=!1,l=m):l=t,o=new p(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(l+=Math.log(f(2,u))/Math.LN10*2+5|0,r=n=a=new p(s),p.precision=l;;){if(n=S(n.times(e),l),r=r.times(++c),b((o=a.plus(v(n,r,l))).d).slice(0,l)===b(a.d).slice(0,l)){for(;u--;)a=S(a.times(a),l);return p.precision=m,null==t?(i=!0,S(a,m)):a}a=o}}function j(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function N(e,t,r){if(t>e.LN10.sd())throw i=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return S(new e(e.LN10),t)}function k(e){for(var t="";e--;)t+="0";return t}function _(e,t){var r,n,a,o,c,d,u,f,p,m=1,h=e,g=h.d,x=h.constructor,y=x.precision;if(h.s<1)throw Error(l+(h.s?"NaN":"-Infinity"));if(h.eq(s))return new x(0);if(null==t?(i=!1,f=y):f=t,h.eq(10))return null==t&&(i=!0),N(x,f);if(f+=10,x.precision=f,n=(r=b(g)).charAt(0),o=j(h),!(Math.abs(o)<15e14))return u=N(x,f+2,y).times(o+""),h=_(new x(n+"."+r.slice(1)),f-10).plus(u),x.precision=y,null==t?(i=!0,S(h,y)):h;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=b((h=h.times(e)).d)).charAt(0),m++;for(o=j(h),n>1?(h=new x("0."+r),o++):h=new x(n+"."+r.slice(1)),d=c=h=v(h.minus(s),h.plus(s),f),p=S(h.times(h),f),a=3;;){if(c=S(c.times(p),f),b((u=d.plus(v(c,new x(a),f))).d).slice(0,f)===b(d.d).slice(0,f))return d=d.times(2),0!==o&&(d=d.plus(N(x,f+2,y).times(o+""))),d=v(d,new x(m),f),x.precision=y,null==t?(i=!0,S(d,y)):d;d=u,a+=2}}function C(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(s=t.length;48===t.charCodeAt(s-1);)--s;if(t=t.slice(n,s)){if(s-=n,r=r-n-1,e.e=u(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=7;n<s;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),i&&(e.e>h||e.e<-h))throw Error(d+r)}else e.s=0,e.e=0,e.d=[0];return e}function S(e,t,r){var n,s,a,o,l,c,p,g,x=e.d;for(o=1,a=x[0];a>=10;a/=10)o++;if((n=t-o)<0)n+=7,s=t,p=x[g=0];else{if((g=Math.ceil((n+1)/7))>=(a=x.length))return e;for(p=a=x[g],o=1;a>=10;a/=10)o++;s=(n%=7)-7+o}if(void 0!==r&&(l=p/(a=f(10,o-s-1))%10|0,c=t<0||void 0!==x[g+1]||p%a,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?s>0?p/f(10,o-s):0:x[g-1])%10&1||r==(e.s<0?8:7))),t<1||!x[0])return c?(a=j(e),x.length=1,t=t-a-1,x[0]=f(10,(7-t%7)%7),e.e=u(-t/7)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(0==n?(x.length=g,a=1,g--):(x.length=g+1,a=f(10,7-n),x[g]=s>0?(p/f(10,o-s)%f(10,s)|0)*a:0),c)for(;;){if(0==g){(x[0]+=a)==m&&(x[0]=1,++e.e);break}if(x[g]+=a,x[g]!=m)break;x[g--]=0,a=1}for(n=x.length;0===x[--n];)x.pop();if(i&&(e.e>h||e.e<-h))throw Error(d+j(e));return e}function E(e,t){var r,n,s,a,o,l,c,d,u,f,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),i?S(t,h):t;if(c=e.d,f=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n){for((u=o<0)?(r=c,o=-o,l=f.length):(r=f,n=d,l=c.length),o>(s=Math.max(Math.ceil(h/7),l)+2)&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for((u=(s=c.length)<(l=f.length))&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){u=c[s]<f[s];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(a=s;a&&0===c[--a];)c[a]=m-1;--c[a],c[s]+=m}c[s]-=f[s]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,i?S(t,h):t):new p(0)}function O(e,t,r){var n,s=j(e),a=b(e.d),o=a.length;return t?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+k(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(s<0?"e":"e+")+s):s<0?(a="0."+k(-s-1)+a,r&&(n=r-o)>0&&(a+=k(n))):s>=o?(a+=k(s+1-o),r&&(n=r-s-1)>0&&(a=a+"."+k(n))):((n=s+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(a+="."),a+=k(n))),e.s<0?"-"+a:a}function M(e,t){if(e.length>t)return e.length=t,!0}function T(e){if(!e||"object"!=typeof e)throw Error(l+"Object expected");var t,r,n,s=["precision",1,a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if(void 0!==(n=e[r=s[t]])){if(!(u(n)===n&&n>=s[t+1]&&n<=s[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}(o=function e(t){var r,n,s;function a(e){var t=this;if(!(t instanceof a))return new a(e);if(t.constructor=a,e instanceof a)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):C(t,e.toString())}if("string"!=typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);C(t,e)}if(a.prototype=g,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=T,void 0===t&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<s.length;)t.hasOwnProperty(n=s[r++])||(t[n]=this[n]);return a.config(t),a}(o)).default=o.Decimal=o,s=new o(1),void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()},8418:(e,t,r)=>{"use strict";r(2779)},8440:(e,t,r)=>{var n=r(6038),s=r(7301),a=r(6009),o=a&&a.isSet,i=o?s(o):n;e.exports=i},8493:(e,t,r)=>{"use strict";var n=r(1609),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,o=n.useEffect,i=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),s=n[0].inst,d=n[1];return i(function(){s.value=r,s.getSnapshot=t,c(s)&&d({inst:s})},[e,r,t]),o(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},8509:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e,t=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return r.test(e)}}},8586:(e,t,r)=>{var n=r(6449),s=r(4394),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!s(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}},8655:(e,t,r)=>{var n=r(6025);e.exports=function(e){return n(this.__data__,e)>-1}},8695:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return null!=t&&(!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`)}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},8766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addQuestionToQuiz:()=>y,create:()=>f,createQuiz:()=>N,delete:()=>m,deleteFn:()=>m,deleteQuiz:()=>_,duplicate:()=>h,duplicateQuiz:()=>C,getAll:()=>d,getOne:()=>u,getQuiz:()=>j,getQuizStatistics:()=>x,getQuizzes:()=>w,getQuizzesByCourse:()=>g,removeQuestionFromQuiz:()=>b,update:()=>p,updateQuiz:()=>k,updateQuizQuestionOrder:()=>v});var n=r(9700),s=r(8243);const a={_course_id:null,_quiz_type:"standard",_difficulty_level:"intermediate",_quiz_category:"",_passing_score:7,_time_limit:0,_max_attempts:0,_randomize_questions:!1,_show_results:!0,_enable_negative_scoring:!1,_quiz_question_ids:[],_lesson_ids:[],_total_points:0,_quiz_instructions:""},o=["standard","graded","practice","survey","assessment","certification"],i=["easy","medium","hard","beginner","intermediate","advanced","expert"],l=["publish","draft","private","pending"],c=(0,n.eG)("quiz","quizzes",{sanitizer:e=>{if(!e)return console.warn(" sanitizeQuizData - No data provided"),null;const t=(0,s.w3)(e.title),r=(0,s.w3)(e.content),n=(0,s.w3)(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:n,status:(0,s.se)(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,qe_category:Array.isArray(e.qe_category)?e.qe_category:[],meta:{...a,...e.meta,_randomize_questions:(0,s.kM)(e.meta?._randomize_questions),_show_results:(0,s.kM)(e.meta?._show_results,!0),_enable_negative_scoring:(0,s.kM)(e.meta?._enable_negative_scoring),_quiz_question_ids:(0,s.E5)(e.meta?._quiz_question_ids),_lesson_ids:(0,s.E5)(e.meta?._lesson_ids)},questions_count:e.questions_count||e.meta?._quiz_question_ids?.length||0,total_attempts:e.total_attempts||0,_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=(0,s.Kf)(e.title,"Quiz title");r&&t.push(r),e.status&&!l.includes(e.status)&&t.push(`Invalid status. Must be one of: ${l.join(", ")}`);const n=e.meta||e,a=n._quiz_type||e.quizType;a&&!o.includes(a)&&t.push(`Invalid quiz type. Must be one of: ${o.join(", ")}`);const c=n._difficulty_level||e.difficulty;c&&!i.includes(c)&&t.push(`Invalid difficulty level. Must be one of: ${i.join(", ")}`);const d=n._passing_score||e.passingScore;if(void 0!==d){const e=(0,s.i8)(d,0,10,"Passing score");e&&t.push(e)}const u=n._time_limit||e.timeLimit;if(void 0!==u){const e=parseInt(u);(isNaN(e)||e<0)&&t.push("Time limit must be a positive number or 0 (unlimited)")}const f=n._max_attempts||e.maxAttempts;if(void 0!==f){const e=parseInt(f);(isNaN(e)||e<0)&&t.push("Max attempts must be a positive number or 0 (unlimited)")}const p=n._quiz_question_ids||e.questionIds;return p&&!Array.isArray(p)&&t.push("Question IDs must be an array"),(0,s.vQ)(t)},transformer:e=>{console.log(" transformQuizDataForApi - Input:",e);const t={title:(0,s.xV)(e.title),content:(0,s.xV)(e.content||e.instructions||""),status:(0,s.se)(e.status,"draft")};if(void 0!==e.qe_category)if(Array.isArray(e.qe_category))t.qe_category=e.qe_category.map(e=>parseInt(e,10)).filter(e=>!isNaN(e)&&e>0);else if(e.qe_category){const r=parseInt(e.qe_category,10);!isNaN(r)&&r>0&&(t.qe_category=[r])}t.meta={};const r=e._course_id||e.courseId||e.meta?._course_id;if(null!=r&&""!==r&&"0"!==r&&0!==r){const e=(0,s.ee)(r,1);e&&e>0&&(t.meta._course_id=e)}return void 0!==e._quiz_type?t.meta._quiz_type=(0,s.zi)(e._quiz_type,o,"standard"):void 0!==e.quizType?t.meta._quiz_type=(0,s.zi)(e.quizType,o,"standard"):void 0!==e.meta?._quiz_type&&(t.meta._quiz_type=(0,s.zi)(e.meta._quiz_type,o,"standard")),void 0!==e._difficulty_level?t.meta._difficulty_level=(0,s.zi)(e._difficulty_level,i,"intermediate"):void 0!==e.difficulty?t.meta._difficulty_level=(0,s.zi)(e.difficulty,i,"intermediate"):void 0!==e.meta?._difficulty_level&&(t.meta._difficulty_level=(0,s.zi)(e.meta._difficulty_level,i,"intermediate")),void 0!==e._start_date?t.meta._start_date=(0,s.xV)(e._start_date):void 0!==e.startDate?t.meta._start_date=(0,s.xV)(e.startDate):void 0!==e.meta?._start_date&&(t.meta._start_date=(0,s.xV)(e.meta._start_date)),void 0!==e._quiz_category?t.meta._quiz_category=(0,s.xV)(e._quiz_category):void 0!==e.category?t.meta._quiz_category=(0,s.xV)(e.category):void 0!==e.meta?._quiz_category&&(t.meta._quiz_category=(0,s.xV)(e.meta._quiz_category)),void 0!==e._passing_score?(t.meta._passing_score=parseFloat(e._passing_score)||7,t.meta._passing_score>10&&(t.meta._passing_score=t.meta._passing_score/10),t.meta._passing_score=Math.min(Math.max(t.meta._passing_score,0),10)):void 0!==e.passingScore?(t.meta._passing_score=parseFloat(e.passingScore)||7,t.meta._passing_score>10&&(t.meta._passing_score=t.meta._passing_score/10),t.meta._passing_score=Math.min(Math.max(t.meta._passing_score,0),10)):void 0!==e.meta?._passing_score&&(t.meta._passing_score=parseFloat(e.meta._passing_score)||7,t.meta._passing_score>10&&(t.meta._passing_score=t.meta._passing_score/10),t.meta._passing_score=Math.min(Math.max(t.meta._passing_score,0),10)),void 0!==e._time_limit?t.meta._time_limit=(0,s.o5)(e._time_limit,0,0):void 0!==e.timeLimit?t.meta._time_limit=(0,s.o5)(e.timeLimit,0,0):void 0!==e.meta?._time_limit&&(t.meta._time_limit=(0,s.o5)(e.meta._time_limit,0,0)),void 0!==e._max_attempts?t.meta._max_attempts=(0,s.o5)(e._max_attempts,0,0):void 0!==e.maxAttempts?t.meta._max_attempts=(0,s.o5)(e.maxAttempts,0,0):void 0!==e.meta?._max_attempts&&(t.meta._max_attempts=(0,s.o5)(e.meta._max_attempts,0,0)),void 0!==e._randomize_questions?t.meta._randomize_questions=(0,s.kM)(e._randomize_questions):void 0!==e.randomizeQuestions?t.meta._randomize_questions=(0,s.kM)(e.randomizeQuestions):void 0!==e.meta?._randomize_questions&&(t.meta._randomize_questions=(0,s.kM)(e.meta._randomize_questions)),void 0!==e._show_results?t.meta._show_results=(0,s.kM)(e._show_results,!0):void 0!==e.showResults?t.meta._show_results=(0,s.kM)(e.showResults,!0):void 0!==e.meta?._show_results&&(t.meta._show_results=(0,s.kM)(e.meta._show_results,!0)),void 0!==e._enable_negative_scoring?t.meta._enable_negative_scoring=(0,s.kM)(e._enable_negative_scoring):void 0!==e.enableNegativeScoring?t.meta._enable_negative_scoring=(0,s.kM)(e.enableNegativeScoring):void 0!==e.meta?._enable_negative_scoring&&(t.meta._enable_negative_scoring=(0,s.kM)(e.meta._enable_negative_scoring)),void 0!==e._quiz_question_ids?t.meta._quiz_question_ids=(0,s.E5)(e._quiz_question_ids):void 0!==e.questionIds?t.meta._quiz_question_ids=(0,s.E5)(e.questionIds):void 0!==e.meta?._quiz_question_ids&&(t.meta._quiz_question_ids=(0,s.E5)(e.meta._quiz_question_ids)),void 0!==e._lesson_ids?t.meta._lesson_ids=(0,s.E5)(e._lesson_ids):void 0!==e.lessonIds?t.meta._lesson_ids=(0,s.E5)(e.lessonIds):void 0!==e.meta?._lesson_ids&&(t.meta._lesson_ids=(0,s.E5)(e.meta._lesson_ids)),void 0!==e._total_points?t.meta._total_points=(0,s.o5)(e._total_points,0,0):void 0!==e.totalPoints?t.meta._total_points=(0,s.o5)(e.totalPoints,0,0):void 0!==e.meta?._total_points&&(t.meta._total_points=(0,s.o5)(e.meta._total_points,0,0)),void 0!==e._quiz_instructions?t.meta._quiz_instructions=(0,s.xV)(e._quiz_instructions):void 0!==e.instructions?t.meta._quiz_instructions=(0,s.xV)(e.instructions):void 0!==e.meta?._quiz_instructions&&(t.meta._quiz_instructions=(0,s.xV)(e.meta._quiz_instructions)),t.meta={...a,...t.meta},console.log(" transformQuizDataForApi - Output:",t),console.log(" Category in transformed:",t.qe_category),t},buildParams:(e={})=>{const{page:t=1,perPage:r=20,search:n="",courseId:s=null,quizType:a=null,difficulty:o=null,category:i=null,orderBy:l="date",order:c="desc",embed:d=!0}=e,u=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:l,order:c});if(d&&u.append("_embed","true"),n&&n.trim()&&u.append("search",n.trim()),s){const e=parseInt(s,10);Number.isInteger(e)&&e>0&&u.append("course_id",e.toString())}return a&&(u.append("meta_query[1][key]","_quiz_type"),u.append("meta_query[1][value]",a),u.append("meta_query[1][compare]","=")),o&&(u.append("meta_query[2][key]","_difficulty_level"),u.append("meta_query[2][value]",o),u.append("meta_query[2][compare]","=")),i&&u.append("qe_category",i.toString()),u}}),d=(e={})=>c.getAll(e),u=e=>c.getOne(e),f=e=>c.create(e),p=(e,t)=>c.update(e,t),m=e=>c.delete(e),h=e=>c.duplicate(e),g=(e,t={})=>d({...t,courseId:e}),x=async e=>{try{const t=await u(e);return{totalQuestions:t.meta?._quiz_question_ids?.length||0,totalPoints:t.meta?._total_points||0,passingScore:t.meta?._passing_score||70,timeLimit:t.meta?._time_limit||0,maxAttempts:t.meta?._max_attempts||0,totalAttempts:t.total_attempts||0,averageScore:t.average_score||0}}catch(e){throw console.error("Error fetching quiz stats:",e),e}},y=async(e,t)=>{try{const r=await u(e),n=r.meta?._quiz_question_ids||[];return n.includes(t)?(console.warn("Question already exists in quiz"),r):p(e,{questionIds:[...n,t]})}catch(e){throw console.error("Error adding question to quiz:",e),e}},b=async(e,t)=>{try{const r=await u(e),n=r.meta?._quiz_question_ids||[];return p(e,{questionIds:n.filter(e=>e!==t)})}catch(e){throw console.error("Error removing question from quiz:",e),e}},v=(e,t)=>p(e,{questionIds:t}),w=d,j=u,N=f,k=p,_=m,C=h},8805:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const s=e[n],a=t(s);r.has(a)||r.set(a,s)}return Array.from(r.values())}},8816:(e,t,r)=>{var n=r(5970),s=r(6757),a=r(2865);e.exports=function(e){return a(s(e,void 0,n),e+"")}},8859:(e,t,r)=>{var n=r(3661),s=r(1380),a=r(1459);function o(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}o.prototype.add=o.prototype.push=s,o.prototype.has=a,e.exports=o},8867:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},8879:(e,t,r)=>{var n=r(4335)(Object.getPrototypeOf,Object);e.exports=n},8906:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}()},8919:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1366);t.toNumber=function(e){return n.isSymbol(e)?NaN:Number(e)}},8948:(e,t,r)=>{var n=r(1791),s=r(6375);e.exports=function(e,t){return n(e,s(e),t)}},8969:(e,t,r)=>{var n=r(7422),s=r(5160);e.exports=function(e,t){return t.length<2?e:n(e,s(t,0,-1))}},8984:(e,t,r)=>{var n=r(5527),s=r(3650),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},9172:(e,t,r)=>{var n=r(5861),s=r(346);e.exports=function(e){return s(e)&&"[object Map]"==n(e)}},9181:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},9184:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},9219:e=>{e.exports=function(e,t){return e.has(t)}},9242:(e,t,r)=>{"use strict";e.exports=r(2162)},9302:(e,t,r)=>{var n=r(3488),s=r(6757),a=r(2865);e.exports=function(e,t){return a(s(e,t,n),e+"")}},9325:(e,t,r)=>{var n=r(4840),s="object"==typeof self&&self&&self.Object===Object&&self,a=n||s||Function("return this")();e.exports=a},9326:(e,t,r)=>{var n=r(1769),s=r(2428),a=r(6449),o=r(361),i=r(294),l=r(7797);e.exports=function(e,t,r){for(var c=-1,d=(t=n(t,e)).length,u=!1;++c<d;){var f=l(t[c]);if(!(u=null!=e&&r(e,f)))break;e=e[f]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&i(d)&&o(f,d)&&(a(e)||s(e))}},9344:(e,t,r)=>{var n=r(3805),s=Object.create,a=function(){function e(){}return function(t){if(!n(t))return{};if(s)return s(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=a},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9374:(e,t,r)=>{var n=r(4128),s=r(3805),a=r(4394),o=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(a(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=i.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):o.test(e)?NaN:+e}},9467:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3964),s=r(9184);t.cloneDeepWith=function(e,t){return n.cloneDeepWith(e,(r,a,o,i)=>{const l=t?.(r,a,o,i);if(void 0!==l)return l;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case s.numberTag:case s.stringTag:case s.booleanTag:{const t=new e.constructor(e?.valueOf());return n.copyProperties(t,e),t}case s.argumentsTag:{const t={};return n.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},9570:(e,t,r)=>{var n=r(7334),s=r(3243),a=r(3488),o=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a;e.exports=o},9653:(e,t,r)=>{var n=r(7828);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},9700:(e,t,r)=>{"use strict";r.d(t,{DK:()=>a,eG:()=>o,qb:()=>s}),r(5236);const n=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.endpoints)throw new Error("API endpoints not configured in WordPress");return e},s=async(e,t={})=>{try{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":n().nonce},credentials:"same-origin",...t},s=await fetch(e,r);if(!s.ok){const e=await s.text();throw new Error(`API Error ${s.status}: ${s.statusText} - ${e}`)}return{data:await s.json(),headers:{"X-WP-Total":s.headers.get("X-WP-Total"),"X-WP-TotalPages":s.headers.get("X-WP-TotalPages")}}}catch(t){throw console.error(" API Request Failed:",e,t),t}},a=(e={})=>{const{page:t=1,perPage:r=50,search:n="",orderBy:s="date",order:a="desc",embed:o=!1,fields:i=null,status:l,category:c,difficulty:d,courseId:u,quizId:f,enrolledOnly:p}=e,m=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:s,order:a});return o&&m.append("_embed","true"),i&&Array.isArray(i)&&m.append("_fields",i.join(",")),n&&n.trim()&&m.append("search",n.trim()),l&&m.append("status",l),c&&m.append("qe_category",c),d&&m.append("qe_difficulty",d),u&&m.append("course_id",u.toString()),f&&m.append("quiz_id",f.toString()),!0!==p&&"true"!==p||m.append("enrolled_only","true"),m},o=(e,t,r={})=>{const{sanitizer:o=e=>e,validator:i=()=>({isValid:!0,errors:[]}),transformer:l=e=>e,buildParams:c=a}=r,d=()=>{const e=n();if(!e.endpoints[t])throw new Error(`Endpoint '${t}' not configured`);return e.endpoints[t]};return{getAll:async(t={})=>{try{const r=`${d()}?${c(t).toString()}`;console.log(` GET ${e}s:`,r);const n=await s(r);return{data:Array.isArray(n.data)?n.data.map(o):[],pagination:{currentPage:t.page||1,totalPages:parseInt(n.headers["X-WP-TotalPages"]||"1"),total:parseInt(n.headers["X-WP-Total"]||"0"),perPage:t.perPage||20}}}catch(t){throw console.error(` Error fetching ${e}s:`,t),t}},getOne:async(t,r={})=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const n=d(),a=new URLSearchParams;"edit"===r.context?a.append("context","edit"):a.append("context","view"),!1!==r.embed&&a.append("_embed","true");const i=`${n}/${t}?${a.toString()}`;console.log(` GET ${e}:`,i);const l=await s(i);return o(l.data)}catch(n){if(console.error(` Error fetching ${e} ${t}:`,n),(n.message.includes("403")||n.message.includes("401"))&&"edit"===r.context){console.warn(` Access denied with context=edit, retrying with context=view for ${e} ${t}`);try{const n=d(),a=new URLSearchParams;a.append("context","view"),!1!==r.embed&&a.append("_embed","true");const i=`${n}/${t}?${a.toString()}`;console.log(` Retry GET ${e}:`,i);const l=await s(i);return o(l.data)}catch(r){throw console.error(` Retry also failed for ${e} ${t}:`,r),r}}if(n.message.includes("404"))return null;throw n}},create:async t=>{try{const e=i(t);if(!e.isValid)throw new Error(`Validation failed: ${e.errors.join(", ")}`);const r=d(),n=l(t),a=await s(r,{method:"POST",body:JSON.stringify(n)});return o(a.data)}catch(t){throw console.error(` Error creating ${e}:`,t),t}},update:async(t,r)=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const n=i(r);if(!n.isValid)throw new Error(`Validation failed: ${n.errors.join(", ")}`);const a=d(),c=l(r),u=`${a}/${t}`,f=await s(u,{method:"POST",body:JSON.stringify(c)});return o(f.data)}catch(r){throw console.error(` Error updating ${e} ${t}:`,r),r}},delete:async(t,r={})=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const n=d(),a=new URLSearchParams;r.force&&a.append("force","true");const o=`${n}/${t}?${a.toString()}`;return console.log(` Deleting ${e} ${t}`),await s(o,{method:"DELETE"}),console.log(` ${e} deleted:`,t),!0}catch(r){throw console.error(` Error deleting ${e} ${t}:`,r),r}},getCount:async(t={})=>{try{return(await service.getAll({...t,perPage:1})).pagination.total}catch(t){return console.error(` Error getting ${e} count:`,t),0}}}}},9752:(e,t,r)=>{var n=r(3729),s=r(9344),a=r(641),o=r(5389),i=r(8879),l=r(6449),c=r(3656),d=r(1882),u=r(3805),f=r(7167);e.exports=function(e,t,r){var p=l(e),m=p||c(e)||f(e);if(t=o(t,4),null==r){var h=e&&e.constructor;r=m?p?new h:[]:u(e)&&d(h)?s(i(e)):{}}return(m?n:a)(e,function(e,n,s){return t(r,e,n,s)}),r}},9770:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,s=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[s++]=o)}return a}},9771:e=>{"use strict";e.exports=function(){}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},9888:(e,t,r)=>{"use strict";e.exports=r(8493)},9931:(e,t,r)=>{var n=r(1769),s=r(8090),a=r(8969),o=r(7797);e.exports=function(e,t){return t=n(t,e),null==(e=a(e,t))||delete e[o(s(t))]}},9935:e=>{e.exports=function(){return!1}},9999:(e,t,r)=>{var n=r(7217),s=r(3729),a=r(6547),o=r(4733),i=r(3838),l=r(3290),c=r(3007),d=r(2271),u=r(8948),f=r(2),p=r(3349),m=r(5861),h=r(6189),g=r(7199),x=r(5529),y=r(6449),b=r(3656),v=r(7730),w=r(3805),j=r(8440),N=r(5950),k=r(7241),_="[object Arguments]",C="[object Function]",S="[object Object]",E={};E[_]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[S]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[C]=E["[object WeakMap]"]=!1,e.exports=function e(t,r,O,M,T,P){var A,q=1&r,z=2&r,D=4&r;if(O&&(A=T?O(t,M,T,P):O(t)),void 0!==A)return A;if(!w(t))return t;var L=y(t);if(L){if(A=h(t),!q)return c(t,A)}else{var I=m(t),R=I==C||"[object GeneratorFunction]"==I;if(b(t))return l(t,q);if(I==S||I==_||R&&!T){if(A=z||R?{}:x(t),!q)return z?u(t,i(A,t)):d(t,o(A,t))}else{if(!E[I])return T?t:{};A=g(t,I,q)}}P||(P=new n);var $=P.get(t);if($)return $;P.set(t,A),j(t)?t.forEach(function(n){A.add(e(n,r,O,n,t,P))}):v(t)&&t.forEach(function(n,s){A.set(s,e(n,r,O,s,t,P))});var F=L?void 0:(D?z?p:f:z?k:N)(t);return s(F||t,function(n,s){F&&(n=t[s=n]),a(A,s,e(n,r,O,s,t,P))}),A}}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={id:e,loaded:!1,exports:{}};return s[e].call(r.exports,r,r.exports,o),r.loaded=!0,r.exports}o.m=s,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var s=Object.create(null);o.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var i=2&n&&r;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,o.d(s,a),s},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,r)=>(o.f[r](e,t),t),[])),o.u=e=>e+".js",o.miniCssF=e=>{},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="quiz-extended:",o.l=(e,t,s,a)=>{if(r[e])r[e].push(t);else{var i,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+s){i=u;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,o.nc&&i.setAttribute("nonce",o.nc),i.setAttribute("data-webpack",n+s),i.src=e),r[e]=[t];var f=(t,n)=>{i.onerror=i.onload=null,clearTimeout(p);var s=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach(e=>e(n)),t)return t(n)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),l&&document.head.appendChild(i)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{var e={57:0};o.f.j=(t,r)=>{var n=o.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise((r,s)=>n=e[t]=[r,s]);r.push(n[2]=s);var a=o.p+o.u(t),i=new Error;o.l(a,r=>{if(o.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",i.name="ChunkLoadError",i.type=s,i.request=a,n[1](i)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[a,i,l]=r,c=0;if(a.some(t=>0!==e[t])){for(n in i)o.o(i,n)&&(o.m[n]=i[n]);l&&l(o)}for(t&&t(r);c<a.length;c++)s=a[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=globalThis.webpackChunkquiz_extended=globalThis.webpackChunkquiz_extended||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};o.r(e),o.d(e,{courseExists:()=>ss,create:()=>Vn,createCourse:()=>Jn,delete:()=>Yn,deleteCourse:()=>ts,deleteFn:()=>Yn,duplicate:()=>Gn,duplicateCourse:()=>rs,getAll:()=>Wn,getCount:()=>ns,getCourse:()=>Zn,getCourses:()=>Xn,getCoursesByCategory:()=>us,getCoursesByDifficulty:()=>fs,getEnrolledUsersCount:()=>as,getFeaturedCourses:()=>ps,getOne:()=>Qn,getPublishedCourses:()=>ms,publishCourse:()=>is,resetCourse:()=>hs,searchCoursesByTitle:()=>ds,toggleCourseFeatured:()=>cs,unpublishCourse:()=>ls,update:()=>Kn,updateCourse:()=>es,updateCourseStatus:()=>os});var t={};o.r(t),o.d(t,{create:()=>Ss,createLesson:()=>Us,delete:()=>Os,deleteFn:()=>Os,deleteLesson:()=>Ws,duplicateLesson:()=>Ms,getAll:()=>ks,getLesson:()=>Bs,getLessonStatistics:()=>$s,getLessons:()=>Fs,getLessonsByCourse:()=>_s,getLessonsByType:()=>Is,getLessonsCount:()=>Ts,getOne:()=>Cs,getPublishedLessons:()=>Rs,lessonExists:()=>Ps,moveLessonToCourse:()=>Ls,publishLesson:()=>qs,unpublishLesson:()=>zs,update:()=>Es,updateLesson:()=>Hs,updateLessonOrder:()=>Ds,updateLessonStatus:()=>As});var r={};o.r(r),o.d(r,{bulkCreateQuestions:()=>Jl,create:()=>Al,createQuestion:()=>Il,delete:()=>zl,deleteFn:()=>zl,deleteQuestion:()=>$l,duplicateQuestion:()=>Bl,getAll:()=>Tl,getOne:()=>Pl,getPublishedQuestions:()=>Xl,getQuestion:()=>Ll,getQuestionStatistics:()=>Zl,getQuestions:()=>Dl,getQuestionsByCategory:()=>Yl,getQuestionsByDifficulty:()=>Kl,getQuestionsByIds:()=>ec,getQuestionsByProvider:()=>Gl,getQuestionsByQuiz:()=>Fl,getQuestionsByType:()=>Vl,getQuestionsCount:()=>Ul,questionExists:()=>Hl,update:()=>ql,updateQuestion:()=>Rl,updateQuestionOrder:()=>Ql,updateQuestionStatus:()=>Wl});var n={};o.r(n),o.d(n,{add:()=>yp,century:()=>Fp,date:()=>Lp,day:()=>Dp,decade:()=>$p,diff:()=>Up,endOf:()=>jp,eq:()=>Np,gt:()=>_p,gte:()=>Cp,hours:()=>zp,inRange:()=>Tp,lt:()=>Sp,lte:()=>Ep,max:()=>Mp,milliseconds:()=>Pp,min:()=>Op,minutes:()=>qp,month:()=>Ip,neq:()=>kp,seconds:()=>Ap,startOf:()=>vp,subtract:()=>bp,weekday:()=>Bp,year:()=>Rp});var s={};o.r(s),o.d(s,{scaleBand:()=>oS,scaleDiverging:()=>KT,scaleDivergingLog:()=>YT,scaleDivergingPow:()=>XT,scaleDivergingSqrt:()=>ZT,scaleDivergingSymlog:()=>GT,scaleIdentity:()=>WE,scaleImplicit:()=>sS,scaleLinear:()=>HE,scaleLog:()=>eO,scaleOrdinal:()=>aS,scalePoint:()=>lS,scalePow:()=>cO,scaleQuantile:()=>bO,scaleQuantize:()=>vO,scaleRadial:()=>fO,scaleSequential:()=>FT,scaleSequentialLog:()=>BT,scaleSequentialPow:()=>HT,scaleSequentialQuantile:()=>QT,scaleSequentialSqrt:()=>WT,scaleSequentialSymlog:()=>UT,scaleSqrt:()=>dO,scaleSymlog:()=>sO,scaleThreshold:()=>wO,scaleTime:()=>LT,scaleUtc:()=>IT,tickFormat:()=>BE});var a=o(1609),i=o.n(a),l=o(5338);o(4915),Object.create(null);const c={},d=(e,t,r,n)=>{m(r)&&c[r]||(m(r)&&(c[r]=new Date),((e,t,r,n)=>{const s=[r,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(s,"warn","react-i18next::",!0);m(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...s):console?.warn&&console.warn(...s)})(e,t,r,n))},u=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},f=(e,t,r)=>{e.loadNamespaces(t,u(e,r))},p=(e,t,r,n)=>{if(m(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return f(e,r,n);r.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,u(e,n))},m=e=>"string"==typeof e,h=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,g={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},x=e=>g[e];let y,b={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(h,x)};const v={type:"3rdParty",init(e){((e={})=>{b={...b,...e}})(e.options.react),(e=>{y=e})(e)}},w=(0,a.createContext)();class j{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const N=(e,t,r,n)=>e.getFixedT(t,r,n),k=(e,t={})=>{const{i18n:r}=t,{i18n:n,defaultNS:s}=(0,a.useContext)(w)||{},o=r||n||y;if(o&&!o.reportNamespaces&&(o.reportNamespaces=new j),!o){d(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return m(t)?t:"object"==typeof(r=t)&&null!==r&&m(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var r},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}o.options.react?.wait&&d(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...b,...o.options.react,...t},{useSuspense:l,keyPrefix:c}=i;let u=e||s||o.options?.defaultNS;u=m(u)?[u]:u||["translation"],o.reportNamespaces.addUsedNamespaces?.(u);const h=(o.isInitialized||o.initializedStoreOnce)&&u.every(e=>((e,t,r={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:r.lng,precheck:(t,n)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!n(t.isLanguageChangingTo,e))return!1}}):(d(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,o,i)),g=((e,t,r,n)=>(0,a.useCallback)(N(e,t,r,n),[e,t,r,n]))(o,t.lng||null,"fallback"===i.nsMode?u:u[0],c),x=()=>g,v=()=>N(o,t.lng||null,"fallback"===i.nsMode?u:u[0],c),[k,_]=(0,a.useState)(x);let C=u.join();t.lng&&(C=`${t.lng}${C}`);const S=((e,t)=>{const r=(0,a.useRef)();return(0,a.useEffect)(()=>{r.current=e},[e,t]),r.current})(C),E=(0,a.useRef)(!0);(0,a.useEffect)(()=>{const{bindI18n:e,bindI18nStore:r}=i;E.current=!0,h||l||(t.lng?p(o,t.lng,u,()=>{E.current&&_(v)}):f(o,u,()=>{E.current&&_(v)})),h&&S&&S!==C&&E.current&&_(v);const n=()=>{E.current&&_(v)};return e&&o?.on(e,n),r&&o?.store.on(r,n),()=>{E.current=!1,o&&e&&e?.split(" ").forEach(e=>o.off(e,n)),r&&o&&r.split(" ").forEach(e=>o.store.off(e,n))}},[o,C]),(0,a.useEffect)(()=>{E.current&&h&&_(x)},[o,c,h]);const O=[k,o,h];if(O.t=k,O.i18n=o,O.ready=h,h)return O;if(!h&&!l)return O;throw new Promise(e=>{t.lng?p(o,t.lng,u,()=>e()):f(o,u,()=>e())})};function _({i18n:e,defaultNS:t,children:r}){const n=(0,a.useMemo)(()=>({i18n:e,defaultNS:t}),[e,t]);return(0,a.createElement)(w.Provider,{value:n},r)}const C=e=>"string"==typeof e,S=()=>{let e,t;const r=new Promise((r,n)=>{e=r,t=n});return r.resolve=e,r.reject=t,r},E=e=>null==e?"":""+e,O=/###/g,M=e=>e&&e.indexOf("###")>-1?e.replace(O,"."):e,T=e=>!e||C(e),P=(e,t,r)=>{const n=C(t)?t.split("."):t;let s=0;for(;s<n.length-1;){if(T(e))return{};const t=M(n[s]);!e[t]&&r&&(e[t]=new r),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return T(e)?{}:{obj:e,k:M(n[s])}},A=(e,t,r)=>{const{obj:n,k:s}=P(e,t,Object);if(void 0!==n||1===t.length)return void(n[s]=r);let a=t[t.length-1],o=t.slice(0,t.length-1),i=P(e,o,Object);for(;void 0===i.obj&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),i=P(e,o,Object),i?.obj&&void 0!==i.obj[`${i.k}.${a}`]&&(i.obj=void 0);i.obj[`${i.k}.${a}`]=r},q=(e,t)=>{const{obj:r,k:n}=P(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},z=(e,t,r)=>{for(const n in t)"__proto__"!==n&&"constructor"!==n&&(n in e?C(e[n])||e[n]instanceof String||C(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):z(e[n],t[n],r):e[n]=t[n]);return e},D=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const I=e=>C(e)?e.replace(/[&<>"'\/]/g,e=>L[e]):e,R=[" ",",","?","!",";"],$=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}(20),F=(e,t,r=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const n=t.split(r);let s=e;for(let e=0;e<n.length;){if(!s||"object"!=typeof s)return;let t,a="";for(let o=e;o<n.length;++o)if(o!==e&&(a+=r),a+=n[o],t=s[a],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<n.length-1)continue;e+=o-e+1;break}s=t}return s},B=e=>e?.replace("_","-"),U={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class H{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||U,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,n){return n&&!this.debug?null:(C(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new H(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new H(this.logger,e)}}var W=new H;class Q{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const r=this.observers[e].get(t)||0;this.observers[e].set(t,r+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,r])=>{for(let n=0;n<r;n++)e(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,n])=>{for(let s=0;s<n;s++)r.apply(r,[e,...t])})}}class V extends Q{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,n={}){const s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,a=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):C(r)&&s?o.push(...r.split(s)):o.push(r)));const i=q(this.data,o);return!i&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),!i&&a&&C(r)?F(this.data?.[e]?.[t],r,s):i}addResource(e,t,r,n,s={silent:!1}){const a=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),n=t,t=o[1]),this.addNamespaces(t),A(this.data,o,n),s.silent||this.emit("added",e,t,r,n)}addResources(e,t,r,n={silent:!1}){for(const n in r)(C(r[n])||Array.isArray(r[n]))&&this.addResource(e,t,n,r[n],{silent:!0});n.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,n,s,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),n=r,r=t,t=o[1]),this.addNamespaces(t);let i=q(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?z(i,r,s):i={...i,...r},A(this.data,o,i),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var K={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,s){return e.forEach(e=>{t=this.processors[e]?.process(t,r,n,s)??t}),t}};const Y=Symbol("i18next/PATH_KEY");function G(e,t){const{[Y]:r}=e(function(){const e=[],t=Object.create(null);let r;return t.get=(n,s)=>(r?.revoke?.(),s===Y?e:(e.push(s),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}());return r.join(t?.keySeparator??".")}const X={},Z=e=>!C(e)&&"boolean"!=typeof e&&"number"!=typeof e;class J extends Q{constructor(e,t={}){var r,n;super(),r=e,n=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{r[e]&&(n[e]=r[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=W.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};if(null==e)return!1;const n=this.resolve(e,r);return void 0!==n?.res}extractFromKey(e,t){let r=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");const n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,r)=>{t=t||"",r=r||"";const n=R.filter(e=>t.indexOf(e)<0&&r.indexOf(e)<0);if(0===n.length)return!0;const s=$.getRegExp(`(${n.map(e=>"?"===e?"\\?":e).join("|")})`);let a=!s.test(e);if(!a){const t=e.indexOf(r);t>0&&!s.test(e.substring(0,t))&&(a=!0)}return a})(e,r,n));if(a&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:C(s)?[s]:s};const a=e.split(r);(r!==n||r===n&&this.options.ns.indexOf(a[0])>-1)&&(s=a.shift()),e=a.join(n)}return{key:e,namespaces:C(s)?[s]:s}}translate(e,t,r){let n="object"==typeof t?{...t}:t;if("object"!=typeof n&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof n&&(n={...n}),n||(n={}),null==e)return"";"function"==typeof e&&(e=G(e,{...this.options,...n})),Array.isArray(e)||(e=[String(e)]);const s=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,{key:o,namespaces:i}=this.extractFromKey(e[e.length-1],n),l=i[i.length-1];let c=void 0!==n.nsSeparator?n.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const d=n.lng||this.language,u=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===d?.toLowerCase())return u?s?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:`${l}${c}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(n)}:o;const f=this.resolve(e,n);let p=f?.res;const m=f?.usedKey||o,h=f?.exactUsedKey||o,g=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject,y=void 0!==n.count&&!C(n.count),b=J.hasDefaultValue(n),v=y?this.pluralResolver.getSuffix(d,n.count,n):"",w=n.ordinal&&y?this.pluralResolver.getSuffix(d,n.count,{ordinal:!1}):"",j=y&&!n.ordinal&&0===n.count,N=j&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${v}`]||n[`defaultValue${w}`]||n.defaultValue;let k=p;x&&!p&&b&&(k=N);const _=Z(k),S=Object.prototype.toString.apply(k);if(!(x&&k&&_&&["[object Number]","[object Function]","[object RegExp]"].indexOf(S)<0)||C(g)&&Array.isArray(k))if(x&&C(g)&&Array.isArray(p))p=p.join(g),p&&(p=this.extendTranslation(p,e,n,r));else{let t=!1,s=!1;!this.isValidLookup(p)&&b&&(t=!0,p=N),this.isValidLookup(p)||(s=!0,p=o);const i=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:p,u=b&&N!==p&&this.options.updateMissing;if(s||t||u){if(this.logger.log(u?"updateKey":"missingKey",d,l,o,u?N:p),a){const e=this.resolve(o,{...n,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(n.lng||this.language):e.push(n.lng||this.language);const r=(e,t,r)=>{const s=b&&r!==p?r:i;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,s,u,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,s,u,n),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,n);j&&n[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{r([e],o+t,n[`defaultValue${t}`]||N)})}):r(e,o,N))}p=this.extendTranslation(p,e,n,f,r),s&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}${c}${o}`),(s||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?p:void 0,n))}else{if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,k,{...n,ns:i}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(f.res=e,f.usedParams=this.getUsedParamsDetails(n),f):e}if(a){const e=Array.isArray(k),t=e?[]:{},r=e?h:m;for(const e in k)if(Object.prototype.hasOwnProperty.call(k,e)){const s=`${r}${a}${e}`;t[e]=b&&!p?this.translate(s,{...n,defaultValue:Z(N)?N[e]:void 0,joinArrays:!1,ns:i}):this.translate(s,{...n,joinArrays:!1,ns:i}),t[e]===s&&(t[e]=k[e])}p=t}}return s?(f.res=p,f.usedParams=this.getUsedParamsDetails(n),f):p}extendTranslation(e,t,r,n,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const a=C(e)&&(void 0!==r?.interpolation?.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(a){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let i=r.replace&&!C(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),e=this.interpolator.interpolate(e,i,r.lng||this.language||n.usedLng,r),a){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(r.nest=!1)}!r.lng&&n&&n.res&&(r.lng=this.language||n.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,(...e)=>s?.[0]!==e[0]||r.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,o=C(a)?[a]:a;return null!=e&&o?.length&&!1!==r.applyPostProcessor&&(e=K.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,n,s,a,o;return C(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(r))return;const i=this.extractFromKey(e,t),l=i.key;n=l;let c=i.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==t.count&&!C(t.count),u=d&&!t.ordinal&&0===t.count,f=void 0!==t.context&&(C(t.context)||"number"==typeof t.context)&&""!==t.context,p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{this.isValidLookup(r)||(o=e,X[`${p[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(o)||(X[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(n=>{if(this.isValidLookup(r))return;a=n;const o=[l];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,n,e,t);else{let e;d&&(e=this.pluralResolver.getSuffix(n,t.count,t));const r=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(d&&(t.ordinal&&0===e.indexOf(s)&&o.push(l+e.replace(s,this.options.pluralSeparator)),o.push(l+e),u&&o.push(l+r)),f){const n=`${l}${this.options.contextSeparator||"_"}${t.context}`;o.push(n),d&&(t.ordinal&&0===e.indexOf(s)&&o.push(n+e.replace(s,this.options.pluralSeparator)),o.push(n+e),u&&o.push(n+r))}}let i;for(;i=o.pop();)this.isValidLookup(r)||(s=i,r=this.getResource(n,e,i,t))}))})}),{res:r,usedKey:n,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,r,n={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,n):this.resourceStore.getResource(e,t,r,n)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!C(e.replace);let n=r?e.replace:e;if(r&&void 0!==e.count&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const e of t)delete n[e]}return n}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}class ee{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=W.create("languageUtils")}getScriptPartFromCode(e){if(!(e=B(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=B(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(C(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const r=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(r)||(t=r)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const r=this.getScriptPartFromCode(e);if(this.isSupportedCode(r))return t=r;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),C(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),n=[],s=e=>{e&&(this.isSupportedCode(e)?n.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return C(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):C(e)&&s(this.formatLanguageCode(e)),r.forEach(e=>{n.indexOf(e)<0&&s(this.formatLanguageCode(e))}),n}}const te={zero:0,one:1,two:2,few:3,many:4,other:5},re={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class ne{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=W.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=B("dev"===e?"en":e),n=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:n});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:n})}catch(r){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),re;if(!e.match(/-|_/))return re;const n=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(n,t)}return this.pluralRulesCache[s]=a,a}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((e,t)=>te[e]-te[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,r={}){const n=this.getRule(e,r);return n?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const se=(e,t,r,n=".",s=!0)=>{let a=((e,t,r)=>{const n=q(e,r);return void 0!==n?n:q(t,r)})(e,t,r);return!a&&s&&C(r)&&(a=F(e,r,n),void 0===a&&(a=F(t,r,n))),a},ae=e=>e.replace(/\$/g,"$$$$");class oe{constructor(e={}){this.logger=W.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:n,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:i,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:f,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:h,maxReplaces:g,alwaysFormat:x}=e.interpolation;this.escape=void 0!==t?t:I,this.escapeValue=void 0===r||r,this.useRawValueToEscape=void 0!==n&&n,this.prefix=s?D(s):a||"{{",this.suffix=o?D(o):i||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?D(u):f||D("$t("),this.nestingSuffix=p?D(p):m||D(")"),this.nestingOptionsSeparator=h||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==x&&x,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,n){let s,a,o;const i=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const s=se(t,i,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,r,{...n,...t,interpolationkey:e}):s}const s=e.split(this.formatSeparator),a=s.shift().trim(),o=s.join(this.formatSeparator).trim();return this.format(se(t,i,a,this.options.keySeparator,this.options.ignoreJSONStructure),o,r,{...n,...t,interpolationkey:a})};this.resetRegExp();const c=n?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=void 0!==n?.interpolation?.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>ae(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?ae(this.escape(e)):ae(e)}].forEach(t=>{for(o=0;s=t.regex.exec(e);){const r=s[1].trim();if(a=l(r),void 0===a)if("function"==typeof c){const t=c(e,s,n);a=C(t)?t:""}else if(n&&Object.prototype.hasOwnProperty.call(n,r))a="";else{if(d){a=s[0];continue}this.logger.warn(`missed to pass in variable ${r} for interpolating ${e}`),a=""}else C(a)||this.useRawValueToEscape||(a=E(a));const i=t.safeValue(a);if(e=e.replace(s[0],i),d?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,r={}){let n,s,a;const o=(e,t)=>{const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const n=e.split(new RegExp(`${r}[ ]*{`));let s=`{${n[1]}`;e=n[0],s=this.interpolate(s,a);const o=s.match(/'/g),i=s.match(/"/g);((o?.length??0)%2==0&&!i||i.length%2!=0)&&(s=s.replace(/'/g,'"'));try{a=JSON.parse(s),t&&(a={...t,...a})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${s}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let i=[];a={...r},a=a.replace&&!C(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const l=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(-1!==l&&(i=n[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),n[1]=n[1].slice(0,l)),s=t(o.call(this,n[1].trim(),a),a),s&&n[0]===e&&!C(s))return s;C(s)||(s=E(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),i.length&&(s=i.reduce((e,t)=>this.format(e,t,r.lng,{...r,interpolationkey:n[1].trim()}),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const ie=e=>{const t={};return(r,n,s)=>{let a=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(a={...a,[s.interpolationkey]:void 0});const o=n+JSON.stringify(a);let i=t[o];return i||(i=e(B(n),s),t[o]=i),i(r)}},le=e=>(t,r,n)=>e(B(r),n)(t);class ce{constructor(e={}){this.logger=W.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?ie:le;this.formats={number:r((e,t)=>{const r=new Intl.NumberFormat(e,{...t});return e=>r.format(e)}),currency:r((e,t)=>{const r=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>r.format(e)}),datetime:r((e,t)=>{const r=new Intl.DateTimeFormat(e,{...t});return e=>r.format(e)}),relativetime:r((e,t)=>{const r=new Intl.RelativeTimeFormat(e,{...t});return e=>r.format(e,t.range||"day")}),list:r((e,t)=>{const r=new Intl.ListFormat(e,{...t});return e=>r.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ie(t)}format(e,t,r,n={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(e=>e.indexOf(")")>-1)){const e=s.findIndex(e=>e.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce((e,t)=>{const{formatName:s,formatOptions:a}=(e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);"currency"===t&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(e=>{if(e){const[t,...n]=e.split(":"),s=n.join(":").trim().replace(/^'+|'+$/g,""),a=t.trim();r[a]||(r[a]=s),"false"===s&&(r[a]=!1),"true"===s&&(r[a]=!0),isNaN(s)||(r[a]=parseInt(s,10))}})}return{formatName:t,formatOptions:r}})(t);if(this.formats[s]){let t=e;try{const o=n?.formatParams?.[n.interpolationkey]||{},i=o.locale||o.lng||n.locale||n.lng||r;t=this.formats[s](e,i,{...a,...n,...o})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${s}`),e},e)}}class de extends Q{constructor(e,t,r,n={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=W.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,n.backend,n)}queueLoad(e,t,r,n){const s={},a={},o={},i={};return e.forEach(e=>{let n=!0;t.forEach(t=>{const o=`${e}|${t}`;!r.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===a[o]&&(a[o]=!0):(this.state[o]=1,n=!1,void 0===a[o]&&(a[o]=!0),void 0===s[o]&&(s[o]=!0),void 0===i[t]&&(i[t]=!0)))}),n||(o[e]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(i)}}loaded(e,t,r){const n=e.split("|"),s=n[0],a=n[1];t&&this.emit("failedLoading",s,a,t),!t&&r&&this.store.addResourceBundle(s,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(r=>{((e,t,r)=>{const{obj:n,k:s}=P(e,t,Object);n[s]=n[s]||[],n[s].push(r)})(r.loaded,[s],a),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach(e=>{o[e]||(o[e]={});const t=r.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,r,n=0,s=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:r,tried:n,wait:s,callback:a});this.readingCalls++;const o=(o,i)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&i&&n<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,r,n+1,2*s,a)},s):a(o,i)},i=this.backend[r].bind(this.backend);if(2!==i.length)return i(e,t,o);try{const r=i(e,t);r&&"function"==typeof r.then?r.then(e=>o(null,e)).catch(o):o(null,r)}catch(e){o(e)}}prepareLoading(e,t,r={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();C(e)&&(e=this.languageUtils.toResolveHierarchy(e)),C(t)&&(t=[t]);const s=this.queueLoad(e,t,r,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),n=r[0],s=r[1];this.read(n,s,"read",void 0,void 0,(r,a)=>{r&&this.logger.warn(`${t}loading namespace ${s} for language ${n} failed`,r),!r&&a&&this.logger.log(`${t}loaded namespace ${s} for language ${n}`,a),this.loaded(e,r,a)})}saveMissing(e,t,r,n,s,a={},o=()=>{}){if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(null!=r&&""!==r){if(this.backend?.create){const i={...a,isUpdate:s},l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,r,n,i):l(e,t,r,n),s&&"function"==typeof s.then?s.then(e=>o(null,e)).catch(o):o(null,s)}catch(e){o(e)}else l(e,t,r,n,o,i)}e&&e[0]&&this.store.addResource(e[0],t,r,n)}}else this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const ue=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),C(e[1])&&(t.defaultValue=e[1]),C(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const r=e[3]||e[2];Object.keys(r).forEach(e=>{t[e]=r[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),fe=e=>(C(e.ns)&&(e.ns=[e.ns]),C(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),C(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),pe=()=>{};class me extends Q{constructor(e={},t){var r;if(super(),this.options=fe(e),this.services={},this.logger=W,this.modules={external:[]},r=this,Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(e=>{"function"==typeof r[e]&&(r[e]=r[e].bind(r))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(C(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=ue();this.options={...r,...this.options,...fe(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const n=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?W.init(n(this.modules.logger),this.options):W.init(null,this.options),e=this.modules.formatter?this.modules.formatter:ce;const t=new ee(this.options);this.store=new V(this.options.resources,this.options);const s=this.services;s.logger=W,s.resourceStore=this.store,s.languageUtils=t,s.pluralResolver=new ne(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=n(e),s.formatter.init&&s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new oe(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new de(n(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(s.languageDetector=n(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=n(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new J(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=pe),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const s=S(),a=()=>{const e=(e,r)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(r),t(e,r)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),s}loadResources(e,t=pe){let r=t;const n=C(e)?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===n?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return r();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};n?t(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),r(e)})}else r(null)}reloadResources(e,t,r){const n=S();return"function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=pe),this.services.backendConnector.reload(e,t,e=>{n.resolve(),r(e)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&K.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=S();this.emit("languageChanging",e);const n=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(s,a)=>{a?this.isLanguageChangingTo===e&&(n(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit("languageChanged",a),this.logger.log("languageChanged",a)):this.isLanguageChangingTo=void 0,r.resolve((...e)=>this.t(...e)),t&&t(s,(...e)=>this.t(...e))},a=t=>{e||t||!this.services.languageDetector||(t=[]);const r=C(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(r)?r:this.services.languageUtils.getBestMatchFromCodes(C(t)?[t]:t);a&&(this.language||n(a),this.translator.language||this.translator.changeLanguage(a),this.services.languageDetector?.cacheUserLanguage?.(a)),this.loadResources(a,e=>{s(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}getFixedT(e,t,r){const n=(e,t,...s)=>{let a;a="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(s)):{...t},a.lng=a.lng||n.lng,a.lngs=a.lngs||n.lngs,a.ns=a.ns||n.ns,""!==a.keyPrefix&&(a.keyPrefix=a.keyPrefix||r||n.keyPrefix);const o=this.options.keySeparator||".";let i;return a.keyPrefix&&Array.isArray(e)?i=e.map(e=>("function"==typeof e&&(e=G(e,{...this.options,...t})),`${a.keyPrefix}${o}${e}`)):("function"==typeof e&&(e=G(e,{...this.options,...t})),i=a.keyPrefix?`${a.keyPrefix}${o}${e}`:e),this.t(i,a)};return C(e)?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=r,n}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],n=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;const a=(e,t)=>{const r=this.services.backendConnector.state[`${e}|${t}`];return-1===r||0===r||2===r};if(t.precheck){const e=t.precheck(this,a);if(void 0!==e)return e}return!(!this.hasResourceBundle(r,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!a(r,e)||n&&!a(s,e)))}loadNamespaces(e,t){const r=S();return this.options.ns?(C(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=S();C(e)&&(e=[e]);const n=this.options.preload||[],s=e.filter(e=>n.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=n.concat(s),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(e){}const t=this.services?.languageUtils||new ee(ue());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new me(e,t)}cloneInstance(e={},t=pe){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},s=new me(n);if(void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e)),["store","services","language"].forEach(e=>{s[e]=this[e]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((r,n)=>(r[n]={...e[t][n]},r),e[t]),e),{});s.store=new V(e,n),s.services.resourceStore=s.store}return s.translator=new J(s.services,n),s.translator.on("*",(e,...t)=>{s.emit(e,...t)}),s.init(n,t),s.translator.options=n,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const he=me.createInstance();he.createInstance=me.createInstance,he.createInstance,he.dir,he.init,he.loadResources,he.reloadResources,he.use,he.changeLanguage,he.getFixedT,he.t,he.exists,he.setDefaultNamespace,he.hasLoadedNamespace,he.loadNamespaces,he.loadLanguages;const ge=JSON.parse('{"common":{"save":"Save","cancel":"Cancel","delete":"Delete","edit":"Edit","duplicate":"Duplicate","view":"View","loading":"Loading...","uploading":"Uploading...","search":"Search","filter":"Filter","reset":"Reset","refresh":"Refresh","actions":"Actions","status":"Status","published":"Published","draft":"Draft","private":"Private","clearFilters":"Clear All Filters","noResults":"No results found","loadingMore":"Loading more...","endOfList":"You\'ve reached the end of the list.","updating":"Updating...","searching":"Searching...","filtering":"Filtering...","processing":"Processing...","optional":"Optional","required":"Required","all":"All","yes":"Yes","no":"No","back":"Back","next":"Next","previous":"Previous","close":"Close","settings":"Settings","questions":"Questions","select":"Select...","unlimited":"Unlimited","saving":"Saving...","add":"Add","added":"Added","createNew":"Create New","easy":"Easy","medium":"Medium","hard":"Hard","featureComingSoon":"Feature coming soon!","found":"found","quiz":"Quiz","progress":"Progress","of":"of","lastSaved":"Last saved","untitled":"Untitled","ago":"","days":"days ago","day":"day ago","hours":"hours ago","hour":"hour ago","minutes":"minutes ago","minute":"minute ago","justNow":"Just now"},"errors":{"fetchQuiz":"Failed to load quiz data.","saveQuiz":"Failed to save the quiz.","loadQuestions":"Failed to load quiz questions. Some questions may not exist or be inaccessible."},"sidebar":{"myDesk":"My Desk","studyPlanner":"Courses","test":"Test","statistics":"Statistics","supportMaterial":"Support Material","videosClasses":"Videos / Classes","profile":"My Profile","myAccount":"My Account","books":"Books","logout":"Log Out","exitCampus":"Exit Campus","lightMode":"Light Mode","darkMode":"Dark Mode","expand":"Expand","collapse":"Collapse","logoAlt":"Company Logo","logoText":"Your Logo","onlineClasses":"Online Classes","menu":"Menu","quickMenu":"Quick Menu"},"header":{"notifications":"Notifications","messages":"Messages"},"messages":{"totalMessages":"messages","unread":"unread","loading":"Loading messages...","error":"Error loading messages","emptyInbox":"Your inbox is empty","emptyInboxDescription":"You don\'t have any messages right now. When you receive feedback on your questions, they will appear here.","selectToRead":"Select a message to read","system":"System","yesterday":"Yesterday","markAsRead":"Mark as read","delete":"Delete","loadMore":"Load more messages"},"courses":{"title":"Courses","description":"Create and manage courses with lessons, pricing, and enrollments","addNew":"Add New Course","createCourse":"Create Course","editCourse":"Edit Course","viewCourse":"View Course","duplicateCourse":"Duplicate Course","deleteCourse":"Delete Course","noCourses":"No courses found","noCoursesDescription":"You haven\'t created any courses yet.","searchPlaceholder":"Search courses...","loadingCourses":"Loading courses...","loadingMoreCourses":"Loading more courses...","courseContent":"Course Content","myCourses":"My Courses","progress":"Progress","noImage":"No image","test":"Test","material":"Material","videos":"Videos","dashboard":"My Campus","studyPlanner":"Study Planner","tests":"Test","testGenerator":"Test Generator","selfPacedTests":"Self-Paced Tests","testBrowser":"Test Browser","testHistory":"Test History","supportMaterial":"Support Material","videosSection":"Videos","statistics":"Statistics","noContent":"No content available","noContentDescription":"This course has no content added yet","overallProgress":"Overall Progress","contentProgress":"Content Progress","completed":"completed","remaining":"remaining","testsCompleted":"Tests Completed","totalProgress":"Total Progress","questionTypes":"Question Types","favorites":"Favorites","failed":"Failed","atRisk":"At Risk","notAnswered":"Unanswered","fields":{"title":"Course Title","description":"Description","excerpt":"Short Description","image":"Featured Image","category":"Category","difficulty":"Difficulty","price":"Price","salePrice":"Sale Price","productType":"Product Type","duration":"Duration","lessons":"Lessons","students":"Students","enrolled":"Enrolled","completion":"Completion","status":"Status","startDate":"Start Date","endDate":"End Date","position":"Display Position","maxStudents":"Maximum Students","difficultyLevel":"Difficulty Level"},"category":{"label":"Category","all":"All Categories","programming":"Programming","design":"Design","business":"Business","marketing":"Marketing","photography":"Photography"},"difficulty":{"label":"Difficulty","all":"All Levels","beginner":"Beginner","intermediate":"Intermediate","advanced":"Advanced","expert":"Expert"},"difficultyLevels":{"easy":"Easy","medium":"Medium","hard":"Hard"},"status":{"label":"Status","all":"All Statuses","publish":"Published","draft":"Draft","private":"Private"},"priceFilter":{"label":"Price","all":"All Prices","free":"Free","paid":"Paid","premium":"Premium ($100+)"},"stats":{"totalCourses":"Total Courses","totalStudents":"Students","totalLessons":"Lessons","averagePrice":"Avg. Price","revenue":"Revenue","totalRevenue":"Total Revenue","featuredCourses":"Featured Courses","completionRate":"Completion Rate","averageDuration":"Avg. Duration"},"units":{"hours":"hours","hour":"hour","weeks":"weeks","week":"week","lessons":"lessons","lesson":"lesson","students":"students","student":"student","free":"Free","duration":"duration"},"tabs":{"basic":"Basic Info","taxonomies":"Categories & Tags","pricing":"Pricing","schedule":"Schedule","lessons":"Lessons","settings":"Settings"},"taxonomies":{"categories":"Categories","topics":"Topics","difficulty":"Difficulty","providers":"Providers","courseTypes":"Course Types"},"placeholders":{"title":"Enter course title...","excerpt":"Short description for cards and previews...","content":"Full course description, what students will learn...","newCategory":"New category name..."},"actions":{"uploadImage":"Upload Image","addCategory":"Add New","saveAndCreate":"Save & Create Another"},"hints":{"optional":"Optional","salePrice":"If set, this will be shown as the discounted price","startDate":"When the course becomes available to students","endDate":"When the course closes or expires (optional)","duration":"Estimated time to complete the course","createLessons":"Create lessons first to assign them to this course","position":"Lower numbers appear first in the course list","maxStudents":"0 = unlimited enrollment","difficultyLevel":"This is a meta field, different from the taxonomy","image":"Recommended size: 1200x675px. Max 5MB."},"labels":{"pricePreview":"Price Preview","schedulePreview":"Schedule Preview","selected":"selected"},"info":{"woocommerce":"WooCommerce Integration","woocommerceDesc":"A WooCommerce product will be automatically created/updated when you save this course."},"validation":{"titleRequired":"Title is required","contentRequired":"Description is required","priceInvalid":"Price must be greater than 0","endDateInvalid":"End date must be after start date","positionInvalid":"Position must be a number","fixErrors":"Please fix the errors before saving"},"messages":{"createSuccess":"Course created successfully","updateSuccess":"Course updated successfully","deleteSuccess":"Course deleted successfully","duplicateSuccess":"Course duplicated successfully","createError":"Error creating course","updateError":"Error updating course","deleteError":"Error deleting course","duplicateError":"Error duplicating course","deleteConfirmTitle":"Delete Course","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone and will also remove all associated lessons.","found":"{{count}} course found","found_plural":"{{count}} courses found","noCategories":"No categories available","noLessons":"No lessons available yet"}},"lessons":{"title":"Lessons","description":"Create and manage interactive lessons with multiple content types","addNew":"Add New Lesson","createLesson":"Create Lesson","editLesson":"Edit Lesson","viewLesson":"View Lesson","duplicateLesson":"Duplicate Lesson","deleteLesson":"Delete Lesson","noLessons":"No lessons found","noLessonsDescription":"You haven\'t created any lessons yet.","searchPlaceholder":"Search lessons by title...","loadingLessons":"Loading lessons...","loadingMoreLessons":"Loading more lessons...","fields":{"title":"Lesson Title","description":"Description","content":"General Content","course":"Course","lessonType":"Lesson Type","lessonOrder":"Lesson Order","status":"Status","steps":"Content Steps","prerequisiteLessons":"Prerequisite Lessons","completionCriteria":"Completion Criteria","isRequired":"Is Required","duration":"Duration","resources":"Resources"},"lessonType":{"label":"Lesson Type","all":"All Types","video":"Video","text":"Text Content","mixed":"Mixed Content","quiz":"Quiz","interactive":"Interactive"},"status":{"label":"Status","all":"All Statuses","publish":"Published","draft":"Draft","private":"Private"},"course":{"label":"Course","all":"All Courses","select":"Select a course...","required":"Course is required"},"stats":{"totalLessons":"Total Lessons","videoLessons":"Video Lessons","textLessons":"Text Lessons","mixedLessons":"Mixed Lessons","totalSteps":"Total Steps","averageSteps":"Avg. Steps/Lesson","completedLessons":"Completed Lessons","requiredLessons":"Required Lessons"},"steps":{"title":"Content Steps","description":"Add and organize the content steps for this lesson","addStep":"Add Step","addFirstStep":"Add First Step","noSteps":"This lesson has no content steps yet.","noStepsDescription":"Steps allow you to organize content into manageable sections.","stepTitle":"Step Title","stepType":"Step Type","required":"At least one step is required","allStepsMustHaveTitle":"All steps must have a title"},"stepTypes":{"video":{"label":"Video","description":"Video content","videoUrl":"Video URL","duration":"Duration (minutes)","autoplay":"Autoplay","subtitlesUrl":"Subtitles URL"},"text":{"label":"Text Content","description":"Rich text content","content":"Content","estimatedTime":"Estimated Time (minutes)"},"pdf":{"label":"PDF Document","description":"Downloadable PDF file","fileUrl":"File URL","fileName":"File Name","fileSize":"File Size","downloadable":"Allow Download"},"quiz":{"label":"Quiz","description":"Knowledge assessment","quizId":"Quiz","passingScore":"Passing Score","maxAttempts":"Max Attempts","required":"Required to Complete"},"image":{"label":"Image","description":"Visual content","imageUrl":"Image URL","altText":"Alt Text","caption":"Caption","lightbox":"Enable Lightbox"},"audio":{"label":"Audio","description":"Audio content","audioUrl":"Audio URL","duration":"Duration (minutes)","transcriptUrl":"Transcript URL"}},"tabs":{"basic":"Basic Info","steps":"Content Steps","settings":"Advanced Settings"},"completionCriteria":{"label":"Completion Criteria","viewAll":"View All Content","passQuiz":"Pass Quiz","completeSteps":"Complete All Steps"},"placeholders":{"title":"Enter lesson title...","description":"Brief description of the lesson...","content":"General lesson content (optional)...","stepTitle":"Enter step title...","videoUrl":"https://... (Video URL)","imageUrl":"https://... (Image URL)","audioUrl":"https://... (Audio URL)","pdfUrl":"https://... (PDF URL)"},"hints":{"course":"The lesson must be associated with a course","lessonType":"The type determines how the lesson is presented","description":"This description appears on cards and previews","content":"This content appears before the lesson steps. HTML is supported.","lessonOrder":"Order of this lesson within the course","steps":"Organize content into manageable steps","completionCriteria":"What the student must do to complete this lesson","isRequired":"If checked, students must complete this lesson","prerequisiteLessons":"Lessons that must be completed before this one"},"actions":{"addStep":"Add Step","removeStep":"Remove Step","moveUp":"Move Up","moveDown":"Move Down","expandStep":"Expand Step","collapseStep":"Collapse Step"},"validation":{"titleRequired":"Title is required","courseRequired":"You must select a course","stepsRequired":"At least one step is required","stepTitleRequired":"Step title is required","videoUrlRequired":"Video URL is required","imageUrlRequired":"Image URL is required","audioUrlRequired":"Audio URL is required","pdfUrlRequired":"PDF URL is required","quizRequired":"You must select a quiz","fixErrors":"Please fix the errors before saving"},"messages":{"createSuccess":"Lesson created successfully","updateSuccess":"Lesson updated successfully","deleteSuccess":"Lesson deleted successfully","duplicateSuccess":"Lesson duplicated successfully","createError":"Error creating lesson","updateError":"Error updating lesson","deleteError":"Error deleting lesson","duplicateError":"Error duplicating lesson","deleteConfirmTitle":"Delete Lesson","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} lesson found","found_plural":"{{count}} lessons found","noCourses":"No courses available","noQuizzes":"No quizzes available"},"filters":{"course":"Filter by Course","type":"Filter by Type","status":"Filter by Status","clearFilters":"Clear Filters"}},"quizzes":{"title":"Quizzes","description":"Create and manage quizzes to assess student learning","timeRemaining":"Time Remaining","addNew":"Add New Quiz","createQuiz":"Create Quiz","editQuiz":"Edit Quiz","viewQuiz":"View Quiz","deleteQuiz":"Delete Quiz","duplicateQuiz":"Duplicate Quiz","untitled":"Untitled Quiz","noQuizzes":"No quizzes found","noQuizzesDescription":"You haven\'t created any quizzes yet.","searchPlaceholder":"Search quizzes...","noDetailedResults":"No detailed results to show.","loadingQuizzes":"Loading quizzes...","loadingResults":"Loading quiz results...","quizResults":"Quiz Results","createNew":"Create New Quiz","editTitle":"Editing: {{title}}","form":{"title":"Quiz Title","course":"Course","category":"Category","difficulty":"Difficulty","startDate":"Start Date","instructions":"Instructions","passingScore":"Passing Score (%)","timeLimit":"Time Limit (mins)","maxAttempts":"Max Attempts","randomize":"Randomize Questions","showResults":"Show Results After Completion","negativeScoring":"Enable Negative Scoring","addQuestions":"Add Questions from Bank","searchPlaceholder":"Search questions by title...","selectedQuestions":"Selected Questions","noQuestions":"No questions have been added yet."},"fields":{"title":"Quiz Title","instructions":"Instructions","course":"Course","category":"Category","difficulty":"Difficulty","quizType":"Quiz Type","passingScore":"Passing Score","timeLimit":"Time Limit","maxAttempts":"Max Attempts","questions":"Questions","totalPoints":"Total Points","randomizeQuestions":"Randomize Questions","showResults":"Show Results","enableNegativeScoring":"Enable Negative Scoring"},"question":{"unanswered":"Unanswered","answered":"Answered","withRisk":"At Risk","clearSelection":"Clear selection","answerExplanation":"Answer Explanation","noExplanationAvailable":"No explanation available for this question.","questionStatistics":"Question Statistics","failureRate":"Failure Rate","difficultQuestion":"This is a difficult question. Many students get it wrong. Take your time to think about it carefully.","noStatisticsAvailable":"Not enough data to show statistics for this question.","markWithRisk":"Mark at risk"},"reviewedQuestion":{"correct":"Correct","incorrect":"Incorrect","unanswered":"Unanswered","withRisk":"With risk","markFavorite":"Mark as favorite","removeFromFavorites":"Remove from favorites","addComment":"Add comment","challenge":"Challenge","questionStatistics":"Question statistics","failedBy":"This question has been failed by {{percentage}}% of students ({{total}} total answers).","answerExplanation":"Answer explanation","errorInvalidData":"Error: Invalid question data or result provided."},"feedbackModal":{"successTitle":"Message Sent!","successMessage":"Thank you for your collaboration. We have received your message.","close":"Close","titleChallenge":"Challenge Question","titleFeedback":"Comment or Suggestion","question":"Question","messageType":"Message Type","optionFeedback":"Comment or Suggestion","optionChallenge":"Challenge","yourMessage":"Your message","placeholderChallenge":"Explain why you think the question or its answers are incorrect...","placeholderFeedback":"Write your question, suggestion or correction here...","errorEmptyMessage":"The message cannot be empty.","errorSending":"Error sending the message.","cancel":"Cancel","send":"Send Message","sending":"Sending..."},"resultsSidebar":{"title":"Results Summary","score":"Score","scoreWithRisk":"Score (with risk)","timeSpent":"Time Spent","questionsMap":"Questions Map","questionUnanswered":"Question {{number}}: Unanswered","questionCorrect":"Question {{number}}: Correct","questionIncorrect":"Question {{number}}: Incorrect","questionCorrectWithRisk":"Question {{number}}: Correct (with risk)","questionIncorrectWithRisk":"Question {{number}}: Incorrect (with risk)"},"results":{"title":"Quiz Results","summary":"Summary","scoreWithoutRisk":"Without Risk","scoreWithRisk":"With Risk","correct":"Correct","incorrect":"Incorrect","unanswered":"Unanswered","globalAverage":"Average","percentile":"Percentile","myScore":"My Score","answeredWithRisk":"At risk","backToCourses":"Back to Courses"},"sidebar":{"loadingQuestions":"Loading questions...","unanswered":"Unanswered","answered":"Answered","withRisk":"At Risk","withoutRisk":"Without Risk","questionsMap":"Questions Map","loadingQuestion":"Loading question...","question":"Question","loading":"Loading...","loadMore":"Load more questions","finishExam":"FINISH EXAM"},"quiz":{"loadingQuiz":"Loading quiz...","errorTitle":"Error loading quiz","errorLoadingQuiz":"Could not load the quiz.","submittingAnswers":"Submitting answers...","noQuestionsAssigned":"This quiz has no questions assigned.","loadingMoreQuestions":"Loading more questions...","questionsLoadedCount":"{{loaded}} of {{total}} questions loaded","inProgress":"Quiz in progress","savedProgressFound":"Saved progress found","continueWhereYouLeft":"Would you like to continue where you left off or start over?","currentQuestion":"Current question","timeRemaining":"Time remaining","continueQuiz":"Continue","startOver":"Start over"},"exitModal":{"title":"Exit quiz","message":"Are you sure you want to exit? Your progress will be saved automatically and you can continue later.","cancel":"Cancel","confirm":"Exit"},"stats":{"totalQuizzes":"Total Quizzes","totalQuestions":"Total Questions","totalPoints":"Total Points","averageQuestions":"Avg. Questions"},"messages":{"titleRequired":"Quiz title is required","courseRequired":"Please select a course","questionsRequired":"Please add at least one question","noQuestionsAdded":"No questions added yet.","createSuccess":"Quiz created successfully","updateSuccess":"Quiz updated successfully","deleteSuccess":"Quiz deleted successfully","duplicateSuccess":"Quiz duplicated successfully","deleteConfirmTitle":"Delete Quiz","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} quiz found","found_plural":"{{count}} quizzes found"},"actions":{"createNewQuiz":"Create New Quiz","saveAndAddNew":"Save & Add New","saveChanges":"Save Changes","addQuestion":"Add Question","searchQuestions":"Search Questions","createFirstQuiz":"Create First Quiz"},"card":{"questions_one":"{{count}} Question","questions_other":"{{count}} Questions","points_one":"{{count}} Point","points_other":"{{count}} Points","attempts_one":"{{count}} Attempt","attempts_other":"{{count}} Attempts","avgScore":"{{count}}% Avg. Score","noCourse":"No course associated","viewQuestions":"View Questions ({{count}})"},"labels":{"allCourses":"All Courses","selectCourse":"Select a course...","minutes":"minutes","unlimited":"Unlimited","attempts":"attempts"}},"dashboard":{"title":"LMS Dashboard","recentResults":"Recent Results","noAttempts":"You haven\'t completed any quizzes yet.","stats":{"totalAttempts":"Total Attempts","passed":"Passed","failed":"Failed","averageScore":"Average Score"},"errors":{"loadAttempts":"Error loading quiz results."}},"questions":{"title":"Questions","description":"Create and manage questions for quizzes","addNew":"Add New Question","createQuestion":"Create Question","editQuestion":"Edit Question","viewQuestion":"View Question","deleteQuestion":"Delete Question","duplicateQuestion":"Duplicate Question","untitled":"Untitled Question","noQuestions":"No questions found","noQuestionsDescription":"You haven\'t created any questions yet.","searchPlaceholder":"Search questions...","loadingQuestions":"Loading questions...","fields":{"title":"Question Title","type":"Question Type","difficulty":"Difficulty","category":"Category","points":"Points","explanation":"Explanation","options":"Options","correctAnswer":"Correct Answer","provider":"Provider"},"types":{"multipleChoice":"Multiple Choice","trueFalse":"True/False","shortAnswer":"Short Answer","essay":"Essay","matching":"Matching","fillBlank":"Fill in the Blank"},"stats":{"totalQuestions":"Total Questions","byDifficulty":"By Difficulty","byType":"By Type","averagePoints":"Avg. Points"},"messages":{"titleRequired":"Question title is required","typeRequired":"Question type is required","optionsRequired":"At least two options are required","correctAnswerRequired":"You must mark at least one correct answer","createSuccess":"Question created successfully","updateSuccess":"Question updated successfully","deleteSuccess":"Question deleted successfully","duplicateSuccess":"Question duplicated successfully","deleteConfirmTitle":"Delete Question","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} question found","found_plural":"{{count}} questions found"},"actions":{"addOption":"Add Option","removeOption":"Remove Option","createFirstQuestion":"Create First Question"},"placeholders":{"option":"Option {{number}}","searchQuestions":"Search questions by title..."},"card":{"points":"{{count}} Points","noLesson":"No lesson associated","viewQuizzes":"View Associated Quizzes ({{count}})","difficulty":"Difficulty","provider":"Provider","difficulties":{"easy":"Easy","medium":"Medium","hard":"Hard"},"types":{"multiple_choice":"Multiple Choice","true_false":"True / False","fill_in_the_blanks":"Fill in the Blanks","short_answer":"Short Answer","essay":"Essay"}},"providers":{"human":"Human","ai":"AI","imported":"Imported"}},"students":{"title":"Students","description":"Manage students and enrollments","noStudents":"No students found","noStudentsDescription":"No students match your current filters.","searchPlaceholder":"Search students...","stats":{"totalUsers":"Total Users","enrolledUsers":"Enrolled Users","activeUsers":"Active Users","averageProgress":"Avg. Progress","recentRegistrations":"Recent Registrations"},"filters":{"allRoles":"All Roles","allCourses":"All Courses","allStatuses":"All Statuses","enrolled":"Enrolled","notEnrolled":"Not Enrolled"},"roles":{"administrator":"Administrator","editor":"Editor","author":"Author","contributor":"Contributor","subscriber":"Subscriber"},"actions":{"enroll":"Enroll","unenroll":"Unenroll","updateRole":"Update Role","bulkEnroll":"Bulk Enroll","bulkUnenroll":"Bulk Unenroll","viewProfile":"View Profile"},"messages":{"courseManagementMode":"Course Management Mode","viewingInContext":"You\'re viewing users in the context of: {{courseName}}","noUsersFound":"No users found","noUsersMatch":"No users match your current filters. Try adjusting your search or filter criteria.","clearSearch":"Clear search"}},"users":{"title":"Users","description":"Manage system users","stats":{"totalUsers":"Total Users","enrolledUsers":"Enrolled Users","activeUsers":"Active Users","averageProgress":"Avg. Progress"}},"modals":{"delete":{"confirmTitle":"Confirm Delete","confirmMessage":"Are you sure you want to delete this item? This action cannot be undone.","confirmButton":"Delete","cancelButton":"Cancel","typeToConfirm":"Type <strong>DELETE</strong> to confirm:","typeHere":"Type DELETE here","itemToDelete":"Item to delete:","processing":"Processing..."},"close":"Close","save":"Save","cancel":"Cancel"},"notifications":{"createSuccess":"{{resource}} created successfully","updateSuccess":"{{resource}} updated successfully","deleteSuccess":"{{resource}} deleted successfully","duplicateSuccess":"{{resource}} duplicated successfully","error":"An error occurred","savingChanges":"Saving changes...","operationFailed":"Operation failed"},"viewMode":{"cards":"Cards","list":"List","grid":"Grid","switchTo":"Switch to {{mode}} view"},"emptyStates":{"noItemsFound":"No items found","noItemsDescription":"There are no items matching your search criteria.","createFirst":"Create First","getStarted":"Get Started"},"filters":{"filterBy":"Filter by","clearAll":"Clear All","apply":"Apply","reset":"Reset","course":"Course","category":"Category","difficulty":"Difficulty","status":"Status","type":"Type"},"pagination":{"showing":"Showing","of":"of","results":"results","page":"Page","previous":"Previous","next":"Next","first":"First","last":"Last"},"validation":{"required":"This field is required","invalidEmail":"Invalid email","invalidUrl":"Invalid URL","minLength":"Must be at least {{length}} characters","maxLength":"Must not exceed {{length}} characters","mustBeNumber":"Must be a number","mustBePositive":"Must be a positive number"},"ranking":{"title":"Test Ranking","yourPosition":"Your Position","averageScore":"Average Score","pending":"Pending","quizzesCompleted":"Quizzes Completed","completeAllQuizzes":"Complete all course quizzes to see your rank","loading":"Loading ranking...","error":"Error loading ranking","noData":"No rankings yet","noDataDescription":"Be the first to complete this test","avgWithoutRisk":"Avg without risk","avgWithRisk":"Avg with risk","totalUsers":"Participants","viewRanking":"View Ranking"},"events":{"pending":"Pending","nextEvent":"Next Event","noEventsScheduled":"No events scheduled","november":"November"},"supportMaterial":{"noMaterials":"No support materials available","noMaterialsDescription":"No support materials have been added to this course yet","document":"document","documents":"documents","file":"file","files":"files","download":"Download","read":"Read","noPreview":"Preview not available","noPreviewDescription":"This document cannot be displayed in the browser","showLesson":"Show lesson","hideLesson":"Hide lesson","available":"Available now"},"videos":{"noVideos":"No videos available","noVideosDescription":"No videos have been added to this course yet","video":"video","videos":"videos","watch":"Watch","noVideoUrl":"Video not available","noVideoUrlDescription":"This video does not have a valid URL","showLesson":"Show lesson","hideLesson":"Hide lesson","available":"Available now"},"tests":{"noTests":"No tests available","noTestsDescription":"No tests have been added to this course yet","test":"test","tests":"tests","configuration":"Configuration","generateTest":"Generate Test","start":"Start","startTest":"Start Test","retake":"Retake","passingScore":"Passing score","timeLimit":"Time limit","minutes":"minutes","noTimeLimit":"No limit","questions":"Questions","difficulty":"Difficulty","difficultyEasy":"Easy","difficultyMedium":"Medium","difficultyHard":"Hard","easy":"Easy","medium":"Medium","hard":"Hard","startDate":"Start date","showLesson":"Show lesson","hideLesson":"Hide lesson","available":"Available now","statistics":"Test Statistics","withoutRisk":"Without Risk","withRisk":"With Risk","avgScore":"UA Average","myScore":"My Score","percentile":"My Percentile","recentAttempts":"Recent Attempts","last5Attempts":"Last 5 attempts","passed":"Passed","failed":"Failed","details":"Details","viewDetails":"View attempt details","viewerPlaceholder":"Test interface in development","viewerPlaceholderDescription":"The test interface will be displayed here","backToInfo":"Back to Test","loadingAttemptDetails":"Loading attempt details...","errorLoadingAttempt":"Error loading attempt","attemptDetails":"Attempt Details","searchPlaceholder":"Search tests...","noTestsFound":"No tests found","tryDifferentSearch":"Try a different search","customTestDescription":"Create a custom test based on your needs","customTest":"Custom Test","noQuestionsFound":"No questions found","adjustFilters":"Adjust filters to find available questions","testHistory":"Test History","attempt":"attempt","attempts":"attempts","searchQuiz":"Search quiz","quizNamePlaceholder":"Quiz name...","lesson":"Lesson","allLessons":"All lessons","dateFrom":"From","dateTo":"To","showing":"Showing","of":"of","results":"results","clearFilters":"Clear filters","loadingHistory":"Loading history...","noAttemptsYet":"No attempts recorded yet","startTests":"Start taking tests to see your history","errorLoadingHistory":"Error loading history","tryAgain":"Try again","viewQuiz":"View quiz","aboveAverage":"above average","belowAverage":"below average"},"navigation":{"previous":"Previous","next":"Next"},"progress":{"completed":"Completed","markComplete":"Mark as completed"},"login":{"welcomeBack":"Welcome back","signInToContinue":"Sign in to continue","username":"Username or email","usernamePlaceholder":"your@email.com","password":"Password","rememberMe":"Remember me","signIn":"Sign In","signingIn":"Signing in...","forgotPassword":"Forgot your password?","invalidCredentials":"Invalid username or password","error":"Login error. Please try again."},"statistics":{"title":"Course Statistics","averageScore":"Average Score","ranking":"Ranking","topPercent":"Top {{percent}}%","cutoffScore":"Cutoff score","passedCutoff":"You passed the cutoff score","noCutoffDataYet":"Cutoff score available soon","completedQuizzes":"Completed Quizzes","lessonsCompleted":"Completed Lessons","lessonsWithProgress":"Lessons with progress","bestPerformance":"Best Score","noDataYet":"No data yet","performanceByLesson":"Performance by Lesson","noDataAvailable":"No data available yet","completeTestsToSeeStats":"Complete tests to see statistics","areasToImprove":"Areas to Improve","lessonsToReview":"Lessons to Review","lessonAnalysis":"Lesson Analysis","allLessonsInCourse":"All lessons in the course","sortHighToLow":"Highest to lowest score","sortLowToHigh":"Lowest to highest score","noLessonsData":"No lesson data available","review":"Review","reviewLesson":"View Lesson","greatJob":"Excellent!","noWeakAreasFound":"You have no critical areas to improve","allLessonsAbove8":"All your lessons have a score above 8","allLessons":"All Lessons","critical":"Critical","needsImprovement":"Needs Work","good":"Good","difficultyAnalysis":"Difficulty Analysis","questionAnalysis":"Question Analysis","withRisk":"With Risk","withoutRisk":"Without Risk","filterByLesson":"Filter by lesson","allLessonsFilter":"All lessons","easy":"Easy","medium":"Medium","hard":"Hard","noDifficultyData":"No difficulty data available","noDataForDifficulty":"No data for this difficulty level","correct":"Correct","incorrect":"Incorrect","unanswered":"Unanswered","markedWithRisk":"Marked at risk","viewDetail":"View detail","riskAnalysis":"Risk Analysis","noRiskData":"No risk data available","noRiskDataForDifficulty":"No questions marked at risk for this difficulty level","quizzesCompleted":"Quizzes completed","score":"Score","attempt":"attempt","attempts":"attempts","temporary":"Temporary","temporaryNote":"Complete all tests to get your final score","temporaryRanking":"Temporary position. Complete all tests to see your final ranking","chart":{"title":"Score Evolution","error":"Error loading chart","noData":"Not enough data to show the chart. Complete some tests to see your evolution.","trendUp":"Improving +{{diff}}","trendDown":"Declining -{{diff}}","trendStable":"Stable","period":{"week":"7 days","month":"30 days","all":"All time"}}},"courseNotifications":{"title":"Notifications","unread":"unread","markAllRead":"Mark all as read","loadMore":"Load more","empty":"No notifications yet","emptyDescription":"When new lessons, tests, videos or materials are added to this course, you\'ll receive notifications here.","types":{"new_lesson":"New Lesson","new_quiz":"New Test","new_video":"New Video","new_pdf":"New PDF","new_text":"New Content","lesson_updated":"Lesson Updated"}}}'),xe=JSON.parse('{"common":{"save":"Guardar","cancel":"Cancelar","delete":"Eliminar","edit":"Editar","duplicate":"Duplicar","view":"Ver","loading":"Cargando...","uploading":"Subiendo...","search":"Buscar","filter":"Filtrar","reset":"Reiniciar","refresh":"Refrescar","actions":"Acciones","status":"Estado","published":"Publicado","draft":"Borrador","private":"Privado","clearFilters":"Limpiar Todos los Filtros","noResults":"No se encontraron resultados","loadingMore":"Cargando ms...","endOfList":"Has llegado al final de la lista.","updating":"Actualizando...","searching":"Buscando...","filtering":"Filtrando...","processing":"Procesando...","optional":"Opcional","required":"Obligatorio","all":"Todos","yes":"S","no":"No","back":"Volver","next":"Siguiente","previous":"Anterior","close":"Cerrar","continue":"Continuar","finish":"Finalizar","skip":"Saltar","settings":"Ajustes","questions":"Preguntas","select":"Seleccionar...","unlimited":"Ilimitado","saving":"Guardando...","add":"Aadir","added":"Aadido","createNew":"Crear Nuevo","easy":"Fcil","medium":"Medio","hard":"Difcil","featureComingSoon":"Funcionalidad prximamente disponible.","found":"encontrados","addToFavorites":"Aadir a favoritos","removeFromFavorites":"Quitar de favoritos","quiz":"Cuestionario","progress":"Progreso","of":"de","lastSaved":"ltima actualizacin","untitled":"Sin ttulo","ago":"Hace","days":"das","day":"da","hours":"horas","hour":"hora","minutes":"minutos","minute":"minuto","justNow":"Hace unos segundos"},"errors":{"fetchQuiz":"Error al cargar los datos del cuestionario.","saveQuiz":"Error al guardar el cuestionario.","loadQuestions":"Error al cargar las preguntas del cuestionario. Algunas preguntas pueden no existir o no ser accesibles."},"sidebar":{"myDesk":"Mi Escritorio","studyPlanner":"Cursos","test":"Test","statistics":"Estadsticas","supportMaterial":"Material de Apoyo","videosClasses":"Vdeos / Clases","profile":"Mi Perfil","myAccount":"Mi Cuenta","books":"Libros","logout":"Cerrar Sesin","exitCampus":"Salir del Campus","lightMode":"Modo Claro","darkMode":"Modo Oscuro","expand":"Expandir","collapse":"Colapsar","logoAlt":"Logo de la empresa","logoText":"Tu Logo","onlineClasses":"Clases Online","menu":"Men","quickMenu":"Men Rpido"},"header":{"notifications":"Notificaciones","messages":"Mensajera"},"messages":{"totalMessages":"mensajes","unread":"sin leer","loading":"Cargando mensajes...","error":"Error al cargar mensajes","emptyInbox":"Tu bandeja est vaca","emptyInboxDescription":"No tienes mensajes en este momento. Cuando recibas comentarios sobre tus preguntas, aparecern aqu.","selectToRead":"Selecciona un mensaje para leerlo","system":"Sistema","yesterday":"Ayer","markAsRead":"Marcar como ledo","delete":"Eliminar","loadMore":"Cargar ms mensajes"},"dashboard":{"title":"Panel del LMS","recentResults":"Resultados Recientes","noAttempts":"An no has completado ningn cuestionario.","stats":{"totalAttempts":"Intentos Totales","passed":"Aprobados","failed":"Suspendidos","averageScore":"Puntuacin Media"},"errors":{"loadAttempts":"Error al cargar los resultados de los cuestionarios."}},"courses":{"title":"Cursos","description":"Crea y gestiona cursos con lecciones, precios e inscripciones","addNew":"Aadir Nuevo Curso","createCourse":"Crear Curso","editCourse":"Editar Curso","viewCourse":"Ver Curso","duplicateCourse":"Duplicar Curso","deleteCourse":"Eliminar Curso","noCourses":"No se encontraron cursos","noCoursesDescription":"An no has creado ningn curso.","searchPlaceholder":"Buscar cursos...","loadingCourses":"Cargando cursos...","loadingMoreCourses":"Cargando ms cursos...","courseContent":"Contenido del Curso","myCourses":"Mis Cursos","progress":"Progreso","noImage":"Sin imagen","test":"Test","material":"Material","videos":"Videos","dashboard":"Mi Campus","studyPlanner":"Planificador de Estudio","tests":"Test","testGenerator":"Generador de Tests","selfPacedTests":"Tests a tu Ritmo","selfPacedPractice":"Prctica a tu Ritmo","testBrowser":"Navegador de Tests","testHistory":"Historial de Tests","supportMaterial":"Material de Apoyo","videosSection":"Videos","statistics":"Estadsticas","noContent":"Sin contenido disponible","noContentDescription":"Este curso an no tiene contenido agregado","overallProgress":"Progreso General","contentProgress":"Progreso de Contenido","completed":"completados","remaining":"pendientes","testsCompleted":"Tests Completados","totalProgress":"Progreso Total","questionTypes":"Tipos de Preguntas","favorites":"Favoritas","failed":"Falladas","atRisk":"En Riesgo","notAnswered":"No Contestadas","fields":{"title":"Ttulo del Curso","description":"Descripcin","excerpt":"Descripcin Corta","image":"Imagen Destacada","category":"Categora","difficulty":"Dificultad","price":"Precio","salePrice":"Precio de Oferta","productType":"Tipo de Producto","duration":"Duracin","lessons":"Lecciones","students":"Estudiantes","enrolled":"Inscritos","completion":"Completado","status":"Estado","startDate":"Fecha de Inicio","endDate":"Fecha de Fin","position":"Posicin de Visualizacin","maxStudents":"Estudiantes Mximos","difficultyLevel":"Nivel de Dificultad"},"category":{"label":"Categora","all":"Todas las Categoras","programming":"Programacin","design":"Diseo","business":"Negocios","marketing":"Marketing","photography":"Fotografa"},"difficulty":{"label":"Dificultad","all":"Todos los Niveles","beginner":"Principiante","intermediate":"Intermedio","advanced":"Avanzado","expert":"Experto"},"difficultyLevels":{"easy":"Fcil","medium":"Medio","hard":"Difcil"},"status":{"label":"Estado","all":"Todos los Estados","publish":"Publicado","draft":"Borrador","private":"Privado"},"priceFilter":{"label":"Precio","all":"Todos los Precios","free":"Gratis","paid":"De Pago","premium":"Premium (100+)"},"stats":{"totalCourses":"Cursos Totales","totalStudents":"Estudiantes","totalLessons":"Lecciones","averagePrice":"Precio Promedio","revenue":"Ingresos","totalRevenue":"Ingresos Totales","featuredCourses":"Cursos Destacados","completionRate":"Tasa de Finalizacin","averageDuration":"Duracin Promedio"},"units":{"hours":"horas","hour":"hora","weeks":"semanas","week":"semana","lessons":"lecciones","lesson":"leccin","students":"estudiantes","student":"estudiante","free":"Gratis","duration":"duracin"},"tabs":{"basic":"Informacin Bsica","taxonomies":"Categoras y Etiquetas","pricing":"Precios","schedule":"Calendario","lessons":"Lecciones","settings":"Configuracin"},"taxonomies":{"categories":"Categoras","topics":"Temas","difficulty":"Dificultad","providers":"Proveedores","courseTypes":"Tipos de Curso"},"placeholders":{"title":"Introduce el ttulo del curso...","excerpt":"Descripcin breve para tarjetas y vistas previas...","content":"Descripcin completa del curso, qu aprendern los estudiantes...","newCategory":"Nombre de la nueva categora..."},"actions":{"uploadImage":"Subir Imagen","addCategory":"Aadir Nueva","saveAndCreate":"Guardar y Crear Otro"},"hints":{"optional":"Opcional","salePrice":"Si se establece, se mostrar como el precio con descuento","startDate":"Cundo el curso estar disponible para los estudiantes","endDate":"Cundo el curso cierra o expira (opcional)","duration":"Tiempo estimado para completar el curso","createLessons":"Crea lecciones primero para asignarlas a este curso","position":"Los nmeros ms bajos aparecen primero en la lista de cursos","maxStudents":"0 = inscripcin ilimitada","difficultyLevel":"Este es un campo meta, diferente de la taxonoma","image":"Tamao recomendado: 1200x675px. Mx 5MB."},"labels":{"pricePreview":"Vista Previa del Precio","schedulePreview":"Vista Previa del Calendario","selected":"seleccionadas"},"info":{"woocommerce":"Integracin con WooCommerce","woocommerceDesc":"Se crear/actualizar automticamente un producto de WooCommerce al guardar este curso."},"validation":{"titleRequired":"El ttulo es obligatorio","contentRequired":"La descripcin es obligatoria","priceInvalid":"El precio debe ser mayor que 0","endDateInvalid":"La fecha de fin debe ser posterior a la fecha de inicio","positionInvalid":"La posicin debe ser un nmero","fixErrors":"Por favor corrige los errores antes de guardar"},"messages":{"createSuccess":"Curso creado exitosamente","updateSuccess":"Curso actualizado exitosamente","deleteSuccess":"Curso eliminado exitosamente","duplicateSuccess":"Curso duplicado exitosamente","createError":"Error al crear el curso","updateError":"Error al actualizar el curso","deleteError":"Error al eliminar el curso","duplicateError":"Error al duplicar el curso","deleteConfirmTitle":"Eliminar Curso","deleteConfirmMessage":"Ests seguro de que quieres eliminar \\"{{title}}\\"? Esta accin no se puede deshacer y tambin eliminar todas las lecciones asociadas.","found":"{{count}} curso encontrado","found_plural":"{{count}} cursos encontrados","noCategories":"No hay categoras disponibles","noLessons":"An no hay lecciones disponibles"}},"lessons":{"title":"Lecciones","description":"Crea y gestiona lecciones interactivas con mltiples tipos de contenido","addNew":"Aadir Nueva Leccin","createLesson":"Crear Leccin","editLesson":"Editar Leccin","viewLesson":"Ver Leccin","duplicateLesson":"Duplicar Leccin","deleteLesson":"Eliminar Leccin","noLessons":"No se encontraron lecciones","noLessonsDescription":"An no has creado ninguna leccin.","searchPlaceholder":"Buscar lecciones por ttulo...","loadingLessons":"Cargando lecciones...","loadingMoreLessons":"Cargando ms lecciones...","fields":{"title":"Ttulo de la Leccin","description":"Descripcin","content":"Contenido General","course":"Curso","lessonType":"Tipo de Leccin","lessonOrder":"Orden de la Leccin","status":"Estado","steps":"Pasos de Contenido","prerequisiteLessons":"Lecciones Prerequisito","completionCriteria":"Criterio de Finalizacin","isRequired":"Es Obligatoria","duration":"Duracin","resources":"Recursos"},"lessonType":{"label":"Tipo de Leccin","all":"Todos los Tipos","video":"Video","text":"Contenido de Texto","mixed":"Contenido Mixto","quiz":"Cuestionario","interactive":"Interactivo"},"status":{"label":"Estado","all":"Todos los Estados","publish":"Publicado","draft":"Borrador","private":"Privado"},"course":{"label":"Curso","all":"Todos los Cursos","select":"Seleccionar un curso...","required":"El curso es obligatorio"},"stats":{"totalLessons":"Total de Lecciones","videoLessons":"Lecciones de Video","textLessons":"Lecciones de Texto","mixedLessons":"Lecciones Mixtas","totalSteps":"Total de Pasos","averageSteps":"Promedio Pasos/Leccin","completedLessons":"Lecciones Completadas","requiredLessons":"Lecciones Obligatorias"},"steps":{"title":"Pasos de Contenido","description":"Aade y organiza los pasos de contenido para esta leccin","addStep":"Aadir Paso","addFirstStep":"Aadir Primer Paso","noSteps":"Esta leccin an no tiene pasos de contenido.","noStepsDescription":"Los pasos te permiten organizar el contenido en secciones manejables.","stepTitle":"Ttulo del Paso","stepType":"Tipo de Paso","required":"Se requiere al menos un paso","allStepsMustHaveTitle":"Todos los pasos deben tener un ttulo"},"stepTypes":{"video":{"label":"Video","description":"Contenido de video","videoUrl":"URL del Video","duration":"Duracin (minutos)","autoplay":"Reproduccin Automtica","subtitlesUrl":"URL de Subttulos"},"text":{"label":"Contenido de Texto","description":"Contenido de texto enriquecido","content":"Contenido","estimatedTime":"Tiempo Estimado (minutos)"},"pdf":{"label":"Documento PDF","description":"Archivo PDF descargable","fileUrl":"URL del Archivo","fileName":"Nombre del Archivo","fileSize":"Tamao del Archivo","downloadable":"Permitir Descarga"},"quiz":{"label":"Cuestionario","description":"Evaluacin de conocimientos","quizId":"Cuestionario","passingScore":"Puntuacin Mnima","maxAttempts":"Intentos Mximos","required":"Obligatorio para Completar"},"image":{"label":"Imagen","description":"Contenido visual","imageUrl":"URL de la Imagen","altText":"Texto Alternativo","caption":"Pie de Foto","lightbox":"Habilitar Lightbox"},"audio":{"label":"Audio","description":"Contenido de audio","audioUrl":"URL del Audio","duration":"Duracin (minutos)","transcriptUrl":"URL de Transcripcin"}},"tabs":{"basic":"Informacin Bsica","steps":"Pasos de Contenido","settings":"Configuracin Avanzada"},"completionCriteria":{"label":"Criterio de Finalizacin","viewAll":"Ver Todo el Contenido","passQuiz":"Aprobar Cuestionario","completeSteps":"Completar Todos los Pasos"},"placeholders":{"title":"Introduce el ttulo de la leccin...","description":"Breve descripcin de la leccin...","content":"Contenido general de la leccin (opcional)...","stepTitle":"Introduce el ttulo del paso...","videoUrl":"https://... (URL del video)","imageUrl":"https://... (URL de la imagen)","audioUrl":"https://... (URL del audio)","pdfUrl":"https://... (URL del PDF)"},"hints":{"course":"La leccin debe estar asociada a un curso","lessonType":"El tipo determina cmo se presenta la leccin","description":"Esta descripcin aparece en tarjetas y vistas previas","content":"Este contenido aparece antes de los pasos de la leccin. HTML es soportado.","lessonOrder":"Orden de esta leccin dentro del curso","steps":"Organiza el contenido en pasos manejables","completionCriteria":"Qu debe hacer el estudiante para completar esta leccin?","isRequired":"Si est marcada, los estudiantes deben completar esta leccin","prerequisiteLessons":"Lecciones que deben completarse antes de esta"},"actions":{"addStep":"Aadir Paso","removeStep":"Eliminar Paso","moveUp":"Mover Arriba","moveDown":"Mover Abajo","expandStep":"Expandir Paso","collapseStep":"Contraer Paso"},"validation":{"titleRequired":"El ttulo es obligatorio","courseRequired":"Debes seleccionar un curso","stepsRequired":"Se requiere al menos un paso","stepTitleRequired":"El ttulo del paso es obligatorio","videoUrlRequired":"La URL del video es obligatoria","imageUrlRequired":"La URL de la imagen es obligatoria","audioUrlRequired":"La URL del audio es obligatoria","pdfUrlRequired":"La URL del PDF es obligatoria","quizRequired":"Debes seleccionar un cuestionario","fixErrors":"Por favor corrige los errores antes de guardar"},"messages":{"createSuccess":"Leccin creada exitosamente","updateSuccess":"Leccin actualizada exitosamente","deleteSuccess":"Leccin eliminada exitosamente","duplicateSuccess":"Leccin duplicada exitosamente","createError":"Error al crear la leccin","updateError":"Error al actualizar la leccin","deleteError":"Error al eliminar la leccin","duplicateError":"Error al duplicar la leccin","deleteConfirmTitle":"Eliminar Leccin","deleteConfirmMessage":"Ests seguro de que quieres eliminar \\"{{title}}\\"? Esta accin no se puede deshacer.","found":"{{count}} leccin encontrada","found_plural":"{{count}} lecciones encontradas","noCourses":"No hay cursos disponibles","noQuizzes":"No hay cuestionarios disponibles"},"filters":{"course":"Filtrar por Curso","type":"Filtrar por Tipo","status":"Filtrar por Estado","clearFilters":"Limpiar Filtros"}},"quizzes":{"title":"Cuestionarios","description":"Crea y gestiona cuestionarios para evaluar el aprendizaje","timeRemaining":"Tiempo Restante","addNew":"Aadir Nuevo Cuestionario","createQuiz":"Crear Cuestionario","editQuiz":"Editar Cuestionario","viewQuiz":"Ver Cuestionario","deleteQuiz":"Eliminar Cuestionario","duplicateQuiz":"Duplicar Cuestionario","untitled":"Cuestionario Sin Ttulo","noQuizzes":"No se encontraron cuestionarios","noQuizzesDescription":"An no has creado ningn cuestionario.","searchPlaceholder":"Buscar cuestionarios...","noDetailedResults":"No hay resultados detallados para mostrar.","loadingQuizzes":"Cargando cuestionarios...","loadingResults":"Cargando resultados del cuestionario...","quizResults":"Resultados del Cuestionario","createNew":"Crear Nuevo Cuestionario","editTitle":"Editando: {{title}}","form":{"title":"Ttulo del Quiz","course":"Curso","category":"Categora","difficulty":"Dificultad","startDate":"Fecha de Inicio","instructions":"Instrucciones","passingScore":"Nota para Aprobar (%)","timeLimit":"Lmite de Tiempo (mins)","maxAttempts":"Intentos Mximos","randomize":"Aleatorizar Preguntas","showResults":"Mostrar Resultados al Finalizar","negativeScoring":"Habilitar Puntuacin Negativa","addQuestions":"Aadir Preguntas del Banco","searchPlaceholder":"Buscar preguntas por ttulo...","selectedQuestions":"Preguntas Seleccionadas","noQuestions":"An no se han aadido preguntas."},"fields":{"title":"Ttulo del Cuestionario","instructions":"Instrucciones","course":"Curso","category":"Categora","difficulty":"Dificultad","quizType":"Tipo de Cuestionario","passingScore":"Puntuacin Mnima","timeLimit":"Lmite de Tiempo","maxAttempts":"Intentos Mximos","questions":"Preguntas","totalPoints":"Puntos Totales","randomizeQuestions":"Aleatorizar Preguntas","showResults":"Mostrar Resultados","enableNegativeScoring":"Habilitar Puntuacin Negativa"},"question":{"unanswered":"Sin Contestar","answered":"Contestada","withRisk":"Con Riesgo","clearSelection":"Limpiar seleccin","answerExplanation":"Explicacin de la respuesta","noExplanationAvailable":"No hay explicacin disponible para esta pregunta an.","questionStatistics":"Estadsticas de la pregunta","failureRate":"Porcentaje de fallos","difficultQuestion":"Esta es una pregunta difcil - ms de la mitad de los estudiantes la fallan","noStatisticsAvailable":"No hay suficientes datos estadsticos para esta pregunta an.","markWithRisk":"Marcar con riesgo"},"reviewedQuestion":{"correct":"Correcta","incorrect":"Incorrecta","unanswered":"Sin contestar","withRisk":"Con riesgo","markFavorite":"Marcar como favorita","removeFromFavorites":"Quitar de favoritas","addComment":"Agregar comentario","challenge":"Impugnar","questionStatistics":"Estadsticas de la pregunta","failedBy":"Esta pregunta ha sido fallada por el {{percentage}}% del alumnado ({{total}} respuestas totales).","answerExplanation":"Explicacin de la respuesta","errorInvalidData":"Error: Datos de pregunta o resultado invlidos."},"feedbackModal":{"successTitle":"Mensaje Enviado!","successMessage":"Gracias por tu colaboracin. Hemos recibido tu mensaje.","close":"Cerrar","titleChallenge":"Impugnar Pregunta","titleFeedback":"Comentario o Sugerencia","question":"Pregunta","messageType":"Tipo de Mensaje","optionFeedback":"Comentario o Sugerencia","optionChallenge":"Impugnacin","yourMessage":"Tu mensaje","placeholderChallenge":"Explica por qu crees que la pregunta o sus respuestas son incorrectas...","placeholderFeedback":"Escribe aqu tu duda, sugerencia o correccin...","errorEmptyMessage":"El mensaje no puede estar vaco.","errorSending":"Error al enviar el mensaje.","cancel":"Cancelar","send":"Enviar Mensaje","sending":"Enviando..."},"resultsSidebar":{"title":"Resumen de Resultados","score":"Puntuacin","scoreWithRisk":"Puntuacin (con riesgo)","timeSpent":"Tiempo Empleado","questionsMap":"Mapa de Preguntas","questionUnanswered":"Pregunta {{number}}: Sin contestar","questionCorrect":"Pregunta {{number}}: Correcta","questionIncorrect":"Pregunta {{number}}: Incorrecta","questionCorrectWithRisk":"Pregunta {{number}}: Correcta (con riesgo)","questionIncorrectWithRisk":"Pregunta {{number}}: Incorrecta (con riesgo)"},"results":{"title":"Resultados del Cuestionario","summary":"Resumen","scoreWithoutRisk":"Sin Riesgo","scoreWithRisk":"Con Riesgo","correct":"Aciertos","incorrect":"Errores","unanswered":"Sin contestar","globalAverage":"Media","percentile":"Percentil","myScore":"Mi Nota","answeredWithRisk":"Con riesgo","backToCourses":"Volver a Cursos"},"sidebar":{"loadingQuestions":"Cargando preguntas...","unanswered":"Sin Contestar","answered":"Contestada","withRisk":"Con Riesgo","withoutRisk":"Sin Riesgo","questionsMap":"Mapa de Preguntas","loadingQuestion":"Cargando pregunta...","question":"Pregunta","loading":"Cargando...","loadMore":"Cargar ms preguntas","finishExam":"FINALIZAR EXAMEN"},"quiz":{"loadingQuiz":"Cargando cuestionario...","errorTitle":"Error al cargar el cuestionario","errorLoadingQuiz":"No se pudo cargar el cuestionario.","submittingAnswers":"Enviando respuestas...","noQuestionsAssigned":"Este cuestionario no tiene preguntas asignadas.","loadingMoreQuestions":"Cargando ms preguntas...","questionsLoadedCount":"{{loaded}} de {{total}} preguntas cargadas","inProgress":"Cuestionario en progreso","savedProgressFound":"Se encontr progreso guardado","continueWhereYouLeft":"Deseas continuar donde lo dejaste o empezar de nuevo?","currentQuestion":"Pregunta actual","timeRemaining":"Tiempo restante","continueQuiz":"Continuar","startOver":"Empezar de nuevo"},"exitModal":{"title":"Salir del cuestionario","message":"Ests seguro de que quieres salir? Tu progreso se guardar automticamente y podrs continuar ms tarde.","cancel":"Cancelar","confirm":"Salir"},"stats":{"totalQuizzes":"Total de Cuestionarios","totalQuestions":"Total de Preguntas","totalPoints":"Total de Puntos","averageQuestions":"Promedio de Preguntas"},"messages":{"titleRequired":"El ttulo del cuestionario es obligatorio","courseRequired":"Por favor selecciona un curso","questionsRequired":"Por favor aade al menos una pregunta","noQuestionsAdded":"An no se han aadido preguntas.","createSuccess":"Cuestionario creado exitosamente","updateSuccess":"Cuestionario actualizado exitosamente","deleteSuccess":"Cuestionario eliminado exitosamente","duplicateSuccess":"Cuestionario duplicado exitosamente","deleteConfirmTitle":"Eliminar Cuestionario","deleteConfirmMessage":"Ests seguro de que quieres eliminar \\"{{title}}\\"? Esta accin no se puede deshacer.","found":"{{count}} cuestionario encontrado","found_plural":"{{count}} cuestionarios encontrados"},"actions":{"createNewQuiz":"Crear Nuevo Cuestionario","saveAndAddNew":"Guardar y Aadir Nuevo","saveChanges":"Guardar Cambios","addQuestion":"Aadir Pregunta","searchQuestions":"Buscar Preguntas","createFirstQuiz":"Crear Primer Cuestionario"},"card":{"questions_one":"{{count}} Pregunta","questions_other":"{{count}} Preguntas","points_one":"{{count}} Punto","points_other":"{{count}} Puntos","attempts_one":"{{count}} Intento","attempts_other":"{{count}} Intentos","avgScore":"{{count}}% Nota Media","noCourse":"Sin curso asociado","viewQuestions":"Ver Preguntas ({{count}})"},"labels":{"allCourses":"Todos los Cursos","selectCourse":"Seleccionar curso...","minutes":"minutos","unlimited":"Ilimitado","attempts":"intentos"}},"questions":{"title":"Preguntas","description":"Crea y gestiona preguntas para cuestionarios","addNew":"Aadir Nueva Pregunta","createQuestion":"Crear Pregunta","editQuestion":"Editar Pregunta","viewQuestion":"Ver Pregunta","deleteQuestion":"Eliminar Pregunta","duplicateQuestion":"Duplicar Pregunta","untitled":"Pregunta Sin Ttulo","noQuestions":"No se encontraron preguntas","noQuestionsDescription":"An no has creado ninguna pregunta.","searchPlaceholder":"Buscar preguntas...","loadingQuestions":"Cargando preguntas...","fields":{"title":"Ttulo de la Pregunta","type":"Tipo de Pregunta","difficulty":"Dificultad","category":"Categora","points":"Puntos","explanation":"Explicacin","options":"Opciones","correctAnswer":"Respuesta Correcta","provider":"Proveedor"},"types":{"multipleChoice":"Opcin Mltiple","trueFalse":"Verdadero/Falso","shortAnswer":"Respuesta Corta","essay":"Ensayo","matching":"Emparejamiento","fillBlank":"Completar Espacios"},"stats":{"totalQuestions":"Total de Preguntas","byDifficulty":"Por Dificultad","byType":"Por Tipo","averagePoints":"Promedio de Puntos"},"messages":{"titleRequired":"El ttulo de la pregunta es obligatorio","typeRequired":"El tipo de pregunta es obligatorio","optionsRequired":"Se requieren al menos dos opciones","correctAnswerRequired":"Debes marcar al menos una respuesta correcta","createSuccess":"Pregunta creada exitosamente","updateSuccess":"Pregunta actualizada exitosamente","deleteSuccess":"Pregunta eliminada exitosamente","duplicateSuccess":"Pregunta duplicada exitosamente","deleteConfirmTitle":"Eliminar Pregunta","deleteConfirmMessage":"Ests seguro de que quieres eliminar \\"{{title}}\\"? Esta accin no se puede deshacer.","found":"{{count}} pregunta encontrada","found_plural":"{{count}} preguntas encontradas"},"actions":{"addOption":"Aadir Opcin","removeOption":"Eliminar Opcin","createFirstQuestion":"Crear Primera Pregunta"},"placeholders":{"option":"Opcin {{number}}","searchQuestions":"Buscar preguntas por ttulo..."},"card":{"points":"{{count}} Puntos","noLesson":"Sin leccin asociada","viewQuizzes":"Ver Cuestionarios Asociados ({{count}})","difficulty":"Dificultad","provider":"Proveedor","difficulties":{"easy":"Fcil","medium":"Media","hard":"Difcil"},"types":{"multiple_choice":"Opcin Mltiple","true_false":"Verdadero / Falso","fill_in_the_blanks":"Rellenar Huecos","short_answer":"Respuesta Corta","essay":"Ensayo"}},"providers":{"human":"Humano","ai":"IA","imported":"Importado"}},"students":{"title":"Estudiantes","description":"Gestiona estudiantes e inscripciones","noStudents":"No se encontraron estudiantes","noStudentsDescription":"No hay estudiantes que coincidan con los filtros actuales.","searchPlaceholder":"Buscar estudiantes...","stats":{"totalUsers":"Total de Usuarios","enrolledUsers":"Usuarios Inscritos","activeUsers":"Usuarios Activos","averageProgress":"Progreso Promedio","recentRegistrations":"Registros Recientes"},"filters":{"allRoles":"Todos los Roles","allCourses":"Todos los Cursos","allStatuses":"Todos los Estados","enrolled":"Inscritos","notEnrolled":"No Inscritos"},"roles":{"administrator":"Administrador","editor":"Editor","author":"Autor","contributor":"Colaborador","subscriber":"Suscriptor"},"actions":{"enroll":"Inscribir","unenroll":"Desinscribir","updateRole":"Actualizar Rol","bulkEnroll":"Inscripcin Masiva","bulkUnenroll":"Desinscripcin Masiva","viewProfile":"Ver Perfil"},"messages":{"courseManagementMode":"Modo de Gestin de Curso","viewingInContext":"Ests viendo usuarios en el contexto de: {{courseName}}","noUsersFound":"No se encontraron usuarios","noUsersMatch":"Ningn usuario coincide con tus filtros actuales. Intenta ajustar tu bsqueda o criterios de filtro.","clearSearch":"Limpiar bsqueda"}},"users":{"title":"Usuarios","description":"Gestiona usuarios del sistema","stats":{"totalUsers":"Total de Usuarios","enrolledUsers":"Usuarios Inscritos","activeUsers":"Usuarios Activos","averageProgress":"Progreso Promedio"}},"modals":{"delete":{"confirmTitle":"Confirmar Eliminacin","confirmMessage":"Ests seguro de que quieres eliminar este elemento? Esta accin no se puede deshacer.","confirmButton":"Eliminar","cancelButton":"Cancelar","typeToConfirm":"Escribe <strong>DELETE</strong> para confirmar:","typeHere":"Escribe DELETE aqu","itemToDelete":"Elemento a eliminar:","processing":"Procesando..."},"close":"Cerrar","save":"Guardar","cancel":"Cancelar"},"notifications":{"createSuccess":"{{resource}} creado exitosamente","updateSuccess":"{{resource}} actualizado exitosamente","deleteSuccess":"{{resource}} eliminado exitosamente","duplicateSuccess":"{{resource}} duplicado exitosamente","error":"Ocurri un error","savingChanges":"Guardando cambios...","operationFailed":"La operacin fall"},"viewMode":{"cards":"Tarjetas","list":"Lista","grid":"Cuadrcula","switchTo":"Cambiar a vista {{mode}}"},"emptyStates":{"noItemsFound":"No se encontraron elementos","noItemsDescription":"No hay elementos que coincidan con tus criterios de bsqueda.","createFirst":"Crear Primero","getStarted":"Empezar"},"filters":{"filterBy":"Filtrar por","clearAll":"Limpiar Todo","apply":"Aplicar","reset":"Reiniciar","course":"Curso","category":"Categora","difficulty":"Dificultad","status":"Estado","type":"Tipo"},"pagination":{"showing":"Mostrando","of":"de","results":"resultados","page":"Pgina","previous":"Anterior","next":"Siguiente","first":"Primera","last":"ltima"},"validation":{"required":"Este campo es obligatorio","invalidEmail":"Email invlido","invalidUrl":"URL invlida","minLength":"Debe tener al menos {{length}} caracteres","maxLength":"No debe exceder {{length}} caracteres","mustBeNumber":"Debe ser un nmero","mustBePositive":"Debe ser un nmero positivo"},"ranking":{"title":"Ranking del Test","yourPosition":"Tu Posicin","averageScore":"Puntuacin Media","pending":"Pendiente","quizzesCompleted":"Tests Completados","completeAllQuizzes":"Completa todos los tests del curso para ver tu posicin","loading":"Cargando ranking...","error":"Error al cargar el ranking","noData":"An no hay rankings","noDataDescription":"S el primero en completar este test","avgWithoutRisk":"Media sin riesgo","avgWithRisk":"Media con riesgo","totalUsers":"Participantes","viewRanking":"Ver Ranking"},"events":{"pending":"Pendiente","nextEvent":"Prximo Evento","noEventsScheduled":"No hay eventos programados","november":"Noviembre"},"supportMaterial":{"noMaterials":"No hay material de apoyo disponible","noMaterialsDescription":"An no se ha agregado material de apoyo a este curso","document":"documento","documents":"documentos","file":"archivo","files":"archivos","download":"Descargar","read":"Leer","noPreview":"Vista previa no disponible","noPreviewDescription":"Este documento no puede mostrarse en el navegador","showLesson":"Desplegar tema","hideLesson":"Ocultar tema","available":"Ya disponible"},"videos":{"noVideos":"No hay videos disponibles","noVideosDescription":"An no se han agregado videos a este curso","video":"video","videos":"videos","watch":"Ver","noVideoUrl":"Video no disponible","noVideoUrlDescription":"Este video no tiene una URL vlida","showLesson":"Desplegar tema","hideLesson":"Ocultar tema","available":"Ya disponible"},"tests":{"noTests":"No hay tests disponibles","noTestsDescription":"An no se han agregado tests a este curso","test":"test","tests":"tests","configuration":"Configuracin","generateTest":"Generar Test","start":"Iniciar","startTest":"Comenzar Test","retake":"Repetir","passingScore":"Nota mnima","timeLimit":"Tiempo lmite","minutes":"minutos","noTimeLimit":"Sin lmite","questions":"Preguntas","difficulty":"Dificultad","difficultyEasy":"Fcil","difficultyMedium":"Medio","difficultyHard":"Difcil","easy":"Fcil","medium":"Medio","hard":"Difcil","startDate":"Fecha de inicio","showLesson":"Desplegar tema","hideLesson":"Ocultar tema","available":"Ya disponible","statistics":"Estadsticas del Test","withoutRisk":"Sin Riesgo","withRisk":"Con Riesgo","avgScore":"Media UA","myScore":"Mi Nota","percentile":"Mi Percentil","recentAttempts":"ltimos Intentos","last5Attempts":"ltimos 5 intentos","passed":"Aprobado","failed":"No Aprobado","details":"Detalles","viewDetails":"Ver detalles del intento","viewerPlaceholder":"Interfaz de test en desarrollo","viewerPlaceholderDescription":"Aqu se mostrar la interfaz para realizar el test","backToInfo":"Volver al Test","loadingAttemptDetails":"Cargando detalles del intento...","errorLoadingAttempt":"Error al cargar el intento","attemptDetails":"Detalles del Intento","searchPlaceholder":"Buscar tests...","noTestsFound":"No se encontraron tests","tryDifferentSearch":"Intenta una bsqueda diferente","customTestDescription":"Crea un test personalizado segn tus necesidades","customTest":"Test Personalizado","noQuestionsFound":"No se encontraron preguntas","adjustFilters":"Ajusta los filtros para encontrar preguntas disponibles","practiceAtYourPace":"Practica a tu ritmo sin presin de tiempo","startPractice":"Comenzar Prctica","checkAnswer":"Verificar Respuesta","correctAnswer":"Correcto!","incorrectAnswer":"Incorrecto","wellDone":"Muy bien! Has acertado la respuesta.","keepPracticing":"Revisa la explicacin y sigue practicando.","explanation":"Explicacin","noQuestionsAvailable":"No hay preguntas disponibles","testHistory":"Historial de Tests","attempt":"intento","attempts":"intentos","searchQuiz":"Buscar test","quizNamePlaceholder":"Nombre del test...","lesson":"Leccin","allLessons":"Todas las lecciones","dateFrom":"Desde","dateTo":"Hasta","showing":"Mostrando","of":"de","results":"resultados","clearFilters":"Limpiar filtros","loadingHistory":"Cargando historial...","noAttemptsYet":"No tienes intentos registrados","startTests":"Comienza a realizar tests para ver tu historial","errorLoadingHistory":"Error al cargar el historial","tryAgain":"Intentar de nuevo","viewQuiz":"Ver test","aboveAverage":"sobre la media","belowAverage":"bajo la media"},"navigation":{"previous":"Anterior","next":"Siguiente"},"progress":{"completed":"Completado","markComplete":"Marcar como completado"},"login":{"welcomeBack":"Bienvenido de vuelta","signInToContinue":"Inicia sesin para continuar","username":"Usuario o correo electrnico","usernamePlaceholder":"tu@email.com","password":"Contrasea","rememberMe":"Recordarme","signIn":"Iniciar Sesin","signingIn":"Iniciando sesin...","forgotPassword":"Olvidaste tu contrasea?","invalidCredentials":"Usuario o contrasea incorrectos","error":"Error al iniciar sesin. Por favor, intenta de nuevo."},"statistics":{"title":"Estadsticas del Curso","averageScore":"Nota Media","ranking":"Ranking","topPercent":"Top {{percent}}%","cutoffScore":"Nota de corte","passedCutoff":"Has superado la nota de corte","noCutoffDataYet":"Nota de corte disponible prximamente","completedQuizzes":"Tests Completados","lessonsCompleted":"Lecciones Completadas","lessonsWithProgress":"Lecciones con progreso","bestPerformance":"Mejor Nota","noDataYet":"Sin datos an","performanceByLesson":"Rendimiento por Leccin","noDataAvailable":"No hay datos disponibles an","completeTestsToSeeStats":"Completa tests para ver estadsticas","areasToImprove":"reas a Mejorar","lessonsToReview":"Lecciones a Repasar","lessonAnalysis":"Anlisis de Temas","allLessonsInCourse":"Todos los temas del curso","sortHighToLow":"Mayor a menor nota","sortLowToHigh":"Menor a mayor nota","noLessonsData":"No hay datos de lecciones disponibles","review":"Repasar","reviewLesson":"Ver Leccin","greatJob":"Excelente!","noWeakAreasFound":"No tienes reas crticas que mejorar","allLessonsAbove8":"Todas tus lecciones tienen nota superior a 8","allLessons":"Todas las Lecciones","critical":"Urgente","needsImprovement":"Mejorar","good":"Bien","difficultyAnalysis":"Anlisis por Dificultad","questionAnalysis":"Anlisis de Preguntas","withRisk":"Con Riesgo","withoutRisk":"Sin Riesgo","filterByLesson":"Filtrar por tema","allLessonsFilter":"Todos los temas","easy":"Fcil","medium":"Medio","hard":"Difcil","noDifficultyData":"No hay datos de dificultad disponibles","noDataForDifficulty":"No hay datos para esta dificultad","correct":"Correctas","incorrect":"Incorrectas","unanswered":"Sin contestar","markedWithRisk":"Marcadas con riesgo","viewDetail":"Ver detalle","riskAnalysis":"Anlisis de Riesgo","noRiskData":"No hay datos de riesgo disponibles","noRiskDataForDifficulty":"No hay preguntas marcadas con riesgo en esta dificultad","quizzesCompleted":"Tests completados","score":"Nota","attempt":"intento","attempts":"intentos","temporary":"Temporal","temporaryNote":"Completa todos los tests para obtener tu nota definitiva","temporaryRanking":"Posicin temporal. Completa todos los tests para ver tu ranking final","chart":{"title":"Evolucin de Notas","error":"Error al cargar el grfico","noData":"No hay datos suficientes para mostrar el grfico. Completa algunos tests para ver tu evolucin.","trendUp":"Mejorando +{{diff}}","trendDown":"Bajando -{{diff}}","trendStable":"Estable","period":{"week":"7 das","month":"30 das","all":"Todo"}}},"courseNotifications":{"title":"Notificaciones","unread":"sin leer","markAllRead":"Marcar todas como ledas","loadMore":"Cargar ms","empty":"No tienes notificaciones","emptyDescription":"Cuando haya nuevas lecciones, tests, vdeos o materiales en este curso, recibirs notificaciones aqu.","types":{"new_lesson":"Nueva Leccin","new_quiz":"Nuevo Test","new_video":"Nuevo Vdeo","new_pdf":"Nuevo PDF","new_text":"Nuevo Contenido","lesson_updated":"Leccin Actualizada"}}}'),ye=window.qe_data?.locale?.substring(0,2)||"en",be={en:{translation:ge},es:{translation:xe}};he.use(v).init({resources:be,lng:ye,fallbackLng:"en",interpolation:{escapeValue:!1}});const ve=he;var we="popstate";function je(e={}){return function(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,i="POP",l=null,c=d();function d(){return(o.state||{idx:null}).idx}function u(){i="POP";let e=d(),t=null==e?null:e-c;c=e,l&&l({action:i,location:p.location,delta:t})}function f(e){return function(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),Ne(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:Se(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}(e)}null==c&&(c=0,o.replaceState({...o.state,idx:c},""));let p={get action(){return i},get location(){return e(s,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(we,u),l=e,()=>{s.removeEventListener(we,u),l=null}},createHref:e=>t(s,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i="PUSH";let n=Ce(p.location,e,t);r&&r(n,e),c=d()+1;let u=_e(n,c),f=p.createHref(n);try{o.pushState(u,"",f)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;s.location.assign(f)}a&&l&&l({action:i,location:p.location,delta:1})},replace:function(e,t){i="REPLACE";let n=Ce(p.location,e,t);r&&r(n,e),c=d();let s=_e(n,c),u=p.createHref(n);o.replaceState(s,"",u),a&&l&&l({action:i,location:p.location,delta:0})},go:e=>o.go(e)};return p}(function(e,t){let{pathname:r="/",search:n="",hash:s=""}=Ee(e.location.hash.substring(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),Ce("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"==typeof t?t:Se(t))},function(e,t){ke("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)},e)}function Ne(e,t){if(!1===e||null==e)throw new Error(t)}function ke(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function _e(e,t){return{usr:e.state,key:e.key,idx:t}}function Ce(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Ee(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function Se({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function Ee(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Oe(e,t,r="/"){return function(e,t,r,n){let s=Ue(("string"==typeof t?Ee(t):t).pathname||"/",r);if(null==s)return null;let a=Me(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let e=0;null==o&&e<a.length;++e){let t=Be(s);o=$e(a[e],t,n)}return o}(e,t,r,!1)}function Me(e,t=[],r=[],n="",s=!1){let a=(e,a,o=s,i)=>{let l={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(n)&&o)return;Ne(l.relativePath.startsWith(n),`Absolute route path "${l.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(n.length)}let c=Ve([n,l.relativePath]),d=r.concat(l);e.children&&e.children.length>0&&(Ne(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Me(e.children,t,d,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:Re(c,e.index),routesMeta:d})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of Te(e.path))a(e,t,!0,r);else a(e,t)}),t}function Te(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===n.length)return s?[a,""]:[a];let o=Te(n.join("/")),i=[];return i.push(...o.map(e=>""===e?a:[a,e].join("/"))),s&&i.push(...o),i.map(t=>e.startsWith("/")&&""===t?"/":t)}new WeakMap;var Pe=/^:[\w-]+$/,Ae=3,qe=2,ze=1,De=10,Le=-2,Ie=e=>"*"===e;function Re(e,t){let r=e.split("/"),n=r.length;return r.some(Ie)&&(n+=Le),t&&(n+=qe),r.filter(e=>!Ie(e)).reduce((e,t)=>e+(Pe.test(t)?Ae:""===t?ze:De),n)}function $e(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",o=[];for(let e=0;e<n.length;++e){let i=n[e],l=e===n.length-1,c="/"===a?t:t.slice(a.length)||"/",d=Fe({path:i.relativePath,caseSensitive:i.caseSensitive,end:l},c),u=i.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=Fe({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Ve([a,d.pathname]),pathnameBase:Ke(Ve([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=Ve([a,d.pathnameBase]))}return o}function Fe(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){ke("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),i=s.slice(1),l=n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=i[n]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const s=i[n];return e[t]=r&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:o,pattern:e}}function Be(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return ke(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ue(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function He(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function We(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function Qe(e,t,r,n=!1){let s;"string"==typeof e?s=Ee(e):(s={...e},Ne(!s.pathname||!s.pathname.includes("?"),He("?","pathname","search",s)),Ne(!s.pathname||!s.pathname.includes("#"),He("#","pathname","hash",s)),Ne(!s.search||!s.search.includes("#"),He("#","search","hash",s)));let a,o=""===e||""===s.pathname,i=o?"/":s.pathname;if(null==i)a=r;else{let e=t.length-1;if(!n&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:r,search:n="",hash:s=""}="string"==typeof e?Ee(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:Ye(n),hash:Ge(s)}}(s,a),c=i&&"/"!==i&&i.endsWith("/"),d=(o||"."===i)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}var Ve=e=>e.join("/").replace(/\/\/+/g,"/"),Ke=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ye=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ge=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Xe(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}var Ze=["POST","PUT","PATCH","DELETE"],Je=(new Set(Ze),["GET",...Ze]);new Set(Je),Symbol("ResetLoaderData");var et=a.createContext(null);et.displayName="DataRouter";var tt=a.createContext(null);tt.displayName="DataRouterState";a.createContext(!1);var rt=a.createContext({isTransitioning:!1});rt.displayName="ViewTransition",a.createContext(new Map).displayName="Fetchers",a.createContext(null).displayName="Await";var nt=a.createContext(null);nt.displayName="Navigation";var st=a.createContext(null);st.displayName="Location";var at=a.createContext({outlet:null,matches:[],isDataRoute:!1});at.displayName="Route";var ot=a.createContext(null);function it(){return null!=a.useContext(st)}function lt(){return Ne(it(),"useLocation() may be used only in the context of a <Router> component."),a.useContext(st).location}ot.displayName="RouteError";var ct="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function dt(e){a.useContext(nt).static||a.useLayoutEffect(e)}function ut(){let{isDataRoute:e}=a.useContext(at);return e?function(){let{router:e}=function(e){let t=a.useContext(et);return Ne(t,vt(e)),t}("useNavigate"),t=wt("useNavigate"),r=a.useRef(!1);dt(()=>{r.current=!0});let n=a.useCallback(async(n,s={})=>{ke(r.current,ct),r.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...s}))},[e,t]);return n}():function(){Ne(it(),"useNavigate() may be used only in the context of a <Router> component.");let e=a.useContext(et),{basename:t,navigator:r}=a.useContext(nt),{matches:n}=a.useContext(at),{pathname:s}=lt(),o=JSON.stringify(We(n)),i=a.useRef(!1);dt(()=>{i.current=!0});let l=a.useCallback((n,a={})=>{if(ke(i.current,ct),!i.current)return;if("number"==typeof n)return void r.go(n);let l=Qe(n,JSON.parse(o),s,"path"===a.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Ve([t,l.pathname])),(a.replace?r.replace:r.push)(l,a.state,a)},[t,r,o,s,e]);return l}()}var ft=a.createContext(null);function pt(){let{matches:e}=a.useContext(at),t=e[e.length-1];return t?t.params:{}}function mt(e,{relative:t}={}){let{matches:r}=a.useContext(at),{pathname:n}=lt(),s=JSON.stringify(We(r));return a.useMemo(()=>Qe(e,JSON.parse(s),n,"path"===t),[e,s,n,t])}function ht(e,t,r,n,s){Ne(it(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=a.useContext(nt),{matches:i}=a.useContext(at),l=i[i.length-1],c=l?l.params:{},d=l?l.pathname:"/",u=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Nt(d,!f||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let p,m=lt();if(t){let e="string"==typeof t?Ee(t):t;Ne("/"===u||e.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${e.pathname}" was given in the \`location\` prop.`),p=e}else p=m;let h=p.pathname||"/",g=h;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=Oe(e,{pathname:g});ke(f||null!=x,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),ke(null==x||void 0!==x[x.length-1].route.element||void 0!==x[x.length-1].route.Component||void 0!==x[x.length-1].route.lazy,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=function(e,t=[],r=null,n=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let s=e,o=r?.errors;if(null!=o){let e=s.findIndex(e=>e.route.id&&void 0!==o?.[e.route.id]);Ne(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,e+1))}let i=!1,l=-1;if(r)for(let e=0;e<s.length;e++){let t=s[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:n}=r,a=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||a){i=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,c,d)=>{let u,f=!1,p=null,m=null;r&&(u=o&&c.route.id?o[c.route.id]:void 0,p=c.route.errorElement||xt,i&&(l<0&&0===d?(Nt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,m=null):l===d&&(f=!0,m=c.route.hydrateFallbackElement||null)));let h=t.concat(s.slice(0,d+1)),g=()=>{let t;return t=u?p:f?m:c.route.Component?a.createElement(c.route.Component,null):c.route.element?c.route.element:e,a.createElement(bt,{match:c,routeContext:{outlet:e,matches:h,isDataRoute:null!=r},children:t})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===d)?a.createElement(yt,{location:r.location,revalidation:r.revalidation,component:p,error:u,children:g(),routeContext:{outlet:null,matches:h,isDataRoute:!0},unstable_onError:n}):g()},null)}(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Ve([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Ve([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,r,n,s);return t&&y?a.createElement(st.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function gt(){let e=function(){let e=a.useContext(ot),t=function(e){let t=a.useContext(tt);return Ne(t,vt(e)),t}("useRouteError"),r=wt("useRouteError");return void 0!==e?e:t.errors?.[r]}(),t=Xe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},o={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=a.createElement(a.Fragment,null,a.createElement("p",null," Hey developer "),a.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",a.createElement("code",{style:o},"ErrorBoundary")," or"," ",a.createElement("code",{style:o},"errorElement")," prop on your route.")),a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),r?a.createElement("pre",{style:s},r):null,i)}var xt=a.createElement(gt,null),yt=class extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?a.createElement(at.Provider,{value:this.props.routeContext},a.createElement(ot.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bt({routeContext:e,match:t,children:r}){let n=a.useContext(et);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),a.createElement(at.Provider,{value:e},r)}function vt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wt(e){let t=function(e){let t=a.useContext(at);return Ne(t,vt(e)),t}(e),r=t.matches[t.matches.length-1];return Ne(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var jt={};function Nt(e,t,r){t||jt[e]||(jt[e]=!0,ke(!1,r))}function kt({to:e,replace:t,state:r,relative:n}){Ne(it(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=a.useContext(nt);ke(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=a.useContext(at),{pathname:i}=lt(),l=ut(),c=Qe(e,We(o),i,"path"===n),d=JSON.stringify(c);return a.useEffect(()=>{l(JSON.parse(d),{replace:t,state:r,relative:n})},[l,d,n,t,r]),null}function _t(e){return function(e){let t=a.useContext(at).outlet;return t?a.createElement(ft.Provider,{value:e},t):t}(e.context)}function Ct(e){Ne(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function St({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:o=!1}){Ne(!it(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),l=a.useMemo(()=>({basename:i,navigator:s,static:o,future:{}}),[i,s,o]);"string"==typeof r&&(r=Ee(r));let{pathname:c="/",search:d="",hash:u="",state:f=null,key:p="default"}=r,m=a.useMemo(()=>{let e=Ue(c,i);return null==e?null:{location:{pathname:e,search:d,hash:u,state:f,key:p},navigationType:n}},[i,c,d,u,f,p,n]);return ke(null!=m,`<Router basename="${i}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),null==m?null:a.createElement(nt.Provider,{value:l},a.createElement(st.Provider,{children:t,value:m}))}function Et({children:e,location:t}){return ht(Ot(e),t)}function Ot(e,t=[]){let r=[];return a.Children.forEach(e,(e,n)=>{if(!a.isValidElement(e))return;let s=[...t,n];if(e.type===a.Fragment)return void r.push.apply(r,Ot(e.props.children,s));Ne(e.type===Ct,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ne(!e.props.index||!e.props.children,"An index route cannot have child routes.");let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ot(e.props.children,s)),r.push(o)}),r}a.memo(function({routes:e,future:t,state:r,unstable_onError:n}){return ht(e,void 0,r,n,t)}),a.Component;var Mt="get",Tt="application/x-www-form-urlencoded";function Pt(e){return null!=e&&"string"==typeof e.tagName}var At=null,qt=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function zt(e){return null==e||qt.has(e)?e:(ke(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tt}"`),null)}function Dt(e,t){if(!1===e||null==e)throw new Error(t)}function Lt(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function It(e,t,r,n,s,a){let o=(e,t)=>!r[t]||e.route.id!==r[t].route.id,i=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>o(e,t)||i(e,t)):"data"===a?t.filter((t,a)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,a)||i(t,a))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function Rt(e,t,{includeHydrateFallback:r}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1),[...new Set(n)];var n}function $t(){let e=a.useContext(et);return Dt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ft(){let e=a.useContext(tt);return Dt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0"),"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis,Symbol("SingleFetchRedirect");var Bt=a.createContext(void 0);function Ut(){let e=a.useContext(Bt);return Dt(e,"You must render this element inside a <HydratedRouter> element"),e}function Ht(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Wt({page:e,...t}){let{router:r}=$t(),n=a.useMemo(()=>Oe(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?a.createElement(Vt,{page:e,matches:n,...t}):null}function Qt(e){let{manifest:t,routeModules:r}=Ut(),[n,s]=a.useState([]);return a.useEffect(()=>{let n=!1;return async function(e,t,r){let n=await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(n,r);return e.links?e.links():[]}return[]}));return function(e,t){let r=new Set,n=new Set(t);return e.reduce((e,s)=>{if(t&&!function(e){return null!=e&&"string"==typeof e.page}(s)&&"script"===s.as&&s.href&&n.has(s.href))return e;let a=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(s));return r.has(a)||(r.add(a),e.push({key:a,link:s})),e},[])}(n.flat(1).filter(Lt).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,r).then(e=>{n||s(e)}),()=>{n=!0}},[e,t,r]),n}function Vt({page:e,matches:t,...r}){let n=lt(),{manifest:s,routeModules:o}=Ut(),{basename:i}=$t(),{loaderData:l,matches:c}=Ft(),d=a.useMemo(()=>It(e,t,c,s,n,"data"),[e,t,c,s,n]),u=a.useMemo(()=>It(e,t,c,s,n,"assets"),[e,t,c,s,n]),f=a.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let r=new Set,a=!1;if(t.forEach(e=>{let t=s.routes[e.route.id];t&&t.hasLoader&&(!d.some(t=>t.route.id===e.route.id)&&e.route.id in l&&o[e.route.id]?.shouldRevalidate||t.hasClientLoader?a=!0:r.add(e.route.id))}),0===r.size)return[];let c=function(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===Ue(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}(e,i,"data");return a&&r.size>0&&c.searchParams.set("_routes",t.filter(e=>r.has(e.route.id)).map(e=>e.route.id).join(",")),[c.pathname+c.search]},[i,l,n,s,d,t,e,o]),p=a.useMemo(()=>Rt(u,s),[u,s]),m=Qt(u);return a.createElement(a.Fragment,null,f.map(e=>a.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r})),p.map(e=>a.createElement("link",{key:e,rel:"modulepreload",href:e,...r})),m.map(({key:e,link:t})=>a.createElement("link",{key:e,nonce:r.nonce,...t})))}Bt.displayName="FrameworkContext";function Kt(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}a.Component;var Yt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Yt&&(window.__reactRouterVersion="7.8.2")}catch(qR){}function Gt({basename:e,children:t,window:r}){let n=a.useRef();null==n.current&&(n.current=je({window:r,v5Compat:!0}));let s=n.current,[o,i]=a.useState({action:s.action,location:s.location}),l=a.useCallback(e=>{a.startTransition(()=>i(e))},[i]);return a.useLayoutEffect(()=>s.listen(l),[s,l]),a.createElement(St,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:s})}var Xt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zt=a.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:n,reloadDocument:s,replace:o,state:i,target:l,to:c,preventScrollReset:d,viewTransition:u,...f},p){let m,{basename:h}=a.useContext(nt),g="string"==typeof c&&Xt.test(c),x=!1;if("string"==typeof c&&g&&(m=c,Yt))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=Ue(t.pathname,h);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:x=!0}catch(e){ke(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=function(e,{relative:t}={}){Ne(it(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=a.useContext(nt),{hash:s,pathname:o,search:i}=mt(e,{relative:t}),l=o;return"/"!==r&&(l="/"===o?r:Ve([r,o])),n.createHref({pathname:l,search:i,hash:s})}(c,{relative:n}),[b,v,w]=function(e,t){let r=a.useContext(Bt),[n,s]=a.useState(!1),[o,i]=a.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:f}=t,p=a.useRef(null);a.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[e]),a.useEffect(()=>{if(n){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[n]);let m=()=>{s(!0)},h=()=>{s(!1),i(!1)};return r?"intent"!==e?[o,p,{}]:[o,p,{onFocus:Ht(l,m),onBlur:Ht(c,h),onMouseEnter:Ht(d,m),onMouseLeave:Ht(u,h),onTouchStart:Ht(f,m)}]:[!1,p,{}]}(r,f),j=function(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:o,viewTransition:i}={}){let l=ut(),c=lt(),d=mt(e,{relative:o});return a.useCallback(a=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(a,t)){a.preventDefault();let t=void 0!==r?r:Se(c)===Se(d);l(e,{replace:t,state:n,preventScrollReset:s,relative:o,viewTransition:i})}},[c,l,d,r,n,t,e,s,o,i])}(c,{replace:o,state:i,target:l,preventScrollReset:d,relative:n,viewTransition:u}),N=a.createElement("a",{...f,...w,href:m||y,onClick:x||s?e:function(t){e&&e(t),t.defaultPrevented||j(t)},ref:Kt(p,v),target:l,"data-discover":g||"render"!==t?void 0:"true"});return b&&!g?a.createElement(a.Fragment,null,N,a.createElement(Wt,{page:y})):N});Zt.displayName="Link";var Jt=a.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:n=!1,style:s,to:o,viewTransition:i,children:l,...c},d){let u=mt(o,{relative:c.relative}),f=lt(),p=a.useContext(tt),{navigator:m,basename:h}=a.useContext(nt),g=null!=p&&function(e,{relative:t}={}){let r=a.useContext(rt);Ne(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=tr("useViewTransitionState"),s=mt(e,{relative:t});if(!r.isTransitioning)return!1;let o=Ue(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=Ue(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=Fe(s.pathname,i)||null!=Fe(s.pathname,o)}(u)&&!0===i,x=m.encodeLocation?m.encodeLocation(u).pathname:u.pathname,y=f.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&h&&(b=Ue(b,h)||b);const v="/"!==x&&x.endsWith("/")?x.length-1:x.length;let w,j=y===x||!n&&y.startsWith(x)&&"/"===y.charAt(v),N=null!=b&&(b===x||!n&&b.startsWith(x)&&"/"===b.charAt(x.length)),k={isActive:j,isPending:N,isTransitioning:g},_=j?e:void 0;w="function"==typeof r?r(k):[r,j?"active":null,N?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let C="function"==typeof s?s(k):s;return a.createElement(Zt,{...c,"aria-current":_,className:w,ref:d,style:C,to:o,viewTransition:i},"function"==typeof l?l(k):l)});Jt.displayName="NavLink";var er=a.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:o,method:i=Mt,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:f,...p},m)=>{let h=function(){let{router:e}=tr("useSubmit"),{basename:t}=a.useContext(nt),r=wt("useRouteId");return a.useCallback(async(n,s={})=>{let{action:a,method:o,encType:i,formData:l,body:c}=function(e,t){let r,n,s,a,o;if(function(e){return Pt(e)&&"form"===e.tagName.toLowerCase()}(e)){let o=e.getAttribute("action");n=o?Ue(o,t):null,r=e.getAttribute("method")||Mt,s=zt(e.getAttribute("enctype"))||Tt,a=new FormData(e)}else if(function(e){return Pt(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Pt(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||o.getAttribute("action");if(n=i?Ue(i,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||Mt,s=zt(e.getAttribute("formenctype"))||zt(o.getAttribute("enctype"))||Tt,a=new FormData(o,e),!function(){if(null===At)try{new FormData(document.createElement("form"),0),At=!1}catch(e){At=!0}return At}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,n)}}else{if(Pt(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Mt,n=null,s=Tt,o=e}return a&&"text/plain"===s&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:o}}(n,t);if(!1===s.navigate){let t=s.fetcherKey||nr();await e.fetch(t,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||i,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||i,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}(),g=function(e,{relative:t}={}){let{basename:r}=a.useContext(nt),n=a.useContext(at);Ne(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),o={...mt(e||".",{relative:t})},i=lt();if(null==e){o.search=i.search;let e=new URLSearchParams(o.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();o.search=r?`?${r}`:""}}return e&&"."!==e||!s.route.index||(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(o.pathname="/"===o.pathname?r:Ve([r,o.pathname])),Se(o)}(l,{relative:d}),x="get"===i.toLowerCase()?"get":"post",y="string"==typeof l&&Xt.test(l);return a.createElement("form",{ref:m,method:x,action:g,onSubmit:n?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,a=n?.getAttribute("formmethod")||i;h(n||e.currentTarget,{fetcherKey:t,method:a,navigate:r,replace:s,state:o,relative:d,preventScrollReset:u,viewTransition:f})},...p,"data-discover":y||"render"!==e?void 0:"true"})});function tr(e){let t=a.useContext(et);return Ne(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}er.displayName="Form";var rr=0,nr=()=>`__${String(++rr)}__`;function sr(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=sr(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ar(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=sr(e))&&(n&&(n+=" "),n+=t);return n}const or=ar;!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var ir=e=>"number"==typeof e&&!isNaN(e),lr=e=>"string"==typeof e,cr=e=>"function"==typeof e,dr=e=>lr(e)||cr(e)?e:null,ur=(e,t)=>!1===e||ir(e)&&e>0?e:t,fr=e=>(0,a.isValidElement)(e)||lr(e)||cr(e)||ir(e);function pr({enter:e,exit:t,appendPosition:r=!1,collapse:n=!0,collapseDuration:s=300}){return function({children:o,position:i,preventExitTransition:l,done:c,nodeRef:d,isIn:u,playToast:f}){let p=r?`${e}--${i}`:e,m=r?`${t}--${i}`:t,h=(0,a.useRef)(0);return(0,a.useLayoutEffect)(()=>{let e=d.current,t=p.split(" "),r=n=>{n.target===d.current&&(f(),e.removeEventListener("animationend",r),e.removeEventListener("animationcancel",r),0===h.current&&"animationcancel"!==n.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",r),e.addEventListener("animationcancel",r)},[]),(0,a.useEffect)(()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),n?function(e,t,r=300){let{scrollHeight:n,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${r}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,r)})})}(e,c,s):c()};u||(l?t():(h.current=1,e.className+=` ${m}`,e.addEventListener("animationend",t)))},[u]),a.createElement(a.Fragment,null,o)}}function mr(e,t){return{content:hr(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function hr(e,t,r=!1){return(0,a.isValidElement)(e)&&!lr(e.type)?(0,a.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):cr(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function gr({delay:e,isRunning:t,closeToast:r,type:n="default",hide:s,className:o,controlledProgress:i,progress:l,rtl:c,isIn:d,theme:u}){let f=s||i&&0===l,p={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};i&&(p.transform=`scaleX(${l})`);let m=or("Toastify__progress-bar",i?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${u}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":c}),h=cr(o)?o({rtl:c,type:n,defaultClassName:m}):or(m,o),g={[i&&l>=1?"onTransitionEnd":"onAnimationEnd"]:i&&l<1?null:()=>{d&&r()}};return a.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":f},a.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${u} Toastify__progress-bar--${n}`}),a.createElement("div",{role:"progressbar","aria-hidden":f?"true":"false","aria-label":"notification timer",className:h,style:p,...g}))}var xr=1,yr=()=>""+xr++;var br=new Map,vr=[],wr=new Set,jr=e=>wr.forEach(t=>t(e)),Nr=()=>br.size>0;function kr(e,t){var r;if(t)return!(null==(r=br.get(t))||!r.isToastActive(e));let n=!1;return br.forEach(t=>{t.isToastActive(e)&&(n=!0)}),n}function _r(e,t){fr(e)&&(Nr()||vr.push({content:e,options:t}),br.forEach(r=>{r.buildToast(e,t)}))}function Cr(e,t){br.forEach(r=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===r.id)&&r.toggle(e,null==t?void 0:t.id)})}function Sr(e){let t=e.containerId||1;return{subscribe(r){let n=function(e,t,r){let n=1,s=0,a=[],o=[],i=t,l=new Map,c=new Set,d=()=>{o=Array.from(l.values()),c.forEach(e=>e())},u=e=>{var t,r;null==(r=null==(t=e.props)?void 0:t.onClose)||r.call(t,e.removalReason),e.isActive=!1},f=e=>{if(null==e)l.forEach(u);else{let t=l.get(e);t&&u(t)}d()},p=e=>{var t,n;let{toastId:s,updateId:a}=e.props,o=null==a;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(s,e),d(),r(mr(e,o?"added":"updated")),o&&(null==(n=(t=e.props).onOpen)||n.call(t))};return{id:e,props:i,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach(r=>{var n;(null==t||t===r.props.toastId)&&(null==(n=r.toggle)||n.call(r,e))})},removeToast:f,toasts:l,clearQueue:()=>{s-=a.length,a=[]},buildToast:(t,o)=>{if((({containerId:t,toastId:r,updateId:n})=>{let s=t?t!==e:1!==e,a=l.has(r)&&null==n;return s||a})(o))return;let{toastId:c,updateId:u,data:m,staleId:h,delay:g}=o,x=null==u;x&&s++;let y={...i,style:i.toastStyle,key:n++,...Object.fromEntries(Object.entries(o).filter(([e,t])=>null!=t)),toastId:c,updateId:u,data:m,isIn:!1,className:dr(o.className||i.toastClassName),progressClassName:dr(o.progressClassName||i.progressClassName),autoClose:!o.isLoading&&ur(o.autoClose,i.autoClose),closeToast(e){l.get(c).removalReason=e,f(c)},deleteToast(){let e=l.get(c);if(null!=e){if(r(mr(e,"removed")),l.delete(c),s--,s<0&&(s=0),a.length>0)return void p(a.shift());d()}}};y.closeButton=i.closeButton,!1===o.closeButton||fr(o.closeButton)?y.closeButton=o.closeButton:!0===o.closeButton&&(y.closeButton=!fr(i.closeButton)||i.closeButton);let b={content:t,props:y,staleId:h};i.limit&&i.limit>0&&s>i.limit&&x?a.push(b):ir(g)?setTimeout(()=>{p(b)},g):p(b)},setProps(e){i=e},setToggle:(e,t)=>{let r=l.get(e);r&&(r.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>o}}(t,e,jr);br.set(t,n);let s=n.observe(r);return vr.forEach(e=>_r(e.content,e.options)),vr=[],()=>{s(),br.delete(t)}},setProps(e){var r;null==(r=br.get(t))||r.setProps(e)},getSnapshot(){var e;return null==(e=br.get(t))?void 0:e.getSnapshot()}}}function Er(e){return e&&(lr(e.toastId)||ir(e.toastId))?e.toastId:yr()}function Or(e,t){return _r(e,t),t.toastId}function Mr(e,t){return{...t,type:t&&t.type||e,toastId:Er(t)}}function Tr(e){return(t,r)=>Or(t,Mr(e,r))}function Pr(e,t){return Or(e,Mr("default",t))}Pr.loading=(e,t)=>Or(e,Mr("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Pr.promise=function(e,{pending:t,error:r,success:n},s){let a;t&&(a=lr(t)?Pr.loading(t,s):Pr.loading(t.render,{...s,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},i=(e,t,r)=>{if(null==t)return void Pr.dismiss(a);let n={type:e,...o,...s,data:r},i=lr(t)?{render:t}:t;return a?Pr.update(a,{...n,...i}):Pr(i.render,{...n,...i}),r},l=cr(e)?e():e;return l.then(e=>i("success",n,e)).catch(e=>i("error",r,e)),l},Pr.success=Tr("success"),Pr.info=Tr("info"),Pr.error=Tr("error"),Pr.warning=Tr("warning"),Pr.warn=Pr.warning,Pr.dark=(e,t)=>Or(e,Mr("default",{theme:"dark",...t})),Pr.dismiss=function(e){!function(e){if(Nr()){if(null==e||(e=>lr(e)||ir(e))(e))br.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=br.get(e.containerId);t?t.removeToast(e.id):br.forEach(t=>{t.removeToast(e.id)})}}else vr=vr.filter(t=>null!=e&&t.options.toastId!==e)}(e)},Pr.clearWaitingQueue=(e={})=>{br.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},Pr.isActive=kr,Pr.update=(e,t={})=>{let r=((e,{containerId:t})=>{var r;return null==(r=br.get(t||1))?void 0:r.toasts.get(e)})(e,t);if(r){let{props:n,content:s}=r,a={delay:100,...n,...t,toastId:t.toastId||e,updateId:yr()};a.toastId!==e&&(a.staleId=e);let o=a.render||s;delete a.render,Or(o,a)}},Pr.done=e=>{Pr.update(e,{progress:1})},Pr.onChange=function(e){return wr.add(e),()=>{wr.delete(e)}},Pr.play=e=>Cr(!0,e),Pr.pause=e=>Cr(!1,e);var Ar="undefined"!=typeof window?a.useLayoutEffect:a.useEffect,qr=({theme:e,type:t,isLoading:r,...n})=>a.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${t})`,...n}),zr={info:function(e){return a.createElement(qr,{...e},a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return a.createElement(qr,{...e},a.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return a.createElement(qr,{...e},a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return a.createElement(qr,{...e},a.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return a.createElement("div",{className:"Toastify__spinner"})}};var Dr=e=>{let{isRunning:t,preventExitTransition:r,toastRef:n,eventHandlers:s,playToast:o}=function(e){let[t,r]=(0,a.useState)(!1),[n,s]=(0,a.useState)(!1),o=(0,a.useRef)(null),i=(0,a.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:f}=e;function p(){r(!0)}function m(){r(!1)}function h(r){let n=o.current;if(i.canDrag&&n){i.didMove=!0,t&&m(),"x"===e.draggableDirection?i.delta=r.clientX-i.start:i.delta=r.clientY-i.start,i.start!==r.clientX&&(i.canCloseOnClick=!1);let s="x"===e.draggableDirection?`${i.delta}px, var(--y)`:`0, calc(${i.delta}px + var(--y))`;n.style.transform=`translate3d(${s},0)`,n.style.opacity=""+(1-Math.abs(i.delta/i.removalDistance))}}function g(){document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",g);let t=o.current;if(i.canDrag&&i.didMove&&t){if(i.canDrag=!1,Math.abs(i.delta)>i.removalDistance)return s(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=br.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:r}),(0,a.useEffect)(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",p),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",p),window.removeEventListener("blur",m)}},[e.pauseOnFocusLoss]);let x={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){i.didMove=!1,document.addEventListener("pointermove",h),document.addEventListener("pointerup",g);let r=o.current;i.canCloseOnClick=!0,i.canDrag=!0,r.style.transition="none","x"===e.draggableDirection?(i.start=t.clientX,i.removalDistance=r.offsetWidth*(e.draggablePercent/100)):(i.start=t.clientY,i.removalDistance=r.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:r,bottom:n,left:s,right:a}=o.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=s&&t.clientX<=a&&t.clientY>=r&&t.clientY<=n?m():p()}};return l&&c&&(x.onMouseEnter=m,e.stacked||(x.onMouseLeave=p)),f&&(x.onClick=e=>{u&&u(e),i.canCloseOnClick&&d(!0)}),{playToast:p,pauseToast:m,isRunning:t,preventExitTransition:n,toastRef:o,eventHandlers:x}}(e),{closeButton:i,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:f,closeToast:p,transition:m,position:h,className:g,style:x,progressClassName:y,updateId:b,role:v,progress:w,rtl:j,toastId:N,deleteToast:k,isIn:_,isLoading:C,closeOnClick:S,theme:E,ariaLabel:O}=e,M=or("Toastify__toast",`Toastify__toast-theme--${E}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":S}),T=cr(g)?g({rtl:j,position:h,type:u,defaultClassName:M}):or(M,g),P=function({theme:e,type:t,isLoading:r,icon:n}){let s=null,o={theme:e,type:t};return!1===n||(cr(n)?s=n({...o,isLoading:r}):(0,a.isValidElement)(n)?s=(0,a.cloneElement)(n,o):r?s=zr.spinner():(e=>e in zr)(t)&&(s=zr[t](o))),s}(e),A=!!w||!c,q={closeToast:p,type:u,theme:E},z=null;return!1===i||(z=cr(i)?i(q):(0,a.isValidElement)(i)?(0,a.cloneElement)(i,q):function({closeToast:e,theme:t,ariaLabel:r="close"}){return a.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:t=>{t.stopPropagation(),e(!0)},"aria-label":r},a.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(q)),a.createElement(m,{isIn:_,done:k,position:h,preventExitTransition:r,nodeRef:n,playToast:o},a.createElement("div",{id:N,tabIndex:0,onClick:d,"data-in":_,className:T,...s,style:x,ref:n,..._&&{role:v,"aria-label":O}},null!=P&&a.createElement("div",{className:or("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!C})},P),hr(l,e,!t),z,!e.customProgressBar&&a.createElement(gr,{...b&&!A?{key:`p-${b}`}:{},rtl:j,theme:E,delay:c,isRunning:t,isIn:_,closeToast:p,hide:f,type:u,className:y,controlledProgress:A,progress:w||0})))},Lr=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Ir=pr(Lr("bounce",!0)),Rr=(pr(Lr("slide",!0)),pr(Lr("zoom")),pr(Lr("flip")),{position:"top-right",transition:Ir,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function $r(e){let t={...Rr,...e},r=e.stacked,[n,s]=(0,a.useState)(!0),o=(0,a.useRef)(null),{getToastToRender:i,isToastActive:l,count:c}=function(e){var t;let{subscribe:r,getSnapshot:n,setProps:s}=(0,a.useRef)(Sr(e)).current;s(e);let o=null==(t=(0,a.useSyncExternalStore)(r,n,n))?void 0:t.slice();return{getToastToRender:function(t){if(!o)return[];let r=new Map;return e.newestOnTop&&o.reverse(),o.forEach(e=>{let{position:t}=e.props;r.has(t)||r.set(t,[]),r.get(t).push(e)}),Array.from(r,e=>t(e[0],e[1]))},isToastActive:kr,count:null==o?void 0:o.length}}(t),{className:d,style:u,rtl:f,containerId:p,hotKeys:m}=t;function h(e){let t=or("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":f});return cr(d)?d({position:e,rtl:f,defaultClassName:t}):or(t,dr(d))}function g(){r&&(s(!0),Pr.play())}return Ar(()=>{var e;if(r){let r=o.current.querySelectorAll('[data-in="true"]'),s=12,a=null==(e=t.position)?void 0:e.includes("top"),i=0,l=0;Array.from(r).reverse().forEach((e,t)=>{let r=e;r.classList.add("Toastify__toast--stacked"),t>0&&(r.dataset.collapsed=`${n}`),r.dataset.pos||(r.dataset.pos=a?"top":"bot");let o=i*(n?.2:1)+(n?0:s*t);r.style.setProperty("--y",`${a?o:-1*o}px`),r.style.setProperty("--g",`${s}`),r.style.setProperty("--s",""+(1-(n?l:0))),i+=r.offsetHeight,l+=.025})}},[n,c,r]),(0,a.useEffect)(()=>{function e(e){var t;let r=o.current;m(e)&&(null==(t=r.querySelector('[tabIndex="0"]'))||t.focus(),s(!1),Pr.pause()),"Escape"===e.key&&(document.activeElement===r||null!=r&&r.contains(document.activeElement))&&(s(!0),Pr.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[m]),a.createElement("section",{ref:o,className:"Toastify",id:p,onMouseEnter:()=>{r&&(s(!1),Pr.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},i((e,t)=>{let n=t.length?{...u}:{...u,pointerEvents:"none"};return a.createElement("div",{tabIndex:-1,className:h(e),"data-stacked":r,style:n,key:`c-${e}`},t.map(({content:e,props:t})=>a.createElement(Dr,{...t,stacked:r,collapseAll:g,isIn:l(t.toastId,t.containerId),key:`t-${t.key}`},e)))}))}var Fr=o(5236);const Br=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");return e},Ur=async(e,t={})=>{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":Br().nonce},credentials:"same-origin",...t},n=await fetch(e,r);if(!n.ok){const e=await n.json().catch(()=>({message:`HTTP error! status: ${n.status}`}));throw new Error(e.message||"Request failed")}const s=await n.text();if(!s||""===s.trim())return{success:!0,data:{}};try{return JSON.parse(s)}catch(e){throw console.error("JSON parse error. Response was:",s.substring(0,500)),new Error("Invalid JSON response from server")}},Hr={getSettings:async()=>{const e=`${Br().api_url}/quiz-extended/v1/settings`;try{return(await Ur(e,{method:"GET"})).data}catch(e){throw console.error("Error fetching settings:",e),e}},getScoreFormat:async()=>{const e=`${Br().api_url}/quiz-extended/v1/settings/score-format`;try{return(await Ur(e,{method:"GET"})).data.score_format}catch(e){return console.error("Error fetching score format:",e),"percentage"}},updateSettings:async e=>{const t=`${Br().api_url}/quiz-extended/v1/settings`;try{return(await Ur(t,{method:"POST",body:JSON.stringify(e)})).data}catch(e){throw console.error("Error updating settings:",e),e}},updateScoreFormat:async e=>Hr.updateSettings({score_format:e}),getTheme:async()=>{const e=`${Br().api_url}/quiz-extended/v1/settings/theme`;try{return await Ur(e,{method:"GET"})}catch(e){return console.error("Error fetching theme:",e),{success:!0,data:{theme:{light:{primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#ffffff",text:"#111827"},dark:{primary:"#60a5fa",secondary:"#a78bfa",accent:"#fbbf24",background:"#1f2937",text:"#f9fafb"}},is_dark_mode:!1}}}},updateTheme:async e=>Hr.updateSettings({theme:e}),updateCampusLogo:async e=>Hr.updateSettings({campus_logo:e}),updateCampusLogoDark:async e=>Hr.updateSettings({campus_logo_dark:e}),getEmailNotificationSettings:async()=>{const e=`${Br().api_url}/quiz-extended/v1/settings/email-notifications`;try{return(await Ur(e,{method:"GET"})).data}catch(e){throw console.error("Error fetching email notification settings:",e),e}},updateEmailNotificationSettings:async e=>{const t=`${Br().api_url}/quiz-extended/v1/settings/email-notifications`;try{return(await Ur(t,{method:"POST",body:JSON.stringify(e)})).data}catch(e){throw console.error("Error updating email notification settings:",e),e}},sendTestEmail:async()=>{const e=`${Br().api_url}/quiz-extended/v1/settings/email-notifications/test`;try{return(await Ur(e,{method:"POST"})).data}catch(e){throw console.error("Error sending test email:",e),e}},getAutoloadStatus:async()=>{const e=`${Br().api_url}/quiz-extended/v1/debug/autoload-status`;try{return await Ur(e,{method:"GET"})}catch(e){throw console.error("Error fetching autoload status:",e),e}},cleanupAutoloadOptions:async()=>{const e=`${Br().api_url}/quiz-extended/v1/debug/cleanup-autoload`;try{return await Ur(e,{method:"POST"})}catch(e){throw console.error("Error cleaning up autoload options:",e),e}}},Wr=Hr,Qr=window.ReactJSXRuntime,Vr=(0,a.createContext)(),Kr={light:{primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#f3f4f6",secondaryBackground:"#ffffff",text:"#111827",textPrimary:"#111827",textSecondary:"#6b7280",textColorContrast:"#ffffff",borderColor:"#3b82f6",hoverColor:"#2563eb"},dark:{primary:"#60a5fa",secondary:"#a78bfa",accent:"#fbbf24",background:"#1f2937",secondaryBackground:"#111827",text:"#f9fafb",textPrimary:"#f9fafb",textSecondary:"#9ca3af",textColorContrast:"#ffffff",borderColor:"#60a5fa",hoverColor:"#3b82f6"}},Yr=()=>{const e=(0,a.useContext)(Vr);if(!e)throw new Error("useTheme debe ser usado dentro de un ThemeProvider");return e},Gr=()=>{const e=window.qe_data||{};if(void 0!==e.isDarkMode)return e.isDarkMode;const t=document.documentElement,r=document.body,n=["admin-color-midnight","admin-color-coffee","admin-color-ectoplasm","admin-color-ocean","admin-color-modern"];for(const e of n)if(r.classList.contains(e))return!0;const s=["dark-mode","dark","is-dark","is-dark-theme","theme-dark","dark-theme","night-mode","night","darkmode","color-scheme-dark"];for(const e of s)if(t.classList.contains(e)||r.classList.contains(e))return!0;const a=["data-theme","data-color-scheme","data-mode","data-bs-theme"];for(const e of a){const n=t.getAttribute(e),s=r.getAttribute(e);if("dark"===n||"dark"===s)return!0}const o=["theme","color-scheme","dark-mode","darkMode","theme-mode","flavor","flavor-theme","flavor-mode","flavor-color-scheme"];for(const e of o){const t=localStorage.getItem(e);if("dark"===t||"true"===t||"1"===t)return!0}const i=getComputedStyle(t).getPropertyValue("color-scheme").trim();return!("dark"!==i&&!i.includes("dark"))||null},Xr=({children:e})=>{const[t,r]=(0,a.useState)((()=>{const e=(window.qe_data||{}).theme;return e&&e.light&&e.dark&&"object"==typeof e.light&&"object"==typeof e.dark?e:(console.warn("Invalid or missing theme in window.qe_data, using DEFAULT_THEME"),Kr)})()),[n,s]=(0,a.useState)((()=>{const e=localStorage.getItem("qe_dark_mode");if(null!==e)return"true"===e;const t=Gr();if(null!==t)return localStorage.setItem("qe_dark_mode",String(t)),t;if(window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;return localStorage.setItem("qe_dark_mode",String(e)),e}return!1})()),[o,i]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{null===localStorage.getItem("qe_dark_mode")&&s(e.matches)};return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}},[]),(0,a.useEffect)(()=>{l(t,n)},[t,n]);const l=(e,t)=>{e&&e.light&&e.dark||(console.error("Invalid theme data in applyThemeToDOM, using DEFAULT_THEME"),e=Kr);const r=document.documentElement,n=t?e.dark:e.light;if(!n||"object"!=typeof n)return void console.error("Invalid currentMode in applyThemeToDOM");r.style.setProperty("--qe-primary",n.primary||"#3b82f6"),r.style.setProperty("--qe-secondary",n.secondary||"#8b5cf6"),r.style.setProperty("--qe-accent",n.accent||"#f59e0b"),r.style.setProperty("--qe-background",n.background||"#f3f4f6"),r.style.setProperty("--qe-secondary-background",n.secondaryBackground||"#ffffff"),r.style.setProperty("--qe-text",n.text||"#111827"),r.style.setProperty("--qe-text-primary",n.textPrimary||n.text||"#111827"),r.style.setProperty("--qe-text-secondary",n.textSecondary||(t?"#9ca3af":"#6b7280")),r.style.setProperty("--qe-text-contrast",n.textColorContrast||"#ffffff"),r.style.setProperty("--qe-border-color",n.borderColor||n.primary||"#3b82f6");const s=Zr(n.primary||"#3b82f6"),a=Zr(n.secondary||"#8b5cf6"),o=Zr(n.accent||"#f59e0b");if(r.style.setProperty("--qe-primary-light",`rgba(${s}, 0.1)`),r.style.setProperty("--qe-primary-hover",Jr(n.primary||"#3b82f6",t?10:-10)),r.style.setProperty("--qe-secondary-light",`rgba(${a}, 0.1)`),r.style.setProperty("--qe-secondary-hover",Jr(n.secondary||"#8b5cf6",t?10:-10)),r.style.setProperty("--qe-accent-light",`rgba(${o}, 0.1)`),r.style.setProperty("--qe-accent-hover",Jr(n.accent||"#f59e0b",t?10:-10)),t){r.classList.add("qe-dark-mode"),r.style.setProperty("--qe-border","#374151"),r.style.setProperty("--qe-bg-card",n.secondaryBackground||"#1f2937"),r.style.setProperty("--qe-bg-hover","#374151");const e=Zr(n.primary||"#60a5fa");r.style.setProperty("--scrollbar-track","rgba(0, 0, 0, 0.2)"),r.style.setProperty("--scrollbar-thumb",`rgba(${e}, 0.4)`),r.style.setProperty("--scrollbar-thumb-hover",`rgba(${e}, 0.6)`),r.style.setProperty("--scrollbar-thumb-active",`rgba(${e}, 0.8)`)}else{r.classList.remove("qe-dark-mode"),r.style.setProperty("--qe-border","#e5e7eb"),r.style.setProperty("--qe-bg-card",n.secondaryBackground||"#ffffff"),r.style.setProperty("--qe-bg-hover","#f9fafb");const e=Zr(n.primary||"#3b82f6");r.style.setProperty("--scrollbar-track","rgba(0, 0, 0, 0.05)"),r.style.setProperty("--scrollbar-thumb",`rgba(${e}, 0.3)`),r.style.setProperty("--scrollbar-thumb-hover",`rgba(${e}, 0.5)`),r.style.setProperty("--scrollbar-thumb-active",`rgba(${e}, 0.7)`)}},c=(0,a.useCallback)(async e=>{try{return!!(await Hr.updateSettings({theme:e})).success&&(r(e),!0)}catch(e){return console.error("Error updating theme:",e),!1}},[]),d=(0,a.useCallback)(e=>{r(e)},[]),u=(0,a.useCallback)(()=>{console.log("toggleDarkMode called, current isDarkMode:",n),s(e=>{const t=!e;return console.log("Setting isDarkMode to:",t),localStorage.setItem("qe_dark_mode",String(t)),t})},[n]),f=(0,a.useCallback)(e=>{localStorage.setItem("qe_dark_mode",String(e)),s(e)},[]),p=(0,a.useCallback)(()=>{const e=Gr();return null!==e?(localStorage.setItem("qe_dark_mode",String(e)),localStorage.setItem("qe_wp_dark_mode",String(e)),s(e),e):n},[n]),m=(0,a.useCallback)(()=>{const e=localStorage.getItem("qe_dark_mode"),t=Gr();return null!==e&&null!==t&&"true"===e!==t},[]),h=(0,a.useCallback)((e,r="#000000")=>t&&t.light&&t.dark?(n?t.dark:t.light)[e]||r:(console.warn("Theme is invalid in getColor, using DEFAULT_THEME"),(n?Kr.dark:Kr.light)[e]||r),[t,n]),g=(0,a.useCallback)(()=>t&&t.light&&t.dark?n?t.dark:t.light:(console.warn("Theme is invalid in getCurrentColors, using DEFAULT_THEME"),n?Kr.dark:Kr.light),[t,n]),x=(0,a.useMemo)(()=>({theme:t,isDarkMode:n,loading:o,updateTheme:c,setThemePreview:d,toggleDarkMode:u,setDarkMode:f,syncWithWordPress:p,hasCustomPreference:m,getCurrentColors:g,getColor:h}),[t,n,o,c,d,u,f,p,m,g,h]);return(0,Qr.jsx)(Vr.Provider,{value:x,children:e})};function Zr(e){return`${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}`}function Jr(e,t){const r=parseInt(e.slice(1),16),n=Math.round(2.55*t),s=(r>>16)+n,a=(r>>8&255)+n,o=(255&r)+n;return"#"+(16777216+65536*(s<255?s<1?0:s:255)+256*(a<255?a<1?0:a:255)+(o<255?o<1?0:o:255)).toString(16).slice(1)}const en=({label:e,value:t,icon:r,iconColor:n="text-gray-500",bgColor:s="bg-gray-50"})=>(0,Qr.jsx)("div",{className:`${s} rounded-lg p-4 shadow-sm border border-gray-100`,children:(0,Qr.jsxs)("div",{className:"flex items-center",children:[r&&(0,Qr.jsx)("div",{className:"flex-shrink-0",children:(0,Qr.jsx)(r,{className:`h-6 w-6 ${n}`})}),(0,Qr.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-600 truncate",children:e}),(0,Qr.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:t})]})]})}),tn=({stats:e=[],className:t=""})=>{if(!e||0===e.length)return null;const r=`grid-cols-2 md:grid-cols-4 lg:grid-cols-${Math.min(e.length,6)}`;return(0,Qr.jsx)("div",{className:`grid ${r} gap-4 ${t}`,children:e.map((e,t)=>(0,Qr.jsx)(en,{label:e.label,value:e.value,icon:e.icon,iconColor:e.iconColor,bgColor:e.bgColor},t))})},rn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nn=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},sn=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),an=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var on={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ln=(0,a.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:o,iconNode:i,...l},c)=>(0,a.createElement)("svg",{ref:c,...on,width:t,height:t,stroke:e,strokeWidth:n?24*Number(r)/Number(t):r,className:sn("lucide",s),...!o&&!an(l)&&{"aria-hidden":"true"},...l},[...i.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]])),cn=(e,t)=>{const r=(0,a.forwardRef)(({className:r,...n},s)=>(0,a.createElement)(ln,{ref:s,iconNode:t,className:sn(`lucide-${rn(nn(e))}`,`lucide-${e}`,r),...n}));return r.displayName=nn(e),r},dn=cn("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),un={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},fn={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-indigo-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},pn=i().forwardRef(({children:e,variant:t="primary",size:r="md",type:n="button",className:s="",isLoading:a=!1,loadingText:o,iconLeft:i,iconRight:l,...c},d)=>{const{t:u}=k(),f=o||u("common.loading"),p=`inline-flex items-center justify-center font-semibold rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-75 disabled:cursor-not-allowed ${un[r]} ${fn[t]} ${s}`;return(0,Qr.jsx)("button",{ref:d,type:n,className:p,disabled:a||c.disabled,...c,children:a?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(dn,{className:"animate-spin h-4 w-4 "+(f?"mr-2":"")}),f]}):(0,Qr.jsxs)(Qr.Fragment,{children:[i&&(0,Qr.jsx)(i,{className:"h-4 w-4 mr-2"}),e,l&&(0,Qr.jsx)(l,{className:"h-4 w-4 ml-2"})]})})}),mn=pn,hn=({title:e,description:t,stats:r=[],primaryAction:n,secondaryAction:s,isLoading:a=!1,className:o=""})=>(0,Qr.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 ${o}`,children:[(0,Qr.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e}),t&&(0,Qr.jsx)("p",{className:"text-gray-600 mt-1",children:t})]}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[a&&(0,Qr.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,Qr.jsx)(dn,{className:"animate-spin h-4 w-4 mr-2"}),(0,Qr.jsx)("span",{children:"Updating..."})]}),s&&(0,Qr.jsx)(mn,{variant:"secondary",size:"md",onClick:s.onClick,disabled:s.isLoading||a,iconLeft:s.icon,children:s.text}),n&&(0,Qr.jsx)(mn,{variant:"primary",size:"md",onClick:n.onClick,isLoading:n.isLoading,iconLeft:n.icon,children:n.text})]})]}),r.length>0&&(0,Qr.jsx)(tn,{stats:r})]});var gn=o(9700);const xn=(e={})=>{const{search:t="",status:r=null,type:n=null,autoFetch:s=!0,enablePolling:o=!0,pollingInterval:i=3e4}=e,[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[f,p]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[y,b]=(0,a.useState)({currentPage:1,totalPages:1,total:0,perPage:20,hasMore:!1}),v=(0,a.useRef)(!0),w=(0,a.useRef)({search:t,status:r,type:n}),j=(0,a.useRef)(""),N=(0,a.useRef)(null),k=(0,a.useRef)(0),_=(0,a.useRef)(!0);(0,a.useEffect)(()=>{w.current={search:t,status:r,type:n}},[t,r,n]),(0,a.useEffect)(()=>{const e=()=>{_.current=!document.hidden,!document.hidden&&o&&(console.log(" Page visible again, checking for new messages..."),C())};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[o]),(0,a.useEffect)(()=>()=>{v.current=!1,N.current&&clearTimeout(N.current)},[]);const C=(0,a.useCallback)(async()=>{if(v.current&&_.current)try{const e=(0,Fr.getApiConfig)(),t=w.current,r=new URLSearchParams({page:"1",per_page:"1",orderby:"created_at",order:"desc"});t.status&&r.append("status",t.status),t.type&&r.append("type",t.type);const n=`${e.endpoints.custom_api}/messages?${r}`;console.log(" Checking for new messages...");const s=await(0,gn.qb)(n);if(!v.current)return;const a=s.headers["X-WP-Total"],o=a?parseInt(a,10):0;if(k.current>0&&o>k.current){const e=o-k.current;console.log(` ${e} new message(s) detected!`),x(!0),"Notification"in window&&"granted"===Notification.permission&&new Notification("Quiz Extended",{body:`You have ${e} new message(s)`,icon:"/wp-content/plugins/quiz-extended/assets/icon.png"})}k.current=o}catch(e){console.error(" Error checking for new messages:",e)}},[]),S=(0,a.useCallback)(()=>{if(!o||N.current)return;console.log(` Starting polling every ${i/1e3}s`);const e=()=>{C(),N.current=setTimeout(e,i)};N.current=setTimeout(e,i)},[o,i,C]),E=(0,a.useCallback)(()=>{N.current&&(console.log(" Stopping polling"),clearTimeout(N.current),N.current=null)},[]),O=(0,a.useCallback)(async(e=!1)=>{if(!v.current)return;const t=e?1:y.currentPage+1;if(e||y.hasMore)try{e&&(u(!0),p(null),c([]),x(!1));const r=(0,Fr.getApiConfig)(),n=w.current,s=new URLSearchParams({page:t.toString(),per_page:"20",orderby:"created_at",order:"desc"});n.search&&s.append("search",n.search),n.status&&s.append("status",n.status),n.type&&s.append("type",n.type);const a=`${r.endpoints.custom_api}/messages?${s}`,o=`${a}-${t}-${e}`;if(o===j.current&&!e)return void console.log(" Duplicate request prevented");j.current=o,console.log(" Fetching messages:",a);const i=await(0,gn.qb)(a);if(!v.current)return;const l=i.data?.data||[],d=i.headers["X-WP-Total"],f=i.headers["X-WP-TotalPages"],m=d?parseInt(d,10):l.length;k.current=m;const h={currentPage:t,totalPages:f?parseInt(f,10):1,total:m,perPage:20,hasMore:t<(f?parseInt(f,10):1)};b(h),c(t=>e?l:[...t,...l]),console.log(` Loaded ${l.length} messages (Page ${t})`)}catch(e){console.error(" Error fetching messages:",e),v.current&&p(e.message||"Failed to load messages")}finally{v.current&&u(!1)}else console.log(" No more messages to load")},[y]),M=(0,a.useCallback)(async(e,t)=>{if(v.current){h(!0);try{const r=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/${e}`,n={status:t};console.log(` Updating message ${e}:`,n);const s=await(0,gn.qb)(r,{method:"PUT",body:JSON.stringify(n)});if(!v.current)return;const a=s.data;return console.log(" Updating message ID:",e,"Type:",typeof e),console.log(" API Response:",a),console.log(" Updated message ID:",a.id,"Type:",typeof a.id),console.log(" Updated status:",a.status),c(t=>{console.log(" Current messages:",t.map(e=>({id:e.id,idType:typeof e.id,status:e.status})));const r=t.map(t=>{if(t.id==e){const r={...t,...a};return console.log(" Merging message:",{msgId:t.id,msgIdType:typeof t.id,updateId:e,updateIdType:typeof e,oldStatus:t.status,newStatus:a.status,mergedStatus:r.status}),r}return t});return console.log(" Updated messages array:",r.map(e=>({id:e.id,status:e.status}))),r}),window.jQuery&&window.jQuery(document).trigger("qe-message-status-changed"),console.log(" Message updated successfully"),a}catch(e){throw console.error(" Error updating message:",e),e}finally{v.current&&h(!1)}}},[]),T=(0,a.useCallback)(async e=>{if(v.current){h(!0);try{const t=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/${e}`;if(console.log(` Deleting message ${e}`),await(0,gn.qb)(t,{method:"DELETE"}),!v.current)return;c(t=>t.filter(t=>t.id!==e)),b(e=>({...e,total:e.total-1})),console.log(" Message deleted successfully")}catch(e){throw console.error(" Error deleting message:",e),e}finally{v.current&&h(!1)}}},[]),P=(0,a.useCallback)(async()=>{if("Notification"in window&&"default"===Notification.permission){const e=await Notification.requestPermission();return console.log(" Notification permission:",e),"granted"===e}return"granted"===Notification.permission},[]),A=(0,a.useMemo)(()=>({totalMessages:y.total,unreadMessages:l.filter(e=>"unread"===e.status).length,feedbackMessages:l.filter(e=>"question_feedback"===e.type).length,challengeMessages:l.filter(e=>"question_challenge"===e.type).length}),[l,y.total]);return(0,a.useEffect)(()=>{s&&O(!0)},[t,r,n]),(0,a.useEffect)(()=>(o?S():E(),()=>E()),[o,S,E]),{messages:l,loading:d,error:f,pagination:{...y,total:y.total},computed:A,updating:m,hasNewMessages:g,fetchMessages:O,updateMessageStatus:M,deleteMessage:T,checkForNewMessages:C,startPolling:S,stopPolling:E,requestNotificationPermission:P,sendMessage:async()=>console.log("sendMessage not implemented in this hook yet")}},yn=(e={})=>{const{role:t=null,courseId:r=null,enrollmentStatus:n=null,search:s="",autoFetch:i=!0,initialFilters:l={},debounceMs:c=500}=e,[d,u]=(0,a.useState)([]),[f,p]=(0,a.useState)(!0),[m,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[y,b]=(0,a.useState)({currentPage:1,totalPages:1,total:0,perPage:20}),[v,w]=(0,a.useState)(!1),[j,N]=(0,a.useState)({search:s||"",role:t,courseId:r,enrollmentStatus:n,orderby:"registered_date",order:"desc",...l}),k=(0,a.useRef)(j),_=(0,a.useRef)(e),C=(0,a.useRef)(null),S=(0,a.useRef)(!0),E=(0,a.useRef)("");(0,a.useEffect)(()=>{k.current=j},[j]),(0,a.useEffect)(()=>{_.current=e},[e]),(0,a.useEffect)(()=>()=>{S.current=!1,C.current&&clearTimeout(C.current)},[]);const O=async(e,t={})=>{try{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":(0,Fr.getApiConfig)().nonce},credentials:"same-origin",...t},n=await fetch(e,r);if(!n.ok){const e=await n.text();throw new Error(`API Error ${n.status}: ${n.statusText} - ${e}`)}return n}catch(e){throw console.error("API Request Error:",e),e}},M=(0,a.useCallback)(async(e={})=>{const{reset:t=!1,page:r=1,additionalFilters:n={}}=e;try{t&&(p(!0),x(null));const e=(0,Fr.getApiConfig)(),s=k.current;console.log(" Current API Config:",e),console.log(" Current Filters:",s);const a=new URLSearchParams({page:r.toString(),per_page:"20",orderby:s.orderBy||"registered_date",order:s.order||"desc",context:"edit"});s.search&&a.append("search",s.search),s.role&&a.append("roles",s.role),Object.entries(n).forEach(([e,t])=>{null!=t&&""!==t&&a.append(e,t)});const o=`${e.endpoints.users}?${a}`,i=`${o}-${r}-${t}`;if(i===E.current)return void console.log(" Duplicate user request prevented:",o);E.current=i,console.log(" Fetching users from URL:",o);const l=await O(o);if(!l.ok)throw new Error(`HTTP ${l.status}: ${l.statusText}`);const c=await l.json();if(console.log(" Raw user data received:",c),!S.current)return;const d=l.headers.get("X-WP-Total"),f=l.headers.get("X-WP-TotalPages");console.log(" Pagination headers:",{totalHeader:d,totalPagesHeader:f});const m={currentPage:r,totalPages:f?parseInt(f,10):1,total:d?parseInt(d,10):c.length,perPage:20};b(m),w(r<m.totalPages);const h=c.map(e=>({id:e.id,name:e.name||`${e.first_name} ${e.last_name}`.trim()||e.username,username:e.username,email:e.email,roles:e.roles||["subscriber"],avatar_urls:e.avatar_urls||{},date_registered:e.registered_date||e.registered||(new Date).toISOString(),first_name:e.first_name||"",last_name:e.last_name||"",description:e.description||"",url:e.url||"",enrollmentData:{isEnrolled:!1,progress:0,enrollmentDate:null,lastActivity:null}}));let g=h;s.courseId&&(g=await T(h,s.courseId)),u(t||1===r?g:e=>{const t=new Set(e.map(e=>e.id)),r=g.filter(e=>!t.has(e.id));return[...e,...r]}),console.log(" Users processed and loaded:",g.length)}catch(e){console.error(" Error fetching users:",e),S.current&&(x(e.message||"Failed to fetch users"),(t||1===r)&&(u([]),b({currentPage:1,totalPages:1,total:0,perPage:20}),w(!1)))}finally{S.current&&p(!1)}},[]),T=async(e,t)=>{console.log(" Enriching users with enrollment data for course:",t);try{const{getUserEnrollments:r}=await o.e(334).then(o.bind(o,4953)),n=e.map(async e=>{try{const n=await r(e.id),s=(Array.isArray(n)?n:[]).find(e=>parseInt(e.course_id)===parseInt(t));return{...e,enrollmentData:{isEnrolled:!!s,enrollmentDate:s?.enrollment_date||null,progress:s?.progress||0,lastActivity:s?.last_activity||null}}}catch(t){return console.error(` Error fetching enrollments for user ${e.id}:`,t),{...e,enrollmentData:{isEnrolled:!1,enrollmentDate:null,progress:0,lastActivity:null}}}}),s=await Promise.all(n);return console.log(" Users enriched with enrollment data:",s.length),s}catch(t){return console.error(" Error enriching users with enrollment data:",t),e.map(e=>({...e,enrollmentData:{isEnrolled:!1,enrollmentDate:null,progress:0,lastActivity:null}}))}},P=(0,a.useCallback)((e={})=>{C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{S.current&&M({reset:!0,...e})},c)},[M,c]);(0,a.useEffect)(()=>{i&&(console.log(" Initial user load"),M({reset:!0}))},[]),(0,a.useEffect)(()=>{N(e=>{const a={...e,search:s||"",role:t,courseId:r,enrollmentStatus:n};return JSON.stringify(a)!==JSON.stringify(e)?a:e})},[s,t,r,n]),(0,a.useEffect)(()=>{i&&(console.log(" User filters changed, debouncing fetch..."),P())},[j,P,i]);const A=(0,a.useCallback)(async(e,t)=>{try{h(!0),x(null);const{enrollUserInCourse:r}=await o.e(334).then(o.bind(o,4953));console.log(" Enrolling user in course:",{userId:e,courseId:t});const n=await r(parseInt(e),parseInt(t));if(n&&!1===n.success)throw new Error(n.error||"Failed to enroll user");return u(t=>t.map(t=>t.id===e?{...t,enrollmentData:{...t.enrollmentData,isEnrolled:!0,enrollmentDate:n.data?.enrollment_date||(new Date).toISOString(),progress:n.data?.progress||0}}:t)),console.log(" User enrolled successfully"),n}catch(e){throw console.error(" Error enrolling user:",e),x(e.message||"Failed to enroll user"),e}finally{h(!1)}},[]),q=(0,a.useCallback)(async(e,t)=>{try{h(!0),x(null);const{unenrollUserFromCourse:r}=await o.e(334).then(o.bind(o,4953));console.log(" Unenrolling user from course:",{userId:e,courseId:t});const n=await r(parseInt(e),parseInt(t));if(n&&!1===n.success)throw new Error(n.error||"Failed to unenroll user");return u(t=>t.map(t=>t.id===e?{...t,enrollmentData:{...t.enrollmentData,isEnrolled:!1,enrollmentDate:null,progress:0}}:t)),console.log(" User unenrolled successfully"),n}catch(e){throw console.error(" Error unenrolling user:",e),x(e.message||"Failed to unenroll user"),e}finally{h(!1)}},[]),z=(0,a.useCallback)(async e=>{try{h(!0),x(null);const t=(0,Fr.getApiConfig)();let r,n;console.log(" Fetching single user:",e);try{if(r=await O(`${t.endpoints.users}/${e}?context=edit`),!r.ok&&(401===r.status||403===r.status))throw console.warn(" Edit context failed, trying without context..."),new Error("Context edit not allowed");n=await r.json(),console.log(" Single user data received (edit context):",n)}catch(s){if(console.warn(" Falling back to regular context:",s.message),r=await O(`${t.endpoints.users}/${e}`),!r.ok)throw 404===r.status?new Error(`User with ID ${e} not found`):401===r.status?new Error(`Unauthorized access to user ${e}`):new Error(`HTTP ${r.status}: ${r.statusText}`);n=await r.json(),console.log(" Single user data received (regular context):",n)}console.log(" Single user data received:",n);const s={id:n.id,name:n.name||`${n.first_name} ${n.last_name}`.trim()||n.username,username:n.username,email:n.email,roles:n.roles||["subscriber"],avatar_urls:n.avatar_urls||{},date_registered:n.registered_date||n.registered||(new Date).toISOString(),first_name:n.first_name||"",last_name:n.last_name||"",description:n.description||"",url:n.url||"",nickname:n.nickname||"",meta:n.meta||{},enrollmentData:{isEnrolled:!1,progress:Math.floor(100*Math.random()),enrollmentDate:null,lastActivity:Math.random()>.5?new Date(Date.now()-7*Math.random()*24*60*60*1e3).toISOString():null}};return console.log(" User processed:",s),s}catch(e){throw console.error(" Error fetching single user:",e),x(e.message||"Failed to fetch user"),e}finally{h(!1)}},[]),D=(0,a.useCallback)(async(e,t)=>{try{h(!0),x(null);const r=(0,Fr.getApiConfig)();console.log(" Updating user role:",{userId:e,newRole:t});const n=await O(`${r.endpoints.users}/${e}`,{method:"POST",body:JSON.stringify({roles:[t]})}),s=await n.json();return u(t=>t.map(t=>t.id===e?{...t,roles:s.roles}:t)),console.log(" User role updated successfully"),s}catch(e){throw console.error(" Error updating user role:",e),x(e.message||"Failed to update user role"),e}finally{h(!1)}},[]),L=(0,a.useCallback)(()=>{v&&!f&&M({page:y.currentPage+1,reset:!1})},[v,f,y.currentPage,M]),I=(0,a.useCallback)(()=>{E.current="",M({reset:!0})},[M]),R=(0,a.useMemo)(()=>({totalUsers:d.length,usersByRole:d.reduce((e,t)=>{const r=t.roles?.[0]||"subscriber";return e[r]=(e[r]||0)+1,e},{}),enrolledUsers:d.filter(e=>e.enrollmentData?.isEnrolled).length,unenrolledUsers:d.filter(e=>!e.enrollmentData?.isEnrolled).length,activeUsers:d.filter(e=>{if(!e.enrollmentData?.lastActivity)return!1;const t=new Date;return t.setDate(t.getDate()-30),new Date(e.enrollmentData.lastActivity)>t}).length,averageProgress:d.length>0?Math.round(d.reduce((e,t)=>e+(t.enrollmentData?.progress||0),0)/d.length):0,recentRegistrations:d.filter(e=>{const t=new Date;return t.setDate(t.getDate()-7),new Date(e.date_registered||e.registered)>t}).length}),[d]),$=(0,a.useCallback)(async(e,t="all")=>{try{h(!0),x(null),console.log(" Fetching user progress:",{userId:e,timeframe:t});const r={overall:{averageProgress:50+Math.floor(50*Math.random()),completedCourses:Math.floor(8*Math.random()),totalCourses:5+Math.floor(10*Math.random()),totalTimeSpent:300+Math.floor(2e3*Math.random()),lessonsCompleted:15+Math.floor(50*Math.random()),totalLessons:30+Math.floor(70*Math.random()),certificatesEarned:Math.floor(5*Math.random())},courses:[{id:1,title:"WordPress Development Fundamentals",progress:70+Math.floor(30*Math.random()),timeSpent:200+Math.floor(300*Math.random()),lessonsCompleted:8+Math.floor(7*Math.random()),totalLessons:15,lastActivity:new Date(Date.now()-24*Math.floor(7*Math.random())*60*60*1e3).toISOString(),completed:Math.random()>.4},{id:2,title:"Advanced PHP Patterns",progress:40+Math.floor(60*Math.random()),timeSpent:150+Math.floor(400*Math.random()),lessonsCompleted:5+Math.floor(10*Math.random()),totalLessons:20,lastActivity:new Date(Date.now()-24*Math.floor(14*Math.random())*60*60*1e3).toISOString(),completed:Math.random()>.6},{id:3,title:"React for WordPress",progress:30+Math.floor(70*Math.random()),timeSpent:100+Math.floor(200*Math.random()),lessonsCompleted:3+Math.floor(12*Math.random()),totalLessons:18,lastActivity:new Date(Date.now()-24*Math.floor(21*Math.random())*60*60*1e3).toISOString(),completed:Math.random()>.7}],achievements:[{id:1,title:"First Steps",description:"Completed your first lesson",earnedDate:new Date(Date.now()-24*Math.floor(60*Math.random())*60*60*1e3).toISOString(),icon:"trophy"},{id:2,title:"Dedicated Learner",description:"Studied for 5 consecutive days",earnedDate:new Date(Date.now()-24*Math.floor(30*Math.random())*60*60*1e3).toISOString(),icon:"calendar"},{id:3,title:"Course Completion",description:"Completed your first course",earnedDate:new Date(Date.now()-24*Math.floor(45*Math.random())*60*60*1e3).toISOString(),icon:"award"}],weeklyActivity:Array.from({length:7},(e,t)=>({date:new Date(Date.now()-24*(6-t)*60*60*1e3).toISOString().split("T")[0],minutes:Math.floor(180*Math.random())}))};return console.log(" User progress data generated:",r),r}catch(e){throw console.error(" Error fetching user progress:",e),x(e.message||"Failed to fetch user progress"),e}finally{h(!1)}},[]);return{users:d,loading:f,updating:m,error:g,pagination:y,hasMore:v,filters:j,computed:R,setFilters:N,getUser:z,getUserProgress:$,enrollUserInCourse:A,unenrollUserFromCourse:q,updateUserRole:D,refreshUsers:I,loadMoreUsers:L,fetchUsers:P}},bn=yn,vn=cn("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]),wn=cn("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),jn=cn("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Nn=cn("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),kn=cn("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),Cn=cn("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Sn=cn("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),En=cn("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),On=cn("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),Mn=cn("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),Tn=cn("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Pn=cn("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),An=({isOpen:e,onClose:t,onMessageSent:r})=>{const{getColor:n,isDarkMode:s}=Yr(),o={primary:n("primary","#1e3a5f"),accent:n("accent","#f59e0b"),textPrimary:s?n("textPrimary","#f9fafb"):"#1f2937",textSecondary:s?n("textSecondary","#9ca3af"):"#6b7280",textMuted:s?"#6b7280":"#9ca3af",background:s?n("background","#111827"):"#ffffff",backgroundSecondary:s?n("secondaryBackground","#1f2937"):"#f9fafb",border:s?"rgba(255,255,255,0.1)":"#e5e7eb",cardBg:s?n("secondaryBackground","#1f2937"):"#ffffff"},[i,l]=(0,a.useState)("all"),[c,d]=(0,a.useState)([]),[u,f]=(0,a.useState)(""),[p,m]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[x,y]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[w,j]=(0,a.useState)(""),[N,k]=(0,a.useState)("announcement"),[_,C]=(0,a.useState)(!1),[S,E]=(0,a.useState)(!1),[O,M]=(0,a.useState)(""),[T,P]=(0,a.useState)(!1),[A,q]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e&&"specific"===i&&z(),e&&"course"===i&&D()},[e,i]);const z=async()=>{P(!0);try{const e=`${(0,Fr.getApiConfig)().endpoints.users}?per_page=100`,t=await(0,gn.qb)(e);m(t.data||[])}catch(e){console.error("Error fetching users:",e),M("Error al cargar usuarios")}finally{P(!1)}},D=async()=>{q(!0);try{const e=`${(0,Fr.getApiConfig)().endpoints.courses}?per_page=100`,t=await(0,gn.qb)(e);g(t.data||[])}catch(e){console.error("Error fetching courses:",e),M("Error al cargar cursos")}finally{q(!1)}},L=async e=>{if(e.preventDefault(),b.trim()&&w.trim())if("specific"!==i||0!==c.length)if("course"!==i||u){C(!0),M("");try{const e=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/send`;let n;n="all"===i?["all"]:"course"===i?[`course:${u}`]:c,await(0,gn.qb)(e,{method:"POST",body:JSON.stringify({recipient_ids:n,subject:b,message:w,type:N})}),E(!0),setTimeout(()=>{I(),r&&r(),t()},2e3)}catch(e){console.error("Error sending message:",e);let t="Error al enviar el mensaje. Por favor, intntalo de nuevo.";e.message?t=e.message:e.data?.message&&(t=e.data.message),M(t)}finally{C(!1)}}else M("Selecciona un curso");else M("Selecciona al menos un usuario");else M("Asunto y mensaje son obligatorios")},I=()=>{l("all"),d([]),f(""),v(""),j(""),k("announcement"),E(!1),M(""),y("")},R=p.filter(e=>e.name.toLowerCase().includes(x.toLowerCase())||e.email.toLowerCase().includes(x.toLowerCase())),$=[{value:"announcement",label:"Anuncio",icon:vn,color:"blue"},{value:"notification",label:"Notificacin",icon:wn,color:"amber"},{value:"alert",label:"Alerta",icon:jn,color:"red"}],F=[{value:"all",label:"Todos",sublabel:"usuarios",icon:Nn},{value:"course",label:"Por curso",sublabel:"especfico",icon:kn},{value:"specific",label:"Usuarios",sublabel:"especficos",icon:Cn}];return e?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:t}),(0,Qr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4 pointer-events-none overflow-y-auto",children:(0,Qr.jsxs)("div",{className:"pointer-events-auto w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] flex flex-col rounded-xl sm:rounded-2xl shadow-2xl overflow-hidden my-auto",style:{backgroundColor:o.background,border:`2px solid ${s?o.accent:o.primary}`},children:[(0,Qr.jsxs)("div",{className:"px-4 py-3 sm:px-6 sm:py-5 flex items-center justify-between flex-shrink-0",style:{backgroundColor:s?o.backgroundSecondary:o.primary},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,Qr.jsx)("div",{className:"p-1.5 sm:p-2 rounded-lg sm:rounded-xl bg-white/20",children:(0,Qr.jsx)(Sn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h2",{className:"text-base sm:text-xl font-bold text-white",children:"Nuevo Mensaje"}),(0,Qr.jsx)("p",{className:"text-xs sm:text-sm text-white/80 hidden sm:block",children:"Comuncate con tus estudiantes"})]})]}),(0,Qr.jsx)("button",{onClick:t,className:"p-1.5 sm:p-2 rounded-lg text-white/80 hover:text-white hover:bg-white/10 transition-colors",children:(0,Qr.jsx)(En,{className:"w-5 h-5"})})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",style:{backgroundColor:o.background},children:S?(0,Qr.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,Qr.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(16, 185, 129, 0.1)"},children:(0,Qr.jsx)(On,{className:"w-10 h-10 text-emerald-500"})}),(0,Qr.jsx)("h3",{className:"text-xl font-bold mb-2",style:{color:o.textPrimary},children:"Mensaje Enviado!"}),(0,Qr.jsx)("p",{style:{color:o.textSecondary},children:"Tu mensaje ha sido enviado correctamente"})]}):(0,Qr.jsxs)("form",{onSubmit:L,className:"space-y-4 sm:space-y-5",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold mb-2 sm:mb-3",style:{color:o.textPrimary},children:"Destinatarios"}),(0,Qr.jsx)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:F.map(e=>{const t=e.icon,r=i===e.value;return(0,Qr.jsxs)("button",{type:"button",onClick:()=>l(e.value),className:"p-2 sm:p-4 rounded-lg sm:rounded-xl border-2 transition-all duration-200 flex flex-col items-center gap-1 sm:gap-2",style:{borderColor:r?o.accent:o.border,backgroundColor:r?s?"rgba(245, 158, 11, 0.1)":"#fef3c7":o.background},children:[(0,Qr.jsx)("div",{className:"p-1.5 sm:p-2 rounded-md sm:rounded-lg",style:{backgroundColor:r?o.accent:s?"rgba(255,255,255,0.1)":"#f3f4f6",color:r?"#ffffff":o.textSecondary},children:(0,Qr.jsx)(t,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("span",{className:"block text-xs sm:text-sm font-medium",style:{color:r?o.accent:o.textPrimary},children:e.label}),(0,Qr.jsx)("span",{className:"text-[10px] sm:text-xs hidden sm:block",style:{color:o.textMuted},children:e.sublabel})]})]},e.value)})})]}),"course"===i&&(0,Qr.jsxs)("div",{className:"p-3 sm:p-4 rounded-lg sm:rounded-xl",style:{backgroundColor:o.backgroundSecondary},children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:o.textPrimary},children:"Seleccionar curso"}),A?(0,Qr.jsxs)("div",{className:"flex items-center justify-center py-3 sm:py-4 gap-2",style:{color:o.textSecondary},children:[(0,Qr.jsx)(Mn,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}),(0,Qr.jsx)("span",{className:"text-sm",children:"Cargando cursos..."})]}):(0,Qr.jsxs)("select",{value:u,onChange:e=>f(e.target.value),className:"w-full px-3 py-2.5 sm:px-4 sm:py-3 rounded-lg text-sm focus:outline-none focus:ring-2",style:{backgroundColor:o.background,border:`1px solid ${o.border}`,color:o.textPrimary},children:[(0,Qr.jsx)("option",{value:"",children:"Selecciona un curso..."}),h.map(e=>(0,Qr.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]})]}),"specific"===i&&(0,Qr.jsxs)("div",{className:"p-3 sm:p-4 rounded-lg sm:rounded-xl",style:{backgroundColor:o.backgroundSecondary},children:[(0,Qr.jsxs)("label",{className:"block text-sm font-medium mb-2",style:{color:o.textPrimary},children:["Seleccionar usuarios",c.length>0&&(0,Qr.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:o.accent},children:c.length})]}),(0,Qr.jsxs)("div",{className:"relative mb-2 sm:mb-3",children:[(0,Qr.jsx)(Tn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:o.textMuted}}),(0,Qr.jsx)("input",{type:"text",value:x,onChange:e=>y(e.target.value),placeholder:"Buscar usuarios...",className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-2.5 rounded-lg text-sm focus:outline-none focus:ring-2",style:{backgroundColor:o.background,border:`1px solid ${o.border}`,color:o.textPrimary}})]}),(0,Qr.jsx)("div",{className:"rounded-lg max-h-36 sm:max-h-48 overflow-y-auto",style:{border:`1px solid ${o.border}`},children:T?(0,Qr.jsxs)("div",{className:"p-4 text-center",style:{color:o.textSecondary},children:[(0,Qr.jsx)(Mn,{className:"w-5 h-5 animate-spin inline mr-2"}),"Cargando usuarios..."]}):0===R.length?(0,Qr.jsx)("div",{className:"p-4 text-center",style:{color:o.textSecondary},children:"No se encontraron usuarios"}):R.map((e,t)=>{const r=c.includes(e.id);return(0,Qr.jsxs)("label",{className:"flex items-center p-2.5 sm:p-3 cursor-pointer transition-colors",style:{borderBottom:t<R.length-1?`1px solid ${o.border}`:"none",backgroundColor:r?s?"rgba(245, 158, 11, 0.1)":"#fef3c7":"transparent"},children:[(0,Qr.jsx)("input",{type:"checkbox",checked:r,onChange:()=>{return t=e.id,void d(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 rounded flex-shrink-0",style:{accentColor:o.accent}}),(0,Qr.jsxs)("div",{className:"ml-2 sm:ml-3 flex-1 min-w-0",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium truncate",style:{color:o.textPrimary},children:e.name}),(0,Qr.jsx)("p",{className:"text-xs truncate hidden sm:block",style:{color:o.textSecondary},children:e.email})]}),r&&(0,Qr.jsx)(On,{className:"w-4 h-4 flex-shrink-0 hidden sm:block",style:{color:o.accent}})]},e.id)})})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold mb-2 sm:mb-3",style:{color:o.textPrimary},children:"Tipo de mensaje"}),(0,Qr.jsx)("div",{className:"flex gap-1.5 sm:gap-2",children:$.map(e=>{const t=e.icon,r=N===e.value,n={blue:{bg:s?"rgba(59, 130, 246, 0.2)":"#dbeafe",text:"#3b82f6",border:"#3b82f6"},amber:{bg:s?"rgba(245, 158, 11, 0.2)":"#fef3c7",text:"#f59e0b",border:"#f59e0b"},red:{bg:s?"rgba(239, 68, 68, 0.2)":"#fee2e2",text:"#ef4444",border:"#ef4444"}}[e.color];return(0,Qr.jsxs)("button",{type:"button",onClick:()=>k(e.value),className:"flex-1 px-2 py-2 sm:px-4 sm:py-3 rounded-lg border-2 flex items-center justify-center gap-1 sm:gap-2 transition-all",style:{borderColor:r?n.border:o.border,backgroundColor:r?n.bg:"transparent",color:r?n.text:o.textSecondary},children:[(0,Qr.jsx)(t,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:e.label})]},e.value)})})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"block text-sm font-semibold mb-1.5 sm:mb-2",style:{color:o.textPrimary},children:["Asunto ",(0,Qr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qr.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"Escribe el asunto del mensaje...",required:!0,maxLength:200,className:"w-full px-3 py-2.5 sm:px-4 sm:py-3 rounded-lg text-sm focus:outline-none focus:ring-2",style:{backgroundColor:o.background,border:`1px solid ${o.border}`,color:o.textPrimary}})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"block text-sm font-semibold mb-1.5 sm:mb-2",style:{color:o.textPrimary},children:["Mensaje ",(0,Qr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qr.jsx)("textarea",{value:w,onChange:e=>j(e.target.value),placeholder:"Escribe tu mensaje aqu...",required:!0,maxLength:5e3,rows:4,className:"w-full px-3 py-2.5 sm:px-4 sm:py-3 rounded-lg text-sm focus:outline-none focus:ring-2 resize-none",style:{backgroundColor:o.background,border:`1px solid ${o.border}`,color:o.textPrimary}}),(0,Qr.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,Qr.jsx)("span",{className:"text-xs",style:{color:o.textSecondary},children:"Soporta texto plano"}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:w.length>4500?"#f59e0b":o.textSecondary},children:[w.length,"/5000"]})]})]}),O&&(0,Qr.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg",style:{backgroundColor:s?"rgba(239, 68, 68, 0.15)":"#fee2e2",border:"1px solid "+(s?"rgba(239, 68, 68, 0.3)":"#fecaca")},children:[(0,Qr.jsx)(Pn,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,Qr.jsx)("p",{className:"text-sm text-red-500",children:O})]})]})}),!S&&(0,Qr.jsxs)("div",{className:"px-4 py-3 sm:px-6 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-0 border-t flex-shrink-0",style:{backgroundColor:o.backgroundSecondary,borderColor:o.border},children:[(0,Qr.jsxs)("div",{className:"text-xs hidden sm:block",style:{color:o.textSecondary},children:["all"===i&&"Se enviar a todos los usuarios","course"===i&&u&&"Se enviar a los usuarios del curso","specific"===i&&c.length>0&&`Se enviar a ${c.length} usuario(s)`]}),(0,Qr.jsxs)("div",{className:"flex gap-2 sm:gap-3",children:[(0,Qr.jsx)("button",{type:"button",onClick:t,disabled:_,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",style:{border:`1px solid ${o.border}`,color:o.textPrimary,backgroundColor:"transparent"},children:"Cancelar"}),(0,Qr.jsx)("button",{onClick:L,disabled:_||!b.trim()||!w.trim(),className:"flex-1 sm:flex-none px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg text-sm font-medium text-white flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:o.accent},children:_?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Mn,{className:"w-4 h-4 animate-spin"}),(0,Qr.jsx)("span",{className:"hidden sm:inline",children:"Enviando..."}),(0,Qr.jsx)("span",{className:"sm:hidden",children:"..."})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Sn,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{children:"Enviar"})]})})]})]})]})})]}):null},qn=({message:e,onSelect:t,isActive:r})=>(0,Qr.jsxs)("div",{className:`p-3 cursor-pointer border-b border-gray-200 hover:bg-gray-100 ${r?"bg-blue-100":""} ${"unread"===e.status?"font-bold":""}`,onClick:()=>t(e),children:[(0,Qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qr.jsx)("p",{className:"text-sm truncate",children:e.sender_name||"Sistema"}),(0,Qr.jsx)("time",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("es-ES",{day:"numeric",month:"short"})})]}),(0,Qr.jsx)("p",{className:"text-sm truncate mt-1",children:e.subject})]}),zn=({message:e,onUpdateStatus:t,onDelete:r})=>e?(0,Qr.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"pb-4 border-b border-gray-200",children:[(0,Qr.jsx)("h2",{className:"text-xl font-semibold mb-2",children:e.subject}),(0,Qr.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Qr.jsxs)("p",{children:[(0,Qr.jsx)("strong",{children:"De:"})," ",e.sender_name||"Sistema"]}),(0,Qr.jsx)("span",{className:"mx-2",children:"|"}),(0,Qr.jsxs)("time",{children:[(0,Qr.jsx)("strong",{children:"Fecha:"})," ",new Date(e.created_at).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"})]})]})]}),(0,Qr.jsx)("div",{className:"py-4 flex-grow overflow-y-auto",dangerouslySetInnerHTML:{__html:e.message}}),(0,Qr.jsxs)("div",{className:"pt-4 border-t border-gray-200 flex items-center justify-between",children:[(0,Qr.jsx)("div",{children:"unread"===e.status&&(0,Qr.jsx)("button",{onClick:()=>{"unread"===e.status&&t(e.id,"read")},className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Marcar como ledo"})}),(0,Qr.jsx)("button",{onClick:()=>r(e.id),className:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600",children:"Eliminar"})]})]}):(0,Qr.jsx)("div",{className:"h-full flex items-center justify-center bg-gray-50",children:(0,Qr.jsx)("p",{className:"text-gray-500",children:"Selecciona un mensaje para leerlo"})}),Dn=()=>{const{messages:e,isLoading:t,error:r,total:n,updateMessageStatus:s,deleteMessage:o,sendMessage:i}=xn(),{users:l,isLoading:c}=bn(),[d,u]=(0,a.useState)(null),[f,p]=(0,a.useState)(!1),m=e=>{u(e),"unread"===e.status&&s(e.id,"read")},h=(0,a.useCallback)(async e=>{await o(e),d&&d.id===e&&u(null)},[o,d]);return t?(0,Qr.jsx)("div",{className:"p-4",children:"Cargando mensajes..."}):r?(0,Qr.jsxs)("p",{className:"text-red-500",children:["Error: ",r.message]}):(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,Qr.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,Qr.jsxs)("h2",{className:"text-lg font-semibold",children:["Bandeja de Entrada (",n," mensajes)"]}),(0,Qr.jsx)("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Enviar Mensaje"})]}),(0,Qr.jsxs)("div",{className:"flex",style:{height:"600px"},children:[(0,Qr.jsx)("div",{className:"w-1/3 border-r border-gray-200 overflow-y-auto",children:e.length>0?e.map(e=>(0,Qr.jsx)(qn,{message:e,onSelect:m,isActive:d?.id===e.id},e.id)):(0,Qr.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No hay mensajes."})}),(0,Qr.jsx)("div",{className:"w-2/3",children:(0,Qr.jsx)(zn,{message:d,onUpdateStatus:s,onDelete:h})})]}),f&&(0,Qr.jsx)(An,{isOpen:f,onClose:()=>p(!1),onSendMessage:i,users:l,isLoadingUsers:c})]})},Ln=()=>(0,Qr.jsxs)("div",{className:"container mx-auto p-4 md:p-6 lg:p-8",children:[(0,Qr.jsx)(hn,{title:"Panel de Administracin",subtitle:"Bienvenido, aqu tienes un resumen de la actividad de tu plataforma."}),(0,Qr.jsx)("div",{className:"my-8",children:(0,Qr.jsx)(tn,{stats:[{label:"Usuarios Totales",value:"1,234"},{label:"Cursos Activos",value:"56"},{label:"Nuevos Mensajes",value:"8"},{label:"Preguntas",value:"2,500"}]})}),(0,Qr.jsx)("div",{className:"mt-8",children:(0,Qr.jsx)(Dn,{})})]}),In=({service:e,resourceName:t="resource",initialFilters:r={},debounceMs:n=500,autoFetch:s=!0,perPage:o=20,dataProcessor:i=null,computedValuesCalculator:l=null})=>{const[c,d]=(0,a.useState)([]),[u,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[w,j]=(0,a.useState)({currentPage:1,totalPages:1,total:0,perPage:o,hasMore:!1}),[N,k]=(0,a.useState)({search:"",...r}),_=(0,a.useRef)(null),C=(0,a.useRef)(!0),S=(0,a.useRef)(""),E=(0,a.useRef)(!0),O=JSON.stringify(r);(0,a.useEffect)(()=>{E.current||k({search:"",...r})},[O]),(0,a.useEffect)(()=>(C.current=!0,()=>{C.current=!1,_.current&&clearTimeout(_.current)}),[]);const M=(0,a.useCallback)(async(r=!1,n={})=>{try{if(!e||!e.getAll)return void console.error(` ${t}: Invalid service provided`);const s=n.perPage||w.perPage,a={...N,...n},l=JSON.stringify({reset:r,filters:a,page:w.currentPage});if(l===S.current&&!r)return void console.log(` ${t}: Skipping duplicate fetch`);S.current=l,r&&f(!0),v(null);const c=r?1:w.currentPage,u={};Object.keys(a).forEach(e=>{const t=a[e];t&&"all"!==t&&""!==t&&(u[e]=t)}),console.log(` Fetching ${t}s:`,{page:c,perPage:o,filters:u});const p=await e.getAll({...u,page:c,perPage:s});if(!C.current)return;let m=p.data||[];i&&"function"==typeof i&&(m=m.map(i)),d(r?m:e=>[...e,...m]),j(e=>({...e,currentPage:r?1:c,totalPages:p.pagination?.totalPages||1,total:p.pagination?.total||0,hasMore:p.pagination?.currentPage<p.pagination?.totalPages})),console.log(` ${t}s fetched:`,{count:m.length,total:p.pagination?.total||0})}catch(e){if(!C.current)return;console.error(` Error fetching ${t}s:`,e),v(e.message||`Failed to fetch ${t}s`)}finally{C.current&&f(!1)}},[e,t,N,w.currentPage,w.perPage,i]),T=(0,a.useCallback)(()=>{w.hasMore&&!u&&j(e=>({...e,currentPage:e.currentPage+1}))},[w.hasMore,u]),P=(0,a.useCallback)(async r=>{try{m(!0),v(null),console.log(` Creating ${t}:`,r);const n=await e.create(r);if(!C.current)return null;const s=await e.getOne(n.id);if(!C.current)return null;const a=i?i(s):s;return d(e=>[a,...e]),j(e=>({...e,total:e.total+1})),console.log(` ${t} created with full data:`,a.id),a}catch(e){if(!C.current)return null;throw console.error(` Error creating ${t}:`,e),v(e.message||`Failed to create ${t}`),e}finally{C.current&&m(!1)}},[e,t,i]),A=(0,a.useCallback)(async(r,n)=>{try{if(g(!0),v(null),console.log(` Updating ${t} ${r}:`,n),await e.update(r,n),!C.current)return null;const s=await e.getOne(r);if(!C.current)return null;const a=i?i(s):s;return d(e=>e.map(e=>e.id===r?a:e)),console.log(` ${t} ${r} updated with full data`),a}catch(e){if(!C.current)return null;throw console.error(` Error updating ${t} ${r}:`,e),v(e.message||`Failed to update ${t}`),e}finally{C.current&&g(!1)}},[e,t,i]),q=(0,a.useCallback)(async(r,n={})=>{try{if(y(!0),v(null),console.log(` Deleting ${t} ${r}`),await e.delete(r,n),!C.current)return;d(e=>e.filter(e=>e.id!==r)),j(e=>({...e,total:Math.max(0,e.total-1)})),console.log(` ${t} ${r} deleted`)}catch(e){if(!C.current)return;throw console.error(` Error deleting ${t} ${r}:`,e),v(e.message||`Failed to delete ${t}`),e}finally{C.current&&y(!1)}},[e,t]),z=(0,a.useCallback)(async r=>{try{m(!0),v(null),console.log(` Duplicating ${t} ${r}`);const n=c.find(e=>e.id===r);if(!n)throw new Error(`${t} not found`);let s;if(e.duplicate)s=await e.duplicate(r);else{const t={...n,title:`${n.title||"Untitled"} (Copy)`,status:"draft"};delete t.id,delete t.date,delete t.modified,s=await e.create(t)}if(!C.current)return null;const a=i?i(s):s;return d(e=>[a,...e]),j(e=>({...e,total:e.total+1})),console.log(` ${t} ${r} duplicated:`,a.id),a}catch(e){if(!C.current)return null;throw console.error(` Error duplicating ${t} ${r}:`,e),v(e.message||`Failed to duplicate ${t}`),e}finally{C.current&&m(!1)}},[e,t,c,i]),D=(0,a.useCallback)((e,t)=>{k(r=>({...r,[e]:t}))},[]),L=(0,a.useCallback)(()=>{k({search:"",...r})},[r]),I=(0,a.useCallback)(()=>{S.current="",M(!0)},[M]);(0,a.useEffect)(()=>{if(s||!E.current)return E.current=!1,_.current&&clearTimeout(_.current),_.current=setTimeout(()=>{M(!0)},n),()=>{_.current&&clearTimeout(_.current)};E.current=!1},[N,s,n,M]),(0,a.useEffect)(()=>{w.currentPage>1&&M(!1)},[w.currentPage]);const R=(0,a.useMemo)(()=>l&&"function"==typeof l?l(c):{total:c.length,published:c.filter(e=>"publish"===e.status).length,draft:c.filter(e=>"draft"===e.status).length,private:c.filter(e=>"private"===e.status).length},[c,l]);return{items:c,loading:u,creating:p,updating:h,deleting:x,error:b,pagination:w,computed:R,filters:N,updateFilter:D,resetFilters:L,setFilters:k,fetchItems:M,loadMore:T,createItem:P,updateItem:A,deleteItem:q,duplicateItem:z,refresh:I,hasMore:w.hasMore}};var Rn=o(8243);const $n={_start_date:"",_end_date:"",_price:0,_sale_price:null,_duration_weeks:null,_max_students:null,_difficulty_level:"medium",_product_type:"free",_woocommerce_product_id:0,_lesson_ids:[],_lesson_count:0,_student_count:0,_instructor_id:null,_certificate_template:null,_course_requirements:"",_course_objectives:"",_target_audience:""},Fn=["publish","draft","private","pending"],Bn=["easy","medium","hard","beginner","intermediate","advanced"],Un=["free","paid"],Hn=(0,gn.eG)("course","courses",{sanitizer:e=>{if(!e)return console.warn(" sanitizeCourseData - No data provided"),null;const t=(0,Rn.w3)(e.title),r=(0,Rn.w3)(e.content),n=(0,Rn.w3)(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:n,status:(0,Rn.se)(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,featured_media:e.featured_media||0,featured_media_url:(0,Rn.Nc)(e),qe_category:(0,Rn.KJ)(e.qe_category),qe_difficulty:(0,Rn.KJ)(e.qe_difficulty),qe_topic:(0,Rn.KJ)(e.qe_topic),course_type:(0,Rn.KJ)(e.course_type),meta:{...$n,...e.meta},enrolled_users_count:e.enrolled_users_count||0,lessons_count:e.lessons_count||0,is_free:void 0===e.is_free||e.is_free,_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=(0,Rn.Kf)(e.title,"Course title");r&&t.push(r),e.status&&!Fn.includes(e.status)&&t.push(`Invalid status. Must be one of: ${Fn.join(", ")}`),["qe_category","qe_difficulty","qe_topic","course_type"].forEach(r=>{void 0!==e[r]&&(Array.isArray(e[r])||t.push(`${r} must be an array`))});const n=e.meta||e;if(void 0!==n._price&&""!==n._price&&isNaN(parseFloat(n._price))&&t.push("Price must be a valid number"),void 0!==n._sale_price&&""!==n._sale_price&&null!==n._sale_price&&isNaN(parseFloat(n._sale_price))&&t.push("Sale price must be a valid number"),n._price&&n._sale_price&&parseFloat(n._sale_price)>=parseFloat(n._price)&&t.push("Sale price must be less than regular price"),void 0!==n._duration_weeks&&""!==n._duration_weeks&&null!==n._duration_weeks){const e=parseInt(n._duration_weeks);(isNaN(e)||e<=0)&&t.push("Duration must be a positive number")}if(void 0!==n._max_students&&""!==n._max_students&&null!==n._max_students){const e=parseInt(n._max_students);(isNaN(e)||e<=0)&&t.push("Max students must be a positive number")}if(n._difficulty_level&&!Bn.includes(n._difficulty_level)&&t.push(`Invalid difficulty level. Must be one of: ${Bn.join(", ")}`),n._product_type&&!Un.includes(n._product_type)&&t.push(`Invalid product type. Must be one of: ${Un.join(", ")}`),n._start_date&&n._end_date){const e=(0,Rn.wb)(n._start_date,n._end_date);e&&t.push(e)}return(0,Rn.vQ)(t)},transformer:e=>{const t={title:(0,Rn.xV)(e.title),content:(0,Rn.xV)(e.content||""),excerpt:(0,Rn.xV)(e.excerpt||""),status:(0,Rn.se)(e.status,"publish")};if(void 0!==e.featured_media){const r=parseInt(e.featured_media);t.featured_media=isNaN(r)||r<0?0:r}return void 0!==e.qe_category&&(t.qe_category=(0,Rn.KJ)(e.qe_category)),void 0!==e.qe_difficulty&&(t.qe_difficulty=(0,Rn.KJ)(e.qe_difficulty)),void 0!==e.qe_topic&&(t.qe_topic=(0,Rn.KJ)(e.qe_topic)),void 0!==e.course_type&&(t.course_type=(0,Rn.KJ)(e.course_type)),t.meta={},void 0!==e._start_date?t.meta._start_date=(0,Rn.iV)(e._start_date):void 0!==e.startDate?t.meta._start_date=(0,Rn.iV)(e.startDate):void 0!==e.meta?._start_date&&(t.meta._start_date=(0,Rn.iV)(e.meta._start_date)),void 0!==e._end_date?t.meta._end_date=(0,Rn.iV)(e._end_date):void 0!==e.endDate?t.meta._end_date=(0,Rn.iV)(e.endDate):void 0!==e.meta?._end_date&&(t.meta._end_date=(0,Rn.iV)(e.meta._end_date)),void 0!==e._price?t.meta._price=(0,Rn.j4)(e._price):void 0!==e.price?t.meta._price=(0,Rn.j4)(e.price):void 0!==e.meta?._price&&(t.meta._price=(0,Rn.j4)(e.meta._price)),void 0!==e._sale_price?t.meta._sale_price=(0,Rn.Rz)(e._sale_price):void 0!==e.salePrice?t.meta._sale_price=(0,Rn.Rz)(e.salePrice):void 0!==e.meta?._sale_price&&(t.meta._sale_price=(0,Rn.Rz)(e.meta._sale_price)),void 0!==e._duration_weeks?t.meta._duration_weeks=(0,Rn.ee)(e._duration_weeks,1):void 0!==e.durationWeeks?t.meta._duration_weeks=(0,Rn.ee)(e.durationWeeks,1):void 0!==e.meta?._duration_weeks&&(t.meta._duration_weeks=(0,Rn.ee)(e.meta._duration_weeks,1)),void 0!==e._max_students?t.meta._max_students=(0,Rn.ee)(e._max_students,1):void 0!==e.maxStudents?t.meta._max_students=(0,Rn.ee)(e.maxStudents,1):void 0!==e.meta?._max_students&&(t.meta._max_students=(0,Rn.ee)(e.meta._max_students,1)),void 0!==e._difficulty_level?t.meta._difficulty_level=(0,Rn.zi)(e._difficulty_level,Bn,"medium"):void 0!==e.difficulty?t.meta._difficulty_level=(0,Rn.zi)(e.difficulty,Bn,"medium"):void 0!==e.meta?._difficulty_level&&(t.meta._difficulty_level=(0,Rn.zi)(e.meta._difficulty_level,Bn,"medium")),void 0!==e._product_type?t.meta._product_type=(0,Rn.zi)(e._product_type,Un,"free"):void 0!==e.productType?t.meta._product_type=(0,Rn.zi)(e.productType,Un,"free"):void 0!==e.meta?._product_type&&(t.meta._product_type=(0,Rn.zi)(e.meta._product_type,Un,"free")),void 0!==e._woocommerce_product_id?t.meta._woocommerce_product_id=(0,Rn.o5)(e._woocommerce_product_id,0,0):void 0!==e.woocommerceProductId?t.meta._woocommerce_product_id=(0,Rn.o5)(e.woocommerceProductId,0,0):void 0!==e.meta?._woocommerce_product_id&&(t.meta._woocommerce_product_id=(0,Rn.o5)(e.meta._woocommerce_product_id,0,0)),void 0!==e._lesson_ids?t.meta._lesson_ids=(0,Rn.E5)(e._lesson_ids):void 0!==e.lessonIds?t.meta._lesson_ids=(0,Rn.E5)(e.lessonIds):void 0!==e.meta?._lesson_ids&&(t.meta._lesson_ids=(0,Rn.E5)(e.meta._lesson_ids)),void 0!==e._lesson_order_map?t.meta._lesson_order_map=e._lesson_order_map:void 0!==e.lessonOrderMap?t.meta._lesson_order_map=e.lessonOrderMap:void 0!==e.meta?._lesson_order_map&&(t.meta._lesson_order_map=e.meta._lesson_order_map),void 0!==e._instructor_id?t.meta._instructor_id=(0,Rn.ee)(e._instructor_id,1):void 0!==e.instructorId?t.meta._instructor_id=(0,Rn.ee)(e.instructorId,1):void 0!==e.meta?._instructor_id&&(t.meta._instructor_id=(0,Rn.ee)(e.meta._instructor_id,1)),void 0!==e._course_requirements?t.meta._course_requirements=(0,Rn.xV)(e._course_requirements):void 0!==e.requirements?t.meta._course_requirements=(0,Rn.xV)(e.requirements):void 0!==e.meta?._course_requirements&&(t.meta._course_requirements=(0,Rn.xV)(e.meta._course_requirements)),void 0!==e._course_objectives?t.meta._course_objectives=(0,Rn.xV)(e._course_objectives):void 0!==e.objectives?t.meta._course_objectives=(0,Rn.xV)(e.objectives):void 0!==e.meta?._course_objectives&&(t.meta._course_objectives=(0,Rn.xV)(e.meta._course_objectives)),void 0!==e._target_audience?t.meta._target_audience=(0,Rn.xV)(e._target_audience):void 0!==e.targetAudience?t.meta._target_audience=(0,Rn.xV)(e.targetAudience):void 0!==e.meta?._target_audience&&(t.meta._target_audience=(0,Rn.xV)(e.meta._target_audience)),t.meta={...$n,...t.meta},t},buildParams:(e={})=>{const t=(0,gn.DK)(e);return e.category&&t.append("qe_category",e.category.toString()),t}}),Wn=async(e={})=>Hn.getAll(e),Qn=async(e,t={})=>Hn.getOne(e,t),Vn=async e=>Hn.create(e),Kn=async(e,t)=>Hn.update(e,t),Yn=async(e,t={})=>Hn.delete(e,t),Gn=async e=>{try{const t=await Qn(e);if(!t)throw new Error("Course not found");const r={title:`${t.title?.rendered||t.title||"Untitled"} (Copy)`,description:t.content?.rendered||t.content||"",excerpt:t.excerpt?.rendered||t.excerpt||"",status:"draft",price:t.meta?._course_price||"0",salePrice:t.meta?._sale_price||"",difficulty:t.meta?._course_difficulty||"intermediate",category:t.meta?._course_category||"general",duration:t.meta?._course_duration||0,maxStudents:t.meta?._max_students||0,featured:!1,startDate:"",endDate:""};console.log(" Duplicating course:",e);const n=await Vn(r);return console.log(" Course duplicated:",n.id),n}catch(t){throw console.error(` Error duplicating course ${e}:`,t),t}},Xn=Wn,Zn=Qn,Jn=Vn,es=Kn,ts=Yn,rs=Gn,ns=async(e={})=>Hn.getCount(e),ss=async e=>{try{return!!await Qn(e)}catch(e){return!1}},as=async e=>{try{const t=await Qn(e);return parseInt(t.meta?.enrolled_users_count||"0")}catch(t){return console.error(` Error getting enrolled users for course ${e}:`,t),0}},os=async(e,t)=>{if(!["publish","draft","private"].includes(t))throw new Error(`Invalid status: ${t}`);return Kn(e,{status:t})},is=async e=>os(e,"publish"),ls=async e=>os(e,"draft"),cs=async(e,t)=>Kn(e,{featured:t}),ds=async(e,t={})=>Wn({...t,search:e}),us=async(e,t={})=>Wn({...t,category:e}),fs=async(e,t={})=>Wn({...t,difficulty:e}),ps=async(e={})=>Wn({...e,featured:!0}),ms=async(e={})=>Wn({...e,status:"publish"}),hs=async e=>{const t=(await Promise.resolve().then(o.t.bind(o,1455,23))).default;return await t({path:`/quiz-extended/v1/courses/${e}/reset`,method:"POST",data:{confirm:!0}})},gs=(t={})=>{const{search:r="",category:n=null,difficulty:s=null,status:o=null,enrolledOnly:i=!1,autoFetch:l=!0,perPage:c=100,embed:d=!1,fields:u=null}=t,f=(0,a.useMemo)(()=>e=>({...e,lesson_count:e.meta?._lesson_count||e.lessons_count||0,student_count:e.enrolled_users_count||e.meta?._student_count||0,enrolled_users_count:e.enrolled_users_count||e.meta?.enrolled_users_count||0,price:parseFloat(e.meta?._course_price||0),sale_price:parseFloat(e.meta?._sale_price||0),difficulty:e.meta?._course_difficulty||"intermediate",category:e.meta?._course_category||"general",completion_rate:parseInt(e.meta?._completion_rate||"0"),duration_hours:parseInt(e.meta?._course_duration||"0"),featured:"yes"===e.meta?._featured,on_sale:e.meta?._sale_price&&parseFloat(e.meta._sale_price)<parseFloat(e.meta._course_price||0),has_lessons:(e.meta?._lesson_count||e.lessons_count||0)>0,has_students:(e.enrolled_users_count||e.meta?._student_count||0)>0}),[]),p=(0,a.useMemo)(()=>e=>{if(!Array.isArray(e)||0===e.length)return{totalCourses:0,publishedCourses:0,draftCourses:0,privateCourses:0,totalStudents:0,totalLessons:0,totalPrice:0,averagePrice:0,totalRevenue:0,averageDuration:0,averageCompletionRate:0,featuredCount:0,onSaleCount:0,freeCoursesCount:0,paidCoursesCount:0,byCategory:{},byDifficulty:{}};const t=e.length;let r=0,n=0,s=0,a=0,o=0,i=0,l=0,c=0,d=0,u=0,f=0,p=0,m=0,h=0;const g={},x={};return e.forEach(e=>{const t=e.meta||{},y=e.status||"draft",b=parseFloat(t._price||0),v=parseFloat(t._sale_price||0),w=parseInt(e.enrolled_users_count||t._student_count||0),j=parseInt(t._lesson_count||e.lessons_count||0),N=parseInt(t._course_duration||0),k=parseFloat(t._completion_rate||0),_="yes"===t._featured||!0===t._featured,C=t._product_type||"free";"publish"===y&&r++,"draft"===y&&n++,"private"===y&&s++,a+=w,o+=j,"paid"===C&&b>0?(i+=b,l++,h++,c+=(v>0&&v<b?v:b)*w,v>0&&v<b&&p++):"free"!==C&&0!==b||m++,N>0&&(d+=N),k>0&&(u+=k),_&&f++;const S=e.qe_category||[];Array.isArray(S)&&S.length>0?S.forEach(t=>{const r=e._embedded?.["wp:term"]?.[0]?.find(e=>e.id===t)?.name||"Uncategorized";g[r]=(g[r]||0)+1}):g.Uncategorized=(g.Uncategorized||0)+1;const E=t._course_difficulty||t._difficulty||"intermediate";x[E]=(x[E]||0)+1}),{totalCourses:t,publishedCourses:r,draftCourses:n,privateCourses:s,totalStudents:a,totalLessons:o,totalPrice:i,averagePrice:l>0?Math.round(i/l*100)/100:0,totalRevenue:Math.round(100*c)/100,averageDuration:t>0?Math.round(d/t):0,averageCompletionRate:t>0?Math.round(u/t):0,featuredCount:f,onSaleCount:p,freeCoursesCount:m,paidCoursesCount:h,byCategory:g,byDifficulty:x}},[]),{items:m,loading:h,creating:g,updating:x,deleting:y,error:b,pagination:v,computed:w,filters:j,updateFilter:N,resetFilters:k,setFilters:_,fetchItems:C,loadMore:S,createItem:E,updateItem:O,deleteItem:M,duplicateItem:T,refresh:P,hasMore:A}=In({service:e,resourceName:"course",initialFilters:{search:r,category:n,difficulty:s,status:o||"publish",enrolledOnly:i,embed:d,fields:u},debounceMs:500,autoFetch:l,perPage:c,dataProcessor:f,computedValuesCalculator:p});return{courses:m,loading:h,creating:g,updating:x,deleting:y,error:b,pagination:v,computed:w,filters:j,updateFilter:N,resetFilters:k,setFilters:_,fetchCourses:C,loadMoreCourses:S,createCourse:E,updateCourse:O,deleteCourse:M,duplicateCourse:T,refresh:P,publishCourse:async e=>O(e,{status:"publish"}),unpublishCourse:async e=>O(e,{status:"draft"}),toggleFeatured:async(e,t)=>O(e,{featured:t}),updatePrice:async(e,t,r=null)=>O(e,{price:t,...null!==r&&{salePrice:r}}),hasMore:A}},xs=gs,ys={_course_id:null,_lesson_order:1,_duration_minutes:0,_lesson_type:"text",_video_url:"",_content_type:"free",_prerequisite_lessons:[],_resources_urls:[],_completion_criteria:"view_all",_is_required:!1,_lesson_description:"",_lesson_steps:[],_has_quiz:!1,_quiz_id:null},bs=["publish","draft","private","pending"],vs=["view_all","pass_quiz","complete_steps","view","quiz","assignment","time","manual"],ws=e=>Array.isArray(e)?e.map((e,t)=>e&&"object"==typeof e?{type:(0,Rn.zi)(e.type,["video","text","pdf","quiz","image","audio"],"text"),order:(0,Rn.o5)(e.order,t+1,1),title:(0,Rn.xV)(e.title),data:e.data&&"object"==typeof e.data?e.data:{}}:null).filter(e=>null!==e):[],js=(e,t=new Date)=>Array.isArray(e)?e.filter(e=>((e,t=new Date)=>{const r=e?.meta?._start_date||"";if(!r)return!0;const n=new Date(r+"T00:00:00");if(isNaN(n.getTime()))return!0;const s=new Date(t);return s.setHours(0,0,0,0),n.setHours(0,0,0,0),n<=s})(e,t)):[],Ns=(0,gn.eG)("lesson","lessons",{sanitizer:e=>{if(!e)return console.warn(" sanitizeLessonData - No data provided"),null;const t=(0,Rn.w3)(e.title),r=(0,Rn.w3)(e.content),n=(0,Rn.w3)(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:n,status:(0,Rn.se)(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,menu_order:(0,Rn.o5)(e.menu_order,1,0),meta:{...ys,...e.meta,_is_required:(0,Rn.kM)(e.meta?._is_required),_has_quiz:(0,Rn.kM)(e.meta?._has_quiz),_prerequisite_lessons:(0,Rn.E5)(e.meta?._prerequisite_lessons),_lesson_steps:ws(e.meta?._lesson_steps),_resources_urls:Array.isArray(e.meta?._resources_urls)?e.meta._resources_urls:[]},_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=(0,Rn.Kf)(e.title,"Lesson title");r&&t.push(r),e.status&&!bs.includes(e.status)&&t.push(`Invalid status. Must be one of: ${bs.join(", ")}`);const n=e.meta||e,s=n._course_id||e.courseId;if(console.log(" validateLessonData - courseId:",s,"type:",typeof s),null!=s&&""!==s&&"0"!==s&&0!==s){const e=parseInt(s,10);console.log(" validateLessonData - courseIdNum:",e,"isNaN:",isNaN(e)),(isNaN(e)||e<=0)&&t.push("Course ID must be a positive number if provided")}const a=n._completion_criteria||e.completionCriteria;return a&&!vs.includes(a)&&t.push(`Invalid completion criteria. Must be one of: ${vs.join(", ")}`),(0,Rn.vQ)(t)},transformer:e=>{console.log(" transformLessonDataForApi - Input:",e);const t={title:(0,Rn.xV)(e.title),content:(0,Rn.xV)(e.content||""),excerpt:(0,Rn.xV)(e.description||""),status:(0,Rn.se)(e.status,"publish"),menu_order:(0,Rn.o5)(e.menu_order||e.lessonOrder||1,1,0),meta:{}},r=e.courseId||e.meta?._course_id;if(null!=r&&""!==r&&"0"!==r&&0!==r){const e=(0,Rn.ee)(r,1);e&&e>0&&(t.meta._course_id=e)}void 0!==e.lessonOrder&&(t.meta._lesson_order=(0,Rn.o5)(e.lessonOrder,1,0)),void 0!==e.completionCriteria&&(t.meta._completion_criteria=(0,Rn.zi)(e.completionCriteria,vs,"view_all")),void 0!==e.description&&(t.meta._lesson_description=(0,Rn.xV)(e.description));const n=e.steps||e.meta?._lesson_steps;void 0!==n&&(t.meta._lesson_steps=ws(n),console.log(" Steps being saved:",t.meta._lesson_steps));const s=e.startDate||e.meta?._start_date;if(void 0!==s){if(""===s||/^\d{4}-\d{2}-\d{2}$/.test(s))t.meta._start_date=s;else{const e=new Date(s);if(isNaN(e.getTime()))t.meta._start_date="";else{const r=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");t.meta._start_date=`${r}-${n}-${s}`}}console.log(" Start date being saved:",t.meta._start_date)}const{_course_id:a,...o}=ys,i={...o,...t.meta};return i._lesson_steps&&Array.isArray(i._lesson_steps)||(i._lesson_steps=[]),t.meta=i,console.log(" transformLessonDataForApi - Output:",t),t},buildParams:(e={})=>{const{page:t=1,perPage:r=20,search:n="",courseId:s=null,lessonType:a=null,orderBy:o="menu_order",order:i="asc",embed:l=!0}=e,c=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:o,order:i});if(l&&c.append("_embed","true"),n&&n.trim()&&c.append("search",n.trim()),s){const e=parseInt(s,10);Number.isInteger(e)&&e>0&&c.append("course_id",e.toString())}return a&&(c.append("meta_query[1][key]","_lesson_type"),c.append("meta_query[1][value]",a),c.append("meta_query[1][compare]","=")),c}}),ks=async(e={})=>Ns.getAll(e),_s=async(e,t={})=>{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid course ID provided");return console.log(" Getting lessons for course:",e),ks({...t,courseId:e})},Cs=async(e,t={})=>Ns.getOne(e,t),Ss=async e=>Ns.create(e),Es=async(e,t)=>Ns.update(e,t),Os=async(e,t={})=>Ns.delete(e,t),Ms=async e=>{try{const t=await Cs(e);if(!t)throw new Error("Lesson not found");const r={title:`${t.title?.rendered||t.title||"Untitled"} (Copy)`,content:t.content?.rendered||t.content||"",excerpt:t.excerpt?.rendered||t.excerpt||"",status:"draft",courseId:t.meta?._course_id,lessonOrder:parseInt(t.meta?._lesson_order||"0")+1,lessonType:t.meta?._lesson_type||"mixed",description:t.meta?._lesson_description||"",steps:t.meta?._lesson_steps||[],prerequisiteLessons:t.meta?._prerequisite_lessons||[],completionCriteria:t.meta?._completion_criteria||"view",isRequired:"yes"===t.meta?._is_required,duration:t.meta?._duration_minutes||0,videoUrl:t.meta?._video_url||"",hasQuiz:"yes"===t.meta?._has_quiz};console.log(" Duplicating lesson:",e);const n=await Ss(r);return console.log(" Lesson duplicated:",n.id),n}catch(t){throw console.error(` Error duplicating lesson ${e}:`,t),t}},Ts=async(e={})=>Ns.getCount(e),Ps=async e=>{try{return!!await Cs(e)}catch(e){return!1}},As=async(e,t)=>{if(!["publish","draft","private"].includes(t))throw new Error(`Invalid status: ${t}`);return Es(e,{status:t})},qs=async e=>As(e,"publish"),zs=async e=>As(e,"draft"),Ds=async(e,t)=>Es(e,{lessonOrder:t}),Ls=async(e,t)=>Es(e,{courseId:t}),Is=async(e,t={})=>ks({...t,lessonType:e}),Rs=async(e={})=>ks({...e,status:"publish"}),$s=async(e={})=>{try{const t=await ks({...e,perPage:100}),r={total:t.pagination.total,published:0,draft:0,byType:{},withQuizzes:0,totalDuration:0,averageDuration:0};return t.data.forEach(e=>{"publish"===e.status&&r.published++,"draft"===e.status&&r.draft++;const t=e.meta?._lesson_type||"mixed";r.byType[t]=(r.byType[t]||0)+1,"yes"===e.meta?._has_quiz&&r.withQuizzes++;const n=parseInt(e.meta?._duration_minutes||"0");r.totalDuration+=n}),r.averageDuration=t.data.length>0?Math.round(r.totalDuration/t.data.length):0,console.log(" Lesson statistics:",r),r}catch(e){throw console.error(" Error getting lesson statistics:",e),e}},Fs=ks,Bs=Cs,Us=Ss,Hs=Es,Ws=Os;var Qs=o(6416);const Vs=(e={})=>{const{search:r="",courseId:n=null,lessonType:s=null,status:o=null,autoFetch:i=!0,perPage:l=20}=e,[c,d]=(0,a.useState)([]),[u,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(null),x=Boolean(n),y=(0,a.useCallback)(async()=>{if(n){f(!0),m(null);try{console.log(` useLessons: Fetching lessons for course ${n} using optimized endpoint`);const e=await(0,Qs.getCourseLessons)(parseInt(n,10),{perPage:l,status:o||"publish,draft,private"});console.log(` useLessons: Received ${e.data?.length||0} lessons in correct order`),d(e.data||[]),g(e.pagination)}catch(e){console.error(" useLessons: Error fetching course lessons:",e),m(e),d([])}finally{f(!1)}}},[n,l,o]);(0,a.useEffect)(()=>{x&&i&&y()},[x,i,y]);const b=(0,a.useMemo)(()=>e=>{const t=e.meta?._start_date||"",r=t?new Date(t):null,n=new Date,s=!r||r<=n;return{...e,course_id:e.meta?._course_id||null,lesson_order:parseInt(e.meta?._lesson_order||"0"),lesson_type:e.meta?._lesson_type||"mixed",description:e.meta?._lesson_description||"",steps:e.meta?._lesson_steps||[],steps_count:Array.isArray(e.meta?._lesson_steps)?e.meta._lesson_steps.length:0,prerequisite_lessons:e.meta?._prerequisite_lessons||[],completion_criteria:e.meta?._completion_criteria||"view",is_required:"yes"===e.meta?._is_required,duration_minutes:parseInt(e.meta?._duration_minutes||"0"),video_url:e.meta?._video_url||"",has_quiz:"yes"===e.meta?._has_quiz,quiz_id:e.meta?._quiz_id||null,start_date:t,start_date_parsed:r,is_available:s,has_video:Boolean(e.meta?._video_url),has_steps:Array.isArray(e.meta?._lesson_steps)&&e.meta._lesson_steps.length>0,has_prerequisites:Array.isArray(e.meta?._prerequisite_lessons)&&e.meta._prerequisite_lessons.length>0,has_start_date:Boolean(t)}},[]),v=(0,a.useMemo)(()=>c.map(b),[c,b]),w=(0,a.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,published:0,draft:0,private:0,totalSteps:0,averageStepsPerLesson:0,totalDuration:0,averageDuration:0,byType:{},withQuizzes:0,withVideo:0,withPrerequisites:0,requiredLessons:0};let r=0,n=0;const s={};let a=0,o=0,i=0,l=0;return e.forEach(e=>{r+=e.steps_count||0,n+=e.duration_minutes||0;const t=e.lesson_type||"mixed";s[t]=(s[t]||0)+1,e.has_quiz&&a++,e.has_video&&o++,e.has_prerequisites&&i++,e.is_required&&l++}),{total:t,published:e.filter(e=>"publish"===e.status).length,draft:e.filter(e=>"draft"===e.status).length,private:e.filter(e=>"private"===e.status).length,totalSteps:r,averageStepsPerLesson:t>0?Math.round(r/t):0,totalDuration:n,averageDuration:t>0?Math.round(n/t):0,byType:s,withQuizzes:a,withVideo:o,withPrerequisites:i,requiredLessons:l}},[]),j=(0,a.useMemo)(()=>w(v),[v,w]),{items:N,loading:k,creating:_,updating:C,deleting:S,error:E,pagination:O,computed:M,filters:T,updateFilter:P,resetFilters:A,setFilters:q,fetchItems:z,loadMore:D,createItem:L,updateItem:I,deleteItem:R,duplicateItem:$,refresh:F,hasMore:B}=In({service:t,resourceName:"lesson",initialFilters:{search:r,courseId:x?null:n,lessonType:s,status:o||"publish,draft,private"},dataProcessor:b,computedValuesCalculator:w,autoFetch:!x&&i,...e}),U=x?v:N,H=x?u:k,W=x?p:E,Q=x?h:O,V=x?j:M,K=!x&&B,Y=(0,a.useCallback)(()=>x?y():F(),[x,y,F]),G=(0,a.useCallback)(e=>x?y():z(e),[x,y,z]),X=(0,a.useCallback)(()=>x?(console.warn("  loadMore is not supported when filtering by courseId"),Promise.resolve()):D(),[x,D]);return{lessons:U,loading:H,creating:_,updating:C,deleting:S,error:W,pagination:Q,computed:V,filters:T,updateFilter:P,resetFilters:A,setFilters:q,fetchLessons:G,loadMoreLessons:X,createLesson:L,updateLesson:I,deleteLesson:R,duplicateLesson:$,refresh:Y,publishLesson:async e=>I(e,{status:"publish"}),unpublishLesson:async e=>I(e,{status:"draft"}),updateLessonOrder:async(e,t)=>I(e,{lessonOrder:t}),moveLessonToCourse:async(e,t)=>I(e,{courseId:t}),updateLessonType:async(e,t)=>I(e,{lessonType:t}),addStepToLesson:async(e,t)=>{const r=U.find(t=>t.id===e);if(!r)throw new Error("Lesson not found");const n=r.steps||[];return I(e,{steps:[...n,t]})},removeStepFromLesson:async(e,t)=>{const r=U.find(t=>t.id===e);if(!r)throw new Error("Lesson not found");const n=r.steps||[];return I(e,{steps:n.filter((e,r)=>r!==t)})},hasMore:K}},Ks=Vs;var Ys=o(8766);const Gs=(e={})=>{const{search:t="",courseId:r=null,quizType:n=null,difficulty:s=null,category:o=null,status:i=null,autoFetch:l=!0,perPage:c=20}=e,d=(0,a.useMemo)(()=>e=>({...e,course_id:e.meta?._course_id||null,quiz_type:e.meta?._quiz_type||"standard",difficulty:e.meta?._difficulty_level||"intermediate",category:e.meta?._quiz_category||"",passing_score:parseInt(e.meta?._passing_score||"70"),time_limit:parseInt(e.meta?._time_limit||"0"),max_attempts:parseInt(e.meta?._max_attempts||"0"),randomize_questions:"yes"===e.meta?._randomize_questions,show_results:"yes"===e.meta?._show_results,enable_negative_scoring:"yes"===e.meta?._enable_negative_scoring,question_ids:e.meta?._quiz_question_ids||[],question_count:Array.isArray(e.meta?._quiz_question_ids)?e.meta._quiz_question_ids.length:0,total_points:parseInt(e.meta?._total_points||"0"),instructions:e.meta?._quiz_instructions||"",has_time_limit:parseInt(e.meta?._time_limit||"0")>0,has_attempt_limit:parseInt(e.meta?._max_attempts||"0")>0,has_questions:Array.isArray(e.meta?._quiz_question_ids)&&e.meta._quiz_question_ids.length>0,is_randomized:"yes"===e.meta?._randomize_questions}),[]),u=(0,a.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,published:0,draft:0,private:0,totalQuestions:0,averageQuestions:0,totalPoints:0,averagePoints:0,byType:{},byDifficulty:{},withTimeLimit:0,withAttemptLimit:0,randomized:0};let r=0,n=0;const s={},a={};let o=0,i=0,l=0;return e.forEach(e=>{r+=e.question_count||0,n+=e.total_points||0;const t=e.quiz_type||"standard";s[t]=(s[t]||0)+1;const c=e.difficulty||"intermediate";a[c]=(a[c]||0)+1,e.has_time_limit&&o++,e.has_attempt_limit&&i++,e.is_randomized&&l++}),{total:t,published:e.filter(e=>"publish"===e.status).length,draft:e.filter(e=>"draft"===e.status).length,private:e.filter(e=>"private"===e.status).length,totalQuestions:r,averageQuestions:t>0?Math.round(r/t):0,totalPoints:n,averagePoints:t>0?Math.round(n/t):0,byType:s,byDifficulty:a,withTimeLimit:o,withAttemptLimit:i,randomized:l}},[]),{items:f,loading:p,creating:m,updating:h,deleting:g,error:x,pagination:y,computed:b,filters:v,updateFilter:w,resetFilters:j,setFilters:N,fetchItems:k,loadMore:_,createItem:C,updateItem:S,deleteItem:E,duplicateItem:O,refresh:M,hasMore:T}=In({service:Ys,resourceName:"quiz",initialFilters:{search:t,courseId:r,quizType:n,difficulty:s,category:o,status:i||"publish,draft,private"},debounceMs:500,autoFetch:l,perPage:c,dataProcessor:d,computedValuesCalculator:u});return{quizzes:f,loading:p,creating:m,updating:h,deleting:g,error:x,pagination:y,computed:b,filters:v,updateFilter:w,resetFilters:j,setFilters:N,fetchQuizzes:k,loadMoreQuizzes:_,createQuiz:C,updateQuiz:S,deleteQuiz:E,duplicateQuiz:O,refresh:M,publishQuiz:async e=>S(e,{status:"publish"}),unpublishQuiz:async e=>S(e,{status:"draft"}),addQuestionToQuiz:async(e,t)=>{const r=f.find(t=>t.id===e);if(!r)throw new Error("Quiz not found");const n=r.question_ids||[];return n.includes(t)?(console.log(" Question already in quiz"),r):S(e,{questionIds:[...n,t]})},removeQuestionFromQuiz:async(e,t)=>{const r=f.find(t=>t.id===e);if(!r)throw new Error("Quiz not found");const n=r.question_ids||[];return S(e,{questionIds:n.filter(e=>e!==t)})},updateQuizSettings:async(e,t)=>{const r=["passingScore","timeLimit","maxAttempts","randomizeQuestions","showResults","enableNegativeScoring"],n={};return Object.keys(t).forEach(e=>{r.includes(e)&&(n[e]=t[e])}),S(e,n)},reorderQuestions:async(e,t)=>S(e,{questionIds:t}),hasMore:T}},Xs=Gs,Zs=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.api_url)throw new Error("API URL not configured in WordPress");return e},Js=async(e,t={})=>{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":Zs().nonce},credentials:"same-origin",...t},n=await fetch(e,r);if(!n.ok){const e=await n.text();throw new Error(`API Error ${n.status}: ${n.statusText} - ${e}`)}return n},ea=async(e,t)=>{try{const r=`${Zs().api_url}/wp/v2/${e}`;console.log(` Creating ${e} term:`,t.name);const n=await Js(r,{method:"POST",body:JSON.stringify(t)}),s=await n.json();return console.log(` Created ${e} term:`,s.name,`(ID: ${s.id})`),s}catch(t){throw console.error(` Error creating ${e} term:`,t),t}},ta=(e=[])=>{const{t}=k(),[r,n]=(0,a.useState)({}),[s,o]=(0,a.useState)(!0),[i,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{0!==e.length?(async()=>{try{o(!0),l(null);const r=e.map(e=>(async(e,t={})=>{try{const r=Zs(),{perPage:n=100,search:s="",hideEmpty:a=!1}=t,o=new URLSearchParams({per_page:n.toString(),hide_empty:a.toString(),_fields:"id,name,slug,description,count,parent"});s&&o.append("search",s);const i=`${r.api_url}/wp/v2/${e}?${o}`;console.log(` Fetching ${e} terms:`,i);const l=await Js(i),c=await l.json();return console.log(` Fetched ${c.length} ${e} terms`),c}catch(t){throw console.error(` Error fetching ${e} terms:`,t),t}})(e,{hideEmpty:!1})),s=await Promise.all(r),a={};e.forEach((e,r)=>{const n=s[r]||[];a[e]=[{value:"all",label:t("courses.category.all")},...n.map(e=>({value:e.id,label:e.name}))]}),n(a)}catch(e){console.error("Failed to fetch taxonomy options:",e),l(e)}finally{o(!1)}})():o(!1)},[JSON.stringify(e),t]),{options:r,isLoading:s,error:i}},ra=({title:e,itemCount:t,createButtonText:r,onCreate:n,isCreating:s,children:o,filters:i,onLoadMore:l,hasMore:c=!1,isLoadingMore:d=!1})=>{const{t:u}=k(),f=(0,a.useRef)(null),p=(0,a.useRef)(null),m=(0,a.useRef)(null),h=(0,a.useCallback)(e=>{const[t]=e;t.isIntersecting&&c&&!d&&l&&l()},[c,d,l]);return(0,a.useEffect)(()=>{if(!l||!m.current)return;const e={root:f.current,rootMargin:"100px",threshold:.1};return p.current=new IntersectionObserver(h,e),p.current.observe(m.current),()=>{p.current&&p.current.disconnect()}},[h,l]),(0,Qr.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full",children:[(0,Qr.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qr.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[e," (",t,")"]}),(0,Qr.jsx)("button",{onClick:n,disabled:s,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-blue-700 transition-colors text-sm disabled:opacity-50",children:s?u("common.creating"):r})]}),i]}),(0,Qr.jsxs)("div",{ref:f,className:"flex-1 overflow-y-auto",children:[o,l&&(0,Qr.jsxs)("div",{ref:m,className:"py-4 text-center",children:[d&&(0,Qr.jsx)("p",{className:"text-sm text-gray-500",children:u("common.loadingMore")}),!c&&!d&&t>0&&(0,Qr.jsx)("p",{className:"text-sm text-gray-400",children:u("common.endOfList")})]})]})]})},na=cn("sliders-horizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),sa=({searchConfig:e,filtersConfig:t=[]})=>{const{t:r}=k(),[n,s]=(0,a.useState)(!1),o=(0,a.useRef)(null);return(0,a.useEffect)(()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,Qr.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,Qr.jsxs)("div",{className:"relative flex-grow",children:[(0,Qr.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,Qr.jsx)(Tn,{className:"w-5 h-5 text-gray-400"})}),(0,Qr.jsx)("input",{type:"text",value:e.value,onChange:e.onChange,placeholder:e.placeholder||r("common.search"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),e.isLoading&&(0,Qr.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"})})]}),(0,Qr.jsxs)("div",{className:"relative",ref:o,children:[(0,Qr.jsxs)("button",{onClick:()=>s(!n),className:"w-full md:w-auto px-4 py-2 border border-gray-300 bg-white rounded-lg hover:bg-gray-50 text-gray-600 font-medium text-sm flex items-center justify-center gap-2",children:[(0,Qr.jsx)(na,{className:"w-4 h-4"}),r("common.filters")]}),n&&(0,Qr.jsx)("div",{className:"absolute top-full right-0 mt-2 w-72 bg-white border border-gray-200 rounded-lg shadow-xl z-10",children:(0,Qr.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Qr.jsx)("h4",{className:"font-semibold text-gray-800",children:r("common.filterBy")}),t.filter(e=>e&&void 0!==e.value&&e.options).map((e,t)=>(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.label||`Filter ${t+1}`}),(0,Qr.jsx)("select",{value:e.value,onChange:t=>e.onChange(t.target.value),disabled:e.isLoading,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-lg text-gray-800 text-sm focus:ring-blue-500 focus:border-blue-500",children:(e.options||[]).map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))})]},t))]})})]})]})},aa=cn("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),oa=e=>e?.title?.rendered||e?.title||"Curso sin ttulo",ia=({course:e,isSelected:t,onClick:r})=>{const n=or("p-4 cursor-pointer border-l-4 transition-colors duration-150",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t});return(0,Qr.jsxs)("div",{className:n,onClick:()=>r(e),children:[(0,Qr.jsx)("h3",{className:"font-semibold text-gray-800 truncate",children:oa(e)}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(aa,{className:"w-3 h-3"}),(0,Qr.jsxs)("span",{children:[e.lesson_count||0," Lecciones"]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(Nn,{className:"w-3 h-3"}),(0,Qr.jsxs)("span",{children:[e.student_count||0," Estudiantes"]})]})]})]})},la=cn("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),ca=cn("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),da=cn("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ua=cn("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),fa=cn("sliders-vertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]),pa=cn("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var ma=o(5708),ha=o.n(ma),ga=o(5795),xa=o.n(ga);const ya="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function ba(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function va(e){return"nodeType"in e}function wa(e){var t,r;return e?ba(e)?e:va(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function ja(e){const{Document:t}=wa(e);return e instanceof t}function Na(e){return!ba(e)&&e instanceof wa(e).HTMLElement}function ka(e){return e instanceof wa(e).SVGElement}function _a(e){return e?ba(e)?e.document:va(e)?ja(e)?e:Na(e)||ka(e)?e.ownerDocument:document:document:document}const Ca=ya?a.useLayoutEffect:a.useEffect;function Sa(e){const t=(0,a.useRef)(e);return Ca(()=>{t.current=e}),(0,a.useCallback)(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function Ea(e,t){void 0===t&&(t=[e]);const r=(0,a.useRef)(e);return Ca(()=>{r.current!==e&&(r.current=e)},t),r}function Oa(e,t){const r=(0,a.useRef)();return(0,a.useMemo)(()=>{const t=e(r.current);return r.current=t,t},[...t])}function Ma(e){const t=Sa(e),r=(0,a.useRef)(null),n=(0,a.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,n]}function Ta(e){const t=(0,a.useRef)();return(0,a.useEffect)(()=>{t.current=e},[e]),t.current}let Pa={};function Aa(e,t){return(0,a.useMemo)(()=>{if(t)return t;const r=null==Pa[e]?0:Pa[e]+1;return Pa[e]=r,e+"-"+r},[e,t])}function qa(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((t,r)=>{const n=Object.entries(r);for(const[r,s]of n){const n=t[r];null!=n&&(t[r]=n+e*s)}return t},{...t})}}const za=qa(1),Da=qa(-1);function La(e){if(!e)return!1;const{KeyboardEvent:t}=wa(e.target);return t&&e instanceof t}function Ia(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=wa(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const Ra=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Ra.Translate.toString(e),Ra.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),$a="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Fa(e){return e.matches($a)?e:e.querySelector($a)}const Ba={display:"none"};function Ua(e){let{id:t,value:r}=e;return i().createElement("div",{id:t,style:Ba},r)}function Ha(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return i().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}const Wa=(0,a.createContext)(null),Qa={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Va={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Ka(e){let{announcements:t=Va,container:r,hiddenTextDescribedById:n,screenReaderInstructions:s=Qa}=e;const{announce:o,announcement:l}=function(){const[e,t]=(0,a.useState)(""),r=(0,a.useCallback)(e=>{null!=e&&t(e)},[]);return{announce:r,announcement:e}}(),c=Aa("DndLiveRegion"),[d,u]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{u(!0)},[]),function(e){const t=(0,a.useContext)(Wa);(0,a.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,a.useMemo)(()=>({onDragStart(e){let{active:r}=e;o(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:n}=e;t.onDragMove&&o(t.onDragMove({active:r,over:n}))},onDragOver(e){let{active:r,over:n}=e;o(t.onDragOver({active:r,over:n}))},onDragEnd(e){let{active:r,over:n}=e;o(t.onDragEnd({active:r,over:n}))},onDragCancel(e){let{active:r,over:n}=e;o(t.onDragCancel({active:r,over:n}))}}),[o,t])),!d)return null;const f=i().createElement(i().Fragment,null,i().createElement(Ua,{id:n,value:s.draggable}),i().createElement(Ha,{id:c,announcement:l}));return r?(0,ga.createPortal)(f,r):f}var Ya,Ga;function Xa(){}function Za(e,t){return(0,a.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function Ja(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(Ga=Ya||(Ya={})).DragStart="dragStart",Ga.DragMove="dragMove",Ga.DragEnd="dragEnd",Ga.DragCancel="dragCancel",Ga.DragOver="dragOver",Ga.RegisterDroppable="registerDroppable",Ga.SetDroppableDisabled="setDroppableDisabled",Ga.UnregisterDroppable="unregisterDroppable";const eo=Object.freeze({x:0,y:0});function to(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ro(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function no(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function so(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}const ao=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=so(t,t.left,t.top),a=[];for(const e of n){const{id:t}=e,n=r.get(t);if(n){const r=to(so(n),s);a.push({id:t,data:{droppableContainer:e,value:r}})}}return a.sort(ro)};function oo(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=s-n,i=a-r;if(n<s&&r<a){const r=t.width*t.height,n=e.width*e.height,s=o*i;return Number((s/(r+n-s)).toFixed(4))}return 0}const io=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=[];for(const e of n){const{id:n}=e,a=r.get(n);if(a){const r=oo(a,t);r>0&&s.push({id:n,data:{droppableContainer:e,value:r}})}}return s.sort(no)};function lo(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:eo}function co(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}const uo=co(1);const fo={ignoreTransform:!1};function po(e,t){void 0===t&&(t=fo);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:n}=wa(e).getComputedStyle(e);t&&(r=function(e,t,r){const n=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!n)return e;const{scaleX:s,scaleY:a,x:o,y:i}=n,l=e.left-o-(1-s)*parseFloat(r),c=e.top-i-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),d=s?e.width/s:e.width,u=a?e.height/a:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(r,t,n))}const{top:n,left:s,width:a,height:o,bottom:i,right:l}=r;return{top:n,left:s,width:a,height:o,bottom:i,right:l}}function mo(e){return po(e,{ignoreTransform:!0})}function ho(e,t){const r=[];return e?function n(s){if(null!=t&&r.length>=t)return r;if(!s)return r;if(ja(s)&&null!=s.scrollingElement&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!Na(s)||ka(s))return r;if(r.includes(s))return r;const a=wa(e).getComputedStyle(s);return s!==e&&function(e,t){void 0===t&&(t=wa(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const n=t[e];return"string"==typeof n&&r.test(n)})}(s,a)&&r.push(s),function(e,t){return void 0===t&&(t=wa(e).getComputedStyle(e)),"fixed"===t.position}(s,a)?r:n(s.parentNode)}(e):r}function go(e){const[t]=ho(e,1);return null!=t?t:null}function xo(e){return ya&&e?ba(e)?e:va(e)?ja(e)||e===_a(e).scrollingElement?window:Na(e)?e:null:null:null}function yo(e){return ba(e)?e.scrollX:e.scrollLeft}function bo(e){return ba(e)?e.scrollY:e.scrollTop}function vo(e){return{x:yo(e),y:bo(e)}}var wo;function jo(e){return!(!ya||!e)&&e===document.scrollingElement}function No(e){const t={x:0,y:0},r=jo(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(wo||(wo={}));const ko={x:.2,y:.2};function _o(e,t,r,n,s){let{top:a,left:o,right:i,bottom:l}=r;void 0===n&&(n=10),void 0===s&&(s=ko);const{isTop:c,isBottom:d,isLeft:u,isRight:f}=No(e),p={x:0,y:0},m={x:0,y:0},h=t.height*s.y,g=t.width*s.x;return!c&&a<=t.top+h?(p.y=wo.Backward,m.y=n*Math.abs((t.top+h-a)/h)):!d&&l>=t.bottom-h&&(p.y=wo.Forward,m.y=n*Math.abs((t.bottom-h-l)/h)),!f&&i>=t.right-g?(p.x=wo.Forward,m.x=n*Math.abs((t.right-g-i)/g)):!u&&o<=t.left+g&&(p.x=wo.Backward,m.x=n*Math.abs((t.left+g-o)/g)),{direction:p,speed:m}}function Co(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:r,right:n,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:s,width:e.clientWidth,height:e.clientHeight}}function So(e){return e.reduce((e,t)=>za(e,vo(t)),eo)}const Eo=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+yo(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+bo(t),0)}]];class Oo{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ho(t),n=So(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,s]of Eo)for(const a of t)Object.defineProperty(this,a,{get:()=>{const t=s(r),o=n[e]-t;return this.rect[a]+o},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Mo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function To(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}var Po,Ao,qo;function zo(e){e.preventDefault()}function Do(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Po||(Po={})),(qo=Ao||(Ao={})).Space="Space",qo.Down="ArrowDown",qo.Right="ArrowRight",qo.Left="ArrowLeft",qo.Up="ArrowUp",qo.Esc="Escape",qo.Enter="Enter",qo.Tab="Tab";const Lo={start:[Ao.Space,Ao.Enter],cancel:[Ao.Esc],end:[Ao.Space,Ao.Enter,Ao.Tab]},Io=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Ao.Right:return{...r,x:r.x+25};case Ao.Left:return{...r,x:r.x-25};case Ao.Down:return{...r,y:r.y+25};case Ao.Up:return{...r,y:r.y-25}}};class Ro{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Mo(_a(t)),this.windowListeners=new Mo(wa(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Po.Resize,this.handleCancel),this.windowListeners.add(Po.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Po.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&function(e,t){if(void 0===t&&(t=po),!e)return;const{top:r,left:n,bottom:s,right:a}=t(e);go(e)&&(s<=0||a<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(r),t(eo)}handleKeyDown(e){if(La(e)){const{active:t,context:r,options:n}=this.props,{keyboardCodes:s=Lo,coordinateGetter:a=Io,scrollBehavior:o="smooth"}=n,{code:i}=e;if(s.end.includes(i))return void this.handleEnd(e);if(s.cancel.includes(i))return void this.handleCancel(e);const{collisionRect:l}=r.current,c=l?{x:l.left,y:l.top}:eo;this.referenceCoordinates||(this.referenceCoordinates=c);const d=a(e,{active:t,context:r.current,currentCoordinates:c});if(d){const t=Da(d,c),n={x:0,y:0},{scrollableAncestors:s}=r.current;for(const r of s){const s=e.code,{isTop:a,isRight:i,isLeft:l,isBottom:c,maxScroll:u,minScroll:f}=No(r),p=Co(r),m={x:Math.min(s===Ao.Right?p.right-p.width/2:p.right,Math.max(s===Ao.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(s===Ao.Down?p.bottom-p.height/2:p.bottom,Math.max(s===Ao.Down?p.top:p.top+p.height/2,d.y))},h=s===Ao.Right&&!i||s===Ao.Left&&!l,g=s===Ao.Down&&!c||s===Ao.Up&&!a;if(h&&m.x!==d.x){const e=r.scrollLeft+t.x,a=s===Ao.Right&&e<=u.x||s===Ao.Left&&e>=f.x;if(a&&!t.y)return void r.scrollTo({left:e,behavior:o});n.x=a?r.scrollLeft-e:s===Ao.Right?r.scrollLeft-u.x:r.scrollLeft-f.x,n.x&&r.scrollBy({left:-n.x,behavior:o});break}if(g&&m.y!==d.y){const e=r.scrollTop+t.y,a=s===Ao.Down&&e<=u.y||s===Ao.Up&&e>=f.y;if(a&&!t.x)return void r.scrollTo({top:e,behavior:o});n.y=a?r.scrollTop-e:s===Ao.Down?r.scrollTop-u.y:r.scrollTop-f.y,n.y&&r.scrollBy({top:-n.y,behavior:o});break}}this.handleMove(e,za(Da(d,this.referenceCoordinates),n))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function $o(e){return Boolean(e&&"distance"in e)}function Fo(e){return Boolean(e&&"delay"in e)}Ro.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=Lo,onActivation:s}=t,{active:a}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const t=a.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==s||s({event:e.nativeEvent}),0))}return!1}}];class Bo{constructor(e,t,r){var n;void 0===r&&(r=function(e){const{EventTarget:t}=wa(e);return e instanceof t?e:_a(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:a}=s;this.props=e,this.events=t,this.document=_a(a),this.documentListeners=new Mo(this.document),this.listeners=new Mo(r),this.windowListeners=new Mo(wa(a)),this.initialCoordinates=null!=(n=Ia(s))?n:eo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Po.Resize,this.handleCancel),this.windowListeners.add(Po.DragStart,zo),this.windowListeners.add(Po.VisibilityChange,this.handleCancel),this.windowListeners.add(Po.ContextMenu,zo),this.documentListeners.add(Po.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fo(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if($o(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Po.Click,Do,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Po.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:n,props:s}=this,{onMove:a,options:{activationConstraint:o}}=s;if(!n)return;const i=null!=(t=Ia(e))?t:eo,l=Da(n,i);if(!r&&o){if($o(o)){if(null!=o.tolerance&&To(l,o.tolerance))return this.handleCancel();if(To(l,o.distance))return this.handleStart()}return Fo(o)&&To(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}e.cancelable&&e.preventDefault(),a(i)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Ao.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Uo={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ho extends Bo{constructor(e){const{event:t}=e,r=_a(t.target);super(e,Uo,r)}}Ho.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!(!r.isPrimary||0!==r.button||(null==n||n({event:r}),0))}}];const Wo={move:{name:"mousemove"},end:{name:"mouseup"}};var Qo;!function(e){e[e.RightClick=2]="RightClick"}(Qo||(Qo={})),class extends Bo{constructor(e){super(e,Wo,_a(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==Qo.RightClick&&(null==n||n({event:r}),!0)}}];const Vo={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var Ko,Yo;(class extends Bo{constructor(e){super(e,Vo)}static setup(){return window.addEventListener(Vo.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Vo.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:s}=r;return!(s.length>1||(null==n||n({event:r}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Ko||(Ko={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(Yo||(Yo={}));const Go={x:{[wo.Backward]:!1,[wo.Forward]:!1},y:{[wo.Backward]:!1,[wo.Forward]:!1}};var Xo,Zo;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(Xo||(Xo={})),function(e){e.Optimized="optimized"}(Zo||(Zo={}));const Jo=new Map;function ei(e,t){return Oa(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function ti(e){let{callback:t,disabled:r}=e;const n=Sa(t),s=(0,a.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(n)},[r]);return(0,a.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}function ri(e){return new Oo(po(e),e)}function ni(e,t,r){void 0===t&&(t=ri);const[n,s]=(0,a.useState)(null);function o(){s(n=>{if(!e)return null;var s;if(!1===e.isConnected)return null!=(s=null!=n?n:r)?s:null;const a=t(e);return JSON.stringify(n)===JSON.stringify(a)?n:a})}const i=function(e){let{callback:t,disabled:r}=e;const n=Sa(t),s=(0,a.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(n)},[n,r]);return(0,a.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}({callback(t){if(e)for(const r of t){const{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){o();break}}}}),l=ti({callback:o});return Ca(()=>{o(),e?(null==l||l.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==i||i.disconnect())},[e]),n}const si=[];function ai(e,t){void 0===t&&(t=[]);const r=(0,a.useRef)(null);return(0,a.useEffect)(()=>{r.current=null},t),(0,a.useEffect)(()=>{const t=e!==eo;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?Da(e,r.current):eo}function oi(e){return(0,a.useMemo)(()=>e?function(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}const ii=[];const li=[{sensor:Ho,options:{}},{sensor:Ro,options:{}}],ci={current:{}},di={draggable:{measure:mo},droppable:{measure:mo,strategy:Xo.WhileDragging,frequency:Zo.Optimized},dragOverlay:{measure:po}};class ui extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}const fi={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ui,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Xa},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:di,measureDroppableContainers:Xa,windowRect:null,measuringScheduled:!1},pi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Xa,draggableNodes:new Map,over:null,measureDroppableContainers:Xa},mi=(0,a.createContext)(pi),hi=(0,a.createContext)(fi);function gi(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ui}}}function xi(e,t){switch(t.type){case Ya.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ya.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ya.DragEnd:case Ya.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ya.RegisterDroppable:{const{element:r}=t,{id:n}=r,s=new ui(e.droppable.containers);return s.set(n,r),{...e,droppable:{...e.droppable,containers:s}}}case Ya.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const o=new ui(e.droppable.containers);return o.set(r,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:o}}}case Ya.UnregisterDroppable:{const{id:r,key:n}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const a=new ui(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function yi(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:s}=(0,a.useContext)(mi),o=Ta(n),i=Ta(null==r?void 0:r.id);return(0,a.useEffect)(()=>{if(!t&&!n&&o&&null!=i){if(!La(o))return;if(document.activeElement===o.target)return;const e=s.get(i);if(!e)return;const{activatorNode:t,node:r}=e;if(!t.current&&!r.current)return;requestAnimationFrame(()=>{for(const e of[t.current,r.current]){if(!e)continue;const t=Fa(e);if(t){t.focus();break}}})}},[n,t,s,i,o]),null}const bi=(0,a.createContext)({...eo,scaleX:1,scaleY:1});var vi;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(vi||(vi={}));const wi=(0,a.memo)(function(e){var t,r,n,s;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=li,collisionDetection:f=io,measuring:p,modifiers:m,...h}=e;const g=(0,a.useReducer)(xi,void 0,gi),[x,y]=g,[b,v]=function(){const[e]=(0,a.useState)(()=>new Set),t=(0,a.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]),r=(0,a.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]);return[r,t]}(),[w,j]=(0,a.useState)(vi.Uninitialized),N=w===vi.Initialized,{draggable:{active:k,nodes:_,translate:C},droppable:{containers:S}}=x,E=null!=k?_.get(k):null,O=(0,a.useRef)({initial:null,translated:null}),M=(0,a.useMemo)(()=>{var e;return null!=k?{id:k,data:null!=(e=null==E?void 0:E.data)?e:ci,rect:O}:null},[k,E]),T=(0,a.useRef)(null),[P,A]=(0,a.useState)(null),[q,z]=(0,a.useState)(null),D=Ea(h,Object.values(h)),L=Aa("DndDescribedBy",o),I=(0,a.useMemo)(()=>S.getEnabled(),[S]),R=function(e){return(0,a.useMemo)(()=>({draggable:{...di.draggable,...null==e?void 0:e.draggable},droppable:{...di.droppable,...null==e?void 0:e.droppable},dragOverlay:{...di.dragOverlay,...null==e?void 0:e.dragOverlay}}),[null==e?void 0:e.draggable,null==e?void 0:e.droppable,null==e?void 0:e.dragOverlay])}(p),{droppableRects:$,measureDroppableContainers:F,measuringScheduled:B}=function(e,t){let{dragging:r,dependencies:n,config:s}=t;const[o,i]=(0,a.useState)(null),{frequency:l,measure:c,strategy:d}=s,u=(0,a.useRef)(e),f=function(){switch(d){case Xo.Always:return!1;case Xo.BeforeDragging:return r;default:return!r}}(),p=Ea(f),m=(0,a.useCallback)(function(e){void 0===e&&(e=[]),p.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[p]),h=(0,a.useRef)(null),g=Oa(t=>{if(f&&!r)return Jo;if(!t||t===Jo||u.current!==e||null!=o){const t=new Map;for(let r of e){if(!r)continue;if(o&&o.length>0&&!o.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}const e=r.node.current,n=e?new Oo(c(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,o,r,f,c]);return(0,a.useEffect)(()=>{u.current=e},[e]),(0,a.useEffect)(()=>{f||m()},[r,f]),(0,a.useEffect)(()=>{o&&o.length>0&&i(null)},[JSON.stringify(o)]),(0,a.useEffect)(()=>{f||"number"!=typeof l||null!==h.current||(h.current=setTimeout(()=>{m(),h.current=null},l))},[l,f,m,...n]),{droppableRects:g,measureDroppableContainers:m,measuringScheduled:null!=o}}(I,{dragging:N,dependencies:[C.x,C.y],config:R.droppable}),U=function(e,t){const r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return Oa(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(_,k),H=(0,a.useMemo)(()=>q?Ia(q):null,[q]),W=function(){const e=!1===(null==P?void 0:P.autoScrollEnabled),t="object"==typeof c?!1===c.enabled:!1===c,r=N&&!e&&!t;return"object"==typeof c?{...c,enabled:r}:{enabled:r}}(),Q=function(e,t){return ei(e,t)}(U,R.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:n,config:s=!0}=e;const o=(0,a.useRef)(!1),{x:i,y:l}="boolean"==typeof s?{x:s,y:s}:s;Ca(()=>{if(!i&&!l||!t)return void(o.current=!1);if(o.current||!n)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const s=lo(r(e),n);if(i||(s.x=0),l||(s.y=0),o.current=!0,Math.abs(s.x)>0||Math.abs(s.y)>0){const t=go(e);t&&t.scrollBy({top:s.y,left:s.x})}},[t,i,l,n,r])}({activeNode:null!=k?_.get(k):null,config:W.layoutShiftCompensation,initialRect:Q,measure:R.draggable.measure});const V=ni(U,R.draggable.measure,Q),K=ni(U?U.parentElement:null),Y=(0,a.useRef)({activatorEvent:null,active:null,activeNode:U,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:S,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),G=S.getNodeFor(null==(t=Y.current.over)?void 0:t.id),X=function(e){let{measure:t}=e;const[r,n]=(0,a.useState)(null),s=ti({callback:(0,a.useCallback)(e=>{for(const{target:r}of e)if(Na(r)){n(e=>{const n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),o=(0,a.useCallback)(e=>{const r=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Na(t)?t:e}(e);null==s||s.disconnect(),r&&(null==s||s.observe(r)),n(r?t(r):null)},[t,s]),[i,l]=Ma(o);return(0,a.useMemo)(()=>({nodeRef:i,rect:r,setRef:l}),[r,i,l])}({measure:R.dragOverlay.measure}),Z=null!=(r=X.nodeRef.current)?r:U,J=N?null!=(n=X.rect)?n:V:null,ee=Boolean(X.nodeRef.current&&X.rect),te=lo(re=ee?null:V,ei(re));var re;const ne=oi(Z?wa(Z):null),se=function(e){const t=(0,a.useRef)(e),r=Oa(r=>e?r&&r!==si&&e&&t.current&&e.parentNode===t.current.parentNode?r:ho(e):si,[e]);return(0,a.useEffect)(()=>{t.current=e},[e]),r}(N?null!=G?G:U:null),ae=function(e,t){void 0===t&&(t=po);const[r]=e,n=oi(r?wa(r):null),[s,o]=(0,a.useState)(ii);function i(){o(()=>e.length?e.map(e=>jo(e)?n:new Oo(t(e),e)):ii)}const l=ti({callback:i});return Ca(()=>{null==l||l.disconnect(),i(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),s}(se),oe=function(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}(m,{transform:{x:C.x-te.x,y:C.y-te.y,scaleX:1,scaleY:1},activatorEvent:q,active:M,activeNodeRect:V,containerNodeRect:K,draggingNodeRect:J,over:Y.current.over,overlayNodeRect:X.rect,scrollableAncestors:se,scrollableAncestorRects:ae,windowRect:ne}),ie=H?za(H,C):null,le=function(e){const[t,r]=(0,a.useState)(null),n=(0,a.useRef)(e),s=(0,a.useCallback)(e=>{const t=xo(e.target);t&&r(e=>e?(e.set(t,vo(t)),new Map(e)):null)},[]);return(0,a.useEffect)(()=>{const t=n.current;if(e!==t){a(t);const o=e.map(e=>{const t=xo(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,vo(t)]):null}).filter(e=>null!=e);r(o.length?new Map(o):null),n.current=e}return()=>{a(e),a(t)};function a(e){e.forEach(e=>{const t=xo(e);null==t||t.removeEventListener("scroll",s)})}},[s,e]),(0,a.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>za(e,t),eo):So(e):eo,[e,t])}(se),ce=ai(le),de=ai(le,[V]),ue=za(oe,ce),fe=J?uo(J,oe):null,pe=M&&fe?f({active:M,collisionRect:fe,droppableRects:$,droppableContainers:I,pointerCoordinates:ie}):null,me=function(e){if(!e||0===e.length)return null;const[t]=e;return t.id}(pe),[he,ge]=(0,a.useState)(null),xe=function(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}(ee?oe:za(oe,de),null!=(s=null==he?void 0:he.rect)?s:null,V),ye=(0,a.useRef)(null),be=(0,a.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==T.current)return;const s=_.get(T.current);if(!s)return;const a=e.nativeEvent,o=new r({active:T.current,activeNode:s,event:a,options:n,context:Y,onAbort(e){if(!_.get(e))return;const{onDragAbort:t}=D.current,r={id:e};null==t||t(r),b({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!_.get(e))return;const{onDragPending:s}=D.current,a={id:e,constraint:t,initialCoordinates:r,offset:n};null==s||s(a),b({type:"onDragPending",event:a})},onStart(e){const t=T.current;if(null==t)return;const r=_.get(t);if(!r)return;const{onDragStart:n}=D.current,s={activatorEvent:a,active:{id:t,data:r.data,rect:O}};(0,ga.unstable_batchedUpdates)(()=>{null==n||n(s),j(vi.Initializing),y({type:Ya.DragStart,initialCoordinates:e,active:t}),b({type:"onDragStart",event:s}),A(ye.current),z(a)})},onMove(e){y({type:Ya.DragMove,coordinates:e})},onEnd:i(Ya.DragEnd),onCancel:i(Ya.DragCancel)});function i(e){return async function(){const{active:t,collisions:r,over:n,scrollAdjustedTranslate:s}=Y.current;let o=null;if(t&&s){const{cancelDrop:i}=D.current;o={activatorEvent:a,active:t,collisions:r,delta:s,over:n},e===Ya.DragEnd&&"function"==typeof i&&await Promise.resolve(i(o))&&(e=Ya.DragCancel)}T.current=null,(0,ga.unstable_batchedUpdates)(()=>{y({type:e}),j(vi.Uninitialized),ge(null),A(null),z(null),ye.current=null;const t=e===Ya.DragEnd?"onDragEnd":"onDragCancel";if(o){const e=D.current[t];null==e||e(o),b({type:t,event:o})}})}}ye.current=o},[_]),ve=(0,a.useCallback)((e,t)=>(r,n)=>{const s=r.nativeEvent,a=_.get(n);if(null!==T.current||!a||s.dndKit||s.defaultPrevented)return;const o={active:a};!0===e(r,t.options,o)&&(s.dndKit={capturedBy:t.sensor},T.current=n,be(r,t))},[_,be]),we=function(e,t){return(0,a.useMemo)(()=>e.reduce((e,r)=>{const{sensor:n}=r;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,r)}))]},[]),[e,t])}(u,ve);!function(e){(0,a.useEffect)(()=>{if(!ya)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(u),Ca(()=>{V&&w===vi.Initializing&&j(vi.Initialized)},[V,w]),(0,a.useEffect)(()=>{const{onDragMove:e}=D.current,{active:t,activatorEvent:r,collisions:n,over:s}=Y.current;if(!t||!r)return;const a={active:t,activatorEvent:r,collisions:n,delta:{x:ue.x,y:ue.y},over:s};(0,ga.unstable_batchedUpdates)(()=>{null==e||e(a),b({type:"onDragMove",event:a})})},[ue.x,ue.y]),(0,a.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:s}=Y.current;if(!e||null==T.current||!t||!s)return;const{onDragOver:a}=D.current,o=n.get(me),i=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:r,delta:{x:s.x,y:s.y},over:i};(0,ga.unstable_batchedUpdates)(()=>{ge(i),null==a||a(l),b({type:"onDragOver",event:l})})},[me]),Ca(()=>{Y.current={activatorEvent:q,active:M,activeNode:U,collisionRect:fe,collisions:pe,droppableRects:$,draggableNodes:_,draggingNode:Z,draggingNodeRect:J,droppableContainers:S,over:he,scrollableAncestors:se,scrollAdjustedTranslate:ue},O.current={initial:J,translated:fe}},[M,U,pe,fe,_,Z,J,$,S,he,se,ue]),function(e){let{acceleration:t,activator:r=Ko.Pointer,canScroll:n,draggingRect:s,enabled:o,interval:i=5,order:l=Yo.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:f,threshold:p}=e;const m=function(e){let{delta:t,disabled:r}=e;const n=Ta(t);return Oa(e=>{if(r||!n||!e)return Go;const s=Math.sign(t.x-n.x),a=Math.sign(t.y-n.y);return{x:{[wo.Backward]:e.x[wo.Backward]||-1===s,[wo.Forward]:e.x[wo.Forward]||1===s},y:{[wo.Backward]:e.y[wo.Backward]||-1===a,[wo.Forward]:e.y[wo.Forward]||1===a}}},[r,t,n])}({delta:f,disabled:!o}),[h,g]=function(){const e=(0,a.useRef)(null),t=(0,a.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]);return[t,(0,a.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),x=(0,a.useRef)({x:0,y:0}),y=(0,a.useRef)({x:0,y:0}),b=(0,a.useMemo)(()=>{switch(r){case Ko.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Ko.DraggableRect:return s}},[r,s,c]),v=(0,a.useRef)(null),w=(0,a.useCallback)(()=>{const e=v.current;if(!e)return;const t=x.current.x*y.current.x,r=x.current.y*y.current.y;e.scrollBy(t,r)},[]),j=(0,a.useMemo)(()=>l===Yo.TreeOrder?[...d].reverse():d,[l,d]);(0,a.useEffect)(()=>{if(o&&d.length&&b){for(const e of j){if(!1===(null==n?void 0:n(e)))continue;const r=d.indexOf(e),s=u[r];if(!s)continue;const{direction:a,speed:o}=_o(e,s,b,t,p);for(const e of["x","y"])m[e][a[e]]||(o[e]=0,a[e]=0);if(o.x>0||o.y>0)return g(),v.current=e,h(w,i),x.current=o,void(y.current=a)}x.current={x:0,y:0},y.current={x:0,y:0},g()}else g()},[t,w,n,g,o,i,JSON.stringify(b),JSON.stringify(m),h,d,j,u,JSON.stringify(p)])}({...W,delta:C,draggingRect:fe,pointerCoordinates:ie,scrollableAncestors:se,scrollableAncestorRects:ae});const je=(0,a.useMemo)(()=>({active:M,activeNode:U,activeNodeRect:V,activatorEvent:q,collisions:pe,containerNodeRect:K,dragOverlay:X,draggableNodes:_,droppableContainers:S,droppableRects:$,over:he,measureDroppableContainers:F,scrollableAncestors:se,scrollableAncestorRects:ae,measuringConfiguration:R,measuringScheduled:B,windowRect:ne}),[M,U,V,q,pe,K,X,_,S,$,he,F,se,ae,R,B,ne]),Ne=(0,a.useMemo)(()=>({activatorEvent:q,activators:we,active:M,activeNodeRect:V,ariaDescribedById:{draggable:L},dispatch:y,draggableNodes:_,over:he,measureDroppableContainers:F}),[q,we,M,V,y,L,_,he,F]);return i().createElement(Wa.Provider,{value:v},i().createElement(mi.Provider,{value:Ne},i().createElement(hi.Provider,{value:je},i().createElement(bi.Provider,{value:xe},d)),i().createElement(yi,{disabled:!1===(null==l?void 0:l.restoreFocus)})),i().createElement(Ka,{...l,hiddenTextDescribedById:L}))}),ji=(0,a.createContext)(null),Ni="button";const ki={timeout:25};function _i(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function Ci(e,t){return e.reduce((e,r,n)=>{const s=t.get(r);return s&&(e[n]=s),e},Array(e.length))}function Si(e){return null!==e&&e>=0}const Ei=e=>{let{rects:t,activeIndex:r,overIndex:n,index:s}=e;const a=_i(t,n,r),o=t[s],i=a[s];return i&&o?{x:i.left-o.left,y:i.top-o.top,scaleX:i.width/o.width,scaleY:i.height/o.height}:null},Oi={scaleX:1,scaleY:1},Mi=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:s,rects:a,overIndex:o}=e;const i=null!=(t=a[r])?t:n;if(!i)return null;if(s===r){const e=a[o];return e?{x:0,y:r<o?e.top+e.height-(i.top+i.height):e.top-i.top,...Oi}:null}const l=function(e,t,r){const n=e[t],s=e[t-1],a=e[t+1];return n?r<t?s?n.top-(s.top+s.height):a?a.top-(n.top+n.height):0:a?a.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}(a,s,r);return s>r&&s<=o?{x:0,y:-i.height-l,...Oi}:s<r&&s>=o?{x:0,y:i.height+l,...Oi}:{x:0,y:0,...Oi}},Ti="Sortable",Pi=i().createContext({activeIndex:-1,containerId:Ti,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Ei,disabled:{draggable:!1,droppable:!1}});function Ai(e){let{children:t,id:r,items:n,strategy:s=Ei,disabled:o=!1}=e;const{active:l,dragOverlay:c,droppableRects:d,over:u,measureDroppableContainers:f}=(0,a.useContext)(hi),p=Aa(Ti,r),m=Boolean(null!==c.rect),h=(0,a.useMemo)(()=>n.map(e=>"object"==typeof e&&"id"in e?e.id:e),[n]),g=null!=l,x=l?h.indexOf(l.id):-1,y=u?h.indexOf(u.id):-1,b=(0,a.useRef)(h),v=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(h,b.current),w=-1!==y&&-1===x||v,j=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(o);Ca(()=>{v&&g&&f(h)},[v,h,g,f]),(0,a.useEffect)(()=>{b.current=h},[h]);const N=(0,a.useMemo)(()=>({activeIndex:x,containerId:p,disabled:j,disableTransforms:w,items:h,overIndex:y,useDragOverlay:m,sortedRects:Ci(h,d),strategy:s}),[x,p,j.draggable,j.droppable,w,h,y,d,m,s]);return i().createElement(Pi.Provider,{value:N},t)}const qi=e=>{let{id:t,items:r,activeIndex:n,overIndex:s}=e;return _i(r,n,s).indexOf(t)},zi=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:s,items:a,newIndex:o,previousItems:i,previousContainerId:l,transition:c}=e;return!(!c||!n||i!==a&&s===o||!r&&(o===s||t!==l))},Di={duration:200,easing:"ease"},Li="transform",Ii=Ra.Transition.toString({property:Li,duration:0,easing:"linear"}),Ri={roleDescription:"sortable"};function $i(e){let{animateLayoutChanges:t=zi,attributes:r,disabled:n,data:s,getNewIndex:o=qi,id:i,strategy:l,resizeObserverConfig:c,transition:d=Di}=e;const{items:u,containerId:f,activeIndex:p,disabled:m,disableTransforms:h,sortedRects:g,overIndex:x,useDragOverlay:y,strategy:b}=(0,a.useContext)(Pi),v=function(e,t){var r,n;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(n,m),w=u.indexOf(i),j=(0,a.useMemo)(()=>({sortable:{containerId:f,index:w,items:u},...s}),[f,s,w,u]),N=(0,a.useMemo)(()=>u.slice(u.indexOf(i)),[u,i]),{rect:k,node:_,isOver:C,setNodeRef:S}=function(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:s}=e;const o=Aa("Droppable"),{active:i,dispatch:l,over:c,measureDroppableContainers:d}=(0,a.useContext)(mi),u=(0,a.useRef)({disabled:r}),f=(0,a.useRef)(!1),p=(0,a.useRef)(null),m=(0,a.useRef)(null),{disabled:h,updateMeasurementsFor:g,timeout:x}={...ki,...s},y=Ea(null!=g?g:n),b=ti({callback:(0,a.useCallback)(()=>{f.current?(null!=m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(y.current)?y.current:[y.current]),m.current=null},x)):f.current=!0},[x]),disabled:h||!i}),v=(0,a.useCallback)((e,t)=>{b&&(t&&(b.unobserve(t),f.current=!1),e&&b.observe(e))},[b]),[w,j]=Ma(v),N=Ea(t);return(0,a.useEffect)(()=>{b&&w.current&&(b.disconnect(),f.current=!1,b.observe(w.current))},[w,b]),(0,a.useEffect)(()=>(l({type:Ya.RegisterDroppable,element:{id:n,key:o,disabled:r,node:w,rect:p,data:N}}),()=>l({type:Ya.UnregisterDroppable,key:o,id:n})),[n]),(0,a.useEffect)(()=>{r!==u.current.disabled&&(l({type:Ya.SetDroppableDisabled,id:n,key:o,disabled:r}),u.current.disabled=r)},[n,o,r,l]),{active:i,rect:p,isOver:(null==c?void 0:c.id)===n,node:w,over:c,setNodeRef:j}}({id:i,data:j,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...c}}),{active:E,activatorEvent:O,activeNodeRect:M,attributes:T,setNodeRef:P,listeners:A,isDragging:q,over:z,setActivatorNodeRef:D,transform:L}=function(e){let{id:t,data:r,disabled:n=!1,attributes:s}=e;const o=Aa("Draggable"),{activators:i,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:f,over:p}=(0,a.useContext)(mi),{role:m=Ni,roleDescription:h="draggable",tabIndex:g=0}=null!=s?s:{},x=(null==c?void 0:c.id)===t,y=(0,a.useContext)(x?bi:ji),[b,v]=Ma(),[w,j]=Ma(),N=function(e,t){return(0,a.useMemo)(()=>e.reduce((e,r)=>{let{eventName:n,handler:s}=r;return e[n]=e=>{s(e,t)},e},{}),[e,t])}(i,t),k=Ea(r);return Ca(()=>(f.set(t,{id:t,key:o,node:b,activatorNode:w,data:k}),()=>{const e=f.get(t);e&&e.key===o&&f.delete(t)}),[f,t]),{active:c,activatorEvent:l,activeNodeRect:d,attributes:(0,a.useMemo)(()=>({role:m,tabIndex:g,"aria-disabled":n,"aria-pressed":!(!x||m!==Ni)||void 0,"aria-roledescription":h,"aria-describedby":u.draggable}),[n,m,g,x,h,u.draggable]),isDragging:x,listeners:n?void 0:N,node:b,over:p,setNodeRef:v,setActivatorNodeRef:j,transform:y}}({id:i,data:j,attributes:{...Ri,...r},disabled:v.draggable}),I=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(S,P),R=Boolean(E),$=R&&!h&&Si(p)&&Si(x),F=!y&&q,B=F&&$?L:null,U=$?null!=B?B:(null!=l?l:b)({rects:g,activeNodeRect:M,activeIndex:p,overIndex:x,index:w}):null,H=Si(p)&&Si(x)?o({id:i,items:u,activeIndex:p,overIndex:x}):w,W=null==E?void 0:E.id,Q=(0,a.useRef)({activeId:W,items:u,newIndex:H,containerId:f}),V=u!==Q.current.items,K=t({active:E,containerId:f,isDragging:q,isSorting:R,id:i,index:w,items:u,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:d,wasDragging:null!=Q.current.activeId}),Y=function(e){let{disabled:t,index:r,node:n,rect:s}=e;const[o,i]=(0,a.useState)(null),l=(0,a.useRef)(r);return Ca(()=>{if(!t&&r!==l.current&&n.current){const e=s.current;if(e){const t=po(n.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&i(r)}}r!==l.current&&(l.current=r)},[t,r,n,s]),(0,a.useEffect)(()=>{o&&i(null)},[o]),o}({disabled:!K,index:w,node:_,rect:k});return(0,a.useEffect)(()=>{R&&Q.current.newIndex!==H&&(Q.current.newIndex=H),f!==Q.current.containerId&&(Q.current.containerId=f),u!==Q.current.items&&(Q.current.items=u)},[R,H,f,u]),(0,a.useEffect)(()=>{if(W===Q.current.activeId)return;if(null!=W&&null==Q.current.activeId)return void(Q.current.activeId=W);const e=setTimeout(()=>{Q.current.activeId=W},50);return()=>clearTimeout(e)},[W]),{active:E,activeIndex:p,attributes:T,data:j,rect:k,index:w,newIndex:H,items:u,isOver:C,isSorting:R,isDragging:q,listeners:A,node:_,overIndex:x,over:z,setNodeRef:I,setActivatorNodeRef:D,setDroppableNodeRef:S,setDraggableNodeRef:P,transform:null!=Y?Y:U,transition:Y||V&&Q.current.newIndex===w?Ii:F&&!La(O)||!d?void 0:R||K?Ra.Transition.toString({...d,property:Li}):void 0}}Ao.Down,Ao.Right,Ao.Up,Ao.Left;const Fi=(e={})=>{const{title:t="Seleccionar o subir archivo",buttonText:r="Usar este archivo",multiple:n=!1,type:s="image"}=e;return new Promise((e,a)=>{if("undefined"==typeof wp||!wp.media)return void a(new Error("La librera de medios de WordPress no est disponible."));let o=!1,i=null;const l=wp.media({title:t,button:{text:r},multiple:n,library:{type:s}});l.on("select",()=>{o=!0;try{const t=l.state().get("selection").first().toJSON();i={id:t.id,url:t.url,filename:t.filename,title:t.title,caption:t.caption,alt:t.alt,description:t.description,mime:t.mime,type:t.type,subtype:t.subtype,width:t.width,height:t.height,sizes:t.sizes||{}},e(i)}catch(e){a(e)}}),l.on("close",()=>{setTimeout(()=>{o||e(null)},100)}),l.open()})},Bi=({tabs:e,activeTab:t=0,setActiveTab:r=()=>{}})=>(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"border-b border-gray-200",children:(0,Qr.jsx)("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:e.map((e,n)=>(0,Qr.jsx)("button",{onClick:()=>r(n),className:or("whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm",{"border-blue-600 text-blue-700":t===n,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":t!==n}),children:e.name},e.name))})}),(0,Qr.jsx)("div",{className:"pt-6",children:e[t]&&e[t].content})]}),Ui=cn("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Hi=({isOpen:e,onClose:t,onAdd:r,resourceName:n,useResourceHook:s,itemsKey:o="items",filterConfigs:i=[],alreadyAddedIds:l=[]})=>{const{t:c}=k(),[d,u]=(0,a.useState)([]),[f,p]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),g=(0,a.useRef)(null);(0,a.useEffect)(()=>(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{h(f)},300),()=>{g.current&&clearTimeout(g.current)}),[f]);const x=s({search:m,perPage:100}),y=x[o]||[],b=(0,a.useMemo)(()=>({value:f,onChange:e=>p(e.target.value),placeholder:`Buscar ${n}...`,isLoading:x.loading}),[f,x.loading,n]);return(0,a.useEffect)(()=>{e||(p(""),h(""),u([]))},[e]),e?(0,Qr.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Qr.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:t}),(0,Qr.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[(0,Qr.jsxs)("header",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Qr.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Seleccionar ",n]}),(0,Qr.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,Qr.jsx)(En,{className:"h-5 w-5"})})]}),(0,Qr.jsx)("div",{className:"p-4 border-b",children:(0,Qr.jsx)(sa,{searchConfig:b,filtersConfig:i})}),(0,Qr.jsxs)("main",{className:"flex-1 overflow-y-auto p-2",children:[x.loading&&(0,Qr.jsx)("p",{className:"p-4 text-center text-gray-500",children:"Cargando..."}),!x.loading&&y.map(e=>{const t=d.some(t=>t.id===e.id),r=l.includes(e.id);return(0,Qr.jsxs)("div",{onClick:()=>!r&&(e=>{u(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])})(e),className:"flex items-center justify-between p-3 rounded-md cursor-pointer "+(r?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"),children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"w-5 h-5 border rounded flex items-center justify-center "+(t?"bg-blue-600 border-blue-600":"border-gray-300"),children:t&&(0,Qr.jsx)(Ui,{className:"w-4 h-4 text-white"})}),(0,Qr.jsx)("span",{children:e.title?.rendered||e.title})]}),r&&(0,Qr.jsx)("span",{className:"text-xs font-semibold text-gray-500",children:"AADIDO"})]},e.id)}),!x.loading&&0===y.length&&(0,Qr.jsx)("p",{className:"p-4 text-center text-gray-500",children:"No se encontraron resultados."})]}),(0,Qr.jsxs)("footer",{className:"px-6 py-4 border-t bg-gray-50 flex items-center justify-between",children:[(0,Qr.jsxs)("p",{className:"text-sm text-gray-600",children:[d.length," seleccionados"]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(mn,{variant:"secondary",onClick:()=>{d.length>0&&(r(d),u([]))},disabled:0===d.length,children:"Aadir y Seguir"}),(0,Qr.jsx)(mn,{variant:"primary",onClick:()=>{d.length>0&&r([...d]),u([]),t()},disabled:0===d.length,children:"Aadir y Cerrar"})]})]})]})]})}):null},Wi=cn("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Qi=cn("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Vi=cn("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ki=cn("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Yi=cn("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Gi=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");return e},Xi=async(e,t={})=>{const r={credentials:"include",headers:{"Content-Type":"application/json","X-WP-Nonce":Gi().nonce}},n=await fetch(e,{...r,...t});if(!n.ok){const e=await n.json().catch(()=>({})),t=new Error(e.message||`HTTP ${n.status}`);throw t.response={data:e,status:n.status},t}return n.json()},Zi=()=>{const e=Gi();return e.endpoints?.custom_api||`${e.api_url}/quiz-extended/v1`},Ji=({courseId:e})=>{const{t}=k(),[r,n]=(0,a.useState)([]),[s,o]=(0,a.useState)(!1),[i,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)(null),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(20),[x,y]=(0,a.useState)(null),[b,v]=(0,a.useState)(!1),w=(0,a.useCallback)(async()=>{if(e){o(!0),f(null);try{const t=await(async e=>{const t=`${Zi()}/ghost-users/${e}`;return Xi(t)})(e);n(t.data?.users||[])}catch(e){console.error("Error fetching ghost users:",e),f("Error al cargar usuarios fantasma")}finally{o(!1)}}},[e]);return(0,a.useEffect)(()=>{w()},[w]),e?(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(Nn,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-blue-900",children:"Qu son los usuarios fantasma?"}),(0,Qr.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Los usuarios fantasma simulan actividad en el curso para crear un baseline de rankings. Son usuarios reales de WordPress pero marcados internamente como fantasma, por lo que sus notas aparecen en las estadsticas pero no son visibles para los estudiantes regulares."})]})]})}),u&&(0,Qr.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[(0,Qr.jsx)(jn,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),(0,Qr.jsx)("p",{className:"text-sm text-red-700",children:u})]}),p&&(0,Qr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[(0,Qr.jsx)(On,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),(0,Qr.jsx)("p",{className:"text-sm text-green-700",children:p})]}),x?.quiz_errors?.length>0&&(0,Qr.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg overflow-hidden",children:[(0,Qr.jsxs)("button",{onClick:()=>v(!b),className:"w-full flex items-center justify-between p-4 text-left hover:bg-orange-100 transition-colors",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(Wi,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("p",{className:"font-medium text-orange-900",children:[x.quiz_errors.length," Cuestionario(s) con errores"]}),(0,Qr.jsx)("p",{className:"text-sm text-orange-700",children:"Estos cuestionarios no pudieron procesarse para los usuarios fantasma"})]})]}),b?(0,Qr.jsx)(Qi,{className:"h-5 w-5 text-orange-600"}):(0,Qr.jsx)(Vi,{className:"h-5 w-5 text-orange-600"})]}),b&&(0,Qr.jsxs)("div",{className:"border-t border-orange-200 p-4",children:[(0,Qr.jsx)("div",{className:"space-y-3",children:x.quiz_errors.map(e=>(0,Qr.jsxs)("div",{className:"bg-white border border-orange-100 rounded-lg p-3",children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"font-medium text-gray-900",children:e.quiz_title}),(0,Qr.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.quiz_id]})]}),(0,Qr.jsxs)("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:[e.affected_users," usuario(s) afectados"]})]}),(0,Qr.jsx)("div",{className:"mt-2 p-2 bg-red-50 rounded text-sm",children:(0,Qr.jsxs)("p",{className:"text-red-700",children:[(0,Qr.jsxs)("strong",{children:["Error (",e.error_code,"):"]})," ",e.error]})})]},e.quiz_id))}),x.quiz_statistics&&(0,Qr.jsxs)("div",{className:"mt-4 pt-4 border-t border-orange-200",children:[(0,Qr.jsx)("h5",{className:"text-sm font-medium text-orange-900 mb-2",children:"Resumen de Estadsticas"}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,Qr.jsxs)("div",{className:"bg-white p-2 rounded border border-orange-100",children:[(0,Qr.jsx)("p",{className:"text-gray-500",children:"Total cuestionarios"}),(0,Qr.jsx)("p",{className:"font-semibold text-gray-900",children:x.quiz_statistics.total_quizzes_in_course})]}),(0,Qr.jsxs)("div",{className:"bg-white p-2 rounded border border-orange-100",children:[(0,Qr.jsx)("p",{className:"text-gray-500",children:"Intentos esperados"}),(0,Qr.jsx)("p",{className:"font-semibold text-gray-900",children:x.quiz_statistics.total_attempts_expected})]}),(0,Qr.jsxs)("div",{className:"bg-white p-2 rounded border border-green-100",children:[(0,Qr.jsx)("p",{className:"text-green-600",children:"Exitosos"}),(0,Qr.jsx)("p",{className:"font-semibold text-green-700",children:x.quiz_statistics.successful_attempts})]}),(0,Qr.jsxs)("div",{className:"bg-white p-2 rounded border border-red-100",children:[(0,Qr.jsx)("p",{className:"text-red-600",children:"Fallidos"}),(0,Qr.jsx)("p",{className:"font-semibold text-red-700",children:x.quiz_statistics.failed_attempts})]})]})]})]})]}),(0,Qr.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,Qr.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Generar Usuarios Fantasma"}),(0,Qr.jsxs)("div",{className:"flex items-end gap-4",children:[(0,Qr.jsxs)("div",{className:"flex-1 max-w-xs",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad de usuarios"}),(0,Qr.jsx)("input",{type:"number",min:"1",max:"50",value:h,onChange:e=>g(Math.min(50,Math.max(1,parseInt(e.target.value)||1))),className:"w-full input border-gray-300 rounded-md"}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Mximo 50 usuarios por generacin"})]}),(0,Qr.jsx)("button",{onClick:async()=>{l(!0),f(null),m(null),y(null);try{const t=(await(async(e,t=20)=>{const r=`${Zi()}/ghost-users/generate`;return Xi(r,{method:"POST",body:JSON.stringify({course_id:e,count:Math.min(t,50)})})})(e,h)).data;y(t);const r=t?.quiz_statistics,n=t?.quiz_errors||[];if(r){const e=r.total_attempts_expected>0?Math.round(r.successful_attempts/r.total_attempts_expected*100):0;let s=`Se crearon ${t?.created_count||0} usuarios fantasma. `;s+=`Cuestionarios: ${r.successful_attempts}/${r.total_attempts_expected} intentos exitosos (${e}%).`,n.length>0&&(s+=`  ${n.length} cuestionario(s) con errores.`,v(!0)),m(s)}else m(`Se crearon ${t?.created_count||0} usuarios fantasma con sus intentos de cuestionarios`);w()}catch(e){console.error("Error generating ghost users:",e),f(e.response?.data?.message||"Error al generar usuarios fantasma")}finally{l(!1)}},disabled:i,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Mn,{className:"h-4 w-4 animate-spin"}),"Generando..."]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Ki,{className:"h-4 w-4"}),"Generar Usuarios"]})})]}),(0,Qr.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,Qr.jsx)("p",{children:(0,Qr.jsx)("strong",{children:"Cada usuario generado:"})}),(0,Qr.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1 text-gray-500",children:[(0,Qr.jsx)("li",{children:"Tendr un nombre espaol aleatorio"}),(0,Qr.jsx)("li",{children:"Ser inscrito en el curso con progreso del 100%"}),(0,Qr.jsx)("li",{children:"Completar todos los cuestionarios del curso"}),(0,Qr.jsx)("li",{children:"Obtendr notas aleatorias entre 4-9 (con y sin riesgo)"}),(0,Qr.jsx)("li",{children:"Aparecer en los rankings del curso"})]})]})]}),(0,Qr.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qr.jsxs)("h4",{className:"font-medium text-gray-900",children:["Usuarios Fantasma Actuales (",r.length,")"]}),(0,Qr.jsxs)("div",{className:"flex gap-2",children:[(0,Qr.jsxs)("button",{onClick:w,disabled:s,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 text-sm",children:[(0,Qr.jsx)(Yi,{className:"h-4 w-4 "+(s?"animate-spin":"")}),"Actualizar"]}),r.length>0&&(0,Qr.jsxs)("button",{onClick:async()=>{if(window.confirm("Ests seguro de eliminar todos los usuarios fantasma de este curso? Esta accin no se puede deshacer.")){d(!0),f(null),m(null);try{const t=await(async e=>{const t=`${Zi()}/ghost-users/${e}`;return Xi(t,{method:"DELETE"})})(e);m(t.data?.message||"Usuarios fantasma eliminados"),n([])}catch(e){console.error("Error deleting ghost users:",e),f("Error al eliminar usuarios fantasma")}finally{d(!1)}}},disabled:c,className:"flex items-center gap-1 text-red-600 hover:text-red-800 text-sm",children:[c?(0,Qr.jsx)(Mn,{className:"h-4 w-4 animate-spin"}):(0,Qr.jsx)(ca,{className:"h-4 w-4"}),"Eliminar Todos"]})]})]}),s?(0,Qr.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Qr.jsx)(Mn,{className:"h-6 w-6 animate-spin text-gray-400"})}):0===r.length?(0,Qr.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Qr.jsx)(Nn,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,Qr.jsx)("p",{children:"No hay usuarios fantasma en este curso"}),(0,Qr.jsx)("p",{className:"text-sm mt-1",children:"Genera algunos para poblar los rankings"})]}):(0,Qr.jsx)("div",{className:"max-h-64 overflow-y-auto",children:(0,Qr.jsxs)("table",{className:"w-full text-sm",children:[(0,Qr.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,Qr.jsxs)("tr",{children:[(0,Qr.jsx)("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:"Nombre"}),(0,Qr.jsx)("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:"Email"}),(0,Qr.jsx)("th",{className:"text-center py-2 px-3 font-medium text-gray-700",children:"Intentos"})]})}),(0,Qr.jsx)("tbody",{className:"divide-y divide-gray-100",children:r.map(e=>(0,Qr.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Qr.jsx)("td",{className:"py-2 px-3 text-gray-900",children:e.display_name}),(0,Qr.jsx)("td",{className:"py-2 px-3 text-gray-500",children:e.user_email}),(0,Qr.jsx)("td",{className:"py-2 px-3 text-center text-gray-600",children:e.attempts_count})]},e.ID))})]})})]}),(0,Qr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(jn,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,Qr.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,Qr.jsx)("p",{className:"font-medium",children:"Importante"}),(0,Qr.jsx)("p",{className:"mt-1",children:"Los usuarios fantasma son usuarios reales de WordPress. Si eliminas el curso, recuerda eliminar primero los usuarios fantasma para mantener la base de datos limpia."})]})]})})]}):(0,Qr.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Qr.jsx)(jn,{className:"h-12 w-12 mx-auto mb-3 text-yellow-500"}),(0,Qr.jsx)("p",{children:"Guarda el curso primero para poder gestionar usuarios fantasma"})]})},el=cn("ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]]),tl=cn("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),rl=cn("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),nl=cn("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),sl=cn("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),al=cn("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ol=({courseId:e})=>{const{t}=k(),[r,n]=(0,a.useState)([]),[s,o]=(0,a.useState)(!1),[i,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)({total:0,page:1,per_page:20,total_pages:0,course_title:""}),p=(0,a.useCallback)(async(t=1)=>{if(e){o(!0),l(null);try{const r=window.qe_data?.rest_url||"/wp-json/",s=new URLSearchParams({page:t.toString(),per_page:u.per_page.toString(),include_ghosts:c.toString()}),a=`${r}qe/v1/courses/${e}/enrolled-users?${s}`,o=(await(0,gn.qb)(a)).data;o?.success?(n(o.data||[]),f(o.meta||u)):l(o?.error||"Error al cargar estudiantes")}catch(e){console.error("Error fetching enrolled users:",e),l(e.message||"Error al cargar estudiantes inscritos")}finally{o(!1)}}},[e,c,u.per_page]);(0,a.useEffect)(()=>{p(1)},[e,c]);const m=e=>{e>=1&&e<=u.total_pages&&p(e)},h=e=>e>=7?"text-green-600 bg-green-50":e>=5?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50";return(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Qr.jsx)(Nn,{className:"h-5 w-5 text-blue-600"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Estudiantes Inscritos"}),(0,Qr.jsxs)("p",{className:"text-sm text-gray-500",children:[u.total," estudiante",1!==u.total?"s":""," ",c?"(incluyendo fantasmas)":"(reales)"]})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,Qr.jsx)("input",{type:"checkbox",checked:c,onChange:e=>d(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,Qr.jsx)(el,{className:"h-4 w-4 text-gray-400"}),(0,Qr.jsx)("span",{className:"text-gray-600",children:"Incluir fantasmas"})]}),(0,Qr.jsx)("button",{onClick:()=>p(u.page),disabled:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Actualizar",children:(0,Qr.jsx)(Yi,{className:"h-5 w-5 "+(s?"animate-spin":"")})})]})]}),i&&(0,Qr.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:i}),s?(0,Qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Qr.jsx)(Yi,{className:"h-8 w-8 text-gray-400 animate-spin"})}):0===r.length?(0,Qr.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,Qr.jsx)(Nn,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,Qr.jsx)("p",{className:"font-medium",children:"No hay estudiantes inscritos"}),(0,Qr.jsx)("p",{className:"text-sm mt-1",children:"Los estudiantes aparecern aqu cuando se inscriban al curso"})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"overflow-hidden border border-gray-200 rounded-lg",children:(0,Qr.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qr.jsx)("thead",{className:"bg-gray-50",children:(0,Qr.jsxs)("tr",{children:[(0,Qr.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estudiante"}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(tl,{className:"h-3.5 w-3.5"}),"Inscripcin"]})}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,Qr.jsx)(kn,{className:"h-3.5 w-3.5"}),"Intentos"]})}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,Qr.jsx)(rl,{className:"h-3.5 w-3.5"}),"Promedio"]})}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mejor Nota"})]})}),(0,Qr.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>{return(0,Qr.jsxs)("tr",{className:"hover:bg-gray-50 "+(e.is_ghost?"bg-purple-50/30":""),children:[(0,Qr.jsx)("td",{className:"px-4 py-3",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"w-9 h-9 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 font-medium text-sm",children:e.display_name?.charAt(0)?.toUpperCase()||"?"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.display_name}),e.is_ghost&&(0,Qr.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs bg-purple-100 text-purple-700",children:[(0,Qr.jsx)(el,{className:"h-3 w-3"}),"Fantasma"]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,Qr.jsx)(nl,{className:"h-3 w-3"}),e.email]})]})]})}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:(t=e.enrollment_date,t?new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"N/A")}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-center",children:(0,Qr.jsx)("span",{className:"inline-flex items-center justify-center min-w-[2rem] px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded",children:e.total_attempts})}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-center",children:e.total_attempts>0?(0,Qr.jsx)("span",{className:`inline-flex items-center justify-center min-w-[3rem] px-2 py-1 text-xs font-medium rounded ${h(e.avg_score)}`,children:e.avg_score.toFixed(1)}):(0,Qr.jsx)("span",{className:"text-xs text-gray-400",children:"-"})}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-center",children:e.total_attempts>0?(0,Qr.jsx)("span",{className:`inline-flex items-center justify-center min-w-[3rem] px-2 py-1 text-xs font-medium rounded ${h(e.best_score)}`,children:e.best_score.toFixed(1)}):(0,Qr.jsx)("span",{className:"text-xs text-gray-400",children:"-"})})]},e.id);var t})})]})}),u.total_pages>1&&(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,Qr.jsxs)("p",{className:"text-sm text-gray-500",children:["Mostrando ",(u.page-1)*u.per_page+1," - ",Math.min(u.page*u.per_page,u.total)," de ",u.total]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("button",{onClick:()=>m(u.page-1),disabled:1===u.page,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Qr.jsx)(sl,{className:"h-5 w-5"})}),(0,Qr.jsxs)("span",{className:"text-sm text-gray-600",children:["Pgina ",u.page," de ",u.total_pages]}),(0,Qr.jsx)("button",{onClick:()=>m(u.page+1),disabled:u.page===u.total_pages,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:(0,Qr.jsx)(al,{className:"h-5 w-5"})})]})]})]})]})},il=e=>e?.title?.rendered||e?.title||"Curso sin ttulo",ll=({status:e})=>{const t={publish:{label:"Publicado",bgColor:"bg-green-100",textColor:"text-green-800",dotColor:"bg-green-500"},draft:{label:"Borrador",bgColor:"bg-yellow-100",textColor:"text-yellow-800",dotColor:"bg-yellow-500"},private:{label:"Privado",bgColor:"bg-orange-100",textColor:"text-orange-800",dotColor:"bg-orange-500"},pending:{label:"Pendiente",bgColor:"bg-blue-100",textColor:"text-blue-800",dotColor:"bg-blue-500"}},r=t[e]||t.draft;return(0,Qr.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${r.bgColor} ${r.textColor}`,children:[(0,Qr.jsx)("span",{className:`w-2 h-2 rounded-full ${r.dotColor}`}),r.label]})},cl=({lesson:e,onRemove:t})=>{const{attributes:r,listeners:n,setNodeRef:s,transform:a,transition:o}=$i({id:e.id}),i={transform:Ra.Transform.toString(a),transition:o};return(0,Qr.jsxs)("div",{ref:s,style:i,className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("button",{type:"button",...r,...n,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,Qr.jsx)(la,{className:"h-5 w-5"})}),(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title?.rendered||e.title})]}),(0,Qr.jsx)("button",{type:"button",onClick:()=>t(e.id),className:"text-red-600 hover:text-red-800",children:(0,Qr.jsx)(ca,{className:"w-4 h-4"})})]})},dl=({courseId:e,mode:t,onSave:r,onCancel:n,onTriggerCreation:s,isCollapsed:o,categoryOptions:i,onCategoryCreated:l,onOpenBatchActions:c})=>{const{t:d}=k(),[u,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[x,y]=(0,a.useState)({}),[b,v]=(0,a.useState)(0),w=Ja(Za(Ho)),{lessons:j,fetchLessons:N}=Ks({courseId:e,autoFetch:!1,perPage:100}),[_,C]=(0,a.useState)([]),[S,E]=(0,a.useState)(!1),[O,M]=(0,a.useState)(""),[T,P]=(0,a.useState)(!1),[A,q]=(0,a.useState)(!1),[z,D]=(0,a.useState)(!1),[L,I]=(0,a.useState)(!1),[R,$]=(0,a.useState)(null),F=(0,a.useCallback)(()=>{y({title:"",content:"",status:"publish",duration:"",featured_image_id:null,featured_image_url:"",_course_position:"0",_start_date:"",_end_date:"",qe_category:[]}),C([])},[]);(0,a.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&F();else{f(!0),g(null);try{const t=await Qn(e),r=t.meta||{};y({title:il(t),content:t.content?.rendered||"",status:t.status||"publish",qe_category:t.qe_category||[],duration:r._course_duration||"",featured_image_id:t.featured_media||null,featured_image_url:t._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"",_course_position:r._course_position||"0",_start_date:r._start_date||"",_end_date:r._end_date||""});try{const t=await(0,Qs.getCourseLessons)(e,{perPage:100});C(t.data||[]),console.log(` Loaded ${t.data?.length||0} lessons for course ${e}`)}catch(e){console.error("Failed to load lessons:",e),C([])}}catch(e){g("Failed to load course data.")}finally{f(!1)}}})()},[e,t,F]);const B=(e,t)=>{y(r=>({...r,[e]:t}))},U=async()=>{try{const e=await Fi({title:"Seleccionar Imagen Destacada",buttonText:"Usar esta imagen"});if(!e)return;if(e&&e.id&&e.url){const t=parseInt(e.id,10);B("featured_image_id",t),B("featured_image_url",e.url)}}catch(e){console.error("Error al seleccionar imagen:",e)}},H=e=>{C(t=>t.filter(t=>t.id!==e))},W=(0,Qr.jsxs)("div",{className:"flex flex-col gap-6 h-full",children:[(0,Qr.jsx)("input",{type:"text",value:x.title||"",onChange:e=>B("title",e.target.value),placeholder:d("courses.fields.title"),className:or("w-full focus:outline-none bg-transparent flex-shrink-0","create"===t?"text-2xl font-bold":"text-xl font-semibold border-b pb-2 border-gray-200")}),(0,Qr.jsxs)("div",{className:"flex-shrink-0",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado del Curso"}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsxs)("select",{value:x.status||"publish",onChange:e=>B("status",e.target.value),className:"flex-1 input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"publish",children:"Publicado"}),(0,Qr.jsx)("option",{value:"draft",children:"Borrador"}),(0,Qr.jsx)("option",{value:"private",children:"Privado"})]}),(0,Qr.jsx)(ll,{status:x.status||"publish"})]}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Los cursos en borrador o privados no se mostrarn en el frontend para los estudiantes"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-shrink-0",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:d("courses.fields.image")}),x.featured_image_url?(0,Qr.jsxs)("div",{className:"group relative",children:[(0,Qr.jsx)("img",{src:x.featured_image_url,alt:"Imagen destacada",className:"w-full h-48 object-cover rounded-lg"}),(0,Qr.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:(0,Qr.jsx)("button",{onClick:U,className:"text-white text-sm font-semibold bg-gray-800 bg-opacity-70 px-4 py-2 rounded-md",children:"Cambiar Imagen"})})]}):(0,Qr.jsxs)("button",{onClick:U,className:"w-full h-48 flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:bg-gray-50",children:[(0,Qr.jsx)(da,{className:"h-10 w-10 text-gray-400 mb-2"}),"Subir Imagen"]})]}),(0,Qr.jsxs)("div",{className:"flex-shrink-0",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:d("courses.fields.position")}),(0,Qr.jsx)("input",{type:"number",value:x._course_position||"0",onChange:e=>B("_course_position",e.target.value),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,Qr.jsxs)("div",{className:"flex-shrink-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:d("courses.fields.category")}),!S&&(0,Qr.jsxs)("button",{onClick:()=>E(!0),type:"button",className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[(0,Qr.jsx)(ua,{className:"h-4 w-4"})," Aadir Nueva"]})]}),S&&(0,Qr.jsx)("div",{className:"mb-3 p-3 bg-gray-50 border rounded-md",children:(0,Qr.jsxs)("div",{className:"flex gap-2",children:[(0,Qr.jsx)("input",{type:"text",value:O,onChange:e=>M(e.target.value),placeholder:"Nombre de la categora",className:"flex-1 input border-gray-300 rounded-md"}),(0,Qr.jsx)(mn,{size:"sm",onClick:async()=>{if(O.trim()){P(!0);try{const e=await ea("qe_category",{name:O.trim()});l&&l(e),B("qe_category",[e.id.toString()]),M(""),E(!1)}catch(e){console.error("Error creating category:",e)}finally{P(!1)}}},isLoading:T,children:"Guardar"}),(0,Qr.jsx)(mn,{size:"sm",variant:"secondary",onClick:()=>E(!1),children:"Cancelar"})]})}),(0,Qr.jsxs)("select",{value:x.qe_category?.[0]||"",onChange:e=>B("qe_category",[e.target.value]),className:"w-full input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"",children:d("common.select")}),i.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-shrink-0",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("courses.fields.startDate")}),(0,Qr.jsx)("input",{type:"date",value:x._start_date||"",onChange:e=>B("_start_date",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("courses.fields.endDate")}),(0,Qr.jsx)("input",{type:"date",value:x._end_date||"",onChange:e=>B("_end_date",e.target.value),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,Qr.jsxs)("div",{className:"flex-shrink-0",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:d("courses.fields.duration")}),(0,Qr.jsx)("input",{type:"text",value:x.duration||"",onChange:e=>B("duration",e.target.value),placeholder:"Ej: 10 horas",className:"w-full input border-gray-300 rounded-md"})]}),(0,Qr.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex-shrink-0",children:d("courses.fields.description")}),(0,Qr.jsx)(ha(),{theme:"snow",value:x.content||"",onChange:e=>B("content",e),className:"h-full"})]})]}),Q=(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Qr.jsx)("button",{onClick:()=>q(!0),className:"bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg text-sm",children:"Aadir Existente"}),(0,Qr.jsx)("button",{onClick:()=>s("lesson",e=>C(t=>[...t,e])),className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm",children:"Crear Nueva Leccin"})]}),(0,Qr.jsx)(wi,{sensors:w,collisionDetection:ao,onDragEnd:e=>{const{active:t,over:r}=e;if(r&&t.id!==r.id){const e=_.findIndex(e=>e.id===t.id),n=_.findIndex(e=>e.id===r.id);-1!==e&&-1!==n&&C(t=>_i(t,e,n))}},children:(0,Qr.jsx)(Ai,{items:_.map(e=>e.id),strategy:Mi,children:(0,Qr.jsx)("div",{className:"space-y-2",children:_.map(e=>(0,Qr.jsx)(cl,{lesson:e,onRemove:H},e.id))})})}),0===_.length&&(0,Qr.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Este curso an no tiene lecciones."})]}),V=(0,Qr.jsx)(Ji,{courseId:e}),K=(0,Qr.jsx)(ol,{courseId:e}),Y=[{name:d("common.settings"),content:W},{name:"Constructor",content:Q},..."edit"===t?[{name:"Estudiantes",content:K,icon:Nn},{name:"Usuarios Fantasma",content:V}]:[]];if(u)return(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)("p",{children:d("common.loading")})});const G=d("create"===t?"courses.createCourse":"courses.editCourse");return(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:or("bg-white rounded-lg border border-gray-200 flex flex-col h-full",{"overflow-hidden":o}),children:[(0,Qr.jsxs)("header",{className:or("flex-shrink-0",{"p-4 border-b flex items-center justify-between":!o,"h-full flex items-center justify-center border-r":o}),children:[(0,Qr.jsx)("div",{className:or("font-bold text-gray-800",{"transform -rotate-90 whitespace-nowrap text-sm tracking-wider uppercase":o}),children:o?il(x):(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg",children:G}),"edit"===t&&(0,Qr.jsx)("p",{className:"text-xs font-normal text-gray-500",children:il(x)})]}),"edit"===t&&x.status&&(0,Qr.jsx)(ll,{status:x.status})]})}),!o&&(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[c&&(0,Qr.jsxs)("button",{onClick:c,className:"flex items-center gap-2 bg-purple-600 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-purple-700 transition-colors",title:"Acciones por lotes en Quizzes",children:[(0,Qr.jsx)(fa,{className:"h-4 w-4"}),"Batch Quizzes"]}),"edit"===t&&e&&(0,Qr.jsxs)("button",{onClick:()=>D(!0),className:"flex items-center gap-2 bg-red-600 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-red-700 transition-colors",title:"Resetear curso - elimina usuarios, intentos y estadsticas",children:[(0,Qr.jsx)(pa,{className:"h-4 w-4"}),"Reset"]}),(0,Qr.jsx)("button",{onClick:async()=>{m(!0);try{const e={};_.forEach((t,r)=>{e[t.id.toString()]=r+1}),console.log(" Saving course with lesson order map:",e);const s={title:x.title,content:x.content,status:x.status,featured_media:x.featured_image_id||0,qe_category:x.qe_category,meta:{_course_duration:x.duration,_lesson_ids:_.map(e=>e.id),_lesson_order_map:e,_course_position:parseInt(x._course_position)||0,_start_date:x._start_date||"",_end_date:x._end_date||""}};await r(s),"create"===t&&n()}catch(e){g(e.message)}finally{m(!1)}},disabled:p,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm",children:d(p?"common.saving":"common.save")}),(0,Qr.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-800",children:(0,Qr.jsx)(En,{className:"h-5 w-5"})})]})]}),(0,Qr.jsxs)("main",{className:or("flex-1 overflow-y-auto",{"p-6":!o,hidden:o}),children:[h&&(0,Qr.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:h}),(0,Qr.jsx)(Bi,{tabs:Y,activeTab:b,setActiveTab:v})]})]}),z&&(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Qr.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[(0,Qr.jsx)("div",{className:"bg-red-600 p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3 text-white",children:[(0,Qr.jsx)(jn,{className:"h-6 w-6"}),(0,Qr.jsx)("h3",{className:"text-lg font-bold",children:"Resetear Curso"})]})}),(0,Qr.jsx)("div",{className:"p-6",children:R?(0,Qr.jsx)("div",{children:R.error?(0,Qr.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,Qr.jsx)("p",{className:"text-red-700 font-medium",children:"Error al resetear:"}),(0,Qr.jsx)("p",{className:"text-red-600 text-sm",children:R.error})]}):(0,Qr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,Qr.jsx)("p",{className:"text-green-700 font-medium mb-3",children:" Curso reseteado exitosamente"}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,Qr.jsx)("div",{className:"text-gray-600",children:"Inscripciones eliminadas:"}),(0,Qr.jsx)("div",{className:"font-semibold",children:R.stats?.enrollments_deleted||0}),(0,Qr.jsx)("div",{className:"text-gray-600",children:"Progreso eliminado:"}),(0,Qr.jsx)("div",{className:"font-semibold",children:R.stats?.student_progress_deleted||0}),(0,Qr.jsx)("div",{className:"text-gray-600",children:"Intentos eliminados:"}),(0,Qr.jsx)("div",{className:"font-semibold",children:R.stats?.attempts_deleted||0}),(0,Qr.jsx)("div",{className:"text-gray-600",children:"Respuestas eliminadas:"}),(0,Qr.jsx)("div",{className:"font-semibold",children:R.stats?.answers_deleted||0}),(0,Qr.jsx)("div",{className:"text-gray-600",children:"Rankings eliminados:"}),(0,Qr.jsx)("div",{className:"font-semibold",children:R.stats?.rankings_deleted||0}),(0,Qr.jsx)("div",{className:"text-gray-600",children:"Stats eliminadas:"}),(0,Qr.jsx)("div",{className:"font-semibold",children:R.stats?.question_stats_deleted||0})]})]})}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("p",{className:"text-gray-700 mb-4",children:["Ests seguro de que quieres resetear el curso ",(0,Qr.jsxs)("strong",{children:['"',il(x),'"']}),"?"]}),(0,Qr.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:[(0,Qr.jsx)("p",{className:"text-amber-800 text-sm font-medium mb-2",children:"Esta accin eliminar:"}),(0,Qr.jsxs)("ul",{className:"text-amber-700 text-sm space-y-1 list-disc list-inside",children:[(0,Qr.jsx)("li",{children:"Todas las inscripciones de usuarios"}),(0,Qr.jsx)("li",{children:"Todo el progreso de los estudiantes"}),(0,Qr.jsx)("li",{children:"Todos los intentos de quiz"}),(0,Qr.jsx)("li",{children:"Todas las respuestas de quiz"}),(0,Qr.jsx)("li",{children:"Todos los rankings del curso"}),(0,Qr.jsx)("li",{children:"Todas las estadsticas de preguntas"})]})]}),(0,Qr.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[(0,Qr.jsx)("p",{className:"text-green-800 text-sm font-medium mb-2",children:"Se conservarn:"}),(0,Qr.jsxs)("ul",{className:"text-green-700 text-sm space-y-1 list-disc list-inside",children:[(0,Qr.jsx)("li",{children:"Lecciones y su contenido"}),(0,Qr.jsx)("li",{children:"Cuestionarios (quizzes)"}),(0,Qr.jsx)("li",{children:"Preguntas y respuestas"}),(0,Qr.jsx)("li",{children:"Configuracin del curso"})]})]}),(0,Qr.jsx)("p",{className:"text-red-600 text-sm font-semibold",children:" Esta accin no se puede deshacer"})]})}),(0,Qr.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:R?(0,Qr.jsx)("button",{onClick:()=>{D(!1),$(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Cerrar"}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("button",{onClick:()=>D(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",disabled:L,children:"Cancelar"}),(0,Qr.jsx)("button",{onClick:async()=>{if(e){I(!0),$(null);try{const t=await hs(e);$(t.data||t),console.log(" Course reset completed:",t)}catch(e){console.error(" Course reset failed:",e),$({error:e.message||"Error al resetear el curso"})}finally{I(!1)}}},disabled:L,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:L?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Reseteando..."]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(pa,{className:"h-4 w-4"}),"Confirmar Reset"]})})]})})]})}),(0,Qr.jsx)(Hi,{isOpen:A,onClose:()=>q(!1),onAdd:e=>{const t=e.filter(e=>!_.some(t=>t.id===e.id));C(e=>[...e,...t])},resourceName:"Lecciones",useResourceHook:Ks,itemsKey:"lessons",alreadyAddedIds:_.map(e=>e.id)})]})},ul=cn("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),fl=cn("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),pl=cn("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),ml=cn("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),hl=cn("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),gl=({value:e,onChange:t,disabled:r=!1,onCreateNew:n})=>{const{t:s}=k(),[o,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(!1),{quizzes:d,loading:u,fetchQuizzes:f}=Xs({autoFetch:!1}),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(!1),x=(0,a.useRef)(null),y=(0,a.useRef)(null);(0,a.useEffect)(()=>{(async()=>{if(e){g(!0);try{const t=await(0,Ys.getOne)(e);m(t)}catch(e){console.error("Error loading selected quiz:",e),m(null)}finally{g(!1)}}else m(null)})()},[e]),(0,a.useEffect)(()=>{const e=e=>{x.current&&!x.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,a.useEffect)(()=>(y.current&&clearTimeout(y.current),o.trim()?(c(!0),y.current=setTimeout(()=>{f(!0,{search:o,perPage:50})},300)):l&&(y.current=setTimeout(()=>{f(!0,{perPage:50})},100)),()=>clearTimeout(y.current)),[o,l,f]);const b=e=>e?.title?.rendered||e?.title||"Cuestionario sin ttulo";return h?(0,Qr.jsx)("div",{className:"flex items-center justify-center p-2 bg-gray-100 border rounded-md",children:(0,Qr.jsx)("p",{className:"text-sm text-gray-500",children:"Cargando..."})}):p?(0,Qr.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 border rounded-md",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-800",children:b(p)}),!r&&(0,Qr.jsx)("button",{onClick:()=>{m(null),t(null)},className:"text-red-500 hover:text-red-700",children:(0,Qr.jsx)(En,{className:"w-4 h-4"})})]}):(0,Qr.jsxs)("div",{className:"relative",ref:x,children:[(0,Qr.jsxs)("div",{className:"flex gap-2",children:[(0,Qr.jsxs)("div",{className:"relative flex-grow",children:[(0,Qr.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Qr.jsx)(Tn,{className:"h-4 w-4 text-gray-400"})}),(0,Qr.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),onFocus:()=>c(!0),placeholder:"Buscar o crear cuestionario...",disabled:r,className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 rounded-md"})]}),n&&(0,Qr.jsxs)("button",{onClick:n,disabled:r,className:"flex-shrink-0 flex items-center gap-2 px-3 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[(0,Qr.jsx)(ua,{className:"w-4 h-4"}),"Crear Nuevo"]})]}),l&&(0,Qr.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[u&&(0,Qr.jsx)("p",{className:"p-2 text-sm text-gray-500",children:"Buscando..."}),!u&&d.length>0&&d.map(e=>(0,Qr.jsx)("div",{onClick:()=>(e=>{m(e),t(e.id),c(!1),i("")})(e),className:"p-2 text-sm cursor-pointer hover:bg-gray-100",children:b(e)},e.id)),!u&&0===d.length&&(0,Qr.jsx)("p",{className:"p-2 text-sm text-gray-500",children:o?"No se encontraron resultados.":"No hay cuestionarios disponibles."})]})]})},xl=cn("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),yl=({step:e,onUpdate:t,isViewMode:r})=>{const{t:n}=k(),[s,o]=(0,a.useState)(!1),[i,l]=(0,a.useState)(0),[c,d]=(0,a.useState)(null),u=(0,a.useRef)(null);return(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Archivo PDF"}),e.data?.file_id?(0,Qr.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 border border-gray-200 rounded-md",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qr.jsx)(On,{className:"h-4 w-4 text-green-500"}),(0,Qr.jsx)("a",{href:e.data.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate",title:e.data.filename,children:e.data.filename})]}),!r&&(0,Qr.jsx)("button",{type:"button",onClick:()=>{t("data",{...e.data,file_id:null,filename:null,url:null})},className:"p-1 text-red-500 hover:text-red-700",children:(0,Qr.jsx)(ca,{className:"h-4 w-4"})})]}):(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("input",{type:"file",accept:"application/pdf",ref:u,onChange:async r=>{const n=r.target.files?.[0];if(!n)return;const s=((e,t={})=>{const{maxSize:r=5242880,allowedTypes:n=["image/jpeg","image/jpg","image/png","image/gif","image/webp"]}=t;return e?e.size>r?{isValid:!1,error:`File size exceeds ${(r/1048576).toFixed(2)}MB limit`}:n.includes(e.type)?{isValid:!0}:{isValid:!1,error:`File type ${e.type} is not allowed. Allowed types: ${n.join(", ")}`}:{isValid:!1,error:"No file provided"}})(n,{maxSize:10485760,allowedTypes:["application/pdf"]});if(s.isValid){o(!0),d(null),l(0);try{const r=await(async(e,t={})=>{try{const r=(()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.api_url)throw new Error("API URL not configured in WordPress");return e})(),{title:n=e.name,alt_text:s="",caption:a="",onProgress:o=null}=t;console.log(" Uploading media:",e.name,`(${(e.size/1024).toFixed(2)} KB)`);const i=new FormData;i.append("file",e),n&&i.append("title",n),s&&i.append("alt_text",s),a&&i.append("caption",a);const l=new XMLHttpRequest,c=new Promise((e,t)=>{o&&l.upload.addEventListener("progress",e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);o(t)}}),l.addEventListener("load",()=>{if(l.status>=200&&l.status<300)try{const t=JSON.parse(l.responseText);console.log(" Media uploaded successfully:",t.id),e(t)}catch(e){t(new Error("Failed to parse upload response"))}else t(new Error(`Upload failed with status ${l.status}: ${l.statusText}`))}),l.addEventListener("error",()=>{t(new Error("Network error during upload"))}),l.addEventListener("abort",()=>{t(new Error("Upload cancelled"))}),l.open("POST",`${r.api_url}/wp/v2/media`),l.setRequestHeader("X-WP-Nonce",r.nonce),l.send(i)}),d=await c;return{id:d.id,url:d.source_url,title:d.title?.rendered||d.title,alt:d.alt_text||"",caption:d.caption?.rendered||d.caption,mediaDetails:d.media_details,mimeType:d.mime_type}}catch(e){throw console.error(" Error uploading media:",e),e}})(n,{onProgress:l});t("data",{...e.data,file_id:r.id,filename:n.name,url:r.url})}catch(e){d(e.message||"Upload failed")}finally{o(!1)}}else d(s.error)},className:"hidden",disabled:s||r}),(0,Qr.jsxs)("button",{type:"button",onClick:()=>u.current?.click(),disabled:s||r,className:"w-full flex items-center justify-center px-3 py-2 border-2 border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:bg-gray-50 disabled:cursor-not-allowed",children:[(0,Qr.jsx)(xl,{className:"h-4 w-4 mr-2"}),s?`Subiendo... ${i}%`:"Seleccionar un archivo PDF"]})]}),s&&(0,Qr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,Qr.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${i}%`}})}),c&&(0,Qr.jsx)("p",{className:"text-xs text-red-600 mt-1",children:c})]})},bl=e=>e?.title?.rendered||e?.title||"Leccin sin ttulo",vl=({step:e,index:t,onUpdate:r,quillRef:n,onTriggerCreation:s})=>{const o=(0,a.useCallback)(async()=>{try{const e=await Fi({title:"Seleccionar imagen",buttonText:"Insertar imagen",type:"image"});if(e&&e.url&&n.current){const t=n.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e.url),t.setSelection(r.index+1)}}catch(e){console.error("Error al abrir el selector de medios:",e)}},[n]),i=(0,a.useMemo)(()=>({toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:o}}}),[o]);switch(e.type){case"video":return(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"URL del Video"}),(0,Qr.jsx)("input",{type:"url",value:e.data?.video_url||"",onChange:n=>r(t,"data",{...e.data,video_url:n.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"https://..."})]});case"quiz":return(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Seleccionar Cuestionario"}),(0,Qr.jsx)(gl,{value:e.data?.quiz_id||null,onChange:n=>r(t,"data",{...e.data,quiz_id:n}),onCreateNew:()=>s("quiz",n=>{r(t,"data",{...e.data,quiz_id:n})})})]});case"pdf":return(0,Qr.jsx)(yl,{step:e,onUpdate:(e,n)=>r(t,e,n)});default:return(0,Qr.jsx)(ha(),{ref:n,theme:"snow",value:e.data?.content||"",onChange:n=>r(t,"data",{...e.data,content:n}),className:"bg-white",modules:i})}},wl=({step:e,index:t,onUpdate:r,onRemove:n,onTriggerCreation:s})=>{const{attributes:o,listeners:i,setNodeRef:l,transform:c,transition:d}=$i({id:e.id}),[u,f]=(0,a.useState)(!1),p={transform:Ra.Transform.toString(c),transition:d},m=(0,a.useRef)(null),h={text:(0,Qr.jsx)(ul,{className:"h-4 w-4 text-green-700"}),video:(0,Qr.jsx)(fl,{className:"h-4 w-4 text-blue-700"}),quiz:(0,Qr.jsx)(pl,{className:"h-4 w-4 text-purple-700"}),pdf:(0,Qr.jsx)(ml,{className:"h-4 w-4 text-red-700"})};return(0,Qr.jsxs)("div",{ref:l,style:p,className:"bg-white border border-gray-200 rounded-lg",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,Qr.jsx)("button",{type:"button",...o,...i,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,Qr.jsx)(la,{className:"h-5 w-5"})}),(0,Qr.jsx)("div",{className:"p-2 rounded bg-gray-100",children:h[e.type]||h.text}),(0,Qr.jsx)("div",{className:"flex-1",children:(0,Qr.jsx)("input",{type:"text",value:e.title,onChange:e=>r(t,"title",e.target.value),placeholder:"Ttulo del paso",className:"font-medium text-sm text-gray-900 bg-transparent w-full focus:outline-none"})})]}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qr.jsx)("button",{type:"button",onClick:()=>f(!u),className:"p-1 text-gray-400 hover:text-gray-600",children:u?(0,Qr.jsx)(Qi,{className:"h-4 w-4"}):(0,Qr.jsx)(Vi,{className:"h-4 w-4"})}),(0,Qr.jsx)("button",{type:"button",onClick:()=>n(t),className:"p-1 text-red-400 hover:text-red-600",children:(0,Qr.jsx)(ca,{className:"h-4 w-4"})})]})]}),u&&(0,Qr.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,Qr.jsx)(vl,{step:e,index:t,onUpdate:r,quillRef:m,onTriggerCreation:s})})]})},jl=({onAddStep:e})=>{const[t,r]=(0,a.useState)(!1),n=[{type:"text",label:"Texto",icon:(0,Qr.jsx)(ul,{className:"w-4 h-4"})},{type:"video",label:"Video",icon:(0,Qr.jsx)(fl,{className:"w-4 h-4"})},{type:"quiz",label:"Cuestionario",icon:(0,Qr.jsx)(pl,{className:"w-4 h-4"})},{type:"pdf",label:"PDF",icon:(0,Qr.jsx)(ml,{className:"w-4 h-4"})}];return(0,Qr.jsxs)("div",{className:"relative inline-block",children:[(0,Qr.jsxs)("button",{onClick:()=>r(!t),className:"bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-gray-300 transition-colors text-sm flex items-center gap-2",children:[(0,Qr.jsx)(ua,{className:"w-4 h-4"}),"Aadir Paso"]}),t&&(0,Qr.jsx)("div",{className:"absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:(0,Qr.jsx)("div",{className:"py-1",children:n.map(({type:t,label:n,icon:s})=>(0,Qr.jsxs)("button",{onClick:()=>{e(t),r(!1)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[s," ",n]},t))})})]})},Nl=({lessonId:e,mode:t,onSave:r,onCancel:n,availableCourses:s,onTriggerCreation:o,isCollapsed:i=!1})=>{const{t:l}=k(),[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)({}),[x,y]=(0,a.useState)(0),b=Ja(Za(Ho)),v=(0,a.useCallback)(()=>{g({title:"",content:"",status:"publish",courseId:"",steps:[],startDate:""}),y(0)},[]);(0,a.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&v();else{d(!0),m(null),y(0);try{const t=await Cs(e);g({title:bl(t),content:t.content?.rendered||"",status:t.status||"publish",courseId:t.meta?._course_id?.toString()||"",steps:(t.meta?._lesson_steps||[]).map((e,t)=>({...e,id:`step-${t}`})),startDate:t.meta?._start_date||""})}catch(e){m("Failed to load lesson data.")}finally{d(!1)}}})()},[e,t,v]);const w=(e,t)=>{g(r=>({...r,[e]:t}))},j=(e,t,r)=>{const n=[...h.steps];"data"===t?n[e].data=r:n[e][t]=r,w("steps",n)},N=e=>{const t=h.steps.filter((t,r)=>r!==e).map((e,t)=>({...e,order:t+1}));w("steps",t)};if(c)return(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)("p",{children:"Cargando..."})});const _=[{name:"Ajustes",content:(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo de la Leccin"}),(0,Qr.jsx)("input",{type:"text",value:h.title||"",onChange:e=>w("title",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Curso"}),(0,Qr.jsxs)("select",{value:h.courseId||"",onChange:e=>w("courseId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"",children:"Seleccionar curso..."}),s.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,Qr.jsxs)("span",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(tl,{className:"w-4 h-4"}),"Fecha de Inicio"]})}),(0,Qr.jsx)("input",{type:"date",value:(e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);return isNaN(t.getTime())?"":`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`})(h.startDate),onChange:e=>w("startDate",e.target.value||""),className:"w-full input border-gray-300 rounded-md"}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"La leccin ser visible a partir de esta fecha. Dejar vaco para que est siempre disponible."})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin / Contenido Principal"}),(0,Qr.jsx)(ha(),{theme:"snow",value:h.content||"",onChange:e=>w("content",e)})]})]})},{name:"Pasos",content:(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsx)(wi,{sensors:b,collisionDetection:ao,onDragEnd:e=>{const{active:t,over:r}=e;if(r&&t.id!==r.id){const e=h.steps.findIndex(e=>e.id===t.id),n=h.steps.findIndex(e=>e.id===r.id);if(-1!==e&&-1!==n){const t=_i(h.steps,e,n).map((e,t)=>({...e,order:t+1}));w("steps",t)}}},children:(0,Qr.jsx)(Ai,{items:(h.steps||[]).map(e=>e.id),strategy:Mi,children:(h.steps||[]).map((e,t)=>(0,Qr.jsx)(wl,{step:e,index:t,onUpdate:j,onRemove:N,onTriggerCreation:o},e.id))})}),(0,Qr.jsx)(jl,{onAddStep:e=>{const t=h.steps||[],r=t.length+1,n={id:`step-${Date.now()}`,title:`Nuevo Paso (${e})`,type:e,order:r,data:{}};w("steps",[...t,n])}})]})}],C="create"===t?"Crear Nueva Leccin":`Editando: ${bl(h)||"..."}`;return(0,Qr.jsxs)("div",{className:or("bg-white rounded-lg border border-gray-200 flex flex-col h-full",{"overflow-hidden":i}),children:[(0,Qr.jsxs)("header",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[(0,Qr.jsx)("h3",{className:or("text-lg font-bold text-gray-800 truncate",{"transform -rotate-90 whitespace-nowrap":i}),children:C}),!i&&(0,Qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qr.jsxs)("button",{onClick:async()=>{f(!0),m(null);try{const e={_lesson_steps:h.steps.map(({id:e,...t},r)=>({...t,order:r+1})),_start_date:h.startDate||""};h.courseId&&""!==h.courseId&&"0"!==h.courseId&&(e._course_id=h.courseId);const t={title:h.title,content:h.content,status:h.status,meta:e};await r(t)}catch(e){m(e.message||"Failed to save the lesson.")}finally{f(!1)}},disabled:u,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 flex items-center gap-2",children:[(0,Qr.jsx)(hl,{className:"w-4 h-4"}),u?"Guardando...":"Guardar"]}),(0,Qr.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-800",children:(0,Qr.jsx)(En,{className:"h-5 w-5"})})]})]}),(0,Qr.jsxs)("main",{className:or("flex-1 overflow-y-auto",{"p-6":!i,hidden:i}),children:[p&&(0,Qr.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:p}),(0,Qr.jsx)(Bi,{tabs:_,activeTab:x,setActiveTab:y})]})]})},kl=cn("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),_l={_course_id:0,_question_lesson:0,_question_type:"multiple_choice",_difficulty_level:"medium",_points:1,_points_incorrect:0,_question_order:0,_is_required:!1,_quiz_ids:[],_question_options:[],_explanation:"",_question_provider:"human"},Cl=["multiple_choice","true_false","essay","short_answer","fill_blank"],Sl=["easy","medium","hard"],El=e=>e?{id:e.id||0,title:(0,Rn.w3)(e.title),content:(0,Rn.w3)(e.content),status:(0,Rn.se)(e.status,"draft"),date:e.date||"",modified:e.modified||"",is_favorite:(0,Rn.kM)(e.is_favorite),qe_category:(0,Rn.E5)(e.qe_category),qe_provider:(0,Rn.E5)(e.qe_provider),meta:{..._l,...e.meta||{},_quiz_ids:(0,Rn.E5)(e.meta?._quiz_ids),_question_options:Array.isArray(e.meta?._question_options)?e.meta._question_options.map(e=>({...e,isCorrect:(0,Rn.kM)(e.isCorrect)})):[]},_embedded:e._embedded||{}}:null,Ol=e=>{const t=El(e);if(!t)return null;let r="";t.content&&("object"==typeof t.content&&null!==t.content?r=t.content.rendered||t.content.raw||"":"string"==typeof t.content&&(r=t.content));const n=r||t.meta?._explanation||"",s=n.replace(/<[^>]*>/g,"").trim();return{...t,formattedType:(0,Rn.ZH)(t.meta._question_type.replace("_"," ")),formattedDifficulty:(0,Rn.ZH)(t.meta._difficulty_level),formattedDate:(0,Rn.Yq)(t.date),shortExplanation:(0,Rn.EJ)(s,100),fullExplanation:n,isPublished:"publish"===t.status,isFavorite:t.is_favorite||!1}},Ml=(0,gn.eG)("question","questions",{sanitizer:El,validator:e=>{const t=[],r=(0,Rn.Kf)(e.title,"Question title");r&&t.push(r);const n=e.type||e.meta?._question_type;return"multiple_choice"!==n&&"true_false"!==n||(!e.options||e.options.length<1?t.push("At least one option is required."):e.options.some(e=>e.isCorrect)||t.push("At least one option must be marked as correct.")),(0,Rn.vQ)(t)},transformer:e=>{console.log(" transformQuestionDataForApi - Input:",e);const t={title:(0,Rn.xV)(e.title),content:(0,Rn.xV)(e.explanation||e.content||""),status:(0,Rn.se)(e.status,"publish"),qe_category:(0,Rn.E5)(e.qe_category),qe_provider:e.provider?[(0,Rn.o5)(e.provider)]:[],meta:{}};if(void 0!==e.courseId&&null!==e.courseId&&""!==e.courseId&&"0"!==e.courseId&&0!==e.courseId){const r=(0,Rn.o5)(e.courseId,0);r>0&&(t.meta._course_id=r)}if(void 0!==e.lessonId&&null!==e.lessonId&&""!==e.lessonId&&"0"!==e.lessonId&&0!==e.lessonId){const r=(0,Rn.o5)(e.lessonId,0);r>0&&(t.meta._question_lesson=r)}return t.meta._quiz_ids=(0,Rn.E5)(e.quizIds),t.meta._explanation=(0,Rn.xV)(e.explanation||e.content||""),t.meta._question_type=(0,Rn.zi)(e.type,Cl,"multiple_choice"),t.meta._difficulty_level=(0,Rn.zi)(e.difficulty,Sl,"medium"),t.meta._points=(0,Rn.o5)(e.points,1,0),t.meta._points_incorrect=(0,Rn.o5)(e.pointsIncorrect,0,0),Array.isArray(e.options)&&(t.meta._question_options=e.options.map((e,t)=>({id:t,text:(0,Rn.xV)(e.text),isCorrect:(0,Rn.kM)(e.isCorrect)}))),console.log(" transformQuestionDataForApi - Output:",t),console.log(" Content length:",t.content?.length||0),console.log(" Explanation length:",t.meta._explanation?.length||0),t},buildParams:(e={})=>{const{difficulty:t,...r}=e,n=(0,gn.DK)(r);if(e.quizId&&n.append("quiz_id",e.quizId.toString()),e.category&&"all"!==e.category){const t=Array.isArray(e.category)?e.category.join(","):e.category;n.append("qe_category",t)}return e.provider&&"all"!==e.provider&&n.append("qe_provider",e.provider),e.type&&"all"!==e.type&&n.append("type",e.type),t&&"all"!==t&&n.append("difficulty",t),e.status_filters&&Array.isArray(e.status_filters)&&e.status_filters.length>0&&n.append("status_filters",e.status_filters.join(",")),n}}),Tl=async(e={})=>{const t=await Ml.getAll(e);return t.data&&Array.isArray(t.data)&&console.log(" Questions received from API:",t.data.map(e=>({id:e.id,title:e.title?.rendered||e.title,is_favorite:e.is_favorite}))),t},Pl=async(e,t={})=>Ml.getOne(e,t),Al=async e=>Ml.create(e),ql=async(e,t)=>Ml.update(e,t),zl=async e=>Ml.delete(e),Dl=Tl,Ll=Pl,Il=Al,Rl=ql,$l=zl,Fl=async(e,t={})=>{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid quiz ID provided");return console.log(" Getting questions for quiz:",e),Dl({...t,quizId:e})},Bl=async e=>Ml.duplicate(e),Ul=async(e={})=>Ml.getCount(e),Hl=async e=>{try{return!!await Ll(e)}catch(e){return!1}},Wl=async(e,t)=>ql(e,{status:t}),Ql=async(e,t)=>ql(e,{meta:{_question_order:t}}),Vl=async(e,t={})=>Dl({...t,questionType:e}),Kl=async(e,t={})=>Dl({...t,difficulty:e}),Yl=async(e,t={})=>Dl({...t,category:e}),Gl=async(e,t={})=>Dl({...t,provider:e}),Xl=async(e={})=>Dl({...e,status:"publish"}),Zl=async e=>{try{const t=await Ll(e);return{id:t.id,type:t.meta?._question_type||"multiple_choice",difficulty:t.meta?._difficulty_level||"medium",points:t.meta?._points||1,optionsCount:t.meta?._question_options?.length||0,correctAnswersCount:t.meta?._question_options?.filter(e=>e.isCorrect)?.length||0,isRequired:t.meta?._is_required||!1,provider:t.meta?._provider||"custom"}}catch(e){throw console.error(" Error getting question statistics:",e),e}},Jl=async e=>{try{console.log(` Bulk creating ${e.length} questions...`);const t=e.map(e=>Al(e)),r=await Promise.all(t);return console.log(` Successfully created ${r.length} questions`),r}catch(e){throw console.error(" Error in bulk question creation:",e),e}},ec=async(e,t={})=>{if(!Array.isArray(e)||0===e.length)return[];const r=t.batchSize||100,n=e.filter(e=>Number.isInteger(e)&&e>0);if(0===n.length)return[];console.log(` Fetching ${n.length} questions by IDs (batch size: ${r})...`);try{const e=window.qe_data||{};if(!e.endpoints||!e.endpoints.questions)throw new Error("Questions endpoint not configured");const t=e.endpoints.questions,s=[];for(let a=0;a<n.length;a+=r){const o=n.slice(a,a+r),i=window.qe_data?.user?.roles?.includes("administrator")||!1,l=`${t}?${new URLSearchParams({include:o.join(","),per_page:r.toString(),context:i?"edit":"view",orderby:"include"}).toString()}`,c=await fetch(l,{headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},credentials:"same-origin"});if(!c.ok)throw new Error(`API Error ${c.status}: ${c.statusText}`);const d=await c.json();s.push(...d),console.log(` Loaded batch ${Math.floor(a/r)+1}: ${d.length} questions`)}const a=s.map(El),o=new Map(a.map(e=>[e.id,e])),i=n.map(e=>o.get(e)).filter(Boolean);if(console.log(` Successfully fetched ${i.length}/${n.length} questions`),i.length<n.length){const e=n.filter(e=>!o.has(e));console.warn(` Could not fetch ${e.length} questions:`,e)}return i}catch(e){throw console.error(" Error fetching questions by IDs:",e),e}},tc=(e={})=>{const t=(0,a.useMemo)(()=>e=>Ol(e),[]),n=(0,a.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,totalPoints:0,trueFalseQuestions:0,essayQuestions:0,byDifficulty:{}};let r=0,n=0,s=0;const a={easy:0,medium:0,hard:0};return e.forEach(e=>{r+=e.meta?._points||0;const t=e.meta?._question_type,o=e.meta?._difficulty_level||"medium";"true_false"===t&&n++,"essay"===t&&s++,a.hasOwnProperty(o)&&a[o]++}),{total:t,totalPoints:r,trueFalseQuestions:n,essayQuestions:s,byDifficulty:a}},[]),s=In({service:r,resourceName:"question",initialFilters:{search:e.search||"",quizId:e.quizId||null,type:e.type||null,difficulty:e.difficulty||null,category:e.category||null,course_id:e.course_id||null,lessons:e.lessons||null,status_filters:e.status_filters||null,status:e.status||"publish,draft,private"},dataProcessor:t,computedValuesCalculator:n,...e}),{items:o,fetchItems:i,loadMore:l,createItem:c,updateItem:d,deleteItem:u,duplicateItem:f,refresh:p}=s;return{...s,questions:o,fetchQuestions:i,loadMoreQuestions:l,createQuestion:c,updateQuestion:d,deleteQuestion:u,duplicateQuestion:f,refreshQuestions:p}},rc=tc,nc={primary:"qe-btn-primary",secondary:"qe-btn-secondary",accent:"qe-btn-accent",ghost:"qe-btn-ghost",success:"qe-btn-success"},sc={sm:"qe-btn-sm",md:"qe-btn-md",lg:"qe-btn-lg"},ac=({variant:e="primary",size:t="md",className:r="",style:n={},children:s,disabled:a,...o})=>{const i=nc[e]||nc.primary,l=sc[t]||sc.md;return(0,Qr.jsx)("button",{type:"button",className:`${i} ${l} ${r}`.trim(),style:n,disabled:a,...o,children:s})},oc=({question:e,onRemove:t})=>{const{attributes:r,listeners:n,setNodeRef:s,transform:a,transition:o}=$i({id:e.id}),i={transform:Ra.Transform.toString(a),transition:o};return(0,Qr.jsxs)("div",{ref:s,style:i,className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("button",{type:"button",...r,...n,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,Qr.jsx)(la,{className:"h-5 w-5"})}),(0,Qr.jsx)("div",{children:(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title?.rendered||e.title})})]}),(0,Qr.jsx)("button",{type:"button",onClick:()=>t(e.id),className:"text-red-600 hover:text-red-800",children:(0,Qr.jsx)(ca,{className:"w-4 h-4"})})]})},ic=({onAddQuestion:e,onCreateNew:t,selectedQuestions:r,searchResults:n,isSearching:s,onSearch:o})=>{const{t:i}=k(),[l,c]=(0,a.useState)(""),d=e=>{e.preventDefault(),l.trim()&&o(l)};return(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsx)("h4",{className:"font-medium text-gray-800",children:i("quizzes.form.addQuestions")}),(0,Qr.jsxs)("div",{className:"flex gap-2",children:[(0,Qr.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&d(e)},placeholder:i("quizzes.form.searchPlaceholder"),className:"flex-1 input border-gray-300 rounded-md"}),(0,Qr.jsxs)(ac,{onClick:d,disabled:s,variant:"primary",className:"font-semibold py-2 px-3 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,Qr.jsx)(Tn,{className:"w-4 h-4"}),i(s?"common.searching":"common.search")]}),(0,Qr.jsxs)(ac,{onClick:t,variant:"ghost",className:"font-semibold py-2 px-3 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,Qr.jsx)(ua,{className:"w-4 h-4"}),i("common.createNew")]})]}),n.length>0&&(0,Qr.jsx)("div",{className:"border rounded-md max-h-48 overflow-y-auto bg-white",children:n.map(t=>{const n=r.some(e=>e.id===t.id);return(0,Qr.jsxs)("div",{className:"flex justify-between items-center p-3 border-b last:border-b-0",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.title?.rendered||"Untitled"}),(0,Qr.jsx)("button",{onClick:()=>e(t),disabled:n,className:"text-sm font-semibold py-1 px-3 rounded-full "+(n?"bg-gray-200 text-gray-500":"bg-green-100 text-green-700 hover:bg-green-200"),children:i(n?"common.added":"common.add")})]},t.id)})})]})},lc=({quizId:e,mode:t,onSave:r,onCancel:n,availableCourses:s,availableCategories:o,isContextual:i=!1})=>{const{t:l}=k(),[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),[h,g]=(0,a.useState)(0),[x,y]=(0,a.useState)({}),[b,v]=(0,a.useState)([]),[w,j]=(0,a.useState)(!1),N=Ja(Za(Ho)),{questions:_,loading:C,error:S,fetchItems:E}=tc({autoFetch:!1}),O=(0,a.useCallback)(()=>{y({title:"",content:"",status:"publish",courseId:"",qe_category:[],difficulty_level:"medium",passing_score:"7.0",time_limit:"",max_attempts:"",randomize_questions:!1,show_results:!0,enable_negative_scoring:!1,questionIds:[],start_date:""}),v([]),j(!1)},[]);(0,a.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&O();else{d(!0),m(null),j(!1);try{console.log(" Fetching quiz data for ID:",e);const t=await(0,Ys.getOne)(e);console.log(" Quiz data received:",t);const r=t.meta||{},n="string"==typeof t.title?t.title:t.title?.rendered||"",s="string"==typeof t.content?t.content:t.content?.rendered||r._quiz_instructions||"";y({title:n,content:s,status:t.status||"publish",courseId:r._course_id?.toString()||"",qe_category:Array.isArray(t.qe_category)?t.qe_category.map(String):[],difficulty_level:r._difficulty_level||"medium",passing_score:r._passing_score?.toString()||"7.0",time_limit:r._time_limit?.toString()||"",max_attempts:r._max_attempts?.toString()||"",randomize_questions:r._randomize_questions||!1,show_results:void 0===r._show_results||r._show_results,enable_negative_scoring:r._enable_negative_scoring||!1,questionIds:r._quiz_question_ids||[],start_date:r._start_date||""}),console.log(" Form data set:",{title:n,category:t.qe_category});const a=r._quiz_question_ids||[];if(console.log(" Loading questions for quiz. Total IDs:",a.length),a.length>0)try{const e=await ec(a,{batchSize:30});console.log(" Loaded questions:",e.length),v(e),j(!0)}catch(e){console.error(" Error loading questions:",e),m(l("errors.loadQuestions")||"Error loading questions"),v([]),j(!0)}else console.log(" Quiz has no questions"),v([]),j(!0)}catch(e){console.error(" Error fetching quiz:",e),m(l("errors.fetchQuiz")),j(!0)}finally{d(!1)}}})()},[e,t,l,O]);const M=(e,t)=>{y(r=>({...r,[e]:t}))},T=e=>{const t=b.filter(t=>t.id!==e);v(t),M("questionIds",t.map(e=>e.id))};if(c)return(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)("p",{children:l("common.loading")})});const P=[{value:"easy",label:l("common.easy")},{value:"medium",label:l("common.medium")},{value:"hard",label:l("common.hard")}],A=(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.title")}),(0,Qr.jsx)("input",{type:"text",value:x.title||"",onChange:e=>M("title",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.course")}),(0,Qr.jsxs)("select",{value:x.courseId||"",onChange:e=>M("courseId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"",children:l("common.select")}),s.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.category")}),(0,Qr.jsxs)("select",{value:x.qe_category?.[0]||"",onChange:e=>M("qe_category",[e.target.value]),className:"w-full input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"",children:l("common.select")}),o.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.difficulty")}),(0,Qr.jsx)("select",{value:x.difficulty_level||"medium",onChange:e=>M("difficulty_level",e.target.value),className:"w-full input border-gray-300 rounded-md",children:P.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.startDate")}),(0,Qr.jsx)("input",{type:"date",value:x.start_date||"",onChange:e=>M("start_date",e.target.value),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.instructions")}),(0,Qr.jsx)(ha(),{theme:"snow",value:x.content||"",onChange:e=>M("content",e)})]}),(0,Qr.jsxs)("div",{className:"border-t pt-6",children:[(0,Qr.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:l("common.settings")}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.passingScore")}),(0,Qr.jsx)("input",{type:"number",min:"0",max:"10",step:"0.1",value:x.passing_score||"",onChange:e=>M("passing_score",e.target.value),className:"w-full input border-gray-300 rounded-md",placeholder:"7.0"}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Base 10: 0-10 (ej: 7.0 = 70%)"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.timeLimit")}),(0,Qr.jsx)("input",{type:"number",min:"0",value:x.time_limit||"",onChange:e=>M("time_limit",e.target.value),placeholder:l("common.unlimited"),className:"w-full input border-gray-300 rounded-md"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.maxAttempts")}),(0,Qr.jsx)("input",{type:"number",min:"0",value:x.max_attempts||"",onChange:e=>M("max_attempts",e.target.value),placeholder:l("common.unlimited"),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,Qr.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,Qr.jsxs)("label",{className:"flex items-center",children:[(0,Qr.jsx)("input",{type:"checkbox",checked:x.randomize_questions||!1,onChange:e=>M("randomize_questions",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,Qr.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:l("quizzes.form.randomize")})]}),(0,Qr.jsxs)("label",{className:"flex items-center",children:[(0,Qr.jsx)("input",{type:"checkbox",checked:x.show_results||!1,onChange:e=>M("show_results",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,Qr.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:l("quizzes.form.showResults")})]}),(0,Qr.jsxs)("label",{className:"flex items-center",children:[(0,Qr.jsx)("input",{type:"checkbox",checked:x.enable_negative_scoring||!1,onChange:e=>M("enable_negative_scoring",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,Qr.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:l("quizzes.form.negativeScoring")})]})]})]})]}),q=(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsx)(ic,{onAddQuestion:e=>{if(!b.some(t=>t.id===e.id)){const t=[...b,e];v(t),M("questionIds",t.map(e=>e.id))}},onCreateNew:()=>alert("Prximamente: Crear nueva pregunta desde aqu."),selectedQuestions:b,searchResults:_,isSearching:C,onSearch:e=>{E(!0,{search:e,perPage:50})}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("h4",{className:"font-medium text-gray-800 mb-2",children:[l("quizzes.form.selectedQuestions")," (",b.length,")"]}),!w&&c?(0,Qr.jsx)("div",{className:"p-8 text-center",children:(0,Qr.jsxs)("p",{className:"text-gray-500",children:[l("common.loading"),"..."]})}):b.length>0?(0,Qr.jsx)(wi,{sensors:N,collisionDetection:ao,onDragEnd:e=>{const{active:t,over:r}=e;if(r&&t.id!==r.id){const e=b.findIndex(e=>e.id===t.id),n=b.findIndex(e=>e.id===r.id);if(-1!==e&&-1!==n){const t=_i(b,e,n);v(t),M("questionIds",t.map(e=>e.id))}}},children:(0,Qr.jsx)(Ai,{items:b.map(e=>e.id),strategy:Mi,children:(0,Qr.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,Qr.jsx)(oc,{question:e,onRemove:T},e.id))})})}):(0,Qr.jsx)("p",{className:"text-sm text-gray-500 p-4 border rounded-md text-center bg-gray-50",children:l("quizzes.form.noQuestions")})]})]}),z=[{name:l("common.settings"),content:A},{name:l("common.questions"),content:q}],D="create"===t?l("quizzes.createNew"):l("quizzes.editTitle",{title:x.title||"..."});return(0,Qr.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full",children:[(0,Qr.jsxs)("header",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold text-gray-800 truncate pr-4",children:D}),(0,Qr.jsxs)("div",{className:"flex items-center gap-4",children:[i&&(0,Qr.jsxs)("button",{onClick:n,className:"text-gray-600 hover:text-gray-900 flex items-center gap-2 text-sm font-semibold",children:[(0,Qr.jsx)(kl,{className:"w-4 h-4"})," Volver"]}),(0,Qr.jsxs)(ac,{onClick:async()=>{f(!0),m(null);try{const e={_difficulty_level:x.difficulty_level,_passing_score:x.passing_score,_time_limit:""===x.time_limit?0:parseInt(x.time_limit,10),_max_attempts:""===x.max_attempts?0:parseInt(x.max_attempts,10),_randomize_questions:x.randomize_questions,_show_results:x.show_results,_enable_negative_scoring:x.enable_negative_scoring,_quiz_question_ids:x.questionIds,_start_date:x.start_date||""};x.courseId&&""!==x.courseId&&"0"!==x.courseId&&(e._course_id=x.courseId);const t={title:x.title,content:x.content,status:x.status,meta:e,qe_category:x.qe_category.map(e=>parseInt(e,10)).filter(e=>!isNaN(e)&&e>0)};await r(t)}catch(e){m(e.message||l("errors.saveQuiz"))}finally{f(!1)}},disabled:u,variant:"primary",className:"font-semibold py-2 px-4 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,Qr.jsx)(hl,{className:"w-4 h-4"}),l(u?"common.saving":"common.save")]}),!i&&(0,Qr.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-800",children:(0,Qr.jsx)(En,{className:"h-5 w-5"})})]})]}),(0,Qr.jsxs)("main",{className:"flex-1 overflow-y-auto p-6",children:[p&&(0,Qr.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:p}),(0,Qr.jsx)(Bi,{tabs:z,activeTab:h,setActiveTab:g})]})]})},cc=cn("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),dc=cn("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),uc=cn("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),fc=cn("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),pc=({courseId:e,courseName:t,onClose:r})=>{const{t:n}=k(),[s,o]=(0,a.useState)([]),[i,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,f]=(0,a.useState)(new Set),[p,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[x,y]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[w,j]=(0,a.useState)(new Set),N=(0,a.useMemo)(()=>{const e={};return s.forEach(t=>{const r=t.lesson_id||"no-lesson",s=t.lesson_title||n("quizzes.noLesson","Sin leccin");e[r]||(e[r]={lessonId:r,lessonTitle:s,quizzes:[]}),e[r].quizzes.push(t)}),Object.values(e)},[s,n]),_=[{value:"easy",label:n("quizzes.difficulty.easy","Fcil"),color:"bg-green-100 text-green-800"},{value:"medium",label:n("quizzes.difficulty.medium","Medio"),color:"bg-yellow-100 text-yellow-800"},{value:"hard",label:n("quizzes.difficulty.hard","Difcil"),color:"bg-red-100 text-red-800"}],C=(0,a.useCallback)(async()=>{if(e){l(!0),d(null);try{const t=window.qe_data?.endpoints?.custom_api||`${window.qe_data?.api_url}/qe/v1`,r=await fetch(`${t}/courses/${e}/quizzes`,{headers:{"Content-Type":"application/json","X-WP-Nonce":window.qe_data?.nonce}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const n=await r.json();o(n.data||[]);const s=new Set(n.data?.map(e=>e.lesson_id||"no-lesson")||[]);j(s)}catch(e){console.error("Error fetching course quizzes:",e),d(e.message)}finally{l(!1)}}},[e]);(0,a.useEffect)(()=>{C()},[C]);const S=e=>{const t=_.find(t=>t.value===e)||_[1];return(0,Qr.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${t.color}`,children:t.label})};return i?(0,Qr.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Qr.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:r}),(0,Qr.jsxs)("div",{className:"ml-auto w-full max-w-lg bg-white shadow-xl h-full flex flex-col relative z-10 animate-slide-in-right",children:[(0,Qr.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Qr.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:n("quizzes.batch.title","Acciones en Lote")}),(0,Qr.jsx)("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:(0,Qr.jsx)(En,{size:20,className:"text-gray-500"})})]}),(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsx)(dn,{className:"w-8 h-8 animate-spin text-blue-500"})})]})]}):c?(0,Qr.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Qr.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:r}),(0,Qr.jsxs)("div",{className:"ml-auto w-full max-w-lg bg-white shadow-xl h-full flex flex-col relative z-10",children:[(0,Qr.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Qr.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:n("quizzes.batch.title","Acciones en Lote")}),(0,Qr.jsx)("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:(0,Qr.jsx)(En,{size:20,className:"text-gray-500"})})]}),(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)(Pn,{className:"w-12 h-12 text-red-500 mx-auto mb-2"}),(0,Qr.jsx)("p",{className:"text-red-600",children:c}),(0,Qr.jsx)("button",{onClick:C,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:n("common.retry","Reintentar")})]})})]})]}):(0,Qr.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,Qr.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:r}),(0,Qr.jsxs)("div",{className:"ml-auto w-full max-w-lg bg-white shadow-xl h-full flex flex-col relative z-10",children:[(0,Qr.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Qr.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:n("quizzes.batch.title","Acciones en Lote")}),(0,Qr.jsx)("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:(0,Qr.jsx)(En,{size:20,className:"text-gray-500"})})]}),(0,Qr.jsxs)("p",{className:"text-sm text-gray-600",children:[s.length," ",n("quizzes.title","cuestionarios")]})]}),(0,Qr.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-gray-50 space-y-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qr.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[u.size," ",n("common.selected","seleccionados")]}),(0,Qr.jsx)("button",{onClick:()=>{f(new Set(s.map(e=>e.id)))},className:"text-sm text-blue-600 hover:text-blue-800",children:n("common.selectAll","Seleccionar todos")}),(0,Qr.jsx)("button",{onClick:()=>{f(new Set)},className:"text-sm text-gray-600 hover:text-gray-800",children:n("common.deselectAll","Deseleccionar todos")})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[(0,Qr.jsx)(cc,{size:14,className:"inline mr-1"}),n("quizzes.form.difficulty","Dificultad")]}),(0,Qr.jsxs)("select",{value:x,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,Qr.jsx)("option",{value:"",children:n("quizzes.batch.noChange"," Sin cambio ")}),_.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[(0,Qr.jsx)(tl,{size:14,className:"inline mr-1"}),n("quizzes.form.startDate","Fecha de Inicio")]}),(0,Qr.jsx)("input",{type:"date",value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,Qr.jsx)("div",{className:"flex items-end",children:(0,Qr.jsxs)("button",{onClick:async()=>{if(0===u.size)return void alert(n("quizzes.batch.noSelection","Selecciona al menos un cuestionario"));const t={};if(x&&(t.difficulty_level=x),b&&(t.start_date=b),0!==Object.keys(t).length){m(!0),g(null);try{const r=window.qe_data?.endpoints?.custom_api||`${window.qe_data?.api_url}/qe/v1`,n=await fetch(`${r}/courses/${e}/quizzes/batch`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.qe_data?.nonce},body:JSON.stringify({quiz_ids:Array.from(u),updates:t})});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||`HTTP ${n.status}`)}const s=await n.json();g(s),o(e=>e.map(e=>u.has(e.id)?{...e,difficulty_level:x||e.difficulty_level,start_date:b||e.start_date}:e)),y(""),v("")}catch(e){console.error("Error applying batch update:",e),g({success:!1,error:e.message})}finally{m(!1)}}else alert(n("quizzes.batch.noChanges","No hay cambios que aplicar"))},disabled:p||0===u.size||!x&&!b,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[p?(0,Qr.jsx)(dn,{size:16,className:"animate-spin"}):(0,Qr.jsx)(hl,{size:16}),n("quizzes.batch.apply","Aplicar Cambios")]})})]}),h&&(0,Qr.jsx)("div",{className:"p-3 rounded-md "+(h.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:h.success?(0,Qr.jsxs)("div",{className:"flex items-center gap-2 text-green-700",children:[(0,Qr.jsx)(On,{size:16}),(0,Qr.jsxs)("span",{className:"text-sm",children:[n("quizzes.batch.success","Cambios aplicados"),": ",h.summary?.updated||0," ",n("quizzes.batch.updated","actualizados")]})]}):(0,Qr.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,Qr.jsx)(Pn,{size:16}),(0,Qr.jsx)("span",{className:"text-sm",children:h.error})]})})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===N.length?(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:n("quizzes.noQuizzes","No hay cuestionarios en este curso")}):(0,Qr.jsx)("div",{className:"divide-y divide-gray-200",children:N.map(e=>{const t=w.has(e.lessonId),r=(e=>{const t=e.map(e=>e.id),r=t.filter(e=>u.has(e)).length;return 0===r?"none":r===t.length?"all":"partial"})(e.quizzes);return(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 cursor-pointer",onClick:()=>{return t=e.lessonId,void j(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},children:[(0,Qr.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{const t=e.map(e=>e.id),r=t.every(e=>u.has(e));f(e=>{const n=new Set(e);return r?t.forEach(e=>n.delete(e)):t.forEach(e=>n.add(e)),n})})(e.quizzes)},className:"mr-3 text-gray-400 hover:text-blue-600",children:"all"===r?(0,Qr.jsx)(dc,{size:20,className:"text-blue-600"}):"partial"===r?(0,Qr.jsx)(uc,{size:20,className:"text-blue-400"}):(0,Qr.jsx)(fc,{size:20})}),t?(0,Qr.jsx)(Vi,{size:18,className:"text-gray-400 mr-2"}):(0,Qr.jsx)(al,{size:18,className:"text-gray-400 mr-2"}),(0,Qr.jsx)("span",{className:"font-medium text-gray-800 flex-1",children:e.lessonTitle}),(0,Qr.jsxs)("span",{className:"text-sm text-gray-500",children:[e.quizzes.length," quizzes"]})]}),t&&(0,Qr.jsx)("div",{className:"bg-white",children:e.quizzes.map(e=>(0,Qr.jsxs)("div",{className:"flex items-center px-4 py-2 pl-12 border-l-4 hover:bg-gray-50 "+(u.has(e.id)?"border-blue-500 bg-blue-50":"border-transparent"),children:[(0,Qr.jsx)("button",{onClick:()=>{return t=e.id,void f(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},className:"mr-3 text-gray-400 hover:text-blue-600",children:u.has(e.id)?(0,Qr.jsx)(dc,{size:18,className:"text-blue-600"}):(0,Qr.jsx)(fc,{size:18})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[S(e.difficulty_level),e.start_date&&(0,Qr.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,Qr.jsx)(tl,{size:12}),e.start_date]}),(0,Qr.jsxs)("span",{className:"text-xs text-gray-400",children:[e.question_count," preguntas"]})]})]})]},e.id))})]},e.lessonId)})})})]})]})},mc=()=>{const{t:e}=k(),[t,r]=(0,a.useState)([{type:"courseList"}]),[n,s]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null),l=xs({autoFetch:!0,perPage:50,debounceMs:300,status:"publish,draft,private"}),c=Ks({autoFetch:!1}),d=Xs({autoFetch:!1}),{options:u,refetch:f}=ta(["qe_category"]),p=e=>{r([{type:"courseList"},{type:"course",id:e.id}])},m=()=>{r([{type:"courseList"},{type:"course",id:"new"}])},h=()=>{r(e=>e.slice(0,-1))},g=(e,t)=>{r(r=>[...r,{type:e,id:"new",onCreated:t}])},x=async(e,r)=>{let n,s;if("lesson"===r?(n=c,s="createLesson"):"quiz"===r&&(n=d,s="createQuiz"),n&&s)try{const r=t[t.length-1],a=await n[s](e);r.onCreated&&r.onCreated(a),h(),l.refresh(),c.refresh()}catch(e){console.error(`Failed to create ${r} in context:`,e)}},y=(0,a.useMemo)(()=>u.qe_category||[],[u.qe_category]),b=(0,a.useMemo)(()=>(l.courses||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[l.courses]),v=(0,a.useMemo)(()=>({value:l.filters?.search||"",onChange:e=>l.updateFilter("search",e.target.value),placeholder:e("courses.searchPlaceholder"),isLoading:l.loading}),[l.filters,l.loading,e]),w=(0,a.useMemo)(()=>l.filters?[{label:e("filters.category"),value:l.filters.category||"all",onChange:e=>l.updateFilter("category",e),options:y,isLoading:!u.qe_category}]:[],[l.filters,y,u.qe_category,e]);if(!l.filters||!l.computed)return(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)("p",{children:e("common.loading")})});const j={1:["20%"],2:["20%","79%"],3:["20%","7%","71%"],4:["20%","7%","7%","63%"]},N=j[t.length]||j[4],_=(r,n)=>{const a=!(n===t.length-1);switch(r.type){case"courseList":return(0,Qr.jsx)(ra,{title:e("courses.title"),itemCount:l.pagination?.total||0,createButtonText:e("courses.addNew"),onCreate:m,isCreating:l.creating,onLoadMore:l.loadMoreCourses,hasMore:l.hasMore,isLoadingMore:l.loading&&(l.courses?.length||0)>0,filters:(0,Qr.jsx)(sa,{searchConfig:v,filtersConfig:w}),children:(l.courses||[]).map(e=>(0,Qr.jsx)(ia,{course:e,isSelected:t[1]?.id===e.id,onClick:p},e.id))});case"course":return(0,Qr.jsx)(dl,{courseId:"new"===r.id?null:r.id,mode:"new"===r.id?"create":"edit",onSave:"new"===r.id?l.createCourse:e=>l.updateCourse(r.id,e),onCancel:h,onTriggerCreation:g,isCollapsed:a,categoryOptions:y.filter(e=>"all"!==e.value),onCategoryCreated:f,onOpenBatchActions:"new"!==r.id?()=>{return e=r.id,i(e),void s(!0);var e}:null},r.id);case"lesson":return(0,Qr.jsx)(Nl,{lessonId:"new"===r.id?null:r.id,mode:"create",onSave:e=>x(e,"lesson"),onCancel:h,availableCourses:b,onTriggerCreation:g,isCollapsed:a,isContextual:!0},r.id);case"quiz":return(0,Qr.jsx)(lc,{mode:"create",onSave:e=>x(e,"quiz"),onCancel:h,availableCourses:b,availableCategories:[],onTriggerCreation:g,isCollapsed:a,isContextual:!0},r.id);default:return null}};return(0,Qr.jsxs)("div",{className:"qe-lms-admin-app h-full flex overflow-hidden px-6 py-6 space-x-6",children:[t.map((e,t)=>(0,Qr.jsx)("div",{className:"transition-all duration-300 ease-in-out h-full flex-shrink-0",style:{width:N[t]},children:_(e,t)},`${e.type}-${e.id}-${t}`)),n&&o&&(0,Qr.jsx)(pc,{courseId:o,onClose:()=>{s(!1),i(null)}})]})},hc=({lesson:e,isSelected:t,onClick:r})=>{const{t:n}=k(),s=e=>e?.title?.rendered||e?.title||n("lessons.untitled","Untitled Lesson"),a=or("p-4 cursor-pointer border-l-4 transition-colors duration-150",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t});return(0,Qr.jsx)("div",{className:a,onClick:()=>r(e),children:(0,Qr.jsxs)("div",{className:"flex items-center w-full gap-4",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,Qr.jsx)(kn,{className:"w-5 h-5 text-green-600"})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("p",{className:"text-sm font-semibold text-gray-900 truncate",title:s(e),children:s(e)}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[(0,Qr.jsx)(dc,{className:"w-3 h-3"}),(0,Qr.jsxs)("span",{children:[e.steps_count||0," Pasos"]})]})]})]})})},gc=()=>{const{t:e}=k(),[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)("view"),[o,i]=(0,a.useState)({isActive:!1,childType:null,onCreated:null}),l=Ks({autoFetch:!0,perPage:50,debounceMs:300}),c=xs({autoFetch:!1,status:"publish,draft,private"}),d=Xs({autoFetch:!1});(0,a.useEffect)(()=>{"edit"!==n&&"create"!==n&&!l.filters?.courseId||0!==c.courses.length||c.loading||c.fetchCourses(!0,{perPage:100})},[n,l.filters?.courseId]),(0,a.useEffect)(()=>{o.isActive&&"quiz"===o.childType&&0===d.quizzes.length&&!d.loading&&d.fetchQuizzes(!0,{perPage:100})},[o.isActive,o.childType]);const u=e=>{r(e.id),s("edit")},f=()=>{i({isActive:!1,childType:null,onCreated:null})},p=(0,a.useMemo)(()=>[{value:"all",label:e("courses.category.all")},...(c.courses||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title}))],[c.courses,e]),m=(0,a.useMemo)(()=>l.filters&&l.updateFilter?[{label:"Curso",value:l.filters.courseId||"all",onChange:e=>l.updateFilter("courseId",e),options:p,isLoading:c.loading}]:[],[l.filters,l.updateFilter,p,c.loading,e]),h=(0,a.useMemo)(()=>l.filters&&l.updateFilter?{value:l.filters.search||"",onChange:e=>l.updateFilter("search",e.target.value),placeholder:e("lessons.searchPlaceholder","Buscar lecciones..."),isLoading:l.loading}:{value:"",onChange:()=>{},placeholder:e("lessons.searchPlaceholder","Buscar lecciones..."),isLoading:!1},[l.filters,l.updateFilter,l.loading,e]);if(!l.filters||!l.pagination)return(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)("p",{children:e("common.loading")})});const g=o.isActive&&"quiz"===o.childType;return(0,Qr.jsxs)("div",{className:"qe-lms-admin-app h-full flex overflow-hidden px-6",children:[(0,Qr.jsx)("div",{className:or("transition-all duration-500 ease-in-out h-full flex-shrink-0",{"w-full lg:w-[20%]":!g,"w-[20%] opacity-60 pointer-events-none":g}),children:(0,Qr.jsx)(ra,{title:"Lecciones",itemCount:l.pagination?.total||0,createButtonText:"Crear Leccin",onCreate:()=>{r(null),s("create")},isCreating:l.creating,onLoadMore:l.loadMoreLessons,hasMore:l.hasMore,isLoadingMore:l.loading&&(l.lessons?.length||0)>0,filters:(0,Qr.jsx)(sa,{searchConfig:h,filtersConfig:m}),children:(l.lessons||[]).map(e=>(0,Qr.jsx)(hc,{lesson:e,isSelected:t===e.id,onClick:u},e.id))})}),(0,Qr.jsx)("div",{className:or("transition-all duration-500 ease-in-out h-full flex-shrink-0",{"flex-1":!g&&(t||"create"===n),"w-0":!t&&!g&&"create"!==n,"w-[7%]":g}),children:("edit"===n||"create"===n)&&(0,Qr.jsx)(Nl,{lessonId:t,mode:n,onSave:"create"===n?l.createLesson:e=>l.updateLesson(t,e),onCancel:()=>s("view"),availableCourses:p.filter(e=>"all"!==e.value),onTriggerCreation:(e,t)=>{i({isActive:!0,childType:e,onCreated:t})},isCollapsed:g},t||"new")}),(0,Qr.jsx)("div",{className:or("transition-all duration-500 ease-in-out h-full",{"flex-1":g,"w-0":!g}),children:g&&(0,Qr.jsx)(lc,{mode:"create",onSave:async e=>{if("quiz"===o.childType)try{const t=await d.createQuiz(e);o.onCreated&&o.onCreated(t.id),f()}catch(e){console.error("Failed to create quiz in context:",e)}},onCancel:f,availableCourses:p.filter(e=>"all"!==e.value),availableCategories:[],isContextual:!0})})]})},xc=({master:e,detail:t})=>(0,Qr.jsxs)("div",{className:"grid grid-cols-10 gap-6 h-full max-w-screen mx-auto",children:[(0,Qr.jsx)("div",{className:"col-span-10 lg:col-span-2 h-[calc(100vh-8rem)]",children:e}),(0,Qr.jsx)("div",{className:"col-span-10 lg:col-span-8 h-[calc(100vh-8rem)]",children:t})]}),yc=({quiz:e,isSelected:t,onClick:r})=>{const{t:n}=k(),s=or("p-4 cursor-pointer border-l-4",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t}),a="string"==typeof e.title?e.title:e.title?.rendered||n("common.untitled");return(0,Qr.jsxs)("li",{onClick:r,className:s,children:[(0,Qr.jsx)("h3",{className:or("font-semibold",{"text-blue-800":t,"text-gray-900":!t}),children:a}),(0,Qr.jsxs)("div",{className:or("text-sm mt-1 flex items-center space-x-4",{"text-blue-700":t,"text-gray-500":!t}),children:[(0,Qr.jsxs)("span",{className:"flex items-center",title:n("quizzes.card.questions",{count:e.question_count}),children:[(0,Qr.jsx)(pl,{className:"w-4 h-4 mr-1"}),e.question_count||0]}),(0,Qr.jsxs)("span",{className:"flex items-center",title:n("quizzes.card.attempts",{count:e.total_attempts}),children:[(0,Qr.jsx)(Nn,{className:"w-4 h-4 mr-1"}),e.total_attempts||0]})]})]})},bc=()=>{const{t:e}=k(),[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)("view"),[o,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),{quizzes:d,loading:u,error:f,pagination:p,creating:m,filters:h,updateFilter:g,createQuiz:x,updateQuiz:y,loadMoreQuizzes:b,hasMore:v}=Xs({autoFetch:!0,perPage:50,debounceMs:300}),{courses:w,loading:j,fetchCourses:N}=xs({autoFetch:!1,status:"publish,draft,private"}),{options:_,isLoading:C}=ta(["qe_category"]);(0,a.useEffect)(()=>{"edit"!==n&&"create"!==n&&null===h.courseId||0!==w.length||j||N(!0,{perPage:100})},[n,h.courseId]);const S={value:h.search,onChange:e=>g("search",e.target.value),placeholder:e("quizzes.searchPlaceholder"),isLoading:u},E=(0,a.useMemo)(()=>(w||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[w]),O=(0,a.useMemo)(()=>(_.qe_category||[]).filter(e=>"all"!==e.value),[_.qe_category]),M=[{label:e("quizzes.form.course"),value:h.courseId||"all",onChange:e=>g("courseId",e),options:[{value:"all",label:e("courses.all")},...E],isLoading:j},{label:e("quizzes.form.category"),value:h.category||"all",onChange:e=>g("category",e),options:_.qe_category||[{value:"all",label:e("courses.category.all")}],isLoading:C}],T=(0,Qr.jsx)(ra,{title:e("quizzes.title"),itemCount:p.total||0,createButtonText:e("quizzes.createNew"),onCreate:()=>{r(null),s("create")},isCreating:m,filters:(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsx)(sa,{searchConfig:S,filtersConfig:M}),(0,Qr.jsx)("button",{onClick:async()=>{if(confirm("Ests seguro de que quieres sincronizar los Course IDs de todos los quizzes?\n\nEsto actualizar el campo _course_ids basndose en las lecciones que contienen cada quiz.")){i(!0),c(null);try{const e=window.qe_data?.endpoints?.custom_api||window.qe_data?.api_url+"/quiz-extended/v1",t=await fetch(`${e}/sync-quiz-course-ids`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.qe_data.nonce}});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.message||`HTTP ${t.status}: ${t.statusText}`)}const r=await t.json();c(r);const n=r.data||r,s=` Sincronizacin completa!\n\nTotal de quizzes: ${n.total||0}\nSincronizados exitosamente: ${n.synced||0}\nErrores: ${n.errors||0}`;alert(s)}catch(e){console.error("Error syncing course IDs:",e),alert(` Error al sincronizar:\n\n${e.message}\n\nRevisa la consola para ms detalles.`)}finally{i(!1)}}},disabled:o,className:"w-full px-3 py-2 text-xs font-semibold text-white bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 rounded-md transition-colors",children:o?" Sincronizando...":" Sincronizar Course IDs (TEMPORAL)"})]}),onLoadMore:b,hasMore:v,isLoadingMore:u&&d.length>0,children:u&&0===d.length?(0,Qr.jsx)("p",{className:"p-4 text-center text-gray-500",children:e("common.loading")}):(0,Qr.jsx)("ul",{className:"divide-y divide-gray-200",children:d.map(e=>(0,Qr.jsx)(yc,{quiz:e,isSelected:t===e.id,onClick:()=>{return t=e.id,r(t),void s("edit");var t}},e.id))})}),P="edit"===n||"create"===n?(0,Qr.jsx)(lc,{quizId:t,mode:n,onSave:async e=>{if("create"===n){const t=await x(e);r(t.id),s("edit")}else"edit"===n&&await y(t,e)},availableCourses:E,availableCategories:O},t||"create"):(0,Qr.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full justify-center items-center",children:(0,Qr.jsx)("div",{className:"text-center text-gray-500",children:(0,Qr.jsx)("p",{children:e("quizzes.selectQuizToStart")})})});return(0,Qr.jsxs)("div",{className:"bg-gray-100 h-full",children:[f&&(0,Qr.jsx)("p",{className:"text-red-500 bg-red-50 p-4 rounded-md mb-4",children:f}),(0,Qr.jsx)(xc,{master:T,detail:P})]})},vc=cn("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),wc=cn("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),jc=cn("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Nc=cn("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),kc=cn("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),_c=({user:e,isSelected:t=!1,isChecked:r=!1,onClick:n,onToggleSelect:s,onShowEnrollments:a,onShowProgress:o,className:i=""})=>{const{theme:l}=Yr(),c=e.roles?.[0]||"subscriber",d=e.enrollmentData||{},u=d.isEnrolled||!1,f=d.progress||0,p=d.lastActivity,m=e.avatar_urls?.[48]||e.avatar_urls?.[96]||null,h=e.name?e.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase():e.username?.charAt(0).toUpperCase()||"U",g=(e=>{if(!e)return{status:"inactive",color:"text-gray-400"};const t=new Date(e),r=new Date,n=Math.floor((r-t)/864e5);return 0===n?{status:"active",color:"text-green-500"}:n<=7?{status:"recent",color:"text-yellow-500"}:{status:"inactive",color:"text-red-500"}})(p),x=(e=>{switch(e){case"administrator":return vc;case"editor":case"author":case"contributor":return wc;default:return Cn}})(c),y=()=>{n?.(e)};return(0,Qr.jsxs)("div",{className:`\n        relative p-4 rounded-lg border cursor-pointer transition-all duration-200\n        hover:shadow-md hover:border-blue-300\n        ${t?"qe-bg-primary-light qe-border-primary shadow-sm":"bg-white border-gray-200 hover:bg-gray-50"}\n        ${i}\n      `,onClick:y,children:[(0,Qr.jsx)("div",{className:"absolute top-2 left-2 z-10",children:(0,Qr.jsx)("button",{onClick:t=>{t.stopPropagation(),s?.(e.id,!r)},className:"p-1 hover:bg-gray-100 rounded transition-colors",title:r?"Deselect user":"Select user",children:r?(0,Qr.jsx)(dc,{className:"h-4 w-4 text-blue-600"}):(0,Qr.jsx)(fc,{className:"h-4 w-4 text-gray-400"})})}),(0,Qr.jsxs)("div",{className:"flex items-start space-x-3 mb-3 ml-6",children:[(0,Qr.jsxs)("div",{className:"flex-shrink-0",children:[m?(0,Qr.jsx)("img",{src:m,alt:e.name||e.username,className:"h-10 w-10 rounded-full object-cover"}):(0,Qr.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Qr.jsx)("span",{className:"text-sm font-medium text-gray-600",children:h})}),(0,Qr.jsx)("div",{className:`w-3 h-3 rounded-full ${g.color.replace("text-","bg-")} \n            absolute -mt-2 ml-8 border-2 border-white`})]}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:e.name||e.username||"Unknown User"}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Qr.jsx)(x,{className:"h-3 w-3 text-gray-400"}),(0,Qr.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${(e=>{switch(e){case"administrator":return"text-red-600 bg-red-100";case"editor":return"text-purple-600 bg-purple-100";case"author":return"text-blue-600 bg-blue-100";case"contributor":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}})(c)}`,children:c})]})]}),(0,Qr.jsx)("div",{className:"mt-1",children:(0,Qr.jsxs)("p",{className:"text-xs text-gray-500 truncate flex items-center",children:[(0,Qr.jsx)(nl,{className:"h-3 w-3 mr-1"}),e.email||"No email"]})})]})]}),u&&(0,Qr.jsxs)("div",{className:"mb-3 p-2 qe-bg-secondary-light rounded-md",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Qr.jsxs)("span",{className:"qe-text-secondary font-medium flex items-center",children:[(0,Qr.jsx)(jc,{className:"h-3 w-3 mr-1"}),"Enrolled"]}),(0,Qr.jsxs)("span",{className:"text-gray-600",children:[f,"%"]})]}),(0,Qr.jsx)("div",{className:"mt-1 w-full bg-white rounded-full h-1.5",children:(0,Qr.jsx)("div",{className:"qe-bg-secondary h-1.5 rounded-full transition-all duration-300",style:{width:`${f}%`}})})]}),(0,Qr.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mb-3",children:[(0,Qr.jsx)(tl,{className:"h-3 w-3 mr-1"}),(0,Qr.jsxs)("span",{children:["Registered ",new Date(e.date_registered||e.registered).toLocaleDateString()]})]}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,Qr.jsxs)("button",{onClick:y,className:"flex items-center text-xs text-blue-600 hover:text-blue-800 font-medium",children:[(0,Qr.jsx)(Nc,{className:"h-3 w-3 mr-1"}),"View Details"]}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-2",children:[u&&(0,Qr.jsxs)("button",{onClick:t=>{t.stopPropagation(),o?.(e.id)},className:"flex items-center text-xs qe-text-accent hover:opacity-80 font-medium",children:[(0,Qr.jsx)(kc,{className:"h-3 w-3 mr-1"}),"Progress"]}),(0,Qr.jsxs)("button",{onClick:t=>{t.stopPropagation(),a?.(e.id)},className:"flex items-center text-xs qe-text-secondary hover:opacity-80 font-medium",children:[(0,Qr.jsx)(kn,{className:"h-3 w-3 mr-1"}),"Courses"]})]})]}),(0,Qr.jsx)("div",{className:"absolute top-2 right-2",children:(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-mono text-gray-500 bg-gray-100",children:["#",e.id]})})]})},Cc=cn("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Sc=cn("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Ec=cn("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Oc=cn("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Mc=({size:e="default",message:t,variant:r="default",centered:n=!0,className:s="",fullScreen:a=!1,overlay:o=!1})=>{const i={xs:{spinner:"h-3 w-3",text:"text-xs"},sm:{spinner:"h-4 w-4",text:"text-sm"},default:{spinner:"h-6 w-6",text:"text-base"},lg:{spinner:"h-8 w-8",text:"text-lg"},xl:{spinner:"h-12 w-12",text:"text-xl"}}[e],l={default:{spinner:"text-gray-400",text:"text-gray-600"},primary:{spinner:"text-indigo-600",text:"text-indigo-600"},white:{spinner:"text-white",text:"text-white"}}[r],c=[n&&"flex flex-col items-center justify-center",a&&"fixed inset-0 z-50",a&&o&&"bg-black bg-opacity-50",!a&&n&&"py-8",s].filter(Boolean).join(" "),d=["flex flex-col items-center justify-center",t?"space-y-3":"",a&&"bg-white rounded-lg p-8 shadow-lg"].filter(Boolean).join(" ");return(0,Qr.jsx)("div",{className:c,children:(0,Qr.jsxs)("div",{className:d,children:[(0,Qr.jsx)(dn,{className:`${i.spinner} ${l.spinner} animate-spin`}),t&&(0,Qr.jsx)("p",{className:`${i.text} ${l.text} font-medium`,children:t})]})})},Tc=({userId:e,mode:t="edit",onSave:r,onCancel:n,onShowEnrollments:s,onShowProgress:i,isCollapsed:l=!1,roleOptions:c=[],className:d=""})=>{const{theme:u}=Yr(),[f,p]=(0,a.useState)({username:"",email:"",first_name:"",last_name:"",roles:["subscriber"],password:"",description:"",url:"",nickname:""}),[m,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[v,w]=(0,a.useState)(null),[j,N]=(0,a.useState)("general"),[k,_]=(0,a.useState)([]),[C,S]=(0,a.useState)(!1),[E,O]=(0,a.useState)([]);(0,a.useEffect)(()=>{"edit"===t&&e&&"new"!==e?(M(),T(),P()):p({username:"",email:"",first_name:"",last_name:"",roles:["subscriber"],password:"",description:"",url:"",nickname:""})},[e,t]);const M=async()=>{if(e&&"new"!==e)try{h(!0);const{getApiConfig:t}=await Promise.resolve().then(o.bind(o,5236)),r=t();console.log(" Loading user data for ID:",e);const n=await fetch(`${r.endpoints.users}/${e}?context=edit`,{headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},credentials:"same-origin"});if(!n.ok){console.warn(` Failed to load user with context=edit (${n.status}), trying without context...`);const t=await fetch(`${r.endpoints.users}/${e}`,{headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const s=await t.json();return console.log(" User data loaded (public context):",s),w(s),p({username:s.username||s.slug||"",email:"",first_name:s.name?.split(" ")[0]||"",last_name:s.name?.split(" ").slice(1).join(" ")||"",roles:s.roles||["subscriber"],password:"",description:s.description||"",url:s.url||s.link||"",nickname:s.name||s.username||s.slug||""}),void h(!1)}const s=await n.json();console.log(" User data loaded:",s),w(s),p({username:s.username||"",email:s.email||"",first_name:s.first_name||"",last_name:s.last_name||"",roles:s.roles||["subscriber"],password:"",description:s.description||"",url:s.url||"",nickname:s.nickname||s.username||""})}catch(e){console.error(" Error loading user data:",e)}finally{h(!1)}},T=async()=>{if(e&&"new"!==e)try{S(!0);const{getUserEnrollments:t}=await o.e(334).then(o.bind(o,4953)),r=await t(e),n=r?.data||r;_(Array.isArray(n)?n:[])}catch(e){console.error(" Error loading enrollments:",e),_([])}finally{S(!1)}},P=async()=>{try{const{getApiConfig:e}=await Promise.resolve().then(o.bind(o,5236)),t=e(),r=await fetch(`${t.apiUrl}/wp/v2/qe_course?per_page=100&status=publish,draft,private`,{headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin"});if(r.ok){const e=await r.json();O(e)}}catch(e){console.error(" Error loading courses:",e),O([])}},A=(e,t)=>{p(r=>({...r,[e]:t}))},q=async e=>{e.preventDefault();try{x(!0),await(r?.(f))}catch(e){console.error("Error saving user:",e)}finally{x(!1)}},z=()=>{n?.()},D="create"===t||"new"===e,L=v?.name||`${f.first_name} ${f.last_name}`.trim()||f.username,I=v?.avatar_urls?.[96]||v?.avatar_urls?.[48],R=[{id:"general",label:"General",icon:Cn},{id:"activity",label:"Activity",icon:Cc},{id:"enrollments",label:"Enrollments",icon:kn}];return m?(0,Qr.jsx)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full ${d}`,children:(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)(Mc,{size:"lg"})})}):l?(0,Qr.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${d}`,children:[(0,Qr.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,Qr.jsxs)("div",{className:"flex flex-col items-center",children:[I?(0,Qr.jsx)("img",{src:I,alt:L,className:"h-10 w-10 rounded-full object-cover mb-1.5"}):(0,Qr.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center mb-1.5",children:(0,Qr.jsx)(Cn,{className:"h-5 w-5 text-gray-400"})}),(0,Qr.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate text-center w-full px-1 leading-tight",children:L}),(0,Qr.jsx)("p",{className:"text-[10px] text-gray-500 uppercase tracking-wide",children:f.roles?.[0]||"subscriber"})]})}),(0,Qr.jsxs)("div",{className:"flex-1 p-2 space-y-1.5",children:[(0,Qr.jsx)("button",{onClick:s,className:"w-full p-2 text-sm text-gray-600 hover:bg-gray-50 rounded flex items-center justify-center",title:"View Enrollments",children:(0,Qr.jsx)(kn,{className:"h-4 w-4"})}),(0,Qr.jsx)("button",{onClick:i,className:"w-full p-2 text-sm text-gray-600 hover:bg-gray-50 rounded flex items-center justify-center",title:"View Progress",children:(0,Qr.jsx)(kc,{className:"h-4 w-4"})})]})]}):(0,Qr.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${d}`,children:[(0,Qr.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-4",children:[!D&&I?(0,Qr.jsx)("img",{src:I,alt:L,className:"h-16 w-16 rounded-full object-cover"}):(0,Qr.jsx)("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Qr.jsx)(Cn,{className:"h-8 w-8 text-gray-400"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:D?"Create New User":L}),(0,Qr.jsx)("p",{className:"text-sm text-gray-500",children:D?"Add a new user to the system":`User #${e}`}),!D&&v&&(0,Qr.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(tl,{className:"h-3 w-3 mr-1"}),"Registered ",new Date(v.registered_date||v.registered||v.date_registered).toLocaleDateString()]}),(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(wc,{className:"h-3 w-3 mr-1"}),v.roles?.[0]||"subscriber"]}),v.enrollmentData?.lastActivity&&(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(Cc,{className:"h-3 w-3 mr-1"}),"Last active ",new Date(v.enrollmentData.lastActivity).toLocaleDateString()]})]})]})]}),(0,Qr.jsx)("button",{onClick:z,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md",children:(0,Qr.jsx)(En,{className:"h-5 w-5"})})]}),(0,Qr.jsx)("div",{className:"mt-4 border-b border-gray-200",children:(0,Qr.jsx)("nav",{className:"-mb-px flex space-x-8",children:R.map(e=>{const t=e.icon;return(0,Qr.jsxs)("button",{onClick:()=>N(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center "+(j===e.id?"qe-border-primary qe-text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Qr.jsx)(t,{className:"h-4 w-4 mr-2"}),e.label]},e.id)})})})]}),(0,Qr.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["general"===j&&(0,Qr.jsx)("form",{onSubmit:q,className:"space-y-6",children:(0,Qr.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Username ",D&&(0,Qr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qr.jsx)("input",{type:"text",value:f.username,onChange:e=>A("username",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter username",required:D,disabled:!D})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Email Address ",(0,Qr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qr.jsx)("input",{type:"email",value:f.email,onChange:e=>A("email",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address",required:!0})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,Qr.jsx)("input",{type:"text",value:f.first_name,onChange:e=>A("first_name",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"First name"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,Qr.jsx)("input",{type:"text",value:f.last_name,onChange:e=>A("last_name",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Last name"})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,Qr.jsx)("select",{value:f.roles[0],onChange:e=>A("roles",[e.target.value]),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:c.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))})]}),D&&(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Password ",(0,Qr.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Qr.jsxs)("div",{className:"mt-1 relative",children:[(0,Qr.jsx)("input",{type:y?"text":"password",value:f.password,onChange:e=>A("password",e.target.value),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter password",required:!0}),(0,Qr.jsx)("button",{type:"button",onClick:()=>b(!y),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:y?(0,Qr.jsx)(Sc,{className:"h-4 w-4 text-gray-400"}):(0,Qr.jsx)(Nc,{className:"h-4 w-4 text-gray-400"})})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Website"}),(0,Qr.jsx)("input",{type:"url",value:f.url,onChange:e=>A("url",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),(0,Qr.jsx)("textarea",{value:f.description,onChange:e=>A("description",e.target.value),rows:4,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description about the user..."})]})]})}),"activity"===j&&!D&&(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qr.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center",children:[(0,Qr.jsx)(Cc,{className:"h-8 w-8 text-blue-500"}),(0,Qr.jsxs)("div",{className:"ml-3",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Registration Date"}),(0,Qr.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:v?.registered_date||v?.registered||v?.date_registered?new Date(v.registered_date||v.registered||v.date_registered).toLocaleDateString():"Unknown"})]})]})}),(0,Qr.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center",children:[(0,Qr.jsx)(wc,{className:"h-8 w-8 text-green-500"}),(0,Qr.jsxs)("div",{className:"ml-3",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Role"}),(0,Qr.jsx)("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:v?.roles?.[0]||"subscriber"})]})]})}),(0,Qr.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center",children:[(0,Qr.jsx)(nl,{className:"h-8 w-8 text-purple-500"}),(0,Qr.jsxs)("div",{className:"ml-3",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Email Status"}),(0,Qr.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:v?.email?"Verified":"No Email"})]})]})}),(0,Qr.jsx)("div",{className:"bg-orange-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center",children:[(0,Qr.jsx)(Cn,{className:"h-8 w-8 text-orange-500"}),(0,Qr.jsxs)("div",{className:"ml-3",children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"User ID"}),(0,Qr.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["#",v?.id||"Unknown"]})]})]})})]}),v?.capabilities&&Object.keys(v.capabilities).length>0&&(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"User Capabilities"}),(0,Qr.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[Object.keys(v.capabilities).slice(0,12).map(e=>(0,Qr.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.replace("_"," ")},e)),Object.keys(v.capabilities).length>12&&(0,Qr.jsxs)("span",{className:"text-xs text-gray-500",children:["+",Object.keys(v.capabilities).length-12," more"]})]})})]}),v?.meta&&Object.keys(v.meta).length>0&&(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),(0,Qr.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"space-y-2 text-sm",children:[v.nickname&&(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-600",children:"Nickname:"}),(0,Qr.jsx)("span",{className:"text-gray-900",children:v.nickname})]}),v.locale&&(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-600",children:"Locale:"}),(0,Qr.jsx)("span",{className:"text-gray-900",children:v.locale})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-600",children:"Username:"}),(0,Qr.jsx)("span",{className:"text-gray-900 font-mono",children:v.username})]}),v.link&&(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-600",children:"Profile URL:"}),(0,Qr.jsx)("a",{href:v.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"View Profile"})]})]})})]})]}),"enrollments"===j&&!D&&(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between",children:(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Course Enrollments"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage user enrollment in courses"})]})}),C?(0,Qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Qr.jsx)(Mc,{size:"lg"})}):(0,Qr.jsx)("div",{className:"space-y-3",children:0===E.length?(0,Qr.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,Qr.jsx)(kn,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,Qr.jsx)("p",{className:"text-gray-500 font-medium",children:"No courses available"})]}):E.map(t=>{const r=k.find(e=>parseInt(e.course_id)===parseInt(t.id)),n=!!r,s=t.title?.rendered||t.title||"Untitled Course";return(0,Qr.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,Qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Qr.jsx)("h4",{className:"font-medium text-gray-900",children:s}),n?(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Qr.jsx)(On,{className:"h-3 w-3 mr-1"}),"Enrolled"]}):(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,Qr.jsx)(Wi,{className:"h-3 w-3 mr-1"}),"Not Enrolled"]})]}),n&&r&&(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(tl,{className:"h-3 w-3 mr-1"}),"Enrolled ",new Date(r.enrollment_date).toLocaleDateString()]}),r.last_activity&&(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(Ec,{className:"h-3 w-3 mr-1"}),"Last activity ",new Date(r.last_activity).toLocaleDateString()]})]}),void 0!==r.progress&&(0,Qr.jsxs)("div",{className:"space-y-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Qr.jsxs)("span",{className:"text-gray-600 flex items-center",children:[(0,Qr.jsx)(kc,{className:"h-3 w-3 mr-1"}),"Progress"]}),(0,Qr.jsxs)("span",{className:"font-medium",children:[r.progress,"%"]})]}),(0,Qr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Qr.jsx)("div",{className:"qe-bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${r.progress}%`}})})]})]})]}),(0,Qr.jsx)("div",{className:"ml-4",children:n?(0,Qr.jsxs)(ac,{onClick:()=>(async t=>{if(confirm("Are you sure you want to unenroll this user from the course?"))try{const{unenrollUserFromCourse:r}=await o.e(334).then(o.bind(o,4953));await r(e,t),await T()}catch(e){console.error("Error unenrolling user:",e),alert("Failed to unenroll user. Please try again.")}})(t.id),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:[(0,Qr.jsx)(Oc,{className:"h-4 w-4 mr-1"}),"Unenroll"]}):(0,Qr.jsxs)(ac,{onClick:()=>(async t=>{try{const{enrollUserInCourse:r}=await o.e(334).then(o.bind(o,4953));await r(e,t),await T()}catch(e){console.error("Error enrolling user:",e),alert("Failed to enroll user. Please try again.")}})(t.id),variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-800 hover:bg-green-50",children:[(0,Qr.jsx)(Ki,{className:"h-4 w-4 mr-1"}),"Enroll"]})})]})},t.id)})}),!C&&E.length>0&&(0,Qr.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,Qr.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,Qr.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:E.length}),(0,Qr.jsx)("div",{className:"text-xs text-blue-800",children:"Total Courses"})]}),(0,Qr.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,Qr.jsx)("div",{className:"text-2xl font-bold text-green-600",children:k.length}),(0,Qr.jsx)("div",{className:"text-xs text-green-800",children:"Enrolled"})]}),(0,Qr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,Qr.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:E.length-k.length}),(0,Qr.jsx)("div",{className:"text-xs text-gray-800",children:"Available"})]})]})]})]}),"general"===j&&(0,Qr.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-end space-x-3",children:[(0,Qr.jsx)(ac,{onClick:z,variant:"ghost",disabled:g,children:"Cancel"}),(0,Qr.jsxs)(ac,{onClick:q,variant:"primary",disabled:g,loading:g,children:[(0,Qr.jsx)(hl,{className:"h-4 w-4 mr-2"}),g?"Saving...":D?"Create User":"Save Changes"]})]})]})},Pc=({userId:e,onCancel:t,availableCourses:r=[],onEnrollUser:n,onUnenrollUser:s,isCollapsed:i=!1,className:l=""})=>{const{theme:c}=Yr(),[d,u]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),[g,x]=(0,a.useState)(""),[y,b]=(0,a.useState)("all"),[v,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&j()},[e]);const j=async()=>{if(e)try{u(!0);const{getApiConfig:t}=await Promise.resolve().then(o.bind(o,5236)),{getUserEnrollments:r}=await o.e(334).then(o.bind(o,4953)),n=t();let s=null;try{const t=await fetch(`/wp-json/wp/v2/users/${e}?context=edit`,{headers:{"Content-Type":"application/json","X-WP-Nonce":n.nonce},credentials:"same-origin"});if(t.ok)s=await t.json(),console.log(" User loaded with context=edit");else{console.warn(` Failed to load user with context=edit (${t.status}), trying public context...`);const r=await fetch(`/wp-json/wp/v2/users/${e}`,{headers:{"Content-Type":"application/json","X-WP-Nonce":n.nonce},credentials:"same-origin"});r.ok&&(s=await r.json(),console.log(" User loaded with public context"))}}catch(e){console.warn(" Error loading user data:",e)}try{const t=await r(e);console.log(" Enrollments loaded:",t);const n=t?.data||t;h(Array.isArray(n)?n:[])}catch(e){console.error(" Error loading enrollments:",e),h([])}w(s)}catch(e){console.error(" Error in loadUserEnrollments:",e),h([])}finally{u(!1)}},N=v?.name||`${v?.first_name} ${v?.last_name}`.trim()||v?.username,k=v?.avatar_urls?.[48]||v?.avatar_urls?.[96],_=(0,a.useMemo)(()=>{if(!Array.isArray(r))return console.warn(" availableCourses is not an array:",r),[];const e=Array.isArray(m)?m:[];return console.log(" DEBUG - Available Courses:",r),console.log(" DEBUG - User Enrollments:",e),r.map(t=>{const r=parseInt(t.value),n=e.find(e=>{const t=parseInt(e.course_id);return console.log(` Comparing course ${r} with enrollment ${t}:`,r===t),t===r}),s=!!n;return console.log(` Course "${t.label}" (ID: ${r}) - Enrolled: ${s}`,n),{...t,isEnrolled:s,enrollmentData:n||null}})},[r,m]),C=(0,a.useMemo)(()=>{let e=_;return g&&(e=e.filter(e=>e.label.toLowerCase().includes(g.toLowerCase()))),"enrolled"===y?e=e.filter(e=>e.isEnrolled):"available"===y&&(e=e.filter(e=>!e.isEnrolled)),e},[_,g,y]),S=(0,a.useMemo)(()=>{const e=_.length,t=_.filter(e=>e.isEnrolled).length;return{total:e,enrolled:t,available:e-t}},[_]);return d?(0,Qr.jsx)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full ${l}`,children:(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)(Mc,{size:"lg"})})}):i?(0,Qr.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${l}`,children:[(0,Qr.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,Qr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Qr.jsx)(kn,{className:"h-6 w-6 text-gray-400 mb-1.5"}),(0,Qr.jsx)("p",{className:"text-xs font-medium text-gray-900 text-center leading-tight",children:"Enrollments"})]})}),(0,Qr.jsxs)("div",{className:"flex-1 p-2 space-y-2",children:[(0,Qr.jsxs)("div",{className:"bg-green-50 rounded px-2 py-1.5 text-center",children:[(0,Qr.jsx)("div",{className:"text-lg font-bold text-green-600",children:S.enrolled}),(0,Qr.jsx)("div",{className:"text-[10px] text-green-700 uppercase tracking-wide",children:"Enrolled"})]}),(0,Qr.jsxs)("div",{className:"bg-gray-50 rounded px-2 py-1.5 text-center",children:[(0,Qr.jsx)("div",{className:"text-lg font-bold text-gray-600",children:S.available}),(0,Qr.jsx)("div",{className:"text-[10px] text-gray-700 uppercase tracking-wide",children:"Available"})]}),(0,Qr.jsx)("div",{className:"border-t border-gray-200 pt-2 text-center",children:(0,Qr.jsxs)("div",{className:"text-xs text-gray-500",children:[S.total," total"]})})]})]}):(0,Qr.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col max-w-full overflow-hidden ${l}`,children:[(0,Qr.jsxs)("div",{className:"p-4 md:p-6 border-b border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[k?(0,Qr.jsx)("img",{src:k,alt:N,className:"h-10 w-10 md:h-12 md:w-12 rounded-full object-cover flex-shrink-0"}):(0,Qr.jsx)("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:(0,Qr.jsx)(kn,{className:"h-5 w-5 md:h-6 md:w-6 text-gray-400"})}),(0,Qr.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Qr.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-gray-900 truncate",children:"Course Enrollments"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-500 truncate",children:N})]})]}),(0,Qr.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md flex-shrink-0 ml-2",children:(0,Qr.jsx)(En,{className:"h-5 w-5"})})]}),(0,Qr.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[(0,Qr.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,Qr.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:S.total}),(0,Qr.jsx)("div",{className:"text-xs text-blue-800",children:"Total Courses"})]}),(0,Qr.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,Qr.jsx)("div",{className:"text-2xl font-bold text-green-600",children:S.enrolled}),(0,Qr.jsx)("div",{className:"text-xs text-green-800",children:"Enrolled"})]}),(0,Qr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[(0,Qr.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:S.available}),(0,Qr.jsx)("div",{className:"text-xs text-gray-800",children:"Available"})]})]})]}),(0,Qr.jsxs)("div",{className:"p-4 border-b border-gray-200 space-y-4",children:[(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Qr.jsx)(Tn,{className:"h-4 w-4 text-gray-400"})}),(0,Qr.jsx)("input",{type:"text",placeholder:"Search courses...",value:g,onChange:e=>{x(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 min-w-0"})]}),(0,Qr.jsx)("div",{className:"flex space-x-2",children:[{value:"all",label:"All Courses",count:S.total},{value:"enrolled",label:"Enrolled",count:S.enrolled},{value:"available",label:"Available",count:S.available}].map(e=>(0,Qr.jsxs)("button",{onClick:()=>{return t=e.value,void b(t);var t},className:"flex items-center px-3 py-1.5 text-xs font-medium rounded-full transition-colors "+(y===e.value?"qe-bg-primary qe-text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[e.label,(0,Qr.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-black bg-opacity-20 text-xs",children:e.count})]},e.value))})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Qr.jsx)("div",{className:"p-4 space-y-3",children:0===C.length?(0,Qr.jsxs)("div",{className:"text-center py-12",children:[(0,Qr.jsx)(kn,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,Qr.jsx)("p",{className:"text-gray-500 font-medium",children:"No courses found"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-400",children:g?"Try adjusting your search terms":"No courses match the selected filter"})]}):C.map(t=>(0,Qr.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,Qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Qr.jsx)("h3",{className:"font-medium text-gray-900",children:t.label}),t.isEnrolled?(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Qr.jsx)(On,{className:"h-3 w-3 mr-1"}),"Enrolled"]}):(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,Qr.jsx)(Wi,{className:"h-3 w-3 mr-1"}),"Not Enrolled"]})]}),t.isEnrolled&&t.enrollmentData&&(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(tl,{className:"h-3 w-3 mr-1"}),"Enrolled ",new Date(t.enrollmentData.enrollment_date).toLocaleDateString()]}),t.enrollmentData.last_activity&&(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(Ec,{className:"h-3 w-3 mr-1"}),"Last activity ",new Date(t.enrollmentData.last_activity).toLocaleDateString()]})]}),void 0!==t.enrollmentData.progress&&(0,Qr.jsxs)("div",{className:"space-y-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Qr.jsxs)("span",{className:"text-gray-600 flex items-center",children:[(0,Qr.jsx)(kc,{className:"h-3 w-3 mr-1"}),"Progress"]}),(0,Qr.jsxs)("span",{className:"font-medium",children:[t.enrollmentData.progress,"%"]})]}),(0,Qr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Qr.jsx)("div",{className:"qe-bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${t.enrollmentData.progress}%`}})})]})]})]}),(0,Qr.jsx)("div",{className:"ml-4",children:t.isEnrolled?(0,Qr.jsxs)(ac,{onClick:()=>(async t=>{if(confirm("Are you sure you want to unenroll this user from the course?"))try{p(!0),await(s?.(e,t)),h(e=>e.filter(e=>parseInt(e.course_id)!==parseInt(t))),console.log(" User unenrolled and state updated")}catch(e){console.error("Error unenrolling user:",e),await j()}finally{p(!1)}})(t.value),variant:"ghost",size:"sm",disabled:f,className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:[(0,Qr.jsx)(Oc,{className:"h-4 w-4 mr-1"}),"Unenroll"]}):(0,Qr.jsxs)(ac,{onClick:()=>(async t=>{try{p(!0),await(n?.(e,t)),h(r=>r.some(e=>parseInt(e.course_id)===parseInt(t))?r:[...r,{id:Date.now(),user_id:e,course_id:parseInt(t),enrollment_date:(new Date).toISOString(),progress:0,status:"active",last_activity:(new Date).toISOString()}]),console.log(" User enrolled and state updated")}catch(e){console.error("Error enrolling user:",e),await j()}finally{p(!1)}})(t.value),variant:"ghost",size:"sm",disabled:f,className:"text-green-600 hover:text-green-800 hover:bg-green-50",children:[(0,Qr.jsx)(Ki,{className:"h-4 w-4 mr-1"}),"Enroll"]})})]})},t.value))})}),f&&(0,Qr.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:(0,Qr.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),"Updating enrollments..."]})})]})},Ac=cn("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),qc=cn("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),zc=({userId:e,onCancel:t,availableCourses:r=[],isCollapsed:n=!1,className:s=""})=>{const{theme:o}=Yr(),{getUser:i,getUserProgress:l,updating:c}=bn({autoFetch:!1}),[d,u]=(0,a.useState)(!1),[f,p]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),[g,x]=(0,a.useState)("all"),[y,b]=(0,a.useState)("overview");(0,a.useEffect)(()=>{e&&v()},[e,g]);const v=async()=>{if(e)try{u(!0),console.log(" Loading progress data for user:",e);const[t,r]=await Promise.all([i(e),l(e,g)]);h(t),p(r),console.log(" Progress data loaded:",{user:t,progress:r})}catch(e){console.error(" Error loading progress data:",e)}finally{u(!1)}},w=m?.name||`${m?.first_name} ${m?.last_name}`.trim()||m?.username,j=m?.avatar_urls?.[48]||m?.avatar_urls?.[96],N=e=>{if(e<60)return`${e}m`;const t=Math.floor(e/60),r=e%60;return r>0?`${t}h ${r}m`:`${t}h`},k=[{id:"overview",label:"Overview",icon:Ac},{id:"courses",label:"Course Progress",icon:kn},{id:"achievements",label:"Achievements",icon:rl}];return d||c?(0,Qr.jsx)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full ${s}`,children:(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)(Mc,{size:"lg"})})}):n?(0,Qr.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${s}`,children:[(0,Qr.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,Qr.jsxs)("div",{className:"flex flex-col items-center",children:[(0,Qr.jsx)(kc,{className:"h-6 w-6 text-gray-400 mb-1.5"}),(0,Qr.jsx)("p",{className:"text-xs font-medium text-gray-900 text-center leading-tight",children:"Progress"})]})}),(0,Qr.jsxs)("div",{className:"flex-1 p-2 space-y-2",children:[(0,Qr.jsxs)("div",{className:"bg-blue-50 rounded px-2 py-1.5 text-center",children:[(0,Qr.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[f?.overall?.averageProgress||0,(0,Qr.jsx)("span",{className:"text-sm",children:"%"})]}),(0,Qr.jsx)("div",{className:"text-[10px] text-blue-700 uppercase tracking-wide",children:"Average"})]}),(0,Qr.jsxs)("div",{className:"space-y-1.5 pt-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Qr.jsx)("span",{className:"text-gray-500",children:"Courses"}),(0,Qr.jsx)("span",{className:"font-bold text-gray-900",children:f?.overall?.completedCourses||0})]}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Qr.jsx)("span",{className:"text-gray-500",children:"Certs"}),(0,Qr.jsx)("span",{className:"font-bold text-gray-900",children:f?.overall?.certificatesEarned||0})]}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Qr.jsx)("span",{className:"text-gray-500",children:"Time"}),(0,Qr.jsx)("span",{className:"font-bold text-gray-900 text-[10px]",children:f?.overall?.totalTimeSpent?N(f.overall.totalTimeSpent):"0m"})]})]})]})]}):(0,Qr.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${s}`,children:[(0,Qr.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-4",children:[j?(0,Qr.jsx)("img",{src:j,alt:w,className:"h-12 w-12 rounded-full object-cover"}):(0,Qr.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Qr.jsx)(kc,{className:"h-6 w-6 text-gray-400"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Learning Progress"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-500",children:w})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qr.jsxs)(ac,{onClick:()=>{console.log("Exporting progress data for user:",e)},variant:"ghost",size:"sm",children:[(0,Qr.jsx)(ml,{className:"h-4 w-4 mr-1"}),"Export"]}),(0,Qr.jsx)(ac,{onClick:()=>{console.log(" Refreshing progress data..."),v()},variant:"ghost",size:"sm",children:(0,Qr.jsx)(Yi,{className:"h-4 w-4"})}),(0,Qr.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md",children:(0,Qr.jsx)(En,{className:"h-5 w-5"})})]})]}),(0,Qr.jsx)("div",{className:"mt-4 flex space-x-2",children:[{value:"all",label:"All Time"},{value:"month",label:"This Month"},{value:"week",label:"This Week"}].map(e=>(0,Qr.jsx)("button",{onClick:()=>x(e.value),className:"px-3 py-1.5 text-xs font-medium rounded-md transition-colors "+(g===e.value?"qe-bg-primary qe-text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.label},e.value))}),(0,Qr.jsx)("div",{className:"mt-4 border-b border-gray-200",children:(0,Qr.jsx)("nav",{className:"-mb-px flex space-x-8",children:k.map(e=>{const t=e.icon;return(0,Qr.jsxs)("button",{onClick:()=>b(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center "+(y===e.id?"qe-border-primary qe-text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Qr.jsx)(t,{className:"h-4 w-4 mr-2"}),e.label]},e.id)})})})]}),(0,Qr.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["overview"===y&&f?.overall&&(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qr.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Average Progress"}),(0,Qr.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[f.overall.averageProgress,"%"]})]}),(0,Qr.jsx)(kc,{className:"h-8 w-8 text-blue-500"})]})}),(0,Qr.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-green-900",children:"Completed"}),(0,Qr.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[f.overall.completedCourses,"/",f.overall.totalCourses]})]}),(0,Qr.jsx)(On,{className:"h-8 w-8 text-green-500"})]})}),(0,Qr.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-purple-900",children:"Time Spent"}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:N(f.overall.totalTimeSpent)})]}),(0,Qr.jsx)(Ec,{className:"h-8 w-8 text-purple-500"})]})}),(0,Qr.jsx)("div",{className:"bg-yellow-50 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"text-sm font-medium text-yellow-900",children:"Certificates"}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:f.overall.certificatesEarned})]}),(0,Qr.jsx)(rl,{className:"h-8 w-8 text-yellow-500"})]})})]}),(0,Qr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,Qr.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Weekly Activity"}),(0,Qr.jsx)("div",{className:"flex items-end justify-between h-32 space-x-2",children:f.weeklyActivity?.map((e,t)=>(0,Qr.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,Qr.jsx)("div",{className:"qe-bg-primary rounded-t-sm w-full transition-all duration-300 hover:opacity-80",style:{height:`${Math.max(e.minutes/120*100,5)}%`,minHeight:e.minutes>0?"4px":"2px"},title:`${e.minutes} minutes`}),(0,Qr.jsx)("span",{className:"text-xs text-gray-500 mt-2",children:new Date(e.date).toLocaleDateString("en",{weekday:"short"})})]},t))})]})]}),"courses"===y&&f?.courses&&(0,Qr.jsx)("div",{className:"space-y-4",children:f.courses.map(e=>{return(0,Qr.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(Ec,{className:"h-3 w-3 mr-1"}),N(e.timeSpent)]}),(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(kn,{className:"h-3 w-3 mr-1"}),e.lessonsCompleted,"/",e.totalLessons," lessons"]}),(0,Qr.jsxs)("span",{className:"flex items-center",children:[(0,Qr.jsx)(Cc,{className:"h-3 w-3 mr-1"}),new Date(e.lastActivity).toLocaleDateString()]})]})]}),(0,Qr.jsx)("div",{className:"ml-4",children:e.completed?(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,Qr.jsx)(qc,{className:"h-3 w-3 mr-1"}),"Completed"]}):(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(t=e.progress,t>=80?"text-green-500 bg-green-100":t>=50?"text-yellow-500 bg-yellow-100":t>=20?"text-orange-500 bg-orange-100":"text-red-500 bg-red-100"),children:[e.progress,"%"]})})]}),(0,Qr.jsxs)("div",{className:"space-y-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,Qr.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,Qr.jsxs)("span",{className:"font-medium",children:[e.progress,"%"]})]}),(0,Qr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Qr.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 "+(e.completed?"bg-green-500":"qe-bg-accent"),style:{width:`${e.progress}%`}})})]})]},e.id);var t})}),"achievements"===y&&f?.achievements&&(0,Qr.jsx)("div",{className:"space-y-4",children:0===f.achievements.length?(0,Qr.jsxs)("div",{className:"text-center py-12",children:[(0,Qr.jsx)(rl,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,Qr.jsx)("p",{className:"text-gray-500 font-medium",children:"No achievements yet"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-400",children:"Complete courses and lessons to earn achievements"})]}):f.achievements.map(e=>(0,Qr.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0",children:(0,Qr.jsx)("div",{className:"h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,Qr.jsx)(rl,{className:"h-6 w-6 text-yellow-600"})})}),(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,Qr.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,Qr.jsxs)("div",{className:"flex items-center text-xs text-gray-400",children:[(0,Qr.jsx)(tl,{className:"h-3 w-3 mr-1"}),"Earned on ",new Date(e.earnedDate).toLocaleDateString()]})]})]})},e.id))})]})]})},Dc=({selectedUserIds:e=[],availableCourses:t=[],onSubmit:r,onClose:n})=>{const[s,o]=(0,a.useState)([]),[i,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),u=(0,a.useMemo)(()=>i?t.filter(e=>e.label.toLowerCase().includes(i.toLowerCase())):t,[t,i]),f=(0,a.useMemo)(()=>0!==u.length&&u.every(e=>s.includes(e.value)),[u,s]);return(0,Qr.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,Qr.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:n}),(0,Qr.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[(0,Qr.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0 bg-white bg-opacity-20 rounded-full p-2",children:(0,Qr.jsx)(Nn,{className:"h-6 w-6 text-white"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Batch Enrollment"}),(0,Qr.jsxs)("p",{className:"text-sm text-blue-100",children:["Enroll ",e.length," user",1!==e.length?"s":""," in courses"]})]})]}),(0,Qr.jsx)("button",{onClick:n,className:"text-white hover:text-blue-100 transition-colors",disabled:c,children:(0,Qr.jsx)(En,{className:"h-6 w-6"})})]})}),(0,Qr.jsxs)("div",{className:"px-6 py-4",children:[(0,Qr.jsx)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qr.jsx)(Nn,{className:"h-5 w-5 text-blue-600"}),(0,Qr.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,Qr.jsx)("strong",{children:e.length})," user",1!==e.length?"s":""," selected"]})]}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qr.jsx)(kn,{className:"h-5 w-5 text-blue-600"}),(0,Qr.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,Qr.jsx)("strong",{children:s.length})," course",1!==s.length?"s":""," selected"]})]})]}),s.length>0&&(0,Qr.jsxs)("div",{className:"text-sm text-gray-600",children:["Total enrollments: ",(0,Qr.jsx)("strong",{children:e.length*s.length})]})]})}),(0,Qr.jsx)("div",{className:"mb-4",children:(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Qr.jsx)(Tn,{className:"h-4 w-4 text-gray-400"})}),(0,Qr.jsx)("input",{type:"text",placeholder:"Search courses...",value:i,onChange:e=>l(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})}),(0,Qr.jsxs)("div",{className:"mb-3 flex items-center justify-between px-2",children:[(0,Qr.jsxs)("button",{onClick:()=>{const e=u.map(e=>e.value),t=e.every(e=>s.includes(e));o(t?t=>t.filter(t=>!e.includes(t)):t=>{const r=e.filter(e=>!t.includes(e));return[...t,...r]})},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:[f?"Deselect All":"Select All"," (",u.length,")"]}),i&&(0,Qr.jsxs)("span",{className:"text-xs text-gray-500",children:["Showing ",u.length," of ",t.length," courses"]})]}),(0,Qr.jsx)("div",{className:"border border-gray-200 rounded-lg max-h-96 overflow-y-auto",children:0===u.length?(0,Qr.jsxs)("div",{className:"p-8 text-center",children:[(0,Qr.jsx)(kn,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,Qr.jsx)("p",{className:"text-gray-500 font-medium",children:"No courses found"}),i&&(0,Qr.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your search terms"})]}):(0,Qr.jsx)("div",{className:"divide-y divide-gray-200",children:u.map(e=>{const t=s.includes(e.value);return(0,Qr.jsx)("button",{onClick:()=>{return t=e.value,void o(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors flex items-center justify-between "+(t?"bg-blue-50":""),children:(0,Qr.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0 h-5 w-5 rounded border-2 flex items-center justify-center transition-colors "+(t?"bg-blue-600 border-blue-600":"border-gray-300"),children:t&&(0,Qr.jsx)(On,{className:"h-4 w-4 text-white"})}),(0,Qr.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.label})]})},e.value)})})})]}),(0,Qr.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between",children:[(0,Qr.jsx)("div",{className:"text-sm text-gray-600",children:s.length>0&&(0,Qr.jsxs)("span",{children:["Ready to create ",(0,Qr.jsx)("strong",{children:e.length*s.length})," enrollment",e.length*s.length!==1?"s":""]})}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Qr.jsx)(ac,{onClick:n,variant:"ghost",disabled:c,children:"Cancel"}),(0,Qr.jsx)(ac,{onClick:async()=>{if(0!==s.length)try{d(!0),await r(s)}catch(e){console.error("Error submitting batch enrollment:",e),alert("An error occurred. Please try again.")}finally{d(!1)}else alert("Please select at least one course")},variant:"primary",disabled:0===s.length||c,loading:c,children:c?"Processing...":`Enroll in ${s.length} Course${1!==s.length?"s":""}`})]})]})]})]})})},Lc=()=>{const{t:e}=k(),[t,r]=(0,a.useState)([{type:"userList"}]),[n,s]=(0,a.useState)([]),[i,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),u=(0,a.useRef)(null),f=yn({autoFetch:!0,perPage:50,debounceMs:300}),p=gs({autoFetch:!0,status:"publish,draft,private"}),{options:m,refetch:h}=ta(["qe_category"]);(0,a.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&d(!1)};if(c)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[c]);const g=e=>{r([{type:"userList"},{type:"user",id:e.id}])},x=()=>{r([{type:"userList"},{type:"user",id:"new"}])},y=()=>{r(e=>e.slice(0,-1))},b=e=>{r(t=>[...t,{type:"enrollment",userId:e}])},v=e=>{r(t=>[...t,{type:"progress",userId:e}])},w=(0,a.useCallback)((e,t)=>{s(r=>t?[...r,e]:r.filter(t=>t!==e))},[]),j=(0,a.useCallback)(e=>{if(e){const e=(f.users||[]).map(e=>e.id);s(e)}else s([])},[f.users]),N=(0,a.useCallback)(()=>{0!==n.length?l(!0):alert("Please select at least one user")},[n]),_=(0,a.useCallback)(async e=>{if(e&&0!==e.length)try{console.log(" Starting batch enrollment:",{users:n,courses:e});const{batchEnrollUsers:t}=await o.e(334).then(o.bind(o,4953)),r=[];for(const s of e){const e=await t(n,parseInt(s));r.push({courseId:s,...e})}const a=r.reduce((e,t)=>e+t.success.length,0),i=r.reduce((e,t)=>e+t.failed.length,0);alert(`Batch enrollment completed!\n\nSuccess: ${a}\nFailed: ${i}`),s([]),l(!1),f.refreshUsers?.()}catch(e){console.error(" Error in batch enrollment:",e),alert("An error occurred during batch enrollment. Please try again.")}else alert("Please select at least one course")},[n,f]),C=(0,a.useMemo)(()=>[{value:"all",label:"All Roles"},{value:"administrator",label:"Administrator"},{value:"editor",label:"Editor"},{value:"author",label:"Author"},{value:"contributor",label:"Contributor"},{value:"subscriber",label:"Subscriber"}],[]),S=(0,a.useMemo)(()=>p.courses&&Array.isArray(p.courses)?p.courses.map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title||"Untitled Course"})):[],[p.courses]),E=(0,a.useMemo)(()=>({value:f.filters?.search||"",onChange:e=>{const t=e.target.value;f.setFilters?.(e=>({...e,search:t}))},placeholder:"Search users...",isLoading:f.loading}),[f.filters,f.loading,f.setFilters]),O=(0,a.useMemo)(()=>f.filters?[{label:"Role",value:f.filters.role||"all",onChange:e=>{f.setFilters?.(t=>({...t,role:"all"===e?null:e}))},options:C,isLoading:!1},{label:"Course",value:f.filters.courseId||"all",onChange:e=>{f.setFilters?.(t=>({...t,courseId:"all"===e?null:e}))},options:[{value:"all",label:"All Courses"},...S],isLoading:p.loading}]:[],[f.filters,f.setFilters,C,S,p.loading]),M=(0,a.useMemo)(()=>{const e=(f.users||[]).map(e=>e.id);return e.length>0&&e.every(e=>n.includes(e))},[f.users,n]);if(!f.filters||!f.computed)return(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)("p",{children:"Loading..."})});const T={1:["24%"],2:["24%","72%"],3:["20%","12%","64%"],4:["18%","10%","10%","58%"]},P=T[t.length]||T[4],A=(e,r)=>{const s=!(r===t.length-1);switch(e.type){case"userList":return(0,Qr.jsx)(ra,{title:"Users",itemCount:f.pagination?.total||f.computed.totalUsers||0,createButtonText:"Add User",onCreate:x,isCreating:f.updating,filters:(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:"mb-3 flex items-center justify-between gap-2 bg-gray-50 p-2 rounded-md",children:[(0,Qr.jsx)("div",{className:"flex items-center gap-2",children:(0,Qr.jsxs)("button",{onClick:()=>j(!M),className:"flex items-center gap-1 px-2 py-1 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:M?"Deselect all filtered users":"Select all filtered users",children:[M?(0,Qr.jsx)(dc,{className:"h-4 w-4 text-blue-600"}):(0,Qr.jsx)(fc,{className:"h-4 w-4"}),(0,Qr.jsx)("span",{className:"text-xs",children:n.length>0?`${n.length} selected`:"Select all"})]})}),(0,Qr.jsxs)("div",{className:"relative",ref:u,children:[(0,Qr.jsxs)("button",{onClick:()=>d(!c),disabled:0===n.length,className:"flex items-center gap-1 px-3 py-1 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:["Actions",(0,Qr.jsx)(Vi,{className:"h-3 w-3"})]}),c&&n.length>0&&(0,Qr.jsx)("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:(0,Qr.jsx)("button",{onClick:()=>{d(!1),N()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Batch Enrollment"})})]})]}),(0,Qr.jsx)(sa,{searchConfig:E,filtersConfig:O})]}),onLoadMore:f.loadMoreUsers,hasMore:f.hasMore,isLoadingMore:f.loading&&f.users.length>0,children:(f.users||[]).map(e=>(0,Qr.jsx)(_c,{user:e,isSelected:t[1]?.id===e.id,isChecked:n.includes(e.id),onClick:g,onToggleSelect:w,onShowEnrollments:b,onShowProgress:v},e.id))});case"user":return(0,Qr.jsx)(Tc,{userId:"new"===e.id?null:e.id,mode:"new"===e.id?"create":"edit",onSave:"new"===e.id?f.createUser:t=>f.updateUser(e.id,t),onCancel:y,onShowEnrollments:()=>b(e.id),onShowProgress:()=>v(e.id),isCollapsed:s,roleOptions:C.filter(e=>"all"!==e.value)},e.id);case"enrollment":return(0,Qr.jsx)(Pc,{userId:e.userId,onCancel:y,availableCourses:S,onEnrollUser:f.enrollUserInCourse,onUnenrollUser:f.unenrollUserFromCourse,isCollapsed:s},e.userId);case"progress":return(0,Qr.jsx)(zc,{userId:e.userId,onCancel:y,availableCourses:S,isCollapsed:s},e.userId);default:return null}};return(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"qe-lms-admin-app h-full flex overflow-x-auto px-4 py-6 space-x-4 min-w-full",children:t.map((e,r)=>{const n=r===t.length-1;return(0,Qr.jsx)("div",{className:"transition-all duration-300 ease-in-out h-full flex-shrink-0",style:{width:P[r],minWidth:n?"320px":0===r?"240px":"120px"},children:A(e,r)},`${e.type}-${e.id||e.userId}-${r}`)})}),i&&(0,Qr.jsx)(Dc,{selectedUserIds:n,availableCourses:S,onSubmit:_,onClose:()=>l(!1)})]})},Ic=cn("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Rc=e=>e?.title?.rendered||e?.title||"Pregunta sin ttulo",$c=({question:e,isSelected:t,onClick:r})=>{const n=or("p-4 cursor-pointer border-l-4 transition-colors duration-150",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t});return(0,Qr.jsxs)("div",{className:n,onClick:()=>r(e),children:[(0,Qr.jsx)("h4",{className:"font-semibold text-sm text-gray-800 truncate",children:Rc(e)}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,Qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(dc,{className:"w-3 h-3"}),{multiple_choice:"Opcin Mltiple",true_false:"Verdadero/Falso",fill_in_the_blanks:"Rellenar Huecos"}[e.meta?._question_type]||"Tipo Desconocido"]}),e._embedded?.["wp:term"]?.[0]?.[0]?.name&&(0,Qr.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(Ic,{className:"w-3 h-3"}),e._embedded["wp:term"][0][0].name]})]}),(0,Qr.jsx)("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${{easy:"bg-green-100 text-green-700",medium:"bg-yellow-100 text-yellow-700",hard:"bg-red-100 text-red-700"}[e.meta?._difficulty_level]||"bg-gray-100 text-gray-700"}`,children:e.meta?._difficulty_level||"N/A"})]})]})},Fc=(e,t,r=[])=>{const n=(0,a.useRef)(null),s=(0,a.useRef)(e);return(0,a.useEffect)(()=>{s.current=e},[e]),(0,a.useEffect)(()=>()=>{n.current&&clearTimeout(n.current)},[]),(0,a.useCallback)((...e)=>{n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{s.current(...e)},t)},[t,...r])},Bc=({availableQuizzes:e,selectedQuizIds:t,onChange:r,disabled:n})=>{const{t:s}=k(),[o,i]=(0,a.useState)(""),l=(e=>{const[t,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{const t=setTimeout(()=>{r(e)},300);return()=>{clearTimeout(t)}},[e,300]),t})(o),{quizzes:c,loading:d}=Xs({search:l,autoFetch:!0,perPage:100}),u=l?c:e;return(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asignar a Cuestionarios"}),(0,Qr.jsxs)("div",{className:"relative mb-2",children:[(0,Qr.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Qr.jsx)(Tn,{className:"h-4 w-4 text-gray-400"})}),(0,Qr.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),placeholder:"Buscar cuestionarios...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 rounded-md",disabled:n})]}),(0,Qr.jsxs)("div",{className:"max-h-40 overflow-y-auto border rounded-md p-2 space-y-1 bg-gray-50",children:[d&&(0,Qr.jsx)("p",{className:"text-xs text-gray-500 text-center py-2",children:"Buscando..."}),!d&&(u||[]).map(e=>{const s=t.includes(e.id);return(0,Qr.jsxs)("div",{onClick:()=>(e=>{if(n)return;const s=t.includes(e)?t.filter(t=>t!==e):[...t,e];r(s)})(e.id),className:"flex items-center gap-3 p-2 rounded-md cursor-pointer "+(n?"cursor-not-allowed opacity-70":"hover:bg-gray-100"),children:[(0,Qr.jsx)("div",{className:"w-5 h-5 border rounded flex items-center justify-center flex-shrink-0 "+(s?"bg-blue-600 border-blue-600":"border-gray-300"),children:s&&(0,Qr.jsx)(Ui,{className:"w-4 h-4 text-white"})}),(0,Qr.jsx)("span",{className:"text-sm",children:e.title?.rendered||e.title})]},e.id)}),!d&&0===(u||[]).length&&(0,Qr.jsx)("p",{className:"text-xs text-gray-500 text-center py-4",children:"No se encontraron cuestionarios."})]})]})},Uc=({id:e,option:t,index:r,isReadOnly:n,isMultipleChoice:s,handleOptionChange:a,setCorrectAnswer:o,removeOption:i})=>{const{attributes:l,listeners:c,setNodeRef:d,transform:u,transition:f}=$i({id:e}),p={transform:Ra.Transform.toString(u),transition:f};return(0,Qr.jsxs)("div",{ref:d,style:p,className:"flex items-center gap-2",children:[!n&&(0,Qr.jsx)("button",{type:"button",...l,...c,className:"cursor-move text-gray-400 hover:text-gray-600 p-1",children:(0,Qr.jsx)(la,{className:"h-5 w-5"})}),(0,Qr.jsx)("input",{type:s?"checkbox":"radio",name:`correct_answer_${e}`,checked:t.isCorrect||!1,onChange:()=>o(r),disabled:n,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Qr.jsx)("input",{type:"text",value:t.text||"",onChange:e=>a(r,"text",e.target.value),placeholder:`Opcin ${r+1}`,disabled:n,className:"flex-1 input border-gray-300 rounded-md"}),!n&&(0,Qr.jsx)("button",{type:"button",onClick:()=>i(r),className:"text-red-500 hover:text-red-700 p-1",children:(0,Qr.jsx)(ca,{className:"w-4 h-4"})})]})},Hc=e=>e?.title?.rendered||e?.title||"Pregunta sin ttulo",Wc=({questionId:e,mode:t,onSave:r,onCancel:n,categoryOptions:s,providerOptions:o,onCategoryCreated:i,onProviderCreated:l,availableQuizzes:c,availableLessons:d,availableCourses:u})=>{const{t:f}=k(),[p,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[x,y]=(0,a.useState)(null),[b,v]=(0,a.useState)({}),w=(0,a.useRef)(null),[j,N]=(0,a.useState)(!1),[_,C]=(0,a.useState)(""),[S,E]=(0,a.useState)(!1),[O,M]=(0,a.useState)(!1),[T,P]=(0,a.useState)(""),[A,q]=(0,a.useState)(!1),z=Ja(Za(Ho,{activationConstraint:{distance:8}})),D=(0,a.useCallback)(()=>{v({title:"",status:"publish",type:"multiple_choice",difficulty:"medium",category:"",points:"1",pointsIncorrect:"0",explanation:"",quizIds:[],lessonId:"",courseId:"",provider:"",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})},[]);(0,a.useEffect)(()=>{(async()=>{if(e&&"edit"===t){m(!0);try{const t=await Pl(e);let r="";t.content?.rendered?r=t.content.rendered.trim():t.meta?._explanation&&(r=t.meta._explanation.trim()),console.log(" Question Data:",{id:t.id,contentRendered:t.content?.rendered,metaExplanation:t.meta?._explanation,finalContentHTML:r,htmlLength:r.length});const n={title:Hc(t),status:t.status||"publish",type:t.meta?._question_type||"multiple_choice",difficulty:t.meta?._difficulty_level||"medium",points:t.meta?._points?.toString()||"1",pointsIncorrect:t.meta?._points_incorrect?.toString()||"0",explanation:r,options:t.meta?._question_options||[{text:"",isCorrect:!1},{text:"",isCorrect:!1}],quizIds:t.meta?._quiz_ids||[],lessonId:t.meta?._question_lesson?.toString()||"",courseId:t.meta?._course_id?.toString()||"",category:t.qe_category?.[0]?.toString()||"",provider:t.qe_provider?.[0]?.toString()||""};console.log(" Setting formData with explanation:",{explanation:n.explanation,explanationLength:n.explanation?.length||0}),v(n)}catch(e){console.error("Error loading question:",e),y("Failed to load question data.")}finally{m(!1)}}else"create"===t&&D()})()},[e,t,D]),(0,a.useEffect)(()=>{console.log(" formData.explanation changed:",{value:b.explanation,length:b.explanation?.length||0,hasContent:!!b.explanation})},[b.explanation]);const L=(e,t)=>{v(r=>({...r,[e]:t}))},I=(e,t,r)=>{v(n=>({...n,options:n.options.map((n,s)=>s===e?{...n,[t]:r}:n)}))},R=e=>{b.options.length>1&&v(t=>({...t,options:t.options.filter((t,r)=>r!==e)}))},$=e=>{v(t=>({...t,options:t.options.map((r,n)=>({...r,isCorrect:"multiple_choice"===t.type?n===e?!r.isCorrect:r.isCorrect:n===e}))}))},F=async(e,t,r,n,s,a,o)=>{if(t.trim()){n(!0);try{const n=await ea(e,{name:t.trim()});r&&r(),o(n.id.toString()),s(""),a(!1)}catch(t){"term_exists"===t.response?.data?.code&&t.response.data.data.term_id?(o(t.response.data.data.term_id.toString()),s(""),a(!1)):console.error(`Error creating ${e}:`,t)}finally{n(!1)}}},B=(0,a.useCallback)(async()=>{try{const e=await Fi({title:"Seleccionar imagen",buttonText:"Insertar imagen",type:"image"});if(e&&e.url&&w.current){const t=w.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e.url),t.setSelection(r.index+1)}}catch(e){console.error("Error al abrir selector de medios:",e)}},[]),U=(0,a.useMemo)(()=>({toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:B}}}),[B]);if(p)return(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)("p",{children:f("common.loading")})});const H=f("create"===t?"questions.createQuestion":"questions.editQuestion");return(0,Qr.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full",children:[(0,Qr.jsxs)("header",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:H}),"edit"===t&&(0,Qr.jsx)("p",{className:"text-xs font-normal text-gray-500",children:Hc(b)})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qr.jsx)(ac,{onClick:async()=>{g(!0),y(null);try{let e=0;if("multiple_choice"===b.type||"true_false"===b.type){const t=b.options.filter(e=>!e.isCorrect).length;t>0&&(e=Number((1/t).toFixed(4)))}console.log(" Saving question with explanation:",{explanationLength:b.explanation?.length||0,explanationPreview:b.explanation?.substring(0,100)||"EMPTY"});const s={_question_type:b.type,_difficulty_level:b.difficulty,_points:1,_points_incorrect:e,_question_options:b.options,_quiz_ids:b.quizIds,_explanation:b.explanation};b.lessonId&&""!==b.lessonId&&"0"!==b.lessonId&&(s._question_lesson=parseInt(b.lessonId)),b.courseId&&""!==b.courseId&&"0"!==b.courseId&&(s._course_id=parseInt(b.courseId));const a={title:b.title,type:b.type,difficulty:b.difficulty,points:"1",pointsIncorrect:e.toString(),quizIds:b.quizIds,lessonId:b.lessonId,courseId:b.courseId,options:b.options,explanation:b.explanation,qe_category:b.category?[parseInt(b.category)]:[],qe_provider:b.provider?[parseInt(b.provider)]:[],meta:s};console.log(" Data being saved:",a),await r(a),"create"===t&&n()}catch(e){console.error("Error saving question:",e),y(e.message||"Error al guardar la pregunta")}finally{g(!1)}},disabled:h,variant:"primary",className:"font-semibold py-2 px-4 rounded-lg text-sm",children:f(h?"common.saving":"common.save")}),(0,Qr.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-800",children:(0,Qr.jsx)(En,{className:"h-5 w-5"})})]})]}),(0,Qr.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[x&&(0,Qr.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md flex items-center justify-between",children:[(0,Qr.jsx)("span",{children:x}),(0,Qr.jsx)("button",{onClick:()=>y(null),className:"text-red-500 hover:text-red-700",children:(0,Qr.jsx)(En,{className:"h-4 w-4"})})]}),(0,Qr.jsx)("input",{type:"text",value:b.title||"",onChange:e=>L("title",e.target.value),placeholder:f("questions.fields.title"),className:"w-full text-xl font-bold focus:outline-none bg-transparent border-b pb-2"}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:f("questions.fields.category")}),!j&&(0,Qr.jsx)("button",{onClick:()=>N(!0),type:"button",className:"text-sm text-blue-600 hover:text-blue-700",children:(0,Qr.jsx)(ua,{className:"h-4 w-4 inline-block"})})]}),j&&(0,Qr.jsx)("div",{className:"mb-2 p-2 bg-gray-50 border rounded-md",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("input",{type:"text",value:_,onChange:e=>C(e.target.value),placeholder:"Nueva...",className:"flex-1 w-full px-2 py-1 border-gray-300 rounded-md text-sm"}),(0,Qr.jsx)(mn,{size:"xs",onClick:()=>F("qe_category",_,i,E,C,N,e=>L("category",e)),isLoading:S,children:"OK"}),(0,Qr.jsx)(mn,{size:"xs",variant:"secondary",onClick:()=>N(!1),children:"X"})]})}),(0,Qr.jsxs)("select",{value:b.category||"",onChange:e=>L("category",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"",children:f("common.select")}),(s||[]).map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:f("questions.fields.provider")}),!O&&(0,Qr.jsx)("button",{onClick:()=>M(!0),type:"button",className:"text-sm text-blue-600 hover:text-blue-700",children:(0,Qr.jsx)(ua,{className:"h-4 w-4 inline-block"})})]}),O&&(0,Qr.jsx)("div",{className:"mb-2 p-2 bg-gray-50 border rounded-md",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("input",{type:"text",value:T,onChange:e=>P(e.target.value),placeholder:"Nuevo...",className:"flex-1 w-full px-2 py-1 border-gray-300 rounded-md text-sm"}),(0,Qr.jsx)(mn,{size:"xs",onClick:()=>F("qe_provider",T,l,q,P,M,e=>L("provider",e)),isLoading:A,children:"OK"}),(0,Qr.jsx)(mn,{size:"xs",variant:"secondary",onClick:()=>M(!1),children:"X"})]})}),(0,Qr.jsxs)("select",{value:b.provider||"",onChange:e=>L("provider",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"",children:f("common.select")}),(o||[]).map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("questions.fields.difficulty")}),(0,Qr.jsx)("select",{value:b.difficulty||"medium",onChange:e=>L("difficulty",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[{value:"easy",label:"Fcil"},{value:"medium",label:"Medio"},{value:"hard",label:"Difcil"}].map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asignar a Curso"}),(0,Qr.jsxs)("select",{value:b.courseId||"",onChange:e=>L("courseId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"",children:"Sin curso asignado"}),(u||[]).map(e=>(0,Qr.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asignar a Leccin"}),(0,Qr.jsxs)("select",{value:b.lessonId||"",onChange:e=>L("lessonId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Qr.jsx)("option",{value:"",children:"Pregunta General"}),(d||[]).map(e=>(0,Qr.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]})]})]}),["multiple_choice","true_false"].includes(b.type)&&(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Respuestas *"}),(0,Qr.jsx)(wi,{sensors:z,collisionDetection:ao,onDragEnd:e=>{const{active:t,over:r}=e;if(t.id!==r.id){const e=b.options.findIndex((e,r)=>r===t.id),n=b.options.findIndex((e,t)=>t===r.id);v(t=>({...t,options:_i(t.options,e,n)}))}},children:(0,Qr.jsx)(Ai,{items:b.options?.map((e,t)=>t)||[],strategy:Mi,children:(0,Qr.jsx)("div",{className:"space-y-3",children:(b.options||[]).map((e,t)=>(0,Qr.jsx)(Uc,{id:t,option:e,index:t,isMultipleChoice:"multiple_choice"===b.type,handleOptionChange:I,setCorrectAnswer:$,removeOption:R},t))})})}),"multiple_choice"===b.type&&(0,Qr.jsx)(mn,{variant:"secondary",size:"sm",onClick:()=>{v(e=>({...e,options:[...e.options,{text:"",isCorrect:!1}]}))},className:"mt-3",iconLeft:ua,children:"Aadir Opcin"})]}),(0,Qr.jsx)(Bc,{availableQuizzes:c,selectedQuizIds:b.quizIds||[],onChange:e=>L("quizIds",e)}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:f("questions.fields.explanation")}),(0,Qr.jsx)(ha(),{ref:w,theme:"snow",value:b.explanation||"",onChange:e=>L("explanation",e),modules:U},`quill-${e||"new"}-${t}`)]})]})]})},Qc=()=>{const{t:e}=k(),[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)("view"),o=rc({autoFetch:!0,perPage:50,debounceMs:300}),i=Ks({autoFetch:!1}),l=Xs({autoFetch:!1}),c=xs({autoFetch:!1,status:"publish,draft,private"}),{options:d,isLoading:u,refetch:f}=ta(["qe_category","qe_provider"]),p=e=>{r(e.id),s("edit")};(0,a.useEffect)(()=>{"edit"!==n&&"create"!==n||(0!==i.lessons.length||i.loading||i.fetchLessons(!0,{perPage:100}),0!==l.quizzes.length||l.loading||l.fetchQuizzes(!0,{perPage:100}),0!==c.courses.length||c.loading||c.fetchCourses(!0,{perPage:100}))},[n]);const m=(0,a.useMemo)(()=>d.qe_category||[],[d.qe_category]),h=(0,a.useMemo)(()=>d.qe_provider||[],[d.qe_provider]),g=((0,a.useMemo)(()=>{const e=[{value:"all",label:"Todas las Lecciones"}];return i.lessons&&i.lessons.length>0?[...e,...(i.lessons||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title}))]:e},[i.lessons]),(0,a.useMemo)(()=>o.filters?[{label:e("filters.category"),value:o.filters.category||"all",onChange:e=>o.updateFilter("category",e),options:m,isLoading:u},{label:"Proveedor",value:o.filters.provider||"all",onChange:e=>o.updateFilter("provider",e),options:h,isLoading:u}]:[],[o.filters,m,h,u,e])),x=(0,a.useMemo)(()=>({value:o.filters?.search||"",onChange:e=>o.updateFilter("search",e.target.value),placeholder:e("questions.searchPlaceholder"),isLoading:o.loading}),[o.filters,o.loading,e]);return o.filters&&o.computed?(0,Qr.jsxs)("div",{className:"qe-lms-admin-app h-full flex overflow-hidden px-6 py-6 space-x-6",children:[(0,Qr.jsx)("div",{className:"transition-all duration-500 ease-in-out h-full flex-shrink-0 w-full lg:w-[30%]",children:(0,Qr.jsx)(ra,{title:e("questions.title"),itemCount:o.pagination.total||0,createButtonText:e("questions.addNew"),onCreate:()=>{r(null),s("create")},isCreating:o.creating,filters:(0,Qr.jsx)(sa,{searchConfig:x,filtersConfig:g}),onLoadMore:o.loadMoreQuestions,hasMore:o.hasMore,isLoadingMore:o.loading&&o.questions.length>0,children:(o.questions||[]).map(e=>(0,Qr.jsx)($c,{question:e,isSelected:t===e.id,onClick:p},e.id))})}),(0,Qr.jsx)("div",{className:or("transition-all duration-500 ease-in-out h-full flex-1",{"w-0 opacity-0":"view"===n,"opacity-100":"view"!==n}),children:("edit"===n||"create"===n)&&(0,Qr.jsx)(Wc,{questionId:t,mode:n,onSave:"create"===n?o.createQuestion:e=>o.updateQuestion(t,e),onCancel:()=>{r(null),s("view")},categoryOptions:m.filter(e=>"all"!==e.value),providerOptions:h.filter(e=>"all"!==e.value),onCategoryCreated:f,onProviderCreated:f,availableQuizzes:l.quizzes,availableLessons:i.lessons,availableCourses:c.courses},t||"new")})]}):(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsx)("p",{children:e("common.loading")})})},Vc=cn("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),Kc=cn("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]),Yc=cn("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),Gc=cn("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),Xc=cn("mail-open",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]),Zc=cn("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),Jc=cn("file-question-mark",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]),ed=cn("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),td=()=>{const{getColor:e,isDarkMode:t}=Yr(),r=(0,a.useMemo)(()=>({primary:e("primary","#1e3a5f"),accent:e("accent","#f59e0b"),accentLight:t?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)",success:"#10b981",error:"#ef4444",textPrimary:t?e("textPrimary","#f9fafb"):"#1f2937",textSecondary:t?e("textSecondary","#9ca3af"):"#6b7280",textMuted:t?"#6b7280":"#9ca3af",background:t?e("background","#111827"):"#ffffff",backgroundSecondary:t?e("secondaryBackground","#1f2937"):"#f9fafb",border:t?"rgba(255,255,255,0.1)":"#e5e7eb",cardBg:t?e("secondaryBackground","#1f2937"):"#ffffff",headerBg:t?e("secondaryBackground","#1f2937"):e("primary","#1e3a5f")}),[e,t]),[n,s]=(0,a.useState)("inbox"),[o,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(new Set),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)([]),[g,x]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),[v,w]=(0,a.useState)(null),{searchValue:j,isSearching:N,handleSearchChange:k,clearSearch:_}=((e="",t,r=500)=>{const[n,s]=(0,a.useState)(e),[o,i]=(0,a.useState)(!1),l=Fc(async e=>{i(!0);try{await t(e)}finally{i(!1)}},r,[t]),c=(0,a.useCallback)(e=>{s(e),l(e)},[l]);return{searchValue:n,isSearching:o,handleSearchChange:c,clearSearch:(0,a.useCallback)(()=>{s(""),l("")},[l]),setSearchValue:s}})("",()=>{},500),{filters:C,isFiltering:S,updateFilter:E,resetFilters:O}=((e={},t,r=300)=>{const[n,s]=(0,a.useState)(e),[o,i]=(0,a.useState)(!1),l=Fc(async e=>{i(!0);try{await t(e)}finally{i(!1)}},r,[t]),c=(0,a.useCallback)((e,t)=>{s(r=>{const n={...r,[e]:t};return l(n),n})},[l]),d=(0,a.useCallback)(e=>{s(t=>{const r={...t,...e};return l(r),r})},[l]);return{filters:n,isFiltering:o,updateFilter:c,updateFilters:d,resetFilters:(0,a.useCallback)(()=>{s(e),l(e)},[e,l])}})({status:"all",type:"all"},()=>{},300),{messages:M,loading:T,error:P,pagination:A,computed:q,updating:z,hasNewMessages:D,updateMessageStatus:L,fetchMessages:I,requestNotificationPermission:R}=xn({search:j,status:"all"!==C.status?C.status:null,type:"all"!==C.type?C.type:null,autoFetch:!0,enablePolling:!0,pollingInterval:3e4});(0,a.useEffect)(()=>{R()},[R]),(0,a.useEffect)(()=>{"sent"===n&&$()},[n]),(0,a.useEffect)(()=>{o&&!M.find(e=>e.id===o.id)&&i(null)},[M,o]);const $=(0,a.useCallback)(async()=>{x(!0),b(null);try{const e=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/sent?per_page=50`,t=await(0,gn.qb)(e),r=t?.data?.data||t?.data||[];h(Array.isArray(r)?r:[])}catch(e){console.error("Error fetching sent messages:",e),b(e.message||"Error al cargar mensajes enviados")}finally{x(!1)}},[]),F=(0,a.useCallback)(()=>{"inbox"===n?(I(!0),u(new Set)):$()},[I,$,n]),B=(0,a.useCallback)((e,t)=>{t.stopPropagation(),u(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),U=(0,a.useCallback)(()=>{d.size===M.length?u(new Set):u(new Set(M.map(e=>e.id)))},[M,d.size]),H=(0,a.useCallback)(async e=>{if(0!==d.size){p(!0);try{const t=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/batch`;await(0,gn.qb)(t,{method:"POST",body:JSON.stringify({ids:Array.from(d),action:e})}),u(new Set),i(null),I(!0)}catch(e){console.error("Error in batch action:",e)}finally{p(!1)}}},[d,I]),W=(0,a.useCallback)(e=>{i(e),w(null),"unread"===e.status&&L(e.id,"read")},[L]),Q=(0,a.useCallback)(e=>{w(e),i(null)},[]),V=(0,a.useCallback)(async(e,t)=>{try{await L(e,t),o?.id===e&&i(e=>e?{...e,status:t}:null)}catch(e){console.error("Error updating message status:",e)}},[L,o]),K=e=>{const t=new Date(e),r=new Date-t,n=Math.floor(r/864e5);return 0===n?t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):1===n?"Ayer":n<7?t.toLocaleDateString("es-ES",{weekday:"short"}):t.toLocaleDateString("es-ES",{day:"numeric",month:"short"})},Y=e=>new Date(e).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),G=e=>{switch(e){case"question_feedback":return{icon:Vc,label:"Duda",color:"#3b82f6",bgColor:t?"rgba(59, 130, 246, 0.2)":"#dbeafe"};case"question_challenge":return{icon:Kc,label:"Impugnacin",color:"#ef4444",bgColor:t?"rgba(239, 68, 68, 0.2)":"#fee2e2"};default:return{icon:nl,label:"Mensaje",color:r.textSecondary,bgColor:t?"rgba(255,255,255,0.1)":"#f3f4f6"}}},X=e=>{switch(e){case"announcement":return{icon:vn,label:"Anuncio",color:"#3b82f6",bgColor:t?"rgba(59, 130, 246, 0.2)":"#dbeafe"};case"notification":return{icon:wn,label:"Notificacin",color:"#f59e0b",bgColor:t?"rgba(245, 158, 11, 0.2)":"#fef3c7"};case"alert":return{icon:jn,label:"Alerta",color:"#ef4444",bgColor:t?"rgba(239, 68, 68, 0.2)":"#fee2e2"};default:return{icon:Sn,label:"Mensaje",color:r.textSecondary,bgColor:t?"rgba(255,255,255,0.1)":"#f3f4f6"}}};return(0,Qr.jsxs)("div",{className:"h-[calc(100vh-120px)] min-h-[350px] flex flex-col rounded-xl overflow-hidden",style:{backgroundColor:r.background,border:`2px solid ${t?r.accent:r.primary}`},children:[(0,Qr.jsx)("div",{className:"flex-shrink-0 overflow-hidden",style:{backgroundColor:r.headerBg},children:(0,Qr.jsxs)("div",{className:"px-3 py-2 sm:px-4 sm:py-2.5",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,Qr.jsx)("div",{className:"p-1.5 rounded-lg flex-shrink-0",style:{backgroundColor:t?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.2)"},children:(0,Qr.jsx)(Yc,{size:16,className:"text-white"})}),(0,Qr.jsxs)("div",{className:"min-w-0",children:[(0,Qr.jsx)("h1",{className:"text-sm sm:text-base font-bold text-white truncate",children:"Mensajera"}),(0,Qr.jsx)("p",{className:"text-[10px] sm:text-xs text-white/70 truncate hidden sm:block",children:"Gestiona dudas e impugnaciones"})]})]}),(0,Qr.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-medium text-xs transition-all flex-shrink-0",style:{backgroundColor:r.accent,color:"#ffffff"},onMouseEnter:e=>e.currentTarget.style.opacity="0.9",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:[(0,Qr.jsx)(Sn,{size:12}),(0,Qr.jsx)("span",{className:"hidden sm:inline",children:"Enviar Mensaje"}),(0,Qr.jsx)("span",{className:"sm:hidden",children:"Enviar"})]})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-1.5 sm:gap-2 mt-2",children:[(0,Qr.jsxs)("div",{className:"rounded px-2 py-1.5",style:{backgroundColor:t?"rgba(255,255,255,0.05)":"rgba(255,255,255,0.1)"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(Yc,{size:12,className:"text-white/70"}),(0,Qr.jsx)("span",{className:"text-white/70 text-[10px]",children:"Total"})]}),(0,Qr.jsx)("p",{className:"text-base font-bold text-white",children:q?.totalMessages||0})]}),(0,Qr.jsxs)("div",{className:"rounded px-2 py-1.5",style:{backgroundColor:t?"rgba(255,255,255,0.05)":"rgba(255,255,255,0.1)"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(nl,{size:12,className:"text-red-300"}),(0,Qr.jsx)("span",{className:"text-white/70 text-[10px]",children:"Sin Leer"})]}),(0,Qr.jsx)("p",{className:"text-base font-bold text-white",children:q?.unreadMessages||0})]}),(0,Qr.jsxs)("div",{className:"rounded px-2 py-1.5",style:{backgroundColor:t?"rgba(255,255,255,0.05)":"rgba(255,255,255,0.1)"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(Vc,{size:12,className:"text-blue-300"}),(0,Qr.jsx)("span",{className:"text-white/70 text-[10px]",children:"Dudas"})]}),(0,Qr.jsx)("p",{className:"text-base font-bold text-white",children:q?.feedbackMessages||0})]}),(0,Qr.jsxs)("div",{className:"rounded px-2 py-1.5",style:{backgroundColor:t?"rgba(255,255,255,0.05)":"rgba(255,255,255,0.1)"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(Kc,{size:12,className:"text-orange-300"}),(0,Qr.jsx)("span",{className:"text-white/70 text-[10px]",children:"Impugn."})]}),(0,Qr.jsx)("p",{className:"text-base font-bold text-white",children:q?.challengeMessages||0})]})]}),(0,Qr.jsxs)("div",{className:"flex gap-1.5 mt-2",children:[(0,Qr.jsxs)("button",{onClick:()=>{s("inbox"),w(null)},className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-all "+("inbox"===n?"bg-white text-gray-900":"bg-white/10 text-white hover:bg-white/20"),children:[(0,Qr.jsx)(Gc,{size:12}),"Recibidos",q?.unreadMessages>0&&(0,Qr.jsx)("span",{className:"px-1 rounded-full text-[9px] bg-red-500 text-white",children:q.unreadMessages})]}),(0,Qr.jsxs)("button",{onClick:()=>{s("sent"),i(null)},className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-all "+("sent"===n?"bg-white text-gray-900":"bg-white/10 text-white hover:bg-white/20"),children:[(0,Qr.jsx)(Sn,{size:12}),"Enviados",m.length>0&&(0,Qr.jsx)("span",{className:"px-1 rounded-full text-[9px] bg-white/30 text-white",children:m.length})]})]})]})}),"inbox"===n&&(0,Qr.jsxs)("div",{className:"flex-shrink-0 px-2 sm:px-3 py-2 border-b flex flex-wrap items-center gap-1.5 sm:gap-2",style:{backgroundColor:r.backgroundSecondary,borderColor:r.border},children:[(0,Qr.jsxs)("div",{className:"w-full sm:flex-1 relative order-1",children:[(0,Qr.jsx)(Tn,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2",style:{color:r.textMuted}}),(0,Qr.jsx)("input",{type:"text",value:j,onChange:e=>k(e.target.value),placeholder:"Buscar mensajes...",className:"w-full pl-8 pr-6 py-1.5 text-xs rounded border focus:outline-none focus:ring-1",style:{backgroundColor:r.background,borderColor:r.border,color:r.textPrimary}}),j&&(0,Qr.jsx)("button",{onClick:_,className:"absolute right-2 top-1/2 -translate-y-1/2",style:{color:r.textMuted},children:(0,Qr.jsx)(En,{size:12})})]}),(0,Qr.jsxs)("div",{className:"relative flex-1 sm:flex-none order-2 min-w-[120px]",children:[(0,Qr.jsxs)("select",{value:C.status,onChange:e=>E("status",e.target.value),className:"w-full appearance-none pl-2 pr-6 py-1.5 text-xs rounded border focus:outline-none focus:ring-1",style:{backgroundColor:r.background,borderColor:r.border,color:r.textPrimary},children:[(0,Qr.jsx)("option",{value:"all",children:"Todos estados"}),(0,Qr.jsx)("option",{value:"unread",children:"Sin leer"}),(0,Qr.jsx)("option",{value:"read",children:"Ledos"}),(0,Qr.jsx)("option",{value:"resolved",children:"Resueltos"}),(0,Qr.jsx)("option",{value:"archived",children:"Archivados"})]}),(0,Qr.jsx)(Vi,{size:12,className:"absolute right-1.5 top-1/2 -translate-y-1/2 pointer-events-none",style:{color:r.textMuted}})]}),(0,Qr.jsxs)("div",{className:"relative flex-1 sm:flex-none order-3 min-w-[120px]",children:[(0,Qr.jsxs)("select",{value:C.type,onChange:e=>E("type",e.target.value),className:"w-full appearance-none pl-2 pr-6 py-1.5 text-xs rounded border focus:outline-none focus:ring-1",style:{backgroundColor:r.background,borderColor:r.border,color:r.textPrimary},children:[(0,Qr.jsx)("option",{value:"all",children:"Todos tipos"}),(0,Qr.jsx)("option",{value:"question_feedback",children:"Dudas"}),(0,Qr.jsx)("option",{value:"question_challenge",children:"Impugnaciones"})]}),(0,Qr.jsx)(Vi,{size:12,className:"absolute right-1.5 top-1/2 -translate-y-1/2 pointer-events-none",style:{color:r.textMuted}})]}),(0,Qr.jsx)("button",{onClick:F,disabled:T,className:"p-1.5 rounded border transition-all disabled:opacity-50 order-4",style:{backgroundColor:r.background,borderColor:r.border,color:r.textSecondary},title:"Actualizar",children:(0,Qr.jsx)(Yi,{size:14,className:T?"animate-spin":""})})]}),"inbox"===n&&M.length>0&&(0,Qr.jsxs)("div",{className:"flex-shrink-0 px-2 sm:px-3 py-1.5 border-b flex flex-wrap items-center gap-1.5 sm:gap-2",style:{backgroundColor:d.size>0?t?"rgba(59, 130, 246, 0.15)":"#dbeafe":r.backgroundSecondary,borderColor:r.border},children:[(0,Qr.jsxs)("button",{onClick:U,className:"flex items-center gap-1.5 px-1.5 py-0.5 rounded transition-colors",disabled:f,style:{color:r.textPrimary},children:[0===d.size?(0,Qr.jsx)(fc,{size:14,style:{color:r.textSecondary}}):d.size===M.length?(0,Qr.jsx)(dc,{size:14,style:{color:r.accent}}):(0,Qr.jsx)(uc,{size:14,style:{color:r.accent}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",children:0===d.size?"Seleccionar":`${d.size} sel.`})]}),d.size>0&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"h-3 w-px",style:{backgroundColor:r.border}}),(0,Qr.jsxs)("button",{onClick:()=>H("mark_read"),disabled:f,className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-all disabled:opacity-50",style:{backgroundColor:r.primary,color:"#ffffff"},title:"Marcar como ledos",children:[(0,Qr.jsx)(Xc,{size:12}),"Ledos"]}),(0,Qr.jsxs)("button",{onClick:()=>H("archive"),disabled:f,className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-all disabled:opacity-50 border",style:{backgroundColor:r.background,borderColor:r.border,color:r.textSecondary},title:"Archivar",children:[(0,Qr.jsx)(Zc,{size:12}),"Archivar"]}),(0,Qr.jsxs)("button",{onClick:()=>{window.confirm(`Ests seguro de eliminar ${d.size} mensaje(s)?`)&&H("delete")},disabled:f,className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-all disabled:opacity-50",style:{backgroundColor:r.error,color:"#ffffff"},title:"Eliminar",children:[(0,Qr.jsx)(ca,{size:12}),"Eliminar"]}),f&&(0,Qr.jsx)("div",{className:"w-3 h-3 border-2 rounded-full animate-spin",style:{borderColor:`${r.primary}20`,borderTopColor:r.primary}})]})]}),"sent"===n&&(0,Qr.jsxs)("div",{className:"flex-shrink-0 px-2 sm:px-3 py-2 border-b flex flex-wrap items-center justify-between gap-1.5",style:{backgroundColor:r.backgroundSecondary,borderColor:r.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)(Sn,{size:12,style:{color:r.textSecondary}}),(0,Qr.jsx)("span",{className:"text-xs",style:{color:r.textSecondary},children:"Mensajes enviados"})]}),(0,Qr.jsx)("button",{onClick:$,disabled:g,className:"p-1.5 rounded border transition-all disabled:opacity-50",style:{backgroundColor:r.background,borderColor:r.border,color:r.textSecondary},title:"Actualizar",children:(0,Qr.jsx)(Yi,{size:12,className:g?"animate-spin":""})})]}),D&&"inbox"===n&&(0,Qr.jsxs)("div",{className:"flex-shrink-0 px-3 py-1.5 flex items-center justify-between",style:{backgroundColor:r.accentLight},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)("div",{className:"w-1.5 h-1.5 rounded-full animate-pulse",style:{backgroundColor:r.accent}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:r.accent},children:"Nuevos mensajes"})]}),(0,Qr.jsx)("button",{onClick:F,className:"text-xs font-medium px-2 py-0.5 rounded",style:{backgroundColor:r.accent,color:"#ffffff"},children:"Actualizar"})]}),(0,Qr.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden rounded-b-xl border-x border-b min-h-0",style:{borderColor:r.border},children:["inbox"===n&&(0,Qr.jsxs)(Qr.Fragment,{children:[P&&(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center px-3",children:[(0,Qr.jsx)(Pn,{size:32,className:"mx-auto mb-2",style:{color:r.error}}),(0,Qr.jsx)("p",{className:"text-sm font-medium",style:{color:r.error},children:"Error al cargar"}),(0,Qr.jsx)("p",{className:"text-xs mt-1",style:{color:r.textSecondary},children:P}),(0,Qr.jsx)("button",{onClick:F,className:"mt-2 px-3 py-1.5 rounded text-xs font-medium",style:{backgroundColor:r.primary,color:"#ffffff"},children:"Reintentar"})]})}),T&&0===M.length&&!P&&(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"w-6 h-6 border-2 rounded-full animate-spin mx-auto mb-2",style:{borderColor:`${r.primary}20`,borderTopColor:r.primary}}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:r.textSecondary},children:"Cargando..."})]})}),!T&&!P&&0===M.length&&(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center px-3",children:[(0,Qr.jsx)(Gc,{size:32,className:"mx-auto mb-2",style:{color:r.textMuted}}),(0,Qr.jsx)("h4",{className:"text-sm font-semibold mb-0.5",style:{color:r.textPrimary},children:"No hay mensajes"}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:r.textSecondary},children:"Sin resultados para los filtros"})]})}),!P&&M.length>0&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:"w-full md:w-2/5 border-b md:border-b-0 md:border-r overflow-y-auto flex-shrink-0 max-h-[40vh] md:max-h-none",style:{borderColor:r.border,backgroundColor:r.backgroundSecondary},children:[M.map(e=>{const n=o?.id===e.id,s=d.has(e.id),a="unread"===e.status,i=G(e.type),l=i.icon;return(0,Qr.jsx)("div",{onClick:()=>W(e),className:"px-2.5 py-2 cursor-pointer border-b transition-all duration-150",style:{borderColor:r.border,backgroundColor:n?r.background:s?t?"rgba(59, 130, 246, 0.15)":"#dbeafe":"transparent",borderLeftWidth:n?"2px":"0",borderLeftColor:n?r.accent:"transparent"},onMouseEnter:e=>{n||s||(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.05)":r.background)},onMouseLeave:e=>{n||s||(e.currentTarget.style.backgroundColor="transparent")},children:(0,Qr.jsxs)("div",{className:"flex items-start gap-2",children:[(0,Qr.jsx)("button",{onClick:t=>B(e.id,t),className:"flex-shrink-0 mt-0.5 rounded transition-colors",children:s?(0,Qr.jsx)(dc,{size:14,style:{color:r.accent}}):(0,Qr.jsx)(fc,{size:14,style:{color:r.textMuted}})}),(0,Qr.jsx)("div",{className:"flex-shrink-0 p-1.5 rounded",style:{backgroundColor:i.bgColor},children:(0,Qr.jsx)(l,{size:12,style:{color:i.color}})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,Qr.jsx)("span",{className:"text-[10px] truncate "+(a?"font-bold":"font-medium"),style:{color:a?r.accent:r.textSecondary},children:e.sender_name||`Usuario #${e.sender_id}`}),(0,Qr.jsx)("span",{className:"text-[10px] flex-shrink-0",style:{color:r.textMuted},children:K(e.created_at)})]}),(0,Qr.jsx)("p",{className:"text-xs truncate "+(a?"font-semibold":""),style:{color:r.textPrimary},children:e.subject}),(0,Qr.jsxs)("p",{className:"text-[10px] truncate mt-0.5",style:{color:r.textSecondary},children:[e.message.replace(/<[^>]*>/g,"").substring(0,50),"..."]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,Qr.jsx)("span",{className:"text-[9px] px-1 py-0.5 rounded font-medium",style:{backgroundColor:i.bgColor,color:i.color},children:i.label}),a&&(0,Qr.jsx)("span",{className:"text-[9px] px-1 py-0.5 rounded font-medium",style:{backgroundColor:"#fee2e2",color:"#ef4444"},children:"Nuevo"})]})]})]})},e.id)}),A.hasMore&&(0,Qr.jsx)("button",{onClick:()=>I(!1),className:"w-full py-2 text-xs font-medium transition-colors",style:{color:r.accent,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=r.background},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Cargar ms"})]}),(0,Qr.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden min-h-[150px]",style:{backgroundColor:r.background},children:o?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"px-3 sm:px-4 py-2 sm:py-3 border-b flex-shrink-0",style:{borderColor:r.border},children:(0,Qr.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-1 sm:gap-2",children:(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 mb-1",children:[(()=>{const e=G(o.type),t=e.icon;return(0,Qr.jsxs)("span",{className:"inline-flex items-center gap-0.5 text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:e.bgColor,color:e.color},children:[(0,Qr.jsx)(t,{size:10}),e.label]})})(),(()=>{const e=(e=>{switch(e){case"unread":return{label:"Sin leer",color:"#ef4444",bgColor:t?"rgba(239, 68, 68, 0.2)":"#fee2e2"};case"read":return{label:"Ledo",color:"#3b82f6",bgColor:t?"rgba(59, 130, 246, 0.2)":"#dbeafe"};case"resolved":return{label:"Resuelto",color:"#10b981",bgColor:t?"rgba(16, 185, 129, 0.2)":"#d1fae5"};case"archived":return{label:"Archivado",color:r.textSecondary,bgColor:t?"rgba(255,255,255,0.1)":"#f3f4f6"};default:return{label:e,color:r.textSecondary,bgColor:t?"rgba(255,255,255,0.1)":"#f3f4f6"}}})(o.status);return(0,Qr.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:e.bgColor,color:e.color},children:e.label})})()]}),(0,Qr.jsx)("h2",{className:"text-sm sm:text-base font-bold",style:{color:r.textPrimary},children:o.subject}),(0,Qr.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-1 text-[10px] sm:text-xs",children:[(0,Qr.jsxs)("span",{className:"flex items-center gap-0.5",style:{color:r.accent},children:[(0,Qr.jsx)(Cn,{size:11}),o.sender_name||`Usuario #${o.sender_id}`]}),(0,Qr.jsxs)("span",{className:"flex items-center gap-0.5",style:{color:r.textSecondary},children:[(0,Qr.jsx)(Ec,{size:11}),Y(o.created_at)]})]})]})})}),o.related_object_id&&(0,Qr.jsxs)("div",{className:"px-3 sm:px-4 py-1.5 sm:py-2 border-b flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1",style:{backgroundColor:r.backgroundSecondary,borderColor:r.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)(Jc,{size:12,style:{color:r.textSecondary}}),(0,Qr.jsx)("span",{className:"text-xs",style:{color:r.textSecondary},children:"Pregunta:"}),(0,Qr.jsxs)("span",{className:"text-xs font-medium",style:{color:r.textPrimary},children:["#",o.related_object_id]})]}),(0,Qr.jsxs)("a",{href:`/wp-admin/post.php?post=${o.related_object_id}&action=edit`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-0.5 text-xs font-medium transition-colors",style:{color:r.accent},onMouseEnter:e=>e.currentTarget.style.textDecoration="underline",onMouseLeave:e=>e.currentTarget.style.textDecoration="none",children:["Ver",(0,Qr.jsx)(ed,{size:10})]})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto px-3 sm:px-4 py-2 sm:py-3",style:{backgroundColor:r.backgroundSecondary},children:(0,Qr.jsx)("div",{className:"prose prose-sm max-w-none rounded p-2 sm:p-3 border text-xs",style:{backgroundColor:r.background,borderColor:r.border,color:r.textPrimary},dangerouslySetInnerHTML:{__html:o.message}})}),(0,Qr.jsxs)("div",{className:"px-3 sm:px-4 py-1.5 sm:py-2 border-t flex flex-col sm:flex-row items-start sm:items-center justify-between gap-1.5 flex-shrink-0",style:{borderColor:r.border,backgroundColor:r.backgroundSecondary},children:[(0,Qr.jsxs)("span",{className:"text-[10px]",style:{color:r.textMuted},children:["ID: ",o.id]}),(0,Qr.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 w-full sm:w-auto",children:["unread"===o.status&&(0,Qr.jsxs)("button",{onClick:()=>V(o.id,"read"),disabled:z,className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-all disabled:opacity-50",style:{backgroundColor:"#3b82f6",color:"#ffffff"},children:[(0,Qr.jsx)(Xc,{size:11}),"Ledo"]}),"read"===o.status&&(0,Qr.jsxs)("button",{onClick:()=>V(o.id,"resolved"),disabled:z,className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-all disabled:opacity-50",style:{backgroundColor:r.success,color:"#ffffff"},children:[(0,Qr.jsx)(On,{size:11}),"Resolver"]}),("read"===o.status||"resolved"===o.status)&&(0,Qr.jsxs)("button",{onClick:()=>V(o.id,"archived"),disabled:z,className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium border transition-all disabled:opacity-50",style:{backgroundColor:"transparent",borderColor:r.border,color:r.textSecondary},children:[(0,Qr.jsx)(Zc,{size:11}),"Archivar"]})]})]})]}):(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center px-3",children:[(0,Qr.jsx)(nl,{size:32,className:"mx-auto mb-2",style:{color:r.textMuted,opacity:.5}}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:r.textSecondary},children:"Selecciona un mensaje"})]})})})]})]}),"sent"===n&&(0,Qr.jsxs)(Qr.Fragment,{children:[y&&(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center px-4",children:[(0,Qr.jsx)(Pn,{size:48,className:"mx-auto mb-3",style:{color:r.error}}),(0,Qr.jsx)("p",{className:"font-medium",style:{color:r.error},children:"Error al cargar mensajes enviados"}),(0,Qr.jsx)("p",{className:"text-sm mt-1",style:{color:r.textSecondary},children:y}),(0,Qr.jsx)("button",{onClick:$,className:"mt-4 px-4 py-2 rounded-lg text-sm font-medium",style:{backgroundColor:r.primary,color:"#ffffff"},children:"Reintentar"})]})}),g&&0===m.length&&!y&&(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"w-10 h-10 border-3 rounded-full animate-spin mx-auto mb-3",style:{borderColor:`${r.primary}20`,borderTopColor:r.primary}}),(0,Qr.jsx)("p",{style:{color:r.textSecondary},children:"Cargando mensajes enviados..."})]})}),!g&&!y&&0===m.length&&(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center px-4",children:[(0,Qr.jsx)(Sn,{size:48,className:"mx-auto mb-3",style:{color:r.textMuted}}),(0,Qr.jsx)("h4",{className:"text-base font-semibold mb-1",style:{color:r.textPrimary},children:"No hay mensajes enviados"}),(0,Qr.jsx)("p",{className:"text-sm mb-4",style:{color:r.textSecondary},children:"An no has enviado mensajes a los estudiantes"}),(0,Qr.jsxs)("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm mx-auto",style:{backgroundColor:r.accent,color:"#ffffff"},children:[(0,Qr.jsx)(Sn,{size:16}),"Enviar primer mensaje"]})]})}),!y&&m.length>0&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"w-full md:w-2/5 border-b md:border-b-0 md:border-r overflow-y-auto flex-shrink-0 max-h-[40vh] md:max-h-none",style:{borderColor:r.border,backgroundColor:r.backgroundSecondary},children:m.map(e=>{const n=v?.id===e.id,s=X(e.type_display),a=s.icon;return(0,Qr.jsx)("div",{onClick:()=>Q(e),className:"px-4 py-3 cursor-pointer border-b transition-all duration-150",style:{borderColor:r.border,backgroundColor:n?r.background:"transparent",borderLeftWidth:n?"3px":"0",borderLeftColor:n?r.accent:"transparent"},onMouseEnter:e=>{n||(e.currentTarget.style.backgroundColor=r.background)},onMouseLeave:e=>{n||(e.currentTarget.style.backgroundColor="transparent")},children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0 p-2 rounded-lg mt-0.5",style:{backgroundColor:s.bgColor},children:(0,Qr.jsx)(a,{size:16,style:{color:s.color}})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(Nn,{size:12,style:{color:r.accent}}),(0,Qr.jsxs)("span",{className:"text-xs font-medium",style:{color:r.accent},children:[e.recipient_count," destinatarios"]})]}),(0,Qr.jsx)("span",{className:"text-xs flex-shrink-0",style:{color:r.textMuted},children:K(e.created_at)})]}),(0,Qr.jsx)("p",{className:"text-sm font-semibold truncate mt-0.5",style:{color:r.textPrimary},children:e.subject}),(0,Qr.jsxs)("p",{className:"text-xs truncate mt-1",style:{color:r.textSecondary},children:[e.message.replace(/<[^>]*>/g,"").substring(0,60),"..."]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,Qr.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium",style:{backgroundColor:s.bgColor,color:s.color},children:s.label}),(0,Qr.jsxs)("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium flex items-center gap-1",style:{backgroundColor:t?"rgba(16, 185, 129, 0.2)":"#d1fae5",color:"#059669"},children:[(0,Qr.jsx)(Nc,{size:10}),e.read_count," ledos"]}),e.unread_count>0&&(0,Qr.jsxs)("span",{className:"text-[10px] px-1.5 py-0.5 rounded font-medium flex items-center gap-1",style:{backgroundColor:t?"rgba(239, 68, 68, 0.2)":"#fee2e2",color:"#dc2626"},children:[(0,Qr.jsx)(Sc,{size:10}),e.unread_count," sin leer"]})]})]})]})},e.id)})}),(0,Qr.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden min-h-[200px]",style:{backgroundColor:r.background},children:v?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"px-4 sm:px-6 py-3 sm:py-4 border-b flex-shrink-0",style:{borderColor:r.border},children:(0,Qr.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 sm:gap-4",children:(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(()=>{const e=X(v.type_display),t=e.icon;return(0,Qr.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded font-medium",style:{backgroundColor:e.bgColor,color:e.color},children:[(0,Qr.jsx)(t,{size:12}),e.label]})})()}),(0,Qr.jsx)("h2",{className:"text-base sm:text-lg font-bold",style:{color:r.textPrimary},children:v.subject}),(0,Qr.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 mt-2 text-xs sm:text-sm",children:[(0,Qr.jsxs)("span",{className:"flex items-center gap-1",style:{color:r.accent},children:[(0,Qr.jsx)(Nn,{size:14}),v.recipient_count," destinatarios"]}),(0,Qr.jsxs)("span",{className:"flex items-center gap-1",style:{color:r.textSecondary},children:[(0,Qr.jsx)(Ec,{size:14}),Y(v.created_at)]})]})]})})}),(0,Qr.jsx)("div",{className:"px-4 sm:px-6 py-2 sm:py-3 border-b",style:{backgroundColor:r.backgroundSecondary,borderColor:r.border},children:(0,Qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"text-xs font-medium mb-1",style:{color:r.textSecondary},children:"Destinatarios"}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:r.textPrimary},children:v.recipient_names||"Mltiples usuarios"})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:r.success},children:v.read_count}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:r.textSecondary},children:"Ledos"})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:r.error},children:v.unread_count}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:r.textSecondary},children:"Sin leer"})]})]})]})}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto px-4 sm:px-6 py-3 sm:py-4",style:{backgroundColor:r.backgroundSecondary},children:(0,Qr.jsx)("div",{className:"prose prose-sm max-w-none rounded-lg p-3 sm:p-4 border",style:{backgroundColor:r.background,borderColor:r.border,color:r.textPrimary},dangerouslySetInnerHTML:{__html:v.message}})}),(0,Qr.jsxs)("div",{className:"px-4 sm:px-6 py-2 sm:py-3 border-t flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 flex-shrink-0",style:{borderColor:r.border,backgroundColor:r.backgroundSecondary},children:[(0,Qr.jsxs)("span",{className:"text-xs",style:{color:r.textMuted},children:["ID: ",v.id]}),(0,Qr.jsxs)("div",{className:"text-xs",style:{color:r.textSecondary},children:[Math.round(v.read_count/v.recipient_count*100),"% tasa de apertura"]})]})]}):(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center px-4",children:[(0,Qr.jsx)(Sn,{size:48,className:"mx-auto mb-3",style:{color:r.textMuted,opacity:.5}}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:r.textSecondary},children:"Selecciona un mensaje para ver los detalles"})]})})})]})]})]}),(0,Qr.jsx)(An,{isOpen:l,onClose:()=>c(!1),onMessageSent:()=>{F(),m.length>0&&$()}})]})},rd=cn("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),nd=cn("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),sd=()=>{const{t:e}=k(),{getColor:t}=Yr(),[r,n]=(0,a.useState)(!1),[s,o]=(0,a.useState)(null),[i,l]=(0,a.useState)(null),c=async e=>{n(!0),o(null),l(null);try{const t=(0,Fr.getApiConfig)(),r=await(0,gn.qb)(`${t.apiUrl}/quiz-extended/v1/migrations/run`,{method:"POST",body:JSON.stringify({type:e})});r.data&&r.data.data?o(r.data.data):o(r.data)}catch(e){console.error("Migration failed:",e),l(e.message||"Migration failed")}finally{n(!1)}};return(0,Qr.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,Qr.jsxs)("div",{className:"mb-8",children:[(0,Qr.jsx)("h1",{className:"text-3xl font-bold mb-2",style:{color:t("primary","#1a202c")},children:"Gestor de Migraciones"}),(0,Qr.jsx)("p",{style:{color:t("textSecondary","#6b7280")},children:"Ejecuta scripts de mantenimiento y correccin de datos."})]}),(0,Qr.jsxs)("div",{className:"grid gap-6",children:[(0,Qr.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:t("background","#ffffff"),borderColor:t("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${t("primary","#1a202c")}10`},children:(0,Qr.jsx)(rd,{size:24,style:{color:t("primary","#1a202c")}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold",style:{color:t("primary","#1a202c")},children:"Actualizar Esquema de Base de Datos"}),(0,Qr.jsxs)("p",{className:"text-sm mt-1",style:{color:t("textSecondary","#6b7280")},children:["Ejecuta ",(0,Qr.jsx)("code",{children:"dbDelta"})," para asegurar que todas las tablas y columnas necesarias existen. Usa esto si has actualizado el plugin y faltan columnas (ej. ",(0,Qr.jsx)("code",{children:"lesson_id"}),")."]})]})]}),(0,Qr.jsxs)("button",{onClick:()=>c("update_database_schema"),disabled:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50",style:{backgroundColor:t("primary","#1a202c"),color:"#ffffff"},children:[r?(0,Qr.jsx)(Mn,{size:18,className:"animate-spin"}):(0,Qr.jsx)(nd,{size:18}),(0,Qr.jsx)("span",{children:"Ejecutar"})]})]}),s&&s.stats&&void 0!==s.stats.version&&(0,Qr.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-bold",children:[(0,Qr.jsx)(On,{size:18}),(0,Qr.jsx)("span",{children:"Actualizacin Completada"})]}),(0,Qr.jsxs)("div",{className:"text-sm text-green-800",children:[(0,Qr.jsx)("span",{className:"font-semibold",children:"Versin DB:"})," ",s.stats?.version]})]})]}),(0,Qr.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:t("background","#ffffff"),borderColor:t("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${t("primary","#1a202c")}10`},children:(0,Qr.jsx)(rd,{size:24,style:{color:t("primary","#1a202c")}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold",style:{color:t("primary","#1a202c")},children:"Corregir Relaciones Leccin-Curso"}),(0,Qr.jsxs)("p",{className:"text-sm mt-1",style:{color:t("textSecondary","#6b7280")},children:["Asigna el ",(0,Qr.jsx)("code",{children:"_course_id"})," a cada leccin basndose en la lista de lecciones del curso. Tambin sincroniza los quizzes asociados."]})]})]}),(0,Qr.jsxs)("button",{onClick:()=>c("fix_lesson_course_relationships"),disabled:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50",style:{backgroundColor:t("primary","#1a202c"),color:"#ffffff"},children:[r?(0,Qr.jsx)(Mn,{size:18,className:"animate-spin"}):(0,Qr.jsx)(nd,{size:18}),(0,Qr.jsx)("span",{children:"Ejecutar"})]})]}),s&&s.stats&&void 0!==s.stats.lessons_updated&&(0,Qr.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-bold",children:[(0,Qr.jsx)(On,{size:18}),(0,Qr.jsx)("span",{children:"Migracin Completada"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm text-green-800",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Cursos Procesados:"}),s.stats?.courses_processed]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Lecciones Actualizadas:"}),s.stats?.lessons_updated]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Quizzes Sincronizados:"}),s.stats?.quizzes_synced]})]})]}),i&&(0,Qr.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 flex items-center gap-2",children:[(0,Qr.jsx)(jn,{size:18}),(0,Qr.jsx)("span",{children:i})]})]}),(0,Qr.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:t("background","#ffffff"),borderColor:t("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${t("primary","#1a202c")}10`},children:(0,Qr.jsx)(Yi,{size:24,style:{color:t("primary","#1a202c")}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold",style:{color:t("primary","#1a202c")},children:"Sincronizar IDs de Cursos en Quizzes"}),(0,Qr.jsxs)("p",{className:"text-sm mt-1",style:{color:t("textSecondary","#6b7280")},children:["Reconstruye los campos ",(0,Qr.jsx)("code",{children:"_course_ids"})," y ",(0,Qr.jsx)("code",{children:"_lesson_id"})," en todos los quizzes. Esencial para que los filtros de historial funcionen correctamente."]})]})]}),(0,Qr.jsxs)("button",{onClick:()=>c("sync_quiz_course_ids"),disabled:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50",style:{backgroundColor:t("primary","#1a202c"),color:"#ffffff"},children:[r?(0,Qr.jsx)(Mn,{size:18,className:"animate-spin"}):(0,Qr.jsx)(nd,{size:18}),(0,Qr.jsx)("span",{children:"Ejecutar"})]})]}),s&&s.stats&&void 0!==s.stats.synced&&(0,Qr.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-bold",children:[(0,Qr.jsx)(On,{size:18}),(0,Qr.jsx)("span",{children:"Sincronizacin Completada"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm text-green-800",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Total Quizzes:"}),s.stats?.total]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Sincronizados:"}),s.stats?.synced]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Errores:"}),s.stats?.errors]})]})]})]}),(0,Qr.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:t("background","#ffffff"),borderColor:t("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${t("primary","#1a202c")}10`},children:(0,Qr.jsx)(rd,{size:24,style:{color:t("primary","#1a202c")}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold",style:{color:t("primary","#1a202c")},children:"Migrar Preguntas a Multi-Relacin"}),(0,Qr.jsxs)("p",{className:"text-sm mt-1",style:{color:t("textSecondary","#6b7280")},children:["Convierte las asociaciones antiguas de preguntas (",(0,Qr.jsx)("code",{children:"_course_id"}),", ",(0,Qr.jsx)("code",{children:"_lesson_id"}),") al nuevo formato de arrays (",(0,Qr.jsx)("code",{children:"_course_ids"}),", ",(0,Qr.jsx)("code",{children:"_lesson_ids"}),"). Necesario para el filtrado avanzado en el Generador de Quizzes."]})]})]}),(0,Qr.jsxs)("button",{onClick:()=>c("migrate_questions_to_multirelationship"),disabled:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50",style:{backgroundColor:t("primary","#1a202c"),color:"#ffffff"},children:[r?(0,Qr.jsx)(Mn,{size:18,className:"animate-spin"}):(0,Qr.jsx)(nd,{size:18}),(0,Qr.jsx)("span",{children:"Ejecutar"})]})]}),s&&s.stats&&void 0!==s.stats.updated&&void 0!==s.stats.processed&&(0,Qr.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-green-700 font-bold",children:[(0,Qr.jsx)(On,{size:18}),(0,Qr.jsx)("span",{children:"Migracin Completada"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-green-800 mb-3",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Total:"}),s.stats?.total?.toLocaleString()]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Procesados:"}),s.stats?.processed?.toLocaleString()]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Actualizados:"}),(0,Qr.jsx)("span",{className:"text-green-600 font-bold",children:s.stats?.updated?.toLocaleString()})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Ya Migrados:"}),s.stats?.already_migrated?.toLocaleString()]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Sin Relaciones:"}),s.stats?.no_relations?.toLocaleString()]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Omitidos:"}),s.stats?.skipped?.toLocaleString()]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Batches:"}),s.stats?.batches_completed]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"block font-semibold",children:"Errores:"}),(0,Qr.jsx)("span",{className:s.stats?.errors>0?"text-red-600 font-bold":"",children:s.stats?.errors?.toLocaleString()})]})]}),s.stats?.error_details&&s.stats.error_details.length>0&&(0,Qr.jsxs)("div",{className:"mt-3 p-3 bg-red-50 rounded border border-red-200",children:[(0,Qr.jsx)("p",{className:"text-red-700 font-semibold mb-2",children:"Detalles de Errores (primeros 10):"}),(0,Qr.jsx)("ul",{className:"text-xs text-red-600 space-y-1",children:s.stats.error_details.map((e,t)=>(0,Qr.jsxs)("li",{children:[(0,Qr.jsxs)("strong",{children:["Pregunta #",e.question_id,":"]})," ",e.error]},t))})]}),(0,Qr.jsx)("p",{className:"text-xs text-green-600 mt-3 italic",children:" Es seguro ejecutar esta migracin mltiples veces. Los datos no se duplicarn."})]})]})]})]})},ad=cn("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),od=cn("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),id=cn("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ld=cn("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),cd=cn("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),dd=cn("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),ud=cn("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),fd=()=>{const[e,t]=(0,a.useState)("general"),{theme:r,setThemePreview:n}=Yr(),[s,o]=(0,a.useState)((window.qe_data||{}).scoreFormat||"percentage"),[l,c]=(0,a.useState)(r),[d,u]=(0,a.useState)("light"),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(!0),[g,x]=(0,a.useState)(window.qe_data?.campus_logo||""),[y,b]=(0,a.useState)(window.qe_data?.campus_logo_dark||""),[v,w]=(0,a.useState)({enabled:!1,admin_email:"",notify_on_feedback:!0,notify_on_challenge:!0,email_subject_prefix:"[Quiz Extended]",include_question_content:!0}),[j,N]=(0,a.useState)(""),[k,_]=(0,a.useState)(!1),[C,S]=(0,a.useState)(!1),[E,O]=(0,a.useState)(!1),[M,T]=(0,a.useState)(null),[P,A]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{const e=await Wr.getSettings(),t=e.score_format||"percentage";if(t!==s&&o(t),e.campus_logo&&x(e.campus_logo),e.campus_logo_dark&&b(e.campus_logo_dark),e.theme)if(e.theme.light&&e.theme.dark)c(e.theme);else{const t={light:{primary:e.theme.primary||Kr.light.primary,secondary:e.theme.secondary||Kr.light.secondary,accent:e.theme.accent||Kr.light.accent,background:e.theme.background||Kr.light.background,secondaryBackground:e.theme.secondaryBackground||Kr.light.secondaryBackground,text:e.theme.text||Kr.light.text,textPrimary:e.theme.textPrimary||e.theme.text||Kr.light.textPrimary,textSecondary:e.theme.textSecondary||Kr.light.textSecondary,textColorContrast:e.theme.textColorContrast||Kr.light.textColorContrast,borderColor:e.theme.borderColor||e.theme.primary||Kr.light.borderColor,hoverColor:e.theme.hoverColor||e.theme.accent||Kr.light.hoverColor},dark:Kr.dark};c(t)}try{const e=await Wr.getEmailNotificationSettings();e.settings&&w(e.settings),e.wp_admin_email&&N(e.wp_admin_email)}catch(e){console.error("Error loading email settings:",e)}}catch(e){console.error("Error loading settings:",e),Pr.error("Error al cargar la configuracin")}finally{h(!1)}})()},[]);const q=()=>{S(!1),T(null),A(null)},z=(e,t,r)=>{const s={...l,[e]:{...l[e],[t]:r}};c(s),n(s)},D=()=>{if(!window.wp||!window.wp.media)return void Pr.error("El media uploader de WordPress no est disponible");const e=window.wp.media({title:"Seleccionar Logo del Campus (Modo Claro)",button:{text:"Usar esta imagen"},multiple:!1,library:{type:"image"}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();x(t.url)}),e.open()},L=()=>{if(!window.wp||!window.wp.media)return void Pr.error("El media uploader de WordPress no est disponible");const e=window.wp.media({title:"Seleccionar Logo del Campus (Modo Oscuro)",button:{text:"Usar esta imagen"},multiple:!1,library:{type:"image"}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();b(t.url)}),e.open()},I=({label:e,value:t,onChange:r,description:n})=>{const s=t||"#000000",[a,o]=i().useState(s),[l,c]=i().useState(!1),d=i().useRef(null);i().useEffect(()=>{o(s)},[s]);const u=()=>{o(s),c(!1)},f=e=>{o(e.target.value)};return(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:e}),n&&(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:n}),(0,Qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qr.jsx)("div",{className:"relative group",children:(0,Qr.jsx)("button",{type:"button",onClick:()=>{o(s),c(!0)},className:"w-12 h-12 rounded-full border-4 border-white shadow-lg cursor-pointer ring-2 ring-gray-200 hover:ring-blue-400 hover:scale-105 transition-all focus:outline-none focus:ring-blue-500 relative",style:{backgroundColor:s},title:"Haz clic para elegir un color",children:(0,Qr.jsx)("span",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black bg-opacity-30 rounded-full",children:(0,Qr.jsx)(ad,{className:"w-5 h-5 text-white"})})})}),(0,Qr.jsx)("input",{type:"text",value:s,onChange:e=>r(e.target.value),pattern:"^#[0-9A-Fa-f]{6}$",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"#000000"}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("div",{className:"w-8 h-8 rounded border-2 border-gray-200 shadow-sm",style:{backgroundColor:s}}),(0,Qr.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:s.toUpperCase()})]})]}),l&&(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:u,children:(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[(0,Qr.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Seleccionar ",e]}),(0,Qr.jsxs)("p",{className:"text-sm text-gray-500 mb-4 flex items-center gap-2",children:[(0,Qr.jsx)(ad,{className:"w-4 h-4"}),"Haz clic o arrastra el ratn en el selector para elegir un color"]}),(0,Qr.jsxs)("div",{className:"mb-6 relative group",children:[(0,Qr.jsx)("input",{ref:d,type:"color",value:a,onChange:f,onInput:f,className:"w-full h-48 cursor-crosshair rounded border-2 border-gray-300 hover:qe-border-primary transition-colors"}),(0,Qr.jsx)("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:(0,Qr.jsxs)("div",{className:"bg-black bg-opacity-60 text-white px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1",children:[(0,Qr.jsx)(ad,{className:"w-3 h-3"}),"Hacer click para elegir"]})})]}),(0,Qr.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[(0,Qr.jsx)("div",{className:"w-16 h-16 rounded border-2 border-gray-300 shadow-sm",style:{backgroundColor:a}}),(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cdigo de color"}),(0,Qr.jsx)("input",{type:"text",value:a,onChange:f,pattern:"^#[0-9A-Fa-f]{6}$",className:"w-full px-3 py-2 border border-gray-300 rounded-md qe-input-primary font-mono text-sm"})]})]}),(0,Qr.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,Qr.jsx)("button",{type:"button",onClick:u,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors font-medium",children:"Cancelar"}),(0,Qr.jsx)("button",{type:"button",onClick:()=>{r&&r(a),c(!1)},className:"px-4 py-2 qe-bg-primary qe-text-on-primary rounded-md qe-hover-primary transition-colors font-medium",children:"Confirmar"})]})]})})]})};return m?(0,Qr.jsx)("div",{className:"p-8 max-w-4xl mx-auto",children:(0,Qr.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Qr.jsx)("div",{className:"text-gray-600",children:"Cargando configuracin..."})})}):(0,Qr.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,Qr.jsxs)("div",{className:"mb-8",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Qr.jsx)(od,{className:"w-8 h-8 qe-icon-primary"}),(0,Qr.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuracin"})]}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Configura las opciones globales del sistema de gestin de aprendizaje"})]}),(0,Qr.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Qr.jsxs)("nav",{className:"flex gap-4",children:[(0,Qr.jsx)("button",{onClick:()=>t("general"),className:"px-4 py-2 font-medium transition-colors border-b-2 "+("general"===e?"qe-text-primary qe-border-primary":"text-gray-600 border-transparent hover:text-gray-900"),children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(od,{className:"w-4 h-4"}),"General"]})}),(0,Qr.jsx)("button",{onClick:()=>t("theme"),className:"px-4 py-2 font-medium transition-colors border-b-2 "+("theme"===e?"qe-text-primary qe-border-primary":"text-gray-600 border-transparent hover:text-gray-900"),children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(ad,{className:"w-4 h-4"}),"Tema y Colores"]})}),(0,Qr.jsx)("button",{onClick:()=>t("notifications"),className:"px-4 py-2 font-medium transition-colors border-b-2 "+("notifications"===e?"qe-text-primary qe-border-primary":"text-gray-600 border-transparent hover:text-gray-900"),children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(wn,{className:"w-4 h-4"}),"Notificaciones"]})}),(0,Qr.jsx)("button",{onClick:()=>t("maintenance"),className:"px-4 py-2 font-medium transition-colors border-b-2 "+("maintenance"===e?"qe-text-primary qe-border-primary":"text-gray-600 border-transparent hover:text-gray-900"),children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(rd,{className:"w-4 h-4"}),"Mantenimiento"]})})]})}),(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:["general"===e&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Logos del Campus"}),(0,Qr.jsx)("p",{className:"text-gray-600 mb-6",children:"Sube los logos que aparecern en la barra superior del campus. El logo es clickeable y redirige a la pgina principal."}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(id,{className:"w-5 h-5 text-yellow-500"}),(0,Qr.jsx)("h3",{className:"font-medium text-gray-900",children:"Logo Modo Claro"})]}),g?(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsx)("div",{className:"w-full h-20 border-2 border-gray-200 rounded-lg overflow-hidden bg-white flex items-center justify-center p-3",children:(0,Qr.jsx)("img",{src:g,alt:"Campus Logo (Claro)",className:"max-w-full max-h-full object-contain"})}),(0,Qr.jsxs)("div",{className:"flex gap-2",children:[(0,Qr.jsx)("button",{type:"button",onClick:D,className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-colors",children:"Cambiar"}),(0,Qr.jsx)("button",{type:"button",onClick:()=>{x("")},className:"px-3 py-2 bg-red-500 text-white text-sm rounded-lg hover:bg-red-600 transition-colors",children:"Eliminar"})]})]}):(0,Qr.jsx)("button",{type:"button",onClick:D,className:"w-full px-4 py-6 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-all",children:(0,Qr.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,Qr.jsx)(id,{className:"w-6 h-6 text-gray-400"}),(0,Qr.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Seleccionar logo"}),(0,Qr.jsx)("span",{className:"text-xs text-gray-500",children:"JPG, PNG, SVG"})]})})]}),(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(ld,{className:"w-5 h-5 text-indigo-500"}),(0,Qr.jsx)("h3",{className:"font-medium text-gray-900",children:"Logo Modo Oscuro"})]}),y?(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsx)("div",{className:"w-full h-20 border-2 border-gray-700 rounded-lg overflow-hidden bg-gray-800 flex items-center justify-center p-3",children:(0,Qr.jsx)("img",{src:y,alt:"Campus Logo (Oscuro)",className:"max-w-full max-h-full object-contain"})}),(0,Qr.jsxs)("div",{className:"flex gap-2",children:[(0,Qr.jsx)("button",{type:"button",onClick:L,className:"flex-1 px-3 py-2 bg-blue-500 text-white text-sm rounded-lg hover:bg-blue-600 transition-colors",children:"Cambiar"}),(0,Qr.jsx)("button",{type:"button",onClick:()=>{b("")},className:"px-3 py-2 bg-red-500 text-white text-sm rounded-lg hover:bg-red-600 transition-colors",children:"Eliminar"})]})]}):(0,Qr.jsx)("button",{type:"button",onClick:L,className:"w-full px-4 py-6 border-2 border-dashed border-gray-600 rounded-lg hover:border-indigo-500 hover:bg-gray-100 transition-all",children:(0,Qr.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,Qr.jsx)(ld,{className:"w-6 h-6 text-gray-400"}),(0,Qr.jsx)("span",{className:"text-gray-600 text-sm font-medium",children:"Seleccionar logo"}),(0,Qr.jsx)("span",{className:"text-xs text-gray-500",children:"JPG, PNG, SVG"})]})}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:"Si no se especifica, se usar el logo del modo claro"})]})]})]}),(0,Qr.jsxs)("div",{className:"p-6 border-t border-gray-200",children:[(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Formato de Puntuacin"}),(0,Qr.jsx)("p",{className:"text-gray-600 mb-6",children:"Selecciona cmo se mostrarn las puntuaciones en toda la plataforma"}),(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsxs)("label",{className:"flex items-start gap-4 p-4 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50",children:[(0,Qr.jsx)("input",{type:"radio",name:"scoreFormat",value:"percentage",checked:"percentage"===s,onChange:e=>o(e.target.value),className:"mt-1 w-5 h-5 qe-radio-primary"}),(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Qr.jsx)(cd,{className:"w-5 h-5 qe-icon-primary"}),(0,Qr.jsx)("span",{className:"font-medium text-gray-900",children:"Porcentaje (0-100%)"})]}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:"Las puntuaciones se mostrarn como porcentajes del 0% al 100%"}),(0,Qr.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Ejemplo: ",(0,Qr.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"75%"})]})]})]}),(0,Qr.jsxs)("label",{className:"flex items-start gap-4 p-4 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50",children:[(0,Qr.jsx)("input",{type:"radio",name:"scoreFormat",value:"base10",checked:"base10"===s,onChange:e=>o(e.target.value),className:"mt-1 w-5 h-5 qe-radio-primary"}),(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Qr.jsx)(dd,{className:"w-5 h-5 qe-icon-primary"}),(0,Qr.jsx)("span",{className:"font-medium text-gray-900",children:"Base 10 (0-10)"})]}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:"Las puntuaciones se mostrarn en escala del 0 al 10 (estilo espaol)"}),(0,Qr.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Ejemplo: ",(0,Qr.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"7.5/10"})]})]})]})]})]})]}),"theme"===e&&(0,Qr.jsx)(Qr.Fragment,{children:(0,Qr.jsxs)("div",{className:"p-6",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Personalizacin del Tema"}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Configura los colores para el modo claro y oscuro. El plugin detectar automticamente la preferencia del usuario desde el sistema o WordPress."})]}),(0,Qr.jsxs)("button",{onClick:()=>{confirm("Ests seguro de que quieres restaurar los colores por defecto?")&&(c(Kr),n(Kr))},className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,Qr.jsx)(pa,{className:"w-4 h-4"}),"Restaurar por defecto"]})]}),(0,Qr.jsx)("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(ad,{className:"w-5 h-5 text-gray-700"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"font-medium text-gray-900",children:"Modo de Previsualizacin"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:"Elige qu modo quieres editar y previsualizar"})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 border border-gray-200",children:[(0,Qr.jsxs)("button",{onClick:()=>u("light"),className:"flex items-center gap-2 px-4 py-2 rounded-md transition-colors "+("light"===d?"qe-bg-primary qe-text-on-primary":"text-gray-600 hover:bg-gray-100"),children:[(0,Qr.jsx)(id,{className:"w-4 h-4"}),"Modo Claro"]}),(0,Qr.jsxs)("button",{onClick:()=>u("dark"),className:"flex items-center gap-2 px-4 py-2 rounded-md transition-colors "+("dark"===d?"qe-bg-primary qe-text-on-primary":"text-gray-600 hover:bg-gray-100"),children:[(0,Qr.jsx)(ld,{className:"w-4 h-4"}),"Modo Oscuro"]})]})]})}),(0,Qr.jsxs)("div",{className:"mb-6",children:[(0,Qr.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:"light"===d?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(id,{className:"w-5 h-5 text-yellow-500"}),"Colores del Modo Claro"]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(ld,{className:"w-5 h-5 text-indigo-500"}),"Colores del Modo Oscuro"]})}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,Qr.jsx)(I,{label:"Color Principal",description:"Color primario de la interfaz",value:l[d].primary,onChange:e=>z(d,"primary",e)}),(0,Qr.jsx)(I,{label:"Color Secundario",description:"Color para elementos secundarios",value:l[d].secondary,onChange:e=>z(d,"secondary",e)}),(0,Qr.jsx)(I,{label:"Color de Acento",description:"Color para destacar elementos",value:l[d].accent,onChange:e=>z(d,"accent",e)}),(0,Qr.jsx)(I,{label:"Color de Fondo (Sidebars)",description:"Color de fondo para barras laterales",value:l[d].background,onChange:e=>z(d,"background",e)}),(0,Qr.jsx)(I,{label:"Color de Fondo (Contenido)",description:"Color de fondo para el contenido principal",value:l[d].secondaryBackground,onChange:e=>z(d,"secondaryBackground",e)}),(0,Qr.jsx)(I,{label:"Color de Texto Principal",description:"Color para textos principales y ttulos",value:l[d].textPrimary||l[d].text,onChange:e=>z(d,"textPrimary",e)}),(0,Qr.jsx)(I,{label:"Color de Texto Secundario",description:"Color para textos descriptivos y labels (ms tenue)",value:l[d].textSecondary||`${l[d].text}70`,onChange:e=>z(d,"textSecondary",e)}),(0,Qr.jsx)(I,{label:"Color de Texto en Contraste",description:"Color de texto para usar sobre fondos de colores primarios/accent (tpicamente blanco)",value:l[d].textColorContrast||"#ffffff",onChange:e=>z(d,"textColorContrast",e)}),(0,Qr.jsx)(I,{label:"Color de Bordes",description:"Color de bordes de tarjetas (puede diferir del primario en modo oscuro)",value:l[d].borderColor||l[d].primary,onChange:e=>z(d,"borderColor",e)}),(0,Qr.jsx)(I,{label:"Color de Hover",description:"Color al pasar el cursor sobre botones y elementos interactivos",value:l[d].hoverColor||l[d].accent,onChange:e=>z(d,"hoverColor",e)})]})]}),(0,Qr.jsxs)("div",{className:"p-6 rounded-lg border-2",style:{backgroundColor:l[d].background,borderColor:l[d].borderColor||l[d].primary},children:[(0,Qr.jsxs)("h3",{className:"text-sm font-medium mb-4",style:{color:l[d].textPrimary||l[d].text},children:["Vista Previa - Modo ","light"===d?"Claro":"Oscuro"]}),(0,Qr.jsx)("p",{className:"text-xs mb-4",style:{color:l[d].textSecondary||`${l[d].text}70`},children:"Texto secundario ms tenue para labels y descripciones"}),(0,Qr.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,Qr.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium transition-colors cursor-pointer",style:{backgroundColor:l[d].primary},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l[d].hoverColor||l[d].accent},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=l[d].primary},children:"Botn Principal"}),(0,Qr.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium transition-colors cursor-pointer",style:{backgroundColor:l[d].secondary},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l[d].hoverColor||l[d].accent},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=l[d].secondary},children:"Botn Secundario"}),(0,Qr.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium transition-colors cursor-pointer",style:{backgroundColor:l[d].accent},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l[d].hoverColor||l[d].accent},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=l[d].accent},children:"Botn de Acento"}),(0,Qr.jsx)("div",{className:"px-4 py-2 rounded-lg border-2 font-medium",style:{backgroundColor:l[d].background,borderColor:l[d].borderColor||l[d].primary,color:l[d].text},children:"Texto de Ejemplo"})]})]}),(0,Qr.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(id,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h4",{className:"font-medium text-blue-900 mb-1",children:"Deteccin Automtica"}),(0,Qr.jsx)("p",{className:"text-sm text-blue-800",children:"El plugin detectar automticamente si el usuario prefiere el modo oscuro basndose en:"}),(0,Qr.jsxs)("ul",{className:"text-sm text-blue-800 mt-2 ml-4 list-disc space-y-1",children:[(0,Qr.jsx)("li",{children:"La configuracin de esquema de color del panel de WordPress"}),(0,Qr.jsx)("li",{children:"La preferencia del sistema operativo del usuario (prefers-color-scheme)"})]})]})]})})]})}),"notifications"===e&&(0,Qr.jsx)(Qr.Fragment,{children:(0,Qr.jsxs)("div",{className:"p-6",children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Notificaciones por Email"}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Configura las notificaciones por correo electrnico cuando los estudiantes enven comentarios o impugnaciones sobre preguntas."})]})}),(0,Qr.jsx)("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg border border-gray-200",children:(0,Qr.jsxs)("label",{className:"flex items-center justify-between cursor-pointer",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(nl,{className:"w-5 h-5 text-gray-700"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"font-medium text-gray-900",children:"Activar Notificaciones por Email"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:"Recibe un email cada vez que un estudiante enve un comentario o impugnacin"})]})]}),(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("input",{type:"checkbox",checked:v.enabled,onChange:e=>w({...v,enabled:e.target.checked}),className:"sr-only peer"}),(0,Qr.jsx)("div",{className:"w-11 h-6 bg-gray-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})}),v.enabled&&(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email del Administrador"}),(0,Qr.jsx)("input",{type:"email",value:v.admin_email,onChange:e=>w({...v,admin_email:e.target.value}),placeholder:j||"admin@ejemplo.com",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Qr.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:["Deja vaco para usar el email de administrador de WordPress: ",(0,Qr.jsx)("strong",{children:j})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Prefijo del Asunto"}),(0,Qr.jsx)("input",{type:"text",value:v.email_subject_prefix,onChange:e=>w({...v,email_subject_prefix:e.target.value}),placeholder:"[Quiz Extended]",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Qr.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Este texto aparecer al inicio del asunto de cada email"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Tipos de Notificacin"}),(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsxs)("label",{className:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Qr.jsx)("input",{type:"checkbox",checked:v.notify_on_feedback,onChange:e=>w({...v,notify_on_feedback:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(Yc,{className:"w-5 h-5 text-blue-500"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-900",children:"Comentarios / Dudas"}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:"Notificar cuando un estudiante enve un comentario o duda sobre una pregunta"})]})]})]}),(0,Qr.jsxs)("label",{className:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Qr.jsx)("input",{type:"checkbox",checked:v.notify_on_challenge,onChange:e=>w({...v,notify_on_challenge:e.target.checked}),className:"w-4 h-4 text-amber-600 rounded focus:ring-amber-500"}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(jn,{className:"w-5 h-5 text-amber-500"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-900",children:"Impugnaciones"}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:"Notificar cuando un estudiante impugne una pregunta"})]})]})]})]})]}),(0,Qr.jsx)("div",{children:(0,Qr.jsxs)("label",{className:"flex items-center gap-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50 transition-colors",children:[(0,Qr.jsx)("input",{type:"checkbox",checked:v.include_question_content,onChange:e=>w({...v,include_question_content:e.target.checked}),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-900",children:"Incluir contenido de la pregunta"}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:"Muestra el texto de la pregunta en el email para mayor contexto"})]})]})}),(0,Qr.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-gray-900",children:"Probar Configuracin"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-500",children:"Enva un email de prueba para verificar que todo funciona correctamente"})]}),(0,Qr.jsx)("button",{onClick:async()=>{_(!0);try{const e=await Wr.sendTestEmail();Pr.success(e.message||"Email de prueba enviado correctamente")}catch(e){console.error("Error sending test email:",e),Pr.error("Error al enviar el email de prueba. Verifica la configuracin de tu servidor.")}finally{_(!1)}},disabled:k,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:k?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(dn,{className:"w-4 h-4 animate-spin"}),"Enviando..."]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Sn,{className:"w-4 h-4"}),"Enviar Email de Prueba"]})})]})})]}),!v.enabled&&(0,Qr.jsx)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(nl,{className:"w-5 h-5 text-amber-600 mt-0.5"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-amber-900 mb-1",children:"Notificaciones Desactivadas"}),(0,Qr.jsx)("p",{className:"text-sm text-amber-800",children:"Activa las notificaciones para recibir emails cuando los estudiantes enven comentarios o impugnaciones. Esto te permitir responder ms rpidamente a sus dudas."})]})]})}),(0,Qr.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(On,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h4",{className:"font-medium text-blue-900 mb-1",children:"Sobre el Envo de Emails"}),(0,Qr.jsxs)("p",{className:"text-sm text-blue-800",children:["Los emails se envan usando la funcin nativa de WordPress ",(0,Qr.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:"wp_mail()"}),". Esto significa que es compatible con cualquier plugin SMTP que tengas instalado (como WP Mail SMTP, Post SMTP, etc.) para mejorar la entregabilidad."]}),(0,Qr.jsx)("p",{className:"text-sm text-blue-800 mt-2",children:"Si los emails no llegan, verifica la configuracin de tu servidor de correo o instala un plugin SMTP."})]})]})})]})}),"maintenance"===e&&(0,Qr.jsx)(Qr.Fragment,{children:(0,Qr.jsxs)("div",{className:"p-6",children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Mantenimiento de Base de Datos"}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Herramientas para optimizar y limpiar la base de datos del plugin."})]})}),(0,Qr.jsx)("div",{className:"p-6 bg-gray-50 rounded-lg border border-gray-200",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Qr.jsx)("div",{className:"p-3 bg-red-100 rounded-lg",children:(0,Qr.jsx)(ca,{className:"w-6 h-6 text-red-600"})}),(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Limpieza de Opciones Autoload"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Elimina transients expirados, opciones legadas y registros temporales que pueden consumir RAM del servidor. Esta herramienta limpia:"}),(0,Qr.jsxs)("ul",{className:"text-sm text-gray-600 mb-4 ml-4 list-disc space-y-1",children:[(0,Qr.jsx)("li",{children:"Transients de rate limiting expirados"}),(0,Qr.jsxs)("li",{children:["Opciones legadas ",(0,Qr.jsx)("code",{className:"bg-gray-200 px-1 rounded",children:"qem_map_*"})," (quiz, lesson, course)"]}),(0,Qr.jsx)("li",{children:"Logs de debug antiguos"}),(0,Qr.jsx)("li",{children:"Transients de seguridad expirados"})]}),(0,Qr.jsxs)("button",{onClick:async()=>{S(!0),O(!0),A(null);try{const e=await Wr.getAutoloadStatus();T(e.data)}catch(e){console.error("Error fetching autoload status:",e),Pr.error("Error al obtener estadsticas de la base de datos")}finally{O(!1)}},className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[(0,Qr.jsx)(rd,{className:"w-4 h-4"}),"Ejecutar Limpieza"]})]})]})}),(0,Qr.jsx)("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(jn,{className:"w-5 h-5 text-amber-600 mt-0.5"}),(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h4",{className:"font-medium text-amber-900 mb-1",children:"Importante"}),(0,Qr.jsx)("p",{className:"text-sm text-amber-800",children:"La limpieza es segura y solo elimina datos temporales o legados. No afecta a los cursos, lecciones, quizzes ni al progreso de los estudiantes."})]})]})})]})}),(0,Qr.jsx)("div",{className:"p-6 bg-gray-50 flex justify-end border-t border-gray-200",children:(0,Qr.jsxs)(ac,{onClick:async()=>{p(!0);try{if("general"===e)await Wr.updateScoreFormat(s),g!==(window.qe_data?.campus_logo||"")&&await Wr.updateCampusLogo(g),y!==(window.qe_data?.campus_logo_dark||"")&&await Wr.updateCampusLogoDark(y);else if("theme"===e)await Wr.updateTheme(l);else if("notifications"===e)return await Wr.updateEmailNotificationSettings(v),Pr.success("Configuracin de notificaciones guardada correctamente"),void p(!1);Pr.success("Configuracin guardada correctamente"),setTimeout(()=>{window.location.reload()},1e3)}catch(e){console.error("Error saving settings:",e),Pr.error("Error al guardar la configuracin"),p(!1)}},disabled:f,variant:"primary",className:"flex items-center gap-2 px-6 py-2 rounded-lg",children:[(0,Qr.jsx)(hl,{className:"w-4 h-4"}),f?"Guardando...":"Guardar Cambios"]})})]}),(0,Qr.jsx)("div",{className:"mt-6 qe-bg-primary-light qe-border-primary rounded-lg p-4",children:(0,Qr.jsxs)("p",{className:"text-sm qe-text-primary",children:[(0,Qr.jsx)("strong",{children:"Nota:"})," Al cambiar el formato de puntuacin, se aplicar globalmente a toda la plataforma para todos los usuarios. La pgina se recargar automticamente para aplicar los cambios."]})}),C&&(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:q,children:(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-auto",onClick:e=>e.stopPropagation(),children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(rd,{className:"w-6 h-6 text-red-600"}),(0,Qr.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Limpieza de Base de Datos"})]}),(0,Qr.jsx)("button",{onClick:q,className:"p-1 text-gray-500 hover:text-gray-700 transition-colors",children:(0,Qr.jsx)(En,{className:"w-5 h-5"})})]}),(0,Qr.jsxs)("div",{className:"p-6",children:[E&&!P&&(0,Qr.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,Qr.jsx)(dn,{className:"w-8 h-8 animate-spin text-blue-600"}),(0,Qr.jsx)("span",{className:"ml-3 text-gray-600",children:"Analizando base de datos..."})]}),M&&!P&&(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Estado Actual de la Base de Datos"}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qr.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qr.jsx)(ud,{className:"w-5 h-5 text-blue-600"}),(0,Qr.jsx)("span",{className:"font-medium text-gray-700",children:"Transients QE"})]}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.qe_transients||0}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:"registros temporales"})]}),(0,Qr.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qr.jsx)(ca,{className:"w-5 h-5 text-amber-600"}),(0,Qr.jsx)("span",{className:"font-medium text-gray-700",children:"Opciones Legadas"})]}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.qem_map_options||M.qem_map_quiz_options||0}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:"qem_map_*"})]}),(0,Qr.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qr.jsx)(rd,{className:"w-5 h-5 text-green-600"}),(0,Qr.jsx)("span",{className:"font-medium text-gray-700",children:"Autoload Total"})]}),(0,Qr.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[M.autoload_size_mb||0," MB"]}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:"cargado en cada request"})]}),(0,Qr.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qr.jsx)(jn,{className:"w-5 h-5 text-red-600"}),(0,Qr.jsx)("span",{className:"font-medium text-gray-700",children:"Rate Limits"})]}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:M.rate_limit_transients||0}),(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:"transients de seguridad"})]})]})]}),M.qe_transients>100||(M.qem_map_options||M.qem_map_quiz_options)>0?(0,Qr.jsx)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(jn,{className:"w-5 h-5 text-amber-600 mt-0.5"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-amber-900",children:"Se recomienda limpieza"}),(0,Qr.jsx)("p",{className:"text-sm text-amber-800",children:"Se detectaron registros que pueden estar consumiendo RAM innecesariamente."})]})]})}):(0,Qr.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(On,{className:"w-5 h-5 text-green-600 mt-0.5"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-green-900",children:"Base de datos optimizada"}),(0,Qr.jsx)("p",{className:"text-sm text-green-800",children:"No se detectaron problemas significativos. Puedes ejecutar la limpieza de todas formas."})]})]})}),(0,Qr.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,Qr.jsx)("button",{onClick:q,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,Qr.jsx)("button",{onClick:async()=>{O(!0);try{const e=await Wr.cleanupAutoloadOptions();A(e.data),Pr.success("Limpieza de base de datos completada")}catch(e){console.error("Error running cleanup:",e),Pr.error("Error al ejecutar la limpieza")}finally{O(!1)}},disabled:E,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:E?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(dn,{className:"w-4 h-4 animate-spin"}),"Limpiando..."]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(ca,{className:"w-4 h-4"}),"Ejecutar Limpieza"]})})]})]}),P&&(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(On,{className:"w-6 h-6 text-green-600"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-green-900",children:"Limpieza completada!"}),(0,Qr.jsxs)("p",{className:"text-sm text-green-800",children:["Se liberaron ",(0,Qr.jsxs)("strong",{children:[P.ram_freed_mb||0," MB"]})," de RAM"]})]})]})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Resultados de la Limpieza"}),(0,Qr.jsx)("div",{className:"overflow-hidden rounded-lg border border-gray-200",children:(0,Qr.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Qr.jsx)("thead",{className:"bg-gray-50",children:(0,Qr.jsxs)("tr",{children:[(0,Qr.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Mtrica"}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Antes"}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Despus"}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Eliminados"})]})}),(0,Qr.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,Qr.jsxs)("tr",{children:[(0,Qr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:"Transients QE"}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:P.before?.qe_transients||0}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:P.after?.qe_transients||0}),(0,Qr.jsxs)("td",{className:"px-4 py-3 text-sm text-center font-medium text-green-600",children:["-",(P.before?.qe_transients||0)-(P.after?.qe_transients||0)]})]}),(0,Qr.jsxs)("tr",{children:[(0,Qr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:"Opciones qem_map_*"}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:P.before?.qem_map_quiz||0}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:P.after?.qem_map_quiz||0}),(0,Qr.jsxs)("td",{className:"px-4 py-3 text-sm text-center font-medium text-green-600",children:["-",P.deleted?.qem_map_quiz||0]})]}),(0,Qr.jsxs)("tr",{children:[(0,Qr.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900",children:"Tamao Autoload"}),(0,Qr.jsxs)("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:[P.before?.autoload_size_mb||0," MB"]}),(0,Qr.jsxs)("td",{className:"px-4 py-3 text-sm text-center text-gray-600",children:[P.after?.autoload_size_mb||0," MB"]}),(0,Qr.jsxs)("td",{className:"px-4 py-3 text-sm text-center font-medium text-green-600",children:["-",P.ram_freed_mb||0," MB"]})]})]})]})})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Detalles de Eliminacin"}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Qr.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Rate Limit Transients:"}),(0,Qr.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:P.deleted?.rate_limit_transients||0})]}),(0,Qr.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Violations Transients:"}),(0,Qr.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:P.deleted?.violations_transients||0})]}),(0,Qr.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Login Transients:"}),(0,Qr.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:P.deleted?.login_transients||0})]}),(0,Qr.jsxs)("div",{className:"p-3 bg-gray-50 rounded-lg",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Expired Transients:"}),(0,Qr.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:P.deleted?.expired_transients||0})]})]})]}),(0,Qr.jsx)("div",{className:"flex justify-end",children:(0,Qr.jsx)("button",{onClick:q,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Cerrar"})})]})]})]})})]})},pd=()=>{const[e,t]=(0,a.useState)(Kr),[r,n]=(0,a.useState)("light"),[s,o]=(0,a.useState)(!0),[i,l]=(0,a.useState)(!1);(0,a.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=await Wr.getSettings();if(e.theme)if(e.theme.light&&e.theme.dark)t(e.theme);else{const r={light:{primary:e.theme.primary||Kr.light.primary,secondary:e.theme.secondary||Kr.light.secondary,accent:e.theme.accent||Kr.light.accent,background:e.theme.background||Kr.light.background,text:e.theme.text||Kr.light.text,textPrimary:e.theme.textPrimary||e.theme.text||Kr.light.textPrimary,textSecondary:e.theme.textSecondary||Kr.light.textSecondary,borderColor:e.theme.borderColor||e.theme.primary||Kr.light.borderColor,hoverColor:e.theme.hoverColor||e.theme.accent||Kr.light.hoverColor},dark:Kr.dark};t(r)}}catch(e){console.error("Error loading theme:",e),Pr.error("Error al cargar configuracin de tema")}finally{o(!1)}},d=(e,r,n)=>{t(t=>({...t,[e]:{...t[e],[r]:n}}))},u=({label:e,value:t,onChange:r,description:n})=>(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:e}),n&&(0,Qr.jsx)("p",{className:"text-xs text-gray-500",children:n}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("input",{type:"color",value:t,onChange:e=>r(e.target.value),className:"h-12 w-20 rounded border-2 border-gray-300 cursor-pointer"}),(0,Qr.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),pattern:"^#[0-9A-Fa-f]{6}$",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"#000000"}),(0,Qr.jsx)("div",{className:"h-12 w-32 rounded border-2 border-gray-300",style:{backgroundColor:t}})]})]});return s?(0,Qr.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Cargando configuracin..."})]})}):(0,Qr.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,Qr.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Qr.jsx)("div",{className:"flex items-center justify-between",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(ad,{className:"w-8 h-8 text-blue-600"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuracin de Tema"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Personaliza los colores para modo claro y oscuro. El plugin detectar automticamente la preferencia del usuario."})]})]})})}),(0,Qr.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(ad,{className:"w-6 h-6 text-blue-600"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"font-semibold text-gray-900",children:"Modo de Edicin"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-500",children:"Selecciona qu modo quieres configurar"})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 border border-gray-200",children:[(0,Qr.jsxs)("button",{onClick:()=>n("light"),className:"flex items-center gap-2 px-4 py-2 rounded-md transition-colors "+("light"===r?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,Qr.jsx)(id,{className:"w-4 h-4"}),"Claro"]}),(0,Qr.jsxs)("button",{onClick:()=>n("dark"),className:"flex items-center gap-2 px-4 py-2 rounded-md transition-colors "+("dark"===r?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,Qr.jsx)(ld,{className:"w-4 h-4"}),"Oscuro"]})]})]}),(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsx)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:"light"===r?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(id,{className:"w-5 h-5 text-yellow-500"}),"Colores del Modo Claro"]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(ld,{className:"w-5 h-5 text-indigo-500"}),"Colores del Modo Oscuro"]})}),(0,Qr.jsx)(u,{label:"Color Primario",description:"Usado en botones principales, enlaces y elementos destacados",value:e[r].primary,onChange:e=>d(r,"primary",e)}),(0,Qr.jsx)(u,{label:"Color Secundario",description:"Usado en elementos secundarios y acentos alternativos",value:e[r].secondary,onChange:e=>d(r,"secondary",e)}),(0,Qr.jsx)(u,{label:"Color de Acento",description:"Usado para alertas, notificaciones y elementos de atencin",value:e[r].accent,onChange:e=>d(r,"accent",e)}),(0,Qr.jsx)(u,{label:"Color de Fondo",description:"Color de fondo principal de las tarjetas y contenedores",value:e[r].background,onChange:e=>d(r,"background",e)}),(0,Qr.jsx)(u,{label:"Color de Texto Principal",description:"Color para textos principales y ttulos",value:e[r].textPrimary||e[r].text,onChange:e=>d(r,"textPrimary",e)}),(0,Qr.jsx)(u,{label:"Color de Texto Secundario",description:"Color para textos descriptivos y labels (ms tenue)",value:e[r].textSecondary||`${e[r].text}70`,onChange:e=>d(r,"textSecondary",e)}),(0,Qr.jsx)(u,{label:"Color de Bordes",description:"Color usado en los bordes de tarjetas y elementos (puede ser diferente al primario en modo oscuro)",value:e[r].borderColor||e[r].primary,onChange:e=>d(r,"borderColor",e)}),(0,Qr.jsx)(u,{label:"Color de Hover",description:"Color al pasar el cursor sobre botones y elementos interactivos",value:e[r].hoverColor||e[r].accent,onChange:e=>d(r,"hoverColor",e)})]}),(0,Qr.jsxs)("div",{className:"mt-8 p-6 rounded-lg border-2",style:{backgroundColor:e[r].background,borderColor:e[r].borderColor||e[r].primary},children:[(0,Qr.jsxs)("h3",{className:"text-lg font-semibold mb-4",style:{color:e[r].text},children:["Vista Previa - Modo ","light"===r?"Claro":"Oscuro"]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qr.jsx)("button",{style:{backgroundColor:e[r].primary},className:"px-4 py-2 text-white rounded font-medium transition-colors cursor-pointer",onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e[r].hoverColor||e[r].accent},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e[r].primary},children:"Botn Primario"}),(0,Qr.jsx)("button",{style:{backgroundColor:e[r].secondary},className:"px-4 py-2 text-white rounded font-medium transition-colors cursor-pointer",onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e[r].hoverColor||e[r].accent},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e[r].secondary},children:"Botn Secundario"}),(0,Qr.jsx)("button",{style:{backgroundColor:e[r].accent},className:"px-4 py-2 text-white rounded font-medium transition-colors cursor-pointer",onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e[r].hoverColor||e[r].accent},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e[r].accent},children:"Botn de Acento"}),(0,Qr.jsx)("div",{style:{backgroundColor:e[r].background,color:e[r].text,borderColor:e[r].borderColor||e[r].primary},className:"px-4 py-2 rounded border-2 text-center font-medium",children:"Texto de Ejemplo"})]})]}),(0,Qr.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-start gap-3",children:[(0,Qr.jsx)(id,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Qr.jsx)("strong",{children:"Deteccin Automtica:"})," El plugin detectar automticamente si el usuario prefiere el modo oscuro basndose en:"]}),(0,Qr.jsxs)("ul",{className:"text-sm text-blue-800 mt-2 ml-4 list-disc space-y-1",children:[(0,Qr.jsx)("li",{children:"La configuracin de esquema de color del panel de WordPress"}),(0,Qr.jsx)("li",{children:"La preferencia del sistema operativo (prefers-color-scheme)"})]})]})]})})]}),(0,Qr.jsxs)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between",children:[(0,Qr.jsxs)(ac,{onClick:()=>{confirm("Ests seguro de que quieres restaurar los colores por defecto?")&&t(Kr)},variant:"secondary",className:"flex items-center gap-2 px-4 py-2 rounded-lg",disabled:i,children:[(0,Qr.jsx)(pa,{className:"w-4 h-4"}),"Restaurar por Defecto"]}),(0,Qr.jsxs)(ac,{onClick:async()=>{l(!0);try{await Wr.updateTheme(e),Pr.success("Tema actualizado correctamente"),setTimeout(()=>window.location.reload(),1e3)}catch(e){console.error("Error saving theme:",e),Pr.error("Error al guardar el tema")}finally{l(!1)}},variant:"primary",className:"flex items-center gap-2 px-6 py-2 rounded-lg",disabled:i,children:[(0,Qr.jsx)(hl,{className:"w-4 h-4"}),i?"Guardando...":"Guardar Cambios"]})]})]})})},md=function(){return(0,Qr.jsx)(Xr,{children:(0,Qr.jsx)(Gt,{children:(0,Qr.jsxs)("div",{className:"qe-lms-admin-app h-screen flex flex-col",children:[(0,Qr.jsxs)(Et,{children:[(0,Qr.jsx)(Ct,{path:"/courses",element:(0,Qr.jsx)(mc,{})}),(0,Qr.jsx)(Ct,{path:"/lessons",element:(0,Qr.jsx)(gc,{})}),(0,Qr.jsx)(Ct,{path:"/quizzes",element:(0,Qr.jsx)(bc,{})}),(0,Qr.jsx)(Ct,{path:"/questions",element:(0,Qr.jsx)(Qc,{})}),(0,Qr.jsx)(Ct,{path:"/students",element:(0,Qr.jsx)(Lc,{})}),(0,Qr.jsx)(Ct,{path:"/messages",element:(0,Qr.jsx)(td,{})}),(0,Qr.jsx)(Ct,{path:"/migrations",element:(0,Qr.jsx)(sd,{})}),(0,Qr.jsx)(Ct,{path:"/settings",element:(0,Qr.jsx)(fd,{})}),(0,Qr.jsx)(Ct,{path:"/theme",element:(0,Qr.jsx)(pd,{})}),(0,Qr.jsx)(Ct,{path:"*",element:(0,Qr.jsx)(Ln,{})})]}),(0,Qr.jsx)($r,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})})},hd=(0,a.createContext)(),gd=()=>{const e=(0,a.useContext)(hd);if(!e)throw new Error("useScoreFormat must be used within ScoreFormatProvider");return e},xd=({children:e})=>{const[t,r]=(0,a.useState)("percentage"),[n,s]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{const e=await Wr.getScoreFormat();r(e)}catch(e){console.error("Error loading score format:",e);const t=localStorage.getItem("scoreFormat");t&&r(t)}finally{s(!1)}})()},[]),(0,a.useEffect)(()=>{n||localStorage.setItem("scoreFormat",t)},[t,n]);const o={format:t,setScoreFormat:e=>{"percentage"!==e&&"base10"!==e||r(e)},toggleFormat:()=>{r(e=>"percentage"===e?"base10":"percentage")},convertScore:e=>{const r=parseFloat(e);return isNaN(r)?0:"percentage"===t?10*r:r},formatScore:(e,r={})=>{const n=parseFloat(e);if(isNaN(n))return"0";if("percentage"===t){const e=10*n;return e%1==0?Math.round(e):e.toFixed(2)}return n%1==0?Math.round(n):n.toFixed(2)},toBase10:e=>{const r=parseFloat(e);return isNaN(r)?0:"percentage"===t?r/10:r},getFormatLabel:()=>"base10"===t?"Base 10 (0-10)":"Porcentaje (0-100%)",isBase10:"base10"===t,isPercentage:"percentage"===t,loading:n};return(0,Qr.jsx)(hd.Provider,{value:o,children:e})},yd=(0,a.createContext)(null),bd=({children:e,enablePolling:t=!0,pollingInterval:r=3e4})=>{const[n,s]=(0,a.useState)([]),[o,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(!1),[f,p]=(0,a.useState)({currentPage:1,totalPages:1,total:0,perPage:20,hasMore:!1}),m=(0,a.useRef)(!0),h=(0,a.useRef)(null),g=(0,a.useRef)(""),x=(0,a.useRef)(!0),y=(0,a.useRef)(!1);(0,a.useEffect)(()=>{const e=()=>{x.current=!document.hidden,!document.hidden&&t&&y.current&&b(!0)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[t]),(0,a.useEffect)(()=>()=>{m.current=!1,h.current&&clearTimeout(h.current)},[]);const b=(0,a.useCallback)(async(e=!1)=>{if(!m.current)return;const t=e?1:f.currentPage+1;if(e||f.hasMore)try{e&&(i(!0),c(null));const r=(0,Fr.getApiConfig)(),n=new URLSearchParams({page:t.toString(),per_page:"20",orderby:"created_at",order:"desc"}),a=`${r.endpoints.custom_api}/messages?${n}`,o=`${a}-${t}-${e}`;if(o===g.current&&!e)return;g.current=o;const l=await(0,gn.qb)(a);if(!m.current)return;const d=l.data?.data||[],u=l.headers["X-WP-Total"],f=l.headers["X-WP-TotalPages"],h={currentPage:t,totalPages:f?parseInt(f,10):1,total:u?parseInt(u,10):d.length,perPage:20,hasMore:t<(f?parseInt(f,10):1)};p(h),s(t=>e?d:[...t,...d]),y.current=!0}catch(e){console.error(" Error fetching messages:",e),m.current&&c(e.message||"Failed to load messages")}finally{m.current&&i(!1)}},[f]),v=(0,a.useCallback)(async(e,t)=>{if(m.current){s(r=>r.map(r=>r.id==e?{...r,status:t}:r)),u(!0);try{const r=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/${e}`,n=await(0,gn.qb)(r,{method:"PUT",body:JSON.stringify({status:t})});if(!m.current)return;const a=n.data;return s(t=>t.map(t=>t.id==e?{...t,...a}:t)),window.jQuery&&window.jQuery(document).trigger("qe-message-status-changed"),a}catch(e){throw console.error(" Error updating message:",e),b(!0),e}finally{m.current&&u(!1)}}},[b]),w=(0,a.useCallback)(async e=>{if(!m.current)return;const t=n;s(t=>t.filter(t=>t.id!=e)),p(e=>({...e,total:Math.max(0,e.total-1)})),u(!0);try{const t=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/${e}`;if(await(0,gn.qb)(t,{method:"DELETE"}),!m.current)return}catch(e){throw console.error(" Error deleting message:",e),s(t),p(e=>({...e,total:e.total+1})),e}finally{m.current&&u(!1)}},[n]);(0,a.useEffect)(()=>{if(!t)return void(h.current&&(clearTimeout(h.current),h.current=null));const e=()=>{x.current&&y.current&&b(!0),h.current=setTimeout(e,r)};return h.current=setTimeout(e,r),()=>{h.current&&(clearTimeout(h.current),h.current=null)}},[t,r,b]),(0,a.useEffect)(()=>{b(!0)},[]);const j=(0,a.useMemo)(()=>({totalMessages:f.total,unreadMessages:n.filter(e=>"unread"===e.status).length,feedbackMessages:n.filter(e=>"question_feedback"===e.type).length,challengeMessages:n.filter(e=>"question_challenge"===e.type).length}),[n,f.total]),N={messages:n,loading:o,error:l,pagination:f,computed:j,updating:d,fetchMessages:b,updateMessageStatus:v,deleteMessage:w};return(0,Qr.jsx)(yd.Provider,{value:N,children:e})},vd=cn("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),wd=cn("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),jd=cn("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),Nd=cn("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),kd=cn("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),_d=()=>{const{apiUrl:e}=(0,Fr.getApiConfig)();return`${e}/qe/v1`},Cd=({isMobileMenuOpen:e,setIsMobileMenuOpen:t,isInCourseRoute:r,courseId:n})=>{lt();const s=ut(),{t:o}=k(),{getColor:i,isDarkMode:l,toggleDarkMode:c}=Yr(),[d,u]=(0,a.useState)(!1),f=(0,a.useRef)(null),[p,m]=(0,a.useState)(0);(0,a.useEffect)(()=>{const e=e=>{f.current&&!f.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,a.useEffect)(()=>{const e=async()=>{const e=n?parseInt(n,10):null;if(e&&r)try{const t=await(async e=>{const t=`${_d()}/courses/${e}/notifications/unread-count`;try{return await(0,gn.qb)(t,{method:"GET"})}catch(e){throw console.error("Error fetching unread count:",e),e}})(e);m(t?.data?.unread_count||t?.unread_count||0)}catch(e){console.error("Error fetching unread notifications:",e),m(0)}};e();const t=()=>{e()};return window.addEventListener("notificationRead",t),window.addEventListener("notificationsMarkedAllRead",t),()=>{window.removeEventListener("notificationRead",t),window.removeEventListener("notificationsMarkedAllRead",t)}},[n,r]);const h=(0,a.useContext)(yd),g=h?.computed?.unreadMessages||0,x=(window.qe_data,window.qe_data,window.qe_data?.logout_url),y=window.qe_data?.home_url||"",b=window.qe_data?.campus_logo||"",v=window.qe_data?.campus_logo_dark||"",w=i("primary","#3b82f6"),j=(i("secondary","#8b5cf6"),i("accent","#f59e0b")),N=i("textPrimary","#f9fafb"),_=i("secondaryBackground","#ffffff"),C={text:l?N:w,accent:j,activeBg:w},S=l&&v?v:b,E=[{to:"/courses",text:o("sidebar.studyPlanner"),icon:kn,type:"internal"},{to:`${y}/suscripciones`,text:o("sidebar.subscriptions","Suscripciones"),icon:vd,type:"exit"},{to:`${y}/mi-cuenta/downloads/`,text:o("sidebar.books"),icon:ul,type:"external"},{to:y,text:o("sidebar.exitCampus"),icon:wd,type:"exit"}],O=n?[{to:`/courses/${n}/dashboard`,text:o("courses.dashboard"),icon:kn,type:"internal"},{to:`/courses/${n}/notifications`,text:o("header.notifications"),icon:wn,type:"internal",badge:p},{to:`/courses/${n}/messages`,text:o("header.messages"),icon:Yc,type:"internal",badge:g},{to:`/courses/${n}/statistics`,text:o("courses.statistics"),icon:Ac,type:"internal"}]:[],M=r?O:E,T=(e,t,r)=>{t?(e.currentTarget.style.color=C.accent,r||(e.currentTarget.style.borderBottom=`2px solid ${C.accent}`)):(e.currentTarget.style.color=r?C.accent:C.text,r||(e.currentTarget.style.borderBottom="2px solid transparent"))};return(0,Qr.jsx)("header",{id:"qe-topbar",style:{backgroundColor:_,borderBottom:`1px solid ${C.text}33`,position:"relative",zIndex:9999},className:"w-full",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-4 sm:px-10 py-4 w-full max-w-full",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[r&&(0,Qr.jsx)("button",{onClick:()=>t(!e),className:"lg:hidden flex items-center justify-center p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:C.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${C.hoverBg}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},"aria-label":"Toggle menu",children:(0,Qr.jsx)(jd,{className:"w-6 h-6"})}),(0,Qr.jsx)("a",{href:y||"/",className:"flex items-center transition-opacity hover:opacity-80",title:"Ir a la pgina principal",children:S?(0,Qr.jsx)("img",{src:S,alt:"Campus",className:"h-10 max-w-[200px] object-contain"}):(0,Qr.jsx)("h1",{className:"text-2xl font-bold m-0",style:{color:C.text},children:"Campus"})})]}),(0,Qr.jsxs)("nav",{className:"hidden md:flex items-center gap-2 absolute left-1/2 transform -translate-x-1/2",children:[r&&(0,Qr.jsxs)("div",{className:"relative",ref:f,children:[(0,Qr.jsxs)("button",{onClick:()=>u(!d),className:"flex items-center justify-center gap-1 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:d?`${C.hoverBg}20`:"transparent",color:C.text},onMouseEnter:e=>{d||(e.currentTarget.style.backgroundColor=`${C.hoverBg}20`)},onMouseLeave:e=>{d||(e.currentTarget.style.backgroundColor="transparent")},title:o("sidebar.quickMenu"),children:[(0,Qr.jsx)(Nd,{className:"w-5 h-5"}),(0,Qr.jsx)(Vi,{className:"w-4 h-4 transition-transform duration-200 "+(d?"rotate-180":"")})]}),d&&(0,Qr.jsxs)("div",{className:"absolute left-0 top-full mt-2 w-48 rounded-lg shadow-lg border overflow-hidden z-[9999]",style:{backgroundColor:_,borderColor:`${C.text}20`},children:[(0,Qr.jsxs)("button",{onClick:()=>{s("/courses"),u(!1)},className:"w-full flex items-center gap-3 px-4 py-3 transition-all duration-200 text-left",style:{color:C.text,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.color=C.accent},onMouseLeave:e=>{e.currentTarget.style.color=C.text},children:[(0,Qr.jsx)(kn,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{className:"font-medium",children:o("sidebar.studyPlanner")})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:`${C.text}15`}}),(0,Qr.jsxs)("a",{href:`${y}/mi-cuenta/downloads/`,onClick:()=>u(!1),className:"w-full flex items-center gap-3 px-4 py-3 transition-all duration-200",style:{color:C.text,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.color=C.accent},onMouseLeave:e=>{e.currentTarget.style.color=C.text},children:[(0,Qr.jsx)(ul,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{className:"font-medium",children:o("sidebar.books")})]})]})]}),M.map(e=>"exit"===e.type?(0,Qr.jsxs)("a",{href:e.to,className:"flex items-center gap-2 px-4 py-2 transition-all duration-200 font-medium outline-none focus:outline-none",style:{backgroundColor:"transparent",color:C.text,borderBottom:"2px solid transparent",paddingBottom:"6px"},onMouseEnter:e=>T(e,!0,!1),onMouseLeave:e=>T(e,!1,!1),children:[(0,Qr.jsx)(e.icon,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{children:e.text})]},e.to):"external"===e.type?(0,Qr.jsxs)("a",{href:e.to,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 transition-all duration-200 font-medium outline-none focus:outline-none",style:{backgroundColor:"transparent",color:C.text,borderBottom:"2px solid transparent",paddingBottom:"6px"},onMouseEnter:e=>T(e,!0,!1),onMouseLeave:e=>T(e,!1,!1),children:[(0,Qr.jsx)(e.icon,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{children:e.text})]},e.to):(0,Qr.jsx)(Jt,{to:e.to,end:!0,className:"flex items-center gap-2 px-4 py-2 transition-all duration-200 font-medium outline-none focus:outline-none",style:({isActive:e})=>(e=>({backgroundColor:"transparent",color:e?C.accent:C.text,borderBottom:e?`2px solid ${C.accent}`:"2px solid transparent",borderRadius:"0",paddingBottom:"6px"}))(e),onMouseEnter:e=>{const t="page"===e.currentTarget.getAttribute("aria-current");T(e,!0,t)},onMouseLeave:e=>{const t="page"===e.currentTarget.getAttribute("aria-current");T(e,!1,t)},children:({isActive:t})=>(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)(e.icon,{className:"w-5 h-5"}),e.badge>0&&(0,Qr.jsx)("span",{className:"absolute -top-2 -right-2 min-w-[18px] h-[18px] flex items-center justify-center text-[10px] font-bold rounded-full",style:{backgroundColor:j,color:"#ffffff"},children:e.badge>99?"99+":e.badge})]}),(0,Qr.jsx)("span",{children:e.text})]})},e.to))]}),(0,Qr.jsxs)("div",{className:"hidden md:flex items-center gap-3 relative z-10",children:[(0,Qr.jsx)("button",{onClick:c,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:{backgroundColor:"transparent",color:C.text},onMouseEnter:e=>{e.currentTarget.style.color=C.accent},onMouseLeave:e=>{e.currentTarget.style.color=C.text},title:o(l?"sidebar.lightMode":"sidebar.darkMode"),children:l?(0,Qr.jsx)(id,{className:"w-5 h-5"}):(0,Qr.jsx)(ld,{className:"w-5 h-5"})}),(0,Qr.jsx)("a",{href:`${y}/mi-cuenta/edit-account/`,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:{backgroundColor:"transparent",color:C.text},onMouseEnter:e=>{e.currentTarget.style.color=C.accent},onMouseLeave:e=>{e.currentTarget.style.color=C.text},title:o("sidebar.myAccount"),children:(0,Qr.jsx)(Cn,{className:"w-6 h-6"})}),x&&(0,Qr.jsx)("a",{href:x,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:{backgroundColor:l?j:C.activeBg,color:l?_:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.filter=l?"brightness(1.15)":"none",e.currentTarget.style.backgroundColor=j},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=l?j:C.activeBg},title:o("sidebar.logout"),children:(0,Qr.jsx)(kd,{className:"w-5 h-5"})})]})]})})},Sd=()=>{const e=lt(),{courseId:t}=pt(),r=(0,a.useRef)(null),[n,s]=(0,a.useState)(""),[o,i]=(0,a.useState)(!1),{getColor:l,isDarkMode:c}=Yr(),d=(e.pathname.startsWith("/courses/"),e.state,(e,t)=>{const r=e.replace("#",""),n=parseInt(r.substr(0,2),16),s=parseInt(r.substr(2,2),16),a=parseInt(r.substr(4,2),16),[o,i,l]=((e,t,r)=>{e/=255,t/=255,r/=255;const n=Math.max(e,t,r),s=Math.min(e,t,r);let a,o,i=(n+s)/2;if(n===s)a=o=0;else{const l=n-s;switch(o=i>.5?l/(2-n-s):l/(n+s),n){case e:a=((t-r)/l+(t<r?6:0))/6;break;case t:a=((r-e)/l+2)/6;break;case r:a=((e-t)/l+4)/6}}return[360*a,100*o,100*i]})(n,s,a),c=Math.max(0,Math.min(100,l+l*t)),[d,u,f]=((e,t,r)=>{let n,s,a;if(e/=360,r/=100,0==(t/=100))n=s=a=r;else{const o=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),i=r<.5?r*(1+t):r+t-r*t,l=2*r-i;n=o(l,i,e+1/3),s=o(l,i,e),a=o(l,i,e-1/3)}return[Math.round(255*n),Math.round(255*s),Math.round(255*a)]})(o,i,c);return`#${d.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${f.toString(16).padStart(2,"0")}`});(0,a.useEffect)(()=>{const e=l("secondaryBackground","#f3f4f6");let t=e;if(e&&e.startsWith("#")){const r=(e=>{const t=e.replace("#","");return(.299*parseInt(t.substr(0,2),16)+.587*parseInt(t.substr(2,2),16)+.114*parseInt(t.substr(4,2),16))/255>.5})(e);t=d(e,r?-.05:.05),s(t)}else s(e);const r=document.body.style.backgroundColor,n=document.documentElement.style.backgroundColor,a=t||e;return document.body.style.backgroundColor=a,document.documentElement.style.backgroundColor=a,()=>{document.body.style.backgroundColor=r,document.documentElement.style.backgroundColor=n}},[l,c,e]),(0,a.useLayoutEffect)(()=>{const e=()=>{if(!r.current)return;const e=document.querySelectorAll("header, #masthead, .elementor-location-header");let t=null;for(let r of e)if(r.offsetHeight>0){t=r;break}let n=!1,s=0;if(t){s=t.offsetHeight;const e=window.getComputedStyle(t);n="fixed"===e.position||"sticky"===e.position}r.current.style.position="relative",r.current.style.marginTop=n?`${s}px`:"0px";const a=r.current.offsetTop,o=window.innerHeight-a;r.current.style.height=`${Math.max(0,o)}px`,document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"};e(),window.addEventListener("resize",e),window.addEventListener("scroll",e);const t=new ResizeObserver(e);document.body&&t.observe(document.body);const n=document.querySelector("header, #masthead, .elementor-location-header");return n&&t.observe(n),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e),t.disconnect(),document.body.style.overflow="",document.documentElement.style.overflow=""}},[]),e.pathname;const u=e.pathname.match(/\/courses\/(\d+)/)?.[1]||null,f=e.pathname.startsWith("/courses/")&&u;return(0,Qr.jsxs)("div",{ref:r,className:"flex flex-col w-full",style:{backgroundColor:n||"var(--qe-secondary-background)"},children:[(0,Qr.jsx)(Cd,{isMobileMenuOpen:o,setIsMobileMenuOpen:i,isInCourseRoute:f,courseId:u}),(0,Qr.jsx)("div",{className:"flex-1 flex flex-col w-full overflow-hidden relative z-[1]",children:(0,Qr.jsx)("main",{className:"flex-1 w-full overflow-x-hidden overflow-y-auto",children:(0,Qr.jsx)(_t,{context:{isMobileMenuOpen:o,setIsMobileMenuOpen:i}})})})]})},Ed=cn("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),Od=()=>{const{t:e}=k(),{getCurrentColors:t}=Yr(),r=(ut(),t()),[n,s]=(0,a.useState)({username:"",password:"",remember:!1}),[o,i]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(""),f=window.qe_data?.campus_logo||"",p=window.qe_data?.home_url||"/",m=e=>{const{name:t,value:r,type:n,checked:a}=e.target;s(e=>({...e,[t]:"checkbox"===n?a:r}))};return(0,Qr.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{background:`linear-gradient(135deg, ${r.primary}15 0%, ${r.primary}05 100%)`},children:(0,Qr.jsxs)("div",{className:"w-full max-w-md rounded-2xl shadow-2xl p-12",style:{backgroundColor:r.background},children:[(0,Qr.jsx)("div",{className:"text-center mb-8",children:f?(0,Qr.jsx)("img",{src:f,alt:"Campus",className:"h-16 mx-auto object-contain mb-4"}):(0,Qr.jsx)("h1",{className:"text-4xl font-bold mb-2",style:{color:r.primary},children:"Campus"})}),(0,Qr.jsxs)("div",{className:"text-center mb-8",children:[(0,Qr.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:{color:r.primary},children:e("login.welcomeBack")||"Bienvenido de vuelta"}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:`${r.primary}80`},children:e("login.signInToContinue")||"Inicia sesin para continuar"})]}),d&&(0,Qr.jsx)("div",{className:"mb-6 p-4 rounded-lg text-sm",style:{backgroundColor:"#fee",border:"1px solid #fcc",color:"#c00"},children:d}),(0,Qr.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),u(""),c(!0);try{const t=await fetch(`${window.qe_data.home_url}/wp-login.php`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include",body:new URLSearchParams({log:n.username,pwd:n.password,rememberme:n.remember?"forever":"","wp-submit":"Log In",redirect_to:window.location.href,testcookie:"1"})});t.ok||t.redirected?window.location.reload():u(e("login.invalidCredentials")||"Usuario o contrasea incorrectos")}catch(t){console.error("Login error:",t),u(e("login.error")||"Error al iniciar sesin. Por favor, intenta de nuevo.")}finally{c(!1)}},className:"space-y-5",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium mb-2",style:{color:r.primary},children:e("login.username")||"Usuario o correo electrnico"}),(0,Qr.jsx)("input",{type:"text",id:"username",name:"username",value:n.username,onChange:m,required:!0,className:"w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none",style:{borderColor:`${r.primary}30`,backgroundColor:r.secondaryBackground,color:r.primary},onFocus:e=>{e.target.style.borderColor=r.primary,e.target.style.boxShadow=`0 0 0 3px ${r.primary}20`},onBlur:e=>{e.target.style.borderColor=`${r.primary}30`,e.target.style.boxShadow="none"},placeholder:e("login.usernamePlaceholder")||"tu@email.com"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium mb-2",style:{color:r.primary},children:e("login.password")||"Contrasea"}),(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("input",{type:o?"text":"password",id:"password",name:"password",value:n.password,onChange:m,required:!0,className:"w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 focus:outline-none pr-12",style:{borderColor:`${r.primary}30`,backgroundColor:r.secondaryBackground,color:r.primary},onFocus:e=>{e.target.style.borderColor=r.primary,e.target.style.boxShadow=`0 0 0 3px ${r.primary}20`},onBlur:e=>{e.target.style.borderColor=`${r.primary}30`,e.target.style.boxShadow="none"},placeholder:""}),(0,Qr.jsx)("button",{type:"button",onClick:()=>i(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 p-1 rounded transition-colors",style:{color:`${r.primary}60`},onMouseEnter:e=>e.currentTarget.style.color=r.primary,onMouseLeave:e=>e.currentTarget.style.color=`${r.primary}60`,children:o?(0,Qr.jsx)(Sc,{size:20}):(0,Qr.jsx)(Nc,{size:20})})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center",children:[(0,Qr.jsx)("input",{type:"checkbox",id:"remember",name:"remember",checked:n.remember,onChange:m,className:"w-4 h-4 rounded mr-2",style:{accentColor:r.primary}}),(0,Qr.jsx)("label",{htmlFor:"remember",className:"text-sm cursor-pointer",style:{color:`${r.primary}80`},children:e("login.rememberMe")||"Recordarme"})]}),(0,Qr.jsx)("button",{type:"submit",disabled:l,className:"w-full py-3 px-4 rounded-lg font-semibold transition-all duration-200 flex items-center justify-center gap-2",style:{backgroundColor:r.primary,color:"#ffffff",opacity:l?.7:1,cursor:l?"not-allowed":"pointer"},onMouseEnter:e=>{l||(e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=`0 8px 20px ${r.primary}40`)},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},children:l?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),(0,Qr.jsx)("span",{children:e("login.signingIn")||"Iniciando sesin..."})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Ed,{size:20}),(0,Qr.jsx)("span",{children:e("login.signIn")||"Iniciar Sesin"})]})})]}),(0,Qr.jsx)("div",{className:"mt-6 text-center",children:(0,Qr.jsx)("a",{href:`${p}/wp-login.php?action=lostpassword`,className:"text-sm font-medium transition-opacity",style:{color:r.primary},onMouseEnter:e=>e.currentTarget.style.opacity="0.8",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:e("login.forgotPassword")||"Olvidaste tu contrasea?"})})]})})},Md=({userId:e,courseId:t,perPage:r=10,autoFetch:n=!0,filters:s={}}={})=>{const[o,i]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[f,p]=(0,a.useState)({currentPage:1,totalPages:1,total:0,hasMore:!1}),m=(0,a.useCallback)(async(n=1,a={})=>{c(!0),u(null);try{const o=`${(0,Fr.getApiConfig)().apiUrl}/quiz-extended/v1/my-quiz-attempts`,l=new URLSearchParams({page:n.toString(),per_page:r.toString()});e&&l.append("user_id",e),t&&l.append("course_id",t.toString());const c={...s,...a};c.search&&l.append("search",c.search),c.lesson_id&&l.append("lesson_id",c.lesson_id),c.date_from&&l.append("date_from",c.date_from),c.date_to&&l.append("date_to",c.date_to);const d=`${o}?${l}`,u=await(0,gn.qb)(d),f=u.data.map(e=>({...e,quizTitle:e.quizTitle||"Cuestionario Desconocido",courseTitle:e.courseTitle||"Curso Desconocido",lessonTitle:e.lessonTitle||"Sin leccin"}));i(f);const m={currentPage:n,totalPages:parseInt(u.headers["X-WP-TotalPages"]||"1",10),total:parseInt(u.headers["X-WP-Total"]||"0",10)};m.hasMore=m.currentPage<m.totalPages,p(m)}catch(e){console.error("Error fetching quiz attempts:",e),u("No se pudieron cargar los resultados de los cuestionarios.")}finally{c(!1)}},[e,t,r,s.search,s.lesson_id,s.date_from,s.date_to]),h=(0,a.useCallback)(()=>{f.hasMore&&!l&&m(f.currentPage+1)},[f,l,m]);return(0,a.useEffect)(()=>{n&&m(1)},[n]),{attempts:o,loading:l,error:d,pagination:f,fetchAttempts:m,loadMore:h}},Td=async e=>{try{const t=`${(0,Fr.getApiConfig)().endpoints.custom_api}/rankings/quiz/${e}`;console.log(` Fetching ranking for quiz ID: ${e}`);const r=await(0,gn.qb)(t);return console.log(" Quiz ranking fetched:",r.data),r.data.data}catch(t){throw console.error(` Error fetching quiz ranking for quiz ID ${e}:`,t),t}},Pd=e=>{const[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)(!0),[o,i]=(0,a.useState)(null),l=(0,a.useCallback)(async()=>{if(e){s(!0),i(null);try{const t=await Td(e);r(t)}catch(e){i("Could not load quiz ranking."),console.error("Error fetching quiz ranking:",e)}finally{s(!1)}}else s(!1)},[e]);return(0,a.useEffect)(()=>{l()},[l]),{ranking:t,loading:n,error:o,refetch:l}},Ad=(e=[])=>{const[t,r]=(0,a.useState)({}),[n,s]=(0,a.useState)(!0),[o,i]=(0,a.useState)(null),l=(0,a.useCallback)(async()=>{if(!e||0===e.length)return s(!1),void r({});s(!0),i(null);try{const t=e.map(e=>Td(e).then(t=>({quizId:e,data:t})).catch(t=>(console.error(`Error fetching ranking for quiz ${e}:`,t),{quizId:e,data:null}))),n=(await Promise.all(t)).reduce((e,{quizId:t,data:r})=>(e[t]=r,e),{});r(n)}catch(e){i("Could not load quiz rankings."),console.error("Error fetching quiz rankings:",e)}finally{s(!1)}},[e.join(",")]);return(0,a.useEffect)(()=>{l()},[l]),{rankings:t,loading:n,error:o,refetch:l}},qd=cn("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),zd=({quizId:e=null,maxResults:t=null,showCourseColumn:r=!0,limitedView:n=!1})=>{const{attempts:s,loading:a,error:o}=Md(),i=ut(),{formatScore:l}=gd();let c=e?s.filter(t=>parseInt(t.quiz_id)===parseInt(e)):s;n?c=c.slice(0,5):t&&(c=c.slice(0,t));const d=[...new Set(c.map(e=>e.quiz_id))],{ranking:u,loading:f}=Pd(e),{rankings:p,loading:m}=Ad(e?[]:d),h=(t,r,n)=>{const s=e?u:p[t];if(!s)return"-";const a=s.statistics;if(!a)return"-";const o=n?a.avg_score_with_risk:a.avg_score_without_risk;if(null==o)return"-";const i=r-o;return i>0?`+${i.toFixed(1)}`:i.toFixed(1)};return o?(0,Qr.jsx)("div",{className:"p-4 text-red-600 bg-red-50 rounded-md",children:o}):0===c.length?(0,Qr.jsxs)("div",{className:"p-8 text-center bg-gray-50 rounded-lg",children:[(0,Qr.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:e?"No hay intentos para este cuestionario":"No has completado ningn cuestionario todava"}),(0,Qr.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:e?"":"Sigue aprendiendo y tus resultados aparecern aqu!"})]}):(0,Qr.jsxs)("div",{className:"rounded-lg shadow-sm border qe-border-primary pt-4",style:{backgroundColor:"var(--qe-bg-card)"},children:[!e&&(0,Qr.jsx)("div",{className:"px-4 pt-4 pb-3 border-b qe-border-primary mx-4 mb-4",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-2 qe-bg-primary-light rounded-lg flex items-center justify-center",children:(0,Qr.jsx)(rl,{className:"w-5 h-5 qe-text-primary"})}),(0,Qr.jsx)("h2",{className:"text-lg font-bold qe-text-primary flex items-center",children:"Mis Cuestionarios"})]})}),(0,Qr.jsx)("div",{className:"overflow-x-auto mx-4 mb-4",children:(0,Qr.jsxs)("table",{className:"min-w-full",children:[(0,Qr.jsx)("thead",{children:(0,Qr.jsxs)("tr",{className:"qe-bg-primary-light border-b-2 qe-border-primary",children:[(0,Qr.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold qe-text-primary uppercase tracking-wider align-middle",children:(0,Qr.jsxs)("div",{className:"flex items-center",children:[(0,Qr.jsx)(tl,{className:"w-4 h-4 mr-2"}),"Fecha"]})}),r&&(0,Qr.jsx)(Qr.Fragment,{children:(0,Qr.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold qe-text-primary uppercase tracking-wider align-middle",children:(0,Qr.jsxs)("div",{className:"flex items-center",children:[(0,Qr.jsx)(kn,{className:"w-4 h-4 mr-2"}),"Curso / Cuestionario"]})})}),(0,Qr.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold qe-text-primary uppercase tracking-wider align-middle bg-gradient-to-br from-blue-50 to-blue-100/50",children:(0,Qr.jsx)("div",{className:"flex items-center justify-center",children:(0,Qr.jsx)("div",{className:"qe-bg-card px-3 py-1 rounded-full",children:"Sin Riesgo"})})}),(0,Qr.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold qe-text-primary uppercase tracking-wider align-middle bg-yellow-50",children:(0,Qr.jsx)("div",{className:"flex items-center justify-center",children:(0,Qr.jsx)("div",{className:"qe-bg-card px-3 py-1 rounded-full",children:"Con Riesgo"})})}),(0,Qr.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold qe-text-primary uppercase tracking-wider align-middle",children:"Estado"}),(0,Qr.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold qe-text-primary uppercase tracking-wider align-middle",children:"Accin"})]})}),(0,Qr.jsx)("tbody",{className:"divide-y qe-border-primary",children:c.map((e,t)=>{if(!e||!e.attempt_id)return null;const n=h(e.quiz_id,e.score,!1),s=h(e.quiz_id,e.score_with_risk,!0);return(0,Qr.jsxs)("tr",{className:"hover:qe-bg-primary-light transition-all duration-200",children:[(0,Qr.jsx)("td",{className:"px-6 py-5 whitespace-nowrap align-middle",children:(0,Qr.jsxs)("div",{className:"flex items-center",children:[(0,Qr.jsx)("div",{className:"qe-bg-primary-light p-2 rounded-lg mr-3",children:(0,Qr.jsx)(tl,{className:"w-4 h-4 qe-text-primary"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"text-sm font-semibold qe-text-primary",children:new Date(e.end_time).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),(0,Qr.jsx)("div",{className:"text-xs qe-text-secondary",children:new Date(e.end_time).toLocaleDateString("es-ES",{year:"numeric"})})]})]})}),r&&(0,Qr.jsx)("td",{className:"px-6 py-5 align-middle",children:(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center text-xs qe-text-secondary",children:[(0,Qr.jsx)(kn,{className:"w-3 h-3 mr-1.5 qe-text-primary"}),e.courseTitle||"Sin curso"]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("div",{className:"text-sm font-medium qe-text-primary max-w-xs truncate",children:e.quizTitle||"Cuestionario sin ttulo"}),(0,Qr.jsx)("button",{onClick:t=>{t.stopPropagation(),i(`/courses/${e.course_id}`,{state:{selectedQuizId:e.quiz_id,scrollToQuiz:!0}})},className:"text-white rounded p-1 transition-colors",style:{backgroundColor:"var(--qe-primary)"},title:"Ir al cuestionario",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:(0,Qr.jsx)(ed,{className:"w-4 h-4"})})]})]})}),(0,Qr.jsx)("td",{className:"px-6 py-5 text-center align-middle bg-gradient-to-br from-blue-50 to-blue-100/50",children:(0,Qr.jsxs)("div",{className:"inline-flex flex-col items-center space-y-2 py-2",children:[(0,Qr.jsx)("div",{className:"text-2xl font-bold "+(e.passed?"text-green-600":"text-red-600"),children:l(e.score)}),"-"!==n&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-white/80 shadow-sm",children:[parseFloat(n)>0?(0,Qr.jsx)(kc,{className:"w-3 h-3 text-green-600"}):parseFloat(n)<0?(0,Qr.jsx)(qd,{className:"w-3 h-3 text-red-600"}):null,(0,Qr.jsx)("span",{className:"text-xs font-semibold "+(parseFloat(n)>0?"text-green-600":parseFloat(n)<0?"text-red-600":"text-gray-600"),children:n})]})]})}),(0,Qr.jsx)("td",{className:"px-6 py-5 text-center align-middle bg-yellow-50",children:(0,Qr.jsxs)("div",{className:"inline-flex flex-col items-center space-y-2 py-2",children:[(0,Qr.jsx)("div",{className:"text-2xl font-bold "+(e.passed?"text-green-600":"text-red-600"),children:l(e.score_with_risk)}),"-"!==s&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full qe-bg-card shadow-sm",children:[parseFloat(s)>0?(0,Qr.jsx)(kc,{className:"w-3 h-3 text-green-600"}):parseFloat(s)<0?(0,Qr.jsx)(qd,{className:"w-3 h-3 text-red-600"}):null,(0,Qr.jsx)("span",{className:"text-xs font-semibold "+(parseFloat(s)>0?"text-green-600":parseFloat(s)<0?"text-red-600":"qe-text-secondary"),children:s})]})]})}),(0,Qr.jsx)("td",{className:"px-6 py-5 text-center align-middle",children:e.passed?(0,Qr.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-50 border border-green-200",children:[(0,Qr.jsx)(On,{className:"w-4 h-4 text-green-600"}),(0,Qr.jsx)("span",{className:"text-sm font-bold text-green-600",children:"Aprobado"})]}):(0,Qr.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-50 border border-red-200",children:[(0,Qr.jsx)(Wi,{className:"w-4 h-4 text-red-600"}),(0,Qr.jsx)("span",{className:"text-sm font-bold text-red-600",children:"No Aprobado"})]})}),(0,Qr.jsx)("td",{className:"px-6 py-5 text-center align-middle",children:(0,Qr.jsxs)("button",{onClick:()=>i(`/dashboard/attempts/${e.attempt_id}`),className:"inline-flex items-center gap-2 px-4 py-2 text-white text-sm font-medium rounded-lg transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5",style:{backgroundColor:"var(--qe-primary)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:[(0,Qr.jsx)(Nc,{className:"w-4 h-4"}),"Ver Detalles"]})})]},e.attempt_id)})})]})})]})},Dd=()=>{const{getColor:e}=Yr(),[t,r]=(0,a.useState)(0),[n,s]=(0,a.useState)(""),[o,i]=(0,a.useState)(!1),{messages:l,loading:c,error:d,unreadCount:u,fetchMessages:f,markAsRead:p,deleteMessage:m}=((e={})=>{const{filter:t="all",autoFetch:r=!0,enablePolling:n=!0,pollingInterval:s=6e4}=e,[o,i]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[f,p]=(0,a.useState)(0),m=(0,a.useRef)(!0),h=(0,a.useRef)(null),g=(0,a.useRef)(Date.now());(0,a.useEffect)(()=>()=>{m.current=!1,h.current&&clearTimeout(h.current)},[]);const x=(0,a.useCallback)(async(e=!0)=>{if(m.current){e&&c(!0),u(null);try{const e=(0,Fr.getApiConfig)(),r=new URLSearchParams({per_page:"50",orderby:"created_at",order:"desc"});"unread"===t?r.append("status","unread"):"read"===t&&r.append("status","read");const n=`${e.endpoints.custom_api}/messages/inbox?${r}`;console.log(" Fetching user inbox:",n);const s=await(0,gn.qb)(n);if(!m.current)return;const a=s.data?.data||[];i(a);const o=a.filter(e=>"unread"===e.status).length;p(o),g.current=Date.now(),console.log(` Loaded ${a.length} messages (${o} unread)`)}catch(e){console.error(" Error fetching inbox:",e),m.current&&u(e.message||"Error al cargar los mensajes")}finally{m.current&&e&&c(!1)}}},[t]),y=(0,a.useCallback)(async e=>{if(m.current)try{const t=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/${e}/read`;if(console.log(` Marking message ${e} as read`),await(0,gn.qb)(t,{method:"PUT"}),!m.current)return;i(t=>t.map(t=>t.id===e?{...t,status:"read"}:t)),p(e=>Math.max(0,e-1)),console.log(" Message marked as read")}catch(e){throw console.error(" Error marking message as read:",e),e}},[]),b=(0,a.useCallback)(async()=>{const e=o.filter(e=>"unread"===e.status);for(const t of e)try{await y(t.id)}catch(e){console.error(`Error marking message ${t.id} as read:`,e)}},[o,y]),v=(0,a.useCallback)(async e=>{if(m.current)try{const t=`${(0,Fr.getApiConfig)().endpoints.custom_api}/messages/${e}`;if(console.log(` Deleting message ${e}`),await(0,gn.qb)(t,{method:"DELETE"}),!m.current)return;i(t=>t.filter(t=>t.id!==e));const r=o.find(t=>t.id===e);r&&"unread"===r.status&&p(e=>Math.max(0,e-1)),console.log(" Message deleted")}catch(e){throw console.error(" Error deleting message:",e),e}},[o]),w=(0,a.useCallback)(()=>{if(!n||h.current)return;console.log(` Starting inbox polling every ${s/1e3}s`);const e=()=>{document.hidden||x(!1),h.current=setTimeout(e,s)};h.current=setTimeout(e,s)},[n,s,x]),j=(0,a.useCallback)(()=>{h.current&&(console.log(" Stopping inbox polling"),clearTimeout(h.current),h.current=null)},[]);return(0,a.useEffect)(()=>{r&&x(!0)},[t,r]),(0,a.useEffect)(()=>(n&&!l?w():j(),()=>{j()}),[n,l,w,j]),(0,a.useEffect)(()=>{const e=()=>{!document.hidden&&n&&(console.log(" Page visible, checking for new messages..."),x(!1))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[n,x]),{messages:o,loading:l,error:d,unreadCount:f,fetchMessages:x,markAsRead:y,markAllAsRead:b,deleteMessage:v,startPolling:w,stopPolling:j}})({autoFetch:!0,enablePolling:!1}),h=n?l.filter(e=>e.subject.toLowerCase().includes(n.toLowerCase())||e.message.toLowerCase().includes(n.toLowerCase())):l,g=h[t];return(0,a.useEffect)(()=>{h.length>0&&t>=h.length&&r(h.length-1)},[h.length,t]),(0,a.useEffect)(()=>{g&&"unread"===g.status&&p(g.id).catch(()=>{})},[g,p]),(0,Qr.jsxs)("div",{className:"rounded-xl h-full flex flex-col shadow-lg border-2",style:{backgroundColor:e("secondaryBackground","#f8f9fa"),borderColor:e("primary","#3b82f6")},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between p-6 pb-4 border-b-2",style:{borderColor:e("primary","#3b82f6")+"30"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(nl,{className:"w-6 h-6",style:{color:e("primary","#3b82f6")}}),(0,Qr.jsx)("h2",{className:"text-xl font-bold qe-text-primary",children:"Mensajes"})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)("button",{onClick:()=>i(!o),className:"p-1.5 rounded text-white hover:qe-bg-accent transition-all",style:{backgroundColor:"var(--qe-primary)"},title:"Buscar",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:(0,Qr.jsx)(Tn,{className:"w-4 h-4"})}),(0,Qr.jsx)("button",{onClick:()=>f(!0),disabled:c,className:"p-1.5 rounded text-white hover:qe-bg-accent transition-all disabled:opacity-50",style:{backgroundColor:"var(--qe-primary)"},title:"Actualizar",onMouseEnter:e=>{c||(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{c||(e.currentTarget.style.backgroundColor="var(--qe-primary)")},children:(0,Qr.jsx)(Yi,{className:"w-4 h-4 "+(c?"animate-spin":"")})}),h.length>0&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1 ml-1 pl-1 border-l qe-border-primary",children:[(0,Qr.jsx)("button",{onClick:()=>{t>0&&r(t-1)},disabled:0===t,className:"p-1 rounded text-white hover:qe-bg-accent disabled:opacity-30 disabled:cursor-not-allowed transition-all",style:{backgroundColor:"var(--qe-primary)"},title:"Anterior",onMouseEnter:e=>{0!==t&&(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{0!==t&&(e.currentTarget.style.backgroundColor="var(--qe-primary)")},children:(0,Qr.jsx)(sl,{className:"w-3.5 h-3.5"})}),(0,Qr.jsxs)("span",{className:"text-xs qe-text-primary px-1.5 min-w-[50px] text-center",children:[t+1,"/",h.length]}),(0,Qr.jsx)("button",{onClick:()=>{t<h.length-1&&r(t+1)},disabled:t===h.length-1,className:"p-1 rounded text-white hover:qe-bg-accent disabled:opacity-30 disabled:cursor-not-allowed transition-all",style:{backgroundColor:"var(--qe-primary)"},title:"Siguiente",onMouseEnter:e=>{t!==h.length-1&&(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{t!==h.length-1&&(e.currentTarget.style.backgroundColor="var(--qe-primary)")},children:(0,Qr.jsx)(al,{className:"w-3.5 h-3.5"})})]})]})]}),o&&(0,Qr.jsxs)("div",{className:"p-3 border-b qe-border-primary qe-bg-primary-light",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsxs)("div",{className:"relative flex-1",children:[(0,Qr.jsx)("input",{type:"text",placeholder:"Buscar en mensajes...",value:n,onChange:e=>{s(e.target.value),r(0)},className:"w-full pl-8 pr-8 py-1.5 text-sm border qe-border-primary rounded-lg focus:outline-none focus:ring-2 focus:qe-ring-accent qe-bg-card qe-text-primary",style:{backgroundColor:"var(--qe-bg-card)"},autoFocus:!0}),(0,Qr.jsx)(Tn,{className:"absolute left-2.5 top-2 w-3.5 h-3.5 qe-text-primary"}),n&&(0,Qr.jsx)("button",{onClick:()=>s(""),className:"absolute right-2.5 top-2 text-white rounded-full p-0.5 hover:qe-bg-accent transition-all",style:{backgroundColor:"var(--qe-primary)"},title:"Limpiar bsqueda",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:(0,Qr.jsx)(En,{className:"w-2.5 h-2.5"})})]}),(0,Qr.jsx)("button",{onClick:()=>{i(!1),s("")},className:"p-1.5 rounded text-white hover:qe-bg-accent transition-all flex-shrink-0",style:{backgroundColor:"var(--qe-primary)"},title:"Cerrar bsqueda",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:(0,Qr.jsx)(En,{className:"w-4 h-4"})})]}),n&&(0,Qr.jsxs)("div",{className:"text-xs qe-text-secondary mt-1.5",children:[h.length," resultado",1!==h.length?"s":""]})]}),(0,Qr.jsxs)("div",{className:"p-5",children:[d&&(0,Qr.jsx)("div",{className:"text-sm qe-text-error qe-bg-error-light p-3 rounded-lg",children:d}),c&&0===l.length?(0,Qr.jsxs)("div",{className:"text-center py-8 qe-text-secondary",children:[(0,Qr.jsx)(Yi,{className:"w-6 h-6 animate-spin mx-auto mb-2 qe-text-primary"}),(0,Qr.jsx)("p",{className:"text-sm",children:"Cargando mensajes..."})]}):0===h.length?(0,Qr.jsxs)("div",{className:"text-center py-8",children:[(0,Qr.jsx)(nl,{className:"w-12 h-12 qe-text-secondary mx-auto mb-3 opacity-30"}),(0,Qr.jsx)("p",{className:"text-sm qe-text-secondary",children:n?"No se encontraron mensajes":"No tienes mensajes"})]}):g?(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h3",{className:"text-xl font-bold qe-text-primary mb-2",children:g.subject}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3 text-sm qe-text-primary",children:[(0,Qr.jsxs)("span",{className:"font-semibold",children:["De: ",g.sender_name||"Admin"]}),(0,Qr.jsx)("span",{children:""}),(0,Qr.jsx)("span",{className:"qe-text-secondary",children:(e=>{const t=new Date(e),r=new Date,n=Math.floor((r-t)/36e5);return n<1?"Hace un momento":n<24?`Hace ${n}h`:n<48?"Ayer":t.toLocaleDateString("es-ES",{day:"numeric",month:"short"})})(g.created_at)}),"unread"===g.status&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("span",{children:""}),(0,Qr.jsxs)("span",{className:"inline-flex items-center gap-1 qe-text-accent font-medium",children:[(0,Qr.jsx)("span",{className:"w-1.5 h-1.5 qe-bg-accent rounded-full"}),"Nuevo"]})]})]})]}),(0,Qr.jsx)("button",{onClick:async()=>{if(g)try{await m(g.id),1===h.length?r(0):t>=h.length-1&&r(Math.max(0,t-1))}catch(e){console.error("Error deleting message:",e)}},className:"ml-4 p-2 rounded transition-all text-white",style:{backgroundColor:"var(--qe-error, #dc2626)"},title:"Borrar mensaje",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-error-dark, #b91c1c)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-error, #dc2626)"},children:(0,Qr.jsx)(ca,{className:"w-4 h-4"})})]}),(0,Qr.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,Qr.jsx)("div",{className:"qe-bg-primary-light rounded-lg p-4 border qe-border-primary",children:(0,Qr.jsx)("div",{className:"qe-text-primary leading-relaxed",dangerouslySetInnerHTML:{__html:g.message}})})}),g.type&&(0,Qr.jsx)("div",{className:"flex items-center gap-2",children:(0,Qr.jsx)("span",{className:"text-xs px-2 py-1 qe-bg-primary-light qe-text-primary rounded",children:g.type.replace(/_/g," ").replace(/^\w/,e=>e.toUpperCase())})})]}):null]})]})},Ld=cn("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),Id=async e=>{try{const{endpoints:t}=(0,Fr.getApiConfig)(),r=`${t.custom_api}/student-progress/course/${e}`;console.log(` Fetching course progress for course ${e}`);const n=await(0,gn.qb)(r,{method:"GET"});return console.log(" Course progress fetched:",n.data),n.data.data}catch(e){throw console.error(" Error fetching course progress:",e),e}},Rd=(e,t=!1,r=!1)=>{const[n,s]=(0,a.useState)(null),[o,i]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),f=(0,a.useCallback)(async()=>{if(e){c(!0),u(null);try{const t=await Id(e);s(t)}catch(e){console.error("Error fetching course progress:",e),u(e.message||"Error al cargar el progreso"),s(null)}finally{c(!1)}}},[e]),p=(0,a.useCallback)(async()=>{if(e)try{const t=await(async e=>{try{const{endpoints:t}=(0,Fr.getApiConfig)(),r=`${t.custom_api}/student-progress/completed/${e}`;console.log(` Fetching completed content for course ${e}`);const n=await(0,gn.qb)(r,{method:"GET"});return console.log(" Completed content fetched:",n.data),n.data.data}catch(e){throw console.error(" Error fetching completed content:",e),e}})(e);i(t||[])}catch(e){console.error("Error fetching completed content:",e),i([])}},[e]),m=(0,a.useCallback)(async(t,n,a=null,o=null)=>{if(!e)throw new Error("Course ID is required");c(!0),u(null);try{const l=await(async(e,t,r,n=null,s=null)=>{try{const{endpoints:a}=(0,Fr.getApiConfig)(),o=`${a.custom_api}/student-progress/mark-complete`;console.log(" Marking content as complete:",{contentId:e,contentType:t,courseId:r,parentLessonId:n,stepIndex:s});const i={content_id:e,content_type:t,course_id:r};null!==n&&(i.parent_lesson_id=n),null!==s&&(i.step_index=s);const l=await(0,gn.qb)(o,{method:"POST",body:JSON.stringify(i)});return console.log(" Content marked as complete:",l.data),l.data.data}catch(e){throw console.error(" Error marking content as complete:",e),e}})(t,n,e,a,o);void 0!==l?.progress&&s(e=>({...e,percentage:l.progress}));let c=t;return"step"===n&&null!==a&&null!==o&&(c=1e4*a+o),i(e=>e.find(e=>e.content_id===c&&e.content_type===n)?e:[...e,{content_id:c,content_type:n,completed_at:(new Date).toISOString()}]),await p(),r&&await f(),l}catch(e){throw console.error("Error marking content complete:",e),u(e.message||"Error al marcar como completado"),e}finally{c(!1)}},[e,r,f]),h=(0,a.useCallback)(async(t,n,a=null,o=null)=>{if(!e)throw new Error("Course ID is required");c(!0),u(null);try{const l=await(async(e,t,r,n=null,s=null)=>{try{const{endpoints:a}=(0,Fr.getApiConfig)(),o=`${a.custom_api}/student-progress/unmark-complete`;console.log(" Unmarking content:",{contentId:e,contentType:t,courseId:r,parentLessonId:n,stepIndex:s});const i={content_id:e,content_type:t,course_id:r};null!==n&&(i.parent_lesson_id=n),null!==s&&(i.step_index=s);const l=await(0,gn.qb)(o,{method:"POST",body:JSON.stringify(i)});return console.log(" Content unmarked:",l.data),l.data.data}catch(e){throw console.error(" Error unmarking content:",e),e}})(t,n,e,a,o);void 0!==l?.progress&&s(e=>({...e,percentage:l.progress}));let c=t;return"step"===n&&null!==a&&null!==o&&(c=1e4*a+o),i(e=>e.filter(e=>!(e.content_id===c&&e.content_type===n))),await p(),r&&await f(),l}catch(e){throw console.error("Error unmarking content:",e),u(e.message||"Error al desmarcar"),e}finally{c(!1)}},[e,r,f]),g=(0,a.useCallback)((e,t,r=null,n=null)=>{let s=e;return"step"===t&&null!==r&&null!==n&&(s=1e4*r+n),o.some(e=>e.content_id===s&&e.content_type===t)},[o]),x=(0,a.useCallback)(async()=>{r&&await f()},[r,f]);return(0,a.useEffect)(()=>{t&&e&&x()},[t,e,x]),{progress:n,completedItems:o,loading:l,error:d,markComplete:m,unmarkComplete:h,isCompleted:g,refresh:x,fetchProgress:f,fetchCompletedContent:p}},$d=()=>{const e=window.qe_data?.user||window.qeApiConfig?.user||null;return!!e&&(!(!e.capabilities||!e.capabilities.manage_options)||!(!e.roles||!Array.isArray(e.roles))&&e.roles.includes("administrator"))},Fd=({course:e})=>{const{completedItems:t}=Rd(e.id,!0),{lessons:r}=Ks({courseId:e.id,autoFetch:!0,perPage:100}),n=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url,s=e.title?.rendered||e.title||"Curso sin ttulo",a=r?.length||0,o=t?.filter(e=>"lesson"===e.content_type)?.length||0,i=a>0?Math.round(o/a*100):0;return(0,Qr.jsx)("div",{className:"qe-bg-primary-light rounded-lg p-3 border qe-border-primary hover:shadow-lg transition-all",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"w-14 h-14 flex-shrink-0 rounded overflow-hidden",children:n?(0,Qr.jsx)("img",{src:n,alt:s,className:"w-full h-full object-cover"}):(0,Qr.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"var(--qe-primary)"},children:(0,Qr.jsx)(kn,{className:"w-5 h-5 text-white"})})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("h3",{className:"text-sm font-semibold qe-text-primary truncate mb-1",dangerouslySetInnerHTML:{__html:s}}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("div",{className:"flex-1 qe-bg-card rounded-full h-2 overflow-hidden",children:(0,Qr.jsx)("div",{className:"h-full transition-all duration-500 rounded-full",style:{width:`${i}%`,backgroundColor:"var(--qe-primary)"}})}),(0,Qr.jsxs)("span",{className:"text-xs font-medium qe-text-primary whitespace-nowrap",children:[i,"%"]})]})]}),(0,Qr.jsx)(Zt,{to:`/courses/${e.id}`,className:"px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all flex-shrink-0",style:{backgroundColor:"var(--qe-primary)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:i>0?"Continuar":"Comenzar"})]})})},Bd=()=>{const{getColor:e}=Yr(),t=$d(),{courses:r,loading:n,error:s}=xs({autoFetch:!0,embed:!0,perPage:3,status:"publish",enrolledOnly:!t});return s?(0,Qr.jsx)("div",{className:"rounded-xl shadow-lg border-2 p-6",style:{backgroundColor:e("secondaryBackground","#f8f9fa"),borderColor:e("primary","#3b82f6")},children:(0,Qr.jsx)("p",{className:"text-sm qe-text-error",children:"Error al cargar cursos"})}):(0,Qr.jsxs)("div",{className:"p-6 rounded-xl shadow-lg border-2 h-full flex flex-col",style:{backgroundColor:e("secondaryBackground","#f8f9fa"),borderColor:e("primary","#3b82f6")},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b-2",style:{borderColor:e("primary","#3b82f6")+"30"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(Ld,{className:"w-6 h-6",style:{color:e("primary","#3b82f6")}}),(0,Qr.jsx)("h2",{className:"text-xl font-bold qe-text-primary",children:"Mis Cursos"})]}),(0,Qr.jsx)(Zt,{to:"/courses",className:"px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all",style:{backgroundColor:e("primary","#3b82f6")},onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e("accent","#f59e0b")},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e("primary","#3b82f6")},children:"Ver todos"})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto",children:n&&0===r.length?(0,Qr.jsxs)("div",{className:"text-center py-8 qe-text-secondary",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-2",style:{borderColor:e("primary","#3b82f6")}}),(0,Qr.jsx)("p",{className:"text-sm",children:"Cargando cursos..."})]}):0===r.length?(0,Qr.jsxs)("div",{className:"text-center py-8",children:[(0,Qr.jsx)(kn,{className:"w-12 h-12 qe-text-secondary mx-auto mb-3 opacity-30"}),(0,Qr.jsx)("p",{className:"text-sm qe-text-secondary",children:"No ests inscrito en ningn curso"})]}):(0,Qr.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,Qr.jsx)(Fd,{course:e},e.id))})})]})},Ud=cn("chart-no-axes-column",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),Hd=cn("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Wd=({statsData:e,compact:t=!1,isDarkMode:r=!1,pageColors:n=null,mini:s=!1})=>{const{getColor:o}=Yr(),[i,l]=(0,a.useState)(null),c=n||{text:r?"#f9fafb":"#1a202c",textMuted:r?"#9ca3af":"#6b7280",primary:o("primary","#3b82f6"),background:r?"#1f2937":"#ffffff",secondaryBg:r?"#111827":"#f3f4f6",border:r?"#374151":"#e5e7eb"},d=[{label:"Correctas",value:e?.correct_answers||0,color:"#10b981",icon:On,userPct:e?.user_correct_pct||0,globalPct:e?.global_stats?.correct_pct||0,diff:e?.comparison?.correct_diff||0},{label:"Incorrectas",value:e?.incorrect_answers||0,color:"#ef4444",icon:Wi,userPct:e?.user_incorrect_pct||0,globalPct:e?.global_stats?.incorrect_pct||0,diff:e?.comparison?.incorrect_diff||0,invertDiff:!0},{label:"Sin Contestar",value:e?.unanswered||0,color:"#94a3b8",icon:pl,userPct:e?.user_unanswered_pct||0,globalPct:e?.global_stats?.unanswered_pct||0,diff:e?.comparison?.unanswered_diff||0,invertDiff:!0}],u=d.reduce((e,t)=>e+t.value,0),f=e?.global_stats?.total_users>0;let p=-90;const m=d.map((e,t)=>{const r=u>0?e.value/u*100:0,n=r/100*360,s={...e,percentage:r,startAngle:p,endAngle:p+n,index:t};return p+=n,s}),h=(e,t,r,n)=>{const s=g(50,50,n,t),a=g(50,50,n,e),o=g(50,50,r,t),i=g(50,50,r,e),l=t-e<=180?0:1;return[`M ${s.x} ${s.y}`,`A ${n} ${n} 0 ${l} 0 ${a.x} ${a.y}`,`L ${i.x} ${i.y}`,`A ${r} ${r} 0 ${l} 1 ${o.x} ${o.y}`,"Z"].join(" ")},g=(e,t,r,n)=>{const s=n*Math.PI/180;return{x:e+r*Math.cos(s),y:t+r*Math.sin(s)}};return(0,Qr.jsxs)("div",{className:"p-3 rounded-lg border flex flex-col h-full "+(t?"":"shadow-lg"),style:{backgroundColor:c.background,borderColor:c.border||(r?"#374151":"#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2 pb-2 border-b",style:{borderColor:c.border||(r?"#374151":"#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)(Hd,{className:"w-3.5 h-3.5",style:{color:c.primary}}),(0,Qr.jsx)("h2",{className:"text-xs font-semibold",style:{color:c.text},children:s?"Respuestas":"Distribucin de Respuestas"})]}),f&&!s&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1 text-[10px]",style:{color:c.textMuted},children:[(0,Qr.jsx)(Nn,{className:"w-3 h-3"}),(0,Qr.jsx)("span",{children:e.global_stats.total_users})]})]}),s?(0,Qr.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,Qr.jsxs)("div",{className:"relative w-20 h-20 mb-2",children:[(0,Qr.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[(0,Qr.jsx)("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:r?"#374151":"#f3f4f6",strokeWidth:"16"}),m.map((e,t)=>{const r=i===t;return(0,Qr.jsx)("path",{d:h(e.startAngle,e.endAngle,r?28:30,r?44:42),fill:e.color,className:"transition-all duration-300 cursor-pointer",onMouseEnter:()=>l(t),onMouseLeave:()=>l(null)},t)})]}),(0,Qr.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:c.text},children:u}),(0,Qr.jsx)("p",{className:"text-[9px]",style:{color:c.textMuted},children:"Total"})]})]}),(0,Qr.jsx)("div",{className:"w-full space-y-1",children:d.map((e,t)=>{const r=e.icon,n=u>0?(e.value/u*100).toFixed(0):0;return(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-2 py-1 rounded text-[10px]",style:{backgroundColor:i===t?`${e.color}15`:"transparent"},onMouseEnter:()=>l(t),onMouseLeave:()=>l(null),children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(r,{className:"w-3 h-3",style:{color:e.color}}),(0,Qr.jsx)("span",{style:{color:c.text},children:e.label})]}),(0,Qr.jsxs)("span",{className:"font-bold",style:{color:e.color},children:[e.value," (",n,"%)"]})]},t)})})]}):(0,Qr.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,Qr.jsxs)("div",{className:"relative flex-shrink-0 w-28 h-28",children:[(0,Qr.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[(0,Qr.jsx)("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:r?c.primary+"20":"#f3f4f6",strokeWidth:"16"}),m.map((e,t)=>{const r=i===t,n=r?28:30,s=r?44:42;return(0,Qr.jsx)("g",{children:(0,Qr.jsx)("path",{d:h(e.startAngle,e.endAngle,n,s),fill:e.color,className:"transition-all duration-300 cursor-pointer",style:{filter:r?"brightness(1.1) drop-shadow(0 2px 4px rgba(0,0,0,0.2))":"none",transformOrigin:"50% 50%"},onMouseEnter:()=>l(t),onMouseLeave:()=>l(null)})},t)})]}),(0,Qr.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[(0,Qr.jsx)("p",{className:"text-2xl font-bold",style:{color:c.text},children:u}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:c.textMuted},children:"Total"})]})]}),(0,Qr.jsx)("div",{className:"flex-1 space-y-2",children:d.map((e,t)=>{const r=e.icon,n=u>0?(e.value/u*100).toFixed(1):0,s=i===t,a=((e,t=!1)=>{const r=t?e<0:e>0;return Math.abs(e)<.5?{Icon:uc,color:c.textMuted,label:"igual"}:r?{Icon:kc,color:"#10b981",label:"mejor"}:{Icon:qd,color:"#ef4444",label:"peor"}})(e.diff,e.invertDiff),o=a.Icon;return(0,Qr.jsxs)("div",{className:"p-2 rounded transition-all cursor-pointer",style:{backgroundColor:s?`${e.color}15`:"transparent"},onMouseEnter:()=>l(t),onMouseLeave:()=>l(null),children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)(r,{className:"w-3.5 h-3.5",style:{color:e.color}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:c.text},children:e.label})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)("span",{className:"text-sm font-bold",style:{color:e.color},children:e.value}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:c.textMuted},children:["(",n,"%)"]})]})]}),f&&(0,Qr.jsxs)("div",{className:"flex items-center justify-between mt-1 pl-5",children:[(0,Qr.jsx)("div",{className:"flex items-center gap-1",children:(0,Qr.jsxs)("span",{className:"text-xs",style:{color:c.textMuted},children:["Media: ",e.globalPct,"%"]})}),(0,Qr.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,Qr.jsx)(o,{className:"w-3 h-3",style:{color:a.color}}),(0,Qr.jsxs)("span",{className:"text-xs font-medium",style:{color:a.color},children:[e.diff>0?"+":"",e.diff,"%"]})]})]})]},t)})})]}),!s&&(void 0!==e?.correct_with_risk||void 0!==e?.incorrect_with_risk)&&(0,Qr.jsx)("div",{className:"mt-2 pt-2 border-t",style:{borderColor:c.border||(r?"#374151":"#e5e7eb")},children:(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-[10px]",children:[(0,Qr.jsxs)("div",{className:"p-1.5 rounded",style:{backgroundColor:r?"#10b98115":"#ecfdf5"},children:[(0,Qr.jsx)("div",{className:"font-medium mb-0.5",style:{color:"#10b981"},children:"Correctas"}),(0,Qr.jsxs)("div",{className:"flex justify-between",style:{color:c.text},children:[(0,Qr.jsx)("span",{children:"Con riesgo:"}),(0,Qr.jsx)("span",{className:"font-medium",children:e?.correct_with_risk||0})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",style:{color:c.text},children:[(0,Qr.jsx)("span",{children:"Sin riesgo:"}),(0,Qr.jsx)("span",{className:"font-medium",children:e?.correct_without_risk||0})]})]}),(0,Qr.jsxs)("div",{className:"p-1.5 rounded",style:{backgroundColor:r?"#ef444415":"#fef2f2"},children:[(0,Qr.jsx)("div",{className:"font-medium mb-0.5",style:{color:"#ef4444"},children:"Incorrectas"}),(0,Qr.jsxs)("div",{className:"flex justify-between",style:{color:c.text},children:[(0,Qr.jsx)("span",{children:"Con riesgo:"}),(0,Qr.jsx)("span",{className:"font-medium",children:e?.incorrect_with_risk||0})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",style:{color:c.text},children:[(0,Qr.jsx)("span",{children:"Sin riesgo:"}),(0,Qr.jsx)("span",{className:"font-medium",children:e?.incorrect_without_risk||0})]})]})]})})]})},Qd=()=>{const{getColor:e}=Yr(),[t,r]=(0,a.useState)("all"),[n,s]=(0,a.useState)({totalQuestions:0,correctAnswers:0,incorrectAnswers:0,unanswered:0}),[o,i]=(0,a.useState)(!1),{courses:l,loading:c}=xs({autoFetch:!0,perPage:100});(0,a.useEffect)(()=>{(async()=>{i(!0);try{const e=(0,Fr.getApiConfig)(),r="all"!==t?`?course_id=${t}`:"",n=`${e.apiUrl}/quiz-extended/v1/user-stats/questions${r}`;console.log(" Fetching user stats from:",n);const a=await(0,gn.qb)(n);console.log(" User stats response:",a),console.log(" Response data:",a.data);const o=a.data?.data||a.data||{};console.log(" Extracted data:",o),s({totalQuestions:o.total_questions||0,correctAnswers:o.correct_answers||0,incorrectAnswers:o.incorrect_answers||0,unanswered:o.unanswered||0}),console.log(" Final stats state:",{totalQuestions:o.total_questions||0,correctAnswers:o.correct_answers||0,incorrectAnswers:o.incorrect_answers||0,unanswered:o.unanswered||0})}catch(e){console.error(" Error fetching user stats:",e),console.error("Error details:",e.response||e.message),s({totalQuestions:0,correctAnswers:0,incorrectAnswers:0,unanswered:0})}finally{i(!1)}})()},[t]);const d=c||o;return(0,Qr.jsxs)("div",{className:"p-6 rounded-xl shadow-lg border-2 h-full flex flex-col",style:{backgroundColor:e("secondaryBackground","#f8f9fa"),borderColor:e("primary","#3b82f6")},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b-2",style:{borderColor:e("primary","#3b82f6")+"30"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)(Ud,{className:"w-6 h-6",style:{color:e("primary","#3b82f6")}}),(0,Qr.jsx)("h2",{className:"text-xl font-bold qe-text-primary",children:"Estadsticas"})]}),(0,Qr.jsx)(Zt,{to:"/statistics",className:"px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all",style:{backgroundColor:e("primary","#3b82f6")},onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e("accent","#f59e0b")},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e("primary","#3b82f6")},children:"Ver todas"})]}),(0,Qr.jsx)("div",{className:"pb-4",children:(0,Qr.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 text-sm border qe-border-primary rounded-lg qe-text-primary focus:outline-none focus:ring-2",style:{backgroundColor:e("background","#ffffff"),"--tw-ring-color":e("primary","#3b82f6")},disabled:c,children:[(0,Qr.jsx)("option",{value:"all",children:"Todos los cursos"}),l.map(e=>(0,Qr.jsx)("option",{value:e.id,children:e.title?.rendered||e.title||`Curso ${e.id}`},e.id))]})}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto",children:d?(0,Qr.jsxs)("div",{className:"text-center py-8 qe-text-secondary",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-2",style:{borderColor:e("primary","#3b82f6")}}),(0,Qr.jsx)("p",{className:"text-sm",children:"Cargando estadsticas..."})]}):0===n.totalQuestions?(0,Qr.jsxs)("div",{className:"text-center py-8",children:[(0,Qr.jsx)(Ud,{className:"w-12 h-12 qe-text-secondary mx-auto mb-3 opacity-30"}),(0,Qr.jsx)("p",{className:"text-sm qe-text-secondary",children:"all"===t?"No has respondido ninguna pregunta an":"No has respondido preguntas de este curso"})]}):(0,Qr.jsx)("div",{className:"h-full",children:(0,Qr.jsx)(Wd,{compact:!0,statsData:{correct_answers:n.correctAnswers,incorrect_answers:n.incorrectAnswers,unanswered:n.unanswered,total_questions:n.totalQuestions}})})})]})},Vd=cn("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Kd={getBaseUrl:()=>`${(0,Fr.getApiConfig)().apiUrl}/quiz-extended/v1`,async saveProgress(e){try{const t=(0,Fr.getApiConfig)(),r=this.getBaseUrl(),n=await fetch(`${r}/quiz-autosave`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin",body:JSON.stringify(e)});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to save quiz progress")}return await n.json()}catch(e){throw console.error("Error saving quiz progress:",e),e}},async getLatestAutosave(){try{const e=(0,Fr.getApiConfig)(),t=this.getBaseUrl(),r=await fetch(`${t}/quiz-autosave/latest`,{headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},credentials:"same-origin"});if(404===r.status)return null;if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(e.message||"Failed to fetch latest autosave")}return(await r.json()).data}catch(e){return console.error("Error fetching latest autosave:",e),null}},async getQuizAutosave(e){try{const t=(0,Fr.getApiConfig)(),r=this.getBaseUrl(),n=await fetch(`${r}/quiz-autosave/${e}`,{headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin"});if(404===n.status)return null;if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to fetch quiz autosave")}return(await n.json()).data}catch(e){return console.error("Error fetching quiz autosave:",e),null}},async deleteAutosave(e){try{const t=(0,Fr.getApiConfig)(),r=this.getBaseUrl(),n=await fetch(`${r}/quiz-autosave/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin"});if(404===n.status)return{success:!0,message:"Autosave already deleted"};if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to delete autosave")}return await n.json()}catch(e){throw console.error("Error deleting autosave:",e),e}},async clearAllAutosaves(){try{const e=(0,Fr.getApiConfig)(),t=this.getBaseUrl(),r=await fetch(`${t}/quiz-autosave/clear-all`,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},credentials:"same-origin"});if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(e.message||"Failed to clear all autosaves")}return await r.json()}catch(e){throw console.error("Error clearing all autosaves:",e),e}},async hasPendingQuiz(){try{return null!==await this.getLatestAutosave()}catch(e){return console.error("Error checking pending quiz:",e),!1}}},Yd=Kd,Gd=()=>{const[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),[s,o]=(0,a.useState)(!0),i=ut();if((0,a.useEffect)(()=>{(async()=>{try{const e=await Yd.getLatestAutosave();e&&t(e)}catch(e){console.error("Error checking for pending quiz:",e)}finally{o(!1)}})()},[]),s||!e||!r)return null;const{answered:l,total:c,percent:d}=(()=>{if(!e)return{answered:0,total:0,percent:0};const t="string"==typeof e.answers?JSON.parse(e.answers):e.answers,r="string"==typeof e.quiz_data?JSON.parse(e.quiz_data):e.quiz_data,n=Object.keys(t||{}).length,s=r?.meta?._quiz_question_ids?.length||0;return{answered:n,total:s,percent:s>0?Math.round(n/s*100):0}})();return(0,Qr.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-l-4 border-blue-500 rounded-lg shadow-md overflow-hidden",children:(0,Qr.jsx)("div",{className:"p-5",children:(0,Qr.jsxs)("div",{className:"flex items-start",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0",children:(0,Qr.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-500 text-white",children:(0,Qr.jsx)(Pn,{className:"w-6 h-6"})})}),(0,Qr.jsxs)("div",{className:"ml-4 flex-1",children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Tienes un cuestionario sin terminar"}),(0,Qr.jsx)("p",{className:"mt-1 text-sm text-gray-700",children:"Contina donde lo dejaste y completa tu evaluacin"})]}),(0,Qr.jsx)("button",{onClick:()=>{n(!1)},className:"ml-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Cerrar notificacin",children:(0,Qr.jsx)(En,{className:"w-5 h-5"})})]}),(0,Qr.jsxs)("div",{className:"mt-3 bg-white rounded-lg p-3 space-y-2 border border-blue-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-700",children:"Cuestionario:"}),(0,Qr.jsx)("span",{className:"text-gray-900 font-semibold",children:e.quiz_title||"Sin ttulo"})]}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Qr.jsx)("span",{className:"font-medium text-gray-700",children:"Progreso:"}),(0,Qr.jsxs)("span",{className:"text-gray-900",children:[l," de ",c," preguntas (",d,"%)"]})]}),e.time_remaining&&(0,Qr.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Qr.jsxs)("span",{className:"font-medium text-gray-700 flex items-center gap-1",children:[(0,Qr.jsx)(Ec,{className:"w-4 h-4"}),"Tiempo restante:"]}),(0,Qr.jsxs)("span",{className:"text-gray-900",children:[Math.floor(e.time_remaining/60),":",(e.time_remaining%60).toString().padStart(2,"0")]})]}),(0,Qr.jsxs)("div",{className:"pt-2 border-t border-gray-200 text-xs text-gray-500",children:["ltima actualizacin: ",(e=>{const t=new Date(e),r=new Date-t,n=Math.floor(r/6e4),s=Math.floor(n/60),a=Math.floor(s/24);return a>0?`hace ${a} da${a>1?"s":""}`:s>0?`hace ${s} hora${s>1?"s":""}`:n>0?`hace ${n} minuto${n>1?"s":""}`:"hace unos segundos"})(e.updated_at)]})]}),(0,Qr.jsx)("div",{className:"mt-3 w-full bg-gray-200 rounded-full h-2",children:(0,Qr.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${d}%`}})}),(0,Qr.jsxs)("button",{onClick:()=>{e&&e.quiz_id&&i(`/quiz/${e.quiz_id}`)},className:"mt-4 w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors shadow-sm",children:["Continuar cuestionario",(0,Qr.jsx)(Vd,{className:"w-4 h-4"})]})]})]})})})},Xd=()=>{const e=window.qe_data?.user?.name||"Estudiante",{getColor:t}=Yr();return(0,Qr.jsxs)("div",{className:"p-6 space-y-8 min-h-full max-w-full",style:{backgroundColor:t("secondaryBackground","#ffffff")},children:[(0,Qr.jsx)("header",{children:(0,Qr.jsxs)("h1",{className:"text-4xl font-bold qe-text-primary",children:["Bienvenido de nuevo, ",e,"!"]})}),(0,Qr.jsxs)("main",{className:"space-y-8",children:[(0,Qr.jsx)(Gd,{}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Qr.jsx)("div",{className:"lg:col-span-1 h-full min-h-[400px]",children:(0,Qr.jsx)(Bd,{})}),(0,Qr.jsx)("div",{className:"lg:col-span-1 h-full min-h-[400px]",children:(0,Qr.jsx)(Qd,{})}),(0,Qr.jsx)("div",{className:"lg:col-span-1 h-full min-h-[400px]",children:(0,Qr.jsx)(Dd,{})})]}),(0,Qr.jsx)(zd,{limitedView:!0})]})]})},Zd=e=>{const[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)(!0),[o,i]=(0,a.useState)(null),l=(0,a.useCallback)(async()=>{if(e){s(!0),i(null);try{const t=`${(0,Fr.getApiConfig)().apiUrl}/quiz-extended/v1/quiz-attempts/${e}`;console.log(` Fetching attempt details from: ${t}`);const n=await(0,gn.qb)(t);if(!(n&&n.data&&n.data.success))throw new Error(n?.data?.data?.message||"La respuesta de la API no tuvo el formato esperado o fall.");r(n.data.data),console.log(" Attempt details loaded successfully:",n.data.data)}catch(e){console.error(" Error fetching attempt details:",e),i(e.message||"No se pudieron cargar los detalles del intento.")}finally{s(!1)}}else s(!1)},[e]);return(0,a.useEffect)(()=>{l()},[l]),{details:t,loading:n,error:o,refetch:l}},Jd=cn("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),eu=cn("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),tu=cn("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),ru=async e=>{try{const t=`${(0,Fr.getApiConfig)().endpoints.custom_api}/favorite-questions/toggle`;console.log(` Toggling favorite for question ID: ${e}`);const r=await(0,gn.qb)(t,{method:"POST",body:JSON.stringify({question_id:e})});return console.log(" Favorite toggled:",r.data),r.data.data}catch(t){throw console.error(` Error toggling favorite for question ID ${e}:`,t),t}},nu=cn("message-square-warning",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 15h.01",key:"q59x07"}],["path",{d:"M12 7v4",key:"xawao1"}]]),su=e=>e?"string"==typeof e?e:"object"==typeof e&&e.rendered?e.rendered:"object"==typeof e&&e.raw?e.raw:String(e):null,au=({question:e,initialFeedbackType:t="feedback",onClose:r,courseId:n=null,courseName:s=null,lessonId:o=null,lessonTitle:i=null})=>{const[l,c]=(0,a.useState)(t),[d,u]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)(""),[g,x]=(0,a.useState)(!1),{t:y}=k(),{getColor:b,isDarkMode:v}=Yr(),w=b("primary","#3b82f6"),j=b("accent","#f59e0b"),N=v?b("secondaryBackground","#1f2937"):"#ffffff",_=v?"rgba(255,255,255,0.05)":`${w}05`,C=v?"rgba(255,255,255,0.1)":`${w}15`,S=v?b("textPrimary","#f9fafb"):w,E=b("textSecondary","#6b7280"),O=su(e?.title),M=su(s),T=su(i),P=(()=>{switch(l){case"challenge":return{icon:jn,iconColor:j,bgColor:`${j}15`,label:y("quizzes.feedbackModal.optionChallenge")};case"correction":return{icon:ul,iconColor:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",label:y("quizzes.feedbackModal.optionCorrection")||"Correccin"};default:return{icon:nu,iconColor:w,bgColor:`${w}15`,label:y("quizzes.feedbackModal.optionFeedback")}}})(),A=P.icon;return(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 backdrop-blur-sm",onClick:r}),(0,Qr.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",children:(0,Qr.jsxs)("div",{className:"rounded-2xl shadow-2xl max-w-lg w-full pointer-events-auto overflow-hidden",style:{backgroundColor:N,border:`1px solid ${C}`},onClick:e=>e.stopPropagation(),children:[(0,Qr.jsxs)("div",{className:"relative p-6",style:{background:v?`linear-gradient(135deg, ${w}20 0%, ${j}10 100%)`:`linear-gradient(135deg, ${w}10 0%, ${j}08 100%)`},children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qr.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shadow-sm",style:{backgroundColor:P.bgColor,border:`1px solid ${P.iconColor}30`},children:(0,Qr.jsx)(A,{size:24,style:{color:P.iconColor}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-xl font-bold",style:{color:S},children:y("challenge"===l?"quizzes.feedbackModal.titleChallenge":"quizzes.feedbackModal.titleFeedback")}),(0,Qr.jsxs)("p",{className:"text-sm mt-0.5",style:{color:E},children:[y("quizzes.feedbackModal.question")," #",e?.id]})]})]}),(0,Qr.jsx)("button",{onClick:r,className:"p-2 rounded-lg transition-all",style:{color:E,backgroundColor:v?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=v?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=v?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},"aria-label":y("quizzes.feedbackModal.close"),children:(0,Qr.jsx)(En,{size:22})})]}),(M||T)&&(0,Qr.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[M&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium",style:{backgroundColor:v?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.8)",color:S,border:`1px solid ${C}`},children:[(0,Qr.jsx)(kn,{size:14,style:{color:w}}),(0,Qr.jsx)("span",{className:"truncate max-w-[180px]",children:M})]}),T&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium",style:{backgroundColor:v?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.8)",color:S,border:`1px solid ${C}`},children:[(0,Qr.jsx)(ul,{size:14,style:{color:j}}),(0,Qr.jsx)("span",{className:"truncate max-w-[180px]",children:T})]})]})]}),g?(0,Qr.jsxs)("div",{className:"p-8 text-center",children:[(0,Qr.jsx)("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-5 shadow-lg",style:{background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)"},children:(0,Qr.jsx)(On,{size:40,style:{color:"#ffffff"}})}),(0,Qr.jsx)("h4",{className:"text-2xl font-bold mb-2",style:{color:S},children:y("quizzes.feedbackModal.successTitle")}),(0,Qr.jsx)("p",{className:"text-sm mb-6",style:{color:E},children:y("quizzes.feedbackModal.successMessage")}),(0,Qr.jsx)("button",{onClick:r,className:"px-8 py-3 rounded-xl font-semibold transition-all shadow-md",style:{background:`linear-gradient(135deg, ${w} 0%, ${w}dd 100%)`,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:y("quizzes.feedbackModal.close")})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:"p-6 space-y-5",children:[O&&(0,Qr.jsxs)("div",{className:"p-4 rounded-xl",style:{backgroundColor:_,border:`1px solid ${C}`},children:[(0,Qr.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:E},children:y("quizzes.feedbackModal.question")}),(0,Qr.jsx)("p",{className:"text-sm leading-relaxed",style:{color:S},dangerouslySetInnerHTML:{__html:O}})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold mb-2",style:{color:S},children:y("quizzes.feedbackModal.messageType")}),(0,Qr.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["feedback","challenge"].map(e=>{const t=l===e,r="challenge"===e?{color:j,bg:`${j}15`}:{color:w,bg:`${w}15`};return(0,Qr.jsxs)("button",{type:"button",onClick:()=>c(e),className:"px-4 py-3 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2",style:{backgroundColor:t?r.bg:_,color:t?r.color:E,border:`2px solid ${t?r.color:"transparent"}`},children:["challenge"===e&&(0,Qr.jsx)(jn,{size:16}),"feedback"===e&&(0,Qr.jsx)(nu,{size:16}),"feedback"===e&&y("quizzes.feedbackModal.optionFeedback"),"challenge"===e&&y("quizzes.feedbackModal.optionChallenge")]},e)})})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-semibold mb-2",style:{color:S},children:y("quizzes.feedbackModal.yourMessage")}),(0,Qr.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),rows:5,className:"w-full px-4 py-3 rounded-xl transition-all focus:outline-none resize-none",style:{backgroundColor:_,border:`2px solid ${C}`,color:S},onFocus:e=>{e.currentTarget.style.borderColor=w,e.currentTarget.style.boxShadow=`0 0 0 3px ${w}20`},onBlur:e=>{e.currentTarget.style.borderColor=C,e.currentTarget.style.boxShadow="none"},placeholder:y("challenge"===l?"quizzes.feedbackModal.placeholderChallenge":"quizzes.feedbackModal.placeholderFeedback")})]}),m&&(0,Qr.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl text-sm",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444"},children:[(0,Qr.jsx)(jn,{size:18}),(0,Qr.jsx)("span",{children:m})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t",style:{borderColor:C,backgroundColor:_},children:[(0,Qr.jsx)("button",{type:"button",onClick:r,className:"px-5 py-2.5 rounded-xl font-semibold transition-all duration-200",style:{color:E,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=v?"rgba(255,255,255,0.1)":`${w}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:y("quizzes.feedbackModal.cancel")}),(0,Qr.jsx)("button",{type:"submit",onClick:async t=>{if(t?.preventDefault?.(),d.trim()){p(!0),h(""),x(!1);try{const t=(()=>{let t="";return(M||n)&&(t+=`(Curso: ${M||`ID ${n}`}) `),(T||o)&&(t+=`(Leccin: ${T||`ID ${o}`}) `),t&&(t+=`(Pregunta ID: ${e?.id})\n\n`),t})()+d.trim();await(async e=>{try{const{endpoints:t}=(0,Fr.getApiConfig)(),r=`${t.custom_api}/feedback/question`;console.log(" Enviando feedback de pregunta:",e);const n=await(0,gn.qb)(r,{method:"POST",body:JSON.stringify(e)});return console.log(" Feedback enviado exitosamente:",n.data),n.data.data}catch(e){throw console.error(" Error al enviar el mensaje de feedback:",e),e}})({question_id:e.id,feedback_type:l,message:t}),x(!0),u("")}catch(e){h(e.message||y("quizzes.feedbackModal.errorSending"))}finally{p(!1)}}else h(y("quizzes.feedbackModal.errorEmptyMessage"))},disabled:f||!d.trim(),className:"px-6 py-2.5 rounded-xl font-semibold flex items-center gap-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",style:{background:`linear-gradient(135deg, ${w} 0%, ${w}dd 100%)`,color:"#ffffff"},onMouseEnter:e=>{!f&&d.trim()&&(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 15px rgba(0,0,0,0.15)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:f?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Mn,{className:"animate-spin",size:18}),y("quizzes.feedbackModal.sending")]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Sn,{size:18}),y("quizzes.feedbackModal.send")]})})]})]})]})})]})},ou=({question:e,result:t,index:r,displayIndex:n,courseId:s=null,courseName:o=null,lessonId:l=null,lessonTitle:c=null})=>{const[d,u]=(0,a.useState)(!1),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)("feedback"),[g,x]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),{t:v}=k(),{getColor:w,isDarkMode:j}=Yr(),N=i().useMemo(()=>Ol(e),[e]);(0,a.useEffect)(()=>{N&&x(N.isFavorite)},[N]);const _=j?w("secondaryBackground","#1f2937"):"#ffffff",C=j?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",S=j?"rgba(255,255,255,0.2)":"#e5e7eb",E=j?"#f9fafb":"#1a202c",O=j?"#9ca3af":"#6b7280";if(!N||!t)return(0,Qr.jsxs)("div",{className:"p-4 border rounded-lg flex items-center",style:{backgroundColor:j?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderColor:j?"rgba(239, 68, 68, 0.3)":"#fecaca"},children:[(0,Qr.jsx)(jn,{className:"h-5 w-5 mr-3",style:{color:"#ef4444"}}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:j?"#fca5a5":"#b91c1c"},children:v("quizzes.reviewedQuestion.errorInvalidData")})]});const{title:M,meta:T,fullExplanation:P}=N,A=T?._question_options||[],{answer_given:q,correct_answer:z,is_correct:D,is_risked:L,error_percentage:I,total_answers:R}=t,$="#22c55e",F="#ef4444",B="#6b7280",U=null==q?"unanswered":D?"correct":"incorrect",H=((e="")=>null==q?B+e:D?$+e:F+e)(),W=e=>{h(e),p(!0)};return(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{id:`question-${n||e.id}`,className:"rounded-lg mb-4 shadow-sm scroll-mt-6 transition-all duration-200",style:{backgroundColor:w("secondaryBackground","#ffffff"),borderTop:`2px solid ${H}40`,borderRight:`2px solid ${H}40`,borderBottom:`2px solid ${H}40`,borderLeft:`4px solid ${H}`},children:[(0,Qr.jsxs)("div",{className:"p-3 border-b flex items-center justify-between",style:{borderColor:H+"15"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center font-bold text-xs",style:{backgroundColor:H+"15",color:E},children:n||r+1}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:["correct"===U&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:$+"15",color:$},children:[(0,Qr.jsx)(On,{size:12,strokeWidth:2.5}),v("quizzes.reviewedQuestion.correct")]}),"incorrect"===U&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:F+"15",color:F},children:[(0,Qr.jsx)(Wi,{size:12,strokeWidth:2.5}),v("quizzes.reviewedQuestion.incorrect")]}),"unanswered"===U&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:B+"15",color:B},children:[(0,Qr.jsx)(eu,{size:12,strokeWidth:2.5}),v("quizzes.reviewedQuestion.unanswered")]}),L&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:w("accent","#f59e0b")+"15",color:w("accent","#f59e0b")},children:[(0,Qr.jsx)(jn,{size:12,strokeWidth:2.5}),v("quizzes.reviewedQuestion.withRisk")]})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)("button",{onClick:async()=>{if(!y){console.log(` BEFORE Toggle - Question ${e.id}:`,{currentState:g,questionDataIsFavorite:e.is_favorite,formattedQuestionIsFavorite:N.isFavorite}),b(!0);try{const t=await ru(e.id);console.log(` AFTER Toggle - Question ${e.id}:`,{response:t,apiReturned_is_favorited:t.is_favorited,previousLocalState:g,newLocalState:t.is_favorited,shouldBeOppositeOf:g,expectedNewState:!g}),x(t.is_favorited)}catch(t){console.error(` Error toggling favorite for question ${e.id}:`,t)}finally{b(!1)}}},disabled:y,className:"p-1.5 rounded-lg transition-all duration-200 disabled:opacity-50",style:{color:g?w("accent","#f59e0b"):O,backgroundColor:g?w("accent","#f59e0b")+"10":"transparent"},onMouseEnter:e=>{y||(e.currentTarget.style.backgroundColor=w("accent","#f59e0b")+"15")},onMouseLeave:e=>{y||(e.currentTarget.style.backgroundColor=g?w("accent","#f59e0b")+"10":"transparent")},title:v("quizzes.reviewedQuestion.markFavorite"),children:(0,Qr.jsx)(tu,{size:16,fill:g?"currentColor":"none",strokeWidth:2})}),(0,Qr.jsx)("button",{onClick:()=>W("feedback"),className:"p-1.5 rounded-lg transition-all duration-200",style:{color:O,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=j?"rgba(255,255,255,0.1)":w("primary","#1a202c")+"10",e.currentTarget.style.color=j?w("textPrimary","#f9fafb"):w("primary","#1a202c")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=O},title:v("quizzes.reviewedQuestion.addComment"),children:(0,Qr.jsx)(Yc,{size:16,strokeWidth:2})}),(0,Qr.jsx)("button",{onClick:()=>W("challenge"),className:"p-1.5 rounded-lg transition-all duration-200",style:{color:O,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=w("error","#ef4444")+"10",e.currentTarget.style.color=w("error","#ef4444")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=O},title:v("quizzes.reviewedQuestion.challenge"),children:(0,Qr.jsx)(jn,{size:16,strokeWidth:2})})]})]}),(0,Qr.jsxs)("div",{className:"p-4",children:[(0,Qr.jsx)("h3",{className:"text-sm font-medium mb-3 leading-relaxed",style:{color:E},dangerouslySetInnerHTML:{__html:M}}),(0,Qr.jsx)("div",{className:"space-y-2",children:A.map((e,t)=>{const r=(n=e.id)==z?L?{backgroundColor:_,borderColor:$,color:$}:{backgroundColor:$+"15",borderColor:$,color:$}:n!=q||D?{backgroundColor:_,borderColor:S,color:E}:L?{backgroundColor:_,borderColor:F,color:F}:{backgroundColor:F+"15",borderColor:F,color:F};var n;const s=e.id==q,a=e.id==z;return(0,Qr.jsxs)("div",{className:"flex items-center gap-3 p-2.5 rounded-lg border-2 transition-all duration-200",style:{backgroundColor:r.backgroundColor,borderColor:r.borderColor},children:[(0,Qr.jsx)("div",{className:"flex-shrink-0",children:a?(0,Qr.jsx)(On,{size:18,strokeWidth:2.5,style:{color:r.color}}):s?(0,Qr.jsx)(Wi,{size:18,strokeWidth:2.5,style:{color:r.color}}):(0,Qr.jsx)(eu,{size:18,strokeWidth:2,style:{color:r.borderColor}})}),(0,Qr.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:r.color+"20",color:r.color},children:String.fromCharCode(65+t)}),(0,Qr.jsx)("span",{className:"text-sm font-medium flex-1",style:{color:r.color},children:e.text})]},e.id)})})]}),R>0&&(0,Qr.jsx)("div",{className:"px-4 py-2.5 text-xs border-t",style:{borderColor:H+"15",color:O},children:v("quizzes.reviewedQuestion.failedBy",{percentage:I,total:R})}),P&&(0,Qr.jsxs)("div",{className:"border-t",style:{borderColor:H+"15"},children:[(0,Qr.jsxs)("button",{onClick:()=>u(!d),className:"flex justify-between items-center w-full px-4 py-3 text-left transition-all duration-200",style:{color:O,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=j?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)("span",{className:"text-xs font-semibold",children:v("quizzes.reviewedQuestion.answerExplanation")}),d?(0,Qr.jsx)(Qi,{size:16,strokeWidth:2}):(0,Qr.jsx)(Vi,{size:16,strokeWidth:2})]}),d&&(0,Qr.jsx)("div",{className:"px-4 pb-3",children:(0,Qr.jsx)("div",{className:"rounded-lg p-3",style:{backgroundColor:C},children:(0,Qr.jsx)("div",{className:"text-xs leading-relaxed",style:{color:O},dangerouslySetInnerHTML:{__html:P}})})})]})]}),f&&(0,Qr.jsx)(au,{question:e,initialFeedbackType:m,onClose:()=>p(!1),courseId:s,courseName:o,lessonId:l,lessonTitle:c})]})},iu=cn("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),lu=({label:e,value:t,icon:r,bgColor:n,textColor:s,bgCard:a})=>(0,Qr.jsxs)("div",{className:"text-center p-3 rounded-lg border-2",style:{backgroundColor:a,borderColor:s},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-center mb-1.5",children:[(0,Qr.jsx)(r,{className:"w-4 h-4 mr-1.5",style:{color:s}}),(0,Qr.jsx)("span",{className:"text-[10px] font-semibold uppercase tracking-wider",style:{color:s},children:e})]}),(0,Qr.jsx)("span",{className:"block text-xl font-bold",style:{color:s},children:t})]}),cu=({result:e,questions:t})=>{const{formatScore:r}=gd(),{t:n}=k(),{getColor:s,isDarkMode:a}=Yr(),o="#22c55e",i="#ef4444",l=a?"#9ca3af":"#6b7280",c=a?s("textPrimary","#f9fafb"):s("primary","#1a202c"),d=a?s("secondaryBackground","#1f2937"):"#ffffff",u=a?"rgba(255,255,255,0.05)":s("primary","#1a202c")+"05";if(!e)return null;const{score:f,score_with_risk:p,detailed_results:m,duration_seconds:h}=e,g=t?t.map(e=>m.find(t=>t.question_id===e.id)).filter(Boolean):m;return(0,Qr.jsx)("aside",{className:"w-full pt-2",children:(0,Qr.jsxs)("div",{className:"sticky top-14 p-4 rounded-lg border-2 shadow-sm max-h-[calc(100vh-5rem)] overflow-y-auto",style:{backgroundColor:s("secondaryBackground","#ffffff"),borderColor:a?s("accent","#f59e0b"):s("borderColor","#e5e7eb")},children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold mb-4 text-center",style:{color:c},children:n("quizzes.resultsSidebar.title")}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 gap-2 mb-4",children:[(0,Qr.jsx)(lu,{label:n("quizzes.resultsSidebar.score"),value:r(f),icon:rl,bgColor:s("primary","#1a202c")+"10",textColor:a?s("textPrimary","#f9fafb"):s("primary","#1a202c"),bgCard:d}),(0,Qr.jsx)(lu,{label:n("quizzes.resultsSidebar.scoreWithRisk"),value:r(p),icon:iu,bgColor:s("accent","#f59e0b")+"15",textColor:s("accent","#f59e0b"),bgCard:d}),(0,Qr.jsx)(lu,{label:n("quizzes.resultsSidebar.timeSpent"),value:(e=>null==e?"N/A":`${Math.floor(e/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`)(h),icon:Ec,bgColor:s("primary","#1a202c")+"10",textColor:a?s("textPrimary","#f9fafb"):s("primary","#1a202c"),bgCard:d})]}),(0,Qr.jsx)("h4",{className:"text-xs font-semibold mb-2",style:{color:c},children:n("quizzes.resultsSidebar.questionsMap")}),(0,Qr.jsx)("div",{className:"grid grid-cols-5 gap-1.5 p-2 rounded-lg",style:{backgroundColor:u},children:g&&g.map((e,t)=>{let r,s,a,c;return null!==e.answer_given&&void 0!==e.answer_given?e.is_risked?(r=d,s=e.is_correct?o:i,a=e.is_correct?o:i,c=e.is_correct?n("quizzes.resultsSidebar.questionCorrectWithRisk",{number:t+1}):n("quizzes.resultsSidebar.questionIncorrectWithRisk",{number:t+1})):(r=e.is_correct?o+"20":i+"20",s=e.is_correct?o:i,a=e.is_correct?o:i,c=e.is_correct?n("quizzes.resultsSidebar.questionCorrect",{number:t+1}):n("quizzes.resultsSidebar.questionIncorrect",{number:t+1})):(r=l+"20",s=l,a=l,c=n("quizzes.resultsSidebar.questionUnanswered",{number:t+1})),(0,Qr.jsx)("button",{onClick:()=>(e=>{const t=document.getElementById(`question-${e}`);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.style.borderLeftWidth="8px",t.style.transition="border-left-width 0.3s ease",setTimeout(()=>{t.style.borderLeftWidth="4px"},2e3))})(t+1),className:"w-full aspect-square rounded text-xs font-bold transition-all duration-200 flex items-center justify-center cursor-pointer border",style:{backgroundColor:r,borderColor:s,color:a},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.1)",e.currentTarget.style.boxShadow=`0 4px 8px ${s}40`},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="none"},title:c,"aria-label":c,children:t+1},e.question_id)})})]})})},du=({result:e,quizTitle:t,questions:r,noPadding:n=!1,courseId:s=null,courseName:o=null,lessonId:i=null,lessonTitle:l=null})=>{const{t:c}=k(),{formatScore:d}=gd(),{getColor:u,isDarkMode:f}=Yr(),[p,m]=(0,a.useState)(!1),h="#10b981",g="#ef4444",x=f?"#9ca3af":"#6b7280",y=u("primary","#3b82f6"),b=u("accent","#f59e0b"),v={text:f?u("textPrimary","#f9fafb"):u("primary","#1a202c"),textMuted:u("textSecondary","#6b7280"),accent:b,bg:f?u("secondaryBackground","#1f2937"):"#ffffff",border:f?b:`${y}20`};if(!e)return(0,Qr.jsx)("div",{className:"text-center p-8",style:{color:u("text","#6b7280")},children:c("quizzes.loadingResults")});const{detailed_results:w,score:j,score_with_risk:N,average_score:_,average_score_with_risk:C}=e,S=w?.filter(e=>e.is_correct).length||0,E=w?.filter(e=>!e.is_correct&&null!==e.answer_given).length||0,O=w?.filter(e=>null===e.answer_given).length||0,M=w?.filter(e=>e.is_risked&&null!==e.answer_given).length||0;console.log("QuizResults - detailed_results:",w),console.log("QuizResults - answeredWithRisk:",M),console.log("QuizResults - is_risked values:",w?.map(e=>({question_id:e.question_id,is_risked:e.is_risked,answer_given:e.answer_given})));const T=null!=_?_:null,P=null!=C?C:null,A=null!==T?(j-T).toFixed(2):null,q=null!==P?(N-P).toFixed(2):null;return(0,Qr.jsxs)("div",{className:"h-full flex flex-col relative overflow-hidden",style:{backgroundColor:u("secondaryBackground","#f3f4f6")},children:[p&&(0,Qr.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>m(!1)}),(0,Qr.jsx)("button",{onClick:()=>m(!0),className:"lg:hidden fixed bottom-14 right-6 z-50 p-4 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:u("primary","#3b82f6"),color:"#ffffff"},"aria-label":"Abrir resumen de resultados",children:(0,Qr.jsx)(jd,{className:"w-6 h-6"})}),(0,Qr.jsx)("div",{className:"flex-1 overflow-hidden "+(n?"":"p-4"),children:(0,Qr.jsxs)("div",{className:"w-full h-full max-w-screen-2xl mx-auto flex flex-col lg:flex-row-reverse gap-6",children:[(0,Qr.jsxs)("aside",{className:`\n            fixed lg:relative\n            top-0 right-0 \n            h-full lg:h-auto\n            w-80 lg:w-80\n            flex-shrink-0\n            transition-transform duration-300\n            z-50 lg:z-auto\n            ${p?"translate-x-0":"translate-x-full lg:translate-x-0"}\n            ${n?"lg:sticky lg:top-4":""}\n          `,style:{backgroundColor:p?u("background","#ffffff"):"transparent"},children:[(0,Qr.jsxs)("div",{className:"lg:hidden flex items-center justify-between px-4 py-5 border-b",style:{borderColor:u("borderColor","#e5e7eb")},children:[(0,Qr.jsx)("h3",{className:"font-bold text-xl",style:{color:v.text},children:c("quizzes.results.summary")}),(0,Qr.jsx)("button",{onClick:()=>m(!1),className:"p-2 rounded-lg transition-colors",style:{color:v.text},children:(0,Qr.jsx)(En,{className:"w-6 h-6"})})]}),(0,Qr.jsx)("div",{className:"overflow-y-auto h-[calc(100%-88px)] lg:h-auto px-4 py-4 lg:p-0",children:(0,Qr.jsx)(cu,{result:e,questions:r})})]}),(0,Qr.jsxs)("main",{className:"flex-1 w-full lg:w-auto overflow-y-auto "+(n?"px-4 sm:px-6 lg:px-4 py-4 lg:py-4 pb-24 lg:pb-12":"px-4 lg:pr-4 py-4 lg:pb-8 pb-24"),children:[(0,Qr.jsx)("div",{className:"hidden lg:block rounded-lg p-4 mb-4 shadow-sm "+(n?"mt-4":""),style:{backgroundColor:y},children:(0,Qr.jsx)("h2",{className:"text-xl font-bold",style:{color:u("textColorContrast","#ffffff")},children:c("quizzes.results.title")})}),(0,Qr.jsxs)("div",{className:"rounded-xl overflow-hidden border-2 mb-4 "+(n?"mt-4 lg:mt-0":""),style:{backgroundColor:v.bg,borderColor:v.border},children:[(0,Qr.jsxs)("div",{className:"px-4 py-2 flex items-center gap-2 flex-wrap",style:{backgroundColor:f?"rgba(255,255,255,0.05)":`${y}08`},children:[(0,Qr.jsx)(qc,{size:14,style:{color:f?v.accent:y}}),(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",style:{color:v.text},children:c("quizzes.results.summary")}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 ml-auto text-[10px] sm:text-xs",children:[(0,Qr.jsxs)("span",{className:"flex items-center gap-1",style:{color:h},children:[(0,Qr.jsx)(On,{size:12}),(0,Qr.jsx)("span",{className:"hidden sm:inline",children:c("quizzes.results.correct")})," ",S]}),(0,Qr.jsxs)("span",{className:"flex items-center gap-1",style:{color:x},children:[(0,Qr.jsx)(Jd,{size:12}),(0,Qr.jsx)("span",{className:"hidden sm:inline",children:c("quizzes.results.unanswered")})," ",O]}),(0,Qr.jsxs)("span",{className:"flex items-center gap-1",style:{color:g},children:[(0,Qr.jsx)(Wi,{size:12}),(0,Qr.jsx)("span",{className:"hidden sm:inline",children:c("quizzes.results.incorrect")})," ",E]}),M>0&&(0,Qr.jsxs)("span",{className:"flex items-center gap-1",style:{color:v.accent},children:[(0,Qr.jsx)(rl,{size:12}),(0,Qr.jsx)("span",{className:"hidden sm:inline",children:c("quizzes.results.answeredWithRisk")})," ",M]})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:y},children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",style:{color:"#ffffff"},children:c("quizzes.results.scoreWithoutRisk")}),(0,Qr.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#ffffff"}})]})}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3 gap-4 px-4 py-3",children:[(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:v.textMuted},children:c("quizzes.results.myScore")}),(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:v.text},children:d(j)})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:v.textMuted},children:c("quizzes.results.globalAverage")}),(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:v.text},children:null!==T?d(T):"-"})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:v.textMuted},children:c("quizzes.results.percentile")}),null!==A?(0,Qr.jsxs)("p",{className:"text-lg font-bold",style:{color:parseFloat(A)>=0?h:g},children:[parseFloat(A)>=0?"+":"",d(parseFloat(A))]}):(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:v.textMuted},children:"-"})]})]})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:v.accent},children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",style:{color:"#ffffff"},children:c("quizzes.results.scoreWithRisk")}),(0,Qr.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#ffffff"}})]})}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3 gap-4 px-4 py-3",children:[(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:v.textMuted},children:c("quizzes.results.myScore")}),(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:v.accent},children:d(N)})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:v.textMuted},children:c("quizzes.results.globalAverage")}),(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:v.accent},children:null!==P?d(P):"-"})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:v.textMuted},children:c("quizzes.results.percentile")}),null!==q?(0,Qr.jsxs)("p",{className:"text-lg font-bold",style:{color:parseFloat(q)>=0?h:g},children:[parseFloat(q)>=0?"+":"",d(parseFloat(q))]}):(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:v.textMuted},children:"-"})]})]})]})]}),w&&r?(0,Qr.jsx)("div",{className:"space-y-4 "+(n?"pb-6":""),children:r.map((e,t)=>(0,Qr.jsx)(ou,{question:e,result:w.find(t=>t.question_id===e.id),displayIndex:t+1,courseId:s,courseName:o,lessonId:i,lessonTitle:l},e.id))}):(0,Qr.jsx)("p",{className:n?"pb-6":"",style:{color:u("text","#6b7280")},children:c("quizzes.noDetailedResults")})]})]})})]})},uu=()=>{const{attemptId:e}=pt(),t=lt(),r=ut(),{details:n,loading:s,error:a}=Zd(e),o=t.state?.returnTo||"/",i=t.state?.courseId||null,l=t.state?.courseName||null,c=t.state?.lessonId||null,d=t.state?.lessonTitle||null;if(s)return(0,Qr.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Qr.jsx)(Mn,{className:"animate-spin"})});if(a)return(0,Qr.jsx)("div",{className:"p-8 text-red-600 bg-red-50 rounded-md",children:a});if(!n)return(0,Qr.jsx)("div",{className:"p-8",children:"No se encontraron detalles para este intento."});const u={...n.attempt,detailed_results:n.detailed_results},f=n.attempt.quizTitle,p=n.questions;return(0,Qr.jsxs)("div",{className:"container mx-auto p-6",children:[(0,Qr.jsxs)(ac,{onClick:()=>{o&&"/"!==o&&t.state?.returnToQuiz?r(o,{state:{selectedQuizId:t.state.returnToQuiz,scrollToQuiz:!0}}):r(o&&"/"!==o?o:"/")},variant:"primary",className:"inline-flex items-center px-4 py-2 mb-6 text-sm font-medium rounded-lg shadow-sm",children:[(0,Qr.jsx)(kl,{className:"w-4 h-4 mr-2"}),t.state?.fromQuizConfirmation?"Volver al Cuestionario":"Volver al Dashboard"]}),(0,Qr.jsx)(du,{result:u,quizTitle:f,questions:p,courseId:i,courseName:l,lessonId:c,lessonTitle:d})]})},fu=cn("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),pu=({course:e})=>{const{t}=k(),{getColor:r,isDarkMode:n}=Yr(),{id:s,title:o,_embedded:i}=e,l={text:n?r("textPrimary","#f9fafb"):r("primary","#1a202c"),textMuted:n?r("textSecondary","#9ca3af"):`${r("primary","#1a202c")}70`,primary:r("primary","#3b82f6"),accent:r("accent","#f59e0b"),cardBg:n?r("secondaryBackground","#1f2937"):r("background","#ffffff"),secondaryBg:r("secondaryBackground","#1f2937"),hoverBg:n?"rgba(255,255,255,0.05)":`${r("primary","#1a202c")}08`,borderColor:n?r("accent","#f59e0b"):r("primary","#3b82f6"),buttonBg:n?r("accent","#f59e0b"):r("primary","#3b82f6"),buttonText:n?r("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:n?r("primary","#3b82f6"):r("accent","#f59e0b")},{progress:c}=Rd(s,!0,!0),d=i?.["wp:featuredmedia"]?.[0]?.source_url,u=o?.rendered||o||t("courses.title"),f=c?.percentage||0,p=c?.steps_by_type||{quiz:{total:0,completed:0},video:{total:0,completed:0},text:{total:0,completed:0},pdf:{total:0,completed:0}},m=(0,a.useMemo)(()=>{const e=[];(p.quiz?.total||0)>0&&e.push({type:"quiz",completed:p.quiz.completed,total:p.quiz.total,icon:fu,label:t("courses.test")});const r=(p.text?.total||0)+(p.pdf?.total||0);return r>0&&e.push({type:"material",completed:(p.text?.completed||0)+(p.pdf?.completed||0),total:r,icon:ul,label:t("courses.material")}),(p.video?.total||0)>0&&e.push({type:"video",completed:p.video.completed,total:p.video.total,icon:fl,label:t("courses.videos")}),e},[p,t]);return(0,Qr.jsxs)("div",{className:"rounded-lg shadow-sm overflow-hidden flex flex-col w-full max-w-sm transition-all duration-300 hover:shadow-lg",style:{backgroundColor:l.cardBg,border:`2px solid ${l.borderColor}`},children:[d?(0,Qr.jsx)("div",{className:"aspect-square bg-cover bg-center",style:{backgroundImage:`url(${d})`}}):(0,Qr.jsx)("div",{className:"aspect-square flex items-center justify-center",style:{backgroundColor:l.primary},children:(0,Qr.jsx)(kn,{className:"w-20 h-20 text-white opacity-50"})}),(0,Qr.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,Qr.jsxs)("div",{className:"p-4 pb-0",children:[(0,Qr.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Qr.jsx)("span",{className:"text-sm font-semibold",style:{color:l.textMuted},children:t("courses.progress")}),(0,Qr.jsxs)("span",{className:"text-lg font-bold",style:{color:l.text},children:[f,"%"]})]}),(0,Qr.jsx)("div",{className:"rounded-full h-3 overflow-hidden",style:{backgroundColor:n?"rgba(255,255,255,0.1)":`${l.primary}15`},children:(0,Qr.jsx)("div",{className:"h-full transition-all duration-500 rounded-full",style:{width:`${f}%`,backgroundColor:l.primary}})})]}),m.length>0&&(0,Qr.jsx)("div",{className:"mt-4 overflow-hidden",style:{borderTop:"2px solid "+(n?"rgba(255,255,255,0.1)":`${l.primary}15`),borderBottom:"2px solid "+(n?"rgba(255,255,255,0.1)":`${l.primary}15`)},children:(0,Qr.jsx)("div",{className:"grid h-full",style:{gridTemplateColumns:`repeat(${m.length}, 1fr)`,minHeight:"80px"},children:m.map((e,t)=>(0,Qr.jsxs)("div",{className:"flex flex-col items-center justify-center py-3 transition-all duration-200 "+(t<m.length-1?"border-r":""),style:{borderColor:n?"rgba(255,255,255,0.1)":`${l.primary}15`,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=l.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,Qr.jsx)(e.icon,{size:20,style:{color:l.text},className:"mb-1"}),(0,Qr.jsxs)("span",{className:"text-xs font-bold",style:{color:l.text},children:[e.completed,"/",e.total]}),(0,Qr.jsx)("span",{className:"text-xs mt-0.5",style:{color:l.textMuted},children:e.label})]},e.type))})}),(0,Qr.jsx)("div",{className:"flex-1"}),(0,Qr.jsx)("div",{className:"p-4 pt-4",children:(0,Qr.jsx)(Zt,{to:`/courses/${s}/dashboard`,state:{courseName:u},className:"block w-full py-3 px-4 text-center text-base font-semibold rounded-lg transition-all shadow-sm hover:shadow-md",style:{backgroundColor:l.buttonBg,color:l.buttonText},onMouseEnter:e=>{n?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=l.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=l.buttonBg},children:(0,Qr.jsx)("span",{dangerouslySetInnerHTML:{__html:u}})})})]})]})},mu=({icon:e,title:t,message:r,colors:n})=>(0,Qr.jsxs)("div",{className:"text-center py-16",children:[(0,Qr.jsx)(e,{className:"mx-auto h-12 w-12",style:{color:n?.textMuted||"#9ca3af"}}),(0,Qr.jsx)("h3",{className:"mt-2 text-lg font-semibold",style:{color:n?.text||"#111827"},children:t}),(0,Qr.jsx)("p",{className:"mt-1 text-sm",style:{color:n?.textMuted||"#6b7280"},children:r})]}),hu=()=>{const{t:e}=k(),{getColor:t,isDarkMode:r,toggleDarkMode:n}=Yr(),s=$d(),[o,i]=(0,a.useState)(!1),l=window.qe_data?.home_url||"",c=window.qe_data?.logout_url,d={text:r?t("textPrimary","#f9fafb"):t("primary","#1a202c"),textMuted:r?t("textSecondary","#9ca3af"):`${t("primary","#1a202c")}70`,accent:t("accent","#f59e0b"),primary:t("primary","#3b82f6"),hoverBg:r?t("accent","#f59e0b"):t("primary","#1a202c")},{courses:u,loading:f,error:p}=xs({autoFetch:!0,embed:!0,status:"publish",enrolledOnly:!s}),m=(0,a.useMemo)(()=>u&&0!==u.length?[...u].sort((e,t)=>{const r=parseInt(e.meta?._course_position)||0,n=parseInt(t.meta?._course_position)||0;if(r!==n)return r-n;const s=(e.title?.rendered||e.title||"").toLowerCase(),a=(t.title?.rendered||t.title||"").toLowerCase();return s.localeCompare(a)}):[],[u]),h=[{to:"/courses",text:e("sidebar.studyPlanner"),icon:kn,type:"internal"},{to:`${l}/mi-cuenta/downloads/`,text:e("sidebar.books"),icon:ul,type:"external"},{to:l,text:e("sidebar.exitCampus"),icon:wd,type:"exit"}];return(0,Qr.jsxs)("div",{className:"h-full w-full overflow-y-auto p-6",style:{backgroundColor:t("secondaryBackground","#f3f4f6")},children:[(0,Qr.jsx)("button",{onClick:()=>i(!0),className:"md:hidden fixed top-6 right-6 z-40 p-4 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:t("primary","#3b82f6"),color:"#ffffff"},"aria-label":"Abrir men",children:(0,Qr.jsx)(jd,{className:"w-6 h-6"})}),o&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>i(!1)}),(0,Qr.jsxs)("div",{className:"fixed top-0 right-0 h-full w-80 z-50 shadow-2xl overflow-y-auto",style:{backgroundColor:t("background","#ffffff")},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b",style:{borderColor:r?"rgba(255,255,255,0.1)":t("borderColor","#e5e7eb")},children:[(0,Qr.jsx)("h2",{className:"text-xl font-bold",style:{color:d.text},children:e("sidebar.menu")}),(0,Qr.jsx)("button",{onClick:()=>i(!1),className:"p-2 rounded-lg transition-colors",style:{color:d.text},children:(0,Qr.jsx)(En,{className:"w-6 h-6"})})]}),(0,Qr.jsxs)("nav",{className:"p-4 space-y-2",children:[h.map(e=>"exit"===e.type?(0,Qr.jsxs)("a",{href:e.to,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:d.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=r?"rgba(255,255,255,0.1)":`${d.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)(e.icon,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{children:e.text})]},e.to):"external"===e.type?(0,Qr.jsxs)("a",{href:e.to,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:d.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=r?"rgba(255,255,255,0.1)":`${d.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)(e.icon,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{children:e.text})]},e.to):(0,Qr.jsxs)(Jt,{to:e.to,end:!0,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:({isActive:e})=>({backgroundColor:e?d.primary:"transparent",color:e?"#ffffff":d.text}),onMouseEnter:e=>{"page"===e.currentTarget.getAttribute("aria-current")||(e.currentTarget.style.backgroundColor=r?"rgba(255,255,255,0.1)":`${d.primary}10`)},onMouseLeave:e=>{"page"===e.currentTarget.getAttribute("aria-current")||(e.currentTarget.style.backgroundColor="transparent")},onClick:()=>i(!1),children:[(0,Qr.jsx)(e.icon,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{children:e.text})]},e.to)),(0,Qr.jsx)("div",{className:"my-4",style:{height:"1px",backgroundColor:r?"rgba(255,255,255,0.1)":t("borderColor","#e5e7eb")}}),(0,Qr.jsxs)("button",{onClick:n,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:d.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=r?"rgba(255,255,255,0.1)":`${d.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[r?(0,Qr.jsx)(id,{className:"w-5 h-5"}):(0,Qr.jsx)(ld,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{children:e(r?"sidebar.lightMode":"sidebar.darkMode")})]}),(0,Qr.jsxs)("a",{href:`${l}/mi-cuenta/edit-account/`,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:d.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=r?"rgba(255,255,255,0.1)":`${d.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)(Cn,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{children:e("sidebar.myAccount")})]}),c&&(0,Qr.jsxs)("a",{href:c,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:d.primary,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=d.accent},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=d.primary},children:[(0,Qr.jsx)(kd,{className:"w-5 h-5"}),(0,Qr.jsx)("span",{children:e("sidebar.logout")})]})]})]})]}),(0,Qr.jsx)("main",{children:f&&0===m.length?(0,Qr.jsx)(mu,{icon:Mn,title:e("courses.loadingCourses"),message:e("common.processing"),colors:d}):p?(0,Qr.jsx)(mu,{icon:jn,title:e("notifications.error"),message:p,colors:d}):m&&0!==m.length?(0,Qr.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 justify-items-center",children:m.map(e=>(0,Qr.jsx)(pu,{course:e},e.id))}):(0,Qr.jsx)(mu,{icon:Gc,title:e("courses.noCourses"),message:e("courses.noCoursesDescription"),colors:d})})]})},gu=new Map,xu=new Map,yu=e=>{const[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)(!!e),[o,i]=(0,a.useState)(null),l=(0,a.useCallback)(async(t=!1)=>{if(!e)return r(null),void s(!1);const n=parseInt(e,10);if(isNaN(n))return i(new Error("Invalid course ID")),void s(!1);if(!t&&gu.has(n))return r(gu.get(n)),void s(!1);if(xu.has(n)){s(!0),i(null);try{const e=await xu.get(n);r(e)}catch(e){i(e)}finally{s(!1)}return}s(!0),i(null);const a=Qn(n,{embed:!1});xu.set(n,a);try{const e=await a;gu.set(n,e),r(e)}catch(e){console.error(`Error fetching course ${n}:`,e),i(e)}finally{xu.delete(n),s(!1)}},[e]);return(0,a.useEffect)(()=>{e?l():(r(null),s(!1))},[e,l]),{course:t,loading:n,error:o,refetch:()=>l(!0)}},bu=cn("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),vu=cn("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),wu=({isMobileMenuOpen:e,setIsMobileMenuOpen:t})=>{const{courseId:r}=pt(),[n,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)(()=>{const e=sessionStorage.getItem(`courseProgress_${r}`);return e?JSON.parse(e):null}),[c,d]=(0,a.useState)(r),{t:u}=k(),{getColor:f,isDarkMode:p,toggleDarkMode:m}=Yr(),{course:h}=yu(r),g=h?.title?.rendered||h?.title||"",x=window.qe_data?.home_url||"",y=window.qe_data?.logout_url;(0,a.useEffect)(()=>{if(r!==c){d(r);const e=sessionStorage.getItem(`courseProgress_${r}`);if(e)return void l(JSON.parse(e))}o||r&&Id(r).then(e=>{l(e),sessionStorage.setItem(`courseProgress_${r}`,JSON.stringify(e))}).catch(e=>{console.error("Error loading course progress:",e)});const e=e=>{e.detail?.courseId&&String(e.detail.courseId)===String(r)&&Id(r).then(e=>{l(e),sessionStorage.setItem(`courseProgress_${r}`,JSON.stringify(e))}).catch(e=>{console.error("Error loading course progress:",e)})};return window.addEventListener("courseProgressUpdated",e),()=>window.removeEventListener("courseProgressUpdated",e)},[r,c,o]);const b=(0,a.useMemo)(()=>{const e=o?.steps_by_type||{},t=[{to:`/courses/${r}/study-planner`,text:u("courses.studyPlanner"),icon:tl,divider:!0}];e.quiz?.total>0&&t.push({to:`/courses/${r}/tests`,text:u("courses.tests"),icon:fu,badge:`${e.quiz.completed}/${e.quiz.total}`});const n=(e.text?.total||0)+(e.pdf?.total||0);return n>0&&t.push({to:`/courses/${r}/material`,text:u("courses.supportMaterial"),icon:ul,badge:`${(e.text?.completed||0)+(e.pdf?.completed||0)}/${n}`}),e.video?.total>0?t.push({to:`/courses/${r}/videos`,text:u("courses.videosSection"),icon:fl,divider:!0,badge:`${e.video.completed}/${e.video.total}`}):t.length>0&&!t[t.length-1].divider&&(t[t.length-1].divider=!0),t.push({to:`/courses/${r}/test-generator`,text:u("courses.testGenerator"),icon:bu},{to:`/courses/${r}/self-paced-tests`,text:u("courses.selfPacedTests"),icon:Ec},{to:`/courses/${r}/test-history`,text:u("courses.testHistory"),icon:vu}),t},[r,o,u]),v=f("primary","#3b82f6"),w=f("secondary","#8b5cf6"),j=f("accent","#f59e0b"),N=(f("textPrimary","#f9fafb"),f("secondaryBackground","#1f2937")),_=f("background","#ffffff"),C={text:p?j:v,hoverBg:p?j:v,hoverText:p?N:"#ffffff",hoverBorder:p?j:w,hoverBoxShadow:p?`inset 0 0 0 2px ${_}`:"inset 0 0 0 2px #ffffff",activeBg:p?j:v,activeText:p?N:"#ffffff",activeBorder:p?"transparent":v,badgeBg:p?`${j}30`:`${v}20`,badgeText:p?j:v},S=(e,t,r)=>{if(!r)if(t){e.currentTarget.style.backgroundColor=C.hoverBg,e.currentTarget.style.borderColor=C.hoverBorder,e.currentTarget.style.color=C.hoverText,e.currentTarget.style.boxShadow=C.hoverBoxShadow;const t=e.currentTarget.querySelector(".badge-course");t&&(t.style.backgroundColor="rgba(255, 255, 255, 0.2)",t.style.color=C.hoverText)}else{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor="transparent",e.currentTarget.style.color=C.text,e.currentTarget.style.boxShadow="none";const t=e.currentTarget.querySelector(".badge-course");t&&(t.style.backgroundColor=C.badgeBg,t.style.color=C.badgeText)}};return(0,Qr.jsxs)(Qr.Fragment,{children:[e&&(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>t(!1)}),(0,Qr.jsx)("div",{className:`fixed top-0 left-0 h-full lg:relative lg:top-auto lg:left-auto lg:h-full transition-all duration-300 z-50 lg:z-auto shadow-lg lg:shadow-none w-64 ${n&&"lg:w-20"} ${e?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,style:{backgroundColor:f("background","#ffffff")},children:(0,Qr.jsxs)("aside",{className:"h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"p-4",children:[(0,Qr.jsxs)("div",{className:"flex gap-2 mb-2 justify-between "+(n?"lg:justify-center":"lg:justify-between"),style:{alignItems:"center",minHeight:"40px"},children:[!n&&(0,Qr.jsx)("h2",{className:"text-base font-bold truncate flex-1",style:{color:C.text,lineHeight:"24px",display:"flex",alignItems:"center"},title:g,children:(0,Qr.jsx)("span",{dangerouslySetInnerHTML:{__html:g}})}),(0,Qr.jsx)("button",{onClick:()=>s(!n),type:"button",title:u(n?"sidebar.expand":"sidebar.collapse"),className:"hidden lg:flex transition-colors cursor-pointer flex-shrink-0",style:{color:C.text,width:"24px",height:"24px",alignItems:"center",justifyContent:"center",padding:0,border:"none",background:"none"},onMouseEnter:e=>e.currentTarget.style.color=j,onMouseLeave:e=>e.currentTarget.style.color=C.text,children:n?(0,Qr.jsx)(al,{size:24}):(0,Qr.jsx)(sl,{size:24})})]}),(0,Qr.jsx)("div",{className:"w-full h-[2px]",style:{backgroundColor:`${C.text}40`}})]}),(0,Qr.jsxs)("div",{className:"lg:hidden px-2 pb-3 space-y-1.5",children:[(0,Qr.jsxs)(Jt,{to:"/courses",onClick:()=>t(!1),className:"flex items-center gap-2 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:C.text,border:`1px solid ${C.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=C.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=C.text},children:[(0,Qr.jsx)(kn,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{className:"text-xs font-medium",children:u("sidebar.studyPlanner")})]}),(0,Qr.jsxs)("a",{href:`${x}/mi-cuenta/downloads/`,className:"flex items-center gap-2 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:C.text,border:`1px solid ${C.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=C.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=C.text},children:[(0,Qr.jsx)(ul,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{className:"text-xs font-medium",children:u("sidebar.books")})]}),(0,Qr.jsxs)("a",{href:x,className:"flex items-center gap-2 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:C.text,border:`1px solid ${C.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=C.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=C.text},children:[(0,Qr.jsx)(wd,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{className:"text-xs font-medium",children:u("sidebar.exitCampus")})]}),(0,Qr.jsxs)("div",{className:"flex gap-1.5 pt-1.5",children:[(0,Qr.jsx)("button",{onClick:m,className:"flex-1 flex items-center justify-center gap-1 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:C.text,border:`1px solid ${C.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=C.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=C.text},title:u(p?"sidebar.lightMode":"sidebar.darkMode"),children:p?(0,Qr.jsx)(id,{className:"w-4 h-4"}):(0,Qr.jsx)(ld,{className:"w-4 h-4"})}),(0,Qr.jsx)("a",{href:`${x}/mi-cuenta/edit-account/`,className:"flex-1 flex items-center justify-center gap-1 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:C.text,border:`1px solid ${C.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=C.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=C.text},title:u("sidebar.myAccount"),children:(0,Qr.jsx)(Cn,{className:"w-4 h-4"})}),y&&(0,Qr.jsx)("a",{href:y,className:"flex-1 flex items-center justify-center gap-1 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:C.activeBg,color:"#ffffff",border:`1px solid ${C.activeBg}`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=j},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=C.activeBg},title:u("sidebar.logout"),children:(0,Qr.jsx)(kd,{className:"w-4 h-4"})})]}),(0,Qr.jsx)("div",{className:"w-full h-[2px] mt-4",style:{backgroundColor:`${C.text}40`}})]}),(0,Qr.jsx)("nav",{className:"flex-1 px-2 space-y-2 overflow-hidden overflow-y-auto",children:b.map(e=>(0,Qr.jsxs)(i().Fragment,{children:[(0,Qr.jsx)(Jt,{to:e.to,end:!0,onClick:()=>t(!1),className:({isActive:e})=>"flex items-center p-2 transition-all duration-200 rounded-lg border-[2px] "+(n?"justify-center":""),style:({isActive:e})=>(e=>e?{backgroundColor:C.activeBg,borderColor:C.activeBorder,color:C.activeText}:{backgroundColor:"transparent",borderColor:"transparent",color:C.text})(e),onMouseEnter:e=>{const t="page"===e.currentTarget.getAttribute("aria-current");S(e,!0,t)},onMouseLeave:e=>{const t="page"===e.currentTarget.getAttribute("aria-current");S(e,!1,t)},title:n?e.text:"",children:({isActive:t})=>(0,Qr.jsxs)("div",{className:"flex items-center relative w-full "+(n?"justify-center":""),children:[(0,Qr.jsx)(e.icon,{className:"w-5 h-5",style:{color:t?C.activeText:"currentColor"}}),!n&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("span",{className:"ml-3 text-base flex-1",style:{color:t?C.activeText:"currentColor"},children:e.text}),e.badge&&(0,Qr.jsx)("span",{className:"badge-course text-xs font-semibold px-2 py-0.5 rounded relative z-10",style:{backgroundColor:t?"rgba(255, 255, 255, 0.2)":C.badgeBg,color:t?C.activeText:C.badgeText},children:e.badge})]})]})}),e.divider&&(0,Qr.jsx)("div",{className:"px-4 py-2",children:(0,Qr.jsx)("div",{className:"w-full h-[2px]",style:{backgroundColor:`${C.text}40`}})})]},e.to))})]})})]})},ju=({courseId:e,courseName:t,sectionName:r,children:n})=>{const{t:s}=k(),{getColor:o}=Yr(),{isMobileMenuOpen:i,setIsMobileMenuOpen:l}=a.useContext(ft);return(0,Qr.jsxs)("div",{className:"flex h-full w-full overflow-hidden",style:{backgroundColor:o("secondaryBackground","#f8f9fa")},children:[(0,Qr.jsx)(wu,{isMobileMenuOpen:i,setIsMobileMenuOpen:l}),(0,Qr.jsx)("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden",children:(0,Qr.jsx)("main",{className:"flex-1 w-full h-full overflow-y-auto overflow-x-hidden",children:n})})]})},Nu=cn("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ku=({courseId:e})=>{const{t}=k(),r=ut(),{getColor:n,isDarkMode:s}=Yr(),[o,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(!1),f={text:s?"#ffffff":n("primary","#1a202c"),textMuted:s?"rgba(255,255,255,0.7)":n("textMuted","#6b7280"),accent:n("accent","#f59e0b"),primary:n("primary","#1a202c"),cardBg:s?n("secondaryBackground","#1f2937"):"#ffffff",border:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"};if((0,a.useEffect)(()=>{(async()=>{try{const t=await Yd.getLatestAutosave();if(console.log(" PendingQuizBanner - Autosave data:",t,"courseId:",e),t){const r=t.course_id||t.quiz_data?.course_id||t.quiz_data?.meta?._quiz_course_id||t.quiz_data?.meta?.course_id;console.log(" Quiz course ID found:",r,"Current course:",e),e&&r?String(r)===String(e)&&i(t):i(t)}}catch(e){console.error("Error checking pending quiz:",e)}finally{c(!1)}})()},[e]),l||!o||d)return null;const p=(()=>{if(!o)return{answered:0,total:0,percent:0};const e=o.quiz_data?.meta?._quiz_question_ids?.length||0,t=Object.keys(o.answers||{}).length;return{answered:t,total:e,percent:e>0?Math.round(t/e*100):0}})(),m=o.quiz_title||t("common.untitled"),h=s?f.accent:f.primary;return(0,Qr.jsx)("div",{className:"rounded-xl overflow-hidden cursor-pointer transition-all hover:shadow-lg",style:{backgroundColor:f.cardBg,border:`1px solid ${s?f.border:h}`},onClick:()=>{const t=o.quiz_id,n=e;if(console.log(" PendingQuizBanner - Continuing quiz:",{quizId:t,targetCourseId:n}),n)r(`/courses/${n}/tests`,{state:{selectedQuizId:t,scrollToQuiz:!0,resumeAutosave:!0}});else{const e=o.course_id||o.quiz_data?.course_id||o.quiz_data?.meta?._quiz_course_id;e?r(`/courses/${e}/tests`,{state:{selectedQuizId:t,scrollToQuiz:!0,resumeAutosave:!0}}):console.error(" PendingQuizBanner - No course ID available")}},children:(0,Qr.jsx)("div",{className:"px-4 py-3",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${h}15`},children:(0,Qr.jsx)(Nu,{className:"w-4 h-4",style:{color:h}})}),(0,Qr.jsx)("div",{className:"flex-1 min-w-0",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("h4",{className:"text-sm font-semibold truncate",style:{color:f.text},children:t("quizzes.quiz.inProgress")}),(0,Qr.jsxs)("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:`${h}15`,color:h},children:[p.answered,"/",p.total]})]}),(0,Qr.jsx)("p",{className:"text-xs truncate",style:{color:f.textMuted},children:m})]}),o.time_remaining&&(0,Qr.jsxs)("span",{className:"text-xs flex items-center gap-1 flex-shrink-0",style:{color:h},children:[(0,Qr.jsx)(Ec,{size:12}),(e=>e?`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`:null)(o.time_remaining)]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-lg text-xs font-medium text-white transition-all flex-shrink-0",style:{backgroundColor:h},children:[t("common.continue"),(0,Qr.jsx)(al,{size:14})]}),(0,Qr.jsx)("button",{onClick:e=>{e.stopPropagation(),u(!0)},className:"p-1.5 rounded-lg transition-all flex-shrink-0 opacity-50 hover:opacity-100",style:{backgroundColor:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},children:(0,Qr.jsx)(En,{size:12,style:{color:f.text}})})]})})]})})})},_u=async(e,t={})=>{try{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":(()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");return e})().nonce},credentials:"same-origin",...t},n=await fetch(e,r);if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||`API Error: ${n.status} ${n.statusText}`)}return{data:await n.json(),headers:n.headers}}catch(e){throw console.error("API Request failed:",e),e}},Cu=async(e,t={})=>{const{page:r=1,perPage:n=10,withRisk:s=!1}=t,a=(0,Fr.getApiConfig)(),o=new URLSearchParams({course_id:e.toString(),page:r.toString(),per_page:n.toString(),with_risk:s.toString()}),i=`${a.apiUrl}/qe/v1/course-ranking/ranking?${o.toString()}`,{data:l}=await _u(i);return l},Su=async e=>{const t=(0,Fr.getApiConfig)(),r=new URLSearchParams({course_id:e.toString()}),n=`${t.apiUrl}/qe/v1/course-ranking/my-ranking-status?${r.toString()}`,{data:s}=await _u(n);return s},Eu=cn("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Ou=()=>{const{t:e}=k(),{courseId:t}=pt(),{getColor:r,isDarkMode:n}=Yr(),{formatScore:s}=gd(),{course:o,loading:i}=yu(t),l=o?.title?.rendered||o?.title||e("courses.title"),[c,d]=(0,a.useState)(null),[u,f]=(0,a.useState)(null),[p,m]=(0,a.useState)(!0),h={text:n?r("textPrimary","#f9fafb"):r("primary","#1a202c"),textMuted:n?r("textSecondary","#9ca3af"):`${r("primary","#1a202c")}70`,accent:r("accent","#f59e0b"),primary:r("primary","#3b82f6"),background:r("background","#ffffff"),secondaryBg:r("secondaryBackground","#f3f4f6"),cardBg:n?r("secondaryBackground","#1f2937"):"#ffffff",border:n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"};(0,a.useEffect)(()=>{t&&(Id(t).then(e=>d(e)).catch(e=>console.error("Error loading course progress:",e)),m(!0),Su(t).then(e=>{f(e.data),m(!1)}).catch(e=>{console.error("Error loading ranking status:",e),m(!1)}))},[t]);const g=({completed:e,total:t,icon:r,label:s,color:a})=>{const o=t>0?e/t*100:0,i=2*Math.PI*45,l=i-o/100*i;return(0,Qr.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,Qr.jsxs)("div",{className:"relative",style:{width:"110px",height:"110px"},children:[(0,Qr.jsxs)("svg",{className:"transform -rotate-90",width:"110",height:"110",children:[(0,Qr.jsx)("circle",{cx:"55",cy:"55",r:45,stroke:n?"rgba(255,255,255,0.1)":`${a}20`,strokeWidth:"8",fill:"none"}),(0,Qr.jsx)("circle",{cx:"55",cy:"55",r:45,stroke:a,strokeWidth:"8",fill:"none",strokeDasharray:i,strokeDashoffset:l,strokeLinecap:"round",style:{transition:"stroke-dashoffset 0.5s ease"}})]}),(0,Qr.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,Qr.jsx)(r,{size:20,style:{color:a},className:"mb-1"}),(0,Qr.jsxs)("span",{className:"text-sm font-bold",style:{color:h.text},children:[e,"/",t]})]})]}),(0,Qr.jsx)("span",{className:"text-xs font-medium mt-2 text-center",style:{color:h.textMuted},children:s})]})},x=({icon:e,label:t,value:r,subValue:s,color:a,highlight:o})=>(0,Qr.jsx)("div",{className:"rounded-xl p-4 transition-all duration-200 "+(o?"ring-2":""),style:{backgroundColor:n?"rgba(255,255,255,0.05)":`${a}08`,ringColor:o?a:"transparent"},children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:n?`${a}20`:`${a}15`},children:(0,Qr.jsx)(e,{size:20,style:{color:a}})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("p",{className:"text-xs font-medium truncate",style:{color:h.textMuted},children:t}),(0,Qr.jsx)("p",{className:"text-xl font-bold",style:{color:h.text},children:r}),s&&(0,Qr.jsx)("p",{className:"text-xs",style:{color:h.textMuted},children:s})]})]})}),y=c?.steps_by_type||{},b=c?.total_steps||0,v=c?.completed_steps||0,w=b>0?Math.round(v/b*100):0,j=(0,a.useMemo)(()=>{const t=[];(y.quiz?.total||0)>0&&t.push({type:"quiz",completed:y.quiz.completed,total:y.quiz.total,icon:fu,label:e("courses.tests"),color:h.primary});const r=(y.text?.total||0)+(y.pdf?.total||0);return r>0&&t.push({type:"material",completed:(y.text?.completed||0)+(y.pdf?.completed||0),total:r,icon:ul,label:e("courses.supportMaterial"),color:"#10b981"}),(y.video?.total||0)>0&&t.push({type:"video",completed:y.video.completed,total:y.video.total,icon:fl,label:e("courses.videosSection"),color:"#8b5cf6"}),t},[y,e,h.primary]);return i?(0,Qr.jsx)("div",{className:"p-6 min-h-full w-full flex items-center justify-center",style:{backgroundColor:h.secondaryBg},children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto",style:{borderColor:h.primary}}),(0,Qr.jsx)("p",{className:"mt-4",style:{color:h.textMuted},children:e("common.loading")})]})}):(0,Qr.jsx)(ju,{courseId:t,courseName:l,sectionName:e("courses.dashboard"),children:(0,Qr.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 pb-24 space-y-6",children:[(0,Qr.jsx)(ku,{courseId:t}),(0,Qr.jsxs)("div",{className:"rounded-xl p-4 border",style:{backgroundColor:h.cardBg,borderColor:h.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(Eu,{size:18,style:{color:h.primary}}),(0,Qr.jsx)("span",{className:"font-semibold",style:{color:h.text},children:e("courses.overallProgress")})]}),(0,Qr.jsxs)("span",{className:"text-2xl font-bold",style:{color:h.text},children:[w,"%"]})]}),(0,Qr.jsx)("div",{className:"w-full h-3 rounded-full overflow-hidden",style:{backgroundColor:n?"rgba(255,255,255,0.1)":`${h.primary}15`},children:(0,Qr.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${w}%`,backgroundColor:h.primary}})}),(0,Qr.jsxs)("div",{className:"flex justify-between mt-2 text-xs",style:{color:h.textMuted},children:[(0,Qr.jsxs)("span",{children:[v," ",e("courses.completed")]}),(0,Qr.jsxs)("span",{children:[b-v," ",e("courses.remaining")]})]})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Qr.jsxs)("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:h.cardBg,borderColor:h.border},children:[(0,Qr.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:h.primary},children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(qc,{size:18,className:"text-white"}),(0,Qr.jsx)("span",{className:"font-semibold text-white text-sm",children:e("ranking.yourPosition")})]})}),(0,Qr.jsx)("div",{className:"p-6",children:p?(0,Qr.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:h.primary}})}):u&&u.completed_quizzes>0?(0,Qr.jsxs)("div",{className:"text-center space-y-4",children:[(0,Qr.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full",style:{backgroundColor:n?`${h.accent}20`:`${h.accent}15`},children:(0,Qr.jsxs)("span",{className:"text-3xl font-bold",style:{color:h.accent},children:["#",u.position||"?"]})}),(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Qr.jsx)(kc,{size:16,style:{color:h.primary}}),(0,Qr.jsx)("span",{className:"text-lg font-bold",style:{color:h.text},children:s(u.average_score||0)})]}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:h.textMuted},children:e("ranking.averageScore")})]}),(0,Qr.jsxs)("div",{className:"pt-4 border-t flex items-center justify-center gap-2",style:{borderColor:h.border},children:[(0,Qr.jsx)(Nn,{size:14,style:{color:h.textMuted}}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:h.textMuted},children:[u.completed_quizzes,"/",u.total_quizzes," ",e("ranking.quizzesCompleted")]})]})]}):(0,Qr.jsxs)("div",{className:"text-center space-y-4",children:[(0,Qr.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full",style:{backgroundColor:n?"rgba(255,255,255,0.05)":"#f3f4f6"},children:(0,Qr.jsx)(qc,{size:32,style:{color:h.textMuted}})}),(0,Qr.jsx)("div",{children:(0,Qr.jsx)("span",{className:"inline-block px-3 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:n?`${h.accent}20`:`${h.accent}15`,color:h.accent},children:e("ranking.noTestsYet")})}),(0,Qr.jsxs)("div",{className:"space-y-1",children:[(0,Qr.jsxs)("p",{className:"text-sm font-semibold",style:{color:h.text},children:[u?.completed_quizzes||0," / ",u?.total_quizzes||0]}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:h.textMuted},children:e("ranking.quizzesCompleted")})]}),(0,Qr.jsx)("p",{className:"text-xs px-2",style:{color:h.textMuted},children:e("ranking.completeFirstQuiz")})]})})]}),(0,Qr.jsxs)("div",{className:"lg:col-span-2 rounded-xl border overflow-hidden",style:{backgroundColor:h.cardBg,borderColor:h.border},children:[(0,Qr.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:h.primary},children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(rl,{size:18,className:"text-white"}),(0,Qr.jsx)("span",{className:"font-semibold text-white text-sm",children:e("courses.contentProgress")})]})}),(0,Qr.jsx)("div",{className:"p-4",children:j.length>0?(0,Qr.jsx)("div",{className:"grid gap-4 "+(1===j.length?"grid-cols-1":2===j.length?"grid-cols-2":"grid-cols-1 sm:grid-cols-3"),children:j.map(e=>(0,Qr.jsx)(g,{completed:e.completed,total:e.total,icon:e.icon,label:e.label,color:e.color},e.type))}):(0,Qr.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,Qr.jsx)(fu,{size:48,style:{color:h.textMuted},className:"mb-3 opacity-50"}),(0,Qr.jsx)("p",{className:"text-sm font-medium",style:{color:h.textMuted},children:e("courses.noContent")}),(0,Qr.jsx)("p",{className:"text-xs mt-1",style:{color:h.textMuted},children:e("courses.noContentDescription")})]})})]})]}),j.length>0&&(0,Qr.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Qr.jsx)(x,{icon:Eu,label:e("courses.totalProgress"),value:`${w}%`,color:h.primary}),(0,Qr.jsx)(x,{icon:fu,label:e("courses.testsCompleted"),value:`${y.quiz?.completed||0}/${y.quiz?.total||0}`,color:h.primary}),u&&(0,Qr.jsx)(x,{icon:kc,label:e("ranking.averageScore"),value:s(u.average_score||0),color:h.accent,highlight:u.completed_quizzes>0}),u&&u.completed_quizzes>0&&(0,Qr.jsx)(x,{icon:qc,label:e("ranking.yourPosition"),value:`#${u.position||"?"}`,color:h.accent,highlight:!0})]})]})})},Mu=e=>{const[t,r]=(0,a.useState)(!1),[n,s]=(0,a.useState)(null),[o,i]=(0,a.useState)([]),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[f,p]=(0,a.useState)({currentPage:1,totalPages:0,perPage:10,totalUsers:0,userPage:null}),[m,h]=(0,a.useState)(!1),[g,x]=(0,a.useState)(null),[y,b]=(0,a.useState)(!1),v=(0,a.useCallback)(async(t=null,n=!1)=>{if(e){r(!0),s(null);try{const r=await Cu(e,{page:t||f.currentPage,perPage:f.perPage,withRisk:m});if(r.success){i(r.data.ranking||[]),!n&&y||(c(r.data.statistics||null),b(!0)),u(r.data.my_stats||null);const e=r.data.pagination||{};p({currentPage:e.current_page||1,totalPages:e.total_pages||0,perPage:e.per_page||10,totalUsers:e.total_users||0,userPage:e.user_page||null})}else s(r.message||"Failed to load ranking")}catch(e){console.error("Error fetching course ranking:",e),s(e.message||"An error occurred while loading the ranking")}finally{r(!1)}}},[e,f.currentPage,f.perPage,m,y]),w=(0,a.useCallback)(async()=>{if(e)try{const t=await Su(e);t.success&&x(t.data||null)}catch(e){console.error("Error fetching my ranking status:",e)}},[e]),j=(0,a.useCallback)(()=>{h(e=>!e),p(e=>({...e,currentPage:1}))},[]),N=(0,a.useCallback)(e=>{e>=1&&e<=f.totalPages&&p(t=>({...t,currentPage:e}))},[f.totalPages]),k=(0,a.useCallback)(()=>{f.currentPage<f.totalPages&&N(f.currentPage+1)},[f.currentPage,f.totalPages,N]),_=(0,a.useCallback)(()=>{f.currentPage>1&&N(f.currentPage-1)},[f.currentPage,N]),C=(0,a.useCallback)(()=>{N(1)},[N]),S=(0,a.useCallback)(()=>{N(f.totalPages)},[f.totalPages,N]),E=(0,a.useCallback)(()=>{f.userPage&&N(f.userPage)},[f.userPage,N]);return(0,a.useEffect)(()=>{y?v():v(null,!0)},[e,f.currentPage,m]),(0,a.useEffect)(()=>{w()},[w]),{loading:t,error:n,ranking:o,statistics:l,myStats:d,pagination:f,withRisk:m,myStatus:g,fetchRanking:v,toggleRisk:j,goToPage:N,nextPage:k,prevPage:_,firstPage:C,lastPage:S,goToUserPage:E,refetch:v}},Tu=Mu,Pu=({lessons:e,isLoading:t,selectedStepId:r,onSelectStep:n,isOpen:s,onClose:o})=>{const{t:i}=k(),{getColor:l}=Yr(),[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{e&&e.length>0&&console.log(" DEBUG CourseLessonList: Orden de lecciones recibidas:",e.map((e,t)=>({index:t,id:e.id,title:e.title?.rendered||e.title,_lesson_order:e.meta?._lesson_order})))},[e]),(0,a.useEffect)(()=>{if(r&&!c){const t=e.find(e=>e.meta?._lesson_steps?.some(e=>e.id===r));t&&d(t.id)}},[r,c,e]);const u=e=>{switch(e){case"video":return(0,Qr.jsx)(Nu,{className:"w-4 h-4 text-gray-500 flex-shrink-0"});case"quiz":return(0,Qr.jsx)(dc,{className:"w-4 h-4 text-gray-500 flex-shrink-0"});default:return(0,Qr.jsx)(ul,{className:"w-4 h-4 text-gray-500 flex-shrink-0"})}},f=(0,Qr.jsxs)("div",{className:"p-4 animate-pulse",children:[(0,Qr.jsx)("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-6"}),(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsx)("div",{className:"h-5 bg-gray-300 rounded w-full"}),(0,Qr.jsx)("div",{className:"h-5 bg-gray-300 rounded w-5/6"}),(0,Qr.jsx)("div",{className:"h-5 bg-gray-300 rounded w-full"})]})]});return s?(0,Qr.jsx)(Qr.Fragment,{children:(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity flex items-center justify-center p-4",onClick:o,children:(0,Qr.jsxs)("div",{className:"w-full max-w-4xl max-h-[85vh] rounded-xl shadow-lg border-2 flex flex-col",style:{backgroundColor:l("secondaryBackground","#f8f9fa"),borderColor:l("primary","#3b82f6")},onClick:e=>e.stopPropagation(),children:[(0,Qr.jsxs)("div",{className:"p-6 border-b-2 flex items-center justify-between flex-shrink-0",style:{borderColor:l("primary","#3b82f6")+"30"},children:[(0,Qr.jsx)("h2",{className:"text-2xl font-bold qe-text-primary",children:i("courses.courseContent")}),(0,Qr.jsx)("button",{onClick:o,className:"p-2 rounded-lg transition-all",style:{backgroundColor:l("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=l("primary","#3b82f6")+"15"},title:"Cerrar",children:(0,Qr.jsx)(En,{className:"w-6 h-6",style:{color:l("primary","#3b82f6")}})})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:t?f:e&&e.length>0?(0,Qr.jsx)("ul",{className:"space-y-3 max-w-3xl mx-auto",children:e.map(e=>{const t=c===e.id,s=e.meta?._lesson_steps||[],a=e.title?.rendered||e.title||"Sin ttulo";return(0,Qr.jsxs)("li",{className:"rounded-lg overflow-hidden border-2",style:{borderColor:l("primary","#3b82f6")+"30"},children:[(0,Qr.jsxs)("div",{onClick:()=>{return t=e.id,void d(e=>e===t?null:t);var t},className:"p-4 flex justify-between items-center cursor-pointer transition-all hover:bg-gray-100",style:{backgroundColor:t?l("primary","#3b82f6")+"10":"transparent"},children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Qr.jsx)(kn,{className:"w-5 h-5 flex-shrink-0",style:{color:l("primary","#3b82f6")}}),(0,Qr.jsx)("span",{className:"text-sm font-bold qe-text-primary",children:a})]}),s.length>0&&(t?(0,Qr.jsx)(Qi,{className:"w-5 h-5",style:{color:l("primary","#3b82f6")}}):(0,Qr.jsx)(Vi,{className:"w-5 h-5 qe-text-secondary"}))]}),t&&s.length>0&&(0,Qr.jsx)("ul",{className:"bg-white bg-opacity-50",children:s.map(t=>{const s=t.id===r,a=(e=>"quiz"===e.type&&e.data?.quiz_title?e.data.quiz_title:e.title||i("untitled"))(t);return(0,Qr.jsxs)("li",{onClick:()=>((e,t)=>{n(e,t),o&&o()})(t,e),className:"flex items-center space-x-2 py-3 px-6 border-l-4 transition-all cursor-pointer hover:bg-gray-50",style:{borderLeftColor:s?l("primary","#3b82f6"):"transparent",backgroundColor:s?l("primary","#3b82f6")+"15":"transparent"},onMouseEnter:e=>{s||(e.currentTarget.style.backgroundColor=l("primary","#3b82f6")+"08")},onMouseLeave:e=>{s||(e.currentTarget.style.backgroundColor="transparent")},children:[u(t.type),(0,Qr.jsx)("span",{className:"text-sm "+(s?"font-semibold qe-text-primary":"qe-text-secondary"),children:a})]},t.id)})})]},e.id)})}):(0,Qr.jsx)("p",{className:"p-4 qe-text-secondary text-center",children:i("noLessonsForCourse")})}),(0,Qr.jsx)("div",{className:"p-4 border-t-2 flex justify-center flex-shrink-0",style:{borderColor:l("primary","#3b82f6")+"30"},children:(0,Qr.jsx)("button",{onClick:o,className:"px-6 py-2 rounded-lg text-white font-semibold transition-all shadow-md hover:shadow-lg",style:{backgroundColor:l("primary","#3b82f6")},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:"Cerrar"})})]})})}):null},Au=cn("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),qu=cn("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),zu=cn("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),Du=cn("highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]),Lu=cn("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),Iu=async(e,t=null)=>{try{const{endpoints:r}=(0,Fr.getApiConfig)(),n=`${r.custom_api}/quiz-attempts/start`;console.log(` Starting quiz attempt for quiz ID: ${e}, Lesson ID: ${t}`);const s={quiz_id:e};t&&(s.lesson_id=t);const a=await(0,gn.qb)(n,{method:"POST",body:JSON.stringify(s)});return console.log(" Attempt started:",a.data),a.data.data}catch(e){throw console.error(" Error starting quiz attempt:",e),e}},Ru=cn("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),$u=({question:e,index:t,questionNumber:r,onSelectAnswer:n,selectedAnswer:s,onAnswerChange:o,isRisked:i,onToggleRisk:l,onClearAnswer:c,isSubmitted:d,disabled:u=!1,showCorrectAnswer:f=!1,isPracticeMode:p=!1,showRiskSelector:m=!1,className:h=""})=>{const[g,x]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),{getColor:v,isDarkMode:w}=Yr(),{t:j}=k();if(!e)return null;const{id:N,title:_,meta:C}=e,S="object"==typeof _&&_?.rendered?_.rendered:_,E=C?._question_options||[],O=void 0!==r?r:t+1,M=null!=s?i?"risked":"answered":"unanswered",T=w?v("textPrimary","#f9fafb"):v("primary","#1a202c"),P=w?v("textSecondary","#9ca3af"):"#6b7280",A=v("secondaryBackground",w?"#1f2937":"#ffffff"),q=w?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",z=w?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",D=(e="")=>{switch(M){case"unanswered":return w?`#ffffff${e}`:`#6b7280${e}`;case"risked":return`${v("accent","#f59e0b")}${e}`;default:if(w){const t=v("primary","#3b82f6");return e?`${t}${e}`:t}return`${v("primary","#3b82f6")}${e}`}},L=()=>{switch(M){case"unanswered":return w?"rgba(255,255,255,0.3)":"rgba(107,114,128,0.4)";case"risked":return v("accent","#f59e0b");default:return v("primary",w?"#5a9cfc":"#3b82f6")}},I=()=>{switch(M){case"unanswered":return w?"rgba(255,255,255,0.15)":"rgba(107,114,128,0.25)";case"risked":return w?`${v("accent","#f59e0b")}60`:`${v("accent","#f59e0b")}40`;default:return w?`${v("primary","#3b82f6")}80`:`${v("primary","#3b82f6")}40`}};return(0,Qr.jsx)("div",{id:`quiz-question-${O}`,className:`rounded-lg overflow-hidden shadow-sm mb-4 scroll-mt-6 transition-all duration-200 ${h}`,style:{backgroundColor:A,borderTop:`2px solid ${I()}`,borderRight:`2px solid ${I()}`,borderBottom:`2px solid ${I()}`,borderLeft:`4px solid ${L()}`},children:(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:w?"unanswered"===M?"rgba(255,255,255,0.03)":D("10"):D("08"),borderColor:w?"unanswered"===M?"rgba(255,255,255,0.1)":D("20"):D("10")},children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"flex items-center justify-center rounded-full font-bold text-xs",style:{width:"28px",height:"28px",backgroundColor:L(),color:"unanswered"===M&&w?v("secondaryBackground","#1f2937"):"#ffffff"},children:O}),"unanswered"===M&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:w?"rgba(255,255,255,0.15)":`${D()}20`,color:w?"#ffffff":D()},children:[(0,Qr.jsx)(eu,{size:12}),(0,Qr.jsx)("span",{children:j("quizzes.question.unanswered")})]}),"risked"===M&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:D("20"),color:D()},children:[(0,Qr.jsx)(qd,{size:12}),(0,Qr.jsx)("span",{children:j("quizzes.question.withRisk")})]}),"answered"===M&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:w?`${v("primary","#3b82f6")}30`:D("20"),color:w?"#93c5fd":D()},children:[(0,Qr.jsx)(On,{size:12}),(0,Qr.jsx)("span",{children:j("quizzes.question.answered")})]})]}),null!=s&&!d&&(0,Qr.jsx)("button",{type:"button",onClick:()=>c(N),title:j("quizzes.question.clearSelection"),className:"p-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:P},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=w?"rgba(239,68,68,0.2)":"#fee2e2",e.currentTarget.style.color="#dc2626"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=P},children:(0,Qr.jsx)(ca,{size:16})})]})}),(0,Qr.jsx)("div",{className:"px-4 py-3",children:(0,Qr.jsx)("h3",{className:"text-sm font-medium leading-relaxed",style:{color:T},dangerouslySetInnerHTML:{__html:S||""}})}),(0,Qr.jsx)("div",{className:"px-4 pb-3 space-y-2",children:E.map((e,t)=>{const r=null!=s&&e.id===s;return(0,Qr.jsx)("label",{className:"flex items-start cursor-pointer p-3 rounded-lg transition-all duration-200 group",style:{backgroundColor:r?D("15"):"transparent",border:`2px solid ${r?D():w?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)"}`},onMouseEnter:e=>{r||(e.currentTarget.style.backgroundColor=w?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",e.currentTarget.style.borderColor=w?"rgba(255,255,255,0.25)":"rgba(0,0,0,0.2)")},onMouseLeave:e=>{r||(e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor=w?"rgba(255,255,255,0.15)":"rgba(0,0,0,0.1)")},children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,Qr.jsx)("div",{className:"flex items-center justify-center rounded-full transition-all duration-200",style:{width:"18px",height:"18px",border:`2px solid ${r?D():w?"rgba(255,255,255,0.4)":"rgba(0,0,0,0.25)"}`,backgroundColor:r?D():"transparent"},children:r&&(0,Qr.jsx)("div",{className:"rounded-full",style:{width:"6px",height:"6px",backgroundColor:"#ffffff"}})}),(0,Qr.jsx)("input",{type:"radio",name:`question-${N}`,value:e.id,checked:r,onChange:()=>{return t=N,r=e.id,void(p&&o?o(r):n&&n(t,r));var t,r},disabled:d||u,className:"sr-only"}),(0,Qr.jsx)("div",{className:"flex items-center justify-center rounded font-bold text-[10px] transition-all duration-200",style:{width:"20px",height:"20px",backgroundColor:r?D():w?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",color:r?"#ffffff":T},children:String.fromCharCode(65+t)}),(0,Qr.jsx)("span",{className:"text-base leading-relaxed transition-colors duration-200",style:{color:T,fontWeight:r?"600":"500"},children:e.text})]})},e.id)})}),p&&(0,Qr.jsxs)("div",{className:"border-t",style:{borderColor:z},children:[(0,Qr.jsxs)("button",{onClick:()=>x(!g),className:"flex items-center justify-between w-full text-left px-6 py-4 transition-colors duration-200",style:{backgroundColor:g?q:"transparent"},onMouseEnter:e=>{g||(e.currentTarget.style.backgroundColor=q)},onMouseLeave:e=>{g||(e.currentTarget.style.backgroundColor="transparent")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"flex items-center justify-center rounded-lg",style:{width:"36px",height:"36px",backgroundColor:w?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.1)"},children:(0,Qr.jsx)(Ru,{size:18,style:{color:v("primary","#3b82f6")}})}),(0,Qr.jsx)("span",{className:"text-sm font-semibold",style:{color:T},children:j("quizzes.question.answerExplanation")})]}),(0,Qr.jsx)("div",{className:"p-1 rounded transition-transform duration-200",style:{transform:g?"rotate(180deg)":"rotate(0deg)"},children:(0,Qr.jsx)(Vi,{size:20,style:{color:T}})})]}),g&&(0,Qr.jsx)("div",{className:"px-6 pb-5",style:{backgroundColor:q},children:(0,Qr.jsx)("div",{className:"p-4 rounded-lg",style:{backgroundColor:w?"rgba(255,255,255,0.05)":v("background","#ffffff"),border:`1px solid ${z}`},children:(0,Qr.jsx)("p",{className:"text-sm leading-relaxed",style:{color:P},children:C?._question_explanation||j("quizzes.question.noExplanationAvailable")})})})]}),p&&(0,Qr.jsxs)("div",{className:"border-t",style:{borderColor:z},children:[(0,Qr.jsxs)("button",{onClick:()=>b(!y),className:"flex items-center justify-between w-full text-left px-6 py-4 transition-colors duration-200",style:{backgroundColor:y?`${v("accent","#f59e0b")}15`:"transparent"},onMouseEnter:e=>{y||(e.currentTarget.style.backgroundColor=`${v("accent","#f59e0b")}08`)},onMouseLeave:e=>{y||(e.currentTarget.style.backgroundColor="transparent")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"flex items-center justify-center rounded-lg",style:{width:"36px",height:"36px",backgroundColor:`${v("accent","#f59e0b")}20`},children:(0,Qr.jsx)(qd,{size:18,style:{color:v("accent","#f59e0b")}})}),(0,Qr.jsx)("span",{className:"text-sm font-semibold",style:{color:v("accent","#f59e0b")},children:j("quizzes.question.questionStatistics")})]}),(0,Qr.jsx)("div",{className:"p-1 rounded transition-transform duration-200",style:{transform:y?"rotate(180deg)":"rotate(0deg)"},children:(0,Qr.jsx)(Vi,{size:20,style:{color:v("accent","#f59e0b")}})})]}),y&&(0,Qr.jsx)("div",{className:"px-6 pb-5",style:{backgroundColor:`${v("accent","#f59e0b")}10`},children:(0,Qr.jsx)("div",{className:"p-4 rounded-lg",style:{backgroundColor:w?"rgba(255,255,255,0.05)":v("background","#ffffff"),border:`1px solid ${v("accent","#f59e0b")}30`},children:void 0!==C?._question_fail_rate?(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("span",{className:"text-sm",style:{color:P},children:[j("quizzes.question.failureRate"),":"]}),(0,Qr.jsxs)("span",{className:"text-2xl font-bold",style:{color:v("accent","#f59e0b")},children:[C._question_fail_rate,"%"]})]}),(0,Qr.jsx)("div",{className:"w-full rounded-full overflow-hidden",style:{height:"8px",backgroundColor:`${v("accent","#f59e0b")}20`},children:(0,Qr.jsx)("div",{className:"h-full transition-all duration-300",style:{width:`${C._question_fail_rate}%`,backgroundColor:v("accent","#f59e0b")}})}),C._question_fail_rate>50&&(0,Qr.jsxs)("div",{className:"flex items-start gap-2 p-3 rounded-lg text-xs",style:{backgroundColor:`${v("accent","#f59e0b")}15`,color:v("accent","#f59e0b")},children:[(0,Qr.jsx)("span",{className:"font-bold",children:""}),(0,Qr.jsx)("span",{children:j("quizzes.question.difficultQuestion")})]})]}):(0,Qr.jsx)("p",{className:"text-sm",style:{color:P},children:j("quizzes.question.noStatisticsAvailable")})})})]}),null!=s&&!d&&m&&l&&(0,Qr.jsx)("div",{className:"px-4 py-3 border-t",style:{backgroundColor:q,borderColor:D("10")},children:(0,Qr.jsxs)("label",{className:"flex items-center cursor-pointer group",children:[(0,Qr.jsx)("div",{className:"relative flex items-center justify-center rounded transition-all duration-200",style:{width:"20px",height:"20px",border:`2px solid ${i?v("accent","#f59e0b"):w?"rgba(255,255,255,0.4)":"rgba(0,0,0,0.25)"}`,backgroundColor:i?v("accent","#f59e0b"):"transparent"},children:i&&(0,Qr.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"#ffffff",strokeWidth:"3",viewBox:"0 0 24 24",children:(0,Qr.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),(0,Qr.jsx)("input",{type:"checkbox",checked:i,onChange:()=>l(N),disabled:d,className:"sr-only"}),(0,Qr.jsx)("span",{className:"ml-3 text-sm font-medium transition-colors duration-200",style:{color:i?v("accent","#f59e0b"):P},children:j("quizzes.question.markWithRisk")})]})})]})})},Fu=({label:e,value:t,bgColor:r,textColor:n,bgCard:s})=>(0,Qr.jsxs)("div",{className:"text-center p-2 rounded-lg border-2 transition-all duration-200",style:{backgroundColor:s,borderColor:n},children:[(0,Qr.jsx)("span",{className:"block text-[10px] font-medium mb-0.5",style:{color:n+"90"},children:e}),(0,Qr.jsx)("span",{className:"block text-xl font-bold",style:{color:n},children:t})]}),Bu=({icon:e,color:t,text:r})=>(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] font-medium",style:{color:t},children:[(0,Qr.jsx)(e,{size:14,strokeWidth:2.5}),(0,Qr.jsx)("span",{children:r})]}),Uu=({questions:e,questionIds:t=[],totalCount:r=null,userAnswers:n,riskedAnswers:s,onQuestionSelect:a,onSubmit:o,loadedCount:i=0})=>{const{getColor:l,isDarkMode:c}=Yr(),{t:d}=k(),u=Object.keys(n).length,f=s.length,p=null!==r?r:e?e.length:t?t.length:0,m=Math.max(0,p-u),h=c?l("secondaryBackground","#1f2937"):"#ffffff",g=c?l("textPrimary","#f9fafb"):l("primary","#1a202c"),x=l("primary","#1a202c"),y={unanswered:c?"#ffffff":"#6b7280",unansweredBg:c?"rgba(255,255,255,0.1)":"rgba(107,114,128,0.1)",unansweredBorder:c?"rgba(255,255,255,0.3)":"rgba(107,114,128,0.3)",answered:g,answeredBg:x,answeredBgBright:c?"#5a9cfc":x,risked:l("accent","#f59e0b"),impugned:"#9ca3af"};return(0,Qr.jsx)("div",{className:"w-full",children:(0,Qr.jsxs)("div",{className:"rounded-lg shadow-sm border-2 transition-all duration-200",style:{backgroundColor:l("secondaryBackground","#ffffff"),borderColor:c?l("accent","#f59e0b"):l("borderColor","#e5e7eb")},children:[(0,Qr.jsx)("div",{className:"p-3 border-b",style:{borderColor:c?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:(0,Qr.jsxs)("div",{className:"flex flex-wrap gap-3 justify-around",children:[(0,Qr.jsx)(Bu,{icon:eu,color:y.unanswered,text:d("quizzes.sidebar.unanswered")}),(0,Qr.jsx)(Bu,{icon:On,color:y.answered,text:d("quizzes.sidebar.answered")}),(0,Qr.jsx)(Bu,{icon:qd,color:y.risked,text:d("quizzes.sidebar.withRisk")})]})}),(0,Qr.jsx)("div",{className:"p-3 border-b",style:{borderColor:c?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qr.jsx)(Fu,{label:d("quizzes.sidebar.answered"),value:u,bgColor:y.answered+"10",textColor:y.answered,bgCard:h}),(0,Qr.jsx)(Fu,{label:d("quizzes.sidebar.withRisk"),value:f,bgColor:y.risked+"10",textColor:y.risked,bgCard:h}),(0,Qr.jsx)(Fu,{label:d("quizzes.sidebar.withoutRisk"),value:u-f,bgColor:y.answered+"10",textColor:y.answered,bgCard:h}),(0,Qr.jsx)(Fu,{label:d("quizzes.sidebar.unanswered"),value:m,bgColor:y.unanswered+"10",textColor:y.unanswered,bgCard:h})]})}),(0,Qr.jsxs)("div",{className:"p-3 border-b",style:{borderColor:c?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:[(0,Qr.jsx)("h3",{className:"text-xs font-semibold mb-2",style:{color:g},children:d("quizzes.sidebar.questionsMap")}),(0,Qr.jsx)("div",{className:"grid grid-cols-10 gap-1",children:Array.from({length:p}).map((r,o)=>{const i=t&&t[o]?t[o]:e&&e[o]?e[o].id:`unloaded-${o}`,l=e&&e[o],u=n.hasOwnProperty(i),f=s.includes(i);let p="",m="",h="",g="1";return l?f?(p=y.risked,m=y.risked,h="#ffffff"):u?(p=y.answeredBgBright,m=y.answeredBgBright,h="#ffffff"):(p=y.unansweredBg,m=y.unansweredBorder,h=y.unanswered):(p=c?"rgba(255,255,255,0.05)":y.unanswered+"15",m=c?"rgba(255,255,255,0.15)":y.unanswered+"30",h=c?"rgba(255,255,255,0.4)":y.unanswered+"60",g="0.5"),(0,Qr.jsx)("button",{onClick:()=>l&&(e=>{const t=e+1,r=document.getElementById(`quiz-question-${t}`);if(r){r.scrollIntoView({behavior:"smooth",block:"center"});const e=r.style.borderLeftWidth||"4px";r.style.borderLeftWidth="12px",r.style.transition="border-left-width 0.3s ease",setTimeout(()=>{r.style.borderLeftWidth=e},2e3)}a&&a(e)})(o),disabled:!l,className:"w-full h-6 rounded text-[10px] font-bold transition-all duration-200 flex items-center justify-center border disabled:cursor-wait hover:enabled:scale-105 hover:enabled:shadow-md",style:{backgroundColor:p,borderColor:m,color:h,opacity:g},title:l?`${d("quizzes.sidebar.question")} ${o+1}`:d("quizzes.sidebar.loadingQuestion"),children:o+1},i)})})]}),(0,Qr.jsx)("div",{className:"p-3",children:(0,Qr.jsx)("button",{onClick:o,className:"w-full px-4 py-3 text-sm text-white font-semibold rounded-lg shadow-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-md active:scale-[0.98]",style:{backgroundColor:y.answeredBg},children:d("quizzes.sidebar.finishExam")})})]})})},Hu=({durationMinutes:e,onTimeUp:t,isPaused:r,initialTimeRemaining:n=null,onTick:s=null})=>{const{getColor:o,isDarkMode:i}=Yr(),{t:l}=k(),[c,d]=(0,a.useState)(null!==n?n:60*e),u=i?o("secondaryBackground","#1f2937"):"#ffffff",f=i?o("textPrimary","#f9fafb"):"#111827",p=i?o("textSecondary","#9ca3af"):"#374151",m=i?"rgba(255,255,255,0.3)":"#e5e7eb";return(0,a.useEffect)(()=>{null!==n&&d(n)},[n]),(0,a.useEffect)(()=>{if(r||e<=0)return;const n=setInterval(()=>{d(e=>{if(e<=1)return clearInterval(n),t(),0;const r=e-1;return s&&s(r),r})},1e3);return()=>clearInterval(n)},[r,t,e,s]),e<=0?null:(0,Qr.jsxs)("div",{className:"mt-4 p-4 rounded-lg border shadow-sm text-center",style:{backgroundColor:u,borderColor:m},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-center",style:{color:p},children:[(0,Qr.jsx)(Ec,{className:"w-5 h-5 mr-2"}),(0,Qr.jsx)("span",{className:"text-lg font-semibold",children:l("quizzes.timeRemaining")})]}),(0,Qr.jsx)("p",{className:"text-3xl font-bold mt-2",style:{color:f},children:(e=>`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`)(c)})]})},Wu=({isActive:e,isDrawingEnabled:t,tool:r,color:n,lineWidth:s,onClose:o,onClear:i,containerRef:l,showToolbar:c})=>{const d=(0,a.useRef)(null),[u,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(null),{getColor:h}=Yr(),g=(0,a.useRef)(r),x=(0,a.useRef)(n),y=(0,a.useRef)(s);(0,a.useEffect)(()=>{console.log(" Updating refs with new props:",{tool:r,color:n,lineWidth:s}),g.current=r,x.current=n,y.current=s,console.log("   Refs now contain:",{tool:g.current,color:x.current,lineWidth:y.current})},[r,n,s]),(0,a.useEffect)(()=>{i&&p&&d.current&&i(()=>{p.clearRect(0,0,d.current.width,d.current.height)})},[p,i]),(0,a.useEffect)(()=>{if(!d.current||!e||!l?.current)return;const t=d.current,r=l.current,n=t.getContext("2d"),s=()=>{r.getBoundingClientRect(),t.width=r.scrollWidth,t.height=r.scrollHeight,n.lineCap="round",n.lineJoin="round"};s(),window.addEventListener("resize",s);const a=new ResizeObserver(s);return a.observe(r),m(n),()=>{window.removeEventListener("resize",s),a.disconnect()}},[e]),(0,a.useEffect)(()=>{console.log(" DrawingCanvas props updated:",{tool:r,color:n,lineWidth:s,isActive:e,isDrawingEnabled:t})},[r,n,s,e,t]),(0,a.useEffect)(()=>{if(p)if(console.log(" Drawing tool changed (applying to context):",{tool:r,color:n,lineWidth:s}),"pen"===r)p.globalCompositeOperation="source-over",p.strokeStyle=n,p.lineWidth=s,p.globalAlpha=1;else if("highlighter"===r){p.globalCompositeOperation="source-over";const e=parseInt(n.slice(1,3),16),t=parseInt(n.slice(3,5),16),r=parseInt(n.slice(5,7),16);p.strokeStyle=`rgba(${e}, ${t}, ${r}, 0.4)`,p.lineWidth=4*s,p.globalAlpha=1}else"eraser"===r&&(p.globalCompositeOperation="destination-out",p.lineWidth=3*s,p.globalAlpha=1)},[p,r,n,s]);const b=()=>{p&&(f(!1),p.closePath())};return e?(0,Qr.jsx)("canvas",{ref:d,className:"absolute top-0 left-0",style:{cursor:t?"crosshair":"default",zIndex:20,pointerEvents:t?"auto":"none"},onMouseDown:e=>{if(!p||!l?.current||!t)return;const r=g.current,n=x.current,s=y.current;if(console.log(" Starting to draw with:",{tool:r,color:n,lineWidth:s}),"pen"===r)p.globalCompositeOperation="source-over",p.strokeStyle=n,p.lineWidth=s,p.globalAlpha=1,console.log("   Applied PEN style:",{strokeStyle:p.strokeStyle,lineWidth:p.lineWidth});else if("highlighter"===r){p.globalCompositeOperation="source-over";const e=parseInt(n.slice(1,3),16),t=parseInt(n.slice(3,5),16),r=parseInt(n.slice(5,7),16);p.strokeStyle=`rgba(${e}, ${t}, ${r}, 0.4)`,p.lineWidth=4*s,p.globalAlpha=1,console.log("   Applied HIGHLIGHTER style:",{strokeStyle:p.strokeStyle,lineWidth:p.lineWidth})}else"eraser"===r&&(p.globalCompositeOperation="destination-out",p.lineWidth=3*s,p.globalAlpha=1,console.log("   Applied ERASER style:",{compositeOperation:p.globalCompositeOperation,lineWidth:p.lineWidth}));f(!0);const a=l.current.getBoundingClientRect(),o=e.clientX-a.left+l.current.scrollLeft,i=e.clientY-a.top+l.current.scrollTop;p.beginPath(),p.moveTo(o,i)},onMouseMove:e=>{if(!(u&&p&&l?.current&&t))return;const r=l.current.getBoundingClientRect(),n=e.clientX-r.left+l.current.scrollLeft,s=e.clientY-r.top+l.current.scrollTop;p.lineTo(n,s),p.stroke()},onMouseUp:b,onMouseLeave:b}):null},Qu=cn("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),Vu=({isActive:e,tool:t,onToolChange:r,color:n,onColorChange:s,lineWidth:a,onLineWidthChange:o,onClear:i,onClose:l})=>{const{getColor:c}=Yr();if(!e)return null;const d=[{id:"pen",icon:Qu,label:"Lpiz"},{id:"highlighter",icon:Du,label:"Subrayador"},{id:"eraser",icon:Lu,label:"Borrador"}];return(0,Qr.jsxs)("div",{className:"fixed top-20 right-4 z-50 rounded-xl shadow-2xl border-2 overflow-hidden",style:{backgroundColor:c("background","#ffffff"),borderColor:c("primary","#3b82f6"),maxWidth:"280px"},children:[(0,Qr.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between",style:{backgroundColor:c("primary","#3b82f6"),color:"#ffffff"},children:[(0,Qr.jsx)("span",{className:"font-semibold text-sm",children:"Herramientas de Dibujo"}),(0,Qr.jsx)("button",{onClick:l,className:"p-1 rounded hover:bg-white/20 transition-colors",children:(0,Qr.jsx)(En,{size:16})})]}),(0,Qr.jsxs)("div",{className:"p-3 space-y-3",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"text-xs font-semibold mb-2 block",style:{color:c("textSecondary","#6b7280")},children:"Herramienta"}),(0,Qr.jsx)("div",{className:"flex gap-2",children:d.map(({id:e,icon:n,label:s})=>(0,Qr.jsxs)("button",{onClick:()=>r(e),className:"flex-1 p-2 rounded-lg border-2 transition-all flex flex-col items-center gap-1",style:{borderColor:t===e?c("primary","#3b82f6"):c("borderColor","#e5e7eb"),backgroundColor:t===e?`${c("primary","#3b82f6")}10`:"transparent",color:t===e?c("primary","#3b82f6"):c("textPrimary","#1f2937")},title:s,children:[(0,Qr.jsx)(n,{size:18}),(0,Qr.jsx)("span",{className:"text-xs font-medium",children:s})]},e))})]}),("pen"===t||"highlighter"===t)&&(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"text-xs font-semibold mb-2 block",style:{color:c("textSecondary","#6b7280")},children:"Color"}),(0,Qr.jsx)("div",{className:"flex flex-wrap gap-2",children:["#000000","#ff0000","#0000ff","#00ff00","#ffff00","#ff00ff","#00ffff","#ffa500"].map(e=>(0,Qr.jsx)("button",{onClick:()=>s(e),className:"w-8 h-8 rounded-lg border-2 transition-all",style:{backgroundColor:e,borderColor:n===e?c("primary","#3b82f6"):c("borderColor","#e5e7eb"),transform:n===e?"scale(1.1)":"scale(1)"},title:e},e))})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"text-xs font-semibold mb-2 block",style:{color:c("textSecondary","#6b7280")},children:"Grosor"}),(0,Qr.jsx)("div",{className:"flex gap-2",children:[{value:1,label:"Fino"},{value:2,label:"Medio"},{value:4,label:"Grueso"}].map(({value:e,label:t})=>(0,Qr.jsx)("button",{onClick:()=>o(e),className:"flex-1 py-2 px-3 rounded-lg border-2 transition-all text-xs font-medium",style:{borderColor:a===e?c("primary","#3b82f6"):c("borderColor","#e5e7eb"),backgroundColor:a===e?`${c("primary","#3b82f6")}10`:"transparent",color:a===e?c("primary","#3b82f6"):c("textPrimary","#1f2937")},children:t},e))})]}),(0,Qr.jsxs)("button",{onClick:i,className:"w-full py-2 px-4 rounded-lg font-medium text-sm flex items-center justify-center gap-2 transition-all",style:{backgroundColor:"#ef4444",color:"#ffffff"},children:[(0,Qr.jsx)(ca,{size:16}),"Borrar Todo"]})]})]})},Ku=({autosaveData:e,onResume:t,onRestart:r,onClose:n,isOpen:s=!0})=>{const{getColor:a,isDarkMode:o}=Yr(),{t:i}=k();if(!s||!e)return null;const l={text:o?"#ffffff":a("primary","#1a202c"),textMuted:o?"rgba(255,255,255,0.7)":a("textMuted","#6b7280"),accent:a("accent","#f59e0b"),primary:a("primary","#1a202c"),cardBg:o?a("secondaryBackground","#1f2937"):"#ffffff",overlayBg:o?a("background","#111827"):"rgba(0,0,0,0.5)",infoBg:o?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.03)",border:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},{quiz_title:c,current_question_index:d,answers:u,time_remaining:f,updated_at:p,quiz_data:m}=e,h=m?.meta?._quiz_question_ids?.length||0,g=Object.keys(u||{}).length,x=h>0?Math.round(g/h*100):0;return(0,Qr.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-center min-h-screen p-4",children:[(0,Qr.jsx)("div",{className:"fixed inset-0 transition-opacity",style:{backgroundColor:l.overlayBg},"aria-hidden":"true",onClick:n}),(0,Qr.jsxs)("div",{className:"relative w-full max-w-md rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:l.cardBg},children:[(0,Qr.jsxs)("div",{className:"px-5 py-4 flex items-center gap-3",style:{backgroundColor:o?l.accent:l.primary},children:[(0,Qr.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.2)"},children:(0,Qr.jsx)(Nu,{className:"w-5 h-5 text-white"})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("h3",{className:"text-base font-bold text-white truncate",children:i("quizzes.quiz.inProgress")}),(0,Qr.jsx)("p",{className:"text-xs text-white/70 truncate",children:i("quizzes.quiz.savedProgressFound")})]})]}),(0,Qr.jsxs)("div",{className:"p-5 space-y-4",children:[(0,Qr.jsx)("p",{className:"text-sm",style:{color:l.textMuted},children:i("quizzes.quiz.continueWhereYouLeft")}),(0,Qr.jsxs)("div",{className:"rounded-lg p-4 space-y-3",style:{backgroundColor:l.infoBg,border:`1px solid ${l.border}`},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs font-medium uppercase tracking-wide",style:{color:l.textMuted},children:i("common.quiz")}),(0,Qr.jsx)("span",{className:"text-sm font-medium truncate",style:{color:l.text},children:c||i("common.untitled")})]}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs font-medium uppercase tracking-wide",style:{color:l.textMuted},children:i("common.progress")}),(0,Qr.jsxs)("span",{className:"text-sm font-medium",style:{color:l.text},children:[g,"/",h," (",x,"%)"]})]}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs font-medium uppercase tracking-wide",style:{color:l.textMuted},children:i("quizzes.quiz.currentQuestion")}),(0,Qr.jsxs)("span",{className:"text-sm font-medium",style:{color:l.text},children:[(d||0)+1," ",i("common.of")," ",h]})]}),f&&(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Qr.jsxs)("span",{className:"text-xs font-medium uppercase tracking-wide flex items-center gap-1.5",style:{color:l.textMuted},children:[(0,Qr.jsx)(Ec,{className:"w-3.5 h-3.5"}),i("quizzes.quiz.timeRemaining")]}),(0,Qr.jsx)("span",{className:"text-sm font-medium",style:{color:l.accent},children:(e=>e?`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`:null)(f)})]}),(0,Qr.jsx)("div",{className:"pt-2",children:(0,Qr.jsx)("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{backgroundColor:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${x}%`,backgroundColor:l.accent}})})}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2 pt-2 text-xs",style:{borderTop:`1px solid ${l.border}`,color:l.textMuted},children:[(0,Qr.jsx)("span",{children:i("common.lastSaved")}),(0,Qr.jsx)("span",{children:(e=>{const t=new Date(e),r=new Date-t,n=Math.floor(r/6e4),s=Math.floor(n/60),a=Math.floor(s/24);return a>0?`${i("common.ago")} ${a} ${i(a>1?"common.days":"common.day")}`:s>0?`${i("common.ago")} ${s} ${i(s>1?"common.hours":"common.hour")}`:n>0?`${i("common.ago")} ${n} ${i(n>1?"common.minutes":"common.minute")}`:i("common.justNow")})(p)})]})]})]}),(0,Qr.jsxs)("div",{className:"px-5 py-4 flex flex-col sm:flex-row gap-2",style:{backgroundColor:l.infoBg,borderTop:`1px solid ${l.border}`},children:[(0,Qr.jsxs)("button",{type:"button",onClick:t,className:"flex-1 inline-flex justify-center items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium text-white transition-all",style:{backgroundColor:l.accent},onMouseEnter:e=>e.currentTarget.style.opacity="0.9",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:[(0,Qr.jsx)(On,{className:"w-4 h-4"}),i("quizzes.quiz.continueQuiz")]}),(0,Qr.jsxs)("button",{type:"button",onClick:r,className:"flex-1 inline-flex justify-center items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all",style:{backgroundColor:"transparent",color:l.text,border:`2px solid ${l.border}`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)(pa,{className:"w-4 h-4"}),i("quizzes.quiz.startOver")]})]})]})]})})},Yu=({quizId:e,lessonId:t=null,customQuiz:r=null,onQuizComplete:n,onQuizStateChange:s,onExit:o,isDrawingMode:i,setIsDrawingMode:l,isDrawingEnabled:c,setIsDrawingEnabled:d,showDrawingToolbar:u,setShowDrawingToolbar:f,drawingTool:p,drawingColor:m,drawingLineWidth:h,onDrawingToolChange:g,onDrawingColorChange:x,onDrawingLineWidthChange:y,onClearCanvas:b})=>{const[v,w]=(0,a.useState)(null),[j,N]=(0,a.useState)([]),[_,C]=(0,a.useState)({}),[S,E]=(0,a.useState)([]),[O,M]=(0,a.useState)("loading"),[T,P]=(0,a.useState)(null),[A,q]=(0,a.useState)(null),[z,D]=(0,a.useState)([]),[L,I]=(0,a.useState)(null),[R,$]=(0,a.useState)(null),[F,B]=(0,a.useState)(null),[U,H]=(0,a.useState)(!1),[W,Q]=(0,a.useState)(!1),[V,K]=(0,a.useState)(0),[Y,G]=(0,a.useState)(!1),[X,Z]=(0,a.useState)(null),[J,ee]=(0,a.useState)(!1),[te,re]=(0,a.useState)(!1),[ne,se]=(0,a.useState)(!1),[ae,oe]=(0,a.useState)("highlighter"),[ie,le]=(0,a.useState)("#ffff00"),[ce,de]=(0,a.useState)(2),ue=void 0!==i?i:J,fe=void 0!==c?c:te,pe=void 0!==u?u:ne,me=p||ae,he=m||ie,ge=h||ce,xe=e=>l?l(e):ee(e),ye=e=>d?d(e):re(e),be=e=>f?f(e):se(e),{getColor:ve,isDarkMode:we}=Yr(),{t:je}=k(),Ne=(0,a.useRef)(null),ke=we?ve("textPrimary","#f9fafb"):ve("primary","#1a202c"),_e=we?ve("textSecondary","#9ca3af"):"#6b7280";(0,a.useEffect)(()=>{s&&"function"==typeof s&&s(O)},[O,s]);const{questions:Ce,loading:Se,error:Ee,checkPrefetch:Oe,loadMore:Me,hasMore:Te,loadedCount:Pe,totalCount:Ae,currentPage:qe}=((e,t={})=>{const{enabled:r=!0,questionsPerPage:n=50,prefetchThreshold:s=5,randomize:o=!1}=t,[i,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)(null),[p,m]=(0,a.useState)(0),[h,g]=(0,a.useState)(0),x=(0,a.useRef)(!1),[y,b]=(0,a.useState)([]);(0,a.useEffect)(()=>{if(e&&e.length>0)if(o){const t=[...e].sort(()=>Math.random()-.5);b(t)}else b(e)},[e,o]);const v=(0,a.useCallback)(async e=>{if(x.current)return console.log(" Already loading, skipping duplicate request"),[];const t=(e-1)*n,r=Math.min(t+n,y.length),s=y.slice(t,r);if(0===s.length)return console.log(" No more questions to load"),[];x.current=!0,d(!0),f(null);try{console.log(` Loading page ${e} (${s.length} questions, IDs: ${t+1}-${r})`);const a=window.qe_data||{};if(!a.endpoints||!a.endpoints.questions)throw new Error("Questions endpoint not configured");const o=a.endpoints.questions,i=window.qe_data?.user?.roles?.includes("administrator")||!1,c=`${o}?${new URLSearchParams({include:s.join(","),per_page:n.toString(),page:"1",orderby:"include",context:i?"edit":"view"}).toString()}`,d=await fetch(c,{headers:{"Content-Type":"application/json","X-WP-Nonce":a.nonce},credentials:"same-origin"});if(!d.ok)throw new Error(`API Error ${d.status}: ${d.statusText}`);const u=await d.json();return l(e=>[...e,...u]),g(e=>e+u.length),m(e),console.log(` Loaded page ${e}: ${u.length} questions. Total: ${h+u.length}/${y.length}`),u}catch(e){return console.error(" Error loading question page:",e),f(e.message||"Failed to load questions"),[]}finally{x.current=!1,d(!1)}},[y,n,h]),w=(0,a.useCallback)(async()=>{!r||0===y.length||p>0||(console.log(` Loading initial page (${n} questions)...`),await v(1))},[r,y.length,p,n,v]),j=(0,a.useCallback)(async()=>{if(h>=y.length)return void console.log(" All questions already loaded");const e=p+1;console.log(` Loading page ${e}... (${h}/${y.length} loaded)`),await v(e)},[y.length,p,h,v]),N=(0,a.useCallback)(e=>{const t=h-e;h<y.length&&t<=s&&!x.current&&(console.log(` Auto-prefetching next page (${t} questions remaining)`),j())},[h,y.length,s,j]);return(0,a.useEffect)(()=>{r&&y.length>0&&0===p&&w()},[r,y.length,p,w]),{questions:i,loading:c,error:u,progress:y.length>0?Math.round(h/y.length*100):0,hasMore:h<y.length,loadMore:j,checkPrefetch:N,totalCount:y.length,loadedCount:h,currentPage:p}})(j,{enabled:"in-progress"===O||"loading"===O,questionsPerPage:50,prefetchThreshold:5,randomize:v?.meta?._randomize_questions||!1});(0,a.useEffect)(()=>{if("in-progress"===O&&Object.keys(_).length>0){const e=Object.keys(_).length;Pe-e<=10&&Te&&!Se&&Oe(e)}},[_,O,Oe,Pe,Te,Se]),(0,a.useEffect)(()=>{(async()=>{if(I(Date.now()),r){w(r);const e=r.meta?._quiz_question_ids||[];return N(e),void P("custom-attempt")}if(e){console.log(" Starting Quiz Attempt:",{quizId:e,lessonId:t});try{const r=await Yd.getQuizAutosave(e);if(r)return B(r),H(!0),void M("awaiting-recovery");const n=await(0,Ys.getQuiz)(e);w(n);const s=n.meta?._quiz_question_ids||[];N(s);const a=await Iu(e,t);if(!a.attempt_id)throw new Error("Failed to get a valid attempt ID.");P(a.attempt_id)}catch(e){console.error("Error fetching or starting quiz:",e),M("error")}}})()},[e,r,t]);const{clearAutosave:ze}=(({quizId:e,quizData:t,currentQuestionIndex:r,answers:n,timeRemaining:s,attemptId:o,enabled:i=!0,debounceMs:l=1e3})=>{const[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)(null),[p,m]=(0,a.useState)(null),h=(0,a.useRef)(null),g=(0,a.useRef)(null),x=(0,a.useCallback)(async()=>{if(e&&t&&i)try{d(!0),m(null);const a={quiz_id:e,quiz_data:t,current_question_index:r||0,answers:n||{},time_remaining:s||null,attempt_id:o||null};await Yd.saveProgress(a),f(new Date),g.current=JSON.stringify(a)}catch(e){console.error("Error autosaving quiz:",e),m(e.message||"Error al guardar el progreso")}finally{d(!1)}},[e,t,r,n,s,o,i]),y=(0,a.useCallback)(async()=>{if(e)try{h.current&&(clearTimeout(h.current),h.current=null),await Yd.deleteAutosave(e),f(null),g.current=null}catch(e){console.error("Error clearing autosave:",e),m(e.message||"Error al eliminar el autoguardado")}},[e]);return(0,a.useEffect)(()=>{if(i&&e&&t)return JSON.stringify({quiz_id:e,current_question_index:r||0,answers:n||{},time_remaining:s||null})!==g.current?(h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{x()},l),()=>{h.current&&clearTimeout(h.current)}):void 0},[e,t,r,n,s,i,l,x]),(0,a.useEffect)(()=>()=>{h.current&&clearTimeout(h.current)},[]),{isSaving:c,lastSaved:u,saveNow:x,clearAutosave:y,error:p}})({quizId:e,quizData:v,currentQuestionIndex:V,answers:_,timeRemaining:R,attemptId:T,enabled:"in-progress"===O&&!r});(0,a.useEffect)(()=>{v&&T&&"loading"===O&&(Pe>0||!Se&&0===j.length)&&M("in-progress")},[v,T,Se,Pe,Ae,j.length,O]),(0,a.useEffect)(()=>{if("loading"===O&&j.length>0&&v&&T&&0===Pe&&!Se){const e=setTimeout(()=>{},2e3);return()=>clearTimeout(e)}},[O,j.length,v,T,Pe,Se]),(0,a.useEffect)(()=>{if("loading"===O&&v&&T){const e=setTimeout(()=>{0!==Pe||Se||M("in-progress")},1e4);return()=>clearTimeout(e)}},[O,v,T,Pe,Se]);const De=(e,t)=>{C(r=>({...r,[e]:t}))},Le=e=>{E(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Ie=e=>{C(t=>{const r={...t};return delete r[e],r}),E(t=>t.filter(t=>t!==e))},Re=async()=>{if(!T)return void M("error");M("submitting");let t=Ce;if(j&&j.length>Ce.length)try{t=await ec(j,{batchSize:50})}catch(e){t=Ce}const s=t.map(e=>({question_id:e.id,answer_given:_.hasOwnProperty(e.id)?_[e.id]:null,is_risked:S.includes(e.id)}));try{let a;if("custom-attempt"===T&&r){const e=r.meta._quiz_question_ids,t=Date.now(),n=Math.round((t-L)/1e3);a=await(async(e,t)=>{try{const{endpoints:r}=(0,Fr.getApiConfig)(),n=`${r.custom_api}/quiz-generator/calculate-results`;console.log(" Calculating custom quiz result...");const s=await(0,gn.qb)(n,{method:"POST",body:JSON.stringify({question_ids:e,answers:t})});return console.log(" Custom quiz result calculated:",s.data),s.data.data}catch(e){throw console.error(" Error calculating custom quiz result:",e),e}})(e,s),a.duration_seconds=n}else a=await(async(e,t)=>{try{const{endpoints:r}=(0,Fr.getApiConfig)(),n=`${r.custom_api}/quiz-attempts/submit`;console.log(` Submitting answers for attempt ID: ${e}`);const s=await(0,gn.qb)(n,{method:"POST",body:JSON.stringify({attempt_id:e,answers:t})});return console.log(" Attempt submitted successfully:",s.data),s.data.data}catch(e){throw console.error(" Error submitting quiz attempt:",e),e}})(T,s);e&&!r&&await ze();let o=t||Ce;try{const e=o.map(e=>e.id),t=await ec(e,{batchSize:50});t&&t.length>0&&(console.log(" Questions refreshed with updated is_favorite status"),o=t)}catch(e){console.warn(" Could not refresh questions, using cached data:",e)}D(o),q(a),M("submitted"),n&&"function"==typeof n&&n(a,o,v)}catch(e){M("error")}};if("loading"===O||Se&&0===Ce.length)return(0,Qr.jsx)("div",{className:"text-center p-8",children:je("quizzes.quiz.loadingQuiz")});if("awaiting-recovery"===O)return(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"text-center p-8",children:je("quizzes.quiz.loadingQuiz")}),(0,Qr.jsx)(Ku,{autosaveData:F,onResume:async()=>{if(F)try{M("loading");const e="string"==typeof F.quiz_data?JSON.parse(F.quiz_data):F.quiz_data,t="string"==typeof F.answers?JSON.parse(F.answers):F.answers;w(e);const r=e.meta?._quiz_question_ids||[];N(r),C(t),K(F.current_question_index||0),$(F.time_remaining),P(F.attempt_id),H(!1)}catch(e){console.error("Error resuming quiz:",e),M("error")}},onRestart:async()=>{if(e)try{M("loading"),await Yd.deleteAutosave(e);const r=await(0,Ys.getQuiz)(e);w(r);const n=r.meta?._quiz_question_ids||[];N(n);const s=await Iu(e,t);if(!s.attempt_id)throw new Error("Failed to get a valid attempt ID.");P(s.attempt_id),H(!1),B(null)}catch(e){console.error("Error restarting quiz:",e),M("error")}},isOpen:U})]});if("error"===O||Ee){const e=Ee?.message||je("quizzes.quiz.errorLoadingQuiz");return(0,Qr.jsxs)("div",{className:"text-center p-8",style:{color:"#ef4444"},children:[(0,Qr.jsx)("p",{className:"font-semibold mb-2",children:je("quizzes.quiz.errorTitle")}),(0,Qr.jsx)("p",{className:"text-sm",children:e})]})}if("submitting"===O)return(0,Qr.jsx)("div",{className:"text-center p-8",children:je("quizzes.quiz.submittingAnswers")});if("submitted"===O)return(0,Qr.jsx)("div",{className:"text-center p-8",children:je("quizzes.quiz.submittingAnswers")});if(v&&0===Ce.length&&!Se&&0===j.length)return(0,Qr.jsx)("div",{className:"text-center p-8",style:{color:_e},children:je("quizzes.quiz.noQuestionsAssigned")});const $e=v?.meta?._time_limit||0;return(0,Qr.jsxs)("div",{className:"h-full flex flex-col relative overflow-hidden",style:{backgroundColor:ve("secondaryBackground","#f3f4f6")},children:[W&&(0,Qr.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50",children:(0,Qr.jsxs)("div",{className:"w-full max-w-md rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:we?ve("secondaryBackground"):"#ffffff"},children:[(0,Qr.jsx)("div",{className:"px-6 py-4",style:{backgroundColor:ve(we?"accent":"primary")},children:(0,Qr.jsx)("h3",{className:"text-lg font-bold text-white",children:je("quizzes.exitModal.title")})}),(0,Qr.jsx)("div",{className:"p-6",children:(0,Qr.jsx)("p",{style:{color:we?ve("textPrimary"):"#374151"},children:je("quizzes.exitModal.message")})}),(0,Qr.jsxs)("div",{className:"flex gap-3 px-6 pb-6",children:[(0,Qr.jsx)("button",{onClick:()=>Q(!1),className:"flex-1 px-4 py-3 rounded-lg font-medium transition-colors",style:{backgroundColor:we?"rgba(255,255,255,0.1)":"#f3f4f6",color:we?ve("textPrimary"):"#374151"},children:je("quizzes.exitModal.cancel")}),(0,Qr.jsx)("button",{onClick:()=>{Q(!1),o&&o()},className:"flex-1 px-4 py-3 rounded-lg font-medium text-white transition-colors",style:{backgroundColor:ve(we?"accent":"primary")},children:je("quizzes.exitModal.confirm")})]})]})}),Y&&(0,Qr.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>G(!1)}),o&&(0,Qr.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 border-b",style:{backgroundColor:we?ve("secondaryBackground"):"#ffffff",borderColor:we?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},children:[(0,Qr.jsx)("button",{onClick:()=>Q(!0),className:"p-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:we?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:ve(we?"textPrimary":"primary")},"aria-label":je("quizzes.exitModal.title"),children:(0,Qr.jsx)(sl,{className:"w-5 h-5"})}),(0,Qr.jsx)("span",{className:"font-medium text-sm truncate",style:{color:ve(we?"textPrimary":"primary")},children:v?.title?.rendered||v?.title||je("quizzes.quiz.inProgress")})]}),(0,Qr.jsx)("button",{onClick:()=>{const e=!pe;be(e),ye(e),xe(!0)},className:"fixed bottom-6 left-6 z-50 p-4 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:pe?ve("accent","#f59e0b"):ve("primary","#3b82f6"),color:"#ffffff"},"aria-label":"Activar/Desactivar subrayador",children:(0,Qr.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,Qr.jsx)("path",{d:"m9 11-6 6v3h3l6-6"}),(0,Qr.jsx)("path",{d:"m22 2-7 7"}),(0,Qr.jsx)("path",{d:"M21 3 3 21"})]})}),(0,Qr.jsx)("button",{onClick:()=>G(!0),className:"lg:hidden fixed bottom-6 right-6 z-50 p-4 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:ve("primary","#3b82f6"),color:"#ffffff"},"aria-label":"Abrir men del quiz",children:(0,Qr.jsx)(jd,{className:"w-6 h-6"})}),(0,Qr.jsx)("div",{className:"flex-1 overflow-hidden",children:(0,Qr.jsxs)("div",{className:"w-full h-full max-w-screen-2xl mx-auto flex flex-col lg:flex-row gap-8 px-4 sm:px-6 py-6",children:[(0,Qr.jsxs)("main",{ref:Ne,className:"w-full lg:w-2/3 lg:pr-4 relative overflow-y-auto pb-24 lg:pb-8",children:[ue&&(0,Qr.jsx)(Wu,{isActive:ue,isDrawingEnabled:fe,tool:me,color:he,lineWidth:ge,onClose:()=>{xe(!1),ye(!1),be(!1)},onClear:e=>Z(()=>e),containerRef:Ne,showToolbar:!1}),Ce.map((e,t)=>(0,Qr.jsx)($u,{question:e,index:t,selectedAnswer:_[e.id],isRisked:S.includes(e.id),onSelectAnswer:De,onToggleRisk:Le,onClearAnswer:Ie,isSubmitted:"submitted"===O||"submitting"===O,showRiskSelector:!0},e.id)),Te&&(0,Qr.jsxs)("div",{className:"mt-8 mb-4 flex flex-col items-center gap-4",children:[Se?(0,Qr.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 gap-3",children:[(0,Qr.jsx)(Mn,{className:"w-8 h-8 animate-spin",style:{color:ve("primary","#3b82f6")}}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"font-medium",style:{color:ve("primary","#3b82f6")},children:je("quizzes.quiz.loadingMoreQuestions")}),(0,Qr.jsx)("p",{className:"text-sm mt-1",style:{color:_e},children:je("quizzes.quiz.questionsLoadedCount",{loaded:Pe,total:Ae})})]})]}):(0,Qr.jsx)("button",{onClick:()=>{"function"==typeof Me?Me():Oe(Pe)},className:"px-8 py-3.5 rounded-lg font-semibold transition-all duration-200 border-2 shadow-sm hover:scale-[1.02] hover:shadow-md active:scale-[0.98]",style:{backgroundColor:ve("primary","#3b82f6")+"10",borderColor:ve("primary","#3b82f6"),color:ve("primary","#3b82f6")},children:je("quizzes.sidebar.loadMore")}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:_e},children:je("quizzes.quiz.questionsLoadedCount",{loaded:Pe,total:Ae})})]})]}),(0,Qr.jsxs)("aside",{className:`\n        fixed lg:relative\n        top-0 right-0 \n        h-full lg:h-auto\n        w-80 lg:w-1/3\n        flex-shrink-0\n        transition-transform duration-300\n        z-50 lg:z-auto\n        ${Y?"translate-x-0":"translate-x-full lg:translate-x-0"}\n      `,style:{backgroundColor:Y?ve("background","#ffffff"):"transparent"},children:[(0,Qr.jsxs)("div",{className:"lg:hidden flex items-center justify-between px-4 py-5 border-b",style:{borderColor:ve("borderColor","#e5e7eb")},children:[(0,Qr.jsx)("h3",{className:"font-bold text-xl",style:{color:ke},children:je("quizzes.quiz.quizProgress")}),(0,Qr.jsx)("button",{onClick:()=>G(!1),className:"p-2 rounded-lg transition-colors",style:{color:ke},children:(0,Qr.jsx)(En,{className:"w-6 h-6"})})]}),(0,Qr.jsxs)("div",{className:"space-y-4 p-4 lg:p-0 lg:sticky lg:top-6 overflow-y-auto h-[calc(100%-88px)] lg:h-auto",children:[(0,Qr.jsx)(Uu,{questions:Ce,questionIds:j,totalCount:Ae,userAnswers:_,riskedAnswers:S,onSubmit:Re,loadedCount:Pe}),(0,Qr.jsx)(Hu,{durationMinutes:$e,onTimeUp:Re,isPaused:"submitted"===O||"submitting"===O,initialTimeRemaining:R,onTick:e=>$(e)})]})]})]})}),(0,Qr.jsx)(Vu,{isActive:pe,tool:me,onToolChange:e=>{console.log(" Setting drawing tool:",e),g?g(e):oe(e)},color:he,onColorChange:e=>{console.log(" Setting drawing color:",e),x?x(e):le(e)},lineWidth:ge,onLineWidthChange:e=>{console.log(" Setting line width:",e),y?y(e):de(e)},onClear:()=>{X&&X()},onClose:()=>{be(!1),ye(!1)}})]})},Gu=({icon:e,label:t,value:r})=>(0,Qr.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Qr.jsx)(e,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,Qr.jsxs)("span",{className:"font-semibold mr-1",children:[t,":"]}),(0,Qr.jsx)("span",{children:r})]}),Xu=({quiz:e,onStartQuiz:t})=>{const r=ut(),{formatScore:n}=gd(),{ranking:s,loading:a}=Pd(e?.id);if(!e)return(0,Qr.jsx)("div",{className:"text-center p-8",children:(0,Qr.jsx)("p",{className:"text-gray-500",children:"No se pudo cargar la informacin del cuestionario."})});const{title:o,question_count:i=0,time_limit:l=0,passing_score:c=0,difficulty:d=null}=e,u=(e=>({easy:{label:"Fcil",color:"text-green-600",bg:"bg-green-50"},medium:{label:"Medio",color:"text-yellow-600",bg:"bg-yellow-50"},hard:{label:"Difcil",color:"text-red-600",bg:"bg-red-50"}}[e]||{label:"Medio",color:"text-gray-600",bg:"bg-gray-50"}))(d),f=s?.statistics||{},p=s?.currentUser||null,m=s?.top||[],h=s?.relative||[],g=m.find(e=>e.user_id===p?.id),x=h.find(e=>e.user_id===p?.id),y=g||x,b=null!=y&&f.total_users>0;return(0,Qr.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-8 shadow-lg max-w-5xl mx-auto space-y-6",children:[(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)(pl,{className:"mx-auto h-12 w-12 text-indigo-500 mb-4"}),(0,Qr.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:o?.rendered||o||"Cuestionario"}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Ests a punto de comenzar el cuestionario. Ests listo?"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-left bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,Qr.jsx)(Gu,{icon:pl,label:"Preguntas",value:i}),(0,Qr.jsx)(Gu,{icon:Ec,label:"Tiempo Lmite",value:l>0?`${l} min`:"Sin lmite"}),(0,Qr.jsx)(Gu,{icon:On,label:"Puntuacin Mnima",value:n(c)}),(0,Qr.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Qr.jsx)(Eu,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,Qr.jsx)("span",{className:"font-semibold mr-1",children:"Dificultad:"}),(0,Qr.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${u.bg} ${u.color}`,children:u.label})]})]}),b&&!a&&(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qr.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg border-2 border-blue-200 shadow-sm",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qr.jsx)("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Sin Riesgo"}),(0,Qr.jsx)("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:(0,Qr.jsx)(kc,{className:"w-5 h-5 text-blue-600"})})]}),(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Media UA:"}),(0,Qr.jsx)("span",{className:"text-lg font-bold text-gray-800",children:n(f.avg_score_without_risk||0)})]}),(0,Qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Mi Nota:"}),(0,Qr.jsx)("span",{className:"text-lg font-bold text-blue-700",children:n(y?.score||0)})]}),(0,Qr.jsx)("div",{className:"border-t border-blue-200 my-2"}),(0,Qr.jsxs)("div",{className:"flex justify-between items-center bg-white bg-opacity-60 p-2 rounded",children:[(0,Qr.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Mi Percentil:"}),(0,Qr.jsx)("span",{className:"text-xl font-extrabold text-blue-600",children:(()=>{const e=(y?.score||0)-(f.avg_score_without_risk||0);return`${e>0?"+":""}${n(e)}`})()})]})]})]}),(0,Qr.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-amber-50 p-6 rounded-lg border-2 border-yellow-300 shadow-sm",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qr.jsx)("h3",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide",children:"Con Riesgo"}),(0,Qr.jsx)("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:(0,Qr.jsx)(Eu,{className:"w-5 h-5 text-amber-600"})})]}),(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Media UA:"}),(0,Qr.jsx)("span",{className:"text-lg font-bold text-gray-800",children:n(f.avg_score_with_risk||0)})]}),(0,Qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Mi Nota:"}),(0,Qr.jsx)("span",{className:"text-lg font-bold text-amber-700",children:n(y?.score_with_risk||0)})]}),(0,Qr.jsx)("div",{className:"border-t border-yellow-200 my-2"}),(0,Qr.jsxs)("div",{className:"flex justify-between items-center bg-white bg-opacity-60 p-2 rounded",children:[(0,Qr.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Mi Percentil:"}),(0,Qr.jsx)("span",{className:"text-xl font-extrabold text-amber-600",children:(()=>{const e=(y?.score_with_risk||0)-(f.avg_score_with_risk||0);return`${e>0?"+":""}${n(e)}`})()})]})]})]})]}),(0,Qr.jsx)("div",{className:"text-center pt-2",children:(0,Qr.jsxs)(ac,{onClick:t,variant:"primary",className:"w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 text-white font-bold text-lg rounded-xl shadow-lg transform hover:-translate-y-0.5",style:{background:"linear-gradient(to right, var(--qe-primary), var(--qe-secondary))"},children:[(0,Qr.jsx)(Nu,{className:"w-6 h-6 mr-2"}),"Comenzar Cuestionario"]})}),(0,Qr.jsxs)("div",{className:"pt-2 border-t border-gray-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Mis ltimos Intentos"}),(0,Qr.jsx)(ac,{onClick:e=>{e.preventDefault(),r("/")},variant:"primary",className:"text-sm font-medium px-3 py-1.5 rounded-lg",children:"Ver todos "})]}),(0,Qr.jsx)(zd,{quizId:e.id,maxResults:5,showCourseColumn:!1})]})]})},Zu=({step:e})=>{const{url:t,filename:r}=e.data;return t?(0,Qr.jsx)("div",{className:"w-full bg-white p-4 rounded-lg border shadow-sm",children:(0,Qr.jsx)("div",{className:"aspect-w-4 aspect-h-5",children:(0,Qr.jsx)("embed",{src:t,type:"application/pdf",className:"w-full h-full",style:{minHeight:"73vh"}})})}):(0,Qr.jsxs)("div",{className:"p-4 border border-red-200 bg-red-50 rounded-lg flex items-center",children:[(0,Qr.jsx)(jn,{className:"h-5 w-5 text-red-500 mr-3"}),(0,Qr.jsx)("p",{className:"text-sm text-red-700",children:"No se ha proporcionado una URL para el PDF."})]})},Ju=({step:e,lesson:t,lessons:r=[],onNavigate:n,courseId:s,onOpenRanking:o,rankingLoading:i,onOpenLessonList:l,onQuizStateChange:c})=>{const{getColor:d}=Yr(),[u,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1),[h,g]=(0,a.useState)(null),[x,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[N,k]=(0,a.useState)("pen"),[_,C]=(0,a.useState)("#000000"),[S,E]=(0,a.useState)(2),[O,M]=(0,a.useState)(null);(0,a.useEffect)(()=>{c&&"function"==typeof c&&c(h)},[h,c]);const T="in-progress"===h;(0,a.useEffect)(()=>{console.log(" StepContent props:",{step:e?.id,lesson:t?.id,lessonsCount:r?.length,courseId:s,hasOnNavigate:!!n})},[e,t,r,s,n]);const{isCompleted:P,markComplete:A,unmarkComplete:q,loading:z,completedItems:D}=Rd(s,!0);(0,a.useEffect)(()=>{console.log(" Completed items:",D)},[D]),(0,a.useEffect)(()=>{f(!1),m(!1)},[e]);const L=()=>{if(!t||!e||!r||0===r.length)return{currentLessonIndex:-1,currentStepIndex:-1,steps:[]};const n=r.findIndex(e=>e.id===t.id),s=t.meta?._lesson_steps||[],a=s.findIndex(t=>!(!t.id||!e.id||t.id!==e.id)||(t===e||t.type===e.type&&JSON.stringify(t.data||{})===JSON.stringify(e.data||{})));return console.log(" getCurrentStepInfo:",{currentLessonIndex:n,currentStepIndex:a,lessonId:t.id,stepType:e.type,totalSteps:s.length}),{currentLessonIndex:n,currentStepIndex:a,steps:s}},I=()=>{const{currentLessonIndex:e,currentStepIndex:n,steps:s}=L();if(-1===e||-1===n)return{hasPrev:!1,hasNext:!1,prevLesson:null,prevStep:null,nextLesson:null,nextStep:null};let a=null,o=null,i=null,l=null,c=!1,d=!1;if(n>0)a=t,o=s[n-1],c=!0;else if(e>0){const t=r[e-1],n=t.meta?._lesson_steps||[];n.length>0&&(a=t,o=n[n.length-1],c=!0)}if(n<s.length-1)i=t,l=s[n+1],d=!0;else if(e<r.length-1){const t=r[e+1],n=t.meta?._lesson_steps||[];n.length>0&&(i=t,l=n[0],d=!0)}return{hasPrev:c,hasNext:d,prevLesson:a,prevStep:o,nextLesson:i,nextStep:l}},R=I(),{currentStepIndex:$}=L(),F=!!(t&&e&&s&&-1!==$)&&P(t.id,"step",t.id,$),B=(()=>{if(!t||!s)return{completed:0,total:0};const e=t.meta?._lesson_steps||[],r=e.length;return{completed:e.filter((e,r)=>P(t.id,"step",t.id,r)).length,total:r}})();if(!e||!t)return(0,Qr.jsxs)("div",{className:"flex-grow lg:w-2/3 p-8 flex flex-col items-center justify-center text-center bg-white rounded-lg shadow-md",children:[(0,Qr.jsx)(kn,{className:"w-16 h-16 text-gray-300 mb-4"}),(0,Qr.jsx)("h2",{className:"text-2xl font-semibold text-gray-700",children:"Selecciona un paso"}),(0,Qr.jsx)("p",{className:"text-gray-500 mt-2",children:"Elige un paso de la lista de lecciones para ver su contenido."})]});"quiz"===e.type&&(e.data?.quiz_id||e.quiz_id);const U="quiz"===e.type?(H=e.data||{}).quiz_title?H.quiz_title:"Cuestionario":e.title;var H;return(0,Qr.jsxs)("div",{className:"flex-grow lg:w-full h-full flex flex-col",children:[!T&&(0,Qr.jsx)("div",{className:"sticky top-0 z-10 px-6 py-4 border-b flex-shrink-0",style:{backgroundColor:d("secondaryBackground","#f3f4f6")},children:u&&!p?(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("button",{onClick:l,className:"p-2 rounded-lg transition-all",style:{backgroundColor:d("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"15"},title:"Abrir ndice de lecciones",children:(0,Qr.jsx)(jd,{className:"w-6 h-6",style:{color:d("primary","#3b82f6")}})}),(0,Qr.jsx)("button",{onClick:()=>{x?j(!w):(y(!0),j(!0),v(!0))},className:"p-2 rounded-lg transition-all",style:{backgroundColor:w?d("accent","#f59e0b")+"25":d("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=w?d("accent","#f59e0b")+"35":d("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=w?d("accent","#f59e0b")+"25":d("primary","#3b82f6")+"15"},title:x?w?"Pausar dibujo":"Reanudar dibujo":"Activar herramientas",children:(0,Qr.jsx)(qu,{className:"w-6 h-6",style:{color:w?d("accent","#f59e0b"):d("primary","#3b82f6")}})}),x&&b&&(0,Qr.jsxs)("div",{className:"flex items-center gap-2 ml-2 pl-2 border-l-2",style:{borderColor:d("primary","#3b82f6")+"30"},children:[(0,Qr.jsxs)("div",{className:"flex gap-1",children:[(0,Qr.jsx)("button",{onClick:()=>k("pen"),className:"p-2 rounded transition-all",style:{backgroundColor:"pen"===N?d("primary","#3b82f6"):"transparent",color:"pen"===N?"white":d("primary","#3b82f6")},title:"Lpiz",children:(0,Qr.jsx)(zu,{className:"w-5 h-5"})}),(0,Qr.jsx)("button",{onClick:()=>k("highlighter"),className:"p-2 rounded transition-all",style:{backgroundColor:"highlighter"===N?d("accent","#f59e0b"):"transparent",color:"highlighter"===N?"white":d("accent","#f59e0b")},title:"Resaltador",children:(0,Qr.jsx)(Du,{className:"w-5 h-5"})}),(0,Qr.jsx)("button",{onClick:()=>k("eraser"),className:"p-2 rounded transition-all",style:{backgroundColor:"eraser"===N?"#dc2626":"transparent",color:"eraser"===N?"white":"#dc2626"},title:"Borrador",children:(0,Qr.jsx)(Lu,{className:"w-5 h-5"})})]}),"eraser"!==N&&(0,Qr.jsx)("div",{className:"flex gap-1 ml-2 pl-2 border-l",style:{borderColor:d("primary","#3b82f6")+"30"},children:[{value:"#000000",name:"Negro"},{value:d("primary","#3b82f6"),name:"Primario"},{value:d("accent","#f59e0b"),name:"Acento"},{value:"#dc2626",name:"Rojo"},{value:"#16a34a",name:"Verde"}].map(e=>(0,Qr.jsx)("button",{onClick:()=>C(e.value),className:"w-7 h-7 rounded border-2 transition-all hover:scale-110",style:{backgroundColor:e.value,borderColor:_===e.value?"#fff":"transparent",boxShadow:_===e.value?`0 0 0 2px ${d("primary","#3b82f6")}`:"none"},title:e.name},e.value))}),(0,Qr.jsx)("div",{className:"flex items-center gap-2 ml-2 pl-2 border-l",style:{borderColor:d("primary","#3b82f6")+"30"},children:(0,Qr.jsx)("input",{type:"range",min:"1",max:"5",value:S,onChange:e=>E(Number(e.target.value)),className:"w-20 h-1",style:{accentColor:d("primary","#3b82f6")},title:`Grosor: ${S}`})}),(0,Qr.jsxs)("div",{className:"flex gap-1 ml-2 pl-2 border-l",style:{borderColor:d("primary","#3b82f6")+"30"},children:[(0,Qr.jsx)("button",{onClick:()=>O&&O(),className:"p-2 rounded transition-all",style:{backgroundColor:"transparent",color:"#dc2626"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#fef2f2"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},title:"Limpiar todos los dibujos",children:(0,Qr.jsx)(ca,{className:"w-5 h-5"})}),(0,Qr.jsx)("button",{onClick:()=>v(!1),className:"px-3 py-1 rounded text-sm font-medium transition-all",style:{backgroundColor:d("primary","#3b82f6")+"15",color:d("primary","#3b82f6")},title:"Ocultar herramientas",children:"Ocultar"}),(0,Qr.jsx)("button",{onClick:()=>{y(!1),j(!1),v(!1)},className:"px-3 py-1 rounded text-sm font-medium text-white transition-all",style:{backgroundColor:"#dc2626"},title:"Salir del modo dibujo",children:"Salir"})]})]}),x&&!b&&(0,Qr.jsx)("button",{onClick:()=>v(!0),className:"px-3 py-2 rounded-lg transition-all text-sm font-medium",style:{backgroundColor:d("primary","#3b82f6")+"15",color:d("primary","#3b82f6")},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"15"},title:"Mostrar herramientas",children:"Herramientas"})]}),(0,Qr.jsx)("h1",{className:"text-xl font-bold text-gray-800 flex-1 text-center",children:U}),(0,Qr.jsxs)("button",{onClick:()=>f(!1),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg text-white transition-all",style:{backgroundColor:"#ef4444"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#dc2626"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#ef4444"},title:"Salir del cuestionario",children:[(0,Qr.jsx)(En,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{children:"Salir del cuestionario"})]})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-3",children:[(0,Qr.jsx)("button",{onClick:l,className:"p-2 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:d("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"15"},title:"Abrir ndice de lecciones",children:(0,Qr.jsx)(jd,{className:"w-6 h-6",style:{color:d("primary","#3b82f6")}})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0 flex items-baseline gap-3",children:[(0,Qr.jsx)("p",{className:"text-sm qe-text-primary font-semibold flex-shrink-0",children:t.title.rendered}),(0,Qr.jsx)("span",{className:"text-gray-400",children:""}),(0,Qr.jsx)("h1",{className:"text-xl font-bold text-gray-800 truncate",children:U})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,Qr.jsx)("span",{className:"qe-text-primary font-medium",children:"Progreso:"}),(0,Qr.jsxs)("span",{className:"font-semibold qe-text-primary",children:[B.completed," / ",B.total]})]}),(0,Qr.jsx)("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,Qr.jsx)("div",{className:"h-full transition-all duration-300 rounded-full",style:{width:(B.total>0?B.completed/B.total*100:0)+"%",backgroundColor:"var(--qe-primary)"}})}),(0,Qr.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[B.total>0?Math.round(B.completed/B.total*100):0,"%"]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,Qr.jsxs)("button",{onClick:o,disabled:i,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--qe-primary)"},onMouseEnter:e=>{i||(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{i||(e.currentTarget.style.backgroundColor="var(--qe-primary)")},title:"Ver ranking del curso",children:[(0,Qr.jsx)(qc,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{className:"hidden lg:inline",children:"Ranking"})]}),(0,Qr.jsxs)("button",{onClick:()=>{const{hasPrev:e,prevLesson:t,prevStep:r}=I();console.log(" DEBUG handlePrevious:",{hasPrev:e,prevLesson:t,prevStep:r}),e&&r&&t&&n&&n(r,t)},disabled:!R.hasPrev,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:R.hasPrev?"var(--qe-primary)":"#9ca3af"},onMouseEnter:e=>{R.hasPrev&&(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{R.hasPrev&&(e.currentTarget.style.backgroundColor="var(--qe-primary)")},title:"Paso anterior",children:[(0,Qr.jsx)(sl,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{className:"hidden sm:inline",children:"Anterior"})]}),("quiz"!==e.type||p)&&(0,Qr.jsx)("button",{onClick:async r=>{if(r.preventDefault(),r.stopPropagation(),t&&e&&s)try{const{currentStepIndex:r}=L();if(-1===r)return void console.error(" Could not find current step index");console.log(" DEBUG Toggle Complete:",{lessonId:t.id,stepIndex:r,stepId:e.id});const n=P(t.id,"step",t.id,r);console.log(" Current completion status:",n),n?(await q(t.id,"step",t.id,r),console.log(" Step unmarked as complete")):(await A(t.id,"step",t.id,r),console.log(" Step marked as complete"))}catch(e){console.error(" Error toggling step completion:",e)}else console.warn(" Missing required data:",{lesson:t,step:e,courseId:s})},disabled:z,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:F?"#10b981":"var(--qe-primary)"},onMouseEnter:e=>{z||(e.currentTarget.style.backgroundColor=F?"#059669":"var(--qe-accent)")},onMouseLeave:e=>{z||(e.currentTarget.style.backgroundColor=F?"#10b981":"var(--qe-primary)")},title:F?"Marcar como no completado":"Marcar como completado",children:F?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Ui,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{className:"hidden md:inline",children:"Completado"})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(eu,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{className:"hidden md:inline",children:"Completar"})]})}),(0,Qr.jsxs)("button",{onClick:()=>{const{hasNext:e,nextLesson:t,nextStep:r}=I();console.log(" DEBUG handleNext:",{hasNext:e,nextLesson:t,nextStep:r}),e&&r&&t&&n&&n(r,t)},disabled:!R.hasNext,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:R.hasNext?"var(--qe-primary)":"#9ca3af"},onMouseEnter:e=>{R.hasNext&&(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{R.hasNext&&(e.currentTarget.style.backgroundColor="var(--qe-primary)")},title:"Siguiente paso",children:[(0,Qr.jsx)("span",{className:"hidden sm:inline",children:"Siguiente"}),(0,Qr.jsx)(al,{className:"w-4 h-4"})]})]})]})]})}),(0,Qr.jsx)("div",{className:"quiz"===e.type&&u?"flex-1 overflow-hidden":"flex-1 overflow-y-auto px-6 py-6",style:{backgroundColor:d("secondaryBackground","#f3f4f6")},children:(e=>{if(!e||!e.type)return(0,Qr.jsx)("p",{className:"text-gray-500",children:"Contenido del paso no disponible."});const r=e.data||{};switch(e.type){case"video":const n=(e=>{if(!e)return null;let t=null,r=null;let n=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return n&&n[1]&&(t=n[1],r=`https://www.youtube.com/embed/${t}`),r||(n=e.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:video\/)?(\d+)/),n&&n[1]&&(t=n[1],r=`https://player.vimeo.com/video/${t}`)),r||!e.includes("youtube.com/embed")&&!e.includes("player.vimeo.com/video")?r:e})(r.video_url);return(0,Qr.jsx)("div",{children:n?(0,Qr.jsx)("div",{className:"aspect-video",children:(0,Qr.jsx)("iframe",{className:"w-full h-full rounded-lg",src:n,title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,Qr.jsx)("p",{children:"La URL del video no es vlida o no es compatible."})});case"text":return(0,Qr.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:r.content||"No hay contenido de texto."}});case"quiz":const a=r.quiz_id||e.quiz_id||e.data?.quiz_id;if(!a)return(0,Qr.jsx)("p",{children:"Error: No se ha especificado un ID de cuestionario para este paso."});if(!u){const t={id:a,title:{rendered:r.quiz_title||e.data?.quiz_title||"Cuestionario"}};return(0,Qr.jsx)(Xu,{quiz:t,onStartQuiz:()=>f(!0)})}return console.log(" Rendering Quiz component:",{quizId:a,lessonId:t?.id,lesson:t}),(0,Qr.jsx)(Yu,{quizId:a,lessonId:t?.id||t?.ID,onQuizStateChange:e=>{g(e)},isDrawingMode:x,setIsDrawingMode:y,isDrawingEnabled:w,setIsDrawingEnabled:j,showDrawingToolbar:b,setShowDrawingToolbar:v,drawingTool:N,drawingColor:_,drawingLineWidth:S,onDrawingToolChange:k,onDrawingColorChange:C,onDrawingLineWidthChange:E,onClearCanvas:M,onQuizComplete:()=>{const{currentStepIndex:e}=L();-1!==e&&t&&s&&A(t.id,"step",t.id,e).then(()=>{console.log(" Quiz step marked as complete"),m(!0)}).catch(e=>console.error(" Error marking quiz as complete:",e))}});case"pdf":return(0,Qr.jsx)(Zu,{step:e});default:return(0,Qr.jsxs)("p",{children:["Tipo de paso no soportado: ",e.type]})}})(e)})]})},ef=cn("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),tf=cn("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),rf=({isOpen:e,onClose:t,courseId:r,courseName:n})=>{var s,o,i,l,c,d,u,f,p,m,h,g;const{loading:x,error:y,ranking:b,statistics:v,myStats:w,pagination:j,withRisk:N,toggleRisk:k,goToPage:_,nextPage:C,prevPage:S,firstPage:E,lastPage:O,goToUserPage:M}=Mu(r);return(0,a.useEffect)(()=>{e&&j.userPage&&1===j.currentPage&&M()},[e,j.userPage,j.currentPage,M]),e?(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Qr.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-2 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg shadow-md",children:(0,Qr.jsx)(qc,{className:"w-6 h-6 text-white"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Ranking del Curso"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:n})]})]}),(0,Qr.jsx)("button",{onClick:t,className:"p-2 hover:bg-white rounded-lg transition-colors",children:(0,Qr.jsx)(En,{className:"w-5 h-5 text-gray-500"})})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:x&&!b.length?(0,Qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Cargando ranking..."})]})}):y?(0,Qr.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[(0,Qr.jsx)("p",{className:"font-medium",children:"Error al cargar el ranking"}),(0,Qr.jsx)("p",{className:"text-sm mt-1",children:y})]}):(0,Qr.jsxs)("div",{className:"space-y-6",children:[v&&(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Qr.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Qr.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,Qr.jsx)(Nn,{className:"w-5 h-5 text-white"})}),(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Usuarios"})]}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.total_users})]}),(0,Qr.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Qr.jsx)("div",{className:"p-2 bg-green-500 rounded-lg",children:(0,Qr.jsx)(kc,{className:"w-5 h-5 text-white"})}),(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Media Sin Riesgo"})]}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null!==(s=v.avg_score_without_risk)&&void 0!==s?s:0).toFixed(2)})]}),(0,Qr.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4 border border-yellow-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Qr.jsx)("div",{className:"p-2 bg-yellow-500 rounded-lg",children:(0,Qr.jsx)(rl,{className:"w-5 h-5 text-white"})}),(0,Qr.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Media Con Riesgo"})]}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null!==(o=v.avg_score_with_risk)&&void 0!==o?o:0).toFixed(2)})]})]}),w&&(0,Qr.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-100 rounded-lg p-6 border border-amber-200 shadow-md",children:[(0,Qr.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,Qr.jsx)(qc,{className:"w-5 h-5 text-amber-600"}),"Tus Estadsticas"]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Qr.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,Qr.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3 border-b pb-2",children:"Sin Riesgo"}),(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Puntuacin:"}),(0,Qr.jsx)("span",{className:"text-sm font-bold text-gray-900",children:(null!==(i=w.score_without_risk)&&void 0!==i?i:0).toFixed(2)})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Posicin:"}),(0,Qr.jsxs)("span",{className:"text-sm font-bold text-blue-600",children:["#",null!==(l=w.position_without_risk)&&void 0!==l?l:"-"]})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Percentil:"}),(0,Qr.jsxs)("span",{className:"text-sm font-bold "+((null!==(c=w.percentile_without_risk)&&void 0!==c?c:0)>=0?"text-green-600":"text-red-600"),children:[(null!==(d=w.percentile_without_risk)&&void 0!==d?d:0)>0?"+":"",(null!==(u=w.percentile_without_risk)&&void 0!==u?u:0).toFixed(2)]})]})]})]}),(0,Qr.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,Qr.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3 border-b pb-2",children:"Con Riesgo"}),(0,Qr.jsxs)("div",{className:"space-y-2",children:[(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Puntuacin:"}),(0,Qr.jsx)("span",{className:"text-sm font-bold text-gray-900",children:(null!==(f=w.score_with_risk)&&void 0!==f?f:0).toFixed(2)})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Posicin:"}),(0,Qr.jsxs)("span",{className:"text-sm font-bold text-blue-600",children:["#",null!==(p=w.position_with_risk)&&void 0!==p?p:"-"]})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsx)("span",{className:"text-sm text-gray-600",children:"Percentil:"}),(0,Qr.jsxs)("span",{className:"text-sm font-bold "+((null!==(m=w.percentile_with_risk)&&void 0!==m?m:0)>=0?"text-green-600":"text-red-600"),children:[(null!==(h=w.percentile_with_risk)&&void 0!==h?h:0)>0?"+":"",(null!==(g=w.percentile_with_risk)&&void 0!==g?g:0).toFixed(2)]})]})]})]})]})]}),(0,Qr.jsx)("div",{className:"flex justify-center",children:(0,Qr.jsx)("button",{onClick:k,className:"px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg "+(N?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:N?"Con Riesgo":"Sin Riesgo"})}),(0,Qr.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-md overflow-hidden",children:[(0,Qr.jsx)("div",{className:"overflow-x-auto",children:(0,Qr.jsxs)("table",{className:"w-full",children:[(0,Qr.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:(0,Qr.jsxs)("tr",{children:[(0,Qr.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Posicin"}),(0,Qr.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Usuario"}),(0,Qr.jsx)("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Puntuacin"})]})}),(0,Qr.jsx)("tbody",{className:"divide-y divide-gray-200",children:b.map(e=>{var t;const r=e.is_current_user,n=1===e.position?"text-yellow-600 font-bold":2===e.position?"text-gray-500 font-bold":3===e.position?"text-orange-600 font-bold":"text-gray-700";return(0,Qr.jsxs)("tr",{className:"transition-colors "+(r?"bg-blue-50 border-l-4 border-l-blue-500":"hover:bg-gray-50"),children:[(0,Qr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[1===e.position&&(0,Qr.jsx)(qc,{className:"w-5 h-5 text-yellow-500"}),2===e.position&&(0,Qr.jsx)(rl,{className:"w-5 h-5 text-gray-400"}),3===e.position&&(0,Qr.jsx)(rl,{className:"w-5 h-5 text-orange-500"}),(0,Qr.jsxs)("span",{className:`text-lg font-semibold ${n}`,children:["#",e.position]})]})}),(0,Qr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("img",{src:e.avatar_url,alt:e.display_name,className:"w-10 h-10 rounded-full border-2 border-gray-200"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("p",{className:"font-medium "+(r?"text-blue-700":"text-gray-900"),children:[e.display_name,r&&(0,Qr.jsx)("span",{className:"ml-2 text-xs bg-blue-600 text-white px-2 py-1 rounded-full",children:"T"})]}),(0,Qr.jsxs)("p",{className:"text-xs text-gray-500",children:[e.total_attempts," intento",1!==e.total_attempts?"s":""]})]})]})}),(0,Qr.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Qr.jsx)("span",{className:"text-lg font-bold "+(r?"text-blue-700":"text-gray-900"),children:(null!==(t=e.score)&&void 0!==t?t:0).toFixed(2)})})]},e.user_id)})})]})}),0===b.length&&!x&&(0,Qr.jsxs)("div",{className:"text-center py-12",children:[(0,Qr.jsx)(qc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,Qr.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay usuarios en el ranking todava"}),(0,Qr.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Completa todos los cuestionarios para aparecer en el ranking"})]})]}),j.totalPages>1&&(0,Qr.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,Qr.jsxs)("div",{className:"text-sm text-gray-600",children:["Mostrando ",(j.currentPage-1)*j.perPage+1," - ",Math.min(j.currentPage*j.perPage,j.totalUsers)," de ",j.totalUsers," usuarios"]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("button",{onClick:E,disabled:1===j.currentPage,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Primera pgina",children:(0,Qr.jsx)(ef,{className:"w-4 h-4"})}),(0,Qr.jsx)("button",{onClick:S,disabled:1===j.currentPage,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Anterior",children:(0,Qr.jsx)(sl,{className:"w-4 h-4"})}),(0,Qr.jsx)("div",{className:"flex gap-1",children:(()=>{const e=[],t=j.totalPages,r=j.currentPage;let n=Math.max(1,r-2),s=Math.min(t,r+2);r<=3&&(s=Math.min(5,t)),r>=t-2&&(n=Math.max(1,t-4));for(let t=n;t<=s;t++)e.push((0,Qr.jsx)("button",{onClick:()=>_(t),className:"px-3 py-1 rounded text-sm font-medium transition-colors "+(t===r?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t},t));return e})()}),(0,Qr.jsx)("button",{onClick:C,disabled:j.currentPage===j.totalPages,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Siguiente",children:(0,Qr.jsx)(al,{className:"w-4 h-4"})}),(0,Qr.jsx)("button",{onClick:O,disabled:j.currentPage===j.totalPages,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"ltima pgina",children:(0,Qr.jsx)(tf,{className:"w-4 h-4"})})]})]})]})}),(0,Qr.jsx)("div",{className:"p-4 border-t border-gray-200 flex justify-center bg-gray-50",children:(0,Qr.jsx)("button",{onClick:t,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-all shadow-md hover:shadow-lg",onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:"Cerrar"})})]})}):null},nf=()=>(0,Qr.jsxs)("div",{className:"flex items-center justify-center h-full text-gray-500",children:[(0,Qr.jsx)(Mn,{className:"animate-spin mr-2"}),"Cargando contenido del curso..."]}),sf=({message:e})=>(0,Qr.jsxs)("div",{className:"p-4 text-red-600",children:["Error: ",e]}),af=()=>(0,Qr.jsx)("div",{className:"p-4 text-gray-500",children:"Curso no encontrado o no hay lecciones disponibles."}),of=()=>{const{courseId:e}=pt(),t=lt(),{t:r}=k(),[n,s]=(0,a.useState)(null),[o,i]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),[f,p]=(0,a.useState)({lesson:null,step:null}),[m,h]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1),[y,b]=(0,a.useState)(!1),[v,w]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(e){c(!0),u(null);try{const t=parseInt(e,10);if(isNaN(t))throw new Error("Invalid course ID");const r=await(0,Qs.getCourseLessons)(t,{perPage:100});console.log(" DEBUG: Lecciones recibidas de la API (orden original):",r.data?.map(e=>({id:e.id,title:e.title?.rendered||e.title}))),i(r.data||[])}catch(e){console.error("Error fetching lessons:",e),u(e.message||"Failed to load lessons"),i([])}finally{c(!1)}}})()},[e]);const j=(0,a.useMemo)(()=>{if(!o||0===o.length)return[];console.log(" DEBUG: Estado de lessons antes de procesar:",o.map(e=>({id:e.id,title:e.title?.rendered||e.title,_lesson_order:e.meta?._lesson_order})));const e=o.map(e=>{if(!e.meta?._lesson_steps||0===e.meta._lesson_steps.length)return e;const t=[...e.meta._lesson_steps].sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,meta:{...e.meta,_lesson_steps:t}}});return console.log(" DEBUG: Lecciones procesadas (orden final):",e.map(e=>({id:e.id,title:e.title?.rendered||e.title}))),e},[o]),{ranking:N,myStatus:_,loading:C,totalQuizzes:S,refetch:E}=Tu(e,!1),{data:O,loading:M,error:T}=(e=>{const[t,r]=(0,a.useState)(null),[n,s]=(0,a.useState)(!0),[o,i]=(0,a.useState)(null),l=(0,a.useCallback)(async()=>{if(e){s(!0),i(null);try{const t=await Zn(parseInt(e));r(t)}catch(e){i(e)}finally{s(!1)}}else s(!1)},[e]);return(0,a.useEffect)(()=>{l()},[l]),{data:t,loading:n,error:o}})(e);(0,a.useEffect)(()=>{O&&s(O)},[O]),(0,a.useEffect)(()=>{(T||d)&&h((T||d).message||"Ocurri un error")},[T,d]),(0,a.useEffect)(()=>{if(g||l||!j?.length)return;const e=t.state?.selectedLessonId,r=t.state?.selectedStepIndex;if(void 0!==e&&void 0!==r){const t=j.find(t=>parseInt(t.id)===parseInt(e));if(t&&t.meta?._lesson_steps){const e=t.meta._lesson_steps;if(r>=0&&r<e.length){const n=e[r];return p({lesson:t,step:n}),x(!0),void window.history.replaceState({},document.title)}}}const n=t.state?.selectedQuizId;if(n){const e=j.find(e=>{const t=e.meta?._lesson_steps?.some(e=>e?.data?.quiz_id&&parseInt(e.data.quiz_id)===parseInt(n));return t});if(e){const t=e.meta._lesson_steps.find(e=>e?.data?.quiz_id&&parseInt(e.data.quiz_id)===parseInt(n));if(t)return p({lesson:e,step:t}),x(!0),void window.history.replaceState({},document.title)}}const s=j[0],a=s?.meta?._lesson_steps?.[0];s&&a&&(p({lesson:s,step:a}),x(!0))},[j,l,g,t.state]);const P=(e,t)=>{p({step:e,lesson:t})};return M||l?(0,Qr.jsx)(nf,{}):m?(0,Qr.jsx)(sf,{message:m}):n&&j&&0!==j.length?(0,Qr.jsxs)("div",{className:"flex flex-col lg:flex-row h-full overflow-hidden",children:[(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto relative",children:(0,Qr.jsx)(Ju,{lesson:f.lesson,step:f.step,lessons:j,onNavigate:P,courseId:parseInt(e,10),onOpenRanking:async()=>{b(!0),await E()},rankingLoading:C,onOpenLessonList:()=>w(!0)})}),(0,Qr.jsx)(Pu,{lessons:j,isLoading:l,selectedStepId:f.step?.id,onSelectStep:P,isOpen:v,onClose:()=>w(!1)}),y&&(0,Qr.jsx)(rf,{isOpen:y,onClose:()=>b(!1),courseId:e,courseName:n?.title?.rendered||n?.title||"Curso"})]}):(0,Qr.jsx)(af,{})},lf=cn("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),cf=cn("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),df=({label:e,options:t,selected:r,onChange:n,placeholder:s="Seleccionar...",pageColors:o,isDarkMode:i})=>{const{getColor:l}=Yr(),[c,d]=(0,a.useState)(!1),u=e=>{const t=r.includes(e)?r.filter(t=>t!==e):[...r,e];n(t)},f=t.filter(e=>r.includes(e.value)).map(e=>e.label);return(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:o.text},children:e}),(0,Qr.jsxs)("button",{type:"button",onClick:()=>d(!c),className:"w-full px-3 py-2 text-left rounded-lg flex items-center justify-between transition-all text-sm",style:{border:`2px solid ${c?o.accent:o.inputBorder}`,backgroundColor:o.inputBg,color:o.text},children:[(0,Qr.jsx)("span",{className:"block truncate",children:0===r.length?(0,Qr.jsx)("span",{style:{color:o.textMuted},children:s}):`${r.length} seleccionados`}),(0,Qr.jsx)(Vi,{size:14,className:"transition-transform "+(c?"rotate-180":""),style:{color:o.textMuted}})]}),c&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,Qr.jsx)("div",{className:"absolute z-20 w-full mt-1 max-h-48 overflow-auto rounded-lg shadow-lg border-2",style:{backgroundColor:i?l("secondaryBackground","#1f2937"):"#ffffff",borderColor:i?o.accent:o.inputBorder},children:t.map(e=>(0,Qr.jsxs)("div",{onClick:()=>u(e.value),className:"px-3 py-2 cursor-pointer flex items-center gap-2 transition-colors",style:{backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=i?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)("div",{className:"w-4 h-4 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0",style:{backgroundColor:r.includes(e.value)?o.accent:"transparent",borderColor:r.includes(e.value)?o.accent:o.inputBorder},children:r.includes(e.value)&&(0,Qr.jsx)(Ui,{size:10,className:"text-white"})}),(0,Qr.jsx)("span",{className:"text-sm truncate",style:{color:o.text},children:e.label})]},e.value))})]}),r.length>0&&(0,Qr.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:f.map((e,r)=>(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:i?`${o.accent}30`:`${o.text}15`,color:i?"#ffffff":o.text},children:[e,(0,Qr.jsx)("button",{onClick:r=>{r.stopPropagation(),u(t.find(t=>t.label===e).value)},className:"ml-1 hover:opacity-70",children:(0,Qr.jsx)(En,{size:10})})]},r))})]})},uf=()=>{const{t:e}=k(),{courseId:t}=pt(),{getColor:r,isDarkMode:n}=Yr(),{course:s,loading:o}=yu(t),i=s?.title?.rendered||s?.title||"",l={text:n?r("textPrimary","#f9fafb"):r("primary","#1a202c"),textMuted:n?r("textSecondary","#9ca3af"):`${r("primary","#1a202c")}60`,accent:r("accent","#f59e0b"),primary:r("primary","#1a202c"),hoverBg:n?r("accent","#f59e0b"):r("primary","#1a202c"),inputBg:n?"rgba(0,0,0,0.2)":"#ffffff",inputBorder:n?"#ffffff":r("primary","#1a202c"),cardBg:n?r("secondaryBackground","#1f2937"):"#ffffff",containerBorder:n?r("accent","#f59e0b"):r("borderColor","#e5e7eb")},[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)([]),[p,m]=(0,a.useState)(!0),[h,g]=(0,a.useState)({lessons:[],difficulty:"all",numQuestions:10,timeLimit:0,statusFilters:[]}),{questions:x,loading:y,fetchQuestions:b}=rc({autoFetch:!1});(0,a.useEffect)(()=>{(async()=>{if(t){m(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=await(0,Qs.getCourseLessons)(e,{perPage:100});f(r.data||[])}catch(e){console.error("Error fetching lessons:",e),f([])}finally{m(!1)}}})()},[t]);const v=(e,t)=>{g(r=>({...r,[e]:t}))},w=()=>{d(!1)},j=(0,a.useMemo)(()=>({id:"custom-generated",title:{rendered:"Test Personalizado"},meta:{_quiz_question_ids:x.map(e=>e.id),_time_limit:h.timeLimit,_passing_score:70},question_count:x.length}),[x,h.timeLimit]),N=u.map(t=>({value:t.id,label:t.title?.rendered||t.title||e("courses.untitledLesson")})),_=[{value:"all",label:e("courses.difficulty.all")},{value:"easy",label:e("common.easy")},{value:"medium",label:e("common.medium")},{value:"hard",label:e("common.hard")}],C=o||p;return(0,Qr.jsx)(ju,{courseId:t,courseName:i,sectionName:e("courses.testGenerator"),children:(0,Qr.jsxs)("div",{className:"relative h-full",children:[(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(c?"-translate-x-full":"translate-x-0"),children:(0,Qr.jsx)("div",{className:"h-full overflow-y-auto",children:(0,Qr.jsx)("div",{className:"max-w-3xl mx-auto px-4 pt-8 pb-24",children:C?(0,Qr.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:l.cardBg,borderColor:l.containerBorder},children:[1,2,3].map(e=>(0,Qr.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse",style:{borderBottom:e<3?"1px solid rgba(156, 163, 175, 0.2)":"none"},children:[(0,Qr.jsx)("div",{className:"w-5 h-5 rounded",style:{backgroundColor:n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),(0,Qr.jsx)("div",{className:"h-4 rounded flex-1",style:{backgroundColor:n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",maxWidth:"200px"}})]},e))}):(0,Qr.jsxs)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:l.cardBg,borderColor:l.containerBorder},children:[(0,Qr.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3",style:{backgroundColor:l.primary},children:[(0,Qr.jsx)(bu,{size:20,className:"text-white flex-shrink-0"}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("h3",{className:"text-sm font-bold text-white truncate",children:e("courses.testGenerator")}),(0,Qr.jsx)("p",{className:"text-xs text-white/70 truncate",children:e("tests.customTestDescription")})]})]}),(0,Qr.jsxs)("div",{className:"p-4 space-y-5",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Qr.jsx)(fa,{size:14,style:{color:l.accent}}),(0,Qr.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wide",style:{color:l.text},children:e("tests.configuration")})]}),(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsx)(df,{label:e("lessons.title"),options:N,selected:h.lessons,onChange:e=>v("lessons",e),placeholder:e("common.all"),pageColors:l,isDarkMode:n}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:l.text},children:e("courses.difficulty.label")}),(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("select",{value:h.difficulty,onChange:e=>v("difficulty",e.target.value),className:"w-full px-3 py-2 text-sm rounded-lg appearance-none transition-all",style:{border:`2px solid ${l.inputBorder}`,backgroundColor:l.inputBg,color:l.text},children:_.map(e=>(0,Qr.jsx)("option",{value:e.value,style:{backgroundColor:l.inputBg,color:l.text},children:e.label},e.value))}),(0,Qr.jsx)(Vi,{className:"absolute right-2.5 top-2.5 pointer-events-none",size:14,style:{color:l.textMuted}})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:l.text},children:e("common.questions")}),(0,Qr.jsx)("input",{type:"number",min:"1",max:"100",value:h.numQuestions,onChange:e=>v("numQuestions",parseInt(e.target.value)||10),className:"w-full px-3 py-2 text-sm rounded-lg transition-all",style:{border:`2px solid ${l.inputBorder}`,backgroundColor:l.inputBg,color:l.text}})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:l.text},children:e("tests.timeLimit")}),(0,Qr.jsx)("input",{type:"number",min:"0",placeholder:"0",value:h.timeLimit,onChange:e=>v("timeLimit",parseInt(e.target.value)||0),className:"w-full px-3 py-2 text-sm rounded-lg transition-all",style:{border:`2px solid ${l.inputBorder}`,backgroundColor:l.inputBg,color:l.text}})]})]})]})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:l.inputBorder}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Qr.jsx)(lf,{size:14,style:{color:l.accent}}),(0,Qr.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wide",style:{color:l.text},children:e("courses.questionTypes")})]}),(0,Qr.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[{id:"favorites",label:e("courses.favorites"),icon:cf,colorHex:"#fbbf24"},{id:"failed",label:e("courses.failed"),icon:Wi,colorHex:"#ef4444"},{id:"risked",label:e("courses.atRisk"),icon:jn,colorHex:"#f97316"},{id:"unanswered",label:e("courses.notAnswered"),icon:pl,colorHex:"#3b82f6"}].map(e=>{const t=h.statusFilters.includes(e.id);return(0,Qr.jsxs)("button",{onClick:()=>{return t=e.id,void g(e=>{const r=e.statusFilters.includes(t)?e.statusFilters.filter(e=>e!==t):[...e.statusFilters,t];return{...e,statusFilters:r}});var t},className:"relative px-2 py-3 rounded-lg transition-all flex flex-col items-center gap-1.5",style:{border:`2px solid ${t?e.colorHex:l.inputBorder}`,backgroundColor:t?`${e.colorHex}15`:l.inputBg},onMouseEnter:e=>{t||(e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)")},onMouseLeave:e=>{t||(e.currentTarget.style.backgroundColor=l.inputBg)},children:[(0,Qr.jsx)(e.icon,{size:16,style:{color:e.colorHex}}),(0,Qr.jsx)("span",{className:"text-xs font-medium text-center leading-tight",style:{color:l.text},children:e.label}),t&&(0,Qr.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full flex items-center justify-center",style:{backgroundColor:e.colorHex},children:(0,Qr.jsx)(Ui,{size:10,className:"text-white"})})]},e.id)})})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:l.inputBorder}}),(0,Qr.jsx)("button",{onClick:async()=>{await b(!0,{course_id:t,lessons:h.lessons.length>0?h.lessons:null,difficulty:"all"!==h.difficulty?h.difficulty:null,perPage:h.numQuestions,status_filters:h.statusFilters.length>0?h.statusFilters:null}),d(!0)},disabled:y,className:"w-full py-2.5 rounded-lg font-medium text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{y||(e.currentTarget.style.opacity="0.9")},onMouseLeave:e=>{y||(e.currentTarget.style.opacity="1")},children:y?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,Qr.jsx)("span",{children:e("common.loading")})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(bu,{size:16}),(0,Qr.jsx)("span",{children:e("tests.generateTest")})]})})]})]})})})}),(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(c?"translate-x-0":"translate-x-full"),style:{backgroundColor:r("secondaryBackground","#f8f9fa")},children:c&&(0,Qr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b flex-shrink-0 gap-2",style:{backgroundColor:l.cardBg,borderColor:l.inputBorder},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,Qr.jsx)(bu,{size:16,style:{color:l.accent},className:"flex-shrink-0"}),(0,Qr.jsx)("h2",{className:"text-sm font-medium leading-tight truncate",style:{color:l.text},children:e("tests.customTest")}),(0,Qr.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:n?`${l.accent}20`:`${l.text}10`,color:n?l.accent:l.text},children:[x.length," ",e("common.questions").toLowerCase()]})]}),(0,Qr.jsx)("button",{onClick:w,className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:n?`${l.accent}15`:`${l.text}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?`${l.accent}25`:`${l.text}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${l.accent}15`:`${l.text}10`},title:e("common.back"),children:(0,Qr.jsx)(En,{size:18,style:{color:l.text}})})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-hidden",children:x.length>0?(0,Qr.jsx)(Yu,{quizId:"custom",customQuiz:j,onQuizComplete:()=>{}}):(0,Qr.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[(0,Qr.jsx)("div",{className:"w-14 h-14 rounded-full flex items-center justify-center mb-4",style:{backgroundColor:n?`${l.accent}15`:`${l.text}10`},children:(0,Qr.jsx)(jn,{size:28,style:{color:l.textMuted}})}),(0,Qr.jsx)("h3",{className:"text-base font-bold mb-2",style:{color:l.text},children:e("tests.noQuestionsFound")}),(0,Qr.jsx)("p",{className:"max-w-md mx-auto mb-5 text-sm",style:{color:l.textMuted},children:e("tests.adjustFilters")}),(0,Qr.jsx)("button",{onClick:w,className:"px-5 py-2 rounded-lg font-medium text-sm transition-all",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:e("common.back")})]})})]})})]})})},ff=()=>{const{quizId:e}=pt(),t=ut(),[r,n]=(0,a.useState)(!1),[s,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),{formatScore:d}=gd(),{quizzes:u,loading:f}=Gs({perPage:100}),{courses:p,loading:m}=xs({perPage:100}),{lessons:h,loading:g}=Ks({perPage:100});if((0,a.useEffect)(()=>{if(u.length>0&&e){const t=u.find(t=>t.id===parseInt(e));o(t)}},[u,e]),(0,a.useEffect)(()=>{(async()=>{if(e)try{await Yd.getQuizAutosave(parseInt(e))&&n(!0)}catch(e){console.error("Error checking autosave:",e)}finally{c(!1)}else c(!1)})()},[e]),f||m||g||l)return(0,Qr.jsx)("div",{className:"p-8",children:(0,Qr.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Cargando cuestionario..."})]})})});if(!s)return(0,Qr.jsx)("div",{className:"p-8",children:(0,Qr.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Qr.jsx)(kn,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cuestionario no encontrado"}),(0,Qr.jsx)("p",{className:"text-gray-600 mb-6",children:"El cuestionario que buscas no existe o ha sido eliminado."}),(0,Qr.jsx)(ac,{onClick:()=>t("/"),variant:"primary",className:"px-6 py-2 rounded-lg",children:"Volver al Dashboard"})]})})});if(r)return(0,Qr.jsx)(Yu,{quizId:s.id});const x=s.meta?._lesson_ids||[],y=h.filter(e=>x.includes(e.id)),b=p.filter(e=>y.some(t=>(t.meta?._course_ids||[]).includes(e.id))),v=s.meta?._quiz_question_ids?.length||0,w=s.meta?._time_limit||0,j=s.meta?._passing_score||0;return(0,Qr.jsx)("div",{className:"p-6",children:(0,Qr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Qr.jsxs)("button",{onClick:()=>t("/"),className:"inline-flex items-center text-gray-600 hover:text-gray-800 mb-6 transition-colors",children:[(0,Qr.jsx)(sl,{className:"w-5 h-5 mr-1"}),"Volver al Dashboard"]}),(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,Qr.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 text-white",children:(0,Qr.jsx)("div",{className:"flex items-start justify-between",children:(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h1",{className:"text-3xl font-bold mb-3",children:s.title?.rendered||s.title}),(0,Qr.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-indigo-100",children:[b.map((e,t)=>(0,Qr.jsxs)(i().Fragment,{children:[t>0&&(0,Qr.jsx)("span",{children:""}),(0,Qr.jsx)("span",{className:"bg-white/10 px-2 py-1 rounded",children:e.title?.rendered||e.title})]},e.id)),y.length>0&&(0,Qr.jsx)("span",{children:""}),y.map((e,t)=>(0,Qr.jsxs)(i().Fragment,{children:[t>0&&(0,Qr.jsx)("span",{children:""}),(0,Qr.jsx)("span",{className:"bg-white/10 px-2 py-1 rounded",children:e.title?.rendered||e.title})]},e.id))]})]})})}),(0,Qr.jsxs)("div",{className:"p-8",children:[(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,Qr.jsx)("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Qr.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,Qr.jsx)(ul,{className:"w-6 h-6 text-blue-600"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Preguntas"}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:v})]})]})}),w>0&&(0,Qr.jsx)("div",{className:"bg-orange-50 rounded-lg p-6 border border-orange-200",children:(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Qr.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,Qr.jsx)(Ec,{className:"w-6 h-6 text-orange-600"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Tiempo Lmite"}),(0,Qr.jsxs)("p",{className:"text-2xl font-bold text-orange-900",children:[w," min"]})]})]})}),j>0&&(0,Qr.jsx)("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200",children:(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Qr.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,Qr.jsx)(Eu,{className:"w-6 h-6 text-green-600"})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Puntuacin Mnima"}),(0,Qr.jsx)("p",{className:"text-2xl font-bold text-green-900",children:d(j)})]})]})})]}),s.content?.rendered&&(0,Qr.jsx)("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:(0,Qr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Qr.jsx)(Ru,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Descripcin del Cuestionario"}),(0,Qr.jsx)("div",{className:"text-sm text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:s.content.rendered}})]})]})}),(0,Qr.jsx)("div",{className:"mb-8 p-6 bg-indigo-50 rounded-lg border border-indigo-200",children:(0,Qr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Qr.jsx)(rl,{className:"w-5 h-5 text-indigo-600 mt-0.5 flex-shrink-0"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"text-sm font-semibold text-indigo-900 mb-2",children:"Instrucciones"}),(0,Qr.jsxs)("ul",{className:"text-sm text-indigo-800 space-y-2",children:[(0,Qr.jsx)("li",{children:" Lee cada pregunta cuidadosamente antes de responder"}),(0,Qr.jsx)("li",{children:" Selecciona la opcin que consideres correcta"}),w>0&&(0,Qr.jsxs)("li",{children:[" El cuestionario tiene un lmite de tiempo de ",w," minutos"]}),(0,Qr.jsx)("li",{children:" Puedes marcar preguntas con riesgo si no ests seguro"}),(0,Qr.jsx)("li",{children:" Revisa tus respuestas antes de enviar el cuestionario"}),j>0&&(0,Qr.jsxs)("li",{children:[" Necesitas obtener al menos ",d(j)," para aprobar"]})]})]})]})}),(0,Qr.jsx)("div",{className:"flex justify-center",children:(0,Qr.jsxs)("button",{onClick:()=>n(!0),className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,Qr.jsx)(nd,{className:"w-6 h-6 mr-2"}),"Comenzar Cuestionario"]})})]})]})]})})},pf=cn("book-check",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9 9.5 2 2 4-4",key:"1dth82"}]]),mf=()=>{const e=ut(),[t,r]=(0,a.useState)({}),[n,s]=(0,a.useState)({}),[o,i]=(0,a.useState)(""),{courses:l,loading:c}=xs({perPage:100}),{lessons:d,loading:u}=Ks({perPage:100}),{quizzes:f,loading:p}=Gs({perPage:100});console.log(" Data loaded:",{courses:l.length,lessons:d.length,quizzes:f.length});const m=(0,a.useMemo)(()=>{if(!l.length||!d.length||!f.length)return console.log(" Missing data for organization"),[];const e=[];return l.forEach(t=>{console.log(` Processing course: ${t.title?.rendered||t.title}`);const r=d.filter(e=>(e.meta?._course_ids||[]).includes(t.id));if(console.log(`  Found ${r.length} lessons for course ${t.id}`),0===r.length)return;const n={id:t.id,title:t.title?.rendered||t.title,lessons:[]};r.forEach(e=>{console.log(`   Processing lesson: ${e.title?.rendered||e.title}`);const r=f.filter(r=>{const n=r.meta?._lesson_ids||[],s=r.meta?._course_ids||[];return n.includes(e.id)||0===n.length&&s.includes(t.id)});console.log(`    Found ${r.length} quizzes for lesson ${e.id}`),0!==r.length&&n.lessons.push({id:e.id,title:e.title?.rendered||e.title,quizzes:r.map(e=>({id:e.id,title:e.title?.rendered||e.title,questionCount:e.question_count||0,timeLimit:e.time_limit||0,passingScore:e.passing_score||0}))})}),n.lessons.length>0&&e.push(n)}),console.log(" Organization complete:",e),e},[l,d,f]),h=(0,a.useMemo)(()=>f.length?f.filter(e=>{const t=e.meta?._lesson_ids||[],r=e.meta?._course_ids||[];return 0===t.length&&0===r.length}).map(e=>({id:e.id,title:e.title?.rendered||e.title,questionCount:e.question_count||0,timeLimit:e.time_limit||0,passingScore:e.passing_score||0})):[],[f]),g=(0,a.useMemo)(()=>o?m.map(e=>({...e,lessons:e.lessons.map(e=>({...e,quizzes:e.quizzes.filter(e=>e.title.toLowerCase().includes(o.toLowerCase()))})).filter(e=>e.quizzes.length>0)})).filter(e=>e.lessons.length>0):m,[m,o]),x=(0,a.useMemo)(()=>o?h.filter(e=>e.title.toLowerCase().includes(o.toLowerCase())):h,[h,o]),y=t=>{e(`/quiz/${t}`)},b=c||u||p,v=m.reduce((e,t)=>e+t.lessons.reduce((e,t)=>e+t.quizzes.length,0),0)+h.length;return(0,Qr.jsx)("div",{className:"p-8",children:(0,Qr.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Qr.jsxs)("div",{className:"mb-6",children:[(0,Qr.jsxs)("button",{onClick:()=>e("/test"),className:"inline-flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[(0,Qr.jsx)(sl,{className:"w-5 h-5 mr-1"}),"Volver a Test"]}),(0,Qr.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Biblioteca de Cuestionarios"}),(0,Qr.jsx)("p",{className:"text-gray-600 mt-2",children:"Accede a todos los cuestionarios disponibles organizados por curso y leccin"})]}),(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,Qr.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white",children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Qr.jsx)(kn,{className:"w-8 h-8"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h2",{className:"text-2xl font-bold",children:"Todos los Cuestionarios"}),(0,Qr.jsx)("p",{className:"text-indigo-100 text-sm mt-1",children:b?"Cargando...":`${v} cuestionarios disponibles`})]})]})}),(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)(Tn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-indigo-300"}),(0,Qr.jsx)("input",{type:"text",placeholder:"Buscar cuestionario...",value:o,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-indigo-200 focus:outline-none focus:ring-2 focus:ring-white/50"})]})]}),(0,Qr.jsx)("div",{className:"p-6",children:b?(0,Qr.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-3"}),(0,Qr.jsx)("span",{className:"text-gray-600",children:"Cargando cuestionarios..."})]}):0===g.length&&0===x.length?(0,Qr.jsxs)("div",{className:"text-center py-12",children:[(0,Qr.jsx)(pf,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,Qr.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:o?"No se encontraron cuestionarios":"No hay cuestionarios disponibles"}),(0,Qr.jsx)("p",{className:"text-gray-500",children:o?"Intenta con otros trminos de bsqueda":"Los cuestionarios aparecern aqu cuando estn disponibles"})]}):(0,Qr.jsxs)("div",{className:"space-y-6",children:[g.length>0&&(0,Qr.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,Qr.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Qr.jsxs)("button",{onClick:()=>{return t=e.id,void r(e=>({...e,[t]:!e[t]}));var t},className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[t[e.id]?(0,Qr.jsx)(Vi,{className:"w-5 h-5 text-gray-600"}):(0,Qr.jsx)(al,{className:"w-5 h-5 text-gray-600"}),(0,Qr.jsx)(kn,{className:"w-5 h-5 text-indigo-600"}),(0,Qr.jsx)("span",{className:"font-semibold text-gray-800",children:e.title})]}),(0,Qr.jsxs)("span",{className:"text-sm text-gray-500",children:[e.lessons.reduce((e,t)=>e+t.quizzes.length,0)," cuestionarios"]})]}),t[e.id]&&(0,Qr.jsx)("div",{className:"bg-white",children:e.lessons.map(e=>(0,Qr.jsxs)("div",{className:"border-t border-gray-200",children:[(0,Qr.jsxs)("button",{onClick:()=>{return t=e.id,void s(e=>({...e,[t]:!e[t]}));var t},className:"w-full flex items-center justify-between p-4 pl-12 hover:bg-gray-50 transition-colors",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[n[e.id]?(0,Qr.jsx)(Vi,{className:"w-4 h-4 text-gray-500"}):(0,Qr.jsx)(al,{className:"w-4 h-4 text-gray-500"}),(0,Qr.jsx)(ul,{className:"w-4 h-4 text-purple-600"}),(0,Qr.jsx)("span",{className:"text-gray-700 font-medium",children:e.title})]}),(0,Qr.jsxs)("span",{className:"text-xs text-gray-500",children:[e.quizzes.length," cuestionarios"]})]}),n[e.id]&&(0,Qr.jsx)("div",{className:"bg-gray-50 border-t border-gray-200",children:e.quizzes.map(e=>(0,Qr.jsxs)("button",{onClick:()=>y(e.id),className:"w-full flex items-center justify-between p-4 pl-20 hover:bg-gray-100 transition-colors border-b border-gray-200 last:border-b-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,Qr.jsx)(pf,{className:"w-4 h-4 text-green-600"}),(0,Qr.jsx)("span",{className:"text-gray-800 text-sm",children:e.title})]}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Qr.jsx)(ul,{className:"w-3 h-3"}),(0,Qr.jsxs)("span",{children:[e.questionCount," preguntas"]})]}),e.timeLimit>0&&(0,Qr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Qr.jsx)(Ec,{className:"w-3 h-3"}),(0,Qr.jsxs)("span",{children:[e.timeLimit," min"]})]})]})]},e.id))})]},e.id))})]},e.id))}),x.length>0&&(0,Qr.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Qr.jsx)("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:(0,Qr.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Qr.jsx)(ul,{className:"w-5 h-5 text-gray-600"}),(0,Qr.jsx)("span",{className:"font-semibold text-gray-800",children:"Otros Cuestionarios"}),(0,Qr.jsxs)("span",{className:"text-sm text-gray-500",children:["(",x.length,")"]})]})}),(0,Qr.jsx)("div",{className:"bg-white",children:x.map(e=>(0,Qr.jsxs)("button",{onClick:()=>y(e.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors border-b border-gray-200 last:border-b-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,Qr.jsx)(pf,{className:"w-4 h-4 text-green-600"}),(0,Qr.jsx)("span",{className:"text-gray-800 text-sm",children:e.title})]}),(0,Qr.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Qr.jsx)(ul,{className:"w-3 h-3"}),(0,Qr.jsxs)("span",{children:[e.questionCount," preguntas"]})]}),e.timeLimit>0&&(0,Qr.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Qr.jsx)(Ec,{className:"w-3 h-3"}),(0,Qr.jsxs)("span",{children:[e.timeLimit," min"]})]})]})]},e.id))})]})]})})]})]})})},hf=({questions:e,answers:t,onBackToConfig:r})=>{const n=(0,a.useMemo)(()=>{let r=0,n=0,s=0;const a=e.map(e=>{const a=t[e.id],o=e.meta?._correct_answer;if(!a)return s++,{question:e,userAnswer:null,correctAnswer:o,isCorrect:!1,wasAnswered:!1};const i=a===o;return i?r++:n++,{question:e,userAnswer:a,correctAnswer:o,isCorrect:i,wasAnswered:!0}});return{correct:r,incorrect:n,unanswered:s,total:e.length,percentage:Math.round(r/e.length*100),detailedResults:a}},[e,t]),s=e=>({option_a:"A",option_b:"B",option_c:"C",option_d:"D"}[e]||e);return(0,Qr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-4",children:[(0,Qr.jsxs)("div",{className:"text-center mb-6",children:[(0,Qr.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-full mb-3",children:(0,Qr.jsx)(kn,{className:"w-8 h-8 text-white"})}),(0,Qr.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Prctica Completada!"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:"Revisa tus respuestas y aprende de los errores"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[(0,Qr.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center border border-blue-200",children:[(0,Qr.jsx)("div",{className:"text-xl font-bold text-blue-600 mb-1",children:n.total}),(0,Qr.jsx)("div",{className:"text-xs text-blue-700",children:"Total"})]}),(0,Qr.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center border border-green-200",children:[(0,Qr.jsx)("div",{className:"text-xl font-bold text-green-600 mb-1",children:n.correct}),(0,Qr.jsx)("div",{className:"text-xs text-green-700",children:"Correctas"})]}),(0,Qr.jsxs)("div",{className:"bg-red-50 rounded-lg p-3 text-center border border-red-200",children:[(0,Qr.jsx)("div",{className:"text-xl font-bold text-red-600 mb-1",children:n.incorrect}),(0,Qr.jsx)("div",{className:"text-xs text-red-700",children:"Incorrectas"})]}),(0,Qr.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-200",children:[(0,Qr.jsx)("div",{className:"text-xl font-bold text-gray-600 mb-1",children:n.unanswered}),(0,Qr.jsx)("div",{className:"text-xs text-gray-700",children:"Sin responder"})]})]}),(0,Qr.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-4 border border-blue-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Qr.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"Precisin"}),(0,Qr.jsxs)("span",{className:"text-xl font-bold text-blue-600",children:[n.percentage,"%"]})]}),(0,Qr.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2.5",children:(0,Qr.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${n.percentage}%`}})})]})]}),(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Revisin de Respuestas"}),(0,Qr.jsx)("div",{className:"space-y-4",children:n.detailedResults.map((e,t)=>{const r="object"==typeof e.question.title&&e.question.title?.rendered?e.question.title.rendered:e.question.title;return(0,Qr.jsxs)("div",{className:"border rounded-lg p-4 "+(e.wasAnswered?e.isCorrect?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-gray-300 bg-gray-50"),children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Qr.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,Qr.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-white rounded-full flex items-center justify-center text-xs font-semibold text-gray-700 border border-gray-300",children:t+1}),(0,Qr.jsx)("div",{className:"flex-1",children:(0,Qr.jsx)("div",{className:"text-sm text-gray-800 font-medium",dangerouslySetInnerHTML:{__html:r}})})]}),(0,Qr.jsx)("div",{className:"flex-shrink-0 ml-3",children:e.wasAnswered?e.isCorrect?(0,Qr.jsx)(On,{className:"w-5 h-5 text-green-600"}):(0,Qr.jsx)(Wi,{className:"w-5 h-5 text-red-600"}):(0,Qr.jsx)("div",{className:"inline-flex items-center px-2 py-0.5 bg-gray-200 text-gray-700 rounded-full text-[10px] font-medium",children:"Sin responder"})})]}),(0,Qr.jsx)("div",{className:"ml-9 space-y-2",children:["option_a","option_b","option_c","option_d"].map(t=>{const r=e.question.meta?.[`_${t}`];if(!r)return null;const n=e.userAnswer===t,a=e.correctAnswer===t;return(0,Qr.jsx)("div",{className:"p-2 rounded-lg border "+(a?"border-green-500 bg-green-100":n?"border-red-500 bg-red-100":"border-gray-200 bg-white"),children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qr.jsxs)("span",{className:"text-xs font-semibold text-gray-700",children:[s(t),"."]}),(0,Qr.jsx)("span",{className:"text-xs text-gray-800",dangerouslySetInnerHTML:{__html:r}})]}),a&&(0,Qr.jsx)("span",{className:"text-[10px] font-medium text-green-700 bg-green-200 px-1.5 py-0.5 rounded",children:"Correcta"}),n&&!a&&(0,Qr.jsx)("span",{className:"text-[10px] font-medium text-red-700 bg-red-200 px-1.5 py-0.5 rounded",children:"Tu respuesta"})]})},t)})}),e.question.meta?._explanation&&(0,Qr.jsx)("div",{className:"ml-9 mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Qr.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Qr.jsx)(kn,{className:"w-3.5 h-3.5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"text-[10px] font-semibold text-blue-900 mb-0.5",children:"Explicacin"}),(0,Qr.jsx)("div",{className:"text-xs text-blue-800",dangerouslySetInnerHTML:{__html:e.question.meta._explanation}})]})]})})]},e.question.id)})})]})]})},gf=({quizId:e,customQuiz:t=null,customQuestions:r=null})=>{const n=ut(),[s,o]=(0,a.useState)(0),[i,l]=(0,a.useState)({}),[c,d]=(0,a.useState)(!1),{questions:u,loading:f}=rc({quiz:"practice"!==e?e:null,autoFetch:"practice"!==e}),p=t,m=r||u,h=(0,a.useMemo)(()=>p?.meta?._quiz_question_ids?p.meta._quiz_question_ids.map(e=>m.find(t=>t.id===parseInt(e))).filter(Boolean):[],[p,m]),g=(0,a.useMemo)(()=>h.length?[...h].sort(()=>Math.random()-.5):[],[h]),x=g[s],y=(0,a.useCallback)((e,t)=>{l(r=>({...r,[e]:t}))},[]),b=(0,a.useCallback)(()=>{s<g.length-1&&o(e=>e+1)},[s,g.length]),v=(0,a.useCallback)(()=>{s>0&&o(e=>e-1)},[s]),w=(0,a.useCallback)(()=>{d(!0)},[]),j=(0,a.useCallback)(()=>{n("/test/practice")},[n]);if(f)return(0,Qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 qe-spinner-primary mb-4"}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Cargando prctica..."})]})});if(!p||0===g.length)return(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Qr.jsx)(pf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No hay preguntas disponibles"}),(0,Qr.jsx)("p",{className:"text-gray-600 mb-4",children:"No se encontraron preguntas con los filtros seleccionados."}),(0,Qr.jsx)("button",{onClick:j,className:"qe-btn-primary px-6 py-2 rounded-lg transition-colors",children:"Volver a configurar"})]});if(c)return(0,Qr.jsx)(hf,{questions:g,answers:i,onBackToConfig:j});const N=Object.keys(i).length,k=(s+1)/g.length*100;return(0,Qr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Qr.jsx)(pf,{className:"w-5 h-5 qe-icon-primary"}),(0,Qr.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Pregunta ",s+1," de ",g.length]})]}),(0,Qr.jsxs)("span",{className:"text-sm text-gray-600",children:[N," / ",g.length," respondidas"]})]}),(0,Qr.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Qr.jsx)("div",{className:"qe-progress-bar h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}),x&&(0,Qr.jsx)("div",{className:"mb-6",children:(0,Qr.jsx)($u,{question:x,questionNumber:s+1,selectedAnswer:i[x.id],onAnswerChange:e=>y(x.id,e),disabled:!1,showCorrectAnswer:!1,isPracticeMode:!0})}),(0,Qr.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("button",{onClick:v,disabled:0===s,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,Qr.jsx)(sl,{className:"w-4 h-4 mr-1"}),"Anterior"]}),(0,Qr.jsx)("div",{className:"flex items-center space-x-2",children:g.map((e,t)=>(0,Qr.jsx)("button",{onClick:()=>o(t),className:"w-8 h-8 rounded-full text-xs font-medium transition-colors "+(t===s?"qe-bg-primary text-white":i[g[t].id]?"bg-green-100 text-green-700 border border-green-300":"bg-gray-100 text-gray-600 border border-gray-300"),children:t+1},t))}),s===g.length-1?(0,Qr.jsxs)("button",{onClick:w,className:"inline-flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[(0,Qr.jsx)(On,{className:"w-4 h-4 mr-2"}),"Finalizar"]}):(0,Qr.jsxs)("button",{onClick:b,className:"qe-btn-primary inline-flex items-center px-4 py-2 rounded-lg transition-colors",children:["Siguiente",(0,Qr.jsx)(al,{className:"w-4 h-4 ml-1"})]})]})}),(0,Qr.jsx)("div",{className:"mt-4 qe-card-primary rounded-lg p-4",children:(0,Qr.jsxs)("p",{className:"text-sm qe-text-primary",children:[" ",(0,Qr.jsx)("strong",{children:"Modo prctica:"})," Tmate tu tiempo. No hay lmite de tiempo ni penalizaciones. Podrs ver las respuestas correctas al finalizar."]})})]})},xf=({isOpen:e,onClose:t,onGenerate:r,courses:n,lessons:s,categories:o,difficulties:i,isLoading:l,isPracticeMode:c=!1})=>{const{getColor:d}=Yr(),[u,f]=(0,a.useState)({course:"all",lesson:"all",category:"all",difficulty:"all",numQuestions:10,timeLimit:0}),p=(e,t)=>{f(r=>({...r,[e]:t}))},m=[{value:"all",label:"Todos los Cursos"},...n.map(e=>({value:e.id,label:e.title.rendered||e.title}))],h=[{value:"all",label:"Todas las Lecciones"},...s.map(e=>({value:e.id,label:e.title.rendered||e.title}))],g=(e,t,r,n,s,a=!1)=>(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{htmlFor:t,className:"block text-sm font-medium qe-text-primary mb-2",children:e}),(0,Qr.jsx)("select",{id:t,name:t,value:r,onChange:e=>n(t,e.target.value),disabled:a,className:"w-full h-10 pl-3 pr-6 text-base border-2 rounded-lg appearance-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{borderColor:d("primary","#3b82f6")+"30"},onFocus:e=>{a||(e.currentTarget.style.borderColor=d("primary","#3b82f6"))},onBlur:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")+"30"},children:s.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))})]});return e?(0,Qr.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:[(0,Qr.jsx)("div",{className:"fixed inset-0",onClick:t}),(0,Qr.jsxs)("div",{className:"relative w-full max-w-3xl max-h-[90vh] rounded-xl shadow-lg border-2 flex flex-col",style:{backgroundColor:d("secondaryBackground","#f8f9fa"),borderColor:d("primary","#3b82f6")},children:[(0,Qr.jsxs)("div",{className:"p-6 border-b-2 flex items-center justify-between flex-shrink-0",style:{borderColor:d("primary","#3b82f6")+"30"},children:[(0,Qr.jsxs)("h3",{className:"text-2xl font-bold qe-text-primary flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:d("primary","#3b82f6")+"20"},children:(0,Qr.jsx)(fa,{className:"w-6 h-6",style:{color:d("primary","#3b82f6")}})}),c?"Configurar Prctica":"Configurar Cuestionario"]}),(0,Qr.jsx)("button",{onClick:t,className:"p-2 rounded-lg transition-all",style:{backgroundColor:d("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"15"},title:"Cerrar",children:(0,Qr.jsx)(En,{className:"w-6 h-6",style:{color:d("primary","#3b82f6")}})})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,Qr.jsxs)("div",{className:"space-y-4 max-w-2xl mx-auto",children:[g("Filtrar por Curso","course",u.course,p,m,l),g("Filtrar por Leccin","lesson",u.lesson,p,h,l),g("Filtrar por Categora","category",u.category,p,o,l),g("Filtrar por Dificultad","difficulty",u.difficulty,p,i,l),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium qe-text-primary mb-2",children:"Nmero de Preguntas"}),(0,Qr.jsx)("input",{type:"number",min:"1",max:"50",value:u.numQuestions,onChange:e=>p("numQuestions",parseInt(e.target.value,10)),className:"w-full h-10 px-3 text-base border-2 rounded-lg transition-colors",style:{borderColor:d("primary","#3b82f6")+"30"},onFocus:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")},onBlur:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")+"30"}})]}),!c&&(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium qe-text-primary mb-2",children:"Lmite de Tiempo (minutos)"}),(0,Qr.jsx)("input",{type:"number",min:"0",value:u.timeLimit,onChange:e=>p("timeLimit",parseInt(e.target.value,10)),className:"w-full h-10 px-3 text-base border-2 rounded-lg transition-colors",style:{borderColor:d("primary","#3b82f6")+"30"},placeholder:"0 para ilimitado",onFocus:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")},onBlur:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")+"30"}})]})]})]})}),(0,Qr.jsxs)("div",{className:"p-4 border-t-2 flex justify-center gap-3 flex-shrink-0",style:{borderColor:d("primary","#3b82f6")+"30"},children:[(0,Qr.jsx)("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold transition-all border-2",style:{borderColor:d("primary","#3b82f6")+"30",color:d("primary","#3b82f6")},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"10"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Cancelar"}),(0,Qr.jsx)("button",{onClick:()=>{r(u)},disabled:l,className:"px-6 py-2 rounded-lg text-white font-semibold transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:d("primary","#3b82f6")},onMouseEnter:e=>{l||(e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:l?"Cargando filtros...":c?"Comenzar Prctica":"Generar Cuestionario"})]})]})]}):null},yf=()=>{const[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(null),{courses:s,loading:o}=xs({perPage:100}),{lessons:i,loading:l}=Ks({perPage:100}),{options:c,isLoading:d}=ta(["qe_category","qe_difficulty"]),{questions:u,loading:f,fetchQuestions:p}=rc({autoFetch:!1,perPage:100}),m=(0,a.useCallback)(async e=>{n(e),t(!1),await p(!0,{perPage:100,status:"publish"})},[p]),h=()=>{n(null),t(!1)};if(!r)return(0,Qr.jsxs)("div",{className:"p-8",children:[(0,Qr.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Qr.jsxs)("div",{className:"text-center mb-12",children:[(0,Qr.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl mb-6 shadow-lg",children:(0,Qr.jsx)(pf,{className:"w-10 h-10 text-white"})}),(0,Qr.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:"Modo Prctica"}),(0,Qr.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Practica sin presin: sin lmite de tiempo, sin puntuaciones ni penalizaciones"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[(0,Qr.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Qr.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:(0,Qr.jsx)(iu,{className:"w-6 h-6 text-blue-600"})}),(0,Qr.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Sin Presin"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:"No hay lmite de tiempo ni puntuaciones. Enfcate en aprender"})]}),(0,Qr.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Qr.jsx)("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:(0,Qr.jsx)(Ru,{className:"w-6 h-6 text-cyan-600"})}),(0,Qr.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Retroalimentacin Inmediata"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:"Ve las respuestas correctas y explicaciones al finalizar"})]}),(0,Qr.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Qr.jsx)("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:(0,Qr.jsx)(pa,{className:"w-6 h-6 text-teal-600"})}),(0,Qr.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Ilimitado"}),(0,Qr.jsx)("p",{className:"text-sm text-gray-600",children:"Repite cuantas veces quieras. Ideal para reforzar conocimientos"})]})]}),(0,Qr.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-10",children:(0,Qr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Qr.jsx)(Ru,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"text-sm font-semibold text-yellow-900 mb-2",children:"En qu se diferencia del modo normal?"}),(0,Qr.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,Qr.jsx)("li",{children:" Sin cronmetro ni lmite de tiempo"}),(0,Qr.jsx)("li",{children:" No se registra puntuacin ni se afecta tu ranking"}),(0,Qr.jsx)("li",{children:" No hay penalizaciones por respuestas incorrectas"}),(0,Qr.jsx)("li",{children:" Perfecto para aprender sin estrs"})]})]})]})}),(0,Qr.jsx)("div",{className:"text-center",children:(0,Qr.jsxs)("button",{onClick:()=>{t(!0)},className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,Qr.jsx)(od,{className:"w-5 h-5 mr-2"}),"Configurar Prctica"]})}),(0,Qr.jsx)("div",{className:"mt-12 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-100",children:(0,Qr.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Qr.jsx)(pf,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Consejo de estudio"}),(0,Qr.jsx)("p",{className:"text-sm text-blue-700",children:"El modo prctica es ideal para familiarizarte con el tipo de preguntas y repasar conceptos antes de realizar un test formal. Tmate tu tiempo y asegrate de entender cada respuesta."})]})]})})]}),e&&(0,Qr.jsx)(xf,{isOpen:e,onClose:()=>t(!1),onGenerate:m,courses:s,lessons:i,categories:c.qe_category||[],difficulties:c.qe_difficulty||[],isLoading:o||l||d,isPracticeMode:!0})]});if(f)return(0,Qr.jsx)("div",{className:"p-8",children:(0,Qr.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,Qr.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4 animate-pulse",children:(0,Qr.jsx)(pf,{className:"w-8 h-8 text-blue-600"})}),(0,Qr.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Preparando tu prctica..."}),(0,Qr.jsx)("p",{className:"text-gray-600",children:"Seleccionando las preguntas ideales para ti"})]})});let g=[...u];r&&(r.lesson&&"all"!==r.lesson&&(g=g.filter(e=>(e.meta?._lesson_ids||[]).includes(parseInt(r.lesson)))),r.category&&"all"!==r.category&&(g=g.filter(e=>(e.qe_category||[]).includes(parseInt(r.category)))),r.difficulty&&"all"!==r.difficulty&&(g=g.filter(e=>(e.qe_difficulty||[]).includes(parseInt(r.difficulty)))),r.numQuestions&&g.length>r.numQuestions&&(g=g.sort(()=>Math.random()-.5).slice(0,r.numQuestions)));const x={id:"practice",title:{rendered:"Modo Prctica"},meta:{_quiz_question_ids:g.map(e=>e.id),_time_limit:0,_passing_score:0},question_count:g.length};return 0===g.length?(0,Qr.jsx)("div",{className:"p-8",children:(0,Qr.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Qr.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Qr.jsx)(pf,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,Qr.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No hay preguntas disponibles"}),(0,Qr.jsx)("p",{className:"text-gray-600 mb-6",children:"No se encontraron preguntas con los filtros seleccionados. Intenta ajustar tu configuracin."}),(0,Qr.jsxs)("button",{onClick:h,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg",children:[(0,Qr.jsx)(pa,{className:"w-5 h-5 mr-2"}),"Configurar Nueva Prctica"]})]})})}):(0,Qr.jsxs)("div",{className:"p-6",children:[(0,Qr.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Modo Prctica"}),(0,Qr.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[g.length," preguntas  Sin lmite de tiempo  Sin puntuacin"]})]}),(0,Qr.jsxs)("button",{onClick:h,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[(0,Qr.jsx)(pa,{className:"w-4 h-4 mr-2"}),"Nueva Prctica"]})]}),(0,Qr.jsx)(gf,{quizId:"practice",customQuiz:x,customQuestions:g})]})},bf=()=>{const{t:e}=k(),t=ut(),{courseId:r}=pt(),{getColor:n,isDarkMode:s}=Yr(),{formatScore:o}=gd(),i={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:n("textSecondary",s?"#9ca3af":"#6b7280"),accent:n("accent","#f59e0b"),bgCard:s?n("secondaryBackground","#1f2937"):"#ffffff",bgSubtle:s?"rgba(255,255,255,0.05)":`${n("primary","#1a202c")}05`,hoverBg:s?"rgba(255,255,255,0.1)":`${n("primary","#1a202c")}10`,hoverBgStrong:s?"rgba(255,255,255,0.15)":`${n("primary","#1a202c")}20`,primaryBg:n("primary","#1a202c")},[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[g,x]=(0,a.useState)(1),[y,b]=(0,a.useState)([]),[v,w]=(0,a.useState)(!1),j=(0,a.useMemo)(()=>({search:l,lesson_id:d,date_from:f,date_to:m}),[l,d,f,m]),{attempts:N,loading:_,error:C,pagination:S,fetchAttempts:E}=Md({courseId:r?parseInt(r,10):null,perPage:10,autoFetch:!1,filters:j});(0,a.useEffect)(()=>{r&&(async()=>{try{const e=parseInt(r,10);if(!e||isNaN(e))return void console.error("Invalid courseId:",r);const t=await(0,Qs.getCourseLessons)(e);b(t.data||[])}catch(e){console.error("Error loading lessons:",e)}})()},[r]),(0,a.useEffect)(()=>{E(g,j)},[g,j,E]);const O=[...new Set(N.map(e=>e.quiz_id))],{rankings:M,loading:T}=Ad(O),P=(e,t,r)=>{const n=M[e];if(!n)return null;const s=n.statistics;if(!s)return null;const a=r?s.avg_score_with_risk:s.avg_score_without_risk;return null==a?null:t-a},A=(e,n)=>{n.stopPropagation(),t(`/courses/${r}/tests`,{state:{selectedQuizId:parseInt(e.quiz_id),scrollToQuiz:!0,returnTo:`/courses/${r}/test-history`}})},q=(e,n)=>{n.stopPropagation(),t(`/courses/${r}/tests`,{state:{selectedQuizId:parseInt(e.quiz_id),viewAttemptId:parseInt(e.attempt_id),returnTo:`/courses/${r}/test-history`}})},z=e=>{x(e),window.scrollTo({top:0,behavior:"smooth"})},D=l||d||f||m;return(0,Qr.jsxs)("div",{className:"flex h-full w-full",children:[(0,Qr.jsx)(wu,{}),(0,Qr.jsxs)("div",{className:"flex-1 flex flex-col overflow-auto",style:{backgroundColor:n("secondaryBackground","#f3f4f6")},children:[(0,Qr.jsx)("header",{className:"px-6 py-3 border-b sticky top-0 z-[1] flex-shrink-0",style:{borderBottomColor:s?"rgba(255,255,255,0.1)":`${n("primary","#1a202c")}15`,backgroundColor:n("secondaryBackground","#f3f4f6")},children:(0,Qr.jsxs)("nav",{className:"flex items-center text-sm space-x-2",children:[(0,Qr.jsx)(Zt,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:i.text},children:e("sidebar.studyPlanner")}),(0,Qr.jsx)(al,{size:16,style:{color:i.textMuted}}),(0,Qr.jsx)("span",{className:"font-medium",style:{color:i.text},children:e("tests.testHistory")})]})}),(0,Qr.jsxs)("div",{className:"max-w-7xl w-full mx-auto px-4 py-6 pb-24",children:[(0,Qr.jsxs)("div",{className:"mb-6",children:[(0,Qr.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:i.hoverBg},children:(0,Qr.jsx)(fu,{size:28,style:{color:i.text}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",style:{color:i.text},children:e("tests.testHistory")}),(0,Qr.jsxs)("p",{className:"text-sm mt-1",style:{color:i.textMuted},children:[S.total," ",1===S.total?e("tests.attempt"):e("tests.attempts")," ",e("common.total")]})]})]}),(0,Qr.jsxs)("button",{onClick:()=>w(!v),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:v?i.primaryBg:i.hoverBg,color:v?"#ffffff":i.text},children:[(0,Qr.jsx)(lf,{size:18}),(0,Qr.jsx)("span",{children:e("common.filters")}),D&&(0,Qr.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold",style:{backgroundColor:v?"#ffffff":i.primaryBg,color:v?i.primaryBg:"#ffffff"},children:[l,d,f,m].filter(Boolean).length})]})]}),v&&(0,Qr.jsxs)("div",{className:"p-4 rounded-xl border-2 mb-4",style:{backgroundColor:i.bgCard,borderColor:n("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:i.text},children:e("tests.searchQuiz")}),(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)(Tn,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:i.textMuted}}),(0,Qr.jsx)("input",{type:"text",value:l,onChange:e=>{c(e.target.value),x(1)},placeholder:e("tests.quizNamePlaceholder"),className:"w-full pl-10 pr-3 py-2 rounded-lg border",style:{borderColor:n("borderColor","#e5e7eb"),backgroundColor:n("secondaryBackground","#f8f9fa"),color:i.text}})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:i.text},children:e("tests.lesson")}),(0,Qr.jsxs)("select",{value:d,onChange:e=>{u(e.target.value),x(1)},className:"w-full px-3 py-2 rounded-lg border",style:{borderColor:n("borderColor","#e5e7eb"),backgroundColor:n("secondaryBackground","#f8f9fa"),color:i.text},children:[(0,Qr.jsx)("option",{value:"",children:e("tests.allLessons")}),y.map(t=>(0,Qr.jsx)("option",{value:t.id,children:t.title?.rendered||t.title||e("courses.untitledLesson")},t.id))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:i.text},children:e("tests.dateFrom")}),(0,Qr.jsx)("input",{type:"date",value:f,onChange:e=>{p(e.target.value),x(1)},className:"w-full px-3 py-2 rounded-lg border",style:{borderColor:n("borderColor","#e5e7eb"),backgroundColor:n("secondaryBackground","#f8f9fa"),color:i.text}})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:i.text},children:e("tests.dateTo")}),(0,Qr.jsx)("input",{type:"date",value:m,onChange:e=>{h(e.target.value),x(1)},className:"w-full px-3 py-2 rounded-lg border",style:{borderColor:n("borderColor","#e5e7eb"),backgroundColor:n("secondaryBackground","#f8f9fa"),color:i.text}})]})]}),D&&(0,Qr.jsxs)("button",{onClick:()=>{c(""),u(""),p(""),h(""),x(1)},className:"mt-4 flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:i.hoverBg,color:i.text},children:[(0,Qr.jsx)(En,{size:16}),(0,Qr.jsx)("span",{children:e("common.clearFilters")})]})]})]}),_?(0,Qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Qr.jsx)(Mn,{className:"w-8 h-8 animate-spin",style:{color:i.text}})}):C?(0,Qr.jsx)("div",{className:"p-6 rounded-lg border-2",style:{backgroundColor:s?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderColor:"#ef4444",color:"#ef4444"},children:C}):0===N.length?(0,Qr.jsxs)("div",{className:"p-12 text-center rounded-xl border-2",style:{backgroundColor:i.bgCard,borderColor:n("borderColor","#e5e7eb")},children:[(0,Qr.jsx)(fu,{size:64,className:"mx-auto mb-4",style:{color:i.textMuted}}),(0,Qr.jsx)("h3",{className:"text-xl font-semibold mb-2",style:{color:i.text},children:e("tests.noAttemptsYet")}),(0,Qr.jsx)("p",{style:{color:i.textMuted},children:e("tests.noAttemptsDescription")})]}):(0,Qr.jsx)("div",{className:"rounded-xl border-2",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),borderColor:n("borderColor","#e5e7eb")},children:N.map((t,r)=>{const n=P(t.quiz_id,t.score,!1),s=P(t.quiz_id,t.score_with_risk,!0);return(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"px-4 py-4 sm:px-6 sm:py-5",children:[(0,Qr.jsxs)("div",{className:"sm:hidden space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:i.hoverBg},children:(0,Qr.jsx)(tl,{size:16,style:{color:i.text}})}),(0,Qr.jsx)("div",{children:(0,Qr.jsx)("div",{className:"text-xs font-semibold",style:{color:i.text},children:new Date(t.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})})})]}),(0,Qr.jsx)("button",{onClick:e=>q(t,e),className:"p-2 rounded-lg text-xs font-medium transition-all",style:{backgroundColor:i.hoverBg,color:i.text},children:(0,Qr.jsx)(Nc,{size:18})})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center text-xs mb-1",style:{color:i.textMuted},children:[(0,Qr.jsx)(kn,{size:12,className:"mr-1.5"}),t.lessonTitle||e("tests.noLesson")]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("div",{className:"text-sm font-medium line-clamp-1",style:{color:i.text},children:t.quizTitle||e("tests.untitledQuiz")}),(0,Qr.jsx)("button",{onClick:e=>A(t,e),className:"p-1 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:i.hoverBg},title:e("tests.goToQuiz"),children:(0,Qr.jsx)(ed,{size:14,style:{color:i.text}})})]})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Qr.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:i.bgSubtle},children:[(0,Qr.jsx)("div",{className:"text-xs mb-1",style:{color:i.textMuted},children:e("tests.withoutRisk")}),(0,Qr.jsx)("div",{className:"text-lg font-bold",style:{color:i.text},children:o(t.score||0)}),null!==n&&(0,Qr.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1 mt-1",style:{color:n>=0?"#10b981":"#ef4444"},children:[n>=0?(0,Qr.jsx)(kc,{size:12}):(0,Qr.jsx)(qd,{size:12}),n>=0?"+":"",n.toFixed(1)]})]}),(0,Qr.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${i.accent}15`},children:[(0,Qr.jsx)("div",{className:"text-xs mb-1",style:{color:i.textMuted},children:e("tests.withRisk")}),(0,Qr.jsx)("div",{className:"text-lg font-bold",style:{color:i.accent},children:o(t.score_with_risk||0)}),null!==s&&(0,Qr.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1 mt-1",style:{color:s>=0?"#10b981":"#ef4444"},children:[s>=0?(0,Qr.jsx)(kc,{size:12}):(0,Qr.jsx)(qd,{size:12}),s>=0?"+":"",s.toFixed(1)]})]})]})]}),(0,Qr.jsxs)("div",{className:"hidden sm:grid sm:grid-cols-6 gap-4 items-center",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:i.hoverBg},children:(0,Qr.jsx)(tl,{size:18,style:{color:i.text}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"text-sm font-semibold",style:{color:i.text},children:new Date(t.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),(0,Qr.jsx)("div",{className:"text-xs",style:{color:i.textMuted},children:new Date(t.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{year:"numeric"})})]})]}),(0,Qr.jsxs)("div",{className:"col-span-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center text-xs mb-1",style:{color:i.textMuted},children:[(0,Qr.jsx)(kn,{size:12,className:"mr-1.5"}),t.lessonTitle||e("tests.noLesson")]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("div",{className:"text-sm font-medium truncate",style:{color:i.text},children:t.quizTitle||e("tests.untitledQuiz")}),(0,Qr.jsx)("button",{onClick:e=>A(t,e),className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:i.hoverBg},title:e("tests.goToQuiz"),children:(0,Qr.jsx)(ed,{size:14,style:{color:i.text}})})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"text-lg font-bold mb-1",style:{color:i.text},children:o(t.score||0)}),null!==n&&(0,Qr.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1",style:{color:n>=0?"#10b981":"#ef4444"},children:[n>=0?(0,Qr.jsx)(kc,{size:12}):(0,Qr.jsx)(qd,{size:12}),n>=0?"+":"",n.toFixed(1)]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"text-lg font-bold mb-1",style:{color:i.accent},children:o(t.score_with_risk||0)}),null!==s&&(0,Qr.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1",style:{color:s>=0?"#10b981":"#ef4444"},children:[s>=0?(0,Qr.jsx)(kc,{size:12}):(0,Qr.jsx)(qd,{size:12}),s>=0?"+":"",s.toFixed(1)]})]}),(0,Qr.jsx)("div",{className:"flex items-center justify-end",children:(0,Qr.jsxs)("button",{onClick:e=>q(t,e),className:"px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center gap-1.5",style:{backgroundColor:i.hoverBg,color:i.text},children:[(0,Qr.jsx)(Nc,{size:14}),(0,Qr.jsx)("span",{children:e("tests.viewDetails")})]})})]})]}),r<N.length-1&&(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},t.attempt_id)})}),!_&&S.totalPages>1&&(0,Qr.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"text-sm",style:{color:i.textMuted},children:[e("tests.showing")," ",10*(g-1)+1," - ",Math.min(10*g,S.total)," ",e("tests.of")," ",S.total," ",e("tests.results")]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("button",{onClick:()=>z(g-1),disabled:1===g,className:"p-2 rounded-lg transition-all disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:i.hoverBg,color:i.text},children:(0,Qr.jsx)(sl,{size:20})}),(0,Qr.jsx)("div",{className:"flex items-center gap-1",children:(()=>{const e=[],{currentPage:t,totalPages:r}=S;if(r<=7)for(let t=1;t<=r;t++)e.push(t);else if(t<=4){for(let t=1;t<=5;t++)e.push(t);e.push("..."),e.push(r)}else if(t>=r-3){e.push(1),e.push("...");for(let t=r-4;t<=r;t++)e.push(t)}else{e.push(1),e.push("...");for(let r=t-1;r<=t+1;r++)e.push(r);e.push("..."),e.push(r)}return e})().map((e,t)=>{if("..."===e)return(0,Qr.jsx)("span",{className:"px-3 py-2",style:{color:i.textMuted},children:"..."},`ellipsis-${t}`);const r=e===g;return(0,Qr.jsx)("button",{onClick:()=>z(e),className:"min-w-[40px] px-3 py-2 rounded-lg font-medium transition-all flex justify-center items-center",style:{backgroundColor:r?i.primaryBg:i.bgSubtle,color:r?"#ffffff":i.text},children:e},e)})}),(0,Qr.jsx)("button",{onClick:()=>z(g+1),disabled:g===S.totalPages,className:"p-2 rounded-lg transition-all disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:i.hoverBg,color:i.text},children:(0,Qr.jsx)(al,{size:20})})]})]})]})]})]})},vf=({selectedCourse:e,compact:t=!1,isDarkMode:r=!1,pageColors:n=null})=>{const{getColor:s}=Yr(),[o,i]=(0,a.useState)([]),[l,c]=(0,a.useState)(!0),d=n||{text:r?s("textPrimary","#f9fafb"):s("primary","#1a202c"),textMuted:s("textSecondary","#6b7280"),accent:s("accent","#f59e0b"),primary:s("primary","#3b82f6"),background:s("background","#ffffff"),secondaryBg:s("secondaryBackground","#f3f4f6")};(0,a.useEffect)(()=>{u()},[e]);const u=async()=>{c(!0),setTimeout(()=>{const t=[{id:1,lesson_title:"Derecho Constitucional - Artculos 1-10",course_title:"Curso de Oposiciones",total_questions:45,failed_questions:18,accuracy:60},{id:2,lesson_title:"Matemticas Financieras Avanzadas",course_title:"Matemticas para Oposiciones",total_questions:32,failed_questions:14,accuracy:56.3},{id:3,lesson_title:"Legislacin Laboral - Contratos",course_title:"Derecho Laboral",total_questions:28,failed_questions:11,accuracy:60.7}],r=e?t.filter(e=>"Curso seleccionado"===e.course_title):t;i(r),c(!1)},500)};return l?(0,Qr.jsxs)("div",{className:"p-3 rounded-lg border animate-pulse",style:{backgroundColor:d.background,borderColor:d.border||(r?"#374151":"#e5e7eb")},children:[(0,Qr.jsx)("div",{className:"h-4 rounded mb-3 w-1/2",style:{backgroundColor:r?d.primary+"20":"#e5e7eb"}}),(0,Qr.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,Qr.jsx)("div",{className:"h-12 rounded",style:{backgroundColor:r?d.primary+"20":"#e5e7eb"}},e))})]}):(0,Qr.jsxs)("div",{className:"p-3 rounded-lg border "+(t?"":"shadow-lg"),style:{backgroundColor:d.background,borderColor:d.border||(r?"#374151":"#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b",style:{borderColor:d.border||(r?"#374151":"#e5e7eb")},children:[(0,Qr.jsx)(jn,{className:"w-4 h-4",style:{color:d.accent}}),(0,Qr.jsx)("h2",{className:"text-sm font-semibold",style:{color:d.text},children:"Lecciones a Repasar"})]}),0===o.length?(0,Qr.jsxs)("div",{className:"text-center py-6",children:[(0,Qr.jsx)(kn,{className:"w-8 h-8 mx-auto mb-2 opacity-30",style:{color:d.textMuted}}),(0,Qr.jsx)("p",{className:"text-sm font-medium",style:{color:d.text},children:"Excelente!"}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:d.textMuted},children:"No tienes lecciones que repasar"})]}):(0,Qr.jsx)("div",{className:"space-y-2",children:o.map((e,t)=>{const n=(s=e.accuracy)<50?{label:"Urgente",color:"#ef4444"}:s<65?{label:"Importante",color:d.accent}:{label:"Revisar",color:d.primary};var s;const a=(e=>e>=70?"#10b981":e>=50?d.accent:"#ef4444")(e.accuracy);return(0,Qr.jsx)("div",{className:"p-2.5 rounded border-l-2 transition-all hover:shadow-sm cursor-pointer",style:{backgroundColor:r?d.primary+"08":"#fafafa",borderLeftColor:n.color},children:(0,Qr.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Qr.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:n.color+"20",color:n.color},children:t+1}),(0,Qr.jsx)("h3",{className:"font-medium text-xs truncate",style:{color:d.text},children:e.lesson_title})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3 ml-7",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)("span",{className:"text-xs",style:{color:d.textMuted},children:"Falladas:"}),(0,Qr.jsx)("span",{className:"text-xs font-bold",style:{color:"#ef4444"},children:e.failed_questions})]}),(0,Qr.jsx)("div",{className:"flex-1 h-1 rounded-full overflow-hidden",style:{backgroundColor:r?d.primary+"20":"#e5e7eb"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full",style:{width:`${e.accuracy}%`,backgroundColor:a}})}),(0,Qr.jsxs)("span",{className:"text-xs font-bold",style:{color:a},children:[e.accuracy,"%"]})]})]}),(0,Qr.jsx)("div",{className:"flex-shrink-0 px-1.5 py-0.5 rounded text-xs font-medium",style:{backgroundColor:n.color+"20",color:n.color},children:n.label})]})},e.id)})}),o.length>0&&(0,Qr.jsx)("div",{className:"mt-3 p-2 rounded border-l-2",style:{backgroundColor:r?d.primary+"10":"#f0f9ff",borderLeftColor:d.primary},children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(qd,{className:"w-3.5 h-3.5",style:{color:d.primary}}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:d.text},children:' Enfcate en las lecciones marcadas como "Urgente"'})]})})]})},wf=({userAccuracy:e,selectedCourse:t,compact:r=!1,isDarkMode:n=!1,pageColors:s=null})=>{const{getColor:o}=Yr(),[i,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),u=s||{text:n?"#f9fafb":"#1a202c",textMuted:n?"#9ca3af":"#6b7280",primary:o("primary","#3b82f6"),accent:o("accent","#f59e0b"),background:n?"#1f2937":"#ffffff",secondaryBg:n?"#111827":"#f3f4f6",border:n?"#374151":"#e5e7eb"};if((0,a.useEffect)(()=>{(async()=>{d(!0),setTimeout(()=>{const t=68.5;l({average:t,topPerformers:85,totalStudents:156,userRank:Math.floor(156*Math.random())+1,percentile:e>t?Math.min(95,50+(e-t)/31.5*50):Math.max(5,e/t*50)}),d(!1)},500)})()},[e,t]),c||!i)return(0,Qr.jsx)("div",{className:"p-4 rounded-lg border flex items-center justify-center",style:{backgroundColor:u.background,borderColor:n?u.primary+"40":"#e5e7eb",minHeight:"120px"},children:(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:u.primary}})});const f=[{label:"T",value:e,color:u.primary,icon:qc},{label:"Promedio",value:i.average,color:"#94a3b8",icon:Nn},{label:"Top 10%",value:i.topPerformers,color:u.accent,icon:rl}],p=Math.max(...f.map(e=>e.value)),m=e-i.average,h=m>0;return(0,Qr.jsxs)("div",{className:"p-3 rounded-lg border h-full "+(r?"":"shadow-lg"),style:{backgroundColor:u.background,borderColor:u.border||(n?"#374151":"#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 mb-2 pb-2 border-b",style:{borderColor:u.border||(n?"#374151":"#e5e7eb")},children:[(0,Qr.jsx)(Nn,{className:"w-3.5 h-3.5",style:{color:u.primary}}),(0,Qr.jsx)("h2",{className:"text-xs font-semibold",style:{color:u.text},children:"Comparacin"})]}),(0,Qr.jsx)("div",{className:"space-y-2 mb-2",children:f.map((e,t)=>{const r=e.icon,s=e.value/p*100;return(0,Qr.jsxs)("div",{className:"space-y-0.5",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)(r,{className:"w-3 h-3",style:{color:e.color}}),(0,Qr.jsx)("span",{className:"text-[10px] font-medium",style:{color:u.text},children:e.label})]}),(0,Qr.jsxs)("span",{className:"text-xs font-bold",style:{color:e.color},children:[e.value.toFixed(1),"%"]})]}),(0,Qr.jsx)("div",{className:"relative h-1.5 rounded-full overflow-hidden",style:{backgroundColor:n?"#374151":"#e5e7eb"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${s}%`,backgroundColor:e.color}})})]},t)})}),(0,Qr.jsx)("div",{className:"p-1.5 rounded border-l-2 mb-2",style:{backgroundColor:h?n?"#10b98115":"#10b98110":n?u.accent+"15":u.accent+"10",borderColor:h?"#10b981":u.accent},children:(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)(kc,{className:"w-3 h-3 "+(h?"":"rotate-180"),style:{color:h?"#10b981":u.accent}}),(0,Qr.jsx)("p",{className:"text-[10px]",style:{color:u.text},children:h?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("strong",{style:{color:"#10b981"},children:["+",Math.abs(m).toFixed(1),"%"]})," sobre promedio"]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("strong",{style:{color:u.accent},children:[Math.abs(m).toFixed(1),"%"]})," para promedio"]})})]})}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qr.jsxs)("div",{className:"p-1.5 rounded text-center",style:{backgroundColor:n?"#3b82f615":"#eff6ff"},children:[(0,Qr.jsx)("p",{className:"text-[9px]",style:{color:u.textMuted},children:"Posicin"}),(0,Qr.jsxs)("p",{className:"text-sm font-bold",style:{color:u.primary},children:["#",i.userRank]})]}),(0,Qr.jsxs)("div",{className:"p-1.5 rounded text-center",style:{backgroundColor:n?"#8b5cf615":"#f5f3ff"},children:[(0,Qr.jsx)("p",{className:"text-[9px]",style:{color:u.textMuted},children:"Percentil"}),(0,Qr.jsxs)("p",{className:"text-sm font-bold",style:{color:"#8b5cf6"},children:[i.percentile.toFixed(0),"%"]})]})]})]})},jf=cn("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),Nf=({selectedCourse:e,timeRange:t,compact:r=!1,isDarkMode:n=!1,pageColors:s=null})=>{const{getColor:o}=Yr(),[i,l]=(0,a.useState)([]),c=s||{text:n?o("textPrimary","#f9fafb"):o("primary","#1a202c"),textMuted:o("textSecondary","#6b7280"),primary:o("primary","#3b82f6"),background:o("background","#ffffff"),secondaryBg:o("secondaryBackground","#f3f4f6")};if((0,a.useEffect)(()=>{(()=>{const e=[],r=new Date,n="week"===t?7:"month"===t?30:"year"===t?12:30;for(let s=n-1;s>=0;s--){const a=new Date(r);"year"===t?a.setMonth(a.getMonth()-s):a.setDate(a.getDate()-s);const o=50+(n-s)/n*30,i=Math.min(100,Math.max(0,o+(20*Math.random()-10)));e.push({date:a.toLocaleDateString("es-ES",{month:"short",day:"year"===t?void 0:"numeric"}),accuracy:i.toFixed(1),questions:Math.floor(20*Math.random())+5})}l(e)})()},[t,e]),0===i.length)return null;const d=Math.max(...i.map(e=>parseFloat(e.accuracy))),u=Math.min(...i.map(e=>parseFloat(e.accuracy))),f=d-u||1,p=i.reduce((e,t)=>e+parseFloat(t.accuracy),0)/i.length||0,m=50,h=i.map((e,t)=>`${t/(i.length-1)*100},${m-(parseFloat(e.accuracy)-u)/f*m}`).join(" "),g=`0,50 ${h} 100,50`;return(0,Qr.jsxs)("div",{className:"p-3 rounded-lg border flex flex-col "+(r?"":"shadow-lg"),style:{backgroundColor:c.background,borderColor:c.border||(n?"#374151":"#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-2 pb-2 border-b",style:{borderColor:c.border||(n?"#374151":"#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(jf,{className:"w-4 h-4",style:{color:c.primary}}),(0,Qr.jsx)("h2",{className:"text-sm font-semibold",style:{color:c.text},children:"Evolucin"})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:n?c.primary+"20":"#f3f4f6"},children:[(0,Qr.jsx)(tl,{className:"w-3 h-3",style:{color:c.primary}}),(0,Qr.jsx)("span",{className:"font-medium",style:{color:c.primary},children:"week"===t?"7d":"month"===t?"30d":"year"===t?"1a":"Todo"})]})]}),(0,Qr.jsx)("div",{className:"flex-1 mb-3",style:{minHeight:"80px"},children:(0,Qr.jsxs)("svg",{viewBox:"0 0 100 50",className:"w-full h-full",preserveAspectRatio:"none",children:[[0,50,100].map(e=>{const t=m-e/100*m;return(0,Qr.jsx)("g",{children:(0,Qr.jsx)("line",{x1:"0",y1:t,x2:100,y2:t,stroke:n?c.primary+"20":"#e5e7eb",strokeWidth:"0.3",strokeDasharray:"2,2"})},e)}),(0,Qr.jsx)("polygon",{points:g,fill:`url(#gradient-${n?"dark":"light"})`,opacity:"0.3"}),(0,Qr.jsx)("polyline",{points:h,fill:"none",stroke:c.primary,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),i.map((e,t)=>{if(0!==t&&t!==i.length-1)return null;const r=t/(i.length-1)*100,n=m-(parseFloat(e.accuracy)-u)/f*m;return(0,Qr.jsx)("circle",{cx:r,cy:n,r:"1.5",fill:c.primary,stroke:c.background,strokeWidth:"0.5"},t)}),(0,Qr.jsx)("defs",{children:(0,Qr.jsxs)("linearGradient",{id:"gradient-"+(n?"dark":"light"),x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,Qr.jsx)("stop",{offset:"0%",stopColor:c.primary,stopOpacity:"0.4"}),(0,Qr.jsx)("stop",{offset:"100%",stopColor:c.primary,stopOpacity:"0.05"})]})})]})}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t",style:{borderColor:c.border||(n?"#374151":"#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"text-center p-1.5 rounded",style:{backgroundColor:n?c.primary+"15":"#f3f4f6"},children:[(0,Qr.jsx)("p",{className:"text-xs",style:{color:c.textMuted},children:"Promedio"}),(0,Qr.jsxs)("p",{className:"text-base font-bold",style:{color:c.primary},children:[p.toFixed(1),"%"]})]}),(0,Qr.jsxs)("div",{className:"text-center p-1.5 rounded",style:{backgroundColor:n?"#10b98115":"#f0fdf4"},children:[(0,Qr.jsx)("p",{className:"text-xs",style:{color:c.textMuted},children:"Mejora"}),(0,Qr.jsxs)("p",{className:"text-base font-bold",style:{color:"#10b981"},children:["+",(d-u).toFixed(1),"%"]})]})]})]})},kf=({selectedCourse:e,setSelectedCourse:t,timeRange:r,setTimeRange:n,compact:s=!1,isDarkMode:o=!1,pageColors:i=null})=>{const{getColor:l}=Yr(),[c,d]=(0,a.useState)([]),[u,f]=(0,a.useState)(!0),p=i||{text:o?l("textPrimary","#f9fafb"):l("primary","#1a202c"),textMuted:l("textSecondary","#6b7280"),primary:l("primary","#3b82f6"),background:l("background","#ffffff"),secondaryBg:l("secondaryBackground","#f3f4f6")};(0,a.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=await fetch(`${window.qe_data.rest_url}quiz-extended/v1/user-enrollments`,{headers:{"X-WP-Nonce":window.qe_data.nonce}});if(!e.ok)throw new Error("Failed to fetch courses");const t=await e.json();d(t.data||[])}catch(e){console.error("Error fetching courses:",e)}finally{f(!1)}};return s?(0,Qr.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(kn,{className:"w-4 h-4",style:{color:p.textMuted}}),(0,Qr.jsxs)("select",{value:e||"",onChange:e=>t(e.target.value?parseInt(e.target.value):null),className:"text-sm py-1.5 px-2 border rounded-md transition-all focus:outline-none focus:ring-1",style:{borderColor:o?p.primary+"40":"#d1d5db",backgroundColor:p.background,color:p.text,minWidth:"140px"},disabled:u,children:[(0,Qr.jsx)("option",{value:"",children:"Todos los cursos"}),c.map(e=>(0,Qr.jsx)("option",{value:e.course_id,children:e.course_title},e.course_id))]})]}),(0,Qr.jsx)("div",{className:"flex items-center gap-1 p-0.5 rounded-md",style:{backgroundColor:o?p.primary+"20":"#f3f4f6"},children:[{value:"all",label:"Todo"},{value:"week",label:"7d"},{value:"month",label:"30d"},{value:"year",label:"1a"}].map(e=>(0,Qr.jsx)("button",{onClick:()=>n(e.value),className:"text-xs font-medium py-1 px-2 rounded transition-all",style:{backgroundColor:r===e.value?p.primary:"transparent",color:r===e.value?"#ffffff":p.textMuted},children:e.label},e.value))})]}):(0,Qr.jsxs)("div",{className:"p-4 rounded-lg border mb-4",style:{backgroundColor:p.background,borderColor:o?p.primary+"40":"#e5e7eb"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b",style:{borderColor:o?p.primary+"30":"#e5e7eb"},children:[(0,Qr.jsx)(lf,{className:"w-4 h-4",style:{color:p.primary}}),(0,Qr.jsx)("h3",{className:"text-sm font-semibold",style:{color:p.text},children:"Filtros"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"flex items-center gap-1 text-xs font-medium mb-1",style:{color:p.textMuted},children:[(0,Qr.jsx)(kn,{className:"w-3 h-3"}),"Curso"]}),(0,Qr.jsxs)("select",{value:e||"",onChange:e=>t(e.target.value?parseInt(e.target.value):null),className:"w-full text-sm p-2 border rounded-md transition-all focus:outline-none focus:ring-1",style:{borderColor:o?p.primary+"40":"#d1d5db",backgroundColor:p.background,color:p.text},disabled:u,children:[(0,Qr.jsx)("option",{value:"",children:"Todos los cursos"}),c.map(e=>(0,Qr.jsx)("option",{value:e.course_id,children:e.course_title},e.course_id))]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("label",{className:"flex items-center gap-1 text-xs font-medium mb-1",style:{color:p.textMuted},children:[(0,Qr.jsx)(tl,{className:"w-3 h-3"}),"Perodo"]}),(0,Qr.jsx)("select",{value:r,onChange:e=>n(e.target.value),className:"w-full text-sm p-2 border rounded-md transition-all focus:outline-none focus:ring-1",style:{borderColor:o?p.primary+"40":"#d1d5db",backgroundColor:p.background,color:p.text},children:[{value:"all",label:"Todo el tiempo"},{value:"week",label:"ltima semana"},{value:"month",label:"ltimo mes"},{value:"year",label:"ltimo ao"}].map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]})},_f=()=>{const{getColor:e,isDarkMode:t}=Yr(),[r,n]=(0,a.useState)(null),[s,o]=(0,a.useState)("all"),[i,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[u,f]=(0,a.useState)("questions"),p={text:t?"#f9fafb":"#1a202c",textMuted:t?"#9ca3af":"#6b7280",accent:e("accent","#f59e0b"),primary:e("primary","#3b82f6"),background:t?"#1f2937":"#ffffff",secondaryBg:t?"#111827":"#f3f4f6",border:t?"#374151":"#e5e7eb",cardBg:t?"#1f2937":"#ffffff"};(0,a.useEffect)(()=>{m()},[r,s]);const m=async()=>{d(!0);try{const e=new URLSearchParams;r&&e.append("course_id",r);const t=await fetch(`${window.qe_data.rest_url}quiz-extended/v1/user-stats/questions?${e}`,{headers:{"X-WP-Nonce":window.qe_data.nonce}});if(!t.ok)throw new Error("Failed to fetch statistics");const n=await t.json();console.log("Stats API Response:",n),l(n.data)}catch(e){console.error("Error fetching statistics:",e),l({total_questions:0,correct_answers:0,incorrect_answers:0,unanswered:0})}finally{d(!1)}};return(0,Qr.jsx)("div",{className:"h-full flex flex-col",style:{backgroundColor:p.secondaryBg},children:(0,Qr.jsxs)("div",{className:"container mx-auto px-3 py-3 max-w-7xl flex-1 flex flex-col min-h-0",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0 px-3 py-2 rounded-lg mb-3",style:{backgroundColor:p.cardBg,border:`1px solid ${p.border}`},children:(0,Qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(Ac,{className:"w-4 h-4",style:{color:p.primary}}),(0,Qr.jsx)("h1",{className:"text-sm font-bold",style:{color:p.text},children:"Mis Estadsticas"})]}),(0,Qr.jsx)(kf,{selectedCourse:r,setSelectedCourse:n,timeRange:s,setTimeRange:o,compact:!0,isDarkMode:t,pageColors:p})]})}),c?(0,Qr.jsx)("div",{className:"flex-1 flex justify-center items-center",children:(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:p.primary}})}):(0,Qr.jsxs)("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-3 min-h-0",children:[(0,Qr.jsx)("div",{className:"lg:col-span-3",children:(0,Qr.jsx)(Wd,{statsData:i,compact:!0,isDarkMode:t,pageColors:p,mini:!0})}),(0,Qr.jsxs)("div",{className:"lg:col-span-5 flex flex-col min-h-0",children:[(0,Qr.jsxs)("div",{className:"flex-shrink-0 flex gap-1 p-1 rounded-lg mb-2",style:{backgroundColor:t?"#374151":"#e5e7eb"},children:[(0,Qr.jsxs)("button",{onClick:()=>f("questions"),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 rounded text-xs font-medium transition-all",style:{backgroundColor:"questions"===u?p.cardBg:"transparent",color:"questions"===u?p.primary:p.textMuted,boxShadow:"questions"===u?"0 1px 2px rgba(0,0,0,0.1)":"none"},children:[(0,Qr.jsx)(Hd,{size:12}),"Evolucin"]}),(0,Qr.jsxs)("button",{onClick:()=>f("lessons"),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 rounded text-xs font-medium transition-all",style:{backgroundColor:"lessons"===u?p.cardBg:"transparent",color:"lessons"===u?p.accent:p.textMuted,boxShadow:"lessons"===u?"0 1px 2px rgba(0,0,0,0.1)":"none"},children:[(0,Qr.jsx)(kn,{size:12}),"Repasar"]})]}),(0,Qr.jsx)("div",{className:"flex-1 min-h-0",children:"questions"===u?(0,Qr.jsx)(Nf,{selectedCourse:r,timeRange:s,compact:!0,isDarkMode:t,pageColors:p}):(0,Qr.jsx)(vf,{selectedCourse:r,compact:!0,isDarkMode:t,pageColors:p})})]}),(0,Qr.jsx)("div",{className:"lg:col-span-4",children:(0,Qr.jsx)(wf,{userAccuracy:parseFloat(i&&0!==i.total_questions?(i.correct_answers/i.total_questions*100).toFixed(1):0),selectedCourse:r,compact:!0,isDarkMode:t,pageColors:p})})]})]})})};function Cf(e){return Cf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cf(e)}function Sf(e){var t=function(e){if("object"!=Cf(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Cf(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Cf(t)?t:t+""}function Ef(e,t,r){return(t=Sf(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Of(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Mf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Of(Object(r),!0).forEach(function(t){Ef(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Of(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Tf(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function Pf(e,t){if(null==e)return{};var r,n,s=Tf(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Af(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qf(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Sf(n.key),n)}}function zf(e,t,r){return t&&qf(e.prototype,t),r&&qf(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Df(e){return Df=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Df(e)}function Lf(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Lf=function(){return!!e})()}function If(e,t,r){return t=Df(t),function(e,t){if(t&&("object"==Cf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Lf()?Reflect.construct(t,r||[],Df(e).constructor):t.apply(e,r))}function Rf(e,t){return Rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Rf(e,t)}function $f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rf(e,t)}function Ff(e){if(Array.isArray(e))return e}function Bf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Uf(e,t){if(e){if("string"==typeof e)return Bf(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Bf(e,t):void 0}}function Hf(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Wf(e,t){return Ff(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,a,o,i=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw s}}return i}}(e,t)||Uf(e,t)||Hf()}function Qf(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=Qf(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const Vf=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=Qf(e))&&(n&&(n+=" "),n+=t);return n};var Kf=o(311),Yf=o.n(Kf),Gf=function(){};function Xf(e,t){return void 0!==e[t]}function Zf(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Jf(){return Jf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jf.apply(null,arguments)}function ep(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function tp(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!=r?r:null}.bind(this))}function rp(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}ep.__suppressDeprecationWarning=!0,tp.__suppressDeprecationWarning=!0,rp.__suppressDeprecationWarning=!0;var np=o(5556),sp=o.n(np),ap="milliseconds",op="seconds",ip="minutes",lp="hours",cp="day",dp="week",up="month",fp="year",pp="decade",mp="century",hp={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,day:864e5,week:6048e5},gp={month:1,year:12,decade:120,century:1200};function xp(e){return e%4==0&&e%100!=0||e%400==0?29:28}function yp(e,t,r){switch(e=new Date(e),r){case ap:case op:case ip:case lp:case cp:case dp:return function(e,t){return function(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset();return new Date(+t+(n-r)*hp.minutes)}(e,new Date(+e+t))}(e,t*hp[r]);case up:case fp:case pp:case mp:return function(e,t){var r=e.getFullYear(),n=e.getMonth(),s=e.getDate(),a=12*r+n+t,o=Math.trunc(a/12),i=a%12,l=Math.min(s,function(e){return[31,xp(e),31,30,31,30,31,31,30,31,30,31]}(o)[i]),c=new Date(e);return c.setFullYear(o),c.setDate(1),c.setMonth(i),c.setDate(l),c}(e,t*gp[r])}throw new TypeError('Invalid units: "'+r+'"')}function bp(e,t,r){return yp(e,-t,r)}function vp(e,t,r){switch(e=new Date(e),t){case mp:case pp:case fp:e=Ip(e,0);case up:e=Lp(e,1);case dp:case cp:e=zp(e,0);case lp:e=qp(e,0);case ip:e=Ap(e,0);case op:e=Pp(e,0)}return t===pp&&(e=bp(e,Rp(e)%10,"year")),t===mp&&(e=bp(e,Rp(e)%100,"year")),t===dp&&(e=Bp(e,0,r)),e}function jp(e,t,r){switch(e=vp(e=new Date(e),t,r),t){case mp:case pp:case fp:case up:case dp:(e=bp(e=yp(e,1,t),1,cp)).setHours(23,59,59,999);break;case cp:e.setHours(23,59,59,999);break;case lp:case ip:case op:e=bp(e=yp(e,1,t),1,ap)}return e}var Np=Wp(function(e,t){return e===t}),kp=Wp(function(e,t){return e!==t}),_p=Wp(function(e,t){return e>t}),Cp=Wp(function(e,t){return e>=t}),Sp=Wp(function(e,t){return e<t}),Ep=Wp(function(e,t){return e<=t});function Op(){return new Date(Math.min.apply(Math,arguments))}function Mp(){return new Date(Math.max.apply(Math,arguments))}function Tp(e,t,r,n){return n=n||"day",(!t||Cp(e,t,n))&&(!r||Ep(e,r,n))}var Pp=Hp("Milliseconds"),Ap=Hp("Seconds"),qp=Hp("Minutes"),zp=Hp("Hours"),Dp=Hp("Day"),Lp=Hp("Date"),Ip=Hp("Month"),Rp=Hp("FullYear");function $p(e,t){return void 0===t?Rp(vp(e,pp)):yp(e,t+10,fp)}function Fp(e,t){return void 0===t?Rp(vp(e,mp)):yp(e,t+100,fp)}function Bp(e,t,r){var n=(Dp(e)+7-(r||0))%7;return void 0===t?n:yp(e,t-n,cp)}function Up(e,t,r,n){var s,a,o;switch(r){case ap:case op:case ip:case lp:case cp:case dp:s=t.getTime()-e.getTime();break;case up:case fp:case pp:case mp:s=12*(Rp(t)-Rp(e))+Ip(t)-Ip(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case ap:a=1;break;case op:a=1e3;break;case ip:a=6e4;break;case lp:a=36e5;break;case cp:a=864e5;break;case dp:a=6048e5;break;case up:a=1;break;case fp:a=12;break;case pp:a=120;break;case mp:a=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return o=s/a,n?o:Math.round(o)}function Hp(e){var t=function(e){switch(e){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(void 0===n)return r["get"+e]();var s=new Date(r);return s["set"+e](n),t&&s["get"+e]()!=n&&("Hours"===e||n>=t&&s.getHours()-r.getHours()<Math.floor(n/t))&&s["set"+e](n+t),s}}function Wp(e){return function(t,r,n){return e(+vp(t,n),+vp(r,n))}}function Qp(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Vp(e){return function(e){if(Array.isArray(e))return Bf(e)}(e)||Qp(e)||Uf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Kp=o(1013),Yp=o.n(Kp);function Gp(e){return e&&e.ownerDocument||document}var Xp=/([A-Z])/g,Zp=/^ms-/;function Jp(e){return function(e){return e.replace(Xp,"-$1").toLowerCase()}(e).replace(Zp,"-ms-")}var em=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const tm=function(e,t){var r="",n="";if("string"==typeof t)return e.style.getPropertyValue(Jp(t))||function(e,t){return function(e){var t=Gp(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}(e).getPropertyValue(Jp(t));Object.keys(t).forEach(function(s){var a=t[s];a||0===a?function(e){return!(!e||!em.test(e))}(s)?n+=s+"("+a+") ":r+=Jp(s)+": "+a+";":e.style.removeProperty(Jp(s))}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r};function rm(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function nm(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function sm(e){var t="pageXOffset"===e?"scrollLeft":"scrollTop";return function(r,n){var s=nm(r);if(void 0===n)return s?s[e]:r[t];s?s.scrollTo(s[e],n):r[t]=n}}const am=sm("pageXOffset"),om=sm("pageYOffset");function im(e){var t=Gp(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return n&&rm(n,e)?(void 0!==e.getBoundingClientRect&&(r=e.getBoundingClientRect()),r={top:r.top+om(n)-(n.clientTop||0),left:r.left+am(n)-(n.clientLeft||0),width:r.width,height:r.height}):r}var lm=function(e){return!!e&&"offsetParent"in e};function cm(e,t){var r,n={top:0,left:0};if("fixed"===tm(e,"position"))r=e.getBoundingClientRect();else{var s=t||function(e){for(var t=Gp(e),r=e&&e.offsetParent;lm(r)&&"HTML"!==r.nodeName&&"static"===tm(r,"position");)r=r.offsetParent;return r||t.documentElement}(e);r=im(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(s)&&(n=im(s));var a=String(tm(s,"borderTopWidth")||0);n.top+=parseInt(a,10)-om(s)||0;var o=String(tm(s,"borderLeftWidth")||0);n.left+=parseInt(o,10)-am(s)||0}var i=String(tm(e,"marginTop")||0),l=String(tm(e,"marginLeft")||0);return Jf({},r,{top:r.top-n.top-(parseInt(i,10)||0),left:r.left-n.left-(parseInt(l,10)||0)})}const dm=!("undefined"==typeof window||!window.document||!window.document.createElement);var um=(new Date).getTime(),fm="clearTimeout",pm=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-um)),n=setTimeout(e,r);return um=t,n},mm=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};dm&&["","webkit","moz","o","ms"].some(function(e){var t=mm(e,"request");return t in window&&(fm=mm(e,"cancel"),pm=function(e){return window[t](e)}),!!pm});var hm=function(e){"function"==typeof window[fm]&&window[fm](e)},gm=pm;function xm(){return(0,a.useState)(null)}const ym=e=>e&&"function"!=typeof e?t=>{e.current=t}:e;var bm="top",vm="bottom",wm="right",jm="left",Nm="auto",km=[bm,vm,wm,jm],_m="start",Cm="end",Sm="viewport",Em="popper",Om=km.reduce(function(e,t){return e.concat([t+"-"+_m,t+"-"+Cm])},[]),Mm=[].concat(km,[Nm]).reduce(function(e,t){return e.concat([t,t+"-"+_m,t+"-"+Cm])},[]),Tm=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Pm(e){return e.split("-")[0]}function Am(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function qm(e){return e instanceof Am(e).Element||e instanceof Element}function zm(e){return e instanceof Am(e).HTMLElement||e instanceof HTMLElement}function Dm(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Am(e).ShadowRoot||e instanceof ShadowRoot)}var Lm=Math.max,Im=Math.min,Rm=Math.round;function $m(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Fm(){return!/^((?!chrome|android).)*safari/i.test($m())}function Bm(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=e.getBoundingClientRect(),s=1,a=1;t&&zm(e)&&(s=e.offsetWidth>0&&Rm(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&Rm(n.height)/e.offsetHeight||1);var o=(qm(e)?Am(e):window).visualViewport,i=!Fm()&&r,l=(n.left+(i&&o?o.offsetLeft:0))/s,c=(n.top+(i&&o?o.offsetTop:0))/a,d=n.width/s,u=n.height/a;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function Um(e){var t=Bm(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function Hm(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Dm(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Wm(e){return e?(e.nodeName||"").toLowerCase():null}function Qm(e){return Am(e).getComputedStyle(e)}function Vm(e){return["table","td","th"].indexOf(Wm(e))>=0}function Km(e){return((qm(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ym(e){return"html"===Wm(e)?e:e.assignedSlot||e.parentNode||(Dm(e)?e.host:null)||Km(e)}function Gm(e){return zm(e)&&"fixed"!==Qm(e).position?e.offsetParent:null}function Xm(e){for(var t=Am(e),r=Gm(e);r&&Vm(r)&&"static"===Qm(r).position;)r=Gm(r);return r&&("html"===Wm(r)||"body"===Wm(r)&&"static"===Qm(r).position)?t:r||function(e){var t=/firefox/i.test($m());if(/Trident/i.test($m())&&zm(e)&&"fixed"===Qm(e).position)return null;var r=Ym(e);for(Dm(r)&&(r=r.host);zm(r)&&["html","body"].indexOf(Wm(r))<0;){var n=Qm(r);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return r;r=r.parentNode}return null}(e)||t}function Zm(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Jm(e,t,r){return Lm(e,Im(t,r))}function eh(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function th(e,t){return t.reduce(function(t,r){return t[r]=e,t},{})}const rh={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,n=e.name,s=e.options,a=r.elements.arrow,o=r.modifiersData.popperOffsets,i=Pm(r.placement),l=Zm(i),c=[jm,wm].indexOf(i)>=0?"height":"width";if(a&&o){var d=function(e,t){return eh("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:th(e,km))}(s.padding,r),u=Um(a),f="y"===l?bm:jm,p="y"===l?vm:wm,m=r.rects.reference[c]+r.rects.reference[l]-o[l]-r.rects.popper[c],h=o[l]-r.rects.reference[l],g=Xm(a),x=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=m/2-h/2,b=d[f],v=x-u[c]-d[p],w=x/2-u[c]/2+y,j=Jm(b,w,v),N=l;r.modifiersData[n]=((t={})[N]=j,t.centerOffset=j-w,t)}},effect:function(e){var t=e.state,r=e.options.element,n=void 0===r?"[data-popper-arrow]":r;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&Hm(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nh(e){return e.split("-")[1]}var sh={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ah(e){var t,r=e.popper,n=e.popperRect,s=e.placement,a=e.variation,o=e.offsets,i=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,f=o.x,p=void 0===f?0:f,m=o.y,h=void 0===m?0:m,g="function"==typeof d?d({x:p,y:h}):{x:p,y:h};p=g.x,h=g.y;var x=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),b=jm,v=bm,w=window;if(c){var j=Xm(r),N="clientHeight",k="clientWidth";j===Am(r)&&"static"!==Qm(j=Km(r)).position&&"absolute"===i&&(N="scrollHeight",k="scrollWidth"),(s===bm||(s===jm||s===wm)&&a===Cm)&&(v=vm,h-=(u&&j===w&&w.visualViewport?w.visualViewport.height:j[N])-n.height,h*=l?1:-1),s!==jm&&(s!==bm&&s!==vm||a!==Cm)||(b=wm,p-=(u&&j===w&&w.visualViewport?w.visualViewport.width:j[k])-n.width,p*=l?1:-1)}var _,C=Object.assign({position:i},c&&sh),S=!0===d?function(e,t){var r=e.x,n=e.y,s=t.devicePixelRatio||1;return{x:Rm(r*s)/s||0,y:Rm(n*s)/s||0}}({x:p,y:h},Am(r)):{x:p,y:h};return p=S.x,h=S.y,l?Object.assign({},C,((_={})[v]=y?"0":"",_[b]=x?"0":"",_.transform=(w.devicePixelRatio||1)<=1?"translate("+p+"px, "+h+"px)":"translate3d("+p+"px, "+h+"px, 0)",_)):Object.assign({},C,((t={})[v]=y?h+"px":"",t[b]=x?p+"px":"",t.transform="",t))}const oh={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,n=r.gpuAcceleration,s=void 0===n||n,a=r.adaptive,o=void 0===a||a,i=r.roundOffsets,l=void 0===i||i,c={placement:Pm(t.placement),variation:nh(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ah(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ah(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var ih={passive:!0};const lh={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,n=e.options,s=n.scroll,a=void 0===s||s,o=n.resize,i=void 0===o||o,l=Am(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach(function(e){e.addEventListener("scroll",r.update,ih)}),i&&l.addEventListener("resize",r.update,ih),function(){a&&c.forEach(function(e){e.removeEventListener("scroll",r.update,ih)}),i&&l.removeEventListener("resize",r.update,ih)}},data:{}};var ch={left:"right",right:"left",bottom:"top",top:"bottom"};function dh(e){return e.replace(/left|right|bottom|top/g,function(e){return ch[e]})}var uh={start:"end",end:"start"};function fh(e){return e.replace(/start|end/g,function(e){return uh[e]})}function ph(e){var t=Am(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function mh(e){return Bm(Km(e)).left+ph(e).scrollLeft}function hh(e){var t=Qm(e),r=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+n)}function gh(e){return["html","body","#document"].indexOf(Wm(e))>=0?e.ownerDocument.body:zm(e)&&hh(e)?e:gh(Ym(e))}function xh(e,t){var r;void 0===t&&(t=[]);var n=gh(e),s=n===(null==(r=e.ownerDocument)?void 0:r.body),a=Am(n),o=s?[a].concat(a.visualViewport||[],hh(n)?n:[]):n,i=t.concat(o);return s?i:i.concat(xh(Ym(o)))}function yh(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function bh(e,t,r){return t===Sm?yh(function(e,t){var r=Am(e),n=Km(e),s=r.visualViewport,a=n.clientWidth,o=n.clientHeight,i=0,l=0;if(s){a=s.width,o=s.height;var c=Fm();(c||!c&&"fixed"===t)&&(i=s.offsetLeft,l=s.offsetTop)}return{width:a,height:o,x:i+mh(e),y:l}}(e,r)):qm(t)?function(e,t){var r=Bm(e,!1,"fixed"===t);return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}(t,r):yh(function(e){var t,r=Km(e),n=ph(e),s=null==(t=e.ownerDocument)?void 0:t.body,a=Lm(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Lm(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-n.scrollLeft+mh(e),l=-n.scrollTop;return"rtl"===Qm(s||r).direction&&(i+=Lm(r.clientWidth,s?s.clientWidth:0)-a),{width:a,height:o,x:i,y:l}}(Km(e)))}function vh(e){var t,r=e.reference,n=e.element,s=e.placement,a=s?Pm(s):null,o=s?nh(s):null,i=r.x+r.width/2-n.width/2,l=r.y+r.height/2-n.height/2;switch(a){case bm:t={x:i,y:r.y-n.height};break;case vm:t={x:i,y:r.y+r.height};break;case wm:t={x:r.x+r.width,y:l};break;case jm:t={x:r.x-n.width,y:l};break;default:t={x:r.x,y:r.y}}var c=a?Zm(a):null;if(null!=c){var d="y"===c?"height":"width";switch(o){case _m:t[c]=t[c]-(r[d]/2-n[d]/2);break;case Cm:t[c]=t[c]+(r[d]/2-n[d]/2)}}return t}function wh(e,t){void 0===t&&(t={});var r=t,n=r.placement,s=void 0===n?e.placement:n,a=r.strategy,o=void 0===a?e.strategy:a,i=r.boundary,l=void 0===i?"clippingParents":i,c=r.rootBoundary,d=void 0===c?Sm:c,u=r.elementContext,f=void 0===u?Em:u,p=r.altBoundary,m=void 0!==p&&p,h=r.padding,g=void 0===h?0:h,x=eh("number"!=typeof g?g:th(g,km)),y=f===Em?"reference":Em,b=e.rects.popper,v=e.elements[m?y:f],w=function(e,t,r,n){var s="clippingParents"===t?function(e){var t=xh(Ym(e)),r=["absolute","fixed"].indexOf(Qm(e).position)>=0&&zm(e)?Xm(e):e;return qm(r)?t.filter(function(e){return qm(e)&&Hm(e,r)&&"body"!==Wm(e)}):[]}(e):[].concat(t),a=[].concat(s,[r]),o=a[0],i=a.reduce(function(t,r){var s=bh(e,r,n);return t.top=Lm(s.top,t.top),t.right=Im(s.right,t.right),t.bottom=Im(s.bottom,t.bottom),t.left=Lm(s.left,t.left),t},bh(e,o,n));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}(qm(v)?v:v.contextElement||Km(e.elements.popper),l,d,o),j=Bm(e.elements.reference),N=vh({reference:j,element:b,strategy:"absolute",placement:s}),k=yh(Object.assign({},b,N)),_=f===Em?k:j,C={top:w.top-_.top+x.top,bottom:_.bottom-w.bottom+x.bottom,left:w.left-_.left+x.left,right:_.right-w.right+x.right},S=e.modifiersData.offset;if(f===Em&&S){var E=S[s];Object.keys(C).forEach(function(e){var t=[wm,vm].indexOf(e)>=0?1:-1,r=[bm,vm].indexOf(e)>=0?"y":"x";C[e]+=E[r]*t})}return C}const jh={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var s=r.mainAxis,a=void 0===s||s,o=r.altAxis,i=void 0===o||o,l=r.fallbackPlacements,c=r.padding,d=r.boundary,u=r.rootBoundary,f=r.altBoundary,p=r.flipVariations,m=void 0===p||p,h=r.allowedAutoPlacements,g=t.options.placement,x=Pm(g),y=l||(x!==g&&m?function(e){if(Pm(e)===Nm)return[];var t=dh(e);return[fh(e),t,fh(t)]}(g):[dh(g)]),b=[g].concat(y).reduce(function(e,r){return e.concat(Pm(r)===Nm?function(e,t){void 0===t&&(t={});var r=t,n=r.placement,s=r.boundary,a=r.rootBoundary,o=r.padding,i=r.flipVariations,l=r.allowedAutoPlacements,c=void 0===l?Mm:l,d=nh(n),u=d?i?Om:Om.filter(function(e){return nh(e)===d}):km,f=u.filter(function(e){return c.indexOf(e)>=0});0===f.length&&(f=u);var p=f.reduce(function(t,r){return t[r]=wh(e,{placement:r,boundary:s,rootBoundary:a,padding:o})[Pm(r)],t},{});return Object.keys(p).sort(function(e,t){return p[e]-p[t]})}(t,{placement:r,boundary:d,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:h}):r)},[]),v=t.rects.reference,w=t.rects.popper,j=new Map,N=!0,k=b[0],_=0;_<b.length;_++){var C=b[_],S=Pm(C),E=nh(C)===_m,O=[bm,vm].indexOf(S)>=0,M=O?"width":"height",T=wh(t,{placement:C,boundary:d,rootBoundary:u,altBoundary:f,padding:c}),P=O?E?wm:jm:E?vm:bm;v[M]>w[M]&&(P=dh(P));var A=dh(P),q=[];if(a&&q.push(T[S]<=0),i&&q.push(T[P]<=0,T[A]<=0),q.every(function(e){return e})){k=C,N=!1;break}j.set(C,q)}if(N)for(var z=function(e){var t=b.find(function(t){var r=j.get(t);if(r)return r.slice(0,e).every(function(e){return e})});if(t)return k=t,"break"},D=m?3:1;D>0&&"break"!==z(D);D--);t.placement!==k&&(t.modifiersData[n]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function Nh(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function kh(e){return[bm,wm,vm,jm].some(function(t){return e[t]>=0})}const _h={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,n=t.rects.reference,s=t.rects.popper,a=t.modifiersData.preventOverflow,o=wh(t,{elementContext:"reference"}),i=wh(t,{altBoundary:!0}),l=Nh(o,n),c=Nh(i,s,a),d=kh(l),u=kh(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},Ch={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,n=e.name,s=r.offset,a=void 0===s?[0,0]:s,o=Mm.reduce(function(e,r){return e[r]=function(e,t,r){var n=Pm(e),s=[jm,bm].indexOf(n)>=0?-1:1,a="function"==typeof r?r(Object.assign({},t,{placement:e})):r,o=a[0],i=a[1];return o=o||0,i=(i||0)*s,[jm,wm].indexOf(n)>=0?{x:i,y:o}:{x:o,y:i}}(r,t.rects,a),e},{}),i=o[t.placement],l=i.x,c=i.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=o}},Sh={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=vh({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},Eh={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name,s=r.mainAxis,a=void 0===s||s,o=r.altAxis,i=void 0!==o&&o,l=r.boundary,c=r.rootBoundary,d=r.altBoundary,u=r.padding,f=r.tether,p=void 0===f||f,m=r.tetherOffset,h=void 0===m?0:m,g=wh(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),x=Pm(t.placement),y=nh(t.placement),b=!y,v=Zm(x),w="x"===v?"y":"x",j=t.modifiersData.popperOffsets,N=t.rects.reference,k=t.rects.popper,_="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,C="number"==typeof _?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,E={x:0,y:0};if(j){if(a){var O,M="y"===v?bm:jm,T="y"===v?vm:wm,P="y"===v?"height":"width",A=j[v],q=A+g[M],z=A-g[T],D=p?-k[P]/2:0,L=y===_m?N[P]:k[P],I=y===_m?-k[P]:-N[P],R=t.elements.arrow,$=p&&R?Um(R):{width:0,height:0},F=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},B=F[M],U=F[T],H=Jm(0,N[P],$[P]),W=b?N[P]/2-D-H-B-C.mainAxis:L-H-B-C.mainAxis,Q=b?-N[P]/2+D+H+U+C.mainAxis:I+H+U+C.mainAxis,V=t.elements.arrow&&Xm(t.elements.arrow),K=V?"y"===v?V.clientTop||0:V.clientLeft||0:0,Y=null!=(O=null==S?void 0:S[v])?O:0,G=A+Q-Y,X=Jm(p?Im(q,A+W-Y-K):q,A,p?Lm(z,G):z);j[v]=X,E[v]=X-A}if(i){var Z,J="x"===v?bm:jm,ee="x"===v?vm:wm,te=j[w],re="y"===w?"height":"width",ne=te+g[J],se=te-g[ee],ae=-1!==[bm,jm].indexOf(x),oe=null!=(Z=null==S?void 0:S[w])?Z:0,ie=ae?ne:te-N[re]-k[re]-oe+C.altAxis,le=ae?te+N[re]+k[re]-oe-C.altAxis:se,ce=p&&ae?function(e,t,r){var n=Jm(e,t,r);return n>r?r:n}(ie,te,le):Jm(p?ie:ne,te,p?le:se);j[w]=ce,E[w]=ce-te}t.modifiersData[n]=E}},requiresIfExists:["offset"]};function Oh(e,t,r){void 0===r&&(r=!1);var n,s,a=zm(t),o=zm(t)&&function(e){var t=e.getBoundingClientRect(),r=Rm(t.width)/e.offsetWidth||1,n=Rm(t.height)/e.offsetHeight||1;return 1!==r||1!==n}(t),i=Km(t),l=Bm(e,o,r),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(a||!a&&!r)&&(("body"!==Wm(t)||hh(i))&&(c=(n=t)!==Am(n)&&zm(n)?{scrollLeft:(s=n).scrollLeft,scrollTop:s.scrollTop}:ph(n)),zm(t)?((d=Bm(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):i&&(d.x=mh(i))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function Mh(e){var t=new Map,r=new Set,n=[];function s(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!r.has(e)){var n=t.get(e);n&&s(n)}}),n.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){r.has(e.name)||s(e)}),n}var Th={placement:"bottom",modifiers:[],strategy:"absolute"};function Ph(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var Ah=function(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,n=void 0===r?[]:r,s=t.defaultOptions,a=void 0===s?Th:s;return function(e,t,r){void 0===r&&(r=a);var s,o,i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Th,a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:i,setOptions:function(r){var s="function"==typeof r?r(i.options):r;u(),i.options=Object.assign({},a,i.options,s),i.scrollParents={reference:qm(e)?xh(e):e.contextElement?xh(e.contextElement):[],popper:xh(t)};var o,c,f=function(e){var t=Mh(e);return Tm.reduce(function(e,r){return e.concat(t.filter(function(e){return e.phase===r}))},[])}((o=[].concat(n,i.options.modifiers),c=o.reduce(function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return i.orderedModifiers=f.filter(function(e){return e.enabled}),i.orderedModifiers.forEach(function(e){var t=e.name,r=e.options,n=void 0===r?{}:r,s=e.effect;if("function"==typeof s){var a=s({state:i,name:t,instance:d,options:n});l.push(a||function(){})}}),d.update()},forceUpdate:function(){if(!c){var e=i.elements,t=e.reference,r=e.popper;if(Ph(t,r)){i.rects={reference:Oh(t,Xm(r),"fixed"===i.options.strategy),popper:Um(r)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var n=0;n<i.orderedModifiers.length;n++)if(!0!==i.reset){var s=i.orderedModifiers[n],a=s.fn,o=s.options,l=void 0===o?{}:o,u=s.name;"function"==typeof a&&(i=a({state:i,options:l,name:u,instance:d})||i)}else i.reset=!1,n=-1}}},update:(s=function(){return new Promise(function(e){d.forceUpdate(),e(i)})},function(){return o||(o=new Promise(function(e){Promise.resolve().then(function(){o=void 0,e(s())})})),o}),destroy:function(){u(),c=!0}};if(!Ph(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(r).then(function(e){!c&&r.onFirstUpdate&&r.onFirstUpdate(e)}),d}}({defaultModifiers:[_h,Sh,oh,lh,Ch,jh,Eh,rh]}),qh=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},zh={name:"applyStyles",enabled:!1},Dh={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,r=e.reference,n=e.popper;if("removeAttribute"in r){var s=(r.getAttribute("aria-describedby")||"").split(",").filter(function(e){return e.trim()!==n.id});s.length?r.setAttribute("aria-describedby",s.join(",")):r.removeAttribute("aria-describedby")}}},fn:function(e){var t,r=e.state.elements,n=r.popper,s=r.reference,a=null==(t=n.getAttribute("role"))?void 0:t.toLowerCase();if(n.id&&"tooltip"===a&&"setAttribute"in s){var o=s.getAttribute("aria-describedby");if(o&&-1!==o.split(",").indexOf(n.id))return;s.setAttribute("aria-describedby",o?o+","+n.id:n.id)}}},Lh=[];const Ih=function(e,t,r){var n=void 0===r?{}:r,s=n.enabled,o=void 0===s||s,i=n.placement,l=void 0===i?"bottom":i,c=n.strategy,d=void 0===c?"absolute":c,u=n.modifiers,f=void 0===u?Lh:u,p=Tf(n,["enabled","placement","strategy","modifiers"]),m=(0,a.useRef)(),h=(0,a.useCallback)(function(){var e;null==(e=m.current)||e.update()},[]),g=(0,a.useCallback)(function(){var e;null==(e=m.current)||e.forceUpdate()},[]),x=function(e){const t=function(){const e=(0,a.useRef)(!0),t=(0,a.useRef)(()=>e.current);return(0,a.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}();return[e[0],(0,a.useCallback)(r=>{if(t())return e[1](r)},[t,e[1]])]}((0,a.useState)({placement:l,update:h,forceUpdate:g,attributes:{},styles:{popper:qh(d),arrow:{}}})),y=x[0],b=x[1],v=(0,a.useMemo)(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,r={},n={};Object.keys(t.elements).forEach(function(e){r[e]=t.styles[e],n[e]=t.attributes[e]}),b({state:t,styles:r,attributes:n,update:h,forceUpdate:g,placement:t.placement})}}},[h,g,b]);return(0,a.useEffect)(function(){m.current&&o&&m.current.setOptions({placement:l,strategy:d,modifiers:[].concat(f,[v,zh])})},[d,l,v,o]),(0,a.useEffect)(function(){if(o&&null!=e&&null!=t)return m.current=Ah(e,t,Jf({},p,{placement:l,strategy:d,modifiers:[].concat(f,[Dh,v])})),function(){null!=m.current&&(m.current.destroy(),m.current=void 0,b(function(e){return Jf({},e,{attributes:{},styles:{popper:qh(d)}})}))}},[o,e,t]),y};var Rh=!1,$h=!1;try{var Fh={get passive(){return Rh=!0},get once(){return $h=Rh=!0}};dm&&(window.addEventListener("test",Fh,Fh),window.removeEventListener("test",Fh,!0))}catch(qR){}const Bh=function(e,t,r,n){return function(e,t,r,n){if(n&&"boolean"!=typeof n&&!$h){var s=n.once,a=n.capture,o=r;!$h&&s&&(o=r.__once||function e(n){this.removeEventListener(t,e,a),r.call(this,n)},r.__once=o),e.addEventListener(t,o,Rh?n:a)}e.addEventListener(t,r,n)}(e,t,r,n),function(){!function(e,t,r,n){var s=n&&"boolean"!=typeof n?n.capture:n;e.removeEventListener(t,r,s),r.__once&&e.removeEventListener(t,r.__once,s)}(e,t,r,n)}};function Uh(e){const t=function(e){const t=(0,a.useRef)(e);return(0,a.useEffect)(()=>{t.current=e},[e]),t}(e);return(0,a.useCallback)(function(...e){return t.current&&t.current(...e)},[t])}var Hh=o(9771),Wh=o.n(Hh);var Qh=function(){},Vh=function(e){return e&&("current"in e?e.current:e)};const Kh=function(e,t,r){var n=void 0===r?{}:r,s=n.disabled,o=n.clickTrigger,i=void 0===o?"click":o,l=(0,a.useRef)(!1),c=t||Qh,d=(0,a.useCallback)(function(t){var r,n,s=Vh(e);Wh()(!!s,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!(s&&(n=t,!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey))&&function(e){return 0===e.button}(t)&&!rm(s,null!=(r=null==t.composedPath?void 0:t.composedPath()[0])?r:t.target))},[e]),u=Uh(function(e){l.current||c(e)}),f=Uh(function(e){27===e.keyCode&&c(e)});(0,a.useEffect)(function(){if(!s&&null!=e){var t=window.event,r=Gp(function(e){return e&&"setState"in e?xa().findDOMNode(e):null!=e?e:null}(Vh(e))),n=Bh(r,i,d,!0),a=Bh(r,i,function(e){e!==t?u(e):t=void 0}),o=Bh(r,"keyup",function(e){e!==t?f(e):t=void 0}),l=[];return"ontouchstart"in r.documentElement&&(l=[].slice.call(r.body.children).map(function(e){return Bh(e,"mousemove",Qh)})),function(){n(),a(),o(),l.forEach(function(e){return e()})}}},[e,s,i,d,u,f])};var Yh=function(e){var t;return"undefined"==typeof document?null:null==e?Gp().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function Gh(e,t){var r=(0,a.useState)(function(){return Yh(e)}),n=r[0],s=r[1];if(!n){var o=Yh(e);o&&s(o)}return(0,a.useEffect)(function(){t&&n&&t(n)},[t,n]),(0,a.useEffect)(function(){var t=Yh(e);t!==n&&s(t)},[e,n]),n}function Xh(e){return void 0===e&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}var Zh=i().forwardRef(function(e,t){var r,n,s=e.flip,o=e.offset,l=e.placement,c=e.containerPadding,d=void 0===c?5:c,u=e.popperConfig,f=void 0===u?{}:u,p=e.transition,m=xm(),h=m[0],g=m[1],x=xm(),y=x[0],b=x[1],v=(r=g,n=t,(0,a.useMemo)(()=>function(e,t){const r=ym(e),n=ym(t);return e=>{r&&r(e),n&&n(e)}}(r,n),[r,n])),w=Gh(e.container),j=Gh(e.target),N=(0,a.useState)(!e.show),k=N[0],_=N[1],C=Ih(j,h,function(e){var t,r,n,s,a=e.enabled,o=e.enableEvents,i=e.placement,l=e.flip,c=e.offset,d=e.fixed,u=e.containerPadding,f=e.arrowElement,p=e.popperConfig,m=void 0===p?{}:p,h=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach(function(e){t[e.name]=e}),t):e||t}(m.modifiers);return Jf({},m,{placement:i,enabled:a,strategy:d?"fixed":m.strategy,modifiers:Xh(Jf({},h,{eventListeners:{enabled:o},preventOverflow:Jf({},h.preventOverflow,{options:u?Jf({padding:u},null==(t=h.preventOverflow)?void 0:t.options):null==(r=h.preventOverflow)?void 0:r.options}),offset:{options:Jf({offset:c},null==(n=h.offset)?void 0:n.options)},arrow:Jf({},h.arrow,{enabled:!!f,options:Jf({},null==(s=h.arrow)?void 0:s.options,{element:f})}),flip:Jf({enabled:!!l},h.flip)}))})}({placement:l,enableEvents:!!e.show,containerPadding:d||5,flip:s,offset:o,arrowElement:y,popperConfig:f})),S=C.styles,E=C.attributes,O=Tf(C,["styles","attributes"]);e.show?k&&_(!1):e.transition||k||_(!0);var M=e.show||p&&!k;if(Kh(h,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!M)return null;var T=e.children(Jf({},O,{show:!!e.show,props:Jf({},E.popper,{style:S.popper,ref:v}),arrowProps:Jf({},E.arrow,{style:S.arrow,ref:b})}));if(p){var P=e.onExit,A=e.onExiting,q=e.onEnter,z=e.onEntering,D=e.onEntered;T=i().createElement(p,{in:e.show,appear:!0,onExit:P,onExiting:A,onExited:function(){_(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:q,onEntering:z,onEntered:D},T)}return w?xa().createPortal(T,w):null});Zh.displayName="Overlay",Zh.propTypes={show:sp().bool,placement:sp().oneOf(Mm),target:sp().any,container:sp().any,flip:sp().bool,children:sp().func.isRequired,containerPadding:sp().number,popperConfig:sp().object,rootClose:sp().bool,rootCloseEvent:sp().oneOf(["click","mousedown"]),rootCloseDisabled:sp().bool,onHide:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s;return e.rootClose?(s=sp().func).isRequired.apply(s,[e].concat(r)):sp().func.apply(sp(),[e].concat(r))},transition:sp().elementType,onEnter:sp().func,onEntering:sp().func,onEntered:sp().func,onExit:sp().func,onExiting:sp().func,onExited:sp().func};const Jh=Zh;var eg=o(2404),tg=o.n(eg);function rg(e,t){var r=nm(e);return r?r.innerHeight:t?e.clientHeight:im(e).height}var ng,sg=Function.prototype.bind.call(Function.prototype.call,[].slice);function ag(e,t){if(!ng){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;ng=function(e,t){return n.call(e,t)}}return ng(e,t)}function og(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(ag(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}var ig=o(4713),lg=o.n(ig),cg=o(3181),dg=o.n(cg),ug=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function fg(e,t){return e===t||!(!ug(e)||!ug(t))}function pg(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!fg(e[r],t[r]))return!1;return!0}function mg(e,t){void 0===t&&(t=pg);var r=null;function n(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var a=e.apply(this,n);return r={lastResult:a,lastArgs:n,lastThis:this},a}return n.clear=function(){r=null},n}function hg(e,t){var r=nm(e);return r?r.innerWidth:t?e.clientWidth:im(e).width}var gg,xg=o(3031),yg=o.n(xg);function bg(e){if((!gg&&0!==gg||e)&&dm){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),gg=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return gg}function vg(e){return Ff(e)||Qp(e)||Uf(e)||Hf()}function wg(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var jg=o(4684),Ng=o.n(jg),kg=o(3916),_g=o.n(kg),Cg=o(179),Sg=o.n(Cg),Eg=o(9752),Og=o.n(Eg);function Mg(e){return e.children}o(7872),o(8867),o(8906),o(1840),o(5750),o(3200),o(3826),o(4629);var Tg="PREV",Pg="NEXT",Ag="TODAY",qg="DATE",zg={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Dg=Object.keys(zg).map(function(e){return zg[e]});sp().oneOfType([sp().string,sp().func]),sp().any,sp().func,sp().oneOfType([sp().arrayOf(sp().oneOf(Dg)),sp().objectOf(function(e,t){if(-1!==Dg.indexOf(t)&&"boolean"==typeof e[t])return null;for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];return sp().elementType.apply(sp(),[e,t].concat(n))})]),sp().oneOfType([sp().oneOf(["overlap","no-overlap"]),sp().func]);var Lg={seconds:1e3,minutes:6e4,hours:36e5,day:864e5};function Ig(e,t){var r=vp(e,"month");return vp(r,"week",t.startOfWeek())}function Rg(e,t){var r=jp(e,"month");return jp(r,"week",t.startOfWeek())}function $g(e,t){for(var r=Ig(e,t),n=Rg(e,t),s=[];Ep(r,n,"day");)s.push(r),r=yp(r,1,"day");return s}function Fg(e,t){var r=vp(e,t);return Np(r,e)?r:yp(r,1,t)}function Bg(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",n=e,s=[];Ep(n,t,r);)s.push(n),n=yp(n,1,r);return s}function Ug(e,t){return null==t&&null==e?null:(null==t&&(t=new Date),null==e&&(e=new Date),e=vp(e,"day"),e=zp(e,zp(t)),e=qp(e,qp(t)),e=Ap(e,Ap(t)),Pp(e,Pp(t)))}function Hg(e){return 0===zp(e)&&0===qp(e)&&0===Ap(e)&&0===Pp(e)}function Wg(e,t,r){return r&&"milliseconds"!==r?Math.round(Math.abs(+vp(e,r)/Lg[r]-+vp(t,r)/Lg[r])):Math.abs(+e-+t)}var Qg=sp().oneOfType([sp().string,sp().func]);function Vg(e,t,r,n,s){var a="function"==typeof n?n(r,s,e):t.call(e,r,n,s);return Yf()(null==a||"string"==typeof a,"`localizer format(..)` must return a string, null, or undefined"),a}function Kg(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function Yg(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function Gg(e,t){return Wg(e,t,"minutes")+Yg(e,t)}function Xg(e){var t=vp(e,"day");return Wg(t,e,"minutes")+Yg(t,e)}function Zg(e,t){return Sp(e,t,"day")}function Jg(e,t,r){return Np(e,t,"minutes")?Cp(t,r,"minutes"):_p(t,r,"minutes")}function ex(e,t){return function(e,t,r,s){return"day"===r&&(r="date"),Math.abs(n[r](e,void 0,s)-n[r](t,void 0,s))}(e,t,"day")}function tx(e){var t=e.evtA,r=t.start,n=t.end,s=t.allDay,a=e.evtB,o=a.start,i=a.end,l=a.allDay,c=+vp(r,"day")-+vp(o,"day"),d=ex(r,n),u=ex(o,i);return c||u-d||!!l-!!s||+r-+o||+n-+i}function rx(e){var t=e.event,r=t.start,n=t.end,s=e.range,a=s.start,o=s.end,i=vp(r,"day"),l=Ep(i,o,"day"),c=kp(i,n,"minutes")?_p(n,a,"minutes"):Cp(n,a,"minutes");return l&&c}function nx(e,t){return Np(e,t,"day")}function sx(e,t){return Hg(e)&&Hg(t)}var ax=zf(function e(t){var r=this;Af(this,e),Yf()("function"==typeof t.format,"date localizer `format(..)` must be a function"),Yf()("function"==typeof t.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||Qg,this.formats=t.formats,this.format=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return Vg.apply(void 0,[r,t.format].concat(n))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||Ug,this.inRange=t.inRange||Tp,this.lt=t.lt||Sp,this.lte=t.lte||Ep,this.gt=t.gt||_p,this.gte=t.gte||Cp,this.eq=t.eq||Np,this.neq=t.neq||kp,this.startOf=t.startOf||vp,this.endOf=t.endOf||jp,this.add=t.add||yp,this.range=t.range||Bg,this.diff=t.diff||Wg,this.ceil=t.ceil||Fg,this.min=t.min||Op,this.max=t.max||Mp,this.minutes=t.minutes||qp,this.daySpan=t.daySpan||ex,this.firstVisibleDay=t.firstVisibleDay||Ig,this.lastVisibleDay=t.lastVisibleDay||Rg,this.visibleDays=t.visibleDays||$g,this.getSlotDate=t.getSlotDate||Kg,this.getTimezoneOffset=t.getTimezoneOffset||function(e){return e.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||Yg,this.getTotalMin=t.getTotalMin||Gg,this.getMinutesFromMidnight=t.getMinutesFromMidnight||Xg,this.continuesPrior=t.continuesPrior||Zg,this.continuesAfter=t.continuesAfter||Jg,this.sortEvents=t.sortEvents||tx,this.inEventRange=t.inEventRange||rx,this.isSameDate=t.isSameDate||nx,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||sx,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function ox(e,t,r,n){var s=Mf(Mf({},e.formats),r);return Mf(Mf({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(r,n){return e.format(r,s[n]||n,t)}})}var ix=function(e){function t(){var e;Af(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=If(this,t,[].concat(n))).navigate=function(t){e.props.onNavigate(t)},e.view=function(t){e.props.onView(t)},e}return $f(t,e),zf(t,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,r=e.label;return i().createElement("div",{className:"rbc-toolbar"},i().createElement("span",{className:"rbc-btn-group"},i().createElement("button",{type:"button",onClick:this.navigate.bind(null,Ag)},t.today),i().createElement("button",{type:"button",onClick:this.navigate.bind(null,Tg)},t.previous),i().createElement("button",{type:"button",onClick:this.navigate.bind(null,Pg)},t.next)),i().createElement("span",{className:"rbc-toolbar-label"},r),i().createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(t)))}},{key:"viewNamesGroup",value:function(e){var t=this,r=this.props.views,n=this.props.view;if(r.length>1)return r.map(function(r){return i().createElement("button",{type:"button",key:r,className:Vf({"rbc-active":n===r}),onClick:t.view.bind(null,r)},e[r])})}}])}(i().Component);function lx(e,t){e&&e.apply(null,[].concat(t))}var cx={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}},dx=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],ux=function(e){function t(){return Af(this,t),If(this,t,arguments)}return $f(t,e),zf(t,[{key:"render",value:function(){var e=this.props,t=e.style,r=e.className,n=e.event,s=e.selected,a=e.isAllDay,o=e.onSelect,l=e.onDoubleClick,c=e.onKeyPress,d=e.localizer,u=e.continuesPrior,f=e.continuesAfter,p=e.accessors,m=e.getters,h=e.children,g=e.components,x=g.event,y=g.eventWrapper,b=e.slotStart,v=e.slotEnd,w=Pf(e,dx);delete w.resizable;var j=p.title(n),N=p.tooltip(n),k=p.end(n),_=p.start(n),C=p.allDay(n),S=a||C||d.diff(_,d.ceil(k,"day"),"day")>1,E=m.eventProp(n,_,k,s),O=i().createElement("div",{className:"rbc-event-content",title:N||void 0},x?i().createElement(x,{event:n,continuesPrior:u,continuesAfter:f,title:j,isAllDay:C,localizer:d,slotStart:b,slotEnd:v}):j);return i().createElement(y,Object.assign({},this.props,{type:"date"}),i().createElement("div",Object.assign({},w,{style:Mf(Mf({},E.style),t),className:Vf("rbc-event",r,E.className,{"rbc-selected":s,"rbc-event-allday":S,"rbc-event-continues-prior":u,"rbc-event-continues-after":f}),onClick:function(e){return o&&o(n,e)},onDoubleClick:function(e){return l&&l(n,e)},onKeyDown:function(e){return c&&c(n,e)}}),"function"==typeof h?h(O):O))}}])}(i().Component);function fx(e,t){return!(!e||null==t)&&tg()(e,t)}function px(e,t){return(e.right-e.left)/t}function mx(e,t,r,n){var s=px(e,n);return r?n-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function hx(e){var t=e.containerRef,r=e.accessors,n=e.getters,s=e.selected,o=e.components,l=e.localizer,c=e.position,d=e.show,u=e.events,f=e.slotStart,p=e.slotEnd,m=e.onSelect,h=e.onDoubleClick,g=e.onKeyPress,x=e.handleDragStart,y=e.popperRef,b=e.target,v=e.offset;!function(e){var t=e.ref,r=e.callback;(0,a.useEffect)(function(){var e=function(e){t.current&&!t.current.contains(e.target)&&r()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[t,r])}({ref:y,callback:d}),(0,a.useLayoutEffect)(function(){var e=function(e){var t=e.offset,r=e.container,n=e.box,s=im(e.target),a=s.top,o=s.left,i=s.width,l=s.height,c=im(r),d=c.top,u=c.left,f=c.width,p=c.height,m=im(n),h=m.width,g=m.height,x=d+p,y=u+f,b=a+g,v=o+h,w=t.x,j=t.y;return{topOffset:b>x?a-g-j:a+j+l,leftOffset:v>y?o+w-h+i:o+w}}({target:b,offset:v,container:t.current,box:y.current}),r=e.topOffset,n=e.leftOffset;y.current.style.top="".concat(r,"px"),y.current.style.left="".concat(n,"px")},[v.x,v.y,b]);var w=c.width,j={minWidth:w+w/2};return i().createElement("div",{style:j,className:"rbc-overlay",ref:y},i().createElement("div",{className:"rbc-overlay-header"},l.format(f,"dayHeaderFormat")),u.map(function(e,t){return i().createElement(ux,{key:t,type:"popup",localizer:l,event:e,getters:n,onSelect:m,accessors:r,components:o,onDoubleClick:h,onKeyPress:g,continuesPrior:l.lt(r.end(e),f,"day"),continuesAfter:l.gte(r.start(e),p,"day"),slotStart:f,slotEnd:p,selected:fx(e,s),draggable:!0,onDragStart:function(){return x(e)},onDragEnd:function(){return d()}})}))}var gx=i().forwardRef(function(e,t){return i().createElement(hx,Object.assign({},e,{popperRef:t}))});function xx(e){var t=e.containerRef,r=e.popupOffset,n=void 0===r?5:r,s=e.overlay,o=e.accessors,l=e.localizer,c=e.components,d=e.getters,u=e.selected,f=e.handleSelectEvent,p=e.handleDoubleClickEvent,m=e.handleKeyPressEvent,h=e.handleDragStart,g=e.onHide,x=e.overlayDisplay,y=(0,a.useRef)(null);if(!s.position)return null;var b=n;isNaN(n)||(b={x:n,y:n});var v=s.position,w=s.events,j=s.date,N=s.end;return i().createElement(Jh,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:g,target:s.target},function(e){var r=e.props;return i().createElement(gx,Object.assign({},r,{containerRef:t,ref:y,target:s.target,offset:b,accessors:o,getters:d,selected:u,components:c,localizer:l,position:v,show:x,events:w,slotStart:j,slotEnd:N,onSelect:f,onDoubleClick:p,onKeyPress:m,handleDragStart:h}))})}gx.propTypes={accessors:sp().object.isRequired,getters:sp().object.isRequired,selected:sp().object,components:sp().object.isRequired,localizer:sp().object.isRequired,position:sp().object.isRequired,show:sp().func.isRequired,events:sp().array.isRequired,slotStart:sp().instanceOf(Date).isRequired,slotEnd:sp().instanceOf(Date),onSelect:sp().func,onDoubleClick:sp().func,onKeyPress:sp().func,handleDragStart:sp().func,style:sp().object,offset:sp().shape({x:sp().number,y:sp().number})};var yx=i().forwardRef(function(e,t){return i().createElement(xx,Object.assign({},e,{containerRef:t}))});function bx(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return Bh(r,e,t,{passive:!1})}function vx(e,t){return!!function(e,t){var r=t.clientX,n=t.clientY;return og(document.elementFromPoint(r,n),".rbc-event",e)}(e,t)}function wx(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}yx.propTypes={popupOffset:sp().oneOfType([sp().number,sp().shape({x:sp().number,y:sp().number})]),overlay:sp().shape({position:sp().object,events:sp().array,date:sp().instanceOf(Date),end:sp().instanceOf(Date)}),accessors:sp().object.isRequired,localizer:sp().object.isRequired,components:sp().object.isRequired,getters:sp().object.isRequired,selected:sp().object,handleSelectEvent:sp().func,handleDoubleClickEvent:sp().func,handleKeyPressEvent:sp().func,handleDragStart:sp().func,onHide:sp().func,overlayDisplay:sp().func};var jx=function(){return zf(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.global,s=void 0!==n&&n,a=r.longPressThreshold,o=void 0===a?250:a,i=r.validContainers,l=void 0===i?[]:i;Af(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=o,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=bx("touchmove",function(){},window),this._removeKeyDownListener=bx("keydown",this._keyListener),this._removeKeyUpListener=bx("keyup",this._keyListener),this._removeDropFromOutsideListener=bx("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=bx("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()},[{key:"on",value:function(e,t){var r=this._listeners[e]||(this._listeners[e]=[]);return r.push(t),{remove:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}},{key:"emit",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s;return(this._listeners[e]||[]).forEach(function(e){void 0===s&&(s=e.apply(void 0,r))}),s}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var t=this._selectRect;return!(!t||!this.selecting)&&Nx(t,kx(e))}},{key:"filter",value:function(e){return this._selectRect&&this.selecting?e.filter(this.isSelected,this):[]}},{key:"_addLongPressListener",value:function(e,t){var r=this,n=null,s=null,a=null,o=function(t){n=setTimeout(function(){l(),e(t)},r.longPressThreshold),s=bx("touchmove",function(){return l()}),a=bx("touchend",function(){return l()})},i=bx("touchstart",o),l=function(){n&&clearTimeout(n),s&&s(),a&&a(),n=null,s=null,a=null};return t&&o(t),function(){l(),i()}}},{key:"_addInitialEventListener",value:function(){var e=this,t=bx("mousedown",function(t){e._removeInitialEventListener(),e._handleInitialEvent(t),e._removeInitialEventListener=bx("mousedown",e._handleInitialEvent)}),r=bx("touchstart",function(t){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,t)});this._removeInitialEventListener=function(){t(),r()}}},{key:"_dropFromOutsideListener",value:function(e){var t=wx(e),r=t.pageX,n=t.pageY,s=t.clientX,a=t.clientY;this.emit("dropFromOutside",{x:r,y:n,clientX:s,clientY:a}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var t=wx(e),r=t.pageX,n=t.pageY,s=t.clientX,a=t.clientY;this.emit("dragOverFromOutside",{x:r,y:n,clientX:s,clientY:a}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(this._initialEvent=e,!this.isDetached){var t,r=wx(e),n=r.clientX,s=r.clientY,a=r.pageX,o=r.pageY,i=this.container();if(3!==e.which&&2!==e.button&&function(e,t,r){return!e||rm(e,document.elementFromPoint(t,r))}(i,n,s)){if(!this.globalMouse&&i&&!rm(i,e.target)){var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"object"!==Cf(e)&&(e={top:e,left:e,right:e,bottom:e}),e}(0),c=l.top,d=l.left,u=l.bottom,f=l.right;if(!Nx({top:(t=kx(i)).top-c,left:t.left-d,bottom:t.bottom+u,right:t.right+f},{top:o,left:a}))return}if(!1!==this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:a,y:o,clientX:n,clientY:s}))switch(e.type){case"mousedown":this._removeEndListener=bx("mouseup",this._handleTerminatingEvent),this._onEscListener=bx("keydown",this._handleTerminatingEvent),this._removeMoveListener=bx("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=bx("touchend",this._handleTerminatingEvent),this._removeMoveListener=bx("touchmove",this._handleMoveEvent)}}}}},{key:"_isWithinValidContainer",value:function(e){var t=e.target,r=this.validContainers;return!(r&&r.length&&t)||r.some(function(e){return!!t.closest(e)})}},{key:"_handleTerminatingEvent",value:function(e){var t=this.selecting,r=this._selectRect;if(!t&&e.type.includes("key")&&(e=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,e){var n=!this.container||rm(this.container(),e.target),s=this._isWithinValidContainer(e);return"Escape"!==e.key&&s?!t&&n?this._handleClickEvent(e):t?this.emit("select",r):this.emit("reset"):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var t=wx(e),r=t.pageX,n=t.pageY,s=t.clientX,a=t.clientY,o=(new Date).getTime();return this._lastClickData&&o-this._lastClickData.timestamp<250?(this._lastClickData=null,this.emit("doubleClick",{x:r,y:n,clientX:s,clientY:a})):(this._lastClickData={timestamp:o},this.emit("click",{x:r,y:n,clientX:s,clientY:a}))}},{key:"_handleMoveEvent",value:function(e){if(null!==this._initialEventData&&!this.isDetached){var t=this._initialEventData,r=t.x,n=t.y,s=wx(e),a=s.pageX,o=s.pageY,i=Math.abs(r-a),l=Math.abs(n-o),c=Math.min(a,r),d=Math.min(o,n),u=this.selecting,f=this.isClick(a,o);(!f||u||i||l)&&(u||f||this.emit("selectStart",this._initialEventData),f||(this.selecting=!0,this._selectRect={top:d,left:c,x:a,y:o,right:c+i,bottom:d+l},this.emit("selecting",this._selectRect)),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,t){var r=this._initialEventData,n=r.x,s=r.y;return!r.isTouch&&Math.abs(e-n)<=5&&Math.abs(t-s)<=5}}])}();function Nx(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=kx(e),s=n.top,a=n.left,o=n.right,i=void 0===o?a:o,l=n.bottom,c=void 0===l?s:l,d=kx(t),u=d.top,f=d.left,p=d.right,m=void 0===p?f:p,h=d.bottom;return!(c-r<u||s+r>(void 0===h?u:h)||i-r<f||a+r>m)}function kx(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+Cx("left"),n=t.top+Cx("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function Cx(e){return"left"===e?window.pageXOffset||document.body.scrollLeft||0:"top"===e?window.pageYOffset||document.body.scrollTop||0:void 0}var Sx=function(e){function t(e,r){var n;return Af(this,t),(n=If(this,t,[e,r])).state={selecting:!1},n.containerRef=(0,a.createRef)(),n}return $f(t,e),zf(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(e){!e.selectable&&this.props.selectable&&this._selectable(),e.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var e=this.props,t=e.range,r=e.getNow,n=e.getters,s=e.date,a=e.components.dateCellWrapper,o=e.localizer,l=this.state,c=l.selecting,d=l.startIdx,u=l.endIdx,f=r();return i().createElement("div",{className:"rbc-row-bg",ref:this.containerRef},t.map(function(e,r){var l=c&&r>=d&&r<=u,p=n.dayProp(e),m=p.className,h=p.style;return i().createElement(a,{key:r,value:e,range:t},i().createElement("div",{style:h,className:Vf("rbc-day-bg",m,l&&"rbc-selected-cell",o.isSameDate(e,f)&&"rbc-today",s&&o.neq(s,e,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var e=this,t=this.containerRef.current,r=this._selector=new jx(this.props.container,{longPressThreshold:this.props.longPressThreshold}),n=function(r,n){if(!vx(t,r)&&!function(e,t){return!!function(e,t){var r=t.clientX,n=t.clientY;return og(document.elementFromPoint(r,n),".rbc-show-more",e)}(e,t)}(t,r)){var s=kx(t),a=e.props,o=a.range,i=a.rtl;if(function(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}(s,r)){var l=mx(s,r.x,i,o.length);e._selectSlot({startIdx:l,endIdx:l,action:n,box:r})}}e._initial={},e.setState({selecting:!1})};r.on("selecting",function(n){var s=e.props,a=s.range,o=s.rtl,i=-1,l=-1;if(e.state.selecting||(lx(e.props.onSelectStart,[n]),e._initial={x:n.x,y:n.y}),r.isSelected(t)){var c=kx(t),d=function(e,t,r,n,s){var a=-1,o=-1,i=n-1,l=px(t,n),c=mx(t,r.x,s,n),d=t.top<r.y&&t.bottom>r.y,u=t.top<e.y&&t.bottom>e.y,f=e.y>t.bottom,p=t.top>e.y;return r.top<t.top&&r.bottom>t.bottom&&(a=0,o=i),d&&(p?(a=0,o=c):f&&(a=c,o=i)),u&&(a=o=s?i-Math.floor((e.x-t.left)/l):Math.floor((e.x-t.left)/l),d?c<a?a=c:o=c:e.y<r.y?o=i:a=0),{startIdx:a,endIdx:o}}(e._initial,c,n,a.length,o);i=d.startIdx,l=d.endIdx}e.setState({selecting:!0,startIdx:i,endIdx:l})}),r.on("beforeSelect",function(t){if("ignoreEvents"===e.props.selectable)return!vx(e.containerRef.current,t)}),r.on("click",function(e){return n(e,"click")}),r.on("doubleClick",function(e){return n(e,"doubleClick")}),r.on("select",function(t){e._selectSlot(Mf(Mf({},e.state),{},{action:"select",bounds:t})),e._initial={},e.setState({selecting:!1}),lx(e.props.onSelectEnd,[e.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(e){var t=e.endIdx,r=e.startIdx,n=e.action,s=e.bounds,a=e.box;-1!==t&&-1!==r&&this.props.onSelectSlot&&this.props.onSelectSlot({start:r,end:t,action:n,bounds:s,box:a,resourceId:this.props.resourceId})}}])}(i().Component),Ex=(sp().object.isRequired,sp().object,sp().bool,sp().object.isRequired,sp().object.isRequired,sp().object.isRequired,sp().object.isRequired,sp().func,sp().func,sp().func,{segments:[],selected:{}}),Ox=function(e,t){var r=e.selected;e.isAllDay;var n=e.accessors,s=e.getters,a=e.onSelect,o=e.onDoubleClick,l=e.onKeyPress,c=e.localizer,d=e.slotMetrics,u=e.components,f=e.resizable,p=d.continuesPrior(t),m=d.continuesAfter(t);return i().createElement(ux,{event:t,getters:s,localizer:c,accessors:n,components:u,onSelect:a,onDoubleClick:o,onKeyPress:l,continuesPrior:p,continuesAfter:m,slotStart:d.first,slotEnd:d.last,selected:fx(t,r),resizable:f})},Mx=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",s=Math.abs(t)/e*100+"%";return i().createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:s,flexBasis:s,maxWidth:s}},n)},Tx=function(e){function t(){return Af(this,t),If(this,t,arguments)}return $f(t,e),zf(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.segments,n=t.slotMetrics.slots,s=t.className,a=1;return i().createElement("div",{className:Vf(s,"rbc-row")},r.reduce(function(t,r,s){var o=r.event,i=r.left,l=r.right,c=r.span,d="_lvl_"+s,u=i-a,f=Ox(e.props,o);return u&&t.push(Mx(n,u,"".concat(d,"_gap"))),t.push(Mx(n,c,d,f)),a=l+1,t},[]))}}])}(i().Component);function Px(e){var t=e.dateRange,r=e.unit,n=void 0===r?"day":r,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,n)}}function Ax(e){var t,r,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,a=[],o=[];for(t=0;t<e.length;t++){for(n=e[t],r=0;r<a.length&&zx(n,a[r]);r++);r>=s?o.push(n):(a[r]||(a[r]=[])).push(n)}for(t=0;t<a.length;t++)a[t].sort(function(e,t){return e.left-t.left});return{levels:a,extra:o}}function qx(e,t,r,n,s){var a={start:n.start(e),end:n.end(e)},o={start:t,end:r};return s.inEventRange({event:a,range:o})}function zx(e,t){return t.some(function(t){return t.left<=e.right&&t.right>=e.left})}function Dx(e,t,r,n){var s={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},a={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:s,evtB:a})}Tx.defaultProps=Mf({},Ex);var Lx=function(e,t){return e.left<=t&&e.right>=t},Ix=function(e,t){return e.filter(function(e){return Lx(e,t)}).map(function(e){return e.event})},Rx=function(e){function t(){return Af(this,t),If(this,t,arguments)}return $f(t,e),zf(t,[{key:"render",value:function(){for(var e=this.props,t=e.segments,r=e.slotMetrics.slots,n=Ax(t).levels[0],s=1,a=1,o=[];s<=r;){var l="_lvl_"+s,c=n.filter(function(e){return Lx(e,s)})[0]||{},d=c.event,u=c.left,f=c.right,p=c.span;if(d){var m=Math.max(0,u-a);if(this.canRenderSlotEvent(u,p)){var h=Ox(this.props,d);m&&o.push(Mx(r,m,l+"_gap")),o.push(Mx(r,p,l,h)),a=s=f+1}else m&&o.push(Mx(r,m,l+"_gap")),o.push(Mx(r,1,l,this.renderShowMore(t,s))),a=s+=1}else{if(this.getHiddenEventsForSlot(t,s).length>0){var g=s-a;g&&o.push(Mx(r,g,l+"_gap")),o.push(Mx(r,1,l,this.renderShowMore(t,s))),a=s+=1;continue}s++}}return i().createElement("div",{className:"rbc-row"},o)}},{key:"getHiddenEventsForSlot",value:function(e,t){var r=Ix(e,t),n=Ax(e).levels[0].filter(function(e){return Lx(e,t)}).map(function(e){return e.event});return r.filter(function(e){return!n.some(function(t){return t===e})})}},{key:"canRenderSlotEvent",value:function(e,t){var r=this.props.segments;return dg()(e,e+t).every(function(e){return 1===Ix(r,e).length})}},{key:"renderShowMore",value:function(e,t){var r=this,n=this.props,s=n.localizer,a=n.slotMetrics,o=n.components,l=a.getEventsForSlot(t),c=Ix(e,t),d=c.length;if(null!=o&&o.showMore){var u=o.showMore,f=a.getDateForSlot(t-1);return!!d&&i().createElement(u,{localizer:s,slotDate:f,slot:t,count:d,events:l,remainingEvents:c})}return!!d&&i().createElement("button",{type:"button",key:"sm_"+t,className:Vf("rbc-button-link","rbc-show-more"),onClick:function(e){return r.showMore(t,e)}},s.messages.showMore(d,c,l))}},{key:"showMore",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.props.onShowMore(e,t.target)}}])}(i().Component);Rx.defaultProps=Mf({},Ex);var $x=function(e){var t=e.children;return i().createElement("div",{className:"rbc-row-content-scroll-container"},t)},Fx=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function Bx(){return mg(function(e){for(var t=e.range,r=e.events,n=e.maxRows,s=e.minRows,a=e.accessors,o=e.localizer,i=Px({dateRange:t,localizer:o}),l=i.first,c=i.last,d=r.map(function(e){return function(e,t,r,n){var s=Px({dateRange:t,localizer:n}),a=s.first,o=s.last,i=n.diff(a,o,"day"),l=n.max(n.startOf(r.start(e),"day"),a),c=n.min(n.ceil(r.end(e),"day"),o),d=lg()(t,function(e){return n.isSameDate(e,l)}),u=n.diff(l,c,"day");return u=Math.min(u,i),{event:e,span:u=Math.max(u-n.segmentOffset,1),left:d+1,right:Math.max(d+u,1)}}(e,t,a,o)}),u=Ax(d,Math.max(n-1,1)),f=u.levels,p=u.extra,m=p.length>0?s-1:s;f.length<m;)f.push([]);return{first:l,last:c,levels:f,extra:p,range:t,slots:t.length,clone:function(t){return Bx()(Mf(Mf({},e),t))},getDateForSlot:function(e){return t[e]},getSlotForDate:function(e){return t.find(function(t){return o.isSameDate(t,e)})},getEventsForSlot:function(e){return d.filter(function(t){return function(e,t){return e.left<=t&&e.right>=t}(t,e)}).map(function(e){return e.event})},continuesPrior:function(e){return o.continuesPrior(a.start(e),l)},continuesAfter:function(e){var t=a.start(e),r=a.end(e);return o.continuesAfter(t,r,c)}}},Fx)}var Ux=function(e){function t(){var e;Af(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=If(this,t,[].concat(n))).handleSelectSlot=function(t){var r=e.props,n=r.range;(0,r.onSelectSlot)(n.slice(t.start,t.end+1),t)},e.handleShowMore=function(t,r){var n,s,a=e.props,o=a.range,i=a.onShowMore,l=e.slotMetrics(e.props),c=(n=e.containerRef.current,sg(n.querySelectorAll(".rbc-row-bg")))[0];c&&(s=c.children[t-1]),i(l.getEventsForSlot(t),o[t-1],s,t,r)},e.getContainer=function(){var t=e.props.container;return t?t():e.containerRef.current},e.renderHeadingCell=function(t,r){var n=e.props,s=n.renderHeader,a=n.getNow,o=n.localizer;return s({date:t,key:"header_".concat(r),className:Vf("rbc-date-cell",o.isSameDate(t,a())&&"rbc-now")})},e.renderDummy=function(){var t=e.props,r=t.className,n=t.range,s=t.renderHeader,a=t.showAllEvents;return i().createElement("div",{className:r,ref:e.containerRef},i().createElement("div",{className:Vf("rbc-row-content",a&&"rbc-row-content-scrollable")},s&&i().createElement("div",{className:"rbc-row",ref:e.headingRowRef},n.map(e.renderHeadingCell)),i().createElement("div",{className:"rbc-row",ref:e.eventRowRef},i().createElement("div",{className:"rbc-row-segment"},i().createElement("div",{className:"rbc-event"},i().createElement("div",{className:"rbc-event-content"},""))))))},e.containerRef=(0,a.createRef)(),e.headingRowRef=(0,a.createRef)(),e.eventRowRef=(0,a.createRef)(),e.slotMetrics=Bx(),e}return $f(t,e),zf(t,[{key:"getRowLimit",value:function(){var e,t=rg(this.eventRowRef.current),r=null!==(e=this.headingRowRef)&&void 0!==e&&e.current?rg(this.headingRowRef.current):0,n=rg(this.containerRef.current)-r;return Math.max(Math.floor(n/t),1)}},{key:"render",value:function(){var e=this.props,t=e.date,r=e.rtl,n=e.range,s=e.className,a=e.selected,o=e.selectable,l=e.renderForMeasure,c=e.accessors,d=e.getters,u=e.components,f=e.getNow,p=e.renderHeader,m=e.onSelect,h=e.localizer,g=e.onSelectStart,x=e.onSelectEnd,y=e.onDoubleClick,b=e.onKeyPress,v=e.resourceId,w=e.longPressThreshold,j=e.isAllDay,N=e.resizable,k=e.showAllEvents;if(l)return this.renderDummy();var _=this.slotMetrics(this.props),C=_.levels,S=_.extra,E=k?$x:Mg,O=u.weekWrapper,M={selected:a,accessors:c,getters:d,localizer:h,components:u,onSelect:m,onDoubleClick:y,onKeyPress:b,resourceId:v,slotMetrics:_,resizable:N};return i().createElement("div",{className:s,role:"rowgroup",ref:this.containerRef},i().createElement(Sx,{localizer:h,date:t,getNow:f,rtl:r,range:n,selectable:o,container:this.getContainer,getters:d,onSelectStart:g,onSelectEnd:x,onSelectSlot:this.handleSelectSlot,components:u,longPressThreshold:w,resourceId:v}),i().createElement("div",{className:Vf("rbc-row-content",k&&"rbc-row-content-scrollable"),role:"row"},p&&i().createElement("div",{className:"rbc-row ",ref:this.headingRowRef},n.map(this.renderHeadingCell)),i().createElement(E,null,i().createElement(O,Object.assign({isAllDay:j},M,{rtl:this.props.rtl}),C.map(function(e,t){return i().createElement(Tx,Object.assign({key:t,segments:e},M))}),!!S.length&&i().createElement(Rx,Object.assign({segments:S,onShowMore:this.handleShowMore},M))))))}}])}(i().Component);Ux.defaultProps={minRows:0,maxRows:1/0};var Hx=function(e){var t=e.label;return i().createElement("span",{role:"columnheader","aria-sort":"none"},t)},Wx=function(e){var t=e.label,r=e.drilldownView,n=e.onDrillDown;return r?i().createElement("button",{type:"button",className:"rbc-button-link",onClick:n},t):i().createElement("span",null,t)},Qx=["date","className"],Vx=function(e){function t(){var e;Af(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=If(this,t,[].concat(n))).getContainer=function(){return e.containerRef.current},e.renderWeek=function(t,r){var n=e.props,s=n.events,a=n.components,o=n.selectable,l=n.getNow,c=n.selected,d=n.date,u=n.localizer,f=n.longPressThreshold,p=n.accessors,m=n.getters,h=n.showAllEvents,g=e.state,x=g.needLimitMeasure,y=g.rowLimit,b=function(e,t,r,n,s){return e.filter(function(e){return qx(e,t,r,n,s)})}(Vp(s),t[0],t[t.length-1],p,u),v=function(e,t,r){var n=Vp(e),s=[],a=[];n.forEach(function(e){var n=t.start(e),o=t.end(e);r.daySpan(n,o)>1?s.push(e):a.push(e)});var o=s.sort(function(e,n){return Dx(e,n,t,r)}),i=a.sort(function(e,n){return Dx(e,n,t,r)});return[].concat(Vp(o),Vp(i))}(b,p,u);return i().createElement(Ux,{key:r,ref:0===r?e.slotRowRef:void 0,container:e.getContainer,className:"rbc-month-row",getNow:l,date:d,range:t,events:v,maxRows:h?1/0:y,selected:c,selectable:o,components:a,accessors:p,getters:m,localizer:u,renderHeader:e.readerDateHeading,renderForMeasure:x,onShowMore:e.handleShowMore,onSelect:e.handleSelectEvent,onDoubleClick:e.handleDoubleClickEvent,onKeyPress:e.handleKeyPressEvent,onSelectSlot:e.handleSelectSlot,longPressThreshold:f,rtl:e.props.rtl,resizable:e.props.resizable,showAllEvents:h})},e.readerDateHeading=function(t){var r=t.date,n=t.className,s=Pf(t,Qx),a=e.props,o=a.date,l=a.getDrilldownView,c=a.localizer,d=c.neq(o,r,"month"),u=c.isSameDate(r,o),f=l(r),p=c.format(r,"dateFormat"),m=e.props.components.dateHeader||Wx;return i().createElement("div",Object.assign({},s,{className:Vf(n,d&&"rbc-off-range",u&&"rbc-current"),role:"cell"}),i().createElement(m,{label:p,date:r,drilldownView:f,isOffRange:d,onDrillDown:function(t){return e.handleHeadingClick(r,f,t)}}))},e.handleSelectSlot=function(t,r){e._pendingSelection=e._pendingSelection.concat(t),clearTimeout(e._selectTimer),e._selectTimer=setTimeout(function(){return e.selectDates(r)})},e.handleHeadingClick=function(t,r,n){n.preventDefault(),e.clearSelection(),lx(e.props.onDrillDown,[t,r])},e.handleSelectEvent=function(){e.clearSelection();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onSelectEvent,r)},e.handleDoubleClickEvent=function(){e.clearSelection();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onDoubleClickEvent,r)},e.handleKeyPressEvent=function(){e.clearSelection();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onKeyPressEvent,r)},e.handleShowMore=function(t,r,n,s,a){var o=e.props,i=o.popup,l=o.onDrillDown,c=o.onShowMore,d=o.getDrilldownView,u=o.doShowMoreDrillDown;if(e.clearSelection(),i){var f=cm(n,e.containerRef.current);e.setState({overlay:{date:r,events:t,position:f,target:a}})}else u&&lx(l,[r,d(r)||zg.DAY]);lx(c,[t,r,s])},e.overlayDisplay=function(){e.setState({overlay:null})},e.state={rowLimit:5,needLimitMeasure:!0,date:null},e.containerRef=(0,a.createRef)(),e.slotRowRef=(0,a.createRef)(),e._bgRows=[],e._pendingSelection=[],e}return $f(t,e),zf(t,[{key:"componentDidMount",value:function(){var e,t=this;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){e||gm(function(){e=!1,t.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var e=this.props,t=e.date,r=e.localizer,n=e.className,s=r.visibleDays(t,r),a=Yp()(s,7);return this._weekCount=a.length,i().createElement("div",{className:Vf("rbc-month-view",n),role:"table","aria-label":"Month View",ref:this.containerRef},i().createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(a[0])),a.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(e){var t=this.props,r=t.localizer,n=t.components,s=e[0],a=e[e.length-1],o=n.header||Hx;return r.range(s,a,"day").map(function(e,t){return i().createElement("div",{key:"header_"+t,className:"rbc-header"},i().createElement(o,{date:e,localizer:r,label:r.format(e,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var e,t,r=this,n=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},s=this.props,a=s.accessors,o=s.localizer,l=s.components,c=s.getters,d=s.selected,u=s.popupOffset,f=s.handleDragStart;return i().createElement(yx,{overlay:n,accessors:a,localizer:o,components:l,getters:c,selected:d,popupOffset:u,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:f,show:!!n.position,overlayDisplay:this.overlayDisplay,onHide:function(){return r.setState({overlay:null})}})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(e){var t=this._pendingSelection.slice();this._pendingSelection=[],t.sort(function(e,t){return+e-+t});var r=new Date(t[0]),n=new Date(t[t.length-1]);n.setDate(t[t.length-1].getDate()+1),lx(this.props.onSelectSlot,{slots:t,start:r,end:n,action:e.action,bounds:e.bounds,box:e.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.date;return{date:r,needLimitMeasure:e.localizer.neq(r,t.date,"month")}}}])}(i().Component);Vx.range=function(e,t){var r=t.localizer;return{start:r.firstVisibleDay(e,r),end:r.lastVisibleDay(e,r)}},Vx.navigate=function(e,t,r){var n=r.localizer;switch(t){case Tg:return n.add(e,-1,"month");case Pg:return n.add(e,1,"month");default:return e}},Vx.title=function(e,t){return t.localizer.format(e,"monthHeaderFormat")};var Kx=function(e){var t=e.min,r=e.max,n=e.step,s=e.slots,a=e.localizer;return"".concat(+a.startOf(t,"minutes"))+"".concat(+a.startOf(r,"minutes"))+"".concat(n,"-").concat(s)};function Yx(e){for(var t=e.min,r=e.max,n=e.step,s=e.timeslots,a=e.localizer,o=Kx({start:t,end:r,step:n,timeslots:s,localizer:a}),i=1+a.getTotalMin(t,r),l=a.getMinutesFromMidnight(t),c=Math.ceil((i-1)/(n*s)),d=c*s,u=new Array(c),f=new Array(d),p=0;p<c;p++){u[p]=new Array(s);for(var m=0;m<s;m++){var h=p*s+m,g=h*n;f[h]=u[p][m]=a.getSlotDate(t,l,g)}}var x=f.length*n;function y(e){var r=a.diff(t,e,"minutes")+a.getDstOffset(t,e);return Math.min(r,i)}return f.push(a.getSlotDate(t,l,x)),{groups:u,update:function(e){return Kx(e)!==o?Yx(e):this},dateIsInGroup:function(e,t){var n=u[t+1];return a.inRange(e,u[t][0],n?n[0]:r,"minutes")},nextSlot:function(e){var t=f[Math.min(f.findIndex(function(t){return t===e||a.eq(t,e)})+1,f.length-1)];return a.eq(t,e)&&(t=a.add(e,n,"minutes")),t},closestSlotToPosition:function(e){var t=Math.min(f.length-1,Math.max(0,Math.floor(e*d)));return f[t]},closestSlotFromPoint:function(e,t){var r=Math.abs(t.top-t.bottom);return this.closestSlotToPosition((e.y-t.top)/r)},closestSlotFromDate:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(a.lt(e,t,"minutes"))return f[0];if(a.gt(e,r,"minutes"))return f[f.length-1];var o=a.diff(t,e,"minutes");return f[(o-o%n)/n+s]},startsBeforeDay:function(e){return a.lt(e,t,"day")},startsAfterDay:function(e){return a.gt(e,r,"day")},startsBefore:function(e){return a.lt(a.merge(t,e),t,"minutes")},startsAfter:function(e){return a.gt(a.merge(r,e),r,"minutes")},getRange:function(e,s,o,i){o||(e=a.min(r,a.max(t,e))),i||(s=a.min(r,a.max(t,s)));var l=y(e),c=y(s),u=c>n*d&&!a.eq(r,s)?(l-n)/(n*d)*100:l/(n*d)*100;return{top:u,height:c/(n*d)*100-u,start:y(e),startDate:e,end:y(s),endDate:s}},getCurrentTimePosition:function(e){return y(e)/(n*d)*100}}}var Gx=function(){return zf(function e(t,r){var n=r.accessors,s=r.slotMetrics;Af(this,e);var a=s.getRange(n.start(t),n.end(t)),o=a.start,i=a.startDate,l=a.end,c=a.endDate,d=a.top,u=a.height;this.start=o,this.end=l,this.startMs=+i,this.endMs=+c,this.top=d,this.height=u,this.data=t},[{key:"_width",get:function(){if(this.rows){var e=this.rows.reduce(function(e,t){return Math.max(e,t.leaves.length+1)},0)+1;return 100/e}return this.leaves?(100-this.container._width)/(this.leaves.length+1):this.row._width}},{key:"width",get:function(){var e=this._width,t=Math.min(100,1.7*this._width);if(this.rows)return t;if(this.leaves)return this.leaves.length>0?t:e;var r=this.row.leaves;return r.indexOf(this)===r.length-1?e:t}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var e=this.row,t=e.leaves,r=e.xOffset,n=e._width;return r+(t.indexOf(this)+1)*n}}])}();function Xx(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function Zx(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,s=e.accessors,a=function(e){for(var t=yg()(e,["startMs",function(e){return-e.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var s=0;s<t.length;s++){var a=t[s];if(!(n.endMs>a.startMs)){if(s>0){var o=t.splice(s,1)[0];r.push(o)}break}}}return r}(t.map(function(e){return new Gx(e,{slotMetrics:n,accessors:s})})),o=[],i=function(){var e=a[l],t=o.find(function(t){return t.end>e.start||Math.abs(e.start-t.start)<r});if(!t)return e.rows=[],o.push(e),1;e.container=t;for(var n=null,s=t.rows.length-1;!n&&s>=0;s--)Xx(t.rows[s],e,r)&&(n=t.rows[s]);n?(n.leaves.push(e),e.row=n):(e.leaves=[],t.rows.push(e))},l=0;l<a.length;l++)i();return a.map(function(e){return{event:e.data,style:{top:e.top,height:e.height,width:e.width,xOffset:Math.max(0,e.xOffset)}}})}function Jx(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var s=Jx(e.friends[n],t,r);t=t>s?t:s}return t}var ey={overlap:Zx,"no-overlap":function(e){var t=Zx({events:e.events,minimumStartDifference:e.minimumStartDifference,slotMetrics:e.slotMetrics,accessors:e.accessors});t.sort(function(e,t){return e=e.style,t=t.style,e.top!==t.top?e.top>t.top?1:-1:e.height!==t.height?e.top+e.height<t.top+t.height?1:-1:0});for(var r=0;r<t.length;++r)t[r].friends=[],delete t[r].style.left,delete t[r].style.left,delete t[r].idx,delete t[r].size;for(var n=0;n<t.length-1;++n)for(var s=t[n],a=s.style.top,o=s.style.top+s.style.height,i=n+1;i<t.length;++i){var l=t[i],c=l.style.top,d=l.style.top+l.style.height;(c>=a&&d<=o||d>a&&d<=o||c>=a&&c<o)&&(s.friends.push(l),l.friends.push(s))}for(var u=0;u<t.length;++u){for(var f=t[u],p=[],m=0;m<100;++m)p.push(1);for(var h=0;h<f.friends.length;++h)void 0!==f.friends[h].idx&&(p[f.friends[h].idx]=0);f.idx=p.indexOf(1)}for(var g=0;g<t.length;++g){var x;if(!t[g].size){var y=[];x=100/(Jx(t[g],0,y)+1),t[g].size=x;for(var b=0;b<y.length;++b)y[b].size=x}}for(var v=0;v<t.length;++v){var w=t[v];w.style.left=w.idx*w.size;for(var j=0,N=0;N<w.friends.length;++N){var k=w.friends[N].idx;j=j>k?j:k}j<=w.idx&&(w.size=100-w.idx*w.size);var _=0===w.idx?0:3;w.style.width="calc(".concat(w.size,"% - ").concat(_,"px)"),w.style.height="calc(".concat(w.style.height,"% - 2px)"),w.style.xOffset="calc(".concat(w.style.left,"% + ").concat(_,"px)")}return t}},ty=function(e){function t(){return Af(this,t),If(this,t,arguments)}return $f(t,e),zf(t,[{key:"render",value:function(){var e=this.props,t=e.renderSlot,r=e.resource,n=e.group,s=e.getters,a=e.components,o=(void 0===a?{}:a).timeSlotWrapper,l=void 0===o?Mg:o,c=s?s.slotGroupProp(n):{};return i().createElement("div",Object.assign({className:"rbc-timeslot-group"},c),n.map(function(e,n){var a=s?s.slotProp(e,r):{};return i().createElement(l,{key:n,value:e,resource:r},i().createElement("div",Object.assign({},a,{className:Vf("rbc-time-slot",a.className)}),t&&t(e,n)))}))}}])}(a.Component);function ry(e){return"string"==typeof e?e:e+"%"}function ny(e){var t=e.style,r=e.className,n=e.event,s=e.accessors,a=e.rtl,o=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,f=e.onClick,p=e.onDoubleClick,m=e.isBackgroundEvent,h=e.onKeyPress,g=e.components,x=g.event,y=g.eventWrapper,b=s.title(n),v=s.tooltip(n),w=s.end(n),j=s.start(n),N=u.eventProp(n,j,w,o),k=[i().createElement("div",{key:"1",className:"rbc-event-label"},l),i().createElement("div",{key:"2",className:"rbc-event-content"},x?i().createElement(x,{event:n,title:b}):b)],_=t.height,C=t.top,S=t.width,E=t.xOffset,O=Mf(Mf({},N.style),{},Ef({top:ry(C),height:ry(_),width:ry(S)},a?"right":"left",ry(E)));return i().createElement(y,Object.assign({type:"time"},e),i().createElement("div",{role:"button",tabIndex:0,onClick:f,onDoubleClick:p,style:O,onKeyDown:h,title:v?("string"==typeof l?l+": ":"")+v:void 0,className:Vf(m?"rbc-background-event":"rbc-event",r,N.className,{"rbc-selected":o,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},k))}var sy=function(e){var t=e.children,r=e.className,n=e.style,s=e.innerRef;return i().createElement("div",{className:r,style:n,ref:s},t)},ay=i().forwardRef(function(e,t){return i().createElement(sy,Object.assign({},e,{innerRef:t}))}),oy=["dayProp"],iy=["eventContainerWrapper","timeIndicatorWrapper"],ly=function(e){function t(){var e;Af(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=If(this,t,[].concat(n))).state={selecting:!1,timeIndicatorPosition:null},e.intervalTriggered=!1,e.renderEvents=function(t){var r=t.events,n=t.isBackgroundEvent,s=e.props,a=s.rtl,o=s.selected,l=s.accessors,c=s.localizer,d=s.getters,u=s.components,f=s.step,p=s.timeslots,m=s.dayLayoutAlgorithm,h=s.resizable,g=e.slotMetrics,x=c.messages,y=function(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t,r=e.dayLayoutAlgorithm,n=r;return r in ey&&(n=ey[r]),(t=n)&&t.constructor&&t.call&&t.apply?n.apply(this,arguments):[]}({events:r,accessors:l,slotMetrics:g,minimumStartDifference:Math.ceil(f*p/2),dayLayoutAlgorithm:m});return y.map(function(t,r){var s,f,p=t.event,m=t.style,y=l.end(p),b=l.start(p),v=null!==(s=l.eventId(p))&&void 0!==s?s:"evt_"+r,w="eventTimeRangeFormat",j=g.startsBeforeDay(b),N=g.startsAfterDay(y);j?w="eventTimeRangeEndFormat":N&&(w="eventTimeRangeStartFormat"),f=j&&N?x.allDay:c.format({start:b,end:y},w);var k=j||g.startsBefore(b),_=N||g.startsAfter(y);return i().createElement(ny,{style:m,event:p,label:f,key:v,getters:d,rtl:a,components:u,continuesPrior:k,continuesAfter:_,accessors:l,resource:e.props.resource,selected:fx(p,o),onClick:function(t){return e._select(Mf(Mf(Mf({},p),e.props.resource&&{sourceResource:e.props.resource}),n&&{isBackgroundEvent:!0}),t)},onDoubleClick:function(t){return e._doubleClick(p,t)},isBackgroundEvent:n,onKeyPress:function(t){return e._keyPress(p,t)},resizable:h})})},e._selectable=function(){var t=e.containerRef.current,r=e.props,n=r.longPressThreshold,s=r.localizer,a=e._selector=new jx(function(){return t},{longPressThreshold:n}),o=function(t){var r=e.props.onSelecting,n=e.state||{},a=i(t),o=a.startDate,l=a.endDate;r&&(s.eq(n.startDate,o,"minutes")&&s.eq(n.endDate,l,"minutes")||!1===r({start:o,end:l,resourceId:e.props.resource}))||e.state.start===a.start&&e.state.end===a.end&&e.state.selecting===a.selecting||e.setState(a)},i=function(r){var n=e.slotMetrics.closestSlotFromPoint(r,kx(t));e.state.selecting||(e._initialSlot=n);var a=e._initialSlot;s.lte(a,n)?n=e.slotMetrics.nextSlot(n):s.gt(a,n)&&(a=e.slotMetrics.nextSlot(a));var o=e.slotMetrics.getRange(s.min(a,n),s.max(a,n));return Mf(Mf({},o),{},{selecting:!0,top:"".concat(o.top,"%"),height:"".concat(o.height,"%")})},l=function(t,r){if(!vx(e.containerRef.current,t)){var n=i(t),s=n.startDate,a=n.endDate;e._selectSlot({startDate:s,endDate:a,action:r,box:t})}e.setState({selecting:!1})};a.on("selecting",o),a.on("selectStart",o),a.on("beforeSelect",function(t){if("ignoreEvents"===e.props.selectable)return!vx(e.containerRef.current,t)}),a.on("click",function(e){return l(e,"click")}),a.on("doubleClick",function(e){return l(e,"doubleClick")}),a.on("select",function(t){e.state.selecting&&(e._selectSlot(Mf(Mf({},e.state),{},{action:"select",bounds:t})),e.setState({selecting:!1}))}),a.on("reset",function(){e.state.selecting&&e.setState({selecting:!1})})},e._teardownSelectable=function(){e._selector&&(e._selector.teardown(),e._selector=null)},e._selectSlot=function(t){for(var r=t.startDate,n=t.endDate,s=t.action,a=t.bounds,o=t.box,i=r,l=[];e.props.localizer.lte(i,n);)l.push(i),i=new Date(+i+60*e.props.step*1e3);lx(e.props.onSelectSlot,{slots:l,start:r,end:n,resourceId:e.props.resource,action:s,bounds:a,box:o})},e._select=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onSelectEvent,r)},e._doubleClick=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onDoubleClickEvent,r)},e._keyPress=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onKeyPressEvent,r)},e.slotMetrics=Yx(e.props),e.containerRef=(0,a.createRef)(),e}return $f(t,e),zf(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(e,t){this.props.selectable&&!e.selectable&&this._selectable(),!this.props.selectable&&e.selectable&&this._teardownSelectable();var r=this.props,n=r.getNow,s=r.isNow,a=r.localizer,o=r.date,i=r.min,l=r.max,c=a.neq(e.getNow(),n(),"minutes");if(e.isNow!==s||c){if(this.clearTimeIndicatorInterval(),s){var d=!c&&a.eq(e.date,o,"minutes")&&t.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(d)}}else s&&(a.neq(e.min,i,"minutes")||a.neq(e.max,l,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalTriggered||t||this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){e.intervalTriggered=!0,e.positionTimeIndicator(),e.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var e=this.props,t=e.min,r=e.max,n=(0,e.getNow)();if(n>=t&&n<=r){var s=this.slotMetrics.getCurrentTimePosition(n);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:s})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var e=this.props,t=e.date,r=e.max,n=e.rtl,s=e.isNow,a=e.resource,o=e.accessors,l=e.localizer,c=e.getters,d=c.dayProp,u=Pf(c,oy),f=e.components,p=f.eventContainerWrapper,m=f.timeIndicatorWrapper,h=Pf(f,iy);this.slotMetrics=this.slotMetrics.update(this.props);var g=this.slotMetrics,x=this.state,y=x.selecting,b=x.top,v=x.height,w={start:x.startDate,end:x.endDate},j=d(r,a),N=j.className,k=j.style,_={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},C=h.dayColumnWrapper||ay;return i().createElement(C,{ref:this.containerRef,date:t,style:k,className:Vf(N,"rbc-day-slot","rbc-time-column",s&&"rbc-now",s&&"rbc-today",y&&"rbc-slot-selecting"),slotMetrics:g,resource:a},g.groups.map(function(e,t){return i().createElement(ty,{key:t,group:e,resource:a,getters:u,components:h})}),i().createElement(p,{localizer:l,resource:a,accessors:o,getters:u,components:h,slotMetrics:g},i().createElement("div",{className:Vf("rbc-events-container",n&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),y&&i().createElement("div",{className:"rbc-slot-selection",style:{top:b,height:v}},i().createElement("span",null,l.format(w,"selectRangeFormat"))),s&&this.intervalTriggered&&i().createElement(m,_,i().createElement("div",_)))}}])}(i().Component);ly.defaultProps={dragThroughEvents:!0,timeslots:2};var cy=function(e){var t=e.label;return i().createElement(i().Fragment,null,t)},dy=function(e){function t(){var e;Af(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=If(this,t,[].concat(n))).handleHeaderClick=function(t,r,n){n.preventDefault(),lx(e.props.onDrillDown,[t,r])},e.renderRow=function(t){var r=e.props,n=r.events,s=r.rtl,a=r.selectable,o=r.getNow,l=r.range,c=r.getters,d=r.localizer,u=r.accessors,f=r.components,p=r.resizable,m=u.resourceId(t),h=t?n.filter(function(e){return u.resource(e)===m}):n;return i().createElement(Ux,{isAllDay:!0,rtl:s,getNow:o,minRows:2,maxRows:e.props.allDayMaxRows+1,range:l,events:h,resourceId:m,className:"rbc-allday-cell",selectable:a,selected:e.props.selected,components:f,accessors:u,getters:c,localizer:d,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyPress:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:p})},e}return $f(t,e),zf(t,[{key:"renderHeaderCells",value:function(e){var t=this,r=this.props,n=r.localizer,s=r.getDrilldownView,a=r.getNow,o=r.getters.dayProp,l=r.components.header,c=void 0===l?Hx:l,d=a();return e.map(function(e,r){var a=s(e),l=n.format(e,"dayFormat"),u=o(e),f=u.className,p=u.style,m=i().createElement(c,{date:e,label:l,localizer:n});return i().createElement("div",{key:r,style:p,className:Vf("rbc-header",f,n.isSameDate(e,d)&&"rbc-today")},a?i().createElement("button",{type:"button",className:"rbc-button-link",onClick:function(r){return t.handleHeaderClick(e,a,r)}},m):i().createElement("span",null,m))})}},{key:"render",value:function(){var e=this,t=this.props,r=t.width,n=t.rtl,s=t.resources,a=t.range,o=t.events,l=t.getNow,c=t.accessors,d=t.selectable,u=t.components,f=t.getters,p=t.scrollRef,m=t.localizer,h=t.isOverflowing,g=t.components,x=g.timeGutterHeader,y=g.resourceHeader,b=void 0===y?cy:y,v=t.resizable,w={};h&&(w[n?"marginLeft":"marginRight"]="".concat(bg()-1,"px"));var j=s.groupEvents(o);return i().createElement("div",{style:w,ref:p,className:Vf("rbc-time-header",h&&"rbc-overflowing")},i().createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:r,minWidth:r,maxWidth:r}},x&&i().createElement(x,null)),s.map(function(t,r){var s=Wf(t,2),o=s[0],p=s[1];return i().createElement("div",{className:"rbc-time-header-content",key:o||r},p&&i().createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(r)},i().createElement("div",{className:"rbc-header"},i().createElement(b,{index:r,label:c.resourceTitle(p),resource:p}))),i().createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},e.renderHeaderCells(a)),i().createElement(Ux,{isAllDay:!0,rtl:n,getNow:l,minRows:2,maxRows:e.props.allDayMaxRows+1,range:a,events:j.get(o)||[],resourceId:p&&o,className:"rbc-allday-cell",selectable:d,selected:e.props.selected,components:u,accessors:c,getters:f,localizer:m,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyDown:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:v}))}))}}])}(i().Component),uy=function(e){function t(){var e;Af(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=If(this,t,[].concat(n))).handleHeaderClick=function(t,r,n){n.preventDefault(),lx(e.props.onDrillDown,[t,r])},e}return $f(t,e),zf(t,[{key:"renderHeaderCells",value:function(e){var t=this,r=this.props,n=r.localizer,s=r.getDrilldownView,a=r.getNow,o=r.getters.dayProp,l=r.components,c=l.header,d=void 0===c?Hx:c,u=l.resourceHeader,f=void 0===u?cy:u,p=r.resources,m=r.accessors,h=r.events,g=r.rtl,x=r.selectable,y=r.components,b=r.getters,v=r.resizable,w=a(),j=p.groupEvents(h);return e.map(function(r,l){var c=s(r),u=n.format(r,"dayFormat"),h=o(r),N=h.className,k=h.style,_=i().createElement(d,{date:r,label:u,localizer:n});return i().createElement("div",{key:l,className:"rbc-time-header-content rbc-resource-grouping"},i().createElement("div",{className:"rbc-row rbc-time-header-cell".concat(e.length<=1?" rbc-time-header-cell-single-day":"")},i().createElement("div",{style:k,className:Vf("rbc-header",N,n.isSameDate(r,w)&&"rbc-today")},c?i().createElement("button",{type:"button",className:"rbc-button-link",onClick:function(e){return t.handleHeaderClick(r,c,e)}},_):i().createElement("span",null,_))),i().createElement("div",{className:"rbc-row"},p.map(function(e,t){var s=Wf(e,2),a=s[0],o=s[1];return i().createElement("div",{key:"resource_".concat(a,"_").concat(t),className:Vf("rbc-header",N,n.isSameDate(r,w)&&"rbc-today")},i().createElement(f,{index:t,label:m.resourceTitle(o),resource:o}))})),i().createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},p.map(function(e,s){var o=Wf(e,2),l=o[0],c=o[1],d=(j.get(l)||[]).filter(function(e){return n.isSameDate(e.start,r)||n.isSameDate(e.end,r)});return i().createElement(Ux,{key:"resource_".concat(l,"_").concat(s),isAllDay:!0,rtl:g,getNow:a,minRows:2,maxRows:t.props.allDayMaxRows+1,range:[r],events:d,resourceId:c&&l,className:"rbc-allday-cell",selectable:x,selected:t.props.selected,components:y,accessors:m,getters:b,localizer:n,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyDown:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:v})})))})}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.rtl,n=e.range,s=e.scrollRef,a=e.isOverflowing,o=e.components.timeGutterHeader,l={};return a&&(l[r?"marginLeft":"marginRight"]="".concat(bg()-1,"px")),i().createElement("div",{style:l,ref:s,className:Vf("rbc-time-header",a&&"rbc-overflowing")},i().createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:t,minWidth:t,maxWidth:t}},o&&i().createElement(o,null)),this.renderHeaderCells(n))}}])}(i().Component),fy=function(e){var t=e.min,r=e.max,n=e.timeslots,s=e.step,o=e.localizer,l=e.getNow,c=e.resource,d=e.components,u=e.getters,f=e.gutterRef,p=d.timeGutterWrapper,m=(0,a.useMemo)(function(){return function(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}({min:t,max:r,localizer:o})},[null==t?void 0:t.toISOString(),null==r?void 0:r.toISOString(),o]),h=m.start,g=m.end,x=Wf((0,a.useState)(Yx({min:h,max:g,timeslots:n,step:s,localizer:o})),2),y=x[0],b=x[1];(0,a.useEffect)(function(){y&&b(y.update({min:h,max:g,timeslots:n,step:s,localizer:o}))},[null==h?void 0:h.toISOString(),null==g?void 0:g.toISOString(),n,s]);var v=(0,a.useCallback)(function(e,t){if(t)return null;var r=y.dateIsInGroup(l(),t);return i().createElement("span",{className:Vf("rbc-label",r&&"rbc-now")},o.format(e,"timeGutterFormat"))},[y,o,l]);return i().createElement(p,{slotMetrics:y},i().createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:f},y.groups.map(function(e,t){return i().createElement(ty,{key:t,group:e,resource:c,components:d,renderSlot:v,getters:u})})))},py=i().forwardRef(function(e,t){return i().createElement(fy,Object.assign({gutterRef:t},e))}),my={},hy=function(e){function t(e){var r;return Af(this,t),(r=If(this,t,[e])).handleScroll=function(e){r.scrollRef.current&&(r.scrollRef.current.scrollLeft=e.target.scrollLeft)},r.handleResize=function(){hm(r.rafHandle),r.rafHandle=gm(r.checkOverflow)},r.handleKeyPressEvent=function(){r.clearSelection();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];lx(r.props.onKeyPressEvent,t)},r.handleSelectEvent=function(){r.clearSelection();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];lx(r.props.onSelectEvent,t)},r.handleDoubleClickEvent=function(){r.clearSelection();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];lx(r.props.onDoubleClickEvent,t)},r.handleShowMore=function(e,t,n,s,a){var o=r.props,i=o.popup,l=o.onDrillDown,c=o.onShowMore,d=o.getDrilldownView,u=o.doShowMoreDrillDown;if(r.clearSelection(),i){var f=cm(n,r.containerRef.current);r.setState({overlay:{date:t,events:e,position:Mf(Mf({},f),{},{width:"200px"}),target:a}})}else u&&lx(l,[t,d(t)||zg.DAY]);lx(c,[e,t,s])},r.handleSelectAllDaySlot=function(e,t){var n=r.props.onSelectSlot,s=new Date(e[0]),a=new Date(e[e.length-1]);a.setDate(e[e.length-1].getDate()+1),lx(n,{slots:e,start:s,end:a,action:t.action,resourceId:t.resourceId})},r.overlayDisplay=function(){r.setState({overlay:null})},r.checkOverflow=function(){if(!r._updatingOverflow){var e=r.contentRef.current;if(null!=e&&e.scrollHeight){var t=e.scrollHeight>e.clientHeight;r.state.isOverflowing!==t&&(r._updatingOverflow=!0,r.setState({isOverflowing:t},function(){r._updatingOverflow=!1}))}}},r.memoizedResources=mg(function(e,t){return function(e,t){return{map:function(r){return e?e.map(function(e,n){return r([t.resourceId(e),e],n)}):[r([my,null],0)]},groupEvents:function(r){var n=new Map;return e?(r.forEach(function(e){var r=t.resource(e)||my;if(Array.isArray(r))r.forEach(function(t){var r=n.get(t)||[];r.push(e),n.set(t,r)});else{var s=n.get(r)||[];s.push(e),n.set(r,s)}}),n):(n.set(my,r),n)}}}(e,t)}),r.state={gutterWidth:void 0,isOverflowing:null},r.scrollRef=i().createRef(),r.contentRef=i().createRef(),r.containerRef=i().createRef(),r._scrollRatio=null,r.gutterRef=(0,a.createRef)(),r}return $f(t,e),zf(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){null==this.props.width&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),hm(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(e,t,r,n,s,a,o,l,c,d){var u=this.props,f=u.min,p=u.max,m=(n.get(t)||[]).filter(function(t){return a.inRange(e,o.start(t),o.end(t),"day")}),h=(s.get(t)||[]).filter(function(t){return a.inRange(e,o.start(t),o.end(t),"day")});return i().createElement(ly,Object.assign({},this.props,{localizer:a,min:a.merge(e,f),max:a.merge(e,p),resource:r&&t,components:l,isNow:a.isSameDate(e,d),key:"".concat(t,"-").concat(e),date:e,events:m,backgroundEvents:h,dayLayoutAlgorithm:c}))}},{key:"renderResourcesFirst",value:function(e,t,r,n,s,a,o,i,l){var c=this;return t.map(function(t){var d=Wf(t,2),u=d[0],f=d[1];return e.map(function(e){return c.renderDayColumn(e,u,f,r,n,s,a,i,l,o)})})}},{key:"renderRangeFirst",value:function(e,t,r,n,s,a,o,l,c){var d=this;return e.map(function(e){return i().createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:e},t.map(function(t){var u=Wf(t,2),f=u[0],p=u[1];return i().createElement("div",{style:{flex:1},key:a.resourceId(p)},d.renderDayColumn(e,f,p,r,n,s,a,l,c,o))}))})}},{key:"renderEvents",value:function(e,t,r,n){var s=this.props,a=s.accessors,o=s.localizer,i=s.resourceGroupingLayout,l=s.components,c=s.dayLayoutAlgorithm,d=this.memoizedResources(this.props.resources,a),u=d.groupEvents(t),f=d.groupEvents(r);return i?this.renderRangeFirst(e,d,u,f,o,a,n,l,c):this.renderResourcesFirst(e,d,u,f,o,a,n,l,c)}},{key:"render",value:function(){var e,t=this.props,r=t.events,n=t.backgroundEvents,s=t.range,a=t.width,o=t.rtl,l=t.selected,c=t.getNow,d=t.resources,u=t.components,f=t.accessors,p=t.getters,m=t.localizer,h=t.min,g=t.max,x=t.showMultiDayTimes,y=t.longPressThreshold,b=t.resizable,v=t.resourceGroupingLayout;a=a||this.state.gutterWidth;var w=s[0],j=s[s.length-1];this.slots=s.length;var N=[],k=[],_=[];r.forEach(function(e){if(qx(e,w,j,f,m)){var t=f.start(e),r=f.end(e);f.allDay(e)||m.startAndEndAreDateOnly(t,r)||!x&&!m.isSameDate(t,r)?N.push(e):k.push(e)}}),n.forEach(function(e){qx(e,w,j,f,m)&&_.push(e)}),N.sort(function(e,t){return Dx(e,t,f,m)});var C={range:s,events:N,width:a,rtl:o,getNow:c,localizer:m,selected:l,allDayMaxRows:this.props.showAllEvents?1/0:null!==(e=this.props.allDayMaxRows)&&void 0!==e?e:1/0,resources:this.memoizedResources(d,f),selectable:this.props.selectable,accessors:f,getters:p,components:u,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:y,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:b};return i().createElement("div",{className:Vf("rbc-time-view",d&&"rbc-time-view-resources"),ref:this.containerRef},d&&d.length>1&&v?i().createElement(uy,C):i().createElement(dy,C),this.props.popup&&this.renderOverlay(),i().createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},i().createElement(py,{date:w,ref:this.gutterRef,localizer:m,min:m.merge(w,h),max:m.merge(w,g),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:u,className:"rbc-time-gutter",getters:p}),this.renderEvents(s,k,_,c())))}},{key:"renderOverlay",value:function(){var e,t,r=this,n=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},s=this.props,a=s.accessors,o=s.localizer,l=s.components,c=s.getters,d=s.selected,u=s.popupOffset,f=s.handleDragStart;return i().createElement(yx,{overlay:n,accessors:a,localizer:o,components:l,getters:c,selected:d,popupOffset:u,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:f,show:!!n.position,overlayDisplay:this.overlayDisplay,onHide:function(){return r.setState({overlay:null})}})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var e=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var t,r=null!==(t=e.gutterRef)&&void 0!==t&&t.current?hg(e.gutterRef.current):void 0;r&&e.state.gutterWidth!==r&&e.setState({gutterWidth:r})})}},{key:"applyScroll",value:function(){if(null!=this._scrollRatio&&!0===this.props.enableAutoScroll){var e=this.contentRef.current;e.scrollTop=e.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.min,r=e.max,n=e.scrollToTime,s=e.localizer,a=s.diff(s.merge(n,t),n,"milliseconds"),o=s.diff(t,r,"milliseconds");this._scrollRatio=a/o}}])}(a.Component);hy.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var gy=["date","localizer","min","max","scrollToTime","enableAutoScroll"],xy=function(e){function t(){return Af(this,t),If(this,t,arguments)}return $f(t,e),zf(t,[{key:"render",value:function(){var e=this.props,r=e.date,n=e.localizer,s=e.min,a=void 0===s?n.startOf(new Date,"day"):s,o=e.max,l=void 0===o?n.endOf(new Date,"day"):o,c=e.scrollToTime,d=void 0===c?n.startOf(new Date,"day"):c,u=e.enableAutoScroll,f=void 0===u||u,p=Pf(e,gy),m=t.range(r,{localizer:n});return i().createElement(hy,Object.assign({},p,{range:m,eventOffset:10,localizer:n,min:a,max:l,scrollToTime:d,enableAutoScroll:f}))}}])}(i().Component);xy.range=function(e,t){return[t.localizer.startOf(e,"day")]},xy.navigate=function(e,t,r){var n=r.localizer;switch(t){case Tg:return n.add(e,-1,"day");case Pg:return n.add(e,1,"day");default:return e}},xy.title=function(e,t){return t.localizer.format(e,"dayHeaderFormat")};var yy=["date","localizer","min","max","scrollToTime","enableAutoScroll"],by=function(e){function t(){return Af(this,t),If(this,t,arguments)}return $f(t,e),zf(t,[{key:"render",value:function(){var e=this.props,r=e.date,n=e.localizer,s=e.min,a=void 0===s?n.startOf(new Date,"day"):s,o=e.max,l=void 0===o?n.endOf(new Date,"day"):o,c=e.scrollToTime,d=void 0===c?n.startOf(new Date,"day"):c,u=e.enableAutoScroll,f=void 0===u||u,p=Pf(e,yy),m=t.range(r,this.props);return i().createElement(hy,Object.assign({},p,{range:m,eventOffset:15,localizer:n,min:a,max:l,scrollToTime:d,enableAutoScroll:f}))}}])}(i().Component);by.defaultProps=hy.defaultProps,by.navigate=function(e,t,r){var n=r.localizer;switch(t){case Tg:return n.add(e,-1,"week");case Pg:return n.add(e,1,"week");default:return e}},by.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),s=r.startOf(e,"week",n),a=r.endOf(e,"week",n);return r.range(s,a)},by.title=function(e,t){var r=t.localizer,n=vg(by.range(e,{localizer:r})),s=n[0],a=n.slice(1);return r.format({start:s,end:a.pop()},"dayRangeHeaderFormat")};var vy=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function wy(e,t){return by.range(e,t).filter(function(e){return-1===[6,0].indexOf(e.getDay())})}var jy=function(e){function t(){return Af(this,t),If(this,t,arguments)}return $f(t,e),zf(t,[{key:"render",value:function(){var e=this.props,t=e.date,r=e.localizer,n=e.min,s=void 0===n?r.startOf(new Date,"day"):n,a=e.max,o=void 0===a?r.endOf(new Date,"day"):a,l=e.scrollToTime,c=void 0===l?r.startOf(new Date,"day"):l,d=e.enableAutoScroll,u=void 0===d||d,f=Pf(e,vy),p=wy(t,this.props);return i().createElement(hy,Object.assign({},f,{range:p,eventOffset:15,localizer:r,min:s,max:o,scrollToTime:c,enableAutoScroll:u}))}}])}(i().Component);function Ny(e){var t=e.accessors,r=e.components,n=e.date,s=e.events,o=e.getters,l=e.length,c=void 0===l?30:l,d=e.localizer,u=e.onDoubleClickEvent,f=e.onSelectEvent,p=e.selected,m=(0,a.useRef)(null),h=(0,a.useRef)(null),g=(0,a.useRef)(null),x=(0,a.useRef)(null),y=(0,a.useRef)(null);(0,a.useEffect)(function(){b()});var b=function(){if(y.current){var e=m.current,t=y.current.firstChild;if(t){var r,n,s=x.current.scrollHeight>x.current.clientHeight,a=[],o=a;a=[hg(t.children[0]),hg(t.children[1])],o[0]===a[0]&&o[1]===a[1]||(h.current.style.width=a[0]+"px",g.current.style.width=a[1]+"px"),s?(n="rbc-header-overflowing",(r=e).classList?r.classList.add(n):function(e,t){return e.classList?e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,n)||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)),e.style.marginRight=bg()+"px"):function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=wg(e.className,t):e.setAttribute("class",wg(e.className&&e.className.baseVal||"",t))}(e,"rbc-header-overflowing")}}},v=d.messages,w=d.add(n,c,"day"),j=d.range(n,w,"day");return(s=s.filter(function(e){return qx(e,d.startOf(n,"day"),d.endOf(w,"day"),t,d)})).sort(function(e,r){return+t.start(e)-+t.start(r)}),i().createElement("div",{className:"rbc-agenda-view"},0!==s.length?i().createElement(i().Fragment,null,i().createElement("table",{ref:m,className:"rbc-agenda-table"},i().createElement("thead",null,i().createElement("tr",null,i().createElement("th",{className:"rbc-header",ref:h},v.date),i().createElement("th",{className:"rbc-header",ref:g},v.time),i().createElement("th",{className:"rbc-header"},v.event)))),i().createElement("div",{className:"rbc-agenda-content",ref:x},i().createElement("table",{className:"rbc-agenda-table"},i().createElement("tbody",{ref:y},j.map(function(e,n){return function(e,n,s){var a=r.event,l=r.date;return(n=n.filter(function(r){return qx(r,d.startOf(e,"day"),d.endOf(e,"day"),t,d)})).map(function(c,m){var h=t.title(c),g=t.end(c),x=t.start(c),y=o.eventProp(c,x,g,fx(c,p)),b=0===m&&d.format(e,"agendaDateFormat"),v=0===m&&i().createElement("td",{rowSpan:n.length,className:"rbc-agenda-date-cell"},l?i().createElement(l,{day:e,label:b}):b);return i().createElement("tr",{key:s+"_"+m,className:y.className,style:y.style},v,i().createElement("td",{className:"rbc-agenda-time-cell"},function(e,n){var s="",a=r.time,o=d.messages.allDay,l=t.end(n),c=t.start(n);return t.allDay(n)||(d.eq(c,l)?o=d.format(c,"agendaTimeFormat"):d.isSameDate(c,l)?o=d.format({start:c,end:l},"agendaTimeRangeFormat"):d.isSameDate(e,c)?o=d.format(c,"agendaTimeFormat"):d.isSameDate(e,l)&&(o=d.format(l,"agendaTimeFormat"))),d.gt(e,c,"day")&&(s="rbc-continues-prior"),d.lt(e,l,"day")&&(s+=" rbc-continues-after"),i().createElement("span",{className:s.trim()},a?i().createElement(a,{event:n,day:e,label:o}):o)}(e,c)),i().createElement("td",{className:"rbc-agenda-event-cell",onClick:function(e){return f&&f(c,e)},onDoubleClick:function(e){return u&&u(c,e)}},a?i().createElement(a,{event:c,title:h}):h))},[])}(e,s,n)}))))):i().createElement("span",{className:"rbc-agenda-empty"},v.noEventsInRange))}jy.defaultProps=hy.defaultProps,jy.range=wy,jy.navigate=by.navigate,jy.title=function(e,t){var r=t.localizer,n=vg(wy(e,{localizer:r})),s=n[0],a=n.slice(1);return r.format({start:s,end:a.pop()},"dayRangeHeaderFormat")},Ny.range=function(e,t){var r=t.length,n=void 0===r?30:r;return{start:e,end:t.localizer.add(e,n,"day")}},Ny.navigate=function(e,t,r){var n=r.length,s=void 0===n?30:n,a=r.localizer;switch(t){case Tg:return a.add(e,-s,"day");case Pg:return a.add(e,s,"day");default:return e}},Ny.title=function(e,t){var r=t.length,n=void 0===r?30:r,s=t.localizer,a=s.add(e,n,"day");return s.format({start:e,end:a},"agendaHeaderFormat")};var ky=Ef(Ef(Ef(Ef(Ef({},zg.MONTH,Vx),zg.WEEK,by),zg.WORK_WEEK,jy),zg.DAY,xy),zg.AGENDA,Ny),_y=["action","date","today"],Cy=function(e){return function(t){return function(e,t){var r=null;return"function"==typeof t?r=t(e):"string"==typeof t&&"object"===Cf(e)&&null!=e&&t in e&&(r=e[t]),r}(t,e)}},Sy=["view","date","getNow","onNavigate"],Ey=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function Oy(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var s=Wf(n[r],2),a=s[0];s[1]&&t.push(a)}return t}var My=function(e){function t(){var e;Af(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=If(this,t,[].concat(n))).getViews=function(){var t=e.props.views;return Array.isArray(t)?Og()(t,function(e,t){return e[t]=ky[t]},{}):"object"===Cf(t)?_g()(t,function(e,t){return!0===e?ky[t]:e}):ky},e.getView=function(){return e.getViews()[e.props.view]},e.getDrilldownView=function(t){var r=e.props,n=r.view,s=r.drilldownView,a=r.getDrilldownView;return a?a(t,n,Object.keys(e.getViews())):s},e.handleRangeChange=function(t,r,n){var s=e.props,a=s.onRangeChange,o=s.localizer;a&&r.range&&a(r.range(t,{localizer:o}),n)},e.handleNavigate=function(t,r){var n=e.props,s=n.view,a=n.date,o=n.getNow,i=n.onNavigate,l=Pf(n,Sy),c=e.getView(),d=o();a=function(e,t){var r=t.action,n=t.date,s=t.today,a=Pf(t,_y);switch(e="string"==typeof e?ky[e]:e,r){case Ag:n=s||new Date;break;case qg:break;default:Yf()(e&&"function"==typeof e.navigate,"Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,a)}return n}(c,Mf(Mf({},l),{},{action:t,date:r||a||d,today:d})),i(a,s,t),e.handleRangeChange(a,c)},e.handleViewChange=function(t){t!==e.props.view&&function(e,t){return-1!==Oy(t.views).indexOf(e)}(t,e.props)&&e.props.onView(t);var r=e.getViews();e.handleRangeChange(e.props.date||e.props.getNow(),r[t],t)},e.handleSelectEvent=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onSelectEvent,r)},e.handleDoubleClickEvent=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onDoubleClickEvent,r)},e.handleKeyPressEvent=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];lx(e.props.onKeyPressEvent,r)},e.handleSelectSlot=function(t){lx(e.props.onSelectSlot,t)},e.handleDrillDown=function(t,r){var n=e.props.onDrillDown;n?n(t,r,e.drilldownView):(r&&e.handleViewChange(r),e.handleNavigate(qg,t))},e.state={context:t.getContext(e.props)},e}return $f(t,e),zf(t,[{key:"render",value:function(){var e=this.props,t=e.view,r=e.toolbar,n=e.events,s=e.backgroundEvents,a=e.resourceGroupingLayout,o=e.style,l=e.className,c=e.elementProps,d=e.date,u=e.getNow,f=e.length,p=e.showMultiDayTimes,m=e.onShowMore,h=e.doShowMoreDrillDown;e.components,e.formats,e.messages,e.culture;var g=Pf(e,Ey);d=d||u();var x=this.getView(),y=this.state.context,b=y.accessors,v=y.components,w=y.getters,j=y.localizer,N=y.viewNames,k=v.toolbar||ix,_=x.title(d,{localizer:j,length:f});return i().createElement("div",Object.assign({},c,{className:Vf(l,"rbc-calendar",g.rtl&&"rbc-rtl"),style:o}),r&&i().createElement(k,{date:d,view:t,views:N,label:_,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:j}),i().createElement(x,Object.assign({},g,{events:n,backgroundEvents:s,date:d,getNow:u,length:f,localizer:j,getters:w,components:v,accessors:b,showMultiDayTimes:p,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:m,doShowMoreDrillDown:h,resourceGroupingLayout:a})))}}],[{key:"getDerivedStateFromProps",value:function(e){return{context:t.getContext(e)}}},{key:"getContext",value:function(e){var t,r=e.startAccessor,n=e.endAccessor,s=e.allDayAccessor,a=e.tooltipAccessor,o=e.titleAccessor,i=e.resourceAccessor,l=e.resourceIdAccessor,c=e.resourceTitleAccessor,d=e.eventIdAccessor,u=e.eventPropGetter,f=e.backgroundEventPropGetter,p=e.slotPropGetter,m=e.slotGroupPropGetter,h=e.dayPropGetter,g=e.view,x=e.views,y=e.localizer,b=e.culture,v=e.messages,w=void 0===v?{}:v,j=e.components,N=void 0===j?{}:j,k=e.formats,_=void 0===k?{}:k,C=Oy(x);return{viewNames:C,localizer:ox(y,b,_,(t=w,Mf(Mf({},cx),t))),getters:{eventProp:function(){return u&&u.apply(void 0,arguments)||{}},backgroundEventProp:function(){return f&&f.apply(void 0,arguments)||{}},slotProp:function(){return p&&p.apply(void 0,arguments)||{}},slotGroupProp:function(){return m&&m.apply(void 0,arguments)||{}},dayProp:function(){return h&&h.apply(void 0,arguments)||{}}},components:Ng()(N[g]||{},Sg()(N,C),{eventWrapper:Mg,backgroundEventWrapper:Mg,eventContainerWrapper:Mg,dateCellWrapper:Mg,weekWrapper:Mg,timeSlotWrapper:Mg,timeGutterWrapper:Mg,timeIndicatorWrapper:Mg}),accessors:{start:Cy(r),end:Cy(n),allDay:Cy(s),tooltip:Cy(a),title:Cy(o),resource:Cy(i),resourceId:Cy(l),resourceTitle:Cy(c),eventId:Cy(d)}}}}])}(i().Component);My.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:zg.MONTH,views:[zg.MONTH,zg.WEEK,zg.DAY,zg.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:zg.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Ty=function e(t,r,n){void 0===n&&(n=[]);var s,a=t.displayName||t.name||"Component",o=!!(s=t)&&("function"!=typeof s||s.prototype&&s.prototype.isReactComponent),l=Object.keys(r),c=l.map(Zf);!o&&n.length&&Yf()(!1);var d=function(e){function s(){for(var t,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];(t=e.call.apply(e,[this].concat(a))||this).handlers=Object.create(null),l.forEach(function(e){var n=r[e];t.handlers[n]=function(r){if(t.props[n]){var s;t._notifying=!0;for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];(s=t.props)[n].apply(s,[r].concat(o)),t._notifying=!1}t.unmounted||t.setState(function(t){var n,s=t.values;return{values:Jf(Object.create(null),s,(n={},n[e]=r,n))}})}}),n.length&&(t.attachRef=function(e){t.inner=e});var i=Object.create(null);return l.forEach(function(e){i[e]=t.props[Zf(e)]}),t.state={values:i,prevProps:{}},t}var a,o;o=e,(a=s).prototype=Object.create(o.prototype),a.prototype.constructor=a,Rf(a,o);var d=s.prototype;return d.shouldComponentUpdate=function(){return!this._notifying},s.getDerivedStateFromProps=function(e,t){var r=t.values,n=t.prevProps,s={values:Jf(Object.create(null),r),prevProps:{}};return l.forEach(function(t){s.prevProps[t]=e[t],!Xf(e,t)&&Xf(n,t)&&(s.values[t]=e[Zf(t)])}),s},d.componentWillUnmount=function(){this.unmounted=!0},d.render=function(){var e=this,r=this.props,n=r.innerRef,s=Tf(r,["innerRef"]);c.forEach(function(e){delete s[e]});var a={};return l.forEach(function(t){var r=e.props[t];a[t]=void 0!==r?r:e.state.values[t]}),i().createElement(t,Jf({},s,a,this.handlers,{ref:n||this.attachRef}))},s}(i().Component);!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var r=null,n=null,s=null;if("function"==typeof t.componentWillMount?r="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(r="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==r||null!==n||null!==s){var a=e.displayName||e.name,o="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+a+" uses "+o+" but also contains the following legacy lifecycles:"+(null!==r?"\n  "+r:"")+(null!==n?"\n  "+n:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=ep,t.componentWillReceiveProps=tp),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=rp;var i=t.componentDidUpdate;t.componentDidUpdate=function(e,t,r){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:r;i.call(this,e,t,n)}}}(d),d.displayName="Uncontrolled("+a+")",d.propTypes=Jf({innerRef:function(){}},function(e){var t={};return Object.keys(e).forEach(function(e){t[Zf(e)]=Gf}),t}(r)),n.forEach(function(e){d.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}});var u=d;return i().forwardRef&&((u=i().forwardRef(function(e,t){return i().createElement(d,Jf({},e,{innerRef:t,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))})).propTypes=d.propTypes),u.ControlledComponent=t,u.deferControlTo=function(t,n,s){return void 0===n&&(n={}),e(t,Jf({},r,n),s)},u}(My,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),Py=function(e,t,r){var n=e.start,s=e.end;return"".concat(r.format(n,"p",t),"  ").concat(r.format(s,"p",t))},Ay={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:Py,eventTimeRangeFormat:Py,eventTimeRangeStartFormat:function(e,t,r){var n=e.start;return"".concat(r.format(n,"h:mma",t),"  ")},eventTimeRangeEndFormat:function(e,t,r){var n=e.end;return"  ".concat(r.format(n,"h:mma",t))},timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:function(e,t,r){var n=e.start,s=e.end;return"".concat(r.format(n,"MMMM dd",t),"  ").concat(r.format(s,Np(n,s,"month")?"dd":"MMMM dd",t))},agendaHeaderFormat:function(e,t,r){var n=e.start,s=e.end;return"".concat(r.format(n,"P",t),"  ").concat(r.format(s,"P",t))},agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:Py};const qy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function zy(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Dy={date:zy({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:zy({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:zy({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ly={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Iy(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=r?.width?String(r.width):t;n=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=r?.width?String(r.width):e.defaultWidth;n=e.values[s]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}const Ry={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Iy({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Iy({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Iy({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Iy({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Iy({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function $y(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(i,e=>e.test(o)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(i,e=>e.test(o));let c;return c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c,{value:c,rest:t.slice(o.length)}}}function Fy(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];return o=r.valueCallback?r.valueCallback(o):o,{value:o,rest:t.slice(s.length)}}}const By={ordinalNumber:Fy({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:$y({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:$y({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:$y({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:$y({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:$y({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},Uy={code:"en-US",formatDistance:(e,t,r)=>{let n;const s=qy[e];return n="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:Dy,formatRelative:(e,t,r,n)=>Ly[e],localize:Ry,match:By,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Hy={};function Wy(){return Hy}Math.pow(10,8);const Qy=6048e5,Vy=36e5,Ky=Symbol.for("constructDateFrom");function Yy(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Ky in e?e[Ky](t):e instanceof Date?new e.constructor(t):new Date(t)}function Gy(e,t){return Yy(t||e,e)}function Xy(e){const t=Gy(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Zy(e,...t){const r=Yy.bind(null,e||t.find(e=>"object"==typeof e));return t.map(r)}function Jy(e,t){const r=Gy(e,t?.in);return r.setHours(0,0,0,0),r}function eb(e,t){const r=Gy(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function tb(e,t){const r=Gy(e,t?.in);return function(e,t,r){const[n,s]=Zy(r?.in,e,t),a=Jy(n),o=Jy(s),i=+a-Xy(a),l=+o-Xy(o);return Math.round((i-l)/864e5)}(r,eb(r))+1}function rb(e,t){const r=Wy(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=Gy(e,t?.in),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function nb(e,t){return rb(e,{...t,weekStartsOn:1})}function sb(e,t){const r=Gy(e,t?.in),n=r.getFullYear(),s=Yy(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=nb(s),o=Yy(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const i=nb(o);return r.getTime()>=a.getTime()?n+1:r.getTime()>=i.getTime()?n:n-1}function ab(e,t){const r=Gy(e,t?.in),n=+nb(r)-+function(e,t){const r=sb(e,t),n=Yy(t?.in||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),nb(n)}(r);return Math.round(n/Qy)+1}function ob(e,t){const r=Gy(e,t?.in),n=r.getFullYear(),s=Wy(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=Yy(t?.in||e,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const i=rb(o,t),l=Yy(t?.in||e,0);l.setFullYear(n,0,a),l.setHours(0,0,0,0);const c=rb(l,t);return+r>=+i?n+1:+r>=+c?n:n-1}function ib(e,t){const r=Gy(e,t?.in),n=+rb(r,t)-+function(e,t){const r=Wy(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=ob(e,t),a=Yy(t?.in||e,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),rb(a,t)}(r,t);return Math.round(n/Qy)+1}function lb(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const cb={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return lb("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):lb(r+1,2)},d:(e,t)=>lb(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>lb(e.getHours()%12||12,t.length),H:(e,t)=>lb(e.getHours(),t.length),m:(e,t)=>lb(e.getMinutes(),t.length),s:(e,t)=>lb(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return lb(Math.trunc(n*Math.pow(10,r-3)),t.length)}},db={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return cb.y(e,t)},Y:function(e,t,r,n){const s=ob(e,n),a=s>0?s:1-s;return"YY"===t?lb(a%100,2):"Yo"===t?r.ordinalNumber(a,{unit:"year"}):lb(a,t.length)},R:function(e,t){return lb(sb(e),t.length)},u:function(e,t){return lb(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return lb(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return lb(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return cb.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return lb(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=ib(e,n);return"wo"===t?r.ordinalNumber(s,{unit:"week"}):lb(s,t.length)},I:function(e,t,r){const n=ab(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):lb(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):cb.d(e,t)},D:function(e,t,r){const n=tb(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):lb(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return lb(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return lb(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=0===n?7:n;switch(t){case"i":return String(s);case"ii":return lb(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(s=12===n?"noon":0===n?"midnight":n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(s=n>=17?"evening":n>=12?"afternoon":n>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return cb.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):cb.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):lb(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):lb(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):cb.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):cb.s(e,t)},S:function(e,t){return cb.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return fb(n);case"XXXX":case"XX":return pb(n);default:return pb(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return fb(n);case"xxxx":case"xx":return pb(n);default:return pb(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ub(n,":");default:return"GMT"+pb(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ub(n,":");default:return"GMT"+pb(n,":")}},t:function(e,t,r){return lb(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return lb(+e,t.length)}};function ub(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return 0===a?r+String(s):r+String(s)+t+lb(a,2)}function fb(e,t){return e%60==0?(e>0?"-":"+")+lb(Math.abs(e)/60,2):pb(e,t)}function pb(e,t=""){const r=e>0?"-":"+",n=Math.abs(e);return r+lb(Math.trunc(n/60),2)+t+lb(n%60,2)}const mb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},hb=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},gb={p:hb,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return mb(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;default:a=t.dateTime({width:"full"})}return a.replace("{{date}}",mb(n,t)).replace("{{time}}",hb(s,t))}},xb=/^D+$/,yb=/^Y+$/,bb=["D","DD","YY","YYYY"];function vb(e){return xb.test(e)}function wb(e){return yb.test(e)}function jb(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(n),bb.includes(e))throw new RangeError(n)}function Nb(e){return!(!function(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e||isNaN(+Gy(e)))}const kb=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_b=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Cb=/^'([^]*?)'?$/,Sb=/''/g,Eb=/[a-zA-Z]/;function Ob(e,t,r){const n=Wy(),s=r?.locale??n.locale??Uy,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=Gy(e,r?.in);if(!Nb(i))throw new RangeError("Invalid time value");let l=t.match(_b).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,gb[t])(e,s.formatLong):e}).join("").match(kb).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Mb(e)};if(db[t])return{isToken:!0,value:e};if(t.match(Eb))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});s.localize.preprocessor&&(l=s.localize.preprocessor(i,l));const c={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return l.map(n=>{if(!n.isToken)return n.value;const a=n.value;return(!r?.useAdditionalWeekYearTokens&&wb(a)||!r?.useAdditionalDayOfYearTokens&&vb(a))&&jb(a,t,String(e)),(0,db[a[0]])(i,a,s.localize,c)}).join("")}function Mb(e){const t=e.match(Cb);return t?t[1].replace(Sb,"'"):e}class Tb{subPriority=0;validate(e,t){return!0}}class Pb extends Tb{constructor(e,t,r,n,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class Ab extends Tb{priority=10;subPriority=-1;constructor(e,t){super(),this.context=e||(e=>Yy(t,e))}set(e,t){return t.timestampIsSet?e:Yy(e,function(e,t){const r=function(e){return"function"==typeof e&&e.prototype?.constructor===e}(t)?new t(0):Yy(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}(e,this.context))}}class qb{run(e,t,r,n){const s=this.parse(e,t,r,n);return s?{setter:new Pb(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}const zb=/^(1[0-2]|0?\d)/,Db=/^(3[0-1]|[0-2]?\d)/,Lb=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Ib=/^(5[0-3]|[0-4]?\d)/,Rb=/^(2[0-3]|[0-1]?\d)/,$b=/^(2[0-4]|[0-1]?\d)/,Fb=/^(1[0-1]|0?\d)/,Bb=/^(1[0-2]|0?\d)/,Ub=/^[0-5]?\d/,Hb=/^[0-5]?\d/,Wb=/^\d/,Qb=/^\d{1,2}/,Vb=/^\d{1,3}/,Kb=/^\d{1,4}/,Yb=/^-?\d+/,Gb=/^-?\d/,Xb=/^-?\d{1,2}/,Zb=/^-?\d{1,3}/,Jb=/^-?\d{1,4}/,ev=/^([+-])(\d{2})(\d{2})?|Z/,tv=/^([+-])(\d{2})(\d{2})|Z/,rv=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,nv=/^([+-])(\d{2}):(\d{2})|Z/,sv=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function av(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ov(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function iv(e,t){const r=t.match(e);if(!r)return null;if("Z"===r[0])return{value:0,rest:t.slice(1)};const n="+"===r[1]?1:-1,s=r[2]?parseInt(r[2],10):0,a=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(s*Vy+6e4*a+1e3*o),rest:t.slice(r[0].length)}}function lv(e){return ov(Yb,e)}function cv(e,t){switch(e){case 1:return ov(Wb,t);case 2:return ov(Qb,t);case 3:return ov(Vb,t);case 4:return ov(Kb,t);default:return ov(new RegExp("^\\d{1,"+e+"}"),t)}}function dv(e,t){switch(e){case 1:return ov(Gb,t);case 2:return ov(Xb,t);case 3:return ov(Zb,t);case 4:return ov(Jb,t);default:return ov(new RegExp("^-?\\d{1,"+e+"}"),t)}}function uv(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function fv(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const t=n+50;s=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return r?s:1-s}function pv(e){return e%400==0||e%4==0&&e%100!=0}const mv=[31,28,31,30,31,30,31,31,30,31,30,31],hv=[31,29,31,30,31,30,31,31,30,31,30,31];function gv(e,t,r){const n=Gy(e,r?.in);return isNaN(t)?Yy(r?.in||e,NaN):t?(n.setDate(n.getDate()+t),n):n}function xv(e,t,r){const n=Wy(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Gy(e,r?.in),o=a.getDay(),i=7-s;return gv(a,t<0||t>6?t-(o+i)%7:((t%7+7)%7+i)%7-(o+i)%7,r)}function yv(e,t,r){const n=Gy(e,r?.in);return gv(n,t-function(e,t){const r=Gy(e,t?.in).getDay();return 0===r?7:r}(n,r),r)}const bv={G:new class extends qb{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},y:new class extends qb{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return av(cv(4,e),n);case"yo":return av(r.ordinalNumber(e,{unit:"year"}),n);default:return av(cv(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const t=fv(r.year,n);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const s="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}},Y:new class extends qb{priority=130;parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return av(cv(4,e),n);case"Yo":return av(r.ordinalNumber(e,{unit:"year"}),n);default:return av(cv(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const s=ob(e,n);if(r.isTwoDigitYear){const t=fv(r.year,s);return e.setFullYear(t,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),rb(e,n)}const a="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(a,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),rb(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends qb{priority=130;parse(e,t){return dv("R"===t?4:t.length,e)}set(e,t,r){const n=Yy(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),nb(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends qb{priority=130;parse(e,t){return dv("u"===t?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends qb{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return cv(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends qb{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return cv(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends qb{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const n=e=>e-1;switch(t){case"M":return av(ov(zb,e),n);case"MM":return av(cv(2,e),n);case"Mo":return av(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}},L:new class extends qb{priority=110;parse(e,t,r){const n=e=>e-1;switch(t){case"L":return av(ov(zb,e),n);case"LL":return av(cv(2,e),n);case"Lo":return av(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends qb{priority=100;parse(e,t,r){switch(t){case"w":return ov(Ib,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return cv(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return rb(function(e,t,r){const n=Gy(e,r?.in),s=ib(n,r)-t;return n.setDate(n.getDate()-7*s),Gy(n,r?.in)}(e,r,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends qb{priority=100;parse(e,t,r){switch(t){case"I":return ov(Ib,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return cv(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return nb(function(e,t,r){const n=Gy(e,r?.in),s=ab(n,r)-t;return n.setDate(n.getDate()-7*s),n}(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends qb{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return ov(Db,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return cv(t.length,e)}}validate(e,t){const r=pv(e.getFullYear()),n=e.getMonth();return r?t>=1&&t<=hv[n]:t>=1&&t<=mv[n]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends qb{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return ov(Lb,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return cv(t.length,e)}}validate(e,t){return pv(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends qb{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=xv(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends qb{priority=90;parse(e,t,r,n){const s=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return av(cv(t.length,e),s);case"eo":return av(r.ordinalNumber(e,{unit:"day"}),s);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=xv(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends qb{priority=90;parse(e,t,r,n){const s=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return av(cv(t.length,e),s);case"co":return av(r.ordinalNumber(e,{unit:"day"}),s);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=xv(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends qb{priority=90;parse(e,t,r){const n=e=>0===e?7:e;switch(t){case"i":case"ii":return cv(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return av(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return av(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return av(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return av(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return(e=yv(e,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends qb{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(uv(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends qb{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(uv(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends qb{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(uv(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]},h:new class extends qb{priority=70;parse(e,t,r){switch(t){case"h":return ov(Bb,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return cv(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):n||12!==r?e.setHours(r,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},H:new class extends qb{priority=70;parse(e,t,r){switch(t){case"H":return ov(Rb,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return cv(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends qb{priority=70;parse(e,t,r){switch(t){case"K":return ov(Fb,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return cv(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},k:new class extends qb{priority=70;parse(e,t,r){switch(t){case"k":return ov($b,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return cv(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends qb{priority=60;parse(e,t,r){switch(t){case"m":return ov(Ub,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return cv(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]},s:new class extends qb{priority=50;parse(e,t,r){switch(t){case"s":return ov(Hb,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return cv(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]},S:new class extends qb{priority=30;parse(e,t){return av(cv(t.length,e),e=>Math.trunc(e*Math.pow(10,3-t.length)))}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]},X:new class extends qb{priority=10;parse(e,t){switch(t){case"X":return iv(ev,e);case"XX":return iv(tv,e);case"XXXX":return iv(rv,e);case"XXXXX":return iv(sv,e);default:return iv(nv,e)}}set(e,t,r){return t.timestampIsSet?e:Yy(e,e.getTime()-Xy(e)-r)}incompatibleTokens=["t","T","x"]},x:new class extends qb{priority=10;parse(e,t){switch(t){case"x":return iv(ev,e);case"xx":return iv(tv,e);case"xxxx":return iv(rv,e);case"xxxxx":return iv(sv,e);default:return iv(nv,e)}}set(e,t,r){return t.timestampIsSet?e:Yy(e,e.getTime()-Xy(e)-r)}incompatibleTokens=["t","T","X"]},t:new class extends qb{priority=40;parse(e){return lv(e)}set(e,t,r){return[Yy(e,1e3*r),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends qb{priority=20;parse(e){return lv(e)}set(e,t,r){return[Yy(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}},vv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,wv=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jv=/^'([^]*?)'?$/,Nv=/''/g,kv=/\S/,_v=/[a-zA-Z]/;function Cv(e){return e.match(jv)[1].replace(Nv,"'")}function Sv(e,t){return Gy(e,t?.in).getDay()}function Ev(e,t,r){const[n,s]=Zy(r?.in,e,t);return+Jy(n)===+Jy(s)}function Ov(e,t){return Ev(Yy(t?.in||e,e),function(e){return Yy(e,Date.now())}(t?.in||e))}function Mv(e,t){const r=Gy(e,t?.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function Tv(e,t){const[r,n]=Zy(e,t.start,t.end);return{start:r,end:n}}function Pv(e,t){const r=Gy(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Av(e,t){return Gy(e,t?.in).getDate()}function qv(e,t,r){return function(e,t,r){return Yy(r?.in||e,+Gy(e)+t)}(e,t*Vy,r)}const zv={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 da",other:"{{count}} das"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 ao",other:"alrededor de {{count}} aos"},xYears:{one:"1 ao",other:"{{count}} aos"},overXYears:{one:"ms de 1 ao",other:"ms de {{count}} aos"},almostXYears:{one:"casi 1 ao",other:"casi {{count}} aos"}},Dv={date:zy({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:zy({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:zy({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Lv={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Iv={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Rv={ordinalNumber:(e,t)=>Number(e)+"",era:Iy({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despus de cristo"]},defaultWidth:"wide"}),quarter:Iy({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Iy({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:Iy({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","s"],abbreviated:["dom","lun","mar","mi","jue","vie","sb"],wide:["domingo","lunes","martes","mircoles","jueves","viernes","sbado"]},defaultWidth:"wide"}),dayPeriod:Iy({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},$v={ordinalNumber:Fy({matchPattern:/^(\d+)()?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:$y({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[u]n|despu[e]s de cristo|era com[u]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[u]n)/i,/^(despu[e]s de cristo|era com[u]n)/i]},defaultParseWidth:"any"}),quarter:$y({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:$y({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:$y({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[a])/i,abbreviated:/^(dom|lun|mar|mi[e]|jue|vie|s[a]b)/i,wide:/^(domingo|lunes|martes|mi[e]rcoles|jueves|viernes|s[a]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:$y({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (maana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},Fv={code:"es",formatDistance:(e,t,r)=>{let n;const s=zv[e];return n="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"en "+n:"hace "+n:n},formatLong:Dv,formatRelative:(e,t,r,n)=>1!==t.getHours()?Iv[e]:Lv[e],localize:Rv,match:$v,options:{weekStartsOn:1,firstWeekContainsDate:1}},Bv={en:Uy,es:Fv},Uv=function(e){var t=e.startOfWeek,r=e.getDay,n=e.format,s=e.locales;return new ax({formats:Ay,firstOfWeek:function(e){return r(t(new Date,{locale:s[e]}))},format:function(e,t,r){return n(new Date(e),t,{locale:s[r]})}})}({format:Ob,parse:function(e,t,r,n){const s=()=>Yy(n?.in||r,NaN),a=Object.assign({},Wy()),o=n?.locale??a.locale??Uy,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0;if(!t)return e?s():Gy(r,n?.in);const c={firstWeekContainsDate:i,weekStartsOn:l,locale:o},d=[new Ab(n?.in,r)],u=t.match(wv).map(e=>{const t=e[0];return t in gb?(0,gb[t])(e,o.formatLong):e}).join("").match(vv),f=[];for(let r of u){!n?.useAdditionalWeekYearTokens&&wb(r)&&jb(r,t,e),!n?.useAdditionalDayOfYearTokens&&vb(r)&&jb(r,t,e);const a=r[0],i=bv[a];if(i){const{incompatibleTokens:t}=i;if(Array.isArray(t)){const e=f.find(e=>t.includes(e.token)||e.token===a);if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${r}\` at the same time`)}else if("*"===i.incompatibleTokens&&f.length>0)throw new RangeError(`The format string mustn't contain \`${r}\` and any other token at the same time`);f.push({token:a,fullToken:r});const n=i.run(e,r,o.match,c);if(!n)return s();d.push(n.setter),e=n.rest}else{if(a.match(_v))throw new RangeError("Format string contains an unescaped latin alphabet character `"+a+"`");if("''"===r?r="'":"'"===a&&(r=Cv(r)),0!==e.indexOf(r))return s();e=e.slice(r.length)}}if(e.length>0&&kv.test(e))return s();const p=d.map(e=>e.priority).sort((e,t)=>t-e).filter((e,t,r)=>r.indexOf(e)===t).map(e=>d.filter(t=>t.priority===e).sort((e,t)=>t.subPriority-e.subPriority)).map(e=>e[0]);let m=Gy(r,n?.in);if(isNaN(+m))return s();const h={};for(const e of p){if(!e.validate(m,c))return s();const t=e.set(m,h,c);Array.isArray(t)?(m=t[0],Object.assign(h,t[1])):m=t}return m},startOfWeek:(e,t)=>rb(e,{...t,weekStartsOn:1}),getDay:Sv,locales:Bv}),Hv=(e,t)=>{const r={video:{bg:"#3B82F6",border:"#2563EB",text:"#FFFFFF"},test:{bg:"#EF4444",border:"#DC2626",text:"#FFFFFF"},pdf:{bg:"#10B981",border:"#059669",text:"#FFFFFF"},default:{bg:"#8B5CF6",border:"#7C3AED",text:"#FFFFFF"}};return r[e]||r.default},Wv=({event:e})=>(0,Qr.jsx)("div",{className:"flex items-center gap-1 text-xs overflow-hidden px-1",children:(0,Qr.jsx)("span",{className:"truncate font-medium",children:e.title})}),Qv=({date:e,events:t,pageColors:r,getColor:n,isDarkMode:s,t:a})=>{const o=rb(e,{weekStartsOn:1}),i=Array.from({length:7},(e,t)=>{const r=new Date(o);return r.setDate(o.getDate()+t),r}),l=Bv.es;return(0,Qr.jsx)("div",{className:"grid grid-cols-7 gap-2 p-4 rounded-xl border-2",style:{backgroundColor:r.bgCard,borderColor:n("borderColor","#e5e7eb")},children:i.map((e,a)=>{const o=(e=>t.filter(t=>Ev(new Date(t.start),e)))(e),i=Ov(e);return(0,Qr.jsxs)("div",{className:"flex flex-col rounded-lg overflow-hidden border",style:{borderColor:i?r.accent:s?"rgba(255,255,255,0.1)":n("borderColor","#e5e7eb"),borderWidth:i?"2px":"1px"},children:[(0,Qr.jsxs)("div",{className:"px-2 py-2 text-center",style:{backgroundColor:i?r.accent:r.bgSubtle,color:i?"#ffffff":r.text},children:[(0,Qr.jsx)("div",{className:"text-xs font-medium uppercase",children:Ob(e,"EEE",{locale:l})}),(0,Qr.jsx)("div",{className:"text-lg font-bold",children:Ob(e,"d")})]}),(0,Qr.jsx)("div",{className:"flex-1 p-2 space-y-1 min-h-[120px]",style:{backgroundColor:r.bgCard},children:0===o.length?(0,Qr.jsx)("div",{className:"text-xs text-center py-4",style:{color:r.textMuted},children:"-"}):o.map((e,t)=>{const r=Hv(e.lessonType);return(0,Qr.jsx)("div",{className:"text-xs p-1.5 rounded truncate",style:{backgroundColor:r.bg,color:r.text},title:e.title,children:e.title},t)})})]},a)})})},Vv=({date:e,events:t,pageColors:r,getColor:n,isDarkMode:s,t:o})=>{e.getFullYear();const i=function(e,t){const{start:r,end:n}=Tv(t?.in,e);let s=+r>+n;const a=s?+r:+n,o=s?n:r;o.setHours(0,0,0,0),o.setDate(1);let i=t?.step??1;if(!i)return[];i<0&&(i=-i,s=!s);const l=[];for(;+o<=a;)l.push(Yy(r,o)),o.setMonth(o.getMonth()+i);return s?l.reverse():l}({start:eb(e),end:Mv(e)}),l=Bv.es,c=(0,a.useMemo)(()=>{const e=new Map;return t.forEach(t=>{const r=Ob(new Date(t.start),"yyyy-MM-dd");e.has(r)||e.set(r,[]),e.get(r).push(t)}),e},[t]),[d,u]=(0,a.useState)({show:!1,x:0,y:0,events:[],date:null}),f=()=>{u({show:!1,x:0,y:0,events:[],date:null})};return(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("div",{className:"grid grid-cols-3 md:grid-cols-4 gap-4 p-4 rounded-xl border-2",style:{backgroundColor:r.bgCard,borderColor:n("borderColor","#e5e7eb")},children:i.map((e,t)=>{const n=function(e,t){const r=Gy(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}(e),s=function(e,t){const{start:r,end:n}=Tv(t?.in,e);let s=+r>+n;const a=s?+r:+n,o=s?n:r;o.setHours(0,0,0,0);let i=t?.step??1;if(!i)return[];i<0&&(i=-i,s=!s);const l=[];for(;+o<=a;)l.push(Yy(r,o)),o.setDate(o.getDate()+i),o.setHours(0,0,0,0);return s?l.reverse():l}({start:n,end:Pv(e)}),a=(Sv(n)+6)%7;return(0,Qr.jsxs)("div",{className:"p-2",children:[(0,Qr.jsx)("div",{className:"text-sm font-semibold mb-2 text-center capitalize",style:{color:r.text},children:Ob(e,"MMMM",{locale:l})}),(0,Qr.jsx)("div",{className:"grid grid-cols-7 gap-0.5 mb-1",children:["L","M","X","J","V","S","D"].map((e,t)=>(0,Qr.jsx)("div",{className:"text-[9px] text-center font-medium",style:{color:r.textMuted},children:e},t))}),(0,Qr.jsxs)("div",{className:"grid grid-cols-7 gap-0.5",children:[Array.from({length:a}).map((e,t)=>(0,Qr.jsx)("div",{className:"w-5 h-5"},`empty-${t}`)),s.map((e,t)=>{const n=Ob(e,"yyyy-MM-dd"),s=c.get(n)||[],a=s.length>0,o=Ov(e);return(0,Qr.jsx)("div",{className:"w-5 h-5 flex items-center justify-center text-[10px] rounded relative cursor-default",style:{backgroundColor:o?r.accent:a?"#3B82F6":"transparent",color:o||a?"#ffffff":r.text},onMouseEnter:t=>((e,t,r)=>{if(r.length>0){const n=e.currentTarget.getBoundingClientRect();u({show:!0,x:n.left+n.width/2,y:n.top-10,events:r,date:t})}})(t,e,s),onMouseLeave:f,children:(0,Qr.jsx)("span",{style:{opacity:a||o?1:.6},children:Av(e)})},t)})]})]},t)})}),d.show&&(0,Qr.jsxs)("div",{className:"fixed z-50 px-3 py-2 rounded-lg shadow-lg max-w-xs",style:{left:d.x,top:d.y,transform:"translate(-50%, -100%)",backgroundColor:s?"#1f2937":"#ffffff",border:`1px solid ${s?"rgba(255,255,255,0.1)":n("borderColor","#e5e7eb")}`},children:[(0,Qr.jsx)("div",{className:"text-xs font-semibold mb-1",style:{color:r.text},children:d.date&&Ob(d.date,"d MMMM yyyy",{locale:l})}),d.events.map((e,t)=>{const n=Hv(e.lessonType);return(0,Qr.jsxs)("div",{className:"text-xs py-0.5 flex items-center gap-1",style:{color:r.text},children:[(0,Qr.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:n.bg}}),(0,Qr.jsx)("span",{className:"truncate",children:e.title})]},t)})]})]})},Kv=({label:e,onNavigate:t,onView:r,view:n,views:s,pageColors:a,getColor:o,isDarkMode:i})=>{const{t:l}=k(),c={month:l("calendar.month","Mes"),week:l("calendar.week","Semana"),year:l("calendar.year","Ao")};return(0,Qr.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 p-3 rounded-xl border-2",style:{backgroundColor:a.bgCard,borderColor:o("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("button",{onClick:()=>t("TODAY"),className:"px-4 py-2 text-sm font-medium rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:a.primaryBg,color:"#ffffff"},children:l("calendar.today","Hoy")}),(0,Qr.jsx)("button",{onClick:()=>t("PREV"),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:a.hoverBg},"aria-label":l("calendar.previous","Anterior"),children:(0,Qr.jsx)(sl,{size:20,style:{color:a.text}})}),(0,Qr.jsx)("button",{onClick:()=>t("NEXT"),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:a.hoverBg},"aria-label":l("calendar.next","Siguiente"),children:(0,Qr.jsx)(al,{size:20,style:{color:a.text}})})]}),(0,Qr.jsx)("h2",{className:"text-lg font-semibold capitalize",style:{color:a.text},children:e}),(0,Qr.jsx)("div",{className:"flex rounded-lg overflow-hidden border-2",style:{borderColor:o("borderColor","#e5e7eb")},children:s.map(e=>(0,Qr.jsx)("button",{onClick:()=>r(e),className:"px-3 py-1.5 text-sm font-medium transition-colors",style:{backgroundColor:n===e?a.primaryBg:a.bgSubtle,color:n===e?"#ffffff":a.text},children:c[e]||e},e))})]})},Yv=({lessons:e=[],onSelectLesson:t,defaultView:r="month",pageColors:n,getColor:s,isDarkMode:o})=>{const{t:i,i18n:l}=k(),[c,d]=(0,a.useState)(r),[u,f]=(0,a.useState)(new Date),p=(0,a.useMemo)(()=>e.filter(e=>e.meta?._start_date).map(e=>{const t=new Date(e.meta._start_date);t.setHours(0,0,0,0);const r=qv(t,24),n=e.meta?._lesson_type||"default",s=Hv(n);return{id:e.id,title:e.title?.rendered||e.title||i("calendar.untitledLesson","Leccin sin ttulo"),start:t,end:r,allDay:!0,lessonType:n,lesson:e,color:s.bg,borderColor:s.border,textColor:s.text}}),[e,i,o]),m=((0,a.useMemo)(()=>e.filter(e=>!e.meta?._start_date).length,[e]),(0,a.useCallback)(e=>({style:{backgroundColor:e.color,borderColor:e.borderColor,color:e.textColor,borderRadius:"6px",border:`2px solid ${e.borderColor}`,fontSize:"12px",padding:"2px 6px",cursor:"default"}}),[])),h=(0,a.useMemo)(()=>({today:i("calendar.today","Hoy"),previous:i("calendar.previous","Anterior"),next:i("calendar.next","Siguiente"),month:i("calendar.month","Mes"),week:i("calendar.week","Semana"),year:i("calendar.year","Ao"),date:i("calendar.date","Fecha"),time:i("calendar.time","Hora"),event:i("calendar.event","Evento"),noEventsInRange:i("calendar.noEventsInRange","No hay lecciones programadas en este perodo."),showMore:e=>i("calendar.showMore","+ {{count}} ms",{count:e})}),[i]),g=l.language?.startsWith("es")?"es":"en",x=(0,a.useCallback)(e=>{d(e)},[]),y=(0,a.useCallback)(e=>{const t=new Date(u);if("TODAY"===e)return void f(new Date);const r="NEXT"===e?1:-1;"month"===c?t.setMonth(t.getMonth()+r):"week"===c?t.setDate(t.getDate()+7*r):"year"===c&&t.setFullYear(t.getFullYear()+r),f(t)},[u,c]),b=(0,a.useCallback)(()=>{const e=l.language?.startsWith("es")?Bv.es:Bv.en;if("month"===c)return Ob(u,"MMMM yyyy",{locale:e});if("week"===c){const t=rb(u,{weekStartsOn:1}),r=new Date(t);return r.setDate(t.getDate()+6),`${Ob(t,"d MMM",{locale:e})} - ${Ob(r,"d MMM yyyy",{locale:e})}`}return"year"===c?Ob(u,"yyyy",{locale:e}):""},[u,c,l.language]),v=(0,a.useCallback)(e=>(0,Qr.jsx)(Kv,{...e,label:b(),view:c,views:["month","week","year"],onView:x,onNavigate:y,pageColors:n,getColor:s,isDarkMode:o}),[n,s,o,c,x,y,b]);return(0,Qr.jsxs)("div",{className:"lesson-calendar",children:[(0,Qr.jsx)(v,{}),"month"===c&&(0,Qr.jsx)("div",{className:"rounded-xl border-2 p-4",style:{minHeight:"500px",backgroundColor:n.bgCard,borderColor:s("borderColor","#e5e7eb")},children:(0,Qr.jsx)(Ty,{localizer:Uv,events:p,startAccessor:"start",endAccessor:"end",style:{height:500},view:"month",date:u,onNavigate:f,views:["month"],eventPropGetter:m,onSelectEvent:()=>{},messages:h,culture:g,components:{toolbar:()=>null,event:Wv},popup:!0,selectable:!1})}),"week"===c&&(0,Qr.jsx)(Qv,{date:u,events:p,pageColors:n,getColor:s,isDarkMode:o,t:i}),"year"===c&&(0,Qr.jsx)(Vv,{date:u,events:p,pageColors:n,getColor:s,isDarkMode:o,t:i}),(0,Qr.jsx)("style",{children:`\n        .rbc-calendar {\n          font-family: inherit;\n        }\n        .rbc-toolbar {\n          display: none;\n        }\n        .rbc-header {\n          padding: 10px 4px;\n          font-weight: 600;\n          font-size: 13px;\n          border-bottom: 1px solid ${o?"rgba(255,255,255,0.1)":s("borderColor","#e5e7eb")};\n          background: ${n.bgSubtle};\n          color: ${n.text};\n        }\n        .rbc-month-view {\n          border: 1px solid ${o?"rgba(255,255,255,0.1)":s("borderColor","#e5e7eb")};\n          border-radius: 8px;\n          overflow: hidden;\n        }\n        .rbc-month-row {\n          border-top: 1px solid ${o?"rgba(255,255,255,0.1)":s("borderColor","#e5e7eb")};\n        }\n        .rbc-day-bg {\n          background: ${n.bgCard};\n        }\n        .rbc-day-bg + .rbc-day-bg {\n          border-left: 1px solid ${o?"rgba(255,255,255,0.1)":s("borderColor","#e5e7eb")};\n        }\n        .rbc-today {\n          background-color: ${n.accent}20 !important;\n        }\n        .rbc-off-range-bg {\n          background-color: ${n.bgSubtle};\n        }\n        .rbc-date-cell {\n          padding: 4px 8px;\n          text-align: right;\n          font-size: 13px;\n          color: ${n.text};\n        }\n        .rbc-date-cell.rbc-off-range {\n          color: ${n.textMuted};\n        }\n        .rbc-date-cell.rbc-now {\n          font-weight: 700;\n        }\n        .rbc-date-cell.rbc-now > a,\n        .rbc-date-cell.rbc-now > button {\n          background-color: ${n.accent} !important;\n          background: ${n.accent} !important;\n          color: #ffffff !important;\n          padding: 2px 6px !important;\n          border-radius: 4px !important;\n          font-weight: 700 !important;\n        }\n        .rbc-date-cell > a,\n        .rbc-date-cell > button,\n        .rbc-date-cell a,\n        .rbc-date-cell button {\n          background-color: transparent !important;\n          background: transparent !important;\n          color: ${n.text} !important;\n          pointer-events: none !important;\n          cursor: default !important;\n          text-decoration: none !important;\n          font-weight: 600 !important;\n          border: none !important;\n          box-shadow: none !important;\n          outline: none !important;\n          padding: 0 !important;\n          margin: 0 !important;\n        }\n        .rbc-date-cell > a:hover,\n        .rbc-date-cell > a:focus,\n        .rbc-date-cell > a:active,\n        .rbc-date-cell > button:hover,\n        .rbc-date-cell > button:focus,\n        .rbc-date-cell > button:active,\n        .rbc-date-cell a:hover,\n        .rbc-date-cell button:hover {\n          background-color: transparent !important;\n          background: transparent !important;\n          color: ${n.text} !important;\n          text-decoration: none !important;\n          outline: none !important;\n          box-shadow: none !important;\n        }\n        .rbc-date-cell.rbc-off-range > a,\n        .rbc-date-cell.rbc-off-range > button {\n          color: ${n.textMuted} !important;\n        }\n        .rbc-event {\n          cursor: default;\n          pointer-events: none;\n        }\n        .rbc-day-bg {\n          cursor: default;\n        }\n        .rbc-show-more {\n          color: ${s("primary","#3b82f6")};\n          font-weight: 500;\n          font-size: 12px;\n          background: transparent;\n          pointer-events: none;\n        }\n        .rbc-row-content {\n          z-index: 1;\n        }\n      `})]})},Gv=({lesson:e,onClose:t,pageColors:r,getColor:n,isDarkMode:s})=>{const{t:a}=k();if(!e)return null;const o=e.meta?._lesson_type||"default",i=e.meta?._start_date?new Date(e.meta._start_date).toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"}):a("calendar.noDate","Sin fecha"),l={video:a("lessons.types.video","Video"),test:a("lessons.types.test","Test"),pdf:a("lessons.types.pdf","PDF"),default:a("lessons.types.lesson","Leccin")},c="video"===o?fl:"test"===o?fu:ul;return(0,Qr.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t,children:(0,Qr.jsxs)("div",{className:"rounded-xl shadow-2xl max-w-md w-full p-6 transform transition-all",style:{backgroundColor:r.bgCard},onClick:e=>e.stopPropagation(),children:[(0,Qr.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:r.hoverBg},children:(0,Qr.jsx)(c,{size:24,style:{color:r.text}})}),(0,Qr.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full",style:{backgroundColor:r.hoverBg,color:r.text},children:l[o]||l.default})]}),(0,Qr.jsx)("button",{onClick:t,className:"p-2 rounded-lg transition-colors",style:{backgroundColor:r.hoverBg},children:(0,Qr.jsx)(En,{size:18,style:{color:r.text}})})]}),(0,Qr.jsx)("h3",{className:"text-xl font-bold mb-4",style:{color:r.text},children:e.title?.rendered||e.title||a("calendar.untitledLesson","Leccin sin ttulo")}),(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:r.bgSubtle},children:[(0,Qr.jsx)(tl,{size:18,style:{color:r.textMuted}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"text-xs",style:{color:r.textMuted},children:a("calendar.startDate","Fecha de inicio")}),(0,Qr.jsx)("div",{className:"font-semibold",style:{color:r.text},children:i})]})]}),void 0!==e.meta?._lesson_order&&(0,Qr.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:r.bgSubtle},children:[(0,Qr.jsx)("span",{className:"text-sm font-mono",style:{color:r.textMuted},children:"#"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"text-xs",style:{color:r.textMuted},children:a("calendar.order","Orden")}),(0,Qr.jsx)("div",{className:"font-semibold",style:{color:r.text},children:e.meta._lesson_order})]})]})]}),(0,Qr.jsx)("div",{className:"mt-6 pt-4 border-t",style:{borderColor:s?"rgba(255,255,255,0.1)":n("borderColor","#e5e7eb")},children:(0,Qr.jsx)("button",{onClick:t,className:"w-full py-2.5 px-4 font-medium rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:r.primaryBg,color:"#ffffff"},children:a("common.close","Cerrar")})})]})})},Xv=()=>{const{t:e}=k(),{courseId:t}=pt(),{getColor:r,isDarkMode:n}=Yr(),{lessons:s,loading:o,error:i}=Vs({courseId:t,perPage:100}),[l,c]=(0,a.useState)(null),d={text:n?r("textPrimary","#f9fafb"):r("primary","#1a202c"),textMuted:r("textSecondary",n?"#9ca3af":"#6b7280"),accent:r("accent","#f59e0b"),bgCard:n?r("secondaryBackground","#1f2937"):"#ffffff",bgSubtle:n?"rgba(255,255,255,0.05)":`${r("primary","#1a202c")}05`,hoverBg:n?"rgba(255,255,255,0.1)":`${r("primary","#1a202c")}10`,hoverBgStrong:n?"rgba(255,255,255,0.15)":`${r("primary","#1a202c")}20`,primaryBg:r("primary","#1a202c")},u=(0,a.useCallback)(e=>{c(e)},[]),f=(0,a.useCallback)(()=>{c(null)},[]);return(0,Qr.jsxs)("div",{className:"flex h-full w-full",children:[(0,Qr.jsx)(wu,{}),(0,Qr.jsxs)("div",{className:"flex-1 flex flex-col overflow-auto",style:{backgroundColor:r("secondaryBackground","#f3f4f6")},children:[(0,Qr.jsx)("header",{className:"px-6 py-3 border-b sticky top-0 z-[1] flex-shrink-0",style:{borderBottomColor:n?"rgba(255,255,255,0.1)":`${r("primary","#1a202c")}15`,backgroundColor:r("secondaryBackground","#f3f4f6")},children:(0,Qr.jsxs)("nav",{className:"flex items-center text-sm space-x-2",children:[(0,Qr.jsx)(Zt,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:d.text},children:e("sidebar.courses","Cursos")}),(0,Qr.jsx)(al,{size:16,style:{color:d.textMuted}}),(0,Qr.jsx)("span",{className:"font-medium",style:{color:d.text},children:e("courses.studyPlanner","Planificador")})]})}),(0,Qr.jsxs)("div",{className:"max-w-7xl w-full mx-auto px-4 py-6 pb-24",children:[(0,Qr.jsx)("div",{className:"mb-6",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:d.hoverBg},children:(0,Qr.jsx)(tl,{size:28,style:{color:d.text}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",style:{color:d.text},children:e("courses.studyPlanner","Planificador")}),(0,Qr.jsx)("p",{className:"text-sm mt-1",style:{color:d.textMuted},children:e("calendar.description","Visualiza el calendario de lecciones del curso")})]})]})}),o&&(0,Qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Qr.jsx)(Mn,{className:"w-8 h-8 animate-spin",style:{color:d.text}})}),i&&(0,Qr.jsx)("div",{className:"p-6 rounded-lg border-2",style:{backgroundColor:n?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderColor:"#ef4444",color:"#ef4444"},children:i.message}),!o&&!i&&0===s.length&&(0,Qr.jsxs)("div",{className:"p-12 text-center rounded-xl border-2",style:{backgroundColor:d.bgCard,borderColor:r("borderColor","#e5e7eb")},children:[(0,Qr.jsx)(tl,{size:64,className:"mx-auto mb-4",style:{color:d.textMuted}}),(0,Qr.jsx)("h3",{className:"text-xl font-semibold mb-2",style:{color:d.text},children:e("calendar.noLessons","No hay lecciones")}),(0,Qr.jsx)("p",{style:{color:d.textMuted},children:e("calendar.noLessonsDescription","Este curso an no tiene lecciones programadas.")})]}),!o&&!i&&s.length>0&&(0,Qr.jsx)(Yv,{lessons:s,onSelectLesson:u,defaultView:"month",pageColors:d,getColor:r,isDarkMode:n}),l&&(0,Qr.jsx)(Gv,{lesson:l,onClose:f,pageColors:d,getColor:r,isDarkMode:n})]})]})]})},Zv=cn("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),Jv=()=>{const{t:e}=k(),{courseId:t}=pt(),{getColor:r,isDarkMode:n}=Yr(),{course:s}=yu(t),o=s?.title?.rendered||s?.title||"",i={text:n?r("textPrimary","#f9fafb"):r("primary","#1a202c"),textMuted:n?r("textSecondary","#9ca3af"):`${r("primary","#1a202c")}70`,accent:r("accent","#f59e0b"),hoverBg:n?r("accent","#f59e0b"):r("primary","#1a202c"),buttonBg:n?r("accent","#f59e0b"):r("primary","#3b82f6"),buttonText:n?r("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:n?r("primary","#3b82f6"):r("accent","#f59e0b")},[l,c]=(0,a.useState)(new Set),[d,u]=(0,a.useState)([]),[f,p]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null),[g,x]=(0,a.useState)(null),{isCompleted:y,markComplete:b,unmarkComplete:v,loading:w,fetchCompletedContent:j}=Rd(t,!1);(0,a.useEffect)(()=>{t&&j()},[t,j]),(0,a.useEffect)(()=>{(async()=>{if(t){p(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=await(0,Qs.getCourseLessons)(e,{perPage:100}),n=js(r.data||[]).map(e=>{const t=(e.meta?._lesson_steps||[]).filter(e=>"pdf"===e.type||"text"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,materialSteps:t}}).filter(e=>e.materialSteps.length>0);u(n)}catch(e){console.error("Error fetching lessons:",e),u([])}finally{p(!1)}}})()},[t]);const N=(0,a.useMemo)(()=>d.flatMap(e=>e.materialSteps.map(t=>({step:t,lesson:e,originalStepIndex:(e.meta?._lesson_steps||[]).findIndex(e=>e.type===t.type&&e.title===t.title&&JSON.stringify(e.data)===JSON.stringify(t.data))}))),[d]),_=()=>m&&g?N.findIndex(e=>e.step===m&&e.lesson.id===g.id):-1,C=()=>{if(!g||!m)return!1;const e=_();if(-1===e)return!1;const{originalStepIndex:t}=N[e];return y(g.id,"step",g.id,t)},S=_(),E=S>0,O=S<N.length-1,M=e=>{let t=null;if(e?.data?.url)t=e.data.url;else if(e?.data?.file_id)return null;return t&&"https:"===window.location.protocol&&(t=t.replace(/^http:\/\//i,"https://")),t};return(0,Qr.jsx)(ju,{courseId:t,courseName:o,sectionName:e("courses.supportMaterial"),children:(0,Qr.jsxs)("div",{className:"relative h-full",children:[(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(m?"-translate-x-full":"translate-x-0"),children:(0,Qr.jsx)("div",{className:"h-full overflow-y-auto",children:(0,Qr.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-8 pb-12",children:f?(0,Qr.jsx)("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:r("background","#ffffff"),borderColor:r("borderColor","#e5e7eb")},children:[1,2,3].map(e=>(0,Qr.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse",style:{borderBottom:e<3?`1px solid ${r("borderColor","#e5e7eb")}`:"none"},children:[(0,Qr.jsx)("div",{className:"w-5 h-5 rounded",style:{backgroundColor:i.text+"20"}}),(0,Qr.jsx)("div",{className:"h-4 rounded flex-1",style:{backgroundColor:i.text+"15",maxWidth:"200px"}}),(0,Qr.jsx)("div",{className:"h-5 w-8 rounded-full",style:{backgroundColor:i.text+"10"}})]},e))}):0===d.length?(0,Qr.jsxs)("div",{className:"text-center py-12 rounded-lg border",style:{backgroundColor:r("background","#ffffff"),borderColor:r("borderColor","#e5e7eb")},children:[(0,Qr.jsx)(Zv,{size:40,className:"mx-auto mb-3",style:{color:i.text+"30"}}),(0,Qr.jsx)("p",{className:"text-sm font-medium",style:{color:i.text},children:e("supportMaterial.noMaterials")}),(0,Qr.jsx)("p",{className:"text-xs mt-1",style:{color:i.textMuted},children:e("supportMaterial.noMaterialsDescription")})]}):(0,Qr.jsx)("div",{className:"py-4",children:(0,Qr.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:r("secondaryBackground","#f8f9fa"),borderColor:n?r("accent","#f59e0b"):r("borderColor","#e5e7eb")},children:d.map((t,s)=>{const a=l.has(t.id),o=t.materialSteps.length,u=t.title?.rendered||t.title||e("courses.untitledLesson");return(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200",style:{backgroundColor:n?"rgba(255,255,255,0.05)":`${r("primary","#1a202c")}05`},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,Qr.jsx)(ul,{size:20,style:{color:i.text},className:"flex-shrink-0"}),(0,Qr.jsx)("span",{className:"font-semibold text-left truncate",style:{color:i.text},dangerouslySetInnerHTML:{__html:u}})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[(0,Qr.jsxs)("span",{className:"text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",style:{backgroundColor:n?"rgba(255,255,255,0.1)":`${r("primary","#1a202c")}10`,color:i.text},children:[o," ",(0,Qr.jsx)("span",{className:"hidden sm:inline",children:e(1===o?"supportMaterial.file":"supportMaterial.files")})]}),(0,Qr.jsxs)("button",{onClick:()=>{return e=t.id,void c(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r});var e},className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-1.5",style:{backgroundColor:i.buttonBg,color:i.buttonText},onMouseEnter:e=>{n?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=i.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=i.buttonBg},children:[e(a?"supportMaterial.hideLesson":"supportMaterial.showLesson"),a?(0,Qr.jsx)(Qi,{size:16}):(0,Qr.jsx)(Vi,{size:16})]})]})]}),a&&(0,Qr.jsx)("div",{children:t.materialSteps.map((s,a)=>(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:a>0?"mx-6":"",style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3 px-4 sm:px-6 py-4 transition-colors duration-150",onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.05)":`${r("primary","#1a202c")}03`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)(Au,{size:18,style:{color:i.textMuted},className:"flex-shrink-0"}),(0,Qr.jsx)("span",{className:"text-sm font-medium flex-1 truncate",style:{color:i.text},children:s.title}),(0,Qr.jsx)("button",{onClick:()=>((e,t)=>{h(e),x(t)})(s,t),className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex-shrink-0",style:{backgroundColor:i.buttonBg,color:i.buttonText},onMouseEnter:e=>{n?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=i.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=i.buttonBg},children:e("supportMaterial.available")})]})]},s.id||a))}),s<d.length-1&&(0,Qr.jsx)("div",{style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},t.id)})})})})})}),(0,Qr.jsx)("div",{className:"absolute inset-0 w-full transition-transform duration-300 ease-in-out "+(m?"translate-x-0":"translate-x-full"),style:{backgroundColor:r("secondaryBackground","#f8f9fa")},children:m&&(0,Qr.jsxs)("div",{className:"h-full flex flex-col w-full overflow-hidden",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 sm:py-1.5 border-b flex-shrink-0 gap-2",style:{backgroundColor:r("background","#ffffff"),borderColor:r("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden",children:[(0,Qr.jsxs)("nav",{className:"hidden sm:flex items-center text-xs space-x-1.5",children:[(0,Qr.jsx)(Zt,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:i.text},children:e("sidebar.studyPlanner")}),(0,Qr.jsx)(al,{size:12,style:{color:i.textMuted}}),(0,Qr.jsx)(Zt,{to:`/courses/${t}/dashboard`,className:"transition-colors duration-200 hover:underline font-medium",style:{color:i.text},dangerouslySetInnerHTML:{__html:o}}),(0,Qr.jsx)(al,{size:12,style:{color:i.textMuted}}),(0,Qr.jsx)("span",{className:"font-medium",style:{color:i.textMuted},children:e("courses.supportMaterial")})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(ul,{size:16,style:{color:i.accent},className:"flex-shrink-0"}),(0,Qr.jsx)("h2",{className:"text-sm font-medium leading-tight truncate",style:{color:i.text},children:m.title})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,Qr.jsx)("button",{onClick:()=>{const e=_();if(e>0){const t=N[e-1];h(t.step),x(t.lesson)}},disabled:!E,className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:n?`${i.accent}15`:`${i.text}10`,opacity:E?1:.4,cursor:E?"pointer":"not-allowed"},onMouseEnter:e=>{E&&(e.currentTarget.style.backgroundColor=n?`${i.accent}25`:`${i.text}20`)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${i.accent}15`:`${i.text}10`},title:e("navigation.previous"),children:(0,Qr.jsx)(sl,{size:18,style:{color:i.text}})}),(0,Qr.jsxs)("button",{onClick:async()=>{if(!g||!m||!t)return;const e=_();if(-1===e)return;const{originalStepIndex:r}=N[e];try{y(g.id,"step",g.id,r)?await v(g.id,"step",g.id,r):await b(g.id,"step",g.id,r),await j(),window.dispatchEvent(new CustomEvent("courseProgressUpdated",{detail:{courseId:t}}))}catch(e){console.error("Error toggling step completion:",e)}},disabled:w,className:"p-1.5 sm:px-3 sm:py-1.5 rounded-lg transition-all flex items-center gap-1.5 text-xs",style:{backgroundColor:C()?i.accent:n?`${i.accent}15`:`${i.text}10`,color:C()?"#ffffff":i.text},onMouseEnter:e=>{C()||(e.currentTarget.style.backgroundColor=n?`${i.accent}25`:`${i.text}20`)},onMouseLeave:e=>{C()||(e.currentTarget.style.backgroundColor=n?`${i.accent}15`:`${i.text}10`)},title:C()?e("progress.completed"):e("progress.markComplete"),children:[C()?(0,Qr.jsx)(Ui,{size:14}):(0,Qr.jsx)(eu,{size:14}),(0,Qr.jsx)("span",{className:"font-medium hidden sm:inline",children:C()?e("progress.completed"):e("progress.markComplete")})]}),(0,Qr.jsx)("button",{onClick:()=>{const e=_();if(e<N.length-1){const t=N[e+1];h(t.step),x(t.lesson)}},disabled:!O,className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:n?`${i.accent}15`:`${i.text}10`,opacity:O?1:.4,cursor:O?"pointer":"not-allowed"},onMouseEnter:e=>{O&&(e.currentTarget.style.backgroundColor=n?`${i.accent}25`:`${i.text}20`)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${i.accent}15`:`${i.text}10`},title:e("navigation.next"),children:(0,Qr.jsx)(al,{size:18,style:{color:i.text}})}),(0,Qr.jsx)("button",{onClick:()=>{h(null),x(null)},className:"p-1.5 rounded-lg transition-all ml-1",style:{backgroundColor:n?`${i.accent}15`:`${i.text}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?`${i.accent}25`:`${i.text}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${i.accent}15`:`${i.text}10`},title:e("common.back"),children:(0,Qr.jsx)(En,{size:18,style:{color:i.text}})})]})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-hidden",children:M(m)?(0,Qr.jsx)("iframe",{src:M(m),className:"w-full h-full border-0",title:m.title}):"text"===m.type&&m.data?.content?(0,Qr.jsx)("div",{className:"px-6 md:px-24 py-6 overflow-y-auto h-full prose max-w-none",style:{backgroundColor:r("background","#ffffff"),color:i.text},dangerouslySetInnerHTML:{__html:m.data.content}}):(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)(ul,{size:48,className:"mx-auto mb-3",style:{color:i.text+"30"}}),(0,Qr.jsx)("p",{className:"text-sm font-medium",style:{color:i.text},children:e("supportMaterial.noPreview")}),(0,Qr.jsx)("p",{className:"text-xs mt-1",style:{color:i.textMuted},children:e("supportMaterial.noPreviewDescription")})]})})})]})})]})})},ew=cn("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),tw=()=>{const{t:e}=k(),{courseId:t}=pt(),{getColor:r,isDarkMode:n}=Yr(),{course:s}=yu(t),o=s?.title?.rendered||s?.title||"",i={text:n?r("textPrimary","#f9fafb"):r("primary","#1a202c"),textMuted:n?r("textSecondary","#9ca3af"):`${r("primary","#1a202c")}70`,accent:r("accent","#f59e0b"),hoverBg:n?r("accent","#f59e0b"):r("primary","#1a202c"),buttonBg:n?r("accent","#f59e0b"):r("primary","#3b82f6"),buttonText:n?r("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:n?r("primary","#3b82f6"):r("accent","#f59e0b")},[l,c]=(0,a.useState)(new Set),[d,u]=(0,a.useState)([]),[f,p]=(0,a.useState)(!0),[m,h]=(0,a.useState)(null),[g,x]=(0,a.useState)(null),{isCompleted:y,markComplete:b,unmarkComplete:v,loading:w,fetchCompletedContent:j}=Rd(t,!1);(0,a.useEffect)(()=>{t&&j()},[t,j]),(0,a.useEffect)(()=>{(async()=>{if(t){p(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=await(0,Qs.getCourseLessons)(e,{perPage:100}),n=js(r.data||[]).map(e=>{const t=(e.meta?._lesson_steps||[]).filter(e=>"video"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,videoSteps:t}}).filter(e=>e.videoSteps.length>0);u(n)}catch(e){console.error("Error fetching lessons:",e),u([])}finally{p(!1)}}})()},[t]);const N=(0,a.useMemo)(()=>d.flatMap(e=>e.videoSteps.map(t=>({step:t,lesson:e,originalStepIndex:(e.meta?._lesson_steps||[]).findIndex(e=>e.type===t.type&&e.title===t.title&&JSON.stringify(e.data)===JSON.stringify(t.data))}))),[d]),_=()=>m&&g?N.findIndex(e=>e.step===m&&e.lesson.id===g.id):-1,C=()=>{if(!g||!m)return!1;const e=_();if(-1===e)return!1;const{originalStepIndex:t}=N[e];return y(g.id,"step",g.id,t)},S=_(),E=S>0,O=S<N.length-1,M=e=>e.data?.video_url||e.data?.url?(e=>{if(!e)return null;const t=e.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)/);if(t)return`https://player.vimeo.com/video/${t[1]}`;const r=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]+)/);return r?`https://www.youtube.com/embed/${r[1]}`:e})(e.data.video_url||e.data.url):null;return(0,Qr.jsx)(ju,{courseId:t,courseName:o,sectionName:e("courses.videosSection"),children:(0,Qr.jsxs)("div",{className:"relative h-full",children:[(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(m?"-translate-x-full":"translate-x-0"),children:(0,Qr.jsx)("div",{className:"h-full overflow-y-auto",children:(0,Qr.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-8 pb-12",children:f?(0,Qr.jsx)("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:r("background","#ffffff"),borderColor:r("borderColor","#e5e7eb")},children:[1,2,3].map(e=>(0,Qr.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse",style:{borderBottom:e<3?`1px solid ${r("borderColor","#e5e7eb")}`:"none"},children:[(0,Qr.jsx)("div",{className:"w-5 h-5 rounded",style:{backgroundColor:i.text+"20"}}),(0,Qr.jsx)("div",{className:"h-4 rounded flex-1",style:{backgroundColor:i.text+"15",maxWidth:"200px"}}),(0,Qr.jsx)("div",{className:"h-5 w-8 rounded-full",style:{backgroundColor:i.text+"10"}})]},e))}):0===d.length?(0,Qr.jsxs)("div",{className:"text-center py-12 rounded-lg border",style:{backgroundColor:r("background","#ffffff"),borderColor:r("borderColor","#e5e7eb")},children:[(0,Qr.jsx)(ew,{size:40,className:"mx-auto mb-3",style:{color:i.text+"30"}}),(0,Qr.jsx)("p",{className:"text-sm font-medium",style:{color:i.text},children:e("videos.noVideos")}),(0,Qr.jsx)("p",{className:"text-xs mt-1",style:{color:i.textMuted},children:e("videos.noVideosDescription")})]}):(0,Qr.jsx)("div",{className:"py-4",children:(0,Qr.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:r("secondaryBackground","#f8f9fa"),borderColor:n?r("accent","#f59e0b"):r("borderColor","#e5e7eb")},children:d.map((t,s)=>{const a=l.has(t.id),o=t.videoSteps.length,u=t.title?.rendered||t.title||e("courses.untitledLesson");return(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200",style:{backgroundColor:n?"rgba(255,255,255,0.05)":`${r("primary","#1a202c")}05`},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,Qr.jsx)(fl,{size:20,style:{color:i.text},className:"flex-shrink-0"}),(0,Qr.jsx)("span",{className:"font-semibold text-left truncate",style:{color:i.text},dangerouslySetInnerHTML:{__html:u}})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[(0,Qr.jsxs)("span",{className:"text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",style:{backgroundColor:n?"rgba(255,255,255,0.1)":`${r("primary","#1a202c")}10`,color:i.text},children:[o," ",(0,Qr.jsx)("span",{className:"hidden sm:inline",children:e(1===o?"videos.video":"videos.videos")})]}),(0,Qr.jsxs)("button",{onClick:()=>{return e=t.id,void c(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r});var e},className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-1.5",style:{backgroundColor:i.buttonBg,color:i.buttonText},onMouseEnter:e=>{n?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=i.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=i.buttonBg},children:[e(a?"videos.hideLesson":"videos.showLesson"),a?(0,Qr.jsx)(Qi,{size:16}):(0,Qr.jsx)(Vi,{size:16})]})]})]}),a&&(0,Qr.jsx)("div",{children:t.videoSteps.map((s,a)=>{const o=(e=>{if(e.data?.duration){const t=parseInt(e.data.duration);return t>0?`${t} min`:null}return null})(s);return(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:a>0?"mx-6":"",style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3 px-4 sm:px-6 py-4 transition-colors duration-150",onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.05)":`${r("primary","#1a202c")}03`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)(nd,{size:18,style:{color:i.textMuted},className:"flex-shrink-0"}),(0,Qr.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,Qr.jsx)("span",{className:"text-sm font-medium truncate",style:{color:i.text},children:s.title}),o&&(0,Qr.jsx)("span",{className:"text-xs",style:{color:i.textMuted},children:o})]}),(0,Qr.jsx)("button",{onClick:()=>((e,t)=>{h(e),x(t)})(s,t),className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex-shrink-0",style:{backgroundColor:i.buttonBg,color:i.buttonText},onMouseEnter:e=>{n?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=i.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=i.buttonBg},children:e("videos.available")})]})]},s.id||a)})}),s<d.length-1&&(0,Qr.jsx)("div",{style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},t.id)})})})})})}),(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(m?"translate-x-0":"translate-x-full"),style:{backgroundColor:r("secondaryBackground","#f8f9fa")},children:m&&(0,Qr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 sm:py-1.5 border-b flex-shrink-0 gap-2",style:{backgroundColor:r("background","#ffffff"),borderColor:r("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden",children:[(0,Qr.jsxs)("nav",{className:"hidden sm:flex items-center text-xs space-x-1.5",children:[(0,Qr.jsx)(Zt,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:i.text},children:e("sidebar.studyPlanner")}),(0,Qr.jsx)(al,{size:12,style:{color:i.textMuted}}),(0,Qr.jsx)(Zt,{to:`/courses/${t}/dashboard`,className:"transition-colors duration-200 hover:underline font-medium",style:{color:i.text},dangerouslySetInnerHTML:{__html:o}}),(0,Qr.jsx)(al,{size:12,style:{color:i.textMuted}}),(0,Qr.jsx)("span",{className:"font-medium",style:{color:i.textMuted},children:e("courses.videos")})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(fl,{size:16,style:{color:i.accent},className:"flex-shrink-0"}),(0,Qr.jsx)("h2",{className:"text-sm font-medium leading-tight truncate",style:{color:i.text},children:m.title})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,Qr.jsx)("button",{onClick:()=>{const e=_();if(e>0){const t=N[e-1];h(t.step),x(t.lesson)}},disabled:!E,className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:n?`${i.accent}15`:`${i.text}10`,opacity:E?1:.4,cursor:E?"pointer":"not-allowed"},onMouseEnter:e=>{E&&(e.currentTarget.style.backgroundColor=n?`${i.accent}25`:`${i.text}20`)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${i.accent}15`:`${i.text}10`},title:e("navigation.previous"),children:(0,Qr.jsx)(sl,{size:18,style:{color:i.text}})}),(0,Qr.jsxs)("button",{onClick:async()=>{if(!g||!m||!t)return;const e=_();if(-1===e)return;const{originalStepIndex:r}=N[e];try{y(g.id,"step",g.id,r)?await v(g.id,"step",g.id,r):await b(g.id,"step",g.id,r),await j(),window.dispatchEvent(new CustomEvent("courseProgressUpdated",{detail:{courseId:t}}))}catch(e){console.error("Error toggling step completion:",e)}},disabled:w,className:"p-1.5 sm:px-3 sm:py-1.5 rounded-lg transition-all flex items-center gap-1.5 text-xs",style:{backgroundColor:C()?i.accent:n?`${i.accent}15`:`${i.text}10`,color:C()?"#ffffff":i.text},onMouseEnter:e=>{C()||(e.currentTarget.style.backgroundColor=n?`${i.accent}25`:`${i.text}20`)},onMouseLeave:e=>{C()||(e.currentTarget.style.backgroundColor=n?`${i.accent}15`:`${i.text}10`)},title:C()?e("progress.completed"):e("progress.markComplete"),children:[C()?(0,Qr.jsx)(Ui,{size:14}):(0,Qr.jsx)(eu,{size:14}),(0,Qr.jsx)("span",{className:"font-medium hidden sm:inline",children:C()?e("progress.completed"):e("progress.markComplete")})]}),(0,Qr.jsx)("button",{onClick:()=>{const e=_();if(e<N.length-1){const t=N[e+1];h(t.step),x(t.lesson)}},disabled:!O,className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:n?`${i.accent}15`:`${i.text}10`,opacity:O?1:.4,cursor:O?"pointer":"not-allowed"},onMouseEnter:e=>{O&&(e.currentTarget.style.backgroundColor=n?`${i.accent}25`:`${i.text}20`)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${i.accent}15`:`${i.text}10`},title:e("navigation.next"),children:(0,Qr.jsx)(al,{size:18,style:{color:i.text}})}),(0,Qr.jsx)("button",{onClick:()=>{h(null),x(null)},className:"p-1.5 rounded-lg transition-all ml-1",style:{backgroundColor:n?`${i.accent}15`:`${i.text}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?`${i.accent}25`:`${i.text}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${i.accent}15`:`${i.text}10`},title:e("common.back"),children:(0,Qr.jsx)(En,{size:18,style:{color:i.text}})})]})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center p-4 md:p-6",style:{backgroundColor:r("secondaryBackground","#f8f9fa")},children:M(m)?(0,Qr.jsx)("div",{className:"w-full h-full max-w-5xl rounded-lg overflow-hidden shadow-lg",style:{backgroundColor:"#000000"},children:(0,Qr.jsx)("iframe",{src:M(m),className:"w-full h-full border-0",title:m.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full w-full rounded-lg",style:{backgroundColor:r("background","#ffffff")},children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)(fl,{size:48,className:"mx-auto mb-3",style:{color:i.text+"30"}}),(0,Qr.jsx)("p",{className:"text-sm font-medium",style:{color:i.text},children:e("videos.noVideoUrl")}),(0,Qr.jsx)("p",{className:"text-xs mt-1",style:{color:i.textMuted},children:e("videos.noVideoUrlDescription")})]})})})]})})]})})},rw=(0,a.createContext)(null),nw=()=>{const e=(0,a.useContext)(rw);if(!e)throw new Error("useRankingContext must be used within CourseRankingProvider");return e},sw=({courseId:e,courseName:t,isOpen:r,onOpen:n,onClose:s,children:o})=>{var i,l,c,d;const{t:u}=k(),{getColor:f,isDarkMode:p}=Yr(),{formatScore:m}=gd(),{loading:h,error:g,ranking:x,statistics:y,myStats:b,myStatus:v,pagination:w,withRisk:j,toggleRisk:N,goToPage:_,nextPage:C,prevPage:S,firstPage:E,lastPage:O,goToUserPage:M}=Mu(e),T=f("primary","#1a202c"),P={bg:p?f("secondaryBackground","#1f2937"):"#ffffff",bgSecondary:f("secondaryBackground","#f9fafb"),text:p?f("textPrimary","#f9fafb"):T,textMuted:p?f("textSecondary","#9ca3af"):`${T}60`,accent:f("accent","#f59e0b"),border:p?"rgba(255,255,255,0.1)":f("borderColor","#e5e7eb"),containerBorder:p?f("accent","#f59e0b"):f("borderColor","#e5e7eb"),hoverBg:p?f("accent","#f59e0b"):T,iconColor:p?f("textPrimary","#f9fafb"):T,positionColor:p?f("textPrimary","#f9fafb"):T,userNameColor:p?f("textPrimary","#f9fafb"):T},A=null!==(i=v?.completed_quizzes)&&void 0!==i?i:0,q=null!==(l=v?.total_quizzes)&&void 0!==l?l:0,z=null!==(c=v?.average_score)&&void 0!==c?c:0,D=null!==(d=v?.position)&&void 0!==d?d:null;(0,a.useEffect)(()=>{r&&w.userPage&&1===w.currentPage&&M()},[r,w.userPage,w.currentPage,M]);const L={t:u,isDarkMode:p,formatScore:m,primaryColor:T,pageColors:P,loading:h,error:g,ranking:x,statistics:y,myStats:b,myStatus:v,pagination:w,withRisk:j,toggleRisk:N,goToPage:_,nextPage:C,prevPage:S,firstPage:E,lastPage:O,goToUserPage:M,completedQuizzes:A,totalQuizzes:q,userScore:z,userPosition:D,courseId:e,courseName:t,isOpen:r,onOpen:n,onClose:s};return(0,Qr.jsx)(rw.Provider,{value:L,children:o})},aw=()=>{const{t:e,isDarkMode:t,pageColors:r,myStats:n,userPosition:s,completedQuizzes:a,withRisk:o,onOpen:i}=nw(),l=t?r.accent:r.hoverBg,c=t?r.bgSecondary:"#ffffff",d=t?r.hoverBg:r.accent;return(0,Qr.jsx)("div",{className:"flex justify-end mb-4",children:(0,Qr.jsxs)("button",{onClick:i,className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-2",style:{backgroundColor:l,color:c},onMouseEnter:e=>{t?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=d},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=l},children:[(0,Qr.jsx)(qc,{className:"w-4 h-4"}),(0,Qr.jsx)("span",{children:e("ranking.ranking","Ranking")}),a>0&&(n||s)&&(0,Qr.jsxs)("span",{className:"px-1.5 py-0.5 rounded text-xs font-bold",style:{backgroundColor:"rgba(0,0,0,0.2)",color:c},children:["#",o?n?.position_with_risk:n?.position_without_risk||s]})]})})},ow=()=>{const{t:e,isDarkMode:t,formatScore:r,primaryColor:n,pageColors:s,loading:a,error:o,ranking:i,statistics:l,myStats:c,pagination:d,withRisk:u,toggleRisk:f,goToPage:p,nextPage:m,prevPage:h,firstPage:g,lastPage:x,completedQuizzes:y,totalQuizzes:b,userScore:v,userPosition:w,courseName:j,isOpen:N,onClose:k}=nw(),_=()=>y===b||0===y?null:(0,Qr.jsxs)("div",{className:"p-4 rounded-lg flex items-start gap-3",style:{backgroundColor:t?"rgba(59, 130, 246, 0.1)":"#eff6ff",border:"1px solid "+(t?"rgba(59, 130, 246, 0.3)":"#93c5fd")},children:[(0,Qr.jsx)(Pn,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:"#3b82f6"}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("p",{className:"font-medium text-sm",style:{color:t?"#93c5fd":"#1d4ed8"},children:e("ranking.progressInfo","Progreso en el curso")}),(0,Qr.jsxs)("p",{className:"text-xs mt-1",style:{color:t?"#60a5fa":"#2563eb"},children:["Has completado ",y," de ",b," tests. Tu nota media actual es ",r(v),"."]})]})]});return(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(N?"translate-x-0":"translate-x-full"),style:{backgroundColor:s.bgSecondary},children:(0,Qr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Qr.jsx)("div",{className:"px-4 py-3 flex items-center justify-between flex-shrink-0 border-b",style:{backgroundColor:s.bg,borderColor:s.border},children:(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("button",{onClick:k,className:"p-1.5 rounded-lg transition-colors",style:{backgroundColor:t?"rgba(255,255,255,0.1)":`${n}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.2)":`${n}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":`${n}10`},children:(0,Qr.jsx)(sl,{className:"w-5 h-5",style:{color:s.text}})}),(0,Qr.jsx)(qc,{className:"w-5 h-5",style:{color:t?s.accent:n}}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("h3",{className:"text-sm font-bold truncate",style:{color:s.text},children:e("ranking.courseRanking","Ranking del Curso")}),(0,Qr.jsx)("p",{className:"text-xs truncate",style:{color:s.textMuted},children:j})]})]})}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Qr.jsx)("div",{className:"max-w-4xl mx-auto px-4 pt-6 pb-12",children:(0,Qr.jsx)("div",{className:"space-y-4",children:a&&!i.length?(0,Qr.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-3",style:{borderColor:n}}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:s.textMuted},children:"Cargando..."})]})}):o?(0,Qr.jsxs)("div",{className:"p-4 rounded-lg",style:{backgroundColor:t?"rgba(239, 68, 68, 0.1)":"#fef2f2",border:"1px solid "+(t?"rgba(239, 68, 68, 0.3)":"#fecaca")},children:[(0,Qr.jsx)("p",{className:"font-medium",style:{color:"#ef4444"},children:"Error al cargar el ranking"}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:t?"#fca5a5":"#dc2626"},children:o})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[y>0&&y<b&&(0,Qr.jsx)(_,{}),(0,Qr.jsxs)("div",{className:"rounded-xl overflow-hidden border-2",style:{backgroundColor:s.bg,borderColor:s.containerBorder},children:[(0,Qr.jsxs)("div",{className:"px-4 py-2 flex items-center gap-2",style:{backgroundColor:t?"rgba(255,255,255,0.05)":`${n}08`},children:[(0,Qr.jsx)(Nn,{size:14,style:{color:s.iconColor}}),(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",style:{color:s.text},children:"Estadsticas del Curso"})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3",style:{"--tw-divide-x-reverse":0},children:[(0,Qr.jsxs)("div",{className:"p-3 text-center",style:{borderRight:`1px solid ${s.border}`},children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-1",style:{color:s.textMuted},children:"Usuarios"}),(0,Qr.jsx)("p",{className:"text-xl font-bold",style:{color:s.text},children:l?.total_users||0})]}),(0,Qr.jsxs)("div",{className:"p-3 text-center",style:{borderRight:`1px solid ${s.border}`},children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-1",style:{color:s.textMuted},children:"Media Sin Riesgo"}),(0,Qr.jsx)("p",{className:"text-xl font-bold",style:{color:t?s.text:n},children:r(l?.avg_score_without_risk||0)})]}),(0,Qr.jsxs)("div",{className:"p-3 text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-1",style:{color:s.textMuted},children:"Media Con Riesgo"}),(0,Qr.jsx)("p",{className:"text-xl font-bold",style:{color:s.accent},children:r(l?.avg_score_with_risk||0)})]})]})]}),y>0&&(0,Qr.jsxs)("div",{className:"rounded-xl overflow-hidden border-2",style:{backgroundColor:s.bg,borderColor:s.containerBorder},children:[(0,Qr.jsxs)("div",{className:"px-4 py-2 flex items-center gap-2",style:{backgroundColor:t?"rgba(255,255,255,0.05)":`${n}08`},children:[(0,Qr.jsx)(qc,{size:14,style:{color:t?s.accent:n}}),(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",style:{color:s.text},children:"Mis Estadsticas"})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:n},children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",style:{color:"#ffffff"},children:"Sin Riesgo"}),(0,Qr.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#ffffff"}})]})}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3 gap-4 px-4 py-3",children:[(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:s.textMuted},children:"Posicin"}),(0,Qr.jsxs)("p",{className:"text-lg font-bold",style:{color:s.text},children:["#",c?.position_without_risk||w||"-"]})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:s.textMuted},children:"Mi Media"}),(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:s.text},children:r(c?.score_without_risk||v||0)})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:s.textMuted},children:"Percentil"}),(()=>{const e=(c?.score_without_risk||v||0)-(l?.avg_score_without_risk||0);return(0,Qr.jsxs)("p",{className:"text-lg font-bold",style:{color:e>=0?"#10b981":"#ef4444"},children:[e>=0?"+":"",r(e)]})})()]})]})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"px-4 py-2",style:{backgroundColor:s.accent},children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wide",style:{color:"#ffffff"},children:"Con Riesgo"}),(0,Qr.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#ffffff"}})]})}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3 gap-4 px-4 py-3",children:[(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:s.textMuted},children:"Posicin"}),(0,Qr.jsxs)("p",{className:"text-lg font-bold",style:{color:s.accent},children:["#",c?.position_with_risk||"-"]})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:s.textMuted},children:"Mi Media"}),(0,Qr.jsx)("p",{className:"text-lg font-bold",style:{color:s.accent},children:r(c?.score_with_risk||0)})]}),(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5",style:{color:s.textMuted},children:"Percentil"}),(()=>{const e=(c?.score_with_risk||0)-(l?.avg_score_with_risk||0);return(0,Qr.jsxs)("p",{className:"text-lg font-bold",style:{color:e>=0?"#10b981":"#ef4444"},children:[e>=0?"+":"",r(e)]})})()]})]})]})]}),(0,Qr.jsxs)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:s.bg,borderColor:s.containerBorder},children:[(0,Qr.jsxs)("table",{className:"w-full",children:[(0,Qr.jsx)("thead",{children:(0,Qr.jsxs)("tr",{style:{backgroundColor:t?"rgba(255,255,255,0.05)":`${n}08`},children:[(0,Qr.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wide",style:{color:s.text},children:"#"}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wide",style:{color:s.text},children:"Usuario"}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wide",style:{color:s.text},children:"Sin Riesgo"}),(0,Qr.jsx)("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wide",style:{color:s.text},children:"Con Riesgo"})]})}),(0,Qr.jsx)("tbody",{children:i.map(e=>{var a,o;const i=e.is_current_user,l=1===e.position?"#eab308":2===e.position?"#9ca3af":3===e.position?"#f97316":s.text,c=t?s.accent:n;return(0,Qr.jsxs)("tr",{className:"border-t transition-colors",style:{borderColor:s.border,backgroundColor:i?t?"rgba(245, 158, 11, 0.1)":`${n}08`:"transparent"},children:[(0,Qr.jsx)("td",{className:"px-4 py-3",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[e.position<=3&&(0,Qr.jsx)(qc,{className:"w-4 h-4",style:{color:l}}),(0,Qr.jsx)("span",{className:"font-bold",style:{color:l},children:e.position})]})}),(0,Qr.jsx)("td",{className:"px-4 py-3",children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("img",{src:e.avatar_url,alt:"",className:"w-8 h-8 rounded-full"}),(0,Qr.jsxs)("span",{className:"font-medium",style:{color:i?c:s.text},children:[e.display_name,i&&(0,Qr.jsx)("span",{className:"ml-2 text-[10px] px-1.5 py-0.5 rounded",style:{backgroundColor:t?s.accent:n,color:"#fff"},children:"T"})]})]})}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-center",children:(0,Qr.jsx)("span",{className:"font-bold "+(u?"":"underline decoration-2"),style:{color:i?c:s.text,textDecorationColor:"#10b981"},children:r(null!==(a=e.score_without_risk)&&void 0!==a?a:0)})}),(0,Qr.jsx)("td",{className:"px-4 py-3 text-center",children:(0,Qr.jsx)("span",{className:"font-bold "+(u?"underline decoration-2":""),style:{color:i?c:s.text,textDecorationColor:s.accent},children:r(null!==(o=e.score_with_risk)&&void 0!==o?o:0)})})]},e.user_id)})})]}),0===i.length&&!a&&(0,Qr.jsxs)("div",{className:"text-center py-8",children:[(0,Qr.jsx)(qc,{className:"w-10 h-10 mx-auto mb-3",style:{color:s.border}}),(0,Qr.jsx)("p",{className:"font-medium",style:{color:s.textMuted},children:"No hay usuarios en el ranking"})]})]}),d.totalUsers>0&&(0,Qr.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between p-3 rounded-lg border-2 gap-2",style:{backgroundColor:s.bg,borderColor:s.containerBorder},children:[(0,Qr.jsxs)("span",{className:"text-sm",style:{color:s.textMuted},children:[(d.currentPage-1)*d.perPage+1,"-",Math.min(d.currentPage*d.perPage,d.totalUsers)," de ",d.totalUsers,d.totalPages>1&&` (Pgina ${d.currentPage} de ${d.totalPages})`]}),d.totalPages>1&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Qr.jsx)("button",{onClick:g,disabled:1===d.currentPage,className:"p-1.5 rounded border disabled:opacity-30 transition-all",style:{color:s.text,borderColor:s.border,backgroundColor:s.bg},onMouseEnter:e=>{1!==d.currentPage&&(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":"#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s.bg},children:(0,Qr.jsx)(ef,{className:"w-4 h-4"})}),(0,Qr.jsx)("button",{onClick:h,disabled:1===d.currentPage,className:"p-1.5 rounded border disabled:opacity-30 transition-all",style:{color:s.text,borderColor:s.border,backgroundColor:s.bg},onMouseEnter:e=>{1!==d.currentPage&&(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":"#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s.bg},children:(0,Qr.jsx)(sl,{className:"w-4 h-4"})}),(0,Qr.jsx)("div",{className:"flex gap-1",children:(()=>{const e=[],t=d.totalPages,r=d.currentPage;let a=Math.max(1,r-2),o=Math.min(t,r+2);r<=3&&(o=Math.min(5,t)),r>=t-2&&(a=Math.max(1,t-4));for(let t=a;t<=o;t++){const a=t===r;e.push((0,Qr.jsx)("button",{onClick:()=>p(t),className:"px-3 py-1 rounded text-sm font-semibold transition-all border",style:{backgroundColor:a?n:s.bg,borderColor:a?n:s.border,color:a?"#ffffff":s.text},children:t},t))}return e})()}),(0,Qr.jsx)("button",{onClick:m,disabled:d.currentPage===d.totalPages,className:"p-1.5 rounded border disabled:opacity-30 transition-all",style:{color:s.text,borderColor:s.border,backgroundColor:s.bg},onMouseEnter:e=>{d.currentPage!==d.totalPages&&(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":"#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s.bg},children:(0,Qr.jsx)(al,{className:"w-4 h-4"})}),(0,Qr.jsx)("button",{onClick:x,disabled:d.currentPage===d.totalPages,className:"p-1.5 rounded border disabled:opacity-30 transition-all",style:{color:s.text,borderColor:s.border,backgroundColor:s.bg},onMouseEnter:e=>{d.currentPage!==d.totalPages&&(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":"#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s.bg},children:(0,Qr.jsx)(tf,{className:"w-4 h-4"})})]})]})]})})})})]})})},iw=()=>{const{t:e}=k(),{courseId:t}=pt(),r=lt(),n=ut(),{getColor:s,isDarkMode:l}=Yr(),{formatScore:c}=gd(),{course:d}=yu(t),u=d?.title?.rendered||d?.title||"",f={text:l?s("textPrimary","#f9fafb"):s("primary","#1a202c"),textMuted:s("textSecondary","#6b7280"),accent:s("accent","#f59e0b"),bgCard:l?s("secondaryBackground","#1f2937"):"#ffffff",bgSubtle:l?"rgba(255,255,255,0.05)":`${s("primary","#1a202c")}05`,borderSubtle:l?"rgba(255,255,255,0.1)":`${s("primary","#1a202c")}15`,hoverBg:l?"rgba(255,255,255,0.1)":`${s("primary","#1a202c")}10`,hoverBgStrong:l?"rgba(255,255,255,0.15)":`${s("primary","#1a202c")}15`,buttonBg:l?s("accent","#f59e0b"):s("primary","#3b82f6"),buttonText:l?s("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:l?s("primary","#3b82f6"):s("accent","#f59e0b"),containerBorder:l?s("accent","#f59e0b"):s("borderColor","#e5e7eb")},p=i().useRef(!1),[m,h]=(0,a.useState)(new Set),[g,x]=(0,a.useState)([]),[y,b]=(0,a.useState)(!0),[v,w]=(0,a.useState)(null),[j,N]=(0,a.useState)(null),[_,C]=(0,a.useState)(!1),[S,E]=(0,a.useState)(null),[O,M]=(0,a.useState)(!1),[T,P]=(0,a.useState)(null),[A,q]=(0,a.useState)(null),[z,D]=(0,a.useState)(null),[L,I]=(0,a.useState)(!1),[R,$]=(0,a.useState)(!1),[F,B]=(0,a.useState)(null),[U,H]=(0,a.useState)(!1),[W,Q]=(0,a.useState)(!1),[V,K]=(0,a.useState)(!1),[Y,G]=(0,a.useState)("pen"),[X,Z]=(0,a.useState)("#000000"),[J,ee]=(0,a.useState)(2),{isCompleted:te,markComplete:re,unmarkComplete:ne,loading:se,fetchCompletedContent:ae}=Rd(t,!1),oe=v?.data?.quiz_id,{ranking:ie,loading:le}=Pd(oe),{attempts:ce,loading:de}=Md({perPage:5,autoFetch:!0}),{details:ue,loading:fe,error:pe}=Zd(F),me=(0,a.useMemo)(()=>oe&&ce?ce.filter(e=>parseInt(e.quiz_id)===parseInt(oe)).slice(0,5):[],[oe,ce]),he=(e,t)=>ie?.statistics?e-(t?ie.statistics.avg_score_with_risk:ie.statistics.avg_score_without_risk):0,ge=(0,a.useMemo)(()=>{if(!ie)return null;const e=ie.top||[],t=ie.relative||[],r=ie.currentUser,n=e.find(e=>e.user_id===r?.id),s=t.find(e=>e.user_id===r?.id);return n||s},[ie]),xe=null!==ge&&ie?.statistics?.total_users>0;(0,a.useEffect)(()=>{t&&ae()},[t,ae]),(0,a.useEffect)(()=>{r.state||(w(null),N(null),E(null),P(null),q(null),D(null),M(!1),I(!1),B(null),p.current=!1)},[r.key]),(0,a.useEffect)(()=>(L?(document.body.style.overflow="hidden",document.body.classList.add("qe-quiz-focus-mode")):(document.body.style.overflow="",document.body.classList.remove("qe-quiz-focus-mode")),()=>{document.body.style.overflow="",document.body.classList.remove("qe-quiz-focus-mode")}),[L]),(0,a.useEffect)(()=>{(async()=>{if(t){b(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=await(0,Qs.getCourseLessons)(e,{perPage:100}),n=js(r.data||[]).map(e=>{const t=(e.meta?._lesson_steps||[]).filter(e=>"quiz"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,quizSteps:t}}).filter(e=>e.quizSteps.length>0);x(n)}catch(e){console.error("Error fetching lessons:",e),x([])}finally{b(!1)}}})()},[t]),(0,a.useEffect)(()=>{if(!p.current&&r.state&&0!==g.length){if(r.state?.openLessonId){const e=r.state.openLessonId;return console.log("TestsPage - received openLessonId from StatisticsPage:",e),h(new Set([e])),r.state.scrollToLesson&&setTimeout(()=>{const t=document.getElementById(`lesson-${e}`);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},100),p.current=!0,void window.history.replaceState({},document.title)}if(r.state?.viewAttemptId){const e=r.state.selectedQuizId;console.log("TestsPage - received navigation state:",r.state);for(const t of g){const n=t.quizSteps?.find(t=>t.data?.quiz_id===e);if(n){console.log("TestsPage - found quiz, opening test viewer"),w(n),N(t),B(r.state.viewAttemptId),P(null),q(null),D(null),M(!1),E(null),I(!1),b(!1),p.current=!0;break}}}else if(r.state?.selectedQuizId&&r.state?.scrollToQuiz){const e=r.state.selectedQuizId,t=r.state?.resumeAutosave;console.log("TestsPage - scrolling to quiz:",e,"type:",typeof e,"resumeAutosave:",t),console.log("TestsPage - available lessons:",g.length);let n=!1;for(const r of g){console.log("TestsPage - checking lesson:",r.id,"quizSteps:",r.quizSteps?.length);const s=r.quizSteps?.find(t=>{const r=t.data?.quiz_id;return console.log("TestsPage - comparing stepQuizId:",r,"with quizId:",e),String(r)===String(e)});if(s){if(console.log("TestsPage - Found quiz step:",s),n=!0,w(s),N(r),P(null),q(null),D(null),B(null),t){const e=s.data?.quiz_id;e?(async()=>{try{const{getQuiz:t}=await Promise.resolve().then(o.bind(o,8766)),r=await t(e);console.log(" Quiz loaded for resume:",r),E(r),M(!0),I(!0),b(!1)}catch(e){console.error(" Error loading quiz for resume:",e),b(!1)}})():b(!1)}else b(!1),M(!1),E(null),I(!1);p.current=!0;break}}n||console.warn("TestsPage - Quiz not found in any lesson! quizId:",e)}}},[r.state,g]);const ye=(0,a.useMemo)(()=>g.flatMap(e=>e.quizSteps.map(t=>({step:t,lesson:e,originalStepIndex:(e.meta?._lesson_steps||[]).findIndex(e=>e.type===t.type&&e.title===t.title&&JSON.stringify(e.data)===JSON.stringify(t.data))}))),[g]),be=e=>{B(e),M(!1),E(null),P(null),I(!1)},ve=()=>{r.state?.returnTo&&r.state?.viewAttemptId?n(r.state.returnTo):B(null)},we=async(e,r,n)=>{if(P(e),q(r),D(n),S?.id&&j)try{const e=ke();if(-1!==e){const{originalStepIndex:r}=ye[e];await re(j.id,"step",j.id,r),await ae(),window.dispatchEvent(new CustomEvent("courseProgressUpdated",{detail:{courseId:t}})),M(!1),I(!1)}}catch(e){console.error("Error marking quiz as complete:",e)}else M(!1),I(!1)},je=()=>{M(!1),E(null),I(!1)},Ne=()=>{},ke=()=>v&&j?ye.findIndex(e=>e.step===v&&e.lesson.id===j.id):-1,_e=(e,t)=>te(e.id,"step",e.id,t),Ce=()=>{if(!j||!v)return!1;const e=ke();if(-1===e)return!1;const{originalStepIndex:t}=ye[e];return te(j.id,"step",j.id,t)},Se=ke(),Ee=Se>0,Oe=Se<ye.length-1,Me=!(!r.state?.viewAttemptId&&!r.state?.selectedQuizId);return(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(ju,{courseId:t,courseName:u,sectionName:e("courses.tests"),children:(0,Qr.jsx)(sw,{courseId:t,courseName:u,isOpen:R,onOpen:()=>$(!0),onClose:()=>$(!1),children:(0,Qr.jsxs)("div",{className:"relative h-full",children:[!Me&&(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(v||R?"-translate-x-full":"translate-x-0"),children:(0,Qr.jsx)("div",{className:"h-full overflow-y-auto",children:(0,Qr.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-6 pb-12",children:y?(0,Qr.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,Qr.jsx)("div",{className:"rounded-lg p-4 animate-pulse",style:{backgroundColor:s("background","#ffffff")},children:(0,Qr.jsx)("div",{className:"h-6 rounded",style:{backgroundColor:`${s("primary","#1a202c")}20`,width:"60%"}})},e))}):0===g.length?(0,Qr.jsxs)("div",{className:"text-center py-12 rounded-lg",style:{backgroundColor:f.bgCard},children:[(0,Qr.jsx)(fu,{size:48,className:"mx-auto mb-4",style:{color:`${f.text}40`}}),(0,Qr.jsx)("p",{className:"text-lg font-medium",style:{color:f.text},children:e("tests.noTests")}),(0,Qr.jsx)("p",{className:"text-sm mt-2",style:{color:f.textMuted},children:e("tests.noTestsDescription")})]}):(0,Qr.jsxs)("div",{className:"py-4",children:[(0,Qr.jsx)(aw,{}),(0,Qr.jsx)("div",{className:"rounded-xl overflow-hidden border-2",style:{backgroundColor:s("secondaryBackground","#f8f9fa"),borderColor:l?s("accent","#f59e0b"):s("borderColor","#e5e7eb")},children:g.map((t,r)=>{const n=m.has(t.id),s=t.quizSteps.length,a=t.title?.rendered||t.title||e("courses.untitledLesson");return(0,Qr.jsxs)("div",{id:`lesson-${t.id}`,children:[(0,Qr.jsxs)("div",{className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200",style:{backgroundColor:f.bgSubtle},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,Qr.jsx)(fu,{size:20,style:{color:f.text},className:"flex-shrink-0"}),(0,Qr.jsx)("span",{className:"font-semibold text-left truncate",style:{color:f.text},children:a})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[(0,Qr.jsxs)("span",{className:"text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",style:{backgroundColor:f.hoverBg,color:f.text},children:[s," ",(0,Qr.jsx)("span",{className:"hidden sm:inline",children:e(1===s?"tests.test":"tests.tests")})]}),(0,Qr.jsxs)("button",{onClick:()=>{return e=t.id,void h(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r});var e},className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-1.5",style:{backgroundColor:f.buttonBg,color:f.buttonText},onMouseEnter:e=>{l?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=f.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=f.buttonBg},children:[e(n?"tests.hideLesson":"tests.showLesson"),n?(0,Qr.jsx)(Qi,{size:16}):(0,Qr.jsx)(Vi,{size:16})]})]})]}),n&&(0,Qr.jsx)("div",{children:t.quizSteps.map((r,n)=>{const s=(t.meta?._lesson_steps||[]).findIndex(e=>e.type===r.type&&e.title===r.title&&JSON.stringify(e.data)===JSON.stringify(r.data)),a=_e(t,s),o=r.data?.difficulty||"medium",i=r.data?.time_limit||null,c=r.data?.start_date||null,d=r.data?.question_count||null,u={easy:e("tests.difficultyEasy")||"Fcil",medium:e("tests.difficultyMedium")||"Medio",hard:e("tests.difficultyHard")||"Difcil"},p={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"};return(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:n>0?"mx-6":"",style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsxs)("div",{className:"px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3 flex-1 mr-2 overflow-hidden",children:[a?(0,Qr.jsx)(On,{size:18,style:{color:"#10b981"},className:"flex-shrink-0"}):(0,Qr.jsx)(eu,{size:18,style:{color:f.textMuted},className:"flex-shrink-0"}),(0,Qr.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,Qr.jsx)("span",{className:"text-sm font-medium mb-1.5 truncate",style:{color:f.text},children:r.title}),(0,Qr.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:`${p[o]}15`},children:[(0,Qr.jsx)(Eu,{size:12,style:{color:p[o]}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:p[o]},children:u[o]})]}),d&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,Qr.jsx)(pl,{size:12,style:{color:f.textMuted}}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:f.textMuted},children:[d," ",e("tests.questions")]})]}),i&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,Qr.jsx)(Ec,{size:12,style:{color:f.textMuted}}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:f.textMuted},children:[i," min"]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,Qr.jsx)(tl,{size:12,style:{color:f.textMuted}}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:f.textMuted},children:[(0,Qr.jsxs)("span",{className:"hidden sm:inline",children:[e("tests.startDate"),": "]}),(e=>{if(!e)return"--/--/----";try{return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return"--/--/----"}})(c)]})]})]})]})]}),(0,Qr.jsx)("button",{onClick:()=>((e,t)=>{w(e),N(t),P(null),q(null),D(null),M(!1),E(null),I(!1)})(r,t),className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex-shrink-0",style:{backgroundColor:f.buttonBg,color:f.buttonText},onMouseEnter:e=>{l?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=f.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=f.buttonBg},children:e("tests.available")})]})]},r.id||n)})}),r<g.length-1&&(0,Qr.jsx)("div",{style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},t.id)})})]})})})}),(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(v?"translate-x-0":"translate-x-full"),style:{backgroundColor:s("secondaryBackground","#f8f9fa")},children:v&&(0,Qr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 sm:py-1.5 border-b flex-shrink-0 gap-2",style:{backgroundColor:f.bgCard,borderColor:f.borderSubtle},children:[(0,Qr.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden",children:[(0,Qr.jsxs)("nav",{className:"hidden sm:flex items-center text-xs space-x-1.5",children:[(0,Qr.jsx)(Zt,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:f.text},children:e("sidebar.studyPlanner")}),(0,Qr.jsx)(al,{size:12,style:{color:f.textMuted}}),(0,Qr.jsx)(Zt,{to:`/courses/${t}/dashboard`,className:"transition-colors duration-200 hover:underline font-medium",style:{color:f.text},dangerouslySetInnerHTML:{__html:u}}),(0,Qr.jsx)(al,{size:12,style:{color:f.textMuted}}),(0,Qr.jsx)("span",{className:"font-medium",style:{color:f.textMuted},children:e("courses.tests")})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(fu,{size:18,style:{color:f.text},className:"flex-shrink-0"}),(0,Qr.jsx)("h2",{className:"text-sm sm:text-base font-semibold leading-tight truncate",style:{color:f.text},children:v.title})]})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,Qr.jsx)("button",{onClick:()=>{const e=ke();if(e>0){const t=ye[e-1];w(t.step),N(t.lesson)}},disabled:!Ee,className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:f.hoverBg,opacity:Ee?1:.4,cursor:Ee?"pointer":"not-allowed"},onMouseEnter:e=>{Ee&&(e.currentTarget.style.backgroundColor=f.hoverBgStrong)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=f.hoverBg},title:e("navigation.previous"),children:(0,Qr.jsx)(sl,{size:20,style:{color:f.text}})}),(0,Qr.jsxs)("button",{onClick:async()=>{if(!j||!v||!t)return;const e=ke();if(-1===e)return;const{originalStepIndex:r}=ye[e];try{te(j.id,"step",j.id,r)?await ne(j.id,"step",j.id,r):await re(j.id,"step",j.id,r),await ae(),window.dispatchEvent(new CustomEvent("courseProgressUpdated",{detail:{courseId:t}}))}catch(e){console.error("Error toggling step completion:",e)}},disabled:se,className:"p-1.5 sm:px-3 sm:py-1.5 rounded-lg transition-all flex items-center gap-1.5 text-sm",style:{backgroundColor:Ce()?s("primary","#1a202c"):f.hoverBg,color:Ce()?"#ffffff":f.text},onMouseEnter:e=>{Ce()||(e.currentTarget.style.backgroundColor=f.hoverBgStrong)},onMouseLeave:e=>{Ce()||(e.currentTarget.style.backgroundColor=f.hoverBg)},title:Ce()?e("progress.completed"):e("progress.markComplete"),children:[Ce()?(0,Qr.jsx)(Ui,{size:16}):(0,Qr.jsx)(eu,{size:16}),(0,Qr.jsx)("span",{className:"font-medium hidden sm:inline",children:Ce()?e("progress.completed"):e("progress.markComplete")})]}),(0,Qr.jsx)("button",{onClick:()=>{const e=ke();if(e<ye.length-1){const t=ye[e+1];w(t.step),N(t.lesson)}},disabled:!Oe,className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:f.hoverBg,opacity:Oe?1:.4,cursor:Oe?"pointer":"not-allowed"},onMouseEnter:e=>{Oe&&(e.currentTarget.style.backgroundColor=f.hoverBgStrong)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=f.hoverBg},title:e("navigation.next"),children:(0,Qr.jsx)(al,{size:20,style:{color:f.text}})}),(0,Qr.jsx)("button",{onClick:()=>{r.state?.returnTo?n(r.state.returnTo):(w(null),N(null),M(!1),E(null),I(!1),B(null))},className:"p-1.5 rounded-lg transition-all ml-1 sm:ml-2",style:{backgroundColor:f.hoverBg},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=f.hoverBgStrong},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=f.hoverBg},title:e("common.back"),children:(0,Qr.jsx)(En,{size:20,style:{color:f.text}})})]})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto",children:F?fe?(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)(Mn,{className:"w-12 h-12 mx-auto mb-4 animate-spin",style:{color:f.text}}),(0,Qr.jsx)("p",{className:"text-lg font-medium",style:{color:f.text},children:e("tests.loadingAttemptDetails")})]})}):pe?(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full p-8",children:(0,Qr.jsxs)("div",{className:"text-center p-6 rounded-lg border-2",style:{backgroundColor:l?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderColor:"#ef4444"},children:[(0,Qr.jsx)(Wi,{className:"w-12 h-12 mx-auto mb-4",style:{color:"#ef4444"}}),(0,Qr.jsx)("p",{className:"text-lg font-medium mb-2",style:{color:"#ef4444"},children:e("tests.errorLoadingAttempt")}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:f.textMuted},children:pe}),(0,Qr.jsx)("button",{onClick:ve,className:"mt-4 px-4 py-2 rounded-lg font-medium",style:{backgroundColor:s("primary","#1a202c"),color:"#ffffff"},children:e("common.back")})]})}):ue?(0,Qr.jsxs)("div",{className:"h-full flex flex-col relative",children:[(0,Qr.jsx)("button",{onClick:ve,className:"absolute top-4 left-4 z-10 p-2 rounded-full shadow-lg transition-all",style:{backgroundColor:f.bgCard,border:`2px solid ${f.borderSubtle}`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s("primary","#1a202c"),e.currentTarget.querySelector("svg").style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=f.bgCard,e.currentTarget.querySelector("svg").style.color=f.text},title:e("common.back"),children:(0,Qr.jsx)(sl,{size:24,style:{color:f.text}})}),(0,Qr.jsx)("div",{className:"h-full overflow-hidden",children:(0,Qr.jsx)(du,{result:{...ue.attempt,detailed_results:ue.detailed_results},quizTitle:ue.attempt.quizTitle||v?.title,questions:ue.questions,noPadding:!0,courseId:t,courseName:u,lessonId:j?.id,lessonTitle:j?.title})})]}):null:O||T?T?(0,Qr.jsxs)("div",{className:"h-full flex flex-col relative",children:[(0,Qr.jsx)("button",{onClick:()=>{P(null),q(null),D(null),E(null),w(null),N(null),I(!1)},className:"absolute top-4 left-4 z-10 p-2 rounded-full shadow-lg transition-all",style:{backgroundColor:s("background","#ffffff"),border:`2px solid ${s("primary","#1a202c")}15`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s("primary","#1a202c"),e.currentTarget.querySelector("svg").style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s("background","#ffffff"),e.currentTarget.querySelector("svg").style.color=s("primary","#1a202c")},title:e("tests.backToInfo"),children:(0,Qr.jsx)(sl,{size:24,style:{color:s("primary","#1a202c")}})}),(0,Qr.jsx)("div",{className:"h-full overflow-hidden",children:(0,Qr.jsx)(du,{result:T,quizTitle:z?.title?.rendered||z?.title||v?.data?.title,questions:A,noPadding:!0,courseId:t,courseName:u,lessonId:j?.id,lessonTitle:j?.title})})]}):S&&(0,Qr.jsx)(Yu,{quizId:S.id,lessonId:j?.id,onQuizComplete:we,onExit:je,isDrawingMode:U,setIsDrawingMode:H,isDrawingEnabled:W,setIsDrawingEnabled:Q,showDrawingToolbar:V,setShowDrawingToolbar:K,drawingTool:Y,drawingColor:X,drawingLineWidth:J,onDrawingToolChange:G,onDrawingColorChange:Z,onDrawingLineWidthChange:ee,onClearCanvas:Ne}):(0,Qr.jsxs)("div",{className:"max-w-4xl mx-auto pt-8 pb-24 px-8",children:[le?(0,Qr.jsx)("div",{className:"mb-6",children:(0,Qr.jsxs)("div",{className:"rounded-xl overflow-hidden border-2 animate-pulse",style:{backgroundColor:s("secondaryBackground"),borderColor:f.containerBorder},children:[(0,Qr.jsx)("div",{className:"h-48",style:{backgroundColor:`${s("primary","#1a202c")}05`}}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsx)("div",{className:"h-48",style:{backgroundColor:`${s("accent","#f59e0b")}05`}})]})}):xe?(0,Qr.jsx)("div",{className:"mb-6",children:(0,Qr.jsxs)("div",{className:"rounded-xl overflow-hidden border-2",style:{backgroundColor:s("secondaryBackground"),borderColor:f.containerBorder},children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:s("primary","#1a202c")},children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wide",style:{color:s("textColorContrast","#ffffff")},children:e("tests.withoutRisk")}),(0,Qr.jsx)("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:s("textColorContrast","#ffffff")}})]})}),(0,Qr.jsxs)("div",{className:"grid px-4 py-3",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,Qr.jsx)("span",{className:"text-[10px] font-medium uppercase tracking-wide",style:{color:f.textMuted},children:e("tests.myScore")})}),(0,Qr.jsx)("div",{className:"text-2xl font-bold",style:{color:f.text},children:c(ge?.score||0)})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,Qr.jsx)("span",{className:"text-[10px] font-medium uppercase tracking-wide",style:{color:f.textMuted},children:e("tests.avgScore")})}),(0,Qr.jsx)("div",{className:"text-2xl font-bold",style:{color:f.text},children:c(ie?.statistics?.avg_score_without_risk||0)})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,Qr.jsx)("span",{className:"text-[10px] font-medium uppercase tracking-wide",style:{color:f.textMuted},children:e("tests.percentile")})}),(0,Qr.jsxs)("div",{className:"text-2xl font-extrabold flex items-baseline gap-1",style:{color:he(ge?.score||0,!1)>=0?"#10b981":"#ef4444"},children:[(0,Qr.jsxs)("span",{children:[he(ge?.score||0,!1)>=0?"+":"",c(he(ge?.score||0,!1))]}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:f.textMuted},children:"pts"})]})]})]})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:s("accent","#f59e0b")},children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wide",style:{color:s("textColorContrast","#ffffff")},children:e("tests.withRisk")}),(0,Qr.jsx)("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:s("textColorContrast","#ffffff")}})]})}),(0,Qr.jsxs)("div",{className:"grid px-4 py-3",style:{gridTemplateColumns:"repeat(3, 1fr)",gap:"1rem"},children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,Qr.jsx)("span",{className:"text-[10px] font-medium uppercase tracking-wide",style:{color:f.textMuted},children:e("tests.myScore")})}),(0,Qr.jsx)("div",{className:"text-2xl font-bold",style:{color:s("accent","#f59e0b")},children:c(ge?.score_with_risk||0)})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,Qr.jsx)("span",{className:"text-[10px] font-medium uppercase tracking-wide",style:{color:f.textMuted},children:e("tests.avgScore")})}),(0,Qr.jsx)("div",{className:"text-2xl font-bold",style:{color:s("accent","#f59e0b")},children:c(ie?.statistics?.avg_score_with_risk||0)})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,Qr.jsx)("span",{className:"text-[10px] font-medium uppercase tracking-wide",style:{color:f.textMuted},children:e("tests.percentile")})}),(0,Qr.jsxs)("div",{className:"text-2xl font-extrabold flex items-baseline gap-1",style:{color:he(ge?.score_with_risk||0,!0)>=0?"#10b981":"#ef4444"},children:[(0,Qr.jsxs)("span",{children:[he(ge?.score_with_risk||0,!0)>=0?"+":"",c(he(ge?.score_with_risk||0,!0))]}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:f.textMuted},children:"pts"})]})]})]})]})]})}):null,(0,Qr.jsxs)("div",{className:"rounded-xl overflow-hidden border-2",style:{backgroundColor:s("secondaryBackground"),borderColor:f.containerBorder},children:[(0,Qr.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:s("primary","#1a202c")},children:(0,Qr.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Qr.jsxs)("div",{className:"flex-1",children:[(0,Qr.jsx)("h3",{className:"text-lg font-bold mb-0.5",style:{color:s("textColorContrast","#ffffff")},children:v.title}),v.data?.description&&(0,Qr.jsx)("p",{className:"text-xs",style:{color:s("textColorContrast","#ffffff"),opacity:.8},children:v.data.description})]}),Ce()&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full ml-4 flex-shrink-0",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:[(0,Qr.jsx)(On,{size:16,style:{color:s("textColorContrast","#ffffff")}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:s("textColorContrast","#ffffff")},children:e("progress.completed")})]})]})}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsxs)("div",{className:"grid grid-cols-3",style:{minHeight:"80px"},children:[(0,Qr.jsxs)("div",{className:"flex flex-col items-center justify-center py-3 border-r transition-all duration-200",style:{borderColor:f.borderSubtle,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=f.bgSubtle,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,Qr.jsx)(pl,{size:20,style:{color:f.text},className:"mb-1"}),(0,Qr.jsx)("span",{className:"text-xl font-bold",style:{color:f.text},children:v.data?.question_count||"?"}),(0,Qr.jsx)("span",{className:"text-[10px] mt-0.5",style:{color:f.textMuted},children:e("tests.questions")})]}),(0,Qr.jsxs)("div",{className:"flex flex-col items-center justify-center py-3 border-r transition-all duration-200",style:{borderColor:f.borderSubtle,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=f.bgSubtle,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,Qr.jsx)(Ec,{size:20,style:{color:f.text},className:"mb-1"}),(0,Qr.jsx)("span",{className:"text-xl font-bold",style:{color:f.text},children:v.data?.time_limit?`${v.data.time_limit}`:""}),(0,Qr.jsx)("span",{className:"text-[10px] mt-0.5",style:{color:f.textMuted},children:v.data?.time_limit?e("tests.minutes"):e("tests.noTimeLimit")})]}),(0,Qr.jsxs)("div",{className:"flex flex-col items-center justify-center py-3 transition-all duration-200",style:{backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=f.bgSubtle,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,Qr.jsx)(Eu,{size:20,style:{color:f.text},className:"mb-1"}),(0,Qr.jsx)("span",{className:"text-xs font-bold px-2.5 py-0.5 rounded-full",style:{backgroundColor:(()=>{const e=v.data?.difficulty||"medium";return"easy"===e?"#10b98120":"hard"===e?"#ef444420":"#f59e0b20"})(),color:(()=>{const e=v.data?.difficulty||"medium";return"easy"===e?"#10b981":"hard"===e?"#ef4444":"#f59e0b"})()},children:(()=>{const t=v.data?.difficulty||"medium";return e("easy"===t?"tests.easy":"hard"===t?"tests.hard":"tests.medium")})()}),(0,Qr.jsx)("span",{className:"text-[10px] mt-1",style:{color:f.textMuted},children:e("tests.difficulty")})]})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,Qr.jsx)("div",{className:"p-4",children:(0,Qr.jsxs)("button",{onClick:async()=>{if(console.log(" Comenzar test - selectedTest:",v),console.log(" quiz_id extrado:",oe),oe)try{const{getQuiz:e}=await Promise.resolve().then(o.bind(o,8766)),t=await e(oe);console.log(" Quiz cargado:",t),E(t),M(!0),I(!0)}catch(e){console.error(" Error loading quiz:",e)}else console.error(" No quiz_id found")},className:"w-full py-3 rounded-lg font-bold text-base transition-all flex items-center justify-center gap-2 shadow-md",style:{backgroundColor:s("primary","#1a202c"),color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${s("primary","#1a202c")}dd`,e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 10px 25px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s("primary","#1a202c"),e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:[(0,Qr.jsx)(nd,{size:20}),(0,Qr.jsx)("span",{children:Ce()?e("tests.retake"):e("tests.startTest")})]})})]}),me.length>0&&!de&&(0,Qr.jsx)("div",{className:"mt-6",children:(0,Qr.jsxs)("div",{className:"rounded-xl overflow-hidden border-2",style:{backgroundColor:s("secondaryBackground"),borderColor:f.containerBorder},children:[(0,Qr.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",style:{backgroundColor:s("primary","#1a202c")},children:[(0,Qr.jsx)("h3",{className:"text-xs font-bold uppercase tracking-wide",style:{color:s("textColorContrast","#ffffff")},children:e("tests.recentAttempts")}),(0,Qr.jsx)("span",{className:"text-[10px] font-medium",style:{color:s("textColorContrast","#ffffff"),opacity:.8},children:e("tests.last5Attempts")})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),me.map((t,r)=>{const n=he(t.score||0,!1),a=he(t.score_with_risk||0,!0);return(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"sm:hidden px-4 py-3 space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(tl,{size:14,style:{color:s("textSecondary","#6b7280")}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:s("textPrimary","#1a202c")},children:new Date(t.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})})]}),(0,Qr.jsx)("div",{className:"flex items-center gap-1.5",children:t.passed?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(On,{size:14,style:{color:"#10b981"}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:"#10b981"},children:e("tests.passed")})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Wi,{size:14,style:{color:"#ef4444"}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:"#ef4444"},children:e("tests.failed")})]})})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,Qr.jsxs)("div",{className:"p-2 rounded-lg",style:{backgroundColor:f.bgSubtle},children:[(0,Qr.jsx)("div",{className:"text-[10px] mb-1",style:{color:f.textMuted},children:e("tests.withoutRisk")}),(0,Qr.jsx)("div",{className:"text-base font-bold",style:{color:f.text},children:c(t.score||0)}),(0,Qr.jsxs)("span",{className:"text-[10px] font-medium",style:{color:n>=0?"#10b981":"#ef4444"},children:[n>=0?"+":"",c(n)]})]}),(0,Qr.jsxs)("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${s("accent","#f59e0b")}10`},children:[(0,Qr.jsx)("div",{className:"text-[10px] mb-1",style:{color:f.textMuted},children:e("tests.withRisk")}),(0,Qr.jsx)("div",{className:"text-base font-bold",style:{color:s("accent","#f59e0b")},children:c(t.score_with_risk||0)}),(0,Qr.jsxs)("span",{className:"text-[10px] font-medium",style:{color:a>=0?"#10b981":"#ef4444"},children:[a>=0?"+":"",c(a)]})]})]}),(0,Qr.jsxs)("button",{onClick:()=>{const e=t.attempt_id||t.id;be(e)},className:"w-full px-3 py-2 rounded-lg transition-all flex items-center justify-center gap-2 text-xs",style:{backgroundColor:f.hoverBg,color:f.text},children:[(0,Qr.jsx)(Nc,{size:14}),(0,Qr.jsx)("span",{className:"font-medium",children:e("tests.details")})]})]}),(0,Qr.jsxs)("div",{className:"hidden sm:grid sm:grid-cols-5 gap-4 items-center px-4 py-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(tl,{size:14,style:{color:f.textMuted}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:f.text},children:new Date(t.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),(0,Qr.jsxs)("div",{className:"flex flex-col",children:[(0,Qr.jsx)("div",{className:"flex items-baseline gap-1",children:(0,Qr.jsx)("span",{className:"text-base font-bold",style:{color:f.text},children:c(t.score||0)})}),(0,Qr.jsxs)("span",{className:"text-[10px] font-medium",style:{color:n>=0?"#10b981":"#ef4444"},children:[n>=0?"+":"",c(n)]})]}),(0,Qr.jsxs)("div",{className:"flex flex-col",children:[(0,Qr.jsx)("div",{className:"flex items-baseline gap-1",children:(0,Qr.jsx)("span",{className:"text-base font-bold",style:{color:s("accent","#f59e0b")},children:c(t.score_with_risk||0)})}),(0,Qr.jsxs)("span",{className:"text-[10px] font-medium",style:{color:a>=0?"#10b981":"#ef4444"},children:[a>=0?"+":"",c(a)]})]}),(0,Qr.jsx)("div",{className:"flex items-center gap-1.5",children:t.passed?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(On,{size:16,style:{color:"#10b981"}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:"#10b981"},children:e("tests.passed")})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Wi,{size:16,style:{color:"#ef4444"}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:"#ef4444"},children:e("tests.failed")})]})}),(0,Qr.jsx)("div",{className:"flex justify-end",children:(0,Qr.jsxs)("button",{onClick:()=>{const e=t.attempt_id||t.id;be(e)},className:"px-2.5 py-1 rounded-lg transition-all flex items-center gap-1.5 text-xs",style:{backgroundColor:f.hoverBg,color:f.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=f.hoverBgStrong,e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=f.hoverBg,e.currentTarget.style.transform="scale(1)"},title:e("tests.viewDetails"),children:[(0,Qr.jsx)(Nc,{size:14}),(0,Qr.jsx)("span",{className:"font-medium",children:e("tests.details")})]})})]}),r<me.length-1&&(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},t.attempt_id||t.id||r)})]})})]})})]})}),(0,Qr.jsx)(ow,{})]})})}),L&&S&&(0,Qr.jsx)("div",{className:"fixed inset-0 z-[9999] flex flex-col pt-10",style:{backgroundColor:s("background","#ffffff")},children:(0,Qr.jsx)("div",{className:"w-full flex-1 overflow-hidden",children:(0,Qr.jsx)(Yu,{quizId:S.id,lessonId:j?.id,onQuizComplete:we,onExit:je,isDrawingMode:U,setIsDrawingMode:H,isDrawingEnabled:W,setIsDrawingEnabled:Q,showDrawingToolbar:V,setShowDrawingToolbar:K,drawingTool:Y,drawingColor:X,drawingLineWidth:J,onDrawingToolChange:G,onDrawingColorChange:Z,onDrawingLineWidthChange:ee,onClearCanvas:Ne})})})]})};var lw=o(4297),cw=o.n(lw),dw=o(305),uw=o.n(dw),fw=e=>0===e?0:e>0?1:-1,pw=e=>"number"==typeof e&&e!=+e,mw=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,hw=e=>("number"==typeof e||e instanceof Number)&&!pw(e),gw=e=>hw(e)||"string"==typeof e,xw=0,yw=e=>{var t=++xw;return"".concat(e||"").concat(t)},bw=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!hw(e)&&"string"!=typeof e)return n;if(mw(e)){if(null==t)return n;var a=e.indexOf("%");r=t*parseFloat(e.slice(0,a))/100}else r=+e;return pw(r)&&(r=n),s&&null!=t&&r>t&&(r=t),r},vw=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1};function ww(e,t,r){return hw(e)&&hw(t)?e+r*(t-e):t}function jw(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):uw()(e,t))===r)}var Nw=e=>null==e,kw=e=>Nw(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function _w(e){return null!=e}function Cw(){}var Sw=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];if("undefined"!=typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(t.replace(/%s/g,()=>n[a++]))}},Ew=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:a,maxHeight:o}=r,i=mw(n)?e:Number(n),l=mw(s)?t:Number(s);return a&&a>0&&(i?l=i/a:l&&(i=l*a),o&&null!=l&&l>o&&(l=o)),{calculatedWidth:i,calculatedHeight:l}},Ow={width:0,height:0,overflow:"visible"},Mw={width:0,overflowX:"visible"},Tw={height:0,overflowY:"visible"},Pw={},Aw=e=>{var{width:t,height:r}=e,n=mw(t),s=mw(r);return n&&s?Ow:n?Mw:s?Tw:Pw};function qw(e){return Number.isFinite(e)}function zw(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dw.apply(null,arguments)}function Lw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Iw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lw(Object(r),!0).forEach(function(t){Rw(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lw(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Rw(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $w=(0,a.createContext)({width:-1,height:-1});function Fw(e){var{children:t,width:r,height:n}=e,s=(0,a.useMemo)(()=>({width:r,height:n}),[r,n]);return function(e){return zw(e.width)&&zw(e.height)}(s)?a.createElement($w.Provider,{value:s},t):null}var Bw=()=>(0,a.useContext)($w),Uw=(0,a.forwardRef)((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:o,minWidth:i=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:f,className:p,onResize:m,style:h={}}=e,g=(0,a.useRef)(null),x=(0,a.useRef)();x.current=m,(0,a.useImperativeHandle)(t,()=>g.current);var[y,b]=(0,a.useState)({containerWidth:n.width,containerHeight:n.height}),v=(0,a.useCallback)((e,t)=>{b(r=>{var n=Math.round(e),s=Math.round(t);return r.containerWidth===n&&r.containerHeight===s?r:{containerWidth:n,containerHeight:s}})},[]);(0,a.useEffect)(()=>{if(null==g.current||"undefined"==typeof ResizeObserver)return Cw;var e=e=>{var t,{width:r,height:n}=e[0].contentRect;v(r,n),null===(t=x.current)||void 0===t||t.call(x,r,n)};u>0&&(e=cw()(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=g.current.getBoundingClientRect();return v(r,n),t.observe(g.current),()=>{t.disconnect()}},[v,u]);var{containerWidth:w,containerHeight:j}=y;Sw(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:k}=Ew(w,j,{width:s,height:o,aspect:r,maxHeight:c});return Sw(null!=N&&N>0||null!=k&&k>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",N,k,s,o,i,l,r),a.createElement("div",{id:f?"".concat(f):void 0,className:ar("recharts-responsive-container",p),style:Iw(Iw({},h),{},{width:s,height:o,minWidth:i,minHeight:l,maxHeight:c}),ref:g},a.createElement("div",{style:Aw({width:s,height:o})},a.createElement(Fw,{width:N,height:k},d)))}),Hw=(0,a.forwardRef)((e,t)=>{var r=Bw();if(zw(r.width)&&zw(r.height))return e.children;var{width:n,height:s}=function(e){var{width:t,height:r,aspect:n}=e,s=t,a=r;return void 0===s&&void 0===a?(s="100%",a="100%"):void 0===s?s=n&&n>0?void 0:"100%":void 0===a&&(a=n&&n>0?void 0:"100%"),{width:s,height:a}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:i}=Ew(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return hw(o)&&hw(i)?a.createElement(Fw,{width:o,height:i},e.children):a.createElement(Uw,Dw({},e,{width:n,height:s,ref:t}))}),Ww=Symbol.for("immer-nothing"),Qw=Symbol.for("immer-draftable"),Vw=Symbol.for("immer-state");function Kw(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Yw=Object,Gw=Yw.getPrototypeOf,Xw="constructor",Zw="prototype",Jw="configurable",ej="enumerable",tj="writable",rj="value",nj=e=>!!e&&!!e[Vw];function sj(e){return!!e&&(ij(e)||pj(e)||!!e[Qw]||!!e[Xw]?.[Qw]||mj(e)||hj(e))}var aj=Yw[Zw][Xw].toString(),oj=new WeakMap;function ij(e){if(!e||!gj(e))return!1;const t=Gw(e);if(null===t||t===Yw[Zw])return!0;const r=Yw.hasOwnProperty.call(t,Xw)&&t[Xw];if(r===Object)return!0;if(!xj(r))return!1;let n=oj.get(r);return void 0===n&&(n=Function.toString.call(r),oj.set(r,n)),n===aj}function lj(e,t,r=!0){0===cj(e)?(r?Reflect.ownKeys(e):Yw.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function cj(e){const t=e[Vw];return t?t.type_:pj(e)?1:mj(e)?2:hj(e)?3:0}var dj=(e,t,r=cj(e))=>2===r?e.has(t):Yw[Zw].hasOwnProperty.call(e,t),uj=(e,t,r=cj(e))=>2===r?e.get(t):e[t],fj=(e,t,r,n=cj(e))=>{2===n?e.set(t,r):3===n?e.add(r):e[t]=r},pj=Array.isArray,mj=e=>e instanceof Map,hj=e=>e instanceof Set,gj=e=>"object"==typeof e,xj=e=>"function"==typeof e,yj=e=>"boolean"==typeof e,bj=e=>e.copy_||e.base_,vj=e=>e.modified_?e.copy_:e.base_;function wj(e,t){if(mj(e))return new Map(e);if(hj(e))return new Set(e);if(pj(e))return Array[Zw].slice.call(e);const r=ij(e);if(!0===t||"class_only"===t&&!r){const t=Yw.getOwnPropertyDescriptors(e);delete t[Vw];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const s=r[n],a=t[s];!1===a[tj]&&(a[tj]=!0,a[Jw]=!0),(a.get||a.set)&&(t[s]={[Jw]:!0,[tj]:!0,[ej]:a[ej],[rj]:e[s]})}return Yw.create(Gw(e),t)}{const t=Gw(e);if(null!==t&&r)return{...e};const n=Yw.create(t);return Yw.assign(n,e)}}function jj(e,t=!1){return kj(e)||nj(e)||(cj(e)>1&&Yw.defineProperties(e,{set:Nj,add:Nj,clear:Nj,delete:Nj}),Yw.freeze(e),t&&lj(e,(e,t)=>{jj(t,!0)},!1)),e}var Nj={[rj]:function(){Kw(2)}};function kj(e){return null===e||!gj(e)||Yw.isFrozen(e)}var _j,Cj="MapSet",Sj="Patches",Ej={};function Oj(e){const t=Ej[e];return t||Kw(0),t}var Mj=()=>_j;function Tj(e,t){t&&(e.patchPlugin_=Oj(Sj),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Pj(e){Aj(e),e.drafts_.forEach(zj),e.drafts_=null}function Aj(e){e===_j&&(_j=e.parent_)}var qj=e=>{return _j={drafts_:[],parent_:_j,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:(t=Cj,Ej[t]?Oj(Cj):void 0)};var t};function zj(e){const t=e[Vw];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Dj(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(void 0!==e&&e!==r){r[Vw].modified_&&(Pj(t),Kw(4)),sj(e)&&(e=Lj(t,e));const{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(r[Vw].base_,e,t)}else e=Lj(t,r);return function(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&jj(t,r)}(t,e,!0),Pj(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ww?e:void 0}function Lj(e,t){if(kj(t))return t;const r=t[Vw];if(!r)return Uj(t,e.handledSet_,e);if(!Rj(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:t}=r;if(t)for(;t.length>0;)t.pop()(e);Bj(r,e)}return r.copy_}function Ij(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Rj=(e,t)=>e.scope_===t,$j=[];function Fj(e,t,r,n){const s=bj(e),a=e.type_;if(void 0!==n&&uj(s,n,a)===t)return void fj(s,n,r,a);if(!e.draftLocations_){const t=e.draftLocations_=new Map;lj(s,(e,r)=>{if(nj(r)){const n=t.get(r)||[];n.push(e),t.set(r,n)}})}const o=e.draftLocations_.get(t)??$j;for(const e of o)fj(s,e,r,a)}function Bj(e,t){if(e.modified_&&!e.finalized_&&(3===e.type_||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const n=r.getPath(e);n&&r.generatePatches_(e,n,t)}Ij(e)}}function Uj(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||nj(e)||t.has(e)||!sj(e)||kj(e)||(t.add(e),lj(e,(n,s)=>{if(nj(s)){const t=s[Vw];if(Rj(t,r)){const r=vj(t);fj(e,n,r,e.type_),Ij(t)}}else sj(s)&&Uj(s,t,r)})),e}var Hj={get(e,t){if(t===Vw)return e;const r=bj(e);if(!dj(r,t,e.type_))return function(e,t,r){const n=Vj(t,r);return n?rj in n?n[rj]:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];if(e.finalized_||!sj(n))return n;if(n===Qj(e.base_,t)){Yj(e);const r=1===e.type_?+t:t,s=Gj(e.scope_,n,e,r);return e.copy_[r]=s}return n},has:(e,t)=>t in bj(e),ownKeys:e=>Reflect.ownKeys(bj(e)),set(e,t,r){const n=Vj(bj(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Qj(bj(e),t),s=n?.[Vw];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||dj(e.base_,t,e.type_)))return!0;Yj(e),Kj(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),function(e,t,r){const{scope_:n}=e;if(nj(r)){const s=r[Vw];Rj(s,n)&&s.callbacks_.push(function(){Yj(e);const n=vj(s);Fj(e,r,n,t)})}else sj(r)&&e.callbacks_.push(function(){const s=bj(e);uj(s,t,e.type_)===r&&n.drafts_.length>1&&!0===(e.assigned_.get(t)??!1)&&e.copy_&&Uj(uj(e.copy_,t,e.type_),n.handledSet_,n)})}(e,t,r)),!0},deleteProperty:(e,t)=>(Yj(e),void 0!==Qj(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),Kj(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=bj(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{[tj]:!0,[Jw]:1!==e.type_||"length"!==t,[ej]:n[ej],[rj]:r[t]}:n},defineProperty(){Kw(11)},getPrototypeOf:e=>Gw(e.base_),setPrototypeOf(){Kw(12)}},Wj={};function Qj(e,t){const r=e[Vw];return(r?bj(r):e)[t]}function Vj(e,t){if(!(t in e))return;let r=Gw(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Gw(r)}}function Kj(e){e.modified_||(e.modified_=!0,e.parent_&&Kj(e.parent_))}function Yj(e){e.copy_||(e.assigned_=new Map,e.copy_=wj(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Gj(e,t,r,n){const[s,a]=mj(t)?Oj(Cj).proxyMap_(t,r):hj(t)?Oj(Cj).proxySet_(t,r):function(e,t){const r=pj(e),n={type_:r?1:0,scope_:t?t.scope_:Mj(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=n,a=Hj;r&&(s=[n],a=Wj);const{revoke:o,proxy:i}=Proxy.revocable(s,a);return n.draft_=i,n.revoke_=o,[i,n]}(t,r);return(r?.scope_??Mj()).drafts_.push(s),a.callbacks_=r?.callbacks_??[],a.key_=n,r&&void 0!==n?function(e,t,r){e.callbacks_.push(function(n){const s=t;if(!s||!Rj(s,n))return;n.mapSetPlugin_?.fixSetContents(s);const a=vj(s);Fj(e,s.draft_??s,a,r),Bj(s,n)})}(r,a,n):a.callbacks_.push(function(e){e.mapSetPlugin_?.fixSetContents(a);const{patchPlugin_:t}=e;a.modified_&&t&&t.generatePatches_(a,[],e)}),s}function Xj(e){return nj(e)||Kw(10),Zj(e)}function Zj(e){if(!sj(e)||kj(e))return e;const t=e[Vw];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=wj(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=wj(e,!0);return lj(r,(e,t)=>{fj(r,e,Zj(t))},n),t&&(t.finalized_=!1),r}lj(Hj,(e,t)=>{Wj[e]=function(){const e=arguments;return e[0]=e[0][0],t.apply(this,e)}}),Wj.deleteProperty=function(e,t){return Wj.set.call(this,e,t,void 0)},Wj.set=function(e,t,r){return Hj.set.call(this,e[0],t,r,e[0])};var Jj=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,r)=>{if(xj(e)&&!xj(t)){const r=t;t=e;const n=this;return function(e=r,...s){return n.produce(e,e=>t.call(this,e,...s))}}let n;if(xj(t)||Kw(6),void 0===r||xj(r)||Kw(7),sj(e)){const s=qj(this),a=Gj(0,e,void 0);let o=!0;try{n=t(a),o=!1}finally{o?Pj(s):Aj(s)}return Tj(s,r),Dj(n,s)}if(!e||!gj(e)){if(n=t(e),void 0===n&&(n=e),n===Ww&&(n=void 0),this.autoFreeze_&&jj(n,!0),r){const t=[],s=[];Oj(Sj).generateReplacementPatches_(e,n,{patches_:t,inversePatches_:s}),r(t,s)}return n}Kw(1)},this.produceWithPatches=(e,t)=>{if(xj(e))return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},yj(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),yj(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),yj(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){sj(e)||Kw(8),nj(e)&&(e=Xj(e));const t=qj(this),r=Gj(0,e,void 0);return r[Vw].isManual_=!0,Aj(t),r}finishDraft(e,t){const r=e&&e[Vw];r&&r.isManual_||Kw(9);const{scope_:n}=r;return Tj(n,t),Dj(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=Oj(Sj).applyPatches_;return nj(e)?n(e,t):this.produce(e,e=>n(e,t))}},eN=Jj.produce;function tN(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var rN=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),nN=()=>Math.random().toString(36).substring(7).split("").join("."),sN={INIT:`@@redux/INIT${nN()}`,REPLACE:`@@redux/REPLACE${nN()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${nN()}`};function aN(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function oN(e,t,r){if("function"!=typeof e)throw new Error(tN(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(tN(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(tN(1));return r(oN)(e,t)}let n=e,s=t,a=new Map,o=a,i=0,l=!1;function c(){o===a&&(o=new Map,a.forEach((e,t)=>{o.set(t,e)}))}function d(){if(l)throw new Error(tN(3));return s}function u(e){if("function"!=typeof e)throw new Error(tN(4));if(l)throw new Error(tN(5));let t=!0;c();const r=i++;return o.set(r,e),function(){if(t){if(l)throw new Error(tN(6));t=!1,c(),o.delete(r),a=null}}}function f(e){if(!aN(e))throw new Error(tN(7));if(void 0===e.type)throw new Error(tN(8));if("string"!=typeof e.type)throw new Error(tN(17));if(l)throw new Error(tN(9));try{l=!0,s=n(s,e)}finally{l=!1}return(a=o).forEach(e=>{e()}),e}return f({type:sN.INIT}),{dispatch:f,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(tN(10));n=e,f({type:sN.REPLACE})},[rN]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(tN(11));function r(){const e=t;e.next&&e.next(d())}return r(),{unsubscribe:e(r)}},[rN](){return this}}}}}function iN(e){const t=Object.keys(e),r={};for(let n=0;n<t.length;n++){const s=t[n];"function"==typeof e[s]&&(r[s]=e[s])}const n=Object.keys(r);let s;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if(void 0===r(void 0,{type:sN.INIT}))throw new Error(tN(12));if(void 0===r(void 0,{type:sN.PROBE_UNKNOWN_ACTION()}))throw new Error(tN(13))})}(r)}catch(e){s=e}return function(e={},t){if(s)throw s;let a=!1;const o={};for(let s=0;s<n.length;s++){const i=n[s],l=r[i],c=e[i],d=l(c,t);if(void 0===d)throw t&&t.type,new Error(tN(14));o[i]=d,a=a||d!==c}return a=a||n.length!==Object.keys(e).length,a?o:e}}function lN(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function cN(e){return aN(e)&&"type"in e&&"string"==typeof e.type}function dN(e){return({dispatch:t,getState:r})=>n=>s=>"function"==typeof s?s(t,r,e):n(s)}var uN=dN(),fN=dN,pN="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?lN:lN.apply(null,arguments)};function mN(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(ik(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>cN(t)&&t.type===e,r}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var hN=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function gN(e){return sj(e)?eN(e,()=>{}):e}function xN(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var yN="RTK_autoBatch",bN=()=>e=>({payload:e,meta:{[yN]:!0}}),vN=e=>t=>{setTimeout(t,e)},wN=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,a=!1,o=!1;const i=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:vN(10):"callback"===e.type?e.queueNotification:vN(e.timeout),c=()=>{o=!1,a&&(a=!1,i.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>s&&e());return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{return s=!e?.meta?.[yN],a=!s,a&&(o||(o=!0,l(c))),n.dispatch(e)}finally{s=!0}}})};function jN(e){const t={},r=[];let n;const s={addCase(e,r){const n="string"==typeof e?e:e.type;if(!n)throw new Error(ik(28));if(n in t)throw new Error(ik(29));return t[n]=r,s},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),s),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),s),addDefaultCase:e=>(n=e,s)};return e(s),[t,r,n]}var NN=(e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},kN=Symbol.for("rtk-slice-createasyncthunk");function _N(e,t){return`${e}/${t}`}function CN({creators:e}={}){const t=e?.asyncThunk?.[kN];return function(e){const{name:r,reducerPath:n=r}=e;if(!r)throw new Error(ik(11));const s=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},a=Object.keys(s),o={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},i={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(ik(12));if(r in o.sliceCaseReducersByType)throw new Error(ik(13));return o.sliceCaseReducersByType[r]=t,i},addMatcher:(e,t)=>(o.sliceMatchers.push({matcher:e,reducer:t}),i),exposeAction:(e,t)=>(o.actionCreators[e]=t,i),exposeCaseReducer:(e,t)=>(o.sliceCaseReducersByName[e]=t,i)};function l(){const[t={},r=[],n]="function"==typeof e.extraReducers?jN(e.extraReducers):[e.extraReducers],s={...t,...o.sliceCaseReducersByType};return function(e){let t,[a,i,l]=jN(e=>{for(let t in s)e.addCase(t,s[t]);for(let t of o.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)});if("function"==typeof e)t=()=>gN(e());else{const r=gN(e);t=()=>r}function c(e=t(),r){let n=[a[r.type],...i.filter(({matcher:e})=>e(r)).map(({reducer:e})=>e)];return 0===n.filter(e=>!!e).length&&(n=[l]),n.reduce((e,t)=>{if(t){if(nj(e)){const n=t(e,r);return void 0===n?e:n}if(sj(e))return eN(e,e=>t(e,r));{const n=t(e,r);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return c.getInitialState=t,c}(e.initialState)}a.forEach(n=>{const a=s[n],o={reducerName:n,type:_N(r,n),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(a)?function({type:e,reducerName:t,createNotation:r},n,s){let a,o;if("reducer"in n){if(r&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(n))throw new Error(ik(17));a=n.reducer,o=n.prepare}else a=n;s.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?mN(e,o):mN(e))}(o,a,i):function({type:e,reducerName:t},r,n,s){if(!s)throw new Error(ik(18));const{payloadCreator:a,fulfilled:o,pending:i,rejected:l,settled:c,options:d}=r,u=s(e,a,d);n.exposeAction(t,u),o&&n.addCase(u.fulfilled,o),i&&n.addCase(u.pending,i),l&&n.addCase(u.rejected,l),c&&n.addMatcher(u.settled,c),n.exposeCaseReducer(t,{fulfilled:o||ON,pending:i||ON,rejected:l||ON,settled:c||ON})}(o,a,i,t)});const c=e=>e,d=new Map,u=new WeakMap;let f;function p(e,t){return f||(f=l()),f(e,t)}function m(){return f||(f=l()),f.getInitialState()}function h(t,r=!1){function n(e){let s=e[t];return void 0===s&&r&&(s=xN(u,n,m)),s}function s(t=c){const n=xN(d,r,()=>new WeakMap);return xN(n,t,()=>{const n={};for(const[s,a]of Object.entries(e.selectors??{}))n[s]=SN(a,t,()=>xN(u,t,m),r);return n})}return{reducerPath:t,getSelectors:s,get selectors(){return s(n)},selectSlice:n}}const g={name:r,reducer:p,actions:o.actionCreators,caseReducers:o.sliceCaseReducersByName,getInitialState:m,...h(n),injectInto(e,{reducerPath:t,...r}={}){const s=t??n;return e.inject({reducerPath:s,reducer:p},r),{...g,...h(s,!0)}}};return g}}function SN(e,t,r,n){function s(s,...a){let o=t(s);return void 0===o&&n&&(o=r()),e(o,...a)}return s.unwrapped=e,s}var EN=CN();function ON(){}var MN="listener",TN="completed",PN="cancelled",AN=`task-${PN}`,qN=`task-${TN}`,zN=`${MN}-${PN}`,DN=`${MN}-${TN}`,LN=class{constructor(e){this.code=e,this.message=`task ${PN} (reason: ${e})`}name="TaskAbortError";message},IN=(e,t)=>{if("function"!=typeof e)throw new TypeError(ik(32))},RN=()=>{},$N=(e,t=RN)=>(e.catch(t),e),FN=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),BN=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},UN=e=>{if(e.aborted){const{reason:t}=e;throw new LN(t)}};function HN(e,t){let r=RN;return new Promise((n,s)=>{const a=()=>s(new LN(e.reason));e.aborted?a():(r=FN(e,a),t.finally(()=>r()).then(n,s))}).finally(()=>{r=RN})}var WN=e=>t=>$N(HN(e,t).then(t=>(UN(e),t))),QN=e=>{const t=WN(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:VN}=Object,KN={},YN="listenerMiddleware",GN=(e,t)=>(r,n)=>{IN(r);const s=new AbortController;var a;a=s,FN(e,()=>BN(a,e.reason));const o=(async()=>{try{return await Promise.resolve(),{status:"ok",value:await(async()=>{UN(e),UN(s.signal);const t=await r({pause:WN(s.signal),delay:QN(s.signal),signal:s.signal});return UN(s.signal),t})()}}catch(e){return{status:e instanceof LN?"cancelled":"rejected",error:e}}finally{BN(s,qN)}})();return n?.autoJoin&&t.push(o.catch(RN)),{result:WN(e)(o),cancel(){BN(s,AN)}}},XN=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:a}=e;if(t)s=mN(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(ik(21));return IN(a),{predicate:s,type:t,effect:a}},ZN=VN(e=>{const{type:t,predicate:r,effect:n}=XN(e);return{id:NN(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(ik(22))}}},{withTypes:()=>ZN}),JN=(e,t)=>{const{type:r,effect:n,predicate:s}=XN(t);return Array.from(e.values()).find(e=>("string"==typeof r?e.type===r:e.predicate===s)&&e.effect===n)},ek=e=>{e.pending.forEach(e=>{BN(e,zN)})},tk=(e,t,r)=>{try{e(t,r)}catch(e){setTimeout(()=>{throw e},0)}},rk=VN(mN(`${YN}/add`),{withTypes:()=>rk}),nk=mN(`${YN}/removeAll`),sk=VN(mN(`${YN}/remove`),{withTypes:()=>sk}),ak=(...e)=>{console.error(`${YN}/error`,...e)},ok=(e={})=>{const t=new Map,r=new Map,{extra:n,onError:s=ak}=e;IN(s);const a=e=>{return(r=JN(t,e)??ZN(e)).unsubscribe=()=>t.delete(r.id),t.set(r.id,r),e=>{r.unsubscribe(),e?.cancelActive&&ek(r)};var r};VN(a,{withTypes:()=>a});const o=e=>{const r=JN(t,e);return r&&(r.unsubscribe(),e.cancelActive&&ek(r)),!!r};VN(o,{withTypes:()=>o});const i=async(e,o,i,l)=>{const c=new AbortController,d=((e,t)=>(r,n)=>$N((async(r,n)=>{UN(t);let s=()=>{};const a=[new Promise((t,n)=>{let a=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});s=()=>{a(),n()}})];null!=n&&a.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await HN(t,Promise.race(a));return UN(t),e}finally{s()}})(r,n)))(a,c.signal),u=[];try{e.pending.add(c),(e=>{const t=r.get(e)??0;r.set(e,t+1)})(e),await Promise.resolve(e.effect(o,VN({},i,{getOriginalState:l,condition:(e,t)=>d(e,t).then(Boolean),take:d,delay:QN(c.signal),pause:WN(c.signal),extra:n,signal:c.signal,fork:GN(c.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==c&&(BN(e,zN),r.delete(e))})},cancel:()=>{BN(c,zN),e.pending.delete(c)},throwIfCancelled:()=>{UN(c.signal)}})))}catch(e){e instanceof LN||tk(s,e,{raisedBy:"effect"})}finally{await Promise.all(u),BN(c,DN),(e=>{const t=r.get(e)??1;1===t?r.delete(e):r.set(e,t-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())ek(e);e.clear()})(t,r);return{middleware:e=>r=>n=>{if(!cN(n))return r(n);if(rk.match(n))return a(n.payload);if(nk.match(n))return void l();if(sk.match(n))return o(n.payload);let c=e.getState();const d=()=>{if(c===KN)throw new Error(ik(23));return c};let u;try{if(u=r(n),t.size>0){const r=e.getState(),a=Array.from(t.values());for(const t of a){let a=!1;try{a=t.predicate(n,r,c)}catch(e){a=!1,tk(s,e,{raisedBy:"predicate"})}a&&i(t,n,e,d)}}}finally{c=KN}return u},startListening:a,stopListening:o,clearListeners:l}};function ik(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function lk(e,t){if(t){var r=Number.parseInt(t,10);if(!pw(r))return null==e?void 0:e[r]}}Symbol.for("rtk-state-proxy-original");var ck=EN({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),dk=ck.reducer,{createEventEmitter:uk}=ck.actions;o(8418);var fk={notify(){},get:()=>[]};var pk=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),mk=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),hk=(()=>pk||mk?a.useLayoutEffect:a.useEffect)();function gk(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function xk(e,t){if(gk(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!gk(e[r[n]],t[r[n]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var yk=Symbol.for("react-redux-context"),bk="undefined"!=typeof globalThis?globalThis:{};function vk(){if(!a.createContext)return{};const e=bk[yk]??=new Map;let t=e.get(a.createContext);return t||(t=a.createContext(null),e.set(a.createContext,t)),t}var wk=vk(),jk=function(e){const{children:t,context:r,serverState:n,store:s}=e,o=a.useMemo(()=>{const e=function(e,t){let r,n=fk,s=0,a=!1;function o(){c.onStateChange&&c.onStateChange()}function i(){s++,r||(r=t?t.addNestedSub(o):e.subscribe(o),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){var t;t=()=>{let t=e;for(;t;)t.callback(),t=t.next},t()},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){n&&null!==e&&(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}())}function l(){s--,r&&0===s&&(r(),r=void 0,n.clear(),n=fk)}const c={addNestedSub:function(e){i();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,i())},tryUnsubscribe:function(){a&&(a=!1,l())},getListeners:()=>n};return c}(s);return{store:s,subscription:e,getServerState:n?()=>n:void 0}},[s,n]),i=a.useMemo(()=>s.getState(),[s]);hk(()=>{const{subscription:e}=o;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[o,i]);const l=r||wk;return a.createElement(l.Provider,{value:o},t)},Nk=Symbol.for("immer-nothing"),kk=Symbol.for("immer-draftable"),_k=Symbol.for("immer-state");function Ck(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sk=Object.getPrototypeOf;function Ek(e){return!!e&&!!e[_k]}function Ok(e){return!!e&&(Pk(e)||Array.isArray(e)||!!e[kk]||!!e.constructor?.[kk]||Lk(e)||Ik(e))}var Mk=Object.prototype.constructor.toString(),Tk=new WeakMap;function Pk(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!=typeof r)return!1;let n=Tk.get(r);return void 0===n&&(n=Function.toString.call(r),Tk.set(r,n)),n===Mk}function Ak(e,t,r=!0){0===qk(e)?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function qk(e){const t=e[_k];return t?t.type_:Array.isArray(e)?1:Lk(e)?2:Ik(e)?3:0}function zk(e,t){return 2===qk(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Dk(e,t,r){const n=qk(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function Lk(e){return e instanceof Map}function Ik(e){return e instanceof Set}function Rk(e){return e.copy_||e.base_}function $k(e,t){if(Lk(e))return new Map(e);if(Ik(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=Pk(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[_k];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const s=r[n],a=t[s];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[s]})}return Object.create(Sk(e),t)}{const t=Sk(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function Fk(e,t=!1){return Uk(e)||Ek(e)||!Ok(e)||(qk(e)>1&&Object.defineProperties(e,{set:Bk,add:Bk,clear:Bk,delete:Bk}),Object.freeze(e),t&&Object.values(e).forEach(e=>Fk(e,!0))),e}var Bk={value:function(){Ck(2)}};function Uk(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var Hk,Wk={};function Qk(e){const t=Wk[e];return t||Ck(0),t}function Vk(){return Hk}function Kk(e,t){t&&(Qk("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Yk(e){Gk(e),e.drafts_.forEach(Zk),e.drafts_=null}function Gk(e){e===Hk&&(Hk=e.parent_)}function Xk(e){return Hk={drafts_:[],parent_:Hk,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Zk(e){const t=e[_k];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Jk(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[_k].modified_&&(Yk(t),Ck(4)),Ok(e)&&(e=e_(t,e),t.parent_||r_(t,e)),t.patches_&&Qk("Patches").generateReplacementPatches_(r[_k].base_,e,t.patches_,t.inversePatches_)):e=e_(t,r,[]),Yk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Nk?e:void 0}function e_(e,t,r){if(Uk(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[_k];if(!s)return Ak(t,(n,a)=>t_(e,s,t,n,a,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return r_(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const t=s.copy_;let a=t,o=!1;3===s.type_&&(a=new Set(t),t.clear(),o=!0),Ak(a,(n,a)=>t_(e,s,t,n,a,r,o),n),r_(e,t,!1),r&&e.patches_&&Qk("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function t_(e,t,r,n,s,a,o){if(null==s)return;if("object"!=typeof s&&!o)return;const i=Uk(s);if(!i||o){if(Ek(s)){const o=e_(e,s,a&&t&&3!==t.type_&&!zk(t.assigned_,n)?a.concat(n):void 0);if(Dk(r,n,o),!Ek(o))return;e.canAutoFreeze_=!1}else o&&r.add(s);if(Ok(s)&&!i){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[n]===s&&i)return;e_(e,s),t&&t.scope_.parent_||"symbol"==typeof n||!(Lk(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||r_(e,s)}}}function r_(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Fk(t,r)}var n_={get(e,t){if(t===_k)return e;const r=Rk(e);if(!zk(r,t))return function(e,t,r){const n=o_(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!Ok(n)?n:n===a_(e.base_,t)?(l_(e),e.copy_[t]=c_(n,e)):n},has:(e,t)=>t in Rk(e),ownKeys:e=>Reflect.ownKeys(Rk(e)),set(e,t,r){const n=o_(Rk(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=a_(Rk(e),t),s=n?.[_k];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||zk(e.base_,t)))return!0;l_(e),i_(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==a_(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,l_(e),i_(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Rk(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){Ck(11)},getPrototypeOf:e=>Sk(e.base_),setPrototypeOf(){Ck(12)}},s_={};function a_(e,t){const r=e[_k];return(r?Rk(r):e)[t]}function o_(e,t){if(!(t in e))return;let r=Sk(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Sk(r)}}function i_(e){e.modified_||(e.modified_=!0,e.parent_&&i_(e.parent_))}function l_(e){e.copy_||(e.copy_=$k(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function c_(e,t){const r=Lk(e)?Qk("MapSet").proxyMap_(e,t):Ik(e)?Qk("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Vk(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,a=n_;r&&(s=[n],a=s_);const{revoke:o,proxy:i}=Proxy.revocable(s,a);return n.draft_=i,n.revoke_=o,i}(e,t);return(t?t.scope_:Vk()).drafts_.push(r),r}function d_(e){if(!Ok(e)||Uk(e))return e;const t=e[_k];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=$k(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=$k(e,!0);return Ak(r,(e,t)=>{Dk(r,e,d_(t))},n),t&&(t.finalized_=!1),r}Ak(n_,(e,t)=>{s_[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),s_.deleteProperty=function(e,t){return s_.set.call(this,e,t,void 0)},s_.set=function(e,t,r){return n_.set.call(this,e[0],t,r,e[0])};var u_=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...s){return n.produce(e,e=>t.call(this,e,...s))}}let n;if("function"!=typeof t&&Ck(6),void 0!==r&&"function"!=typeof r&&Ck(7),Ok(e)){const s=Xk(this),a=c_(e,void 0);let o=!0;try{n=t(a),o=!1}finally{o?Yk(s):Gk(s)}return Kk(s,r),Jk(n,s)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===Nk&&(n=void 0),this.autoFreeze_&&Fk(n,!0),r){const t=[],s=[];Qk("Patches").generateReplacementPatches_(e,n,t,s),r(t,s)}return n}Ck(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof e?.useStrictIteration&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ok(e)||Ck(8),Ek(e)&&(e=function(e){return Ek(e)||Ck(10),d_(e)}(e));const t=Xk(this),r=c_(e,void 0);return r[_k].isManual_=!0,Gk(t),r}finishDraft(e,t){const r=e&&e[_k];r&&r.isManual_||Ck(9);const{scope_:n}=r;return Kk(n,t),Jk(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=Qk("Patches").applyPatches_;return Ek(e)?n(e,t):this.produce(e,e=>n(e,t))}};u_.produce;var f_={active:!1,index:null,dataKey:void 0,coordinate:void 0},p_=EN({name:"tooltip",initialState:{itemInteraction:{click:f_,hover:f_},axisInteraction:{click:f_,hover:f_},keyboardInteraction:f_,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:bN()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Xj(e).tooltipItemPayloads.indexOf(r);s>-1&&(e.tooltipItemPayloads[s]=n)},prepare:bN()},removeTooltipEntrySettings:{reducer(e,t){var r=Xj(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:bN()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:m_,replaceTooltipEntrySettings:h_,removeTooltipEntrySettings:g_,setTooltipSettingsState:x_,setActiveMouseOverItemIndex:y_,mouseLeaveItem:b_,mouseLeaveChart:v_,setActiveClickItemIndex:w_,setMouseOverAxisIndex:j_,setMouseClickAxisIndex:N_,setSyncInteraction:k_,setKeyboardInteraction:C_}=p_.actions,S_=p_.reducer,E_=EN({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:O_,setDataStartEndIndexes:M_,setComputedData:T_}=E_.actions,P_=E_.reducer,A_=EN({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,a;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(n=t.payload.right)&&void 0!==n?n:0,e.margin.bottom=null!==(s=t.payload.bottom)&&void 0!==s?s:0,e.margin.left=null!==(a=t.payload.left)&&void 0!==a?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:q_,setLayout:z_,setChartSize:D_,setScale:L_}=A_.actions,I_=A_.reducer;var R_=e=>Array.isArray(e)?e:[e];Symbol(),Object.getPrototypeOf({});var $_="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function F_(){return{s:0,v:void 0,o:null,p:null}}function B_(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let s,a=0;function o(){let t=r;const{length:o}=arguments;for(let e=0,r=o;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t=F_(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t=F_(),e.set(r,t)):t=n}}const i=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),a++,n){const e=s?.deref?.()??s;null!=e&&n(e,l)&&(l=e,0!==a&&a--),s="object"==typeof l&&null!==l||"function"==typeof l?new $_(l):l}return i.s=1,i.v=l,l}return o.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}function U_(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,s=0,a={},o=e.pop();"object"==typeof o&&(a=o,o=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(o,`createSelector expects an output function after the inputs, but received: [${typeof o}]`);const i={...r,...a},{memoize:l,memoizeOptions:c=[],argsMemoize:d=B_,argsMemoizeOptions:u=[],devModeChecks:f={}}=i,p=R_(c),m=R_(u),h=function(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const r=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}(e),g=l(function(){return n++,o.apply(null,arguments)},...p),x=d(function(){s++;const e=function(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}(h,arguments);return t=g.apply(null,e),t},...m);return Object.assign(x,{resultFunc:o,memoizedResultFunc:g,dependencies:h,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:l,argsMemoize:d})};return Object.assign(n,{withTypes:()=>n}),n}var H_=U_(B_),W_=Object.assign((e,t=H_)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e),n=t(r.map(t=>e[t]),(...e)=>e.reduce((e,t,n)=>(e[r[n]]=t,e),{}));return n},{withTypes:()=>W_}),Q_=o(9242),V_=(0,a.createContext)(null),K_=e=>e,Y_=()=>{var e=(0,a.useContext)(V_);return e?e.store.dispatch:K_},G_=()=>{},X_=()=>G_,Z_=(e,t)=>e===t;function J_(e){var t=(0,a.useContext)(V_);return(0,Q_.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:X_,t?t.store.getState:G_,t?t.store.getState:G_,t?e:G_,Z_)}var eC=o(184),tC=o.n(eC),rC=e=>e.legend.settings;function nC(e,t){if((s=e.length)>1)for(var r,n,s,a=1,o=e[t[0]],i=o.length;a<s;++a)for(n=o,o=e[t[a]],r=0;r<i;++r)o[r][1]+=o[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function sC(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function aC(e){return function(){return e}}function oC(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function iC(e,t){return e[t]}function lC(e){const t=[];return t.key=e,t}function cC(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function dC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dC(Object(r),!0).forEach(function(t){fC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fC(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pC(e,t,r){return Nw(e)||Nw(t)?r:gw(t)?uw()(e,t,r):"function"==typeof t?t(e):r}H_([e=>e.legend.payload,rC],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?tC()(n,r):n}),Array.prototype.slice;var mC=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,hC=(e,t,r,n)=>{if(n)return e.map(e=>e.coordinate);var s,a,o=e.map(e=>(e.coordinate===t&&(s=!0),e.coordinate===r&&(a=!0),e.coordinate));return s||o.push(t),a||o.push(r),o},gC=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:a,scale:o,realScaleType:i,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:u,niceTicks:f,axisType:p}=e;if(!o)return null;var m="scaleBand"===i&&o.bandwidth?o.bandwidth()/2:2,h=(t||r)&&"category"===s&&o.bandwidth?o.bandwidth()/m:0;return h="angleAxis"===p&&a&&a.length>=2?2*fw(a[0]-a[1])*h:h,t&&(u||f)?(u||f||[]).map((e,t)=>{var r=n?n.indexOf(e):e;return{coordinate:o(r)+h,value:e,offset:h,index:t}}).filter(e=>!pw(e.coordinate)):l&&c?c.map((e,t)=>({coordinate:o(e)+h,value:e,index:t,offset:h})):o.ticks&&!r&&null!=d?o.ticks(d).map((e,t)=>({coordinate:o(e)+h,value:e,offset:h,index:t})):o.domain().map((e,t)=>({coordinate:o(e)+h,value:n?n[e]:e,index:t,offset:h}))},xC=1e-4,yC={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0,o=0;o<t;++o){var i=pw(e[o][r][1])?e[o][r][0]:e[o][r][1];i>=0?(e[o][r][0]=s,e[o][r][1]=s+i,s=e[o][r][1]):(e[o][r][0]=a,e[o][r][1]=a+i,a=e[o][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,s,a=0,o=e[0].length;a<o;++a){for(s=r=0;r<n;++r)s+=e[r][a][1]||0;if(s)for(r=0;r<n;++r)e[r][a][1]/=s}nC(e,t)}},none:nC,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,s=e[t[0]],a=s.length;n<a;++n){for(var o=0,i=0;o<r;++o)i+=e[o][n][1]||0;s[n][1]+=s[n][0]=-i/2}nC(e,t)}},wiggle:function(e,t){if((s=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,s,a=0,o=1;o<n;++o){for(var i=0,l=0,c=0;i<s;++i){for(var d=e[t[i]],u=d[o][1]||0,f=(u-(d[o-1][1]||0))/2,p=0;p<i;++p){var m=e[t[p]];f+=(m[o][1]||0)-(m[o-1][1]||0)}l+=u,c+=f*u}r[o-1][1]+=r[o-1][0]=a,l&&(a-=c/l)}r[o-1][1]+=r[o-1][0]=a,nC(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,a=0;a<t;++a){var o=pw(e[a][r][1])?e[a][r][0]:e[a][r][1];o>=0?(e[a][r][0]=s,e[a][r][1]=s+o,s=e[a][r][1]):(e[a][r][0]=0,e[a][r][1]=0)}}},bC=(e,t,r)=>{var n=yC[r],s=function(){var e=aC([]),t=oC,r=nC,n=iC;function s(s){var a,o,i=Array.from(e.apply(this,arguments),lC),l=i.length,c=-1;for(const e of s)for(a=0,++c;a<l;++a)(i[a][c]=[0,+n(e,i[a].key,c,s)]).data=e;for(a=0,o=sC(t(i));a<l;++a)i[o[a]].index=a;return r(i,o),i}return s.keys=function(t){return arguments.length?(e="function"==typeof t?t:aC(Array.from(t)),s):e},s.value=function(e){return arguments.length?(n="function"==typeof e?e:aC(+e),s):n},s.order=function(e){return arguments.length?(t=null==e?oC:"function"==typeof e?e:aC(Array.from(e)),s):t},s.offset=function(e){return arguments.length?(r=null==e?nC:e,s):r},s}().keys(t).value((e,t)=>Number(pC(e,t,0))).order(oC).offset(n);return s(e)};function vC(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:a,dataKey:o}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!Nw(s[t.dataKey])){var i=jw(r,"value",s[t.dataKey]);if(i)return i.coordinate+n/2}return r[a]?r[a].coordinate+n/2:null}var l=pC(s,Nw(o)?t.dataKey:o);return Nw(l)?null:t.scale(l)}var wC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,jC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NC=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=tC()(t,e=>e.coordinate),a=1/0,o=1,i=s.length;o<i;o++){var l=s[o],c=s[o-1];a=Math.min((l.coordinate||0)-(c.coordinate||0),a)}return a===1/0?0:a}return r?void 0:0};function kC(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:a}=e;return uC(uC({},t),{},{dataKey:r,payload:n,value:s,name:a})}function _C(e,t){return e?String(e):"string"==typeof t?t:void 0}var CC=e=>e.layout.width,SC=e=>e.layout.height,EC=e=>e.layout.scale,OC=e=>e.layout.margin,MC=H_(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),TC=H_(e=>e.cartesianAxis.yAxis,e=>Object.values(e));function PC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function AC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PC(Object(r),!0).forEach(function(t){qC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qC(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zC=H_([CC,SC,OC,e=>e.brush.height,function(e){return TC(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return TC(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return MC(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return MC(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},rC,e=>e.legend.size],(e,t,r,n,s,a,o,i,l,c)=>{var d={left:(r.left||0)+s,right:(r.right||0)+a},u=AC(AC({},{top:(r.top||0)+o,bottom:(r.bottom||0)+i}),d),f=u.bottom;u.bottom+=n,u=((e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:a,verticalAlign:o,layout:i}=t;if(("vertical"===i||"horizontal"===i&&"middle"===o)&&"center"!==a&&hw(e[a]))return uC(uC({},e),{},{[a]:e[a]+(n||0)});if(("horizontal"===i||"vertical"===i&&"center"===a)&&"middle"!==o&&hw(e[o]))return uC(uC({},e),{},{[o]:e[o]+(s||0)})}return e})(u,l,c);var p=e-u.left-u.right,m=t-u.top-u.bottom;return AC(AC({brushBottom:f},u),{},{width:Math.max(p,0),height:Math.max(m,0)})}),DC=H_(zC,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),LC=H_(CC,SC,(e,t)=>({x:0,y:0,width:e,height:t})),IC=(0,a.createContext)(null),RC=()=>null!=(0,a.useContext)(IC),$C=e=>e.brush,FC=H_([$C,zC,OC],(e,t,r)=>({height:e.height,x:hw(e.x)?e.x:t.left,y:hw(e.y)?e.y:t.top+t.height+t.brushBottom-((null==r?void 0:r.bottom)||0),width:hw(e.width)?e.width:t.width}));function BC(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var UC=()=>{var e,t=RC(),r=J_(DC),n=J_(FC),s=null===(e=J_($C))||void 0===e?void 0:e.padding;return t&&n&&s?{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}:r},HC={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},WC=()=>{var e;return null!==(e=J_(zC))&&void 0!==e?e:HC},QC=()=>J_(CC),VC=()=>J_(SC),KC=e=>e.layout.layoutType,YC=()=>J_(KC),GC=e=>{var t=Y_(),r=RC(),{width:n,height:s}=e,o=Bw(),i=n,l=s;return o&&(i=o.width>0?o.width:n,l=o.height>0?o.height:s),(0,a.useEffect)(()=>{!r&&zw(i)&&zw(l)&&t(D_({width:i,height:l}))},[t,r,i,l]),null},XC=o(3412),ZC=o.n(XC);function JC(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function eS(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}class tS extends Map{constructor(e,t=nS){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,r]of e)this.set(t,r)}get(e){return super.get(rS(this,e))}has(e){return super.has(rS(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}(this,e))}}function rS({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function nS(e){return null!==e&&"object"==typeof e?e.valueOf():e}Set;const sS=Symbol("implicit");function aS(){var e=new tS,t=[],r=[],n=sS;function s(s){let a=e.get(s);if(void 0===a){if(n!==sS)return n;e.set(s,a=t.push(s)-1)}return r[a%r.length]}return s.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new tS;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return s},s.range=function(e){return arguments.length?(r=Array.from(e),s):r.slice()},s.unknown=function(e){return arguments.length?(n=e,s):n},s.copy=function(){return aS(t,r).unknown(n)},JC.apply(s,arguments),s}function oS(){var e,t,r=aS().unknown(void 0),n=r.domain,s=r.range,a=0,o=1,i=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=o<a,f=u?o:a,p=u?a:o;e=(p-f)/Math.max(1,r-l+2*c),i&&(e=Math.floor(e)),f+=(p-f-e*(r-l))*d,t=e*(1-l),i&&(f=Math.round(f),t=Math.round(t));var m=function(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(s);++n<s;)a[n]=e+n*r;return a}(r).map(function(t){return f+e*t});return s(u?m.reverse():m)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([a,o]=e,a=+a,o=+o,u()):[a,o]},r.rangeRound=function(e){return[a,o]=e,a=+a,o=+o,i=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(i=!!e,u()):i},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return oS(n(),[a,o]).round(i).paddingInner(l).paddingOuter(c).align(d)},JC.apply(u(),arguments)}function iS(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return iS(t())},e}function lS(){return iS(oS.apply(null,arguments).paddingInner(1))}const cS=Math.sqrt(50),dS=Math.sqrt(10),uS=Math.sqrt(2);function fS(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),a=n/Math.pow(10,s),o=a>=cS?10:a>=dS?5:a>=uS?2:1;let i,l,c;return s<0?(c=Math.pow(10,-s)/o,i=Math.round(e*c),l=Math.round(t*c),i/c<e&&++i,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*o,i=Math.round(e/c),l=Math.round(t/c),i*c<e&&++i,l*c>t&&--l),l<i&&.5<=r&&r<2?fS(e,t,2*r):[i,l,c]}function pS(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[s,a,o]=n?fS(t,e,r):fS(e,t,r);if(!(a>=s))return[];const i=a-s+1,l=new Array(i);if(n)if(o<0)for(let e=0;e<i;++e)l[e]=(a-e)/-o;else for(let e=0;e<i;++e)l[e]=(a-e)*o;else if(o<0)for(let e=0;e<i;++e)l[e]=(s+e)/-o;else for(let e=0;e<i;++e)l[e]=(s+e)*o;return l}function mS(e,t,r){return fS(e=+e,t=+t,r=+r)[2]}function hS(e,t,r){r=+r;const n=(t=+t)<(e=+e),s=n?mS(t,e,r):mS(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function gS(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xS(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function yS(e){let t,r,n;function s(e,n,s=0,a=e.length){if(s<a){if(0!==t(n,n))return a;do{const t=s+a>>>1;r(e[t],n)<0?s=t+1:a=t}while(s<a)}return s}return 2!==e.length?(t=gS,r=(t,r)=>gS(e(t),r),n=(t,r)=>e(t)-r):(t=e===gS||e===xS?e:bS,r=e,n=e),{left:s,center:function(e,t,r=0,a=e.length){const o=s(e,t,r,a-1);return o>r&&n(e[o-1],t)>-n(e[o],t)?o-1:o},right:function(e,n,s=0,a=e.length){if(s<a){if(0!==t(n,n))return a;do{const t=s+a>>>1;r(e[t],n)<=0?s=t+1:a=t}while(s<a)}return s}}}function bS(){return 0}function vS(e){return null===e?NaN:+e}const wS=yS(gS),jS=wS.right,NS=(wS.left,yS(vS).center,jS);function kS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function _S(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function CS(){}var SS=.7,ES=1/SS,OS="\\s*([+-]?\\d+)\\s*",MS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",TS="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PS=/^#([0-9a-f]{3,8})$/,AS=new RegExp(`^rgb\\(${OS},${OS},${OS}\\)$`),qS=new RegExp(`^rgb\\(${TS},${TS},${TS}\\)$`),zS=new RegExp(`^rgba\\(${OS},${OS},${OS},${MS}\\)$`),DS=new RegExp(`^rgba\\(${TS},${TS},${TS},${MS}\\)$`),LS=new RegExp(`^hsl\\(${MS},${TS},${TS}\\)$`),IS=new RegExp(`^hsla\\(${MS},${TS},${TS},${MS}\\)$`),RS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function $S(){return this.rgb().formatHex()}function FS(){return this.rgb().formatRgb()}function BS(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=PS.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?US(t):3===r?new QS(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?HS(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?HS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=AS.exec(e))?new QS(t[1],t[2],t[3],1):(t=qS.exec(e))?new QS(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=zS.exec(e))?HS(t[1],t[2],t[3],t[4]):(t=DS.exec(e))?HS(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=LS.exec(e))?ZS(t[1],t[2]/100,t[3]/100,1):(t=IS.exec(e))?ZS(t[1],t[2]/100,t[3]/100,t[4]):RS.hasOwnProperty(e)?US(RS[e]):"transparent"===e?new QS(NaN,NaN,NaN,0):null}function US(e){return new QS(e>>16&255,e>>8&255,255&e,1)}function HS(e,t,r,n){return n<=0&&(e=t=r=NaN),new QS(e,t,r,n)}function WS(e,t,r,n){return 1===arguments.length?((s=e)instanceof CS||(s=BS(s)),s?new QS((s=s.rgb()).r,s.g,s.b,s.opacity):new QS):new QS(e,t,r,null==n?1:n);var s}function QS(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function VS(){return`#${XS(this.r)}${XS(this.g)}${XS(this.b)}`}function KS(){const e=YS(this.opacity);return`${1===e?"rgb(":"rgba("}${GS(this.r)}, ${GS(this.g)}, ${GS(this.b)}${1===e?")":`, ${e})`}`}function YS(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function GS(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function XS(e){return((e=GS(e))<16?"0":"")+e.toString(16)}function ZS(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new eE(e,t,r,n)}function JS(e){if(e instanceof eE)return new eE(e.h,e.s,e.l,e.opacity);if(e instanceof CS||(e=BS(e)),!e)return new eE;if(e instanceof eE)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,i=a-s,l=(a+s)/2;return i?(o=t===a?(r-n)/i+6*(r<n):r===a?(n-t)/i+2:(t-r)/i+4,i/=l<.5?a+s:2-a-s,o*=60):i=l>0&&l<1?0:o,new eE(o,i,l,e.opacity)}function eE(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function tE(e){return(e=(e||0)%360)<0?e+360:e}function rE(e){return Math.max(0,Math.min(1,e||0))}function nE(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function sE(e,t,r,n,s){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*n+o*s)/6}kS(CS,BS,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:$S,formatHex:$S,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return JS(this).formatHsl()},formatRgb:FS,toString:FS}),kS(QS,WS,_S(CS,{brighter(e){return e=null==e?ES:Math.pow(ES,e),new QS(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?SS:Math.pow(SS,e),new QS(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new QS(GS(this.r),GS(this.g),GS(this.b),YS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VS,formatHex:VS,formatHex8:function(){return`#${XS(this.r)}${XS(this.g)}${XS(this.b)}${XS(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:KS,toString:KS})),kS(eE,function(e,t,r,n){return 1===arguments.length?JS(e):new eE(e,t,r,null==n?1:n)},_S(CS,{brighter(e){return e=null==e?ES:Math.pow(ES,e),new eE(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?SS:Math.pow(SS,e),new eE(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new QS(nE(e>=240?e-240:e+120,s,n),nE(e,s,n),nE(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new eE(tE(this.h),rE(this.s),rE(this.l),YS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=YS(this.opacity);return`${1===e?"hsl(":"hsla("}${tE(this.h)}, ${100*rE(this.s)}%, ${100*rE(this.l)}%${1===e?")":`, ${e})`}`}}));const aE=e=>()=>e;function oE(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):aE(isNaN(e)?t:e)}const iE=function e(t){var r=function(e){return 1===(e=+e)?oE:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):aE(isNaN(t)?r:t)}}(t);function n(e,t){var n=r((e=WS(e)).r,(t=WS(t)).r),s=r(e.g,t.g),a=r(e.b,t.b),o=oE(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=s(t),e.b=a(t),e.opacity=o(t),e+""}}return n.gamma=e,n}(1);function lE(e){return function(t){var r,n,s=t.length,a=new Array(s),o=new Array(s),i=new Array(s);for(r=0;r<s;++r)n=WS(t[r]),a[r]=n.r||0,o[r]=n.g||0,i[r]=n.b||0;return a=e(a),o=e(o),i=e(i),n.opacity=1,function(e){return n.r=a(e),n.g=o(e),n.b=i(e),n+""}}}function cE(e,t){var r,n=t?t.length:0,s=e?Math.min(n,e.length):0,a=new Array(s),o=new Array(n);for(r=0;r<s;++r)a[r]=xE(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<s;++r)o[r]=a[r](e);return o}}function dE(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function uE(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function fE(e,t){var r,n={},s={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=xE(e[r],t[r]):s[r]=t[r];return function(e){for(r in n)s[r]=n[r](e);return s}}lE(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),s=e[n],a=e[n+1],o=n>0?e[n-1]:2*s-a,i=n<t-1?e[n+2]:2*a-s;return sE((r-n/t)*t,o,s,a,i)}}),lE(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),s=e[(n+t-1)%t],a=e[n%t],o=e[(n+1)%t],i=e[(n+2)%t];return sE((r-n/t)*t,s,a,o,i)}});var pE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,mE=new RegExp(pE.source,"g");function hE(e,t){var r,n,s,a=pE.lastIndex=mE.lastIndex=0,o=-1,i=[],l=[];for(e+="",t+="";(r=pE.exec(e))&&(n=mE.exec(t));)(s=n.index)>a&&(s=t.slice(a,s),i[o]?i[o]+=s:i[++o]=s),(r=r[0])===(n=n[0])?i[o]?i[o]+=n:i[++o]=n:(i[++o]=null,l.push({i:o,x:uE(r,n)})),a=mE.lastIndex;return a<t.length&&(s=t.slice(a),i[o]?i[o]+=s:i[++o]=s),i.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)i[(r=l[n]).i]=r.x(e);return i.join("")})}function gE(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,s=t.slice();return function(a){for(r=0;r<n;++r)s[r]=e[r]*(1-a)+t[r]*a;return s}}function xE(e,t){var r,n,s=typeof t;return null==t||"boolean"===s?aE(t):("number"===s?uE:"string"===s?(r=BS(t))?(t=r,iE):hE:t instanceof BS?iE:t instanceof Date?dE:(n=t,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(t)?cE:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?fE:uE:gE))(e,t)}function yE(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function bE(e){return+e}var vE=[0,1];function wE(e){return e}function jE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r});var r}function NE(e,t,r){var n=e[0],s=e[1],a=t[0],o=t[1];return s<n?(n=jE(s,n),a=r(o,a)):(n=jE(n,s),a=r(a,o)),function(e){return a(n(e))}}function kE(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),a=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=jE(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(t){var r=NS(e,t,1,n)-1;return a[r](s[r](t))}}function _E(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function CE(){var e,t,r,n,s,a,o=vE,i=vE,l=xE,c=wE;function d(){var e,t,r,l=Math.min(o.length,i.length);return c!==wE&&(e=o[0],t=o[l-1],e>t&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?kE:NE,s=a=null,u}function u(t){return null==t||isNaN(t=+t)?r:(s||(s=n(o.map(e),i,l)))(e(c(t)))}return u.invert=function(r){return c(t((a||(a=n(i,o.map(e),uE)))(r)))},u.domain=function(e){return arguments.length?(o=Array.from(e,bE),d()):o.slice()},u.range=function(e){return arguments.length?(i=Array.from(e),d()):i.slice()},u.rangeRound=function(e){return i=Array.from(e),l=yE,d()},u.clamp=function(e){return arguments.length?(c=!!e||wE,d()):c!==wE},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function SE(){return CE()(wE,wE)}var EE,OE=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ME(e){if(!(t=OE.exec(e)))throw new Error("invalid format: "+e);var t;return new TE({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function TE(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function PE(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function AE(e){return(e=PE(Math.abs(e)))?e[1]:NaN}function qE(e,t){var r=PE(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}ME.prototype=TE.prototype,TE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const zE={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>qE(100*e,t),r:qE,s:function(e,t){var r=PE(e,t);if(!r)return e+"";var n=r[0],s=r[1],a=s-(EE=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+PE(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function DE(e){return e}var LE,IE,RE,$E=Array.prototype.map,FE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function BE(e,t,r,n){var s,a=hS(e,t,r);switch((n=ME(null==n?",f":n)).type){case"s":var o=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(s=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(AE(t)/3)))-AE(Math.abs(e)))}(a,o))||(n.precision=s),RE(n,o);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(s=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,AE(t)-AE(e))+1}(a,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=s-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(s=function(e){return Math.max(0,-AE(Math.abs(e)))}(a))||(n.precision=s-2*("%"===n.type))}return IE(n)}function UE(e){var t=e.domain;return e.ticks=function(e){var r=t();return pS(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return BE(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,s,a=t(),o=0,i=a.length-1,l=a[o],c=a[i],d=10;for(c<l&&(s=l,l=c,c=s,s=o,o=i,i=s);d-- >0;){if((s=mS(l,c,r))===n)return a[o]=l,a[i]=c,t(a);if(s>0)l=Math.floor(l/s)*s,c=Math.ceil(c/s)*s;else{if(!(s<0))break;l=Math.ceil(l*s)/s,c=Math.floor(c*s)/s}n=s}return e},e}function HE(){var e=SE();return e.copy=function(){return _E(e,HE())},JC.apply(e,arguments),UE(e)}function WE(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,bE),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return WE(e).unknown(t)},e=arguments.length?Array.from(e,bE):[0,1],UE(r)}function QE(e,t){var r,n=0,s=(e=e.slice()).length-1,a=e[n],o=e[s];return o<a&&(r=n,n=s,s=r,r=a,a=o,o=r),e[n]=t.floor(a),e[s]=t.ceil(o),e}function VE(e){return Math.log(e)}function KE(e){return Math.exp(e)}function YE(e){return-Math.log(-e)}function GE(e){return-Math.exp(-e)}function XE(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ZE(e){return(t,r)=>-e(-t,r)}function JE(e){const t=e(VE,KE),r=t.domain;let n,s,a=10;function o(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(a),s=function(e){return 10===e?XE:e===Math.E?Math.exp:t=>Math.pow(e,t)}(a),r()[0]<0?(n=ZE(n),s=ZE(s),e(YE,GE)):e(VE,KE),t}return t.base=function(e){return arguments.length?(a=+e,o()):a},t.domain=function(e){return arguments.length?(r(e),o()):r()},t.ticks=e=>{const t=r();let o=t[0],i=t[t.length-1];const l=i<o;l&&([o,i]=[i,o]);let c,d,u=n(o),f=n(i);const p=null==e?10:+e;let m=[];if(!(a%1)&&f-u<p){if(u=Math.floor(u),f=Math.ceil(f),o>0){for(;u<=f;++u)for(c=1;c<a;++c)if(d=u<0?c/s(-u):c*s(u),!(d<o)){if(d>i)break;m.push(d)}}else for(;u<=f;++u)for(c=a-1;c>=1;--c)if(d=u>0?c/s(-u):c*s(u),!(d<o)){if(d>i)break;m.push(d)}2*m.length<p&&(m=pS(o,i,p))}else m=pS(u,f,Math.min(f-u,p)).map(s);return l?m.reverse():m},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===a?"s":","),"function"!=typeof r&&(a%1||null!=(r=ME(r)).precision||(r.trim=!0),r=IE(r)),e===1/0)return r;const o=Math.max(1,a*e/t.ticks().length);return e=>{let t=e/s(Math.round(n(e)));return t*a<a-.5&&(t*=a),t<=o?r(e):""}},t.nice=()=>r(QE(r(),{floor:e=>s(Math.floor(n(e))),ceil:e=>s(Math.ceil(n(e)))})),t}function eO(){const e=JE(CE()).domain([1,10]);return e.copy=()=>_E(e,eO()).base(e.base()),JC.apply(e,arguments),e}function tO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function nO(e){var t=1,r=e(tO(t),rO(t));return r.constant=function(r){return arguments.length?e(tO(t=+r),rO(t)):t},UE(r)}function sO(){var e=nO(CE());return e.copy=function(){return _E(e,sO()).constant(e.constant())},JC.apply(e,arguments)}function aO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oO(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function iO(e){return e<0?-e*e:e*e}function lO(e){var t=e(wE,wE),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(wE,wE):.5===r?e(oO,iO):e(aO(r),aO(1/r)):r},UE(t)}function cO(){var e=lO(CE());return e.copy=function(){return _E(e,cO()).exponent(e.exponent())},JC.apply(e,arguments),e}function dO(){return cO.apply(null,arguments).exponent(.5)}function uO(e){return Math.sign(e)*e*e}function fO(){var e,t=SE(),r=[0,1],n=!1;function s(r){var s=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(s)?e:n?Math.round(s):s}return s.invert=function(e){return t.invert(uO(e))},s.domain=function(e){return arguments.length?(t.domain(e),s):t.domain()},s.range=function(e){return arguments.length?(t.range((r=Array.from(e,bE)).map(uO)),s):r.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(n=!!e,s):n},s.clamp=function(e){return arguments.length?(t.clamp(e),s):t.clamp()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return fO(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},JC.apply(s,arguments),UE(s)}function pO(e,t){let r;if(void 0===t)for(const t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let s of e)null!=(s=t(s,++n,e))&&(r<s||void 0===r&&s>=s)&&(r=s)}return r}function mO(e,t){let r;if(void 0===t)for(const t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let s of e)null!=(s=t(s,++n,e))&&(r>s||void 0===r&&s>=s)&&(r=s)}return r}function hO(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function gO(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=void 0===s?hO:function(e=gS){if(e===gS)return hO;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(s);n>r;){if(n-r>600){const a=n-r+1,o=t-r+1,i=Math.log(a),l=.5*Math.exp(2*i/3),c=.5*Math.sqrt(i*l*(a-l)/a)*(o-a/2<0?-1:1);gO(e,t,Math.max(r,Math.floor(t-o*l/a+c)),Math.min(n,Math.floor(t+(a-o)*l/a+c)),s)}const a=e[t];let o=r,i=n;for(xO(e,r,t),s(e[n],a)>0&&xO(e,r,n);o<i;){for(xO(e,o,i),++o,--i;s(e[o],a)<0;)++o;for(;s(e[i],a)>0;)--i}0===s(e[r],a)?xO(e,r,i):(++i,xO(e,i,n)),i<=t&&(r=i+1),t<=i&&(n=i-1)}return e}function xO(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function yO(e,t,r=vS){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,a=Math.floor(s),o=+r(e[a],a,e);return o+(+r(e[a+1],a+1,e)-o)*(s-a)}}function bO(){var e,t=[],r=[],n=[];function s(){var e=0,s=Math.max(1,r.length);for(n=new Array(s-1);++e<s;)n[e-1]=yO(t,e/s);return a}function a(t){return null==t||isNaN(t=+t)?e:r[NS(n,t)]}return a.invertExtent=function(e){var s=r.indexOf(e);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(gS),s()},a.range=function(e){return arguments.length?(r=Array.from(e),s()):r.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return n.slice()},a.copy=function(){return bO().domain(t).range(r).unknown(e)},JC.apply(a,arguments)}function vO(){var e,t=0,r=1,n=1,s=[.5],a=[0,1];function o(t){return null!=t&&t<=t?a[NS(s,t,0,n)]:e}function i(){var e=-1;for(s=new Array(n);++e<n;)s[e]=((e+1)*r-(e-n)*t)/(n+1);return o}return o.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,i()):[t,r]},o.range=function(e){return arguments.length?(n=(a=Array.from(e)).length-1,i()):a.slice()},o.invertExtent=function(e){var o=a.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,s[0]]:o>=n?[s[n-1],r]:[s[o-1],s[o]]},o.unknown=function(t){return arguments.length?(e=t,o):o},o.thresholds=function(){return s.slice()},o.copy=function(){return vO().domain([t,r]).range(a).unknown(e)},JC.apply(UE(o),arguments)}function wO(){var e,t=[.5],r=[0,1],n=1;function s(s){return null!=s&&s<=s?r[NS(t,s,0,n)]:e}return s.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),s):t.slice()},s.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),s):r.slice()},s.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return wO().domain(t).range(r).unknown(e)},JC.apply(s,arguments)}LE=function(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?DE:(t=$E.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var s=e.length,a=[],o=0,i=t[0],l=0;s>0&&i>0&&(l+i+1>n&&(i=Math.max(1,n-l)),a.push(e.substring(s-=i,s+i)),!((l+=i+1)>n));)i=t[o=(o+1)%t.length];return a.reverse().join(r)}),s=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",o=void 0===e.decimal?".":e.decimal+"",i=void 0===e.numerals?DE:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}($E.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=ME(e)).fill,r=e.align,u=e.sign,f=e.symbol,p=e.zero,m=e.width,h=e.comma,g=e.precision,x=e.trim,y=e.type;"n"===y?(h=!0,y="g"):zE[y]||(void 0===g&&(g=12),x=!0,y="g"),(p||"0"===t&&"="===r)&&(p=!0,t="0",r="=");var b="$"===f?s:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===f?a:/[%p]/.test(y)?l:"",w=zE[y],j=/[defgprs%]/.test(y);function N(e){var s,a,l,f=b,N=v;if("c"===y)N=w(e)+N,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:w(Math.abs(e),g),x&&(e=function(e){e:for(var t,r=e.length,n=1,s=-1;n<r;++n)switch(e[n]){case".":s=t=n;break;case"0":0===s&&(s=n),t=n;break;default:if(!+e[n])break e;s>0&&(s=0)}return s>0?e.slice(0,s)+e.slice(t+1):e}(e)),k&&0===+e&&"+"!==u&&(k=!1),f=(k?"("===u?u:c:"-"===u||"("===u?"":u)+f,N=("s"===y?FE[8+EE/3]:"")+N+(k&&"("===u?")":""),j)for(s=-1,a=e.length;++s<a;)if(48>(l=e.charCodeAt(s))||l>57){N=(46===l?o+e.slice(s+1):e.slice(s))+N,e=e.slice(0,s);break}}h&&!p&&(e=n(e,1/0));var _=f.length+e.length+N.length,C=_<m?new Array(m-_+1).join(t):"";switch(h&&p&&(e=n(C+e,C.length?m-N.length:1/0),C=""),r){case"<":e=f+e+N+C;break;case"=":e=f+C+e+N;break;case"^":e=C.slice(0,_=C.length>>1)+f+e+N+C.slice(_);break;default:e=C+f+e+N}return i(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=ME(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(AE(t)/3))),s=Math.pow(10,-n),a=FE[8+n/3];return function(e){return r(s*e)+a}}}}({thousands:",",grouping:[3],currency:["$",""]}),IE=LE.format,RE=LE.formatPrefix;const jO=1e3,NO=6e4,kO=36e5,_O=864e5,CO=6048e5,SO=31536e6,EO=new Date,OO=new Date;function MO(e,t,r,n){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=t=>(e(t=new Date(+t)),t),s.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),s.round=e=>{const t=s(e),r=s.ceil(e);return e-t<r-e?t:r},s.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),s.range=(r,n,a)=>{const o=[];if(r=s.ceil(r),a=null==a?1:Math.floor(a),!(r<n&&a>0))return o;let i;do{o.push(i=new Date(+r)),t(r,a),e(r)}while(i<r&&r<n);return o},s.filter=r=>MO(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(s.count=(t,n)=>(EO.setTime(+t),OO.setTime(+n),e(EO),e(OO),Math.floor(r(EO,OO))),s.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(n?t=>n(t)%e===0:t=>s.count(0,t)%e===0):s:null)),s}const TO=MO(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);TO.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?MO(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):TO:null),TO.range;const PO=MO(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*jO)},(e,t)=>(t-e)/jO,e=>e.getUTCSeconds()),AO=(PO.range,MO(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jO)},(e,t)=>{e.setTime(+e+t*NO)},(e,t)=>(t-e)/NO,e=>e.getMinutes())),qO=(AO.range,MO(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*NO)},(e,t)=>(t-e)/NO,e=>e.getUTCMinutes())),zO=(qO.range,MO(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*jO-e.getMinutes()*NO)},(e,t)=>{e.setTime(+e+t*kO)},(e,t)=>(t-e)/kO,e=>e.getHours())),DO=(zO.range,MO(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*kO)},(e,t)=>(t-e)/kO,e=>e.getUTCHours())),LO=(DO.range,MO(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*NO)/_O,e=>e.getDate()-1)),IO=(LO.range,MO(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_O,e=>e.getUTCDate()-1)),RO=(IO.range,MO(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_O,e=>Math.floor(e/_O)));function $O(e){return MO(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*NO)/CO)}RO.range;const FO=$O(0),BO=$O(1),UO=$O(2),HO=$O(3),WO=$O(4),QO=$O(5),VO=$O(6);function KO(e){return MO(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/CO)}FO.range,BO.range,UO.range,HO.range,WO.range,QO.range,VO.range;const YO=KO(0),GO=KO(1),XO=KO(2),ZO=KO(3),JO=KO(4),eM=KO(5),tM=KO(6),rM=(YO.range,GO.range,XO.range,ZO.range,JO.range,eM.range,tM.range,MO(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),nM=(rM.range,MO(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),sM=(nM.range,MO(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));sM.every=e=>isFinite(e=Math.floor(e))&&e>0?MO(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,sM.range;const aM=MO(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function oM(e,t,r,n,s,a){const o=[[PO,1,jO],[PO,5,5e3],[PO,15,15e3],[PO,30,3e4],[a,1,NO],[a,5,3e5],[a,15,9e5],[a,30,18e5],[s,1,kO],[s,3,108e5],[s,6,216e5],[s,12,432e5],[n,1,_O],[n,2,1728e5],[r,1,CO],[t,1,2592e6],[t,3,7776e6],[e,1,SO]];function i(t,r,n){const s=Math.abs(r-t)/n,a=yS(([,,e])=>e).right(o,s);if(a===o.length)return e.every(hS(t/SO,r/SO,n));if(0===a)return TO.every(Math.max(hS(t,r,n),1));const[i,l]=o[s/o[a-1][2]<o[a][2]/s?a-1:a];return i.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const s=r&&"function"==typeof r.range?r:i(e,t,r),a=s?s.range(e,+t+1):[];return n?a.reverse():a},i]}aM.every=e=>isFinite(e=Math.floor(e))&&e>0?MO(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,aM.range;const[iM,lM]=oM(aM,nM,YO,RO,DO,qO),[cM,dM]=oM(sM,rM,FO,LO,zO,AO);function uM(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fM(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function pM(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var mM,hM,gM,xM={"-":"",_:" ",0:"0"},yM=/^\s*\d+/,bM=/^%/,vM=/[\\^$*+?|[\]().{}]/g;function wM(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",a=s.length;return n+(a<r?new Array(r-a+1).join(t)+s:s)}function jM(e){return e.replace(vM,"\\$&")}function NM(e){return new RegExp("^(?:"+e.map(jM).join("|")+")","i")}function kM(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function _M(e,t,r){var n=yM.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function CM(e,t,r){var n=yM.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function SM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function EM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function OM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function MM(e,t,r){var n=yM.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function TM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function PM(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function AM(e,t,r){var n=yM.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function qM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function zM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function DM(e,t,r){var n=yM.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function LM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function IM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function RM(e,t,r){var n=yM.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function $M(e,t,r){var n=yM.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function FM(e,t,r){var n=yM.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function BM(e,t,r){var n=bM.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function UM(e,t,r){var n=yM.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function HM(e,t,r){var n=yM.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function WM(e,t){return wM(e.getDate(),t,2)}function QM(e,t){return wM(e.getHours(),t,2)}function VM(e,t){return wM(e.getHours()%12||12,t,2)}function KM(e,t){return wM(1+LO.count(sM(e),e),t,3)}function YM(e,t){return wM(e.getMilliseconds(),t,3)}function GM(e,t){return YM(e,t)+"000"}function XM(e,t){return wM(e.getMonth()+1,t,2)}function ZM(e,t){return wM(e.getMinutes(),t,2)}function JM(e,t){return wM(e.getSeconds(),t,2)}function eT(e){var t=e.getDay();return 0===t?7:t}function tT(e,t){return wM(FO.count(sM(e)-1,e),t,2)}function rT(e){var t=e.getDay();return t>=4||0===t?WO(e):WO.ceil(e)}function nT(e,t){return e=rT(e),wM(WO.count(sM(e),e)+(4===sM(e).getDay()),t,2)}function sT(e){return e.getDay()}function aT(e,t){return wM(BO.count(sM(e)-1,e),t,2)}function oT(e,t){return wM(e.getFullYear()%100,t,2)}function iT(e,t){return wM((e=rT(e)).getFullYear()%100,t,2)}function lT(e,t){return wM(e.getFullYear()%1e4,t,4)}function cT(e,t){var r=e.getDay();return wM((e=r>=4||0===r?WO(e):WO.ceil(e)).getFullYear()%1e4,t,4)}function dT(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+wM(t/60|0,"0",2)+wM(t%60,"0",2)}function uT(e,t){return wM(e.getUTCDate(),t,2)}function fT(e,t){return wM(e.getUTCHours(),t,2)}function pT(e,t){return wM(e.getUTCHours()%12||12,t,2)}function mT(e,t){return wM(1+IO.count(aM(e),e),t,3)}function hT(e,t){return wM(e.getUTCMilliseconds(),t,3)}function gT(e,t){return hT(e,t)+"000"}function xT(e,t){return wM(e.getUTCMonth()+1,t,2)}function yT(e,t){return wM(e.getUTCMinutes(),t,2)}function bT(e,t){return wM(e.getUTCSeconds(),t,2)}function vT(e){var t=e.getUTCDay();return 0===t?7:t}function wT(e,t){return wM(YO.count(aM(e)-1,e),t,2)}function jT(e){var t=e.getUTCDay();return t>=4||0===t?JO(e):JO.ceil(e)}function NT(e,t){return e=jT(e),wM(JO.count(aM(e),e)+(4===aM(e).getUTCDay()),t,2)}function kT(e){return e.getUTCDay()}function _T(e,t){return wM(GO.count(aM(e)-1,e),t,2)}function CT(e,t){return wM(e.getUTCFullYear()%100,t,2)}function ST(e,t){return wM((e=jT(e)).getUTCFullYear()%100,t,2)}function ET(e,t){return wM(e.getUTCFullYear()%1e4,t,4)}function OT(e,t){var r=e.getUTCDay();return wM((e=r>=4||0===r?JO(e):JO.ceil(e)).getUTCFullYear()%1e4,t,4)}function MT(){return"+0000"}function TT(){return"%"}function PT(e){return+e}function AT(e){return Math.floor(+e/1e3)}function qT(e){return new Date(e)}function zT(e){return e instanceof Date?+e:+new Date(+e)}function DT(e,t,r,n,s,a,o,i,l,c){var d=SE(),u=d.invert,f=d.domain,p=c(".%L"),m=c(":%S"),h=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),y=c("%b %d"),b=c("%B"),v=c("%Y");function w(e){return(l(e)<e?p:i(e)<e?m:o(e)<e?h:a(e)<e?g:n(e)<e?s(e)<e?x:y:r(e)<e?b:v)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?f(Array.from(e,zT)):f().map(qT)},d.ticks=function(t){var r=f();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?w:c(t)},d.nice=function(e){var r=f();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?f(QE(r,e)):d},d.copy=function(){return _E(d,DT(e,t,r,n,s,a,o,i,l,c))},d}function LT(){return JC.apply(DT(cM,dM,sM,rM,FO,LO,zO,AO,PO,hM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function IT(){return JC.apply(DT(iM,lM,aM,nM,YO,IO,DO,qO,PO,gM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function RT(){var e,t,r,n,s,a=0,o=1,i=wE,l=!1;function c(t){return null==t||isNaN(t=+t)?s:i(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,i=e(r,n),c):[i(0),i(1)]}}return c.domain=function(s){return arguments.length?([a,o]=s,e=n(a=+a),t=n(o=+o),r=e===t?0:1/(t-e),c):[a,o]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(i=e,c):i},c.range=d(xE),c.rangeRound=d(yE),c.unknown=function(e){return arguments.length?(s=e,c):s},function(s){return n=s,e=s(a),t=s(o),r=e===t?0:1/(t-e),c}}function $T(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FT(){var e=UE(RT()(wE));return e.copy=function(){return $T(e,FT())},eS.apply(e,arguments)}function BT(){var e=JE(RT()).domain([1,10]);return e.copy=function(){return $T(e,BT()).base(e.base())},eS.apply(e,arguments)}function UT(){var e=nO(RT());return e.copy=function(){return $T(e,UT()).constant(e.constant())},eS.apply(e,arguments)}function HT(){var e=lO(RT());return e.copy=function(){return $T(e,HT()).exponent(e.exponent())},eS.apply(e,arguments)}function WT(){return HT.apply(null,arguments).exponent(.5)}function QT(){var e=[],t=wE;function r(r){if(null!=r&&!isNaN(r=+r))return t((NS(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(gS),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>function(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return mO(e);if(t>=1)return pO(e);var n,s=(n-1)*t,a=Math.floor(s),o=pO(gO(e,a).subarray(0,a+1));return o+(mO(e.subarray(a+1))-o)*(s-a)}}(e,n/t))},r.copy=function(){return QT(t).domain(e)},eS.apply(r,arguments)}function VT(){var e,t,r,n,s,a,o,i=0,l=.5,c=1,d=1,u=wE,f=!1;function p(e){return isNaN(e=+e)?o:(e=.5+((e=+a(e))-t)*(d*e<d*t?n:s),u(f?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var r,n,s;return arguments.length?([r,n,s]=t,u=function(e,t){void 0===t&&(t=e,e=xE);for(var r=0,n=t.length-1,s=t[0],a=new Array(n<0?0:n);r<n;)a[r]=e(s,s=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return a[t](e-t)}}(e,[r,n,s]),p):[u(0),u(.5),u(1)]}}return p.domain=function(o){return arguments.length?([i,l,c]=o,e=a(i=+i),t=a(l=+l),r=a(c=+c),n=e===t?0:.5/(t-e),s=t===r?0:.5/(r-t),d=t<e?-1:1,p):[i,l,c]},p.clamp=function(e){return arguments.length?(f=!!e,p):f},p.interpolator=function(e){return arguments.length?(u=e,p):u},p.range=m(xE),p.rangeRound=m(yE),p.unknown=function(e){return arguments.length?(o=e,p):o},function(o){return a=o,e=o(i),t=o(l),r=o(c),n=e===t?0:.5/(t-e),s=t===r?0:.5/(r-t),d=t<e?-1:1,p}}function KT(){var e=UE(VT()(wE));return e.copy=function(){return $T(e,KT())},eS.apply(e,arguments)}function YT(){var e=JE(VT()).domain([.1,1,10]);return e.copy=function(){return $T(e,YT()).base(e.base())},eS.apply(e,arguments)}function GT(){var e=nO(VT());return e.copy=function(){return $T(e,GT()).constant(e.constant())},eS.apply(e,arguments)}function XT(){var e=lO(VT());return e.copy=function(){return $T(e,XT()).exponent(e.exponent())},eS.apply(e,arguments)}function ZT(){return XT.apply(null,arguments).exponent(.5)}mM=function(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,a=e.days,o=e.shortDays,i=e.months,l=e.shortMonths,c=NM(s),d=kM(s),u=NM(a),f=kM(a),p=NM(o),m=kM(o),h=NM(i),g=kM(i),x=NM(l),y=kM(l),b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return i[e.getMonth()]},c:null,d:WM,e:WM,f:GM,g:iT,G:cT,H:QM,I:VM,j:KM,L:YM,m:XM,M:ZM,p:function(e){return s[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:PT,s:AT,S:JM,u:eT,U:tT,V:nT,w:sT,W:aT,x:null,X:null,y:oT,Y:lT,Z:dT,"%":TT},v={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return i[e.getUTCMonth()]},c:null,d:uT,e:uT,f:gT,g:ST,G:OT,H:fT,I:pT,j:mT,L:hT,m:xT,M:yT,p:function(e){return s[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:PT,s:AT,S:bT,u:vT,U:wT,V:NT,w:kT,W:_T,x:null,X:null,y:CT,Y:ET,Z:MT,"%":TT},w={a:function(e,t,r){var n=p.exec(t.slice(r));return n?(e.w=m.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=f.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=x.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=h.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return k(e,t,r,n)},d:zM,e:zM,f:FM,g:TM,G:MM,H:LM,I:LM,j:DM,L:$M,m:qM,M:IM,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:AM,Q:UM,s:HM,S:RM,u:CM,U:SM,V:EM,w:_M,W:OM,x:function(e,t,n){return k(e,r,t,n)},X:function(e,t,r){return k(e,n,t,r)},y:TM,Y:MM,Z:PM,"%":BM};function j(e,t){return function(r){var n,s,a,o=[],i=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++i<c;)37===e.charCodeAt(i)&&(o.push(e.slice(l,i)),null!=(s=xM[n=e.charAt(++i)])?n=e.charAt(++i):s="e"===n?" ":"0",(a=t[n])&&(n=a(r,s)),o.push(n),l=i+1);return o.push(e.slice(l,i)),o.join("")}}function N(e,t){return function(r){var n,s,a=pM(1900,void 0,1);if(k(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(s=(n=fM(pM(a.y,0,1))).getUTCDay(),n=s>4||0===s?GO.ceil(n):GO(n),n=IO.offset(n,7*(a.V-1)),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(s=(n=uM(pM(a.y,0,1))).getDay(),n=s>4||0===s?BO.ceil(n):BO(n),n=LO.offset(n,7*(a.V-1)),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),s="Z"in a?fM(pM(a.y,0,1)).getUTCDay():uM(pM(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(s+5)%7:a.w+7*a.U-(s+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,fM(a)):uM(a)}}function k(e,t,r,n){for(var s,a,o=0,i=t.length,l=r.length;o<i;){if(n>=l)return-1;if(37===(s=t.charCodeAt(o++))){if(s=t.charAt(o++),!(a=w[s in xM?t.charAt(o++):s])||(n=a(e,r,n))<0)return-1}else if(s!=r.charCodeAt(n++))return-1}return n}return b.x=j(r,b),b.X=j(n,b),b.c=j(t,b),v.x=j(r,v),v.X=j(n,v),v.c=j(t,v),{format:function(e){var t=j(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=j(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),hM=mM.format,mM.parse,gM=mM.utcFormat,mM.utcParse;var JT=e=>e.chartData,eP=H_([JT],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),tP=(e,t,r,n)=>n?eP(e):JT(e);function rP(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(qw(t)&&qw(r))return!0}return!1}function nP(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function sP(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var r,n,[s,a]=e;if(qw(s))r=s;else if("function"==typeof s)return;if(qw(a))n=a;else if("function"==typeof a)return;var o=[r,n];if(rP(o))return o}}var aP,oP=o(8351),iP=o.n(oP),lP=e=>e,cP={"@@functional/placeholder":!0},dP=e=>e===cP,uP=e=>function t(){return 0===arguments.length||1===arguments.length&&dP(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},fP=(e,t)=>1===e?t:uP(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(e=>e!==cP).length;return a>=e?t(...n):fP(e-a,uP(function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var a=n.map(e=>dP(e)?r.shift():e);return t(...a,...r)}))}),pP=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},mP=fP((aP=(e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)).length,aP),hP=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function gP(e){return 0===e?1:Math.floor(new(iP())(e).abs().log(10).toNumber())+1}function xP(e,t,r){for(var n=new(iP())(e),s=0,a=[];n.lt(t)&&s<1e5;)a.push(n.toNumber()),n=n.add(r),s++;return a}var yP=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},bP=(e,t,r)=>{if(e.lte(0))return new(iP())(0);var n=gP(e.toNumber()),s=new(iP())(10).pow(n),a=e.div(s),o=1!==n?.05:.1,i=new(iP())(Math.ceil(a.div(o).toNumber())).add(r).mul(o).mul(s);return t?new(iP())(i.toNumber()):new(iP())(Math.ceil(i.toNumber()))},vP=function(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(iP())(0),tickMin:new(iP())(0),tickMax:new(iP())(0)};var a,o=bP(new(iP())(t).sub(e).div(r-1),n,s);a=e<=0&&t>=0?new(iP())(0):(a=new(iP())(e).add(t).div(2)).sub(new(iP())(a).mod(o));var i=Math.ceil(a.sub(e).div(o).toNumber()),l=Math.ceil(new(iP())(t).sub(a).div(o).toNumber()),c=i+l+1;return c>r?vP(e,t,r,n,s+1):(c<r&&(l=t>0?l+(r-c):l,i=t>0?i:i+(r-c)),{step:o,tickMin:a.sub(new(iP())(i).mul(o)),tickMax:a.add(new(iP())(l).mul(o))})},wP=e=>e.rootProps.stackOffset,jP=e=>e.rootProps.reverseStackOrder,NP=e=>e.options.chartName,kP=e=>e.rootProps.syncId,_P=e=>e.rootProps.syncMethod,CP=e=>e.options.eventEmitter;function SP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function EP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SP(Object(r),!0).forEach(function(t){OP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function OP(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var MP=Math.PI/180,TP=e=>180*e/Math.PI,PP=(e,t,r,n)=>({x:e+Math.cos(-MP*n)*r,y:t+Math.sin(-MP*n)*r}),AP=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360);return e+360*Math.min(s,a)},qP=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:a}=((e,t)=>{var{x:r,y:n}=e,{cx:s,cy:a}=t,o=((e,t)=>{var{x:r,y:n}=e,{x:s,y:a}=t;return Math.sqrt((r-s)**2+(n-a)**2)})({x:r,y:n},{x:s,y:a});if(o<=0)return{radius:o,angle:0};var i=(r-s)/o,l=Math.acos(i);return n>a&&(l=2*Math.PI-l),{radius:o,angle:TP(l),angleInRadian:l}})({x:r,y:n},t),{innerRadius:o,outerRadius:i}=t;if(s<o||s>i)return null;if(0===s)return null;var l,{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),a=Math.min(n,s);return{startAngle:t-360*a,endAngle:r-360*a}})(t),u=a;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;l=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;l=u>=d&&u<=c}return l?EP(EP({},t),{},{radius:s,angle:AP(u,t)}):null},zP={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},DP="auto",LP=!0,IP=(zP.axis,!1),RP=!0,$P="auto",FP=!0,BP=(zP.axis,(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t}),UP={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:DP,tick:LP,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},HP={allowDataOverflow:IP,allowDecimals:!1,allowDuplicatedCategory:RP,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:$P,tick:FP,tickCount:5,ticks:void 0,type:"number",unit:void 0},WP={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:DP,tick:LP,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},QP={allowDataOverflow:IP,allowDecimals:!1,allowDuplicatedCategory:RP,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:$P,tick:FP,tickCount:5,ticks:void 0,type:"category",unit:void 0},VP=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?WP:UP,KP=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?QP:HP,YP=e=>e.polarOptions,GP=H_([CC,SC,zC],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2}),XP=H_([YP,GP],(e,t)=>{if(null!=e)return bw(e.innerRadius,t,0)}),ZP=H_([YP,GP],(e,t)=>{if(null!=e)return bw(e.outerRadius,t,.8*t)}),JP=H_([YP],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]}),eA=(H_([VP,JP],BP),H_([GP,XP,ZP],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]})),tA=(H_([KP,eA],BP),H_([KC,YP,XP,ZP,CC,SC],(e,t,r,n,s,a)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:o,cy:i,startAngle:l,endAngle:c}=t;return{cx:bw(o,s,s/2),cy:bw(i,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}})),rA=(e,t)=>t,nA=(e,t,r)=>r;function sA(e){return null==e?void 0:e.id}function aA(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:a}=r,o=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:n;if(null!=r&&0!==r.length){var i=sA(e);r.forEach((t,r)=>{var n,l=null==a||s?r:String(pC(t,a,null)),c=pC(t,e.dataKey,0);n=o.has(l)?o.get(l):{},Object.assign(n,{[i]:c}),o.set(l,n)})}}),Array.from(o.values())}function oA(e){return null!=e.stackId&&null!=e.dataKey}var iA=(e,t)=>e===t||null!=e&&null!=t&&e[0]===t[0]&&e[1]===t[1];function lA(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var cA=e=>{var t=KC(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},dA=e=>e.tooltip.settings.axisId;function uA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uA(Object(r),!0).forEach(function(t){pA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pA(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var mA=[0,"auto"],hA={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},gA=(e,t)=>e.cartesianAxis.xAxis[t],xA=(e,t)=>{var r=gA(e,t);return null==r?hA:r},yA={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:mA,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},bA=(e,t)=>e.cartesianAxis.yAxis[t],vA=(e,t)=>{var r=bA(e,t);return null==r?yA:r},wA={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},jA=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?wA:r},NA=(e,t,r)=>{switch(t){case"xAxis":return xA(e,r);case"yAxis":return vA(e,r);case"zAxis":return jA(e,r);case"angleAxis":return VP(e,r);case"radiusAxis":return KP(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kA=(e,t,r)=>{switch(t){case"xAxis":return xA(e,r);case"yAxis":return vA(e,r);case"angleAxis":return VP(e,r);case"radiusAxis":return KP(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},_A=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function CA(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var SA=e=>e.graphicalItems.cartesianItems,EA=H_([rA,nA],CA),OA=(e,t,r)=>e.filter(r).filter(e=>!0===(null==t?void 0:t.includeHidden)||!e.hide),MA=H_([SA,NA,EA],OA,{memoizeOptions:{resultEqualityCheck:lA}}),TA=H_([MA],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(oA)),PA=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),AA=H_([MA],PA),qA=e=>e.map(e=>e.data).filter(Boolean).flat(1),zA=H_([MA],qA,{memoizeOptions:{resultEqualityCheck:lA}}),DA=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},LA=H_([zA,tP],DA),IA=(e,t,r)=>null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:pC(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:pC(e,t)}))):e.map(e=>({value:e})),RA=H_([LA,NA,MA],IA);function $A(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function FA(e){if(gw(e)||e instanceof Date){var t=Number(e);if(qw(t))return t}}function BA(e){if(Array.isArray(e)){var t=[FA(e[0]),FA(e[1])];return rP(t)?t:void 0}var r=FA(e);if(null!=r)return[r,r]}function UA(e){return e.map(FA).filter(_w)}var HA=e=>{var t=cA(e),r=dA(e);return kA(e,t,r)},WA=H_([HA],e=>null==e?void 0:e.dataKey),QA=H_([TA,tP,HA],aA),VA=(e,t,r,n)=>{var s=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(s).map(t=>{var[s,a]=t,o=n?[...a].reverse():a,i=o.map(sA);return[s,{stackedData:bC(e,i,r),graphicalItems:o}]}))},KA=H_([QA,TA,wP,jP],VA),YA=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:a}=t;if(null==n&&"zAxis"!==r){var o=((e,t,r)=>{var n;if(null!=e)return[(n=Object.keys(e).reduce((n,s)=>{var a=e[s],{stackedData:o}=a,i=o.reduce((e,n)=>{var s,a=(s=cC(n,t,r).flat(2).filter(hw),[Math.min(...s),Math.max(...s)]);return[Math.min(e[0],a[0]),Math.max(e[1],a[1])]},[1/0,-1/0]);return[Math.min(i[0],n[0]),Math.max(i[1],n[1])]},[1/0,-1/0]))[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]})(e,s,a);if(null==o||0!==o[0]||0!==o[1])return o}},GA=H_([NA],e=>e.allowDataOverflow),XA=e=>{var t;if(null==e||!("domain"in e))return mA;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=UA(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:mA},ZA=H_([NA],XA),JA=H_([ZA,GA],sP),eq=H_([KA,JT,rA,JA],YA,{memoizeOptions:{resultEqualityCheck:iA}}),tq=e=>e.errorBars,rq=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var s=n.flat();return[Math.min(...s),Math.max(...s)]}},nq=(e,t,r,n,s)=>{var a,o;if(r.length>0&&e.forEach(e=>{r.forEach(r=>{var i,l,c=null===(i=n[r.id])||void 0===i?void 0:i.filter(e=>$A(s,e)),d=pC(e,null!==(l=t.dataKey)&&void 0!==l?l:r.dataKey),u=function(e,t,r){return!r||"number"!=typeof t||pw(t)?[]:r.length?UA(r.flatMap(r=>{var n,s,a=pC(e,r.dataKey);if(Array.isArray(a)?[n,s]=a:n=s=a,qw(n)&&qw(s))return[t-n,t+s]})):[]}(e,d,c);if(u.length>=2){var f=Math.min(...u),p=Math.max(...u);(null==a||f<a)&&(a=f),(null==o||p>o)&&(o=p)}var m=BA(d);null!=m&&(a=null==a?m[0]:Math.min(a,m[0]),o=null==o?m[1]:Math.max(o,m[1]))})}),null!=(null==t?void 0:t.dataKey)&&e.forEach(e=>{var r=BA(pC(e,t.dataKey));null!=r&&(a=null==a?r[0]:Math.min(a,r[0]),o=null==o?r[1]:Math.max(o,r[1]))}),qw(a)&&qw(o))return[a,o]},sq=H_([LA,NA,AA,tq,rA],nq,{memoizeOptions:{resultEqualityCheck:iA}});function aq(e){var{value:t}=e;if(gw(t)||t instanceof Date)return t}var oq=e=>e.referenceElements.dots,iq=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),lq=H_([oq,rA,nA],iq),cq=e=>e.referenceElements.areas,dq=H_([cq,rA,nA],iq),uq=e=>e.referenceElements.lines,fq=H_([uq,rA,nA],iq),pq=(e,t)=>{var r=UA(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},mq=H_(lq,rA,pq),hq=(e,t)=>{var r=UA(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},gq=H_([dq,rA],hq),xq=(e,t)=>{var r=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return UA([e.x]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==r||0===r.length?[]:UA(r)}(e):function(e){var t;if(null!=e.y)return UA([e.y]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==r||0===r.length?[]:UA(r)}(e));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},yq=H_([fq,rA],xq),bq=H_(mq,yq,gq,(e,t,r)=>rq(e,r,t)),vq=(e,t,r,n,s,a,o,i)=>null!=r?r:function(e,t,r){if(r||null!=t){if("function"==typeof e&&null!=t)try{var n=e(t,r);if(rP(n))return nP(n,t,r)}catch(e){}if(Array.isArray(e)&&2===e.length){var s,a,[o,i]=e;if("auto"===o)null!=t&&(s=Math.min(...t));else if(hw(o))s=o;else if("function"==typeof o)try{null!=t&&(s=o(null==t?void 0:t[0]))}catch(e){}else if("string"==typeof o&&wC.test(o)){var l=wC.exec(o);if(null==l||null==t)s=void 0;else{var c=+l[1];s=t[0]-c}}else s=null==t?void 0:t[0];if("auto"===i)null!=t&&(a=Math.max(...t));else if(hw(i))a=i;else if("function"==typeof i)try{null!=t&&(a=i(null==t?void 0:t[1]))}catch(e){}else if("string"==typeof i&&jC.test(i)){var d=jC.exec(i);if(null==d||null==t)a=void 0;else{var u=+d[1];a=t[1]+u}}else a=null==t?void 0:t[1];var f=[s,a];if(rP(f))return null==t?f:nP(f,t,r)}}}(t,"vertical"===o&&"xAxis"===i||"horizontal"===o&&"yAxis"===i?rq(n,a,s):rq(a,s),e.allowDataOverflow),wq=H_([NA,ZA,JA,eq,sq,bq,KC,rA],vq,{memoizeOptions:{resultEqualityCheck:iA}}),jq=[0,1],Nq=(e,t,r,n,s,a,o)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==o){var i,{dataKey:l,type:c}=e,d=mC(t,a);return d&&null==l?ZC()(0,null!==(i=null==r?void 0:r.length)&&void 0!==i?i:0):"category"===c?((e,t,r)=>{var n=e.map(aq).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&vw(n))?ZC()(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,d):"expand"===s?jq:o}},kq=H_([NA,KC,LA,RA,wP,rA,wq],Nq),_q=(e,t,r,n,a)=>{if(null!=e){var{scale:o,type:i}=e;if("auto"===o)return"radial"===t&&"radiusAxis"===a?"band":"radial"===t&&"angleAxis"===a?"linear":"category"===i&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":"category"===i?"band":"linear";if("string"==typeof o){var l="scale".concat(kw(o));return l in s?l:"point"}}},Cq=H_([NA,KC,_A,NP,rA],_q);function Sq(e,t,r,n){if(null!=r&&null!=n){if("function"==typeof e.scale)return e.scale.copy().domain(r).range(n);var a=function(e){if(null!=e){if(e in s)return s[e]();var t="scale".concat(kw(e));return t in s?s[t]():void 0}}(t);if(null!=a){var o=a.domain(r).range(n);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-xC,a=Math.max(n[0],n[1])+xC,o=e(t[0]),i=e(t[r-1]);(o<s||o>a||i<s||i>a)&&e.domain([t[0],t[r-1]])}})(o),o}}}var Eq=(e,t,r)=>{var n=XA(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&rP(e)?function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(n,2),[o,i]=yP([t,r]);if(o===-1/0||i===1/0){var l=i===1/0?[o,...pP(0,n-1).map(()=>1/0)]:[...pP(0,n-1).map(()=>-1/0),i];return t>r?hP(l):l}if(o===i)return((e,t,r)=>{var n=new(iP())(1),s=new(iP())(e);if(!s.isint()&&r){var a=Math.abs(e);a<1?(n=new(iP())(10).pow(gP(e)-1),s=new(iP())(Math.floor(s.div(n).toNumber())).mul(n)):a>1&&(s=new(iP())(Math.floor(e)))}else 0===e?s=new(iP())(Math.floor((t-1)/2)):r||(s=new(iP())(Math.floor(e)));var o=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return lP;var n=t.reverse(),s=n[0],a=n.slice(1);return function(){return a.reduce((e,t)=>t(e),s(...arguments))}}(mP(e=>s.add(new(iP())(e-o).mul(n)).toNumber()),pP)(0,t)})(o,n,s);var{step:c,tickMin:d,tickMax:u}=vP(o,i,a,s,0),f=xP(d,u.add(new(iP())(.1).mul(c)),c);return t>r?hP(f):f}(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&rP(e)?function(e,t){var[r,n]=e,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[a,o]=yP([r,n]);if(a===-1/0||o===1/0)return[r,n];if(a===o)return[a];var i=Math.max(t,2),l=bP(new(iP())(o).sub(a).div(i-1),s,0),c=[...xP(new(iP())(a),new(iP())(o),l),o];return!1===s&&(c=c.map(e=>Math.round(e))),r>n?hP(c):c}(e,t.tickCount,t.allowDecimals):void 0},Oq=H_([kq,kA,Cq],Eq),Mq=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null==e?void 0:e.type)&&rP(t)&&Array.isArray(r)&&r.length>0){var s=t[0],a=r[0],o=t[1],i=r[r.length-1];return[Math.min(s,a),Math.max(o,i)]}return t},Tq=H_([NA,kq,Oq,rA],Mq),Pq=H_(RA,NA,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(UA(e.map(e=>e.value))).sort((e,t)=>e-t);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(0===s)return 1/0;for(var a=0;a<n.length-1;a++){var o=n[a+1]-n[a];r=Math.min(r,o)}return r/s}}),Aq=H_(Pq,KC,e=>e.rootProps.barCategoryGap,zC,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!qw(e))return 0;var a="vertical"===t?n.height:n.width;if("gap"===s)return e*a/2;if("no-gap"===s){var o=bw(r,e*a),i=e*a/2;return i-o-(i-o)/a*o}return 0}),qq=H_(xA,(e,t)=>{var r=xA(e,t);return null==r||"string"!=typeof r.padding?0:Aq(e,"xAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:s}=e;return"string"==typeof s?{left:t,right:t}:{left:(null!==(r=s.left)&&void 0!==r?r:0)+t,right:(null!==(n=s.right)&&void 0!==n?n:0)+t}}),zq=H_(vA,(e,t)=>{var r=vA(e,t);return null==r||"string"!=typeof r.padding?0:Aq(e,"yAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:s}=e;return"string"==typeof s?{top:t,bottom:t}:{top:(null!==(r=s.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=s.bottom)&&void 0!==n?n:0)+t}}),Dq=H_([zC,qq,FC,$C,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:a}=n;return s?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),Lq=H_([zC,KC,zq,FC,$C,(e,t,r)=>r],(e,t,r,n,s,a)=>{var{padding:o}=s;return a?[n.height-o.bottom,o.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Iq=(e,t,r,n)=>{var s;switch(t){case"xAxis":return Dq(e,r,n);case"yAxis":return Lq(e,r,n);case"zAxis":return null===(s=jA(e,r))||void 0===s?void 0:s.range;case"angleAxis":return JP(e);case"radiusAxis":return eA(e,r);default:return}},Rq=H_([NA,Iq],BP),$q=H_([NA,Cq,Tq,Rq],Sq);function Fq(e,t){return e.id<t.id?-1:e.id>t.id?1:0}H_([MA,tq,rA],(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>$A(r,e)));var Bq=(e,t)=>t,Uq=(e,t,r)=>r,Hq=H_(MC,Bq,Uq,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(Fq)),Wq=H_(TC,Bq,Uq,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(Fq)),Qq=(e,t)=>({width:e.width,height:t.height}),Vq=H_(zC,xA,Qq),Kq=H_(SC,zC,Hq,Bq,Uq,(e,t,r,n,s)=>{var a,o={};return r.forEach(r=>{var i=Qq(t,r);null==a&&(a=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!s||"bottom"===n&&s;o[r.id]=a-Number(l)*i.height,a+=(l?-1:1)*i.height}),o}),Yq=H_(CC,zC,Wq,Bq,Uq,(e,t,r,n,s)=>{var a,o={};return r.forEach(r=>{var i=((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))(t,r);null==a&&(a=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!s||"right"===n&&s;o[r.id]=a-Number(l)*i.width,a+=(l?-1:1)*i.width}),o}),Gq=H_([zC,xA,(e,t)=>{var r=xA(e,t);if(null!=r)return Kq(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var s=null==r?void 0:r[n];return null==s?{x:e.left,y:0}:{x:e.left,y:s}}}),Xq=H_([zC,vA,(e,t)=>{var r=vA(e,t);if(null!=r)return Yq(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var s=null==r?void 0:r[n];return null==s?{x:0,y:e.top}:{x:s,y:e.top}}}),Zq=H_(zC,vA,(e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height})),Jq=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:s,type:a,dataKey:o}=r,i=mC(e,n),l=t.map(e=>e.value);return o&&i&&"category"===a&&s&&vw(l)?l:void 0}},ez=H_([KC,RA,NA,rA],Jq),tz=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:s,scale:a}=r;return!mC(e,n)||"number"!==s&&"auto"===a?void 0:t.map(e=>e.value)}},rz=H_([KC,RA,kA,rA],tz),nz=H_([KC,(e,t,r)=>{switch(t){case"xAxis":return xA(e,r);case"yAxis":return vA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Cq,$q,ez,rz,Iq,Oq,rA],(e,t,r,n,s,a,o,i,l)=>{if(null!=t){var c=mC(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:s,isCategorical:c,niceTicks:i,range:o,realScaleType:r,scale:n}}}),sz=H_([KC,kA,Cq,$q,Oq,Iq,ez,rz,rA],(e,t,r,n,s,a,o,i,l)=>{if(null!=t&&null!=n){var c=mC(e,l),{type:d,ticks:u,tickCount:f}=t,p="scaleBand"===r&&"function"==typeof n.bandwidth?n.bandwidth()/2:2,m="category"===d&&n.bandwidth?n.bandwidth()/p:0;m="angleAxis"===l&&null!=a&&a.length>=2?2*fw(a[0]-a[1])*m:m;var h=u||s;return h?h.map((e,t)=>{var r=o?o.indexOf(e):e;return{index:t,coordinate:n(r)+m,value:e,offset:m}}).filter(e=>qw(e.coordinate)):c&&i?i.map((e,t)=>({coordinate:n(e)+m,value:e,index:t,offset:m})).filter(e=>qw(e.coordinate)):n.ticks?n.ticks(f).map(e=>({coordinate:n(e)+m,value:e,offset:m})):n.domain().map((e,t)=>({coordinate:n(e)+m,value:o?o[e]:e,index:t,offset:m}))}}),az=H_([KC,kA,$q,Iq,ez,rz,rA],(e,t,r,n,s,a,o)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var i=mC(e,o),{tickCount:l}=t,c=0;return c="angleAxis"===o&&(null==n?void 0:n.length)>=2?2*fw(n[0]-n[1])*c:c,i&&a?a.map((e,t)=>({coordinate:r(e)+c,value:e,index:t,offset:c})):r.ticks?r.ticks(l).map(e=>({coordinate:r(e)+c,value:e,offset:c})):r.domain().map((e,t)=>({coordinate:r(e)+c,value:s?s[e]:e,index:t,offset:c}))}}),oz=H_(NA,$q,(e,t)=>{if(null!=e&&null!=t)return fA(fA({},e),{},{scale:t})}),iz=H_([NA,Cq,kq,Rq],Sq),lz=(H_((e,t,r)=>jA(e,r),iz,(e,t)=>{if(null!=e&&null!=t)return fA(fA({},e),{},{scale:t})}),H_([KC,MC,TC],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),cz=e=>e.options.defaultTooltipEventType,dz=e=>e.options.validateTooltipEventTypes;function uz(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function fz(e,t){return uz(t,cz(e),dz(e))}var pz=(e,t)=>{var r,n=Number(t);if(!pw(n)&&null!=t)return n>=0?null==e||null===(r=e[n])||void 0===r?void 0:r.value:void 0};function mz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mz(Object(r),!0).forEach(function(t){gz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gz(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xz=(e,t,r,n)=>{if(null==t)return f_;var s=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==s)return f_;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var a=!0===e.settings.active;if(null!=s.index){if(a)return hz(hz({},s),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return hz(hz({},f_),{},{coordinate:s.coordinate})};var yz=(e,t,r,n)=>{var s=null==e?void 0:e.index;if(null==s)return null;var a=Number(s);if(!qw(a))return s;var o=1/0;t.length>0&&(o=t.length-1);var i=Math.max(0,Math.min(a,o)),l=t[i];return null==l||function(e,t,r){if(null==r||null==t)return!0;var n=pC(e,t);return null==n||!rP(r)||function(e,t){var r=function(e){if("number"==typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}(e),n=t[0],s=t[1];if(void 0===r)return!1;var a=Math.min(n,s),o=Math.max(n,s);return r>=a&&r<=o}(n,r)}(l,r,n)?String(i):null},bz=(e,t,r,n,s,a,o,i)=>{if(null!=a&&null!=i){var l=o[0],c=null==l?void 0:i(l.positions,a);if(null!=c)return c;var d=null==s?void 0:s[Number(a)];if(d)return"horizontal"===r?{x:d.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:d.coordinate}}},vz=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(s="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===s});var s},wz=e=>e.options.tooltipPayloadSearcher,jz=e=>e.tooltip;function Nz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function kz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nz(Object(r),!0).forEach(function(t){_z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _z(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cz=(e,t,r,n,s,a,o)=>{if(null!=t&&null!=a){var{chartData:i,computedData:l,dataStartIndex:c,dataEndIndex:d}=r;return e.reduce((e,r)=>{var u,f,p,{dataDefinedOnItem:m,settings:h}=r,g=function(e,t){return null!=e?e:t}(m,i),x=Array.isArray(g)?cC(g,c,d):g,y=null!==(u=null==h?void 0:h.dataKey)&&void 0!==u?u:n,b=null==h?void 0:h.nameKey;return f=n&&Array.isArray(x)&&!Array.isArray(x[0])&&"axis"===o?jw(x,n,s):a(x,t,l,b),Array.isArray(f)?f.forEach(t=>{var r=kz(kz({},h),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(kC({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:pC(t.payload,t.dataKey),name:t.name}))}):e.push(kC({tooltipEntrySettings:h,dataKey:y,payload:f,value:pC(f,y),name:null!==(p=pC(f,b))&&void 0!==p?p:null==h?void 0:h.name})),e},[])}},Sz=H_([HA,KC,_A,NP,cA],_q),Ez=H_([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Oz=H_([cA,dA],CA),Mz=H_([Ez,HA,Oz],OA,{memoizeOptions:{resultEqualityCheck:lA}}),Tz=H_([Mz],e=>e.filter(oA)),Pz=H_([Mz],qA,{memoizeOptions:{resultEqualityCheck:lA}}),Az=H_([Pz,JT],DA),qz=H_([Tz,JT,HA],aA),zz=H_([Az,HA,Mz],IA),Dz=H_([HA],XA),Lz=H_([HA],e=>e.allowDataOverflow),Iz=H_([Dz,Lz],sP),Rz=H_([Mz],e=>e.filter(oA)),$z=H_([qz,Rz,wP,jP],VA),Fz=H_([$z,JT,cA,Iz],YA),Bz=H_([Mz],PA),Uz=H_([Az,HA,Bz,tq,cA],nq,{memoizeOptions:{resultEqualityCheck:iA}}),Hz=H_([oq,cA,dA],iq),Wz=H_([Hz,cA],pq),Qz=H_([cq,cA,dA],iq),Vz=H_([Qz,cA],hq),Kz=H_([uq,cA,dA],iq),Yz=H_([Kz,cA],xq),Gz=H_([Wz,Yz,Vz],rq),Xz=H_([HA,Dz,Iz,Fz,Uz,Gz,KC,cA],vq),Zz=H_([HA,KC,Az,zz,wP,cA,Xz],Nq),Jz=H_([Zz,HA,Sz],Eq),eD=H_([HA,Zz,Jz,cA],Mq),tD=e=>{var t=cA(e),r=dA(e);return Iq(e,t,r,!1)},rD=H_([HA,tD],BP),nD=H_([HA,Sz,eD,rD],Sq),sD=H_([KC,zz,HA,cA],Jq),aD=H_([KC,zz,HA,cA],tz),oD=H_([KC,HA,Sz,nD,tD,sD,aD,cA],(e,t,r,n,s,a,o,i)=>{if(t){var{type:l}=t,c=mC(e,i);if(n){var d="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,u="category"===l&&n.bandwidth?n.bandwidth()/d:0;return u="angleAxis"===i&&null!=s&&(null==s?void 0:s.length)>=2?2*fw(s[0]-s[1])*u:u,c&&o?o.map((e,t)=>({coordinate:n(e)+u,value:e,index:t,offset:u})):n.domain().map((e,t)=>({coordinate:n(e)+u,value:a?a[e]:e,index:t,offset:u}))}}}),iD=H_([cz,dz,e=>e.tooltip.settings],(e,t,r)=>uz(r.shared,e,t)),lD=e=>e.tooltip.settings.trigger,cD=e=>e.tooltip.settings.defaultIndex,dD=H_([jz,iD,lD,cD],xz),uD=H_([dD,Az,WA,Zz],yz),fD=H_([oD,uD],pz),pD=H_([dD],e=>{if(e)return e.dataKey}),mD=H_([jz,iD,lD,cD],vz),hD=H_([CC,SC,KC,zC,oD,cD,mD,wz],bz),gD=H_([dD,hD],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),xD=H_([dD],e=>e.active),yD=H_([mD,uD,JT,WA,fD,wz,iD],Cz),bD=H_([yD],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function vD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function wD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vD(Object(r),!0).forEach(function(t){jD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jD(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ND=(e,t,r,n,s)=>{var a,o=-1,i=null!==(a=null==t?void 0:t.length)&&void 0!==a?a:0;if(i<=1||null==e)return 0;if("angleAxis"===n&&null!=s&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<i;l++){var c=l>0?r[l-1].coordinate:r[i-1].coordinate,d=r[l].coordinate,u=l>=i-1?r[0].coordinate:r[l+1].coordinate,f=void 0;if(fw(d-c)!==fw(u-d)){var p=[];if(fw(u-d)===fw(s[1]-s[0])){f=u;var m=d+s[1]-s[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{f=c;var h=u+s[1]-s[0];p[0]=Math.min(d,(h+d)/2),p[1]=Math.max(d,(h+d)/2)}var g=[Math.min(d,(f+d)/2),Math.max(d,(f+d)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){({index:o}=r[l]);break}}else{var x=Math.min(c,u),y=Math.max(c,u);if(e>(x+d)/2&&e<=(y+d)/2){({index:o}=r[l]);break}}}else if(t)for(var b=0;b<i;b++)if(0===b&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<i-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===i-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:o}=t[b]);break}return o},kD=(e,t)=>t,_D=(e,t,r)=>r,CD=(e,t,r,n)=>n,SD=H_(oD,e=>tC()(e,e=>e.coordinate)),ED=H_([jz,kD,_D,CD],xz),OD=H_([ED,Az,WA,Zz],yz),MD=H_([jz,kD,_D,CD],vz),TD=H_([CC,SC,KC,zC,oD,CD,MD,wz],bz),PD=H_([ED,TD],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),AD=H_([oD,OD],pz),qD=H_([MD,OD,JT,WA,AD,wz,kD],Cz),zD=H_([ED,OD],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),DD=H_([(e,t)=>t,KC,tA,cA,rD,oD,SD,zC],(e,t,r,n,s,a,o,i)=>{if(e&&t&&n&&s&&a)return"horizontal"===t||"vertical"===t?((e,t,r,n,s,a,o)=>{if(e&&r&&n&&s&&function(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}(e,o)){var i=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=ND(i,a,s,r,n),c=((e,t,r,n)=>{var s=t.find(e=>e&&e.index===r);if(s){if("horizontal"===e)return{x:s.coordinate,y:n.chartY};if("vertical"===e)return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}})(t,s,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,n,s,a,o,i):((e,t,r,n,s,a,o)=>{if(e&&n&&s&&a&&r){var i=qP(e,r);if(i){var l=((e,t)=>"centric"===t?e.angle:e.radius)(i,t),c=ND(l,o,a,n,s),d=((e,t,r,n)=>{var s=t.find(e=>e&&e.index===r);if(s){if("centric"===e){var a=s.coordinate,{radius:o}=n;return wD(wD(wD({},n),PP(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var i=s.coordinate,{angle:l}=n;return wD(wD(wD({},n),PP(n.cx,n.cy,i,l)),{},{angle:l,radius:i})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,a,c,i);return{activeIndex:String(c),activeCoordinate:d}}}})(e,t,r,n,s,a,o)}),LD=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ID=mN("mouseClick"),RD=ok();RD.startListening({actionCreator:ID,effect:(e,t)=>{var r=e.payload,n=DD(t.getState(),LD(r));null!=(null==n?void 0:n.activeIndex)&&t.dispatch(N_({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var $D=mN("mouseMove"),FD=ok(),BD=null;function UD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function HD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?UD(Object(r),!0).forEach(function(t){WD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function WD(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}FD.startListening({actionCreator:$D,effect:(e,t)=>{var r=e.payload;null!==BD&&cancelAnimationFrame(BD);var n=LD(r);BD=requestAnimationFrame(()=>{var e=t.getState();if("axis"===fz(e,e.tooltip.settings.shared)){var r=DD(e,n);null!=(null==r?void 0:r.activeIndex)?t.dispatch(j_({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate})):t.dispatch(v_())}BD=null})}});var QD=EN({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:bN()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.xAxis[r.id]&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:bN()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:bN()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:bN()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.yAxis[r.id]&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:bN()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:bN()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:bN()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.zAxis[r.id]&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:bN()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:bN()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var a=s.widthHistory||[];if(3===a.length&&a[0]===a[2]&&n===a[1]&&n!==s.width&&Math.abs(n-a[0])<=1)return;var o=[...a,n].slice(-3);e.yAxis[r]=HD(HD({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:VD,replaceXAxis:KD,removeXAxis:YD,addYAxis:GD,replaceYAxis:XD,removeYAxis:ZD,addZAxis:JD,replaceZAxis:eL,removeZAxis:tL,updateYAxisWidth:rL}=QD.actions,nL=QD.reducer,sL=EN({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:bN()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Xj(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:bN()},removeCartesianGraphicalItem:{reducer(e,t){var r=Xj(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:bN()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:bN()},removePolarGraphicalItem:{reducer(e,t){var r=Xj(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:bN()}}}),{addCartesianGraphicalItem:aL,replaceCartesianGraphicalItem:oL,removeCartesianGraphicalItem:iL,addPolarGraphicalItem:lL,removePolarGraphicalItem:cL}=sL.actions,dL=sL.reducer,uL=EN({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Xj(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Xj(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Xj(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:fL,removeDot:pL,addArea:mL,removeArea:hL,addLine:gL,removeLine:xL}=uL.actions,yL=uL.reducer,bL={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},vL=EN({name:"brush",initialState:bL,reducers:{setBrushSettings:(e,t)=>null==t.payload?bL:t.payload}}),{setBrushSettings:wL}=vL.actions,jL=vL.reducer,NL=EN({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:bN()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Xj(e).payload.indexOf(r);s>-1&&(e.payload[s]=n)},prepare:bN()},removeLegendPayload:{reducer(e,t){var r=Xj(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:bN()}}}),{setLegendSize:kL,setLegendSettings:_L,addLegendPayload:CL,replaceLegendPayload:SL,removeLegendPayload:EL}=NL.actions,OL=NL.reducer,ML={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},TL=EN({name:"rootProps",initialState:ML,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:ML.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),PL=TL.reducer,{updateOptions:AL}=TL.actions,qL=EN({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:zL,removeRadiusAxis:DL,addAngleAxis:LL,removeAngleAxis:IL}=qL.actions,RL=qL.reducer,$L=EN({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:FL}=$L.actions,BL=$L.reducer,UL=mN("keyDown"),HL=mN("focus"),WL=ok();WL.startListening({actionCreator:UL,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,s=e.payload;if("ArrowRight"===s||"ArrowLeft"===s||"Enter"===s){var a=yz(n,Az(r),WA(r),Zz(r)),o=null==a?-1:Number(a);if(Number.isFinite(o)&&!(o<0)){var i=oD(r);if("Enter"!==s){var l=o+("ArrowRight"===s?1:-1)*("left-to-right"===lz(r)?1:-1);if(!(null==i||l>=i.length||l<0)){var c=TD(r,"axis","hover",String(l));t.dispatch(C_({active:!0,activeIndex:l.toString(),activeDataKey:void 0,activeCoordinate:c}))}}else{var d=TD(r,"axis","hover",String(n.index));t.dispatch(C_({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:d}))}}}}}}),WL.startListening({actionCreator:HL,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var s=TD(r,"axis","hover",String("0"));t.dispatch(C_({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:s}))}}}});var QL=mN("externalEvent"),VL=ok(),KL=new Map;VL.startListening({actionCreator:QL,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(null!=r){n.persist();var s=n.type,a=KL.get(s);void 0!==a&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var e=t.getState(),a={activeCoordinate:gD(e),activeDataKey:pD(e),activeIndex:uD(e),activeLabel:fD(e),activeTooltipIndex:uD(e),isTooltipActive:xD(e)};r(a,n)}finally{KL.delete(s)}});KL.set(s,o)}}});var YL=H_([jz],e=>e.tooltipItemPayloads),GL=H_([YL,wz,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(e=>e.settings.dataKey===n);if(null!=s){var{positions:a}=s;if(null!=a)return t(a,r)}}),XL=mN("touchMove"),ZL=ok();ZL.startListening({actionCreator:XL,effect:(e,t)=>{var r=e.payload;if(null!=r.touches&&0!==r.touches.length){var n=t.getState(),s=fz(n,n.tooltip.settings.shared);if("axis"===s){var a=DD(n,LD({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null==a?void 0:a.activeIndex)&&t.dispatch(j_({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}else if("item"===s){var o,i=r.touches[0];if(null==document.elementFromPoint)return;var l=document.elementFromPoint(i.clientX,i.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute("data-recharts-item-index"),d=null!==(o=l.getAttribute("data-recharts-item-data-key"))&&void 0!==o?o:void 0,u=GL(t.getState(),c,d);t.dispatch(y_({activeDataKey:d,activeIndex:c,activeCoordinate:u}))}}}});var JL=EN({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===n.dataKey&&e.direction===n.direction?s:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:eI,replaceErrorBar:tI,removeErrorBar:rI}=JL.actions,nI=JL.reducer,sI=!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function aI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function oI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aI(Object(r),!0).forEach(function(t){iI(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iI(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lI={zIndexMap:Object.values(zP).reduce((e,t)=>oI(oI({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),{})},cI=new Set(Object.values(zP)),dI=EN({name:"zIndex",initialState:lI,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:bN()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!function(e){return cI.has(e)}(r)&&delete e.zIndexMap[r])},prepare:bN()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:bN()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:bN()}}}),{registerZIndexPortal:uI,unregisterZIndexPortal:fI,registerZIndexPortalId:pI,unregisterZIndexPortalId:mI}=dI.actions,hI=iN({brush:jL,cartesianAxis:nL,chartData:P_,errorBars:nI,graphicalItems:dL,layout:I_,legend:OL,options:dk,polarAxis:RL,polarOptions:BL,referenceElements:yL,rootProps:PL,tooltip:S_,zIndex:dI.reducer});function gI(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=RC(),o=(0,a.useRef)(null);if(s)return r;null==o.current&&(o.current=function(e){return function(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=e??{};let a=new hN;return t&&("boolean"==typeof t?a.push(uN):a.push(fN(t.extraArgument))),a},{reducer:r,middleware:n,devTools:s=!0,duplicateMiddlewareCheck:a=!0,preloadedState:o,enhancers:i}=e||{};let l,c;if("function"==typeof r)l=r;else{if(!aN(r))throw new Error(ik(1));l=iN(r)}c="function"==typeof n?n(t):t();let d=lN;s&&(d=pN({trace:!1,..."object"==typeof s&&s}));const u=function(...e){return t=>(r,n)=>{const s=t(r,n);let a=()=>{throw new Error(tN(15))};const o={getState:s.getState,dispatch:(e,...t)=>a(e,...t)},i=e.map(e=>e(o));return a=lN(...i)(s.dispatch),{...s,dispatch:a}}}(...c),f=(e=>function(t){const{autoBatch:r=!0}=t??{};let n=new hN(e);return r&&n.push(wN("object"==typeof r?r:void 0)),n})(u);return oN(l,o,d(..."function"==typeof i?i(f):f()))}({reducer:hI,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([RD.middleware,FD.middleware,WL.middleware,VL.middleware,ZL.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(wN({type:"raf"}))},devTools:false})}(t,n));var i=V_;return a.createElement(jk,{context:i,store:o.current},r)}var xI=e=>{var{chartData:t}=e,r=Y_(),n=RC();return(0,a.useEffect)(()=>n?()=>{}:(r(O_(t)),()=>{r(O_(void 0))}),[t,r,n]),null},yI=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function bI(e,t){return null==e&&null==t||("number"==typeof e&&"number"==typeof t?e===t||e!=e&&t!=t:e===t)}function vI(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(yI.has(n)){if(null==e[n]&&null==t[n])continue;if(!xk(e[n],t[n]))return!1}else if(!bI(e[n],t[n]))return!1;return!0}function wI(e){var{layout:t,margin:r}=e,n=Y_(),s=RC();return(0,a.useEffect)(()=>{s||(n(z_(t)),n(q_(r)))},[n,s,t,r]),null}var jI=(0,a.memo)(wI,vI);function NI(e){var t=Y_();return(0,a.useEffect)(()=>{t(AL(e))},[t,e]),null}var kI=()=>{var e;return null===(e=J_(e=>e.rootProps.accessibilityLayer))||void 0===e||e},_I=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function CI(e){return"string"==typeof e&&_I.includes(e)}var SI=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function EI(e){return"string"==typeof e&&SI.has(e)}function OI(e){return"string"==typeof e&&e.startsWith("data-")}function MI(e){if("object"!=typeof e||null===e)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(EI(r)||OI(r))&&(t[r]=e[r]);return t}function TI(e){return null==e?null:(0,a.isValidElement)(e)&&"object"==typeof e.props&&null!==e.props?MI(e.props):"object"!=typeof e||Array.isArray(e)?null:MI(e)}function PI(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(EI(r)||OI(r)||CI(r))&&(t[r]=e[r]);return t}var AI=["children","width","height","viewBox","className","style","title","desc"];function qI(){return qI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qI.apply(null,arguments)}var zI,DI=(0,a.forwardRef)((e,t)=>{var{children:r,width:n,height:s,viewBox:o,className:i,style:l,title:c,desc:d}=e,u=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,AI),f=o||{width:n,height:s,x:0,y:0},p=ar("recharts-surface",i);return a.createElement("svg",qI({},PI(u),{className:p,width:n,height:s,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),a.createElement("title",null,c),a.createElement("desc",null,d),r)}),LI=null!==(zI=a["useId".toString()])&&void 0!==zI?zI:()=>{var[e]=a.useState(()=>yw("uid-"));return e};function II(e,t){var r=LI();return t||(e?"".concat(e,"-").concat(r):r)}var RI=H_(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(null!=t){var n=e[t];if(null!=n)return r?n.panoramaElementId:n.elementId}}),$I=H_(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(zP));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}}});function FI(e){var{zIndex:t,isPanorama:r}=e,n=II("".concat(r?"recharts-zindex-panorama-":"recharts-zindex-").concat(t)),s=Y_();return(0,a.useLayoutEffect)(()=>(s(pI({zIndex:t,elementId:n,isPanorama:r})),()=>{s(mI({zIndex:t,isPanorama:r}))}),[s,t,n,r]),a.createElement("g",{id:n})}function BI(e){var{children:t,isPanorama:r}=e,n=J_($I);if(!n||0===n.length)return t;var s=n.filter(e=>e<0),o=n.filter(e=>e>0);return a.createElement(a.Fragment,null,s.map(e=>a.createElement(FI,{key:e,zIndex:e,isPanorama:r})),t,o.map(e=>a.createElement(FI,{key:e,zIndex:e,isPanorama:r})))}var UI=["children"];function HI(){return HI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HI.apply(null,arguments)}var WI={width:"100%",height:"100%",display:"block"},QI=(0,a.forwardRef)((e,t)=>{var r=QC(),n=VC(),s=kI();if(!zw(r)||!zw(n))return null;var o,i,{children:l,otherAttributes:c,title:d,desc:u}=e;return null!=c&&(o="number"==typeof c.tabIndex?c.tabIndex:s?0:void 0,i="string"==typeof c.role?c.role:s?"application":void 0),a.createElement(DI,HI({},c,{title:d,desc:u,role:i,tabIndex:o,width:r,height:n,style:WI,ref:t}),l)}),VI=e=>{var{children:t}=e,r=J_(FC);if(!r)return null;var{width:n,height:s,y:o,x:i}=r;return a.createElement(DI,{width:n,height:s,x:i,y:o},t)},KI=(0,a.forwardRef)((e,t)=>{var{children:r}=e,n=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,UI);return RC()?a.createElement(VI,null,a.createElement(BI,{isPanorama:!0},r)):a.createElement(QI,HI({ref:t},n),a.createElement(BI,{isPanorama:!1},r))}),YI=new(o(1747)),GI="recharts.syncEvent.tooltip",XI="recharts.syncEvent.brush";function ZI(e){return e.tooltip.syncInteraction}var JI=["x","y"];function eR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function tR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(r),!0).forEach(function(t){rR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function rR(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nR(){var e=Y_();(0,a.useEffect)(()=>{e(uk())},[e]),function(){var e=J_(kP),t=J_(CP),r=Y_(),n=J_(_P),s=J_(oD),o=YC(),i=UC(),l=J_(e=>e.rootProps.className);(0,a.useEffect)(()=>{if(null==e)return Cw;var a=(a,l,c)=>{var d;if(t!==c&&e===a)if("index"!==n){if(null!=s){var u;if("function"==typeof n){var f={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},p=n(s,f);u=s[p]}else"value"===n&&(u=s.find(e=>String(e.value)===l.payload.label));var{coordinate:m}=l.payload;if(null!=u&&!1!==l.payload.active&&null!=m&&null!=i){var{x:h,y:g}=m,x=Math.min(h,i.x+i.width),y=Math.min(g,i.y+i.height),b={x:"horizontal"===o?u.coordinate:x,y:"horizontal"===o?y:u.coordinate},v=k_({active:l.payload.active,coordinate:b,dataKey:l.payload.dataKey,index:String(u.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox});r(v)}else r(k_({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}))}}else if(i&&null!=l&&null!==(d=l.payload)&&void 0!==d&&d.coordinate&&l.payload.sourceViewBox){var w=l.payload.coordinate,{x:_x,y:j}=w,N=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(w,JI),{x:k,y:_,width:C,height:S}=l.payload.sourceViewBox,E=tR(tR({},N),{},{x:i.x+(C?(_x-k)/C:0)*i.width,y:i.y+(S?(j-_)/S:0)*i.height});r(tR(tR({},l),{},{payload:tR(tR({},l.payload),{},{coordinate:E})}))}else r(l)};return YI.on(GI,a),()=>{YI.off(GI,a)}},[l,r,t,e,n,s,o,i])}(),function(){var e=J_(kP),t=J_(CP),r=Y_();(0,a.useEffect)(()=>{if(null==e)return Cw;var n=(n,s,a)=>{t!==a&&e===n&&r(M_(s))};return YI.on(XI,n),()=>{YI.off(XI,n)}},[r,t,e])}()}var sR=(0,a.createContext)(null),aR=(0,a.createContext)(null);function oR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oR(Object(r),!0).forEach(function(t){lR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function lR(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cR(){return cR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cR.apply(null,arguments)}var dR=()=>(nR(),null);function uR(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var fR=(0,a.forwardRef)((e,t)=>{var r,n,s=(0,a.useRef)(null),[o,i]=(0,a.useState)({containerWidth:uR(null===(r=e.style)||void 0===r?void 0:r.width),containerHeight:uR(null===(n=e.style)||void 0===n?void 0:n.height)}),l=(0,a.useCallback)((e,t)=>{i(r=>{var n=Math.round(e),s=Math.round(t);return r.containerWidth===n&&r.containerHeight===s?r:{containerWidth:n,containerHeight:s}})},[]),c=(0,a.useCallback)(e=>{if("function"==typeof t&&t(e),null!=e&&"undefined"!=typeof ResizeObserver){var{width:r,height:n}=e.getBoundingClientRect();l(r,n);var a=new ResizeObserver(e=>{var{width:t,height:r}=e[0].contentRect;l(t,r)});a.observe(e),s.current=a}},[t,l]);return(0,a.useEffect)(()=>()=>{var e=s.current;null!=e&&e.disconnect()},[l]),a.createElement(a.Fragment,null,a.createElement(GC,{width:o.containerWidth,height:o.containerHeight}),a.createElement("div",cR({ref:c},e)))}),pR=(0,a.forwardRef)((e,t)=>{var{width:r,height:n}=e,[s,o]=(0,a.useState)({containerWidth:uR(r),containerHeight:uR(n)}),i=(0,a.useCallback)((e,t)=>{o(r=>{var n=Math.round(e),s=Math.round(t);return r.containerWidth===n&&r.containerHeight===s?r:{containerWidth:n,containerHeight:s}})},[]),l=(0,a.useCallback)(e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();i(r,n)}},[t,i]);return a.createElement(a.Fragment,null,a.createElement(GC,{width:s.containerWidth,height:s.containerHeight}),a.createElement("div",cR({ref:l},e)))}),mR=(0,a.forwardRef)((e,t)=>{var{width:r,height:n}=e;return a.createElement(a.Fragment,null,a.createElement(GC,{width:r,height:n}),a.createElement("div",cR({ref:t},e)))}),hR=(0,a.forwardRef)((e,t)=>{var{width:r,height:n}=e;return mw(r)||mw(n)?a.createElement(pR,cR({},e,{ref:t})):a.createElement(mR,cR({},e,{ref:t}))}),gR=(0,a.forwardRef)((e,t)=>{var{children:r,className:n,height:s,onClick:o,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:f,onMouseUp:p,onTouchEnd:m,onTouchMove:h,onTouchStart:g,style:x,width:y,responsive:b,dispatchTouchEvents:v=!0}=e,w=(0,a.useRef)(null),j=Y_(),[N,k]=(0,a.useState)(null),[_,C]=(0,a.useState)(null),S=function(){var e=Y_(),[t,r]=(0,a.useState)(null),n=J_(EC);return(0,a.useEffect)(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;qw(r)&&r!==n&&e(L_(r))}},[t,e,n]),r}(),E=Bw(),O=(null==E?void 0:E.width)>0?E.width:y,M=(null==E?void 0:E.height)>0?E.height:s,T=(0,a.useCallback)(e=>{S(e),"function"==typeof t&&t(e),k(e),C(e),null!=e&&(w.current=e)},[S,t,k,C]),P=(0,a.useCallback)(e=>{j(ID(e)),j(QL({handler:o,reactEvent:e}))},[j,o]),A=(0,a.useCallback)(e=>{j($D(e)),j(QL({handler:d,reactEvent:e}))},[j,d]),q=(0,a.useCallback)(e=>{j(v_()),j(QL({handler:u,reactEvent:e}))},[j,u]),z=(0,a.useCallback)(e=>{j($D(e)),j(QL({handler:f,reactEvent:e}))},[j,f]),D=(0,a.useCallback)(()=>{j(HL())},[j]),L=(0,a.useCallback)(e=>{j(UL(e.key))},[j]),I=(0,a.useCallback)(e=>{j(QL({handler:i,reactEvent:e}))},[j,i]),R=(0,a.useCallback)(e=>{j(QL({handler:l,reactEvent:e}))},[j,l]),$=(0,a.useCallback)(e=>{j(QL({handler:c,reactEvent:e}))},[j,c]),F=(0,a.useCallback)(e=>{j(QL({handler:p,reactEvent:e}))},[j,p]),B=(0,a.useCallback)(e=>{j(QL({handler:g,reactEvent:e}))},[j,g]),U=(0,a.useCallback)(e=>{v&&j(XL(e)),j(QL({handler:h,reactEvent:e}))},[j,v,h]),H=(0,a.useCallback)(e=>{j(QL({handler:m,reactEvent:e}))},[j,m]),W=function(e){return!0===e?fR:hR}(b);return a.createElement(sR.Provider,{value:N},a.createElement(aR.Provider,{value:_},a.createElement(W,{width:null!=O?O:null==x?void 0:x.width,height:null!=M?M:null==x?void 0:x.height,className:ar("recharts-wrapper",n),style:iR({position:"relative",cursor:"default",width:O,height:M},x),onClick:P,onContextMenu:I,onDoubleClick:R,onFocus:D,onKeyDown:L,onMouseDown:$,onMouseEnter:A,onMouseLeave:q,onMouseMove:z,onMouseUp:F,onTouchEnd:H,onTouchMove:U,onTouchStart:B,ref:T},a.createElement(dR,null),r)))}),xR=H_([zC],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),yR=H_([xR,CC,SC],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),bR=()=>J_(yR),vR=(0,a.createContext)(void 0),wR=e=>{var{children:t}=e,[r]=(0,a.useState)("".concat(yw("recharts"),"-clip")),n=bR();if(null==n)return null;var{x:s,y:o,width:i,height:l}=n;return a.createElement(vR.Provider,{value:r},a.createElement("defs",null,a.createElement("clipPath",{id:r},a.createElement("rect",{x:s,y:o,height:l,width:i}))),t)},jR=["width","height","responsive","children","className","style","compact","title","desc"],NR=(0,a.forwardRef)((e,t)=>{var{width:r,height:n,responsive:s,children:o,className:i,style:l,compact:c,title:d,desc:u}=e,f=MI(function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,jR));return c?a.createElement(a.Fragment,null,a.createElement(GC,{width:r,height:n}),a.createElement(KI,{otherAttributes:f,title:d,desc:u},o)):a.createElement(gR,{className:i,style:l,width:r,height:n,responsive:null!=s&&s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},a.createElement(KI,{otherAttributes:f,title:d,desc:u,ref:t},a.createElement(wR,null,o)))});function kR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _R(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CR(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kR(Object(r),!0).forEach(function(t){_R(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),n=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e),r)}function SR(){return SR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SR.apply(null,arguments)}var ER={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",responsive:!1},OR=(0,a.forwardRef)(function(e,t){var r,n=CR(e.categoricalChartProps,ER),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,d={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,eventEmitter:void 0};return a.createElement(gI,{preloadedState:{options:d},reduxStoreName:null!==(r=c.id)&&void 0!==r?r:s},a.createElement(xI,{chartData:c.data}),a.createElement(jI,{layout:n.layout,margin:n.margin}),a.createElement(NI,{baseValue:n.baseValue,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),a.createElement(NR,SR({},n,{ref:t})))}),MR=["axis"],TR=(0,a.forwardRef)((e,t)=>a.createElement(OR,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:MR,tooltipPayloadSearcher:lk,categoricalChartProps:e,ref:t}));function PR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function AR(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qR,zR,DR,LR=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PR(Object(r),!0).forEach(function(t){AR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{cacheSize:2e3,enableCache:!0}),IR=new class{constructor(e){var t,r,n;t=this,r="cache",n=new Map,(r=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;null!=r&&this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(LR.cacheSize),RR={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},$R="recharts_measurement_span",FR=(e,t)=>{try{var r=document.getElementById($R);r||((r=document.createElement("span")).setAttribute("id",$R),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,RR,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(e){return{width:0,height:0}}},BR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||sI)return{width:0,height:0};if(!LR.enableCache)return FR(e,t);var r=function(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",a=t.fontStyle||"",o=t.letterSpacing||"",i=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(o,"|").concat(i)}(e,t),n=IR.get(r);if(n)return n;var s=FR(e,t);return IR.set(r,s),s};class UR{static create(e){return new UR(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(t){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}function HR(e,t){if(t<1)return[];if(1===t)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function WR(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-s)<=0}function QR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function VR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QR(Object(r),!0).forEach(function(t){KR(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QR(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KR(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YR(e,t,r){var n,{tick:s,ticks:a,viewBox:o,minTickGap:i,orientation:l,interval:c,tickFormatter:d,unit:u,angle:f}=e;if(!a||!a.length||!s)return[];if(hw(c)||sI)return null!==(n=function(e,t){return HR(e,t+1)}(a,hw(c)?c:0))&&void 0!==n?n:[];var p=[],m="top"===l||"bottom"===l?"width":"height",h=u&&"width"===m?BR(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(e,n)=>{var s="function"==typeof d?d(e.value,n):e.value;return"width"===m?function(e,t,r){return function(e){var{width:t,height:r}=e,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),s=n*Math.PI/180,a=Math.atan(r/t),o=s>a&&s<Math.PI-a?r/Math.sin(s):t/Math.cos(s);return Math.abs(o)}({width:e.width+t.width,height:e.height+t.height},r)}(BR(s,{fontSize:t,letterSpacing:r}),h,f):BR(s,{fontSize:t,letterSpacing:r})[m]},x=a.length>=2?fw(a[1].coordinate-a[0].coordinate):1,y=function(e,t,r){var n="width"===r,{x:s,y:a,width:o,height:i}=e;return 1===t?{start:n?s:a,end:n?s+o:a+i}:{start:n?s+o:a+i,end:n?s:a}}(o,x,m);return"equidistantPreserveStart"===c?function(e,t,r,n,s){for(var a,o=(n||[]).slice(),{start:i,end:l}=t,c=0,d=1,u=i,f=function(){var t=null==n?void 0:n[c];if(void 0===t)return{v:HR(n,d)};var a,o=c,f=()=>(void 0===a&&(a=r(t,o)),a),p=t.coordinate,m=0===c||WR(e,p,f,u,l);m||(c=0,u=i,d+=1),m&&(u=p+e*(f()/2+s),c+=d)};d<=o.length;)if(a=f())return a.v;return[]}(x,y,g,a,i):(p="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,n,s,a){var o=(n||[]).slice(),i=o.length,{start:l,end:c}=t;if(a){var d=n[i-1],u=r(d,i-1),f=e*(d.coordinate+e*u/2-c);o[i-1]=d=VR(VR({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate}),null!=d.tickCoord&&WR(e,d.tickCoord,()=>u,l,c)&&(c=d.tickCoord-e*(u/2+s),o[i-1]=VR(VR({},d),{},{isShow:!0}))}for(var p=a?i-1:i,m=function(t){var n,a=o[t],i=()=>(void 0===n&&(n=r(a,t)),n);if(0===t){var d=e*(a.coordinate-e*i()/2-l);o[t]=a=VR(VR({},a),{},{tickCoord:d<0?a.coordinate-d*e:a.coordinate})}else o[t]=a=VR(VR({},a),{},{tickCoord:a.coordinate});null!=a.tickCoord&&WR(e,a.tickCoord,i,l,c)&&(l=a.tickCoord+e*(i()/2+s),o[t]=VR(VR({},a),{},{isShow:!0}))},h=0;h<p;h++)m(h);return o}(x,y,g,a,i,"preserveStartEnd"===c):function(e,t,r,n,s){for(var a=(n||[]).slice(),o=a.length,{start:i}=t,{end:l}=t,c=function(t){var n,c=a[t],d=()=>(void 0===n&&(n=r(c,t)),n);if(t===o-1){var u=e*(c.coordinate+e*d()/2-l);a[t]=c=VR(VR({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else a[t]=c=VR(VR({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&WR(e,c.tickCoord,d,i,l)&&(l=c.tickCoord-e*(d()/2+s),a[t]=VR(VR({},c),{},{isShow:!0}))},d=o-1;d>=0;d--)c(d);return a}(x,y,g,a,i),p.filter(e=>e.isShow))}qR=UR,DR=1e-4,(zR=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(zR="EPS"))in qR?Object.defineProperty(qR,zR,{value:DR,enumerable:!0,configurable:!0,writable:!0}):qR[zR]=DR;var GR=["children","className"];function XR(){return XR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XR.apply(null,arguments)}var ZR=a.forwardRef((e,t)=>{var{children:r,className:n}=e,s=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,GR),o=ar("recharts-layer",n);return a.createElement("g",XR({className:o},PI(s),{ref:t}),r)}),JR=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,e$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,t$=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,r$=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,n$={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},s$=Object.keys(n$),a$="NaN";class o${static parse(e){var t,[,r,n]=null!==(t=r$.exec(e))&&void 0!==t?t:[];return new o$(parseFloat(r),null!=n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,pw(e)&&(this.unit=""),""===t||t$.test(t)||(this.num=NaN,this.unit=""),s$.includes(t)&&(this.num=function(e,t){return e*n$[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new o$(NaN,""):new o$(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new o$(NaN,""):new o$(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new o$(NaN,""):new o$(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new o$(NaN,""):new o$(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return pw(this.num)}}function i$(e){if(e.includes(a$))return a$;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,a]=null!==(r=JR.exec(t))&&void 0!==r?r:[],o=o$.parse(null!=n?n:""),i=o$.parse(null!=a?a:""),l="*"===s?o.multiply(i):o.divide(i);if(l.isNaN())return a$;t=t.replace(JR,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,f]=null!==(c=e$.exec(t))&&void 0!==c?c:[],p=o$.parse(null!=d?d:""),m=o$.parse(null!=f?f:""),h="+"===u?p.add(m):p.subtract(m);if(h.isNaN())return a$;t=t.replace(e$,h.toString())}return t}var l$=/\(([^()]*)\)/;function c$(e){var t=function(e){try{return function(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=l$.exec(r));){var[,n]=t;r=r.replace(l$,i$(n))}return r}(t),i$(t)}(e)}catch(e){return a$}}(e.slice(5,-1));return t===a$?"":t}var d$=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],u$=["dx","dy","angle","className","breakAll"];function f$(){return f$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f$.apply(null,arguments)}function p$(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var m$=/[ \f\n\r\t\v\u2028\u2029]+/,h$=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];return Nw(t)||(s=r?t.toString().split(""):t.toString().split(m$)),{wordsWithComputedWidth:s.map(e=>({word:e,width:BR(e,n).width})),spaceWidth:r?0:BR("",n).width}}catch(e){return null}};function g$(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var x$=(e,t,r,n)=>e.reduce((e,s)=>{var{word:a,width:o}=s,i=e[e.length-1];if(i&&null!=o&&(null==t||n||i.width+o+r<Number(t)))i.words.push(a),i.width+=o+r;else{var l={words:[a],width:o};e.push(l)}return e},[]),y$=e=>e.reduce((e,t)=>e.width>t.width?e:t),b$=(e,t,r,n,s,a,o,i)=>{var l=e.slice(0,t),c=h$({breakAll:r,style:n,children:l+""});if(!c)return[!1,[]];var d=x$(c.wordsWithComputedWidth,a,o,i);return[d.length>s||y$(d).width>Number(a),d]},v$=e=>[{words:Nw(e)?[]:e.toString().split(m$),width:void 0}],w$="#808080",j$={angle:0,breakAll:!1,capHeight:"0.71em",fill:w$,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},N$=(0,a.forwardRef)((e,t)=>{var r=CR(e,j$),{x:n,y:s,lineHeight:o,capHeight:i,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=r,f=p$(r,d$),p=(0,a.useMemo)(()=>(e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:a,maxLines:o}=e;if((t||r)&&!sI){var i=h$({breakAll:a,children:n,style:s});if(!i)return v$(n);var{wordsWithComputedWidth:l,spaceWidth:c}=i;return((e,t,r,n,s)=>{var{maxLines:a,children:o,style:i,breakAll:l}=e,c=hw(a),d=String(o),u=x$(t,n,r,s);if(!c||s)return u;if(!(u.length>a||y$(u).width>Number(n)))return u;for(var f,p=0,m=d.length-1,h=0;p<=m&&h<=d.length-1;){var g=Math.floor((p+m)/2),x=g-1,[y,b]=b$(d,x,l,i,a,n,r,s),[v]=b$(d,g,l,i,a,n,r,s);if(y||v||(p=g+1),y&&v&&(m=g-1),!y&&v){f=b;break}h++}return f||u})({breakAll:a,children:n,maxLines:o,style:s},l,c,t,Boolean(r))}return v$(n)})({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:m,dy:h,angle:g,className:x,breakAll:y}=f,b=p$(f,u$);if(!gw(n)||!gw(s)||0===p.length)return null;var v,w=Number(n)+(hw(m)?m:0),j=Number(s)+(hw(h)?h:0);if(!qw(w)||!qw(j))return null;switch(u){case"start":v=c$("calc(".concat(i,")"));break;case"middle":v=c$("calc(".concat((p.length-1)/2," * -").concat(o," + (").concat(i," / 2))"));break;default:v=c$("calc(".concat(p.length-1," * -").concat(o,")"))}var N=[];if(c){var k=p[0].width,{width:_}=f;N.push("scale(".concat(hw(_)&&hw(k)?_/k:1,")"))}return g&&N.push("rotate(".concat(g,", ").concat(w,", ").concat(j,")")),N.length&&(b.transform=N.join(" ")),a.createElement("text",f$({},PI(b),{ref:t,x:w,y:j,className:ar("recharts-text",x),textAnchor:d,fill:l.includes("url")?w$:l}),p.map((e,t)=>{var r=e.words.join(y?"":" ");return a.createElement("tspan",{x:w,dy:0===t?v:o,key:"".concat(r,"-").concat(t)},r)}))});function k$(e){var{zIndex:t,children:r}=e,n=void 0!==YC()&&void 0!==t&&0!==t,s=RC(),o=Y_();(0,a.useLayoutEffect)(()=>n?(o(uI({zIndex:t})),()=>{o(fI({zIndex:t}))}):Cw,[o,t,n]);var i=J_(e=>RI(e,t,s));if(!n)return r;if(!i)return null;var l=document.getElementById(i);return l?(0,ga.createPortal)(r,l):null}N$.displayName="Text";var _$=["labelRef"];function C$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function S$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C$(Object(r),!0).forEach(function(t){E$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function E$(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O$(){return O$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O$.apply(null,arguments)}var M$=(0,a.createContext)(null),T$=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:o,height:i,children:l}=e,c=(0,a.useMemo)(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:o,height:i}),[t,r,n,s,o,i]);return a.createElement(M$.Provider,{value:c},l)},P$=()=>{var e=(0,a.useContext)(M$),t=UC();return e||BC(t)},A$=(0,a.createContext)(null),q$=e=>null!=e&&"function"==typeof e,z$=e=>"cx"in e&&hw(e.cx),D$={angle:0,offset:5,zIndex:zP.label,position:"middle",textBreakAll:!1};function L$(e){var t,r,n,s,o,i=CR(e,D$),{viewBox:l,position:c,value:d,children:u,content:f,className:p="",textBreakAll:m,labelRef:h}=i,g=(s=(0,a.useContext)(A$),o=J_(tA),s||o),x=P$();if(!(t=null==l?"center"===c?x:null!=g?g:x:z$(l)?l:BC(l))||Nw(d)&&Nw(u)&&!(0,a.isValidElement)(f)&&"function"!=typeof f)return null;var y=S$(S$({},i),{},{viewBox:t});if((0,a.isValidElement)(f)){var{labelRef:b}=y,v=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(y,_$);return(0,a.cloneElement)(f,v)}if("function"==typeof f){if(r=(0,a.createElement)(f,y),(0,a.isValidElement)(r))return r}else r=(e=>{var{value:t,formatter:r}=e,n=Nw(e.children)?t:e.children;return"function"==typeof r?r(n):n})(i);var w=PI(i);if(z$(t)){if("insideStart"===c||"insideEnd"===c||"end"===c)return((e,t,r,n,s)=>{var o,i,{offset:l,className:c}=e,{cx:d,cy:u,innerRadius:f,outerRadius:p,startAngle:m,endAngle:h,clockWise:g}=s,x=(f+p)/2,y=((e,t)=>fw(t-e)*Math.min(Math.abs(t-e),360))(m,h),b=y>=0?1:-1;switch(t){case"insideStart":o=m+b*l,i=g;break;case"insideEnd":o=h-b*l,i=!g;break;case"end":o=h+b*l,i=g;break;default:throw new Error("Unsupported position ".concat(t))}i=y<=0?i:!i;var v=PP(d,u,x,o),w=PP(d,u,x,o+359*(i?1:-1)),j="M".concat(v.x,",").concat(v.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(i?0:1,",\n    ").concat(w.x,",").concat(w.y),N=Nw(e.id)?yw("recharts-radial-line-"):e.id;return a.createElement("text",O$({},n,{dominantBaseline:"central",className:ar("recharts-radial-bar-label",c)}),a.createElement("defs",null,a.createElement("path",{id:N,d:j})),a.createElement("textPath",{xlinkHref:"#".concat(N)},r))})(i,c,r,w,t);n=((e,t,r)=>{var{cx:n,cy:s,innerRadius:a,outerRadius:o,startAngle:i,endAngle:l}=e,c=(i+l)/2;if("outside"===r){var{x:_x,y:d}=PP(n,s,o+t,c);return{x:_x,y:d,textAnchor:_x>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var u=(a+o)/2,{x:f,y:p}=PP(n,s,u,c);return{x:f,y:p,textAnchor:"middle",verticalAnchor:"middle"}})(t,i.offset,i.position)}else n=((e,t)=>{var r,{parentViewBox:n,offset:s,position:a}=e;null==n||z$(n)||(r=n);var{x:o,y:i,upperWidth:l,lowerWidth:c,height:d}=t,u=o,f=o+(l-c)/2,p=(u+f)/2,m=(l+c)/2,h=u+l/2,g=d>=0?1:-1,x=g*s,y=g>0?"end":"start",b=g>0?"start":"end",v=l>=0?1:-1,w=v*s,j=v>0?"end":"start",N=v>0?"start":"end";if("top"===a)return S$(S$({},{x:u+l/2,y:i-x,textAnchor:"middle",verticalAnchor:y}),r?{height:Math.max(i-r.y,0),width:l}:{});if("bottom"===a)return S$(S$({},{x:f+c/2,y:i+d+x,textAnchor:"middle",verticalAnchor:b}),r?{height:Math.max(r.y+r.height-(i+d),0),width:c}:{});if("left"===a){var k={x:p-w,y:i+d/2,textAnchor:j,verticalAnchor:"middle"};return S$(S$({},k),r?{width:Math.max(k.x-r.x,0),height:d}:{})}if("right"===a){var _={x:p+m+w,y:i+d/2,textAnchor:N,verticalAnchor:"middle"};return S$(S$({},_),r?{width:Math.max(r.x+r.width-_.x,0),height:d}:{})}var C=r?{width:m,height:d}:{};return"insideLeft"===a?S$({x:p+w,y:i+d/2,textAnchor:N,verticalAnchor:"middle"},C):"insideRight"===a?S$({x:p+m-w,y:i+d/2,textAnchor:j,verticalAnchor:"middle"},C):"insideTop"===a?S$({x:u+l/2,y:i+x,textAnchor:"middle",verticalAnchor:b},C):"insideBottom"===a?S$({x:f+c/2,y:i+d-x,textAnchor:"middle",verticalAnchor:y},C):"insideTopLeft"===a?S$({x:u+w,y:i+x,textAnchor:N,verticalAnchor:b},C):"insideTopRight"===a?S$({x:u+l-w,y:i+x,textAnchor:j,verticalAnchor:b},C):"insideBottomLeft"===a?S$({x:f+w,y:i+d-x,textAnchor:N,verticalAnchor:y},C):"insideBottomRight"===a?S$({x:f+c-w,y:i+d-x,textAnchor:j,verticalAnchor:y},C):a&&"object"==typeof a&&(hw(a.x)||mw(a.x))&&(hw(a.y)||mw(a.y))?S$({x:o+bw(a.x,m),y:i+bw(a.y,d),textAnchor:"end",verticalAnchor:"end"},C):S$({x:h,y:i+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)})(i,t);return a.createElement(k$,{zIndex:i.zIndex},a.createElement(N$,O$({ref:h,className:ar("recharts-label",p)},w,n,{textAnchor:g$(w.textAnchor)?w.textAnchor:n.textAnchor,breakAll:m}),r))}L$.displayName="Label";function I$(e){var{label:t,labelRef:r}=e;return((e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return!0===e?a.createElement(L$,O$({key:"label-implicit"},n)):gw(e)?a.createElement(L$,O$({key:"label-implicit",value:e},n)):(0,a.isValidElement)(e)?e.type===L$?(0,a.cloneElement)(e,S$({key:"label-implicit"},n)):a.createElement(L$,O$({key:"label-implicit",content:e},n)):q$(e)?a.createElement(L$,O$({key:"label-implicit",content:e},n)):e&&"object"==typeof e?a.createElement(L$,O$({},e,{key:"label-implicit"},n)):null})(t,P$(),r)||null}var R$=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,$$=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if((0,a.isValidElement)(e)&&(r=e.props),"object"!=typeof r&&"function"!=typeof r)return null;var n={};return Object.keys(r).forEach(e=>{CI(e)&&(n[e]=t||(t=>r[e](r,t)))}),n},F$=["axisLine","width","height","className","hide","ticks","axisType"];function B$(){return B$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},B$.apply(null,arguments)}function U$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function H$(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U$(Object(r),!0).forEach(function(t){W$(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function W$(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q$={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:zP.axis};function V$(e){var{x:t,y:r,width:n,height:s,orientation:o,mirror:i,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=H$(H$(H$({},c),MI(l)),{},{fill:"none"});if("top"===o||"bottom"===o){var u=+("top"===o&&!i||"bottom"===o&&i);d=H$(H$({},d),{},{x1:t,y1:r+u*s,x2:t+n,y2:r+u*s})}else{var f=+("left"===o&&!i||"right"===o&&i);d=H$(H$({},d),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+s})}return a.createElement("line",B$({},d,{className:ar("recharts-cartesian-axis-line",uw()(l,"className"))}))}function K$(e){var t,{option:r,tickProps:n,value:s}=e,o=ar(n.className,"recharts-cartesian-axis-tick-value");if(a.isValidElement(r))t=a.cloneElement(r,H$(H$({},n),{},{className:o}));else if("function"==typeof r)t=r(H$(H$({},n),{},{className:o}));else{var i="recharts-cartesian-axis-tick-value";"boolean"!=typeof r&&(i=ar(i,null==r?void 0:r.className)),t=a.createElement(N$,B$({},n,{className:i}),s)}return t}var Y$=(0,a.forwardRef)((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:o,tickFormatter:i,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:f,x:p,y:m,width:h,height:g,tickSize:x,tickMargin:y,fontSize:b,letterSpacing:v,getTicksConfig:w,events:j,axisType:N}=e,k=YR(H$(H$({},w),{},{ticks:r}),b,v),_=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(u,f),C=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(u,f),S=MI(w),E=TI(n),O={};"object"==typeof s&&(O=s);var M=H$(H$({},S),{},{fill:"none"},O),T=k.map(e=>H$({entry:e},function(e,t,r,n,s,a,o,i,l){var c,d,u,f,p,m,h=i?-1:1,g=e.tickSize||o,x=hw(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":c=d=e.coordinate,m=(u=(f=r+ +!i*s)-h*g)-h*l,p=x;break;case"left":u=f=e.coordinate,p=(c=(d=t+ +!i*n)-h*g)-h*l,m=x;break;case"right":u=f=e.coordinate,p=(c=(d=t+ +i*n)+h*g)+h*l,m=x;break;default:c=d=e.coordinate,m=(u=(f=r+ +i*s)+h*g)+h*l,p=x}return{line:{x1:c,y1:u,x2:d,y2:f},tick:{x:p,y:m}}}(e,p,m,h,g,u,x,f,y))),P=T.map(e=>{var{entry:t,line:r}=e;return a.createElement(ZR,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},s&&a.createElement("line",B$({},M,r,{className:ar("recharts-cartesian-axis-tick-line",uw()(s,"className"))})))}),A=T.map((e,t)=>{var{entry:r,tick:s}=e,u=H$(H$(H$(H$({textAnchor:_,verticalAnchor:C},S),{},{stroke:"none",fill:o},E),s),{},{index:t,payload:r,visibleTicksCount:k.length,tickFormatter:i,padding:c},d);return a.createElement(ZR,B$({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(r.value,"-").concat(r.coordinate,"-").concat(r.tickCoord)},((e,t,r)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var n=null;return Object.keys(e).forEach(s=>{var a=e[s];CI(s)&&"function"==typeof a&&(n||(n={}),n[s]=((e,t,r)=>n=>(e(t,r,n),null))(a,t,r))}),n})(j,r,t)),n&&a.createElement(K$,{option:n,tickProps:u,value:"".concat("function"==typeof i?i(r.value,t):r.value).concat(l||"")}))});return a.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},A.length>0&&a.createElement(k$,{zIndex:zP.label},a.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},A)),P.length>0&&a.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},P))}),G$=(0,a.forwardRef)((e,t)=>{var{axisLine:r,width:n,height:s,className:o,hide:i,ticks:l,axisType:c}=e,d=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,F$),[u,f]=(0,a.useState)(""),[p,m]=(0,a.useState)(""),h=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>o&&(o=t.width)}});var i=r?r.getBoundingClientRect().width:0,l=o+(s+a)+i+(r?n:0);return Math.round(l)}return 0})({ticks:h.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=(0,a.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");h.current=t;var r=t[0];if(r){var n=window.getComputedStyle(r),s=n.fontSize,a=n.letterSpacing;s===u&&a===p||(f(s),m(a))}}},[u,p]);return i||null!=n&&n<=0||null!=s&&s<=0?null:a.createElement(k$,{zIndex:e.zIndex},a.createElement(ZR,{className:ar("recharts-cartesian-axis",o)},a.createElement(V$,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:MI(e)}),a.createElement(Y$,{ref:g,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:p,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),a.createElement(T$,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},a.createElement(I$,{label:e.label,labelRef:e.labelRef}),e.children)))}),X$=a.forwardRef((e,t)=>{var r=CR(e,Q$);return a.createElement(G$,B$({},r,{ref:t}))});X$.displayName="CartesianAxis";var Z$=["x1","y1","x2","y2","key"],J$=["offset"],eF=["xAxisId","yAxisId"],tF=["xAxisId","yAxisId"];function rF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rF(Object(r),!0).forEach(function(t){sF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sF(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aF(){return aF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aF.apply(null,arguments)}function oF(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var iF=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:n,y:s,width:o,height:i,ry:l}=e;return a.createElement("rect",{x:n,y:s,ry:l,width:o,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function lF(e){var t,{option:r,lineItemProps:n}=e;if(a.isValidElement(r))t=a.cloneElement(r,n);else if("function"==typeof r)t=r(n);else{var s,{x1:o,y1:i,x2:l,y2:c,key:d}=n,u=null!==(s=MI(oF(n,Z$)))&&void 0!==s?s:{},{offset:__}=u,f=oF(u,J$);t=a.createElement("line",aF({},f,{x1:o,y1:i,x2:l,y2:c,fill:"none",key:d}))}return t}function cF(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:o,yAxisId:i}=e,l=oF(e,eF),c=s.map((e,s)=>{var o=nF(nF({},l),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(s),index:s});return a.createElement(lF,{key:"line-".concat(s),option:n,lineItemProps:o})});return a.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function dF(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:o,yAxisId:i}=e,l=oF(e,tF),c=s.map((e,s)=>{var o=nF(nF({},l),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(s),index:s});return a.createElement(lF,{option:n,lineItemProps:o,key:"line-".concat(s)})});return a.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function uF(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:o,height:i,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||null==l)return null;var d=l.map(e=>Math.round(e+s-s)).sort((e,t)=>e-t);s!==d[0]&&d.unshift(0);var u=d.map((e,l)=>{var c=d[l+1]?d[l+1]-e:s+i-e;if(c<=0)return null;var u=l%t.length;return a.createElement("rect",{key:"react-".concat(l),y:e,x:n,height:c,width:o,stroke:"none",fill:t[u],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function fF(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:o,width:i,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(e=>Math.round(e+s-s)).sort((e,t)=>e-t);s!==d[0]&&d.unshift(0);var u=d.map((e,t)=>{var c=d[t+1]?d[t+1]-e:s+i-e;if(c<=0)return null;var u=t%r.length;return a.createElement("rect",{key:"react-".concat(t),x:e,y:o,width:c,height:l,stroke:"none",fill:r[u],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return a.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var pF=(e,t)=>{var{xAxis:r,width:n,height:s,offset:a}=e;return hC(YR(nF(nF(nF({},Q$),r),{},{ticks:gC(r,!0),viewBox:{x:0,y:0,width:n,height:s}})),a.left,a.left+a.width,t)},mF=(e,t)=>{var{yAxis:r,width:n,height:s,offset:a}=e;return hC(YR(nF(nF(nF({},Q$),r),{},{ticks:gC(r,!0),viewBox:{x:0,y:0,width:n,height:s}})),a.top,a.top+a.height,t)},hF={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:zP.grid};function gF(e){var t=QC(),r=VC(),n=WC(),s=nF(nF({},CR(e,hF)),{},{x:hw(e.x)?e.x:n.left,y:hw(e.y)?e.y:n.top,width:hw(e.width)?e.width:n.width,height:hw(e.height)?e.height:n.height}),{xAxisId:o,yAxisId:i,x:l,y:c,width:d,height:u,syncWithTicks:f,horizontalValues:p,verticalValues:m}=s,h=RC(),g=J_(e=>nz(e,"xAxis",o,h)),x=J_(e=>nz(e,"yAxis",i,h));if(!(zw(d)&&zw(u)&&hw(l)&&hw(c)))return null;var y=s.verticalCoordinatesGenerator||pF,b=s.horizontalCoordinatesGenerator||mF,{horizontalPoints:v,verticalPoints:w}=s;if(!(v&&v.length||"function"!=typeof b)){var j=p&&p.length,N=b({yAxis:x?nF(nF({},x),{},{ticks:j?p:x.ticks}):void 0,width:null!=t?t:d,height:null!=r?r:u,offset:n},!!j||f);Sw(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(v=N)}if(!(w&&w.length||"function"!=typeof y)){var k=m&&m.length,_=y({xAxis:g?nF(nF({},g),{},{ticks:k?m:g.ticks}):void 0,width:null!=t?t:d,height:null!=r?r:u,offset:n},!!k||f);Sw(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(w=_)}return a.createElement(k$,{zIndex:s.zIndex},a.createElement("g",{className:"recharts-cartesian-grid"},a.createElement(iF,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),a.createElement(uF,aF({},s,{horizontalPoints:v})),a.createElement(fF,aF({},s,{verticalPoints:w})),a.createElement(cF,aF({},s,{offset:n,horizontalPoints:v,xAxis:g,yAxis:x})),a.createElement(dF,aF({},s,{offset:n,verticalPoints:w,xAxis:g,yAxis:x}))))}gF.displayName="CartesianGrid";var xF=["domain","range"],yF=["domain","range"];function bF(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function vF(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&e[0]===t[0]&&e[1]===t[1]}function wF(e,t){if(e===t)return!0;var{domain:r,range:n}=e,s=bF(e,xF),{domain:a,range:o}=t,i=bF(t,yF);return!!vF(r,a)&&!!vF(n,o)&&vI(s,i)}var jF=["dangerouslySetInnerHTML","ticks"],NF=["id"];function kF(){return kF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kF.apply(null,arguments)}function _F(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function CF(e){var t=Y_(),r=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{null===r.current?t(VD(e)):r.current!==e&&t(KD({prev:r.current,next:e})),r.current=e},[e,t]),(0,a.useLayoutEffect)(()=>()=>{r.current&&(t(YD(r.current)),r.current=null)},[t]),null}var SF=e=>{var{xAxisId:t,className:r}=e,n=J_(LC),s=RC(),o="xAxis",i=J_(e=>$q(e,o,t,s)),l=J_(e=>sz(e,o,t,s)),c=J_(e=>Vq(e,t)),d=J_(e=>Gq(e,t)),u=J_(e=>gA(e,t));if(null==c||null==d||null==u)return null;var{dangerouslySetInnerHTML:f,ticks:p}=e,m=_F(e,jF),{id:h}=u,g=_F(u,NF);return a.createElement(X$,kF({},m,g,{scale:i,x:d.x,y:d.y,width:c.width,height:c.height,className:ar("recharts-".concat(o," ").concat(o),r),viewBox:n,ticks:l,axisType:o}))},EF={allowDataOverflow:hA.allowDataOverflow,allowDecimals:hA.allowDecimals,allowDuplicatedCategory:hA.allowDuplicatedCategory,angle:hA.angle,axisLine:Q$.axisLine,height:hA.height,hide:!1,includeHidden:hA.includeHidden,interval:hA.interval,minTickGap:hA.minTickGap,mirror:hA.mirror,orientation:hA.orientation,padding:hA.padding,reversed:hA.reversed,scale:hA.scale,tick:hA.tick,tickCount:hA.tickCount,tickLine:Q$.tickLine,tickSize:Q$.tickSize,type:hA.type,xAxisId:0},OF=e=>{var t=CR(e,EF);return a.createElement(a.Fragment,null,a.createElement(CF,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),a.createElement(SF,t))},MF=a.memo(OF,wF);MF.displayName="XAxis";var TF=["dangerouslySetInnerHTML","ticks"],PF=["id"];function AF(){return AF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AF.apply(null,arguments)}function qF(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function zF(e){var t=Y_(),r=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{null===r.current?t(GD(e)):r.current!==e&&t(XD({prev:r.current,next:e})),r.current=e},[e,t]),(0,a.useLayoutEffect)(()=>()=>{r.current&&(t(ZD(r.current)),r.current=null)},[t]),null}var DF=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,o=(0,a.useRef)(null),i=(0,a.useRef)(null),l=J_(LC),c=RC(),d=Y_(),u="yAxis",f=J_(e=>$q(e,u,t,c)),p=J_(e=>Zq(e,t)),m=J_(e=>Xq(e,t)),h=J_(e=>sz(e,u,t,c)),g=J_(e=>bA(e,t));if((0,a.useLayoutEffect)(()=>{if("auto"===n&&p&&!q$(s)&&!(0,a.isValidElement)(s)&&null!=g){var e=o.current;if(e){var r=e.getCalculatedWidth();Math.round(p.width)!==Math.round(r)&&d(rL({id:t,width:r}))}}},[h,p,d,s,t,n,g]),null==p||null==m||null==g)return null;var{dangerouslySetInnerHTML:x,ticks:y}=e,b=qF(e,TF),{id:v}=g,w=qF(g,PF);return a.createElement(X$,AF({},b,w,{ref:o,labelRef:i,scale:f,x:m.x,y:m.y,tickTextProps:"auto"===n?{width:void 0}:{width:n},width:p.width,height:p.height,className:ar("recharts-".concat(u," ").concat(u),r),viewBox:l,ticks:h,axisType:u}))},LF={allowDataOverflow:yA.allowDataOverflow,allowDecimals:yA.allowDecimals,allowDuplicatedCategory:yA.allowDuplicatedCategory,angle:yA.angle,axisLine:Q$.axisLine,hide:!1,includeHidden:yA.includeHidden,interval:yA.interval,minTickGap:yA.minTickGap,mirror:yA.mirror,orientation:yA.orientation,padding:yA.padding,reversed:yA.reversed,scale:yA.scale,tick:yA.tick,tickCount:yA.tickCount,tickLine:Q$.tickLine,tickSize:Q$.tickSize,type:yA.type,width:yA.width,yAxisId:0},IF=e=>{var t=CR(e,LF);return a.createElement(a.Fragment,null,a.createElement(zF,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),a.createElement(DF,t))},RF=a.memo(IF,wF);function $F(){return $F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$F.apply(null,arguments)}function FF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function BF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FF(Object(r),!0).forEach(function(t){UF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function UF(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HF(e){return Array.isArray(e)&&gw(e[0])&&gw(e[1])?e.join(" ~ "):e}RF.displayName="YAxis";var WF=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:o,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:f,accessibilityLayer:p=!1}=e,m=BF({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),h=BF({margin:0},s),g=!Nw(u),x=g?u:"",y=ar("recharts-default-tooltip",c),b=ar("recharts-tooltip-label",d);g&&f&&null!=o&&(x=f(u,o));var v=p?{role:"status","aria-live":"assertive"}:{};return a.createElement("div",$F({className:y,style:m},v),a.createElement("p",{className:b,style:h},a.isValidElement(x)?x:"".concat(x)),(()=>{if(o&&o.length){var e=(l?tC()(o,l):o).map((e,r)=>{if("none"===e.type)return null;var s=e.formatter||i||HF,{value:l,name:c}=e,d=l,u=c;if(s){var f=s(l,c,e,r,o);if(Array.isArray(f))[d,u]=f;else{if(null==f)return null;d=f}}var p=BF({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},n);return a.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:p},gw(u)?a.createElement("span",{className:"recharts-tooltip-item-name"},u):null,gw(u)?a.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,a.createElement("span",{className:"recharts-tooltip-item-value"},d),a.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return a.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},QF="recharts-tooltip-wrapper",VF={visibility:"hidden"};function KF(e){var{coordinate:t,translateX:r,translateY:n}=e;return ar(QF,{["".concat(QF,"-right")]:hw(r)&&t&&hw(t.x)&&r>=t.x,["".concat(QF,"-left")]:hw(r)&&t&&hw(t.x)&&r<t.x,["".concat(QF,"-bottom")]:hw(n)&&t&&hw(t.y)&&n>=t.y,["".concat(QF,"-top")]:hw(n)&&t&&hw(t.y)&&n<t.y})}function YF(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:a,reverseDirection:o,tooltipDimension:i,viewBox:l,viewBoxDimension:c}=e;if(a&&hw(a[n]))return a[n];var d=r[n]-i-(s>0?s:0),u=r[n]+s;if(t[n])return o[n]?d:u;var f=l[n];return null==f?0:o[n]?d<f?Math.max(u,f):Math.max(d,f):null==c?0:u+i>f+c?Math.max(d,f):Math.max(u,f)}function GF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function XF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?GF(Object(r),!0).forEach(function(t){ZF(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ZF(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class JF extends a.PureComponent{constructor(){super(...arguments),ZF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),ZF(this,"handleKeyDown",e=>{var t,r,n,s;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(s=this.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:n,children:s,coordinate:o,hasPayload:i,isAnimationActive:l,offset:c,position:d,reverseDirection:u,useTranslate3d:f,viewBox:p,wrapperStyle:m,lastBoundingBox:h,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=function(e){var t,r,n,{allowEscapeViewBox:s,coordinate:a,offsetTopLeft:o,position:i,reverseDirection:l,tooltipBox:c,useTranslate3d:d,viewBox:u}=e;return t=c.height>0&&c.width>0&&a?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=YF({allowEscapeViewBox:s,coordinate:a,key:"x",offsetTopLeft:o,position:i,reverseDirection:l,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=YF({allowEscapeViewBox:s,coordinate:a,key:"y",offsetTopLeft:o,position:i,reverseDirection:l,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:d}):VF,{cssProperties:t,cssClasses:KF({translateX:r,translateY:n,coordinate:a})}}({allowEscapeViewBox:t,coordinate:o,offsetTopLeft:c,position:d,reverseDirection:u,tooltipBox:{height:h.height,width:h.width},useTranslate3d:f,viewBox:p}),v=x?{}:XF(XF({transition:l&&e?"transform ".concat(r,"ms ").concat(n):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&i?"visible":"hidden",position:"absolute",top:0,left:0}),w=XF(XF({},v),{},{visibility:!this.state.dismissed&&e&&i?"visible":"hidden"},m);return a.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:w,ref:g},s)}}var eB=o(1081),tB=o.n(eB);function rB(){}function nB(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function sB(e){this._context=e}function aB(e){this._context=e}function oB(e){this._context=e}sB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:nB(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:nB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},aB.prototype={areaStart:rB,areaEnd:rB,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:nB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},oB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:nB(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class iB{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function lB(e){this._context=e}function cB(e){this._context=e}function dB(e){return new cB(e)}function uB(e){return e<0?-1:1}function fB(e,t,r){var n=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),i=(a*s+o*n)/(n+s);return(uB(a)+uB(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(i))||0}function pB(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function mB(e,t,r){var n=e._x0,s=e._y0,a=e._x1,o=e._y1,i=(a-n)/3;e._context.bezierCurveTo(n+i,s+i*t,a-i,o-i*r,a,o)}function hB(e){this._context=e}function gB(e){this._context=new xB(e)}function xB(e){this._context=e}function yB(e){this._context=e}function bB(e){var t,r,n=e.length-1,s=new Array(n),a=new Array(n),o=new Array(n);for(s[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(s[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)s[t]=(o[t]-s[t+1])/a[t];for(a[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function vB(e,t){this._context=e,this._t=t}lB.prototype={areaStart:rB,areaEnd:rB,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},cB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},hB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mB(this,this._t0,pB(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,mB(this,pB(this,r=fB(this,e,t)),r);break;default:mB(this,this._t0,r=fB(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(gB.prototype=Object.create(hB.prototype)).point=function(e,t){hB.prototype.point.call(this,t,e)},xB.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,a){this._context.bezierCurveTo(t,e,n,r,a,s)}},yB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=bB(e),s=bB(t),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],s[0][a],n[1][a],s[1][a],e[o],t[o]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},vB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};const wB=Math.PI,jB=2*wB,NB=1e-6,kB=jB-NB;function _B(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class CB{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?_B:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return _B;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,s,a){this._append`C${+e},${+t},${+r},${+n},${this._x1=+s},${this._y1=+a}`}arcTo(e,t,r,n,s){if(e=+e,t=+t,r=+r,n=+n,(s=+s)<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,i=r-e,l=n-t,c=a-e,d=o-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>NB)if(Math.abs(d*i-l*c)>NB&&s){let f=r-a,p=n-o,m=i*i+l*l,h=f*f+p*p,g=Math.sqrt(m),x=Math.sqrt(u),y=s*Math.tan((wB-Math.acos((m+u-h)/(2*g*x)))/2),b=y/x,v=y/g;Math.abs(b-1)>NB&&this._append`L${e+b*c},${t+b*d}`,this._append`A${s},${s},0,0,${+(d*f>c*p)},${this._x1=e+v*i},${this._y1=t+v*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,r,n,s,a){if(e=+e,t=+t,a=!!a,(r=+r)<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(n),i=r*Math.sin(n),l=e+o,c=t+i,d=1^a,u=a?n-s:s-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>NB||Math.abs(this._y1-c)>NB)&&this._append`L${l},${c}`,r&&(u<0&&(u=u%jB+jB),u>kB?this._append`A${r},${r},0,1,${d},${e-o},${t-i}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:u>NB&&this._append`A${r},${r},0,${+(u>=wB)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function SB(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new CB(t)}function EB(e){return e[0]}function OB(e){return e[1]}function MB(e,t){var r=aC(!0),n=null,s=dB,a=null,o=SB(i);function i(i){var l,c,d,u=(i=sC(i)).length,f=!1;for(null==n&&(a=s(d=o())),l=0;l<=u;++l)!(l<u&&r(c=i[l],l,i))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(c,l,i),+t(c,l,i));if(d)return a=null,d+""||null}return e="function"==typeof e?e:void 0===e?EB:aC(e),t="function"==typeof t?t:void 0===t?OB:aC(t),i.x=function(t){return arguments.length?(e="function"==typeof t?t:aC(+t),i):e},i.y=function(e){return arguments.length?(t="function"==typeof e?e:aC(+e),i):t},i.defined=function(e){return arguments.length?(r="function"==typeof e?e:aC(!!e),i):r},i.curve=function(e){return arguments.length?(s=e,null!=n&&(a=s(n)),i):s},i.context=function(e){return arguments.length?(null==e?n=a=null:a=s(n=e),i):n},i}function TB(e,t,r){var n=null,s=aC(!0),a=null,o=dB,i=null,l=SB(c);function c(c){var d,u,f,p,m,h=(c=sC(c)).length,g=!1,x=new Array(h),y=new Array(h);for(null==a&&(i=o(m=l())),d=0;d<=h;++d){if(!(d<h&&s(p=c[d],d,c))===g)if(g=!g)u=d,i.areaStart(),i.lineStart();else{for(i.lineEnd(),i.lineStart(),f=d-1;f>=u;--f)i.point(x[f],y[f]);i.lineEnd(),i.areaEnd()}g&&(x[d]=+e(p,d,c),y[d]=+t(p,d,c),i.point(n?+n(p,d,c):x[d],r?+r(p,d,c):y[d]))}if(m)return i=null,m+""||null}function d(){return MB().defined(s).curve(o).context(a)}return e="function"==typeof e?e:void 0===e?EB:aC(+e),t="function"==typeof t?t:aC(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?OB:aC(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:aC(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:aC(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:aC(+e),c):n},c.y=function(e){return arguments.length?(t="function"==typeof e?e:aC(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:aC(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:aC(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(s="function"==typeof e?e:aC(!!e),c):s},c.curve=function(e){return arguments.length?(o=e,null!=a&&(i=o(a)),c):o},c.context=function(e){return arguments.length?(null==e?a=i=null:i=o(a=e),c):a},c}function PB(){return PB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},PB.apply(null,arguments)}function AB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function qB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?AB(Object(r),!0).forEach(function(t){zB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zB(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DB={curveBasisClosed:function(e){return new aB(e)},curveBasisOpen:function(e){return new oB(e)},curveBasis:function(e){return new sB(e)},curveBumpX:function(e){return new iB(e,!0)},curveBumpY:function(e){return new iB(e,!1)},curveLinearClosed:function(e){return new lB(e)},curveLinear:dB,curveMonotoneX:function(e){return new hB(e)},curveMonotoneY:function(e){return new gB(e)},curveNatural:function(e){return new yB(e)},curveStep:function(e){return new vB(e,.5)},curveStepAfter:function(e){return new vB(e,1)},curveStepBefore:function(e){return new vB(e,0)}},LB=e=>qw(e.x)&&qw(e.y),IB=e=>null!=e.base&&LB(e.base)&&LB(e),RB=e=>e.x,$B=e=>e.y,FB=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if(!(r&&r.length||n))return null;var o=r&&r.length?(e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:a=!1}=e,o=((e,t)=>{if("function"==typeof e)return e;var r="curve".concat(kw(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?DB[r]||dB:DB["".concat(r).concat("vertical"===t?"Y":"X")]})(t,s),i=a?r.filter(LB):r;if(Array.isArray(n)){var l=r.map((e,t)=>qB(qB({},e),{},{base:n[t]}));return("vertical"===s?TB().y($B).x1(RB).x0(e=>e.base.x):TB().x(RB).y1($B).y0(e=>e.base.y)).defined(IB).curve(o)(a?l.filter(IB):l)}return("vertical"===s&&hw(n)?TB().y($B).x1(RB).x0(n):hw(n)?TB().x(RB).y1($B).y0(n):MB().x(RB).y($B)).defined(LB).curve(o)(i)})(e):n;return a.createElement("path",PB({},MI(e),$$(e),{className:ar("recharts-curve",t),d:null===o?void 0:o,ref:s}))},BB=["x","y","top","left","width","height","className"];function UB(){return UB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UB.apply(null,arguments)}function HB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function WB(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QB=(e,t,r,n,s,a)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(a,",").concat(t,"h").concat(r),VB=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:o=0,height:i=0,className:l}=e,c=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,BB),d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HB(Object(r),!0).forEach(function(t){WB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:t,y:r,top:n,left:s,width:o,height:i},c);return hw(t)&&hw(r)&&hw(o)&&hw(i)&&hw(n)&&hw(s)?a.createElement("path",UB({},PI(d),{className:ar("recharts-cross",l),d:QB(t,r,o,i,n,s)})):null};function KB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YB(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KB(Object(r),!0).forEach(function(t){GB(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function GB(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var XB=(e,t,r)=>e.map(e=>{return"".concat((n=e,n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(r);var n}).join(","),ZB=(e,t)=>Object.keys(t).reduce((r,n)=>YB(YB({},r),{},{[n]:e(n,t[n])}),{});function JB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?JB(Object(r),!0).forEach(function(t){tU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tU(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rU=(e,t,r)=>e+(t-e)*r,nU=e=>{var{from:t,to:r}=e;return t!==r},sU=(e,t,r)=>{var n=ZB((t,r)=>{if(nU(r)){var[n,s]=e(r.from,r.to,r.velocity);return eU(eU({},r),{},{from:n,velocity:s})}return r},t);return r<1?ZB((e,t)=>nU(t)?eU(eU({},t),{},{velocity:rU(t.velocity,n[e].velocity,r),from:rU(t.from,n[e].from,r)}):t,t):sU(e,n,r-1)};const aU=(e,t,r,n,s,a)=>{var o,i,l=(o=e,i=t,[Object.keys(o),Object.keys(i)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==r?()=>(s(eU(eU({},e),t)),()=>{}):!0===r.isStepper?function(e,t,r,n,s,a){var o,i=n.reduce((r,n)=>eU(eU({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),l=null,c=n=>{o||(o=n);var d=(n-o)/r.dt;i=sU(r,i,d),s(eU(eU(eU({},e),t),ZB((e,t)=>t.from,i))),o=n,Object.values(i).filter(nU).length&&(l=a.setTimeout(c))};return()=>(l=a.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,r,l,s,a):function(e,t,r,n,s,a,o){var i,l=null,c=s.reduce((r,n)=>eU(eU({},r),{},{[n]:[e[n],t[n]]}),{}),d=s=>{i||(i=s);var u=(s-i)/n,f=ZB((e,t)=>rU(...t,r(u)),c);if(a(eU(eU(eU({},e),t),f)),u<1)l=o.setTimeout(d);else{var p=ZB((e,t)=>rU(...t,r(1)),c);a(eU(eU(eU({},e),t),p))}};return()=>(l=o.setTimeout(d),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,r,n,l,s,a)};var oU=1e-4,iU=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],lU=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),cU=(e,t)=>r=>{var n=iU(e,t);return lU(n,r)},dU=function(){return((e,t,r,n)=>{var s,a,o=cU(e,r),i=cU(t,n),l=(s=e,a=r,e=>{var t=[...iU(s,a).map((e,t)=>e*t).slice(1),0];return lU(t,e)}),c=e=>e>1?1:e<0?0:e,d=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var s=o(r)-t,a=l(r);if(Math.abs(s-t)<oU||a<oU)return i(r);r=c(r-s/a)}return i(r)};return d.isStepper=!1,d})(...function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var n,s=t[0].split("(");if("cubic-bezier"===s[0]&&4===(null===(n=s[1])||void 0===n?void 0:n.split(")")[0].split(",").length)){var a=s[1].split(")")[0].split(",").map(e=>parseFloat(e));return[a[0],a[1],a[2],a[3]]}}return 4===t.length?t:[0,0,1,1]}(...arguments))};class uU{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,s=a=>{a-r>=t?e(a):"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(s))};return n=requestAnimationFrame(s),()=>{null!=n&&cancelAnimationFrame(n)}}}function fU(){return e=new uU,t=()=>null,r=!1,n=null,s=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var o=a,[i,...l]=o;return"number"==typeof i?void(n=e.setTimeout(s.bind(null,l),i)):(s(i),void(n=e.setTimeout(s.bind(null,l))))}"string"==typeof a&&t(a),"object"==typeof a&&t(a),"function"==typeof a&&a()}},{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),s(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e};var e,t,r,n,s}var pU=(0,a.createContext)(fU),mU={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},hU={t:0},gU={t:1};function xU(e){var t,r,n,s=CR(e,mU),{isActive:o,canBegin:i,duration:l,easing:c,begin:d,onAnimationEnd:u,onAnimationStart:f,children:p}=s,m="auto"===o?!sI:o,h=(t=s.animationId,r=s.animationManager,n=(0,a.useContext)(pU),(0,a.useMemo)(()=>null!=r?r:n(t),[t,r,n])),[g,x]=(0,a.useState)(m?hU:gU),y=(0,a.useRef)(null);return(0,a.useEffect)(()=>{m||x(gU)},[m]),(0,a.useEffect)(()=>{if(!m||!i)return Cw;var e=aU(hU,gU,(e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return dU(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,s=(e,s,a)=>{var o=a+(-(e-s)*t-a*r)*n/1e3,i=a*n/1e3+e;return Math.abs(i-s)<oU&&Math.abs(o)<oU?[s,0]:[i,o]};return s.isStepper=!0,s.dt=n,s}();default:if("cubic-bezier"===e.split("(")[0])return dU(e)}return"function"==typeof e?e:null})(c),l,x,h.getTimeoutController());return h.start([f,d,()=>{y.current=e()},l,u]),()=>{h.stop(),y.current&&y.current(),u()}},[m,i,l,c,d,f,u,h]),p(g.t)}function yU(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",r=(0,a.useRef)(yw(t)),n=(0,a.useRef)(e);return n.current!==e&&(r.current=yw(t),n.current=e),r.current}var bU=["radius"],vU=["radius"];function wU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wU(Object(r),!0).forEach(function(t){NU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function NU(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kU(){return kU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kU.apply(null,arguments)}function _U(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var CU=(e,t,r,n,s)=>{var a,o=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(o>0&&s instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=s[u]>o?o:s[u];a="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(a+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),a+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(a+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+i*d[1])),a+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(a+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),a+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(a+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-i*d[3])),a+="Z"}else if(o>0&&s===+s&&s>0){var f=Math.min(o,s);a="M ".concat(e,",").concat(t+i*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+l*f,",").concat(t,"\n            L ").concat(e+r-l*f,",").concat(t,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*f,"\n            L ").concat(e+r,",").concat(t+n-i*f,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e+r-l*f,",").concat(t+n,"\n            L ").concat(e+l*f,",").concat(t+n,"\n            A ").concat(f,",").concat(f,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*f," Z")}else a="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return a},SU={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},EU=e=>{var t=CR(e,SU),r=(0,a.useRef)(null),[n,s]=(0,a.useState)(-1);(0,a.useEffect)(()=>{if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&s(e)}catch(e){}},[]);var{x:o,y:i,width:l,height:c,radius:d,className:u}=t,{animationEasing:f,animationDuration:p,animationBegin:m,isAnimationActive:h,isUpdateAnimationActive:g}=t,x=(0,a.useRef)(l),y=(0,a.useRef)(c),b=(0,a.useRef)(o),v=(0,a.useRef)(i),w=yU((0,a.useMemo)(()=>({x:o,y:i,width:l,height:c,radius:d}),[o,i,l,c,d]),"rectangle-");if(o!==+o||i!==+i||l!==+l||c!==+c||0===l||0===c)return null;var j=ar("recharts-rectangle",u);if(!g){var N=PI(t),{radius:k}=N,_=_U(N,bU);return a.createElement("path",kU({},_,{radius:"number"==typeof d?d:void 0,className:j,d:CU(o,i,l,c,d)}))}var C=x.current,S=y.current,E=b.current,O=v.current,M="0px ".concat(-1===n?1:n,"px"),T="".concat(n,"px 0px"),P=XB(["strokeDasharray"],p,"string"==typeof f?f:SU.animationEasing);return a.createElement(xU,{animationId:w,key:w,canBegin:n>0,duration:p,easing:f,isActive:g,begin:m},e=>{var n,s=ww(C,l,e),u=ww(S,c,e),f=ww(E,o,e),p=ww(O,i,e);r.current&&(x.current=s,y.current=u,b.current=f,v.current=p),n=h?e>0?{transition:P,strokeDasharray:T}:{strokeDasharray:M}:{strokeDasharray:T};var m=PI(t),{radius:g}=m,w=_U(m,vU);return a.createElement("path",kU({},w,{radius:"number"==typeof d?d:void 0,className:j,d:CU(f,p,s,u,d),ref:r,style:jU(jU({},n),t.style)}))})};function OU(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:a}=e;return{points:[PP(t,r,n,s),PP(t,r,n,a)],cx:t,cy:r,radius:n,startAngle:s,endAngle:a}}function MU(){return MU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},MU.apply(null,arguments)}var TU=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:a,isExternal:o,cornerRadius:i,cornerIsExternal:l}=e,c=i*(o?1:-1)+n,d=Math.asin(i/c)/MP,u=l?s:s+a*d,f=l?s-a*d:s;return{center:PP(t,r,c,u),circleTangency:PP(t,r,n,u),lineTangency:PP(t,r,c*Math.cos(d*MP),f),theta:d}},PU=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:a,endAngle:o}=e,i=((e,t)=>fw(t-e)*Math.min(Math.abs(t-e),359.999))(a,o),l=a+i,c=PP(t,r,s,a),d=PP(t,r,s,l),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(s,",").concat(s,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(a>l),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(n>0){var f=PP(t,r,n,a),p=PP(t,r,n,l);u+="L ".concat(p.x,",").concat(p.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(a<=l),",\n            ").concat(f.x,",").concat(f.y," Z")}else u+="L ".concat(t,",").concat(r," Z");return u},AU={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},qU=e=>{var t=CR(e,AU),{cx:r,cy:n,innerRadius:s,outerRadius:o,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:f}=t;if(o<s||d===u)return null;var p,m=ar("recharts-sector",f),h=o-s,g=bw(i,h,0,!0);return p=g>0&&Math.abs(d-u)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:i,startAngle:l,endAngle:c}=e,d=fw(c-l),{circleTangency:u,lineTangency:f,theta:p}=TU({cx:t,cy:r,radius:s,angle:l,sign:d,cornerRadius:a,cornerIsExternal:i}),{circleTangency:m,lineTangency:h,theta:g}=TU({cx:t,cy:r,radius:s,angle:c,sign:-d,cornerRadius:a,cornerIsExternal:i}),x=i?Math.abs(l-c):Math.abs(l-c)-p-g;if(x<0)return o?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*a,",0\n        a").concat(a,",").concat(a,",0,0,1,").concat(2*-a,",0\n      "):PU({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:c});var y="M ".concat(f.x,",").concat(f.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(u.x,",").concat(u.y,"\n    A").concat(s,",").concat(s,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n  ");if(n>0){var{circleTangency:b,lineTangency:v,theta:w}=TU({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:a,cornerIsExternal:i}),{circleTangency:j,lineTangency:N,theta:k}=TU({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:a,cornerIsExternal:i}),_=i?Math.abs(l-c):Math.abs(l-c)-w-k;if(_<0&&0===a)return"".concat(y,"L").concat(t,",").concat(r,"Z");y+="L".concat(N.x,",").concat(N.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(_>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,"\n      A").concat(a,",").concat(a,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,"Z")}else y+="L".concat(t,",").concat(r,"Z");return y})({cx:r,cy:n,innerRadius:s,outerRadius:o,cornerRadius:Math.min(g,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):PU({cx:r,cy:n,innerRadius:s,outerRadius:o,startAngle:d,endAngle:u}),a.createElement("path",MU({},PI(t),{className:m,d:p}))};function zU(e,t,r){if("horizontal"===e)return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if("vertical"===e)return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(R$(t)){if("centric"===e){var{cx:n,cy:s,innerRadius:a,outerRadius:o,angle:i}=t,l=PP(n,s,a,i),c=PP(n,s,o,i);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return OU(t)}}function DU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function LU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DU(Object(r),!0).forEach(function(t){IU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function IU(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RU(){return RU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},RU.apply(null,arguments)}function $U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function FU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$U(Object(r),!0).forEach(function(t){BU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function BU(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UU(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return(0,a.isValidElement)(t)?(0,a.cloneElement)(t,n):(0,a.createElement)(r,n)}function HU(e){var t,r,n,s,{coordinate:o,payload:i,index:l,offset:c,tooltipAxisBandSize:d,layout:u,cursor:f,tooltipEventType:p,chartName:m}=e,h=o,g=i,x=l;if(!f||!h||"ScatterChart"!==m&&"axis"!==p)return null;if("ScatterChart"===m)r=h,n=VB,s=zP.cursorLine;else if("BarChart"===m)r=function(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-s:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-s,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(u,h,c,d),n=EU,s=zP.cursorRectangle;else if("radial"===u&&R$(h)){var{cx:y,cy:b,radius:v,startAngle:w,endAngle:j}=OU(h);r={cx:y,cy:b,startAngle:w,endAngle:j,innerRadius:v,outerRadius:v},n=qU,s=zP.cursorLine}else r={points:zU(u,h,c)},n=FB,s=zP.cursorLine;var N="object"==typeof f&&"className"in f?f.className:void 0,k=FU(FU(FU(FU({stroke:"#ccc",pointerEvents:"none"},c),r),TI(f)),{},{payload:g,payloadIndex:x,className:ar("recharts-tooltip-cursor",N)});return a.createElement(k$,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:s},a.createElement(UU,{cursor:f,cursorComp:n,cursorProps:k}))}function WU(e){var t,r,n,s=(t=J_(HA),r=J_(oD),n=J_(nD),NC(t&&n?LU(LU({},t),{},{scale:n}):void 0,r)),o=WC(),i=YC(),l=J_(NP);return null==s||null==o||null==i||null==l?null:a.createElement(HU,RU({},e,{offset:o,layout:i,tooltipAxisBandSize:s,chartName:l}))}function QU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function VU(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?QU(Object(r),!0).forEach(function(t){KU(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KU(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YU(e){return e.dataKey}var GU=[],XU={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!sI,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ZU(e){var t,r,n=CR(e,XU),{active:s,allowEscapeViewBox:o,animationDuration:i,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:f,payloadUniqBy:p,position:m,reverseDirection:h,useTranslate3d:g,wrapperStyle:x,cursor:y,shared:b,trigger:v,defaultIndex:w,portal:j,axisId:N}=n,k=Y_(),_="number"==typeof w?String(w):w;(0,a.useEffect)(()=>{k(x_({shared:b,trigger:v,axisId:N,active:s,defaultIndex:_}))},[k,b,v,N,s,_]);var C=UC(),S=kI(),E=function(e){return J_(t=>fz(t,e))}(b),{activeIndex:O,isActive:M}=null!==(t=J_(e=>zD(e,E,v,_)))&&void 0!==t?t:{},T=J_(e=>qD(e,E,v,_)),P=J_(e=>AD(e,E,v,_)),A=J_(e=>PD(e,E,v,_)),q=T,z=(0,a.useContext)(sR),D=null!==(r=null!=s?s:M)&&void 0!==r&&r,[L,I]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=(0,a.useState)({height:0,left:0,top:0,width:0}),n=(0,a.useCallback)(e=>{if(null!=e){var n=e.getBoundingClientRect(),s={height:n.height,left:n.left,top:n.top,width:n.width};(Math.abs(s.height-t.height)>1||Math.abs(s.left-t.left)>1||Math.abs(s.top-t.top)>1||Math.abs(s.width-t.width)>1)&&r({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}([q,D]),R="axis"===E?P:void 0;!function(e,t,r,n,s,o){var i=J_(r=>((e,t,r)=>{if(null!=t){var n=jz(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(r,e,t)),l=J_(CP),c=J_(kP),d=J_(_P),u=J_(ZI),f=null==u?void 0:u.active,p=UC();(0,a.useEffect)(()=>{if(!f&&null!=c&&null!=l){var e=k_({active:o,coordinate:r,dataKey:i,index:s,label:"number"==typeof n?String(n):n,sourceViewBox:p});YI.emit(GI,c,e,l)}},[f,r,i,s,n,l,c,d,o,p])}(E,v,A,R,O,D);var $=null!=j?j:z;if(null==$||null==C||null==E)return null;var F=null!=q?q:GU;D||(F=GU),d&&F.length&&(F=function(e,t,r){return!0===t?tB()(e,r):"function"==typeof t?tB()(e,t):e}(F.filter(e=>null!=e.value&&(!0!==e.hide||n.includeHidden)),p,YU));var B=F.length>0,U=a.createElement(JF,{allowEscapeViewBox:o,animationDuration:i,animationEasing:l,isAnimationActive:u,active:D,coordinate:A,hasPayload:B,offset:f,position:m,reverseDirection:h,useTranslate3d:g,viewBox:C,wrapperStyle:x,lastBoundingBox:L,innerRef:I,hasPortalFromProps:Boolean(j)},function(e,t){return a.isValidElement(e)?a.cloneElement(e,t):"function"==typeof e?a.createElement(e,t):a.createElement(WF,t)}(c,VU(VU({},n),{},{payload:F,label:R,active:D,activeIndex:O,coordinate:A,accessibilityLayer:S})));return a.createElement(a.Fragment,null,(0,ga.createPortal)(U,$),D&&a.createElement(WU,{cursor:y,tooltipEventType:E,coordinate:A,payload:F,index:O}))}var JU=o(25),eH=o.n(JU),tH=["valueAccessor"],rH=["dataKey","clockWise","id","textBreakAll","zIndex"];function nH(){return nH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nH.apply(null,arguments)}function sH(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var aH=e=>Array.isArray(e.value)?eH()(e.value):e.value,oH=(0,a.createContext)(void 0),iH=oH.Provider,lH=(0,a.createContext)(void 0);function cH(e){var{valueAccessor:t=aH}=e,r=sH(e,tH),{dataKey:n,clockWise:s,id:o,textBreakAll:i,zIndex:l}=r,c=sH(r,rH),d=(0,a.useContext)(oH),u=(0,a.useContext)(lH),f=d||u;return f&&f.length?a.createElement(k$,{zIndex:null!=l?l:zP.label},a.createElement(ZR,{className:"recharts-label-list"},f.map((e,s)=>{var l,d=Nw(n)?t(e,s):pC(e&&e.payload,n),u=Nw(o)?{}:{id:"".concat(o,"-").concat(s)};return a.createElement(L$,nH({key:"label-".concat(s)},PI(e),c,u,{fill:null!==(l=r.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:d,textBreakAll:i,viewBox:e.viewBox,index:s,zIndex:0}))}))):null}function dH(e){var{label:t}=e;return t?!0===t?a.createElement(cH,{key:"labelList-implicit"}):a.isValidElement(t)||q$(t)?a.createElement(cH,{key:"labelList-implicit",content:t}):"object"==typeof t?a.createElement(cH,nH({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function uH(){return uH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uH.apply(null,arguments)}lH.Provider,cH.displayName="LabelList";var fH=e=>{var{cx:t,cy:r,r:n,className:s}=e,o=ar("recharts-dot",s);return hw(t)&&hw(r)&&hw(n)?a.createElement("circle",uH({},MI(e),$$(e),{className:o,cx:t,cy:r,r:n})):null};o(4363);var pH=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),mH=["points"];function hH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hH(Object(r),!0).forEach(function(t){xH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xH(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yH(){return yH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yH.apply(null,arguments)}function bH(e){var{option:t,dotProps:r,className:n}=e;if((0,a.isValidElement)(t))return(0,a.cloneElement)(t,r);if("function"==typeof t)return t(r);var s=ar(n,"boolean"!=typeof t?t.className:""),o=null!=r?r:{},{points:i}=o,l=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(o,mH);return a.createElement(fH,yH({},l,{className:s}))}function vH(e){var{points:t,dot:r,className:n,dotClassName:s,dataKey:o,baseProps:i,needClip:l,clipPathId:c,zIndex:d=zP.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,r))return null;var u,f=pH(r),p=null==(u=r)?null:(0,a.isValidElement)(u)?PI(u.props):"object"!=typeof u||Array.isArray(u)?null:PI(u),m=t.map((e,n)=>{var l,c,d=gH(gH(gH({r:3},i),p),{},{index:n,cx:null!==(l=e.x)&&void 0!==l?l:void 0,cy:null!==(c=e.y)&&void 0!==c?c:void 0,dataKey:o,value:e.value,payload:e.payload,points:t});return a.createElement(bH,{key:"dot-".concat(n),option:r,dotProps:d,className:s})}),h={};return l&&null!=c&&(h.clipPath="url(#clipPath-".concat(f?"":"dots-").concat(c,")")),a.createElement(k$,{zIndex:d},a.createElement(ZR,yH({className:n},h),m))}function wH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wH(Object(r),!0).forEach(function(t){NH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function NH(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kH=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:o,clipPath:i}=e;if(!1===s||null==t.x||null==t.y)return null;var l,c=jH(jH(jH({},{index:r,dataKey:o,cx:t.x,cy:t.y,r:4,fill:null!=n?n:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),TI(s)),$$(s));return l=(0,a.isValidElement)(s)?(0,a.cloneElement)(s,c):"function"==typeof s?s(c):a.createElement(fH,c),a.createElement(ZR,{className:"recharts-active-dot",clipPath:i},l)};function _H(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s,clipPath:o,zIndex:i=zP.activeDot}=e,l=J_(uD),c=J_(bD);if(null==t||null==c)return null;var d=t.find(e=>c.includes(e.payload));return Nw(d)?null:a.createElement(k$,{zIndex:i},a.createElement(kH,{point:d,childIndex:Number(l),mainColor:r,dataKey:s,activeDot:n,clipPath:o}))}function CH(e){var{tooltipEntrySettings:t}=e,r=Y_(),n=RC(),s=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{n||(null===s.current?r(m_(t)):s.current!==t&&r(h_({prev:s.current,next:t})),s.current=t)},[t,r,n]),(0,a.useLayoutEffect)(()=>()=>{s.current&&(r(g_(s.current)),s.current=null)},[r]),null}var SH=["children"],EH={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},OH=(0,a.createContext)(EH);function MH(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,SH);return a.createElement(OH.Provider,{value:r},t)}function TH(e,t){var r,n,s=J_(t=>xA(t,e)),a=J_(e=>vA(e,t)),o=null!==(r=null==s?void 0:s.allowDataOverflow)&&void 0!==r?r:hA.allowDataOverflow,i=null!==(n=null==a?void 0:a.allowDataOverflow)&&void 0!==n?n:yA.allowDataOverflow;return{needClip:o||i,needClipX:o,needClipY:i}}function PH(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=bR(),{needClipX:o,needClipY:i,needClip:l}=TH(t,r);if(!l||!s)return null;var{x:c,y:d,width:u,height:f}=s;return a.createElement("clipPath",{id:"clipPath-".concat(n)},a.createElement("rect",{x:o?c:c-u/2,y:i?d:d-f/2,width:o?u:2*u,height:i?f:2*f}))}var AH=(e,t,r,n)=>oz(e,"xAxis",t,n),qH=(e,t,r,n)=>az(e,"xAxis",t,n),zH=(e,t,r,n)=>oz(e,"yAxis",r,n),DH=(e,t,r,n)=>az(e,"yAxis",r,n),LH=H_([KC,AH,zH,qH,DH],(e,t,r,n,s)=>mC(e,"xAxis")?NC(t,n,!1):NC(r,s,!1));function IH(e){return"line"===e.type}var RH=H_([SA,(e,t,r,n,s)=>s],(e,t)=>e.filter(IH).find(e=>e.id===t)),$H=H_([KC,AH,zH,qH,DH,RH,LH,tP],(e,t,r,n,s,a,o,i)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:d}=i;if(null!=a&&null!=t&&null!=r&&null!=n&&null!=s&&0!==n.length&&0!==s.length&&null!=o&&("horizontal"===e||"vertical"===e)){var u,{dataKey:f,data:p}=a;if(null!=(u=null!=p&&p.length>0?p:null==l?void 0:l.slice(c,d+1)))return function(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataKey:o,bandSize:i,displayedData:l}=e;return l.map((e,l)=>{var c=pC(e,o);if("horizontal"===t)return{x:vC({axis:r,ticks:s,bandSize:i,entry:e,index:l}),y:Nw(c)?null:n.scale(c),value:c,payload:e};var d=Nw(c)?null:r.scale(c),u=vC({axis:n,ticks:a,bandSize:i,entry:e,index:l});return null==d||null==u?null:{x:d,y:u,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:f,bandSize:o,displayedData:u})}});function FH(e){var{legendPayload:t}=e,r=Y_(),n=RC(),s=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{n||(null===s.current?r(CL(t)):s.current!==t&&r(SL({prev:s.current,next:t})),s.current=t)},[r,n,t]),(0,a.useLayoutEffect)(()=>()=>{s.current&&(r(EL(s.current)),s.current=null)},[r]),null}var BH=(0,a.createContext)(void 0),UH=e=>{var{id:t,type:r,children:n}=e,s=II("recharts-".concat(r),t);return a.createElement(BH.Provider,{value:s},n(s))},HH=e=>{var t=Y_(),r=(0,a.useRef)(null);return(0,a.useLayoutEffect)(()=>{null===r.current?t(aL(e)):r.current!==e&&t(oL({prev:r.current,next:e})),r.current=e},[t,e]),(0,a.useLayoutEffect)(()=>()=>{r.current&&(t(iL(r.current)),r.current=null)},[t]),null},WH=(0,a.memo)(HH),QH=o(2938),VH=o.n(QH);function KH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KH(Object(r),!0).forEach(function(t){GH(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function GH(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XH(){return XH=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},XH.apply(null,arguments)}var ZH=(e,t,r,n,s)=>{var a,o=r-n;return a="M ".concat(e,",").concat(t),a+="L ".concat(e+r,",").concat(t),a+="L ".concat(e+r-o/2,",").concat(t+s),(a+="L ".concat(e+r-o/2-n,",").concat(t+s))+"L ".concat(e,",").concat(t," Z")},JH={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},eW=e=>{var t=CR(e,JH),{x:r,y:n,upperWidth:s,lowerWidth:o,height:i,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:f}=t,p=(0,a.useRef)(null),[m,h]=(0,a.useState)(-1),g=(0,a.useRef)(s),x=(0,a.useRef)(o),y=(0,a.useRef)(i),b=(0,a.useRef)(r),v=(0,a.useRef)(n),w=yU(e,"trapezoid-");if((0,a.useEffect)(()=>{if(p.current&&p.current.getTotalLength)try{var e=p.current.getTotalLength();e&&h(e)}catch(e){}},[]),r!==+r||n!==+n||s!==+s||o!==+o||i!==+i||0===s&&0===o||0===i)return null;var j=ar("recharts-trapezoid",l);if(!f)return a.createElement("g",null,a.createElement("path",XH({},PI(t),{className:j,d:ZH(r,n,s,o,i)})));var N=g.current,k=x.current,_=y.current,C=b.current,S=v.current,E="0px ".concat(-1===m?1:m,"px"),O="".concat(m,"px 0px"),M=XB(["strokeDasharray"],d,c);return a.createElement(xU,{animationId:w,key:w,canBegin:m>0,duration:d,easing:c,isActive:f,begin:u},e=>{var l=ww(N,s,e),c=ww(k,o,e),d=ww(_,i,e),u=ww(C,r,e),f=ww(S,n,e);p.current&&(g.current=l,x.current=c,y.current=d,b.current=u,v.current=f);var m=e>0?{transition:M,strokeDasharray:O}:{strokeDasharray:E};return a.createElement("path",XH({},PI(t),{className:j,d:ZH(u,f,l,c,d),ref:p,style:YH(YH({},m),t.style)}))})};Math.abs,Math.atan2;const tW=Math.cos,rW=(Math.max,Math.min,Math.sin),nW=Math.sqrt,sW=Math.PI,aW=2*sW,oW={draw(e,t){const r=nW(t/sW);e.moveTo(r,0),e.arc(0,0,r,0,aW)}},iW={draw(e,t){const r=nW(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},lW=nW(1/3),cW=2*lW,dW={draw(e,t){const r=nW(t/cW),n=r*lW;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},uW={draw(e,t){const r=nW(t),n=-r/2;e.rect(n,n,r,r)}},fW=rW(sW/10)/rW(7*sW/10),pW=rW(aW/10)*fW,mW=-tW(aW/10)*fW,hW={draw(e,t){const r=nW(.8908130915292852*t),n=pW*r,s=mW*r;e.moveTo(0,-r),e.lineTo(n,s);for(let t=1;t<5;++t){const a=aW*t/5,o=tW(a),i=rW(a);e.lineTo(i*r,-o*r),e.lineTo(o*n-i*s,i*n+o*s)}e.closePath()}},gW=nW(3),xW={draw(e,t){const r=-nW(t/(3*gW));e.moveTo(0,2*r),e.lineTo(-gW*r,-r),e.lineTo(gW*r,-r),e.closePath()}},yW=-.5,bW=nW(3)/2,vW=1/nW(12),wW=3*(vW/2+1),jW={draw(e,t){const r=nW(t/wW),n=r/2,s=r*vW,a=n,o=r*vW+r,i=-a,l=o;e.moveTo(n,s),e.lineTo(a,o),e.lineTo(i,l),e.lineTo(yW*n-bW*s,bW*n+yW*s),e.lineTo(yW*a-bW*o,bW*a+yW*o),e.lineTo(yW*i-bW*l,bW*i+yW*l),e.lineTo(yW*n+bW*s,yW*s-bW*n),e.lineTo(yW*a+bW*o,yW*o-bW*a),e.lineTo(yW*i+bW*l,yW*l-bW*i),e.closePath()}};nW(3),nW(3);var NW=["type","size","sizeType"];function kW(){return kW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kW.apply(null,arguments)}function _W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function CW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_W(Object(r),!0).forEach(function(t){SW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_W(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function SW(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var EW={symbolCircle:oW,symbolCross:iW,symbolDiamond:dW,symbolSquare:uW,symbolStar:hW,symbolTriangle:xW,symbolWye:jW},OW=Math.PI/180,MW=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,NW),o=CW(CW({},s),{},{type:t,size:r,sizeType:n}),i="circle";"string"==typeof t&&(i=t);var{className:l,cx:c,cy:d}=o,u=PI(o);return hw(c)&&hw(d)&&hw(r)?a.createElement("path",kW({},u,{className:ar("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:(()=>{var e=(e=>{var t="symbol".concat(kw(e));return EW[t]||oW})(i),t=function(e,t){let r=null,n=SB(s);function s(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return e="function"==typeof e?e:aC(e||oW),t="function"==typeof t?t:aC(void 0===t?64:+t),s.type=function(t){return arguments.length?(e="function"==typeof t?t:aC(t),s):e},s.size=function(e){return arguments.length?(t="function"==typeof e?e:aC(+e),s):t},s.context=function(e){return arguments.length?(r=null==e?null:e,s):r},s}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*OW;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(r,n,i)),s=t();if(null!==s)return s})()})):null};MW.registerSymbol=(e,t)=>{EW["symbol".concat(kw(e))]=t};var TW=["option","shapeType","propTransformer","activeClassName"];function PW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function AW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PW(Object(r),!0).forEach(function(t){qW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qW(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zW(e,t){return AW(AW({},t),e)}function DW(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return a.createElement(EU,r);case"trapezoid":return a.createElement(eW,r);case"sector":return a.createElement(qU,r);case"symbols":if(function(e){return"symbols"===e}(t))return a.createElement(MW,r);break;case"curve":return a.createElement(FB,r);default:return null}}function LW(e){var t,{option:r,shapeType:n,propTransformer:s=zW,activeClassName:o="recharts-active-shape"}=e,i=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,TW);if((0,a.isValidElement)(r))t=(0,a.cloneElement)(r,AW(AW({},i),function(e){return(0,a.isValidElement)(e)?e.props:e}(r)));else if("function"==typeof r)t=r(i);else if(VH()(r)&&"boolean"!=typeof r){var l=s(r,i);t=a.createElement(DW,{shapeType:n,elementProps:l})}else{var c=i;t=a.createElement(DW,{shapeType:n,elementProps:c})}return i.isActive?a.createElement(ZR,{className:o},t):t}var IW=["id"],RW=["type","layout","connectNulls","needClip","shape"],$W=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function FW(){return FW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FW.apply(null,arguments)}function BW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function UW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BW(Object(r),!0).forEach(function(t){HW(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function HW(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WW(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var QW=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:a}=e;return[{inactive:a,dataKey:t,type:s,color:n,value:_C(r,t),payload:e}]},VW=a.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:o,name:i,hide:l,unit:c,tooltipType:d}=e,u={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:o,dataKey:t,nameKey:void 0,name:_C(i,t),hide:l,type:d,color:n,unit:c}};return a.createElement(CH,{tooltipEntrySettings:u})}),KW=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function YW(e,t){for(var r=e.length%2!=0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}function GW(e){var{clipPathId:t,points:r,props:n}=e,{dot:s,dataKey:o,needClip:i}=n,{id:l}=n,c=MI(WW(n,IW));return a.createElement(vH,{points:r,dot:s,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:c,needClip:i,clipPathId:t})}function XW(e){var{showLabels:t,children:r,points:n}=e,s=(0,a.useMemo)(()=>null==n?void 0:n.map(e=>{var t,r,n={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return UW(UW({},n),{},{value:e.value,payload:e.payload,viewBox:n,parentViewBox:void 0,fill:void 0})}),[n]);return a.createElement(iH,{value:t?s:void 0},r)}function ZW(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:s,props:o}=e,{type:i,layout:l,connectNulls:c,needClip:d,shape:u}=o,f=UW(UW({},PI(WW(o,RW))),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:n,type:i,layout:l,connectNulls:c,strokeDasharray:null!=s?s:o.strokeDasharray});return a.createElement(a.Fragment,null,(null==n?void 0:n.length)>1&&a.createElement(LW,FW({shapeType:"curve",option:u},f,{pathRef:r})),a.createElement(GW,{points:n,clipPathId:t,props:o}))}function JW(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:s,longestAnimatedLengthRef:o}=e,{points:i,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:f,animateNewValues:p,width:m,height:h,onAnimationEnd:g,onAnimationStart:x}=r,y=s.current,b=yU(i,"recharts-line-"),v=(0,a.useRef)(b),[w,j]=(0,a.useState)(!1),N=!w,k=(0,a.useCallback)(()=>{"function"==typeof g&&g(),j(!1)},[g]),_=(0,a.useCallback)(()=>{"function"==typeof x&&x(),j(!0)},[x]),C=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(n.current),S=(0,a.useRef)(0);v.current!==b&&(S.current=o.current,v.current=b);var E=S.current;return a.createElement(XW,{points:i,showLabels:N},r.children,a.createElement(xU,{animationId:b,begin:d,duration:u,isActive:c,easing:f,onAnimationEnd:k,onAnimationStart:_,key:b},e=>{var d,u=ww(E,C+E,e),f=Math.min(u,C);if(c)if(l){var g="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));d=((e,t,r)=>{var n=r.reduce((e,t)=>e+t);if(!n)return KW(t,e);for(var s=Math.floor(e/n),a=e%n,o=t-e,i=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>a){i=[...r.slice(0,l),a-c];break}var d=i.length%2==0?[0,o]:[o];return[...YW(r,s),...i,...d].map(e=>"".concat(e,"px")).join(", ")})(f,C,g)}else d=KW(C,f);else d=null==l?void 0:String(l);if(e>0&&C>0&&(s.current=i,o.current=Math.max(o.current,f)),y){var x=y.length/i.length,b=1===e?i:i.map((t,r)=>{var n=Math.floor(r*x);if(y[n]){var s=y[n];return UW(UW({},t),{},{x:ww(s.x,t.x,e),y:ww(s.y,t.y,e)})}return UW(UW({},t),{},p?{x:ww(2*m,t.x,e),y:ww(h/2,t.y,e)}:{x:t.x,y:t.y})});return s.current=b,a.createElement(ZW,{props:r,points:b,clipPathId:t,pathRef:n,strokeDasharray:d})}return a.createElement(ZW,{props:r,points:i,clipPathId:t,pathRef:n,strokeDasharray:d})}),a.createElement(dH,{label:r.label}))}function eQ(e){var{clipPathId:t,props:r}=e,n=(0,a.useRef)(null),s=(0,a.useRef)(0),o=(0,a.useRef)(null);return a.createElement(JW,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:s,pathRef:o})}var tQ=(e,t)=>{var r,n;return{x:null!==(r=e.x)&&void 0!==r?r:void 0,y:null!==(n=e.y)&&void 0!==n?n:void 0,value:e.value,errorVal:pC(e.payload,t)}};class rQ extends a.Component{render(){var{hide:e,dot:t,points:r,className:n,xAxisId:s,yAxisId:o,top:i,left:l,width:c,height:d,id:u,needClip:f,zIndex:p}=this.props;if(e)return null;var m=ar("recharts-line",n),h=u,{r:g,strokeWidth:x}=function(e){var t=TI(e);if(null!=t){var{r,strokeWidth:n}=t,s=Number(r),a=Number(n);return(Number.isNaN(s)||s<0)&&(s=3),(Number.isNaN(a)||a<0)&&(a=2),{r:s,strokeWidth:a}}return{r:3,strokeWidth:2}}(t),y=pH(t),b=2*g+x,v=f?"url(#clipPath-".concat(y?"":"dots-").concat(h,")"):void 0;return a.createElement(k$,{zIndex:p},a.createElement(ZR,{className:m},f&&a.createElement("defs",null,a.createElement(PH,{clipPathId:h,xAxisId:s,yAxisId:o}),!y&&a.createElement("clipPath",{id:"clipPath-dots-".concat(h)},a.createElement("rect",{x:l-b/2,y:i-b/2,width:c+b,height:d+b}))),a.createElement(MH,{xAxisId:s,yAxisId:o,data:r,dataPointFormatter:tQ,errorBarOffset:0},a.createElement(eQ,{props:this.props,clipPathId:h}))),a.createElement(_H,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:v}))}}var nQ={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:zP.line,type:"linear"};function sQ(e){var t=CR(e,nQ),{activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:o,animationEasing:i,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:f,legendType:p,xAxisId:m,yAxisId:h,id:g}=t,x=WW(t,$W),{needClip:y}=TH(m,h),b=bR(),v=YC(),w=RC(),j=J_(e=>$H(e,m,h,w,g));if("horizontal"!==v&&"vertical"!==v||null==j||null==b)return null;var{height:N,width:k,x:_,y:C}=b;return a.createElement(rQ,FW({},x,{id:g,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:s,animationDuration:o,animationEasing:i,isAnimationActive:u,hide:d,label:f,legendType:p,xAxisId:m,yAxisId:h,points:j,layout:v,height:N,width:k,left:_,top:C,needClip:y}))}function aQ(e){var t=CR(e,nQ),r=RC();return a.createElement(UH,{id:t.id,type:"line"},e=>a.createElement(a.Fragment,null,a.createElement(FH,{legendPayload:QW(t)}),a.createElement(VW,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),a.createElement(WH,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),a.createElement(sQ,FW({},t,{id:e}))))}var oQ=a.memo(aQ,vI);oQ.displayName="Line";const iQ=()=>{const e=(0,Fr.getApiConfig)();return e.endpoints?.custom_api||`${e.api_url}/quiz-extended/v1`},lQ=async(e,t=null)=>{let r=`${iQ()}/user-stats/questions?course_id=${e}`;t&&(r+=`&lesson_id=${t}`);const{data:n}=await(0,gn.qb)(r);return n},cQ=async e=>{const t=iQ(),{data:r}=await(0,gn.qb)(`${t}/user-stats/performance-by-lesson?course_id=${e}`);return r},dQ=async e=>{const t=iQ(),{data:r}=await(0,gn.qb)(`${t}/user-stats/weak-spots?course_id=${e}`);return r},uQ=async e=>{const t=iQ(),{data:r}=await(0,gn.qb)(`${t}/user-stats/difficulty-matrix?course_id=${e}`);return r},fQ=({courseId:e,lessonId:t=null,compact:r=!1,isDarkMode:n,pageColors:s})=>{const{t:o}=k(),{getColor:i,isDarkMode:l}=Yr(),{formatScore:c,isPercentage:d}=gd(),u=null!=n?n:l,f=s||{text:u?"#f9fafb":"#1a202c",textMuted:u?"#9ca3af":"#6b7280",background:u?"#1f2937":"#ffffff",border:u?"#374151":"#e5e7eb",cardBg:u?"#1f2937":"#ffffff"},[p,m]=(0,a.useState)("week"),[h,g]=(0,a.useState)([]),[x,y]=(0,a.useState)(!0),[b,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(e){y(!0),v(null);try{console.log(` Fetching evolution for course ${e}, lesson ${t}, period: ${p}`);const r=await(async(e,t="week",r=null)=>{let n=`${iQ()}/user-stats/score-evolution?course_id=${e}&period=${t}`;r&&(n+=`&lesson_id=${r}`);const{data:s}=await(0,gn.qb)(n);return s})(e,p,t);console.log(" Evolution API Response:",r);const n=(r.data||[]).map(e=>({date:new Date(e.date).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"}),fullDate:e.date,score:e.score,attempts:e.attempts}));g(n)}catch(e){console.error("Error fetching score evolution:",e),v(e.message)}finally{y(!1)}}})()},[e,p,t]);const w=(0,a.useMemo)(()=>{if(h.length<2)return null;const e=h[0].score,t=h[h.length-1].score-e;return Math.abs(t)<.1?"stable":t>0?"up":"down"},[h]),j=({active:e,payload:t})=>{if(e&&t&&t.length){const e=t[0].payload;return(0,Qr.jsxs)("div",{className:"rounded-lg shadow-lg p-3 border",style:{backgroundColor:i("background","#ffffff"),borderColor:i("primary","#3b82f6")},children:[(0,Qr.jsx)("p",{className:"text-sm font-medium mb-1",style:{color:i("primary","#1a202c")},children:e.fullDate}),(0,Qr.jsxs)("p",{className:"text-lg font-bold",style:{color:i("primary","#3b82f6")},children:[o("statistics.score"),": ",c(e.score)]}),(0,Qr.jsxs)("p",{className:"text-xs",style:{color:`${i("primary","#1a202c")}80`},children:[e.attempts," ",1===e.attempts?o("statistics.attempt"):o("statistics.attempts")]})]})}return null};return x?(0,Qr.jsx)("div",{className:"rounded-lg border "+(r?"p-3":"shadow-sm p-6"),style:{backgroundColor:f.cardBg,borderColor:f.border},children:(0,Qr.jsx)("div",{className:"flex items-center justify-center "+(r?"h-48":"h-64"),children:(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2",style:{borderColor:i("primary","#3b82f6")}})})}):b?(0,Qr.jsx)("div",{className:"rounded-lg border "+(r?"p-3":"shadow-sm p-6"),style:{backgroundColor:f.cardBg,borderColor:f.border},children:(0,Qr.jsx)("p",{className:"text-red-500 text-center text-xs",children:o("statistics.chart.error")})}):0===h.length?(0,Qr.jsxs)("div",{className:"rounded-lg border "+(r?"p-3":"shadow-sm p-6"),style:{backgroundColor:f.cardBg,borderColor:f.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Qr.jsx)(tl,{size:r?16:24,style:{color:f.text}}),(0,Qr.jsx)("h3",{className:"font-bold "+(r?"text-sm":"text-xl"),style:{color:f.text},children:o("statistics.chart.title")})]}),(0,Qr.jsx)("p",{className:"text-center "+(r?"py-4 text-xs":"py-8"),style:{color:f.textMuted},children:o("statistics.chart.noData")})]}):(0,Qr.jsxs)("div",{className:"rounded-lg border "+(r?"p-3":"shadow-sm p-4 sm:p-6"),style:{backgroundColor:f.cardBg,borderColor:f.border},children:[(0,Qr.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between "+(r?"gap-2 mb-3":"gap-4 mb-6"),children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(tl,{size:r?14:24,style:{color:f.text}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h3",{className:"font-bold "+(r?"text-xs":"text-lg sm:text-xl"),style:{color:f.text},children:o("statistics.chart.title")}),w&&!r&&(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(()=>{switch(w){case"up":return(0,Qr.jsx)(kc,{size:18,className:"text-green-500"});case"down":return(0,Qr.jsx)(qd,{size:18,className:"text-red-500"});case"stable":return(0,Qr.jsx)(uc,{size:18,className:"text-yellow-500"});default:return null}})(),(0,Qr.jsx)("span",{className:"text-xs sm:text-sm",style:{color:f.textMuted},children:(()=>{if(!w||h.length<2)return"";const e=h[0].score,t=h[h.length-1].score,r=Math.abs(t-e);switch(w){case"up":return o("statistics.chart.trendUp",{diff:c(r)});case"down":return o("statistics.chart.trendDown",{diff:c(r)});case"stable":return o("statistics.chart.trendStable");default:return""}})()})]})]})]}),(0,Qr.jsx)("div",{className:"flex "+(r?"gap-1":"gap-2"),children:["week","month","all"].map(e=>(0,Qr.jsx)("button",{onClick:()=>m(e),className:`${r?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"} rounded-lg font-medium transition-all ${p===e?"shadow-sm":"opacity-60 hover:opacity-100"}`,style:{backgroundColor:p===e?i("primary","#3b82f6"):"transparent",color:p===e?"#ffffff":f.text,border:p===e?"none":`1px solid ${f.border}`},children:o(`statistics.chart.period.${e}`)},e))})]}),(0,Qr.jsx)(Hw,{width:"100%",height:r?180:300,children:(0,Qr.jsxs)(TR,{data:h,margin:{top:5,right:r?10:20,left:0,bottom:5},children:[(0,Qr.jsx)(gF,{strokeDasharray:"3 3",stroke:f.border}),(0,Qr.jsx)(MF,{dataKey:"date",stroke:f.textMuted,style:{fontSize:r?"10px":"12px"},tick:{fill:f.textMuted}}),(0,Qr.jsx)(RF,{stroke:f.textMuted,style:{fontSize:r?"10px":"12px"},domain:[0,d?100:10],tickFormatter:e=>c(e),tick:{fill:f.textMuted},width:r?30:40}),(0,Qr.jsx)(ZU,{content:(0,Qr.jsx)(j,{})}),(0,Qr.jsx)(oQ,{type:"monotone",dataKey:"score",stroke:u?i("accent","#f59e0b"):i("primary","#3b82f6"),strokeWidth:r?2:3,dot:{fill:u?i("accent","#f59e0b"):i("primary","#3b82f6"),r:r?3:4},activeDot:{r:r?4:6}})]})})]})},pQ=cn("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),mQ=cn("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),hQ=()=>{const{t:e}=k(),{courseId:t}=pt(),r=ut(),{getColor:n,isDarkMode:s}=Yr(),{formatScore:i,convertScore:l,format:c,isPercentage:d}=gd(),{course:u}=yu(t),f=u?.title?.rendered||u?.title||"",p={text:s?"#f9fafb":"#1a202c",textMuted:s?"#9ca3af":"#6b7280",background:s?"#1f2937":"#ffffff",secondaryBg:s?"#111827":"#f3f4f6",border:s?n("accent","#f59e0b")+"60":n("primary","#3b82f6")+"40",borderSubtle:s?"#374151":"#e5e7eb",cardBg:s?"#1f2937":"#ffffff",accent:n("accent","#f59e0b"),primary:n("primary","#3b82f6")},[m,h]=(0,a.useState)("lessons"),[g,x]=(0,a.useState)(!0),[y,b]=(0,a.useState)([]),[v,w]=(0,a.useState)([]),[j,N]=(0,a.useState)(null),[_,C]=(0,a.useState)(null),[S,E]=(0,a.useState)(null),[O,M]=(0,a.useState)(null),[T,P]=(0,a.useState)(!1),[A,q]=(0,a.useState)("easy"),[z,D]=(0,a.useState)("desc"),[L,I]=(0,a.useState)("without"),[R,$]=(0,a.useState)(null),[F,B]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{if(t){x(!0);try{const[e,r,n,s,a,o]=await Promise.all([cQ(t),dQ(t),uQ(t),Su(t),Cu(t,{page:1,perPage:20,withRisk:!1}),lQ(t,null)]);console.log(" Question Stats API Response:",o);const i=e.data?.lessons||e.data||[];b(i),w(r.data||[]),N(n.data||{}),C(s.data),E(a?.data?.statistics||null),M(o?.data||o||null)}catch(e){console.error(" Error fetching statistics:",e)}finally{x(!1)}}})()},[t]),(0,a.useEffect)(()=>{(async()=>{if(t)try{const e=await lQ(t,R);M(e?.data||e||null)}catch(e){console.error(" Error refetching question stats:",e)}})()},[t,R]);const U=(0,a.useMemo)(()=>{const e=y?.reduce((e,t)=>e+(t.quizzes_completed||0),0)||0,t=y?.reduce((e,t)=>e+(t.total_quizzes||0),0)||0;if(!y||0===y.length)return null;let r=0;if(void 0!==_?.average_score)r=_.average_score;else if(y.length>0){const e=y.filter(e=>e.avg_score>0);e.length>0&&(r=e.reduce((e,t)=>e+t.avg_score,0)/e.length)}const n=t>0?e/t*100:0,s=y?.filter(e=>e.quizzes_completed>0).length||0;let a=null,o=null;return y.length>0&&(a=y.reduce((e,t)=>t.avg_score>e.avg_score?t:e),o=y.reduce((e,t)=>t.avg_score<e.avg_score?t:e)),{avgScore:r,completedQuizzes:e,completedLessons:s,totalQuizzes:t,progressPercentage:n,bestLesson:a,worstLesson:o}},[_,y]),H=(0,a.useMemo)(()=>y&&0!==y.length?[...y.filter(e=>e.total_quizzes>0)].sort((e,t)=>"desc"===z?t.avg_score-e.avg_score:e.avg_score-t.avg_score):[],[y,z]),W=(0,a.useMemo)(()=>y&&0!==y.length?[...y.filter(e=>e.total_quizzes>0)].sort((e,t)=>e.avg_score-t.avg_score):[],[y]),Q=((0,a.useMemo)(()=>y&&0!==y.length?[...y.filter(e=>e.total_quizzes>0)].sort((e,t)=>e.avg_score-t.avg_score).slice(0,5):[],[y]),({value:e,color:t,height:r="h-2",showPercentage:n=!1})=>(0,Qr.jsxs)("div",{className:"w-full",children:[(0,Qr.jsx)("div",{className:`w-full rounded-full ${r} overflow-hidden`,style:{backgroundColor:`${t}20`},children:(0,Qr.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,e))}%`,backgroundColor:t}})}),n&&(0,Qr.jsx)("div",{className:"flex justify-end mt-1",children:(0,Qr.jsxs)("span",{className:"text-xs font-medium",style:{color:t},children:[e.toFixed(0),"%"]})})]})),V=e=>e>=8?"#22c55e":e>=6?"#eab308":"#ef4444";return g?(0,Qr.jsx)(ju,{courseId:t,courseName:f,sectionName:e("statistics.title"),children:(0,Qr.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,Qr.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:n("primary","#3b82f6")}})})}):(0,Qr.jsx)(ju,{courseId:t,courseName:f,sectionName:e("statistics.title"),children:(0,Qr.jsxs)("div",{className:"relative h-full",children:[(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(T?"-translate-x-full":"translate-x-0"),children:(0,Qr.jsx)("div",{className:"h-full overflow-y-auto",children:(0,Qr.jsxs)("div",{className:"max-w-7xl mx-auto px-3 py-4",children:[(0,Qr.jsxs)("div",{className:"space-y-3",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(Cc,{size:16,style:{color:p.text}}),(0,Qr.jsx)("h2",{className:"text-sm font-bold uppercase tracking-wide",style:{color:p.text},children:e("statistics.title")})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2",children:[(()=>{const t=S?.top_10_cutoff_without_risk,r=null!=t&&t>0,a=r&&(U?.avgScore||0)>=t;return(0,Qr.jsxs)("div",{className:"rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:p.cardBg,borderColor:a?"#22c55e":p.border},children:[(0,Qr.jsxs)("div",{className:"px-3 py-1.5 flex items-center justify-between",style:{backgroundColor:a?"#22c55e":n("primary","#1a202c")},children:[(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider",style:{color:"#ffffff"},children:e("statistics.averageScore")}),a?(0,Qr.jsx)(rl,{size:14,style:{color:"#ffffff"}}):(0,Qr.jsx)(kc,{size:14,style:{color:"#ffffff"}})]}),(0,Qr.jsxs)("div",{className:"p-3",children:[(0,Qr.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,Qr.jsx)("span",{className:"text-2xl font-bold",style:{color:a?"#22c55e":p.text},children:U?i(U.avgScore):"-"}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:p.textMuted},children:["/ ",d?"100":"10"]})]}),r?(0,Qr.jsx)("div",{className:"flex items-center gap-1.5 mt-2 px-2 py-1 rounded text-xs",style:{backgroundColor:a?s?"#166534":"#dcfce7":s?"#92400e":"#fef3c7"},children:a?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(On,{size:12,style:{color:s?"#86efac":"#16a34a"}}),(0,Qr.jsx)("span",{style:{color:s?"#86efac":"#166534"},children:" Top 10%"})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Eu,{size:12,style:{color:s?"#fcd34d":"#d97706"}}),(0,Qr.jsxs)("span",{style:{color:s?"#fcd34d":"#92400e"},children:["Corte: ",(0,Qr.jsx)("strong",{children:i(t)})]})]})}):(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 mt-2 px-2 py-1 rounded text-xs",style:{backgroundColor:s?"#374151":"#f3f4f6"},children:[(0,Qr.jsx)(Pn,{size:12,style:{color:p.textMuted}}),(0,Qr.jsx)("span",{style:{color:p.textMuted},children:"Sin datos"})]})]})]})})(),(0,Qr.jsxs)("div",{className:"rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:p.cardBg,borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"px-3 py-1.5 flex items-center justify-between",style:{backgroundColor:n("accent","#f59e0b")},children:[(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-white",children:e("statistics.ranking")}),(0,Qr.jsx)(qc,{size:14,className:"text-white"})]}),(0,Qr.jsx)("div",{className:"p-3",children:(0,Qr.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,Qr.jsxs)("span",{className:"text-2xl font-bold",style:{color:n("accent","#f59e0b")},children:["#",_?.position||"-"]}),U?.completedQuizzes===U?.totalQuizzes&&U?.totalQuizzes>0&&(0,Qr.jsx)(On,{size:14,className:"text-green-500"})]})})]}),(0,Qr.jsxs)("div",{className:"rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:p.cardBg,borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"px-3 py-1.5 flex items-center justify-between",style:{backgroundColor:"#64748b"},children:[(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-white",children:e("statistics.completedQuizzes")}),(0,Qr.jsx)(Eu,{size:14,className:"text-white"})]}),(0,Qr.jsxs)("div",{className:"p-3",children:[(0,Qr.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,Qr.jsx)("span",{className:"text-2xl font-bold",style:{color:s?"#94a3b8":"#475569"},children:U?.completedQuizzes||0}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:p.textMuted},children:["/ ",U?.totalQuizzes||0]})]}),U&&U.totalQuizzes>0&&(0,Qr.jsx)("div",{className:"mt-2",children:(0,Qr.jsx)(Q,{value:U.progressPercentage,color:"#64748b",height:"h-1"})})]})]}),(0,Qr.jsxs)("div",{className:"rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:p.cardBg,borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"px-3 py-1.5 flex items-center justify-between",style:{backgroundColor:"#10b981"},children:[(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-white",children:e("statistics.bestPerformance")}),(0,Qr.jsx)(rl,{size:14,className:"text-white"})]}),(0,Qr.jsx)("div",{className:"p-3",children:U?.bestLesson?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,Qr.jsx)("span",{className:"text-2xl font-bold",style:{color:"#059669"},children:i(U.bestLesson.avg_score)}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:p.textMuted},children:["/ ",d?"100":"10"]})]}),(0,Qr.jsx)("p",{className:"text-xs mt-1 truncate",style:{color:p.textMuted},children:U.bestLesson.lesson_title})]}):(0,Qr.jsx)("p",{className:"text-xs",style:{color:p.textMuted},children:e("statistics.noDataYet")})})]})]})]}),y&&y.length>0&&(0,Qr.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,Qr.jsx)(lf,{size:14,style:{color:p.textMuted}}),(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:p.textMuted},children:"Filtrar:"}),(0,Qr.jsxs)("select",{value:R||"",onChange:e=>$(e.target.value?parseInt(e.target.value):null),className:"text-xs px-2 py-1 rounded border focus:outline-none focus:ring-1",style:{backgroundColor:p.cardBg,borderColor:p.border,color:p.text},children:[(0,Qr.jsx)("option",{value:"",children:"Todos los temas"}),y.filter(e=>e.total_quizzes>0).map(e=>(0,Qr.jsx)("option",{value:e.lesson_id,children:e.lesson_title},e.lesson_id))]}),R&&(0,Qr.jsx)("button",{onClick:()=>$(null),className:"text-xs px-1.5 py-0.5 rounded transition-all",style:{backgroundColor:s?"#7f1d1d":"#fee2e2",color:s?"#fca5a5":"#dc2626"},children:""})]}),(0,Qr.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mt-3",children:[(0,Qr.jsx)("div",{children:(0,Qr.jsx)(fQ,{courseId:t,lessonId:R,compact:!0,isDarkMode:s,pageColors:p})}),(0,Qr.jsxs)("div",{className:"rounded-lg overflow-hidden border flex flex-col",style:{backgroundColor:p.cardBg,borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"flex-shrink-0 flex",style:{backgroundColor:s?"#374151":"#e5e7eb"},children:[(0,Qr.jsxs)("button",{onClick:()=>h("lessons"),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium transition-all",style:{backgroundColor:"lessons"===m?p.cardBg:"transparent",color:"lessons"===m?s?n("accent","#f59e0b"):n("primary","#3b82f6"):p.textMuted,borderBottom:"lessons"===m?`2px solid ${s?n("accent","#f59e0b"):n("primary","#3b82f6")}`:"2px solid transparent"},children:[(0,Qr.jsx)(kn,{size:12}),"Temas"]}),(0,Qr.jsxs)("button",{onClick:()=>h("questions"),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 text-xs font-medium transition-all",style:{backgroundColor:"questions"===m?p.cardBg:"transparent",color:"questions"===m?n("accent","#f59e0b"):p.textMuted,borderBottom:"questions"===m?`2px solid ${n("accent","#f59e0b")}`:"2px solid transparent"},children:[(0,Qr.jsx)(Eu,{size:12}),"Preguntas"]})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-hidden relative",children:"lessons"===m?(0,Qr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b",style:{borderColor:p.border},children:[(0,Qr.jsx)("span",{className:"text-xs font-medium",style:{color:p.textMuted},children:"Ordenados por nota (peor  mejor)"}),(0,Qr.jsxs)("button",{onClick:()=>P(!0),className:"text-xs font-medium flex items-center gap-1 px-2 py-1 rounded transition-all",style:{color:s?n("accent","#f59e0b"):n("primary","#3b82f6"),backgroundColor:s?"#451a03":"#dbeafe"},children:["Ver todas",(0,Qr.jsx)(al,{size:12})]})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:W.length>0?(0,Qr.jsx)("div",{className:"space-y-1.5",children:W.slice(0,6).map((e,n)=>{const a=V(e.avg_score);return(0,Qr.jsx)("div",{className:"p-2 rounded border transition-all hover:shadow-sm cursor-pointer",style:{backgroundColor:s?"#111827":"#fafafa",borderColor:p.border},onClick:()=>(async e=>{try{const{getCourseLessons:n}=await Promise.resolve().then(o.bind(o,6416)),s=await n(parseInt(t)),a=s.data?.find(t=>t.id===e.lesson_id);if(a){const e=a.meta?._lesson_steps?.find(e=>"quiz"===e.type),n=e?.data?.quiz_id;if(n)return void r(`/courses/${t}/tests`,{state:{selectedQuizId:parseInt(n),scrollToQuiz:!0,returnTo:`/courses/${t}/statistics`}})}r(`/courses/${t}/tests`)}catch(e){console.error("Error navigating to lesson:",e),r(`/courses/${t}/tests`)}})(e),children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,Qr.jsx)("span",{className:"text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${a}20`,color:a},children:n+1}),(0,Qr.jsx)("span",{className:"font-medium text-xs truncate",style:{color:p.text},children:e.lesson_title})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(0,Qr.jsx)("span",{className:"font-bold text-xs",style:{color:a},children:i(e.avg_score)}),(0,Qr.jsx)(al,{size:12,style:{color:p.textMuted}})]})]})},e.lesson_id)})}):(0,Qr.jsxs)("div",{className:"text-center py-6",children:[(0,Qr.jsx)(kn,{size:24,className:"mx-auto mb-2",style:{color:p.textMuted}}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:p.textMuted},children:e("statistics.noLessonsData")})]})})]}):(0,Qr.jsxs)("div",{className:"h-full flex flex-col relative",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b",style:{borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[O?.global_stats?.total_users>0&&(0,Qr.jsxs)("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded",style:{backgroundColor:s?"#374151":"#f3f4f6"},children:[(0,Qr.jsx)(Nn,{size:10,style:{color:p.textMuted}}),(0,Qr.jsx)("span",{className:"text-xs",style:{color:p.textMuted},children:O.global_stats.total_users})]}),O?.total_questions>0&&(0,Qr.jsxs)("span",{className:"text-xs font-medium",style:{color:p.text},children:[O.total_questions," respondidas"]})]}),O&&(O.correct_with_risk>0||O.incorrect_with_risk>0)&&(0,Qr.jsxs)("button",{onClick:()=>B(!0),className:"flex items-center gap-1 px-2 py-1 rounded text-xs font-medium transition-all",style:{backgroundColor:s?"#78350f":"#fef3c7",color:s?"#fcd34d":"#92400e"},children:[(0,Qr.jsx)(iu,{size:10}),"Riesgo"]})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:O?(0,Qr.jsxs)("div",{className:"space-y-2",children:[(()=>{const e=O.user_correct_pct||0,t=O.global_stats?.correct_pct||0,r=O.comparison?.correct_diff||0,n=r>.5,a=r<-.5;return(0,Qr.jsxs)("div",{className:"p-2 rounded border",style:{backgroundColor:s?"#111827":"#fafafa",borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)(On,{size:12,style:{color:"#10b981"}}),(0,Qr.jsx)("span",{className:"text-xs font-semibold",style:{color:p.text},children:"Correctas"})]}),O.total_questions>0&&(0,Qr.jsxs)("span",{className:"text-xs font-bold",style:{color:n?"#16a34a":a?"#dc2626":p.textMuted},children:[r>0?"+":"",r,"%"]})]}),(0,Qr.jsxs)("div",{className:"space-y-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs w-10",style:{color:p.text},children:"T"}),(0,Qr.jsxs)("span",{className:"text-xs w-8 font-bold",style:{color:"#10b981"},children:[e,"%"]}),(0,Qr.jsx)("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:s?"#374151":"#e5e7eb"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full",style:{width:`${e}%`,backgroundColor:"#10b981"}})})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs w-10",style:{color:p.textMuted},children:"Media"}),(0,Qr.jsxs)("span",{className:"text-xs w-8",style:{color:p.textMuted},children:[t,"%"]}),(0,Qr.jsx)("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:s?"#374151":"#e5e7eb"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full",style:{width:`${t}%`,backgroundColor:"#9ca3af"}})})]})]})]})})(),(()=>{const e=O.user_incorrect_pct||0,t=O.global_stats?.incorrect_pct||0,r=O.comparison?.incorrect_diff||0,n=r<-.5,a=r>.5;return(0,Qr.jsxs)("div",{className:"p-2 rounded border",style:{backgroundColor:s?"#111827":"#fafafa",borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,Qr.jsx)(En,{size:12,style:{color:"#ef4444"}}),(0,Qr.jsx)("span",{className:"text-xs font-semibold",style:{color:p.text},children:"Incorrectas"})]}),O.total_questions>0&&(0,Qr.jsxs)("span",{className:"text-xs font-bold",style:{color:n?"#16a34a":a?"#dc2626":p.textMuted},children:[r>0?"+":"",r,"%"]})]}),(0,Qr.jsxs)("div",{className:"space-y-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs w-10",style:{color:p.text},children:"T"}),(0,Qr.jsxs)("span",{className:"text-xs w-8 font-bold",style:{color:"#ef4444"},children:[e,"%"]}),(0,Qr.jsx)("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:s?"#374151":"#e5e7eb"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full",style:{width:`${e}%`,backgroundColor:"#ef4444"}})})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs w-10",style:{color:p.textMuted},children:"Media"}),(0,Qr.jsxs)("span",{className:"text-xs w-8",style:{color:p.textMuted},children:[t,"%"]}),(0,Qr.jsx)("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:s?"#374151":"#e5e7eb"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full",style:{width:`${t}%`,backgroundColor:"#9ca3af"}})})]})]})]})})(),(O.user_unanswered_pct>0||O.global_stats?.unanswered_pct>0)&&(()=>{const e=O.user_unanswered_pct||0,t=O.global_stats?.unanswered_pct||0;return(0,Qr.jsxs)("div",{className:"p-2 rounded border",style:{backgroundColor:s?"#111827":"#fafafa",borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-1.5 mb-1.5",children:[(0,Qr.jsx)(Pn,{size:12,style:{color:"#6b7280"}}),(0,Qr.jsx)("span",{className:"text-xs font-semibold",style:{color:p.text},children:"Sin contestar"})]}),(0,Qr.jsxs)("div",{className:"space-y-1",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs w-10",style:{color:p.text},children:"T"}),(0,Qr.jsxs)("span",{className:"text-xs w-8 font-bold",style:{color:"#6b7280"},children:[e,"%"]}),(0,Qr.jsx)("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:s?"#374151":"#e5e7eb"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full",style:{width:`${e}%`,backgroundColor:"#94a3b8"}})})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)("span",{className:"text-xs w-10",style:{color:p.textMuted},children:"Media"}),(0,Qr.jsxs)("span",{className:"text-xs w-8",style:{color:p.textMuted},children:[t,"%"]}),(0,Qr.jsx)("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:s?"#374151":"#e5e7eb"},children:(0,Qr.jsx)("div",{className:"h-full rounded-full",style:{width:`${t}%`,backgroundColor:"#9ca3af"}})})]})]})]})})()]}):0===O?.total_questions?(0,Qr.jsxs)("div",{className:"text-center py-6",children:[(0,Qr.jsx)(Pn,{size:24,className:"mx-auto mb-2",style:{color:"#f59e0b"}}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:p.textMuted},children:"An no has respondido preguntas"})]}):(0,Qr.jsxs)("div",{className:"text-center py-6",children:[(0,Qr.jsx)(Eu,{size:24,className:"mx-auto mb-2",style:{color:p.textMuted}}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:p.textMuted},children:"Cargando..."})]})}),(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(F?"translate-x-0":"translate-x-full"),style:{backgroundColor:p.cardBg},children:F&&O&&(0,Qr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between",style:{backgroundColor:n("accent","#f59e0b")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(iu,{size:14,className:"text-white"}),(0,Qr.jsx)("span",{className:"text-xs font-bold uppercase text-white",children:"Con Riesgo"})]}),(0,Qr.jsx)("button",{onClick:()=>B(!1),className:"p-1 rounded",style:{backgroundColor:"rgba(255,255,255,0.2)"},children:(0,Qr.jsx)(En,{size:14,className:"text-white"})})]}),(0,Qr.jsxs)("div",{className:"flex-1 p-3 overflow-y-auto space-y-2",children:[(0,Qr.jsxs)("div",{className:"p-3 rounded border",style:{backgroundColor:s?"#14532d":"#dcfce7",borderColor:s?"#166534":"#86efac"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qr.jsx)(On,{size:14,style:{color:s?"#86efac":"#16a34a"}}),(0,Qr.jsx)("span",{className:"text-xs font-bold",style:{color:s?"#86efac":"#166534"},children:"Correctas con riesgo"})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsxs)("span",{className:"text-xs",style:{color:s?"#86efac":"#166534"},children:["T: ",(0,Qr.jsx)("strong",{children:O.correct_with_risk||0})]}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:s?"#86efac":"#166534"},children:["Media: ",O.global_stats?.correct_with_risk_pct||0,"%"]})]})]}),(0,Qr.jsxs)("div",{className:"p-3 rounded border",style:{backgroundColor:s?"#7f1d1d":"#fee2e2",borderColor:s?"#991b1b":"#fca5a5"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qr.jsx)(En,{size:14,style:{color:s?"#fca5a5":"#dc2626"}}),(0,Qr.jsx)("span",{className:"text-xs font-bold",style:{color:s?"#fca5a5":"#991b1b"},children:"Incorrectas con riesgo"})]}),(0,Qr.jsxs)("div",{className:"flex justify-between",children:[(0,Qr.jsxs)("span",{className:"text-xs",style:{color:s?"#fca5a5":"#991b1b"},children:["T: ",(0,Qr.jsx)("strong",{children:O.incorrect_with_risk||0})]}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:s?"#fca5a5":"#991b1b"},children:["Media: ",O.global_stats?.incorrect_with_risk_pct||0,"%"]})]})]})]})]})})]})})]})]})]})})}),(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(T?"translate-x-0":"translate-x-full"),style:{backgroundColor:p.secondaryBg},children:T&&(0,Qr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b flex-shrink-0 gap-2",style:{backgroundColor:n("primary","#1a202c"),borderColor:p.border},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,Qr.jsx)(Ud,{size:16,style:{color:"#ffffff"},className:"flex-shrink-0"}),(0,Qr.jsx)("h2",{className:"text-xs sm:text-sm font-bold leading-tight truncate uppercase tracking-wide",style:{color:"#ffffff"},children:e("statistics.performanceByLesson")}),(0,Qr.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.2)",color:n("textColorContrast","#ffffff")},children:H.length})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsxs)("button",{onClick:()=>D(e=>"desc"===e?"asc":"desc"),className:"text-xs font-medium flex items-center gap-1 px-3 py-1.5 rounded-lg transition-all",style:{color:n("textColorContrast","#ffffff"),backgroundColor:"rgba(255, 255, 255, 0.15)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},children:["desc"===z?(0,Qr.jsx)(pQ,{size:14}):(0,Qr.jsx)(mQ,{size:14}),(0,Qr.jsx)("span",{className:"hidden sm:inline",children:e("desc"===z?"statistics.sortHighToLow":"statistics.sortLowToHigh")})]}),(0,Qr.jsx)("button",{onClick:()=>P(!1),className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.15)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255,255,255,0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(255,255,255,0.15)"},title:e("common.back"),children:(0,Qr.jsx)(En,{size:20,style:{color:n("textColorContrast","#ffffff")}})})]})]}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Qr.jsx)("div",{className:"p-4 max-w-5xl mx-auto",children:H.length>0?(0,Qr.jsx)("div",{className:"space-y-2",children:H.map((t,r)=>{const n=t.avg_score,s=V(t.avg_score);return(0,Qr.jsxs)("div",{className:"rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:p.cardBg,borderColor:p.border},children:[(0,Qr.jsx)("div",{className:"px-3 py-1.5",style:{backgroundColor:s},children:(0,Qr.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0 mr-2",children:[(0,Qr.jsx)("span",{className:"text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.25)"},children:r+1}),(0,Qr.jsx)("span",{className:"font-bold text-xs text-white truncate",children:t.lesson_title})]}),(0,Qr.jsxs)("div",{className:"flex items-baseline gap-1 flex-shrink-0",children:[(0,Qr.jsx)("span",{className:"font-bold text-sm text-white",children:i(n)}),(0,Qr.jsxs)("span",{className:"text-xs text-white opacity-80",children:["/ ",d?"100":"10"]})]})]})}),(0,Qr.jsxs)("div",{className:"p-3",children:[(0,Qr.jsx)(Q,{value:t.avg_score,color:s,height:"h-1.5"}),(0,Qr.jsxs)("div",{className:"flex justify-between mt-1.5 text-xs",style:{color:p.textMuted},children:[(0,Qr.jsxs)("span",{children:[t.quizzes_completed," ",e("statistics.quizzesCompleted")]}),(0,Qr.jsxs)("span",{children:[t.total_attempts," ",e("statistics.attempts")]})]})]})]},t.lesson_id)})}):(0,Qr.jsxs)("div",{className:"text-center py-8",children:[(0,Qr.jsx)(Ud,{size:32,className:"mx-auto mb-2",style:{color:p.textMuted}}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:p.textMuted},children:e("statistics.noDataAvailable")})]})})})]})})]})})},gQ=cn("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),xQ=cn("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]),yQ=({questions:e=[],currentIndex:t=0,onNavigate:r,onClose:n,onAnswered:s})=>{const{t:o}=k(),{getColor:i}=Yr(),l=e[t],[c,d]=(0,a.useState)(null),[u,f]=(0,a.useState)(!1),[p,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{d(null),f(!1)},[t,l?.id]);const h=l?.is_favorite||!1;if(!l)return(0,Qr.jsx)("div",{className:"flex items-center justify-center h-full p-8",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)(Pn,{size:48,style:{color:i("error","#ef4444"),margin:"0 auto 1rem"}}),(0,Qr.jsx)("p",{className:"text-lg font-medium",style:{color:i("textPrimary","#1f2937")},children:o("tests.noQuestionsAvailable")})]})});l.meta;const g=l.meta?._question_options||[],x=g.find(e=>!0===e.isCorrect),y=x?.id,b=l.meta?._explanation||"",v=l.meta?._difficulty_level||"medium",w=u&&c===y,j=()=>{t<e.length-1&&r(t+1)},N=()=>{switch(v){case"easy":return"#10b981";case"medium":return"#f59e0b";case"hard":return"#ef4444";default:return i("textSecondary","#6b7280")}},_=e=>{const t={border:"2px solid",transition:"all 0.2s",cursor:u?"default":"pointer"};return u?e.id===y?{...t,borderColor:"#10b981",backgroundColor:"#10b98110"}:e.id===c&&c!==y?{...t,borderColor:"#ef4444",backgroundColor:"#ef444410"}:{...t,borderColor:i("borderColor","#e5e7eb"),backgroundColor:i("background","#ffffff"),opacity:.5}:c===e.id?{...t,borderColor:i("primary","#3b82f6"),backgroundColor:`${i("primary","#3b82f6")}10`}:{...t,borderColor:i("borderColor","#e5e7eb"),backgroundColor:i("background","#ffffff")}};return(0,Qr.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 mb-6 rounded-lg border",style:{backgroundColor:i("background","#ffffff"),borderColor:i("borderColor","#e5e7eb")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Qr.jsxs)("span",{className:"text-sm font-medium",style:{color:i("textSecondary","#6b7280")},children:[t+1," / ",e.length]}),(0,Qr.jsx)("div",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:`${N()}20`,color:N()},children:o(`common.${v}`)})]}),(0,Qr.jsx)("button",{onClick:async()=>{if(!p){m(!0);try{const e=await ru(l.id);l.is_favorite=e.is_favorited,f(e=>e)}catch(e){console.error("Error toggling favorite:",e)}finally{m(!1)}}},disabled:p,className:"p-2 rounded-lg transition-all hover:bg-gray-100",title:o(h?"common.removeFromFavorites":"common.addToFavorites"),children:(0,Qr.jsx)(cf,{size:20,style:{color:"#fbbf24"},fill:h?"#fbbf24":"none"})})]}),(0,Qr.jsxs)("div",{className:"space-y-6",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,Qr.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${i("primary","#3b82f6")}20`},children:(0,Qr.jsx)(kn,{size:16,style:{color:i("primary","#3b82f6")}})}),(0,Qr.jsx)("h3",{className:"text-lg font-semibold flex-1",style:{color:i("textPrimary","#1f2937")},children:l.title?.rendered||l.title})]}),l.content?.rendered&&(0,Qr.jsx)("div",{className:"prose max-w-none ml-11",dangerouslySetInnerHTML:{__html:l.content.rendered},style:{color:i("textSecondary","#6b7280")}})]}),(0,Qr.jsx)("div",{className:"space-y-3",children:g.map((e,t)=>(0,Qr.jsxs)("button",{onClick:()=>(e=>{if(!u){d(e),f(!0);const t=e===y;s&&s(l.id,t)}})(e.id),disabled:u,className:"w-full px-4 py-3 rounded-lg text-left flex items-center gap-3",style:_(e),children:[(0,Qr.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 font-semibold",style:{backgroundColor:u&&e.id===y?"#10b981":u&&e.id===c?"#ef4444":c===e.id?i("primary","#3b82f6"):`${i("textSecondary","#6b7280")}20`,color:u&&(e.id===y||e.id===c)||c===e.id?"#ffffff":i("textPrimary","#1f2937")},children:String.fromCharCode(65+t)}),(0,Qr.jsx)("span",{className:"flex-1 text-sm",style:{color:i("textPrimary","#1f2937")},children:e.text}),u&&e.id===y&&(0,Qr.jsx)(Ui,{size:20,style:{color:"#10b981"}}),u&&e.id===c&&c!==y&&(0,Qr.jsx)(En,{size:20,style:{color:"#ef4444"}})]},e.id))}),u&&(0,Qr.jsxs)("div",{className:"rounded-lg p-4 border-2",style:{borderColor:w?"#10b981":"#ef4444",backgroundColor:w?"#10b98110":"#ef444410"},children:[(0,Qr.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[w?(0,Qr.jsx)(Ui,{size:24,style:{color:"#10b981"},className:"flex-shrink-0"}):(0,Qr.jsx)(En,{size:24,style:{color:"#ef4444"},className:"flex-shrink-0"}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h4",{className:"font-bold text-base mb-1",style:{color:w?"#10b981":"#ef4444"},children:o(w?"tests.correctAnswer":"tests.incorrectAnswer")}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:i("textSecondary","#6b7280")},children:o(w?"tests.wellDone":"tests.keepPracticing")})]})]}),b&&(0,Qr.jsxs)("div",{className:"mt-3 pt-3 border-t",style:{borderColor:w?"#10b98130":"#ef444430"},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Qr.jsx)(gQ,{size:16,style:{color:i("primary","#3b82f6")}}),(0,Qr.jsx)("span",{className:"text-xs font-semibold uppercase",style:{color:i("textSecondary","#6b7280")},children:o("tests.explanation")})]}),(0,Qr.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:b},style:{color:i("textPrimary","#1f2937")}})]})]})]}),(0,Qr.jsxs)("div",{className:"mt-6 flex items-center justify-center gap-3",children:[(0,Qr.jsxs)("button",{onClick:()=>{t>0&&r(t-1)},disabled:0===t,className:"px-6 py-3 rounded-lg font-medium flex items-center gap-2 transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",style:{backgroundColor:i("background","#ffffff"),color:i("primary","#3b82f6"),border:`2px solid ${i("primary","#3b82f6")}`},children:[(0,Qr.jsx)(sl,{size:20}),(0,Qr.jsx)("span",{children:o("common.previous")})]}),!u&&(0,Qr.jsxs)("button",{onClick:()=>{j()},className:"px-6 py-3 rounded-lg font-medium flex items-center gap-2 transition-all shadow-sm",style:{backgroundColor:i("background","#ffffff"),color:i("textSecondary","#6b7280"),border:`2px solid ${i("borderColor","#e5e7eb")}`},children:[(0,Qr.jsx)(xQ,{size:20}),(0,Qr.jsx)("span",{children:o("common.skip")})]}),(0,Qr.jsxs)("button",{onClick:j,disabled:t===e.length-1,className:"px-6 py-3 rounded-lg font-bold flex items-center gap-2 transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-sm",style:{backgroundColor:i("accent","#f59e0b"),color:"#ffffff"},children:[(0,Qr.jsx)("span",{children:t===e.length-1?o("common.finish"):o("common.next")}),(0,Qr.jsx)(al,{size:20})]})]})]})},bQ=({label:e,options:t,selected:r,onChange:n,placeholder:s="Seleccionar...",pageColors:o,isDarkMode:i})=>{const{getColor:l}=Yr(),[c,d]=(0,a.useState)(!1),u=e=>{const t=r.includes(e)?r.filter(t=>t!==e):[...r,e];n(t)},f=t.filter(e=>r.includes(e.value)).map(e=>e.label);return(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:o.text},children:e}),(0,Qr.jsxs)("button",{type:"button",onClick:()=>d(!c),className:"w-full px-3 py-2 text-left rounded-lg flex items-center justify-between transition-all text-sm",style:{border:`2px solid ${c?o.accent:o.inputBorder}`,backgroundColor:o.inputBg,color:o.text},children:[(0,Qr.jsx)("span",{className:"block truncate",children:0===r.length?(0,Qr.jsx)("span",{style:{color:o.textMuted},children:s}):`${r.length} seleccionados`}),(0,Qr.jsx)(Vi,{size:14,className:"transition-transform "+(c?"rotate-180":""),style:{color:o.textMuted}})]}),c&&(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,Qr.jsx)("div",{className:"absolute z-20 w-full mt-1 max-h-48 overflow-auto rounded-lg shadow-lg",style:{border:`2px solid ${i?o.accent:o.inputBorder}`,backgroundColor:i?l("secondaryBackground","#1f2937"):"#ffffff"},children:t.map(e=>(0,Qr.jsxs)("div",{onClick:()=>u(e.value),className:"px-3 py-2 cursor-pointer flex items-center gap-2 transition-colors",style:{backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=i?`${o.accent}15`:`${o.text}05`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,Qr.jsx)("div",{className:"w-4 h-4 rounded border flex items-center justify-center transition-colors flex-shrink-0",style:{backgroundColor:r.includes(e.value)?o.accent:"transparent",borderColor:r.includes(e.value)?o.accent:i?"rgba(255,255,255,0.3)":l("borderColor","#d1d5db")},children:r.includes(e.value)&&(0,Qr.jsx)(Ui,{size:10,className:"text-white"})}),(0,Qr.jsx)("span",{className:"text-sm truncate",style:{color:o.text},children:e.label})]},e.value))})]}),r.length>0&&(0,Qr.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:f.map((e,r)=>(0,Qr.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:i?`${o.accent}20`:`${o.text}10`,color:i?o.accent:o.text},children:[e,(0,Qr.jsx)("button",{onClick:r=>{r.stopPropagation(),u(t.find(t=>t.label===e).value)},className:"ml-1 hover:opacity-70",children:(0,Qr.jsx)(En,{size:10})})]},r))})]})},vQ=()=>{const{t:e}=k(),{courseId:t}=pt(),{getColor:r,isDarkMode:n}=Yr(),{course:s,loading:o}=yu(t),i=s?.title?.rendered||s?.title||"",l={text:n?r("textPrimary","#f9fafb"):r("primary","#1a202c"),textMuted:n?r("textSecondary","#9ca3af"):`${r("primary","#1a202c")}60`,accent:r("accent","#f59e0b"),hoverBg:n?r("accent","#f59e0b"):r("primary","#1a202c"),inputBg:n?"rgba(0,0,0,0.2)":"#ffffff",inputBorder:n?"#ffffff":r("primary","#1a202c"),cardBg:n?r("secondaryBackground","#1f2937"):"#ffffff"},[c,d]=(0,a.useState)(!1),[u,f]=(0,a.useState)(0),[p,m]=(0,a.useState)({}),[h,g]=(0,a.useState)([]),[x,y]=(0,a.useState)(!0),[b,v]=(0,a.useState)({lessons:[],difficulty:"all",numQuestions:10,statusFilters:[]}),{questions:w,loading:j,fetchQuestions:N}=rc({autoFetch:!1});(0,a.useEffect)(()=>{(async()=>{if(t){y(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=await(0,Qs.getCourseLessons)(e,{perPage:100});g(r.data||[])}catch(e){console.error("Error fetching lessons:",e),g([])}finally{y(!1)}}})()},[t]);const _=(e,t)=>{v(r=>({...r,[e]:t}))},C=()=>{d(!1),f(0),m({})},S=e=>{f(e)},E=h.map(t=>({value:t.id,label:t.title?.rendered||t.title||e("courses.untitledLesson")})),O=[{value:"all",label:e("courses.difficulty.all")},{value:"easy",label:e("common.easy")},{value:"medium",label:e("common.medium")},{value:"hard",label:e("common.hard")}],M=o||x;return(0,Qr.jsx)(ju,{courseId:t,courseName:i,sectionName:e("courses.selfPacedTests"),children:(0,Qr.jsxs)("div",{className:"relative h-full",children:[(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(c?"-translate-x-full":"translate-x-0"),children:(0,Qr.jsx)("div",{className:"h-full overflow-y-auto",children:(0,Qr.jsx)("div",{className:"max-w-3xl mx-auto px-4 pt-8 pb-24",children:M?(0,Qr.jsx)("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:l.cardBg,borderColor:l.inputBorder},children:[1,2,3].map(e=>(0,Qr.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse",style:{borderBottom:e<3?`1px solid ${l.inputBorder}`:"none"},children:[(0,Qr.jsx)("div",{className:"w-5 h-5 rounded",style:{backgroundColor:l.text+"20"}}),(0,Qr.jsx)("div",{className:"h-4 rounded flex-1",style:{backgroundColor:l.text+"15",maxWidth:"200px"}})]},e))}):(0,Qr.jsxs)("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:l.cardBg,borderColor:l.inputBorder},children:[(0,Qr.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3",style:{backgroundColor:n?l.accent:r("primary","#1a202c")},children:[(0,Qr.jsx)(bu,{size:20,className:"text-white flex-shrink-0"}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("h3",{className:"text-sm font-bold text-white truncate",children:e("courses.selfPacedTests")}),(0,Qr.jsx)("p",{className:"text-xs text-white/70 truncate",children:e("tests.practiceAtYourPace")})]})]}),(0,Qr.jsxs)("div",{className:"p-4 space-y-5",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Qr.jsx)(fa,{size:14,style:{color:l.accent}}),(0,Qr.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wide",style:{color:l.text},children:e("tests.configuration")})]}),(0,Qr.jsxs)("div",{className:"space-y-4",children:[(0,Qr.jsx)(bQ,{label:e("lessons.title"),options:E,selected:b.lessons,onChange:e=>_("lessons",e),placeholder:e("common.all"),pageColors:l,isDarkMode:n}),(0,Qr.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:l.text},children:e("courses.difficulty.label")}),(0,Qr.jsxs)("div",{className:"relative",children:[(0,Qr.jsx)("select",{value:b.difficulty,onChange:e=>_("difficulty",e.target.value),className:"w-full px-3 py-2 text-sm rounded-lg appearance-none transition-all",style:{border:`2px solid ${l.inputBorder}`,backgroundColor:l.inputBg,color:l.text},children:O.map(e=>(0,Qr.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,Qr.jsx)(Vi,{className:"absolute right-2.5 top-2.5 pointer-events-none",size:14,style:{color:l.textMuted}})]})]}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:l.text},children:e("common.questions")}),(0,Qr.jsx)("input",{type:"number",min:"1",max:"100",value:b.numQuestions,onChange:e=>_("numQuestions",parseInt(e.target.value)||10),className:"w-full px-3 py-2 text-sm rounded-lg transition-all",style:{border:`2px solid ${l.inputBorder}`,backgroundColor:l.inputBg,color:l.text}})]})]})]})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:l.inputBorder}}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,Qr.jsx)(lf,{size:14,style:{color:l.accent}}),(0,Qr.jsx)("h4",{className:"text-xs font-bold uppercase tracking-wide",style:{color:l.text},children:e("courses.questionTypes")})]}),(0,Qr.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[{id:"favorites",label:e("courses.favorites"),icon:cf,colorHex:"#fbbf24"},{id:"failed",label:e("courses.failed"),icon:Wi,colorHex:"#ef4444"},{id:"risked",label:e("courses.atRisk"),icon:jn,colorHex:"#f97316"},{id:"unanswered",label:e("courses.notAnswered"),icon:pl,colorHex:"#3b82f6"}].map(e=>{const t=b.statusFilters.includes(e.id);return(0,Qr.jsxs)("button",{onClick:()=>{return t=e.id,void v(e=>{const r=e.statusFilters.includes(t)?e.statusFilters.filter(e=>e!==t):[...e.statusFilters,t];return{...e,statusFilters:r}});var t},className:"relative px-2 py-3 rounded-lg transition-all flex flex-col items-center gap-1.5",style:{border:`2px solid ${t?e.colorHex:l.inputBorder}`,backgroundColor:t?`${e.colorHex}15`:l.inputBg},onMouseEnter:e=>{t||(e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)")},onMouseLeave:e=>{t||(e.currentTarget.style.backgroundColor=l.inputBg)},children:[(0,Qr.jsx)(e.icon,{size:16,style:{color:e.colorHex}}),(0,Qr.jsx)("span",{className:"text-xs font-medium text-center leading-tight",style:{color:l.text},children:e.label}),t&&(0,Qr.jsx)("div",{className:"absolute -top-1 -right-1 w-4 h-4 rounded-full flex items-center justify-center",style:{backgroundColor:e.colorHex},children:(0,Qr.jsx)(Ui,{size:10,className:"text-white"})})]},e.id)})})]}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:l.inputBorder}}),(0,Qr.jsx)("button",{onClick:async()=>{await N(!0,{course_id:t,lessons:b.lessons.length>0?b.lessons:null,difficulty:"all"!==b.difficulty?b.difficulty:null,perPage:b.numQuestions,status_filters:b.statusFilters.length>0?b.statusFilters:null}),f(0),m({}),d(!0)},disabled:j,className:"w-full py-2.5 rounded-lg font-medium text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{j||(e.currentTarget.style.opacity="0.9")},onMouseLeave:e=>{j||(e.currentTarget.style.opacity="1")},children:j?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,Qr.jsx)("span",{children:e("common.loading")})]}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)(Vd,{size:16}),(0,Qr.jsx)("span",{children:e("tests.startPractice")})]})})]})]})})})}),(0,Qr.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(c?"translate-x-0":"translate-x-full"),style:{backgroundColor:r("secondaryBackground","#f8f9fa")},children:c&&(0,Qr.jsxs)("div",{className:"h-full flex flex-col",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b flex-shrink-0 gap-2",style:{backgroundColor:l.cardBg,borderColor:l.inputBorder},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,Qr.jsx)(bu,{size:16,style:{color:l.accent},className:"flex-shrink-0"}),(0,Qr.jsx)("h2",{className:"text-sm font-medium leading-tight truncate",style:{color:l.text},children:e("courses.selfPacedPractice")}),(0,Qr.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:n?`${l.accent}20`:`${l.text}10`,color:n?l.accent:l.text},children:[w.length," ",e("common.questions").toLowerCase()]})]}),(0,Qr.jsx)("button",{onClick:C,className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:n?`${l.accent}15`:`${l.text}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?`${l.accent}25`:`${l.text}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${l.accent}15`:`${l.text}10`},title:e("common.back"),children:(0,Qr.jsx)(En,{size:18,style:{color:l.text}})})]}),w.length>0&&(0,Qr.jsx)("div",{className:"px-4 py-2.5 border-b",style:{backgroundColor:l.cardBg,borderColor:l.inputBorder},children:(0,Qr.jsx)("div",{className:"flex flex-wrap gap-1.5 justify-center",children:w.map((e,t)=>{const r=p.hasOwnProperty(e.id),n=p[e.id],s=t===u;return(0,Qr.jsx)("button",{onClick:()=>S(t),className:"w-8 h-8 rounded-lg font-medium text-xs transition-all flex items-center justify-center",style:{backgroundColor:s?l.accent:r?n?"#10b981":"#ef4444":"transparent",color:s||r?"#ffffff":l.text,border:`1px solid ${s?l.accent:r?n?"#10b981":"#ef4444":l.inputBorder}`,transform:s?"scale(1.1)":"scale(1)"},children:t+1},e.id)})})}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto",children:w.length>0?(0,Qr.jsx)(yQ,{questions:w,currentIndex:u,onNavigate:S,onClose:C,onAnswered:(e,t)=>{m(r=>({...r,[e]:t}))}}):(0,Qr.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"w-14 h-14 rounded-full flex items-center justify-center mb-4 mx-auto",style:{backgroundColor:n?`${l.accent}15`:`${l.text}10`},children:(0,Qr.jsx)(jn,{size:28,style:{color:l.textMuted}})}),(0,Qr.jsx)("h3",{className:"text-base font-bold mb-2",style:{color:l.text},children:e("tests.noQuestionsFound")}),(0,Qr.jsx)("p",{className:"text-sm mb-5",style:{color:l.textMuted},children:e("tests.adjustFilters")}),(0,Qr.jsx)("button",{onClick:C,className:"px-5 py-2 rounded-lg font-medium text-sm transition-all",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:e("common.back")})]})})})]})})]})})},wQ=()=>{const{t:e}=k(),{courseId:t}=pt(),{getColor:r,isDarkMode:n}=Yr(),{course:s,loading:o}=yu(t),i=s?.title?.rendered||s?.title||"",l=r("primary","#3b82f6"),c=r("accent","#f59e0b"),d=r("textPrimary","#f9fafb"),u={text:n?d:l,textMuted:r("textSecondary","#6b7280"),hoverBg:n?c:l},{messages:f,loading:p,error:m,pagination:h,computed:g,updateMessageStatus:x,deleteMessage:y,fetchMessages:b}=(()=>{const e=(0,a.useContext)(yd);if(!e)throw new Error("useMessagesContext must be used within a MessagesProvider");return e})(),[v,w]=(0,a.useState)(null),[j,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{v&&!f.find(e=>e.id===v.id)&&w(null)},[f,v]);const _=(0,a.useCallback)(e=>{w(e),"unread"===e.status&&x(e.id,"read")},[x]),C=(0,a.useCallback)(async e=>{N(e);try{await y(e),v?.id===e&&w(null)}finally{N(null)}},[y,v]),S=t=>{const r=new Date(t),n=new Date-r,s=Math.floor(n/864e5);return 0===s?r.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):1===s?e("messages.yesterday"):s<7?r.toLocaleDateString("es-ES",{weekday:"short"}):r.toLocaleDateString("es-ES",{day:"numeric",month:"short"})},E=e=>new Date(e).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),O=o||p;return(0,Qr.jsxs)(ju,{courseId:t,courseName:i,sectionName:e("header.messages"),children:[(0,Qr.jsx)("div",{className:"h-full overflow-hidden pb-8",children:(0,Qr.jsx)("div",{className:"h-full max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-10",children:(0,Qr.jsxs)("div",{className:"h-full rounded-lg overflow-hidden border flex flex-col",style:{backgroundColor:r("background","#ffffff"),borderColor:r("borderColor","#e5e7eb")},children:[(0,Qr.jsx)("div",{className:"px-3 py-2.5 flex-shrink-0",style:{backgroundColor:r("primary","#1a202c")},children:(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Qr.jsx)(Yc,{size:20,style:{color:r("textColorContrast","#ffffff")}}),(0,Qr.jsx)("div",{children:(0,Qr.jsx)("h3",{className:"text-base font-bold",style:{color:r("textColorContrast","#ffffff")},children:e("header.messages")})})]}),(0,Qr.jsxs)("div",{className:"flex items-center gap-2",children:[g.unreadMessages>0&&(0,Qr.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold",style:{backgroundColor:r("accent","#f59e0b"),color:"#ffffff"},children:[g.unreadMessages," ",e("messages.unread")]}),(0,Qr.jsxs)("span",{className:"text-xs",style:{color:r("textColorContrast","#ffffff"),opacity:.7},children:[h.total," ",e("messages.totalMessages")]})]})]})}),(0,Qr.jsx)("div",{style:{height:"1px",backgroundColor:r("borderColor","#e5e7eb")}}),(0,Qr.jsx)("div",{className:"flex-1 flex overflow-hidden",children:O?(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)("div",{className:"w-10 h-10 border-3 rounded-full animate-spin mx-auto mb-3",style:{borderColor:`${u.text}20`,borderTopColor:u.text}}),(0,Qr.jsx)("p",{style:{color:u.textMuted},children:e("messages.loading")})]})}):m?(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)(Pn,{size:48,className:"mx-auto mb-3",style:{color:"#ef4444"}}),(0,Qr.jsx)("p",{className:"font-medium",style:{color:"#ef4444"},children:e("messages.error")}),(0,Qr.jsx)("p",{className:"text-sm mt-1",style:{color:u.textMuted},children:m})]})}):0===f.length?(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center px-4",children:[(0,Qr.jsx)(Gc,{size:48,className:"mx-auto mb-3",style:{color:c,opacity:.5}}),(0,Qr.jsx)("h4",{className:"text-base font-semibold mb-1",style:{color:u.text},children:e("messages.emptyInbox")}),(0,Qr.jsx)("p",{className:"text-xs",style:{color:u.textMuted},children:e("messages.emptyInboxDescription")})]})}):(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsxs)("div",{className:"w-full md:w-2/5 lg:w-1/3 border-r overflow-y-auto flex-shrink-0",style:{borderColor:r("borderColor","#e5e7eb"),backgroundColor:r("secondaryBackground","#f9fafb")},children:[f.map(t=>{const n=v?.id===t.id,s="unread"===t.status;return(0,Qr.jsx)("div",{onClick:()=>_(t),className:"px-3 py-2.5 cursor-pointer border-b transition-all duration-150",style:{borderColor:r("borderColor","#e5e7eb"),backgroundColor:n?r("background","#ffffff"):"transparent",borderLeftWidth:n?"3px":"0",borderLeftColor:n?c:"transparent"},onMouseEnter:e=>{n||(e.currentTarget.style.backgroundColor=r("background","#ffffff"))},onMouseLeave:e=>{n||(e.currentTarget.style.backgroundColor="transparent")},children:(0,Qr.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0 w-2 h-2 rounded-full",style:{backgroundColor:s?c:"transparent"}}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Qr.jsx)("span",{className:"text-xs truncate "+(s?"font-bold":"font-medium"),style:{color:s?c:u.textMuted},children:t.sender_name||e("messages.system")}),(0,Qr.jsx)("span",{className:"text-[10px] flex-shrink-0 ml-2",style:{color:u.textMuted},children:S(t.created_at)})]}),(0,Qr.jsx)("p",{className:"text-sm truncate mt-0.5 "+(s?"font-semibold":""),style:{color:u.text},children:t.subject})]})]})},t.id)}),h.hasMore&&(0,Qr.jsx)("button",{onClick:()=>b(!1),className:"w-full py-2 text-xs font-medium transition-colors",style:{color:c,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=r("background","#ffffff")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:e("messages.loadMore")})]}),(0,Qr.jsx)("div",{className:"hidden md:flex flex-1 flex-col overflow-hidden",children:v?(0,Qr.jsxs)(Qr.Fragment,{children:[(0,Qr.jsx)("div",{className:"px-4 py-3 border-b flex-shrink-0",style:{borderColor:r("borderColor","#e5e7eb")},children:(0,Qr.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("h2",{className:"text-base font-bold truncate",style:{color:u.text},children:v.subject}),(0,Qr.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs",children:[(0,Qr.jsx)("span",{className:"font-medium",style:{color:c},children:v.sender_name||e("messages.system")}),(0,Qr.jsx)("span",{style:{color:u.textMuted},children:E(v.created_at)})]})]}),(0,Qr.jsx)("button",{onClick:()=>C(v.id),disabled:j===v.id,className:"flex-shrink-0 p-1.5 rounded transition-all disabled:opacity-50",style:{color:"#ef4444"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#fee2e2"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},title:e("messages.delete"),children:j===v.id?(0,Qr.jsx)("div",{className:"w-4 h-4 border-2 border-red-500 border-t-transparent rounded-full animate-spin"}):(0,Qr.jsx)(ca,{size:16})})]})}),(0,Qr.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-3",style:{backgroundColor:r("secondaryBackground","#f9fafb")},children:(0,Qr.jsx)("div",{className:"prose prose-sm max-w-none text-sm",style:{color:u.text},dangerouslySetInnerHTML:{__html:v.message}})}),"unread"===v.status&&(0,Qr.jsx)("div",{className:"px-4 py-2 border-t flex-shrink-0",style:{borderColor:r("borderColor","#e5e7eb"),backgroundColor:r("secondaryBackground","#f9fafb")},children:(0,Qr.jsxs)("button",{onClick:()=>x(v.id,"read"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded text-xs font-medium transition-all",style:{backgroundColor:c,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,Qr.jsx)(Ui,{size:14}),e("messages.markAsRead")]})})]}):(0,Qr.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,Qr.jsxs)("div",{className:"text-center px-4",children:[(0,Qr.jsx)(nl,{size:36,className:"mx-auto mb-2",style:{color:c,opacity:.4}}),(0,Qr.jsx)("p",{className:"text-sm",style:{color:u.textMuted},children:e("messages.selectToRead")})]})})})]})})]})})}),v&&(0,Qr.jsxs)("div",{className:"md:hidden fixed inset-0 z-50 flex flex-col",style:{backgroundColor:r("background","#ffffff")},children:[(0,Qr.jsxs)("div",{className:"px-3 py-2.5 flex items-center gap-2 border-b flex-shrink-0",style:{backgroundColor:r("primary","#1a202c"),borderColor:r("borderColor","#e5e7eb")},children:[(0,Qr.jsx)("button",{onClick:()=>w(null),className:"p-1.5 -ml-1 rounded",style:{color:r("textColorContrast","#ffffff")},children:(0,Qr.jsx)(sl,{size:20})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsx)("h3",{className:"text-sm font-bold truncate",style:{color:r("textColorContrast","#ffffff")},children:v.subject}),(0,Qr.jsx)("p",{className:"text-[10px] truncate",style:{color:r("accent","#f59e0b")},children:v.sender_name||e("messages.system")})]}),(0,Qr.jsx)("button",{onClick:()=>C(v.id),disabled:j===v.id,className:"p-1.5 rounded disabled:opacity-50",style:{color:"#ffffff"},children:j===v.id?(0,Qr.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,Qr.jsx)(ca,{size:16})})]}),(0,Qr.jsxs)("div",{className:"flex-1 overflow-y-auto px-3 py-3",style:{backgroundColor:r("background","#ffffff")},children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-[10px]",style:{color:r("textSecondary","#6b7280")},children:[(0,Qr.jsx)(Ec,{size:10}),(0,Qr.jsx)("span",{children:E(v.created_at)})]}),(0,Qr.jsx)("div",{className:"prose prose-sm max-w-none text-sm",style:{color:u.text},dangerouslySetInnerHTML:{__html:v.message}})]}),"unread"===v.status&&(0,Qr.jsx)("div",{className:"px-3 py-2 border-t flex-shrink-0",style:{borderColor:r("borderColor","#e5e7eb"),backgroundColor:r("secondaryBackground","#f9fafb")},children:(0,Qr.jsxs)("button",{onClick:()=>x(v.id,"read"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded text-xs font-medium",style:{backgroundColor:r("accent","#f59e0b"),color:"#ffffff"},children:[(0,Qr.jsx)(Ui,{size:14}),e("messages.markAsRead")]})})]})]})},jQ=cn("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),NQ=cn("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),kQ=()=>{const{t:e}=k(),{courseId:t}=pt(),{getColor:r,isDarkMode:n}=Yr(),{course:s,loading:o}=yu(t),i=s?.title?.rendered||s?.title||e("courses.title"),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!0),[f,p]=(0,a.useState)(!1),[m,h]=(0,a.useState)({page:1,total_pages:1,total:0}),[g,x]=(0,a.useState)(0),[y,b]=(0,a.useState)(!1),v={text:n?r("textPrimary","#f9fafb"):r("primary","#1a202c"),textMuted:r("textSecondary","#6b7280"),accent:r("accent","#f59e0b"),primary:r("primary","#1a202c"),background:r("background","#ffffff"),secondaryBg:r("secondaryBackground","#f3f4f6"),cardBg:n?r("secondaryBackground","#1f2937"):"#ffffff",border:n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},w=(0,a.useCallback)(async(e=1,r=!1)=>{1===e?u(!0):p(!0);try{const n=await(async(e,t={})=>{const{page:r=1,per_page:n=20}=t,s=`${_d()}/courses/${e}/notifications?page=${r}&per_page=${n}`;try{return await(0,gn.qb)(s,{method:"GET"})}catch(e){throw console.error("Error fetching notifications:",e),e}})(t,{page:e,per_page:20});if(n.data?.success){const{notifications:e,pagination:t,unread_count:s}=n.data.data;c(r?t=>[...t,...e]:e),h(t),x(s)}}catch(e){console.error("Error fetching notifications:",e)}finally{u(!1),p(!1)}},[t]);(0,a.useEffect)(()=>{t&&w(1)},[t,w]);const j=({notification:e})=>{const t=(r=e.type,{new_lesson:kn,new_quiz:fu,new_video:fl,new_pdf:ul,new_text:Au,lesson_updated:Yi,course_updated:od}[r]||wn);var r;const s=(e=>({new_lesson:"#10b981",new_quiz:"#8b5cf6",new_video:"#3b82f6",new_pdf:"#ef4444",new_text:"#6b7280",lesson_updated:"#f59e0b",course_updated:"#6366f1"}[e]||v.primary))(e.type),a=!e.is_read;return(0,Qr.jsx)("div",{className:"p-4 rounded-xl border transition-all duration-200 "+(a?"cursor-pointer":""),style:{backgroundColor:a?n?"rgba(255,255,255,0.05)":`${v.primary}05`:v.cardBg,borderColor:a?`${v.primary}30`:v.border},onClick:()=>a&&(async e=>{try{await(async e=>{const t=`${_d()}/notifications/${e}/read`;try{return await(0,gn.qb)(t,{method:"POST"})}catch(e){throw console.error("Error marking notification as read:",e),e}})(e),c(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),x(e=>Math.max(0,e-1)),window.dispatchEvent(new CustomEvent("notificationRead"))}catch(e){console.error("Error marking notification as read:",e)}})(e.id),children:(0,Qr.jsxs)("div",{className:"flex items-start gap-4",children:[(0,Qr.jsx)("div",{className:"flex-shrink-0 p-3 rounded-xl",style:{backgroundColor:n?`${s}20`:`${s}15`},children:(0,Qr.jsx)(t,{size:22,style:{color:s}})}),(0,Qr.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,Qr.jsx)("h3",{className:"font-semibold text-sm "+(a?"":"opacity-80"),style:{color:v.text},children:e.title}),a&&(0,Qr.jsx)("span",{className:"flex-shrink-0 w-2 h-2 rounded-full",style:{backgroundColor:v.accent}})]}),(0,Qr.jsx)("p",{className:"text-sm mb-2",style:{color:v.textMuted},children:e.message}),(0,Qr.jsx)("span",{className:"text-xs",style:{color:v.textMuted,opacity:.7},children:e.time_ago})]})]})})};return o||d?(0,Qr.jsx)(ju,{courseId:t,courseName:i,sectionName:e("courseNotifications.title"),children:(0,Qr.jsx)("div",{className:"flex items-center justify-center h-64",style:{backgroundColor:v.secondaryBg},children:(0,Qr.jsxs)("div",{className:"text-center",children:[(0,Qr.jsx)(dn,{className:"animate-spin h-10 w-10 mx-auto mb-3",style:{color:v.primary}}),(0,Qr.jsx)("p",{style:{color:v.textMuted},children:e("common.loading")})]})})}):(0,Qr.jsx)(ju,{courseId:t,courseName:i,sectionName:e("courseNotifications.title"),children:(0,Qr.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 pb-24",children:[(0,Qr.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Qr.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Qr.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:n?`${v.primary}20`:`${v.primary}10`},children:(0,Qr.jsx)(wn,{size:20,style:{color:v.primary}})}),(0,Qr.jsxs)("div",{children:[(0,Qr.jsx)("h1",{className:"text-lg font-bold",style:{color:v.text},children:e("courseNotifications.title")}),g>0&&(0,Qr.jsxs)("p",{className:"text-xs",style:{color:v.textMuted},children:[g," ",e("courseNotifications.unread")]})]})]}),g>0&&(0,Qr.jsxs)("button",{onClick:async()=>{b(!0);try{await(async e=>{const t=`${_d()}/courses/${e}/notifications/read-all`;try{return await(0,gn.qb)(t,{method:"POST"})}catch(e){throw console.error("Error marking all notifications as read:",e),e}})(t),c(e=>e.map(e=>({...e,is_read:!0}))),x(0),window.dispatchEvent(new CustomEvent("notificationsMarkedAllRead"))}catch(e){console.error("Error marking all notifications as read:",e)}finally{b(!1)}},disabled:y,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",style:{backgroundColor:n?`${v.primary}20`:`${v.primary}10`,color:v.primary},children:[y?(0,Qr.jsx)(dn,{className:"w-4 h-4 animate-spin"}):(0,Qr.jsx)(jQ,{className:"w-4 h-4"}),e("courseNotifications.markAllRead")]})]}),l.length>0?(0,Qr.jsxs)("div",{className:"space-y-3",children:[l.map(e=>(0,Qr.jsx)(j,{notification:e},e.id)),m.page<m.total_pages&&(0,Qr.jsx)("div",{className:"text-center pt-4",children:(0,Qr.jsxs)("button",{onClick:()=>{m.page<m.total_pages&&!f&&w(m.page+1,!0)},disabled:f,className:"px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200",style:{backgroundColor:v.cardBg,color:v.text,border:`1px solid ${v.border}`},children:[f?(0,Qr.jsx)(dn,{className:"w-4 h-4 animate-spin inline mr-2"}):null,e("courseNotifications.loadMore")]})})]}):(0,Qr.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 rounded-xl border",style:{backgroundColor:v.cardBg,borderColor:v.border},children:[(0,Qr.jsx)("div",{className:"p-4 rounded-full mb-4",style:{backgroundColor:n?"rgba(255,255,255,0.05)":"#f3f4f6"},children:(0,Qr.jsx)(NQ,{size:48,style:{color:v.textMuted}})}),(0,Qr.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:v.text},children:e("courseNotifications.empty")}),(0,Qr.jsx)("p",{className:"text-sm text-center max-w-sm",style:{color:v.textMuted},children:e("courseNotifications.emptyDescription")})]})]})})},_Q=({children:e})=>window.qe_data?.user?.id>0?e:(0,Qr.jsx)(kt,{to:"/login",replace:!0}),CQ=function(){const e=window.qe_data?.user?.id>0;return(0,Qr.jsx)(Xr,{children:(0,Qr.jsx)(xd,{children:(0,Qr.jsx)(bd,{enablePolling:!0,pollingInterval:3e4,children:(0,Qr.jsxs)(Gt,{children:[(0,Qr.jsxs)(Et,{children:[(0,Qr.jsx)(Ct,{path:"/login",element:e?(0,Qr.jsx)(kt,{to:"/",replace:!0}):(0,Qr.jsx)(Od,{})}),(0,Qr.jsxs)(Ct,{path:"/",element:(0,Qr.jsx)(_Q,{children:(0,Qr.jsx)(Sd,{})}),children:[(0,Qr.jsx)(Ct,{index:!0,element:(0,Qr.jsx)(hu,{})}),(0,Qr.jsx)(Ct,{path:"dashboard",element:(0,Qr.jsx)(Xd,{})}),(0,Qr.jsx)(Ct,{path:"/dashboard/attempts/:attemptId",element:(0,Qr.jsx)(uu,{})}),(0,Qr.jsx)(Ct,{path:"courses",element:(0,Qr.jsx)(hu,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/dashboard",element:(0,Qr.jsx)(Ou,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/study-planner",element:(0,Qr.jsx)(Xv,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/lessons",element:(0,Qr.jsx)(of,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/material",element:(0,Qr.jsx)(Jv,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/videos",element:(0,Qr.jsx)(tw,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/statistics",element:(0,Qr.jsx)(hQ,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/messages",element:(0,Qr.jsx)(wQ,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/notifications",element:(0,Qr.jsx)(kQ,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/test-generator",element:(0,Qr.jsx)(uf,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/self-paced-tests",element:(0,Qr.jsx)(vQ,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/tests",element:(0,Qr.jsx)(iw,{})}),(0,Qr.jsx)(Ct,{path:"courses/:courseId/test-history",element:(0,Qr.jsx)(bf,{})}),(0,Qr.jsx)(Ct,{path:"test/practice",element:(0,Qr.jsx)(yf,{})}),(0,Qr.jsx)(Ct,{path:"test/library",element:(0,Qr.jsx)(mf,{})}),(0,Qr.jsx)(Ct,{path:"test/history",element:(0,Qr.jsx)(bf,{})}),(0,Qr.jsx)(Ct,{path:"statistics",element:(0,Qr.jsx)(_f,{})}),(0,Qr.jsx)(Ct,{path:"quiz/:quizId",element:(0,Qr.jsx)(ff,{})}),(0,Qr.jsx)(Ct,{path:"quiz-generator",element:(0,Qr.jsx)(uf,{})})]})]}),(0,Qr.jsx)($r,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0})]})})})})},SQ=document.getElementById("root"),EQ=document.getElementById("qe-frontend-root");SQ&&l.createRoot(SQ).render((0,Qr.jsx)(i().StrictMode,{children:(0,Qr.jsx)(_,{i18n:ve,children:(0,Qr.jsx)(md,{})})})),EQ&&l.createRoot(EQ).render((0,Qr.jsx)(i().StrictMode,{children:(0,Qr.jsx)(_,{i18n:ve,children:(0,Qr.jsx)(CQ,{})})}))})()})();