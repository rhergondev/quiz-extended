(()=>{var e={2:(e,t,r)=>{var s=r(2199),n=r(4664),a=r(5950);e.exports=function(e){return s(e,a,n)}},79:(e,t,r)=>{var s=r(3702),n=r(80),a=r(4739),o=r(8655),i=r(1175);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}l.prototype.clear=s,l.prototype.delete=n,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},80:(e,t,r)=>{var s=r(6025),n=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=s(t,e);return!(r<0||(r==t.length-1?t.pop():n.call(t,r,1),--this.size,0))}},270:(e,t,r)=>{var s=r(7068),n=r(346);e.exports=function e(t,r,a,o,i){return t===r||(null==t||null==r||!n(t)&&!n(r)?t!=t&&r!=r:s(t,r,a,o,e,i))}},289:(e,t,r)=>{var s=r(2651);e.exports=function(e){return s(this,e).get(e)}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},317:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,s){r[++t]=[s,e]}),r}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var s=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==s||"symbol"!=s&&t.test(e))&&e>-1&&e%1==0&&e<r}},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},659:(e,t,r)=>{var s=r(1873),n=Object.prototype,a=n.hasOwnProperty,o=n.toString,i=s?s.toStringTag:void 0;e.exports=function(e){var t=a.call(e,i),r=e[i];try{e[i]=void 0;var s=!0}catch(e){}var n=o.call(e);return s&&(t?e[i]=r:delete e[i]),n}},689:(e,t,r)=>{var s=r(2),n=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,a,o,i){var l=1&r,c=s(e),u=c.length;if(u!=s(t).length&&!l)return!1;for(var d=u;d--;){var p=c[d];if(!(l?p in t:n.call(t,p)))return!1}var h=i.get(e),f=i.get(t);if(h&&f)return h==t&&f==e;var m=!0;i.set(e,t),i.set(t,e);for(var g=l;++d<u;){var y=e[p=c[d]],x=t[p];if(a)var b=l?a(x,y,p,t,e,i):a(y,x,p,e,t,i);if(!(void 0===b?y===x||o(y,x,r,a,i):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var v=e.constructor,_=t.constructor;v==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _||(m=!1)}return i.delete(e),i.delete(t),m}},695:(e,t,r)=>{var s=r(8096),n=r(2428),a=r(6449),o=r(3656),i=r(361),l=r(7167),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=a(e),u=!r&&n(e),d=!r&&!u&&o(e),p=!r&&!u&&!d&&l(e),h=r||u||d||p,f=h?s(e.length,String):[],m=f.length;for(var g in e)!t&&!c.call(e,g)||h&&("length"==g||d&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,m))||f.push(g);return f}},938:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},945:(e,t,r)=>{var s=r(79),n=r(8223),a=r(3661);e.exports=function(e,t){var r=this.__data__;if(r instanceof s){var o=r.__data__;if(!n||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(o)}return r.set(e,t),this.size=r.size,this}},1042:(e,t,r)=>{var s=r(6110)(Object,"create");e.exports=s},1175:(e,t,r)=>{var s=r(6025);e.exports=function(e,t){var r=this.__data__,n=s(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}},1380:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1420:(e,t,r)=>{var s=r(79);e.exports=function(){this.__data__=new s,this.size=0}},1459:e=>{e.exports=function(e){return this.__data__.has(e)}},1549:(e,t,r)=>{var s=r(2032),n=r(3862),a=r(6721),o=r(2749),i=r(5749);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}l.prototype.clear=s,l.prototype.delete=n,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},1574:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:s})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=109)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(17),n=r(18),a=r(19),o=r(45),i=r(46),l=r(47),c=r(48),u=r(49),d=r(12),p=r(32),h=r(33),f=r(31),m=r(1),g={Scope:m.Scope,create:m.create,find:m.find,query:m.query,register:m.register,Container:s.default,Format:n.default,Leaf:a.default,Embed:c.default,Scroll:o.default,Block:l.default,Inline:i.default,Text:u.default,Attributor:{Attribute:d.default,Class:p.default,Style:h.default,Store:f.default}};t.default=g},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(t){var r=this;return t="[Parchment] "+t,(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,r}return n(t,e),t}(Error);t.ParchmentError=a;var o,i={},l={},c={},u={};function d(e,t){var r;if(void 0===t&&(t=o.ANY),"string"==typeof e)r=u[e]||i[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=u.text;else if("number"==typeof e)e&o.LEVEL&o.BLOCK?r=u.block:e&o.LEVEL&o.INLINE&&(r=u.inline);else if(e instanceof HTMLElement){var s=(e.getAttribute("class")||"").split(/\s+/);for(var n in s)if(r=l[s[n]])break;r=r||c[e.tagName]}return null==r?null:t&o.LEVEL&r.scope&&t&o.TYPE&r.scope?r:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(o=t.Scope||(t.Scope={})),t.create=function(e,t){var r=d(e);if(null==r)throw new a("Unable to create "+e+" blot");var s=r,n=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:s.create(t);return new s(n,t)},t.find=function e(r,s){return void 0===s&&(s=!1),null==r?null:null!=r[t.DATA_KEY]?r[t.DATA_KEY].blot:s?e(r.parentNode,s):null},t.query=d,t.register=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>1)return t.map(function(t){return e(t)});var s=t[0];if("string"!=typeof s.blotName&&"string"!=typeof s.attrName)throw new a("Invalid definition");if("abstract"===s.blotName)throw new a("Cannot register abstract class");return u[s.blotName||s.attrName]=s,"string"==typeof s.keyName?i[s.keyName]=s:(null!=s.className&&(l[s.className]=s),null!=s.tagName&&(Array.isArray(s.tagName)?s.tagName=s.tagName.map(function(e){return e.toUpperCase()}):s.tagName=s.tagName.toUpperCase(),(Array.isArray(s.tagName)?s.tagName:[s.tagName]).forEach(function(e){null!=c[e]&&null!=s.className||(c[e]=s)}))),s}},function(e,t,r){var s=r(51),n=r(11),a=r(3),o=r(20),i=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},l.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=a(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&(t-=1,"object"!=typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(n(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],r=[];return this.forEach(function(s){(e(s)?t:r).push(s)}),[t,r]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+o.length(t):t.delete?e-t.delete:e},0)},l.prototype.length=function(){return this.reduce(function(e,t){return e+o.length(t)},0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r=[],s=o.iterator(this.ops),n=0;n<t&&s.hasNext();){var a;n<e?a=s.next(e-n):(a=s.next(t-n),r.push(a)),n+=o.length(a)}return new l(r)},l.prototype.compose=function(e){var t=o.iterator(this.ops),r=o.iterator(e.ops),s=[],a=r.peek();if(null!=a&&"number"==typeof a.retain&&null==a.attributes){for(var i=a.retain;"insert"===t.peekType()&&t.peekLength()<=i;)i-=t.peekLength(),s.push(t.next());a.retain-i>0&&r.next(a.retain-i)}for(var c=new l(s);t.hasNext()||r.hasNext();)if("insert"===r.peekType())c.push(r.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),r.peekLength()),d=t.next(u),p=r.next(u);if("number"==typeof p.retain){var h={};"number"==typeof d.retain?h.retain=u:h.insert=d.insert;var f=o.attributes.compose(d.attributes,p.attributes,"number"==typeof d.retain);if(f&&(h.attributes=f),c.push(h),!r.hasNext()&&n(c.ops[c.ops.length-1],h)){var m=new l(t.rest());return c.concat(m).chop()}}else"number"==typeof p.delete&&"number"==typeof d.retain&&c.push(p)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var r=[this,e].map(function(t){return t.map(function(r){if(null!=r.insert)return"string"==typeof r.insert?r.insert:i;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")}),a=new l,c=s(r[0],r[1],t),u=o.iterator(this.ops),d=o.iterator(e.ops);return c.forEach(function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case s.INSERT:r=Math.min(d.peekLength(),t),a.push(d.next(r));break;case s.DELETE:r=Math.min(t,u.peekLength()),u.next(r),a.delete(r);break;case s.EQUAL:r=Math.min(u.peekLength(),d.peekLength(),t);var i=u.next(r),l=d.next(r);n(i.insert,l.insert)?a.retain(r,o.attributes.diff(i.attributes,l.attributes)):a.push(l).delete(r)}t-=r}}),a.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var r=o.iterator(this.ops),s=new l,n=0;r.hasNext();){if("insert"!==r.peekType())return;var a=r.peek(),i=o.length(a)-r.peekLength(),c="string"==typeof a.insert?a.insert.indexOf(t,i)-i:-1;if(c<0)s.push(r.next());else if(c>0)s.push(r.next(c));else{if(!1===e(s,r.next(1).attributes||{},n))return;n+=1,s=new l}}s.length()>0&&e(s,{},n)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=o.iterator(this.ops),s=o.iterator(e.ops),n=new l;r.hasNext()||s.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===s.peekType())if("insert"===s.peekType())n.push(s.next());else{var a=Math.min(r.peekLength(),s.peekLength()),i=r.next(a),c=s.next(a);if(i.delete)continue;c.delete?n.push(c):n.retain(a,o.attributes.transform(i.attributes,c.attributes,t))}else n.retain(o.length(r.next()));return n.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var r=o.iterator(this.ops),s=0;r.hasNext()&&s<=e;){var n=r.peekLength(),a=r.peekType();r.next(),"delete"!==a?("insert"===a&&(s<e||!t)&&(e+=n),s+=n):e-=Math.min(n,e-s)}return e},e.exports=l},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,s=Object.prototype.toString,n=Object.defineProperty,a=Object.getOwnPropertyDescriptor,o=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===s.call(e)},i=function(e){if(!e||"[object Object]"!==s.call(e))return!1;var t,n=r.call(e,"constructor"),a=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!a)return!1;for(t in e);return void 0===t||r.call(e,t)},l=function(e,t){n&&"__proto__"===t.name?n(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(a)return a(e,t).value}return e[t]};e.exports=function e(){var t,r,s,n,a,u,d=arguments[0],p=1,h=arguments.length,f=!1;for("boolean"==typeof d&&(f=d,d=arguments[1]||{},p=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});p<h;++p)if(null!=(t=arguments[p]))for(r in t)s=c(d,r),d!==(n=c(t,r))&&(f&&n&&(i(n)||(a=o(n)))?(a?(a=!1,u=s&&o(s)?s:[]):u=s&&i(s)?s:{},l(d,{name:r,newValue:e(f,u,n)})):void 0!==n&&l(d,{name:r,newValue:n}));return d}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},a=d(r(3)),o=d(r(2)),i=d(r(0)),l=d(r(16)),c=d(r(6)),u=d(r(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),s(t,[{key:"attach",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new i.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new o.default).insert(this.value(),(0,a.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var r=i.default.query(e,i.default.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,t)}},{key:"formatAt",value:function(e,t,r,s){this.format(r,s)}},{key:"insertAt",value:function(e,r,s){if("string"==typeof r&&r.endsWith("\n")){var a=i.default.create(g.blotName);this.parent.insertBefore(a,0===e?this:this.next),a.insertAt(0,r.slice(0,-1))}else n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,s)}}]),t}(i.default.Embed);m.scope=i.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){p(this,t);var r=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cache={},r}return f(t,e),s(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(i.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),y(t))},new o.default).insert("\n",y(this))),this.cache.delta}},{key:"deleteAt",value:function(e,r){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),this.cache={}}},{key:"formatAt",value:function(e,r,s,a){r<=0||(i.default.query(s,i.default.Scope.BLOCK)?e+r===this.length()&&this.format(s,a):n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(r,this.length()-e-1),s,a),this.cache={})}},{key:"insertAt",value:function(e,r,s){if(null!=s)return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,s);if(0!==r.length){var a=r.split("\n"),o=a.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var i=this;a.reduce(function(e,t){return(i=i.split(e,!0)).insertAt(0,t),t.length},e+o.length)}}},{key:"insertBefore",value:function(e,r){var s=this.children.head;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r),s instanceof l.default&&s.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,r){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,r),this.cache={}}},{key:"optimize",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(0===e||e>=this.length()-1)){var s=this.clone();return 0===e?(this.parent.insertBefore(s,this),this):(this.parent.insertBefore(s,this.next),s)}var a=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,r);return this.cache={},a}}]),t}(i.default.Block);function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,a.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:y(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,i.default.Embed,u.default],t.bubbleFormats=y,t.BlockEmbed=m,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}();r(50);var o=g(r(2)),i=g(r(14)),l=g(r(8)),c=g(r(9)),u=g(r(0)),d=r(15),p=g(d),h=g(r(3)),f=g(r(10)),m=g(r(34));function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(0,f.default)("quill"),b=function(){function e(t){var r=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=v(t,s),this.container=this.options.container,null==this.container)return x.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new i.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e){e===l.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(e,t){var s=r.selection.lastRange,n=s&&0===s.length?s.index:void 0;_.call(r,function(){return r.editor.update(null,t,n)},e)});var a=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+n+"<p><br></p></div>");this.setContents(a),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return a(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),f.default.level(e)}},{key:"find",value:function(e){return e.__quill||u.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&x.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var r=this,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var n=e.attrName||e.blotName;"string"==typeof n?this.register("formats/"+n,e,t):Object.keys(e).forEach(function(s){r.register(s,e[s],t)})}else null==this.imports[e]||s||x.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?u.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),a(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var r=e;(e=document.createElement("div")).classList.add(r)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var s=this,a=j(e,t,r),o=n(a,4);return e=o[0],t=o[1],r=o[3],_.call(this,function(){return s.editor.deleteText(e,t)},r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return _.call(this,function(){var s=r.getSelection(!0),n=new o.default;if(null==s)return n;if(u.default.query(e,u.default.Scope.BLOCK))n=r.editor.formatLine(s.index,s.length,y({},e,t));else{if(0===s.length)return r.selection.format(e,t),n;n=r.editor.formatText(s.index,s.length,y({},e,t))}return r.setSelection(s,l.default.sources.SILENT),n},s)}},{key:"formatLine",value:function(e,t,r,s,a){var o,i=this,l=j(e,t,r,s,a),c=n(l,4);return e=c[0],t=c[1],o=c[2],a=c[3],_.call(this,function(){return i.editor.formatLine(e,t,o)},a,e,0)}},{key:"formatText",value:function(e,t,r,s,a){var o,i=this,l=j(e,t,r,s,a),c=n(l,4);return e=c[0],t=c[1],o=c[2],a=c[3],_.call(this,function(){return i.editor.formatText(e,t,o)},a,e,0)}},{key:"getBounds",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t="number"==typeof e?this.selection.getBounds(e,r):this.selection.getBounds(e.index,e.length);var s=this.container.getBoundingClientRect();return{bottom:t.bottom-s.top,height:t.height,left:t.left-s.left,right:t.right-s.left,top:t.top-s.top,width:t.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),s=n(r,2);return e=s[0],t=s[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=j(e,t),s=n(r,2);return e=s[0],t=s[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,r,s){var n=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return _.call(this,function(){return n.editor.insertEmbed(t,r,s)},a,t)}},{key:"insertText",value:function(e,t,r,s,a){var o,i=this,l=j(e,0,r,s,a),c=n(l,4);return e=c[0],o=c[2],a=c[3],_.call(this,function(){return i.editor.insertText(e,t,o)},a,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var s=this,a=j(e,t,r),o=n(a,4);return e=o[0],t=o[1],r=o[3],_.call(this,function(){return s.editor.removeFormat(e,t)},r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return _.call(this,function(){e=new o.default(e);var r=t.getLength(),s=t.editor.deleteText(0,r),n=t.editor.applyDelta(e),a=n.ops[n.ops.length-1];return null!=a&&"string"==typeof a.insert&&"\n"===a.insert[a.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),n.delete(1)),s.compose(n)},r)}},{key:"setSelection",value:function(t,r,s){if(null==t)this.selection.setRange(null,r||e.sources.API);else{var a=j(t,r,s),o=n(a,4);t=o[0],r=o[1],s=o[3],this.selection.setRange(new d.Range(t,r),s),s!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,r=(new o.default).insert(e);return this.setContents(r,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return _.call(this,function(){return e=new o.default(e),t.editor.applyDelta(e,r)},r,!0)}}]),e}();function v(e,t){if((t=(0,h.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==b.DEFAULTS.theme){if(t.theme=b.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=m.default;var r=(0,h.default)(!0,{},t.theme.DEFAULTS);[r,t].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});var s=Object.keys(r.modules).concat(Object.keys(t.modules)).reduce(function(e,t){var r=b.import("modules/"+t);return null==r?x.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e},{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,h.default)(!0,{},b.DEFAULTS,{modules:s},r,t),["bounds","container","scrollingContainer"].forEach(function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),t.modules=Object.keys(t.modules).reduce(function(e,r){return t.modules[r]&&(e[r]=t.modules[r]),e},{}),t}function _(e,t,r,s){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new o.default;var n=null==r?null:this.getSelection(),a=this.editor.delta,i=e();if(null!=n&&(!0===r&&(r=n.index),null==s?n=w(n,i,t):0!==s&&(n=w(n,r,s,t)),this.setSelection(n,l.default.sources.SILENT)),i.length()>0){var c,u,d=[l.default.events.TEXT_CHANGE,i,a,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(d)),t!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,d)}return i}function j(e,t,r,n,a){var o={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(a=n,n=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(a=n,n=r,r=t,t=0),"object"===(void 0===r?"undefined":s(r))?(o=r,a=n):"string"==typeof r&&(null!=n?o[r]=n:a=r),[e,t,o,a=a||l.default.sources.API]}function w(e,t,r,s){if(null==e)return null;var a=void 0,i=void 0;if(t instanceof o.default){var c=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,s!==l.default.sources.USER)}),u=n(c,2);a=u[0],i=u[1]}else{var p=[e.index,e.index+e.length].map(function(e){return e<t||e===t&&s===l.default.sources.USER?e:r>=0?e+r:Math.max(t,e+r)}),h=n(p,2);a=h[0],i=h[1]}return new d.Range(a,i-a)}b.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},b.events=l.default.events,b.sources=l.default.sources,b.version="1.3.7",b.imports={delta:o.default,parchment:u.default,"core/module":c.default,"core/theme":m.default},t.expandConfig=v,t.overload=j,t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},a=i(r(7)),o=i(r(0));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"formatAt",value:function(e,r,s,a){if(t.compare(this.statics.blotName,s)<0&&o.default.query(s,o.default.Scope.BLOT)){var i=this.isolate(e,r);a&&i.wrap(s,a)}else n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,s,a)}},{key:"optimize",value:function(e){if(n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(e,r){var s=t.order.indexOf(e),n=t.order.indexOf(r);return s>=0||n>=0?s-n:e===r?0:e<r?-1:1}}]),t}(o.default.Inline);l.allowedChildren=[l,o.default.Embed,a.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r(0))&&s.__esModule?s:{default:s}).default.Text);t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},a=o(r(54));function o(e){return e&&e.__esModule?e:{default:e}}var i=(0,o(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){var r;e.__quill&&e.__quill.emitter&&(r=e.__quill.emitter).handleDOM.apply(r,t)})})});var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",i.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"emit",value:function(){i.log.apply(i,arguments),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];(this.listeners[e.type]||[]).forEach(function(t){var s=t.node,n=t.handler;(e.target===s||s.contains(e.target))&&n.apply(void 0,[e].concat(r))})}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(a.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r};s.DEFAULTS={},t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=["error","warn","log","info"],n="warn";function a(e){if(s.indexOf(e)<=s.indexOf(n)){for(var t,r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];(t=console)[e].apply(t,a)}}function o(e){return s.reduce(function(t,r){return t[r]=a.bind(console,r,e),t},{})}a.level=o.level=function(e){n=e},t.default=o},function(e,t,r){var s=Array.prototype.slice,n=r(52),a=r(53),o=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,u;if(i(e)||i(t))return!1;if(e.prototype!==t.prototype)return!1;if(a(e))return!!a(t)&&(e=s.call(e),t=s.call(t),o(e,t,r));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var d=n(e),p=n(t)}catch(e){return!1}if(d.length!=p.length)return!1;for(d.sort(),p.sort(),c=d.length-1;c>=0;c--)if(d[c]!=p[c])return!1;for(c=d.length-1;c>=0;c--)if(u=d[c],!o(e[u],t[u],r))return!1;return typeof e==typeof t}(e,t,r))};function i(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),n=function(){function e(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;var n=s.Scope.TYPE&s.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&s.Scope.LEVEL|n:this.scope=s.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=s.query(e,s.Scope.BLOT&(this.scope|s.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=d(r(2)),i=d(r(0)),l=d(r(4)),c=d(r(6)),u=d(r(7));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),t}(c.default);m.blotName="code",m.tagName="CODE";var g=function(e){function t(){return p(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),n(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,r){return t.insert(r).insert("\n",e.formats())},new o.default)}},{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r){var n=this.descendant(u.default,this.length()-1),o=s(n,1)[0];null!=o&&o.deleteAt(o.length()-1,1),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}},{key:"formatAt",value:function(e,r,s,n){if(0!==r&&null!=i.default.query(s,i.default.Scope.BLOCK)&&(s!==this.statics.blotName||n!==this.statics.formats(this.domNode))){var a=this.newlineIndex(e);if(!(a<0||a>=e+r)){var o=this.newlineIndex(e,!0)+1,l=a-o+1,c=this.isolate(o,l),u=c.next;c.format(s,n),u instanceof t&&u.formatAt(0,e-o+r-l,s,n)}}}},{key:"insertAt",value:function(e,t,r){if(null==r){var n=this.descendant(u.default,e),a=s(n,2),o=a[0],i=a[1];o.insertAt(i,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(i.default.create("text","\n")),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===r.statics.formats(r.domNode)&&(r.optimize(e),r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=i.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof i.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("spellcheck",!1),r}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=m,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),o=y(r(2)),i=y(r(20)),l=y(r(0)),c=y(r(13)),u=y(r(24)),d=r(4),p=y(d),h=y(r(16)),f=y(r(21)),m=y(r(11)),g=y(r(3));function y(e){return e&&e.__esModule?e:{default:e}}var x=/^[ -~]*$/,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return a(e,[{key:"applyDelta",value:function(e){var t=this,r=!1;this.scroll.update();var a=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce(function(e,t){if(1===t.insert){var r=(0,f.default)(t.attributes);return delete r.image,e.insert({image:t.attributes.image},r)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,f.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var s=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(s,t.attributes)}return e.push(t)},new o.default)}(e)).reduce(function(e,o){var c=o.retain||o.delete||o.insert.length||1,u=o.attributes||{};if(null!=o.insert){if("string"==typeof o.insert){var h=o.insert;h.endsWith("\n")&&r&&(r=!1,h=h.slice(0,-1)),e>=a&&!h.endsWith("\n")&&(r=!0),t.scroll.insertAt(e,h);var f=t.scroll.line(e),m=n(f,2),y=m[0],x=m[1],b=(0,g.default)({},(0,d.bubbleFormats)(y));if(y instanceof p.default){var v=y.descendant(l.default.Leaf,x),_=n(v,1)[0];b=(0,g.default)(b,(0,d.bubbleFormats)(_))}u=i.default.attributes.diff(b,u)||{}}else if("object"===s(o.insert)){var j=Object.keys(o.insert)[0];if(null==j)return e;t.scroll.insertAt(e,j,o.insert[j])}a+=c}return Object.keys(u).forEach(function(r){t.scroll.formatAt(e,c,r,u[r])}),e+c},0),e.reduce(function(e,r){return"number"==typeof r.delete?(t.scroll.deleteAt(e,r.delete),e):e+(r.retain||r.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new o.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(s).forEach(function(n){if(null==r.scroll.whitelist||r.scroll.whitelist[n]){var a=r.scroll.lines(e,Math.max(t,1)),o=t;a.forEach(function(t){var a=t.length();if(t instanceof c.default){var i=e-t.offset(r.scroll),l=t.newlineIndex(i+o)-i+1;t.formatAt(i,l,n,s[n])}else t.format(n,s[n]);o-=a})}}),this.scroll.optimize(),this.update((new o.default).retain(e).retain(t,(0,f.default)(s)))}},{key:"formatText",value:function(e,t){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(s).forEach(function(n){r.scroll.formatAt(e,t,n,s[n])}),this.update((new o.default).retain(e).retain(t,(0,f.default)(s)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new o.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],s=[];0===t?this.scroll.path(e).forEach(function(e){var t=n(e,1)[0];t instanceof p.default?r.push(t):t instanceof l.default.Leaf&&s.push(t)}):(r=this.scroll.lines(e,t),s=this.scroll.descendants(l.default.Leaf,e,t));var a=[r,s].map(function(e){if(0===e.length)return{};for(var t=(0,d.bubbleFormats)(e.shift());Object.keys(t).length>0;){var r=e.shift();if(null==r)return t;t=v((0,d.bubbleFormats)(r),t)}return t});return g.default.apply(g.default,a)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"==typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new o.default).retain(e).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r)))}},{key:"insertText",value:function(e,t){var r=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(s).forEach(function(n){r.scroll.formatAt(e,t.length,n,s[n])}),this.update((new o.default).retain(e).insert(t,(0,f.default)(s)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===p.default.blotName&&!(e.children.length>1)&&e.children.head instanceof h.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),s=this.scroll.line(e+t),a=n(s,2),i=a[0],l=a[1],u=0,d=new o.default;null!=i&&(u=i instanceof c.default?i.newlineIndex(l)-l+1:i.length()-l,d=i.delta().slice(l,l+u-1).insert("\n"));var p=this.getContents(e,t+u).diff((new o.default).insert(r).concat(d)),h=(new o.default).retain(e).concat(p);return this.applyDelta(h)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(x)&&l.default.find(t[0].target)){var n=l.default.find(t[0].target),a=(0,d.bubbleFormats)(n),i=n.offset(this.scroll),c=t[0].oldValue.replace(u.default.CONTENTS,""),p=(new o.default).insert(c),h=(new o.default).insert(n.value());e=(new o.default).retain(i).concat(p.diff(h,r)).reduce(function(e,t){return t.insert?e.insert(t.insert,a):e.push(t)},new o.default),this.delta=s.compose(e)}else this.delta=this.getDelta(),e&&(0,m.default)(s.compose(e),this.delta)||(e=s.diff(this.delta,r));return e}}]),e}();function v(e,t){return Object.keys(t).reduce(function(r,s){return null==e[s]||(t[s]===e[s]?r[s]=t[s]:Array.isArray(t[s])?t[s].indexOf(e[s])<0&&(r[s]=t[s].concat([e[s]])):r[s]=[t[s],e[s]]),r},{})}t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=c(r(0)),o=c(r(21)),i=c(r(11)),l=c(r(8));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=(0,c(r(10)).default)("quill:selection"),h=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.index=t,this.length=r},f=function(){function e(t,r){var s=this;d(this,e),this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=a.default.create("cursor",this),this.lastRange=this.savedRange=new h(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){s.mouseDown||setTimeout(s.update.bind(s,l.default.sources.USER),1)}),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&s.update(l.default.sources.SILENT)}),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,function(){if(s.hasFocus()){var e=s.getNativeRange();null!=e&&e.start.node!==s.cursor.textNode&&s.emitter.once(l.default.events.SCROLL_UPDATE,function(){try{s.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(e){}})}}),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,function(e,t){if(t.range){var r=t.range,n=r.startNode,a=r.startOffset,o=r.endNode,i=r.endOffset;s.setNativeRange(n,a,o,i)}}),this.update(l.default.sources.SILENT)}return n(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(l.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!a.default.query(e,a.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var s=a.default.find(r.start.node,!1);if(null==s)return;if(s instanceof a.default.Leaf){var n=s.split(r.start.offset);s.parent.insertBefore(this.cursor,n)}else s.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;var n=void 0,a=this.scroll.leaf(e),o=s(a,2),i=o[0],l=o[1];if(null==i)return null;var c=i.position(l,!0),u=s(c,2);n=u[0],l=u[1];var d=document.createRange();if(t>0){d.setStart(n,l);var p=this.scroll.leaf(e+t),h=s(p,2);if(i=h[0],l=h[1],null==i)return null;var f=i.position(l,!0),m=s(f,2);return n=m[0],l=m[1],d.setEnd(n,l),d.getBoundingClientRect()}var g="left",y=void 0;return n instanceof Text?(l<n.data.length?(d.setStart(n,l),d.setEnd(n,l+1)):(d.setStart(n,l-1),d.setEnd(n,l),g="right"),y=d.getBoundingClientRect()):(y=i.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:y.top+y.height,height:y.height,left:y[g],right:y[g],top:y.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var r=this.normalizeNative(t);return p.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);var n=r.map(function(e){var r=s(e,2),n=r[0],o=r[1],i=a.default.find(n,!0),l=i.offset(t.scroll);return 0===o?l:i instanceof a.default.Container?l+i.length():l+i.index(n,o)}),o=Math.min(Math.max.apply(Math,u(n)),this.scroll.length()-1),i=Math.min.apply(Math,[o].concat(u(n)));return new h(i,o-i)}},{key:"normalizeNative",value:function(e){if(!m(this.root,e.startContainer)||!e.collapsed&&!m(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r}),t}},{key:"rangeToNative",value:function(e){var t=this,r=e.collapsed?[e.index]:[e.index,e.index+e.length],n=[],a=this.scroll.length();return r.forEach(function(e,r){e=Math.min(a-1,e);var o,i=t.scroll.leaf(e),l=s(i,2),c=l[0],u=l[1],d=c.position(u,0!==r),p=s(d,2);o=p[0],u=p[1],n.push(o,u)}),n.length<2&&(n=n.concat(n)),n}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var r=this.getBounds(t.index,t.length);if(null!=r){var n=this.scroll.length()-1,a=this.scroll.line(Math.min(t.index,n)),o=s(a,1)[0],i=o;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,n));i=s(l,1)[0]}if(null!=o&&null!=i){var c=e.getBoundingClientRect();r.top<c.top?e.scrollTop-=c.top-r.top:r.bottom>c.bottom&&(e.scrollTop+=r.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p.info("setNativeRange",e,t,r,s),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=r.parentNode){var a=document.getSelection();if(null!=a)if(null!=e){this.hasFocus()||this.root.focus();var o=(this.getNativeRange()||{}).native;if(null==o||n||e!==o.startContainer||t!==o.startOffset||r!==o.endContainer||s!==o.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==r.tagName&&(s=[].indexOf.call(r.parentNode.childNodes,r),r=r.parentNode);var i=document.createRange();i.setStart(e,t),i.setEnd(r,s),a.removeAllRanges(),a.addRange(i)}}else a.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof t&&(r=t,t=!1),p.info("setRange",e),null!=e){var s=this.rangeToNative(e);this.setNativeRange.apply(this,u(s).concat([t]))}else this.setNativeRange(null);this.update(r)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,r=this.getRange(),n=s(r,2),a=n[0],c=n[1];if(this.lastRange=a,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,i.default)(t,this.lastRange)){var u;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var d,p=[l.default.events.SELECTION_CHANGE,(0,o.default)(this.lastRange),(0,o.default)(t),e];(u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(p)),e!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,p)}}}]),e}();function m(e,t){try{t.parentNode}catch(e){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=h,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"insertInto",value:function(e,r){0===e.children.length?a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((s=r(0))&&s.__esModule?s:{default:s}).default.Embed);o.blotName="break",o.tagName="BR",t.default=o},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(44),o=r(30),i=r(1),l=function(e){function t(t){var r=e.call(this,t)||this;return r.build(),r}return n(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},t.prototype.build=function(){var e=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var r=c(t);e.insertBefore(r,e.children.head||void 0)}catch(e){if(e instanceof i.ParchmentError)return;throw e}})},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,function(e,t,r){e.deleteAt(t,r)})},t.prototype.descendant=function(e,r){var s=this.children.find(r),n=s[0],a=s[1];return null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e?[n,a]:n instanceof t?n.descendant(e,a):[null,-1]},t.prototype.descendants=function(e,r,s){void 0===r&&(r=0),void 0===s&&(s=Number.MAX_VALUE);var n=[],a=s;return this.children.forEachAt(r,s,function(r,s,o){(null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e)&&n.push(r),r instanceof t&&(n=n.concat(r.descendants(e,s,a))),a-=o}),n},t.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,r,s){this.children.forEachAt(e,t,function(e,t,n){e.formatAt(t,n,r,s)})},t.prototype.insertAt=function(e,t,r){var s=this.children.find(e),n=s[0],a=s[1];if(n)n.insertAt(a,t,r);else{var o=null==r?i.create("text",t):i.create(t,r);this.appendChild(o)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new i.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},t.prototype.moveChildren=function(e,t){this.children.forEach(function(r){e.insertBefore(r,t)})},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var r=i.create(this.statics.defaultChild);this.appendChild(r),r.optimize(t)}else this.remove()},t.prototype.path=function(e,r){void 0===r&&(r=!1);var s=this.children.find(e,r),n=s[0],a=s[1],o=[[this,e]];return n instanceof t?o.concat(n.path(a,r)):(null!=n&&o.push([n,a]),o)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(e,this.length(),function(e,s,n){e=e.split(s,t),r.appendChild(e)}),r},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var r=this,s=[],n=[];e.forEach(function(e){e.target===r.domNode&&"childList"===e.type&&(s.push.apply(s,e.addedNodes),n.push.apply(n,e.removedNodes))}),n.forEach(function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=i.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==r.domNode||t.detach())}}),s.filter(function(e){return e.parentNode==r.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var t=null;null!=e.nextSibling&&(t=i.find(e.nextSibling));var s=c(e);s.next==t&&null!=s.next||(null!=s.parent&&s.parent.removeChild(r),r.insertBefore(s,t||void 0))})},t}(o.default);function c(e){var t=i.find(e);if(null==t)try{t=i.create(e)}catch(r){t=i.create(i.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(e){t.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(12),o=r(31),i=r(17),l=r(1),c=function(e){function t(t){var r=e.call(this,t)||this;return r.attributes=new o.default(r.domNode),r}return n(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var r=l.query(e);r instanceof a.default?this.attributes.attribute(r,t):t&&(null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,r){var s=e.prototype.replaceWith.call(this,t,r);return this.attributes.copy(s),s},t.prototype.update=function(t,r){var s=this;e.prototype.update.call(this,t,r),t.some(function(e){return e.target===s.domNode&&"attributes"===e.type})&&this.attributes.build()},t.prototype.wrap=function(r,s){var n=e.prototype.wrap.call(this,r,s);return n instanceof t&&n.statics.scope===this.statics.scope&&this.attributes.move(n),n},t}(i.default);t.default=c},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(30),o=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=o.Scope.INLINE_BLOT,t}(a.default);t.default=i},function(e,t,r){var s=r(11),n=r(3),a={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var s=n(!0,{},t);for(var a in r||(s=Object.keys(s).reduce(function(e,t){return null!=s[t]&&(e[t]=s[t]),e},{})),e)void 0!==e[a]&&void 0===t[a]&&(s[a]=e[a]);return Object.keys(s).length>0?s:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce(function(r,n){return s(e[n],t[n])||(r[n]=void 0===t[n]?null:t[n]),r},{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!=typeof e)return t;if("object"==typeof t){if(!r)return t;var s=Object.keys(t).reduce(function(r,s){return void 0===e[s]&&(r[s]=t[s]),r},{});return Object.keys(s).length>0?s:void 0}}},iterator:function(e){return new o(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function o(e){this.ops=e,this.index=0,this.offset=0}o.prototype.hasNext=function(){return this.peekLength()<1/0},o.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,s=a.length(t);if(e>=s-r?(e=s-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var n={};return t.attributes&&(n.attributes=t.attributes),"number"==typeof t.retain?n.retain=e:"string"==typeof t.insert?n.insert=t.insert.substr(r,e):n.insert=t.insert,n}return{retain:1/0}},o.prototype.peek=function(){return this.ops[this.index]},o.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},o.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},o.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),s=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(s)}return[]},e.exports=a},function(e,t){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,s;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{s=Promise}catch(e){s=function(){}}function n(a,i,l,c,u){"object"==typeof i&&(l=i.depth,c=i.prototype,u=i.includeNonEnumerable,i=i.circular);var d=[],p=[],h="undefined"!=typeof Buffer;return void 0===i&&(i=!0),void 0===l&&(l=1/0),function a(l,f){if(null===l)return null;if(0===f)return l;var m,g;if("object"!=typeof l)return l;if(e(l,t))m=new t;else if(e(l,r))m=new r;else if(e(l,s))m=new s(function(e,t){l.then(function(t){e(a(t,f-1))},function(e){t(a(e,f-1))})});else if(n.__isArray(l))m=[];else if(n.__isRegExp(l))m=new RegExp(l.source,o(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(n.__isDate(l))m=new Date(l.getTime());else{if(h&&Buffer.isBuffer(l))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(m),m;e(l,Error)?m=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),m=Object.create(g)):(m=Object.create(c),g=c)}if(i){var y=d.indexOf(l);if(-1!=y)return p[y];d.push(l),p.push(m)}for(var x in e(l,t)&&l.forEach(function(e,t){var r=a(t,f-1),s=a(e,f-1);m.set(r,s)}),e(l,r)&&l.forEach(function(e){var t=a(e,f-1);m.add(t)}),l){var b;g&&(b=Object.getOwnPropertyDescriptor(g,x)),b&&null==b.set||(m[x]=a(l[x],f-1))}if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(l);for(x=0;x<v.length;x++){var _=v[x];(!(w=Object.getOwnPropertyDescriptor(l,_))||w.enumerable||u)&&(m[_]=a(l[_],f-1),w.enumerable||Object.defineProperty(m,_,{enumerable:!1}))}}if(u){var j=Object.getOwnPropertyNames(l);for(x=0;x<j.length;x++){var w,N=j[x];(w=Object.getOwnPropertyDescriptor(l,N))&&w.enumerable||(m[N]=a(l[N],f-1),Object.defineProperty(m,N,{enumerable:!1}))}}return m}(a,l)}function a(e){return Object.prototype.toString.call(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return n.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},n.__objToStr=a,n.__isDate=function(e){return"object"==typeof e&&"[object Date]"===a(e)},n.__isArray=function(e){return"object"==typeof e&&"[object Array]"===a(e)},n.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===a(e)},n.__getRegExpFlags=o,n}();"object"==typeof e&&e.exports&&(e.exports=r)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=h(r(0)),i=h(r(8)),l=r(4),c=h(l),u=h(r(16)),d=h(r(13)),p=h(r(25));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){return e instanceof c.default||e instanceof l.BlockEmbed}var m=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.emitter=r.emitter,Array.isArray(r.whitelist)&&(s.whitelist=r.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),s.domNode.addEventListener("DOMNodeInserted",function(){}),s.optimize(),s.enable(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,r){var n=this.line(e),o=s(n,2),i=o[0],c=o[1],p=this.line(e+r),h=s(p,1)[0];if(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),null!=h&&i!==h&&c>0){if(i instanceof l.BlockEmbed||h instanceof l.BlockEmbed)return void this.optimize();if(i instanceof d.default){var f=i.newlineIndex(i.length(),!0);if(f>-1&&(i=i.split(f+1))===h)return void this.optimize()}else if(h instanceof d.default){var m=h.newlineIndex(0);m>-1&&h.split(m+1)}var g=h.children.head instanceof u.default?null:h.children.head;i.moveChildren(h,g),i.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,r,s,n){(null==this.whitelist||this.whitelist[s])&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,s,n),this.optimize())}},{key:"insertAt",value:function(e,r,s){if(null==s||null==this.whitelist||this.whitelist[r]){if(e>=this.length())if(null==s||null==o.default.query(r,o.default.Scope.BLOCK)){var n=o.default.create(this.statics.defaultChild);this.appendChild(n),null==s&&r.endsWith("\n")&&(r=r.slice(0,-1)),n.insertAt(0,r,s)}else{var i=o.default.create(r,s);this.appendChild(i)}else a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,s);this.optimize()}}},{key:"insertBefore",value:function(e,r){if(e.statics.scope===o.default.Scope.INLINE_BLOT){var s=o.default.create(this.statics.defaultChild);s.appendChild(e),e=s}a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(f,e)}},{key:"lines",value:function(){return function e(t,r,s){var n=[],a=s;return t.children.forEachAt(r,s,function(t,r,s){f(t)?n.push(t):t instanceof o.default.Container&&(n=n.concat(e(t,r,a))),a-=s}),n}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,r),e.length>0&&this.emitter.emit(i.default.events.SCROLL_OPTIMIZE,e,r))}},{key:"path",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var r=i.default.sources.USER;"string"==typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(i.default.events.SCROLL_BEFORE_UPDATE,r,e),a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(i.default.events.SCROLL_UPDATE,r,e)}}}]),t}(o.default.Scroll);m.blotName="scroll",m.className="ql-editor",m.tagName="DIV",m.defaultChild="block",m.allowedChildren=[c.default,l.BlockEmbed,p.default],t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),o=m(r(21)),i=m(r(11)),l=m(r(3)),c=m(r(2)),u=m(r(20)),d=m(r(0)),p=m(r(5)),h=m(r(10)),f=m(r(9));function m(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,h.default)("quill:keyboard"),x=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s.bindings={},Object.keys(s.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&s.options.bindings[t]&&s.addBinding(s.options.bindings[t])}),s.addBinding({key:t.keys.ENTER,shiftKey:null},N),s.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(s.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},_),s.addBinding({key:t.keys.DELETE},{collapsed:!0},j)):(s.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},_),s.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},j)),s.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},w),s.addBinding({key:t.keys.DELETE},{collapsed:!1},w),s.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},_),s.listen(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,null,[{key:"match",value:function(e,t){return t=E(t),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(r){return!!t[r]!==e[r]&&null!==t[r]})&&t.key===(e.which||e.keyCode)}}]),a(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=E(e);if(null==s||null==s.key)return y.warn("Attempted to add invalid keyboard binding",s);"function"==typeof t&&(t={handler:t}),"function"==typeof r&&(r={handler:r}),s=(0,l.default)(s,t,r),this.bindings[s.key]=this.bindings[s.key]||[],this.bindings[s.key].push(s)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",function(r){if(!r.defaultPrevented){var a=r.which||r.keyCode,o=(e.bindings[a]||[]).filter(function(e){return t.match(r,e)});if(0!==o.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),u=n(c,2),p=u[0],h=u[1],f=e.quill.getLeaf(l.index),m=n(f,2),g=m[0],y=m[1],x=0===l.length?[g,y]:e.quill.getLeaf(l.index+l.length),b=n(x,2),v=b[0],_=b[1],j=g instanceof d.default.Text?g.value().slice(0,y):"",w=v instanceof d.default.Text?v.value().slice(_):"",N={collapsed:0===l.length,empty:0===l.length&&p.length()<=1,format:e.quill.getFormat(l),offset:h,prefix:j,suffix:w};o.some(function(t){if(null!=t.collapsed&&t.collapsed!==N.collapsed)return!1;if(null!=t.empty&&t.empty!==N.empty)return!1;if(null!=t.offset&&t.offset!==N.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==N.format[e]}))return!1}else if("object"===s(t.format)&&!Object.keys(t.format).every(function(e){return!0===t.format[e]?null!=N.format[e]:!1===t.format[e]?null==N.format[e]:(0,i.default)(t.format[e],N.format[e])}))return!1;return!(null!=t.prefix&&!t.prefix.test(N.prefix)||null!=t.suffix&&!t.suffix.test(N.suffix)||!0===t.handler.call(e,l,N))})&&r.preventDefault()}}}})}}]),t}(f.default);function v(e,t){var r,s=e===b.keys.LEFT?"prefix":"suffix";return g(r={key:e,shiftKey:t,altKey:null},s,/^$/),g(r,"handler",function(r){var s=r.index;e===b.keys.RIGHT&&(s+=r.length+1);var a=this.quill.getLeaf(s);return!(n(a,1)[0]instanceof d.default.Embed&&(e===b.keys.LEFT?t?this.quill.setSelection(r.index-1,r.length+1,p.default.sources.USER):this.quill.setSelection(r.index-1,p.default.sources.USER):t?this.quill.setSelection(r.index,r.length+1,p.default.sources.USER):this.quill.setSelection(r.index+r.length+1,p.default.sources.USER),1))}),r}function _(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var r=this.quill.getLine(e.index),s=n(r,1)[0],a={};if(0===t.offset){var o=this.quill.getLine(e.index-1),i=n(o,1)[0];if(null!=i&&i.length()>1){var l=s.formats(),c=this.quill.getFormat(e.index-1,1);a=u.default.attributes.diff(l,c)||{}}}var d=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-d,d,p.default.sources.USER),Object.keys(a).length>0&&this.quill.formatLine(e.index-d,d,a,p.default.sources.USER),this.quill.focus()}}function j(e,t){var r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-r)){var s={},a=0,o=this.quill.getLine(e.index),i=n(o,1)[0];if(t.offset>=i.length()-1){var l=this.quill.getLine(e.index+1),c=n(l,1)[0];if(c){var d=i.formats(),h=this.quill.getFormat(e.index,1);s=u.default.attributes.diff(d,h)||{},a=c.length()}}this.quill.deleteText(e.index,r,p.default.sources.USER),Object.keys(s).length>0&&this.quill.formatLine(e.index+a-1,r,s,p.default.sources.USER)}}function w(e){var t=this.quill.getLines(e),r={};if(t.length>1){var s=t[0].formats(),n=t[t.length-1].formats();r=u.default.attributes.diff(n,s)||{}}this.quill.deleteText(e,p.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index,1,r,p.default.sources.USER),this.quill.setSelection(e.index,p.default.sources.SILENT),this.quill.focus()}function N(e,t){var r=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var s=Object.keys(t.format).reduce(function(e,r){return d.default.query(r,d.default.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e},{});this.quill.insertText(e.index,"\n",s,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach(function(e){null==s[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],p.default.sources.USER))})}function k(e){return{key:b.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var r=d.default.query("code-block"),s=t.index,a=t.length,o=this.quill.scroll.descendant(r,s),i=n(o,2),l=i[0],c=i[1];if(null!=l){var u=this.quill.getIndex(l),h=l.newlineIndex(c,!0)+1,f=l.newlineIndex(u+c+a),m=l.domNode.textContent.slice(h,f).split("\n");c=0,m.forEach(function(t,n){e?(l.insertAt(h+c,r.TAB),c+=r.TAB.length,0===n?s+=r.TAB.length:a+=r.TAB.length):t.startsWith(r.TAB)&&(l.deleteAt(h+c,r.TAB.length),c-=r.TAB.length,0===n?s-=r.TAB.length:a-=r.TAB.length),c+=t.length+1}),this.quill.update(p.default.sources.USER),this.quill.setSelection(s,a,p.default.sources.SILENT)}}}}function C(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,r){this.quill.format(e,!r.format[e],p.default.sources.USER)}}}function E(e){if("string"==typeof e||"number"==typeof e)return E({key:e});if("object"===(void 0===e?"undefined":s(e))&&(e=(0,o.default)(e,!1)),"string"==typeof e.key)if(null!=b.keys[e.key.toUpperCase()])e.key=b.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[x]=e.shortKey,delete e.shortKey),e}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:C("bold"),italic:C("italic"),underline:C("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",p.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",p.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",p.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,p.default.sources.USER)}},"indent code-block":k(!0),"outdent code-block":k(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,p.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,p.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,p.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,p.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),r=n(t,2),s=r[0],a=r[1],o=(0,l.default)({},s.formats(),{list:"checked"}),i=(new c.default).retain(e.index).insert("\n",o).retain(s.length()-a-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),s=n(r,2),a=s[0],o=s[1],i=(new c.default).retain(e.index).insert("\n",t.format).retain(a.length()-o-1).retain(1,{header:null});this.quill.updateContents(i,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,s=this.quill.getLine(e.index),a=n(s,2),o=a[0],i=a[1];if(i>r)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",p.default.sources.USER),this.quill.history.cutoff();var u=(new c.default).retain(e.index-i).delete(r+1).retain(o.length()-2-i).retain(1,{list:l});this.quill.updateContents(u,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,p.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),r=n(t,2),s=r[0],a=r[1],o=(new c.default).retain(e.index+s.length()-a-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(o,p.default.sources.USER)}},"embed left":v(b.keys.LEFT,!1),"embed left shift":v(b.keys.LEFT,!0),"embed right":v(b.keys.RIGHT,!1),"embed right shift":v(b.keys.RIGHT,!0)}},t.default=b,t.SHORTKEY=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=i(r(0)),o=i(r(7));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.selection=r,s.textNode=document.createTextNode(t.CONTENTS),s.domNode.appendChild(s.textNode),s._length=0,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"value",value:function(){}}]),n(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,r){if(0!==this._length)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);for(var n=this,o=0;null!=n&&n.statics.scope!==a.default.Scope.BLOCK_BLOT;)o+=n.offset(n.parent),n=n.parent;null!=n&&(this._length=t.CONTENTS.length,n.optimize(),n.formatAt(o,t.CONTENTS.length,e,r),this._length=0)}},{key:"index",value:function(e,r){return e===this.textNode?0:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,r=this.selection.getNativeRange(),s=void 0,n=void 0,i=void 0;if(null!=r&&r.start.node===e&&r.end.node===e){var l=[e,r.start.offset,r.end.offset];s=l[0],n=l[1],i=l[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var c=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof o.default?(s=this.next.domNode,this.next.insertAt(0,c),this.textNode.data=t.CONTENTS):(this.textNode.data=c,this.parent.insertBefore(a.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=n){var u=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}([n,i].map(function(e){return Math.max(0,Math.min(s.data.length,e-1))}),2);return n=u[0],i=u[1],{startNode:s,startOffset:n,endNode:s,endOffset:i}}}}},{key:"update",value:function(e,t){var r=this;if(e.some(function(e){return"characterData"===e.type&&e.target===r.textNode})){var s=this.restore();s&&(t.range=s)}}},{key:"value",value:function(){return""}}]),t}(a.default.Embed);l.blotName="cursor",l.className="ql-cursor",l.tagName="span",l.CONTENTS="\ufeff",t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(r(0)),n=r(4),a=o(n);function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(s.default.Container);i.allowedChildren=[a.default,n.BlockEmbed,i],t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=(s=r(0))&&s.__esModule?s:{default:s},i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"value",value:function(e){var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return r.startsWith("rgb(")?"#"+(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join(""):r}}]),t}(o.default.Attributor.Style),l=new o.default.Attributor.Class("color","ql-color",{scope:o.default.Scope.INLINE}),c=new i("color","color",{scope:o.default.Scope.INLINE});t.ColorAttributor=i,t.ColorClass=l,t.ColorStyle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r)return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);r=this.constructor.sanitize(r),this.domNode.setAttribute("href",r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return i(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((s=r(6))&&s.__esModule?s:{default:s}).default);function i(e,t){var r=document.createElement("a");r.href=e;var s=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(s)>-1}o.blotName="link",o.tagName="A",o.SANITIZED_URL="about:blank",o.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=o,t.sanitize=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=i(r(23)),o=i(r(107));function i(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var u=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){r.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case a.default.keys.ENTER:r.togglePicker();break;case a.default.keys.ESCAPE:r.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return n(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",function(){t.selectItem(r,!0)}),r.addEventListener("keydown",function(e){switch(e.keyCode){case a.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case a.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=o.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach(function(r){var s=e.buildItem(r);t.appendChild(s),!0===r.selected&&e.selectItem(s)}),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":s(Event))){var n=document.createEvent("Event");n.initEvent("change",!0,!0),this.select.dispatchEvent(n)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var r=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=y(r(0)),n=y(r(5)),a=r(4),o=y(a),i=y(r(16)),l=y(r(25)),c=y(r(24)),u=y(r(35)),d=y(r(6)),p=y(r(22)),h=y(r(7)),f=y(r(55)),m=y(r(42)),g=y(r(23));function y(e){return e&&e.__esModule?e:{default:e}}n.default.register({"blots/block":o.default,"blots/block/embed":a.BlockEmbed,"blots/break":i.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":u.default,"blots/inline":d.default,"blots/scroll":p.default,"blots/text":h.default,"modules/clipboard":f.default,"modules/history":m.default,"modules/keyboard":g.default}),s.default.register(o.default,i.default,c.default,d.default,p.default,h.default),t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),n=function(){function e(e){this.domNode=e,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new s.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return s.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,r,n){var a=this.isolate(e,t);if(null!=s.query(r,s.Scope.BLOT)&&n)a.wrap(r,n);else if(null!=s.query(r,s.Scope.ATTRIBUTE)){var o=s.create(this.statics.scope);a.wrap(o),o.format(r,n)}},e.prototype.insertAt=function(e,t,r){var n=null==r?s.create("text",t):s.create(t,r),a=this.split(e);this.parent.insertBefore(n,a)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var r=this.split(e);return r.split(t),r},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[s.DATA_KEY]&&delete this.domNode[s.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var r="string"==typeof e?s.create(e,t):e;return r.replace(this),r},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var r="string"==typeof e?s.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(r,this.next),r.appendChild(this),r},e.blotName="abstract",e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(12),n=r(32),a=r(33),o=r(1),i=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=s.default.keys(this.domNode),r=n.default.keys(this.domNode),i=a.default.keys(this.domNode);t.concat(r).concat(i).forEach(function(t){var r=o.query(t,o.Scope.ATTRIBUTE);r instanceof s.default&&(e.attributes[r.attrName]=r)})},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(r){var s=t.attributes[r].value(t.domNode);e.format(r,s)})},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,r){return t[r]=e.attributes[r].value(e.domNode),t},{})},e}();t.default=i},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});function a(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){a(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(a(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=o},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});function a(e){var t=e.split("-"),r=t.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return t[0]+r}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){return e.split(":")[0].trim()})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[a(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[a(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[a(this.keyName)];return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r,this.modules={}}return s(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();n.DEFAULTS={modules:{}},n.themes={default:n},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},a=i(r(0)),o=i(r(7));function i(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(e){r.contentNode.appendChild(e)}),r.leftGuard=document.createTextNode(l),r.rightGuard=document.createTextNode(l),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"index",value:function(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"restore",value:function(e){var t=void 0,r=void 0,s=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof o.default){var n=this.prev.length();this.prev.insertAt(n,s),t={startNode:this.prev.domNode,startOffset:n+s.length}}else r=document.createTextNode(s),this.parent.insertBefore(a.default.create(r),this),t={startNode:r,startOffset:s.length};else e===this.rightGuard&&(this.next instanceof o.default?(this.next.insertAt(0,s),t={startNode:this.next.domNode,startOffset:s.length}):(r=document.createTextNode(s),this.parent.insertBefore(a.default.create(r),this.next),t={startNode:r,startOffset:s.length}));return e.data=l,t}},{key:"update",value:function(e,t){var r=this;e.forEach(function(e){if("characterData"===e.type&&(e.target===r.leftGuard||e.target===r.rightGuard)){var s=r.restore(e.target);s&&(t.range=s)}})}}]),t}(a.default.Embed);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var s,n=(s=r(0))&&s.__esModule?s:{default:s},a={scope:n.default.Scope.BLOCK,whitelist:["right","center","justify"]},o=new n.default.Attributor.Attribute("align","align",a),i=new n.default.Attributor.Class("align","ql-align",a),l=new n.default.Attributor.Style("align","text-align",a);t.AlignAttribute=o,t.AlignClass=i,t.AlignStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var s,n=(s=r(0))&&s.__esModule?s:{default:s},a=r(26),o=new n.default.Attributor.Class("background","ql-bg",{scope:n.default.Scope.INLINE}),i=new a.ColorAttributor("background","background-color",{scope:n.default.Scope.INLINE});t.BackgroundClass=o,t.BackgroundStyle=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var s,n=(s=r(0))&&s.__esModule?s:{default:s},a={scope:n.default.Scope.BLOCK,whitelist:["rtl"]},o=new n.default.Attributor.Attribute("direction","dir",a),i=new n.default.Attributor.Class("direction","ql-direction",a),l=new n.default.Attributor.Style("direction","direction",a);t.DirectionAttribute=o,t.DirectionClass=i,t.DirectionStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=(s=r(0))&&s.__esModule?s:{default:s},i={scope:o.default.Scope.INLINE,whitelist:["serif","monospace"]},l=new o.default.Attributor.Class("font","ql-font",i),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"value",value:function(e){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(o.default.Attributor.Style),u=new c("font","font-family",i);t.FontStyle=u,t.FontClass=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var s,n=(s=r(0))&&s.__esModule?s:{default:s},a=new n.default.Attributor.Class("size","ql-size",{scope:n.default.Scope.INLINE,whitelist:["small","large","huge"]}),o=new n.default.Attributor.Style("size","font-size",{scope:n.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=a,t.SizeStyle=o},function(e,t,r){"use strict";e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=o(r(0)),a=o(r(5));function o(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s.lastRecorded=0,s.ignoreChange=!1,s.clear(),s.quill.on(a.default.events.EDITOR_CHANGE,function(e,t,r,n){e!==a.default.events.TEXT_CHANGE||s.ignoreChange||(s.options.userOnly&&n!==a.default.sources.USER?s.transform(t):s.record(t,r))}),s.quill.keyboard.addBinding({key:"Z",shortKey:!0},s.undo.bind(s)),s.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},s.redo.bind(s)),/Win/i.test(navigator.platform)&&s.quill.keyboard.addBinding({key:"Y",shortKey:!0},s.redo.bind(s)),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var r=this.stack[e].pop();this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],a.default.sources.USER),this.ignoreChange=!1;var s=l(r[e]);this.quill.setSelection(s)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var r=this.quill.getContents().diff(t),s=Date.now();if(this.lastRecorded+this.options.delay>s&&this.stack.undo.length>0){var n=this.stack.undo.pop();r=r.compose(n.undo),e=n.redo.compose(e)}else this.lastRecorded=s;this.stack.undo.push({redo:e,undo:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(o(r(9)).default);function l(e){var t=e.reduce(function(e,t){return e+(t.delete||0)},0),r=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(e){return null!=n.default.query(e,n.default.Scope.BLOCK)}))}(e)&&(r-=1),r}i.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=i,t.getLastChangeIndex=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},a=f(r(3)),o=f(r(2)),i=f(r(8)),l=f(r(23)),c=f(r(34)),u=f(r(59)),d=f(r(60)),p=f(r(28)),h=f(r(61));function f(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var x=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],v=[!1,"serif","monospace"],_=["1","2","3",!1],j=["small",!1,"large","huge"],w=function(e){function t(e,r){m(this,t);var s=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return e.emitter.listenDOM("click",document.body,function t(r){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==s.tooltip||s.tooltip.root.contains(r.target)||document.activeElement===s.tooltip.textbox||s.quill.hasFocus()||s.tooltip.hide(),null!=s.pickers&&s.pickers.forEach(function(e){e.container.contains(r.target)||e.close()})}),s}return y(t,e),s(t,[{key:"addModule",value:function(e){var r=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(r),r}},{key:"buildButtons",value:function(e,t){e.forEach(function(e){(e.getAttribute("class")||"").split(/\s+/).forEach(function(r){if(r.startsWith("ql-")&&(r=r.slice(3),null!=t[r]))if("direction"===r)e.innerHTML=t[r][""]+t[r].rtl;else if("string"==typeof t[r])e.innerHTML=t[r];else{var s=e.value||"";null!=s&&t[r][s]&&(e.innerHTML=t[r][s])}})})}},{key:"buildPickers",value:function(e,t){var r=this;this.pickers=e.map(function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&k(e,x),new d.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var r=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&k(e,b,"background"===r?"#ffffff":"#000000"),new u.default(e,t[r])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?k(e,v):e.classList.contains("ql-header")?k(e,_):e.classList.contains("ql-size")&&k(e,j)),new p.default(e)}),this.quill.on(i.default.events.EDITOR_CHANGE,function(){r.pickers.forEach(function(e){e.update()})})}}]),t}(c.default);w.DEFAULTS=(0,a.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",function(){if(null!=t.files&&null!=t.files[0]){var r=new FileReader;r.onload=function(r){var s=e.quill.getSelection(!0);e.quill.updateContents((new o.default).retain(s.index).delete(s.length).insert({image:r.target.result}),i.default.sources.USER),e.quill.setSelection(s.index+1,i.default.sources.SILENT),t.value=""},r.readAsDataURL(t.files[0])}}),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var N=function(e){function t(e,r){m(this,t);var s=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s.textbox=s.root.querySelector('input[type="text"]'),s.listen(),s}return y(t,e),s(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e,t,r=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var s=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",r,i.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",r,i.default.sources.USER)),this.quill.root.scrollTop=s;break;case"video":r=(t=(e=r).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e;case"formula":if(!r)break;var n=this.quill.getSelection(!0);if(null!=n){var a=n.index+n.length;this.quill.insertEmbed(a,this.root.getAttribute("data-mode"),r,i.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(a+1," ",i.default.sources.USER),this.quill.setSelection(a+2,i.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(h.default);function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(function(t){var s=document.createElement("option");t===r?s.setAttribute("selected","selected"):s.setAttribute("value",t),e.appendChild(s)})}t.BaseTooltip=N,t.default=w},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,s=this.iterator();r=s();){var n=r.length();if(e<n||t&&e===n&&(null==r.next||0!==r.next.length()))return[r,e];e-=n}return[null,0]},e.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},e.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var s,n=this.find(e),a=n[0],o=e-n[1],i=this.iterator(a);(s=i())&&o<e+t;){var l=s.length();e>o?r(s,e-o,Math.min(t,o+l-e)):r(s,0,Math.min(l,e+t-o)),o+=l}},e.prototype.map=function(e){return this.reduce(function(t,r){return t.push(e(r)),t},[])},e.prototype.reduce=function(e,t){for(var r,s=this.iterator();r=s();)t=e(t,r);return t},e}();t.default=s},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(17),o=r(1),i={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var r=e.call(this,t)||this;return r.scroll=r,r.observer=new MutationObserver(function(e){r.update(e)}),r.observer.observe(r.domNode,i),r.attach(),r}return n(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,r){this.update(),0===t&&r===this.length()?this.children.forEach(function(e){e.remove()}):e.prototype.deleteAt.call(this,t,r)},t.prototype.formatAt=function(t,r,s,n){this.update(),e.prototype.formatAt.call(this,t,r,s,n)},t.prototype.insertAt=function(t,r,s){this.update(),e.prototype.insertAt.call(this,t,r,s)},t.prototype.optimize=function(t,r){var s=this;void 0===t&&(t=[]),void 0===r&&(r={}),e.prototype.optimize.call(this,r);for(var n=[].slice.call(this.observer.takeRecords());n.length>0;)t.push(n.pop());for(var i=function(e,t){void 0===t&&(t=!0),null!=e&&e!==s&&null!=e.domNode.parentNode&&(null==e.domNode[o.DATA_KEY].mutations&&(e.domNode[o.DATA_KEY].mutations=[]),t&&i(e.parent))},l=function(e){null!=e.domNode[o.DATA_KEY]&&null!=e.domNode[o.DATA_KEY].mutations&&(e instanceof a.default&&e.children.forEach(l),e.optimize(r))},c=t,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(e){var t=o.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(i(o.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){var t=o.find(e,!1);i(t,!1),t instanceof a.default&&t.children.forEach(function(e){i(e,!1)})})):"attributes"===e.type&&i(t.prev)),i(t))}),this.children.forEach(l),n=(c=[].slice.call(this.observer.takeRecords())).slice();n.length>0;)t.push(n.pop())}},t.prototype.update=function(t,r){var s=this;void 0===r&&(r={}),(t=t||this.observer.takeRecords()).map(function(e){var t=o.find(e.target,!0);return null==t?null:null==t.domNode[o.DATA_KEY].mutations?(t.domNode[o.DATA_KEY].mutations=[e],t):(t.domNode[o.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==s&&null!=e.domNode[o.DATA_KEY]&&e.update(e.domNode[o.DATA_KEY].mutations||[],r)}),null!=this.domNode[o.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,r),this.optimize(t,r)},t.blotName="scroll",t.defaultChild="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="DIV",t}(a.default);t.default=l},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(18),o=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(r){if(r.tagName!==t.tagName)return e.formats.call(this,r)},t.prototype.format=function(r,s){var n=this;r!==this.statics.blotName||s?e.prototype.format.call(this,r,s):(this.children.forEach(function(e){e instanceof a.default||(e=e.wrap(t.blotName,!0)),n.attributes.copy(e)}),this.unwrap())},t.prototype.formatAt=function(t,r,s,n){null!=this.formats()[s]||o.query(s,o.Scope.ATTRIBUTE)?this.isolate(t,r).format(s,n):e.prototype.formatAt.call(this,t,r,s,n)},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r);var s=this.formats();if(0===Object.keys(s).length)return this.unwrap();var n=this.next;n instanceof t&&n.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(s,n.formats())&&(n.moveChildren(this),n.remove())},t.blotName="inline",t.scope=o.Scope.INLINE_BLOT,t.tagName="SPAN",t}(a.default);t.default=i},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(18),o=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(r){var s=o.query(t.blotName).tagName;if(r.tagName!==s)return e.formats.call(this,r)},t.prototype.format=function(r,s){null!=o.query(r,o.Scope.BLOCK)&&(r!==this.statics.blotName||s?e.prototype.format.call(this,r,s):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,r,s,n){null!=o.query(s,o.Scope.BLOCK)?this.format(s,n):e.prototype.formatAt.call(this,t,r,s,n)},t.prototype.insertAt=function(t,r,s){if(null==s||null!=o.query(r,o.Scope.INLINE))e.prototype.insertAt.call(this,t,r,s);else{var n=this.split(t),a=o.create(r,s);n.parent.insertBefore(a,n)}},t.prototype.update=function(t,r){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,r)},t.blotName="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="P",t}(a.default);t.default=i},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.formats=function(e){},t.prototype.format=function(t,r){e.prototype.formatAt.call(this,0,this.length(),t,r)},t.prototype.formatAt=function(t,r,s,n){0===t&&r===this.length()?this.format(s,n):e.prototype.formatAt.call(this,t,r,s,n)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(r(19).default);t.default=a},function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(19),o=r(1),i=function(e){function t(t){var r=e.call(this,t)||this;return r.text=r.statics.value(r.domNode),r}return n(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,r,s){null==s?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,r,s)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=o.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},t.prototype.update=function(e,t){var r=this;e.some(function(e){return"characterData"===e.type&&e.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.Scope.INLINE_BLOT,t}(a.default);t.default=i},function(e,t,r){"use strict";var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:n.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var s=r.indexOf(e,t);return-1!==s&&s===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),s=r.length>>>0,n=arguments[1],a=0;a<s;a++)if(t=r[a],e.call(n,t,a,r))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,t){var r=-1;function s(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var u=a(e,t),d=e.substring(0,u);u=o(e=e.substring(u),t=t.substring(u));var p=e.substring(e.length-u),h=function(e,t){var i;if(!e)return[[1,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return i=[[1,l.substring(0,u)],[0,c],[1,l.substring(u+c.length)]],e.length>t.length&&(i[0][0]=i[2][0]=r),i;if(1==c.length)return[[r,e],[1,t]];var d=function(e,t){var r=e.length>t.length?e:t,s=e.length>t.length?t:e;if(r.length<4||2*s.length<r.length)return null;function n(e,t,r){for(var s,n,i,l,c=e.substring(r,r+Math.floor(e.length/4)),u=-1,d="";-1!=(u=t.indexOf(c,u+1));){var p=a(e.substring(r),t.substring(u)),h=o(e.substring(0,r),t.substring(0,u));d.length<h+p&&(d=t.substring(u-h,u)+t.substring(u,u+p),s=e.substring(0,r-h),n=e.substring(r+p),i=t.substring(0,u-h),l=t.substring(u+p))}return 2*d.length>=e.length?[s,n,i,l,d]:null}var i,l,c,u,d,p=n(r,s,Math.ceil(r.length/4)),h=n(r,s,Math.ceil(r.length/2));return p||h?(i=h?p&&p[4].length>h[4].length?p:h:p,e.length>t.length?(l=i[0],c=i[1],u=i[2],d=i[3]):(u=i[0],d=i[1],l=i[2],c=i[3]),[l,c,u,d,i[4]]):null}(e,t);if(d){var p=d[0],h=d[1],f=d[2],m=d[3],g=d[4],y=s(p,f),x=s(h,m);return y.concat([[0,g]],x)}return function(e,t){for(var s=e.length,a=t.length,o=Math.ceil((s+a)/2),i=o,l=2*o,c=new Array(l),u=new Array(l),d=0;d<l;d++)c[d]=-1,u[d]=-1;c[i+1]=0,u[i+1]=0;for(var p=s-a,h=p%2!=0,f=0,m=0,g=0,y=0,x=0;x<o;x++){for(var b=-x+f;b<=x-m;b+=2){for(var v=i+b,_=(C=b==-x||b!=x&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1)-b;C<s&&_<a&&e.charAt(C)==t.charAt(_);)C++,_++;if(c[v]=C,C>s)m+=2;else if(_>a)f+=2;else if(h&&(N=i+p-b)>=0&&N<l&&-1!=u[N]&&C>=(w=s-u[N]))return n(e,t,C,_)}for(var j=-x+g;j<=x-y;j+=2){for(var w,N=i+j,k=(w=j==-x||j!=x&&u[N-1]<u[N+1]?u[N+1]:u[N-1]+1)-j;w<s&&k<a&&e.charAt(s-w-1)==t.charAt(a-k-1);)w++,k++;if(u[N]=w,w>s)y+=2;else if(k>a)g+=2;else if(!h){var C;if((v=i+p-j)>=0&&v<l&&-1!=c[v]&&(_=i+(C=c[v])-v,C>=(w=s-w)))return n(e,t,C,_)}}}return[[r,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-u),t=t.substring(0,t.length-u));return d&&h.unshift([0,d]),p&&h.push([0,p]),i(h),null!=l&&(h=function(e,t){var s=function(e,t){if(0===t)return[0,e];for(var s=0,n=0;n<e.length;n++){var a=e[n];if(a[0]===r||0===a[0]){var o=s+a[1].length;if(t===o)return[n+1,e];if(t<o){e=e.slice();var i=t-s,l=[a[0],a[1].slice(0,i)],c=[a[0],a[1].slice(i)];return e.splice(n,1,l,c),[n+1,e]}s=o}}throw new Error("cursor_pos is out of bounds!")}(e,t),n=s[1],a=s[0],o=n[a],i=n[a+1];if(null==o)return e;if(0!==o[0])return e;if(null!=i&&o[1]+i[1]===i[1]+o[1])return n.splice(a,2,i,o),c(n,a,2);if(null!=i&&0===i[1].indexOf(o[1])){n.splice(a,2,[i[0],o[1]],[0,o[1]]);var l=i[1].slice(o[1].length);return l.length>0&&n.splice(a+2,0,[i[0],l]),c(n,a,3)}return e}(h,l)),function(e){for(var t=!1,s=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},n=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},a=2;a<e.length;a+=1)0===e[a-2][0]&&n(e[a-2][1])&&e[a-1][0]===r&&s(e[a-1][1])&&1===e[a][0]&&s(e[a][1])&&(t=!0,e[a-1][1]=e[a-2][1].slice(-1)+e[a-1][1],e[a][1]=e[a-2][1].slice(-1)+e[a][1],e[a-2][1]=e[a-2][1].slice(0,-1));if(!t)return e;var o=[];for(a=0;a<e.length;a+=1)e[a][1].length>0&&o.push(e[a]);return o}(h)}function n(e,t,r,n){var a=e.substring(0,r),o=t.substring(0,n),i=e.substring(r),l=t.substring(n),c=s(a,o),u=s(i,l);return c.concat(u)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,s=Math.min(e.length,t.length),n=s,a=0;r<n;)e.substring(a,n)==t.substring(a,n)?a=r=n:s=n,n=Math.floor((s-r)/2+r);return n}function o(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,s=Math.min(e.length,t.length),n=s,a=0;r<n;)e.substring(e.length-n,e.length-a)==t.substring(t.length-n,t.length-a)?a=r=n:s=n,n=Math.floor((s-r)/2+r);return n}function i(e){e.push([0,""]);for(var t,s=0,n=0,l=0,c="",u="";s<e.length;)switch(e[s][0]){case 1:l++,u+=e[s][1],s++;break;case r:n++,c+=e[s][1],s++;break;case 0:n+l>1?(0!==n&&0!==l&&(0!==(t=a(u,c))&&(s-n-l>0&&0==e[s-n-l-1][0]?e[s-n-l-1][1]+=u.substring(0,t):(e.splice(0,0,[0,u.substring(0,t)]),s++),u=u.substring(t),c=c.substring(t)),0!==(t=o(u,c))&&(e[s][1]=u.substring(u.length-t)+e[s][1],u=u.substring(0,u.length-t),c=c.substring(0,c.length-t))),0===n?e.splice(s-l,n+l,[1,u]):0===l?e.splice(s-n,n+l,[r,c]):e.splice(s-n-l,n+l,[r,c],[1,u]),s=s-n-l+(n?1:0)+(l?1:0)+1):0!==s&&0==e[s-1][0]?(e[s-1][1]+=e[s][1],e.splice(s,1)):s++,l=0,n=0,c="",u=""}""===e[e.length-1][1]&&e.pop();var d=!1;for(s=1;s<e.length-1;)0==e[s-1][0]&&0==e[s+1][0]&&(e[s][1].substring(e[s][1].length-e[s-1][1].length)==e[s-1][1]?(e[s][1]=e[s-1][1]+e[s][1].substring(0,e[s][1].length-e[s-1][1].length),e[s+1][1]=e[s-1][1]+e[s+1][1],e.splice(s-1,1),d=!0):e[s][1].substring(0,e[s+1][1].length)==e[s+1][1]&&(e[s-1][1]+=e[s+1][1],e[s][1]=e[s][1].substring(e[s+1][1].length)+e[s+1][1],e.splice(s+1,1),d=!0)),s++;d&&i(e)}var l=s;function c(e,t,r){for(var s=t+r-1;s>=0&&s>=t-1;s--)if(s+1<e.length){var n=e[s],a=e[s+1];n[0]===a[1]&&e.splice(s,2,[n[0],n[1]+a[1]])}return e}l.INSERT=1,l.DELETE=r,l.EQUAL=0,e.exports=l},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function s(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function n(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?s:n).supported=s,t.unsupported=n},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,s="~";function n(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(s=!1)),o.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)r.call(e,t)&&n.push(s?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},o.prototype.listeners=function(e,t){var r=s?s+e:e,n=this._events[r];if(t)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var a=0,o=n.length,i=new Array(o);a<o;a++)i[a]=n[a].fn;return i},o.prototype.emit=function(e,t,r,n,a,o){var i=s?s+e:e;if(!this._events[i])return!1;var l,c,u=this._events[i],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,a),!0;case 6:return u.fn.call(u.context,t,r,n,a,o),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var p,h=u.length;for(c=0;c<h;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,n);break;default:if(!l)for(p=1,l=new Array(d-1);p<d;p++)l[p-1]=arguments[p];u[c].fn.apply(u[c].context,l)}}return!0},o.prototype.on=function(e,t,r){var n=new a(t,r||this),o=s?s+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.once=function(e,t,r){var n=new a(t,r||this,!0),o=s?s+e:e;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],n]:this._events[o].push(n):(this._events[o]=n,this._eventsCount++),this},o.prototype.removeListener=function(e,t,r,a){var o=s?s+e:e;if(!this._events[o])return this;if(!t)return 0===--this._eventsCount?this._events=new n:delete this._events[o],this;var i=this._events[o];if(i.fn)i.fn!==t||a&&!i.once||r&&i.context!==r||(0===--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var l=0,c=[],u=i.length;l<u;l++)(i[l].fn!==t||a&&!i[l].once||r&&i[l].context!==r)&&c.push(i[l]);c.length?this._events[o]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new n:delete this._events[o]}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=s?s+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new n:delete this._events[t])):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,void 0!==e&&(e.exports=o)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),o=b(r(3)),i=b(r(2)),l=b(r(0)),c=b(r(5)),u=b(r(10)),d=b(r(9)),p=r(36),h=r(37),f=b(r(13)),m=r(26),g=r(38),y=r(39),x=r(40);function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=(0,u.default)("quill:clipboard"),j="__ql-matcher",w=[[Node.TEXT_NODE,R],[Node.TEXT_NODE,z],["br",function(e,t){return q(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,z],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,A],[Node.ELEMENT_NODE,function(e,t){var r={},s=e.style||{};return s.fontStyle&&"italic"===S(e).fontStyle&&(r.italic=!0),s.fontWeight&&(S(e).fontWeight.startsWith("bold")||parseInt(S(e).fontWeight)>=700)&&(r.bold=!0),Object.keys(r).length>0&&(t=E(t,r)),parseFloat(s.textIndent||0)>0&&(t=(new i.default).insert("\t").concat(t)),t}],["li",function(e,t){var r=l.default.query(e);if(null==r||"list-item"!==r.blotName||!q(t,"\n"))return t;for(var s=-1,n=e.parentNode;!n.classList.contains("ql-clipboard");)"list"===(l.default.query(n)||{}).blotName&&(s+=1),n=n.parentNode;return s<=0?t:t.compose((new i.default).retain(t.length()-1).retain(1,{indent:s}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new i.default}]],N=[p.AlignAttribute,g.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),k=[p.AlignStyle,h.BackgroundStyle,m.ColorStyle,g.DirectionStyle,y.FontStyle,x.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),C=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s.quill.root.addEventListener("paste",s.onPaste.bind(s)),s.container=s.quill.addContainer("ql-clipboard"),s.container.setAttribute("contenteditable",!0),s.container.setAttribute("tabindex",-1),s.matchers=[],w.concat(s.options.matchers).forEach(function(e){var t=n(e,2),a=t[0],o=t[1];(r.matchVisual||o!==M)&&s.addMatcher(a,o)}),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[f.default.blotName]){var r=this.container.innerText;return this.container.innerHTML="",(new i.default).insert(r,v({},f.default.blotName,t[f.default.blotName]))}var s=this.prepareMatching(),a=n(s,2),o=a[0],l=a[1],c=T(this.container,o,l);return q(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new i.default).retain(c.length()-1).delete(1))),_.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var s=this.convert(t);this.quill.updateContents((new i.default).retain(e).concat(s),r),this.quill.setSelection(e+s.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),s=(new i.default).retain(r.index),n=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){s=s.concat(t.convert()).delete(r.length),t.quill.updateContents(s,c.default.sources.USER),t.quill.setSelection(s.length()-r.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=n,t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],r=[];return this.matchers.forEach(function(s){var a=n(s,2),o=a[0],i=a[1];switch(o){case Node.TEXT_NODE:r.push(i);break;case Node.ELEMENT_NODE:t.push(i);break;default:[].forEach.call(e.container.querySelectorAll(o),function(e){e[j]=e[j]||[],e[j].push(i)})}}),[t,r]}}]),t}(d.default);function E(e,t,r){return"object"===(void 0===t?"undefined":s(t))?Object.keys(t).reduce(function(e,r){return E(e,r,t[r])},e):e.reduce(function(e,s){return s.attributes&&s.attributes[t]?e.push(s):e.insert(s.insert,(0,o.default)({},v({},t,r),s.attributes))},new i.default)}function S(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function q(e,t){for(var r="",s=e.ops.length-1;s>=0&&r.length<t.length;--s){var n=e.ops[s];if("string"!=typeof n.insert)break;r=n.insert+r}return r.slice(-1*t.length)===t}function O(e){if(0===e.childNodes.length)return!1;var t=S(e);return["block","list-item"].indexOf(t.display)>-1}function T(e,t,r){return e.nodeType===e.TEXT_NODE?r.reduce(function(t,r){return r(e,t)},new i.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(s,n){var a=T(n,t,r);return n.nodeType===e.ELEMENT_NODE&&(a=t.reduce(function(e,t){return t(n,e)},a),a=(n[j]||[]).reduce(function(e,t){return t(n,e)},a)),s.concat(a)},new i.default):new i.default}function P(e,t,r){return E(r,e,!0)}function A(e,t){var r=l.default.Attributor.Attribute.keys(e),s=l.default.Attributor.Class.keys(e),n=l.default.Attributor.Style.keys(e),a={};return r.concat(s).concat(n).forEach(function(t){var r=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=r&&(a[r.attrName]=r.value(e),a[r.attrName])||(null==(r=N[t])||r.attrName!==t&&r.keyName!==t||(a[r.attrName]=r.value(e)||void 0),null==(r=k[t])||r.attrName!==t&&r.keyName!==t||(r=k[t],a[r.attrName]=r.value(e)||void 0))}),Object.keys(a).length>0&&(t=E(t,a)),t}function L(e,t){var r=l.default.query(e);if(null==r)return t;if(r.prototype instanceof l.default.Embed){var s={},n=r.value(e);null!=n&&(s[r.blotName]=n,t=(new i.default).insert(s,r.formats(e)))}else"function"==typeof r.formats&&(t=E(t,r.blotName,r.formats(e)));return t}function z(e,t){return q(t,"\n")||(O(e)||t.length()>0&&e.nextSibling&&O(e.nextSibling))&&t.insert("\n"),t}function M(e,t){if(O(e)&&null!=e.nextElementSibling&&!q(t,"\n\n")){var r=e.offsetHeight+parseFloat(S(e).marginTop)+parseFloat(S(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")}return t}function R(e,t){var r=e.data;if("O:P"===e.parentNode.tagName)return t.insert(r.trim());if(0===r.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!S(e.parentNode).whiteSpace.startsWith("pre")){var s=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,s.bind(s,!0)),(null==e.previousSibling&&O(e.parentNode)||null!=e.previousSibling&&O(e.previousSibling))&&(r=r.replace(/^\s+/,s.bind(s,!1))),(null==e.nextSibling&&O(e.parentNode)||null!=e.nextSibling&&O(e.nextSibling))&&(r=r.replace(/\s+$/,s.bind(s,!1)))}return t.insert(r)}C.DEFAULTS={matchers:[],matchVisual:!0},t.default=C,t.matchAttributor=A,t.matchBlot=L,t.matchNewline=z,t.matchSpacing=M,t.matchText=R},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"optimize",value:function(e){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((s=r(6))&&s.__esModule?s:{default:s}).default);o.blotName="bold",o.tagName=["STRONG","B"],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=u(r(2)),o=u(r(0)),i=u(r(5)),l=u(r(10)),c=u(r(9));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(0,l.default)("quill:toolbar"),h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n,a=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(Array.isArray(a.options.container)){var o=document.createElement("div");m(o,a.options.container),e.container.parentNode.insertBefore(o,e.container),a.container=o}else"string"==typeof a.options.container?a.container=document.querySelector(a.options.container):a.container=a.options.container;return a.container instanceof HTMLElement?(a.container.classList.add("ql-toolbar"),a.controls=[],a.handlers={},Object.keys(a.options.handlers).forEach(function(e){a.addHandler(e,a.options.handlers[e])}),[].forEach.call(a.container.querySelectorAll("button, select"),function(e){a.attach(e)}),a.quill.on(i.default.events.EDITOR_CHANGE,function(e,t){e===i.default.events.SELECTION_CHANGE&&a.update(t)}),a.quill.on(i.default.events.SCROLL_OPTIMIZE,function(){var e=a.quill.selection.getRange(),t=s(e,1)[0];a.update(t)}),a):(n=p.error("Container required for toolbar",a.options),d(a,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,r=[].find.call(e.classList,function(e){return 0===e.indexOf("ql-")});if(r){if(r=r.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[r]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[r])return void p.warn("ignoring attaching to disabled format",r,e);if(null==o.default.query(r))return void p.warn("ignoring attaching to nonexistent format",r,e)}var n="SELECT"===e.tagName?"change":"click";e.addEventListener(n,function(n){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),n.preventDefault();t.quill.focus();var u=t.quill.selection.getRange(),d=s(u,1)[0];if(null!=t.handlers[r])t.handlers[r].call(t,l);else if(o.default.query(r).prototype instanceof o.default.Embed){if(!(l=prompt("Enter "+r)))return;t.quill.updateContents((new a.default).retain(d.index).delete(d.length).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,l)),i.default.sources.USER)}else t.quill.format(r,l,i.default.sources.USER);t.update(d)}),this.controls.push([r,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach(function(r){var n=s(r,2),a=n[0],o=n[1];if("SELECT"===o.tagName){var i=void 0;if(null==e)i=null;else if(null==t[a])i=o.querySelector("option[selected]");else if(!Array.isArray(t[a])){var l=t[a];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),i=o.querySelector('option[value="'+l+'"]')}null==i?(o.value="",o.selectedIndex=-1):i.selected=!0}else if(null==e)o.classList.remove("ql-active");else if(o.hasAttribute("value")){var c=t[a]===o.getAttribute("value")||null!=t[a]&&t[a].toString()===o.getAttribute("value")||null==t[a]&&!o.getAttribute("value");o.classList.toggle("ql-active",c)}else o.classList.toggle("ql-active",null!=t[a])})}}]),t}(c.default);function f(e,t,r){var s=document.createElement("button");s.setAttribute("type","button"),s.classList.add("ql-"+t),null!=r&&(s.value=r),e.appendChild(s)}function m(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(function(e){if("string"==typeof e)f(r,e);else{var t=Object.keys(e)[0],s=e[t];Array.isArray(s)?function(e,t,r){var s=document.createElement("select");s.classList.add("ql-"+t),r.forEach(function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),s.appendChild(t)}),e.appendChild(s)}(r,t,s):f(r,t,s)}}),e.appendChild(r)})}h.DEFAULTS={},h.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var r=this.quill.getFormat();Object.keys(r).forEach(function(t){null!=o.default.query(t,o.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,i.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",i.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,i.default.sources.USER),this.quill.format("direction",e,i.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t),s=parseInt(r.indent||0);if("+1"===e||"-1"===e){var n="+1"===e?1:-1;"rtl"===r.direction&&(n*=-1),this.quill.format("indent",s+n,i.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,i.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t);"check"===e?"checked"===r.list||"unchecked"===r.list?this.quill.format("list",!1,i.default.sources.USER):this.quill.format("list","unchecked",i.default.sources.USER):this.quill.format("list",e,i.default.sources.USER)}}},t.default=h,t.addControls=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.label.innerHTML=r,s.container.classList.add("ql-color-picker"),[].slice.call(s.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"buildItem",value:function(e){var r=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return r.style.backgroundColor=e.getAttribute("value")||"",r}},{key:"selectItem",value:function(e,r){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r);var s=this.label.querySelector(".ql-color-label"),n=e&&e.getAttribute("data-value")||"";s&&("line"===s.tagName?s.style.stroke=n:s.style.fill=n)}}]),t}(((s=r(28))&&s.__esModule?s:{default:s}).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.container.classList.add("ql-icon-picker"),[].forEach.call(s.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=r[e.getAttribute("data-value")||""]}),s.defaultItem=s.container.querySelector(".ql-selected"),s.selectItem(s.defaultItem),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"selectItem",value:function(e,r){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((s=r(28))&&s.__esModule?s:{default:s}).default);t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function(){function e(t,r){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){s.root.style.marginTop=-1*s.quill.root.scrollTop+"px"}),this.hide()}return s(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var s=this.boundsContainer.getBoundingClientRect(),n=this.root.getBoundingClientRect(),a=0;if(n.right>s.right&&(a=s.right-n.right,this.root.style.left=t+a+"px"),n.left<s.left&&(a=s.left-n.left,this.root.style.left=t+a+"px"),n.bottom>s.bottom){var o=n.bottom-n.top,i=e.bottom-e.top+o;this.root.style.top=r-i+"px",this.root.classList.add("ql-flip")}return a}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=p(r(3)),o=p(r(8)),i=r(43),l=p(i),c=p(r(27)),u=r(15),d=p(r(41));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(e){function t(e,r){h(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=g);var s=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s.quill.container.classList.add("ql-snow"),s}return m(t,e),n(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default),this.tooltip=new x(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,r){e.handlers.link.call(e,!r.format.link)})}}]),t}(l.default);y.DEFAULTS=(0,a.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),this.quill.theme.tooltip.edit("link",r)}else this.quill.format("link",!1)}}}}});var x=function(e){function t(e,r){h(this,t);var s=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s.preview=s.root.querySelector("a.ql-preview"),s}return m(t,e),n(t,[{key:"listen",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=e.linkRange){var r=e.linkRange;e.restoreFocus(),e.quill.formatText(r,"link",!1,o.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()}),this.quill.on(o.default.events.SELECTION_CHANGE,function(t,r,s){if(null!=t){if(0===t.length&&s===o.default.sources.USER){var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,s=!1,n=void 0;try{for(var a,o=e[Symbol.iterator]();!(_n=(a=o.next()).done)&&(r.push(a.value),!t||r.length!==t);_n=!0);}catch(e){s=!0,n=e}finally{try{!_n&&o.return&&o.return()}finally{if(s)throw n}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e.quill.scroll.descendant(c.default,t.index),2),a=n[0],i=n[1];if(null!=a){e.linkRange=new u.Range(t.index-i,a.length());var l=c.default.formats(a.domNode);return e.preview.textContent=l,e.preview.setAttribute("href",l),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}})}},{key:"show",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(i.BaseTooltip);x.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=z(r(29)),n=r(36),a=r(38),o=r(64),i=z(r(65)),l=z(r(66)),c=r(67),u=z(c),d=r(37),p=r(26),h=r(39),f=r(40),m=z(r(56)),g=z(r(68)),y=z(r(27)),x=z(r(69)),b=z(r(70)),v=z(r(71)),_=z(r(72)),j=z(r(73)),w=r(13),N=z(w),k=z(r(74)),C=z(r(75)),E=z(r(57)),S=z(r(41)),q=z(r(28)),O=z(r(59)),T=z(r(60)),P=z(r(61)),A=z(r(108)),L=z(r(62));function z(e){return e&&e.__esModule?e:{default:e}}s.default.register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":n.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":h.FontClass,"attributors/class/size":f.SizeClass,"attributors/style/align":n.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":h.FontStyle,"attributors/style/size":f.SizeStyle},!0),s.default.register({"formats/align":n.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":o.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":h.FontClass,"formats/size":f.SizeClass,"formats/blockquote":i.default,"formats/code-block":N.default,"formats/header":l.default,"formats/list":u.default,"formats/bold":m.default,"formats/code":w.Code,"formats/italic":g.default,"formats/link":y.default,"formats/script":x.default,"formats/strike":b.default,"formats/underline":v.default,"formats/image":_.default,"formats/video":j.default,"formats/list/item":c.ListItem,"modules/formula":k.default,"modules/syntax":C.default,"modules/toolbar":E.default,"themes/bubble":A.default,"themes/snow":L.default,"ui/icons":S.default,"ui/picker":q.default,"ui/icon-picker":T.default,"ui/color-picker":O.default,"ui/tooltip":P.default},!0),t.default=s.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=(s=r(0))&&s.__esModule?s:{default:s},i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"add",value:function(e,r){if("+1"===r||"-1"===r){var s=this.value(e)||0;r="+1"===r?s+1:s-1}return 0===r?(this.remove(e),!0):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(e,r){return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,r)||a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(r))}},{key:"value",value:function(e){return parseInt(a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(o.default.Attributor.Class),l=new i("indent","ql-indent",{scope:o.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r(4))&&s.__esModule?s:{default:s}).default);n.blotName="blockquote",n.tagName="blockquote",t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((s=r(4))&&s.__esModule?s:{default:s}).default);a.blotName="header",a.tagName=["H1","H2","H3","H4","H5","H6"],t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},a=l(r(0)),o=l(r(4)),i=l(r(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),s(t,[{key:"format",value:function(e,r){e!==h.blotName||r?n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r):this.replaceWith(a.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,r){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,r),this):(this.parent.unwrap(),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,r))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:n(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(o.default);p.blotName="list-item",p.tagName="LI";var h=function(e){function t(e){c(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),s=function(t){if(t.target.parentNode===e){var s=r.statics.formats(e),n=a.default.find(t.target);"checked"===s?n.format("list","unchecked"):"unchecked"===s&&n.format("list","checked")}};return e.addEventListener("touchstart",s),e.addEventListener("mousedown",s),r}return d(t,e),s(t,null,[{key:"create",value:function(e){var r="ordered"===e?"OL":"UL",s=n(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,r);return"checked"!==e&&"unchecked"!==e||s.setAttribute("data-checked","checked"===e),s}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),s(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,r){if(e instanceof p)n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r);else{var s=null==r?this.length():r.offset(this),a=this.split(s);a.parent.insertBefore(e,a)}}},{key:"optimize",value:function(e){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&r.domNode.tagName===this.domNode.tagName&&r.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var r=a.default.create(this.statics.defaultChild);e.moveChildren(r),this.appendChild(r)}n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(i.default);h.blotName="list",h.scope=a.default.Scope.BLOCK_BLOT,h.tagName=["OL","UL"],h.defaultChild="list-item",h.allowedChildren=[p],t.ListItem=p,t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r(56))&&s.__esModule?s:{default:s}).default);n.blotName="italic",n.tagName=["EM","I"],t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((s=r(6))&&s.__esModule?s:{default:s}).default);o.blotName="script",o.tagName=["SUB","SUP"],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r(6))&&s.__esModule?s:{default:s}).default);n.blotName="strike",n.tagName="S",t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((s=r(6))&&s.__esModule?s:{default:s}).default);n.blotName="underline",n.tagName="U",t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=(s=r(0))&&s.__esModule?s:{default:s},i=r(27),l=["alt","height","width"],c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"format",value:function(e,r){l.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return l.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,i.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.default.Embed);c.blotName="image",c.tagName="IMG",t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},o=r(4),i=(s=r(27))&&s.__esModule?s:{default:s},l=["height","width"],c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"format",value:function(e,r){l.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=a(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return l.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"sanitize",value:function(e){return i.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(o.BlockEmbed);c.blotName="video",c.className="ql-video",c.tagName="IFRAME",t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},a=l(r(35)),o=l(r(5)),i=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),s(t,null,[{key:"create",value:function(e){var r=n(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(a.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var h=function(e){function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return d(t,e),s(t,null,[{key:"register",value:function(){o.default.register(p,!0)}}]),t}(i.default);t.FormulaBlot=p,t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),n=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},a=l(r(0)),o=l(r(5)),i=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),s(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(r(13)).default);p.className="ql-syntax";var h=new a.default.Attributor.Class("token","hljs",{scope:a.default.Scope.INLINE}),f=function(e){function t(e,r){c(this,t);var s=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if("function"!=typeof s.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var n=null;return s.quill.on(o.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(n),n=setTimeout(function(){s.highlight(),n=null},s.options.interval)}),s.highlight(),s}return d(t,e),s(t,null,[{key:"register",value:function(){o.default.register(h,!0),o.default.register(p,!0)}}]),s(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(o.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(p).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(o.default.sources.SILENT),null!=t&&this.quill.setSelection(t,o.default.sources.SILENT)}}}]),t}(i.default);f.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=p,t.CodeToken=h,t.default=f},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var s=function e(t,r,s){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,s)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(s):void 0},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,r,s){return r&&e(t.prototype,r),s&&e(t,s),t}}(),a=d(r(3)),o=d(r(8)),i=r(43),l=d(i),c=r(15),u=d(r(41));function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,r){p(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=m);var s=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s.quill.container.classList.add("ql-bubble"),s}return f(t,e),n(t,[{key:"extendToolbar",value:function(e){this.tooltip=new y(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default)}}]),t}(l.default);g.DEFAULTS=(0,a.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var y=function(e){function t(e,r){p(this,t);var s=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s.quill.on(o.default.events.EDITOR_CHANGE,function(e,t,r,n){if(e===o.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&n===o.default.sources.USER){s.show(),s.root.style.left="0px",s.root.style.width="",s.root.style.width=s.root.offsetWidth+"px";var a=s.quill.getLines(t.index,t.length);if(1===a.length)s.position(s.quill.getBounds(t));else{var i=a[a.length-1],l=s.quill.getIndex(i),u=Math.min(i.length()-1,t.index+t.length-l),d=s.quill.getBounds(new c.Range(l,u));s.position(d)}}else document.activeElement!==s.textbox&&s.quill.hasFocus()&&s.hide()}),s}return f(t,e),n(t,[{key:"listen",value:function(){var e=this;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(o.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var r=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),n=this.root.querySelector(".ql-tooltip-arrow");if(n.style.marginLeft="",0===r)return r;n.style.marginLeft=-1*r-n.offsetWidth/2+"px"}}]),t}(i.BaseTooltip);y.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=y,t.default=g},function(e,t,r){e.exports=r(63)}]).default},e.exports=t()},1609:e=>{"use strict";e.exports=window.React},1873:(e,t,r)=>{var s=r(9325).Symbol;e.exports=s},1882:(e,t,r)=>{var s=r(2552),n=r(3805);e.exports=function(e){if(!n(e))return!1;var t=s(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1986:(e,t,r)=>{var s=r(1873),n=r(7828),a=r(5288),o=r(5911),i=r(317),l=r(4247),c=s?s.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,r,s,c,d,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!d(new n(e),new n(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=i;case"[object Set]":var f=1&s;if(h||(h=l),e.size!=t.size&&!f)return!1;var m=p.get(e);if(m)return m==t;s|=2,p.set(e,t);var g=o(h(e),h(t),s,c,d,p);return p.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},2032:(e,t,r)=>{var s=r(1042);e.exports=function(){this.__data__=s?s(null):{},this.size=0}},2199:(e,t,r)=>{var s=r(4528),n=r(6449);e.exports=function(e,t,r){var a=t(e);return n(e)?a:s(a,r(e))}},2404:(e,t,r)=>{var s=r(270);e.exports=function(e,t){return s(e,t)}},2428:(e,t,r)=>{var s=r(7534),n=r(346),a=Object.prototype,o=a.hasOwnProperty,i=a.propertyIsEnumerable,l=s(function(){return arguments}())?s:function(e){return n(e)&&o.call(e,"callee")&&!i.call(e,"callee")};e.exports=l},2552:(e,t,r)=>{var s=r(1873),n=r(659),a=r(9350),o=s?s.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?n(e):a(e)}},2651:(e,t,r)=>{var s=r(4218);e.exports=function(e,t){var r=e.__data__;return s(t)?r["string"==typeof t?"string":"hash"]:r.map}},2749:(e,t,r)=>{var s=r(1042),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return s?void 0!==t[e]:n.call(t,e)}},2804:(e,t,r)=>{var s=r(6110)(r(9325),"Promise");e.exports=s},2949:(e,t,r)=>{var s=r(2651);e.exports=function(e,t){var r=s(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}},3040:(e,t,r)=>{var s=r(1549),n=r(79),a=r(8223);e.exports=function(){this.size=0,this.__data__={hash:new s,map:new(a||n),string:new s}}},3345:e=>{e.exports=function(){return[]}},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},3650:(e,t,r)=>{var s=r(4335)(Object.keys,Object);e.exports=s},3656:(e,t,r)=>{e=r.nmd(e);var s=r(9325),n=r(9935),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,i=o&&o.exports===a?s.Buffer:void 0,l=(i?i.isBuffer:void 0)||n;e.exports=l},3661:(e,t,r)=>{var s=r(3040),n=r(7670),a=r(289),o=r(4509),i=r(2949);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}l.prototype.clear=s,l.prototype.delete=n,l.prototype.get=a,l.prototype.has=o,l.prototype.set=i,e.exports=l},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4247:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},4248:e=>{e.exports=function(e,t){for(var r=-1,s=null==e?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}},4335:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},4509:(e,t,r)=>{var s=r(2651);e.exports=function(e){return s(this,e).has(e)}},4528:e=>{e.exports=function(e,t){for(var r=-1,s=t.length,n=e.length;++r<s;)e[n+r]=t[r];return e}},4664:(e,t,r)=>{var s=r(9770),n=r(3345),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,i=o?function(e){return null==e?[]:(e=Object(e),s(o(e),function(t){return a.call(e,t)}))}:n;e.exports=i},4739:(e,t,r)=>{var s=r(6025);e.exports=function(e){var t=this.__data__,r=s(t,e);return r<0?void 0:t[r][1]}},4840:(e,t,r)=>{var s="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=s},4894:(e,t,r)=>{var s=r(1882),n=r(294);e.exports=function(e){return null!=e&&n(e.length)&&!s(e)}},4901:(e,t,r)=>{var s=r(2552),n=r(294),a=r(346),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&n(e.length)&&!!o[s(e)]}},4915:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},5083:(e,t,r)=>{var s=r(1882),n=r(7296),a=r(3805),o=r(7473),i=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,d=c.hasOwnProperty,p=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||n(e))&&(s(e)?p:i).test(o(e))}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5338:(e,t,r)=>{"use strict";var s=r(5795);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},5481:(e,t,r)=>{var s=r(9325)["__core-js_shared__"];e.exports=s},5527:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},5580:(e,t,r)=>{var s=r(6110)(r(9325),"DataView");e.exports=s},5708:function(e,t,r){"use strict";var s,n=this&&this.__extends||(s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},s(e,t)},function(e,t){function __(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=this&&this.__assign||function(){return a=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},a.apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var s=Array(e),n=0;for(t=0;t<r;t++)for(var a=arguments[t],o=0,i=a.length;o<i;o++,n++)s[n]=a[o];return s},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=i(r(1609)),c=i(r(5795)),u=i(r(2404)),d=i(r(1574)),p=function(e){function t(t){var r=e.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(e,t,s,n){var a,o,i,l;"text-change"===e?null===(o=(a=r).onEditorChangeText)||void 0===o||o.call(a,r.editor.root.innerHTML,t,n,r.unprivilegedEditor):"selection-change"===e&&(null===(l=(i=r).onEditorChangeSelection)||void 0===l||l.call(i,t,n,r.unprivilegedEditor))};var s=r.isControlled()?t.value:t.defaultValue;return r.value=null!=s?s:"",r}return n(t,e),t.prototype.validateProps=function(e){var t;if(l.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(l.default.Children.count(e.children)&&"textarea"===(null===(t=l.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var r,s=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var n=this.getEditorContents(),a=null!=(r=e.value)?r:"";this.isEqualValue(a,n)||this.setEditorContents(this.editor,a)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),o(this.cleanProps,this.dirtyProps).some(function(t){return!u.default(e[t],s.props[t])})},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some(function(r){return!u.default(e[r],t.props[r])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var s=this.editor.getContents(),n=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:n},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var a=this.regenerationSnapshot,o=(s=a.delta,a.selection);delete this.regenerationSnapshot,this.instantiateEditor();var i=this.editor;i.setContents(s),h(function(){return r.setEditorSelection(i,o)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var r=new d.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?u.default(e.ops,t.ops):u.default(e,t)},t.prototype.setEditorContents=function(e,t){var r=this;this.value=t;var s=this.getEditorSelection();"string"==typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),h(function(){return r.setEditorSelection(e,s)})},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var r,s;(null===(s=null===(r=e)||void 0===r?void 0:r.scroll)||void 0===s?void 0:s.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=c.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,r=t.children,s=t.preserveWhitespace,n={key:this.state.generation,ref:function(t){e.editingArea=t}};return l.default.Children.count(r)?l.default.cloneElement(l.default.Children.only(r),n):s?l.default.createElement("pre",a({},n)):l.default.createElement("div",a({},n))},t.prototype.render=function(){var e;return l.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!=e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,r,s){var n,a;if(this.editor){var o=this.isDelta(this.value)?s.getContents():s.getHTML();o!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=o,null===(a=(n=this.props).onChange)||void 0===a||a.call(n,e,t,r,s))}},t.prototype.onEditorChangeSelection=function(e,t,r){var s,n,a,o,i,l;if(this.editor){var c=this.getEditorSelection(),d=!c&&e,p=c&&!e;u.default(e,c)||(this.selection=e,null===(n=(s=this.props).onChangeSelection)||void 0===n||n.call(s,e,t,r),d?null===(o=(a=this.props).onFocus)||void 0===o||o.call(a,e,t,r):p&&(null===(l=(i=this.props).onBlur)||void 0===l||l.call(i,c,t,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=d.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(l.default.Component);function h(e){Promise.resolve().then(e)}e.exports=p},5749:(e,t,r)=>{var s=r(1042);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=s&&void 0===t?"__lodash_hash_undefined__":t,this}},5795:e=>{"use strict";e.exports=window.ReactDOM},5861:(e,t,r)=>{var s=r(5580),n=r(8223),a=r(2804),o=r(6545),i=r(8303),l=r(2552),c=r(7473),u="[object Map]",d="[object Promise]",p="[object Set]",h="[object WeakMap]",f="[object DataView]",m=c(s),g=c(n),y=c(a),x=c(o),b=c(i),v=l;(s&&v(new s(new ArrayBuffer(1)))!=f||n&&v(new n)!=u||a&&v(a.resolve())!=d||o&&v(new o)!=p||i&&v(new i)!=h)&&(v=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,s=r?c(r):"";if(s)switch(s){case m:return f;case g:return u;case y:return d;case x:return p;case b:return h}return t}),e.exports=v},5911:(e,t,r)=>{var s=r(8859),n=r(4248),a=r(9219);e.exports=function(e,t,r,o,i,l){var c=1&r,u=e.length,d=t.length;if(u!=d&&!(c&&d>u))return!1;var p=l.get(e),h=l.get(t);if(p&&h)return p==t&&h==e;var f=-1,m=!0,g=2&r?new s:void 0;for(l.set(e,t),l.set(t,e);++f<u;){var y=e[f],x=t[f];if(o)var b=c?o(x,y,f,t,e,l):o(y,x,f,e,t,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!n(t,function(e,t){if(!a(g,t)&&(y===e||i(y,e,r,o,l)))return g.push(t)})){m=!1;break}}else if(y!==x&&!i(y,x,r,o,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},5950:(e,t,r)=>{var s=r(695),n=r(8984),a=r(4894);e.exports=function(e){return a(e)?s(e):n(e)}},6009:(e,t,r)=>{e=r.nmd(e);var s=r(4840),n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,o=a&&a.exports===n&&s.process,i=function(){try{return a&&a.require&&a.require("util").types||o&&o.binding&&o.binding("util")}catch(e){}}();e.exports=i},6025:(e,t,r)=>{var s=r(5288);e.exports=function(e,t){for(var r=e.length;r--;)if(s(e[r][0],t))return r;return-1}},6110:(e,t,r)=>{var s=r(5083),n=r(392);e.exports=function(e,t){var r=n(e,t);return s(r)?r:void 0}},6449:e=>{var t=Array.isArray;e.exports=t},6545:(e,t,r)=>{var s=r(6110)(r(9325),"Set");e.exports=s},6721:(e,t,r)=>{var s=r(1042),n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(s){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return n.call(t,e)?t[e]:void 0}},7068:(e,t,r)=>{var s=r(7217),n=r(5911),a=r(1986),o=r(689),i=r(5861),l=r(6449),c=r(3656),u=r(7167),d="[object Arguments]",p="[object Array]",h="[object Object]",f=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,m,g,y){var x=l(e),b=l(t),v=x?p:i(e),_=b?p:i(t),j=(v=v==d?h:v)==h,w=(_=_==d?h:_)==h,N=v==_;if(N&&c(e)){if(!c(t))return!1;x=!0,j=!1}if(N&&!j)return y||(y=new s),x||u(e)?n(e,t,r,m,g,y):a(e,t,v,r,m,g,y);if(!(1&r)){var k=j&&f.call(e,"__wrapped__"),C=w&&f.call(t,"__wrapped__");if(k||C){var E=k?e.value():e,S=C?t.value():t;return y||(y=new s),g(E,S,r,m,y)}}return!!N&&(y||(y=new s),o(e,t,r,m,g,y))}},7167:(e,t,r)=>{var s=r(4901),n=r(7301),a=r(6009),o=a&&a.isTypedArray,i=o?n(o):s;e.exports=i},7217:(e,t,r)=>{var s=r(79),n=r(1420),a=r(938),o=r(3605),i=r(9817),l=r(945);function c(e){var t=this.__data__=new s(e);this.size=t.size}c.prototype.clear=n,c.prototype.delete=a,c.prototype.get=o,c.prototype.has=i,c.prototype.set=l,e.exports=c},7296:(e,t,r)=>{var s,n=r(5481),a=(s=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";e.exports=function(e){return!!a&&a in e}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7534:(e,t,r)=>{var s=r(2552),n=r(346);e.exports=function(e){return n(e)&&"[object Arguments]"==s(e)}},7670:(e,t,r)=>{var s=r(2651);e.exports=function(e){var t=s(this,e).delete(e);return this.size-=t?1:0,t}},7828:(e,t,r)=>{var s=r(9325).Uint8Array;e.exports=s},8096:e=>{e.exports=function(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}},8223:(e,t,r)=>{var s=r(6110)(r(9325),"Map");e.exports=s},8303:(e,t,r)=>{var s=r(6110)(r(9325),"WeakMap");e.exports=s},8655:(e,t,r)=>{var s=r(6025);e.exports=function(e){return s(this.__data__,e)>-1}},8859:(e,t,r)=>{var s=r(3661),n=r(1380),a=r(1459);function o(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new s;++t<r;)this.add(e[t])}o.prototype.add=o.prototype.push=n,o.prototype.has=a,e.exports=o},8984:(e,t,r)=>{var s=r(5527),n=r(3650),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!s(e))return n(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},9219:e=>{e.exports=function(e,t){return e.has(t)}},9325:(e,t,r)=>{var s=r(4840),n="object"==typeof self&&self&&self.Object===Object&&self,a=s||n||Function("return this")();e.exports=a},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9770:e=>{e.exports=function(e,t){for(var r=-1,s=null==e?0:e.length,n=0,a=[];++r<s;){var o=e[r];t(o,r,e)&&(a[n++]=o)}return a}},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},9935:e=>{e.exports=function(){return!1}}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};r.r(e),r.d(e,{courseExists:()=>dn,create:()=>Zs,createCourse:()=>an,delete:()=>tn,deleteCourse:()=>ln,deleteFn:()=>tn,duplicate:()=>rn,duplicateCourse:()=>cn,getAll:()=>Xs,getCount:()=>un,getCourse:()=>nn,getCourses:()=>sn,getCoursesByCategory:()=>xn,getCoursesByDifficulty:()=>bn,getEnrolledUsersCount:()=>pn,getFeaturedCourses:()=>vn,getOne:()=>Js,getPublishedCourses:()=>jn,publishCourse:()=>fn,searchCoursesByTitle:()=>yn,toggleCourseFeatured:()=>gn,unpublishCourse:()=>mn,update:()=>en,updateCourse:()=>on,updateCourseStatus:()=>hn});var t={};r.r(t),r.d(t,{create:()=>Pn,createLesson:()=>Wn,delete:()=>Ln,deleteFn:()=>Ln,deleteLesson:()=>Yn,duplicateLesson:()=>zn,getAll:()=>qn,getLesson:()=>Kn,getLessonStatistics:()=>Hn,getLessons:()=>Vn,getLessonsByCourse:()=>On,getLessonsByType:()=>Bn,getLessonsCount:()=>Mn,getOne:()=>Tn,getPublishedLessons:()=>Qn,lessonExists:()=>Rn,moveLessonToCourse:()=>Un,publishLesson:()=>Dn,unpublishLesson:()=>$n,update:()=>An,updateLesson:()=>Gn,updateLessonOrder:()=>Fn,updateLessonStatus:()=>In});var s={};r.r(s),r.d(s,{addQuestionToQuiz:()=>da,create:()=>aa,createQuiz:()=>ga,delete:()=>ia,deleteFn:()=>ia,deleteQuiz:()=>xa,duplicate:()=>la,duplicateQuiz:()=>ba,getAll:()=>sa,getOne:()=>na,getQuiz:()=>ma,getQuizStatistics:()=>ua,getQuizzes:()=>fa,getQuizzesByCourse:()=>ca,removeQuestionFromQuiz:()=>pa,update:()=>oa,updateQuiz:()=>ya,updateQuizQuestionOrder:()=>ha});var n={};r.r(n),r.d(n,{bulkCreateQuestions:()=>oc,create:()=>$l,createQuestion:()=>Hl,delete:()=>Ul,deleteFn:()=>Ul,deleteQuestion:()=>Kl,duplicateQuestion:()=>Gl,getAll:()=>Il,getOne:()=>Dl,getPublishedQuestions:()=>nc,getQuestion:()=>Ql,getQuestionStatistics:()=>ac,getQuestions:()=>Bl,getQuestionsByCategory:()=>rc,getQuestionsByDifficulty:()=>tc,getQuestionsByProvider:()=>sc,getQuestionsByQuiz:()=>Wl,getQuestionsByType:()=>ec,getQuestionsCount:()=>Yl,questionExists:()=>Xl,update:()=>Fl,updateQuestion:()=>Vl,updateQuestionOrder:()=>Zl,updateQuestionStatus:()=>Jl});var a={};r.r(a);var o=r(1609),i=r.n(o),l=r(5338);r(4915),Object.create(null);const c={},u=(e,t,r,s)=>{f(r)&&c[r]||(f(r)&&(c[r]=new Date),((e,t,r,s)=>{const n=[r,{code:t,...s||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(n,"warn","react-i18next::",!0);f(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...n):console?.warn&&console.warn(...n)})(e,t,r,s))},d=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},p=(e,t,r)=>{e.loadNamespaces(t,d(e,r))},h=(e,t,r,s)=>{if(f(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return p(e,r,s);r.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,d(e,s))},f=e=>"string"==typeof e,m=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,g={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},y=e=>g[e];let x,b={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(m,y)};const v={type:"3rdParty",init(e){((e={})=>{b={...b,...e}})(e.options.react),(e=>{x=e})(e)}},_=(0,o.createContext)();class j{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const w=(e,t,r,s)=>e.getFixedT(t,r,s),N=(e,t={})=>{const{i18n:r}=t,{i18n:s,defaultNS:n}=(0,o.useContext)(_)||{},a=r||s||x;if(a&&!a.reportNamespaces&&(a.reportNamespaces=new j),!a){u(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return f(t)?t:"object"==typeof(r=t)&&null!==r&&f(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var r},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}a.options.react?.wait&&u(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...b,...a.options.react,...t},{useSuspense:l,keyPrefix:c}=i;let d=e||n||a.options?.defaultNS;d=f(d)?[d]:d||["translation"],a.reportNamespaces.addUsedNamespaces?.(d);const m=(a.isInitialized||a.initializedStoreOnce)&&d.every(e=>((e,t,r={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:r.lng,precheck:(t,s)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!s(t.isLanguageChangingTo,e))return!1}}):(u(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,a,i)),g=((e,t,r,s)=>(0,o.useCallback)(w(e,t,r,s),[e,t,r,s]))(a,t.lng||null,"fallback"===i.nsMode?d:d[0],c),y=()=>g,v=()=>w(a,t.lng||null,"fallback"===i.nsMode?d:d[0],c),[N,k]=(0,o.useState)(y);let C=d.join();t.lng&&(C=`${t.lng}${C}`);const E=((e,t)=>{const r=(0,o.useRef)();return(0,o.useEffect)(()=>{r.current=e},[e,t]),r.current})(C),S=(0,o.useRef)(!0);(0,o.useEffect)(()=>{const{bindI18n:e,bindI18nStore:r}=i;S.current=!0,m||l||(t.lng?h(a,t.lng,d,()=>{S.current&&k(v)}):p(a,d,()=>{S.current&&k(v)})),m&&E&&E!==C&&S.current&&k(v);const s=()=>{S.current&&k(v)};return e&&a?.on(e,s),r&&a?.store.on(r,s),()=>{S.current=!1,a&&e&&e?.split(" ").forEach(e=>a.off(e,s)),r&&a&&r.split(" ").forEach(e=>a.store.off(e,s))}},[a,C]),(0,o.useEffect)(()=>{S.current&&m&&k(y)},[a,c,m]);const q=[N,a,m];if(q.t=N,q.i18n=a,q.ready=m,m)return q;if(!m&&!l)return q;throw new Promise(e=>{t.lng?h(a,t.lng,d,()=>e()):p(a,d,()=>e())})};function k({i18n:e,defaultNS:t,children:r}){const s=(0,o.useMemo)(()=>({i18n:e,defaultNS:t}),[e,t]);return(0,o.createElement)(_.Provider,{value:s},r)}const C=e=>"string"==typeof e,E=()=>{let e,t;const r=new Promise((r,s)=>{e=r,t=s});return r.resolve=e,r.reject=t,r},S=e=>null==e?"":""+e,q=/###/g,O=e=>e&&e.indexOf("###")>-1?e.replace(q,"."):e,T=e=>!e||C(e),P=(e,t,r)=>{const s=C(t)?t.split("."):t;let n=0;for(;n<s.length-1;){if(T(e))return{};const t=O(s[n]);!e[t]&&r&&(e[t]=new r),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++n}return T(e)?{}:{obj:e,k:O(s[n])}},A=(e,t,r)=>{const{obj:s,k:n}=P(e,t,Object);if(void 0!==s||1===t.length)return void(s[n]=r);let a=t[t.length-1],o=t.slice(0,t.length-1),i=P(e,o,Object);for(;void 0===i.obj&&o.length;)a=`${o[o.length-1]}.${a}`,o=o.slice(0,o.length-1),i=P(e,o,Object),i?.obj&&void 0!==i.obj[`${i.k}.${a}`]&&(i.obj=void 0);i.obj[`${i.k}.${a}`]=r},L=(e,t)=>{const{obj:r,k:s}=P(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,s))return r[s]},z=(e,t,r)=>{for(const s in t)"__proto__"!==s&&"constructor"!==s&&(s in e?C(e[s])||e[s]instanceof String||C(t[s])||t[s]instanceof String?r&&(e[s]=t[s]):z(e[s],t[s],r):e[s]=t[s]);return e},M=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const I=e=>C(e)?e.replace(/[&<>"'\/]/g,e=>R[e]):e,D=[" ",",","?","!",";"],$=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}(20),F=(e,t,r=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const s=t.split(r);let n=e;for(let e=0;e<s.length;){if(!n||"object"!=typeof n)return;let t,a="";for(let o=e;o<s.length;++o)if(o!==e&&(a+=r),a+=s[o],t=n[a],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&o<s.length-1)continue;e+=o-e+1;break}n=t}return n},U=e=>e?.replace("_","-"),B={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class Q{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||B,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,s){return s&&!this.debug?null:(C(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new Q(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Q(this.logger,e)}}var H=new Q;class V{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const r=this.observers[e].get(t)||0;this.observers[e].set(t,r+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,r])=>{for(let s=0;s<r;s++)e(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,s])=>{for(let n=0;n<s;n++)r.apply(r,[e,...t])})}}class K extends V{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,s={}){const n=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,a=void 0!==s.ignoreJSONStructure?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],r&&(Array.isArray(r)?o.push(...r):C(r)&&n?o.push(...r.split(n)):o.push(r)));const i=L(this.data,o);return!i&&!t&&!r&&e.indexOf(".")>-1&&(e=o[0],t=o[1],r=o.slice(2).join(".")),!i&&a&&C(r)?F(this.data?.[e]?.[t],r,n):i}addResource(e,t,r,s,n={silent:!1}){const a=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator;let o=[e,t];r&&(o=o.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(o=e.split("."),s=t,t=o[1]),this.addNamespaces(t),A(this.data,o,s),n.silent||this.emit("added",e,t,r,s)}addResources(e,t,r,s={silent:!1}){for(const s in r)(C(r[s])||Array.isArray(r[s]))&&this.addResource(e,t,s,r[s],{silent:!0});s.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,s,n,a={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),s=r,r=t,t=o[1]),this.addNamespaces(t);let i=L(this.data,o)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?z(i,r,n):i={...i,...r},A(this.data,o,i),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var W={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,s,n){return e.forEach(e=>{t=this.processors[e]?.process(t,r,s,n)??t}),t}};const G=Symbol("i18next/PATH_KEY");function Y(e,t){const{[G]:r}=e(function(){const e=[],t=Object.create(null);let r;return t.get=(s,n)=>(r?.revoke?.(),n===G?e:(e.push(n),r=Proxy.revocable(s,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}());return r.join(t?.keySeparator??".")}const X={},J=e=>!C(e)&&"boolean"!=typeof e&&"number"!=typeof e;class Z extends V{constructor(e,t={}){var r,s;super(),r=e,s=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{r[e]&&(s[e]=r[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=H.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};if(null==e)return!1;const s=this.resolve(e,r);return void 0!==s?.res}extractFromKey(e,t){let r=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");const s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let n=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,r)=>{t=t||"",r=r||"";const s=D.filter(e=>t.indexOf(e)<0&&r.indexOf(e)<0);if(0===s.length)return!0;const n=$.getRegExp(`(${s.map(e=>"?"===e?"\\?":e).join("|")})`);let a=!n.test(e);if(!a){const t=e.indexOf(r);t>0&&!n.test(e.substring(0,t))&&(a=!0)}return a})(e,r,s));if(a&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:C(n)?[n]:n};const a=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(a[0])>-1)&&(n=a.shift()),e=a.join(s)}return{key:e,namespaces:C(n)?[n]:n}}translate(e,t,r){let s="object"==typeof t?{...t}:t;if("object"!=typeof s&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof s&&(s={...s}),s||(s={}),null==e)return"";"function"==typeof e&&(e=Y(e,{...this.options,...s})),Array.isArray(e)||(e=[String(e)]);const n=void 0!==s.returnDetails?s.returnDetails:this.options.returnDetails,a=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator,{key:o,namespaces:i}=this.extractFromKey(e[e.length-1],s),l=i[i.length-1];let c=void 0!==s.nsSeparator?s.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=s.lng||this.language,d=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===u?.toLowerCase())return d?n?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:`${l}${c}${o}`:n?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(s)}:o;const p=this.resolve(e,s);let h=p?.res;const f=p?.usedKey||o,m=p?.exactUsedKey||o,g=void 0!==s.joinArrays?s.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,x=void 0!==s.count&&!C(s.count),b=Z.hasDefaultValue(s),v=x?this.pluralResolver.getSuffix(u,s.count,s):"",_=s.ordinal&&x?this.pluralResolver.getSuffix(u,s.count,{ordinal:!1}):"",j=x&&!s.ordinal&&0===s.count,w=j&&s[`defaultValue${this.options.pluralSeparator}zero`]||s[`defaultValue${v}`]||s[`defaultValue${_}`]||s.defaultValue;let N=h;y&&!h&&b&&(N=w);const k=J(N),E=Object.prototype.toString.apply(N);if(!(y&&N&&k&&["[object Number]","[object Function]","[object RegExp]"].indexOf(E)<0)||C(g)&&Array.isArray(N))if(y&&C(g)&&Array.isArray(h))h=h.join(g),h&&(h=this.extendTranslation(h,e,s,r));else{let t=!1,n=!1;!this.isValidLookup(h)&&b&&(t=!0,h=w),this.isValidLookup(h)||(n=!0,h=o);const i=(s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&n?void 0:h,d=b&&w!==h&&this.options.updateMissing;if(n||t||d){if(this.logger.log(d?"updateKey":"missingKey",u,l,o,d?w:h),a){const e=this.resolve(o,{...s,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(s.lng||this.language):e.push(s.lng||this.language);const r=(e,t,r)=>{const n=b&&r!==h?r:i;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,n,d,s):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,l,t,n,d,s),this.emit("missingKey",e,l,t,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&x?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,s);j&&s[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{r([e],o+t,s[`defaultValue${t}`]||w)})}):r(e,o,w))}h=this.extendTranslation(h,e,s,p,r),n&&h===o&&this.options.appendNamespaceToMissingKey&&(h=`${l}${c}${o}`),(n||t)&&this.options.parseMissingKeyHandler&&(h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?h:void 0,s))}else{if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,N,{...s,ns:i}):`key '${o} (${this.language})' returned an object instead of string.`;return n?(p.res=e,p.usedParams=this.getUsedParamsDetails(s),p):e}if(a){const e=Array.isArray(N),t=e?[]:{},r=e?m:f;for(const e in N)if(Object.prototype.hasOwnProperty.call(N,e)){const n=`${r}${a}${e}`;t[e]=b&&!h?this.translate(n,{...s,defaultValue:J(w)?w[e]:void 0,joinArrays:!1,ns:i}):this.translate(n,{...s,joinArrays:!1,ns:i}),t[e]===n&&(t[e]=N[e])}h=t}}return n?(p.res=h,p.usedParams=this.getUsedParamsDetails(s),p):h}extendTranslation(e,t,r,s,n){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const a=C(e)&&(void 0!==r?.interpolation?.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(a){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let i=r.replace&&!C(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),e=this.interpolator.interpolate(e,i,r.lng||this.language||s.usedLng,r),a){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(r.nest=!1)}!r.lng&&s&&s.res&&(r.lng=this.language||s.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,(...e)=>n?.[0]!==e[0]||r.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,o=C(a)?[a]:a;return null!=e&&o?.length&&!1!==r.applyPostProcessor&&(e=W.handle(o,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,s,n,a,o;return C(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(r))return;const i=this.extractFromKey(e,t),l=i.key;s=l;let c=i.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==t.count&&!C(t.count),d=u&&!t.ordinal&&0===t.count,p=void 0!==t.context&&(C(t.context)||"number"==typeof t.context)&&""!==t.context,h=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{this.isValidLookup(r)||(o=e,X[`${h[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(o)||(X[`${h[0]}-${e}`]=!0,this.logger.warn(`key "${s}" for languages "${h.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),h.forEach(s=>{if(this.isValidLookup(r))return;a=s;const o=[l];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(o,l,s,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(s,t.count,t));const r=`${this.options.pluralSeparator}zero`,n=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&0===e.indexOf(n)&&o.push(l+e.replace(n,this.options.pluralSeparator)),o.push(l+e),d&&o.push(l+r)),p){const s=`${l}${this.options.contextSeparator||"_"}${t.context}`;o.push(s),u&&(t.ordinal&&0===e.indexOf(n)&&o.push(s+e.replace(n,this.options.pluralSeparator)),o.push(s+e),d&&o.push(s+r))}}let i;for(;i=o.pop();)this.isValidLookup(r)||(n=i,r=this.getResource(s,e,i,t))}))})}),{res:r,usedKey:s,exactUsedKey:n,usedLng:a,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,r,s={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,s):this.resourceStore.getResource(e,t,r,s)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!C(e.replace);let s=r?e.replace:e;if(r&&void 0!==e.count&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const e of t)delete s[e]}return s}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}class ee{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=H.create("languageUtils")}getScriptPartFromCode(e){if(!(e=U(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=U(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(C(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const r=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(r)||(t=r)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const r=this.getScriptPartFromCode(e);if(this.isSupportedCode(r))return t=r;const s=this.getLanguagePartFromCode(e);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(e=>e===s?e:e.indexOf("-")<0&&s.indexOf("-")<0?void 0:e.indexOf("-")>0&&s.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===s||0===e.indexOf(s)&&s.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),C(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),s=[],n=e=>{e&&(this.isSupportedCode(e)?s.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return C(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&n(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&n(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&n(this.getLanguagePartFromCode(e))):C(e)&&n(this.formatLanguageCode(e)),r.forEach(e=>{s.indexOf(e)<0&&n(this.formatLanguageCode(e))}),s}}const te={zero:0,one:1,two:2,few:3,many:4,other:5},re={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class se{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=H.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=U("dev"===e?"en":e),s=t.ordinal?"ordinal":"cardinal",n=JSON.stringify({cleanedCode:r,type:s});if(n in this.pluralRulesCache)return this.pluralRulesCache[n];let a;try{a=new Intl.PluralRules(r,{type:s})}catch(r){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),re;if(!e.match(/-|_/))return re;const s=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(s,t)}return this.pluralRulesCache[n]=a,a}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((e,t)=>te[e]-te[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,r={}){const s=this.getRule(e,r);return s?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const ne=(e,t,r,s=".",n=!0)=>{let a=((e,t,r)=>{const s=L(e,r);return void 0!==s?s:L(t,r)})(e,t,r);return!a&&n&&C(r)&&(a=F(e,r,s),void 0===a&&(a=F(t,r,s))),a},ae=e=>e.replace(/\$/g,"$$$$");class oe{constructor(e={}){this.logger=H.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:s,prefix:n,prefixEscaped:a,suffix:o,suffixEscaped:i,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:p,nestingSuffix:h,nestingSuffixEscaped:f,nestingOptionsSeparator:m,maxReplaces:g,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:I,this.escapeValue=void 0===r||r,this.useRawValueToEscape=void 0!==s&&s,this.prefix=n?M(n):a||"{{",this.suffix=o?M(o):i||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?M(d):p||M("$t("),this.nestingSuffix=h?M(h):f||M(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,s){let n,a,o;const i=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const n=ne(t,i,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(n,void 0,r,{...s,...t,interpolationkey:e}):n}const n=e.split(this.formatSeparator),a=n.shift().trim(),o=n.join(this.formatSeparator).trim();return this.format(ne(t,i,a,this.options.keySeparator,this.options.ignoreJSONStructure),o,r,{...s,...t,interpolationkey:a})};this.resetRegExp();const c=s?.missingInterpolationHandler||this.options.missingInterpolationHandler,u=void 0!==s?.interpolation?.skipOnVariables?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>ae(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?ae(this.escape(e)):ae(e)}].forEach(t=>{for(o=0;n=t.regex.exec(e);){const r=n[1].trim();if(a=l(r),void 0===a)if("function"==typeof c){const t=c(e,n,s);a=C(t)?t:""}else if(s&&Object.prototype.hasOwnProperty.call(s,r))a="";else{if(u){a=n[0];continue}this.logger.warn(`missed to pass in variable ${r} for interpolating ${e}`),a=""}else C(a)||this.useRawValueToEscape||(a=S(a));const i=t.safeValue(a);if(e=e.replace(n[0],i),u?(t.regex.lastIndex+=a.length,t.regex.lastIndex-=n[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,t,r={}){let s,n,a;const o=(e,t)=>{const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const s=e.split(new RegExp(`${r}[ ]*{`));let n=`{${s[1]}`;e=s[0],n=this.interpolate(n,a);const o=n.match(/'/g),i=n.match(/"/g);((o?.length??0)%2==0&&!i||i.length%2!=0)&&(n=n.replace(/'/g,'"'));try{a=JSON.parse(n),t&&(a={...t,...a})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${n}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,e};for(;s=this.nestingRegexp.exec(e);){let i=[];a={...r},a=a.replace&&!C(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const l=/{.*}/.test(s[1])?s[1].lastIndexOf("}")+1:s[1].indexOf(this.formatSeparator);if(-1!==l&&(i=s[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),s[1]=s[1].slice(0,l)),n=t(o.call(this,s[1].trim(),a),a),n&&s[0]===e&&!C(n))return n;C(n)||(n=S(n)),n||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),n=""),i.length&&(n=i.reduce((e,t)=>this.format(e,t,r.lng,{...r,interpolationkey:s[1].trim()}),n.trim())),e=e.replace(s[0],n),this.regexp.lastIndex=0}return e}}const ie=e=>{const t={};return(r,s,n)=>{let a=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(a={...a,[n.interpolationkey]:void 0});const o=s+JSON.stringify(a);let i=t[o];return i||(i=e(U(s),n),t[o]=i),i(r)}},le=e=>(t,r,s)=>e(U(r),s)(t);class ce{constructor(e={}){this.logger=H.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?ie:le;this.formats={number:r((e,t)=>{const r=new Intl.NumberFormat(e,{...t});return e=>r.format(e)}),currency:r((e,t)=>{const r=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>r.format(e)}),datetime:r((e,t)=>{const r=new Intl.DateTimeFormat(e,{...t});return e=>r.format(e)}),relativetime:r((e,t)=>{const r=new Intl.RelativeTimeFormat(e,{...t});return e=>r.format(e,t.range||"day")}),list:r((e,t)=>{const r=new Intl.ListFormat(e,{...t});return e=>r.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=ie(t)}format(e,t,r,s={}){const n=t.split(this.formatSeparator);if(n.length>1&&n[0].indexOf("(")>1&&n[0].indexOf(")")<0&&n.find(e=>e.indexOf(")")>-1)){const e=n.findIndex(e=>e.indexOf(")")>-1);n[0]=[n[0],...n.splice(1,e)].join(this.formatSeparator)}return n.reduce((e,t)=>{const{formatName:n,formatOptions:a}=(e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const s=e.split("(");t=s[0].toLowerCase().trim();const n=s[1].substring(0,s[1].length-1);"currency"===t&&n.indexOf(":")<0?r.currency||(r.currency=n.trim()):"relativetime"===t&&n.indexOf(":")<0?r.range||(r.range=n.trim()):n.split(";").forEach(e=>{if(e){const[t,...s]=e.split(":"),n=s.join(":").trim().replace(/^'+|'+$/g,""),a=t.trim();r[a]||(r[a]=n),"false"===n&&(r[a]=!1),"true"===n&&(r[a]=!0),isNaN(n)||(r[a]=parseInt(n,10))}})}return{formatName:t,formatOptions:r}})(t);if(this.formats[n]){let t=e;try{const o=s?.formatParams?.[s.interpolationkey]||{},i=o.locale||o.lng||s.locale||s.lng||r;t=this.formats[n](e,i,{...a,...s,...o})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${n}`),e},e)}}class ue extends V{constructor(e,t,r,s={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=H.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,s.backend,s)}queueLoad(e,t,r,s){const n={},a={},o={},i={};return e.forEach(e=>{let s=!0;t.forEach(t=>{const o=`${e}|${t}`;!r.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===a[o]&&(a[o]=!0):(this.state[o]=1,s=!1,void 0===a[o]&&(a[o]=!0),void 0===n[o]&&(n[o]=!0),void 0===i[t]&&(i[t]=!0)))}),s||(o[e]=!0)}),(Object.keys(n).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(n),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(i)}}loaded(e,t,r){const s=e.split("|"),n=s[0],a=s[1];t&&this.emit("failedLoading",n,a,t),!t&&r&&this.store.addResourceBundle(n,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const o={};this.queue.forEach(r=>{((e,t,r)=>{const{obj:s,k:n}=P(e,t,Object);s[n]=s[n]||[],s[n].push(r)})(r.loaded,[n],a),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach(e=>{o[e]||(o[e]={});const t=r.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,r,s=0,n=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:r,tried:s,wait:n,callback:a});this.readingCalls++;const o=(o,i)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&i&&s<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,r,s+1,2*n,a)},n):a(o,i)},i=this.backend[r].bind(this.backend);if(2!==i.length)return i(e,t,o);try{const r=i(e,t);r&&"function"==typeof r.then?r.then(e=>o(null,e)).catch(o):o(null,r)}catch(e){o(e)}}prepareLoading(e,t,r={},s){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();C(e)&&(e=this.languageUtils.toResolveHierarchy(e)),C(t)&&(t=[t]);const n=this.queueLoad(e,t,r,s);if(!n.toLoad.length)return n.pending.length||s(),null;n.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),s=r[0],n=r[1];this.read(s,n,"read",void 0,void 0,(r,a)=>{r&&this.logger.warn(`${t}loading namespace ${n} for language ${s} failed`,r),!r&&a&&this.logger.log(`${t}loaded namespace ${n} for language ${s}`,a),this.loaded(e,r,a)})}saveMissing(e,t,r,s,n,a={},o=()=>{}){if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(null!=r&&""!==r){if(this.backend?.create){const i={...a,isUpdate:n},l=this.backend.create.bind(this.backend);if(l.length<6)try{let n;n=5===l.length?l(e,t,r,s,i):l(e,t,r,s),n&&"function"==typeof n.then?n.then(e=>o(null,e)).catch(o):o(null,n)}catch(e){o(e)}else l(e,t,r,s,o,i)}e&&e[0]&&this.store.addResource(e[0],t,r,s)}}else this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const de=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),C(e[1])&&(t.defaultValue=e[1]),C(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const r=e[3]||e[2];Object.keys(r).forEach(e=>{t[e]=r[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),pe=e=>(C(e.ns)&&(e.ns=[e.ns]),C(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),C(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),he=()=>{};class fe extends V{constructor(e={},t){var r;if(super(),this.options=pe(e),this.services={},this.logger=H,this.modules={external:[]},r=this,Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(e=>{"function"==typeof r[e]&&(r[e]=r[e].bind(r))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(C(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=de();this.options={...r,...this.options,...pe(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const s=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?H.init(s(this.modules.logger),this.options):H.init(null,this.options),e=this.modules.formatter?this.modules.formatter:ce;const t=new ee(this.options);this.store=new K(this.options.resources,this.options);const n=this.services;n.logger=H,n.resourceStore=this.store,n.languageUtils=t,n.pluralResolver=new se(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(n.formatter=s(e),n.formatter.init&&n.formatter.init(n,this.options),this.options.interpolation.format=n.formatter.format.bind(n.formatter)),n.interpolator=new oe(this.options),n.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},n.backendConnector=new ue(s(this.modules.backend),n.resourceStore,n,this.options),n.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(n.languageDetector=s(this.modules.languageDetector),n.languageDetector.init&&n.languageDetector.init(n,this.options.detection,this.options)),this.modules.i18nFormat&&(n.i18nFormat=s(this.modules.i18nFormat),n.i18nFormat.init&&n.i18nFormat.init(this)),this.translator=new Z(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=he),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const n=E(),a=()=>{const e=(e,r)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),n.resolve(r),t(e,r)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?a():setTimeout(a,0),n}loadResources(e,t=he){let r=t;const s=C(e)?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===s?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return r();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};s?t(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),r(e)})}else r(null)}reloadResources(e,t,r){const s=E();return"function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=he),this.services.backendConnector.reload(e,t,e=>{s.resolve(),r(e)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&W.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=E();this.emit("languageChanging",e);const s=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},n=(n,a)=>{a?this.isLanguageChangingTo===e&&(s(a),this.translator.changeLanguage(a),this.isLanguageChangingTo=void 0,this.emit("languageChanged",a),this.logger.log("languageChanged",a)):this.isLanguageChangingTo=void 0,r.resolve((...e)=>this.t(...e)),t&&t(n,(...e)=>this.t(...e))},a=t=>{e||t||!this.services.languageDetector||(t=[]);const r=C(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(r)?r:this.services.languageUtils.getBestMatchFromCodes(C(t)?[t]:t);a&&(this.language||s(a),this.translator.language||this.translator.changeLanguage(a),this.services.languageDetector?.cacheUserLanguage?.(a)),this.loadResources(a,e=>{n(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}getFixedT(e,t,r){const s=(e,t,...n)=>{let a;a="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(n)):{...t},a.lng=a.lng||s.lng,a.lngs=a.lngs||s.lngs,a.ns=a.ns||s.ns,""!==a.keyPrefix&&(a.keyPrefix=a.keyPrefix||r||s.keyPrefix);const o=this.options.keySeparator||".";let i;return a.keyPrefix&&Array.isArray(e)?i=e.map(e=>("function"==typeof e&&(e=Y(e,{...this.options,...t})),`${a.keyPrefix}${o}${e}`)):("function"==typeof e&&(e=Y(e,{...this.options,...t})),i=a.keyPrefix?`${a.keyPrefix}${o}${e}`:e),this.t(i,a)};return C(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=r,s}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],s=!!this.options&&this.options.fallbackLng,n=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;const a=(e,t)=>{const r=this.services.backendConnector.state[`${e}|${t}`];return-1===r||0===r||2===r};if(t.precheck){const e=t.precheck(this,a);if(void 0!==e)return e}return!(!this.hasResourceBundle(r,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!a(r,e)||s&&!a(n,e)))}loadNamespaces(e,t){const r=E();return this.options.ns?(C(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=E();C(e)&&(e=[e]);const s=this.options.preload||[],n=e.filter(e=>s.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return n.length?(this.options.preload=s.concat(n),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(e){}const t=this.services?.languageUtils||new ee(de());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new fe(e,t)}cloneInstance(e={},t=he){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},n=new fe(s);if(void 0===e.debug&&void 0===e.prefix||(n.logger=n.logger.clone(e)),["store","services","language"].forEach(e=>{n[e]=this[e]}),n.services={...this.services},n.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},r){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((r,s)=>(r[s]={...e[t][s]},r),e[t]),e),{});n.store=new K(e,s),n.services.resourceStore=n.store}return n.translator=new Z(n.services,s),n.translator.on("*",(e,...t)=>{n.emit(e,...t)}),n.init(s,t),n.translator.options=s,n.translator.backendConnector.services.utils={hasLoadedNamespace:n.hasLoadedNamespace.bind(n)},n}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const me=fe.createInstance();me.createInstance=fe.createInstance,me.createInstance,me.dir,me.init,me.loadResources,me.reloadResources,me.use,me.changeLanguage,me.getFixedT,me.t,me.exists,me.setDefaultNamespace,me.hasLoadedNamespace,me.loadNamespaces,me.loadLanguages;const ge=JSON.parse('{"common":{"save":"Save","cancel":"Cancel","delete":"Delete","edit":"Edit","duplicate":"Duplicate","view":"View","loading":"Loading...","uploading":"Uploading...","search":"Search","filter":"Filter","reset":"Reset","refresh":"Refresh","actions":"Actions","status":"Status","published":"Published","draft":"Draft","private":"Private","clearFilters":"Clear All Filters","noResults":"No results found","loadingMore":"Loading more...","endOfList":"You\'ve reached the end of the list.","updating":"Updating...","searching":"Searching...","filtering":"Filtering...","processing":"Processing...","optional":"Optional","required":"Required","all":"All","yes":"Yes","no":"No","back":"Back","next":"Next","previous":"Previous","close":"Close","settings":"Settings","questions":"Questions","select":"Select...","unlimited":"Unlimited","saving":"Saving...","add":"Add","added":"Added","createNew":"Create New","easy":"Easy","medium":"Medium","hard":"Hard","featureComingSoon":"Feature coming soon!"},"errors":{"fetchQuiz":"Failed to load quiz data.","saveQuiz":"Failed to save the quiz."},"sidebar":{"myDesk":"My Desk","studyPlanner":"Study Planner","test":"Test","supportMaterial":"Support Material","videosClasses":"Videos / Classes","profile":"My Profile","logout":"Log Out","expand":"Expand","collapse":"Collapse","logoAlt":"Company Logo","logoText":"Your Logo"},"courses":{"title":"Courses","description":"Create and manage courses with lessons, pricing, and enrollments","addNew":"Add New Course","createCourse":"Create Course","editCourse":"Edit Course","viewCourse":"View Course","duplicateCourse":"Duplicate Course","deleteCourse":"Delete Course","noCourses":"No courses found","noCoursesDescription":"You haven\'t created any courses yet.","searchPlaceholder":"Search courses...","loadingCourses":"Loading courses...","loadingMoreCourses":"Loading more courses...","courseContent":"Course Content","fields":{"title":"Course Title","description":"Description","excerpt":"Short Description","image":"Featured Image","category":"Category","difficulty":"Difficulty","price":"Price","salePrice":"Sale Price","productType":"Product Type","duration":"Duration","lessons":"Lessons","students":"Students","enrolled":"Enrolled","completion":"Completion","status":"Status","startDate":"Start Date","endDate":"End Date","position":"Display Position","maxStudents":"Maximum Students","difficultyLevel":"Difficulty Level"},"category":{"label":"Category","all":"All Categories","programming":"Programming","design":"Design","business":"Business","marketing":"Marketing","photography":"Photography"},"difficulty":{"label":"Difficulty","all":"All Levels","beginner":"Beginner","intermediate":"Intermediate","advanced":"Advanced","expert":"Expert"},"difficultyLevels":{"easy":"Easy","medium":"Medium","hard":"Hard"},"status":{"label":"Status","all":"All Statuses","publish":"Published","draft":"Draft","private":"Private"},"priceFilter":{"label":"Price","all":"All Prices","free":"Free","paid":"Paid","premium":"Premium ($100+)"},"stats":{"totalCourses":"Total Courses","totalStudents":"Students","totalLessons":"Lessons","averagePrice":"Avg. Price","revenue":"Revenue","totalRevenue":"Total Revenue","featuredCourses":"Featured Courses","completionRate":"Completion Rate","averageDuration":"Avg. Duration"},"units":{"hours":"hours","hour":"hour","weeks":"weeks","week":"week","lessons":"lessons","lesson":"lesson","students":"students","student":"student","free":"Free","duration":"duration"},"tabs":{"basic":"Basic Info","taxonomies":"Categories & Tags","pricing":"Pricing","schedule":"Schedule","lessons":"Lessons","settings":"Settings"},"taxonomies":{"categories":"Categories","topics":"Topics","difficulty":"Difficulty","providers":"Providers","courseTypes":"Course Types"},"placeholders":{"title":"Enter course title...","excerpt":"Short description for cards and previews...","content":"Full course description, what students will learn...","newCategory":"New category name..."},"actions":{"uploadImage":"Upload Image","addCategory":"Add New","saveAndCreate":"Save & Create Another"},"hints":{"optional":"Optional","salePrice":"If set, this will be shown as the discounted price","startDate":"When the course becomes available to students","endDate":"When the course closes or expires (optional)","duration":"Estimated time to complete the course","createLessons":"Create lessons first to assign them to this course","position":"Lower numbers appear first in the course list","maxStudents":"0 = unlimited enrollment","difficultyLevel":"This is a meta field, different from the taxonomy","image":"Recommended size: 1200x675px. Max 5MB."},"labels":{"pricePreview":"Price Preview","schedulePreview":"Schedule Preview","selected":"selected"},"info":{"woocommerce":"WooCommerce Integration","woocommerceDesc":"A WooCommerce product will be automatically created/updated when you save this course."},"validation":{"titleRequired":"Title is required","contentRequired":"Description is required","priceInvalid":"Price must be greater than 0","endDateInvalid":"End date must be after start date","positionInvalid":"Position must be a number","fixErrors":"Please fix the errors before saving"},"messages":{"createSuccess":"Course created successfully","updateSuccess":"Course updated successfully","deleteSuccess":"Course deleted successfully","duplicateSuccess":"Course duplicated successfully","createError":"Error creating course","updateError":"Error updating course","deleteError":"Error deleting course","duplicateError":"Error duplicating course","deleteConfirmTitle":"Delete Course","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone and will also remove all associated lessons.","found":"{{count}} course found","found_plural":"{{count}} courses found","noCategories":"No categories available","noLessons":"No lessons available yet"}},"lessons":{"title":"Lessons","description":"Create and manage interactive lessons with multiple content types","addNew":"Add New Lesson","createLesson":"Create Lesson","editLesson":"Edit Lesson","viewLesson":"View Lesson","duplicateLesson":"Duplicate Lesson","deleteLesson":"Delete Lesson","noLessons":"No lessons found","noLessonsDescription":"You haven\'t created any lessons yet.","searchPlaceholder":"Search lessons by title...","loadingLessons":"Loading lessons...","loadingMoreLessons":"Loading more lessons...","fields":{"title":"Lesson Title","description":"Description","content":"General Content","course":"Course","lessonType":"Lesson Type","lessonOrder":"Lesson Order","status":"Status","steps":"Content Steps","prerequisiteLessons":"Prerequisite Lessons","completionCriteria":"Completion Criteria","isRequired":"Is Required","duration":"Duration","resources":"Resources"},"lessonType":{"label":"Lesson Type","all":"All Types","video":"Video","text":"Text Content","mixed":"Mixed Content","quiz":"Quiz","interactive":"Interactive"},"status":{"label":"Status","all":"All Statuses","publish":"Published","draft":"Draft","private":"Private"},"course":{"label":"Course","all":"All Courses","select":"Select a course...","required":"Course is required"},"stats":{"totalLessons":"Total Lessons","videoLessons":"Video Lessons","textLessons":"Text Lessons","mixedLessons":"Mixed Lessons","totalSteps":"Total Steps","averageSteps":"Avg. Steps/Lesson","completedLessons":"Completed Lessons","requiredLessons":"Required Lessons"},"steps":{"title":"Content Steps","description":"Add and organize the content steps for this lesson","addStep":"Add Step","addFirstStep":"Add First Step","noSteps":"This lesson has no content steps yet.","noStepsDescription":"Steps allow you to organize content into manageable sections.","stepTitle":"Step Title","stepType":"Step Type","required":"At least one step is required","allStepsMustHaveTitle":"All steps must have a title"},"stepTypes":{"video":{"label":"Video","description":"Video content","videoUrl":"Video URL","duration":"Duration (minutes)","autoplay":"Autoplay","subtitlesUrl":"Subtitles URL"},"text":{"label":"Text Content","description":"Rich text content","content":"Content","estimatedTime":"Estimated Time (minutes)"},"pdf":{"label":"PDF Document","description":"Downloadable PDF file","fileUrl":"File URL","fileName":"File Name","fileSize":"File Size","downloadable":"Allow Download"},"quiz":{"label":"Quiz","description":"Knowledge assessment","quizId":"Quiz","passingScore":"Passing Score","maxAttempts":"Max Attempts","required":"Required to Complete"},"image":{"label":"Image","description":"Visual content","imageUrl":"Image URL","altText":"Alt Text","caption":"Caption","lightbox":"Enable Lightbox"},"audio":{"label":"Audio","description":"Audio content","audioUrl":"Audio URL","duration":"Duration (minutes)","transcriptUrl":"Transcript URL"}},"tabs":{"basic":"Basic Info","steps":"Content Steps","settings":"Advanced Settings"},"completionCriteria":{"label":"Completion Criteria","viewAll":"View All Content","passQuiz":"Pass Quiz","completeSteps":"Complete All Steps"},"placeholders":{"title":"Enter lesson title...","description":"Brief description of the lesson...","content":"General lesson content (optional)...","stepTitle":"Enter step title...","videoUrl":"https://... (Video URL)","imageUrl":"https://... (Image URL)","audioUrl":"https://... (Audio URL)","pdfUrl":"https://... (PDF URL)"},"hints":{"course":"The lesson must be associated with a course","lessonType":"The type determines how the lesson is presented","description":"This description appears on cards and previews","content":"This content appears before the lesson steps. HTML is supported.","lessonOrder":"Order of this lesson within the course","steps":"Organize content into manageable steps","completionCriteria":"What the student must do to complete this lesson","isRequired":"If checked, students must complete this lesson","prerequisiteLessons":"Lessons that must be completed before this one"},"actions":{"addStep":"Add Step","removeStep":"Remove Step","moveUp":"Move Up","moveDown":"Move Down","expandStep":"Expand Step","collapseStep":"Collapse Step"},"validation":{"titleRequired":"Title is required","courseRequired":"You must select a course","stepsRequired":"At least one step is required","stepTitleRequired":"Step title is required","videoUrlRequired":"Video URL is required","imageUrlRequired":"Image URL is required","audioUrlRequired":"Audio URL is required","pdfUrlRequired":"PDF URL is required","quizRequired":"You must select a quiz","fixErrors":"Please fix the errors before saving"},"messages":{"createSuccess":"Lesson created successfully","updateSuccess":"Lesson updated successfully","deleteSuccess":"Lesson deleted successfully","duplicateSuccess":"Lesson duplicated successfully","createError":"Error creating lesson","updateError":"Error updating lesson","deleteError":"Error deleting lesson","duplicateError":"Error duplicating lesson","deleteConfirmTitle":"Delete Lesson","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} lesson found","found_plural":"{{count}} lessons found","noCourses":"No courses available","noQuizzes":"No quizzes available"},"filters":{"course":"Filter by Course","type":"Filter by Type","status":"Filter by Status","clearFilters":"Clear Filters"}},"quizzes":{"title":"Quizzes","description":"Create and manage quizzes to assess student learning","addNew":"Add New Quiz","createQuiz":"Create Quiz","editQuiz":"Edit Quiz","viewQuiz":"View Quiz","deleteQuiz":"Delete Quiz","duplicateQuiz":"Duplicate Quiz","untitled":"Untitled Quiz","noQuizzes":"No quizzes found","noQuizzesDescription":"You haven\'t created any quizzes yet.","searchPlaceholder":"Search quizzes...","noDetailedResults":"No detailed results to show.","loadingQuizzes":"Loading quizzes...","loadingResults":"Loading quiz results...","quizResults":"Quiz Results","createNew":"Create New Quiz","editTitle":"Editing: {{title}}","form":{"title":"Quiz Title","course":"Course","category":"Category","difficulty":"Difficulty","instructions":"Instructions","passingScore":"Passing Score (%)","timeLimit":"Time Limit (mins)","maxAttempts":"Max Attempts","randomize":"Randomize Questions","showResults":"Show Results After Completion","negativeScoring":"Enable Negative Scoring","addQuestions":"Add Questions from Bank","searchPlaceholder":"Search questions by title...","selectedQuestions":"Selected Questions","noQuestions":"No questions have been added yet."},"fields":{"title":"Quiz Title","instructions":"Instructions","course":"Course","category":"Category","difficulty":"Difficulty","quizType":"Quiz Type","passingScore":"Passing Score","timeLimit":"Time Limit","maxAttempts":"Max Attempts","questions":"Questions","totalPoints":"Total Points","randomizeQuestions":"Randomize Questions","showResults":"Show Results","enableNegativeScoring":"Enable Negative Scoring"},"stats":{"totalQuizzes":"Total Quizzes","totalQuestions":"Total Questions","totalPoints":"Total Points","averageQuestions":"Avg. Questions"},"messages":{"titleRequired":"Quiz title is required","courseRequired":"Please select a course","questionsRequired":"Please add at least one question","noQuestionsAdded":"No questions added yet.","createSuccess":"Quiz created successfully","updateSuccess":"Quiz updated successfully","deleteSuccess":"Quiz deleted successfully","duplicateSuccess":"Quiz duplicated successfully","deleteConfirmTitle":"Delete Quiz","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} quiz found","found_plural":"{{count}} quizzes found"},"actions":{"createNewQuiz":"Create New Quiz","saveAndAddNew":"Save & Add New","saveChanges":"Save Changes","addQuestion":"Add Question","searchQuestions":"Search Questions","createFirstQuiz":"Create First Quiz"},"card":{"questions_one":"{{count}} Question","questions_other":"{{count}} Questions","points_one":"{{count}} Point","points_other":"{{count}} Points","attempts_one":"{{count}} Attempt","attempts_other":"{{count}} Attempts","avgScore":"{{count}}% Avg. Score","noCourse":"No course associated","viewQuestions":"View Questions ({{count}})"},"labels":{"allCourses":"All Courses","selectCourse":"Select a course...","minutes":"minutes","unlimited":"Unlimited","attempts":"attempts"}},"dashboard":{"title":"LMS Dashboard","recentResults":"Recent Results","noAttempts":"You haven\'t completed any quizzes yet.","stats":{"totalAttempts":"Total Attempts","passed":"Passed","failed":"Failed","averageScore":"Average Score"},"errors":{"loadAttempts":"Error loading quiz results."}},"questions":{"title":"Questions","description":"Create and manage questions for quizzes","addNew":"Add New Question","createQuestion":"Create Question","editQuestion":"Edit Question","viewQuestion":"View Question","deleteQuestion":"Delete Question","duplicateQuestion":"Duplicate Question","untitled":"Untitled Question","noQuestions":"No questions found","noQuestionsDescription":"You haven\'t created any questions yet.","searchPlaceholder":"Search questions...","loadingQuestions":"Loading questions...","fields":{"title":"Question Title","type":"Question Type","difficulty":"Difficulty","category":"Category","points":"Points","explanation":"Explanation","options":"Options","correctAnswer":"Correct Answer","provider":"Provider"},"types":{"multipleChoice":"Multiple Choice","trueFalse":"True/False","shortAnswer":"Short Answer","essay":"Essay","matching":"Matching","fillBlank":"Fill in the Blank"},"stats":{"totalQuestions":"Total Questions","byDifficulty":"By Difficulty","byType":"By Type","averagePoints":"Avg. Points"},"messages":{"titleRequired":"Question title is required","typeRequired":"Question type is required","optionsRequired":"At least two options are required","correctAnswerRequired":"You must mark at least one correct answer","createSuccess":"Question created successfully","updateSuccess":"Question updated successfully","deleteSuccess":"Question deleted successfully","duplicateSuccess":"Question duplicated successfully","deleteConfirmTitle":"Delete Question","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} question found","found_plural":"{{count}} questions found"},"actions":{"addOption":"Add Option","removeOption":"Remove Option","createFirstQuestion":"Create First Question"},"placeholders":{"option":"Option {{number}}","searchQuestions":"Search questions by title..."},"card":{"points":"{{count}} Points","noLesson":"No lesson associated","viewQuizzes":"View Associated Quizzes ({{count}})","difficulty":"Difficulty","provider":"Provider","difficulties":{"easy":"Easy","medium":"Medium","hard":"Hard"},"types":{"multiple_choice":"Multiple Choice","true_false":"True / False","fill_in_the_blanks":"Fill in the Blanks","short_answer":"Short Answer","essay":"Essay"}},"providers":{"human":"Human","ai":"AI","imported":"Imported"}},"students":{"title":"Students","description":"Manage students and enrollments","noStudents":"No students found","noStudentsDescription":"No students match your current filters.","searchPlaceholder":"Search students...","stats":{"totalUsers":"Total Users","enrolledUsers":"Enrolled Users","activeUsers":"Active Users","averageProgress":"Avg. Progress","recentRegistrations":"Recent Registrations"},"filters":{"allRoles":"All Roles","allCourses":"All Courses","allStatuses":"All Statuses","enrolled":"Enrolled","notEnrolled":"Not Enrolled"},"roles":{"administrator":"Administrator","editor":"Editor","author":"Author","contributor":"Contributor","subscriber":"Subscriber"},"actions":{"enroll":"Enroll","unenroll":"Unenroll","updateRole":"Update Role","bulkEnroll":"Bulk Enroll","bulkUnenroll":"Bulk Unenroll","viewProfile":"View Profile"},"messages":{"courseManagementMode":"Course Management Mode","viewingInContext":"You\'re viewing users in the context of: {{courseName}}","noUsersFound":"No users found","noUsersMatch":"No users match your current filters. Try adjusting your search or filter criteria.","clearSearch":"Clear search"}},"users":{"title":"Users","description":"Manage system users","stats":{"totalUsers":"Total Users","enrolledUsers":"Enrolled Users","activeUsers":"Active Users","averageProgress":"Avg. Progress"}},"modals":{"delete":{"confirmTitle":"Confirm Delete","confirmMessage":"Are you sure you want to delete this item? This action cannot be undone.","confirmButton":"Delete","cancelButton":"Cancel","typeToConfirm":"Type <strong>DELETE</strong> to confirm:","typeHere":"Type DELETE here","itemToDelete":"Item to delete:","processing":"Processing..."},"close":"Close","save":"Save","cancel":"Cancel"},"notifications":{"createSuccess":"{{resource}} created successfully","updateSuccess":"{{resource}} updated successfully","deleteSuccess":"{{resource}} deleted successfully","duplicateSuccess":"{{resource}} duplicated successfully","error":"An error occurred","savingChanges":"Saving changes...","operationFailed":"Operation failed"},"viewMode":{"cards":"Cards","list":"List","grid":"Grid","switchTo":"Switch to {{mode}} view"},"emptyStates":{"noItemsFound":"No items found","noItemsDescription":"There are no items matching your search criteria.","createFirst":"Create First","getStarted":"Get Started"},"filters":{"filterBy":"Filter by","clearAll":"Clear All","apply":"Apply","reset":"Reset","course":"Course","category":"Category","difficulty":"Difficulty","status":"Status","type":"Type"},"pagination":{"showing":"Showing","of":"of","results":"results","page":"Page","previous":"Previous","next":"Next","first":"First","last":"Last"},"validation":{"required":"This field is required","invalidEmail":"Invalid email","invalidUrl":"Invalid URL","minLength":"Must be at least {{length}} characters","maxLength":"Must not exceed {{length}} characters","mustBeNumber":"Must be a number","mustBePositive":"Must be a positive number"}}'),ye=JSON.parse('{"common":{"save":"Guardar","cancel":"Cancelar","delete":"Eliminar","edit":"Editar","duplicate":"Duplicar","view":"Ver","loading":"Cargando...","uploading":"Subiendo...","search":"Buscar","filter":"Filtrar","reset":"Reiniciar","refresh":"Refrescar","actions":"Acciones","status":"Estado","published":"Publicado","draft":"Borrador","private":"Privado","clearFilters":"Limpiar Todos los Filtros","noResults":"No se encontraron resultados","loadingMore":"Cargando más...","endOfList":"Has llegado al final de la lista.","updating":"Actualizando...","searching":"Buscando...","filtering":"Filtrando...","processing":"Procesando...","optional":"Opcional","required":"Obligatorio","all":"Todos","yes":"Sí","no":"No","back":"Volver","next":"Siguiente","previous":"Anterior","close":"Cerrar","settings":"Ajustes","questions":"Preguntas","select":"Seleccionar...","unlimited":"Ilimitado","saving":"Guardando...","add":"Añadir","added":"Añadido","createNew":"Crear Nuevo","easy":"Fácil","medium":"Medio","hard":"Difícil","featureComingSoon":"Funcionalidad próximamente disponible."},"errors":{"fetchQuiz":"Error al cargar los datos del cuestionario.","saveQuiz":"Error al guardar el cuestionario."},"sidebar":{"myDesk":"Mi Escritorio","studyPlanner":"Planificador de Estudio","test":"Test","supportMaterial":"Material de Apoyo","videosClasses":"Vídeos / Clases","profile":"Mi Perfil","logout":"Cerrar Sesión","expand":"Expandir","collapse":"Colapsar","logoAlt":"Logo de la empresa","logoText":"Tu Logo"},"dashboard":{"title":"Panel del LMS","recentResults":"Resultados Recientes","noAttempts":"Aún no has completado ningún cuestionario.","stats":{"totalAttempts":"Intentos Totales","passed":"Aprobados","failed":"Suspendidos","averageScore":"Puntuación Media"},"errors":{"loadAttempts":"Error al cargar los resultados de los cuestionarios."}},"courses":{"title":"Cursos","description":"Crea y gestiona cursos con lecciones, precios e inscripciones","addNew":"Añadir Nuevo Curso","createCourse":"Crear Curso","editCourse":"Editar Curso","viewCourse":"Ver Curso","duplicateCourse":"Duplicar Curso","deleteCourse":"Eliminar Curso","noCourses":"No se encontraron cursos","noCoursesDescription":"Aún no has creado ningún curso.","searchPlaceholder":"Buscar cursos...","loadingCourses":"Cargando cursos...","loadingMoreCourses":"Cargando más cursos...","courseContent":"Contenido del Curso","fields":{"title":"Título del Curso","description":"Descripción","excerpt":"Descripción Corta","image":"Imagen Destacada","category":"Categoría","difficulty":"Dificultad","price":"Precio","salePrice":"Precio de Oferta","productType":"Tipo de Producto","duration":"Duración","lessons":"Lecciones","students":"Estudiantes","enrolled":"Inscritos","completion":"Completado","status":"Estado","startDate":"Fecha de Inicio","endDate":"Fecha de Fin","position":"Posición de Visualización","maxStudents":"Estudiantes Máximos","difficultyLevel":"Nivel de Dificultad"},"category":{"label":"Categoría","all":"Todas las Categorías","programming":"Programación","design":"Diseño","business":"Negocios","marketing":"Marketing","photography":"Fotografía"},"difficulty":{"label":"Dificultad","all":"Todos los Niveles","beginner":"Principiante","intermediate":"Intermedio","advanced":"Avanzado","expert":"Experto"},"difficultyLevels":{"easy":"Fácil","medium":"Medio","hard":"Difícil"},"status":{"label":"Estado","all":"Todos los Estados","publish":"Publicado","draft":"Borrador","private":"Privado"},"priceFilter":{"label":"Precio","all":"Todos los Precios","free":"Gratis","paid":"De Pago","premium":"Premium (€100+)"},"stats":{"totalCourses":"Cursos Totales","totalStudents":"Estudiantes","totalLessons":"Lecciones","averagePrice":"Precio Promedio","revenue":"Ingresos","totalRevenue":"Ingresos Totales","featuredCourses":"Cursos Destacados","completionRate":"Tasa de Finalización","averageDuration":"Duración Promedio"},"units":{"hours":"horas","hour":"hora","weeks":"semanas","week":"semana","lessons":"lecciones","lesson":"lección","students":"estudiantes","student":"estudiante","free":"Gratis","duration":"duración"},"tabs":{"basic":"Información Básica","taxonomies":"Categorías y Etiquetas","pricing":"Precios","schedule":"Calendario","lessons":"Lecciones","settings":"Configuración"},"taxonomies":{"categories":"Categorías","topics":"Temas","difficulty":"Dificultad","providers":"Proveedores","courseTypes":"Tipos de Curso"},"placeholders":{"title":"Introduce el título del curso...","excerpt":"Descripción breve para tarjetas y vistas previas...","content":"Descripción completa del curso, qué aprenderán los estudiantes...","newCategory":"Nombre de la nueva categoría..."},"actions":{"uploadImage":"Subir Imagen","addCategory":"Añadir Nueva","saveAndCreate":"Guardar y Crear Otro"},"hints":{"optional":"Opcional","salePrice":"Si se establece, se mostrará como el precio con descuento","startDate":"Cuándo el curso estará disponible para los estudiantes","endDate":"Cuándo el curso cierra o expira (opcional)","duration":"Tiempo estimado para completar el curso","createLessons":"Crea lecciones primero para asignarlas a este curso","position":"Los números más bajos aparecen primero en la lista de cursos","maxStudents":"0 = inscripción ilimitada","difficultyLevel":"Este es un campo meta, diferente de la taxonomía","image":"Tamaño recomendado: 1200x675px. Máx 5MB."},"labels":{"pricePreview":"Vista Previa del Precio","schedulePreview":"Vista Previa del Calendario","selected":"seleccionadas"},"info":{"woocommerce":"Integración con WooCommerce","woocommerceDesc":"Se creará/actualizará automáticamente un producto de WooCommerce al guardar este curso."},"validation":{"titleRequired":"El título es obligatorio","contentRequired":"La descripción es obligatoria","priceInvalid":"El precio debe ser mayor que 0","endDateInvalid":"La fecha de fin debe ser posterior a la fecha de inicio","positionInvalid":"La posición debe ser un número","fixErrors":"Por favor corrige los errores antes de guardar"},"messages":{"createSuccess":"Curso creado exitosamente","updateSuccess":"Curso actualizado exitosamente","deleteSuccess":"Curso eliminado exitosamente","duplicateSuccess":"Curso duplicado exitosamente","createError":"Error al crear el curso","updateError":"Error al actualizar el curso","deleteError":"Error al eliminar el curso","duplicateError":"Error al duplicar el curso","deleteConfirmTitle":"Eliminar Curso","deleteConfirmMessage":"¿Estás seguro de que quieres eliminar \\"{{title}}\\"? Esta acción no se puede deshacer y también eliminará todas las lecciones asociadas.","found":"{{count}} curso encontrado","found_plural":"{{count}} cursos encontrados","noCategories":"No hay categorías disponibles","noLessons":"Aún no hay lecciones disponibles"}},"lessons":{"title":"Lecciones","description":"Crea y gestiona lecciones interactivas con múltiples tipos de contenido","addNew":"Añadir Nueva Lección","createLesson":"Crear Lección","editLesson":"Editar Lección","viewLesson":"Ver Lección","duplicateLesson":"Duplicar Lección","deleteLesson":"Eliminar Lección","noLessons":"No se encontraron lecciones","noLessonsDescription":"Aún no has creado ninguna lección.","searchPlaceholder":"Buscar lecciones por título...","loadingLessons":"Cargando lecciones...","loadingMoreLessons":"Cargando más lecciones...","fields":{"title":"Título de la Lección","description":"Descripción","content":"Contenido General","course":"Curso","lessonType":"Tipo de Lección","lessonOrder":"Orden de la Lección","status":"Estado","steps":"Pasos de Contenido","prerequisiteLessons":"Lecciones Prerequisito","completionCriteria":"Criterio de Finalización","isRequired":"Es Obligatoria","duration":"Duración","resources":"Recursos"},"lessonType":{"label":"Tipo de Lección","all":"Todos los Tipos","video":"Video","text":"Contenido de Texto","mixed":"Contenido Mixto","quiz":"Cuestionario","interactive":"Interactivo"},"status":{"label":"Estado","all":"Todos los Estados","publish":"Publicado","draft":"Borrador","private":"Privado"},"course":{"label":"Curso","all":"Todos los Cursos","select":"Seleccionar un curso...","required":"El curso es obligatorio"},"stats":{"totalLessons":"Total de Lecciones","videoLessons":"Lecciones de Video","textLessons":"Lecciones de Texto","mixedLessons":"Lecciones Mixtas","totalSteps":"Total de Pasos","averageSteps":"Promedio Pasos/Lección","completedLessons":"Lecciones Completadas","requiredLessons":"Lecciones Obligatorias"},"steps":{"title":"Pasos de Contenido","description":"Añade y organiza los pasos de contenido para esta lección","addStep":"Añadir Paso","addFirstStep":"Añadir Primer Paso","noSteps":"Esta lección aún no tiene pasos de contenido.","noStepsDescription":"Los pasos te permiten organizar el contenido en secciones manejables.","stepTitle":"Título del Paso","stepType":"Tipo de Paso","required":"Se requiere al menos un paso","allStepsMustHaveTitle":"Todos los pasos deben tener un título"},"stepTypes":{"video":{"label":"Video","description":"Contenido de video","videoUrl":"URL del Video","duration":"Duración (minutos)","autoplay":"Reproducción Automática","subtitlesUrl":"URL de Subtítulos"},"text":{"label":"Contenido de Texto","description":"Contenido de texto enriquecido","content":"Contenido","estimatedTime":"Tiempo Estimado (minutos)"},"pdf":{"label":"Documento PDF","description":"Archivo PDF descargable","fileUrl":"URL del Archivo","fileName":"Nombre del Archivo","fileSize":"Tamaño del Archivo","downloadable":"Permitir Descarga"},"quiz":{"label":"Cuestionario","description":"Evaluación de conocimientos","quizId":"Cuestionario","passingScore":"Puntuación Mínima","maxAttempts":"Intentos Máximos","required":"Obligatorio para Completar"},"image":{"label":"Imagen","description":"Contenido visual","imageUrl":"URL de la Imagen","altText":"Texto Alternativo","caption":"Pie de Foto","lightbox":"Habilitar Lightbox"},"audio":{"label":"Audio","description":"Contenido de audio","audioUrl":"URL del Audio","duration":"Duración (minutos)","transcriptUrl":"URL de Transcripción"}},"tabs":{"basic":"Información Básica","steps":"Pasos de Contenido","settings":"Configuración Avanzada"},"completionCriteria":{"label":"Criterio de Finalización","viewAll":"Ver Todo el Contenido","passQuiz":"Aprobar Cuestionario","completeSteps":"Completar Todos los Pasos"},"placeholders":{"title":"Introduce el título de la lección...","description":"Breve descripción de la lección...","content":"Contenido general de la lección (opcional)...","stepTitle":"Introduce el título del paso...","videoUrl":"https://... (URL del video)","imageUrl":"https://... (URL de la imagen)","audioUrl":"https://... (URL del audio)","pdfUrl":"https://... (URL del PDF)"},"hints":{"course":"La lección debe estar asociada a un curso","lessonType":"El tipo determina cómo se presenta la lección","description":"Esta descripción aparece en tarjetas y vistas previas","content":"Este contenido aparece antes de los pasos de la lección. HTML es soportado.","lessonOrder":"Orden de esta lección dentro del curso","steps":"Organiza el contenido en pasos manejables","completionCriteria":"¿Qué debe hacer el estudiante para completar esta lección?","isRequired":"Si está marcada, los estudiantes deben completar esta lección","prerequisiteLessons":"Lecciones que deben completarse antes de esta"},"actions":{"addStep":"Añadir Paso","removeStep":"Eliminar Paso","moveUp":"Mover Arriba","moveDown":"Mover Abajo","expandStep":"Expandir Paso","collapseStep":"Contraer Paso"},"validation":{"titleRequired":"El título es obligatorio","courseRequired":"Debes seleccionar un curso","stepsRequired":"Se requiere al menos un paso","stepTitleRequired":"El título del paso es obligatorio","videoUrlRequired":"La URL del video es obligatoria","imageUrlRequired":"La URL de la imagen es obligatoria","audioUrlRequired":"La URL del audio es obligatoria","pdfUrlRequired":"La URL del PDF es obligatoria","quizRequired":"Debes seleccionar un cuestionario","fixErrors":"Por favor corrige los errores antes de guardar"},"messages":{"createSuccess":"Lección creada exitosamente","updateSuccess":"Lección actualizada exitosamente","deleteSuccess":"Lección eliminada exitosamente","duplicateSuccess":"Lección duplicada exitosamente","createError":"Error al crear la lección","updateError":"Error al actualizar la lección","deleteError":"Error al eliminar la lección","duplicateError":"Error al duplicar la lección","deleteConfirmTitle":"Eliminar Lección","deleteConfirmMessage":"¿Estás seguro de que quieres eliminar \\"{{title}}\\"? Esta acción no se puede deshacer.","found":"{{count}} lección encontrada","found_plural":"{{count}} lecciones encontradas","noCourses":"No hay cursos disponibles","noQuizzes":"No hay cuestionarios disponibles"},"filters":{"course":"Filtrar por Curso","type":"Filtrar por Tipo","status":"Filtrar por Estado","clearFilters":"Limpiar Filtros"}},"quizzes":{"title":"Cuestionarios","description":"Crea y gestiona cuestionarios para evaluar el aprendizaje","addNew":"Añadir Nuevo Cuestionario","createQuiz":"Crear Cuestionario","editQuiz":"Editar Cuestionario","viewQuiz":"Ver Cuestionario","deleteQuiz":"Eliminar Cuestionario","duplicateQuiz":"Duplicar Cuestionario","untitled":"Cuestionario Sin Título","noQuizzes":"No se encontraron cuestionarios","noQuizzesDescription":"Aún no has creado ningún cuestionario.","searchPlaceholder":"Buscar cuestionarios...","noDetailedResults":"No hay resultados detallados para mostrar.","loadingQuizzes":"Cargando cuestionarios...","loadingResults":"Cargando resultados del cuestionario...","quizResults":"Resultados del Cuestionario","createNew":"Crear Nuevo Cuestionario","editTitle":"Editando: {{title}}","form":{"title":"Título del Cuestionario","course":"Curso","category":"Categoría","difficulty":"Dificultad","instructions":"Instrucciones","passingScore":"Nota para Aprobar (%)","timeLimit":"Límite de Tiempo (mins)","maxAttempts":"Intentos Máximos","randomize":"Aleatorizar Preguntas","showResults":"Mostrar Resultados al Finalizar","negativeScoring":"Habilitar Puntuación Negativa","addQuestions":"Añadir Preguntas del Banco","searchPlaceholder":"Buscar preguntas por título...","selectedQuestions":"Preguntas Seleccionadas","noQuestions":"Aún no se han añadido preguntas."},"fields":{"title":"Título del Cuestionario","instructions":"Instrucciones","course":"Curso","category":"Categoría","difficulty":"Dificultad","quizType":"Tipo de Cuestionario","passingScore":"Puntuación Mínima","timeLimit":"Límite de Tiempo","maxAttempts":"Intentos Máximos","questions":"Preguntas","totalPoints":"Puntos Totales","randomizeQuestions":"Aleatorizar Preguntas","showResults":"Mostrar Resultados","enableNegativeScoring":"Habilitar Puntuación Negativa"},"stats":{"totalQuizzes":"Total de Cuestionarios","totalQuestions":"Total de Preguntas","totalPoints":"Total de Puntos","averageQuestions":"Promedio de Preguntas"},"messages":{"titleRequired":"El título del cuestionario es obligatorio","courseRequired":"Por favor selecciona un curso","questionsRequired":"Por favor añade al menos una pregunta","noQuestionsAdded":"Aún no se han añadido preguntas.","createSuccess":"Cuestionario creado exitosamente","updateSuccess":"Cuestionario actualizado exitosamente","deleteSuccess":"Cuestionario eliminado exitosamente","duplicateSuccess":"Cuestionario duplicado exitosamente","deleteConfirmTitle":"Eliminar Cuestionario","deleteConfirmMessage":"¿Estás seguro de que quieres eliminar \\"{{title}}\\"? Esta acción no se puede deshacer.","found":"{{count}} cuestionario encontrado","found_plural":"{{count}} cuestionarios encontrados"},"actions":{"createNewQuiz":"Crear Nuevo Cuestionario","saveAndAddNew":"Guardar y Añadir Nuevo","saveChanges":"Guardar Cambios","addQuestion":"Añadir Pregunta","searchQuestions":"Buscar Preguntas","createFirstQuiz":"Crear Primer Cuestionario"},"card":{"questions_one":"{{count}} Pregunta","questions_other":"{{count}} Preguntas","points_one":"{{count}} Punto","points_other":"{{count}} Puntos","attempts_one":"{{count}} Intento","attempts_other":"{{count}} Intentos","avgScore":"{{count}}% Nota Media","noCourse":"Sin curso asociado","viewQuestions":"Ver Preguntas ({{count}})"},"labels":{"allCourses":"Todos los Cursos","selectCourse":"Seleccionar curso...","minutes":"minutos","unlimited":"Ilimitado","attempts":"intentos"}},"questions":{"title":"Preguntas","description":"Crea y gestiona preguntas para cuestionarios","addNew":"Añadir Nueva Pregunta","createQuestion":"Crear Pregunta","editQuestion":"Editar Pregunta","viewQuestion":"Ver Pregunta","deleteQuestion":"Eliminar Pregunta","duplicateQuestion":"Duplicar Pregunta","untitled":"Pregunta Sin Título","noQuestions":"No se encontraron preguntas","noQuestionsDescription":"Aún no has creado ninguna pregunta.","searchPlaceholder":"Buscar preguntas...","loadingQuestions":"Cargando preguntas...","fields":{"title":"Título de la Pregunta","type":"Tipo de Pregunta","difficulty":"Dificultad","category":"Categoría","points":"Puntos","explanation":"Explicación","options":"Opciones","correctAnswer":"Respuesta Correcta","provider":"Proveedor"},"types":{"multipleChoice":"Opción Múltiple","trueFalse":"Verdadero/Falso","shortAnswer":"Respuesta Corta","essay":"Ensayo","matching":"Emparejamiento","fillBlank":"Completar Espacios"},"stats":{"totalQuestions":"Total de Preguntas","byDifficulty":"Por Dificultad","byType":"Por Tipo","averagePoints":"Promedio de Puntos"},"messages":{"titleRequired":"El título de la pregunta es obligatorio","typeRequired":"El tipo de pregunta es obligatorio","optionsRequired":"Se requieren al menos dos opciones","correctAnswerRequired":"Debes marcar al menos una respuesta correcta","createSuccess":"Pregunta creada exitosamente","updateSuccess":"Pregunta actualizada exitosamente","deleteSuccess":"Pregunta eliminada exitosamente","duplicateSuccess":"Pregunta duplicada exitosamente","deleteConfirmTitle":"Eliminar Pregunta","deleteConfirmMessage":"¿Estás seguro de que quieres eliminar \\"{{title}}\\"? Esta acción no se puede deshacer.","found":"{{count}} pregunta encontrada","found_plural":"{{count}} preguntas encontradas"},"actions":{"addOption":"Añadir Opción","removeOption":"Eliminar Opción","createFirstQuestion":"Crear Primera Pregunta"},"placeholders":{"option":"Opción {{number}}","searchQuestions":"Buscar preguntas por título..."},"card":{"points":"{{count}} Puntos","noLesson":"Sin lección asociada","viewQuizzes":"Ver Cuestionarios Asociados ({{count}})","difficulty":"Dificultad","provider":"Proveedor","difficulties":{"easy":"Fácil","medium":"Media","hard":"Difícil"},"types":{"multiple_choice":"Opción Múltiple","true_false":"Verdadero / Falso","fill_in_the_blanks":"Rellenar Huecos","short_answer":"Respuesta Corta","essay":"Ensayo"}},"providers":{"human":"Humano","ai":"IA","imported":"Importado"}},"students":{"title":"Estudiantes","description":"Gestiona estudiantes e inscripciones","noStudents":"No se encontraron estudiantes","noStudentsDescription":"No hay estudiantes que coincidan con los filtros actuales.","searchPlaceholder":"Buscar estudiantes...","stats":{"totalUsers":"Total de Usuarios","enrolledUsers":"Usuarios Inscritos","activeUsers":"Usuarios Activos","averageProgress":"Progreso Promedio","recentRegistrations":"Registros Recientes"},"filters":{"allRoles":"Todos los Roles","allCourses":"Todos los Cursos","allStatuses":"Todos los Estados","enrolled":"Inscritos","notEnrolled":"No Inscritos"},"roles":{"administrator":"Administrador","editor":"Editor","author":"Autor","contributor":"Colaborador","subscriber":"Suscriptor"},"actions":{"enroll":"Inscribir","unenroll":"Desinscribir","updateRole":"Actualizar Rol","bulkEnroll":"Inscripción Masiva","bulkUnenroll":"Desinscripción Masiva","viewProfile":"Ver Perfil"},"messages":{"courseManagementMode":"Modo de Gestión de Curso","viewingInContext":"Estás viendo usuarios en el contexto de: {{courseName}}","noUsersFound":"No se encontraron usuarios","noUsersMatch":"Ningún usuario coincide con tus filtros actuales. Intenta ajustar tu búsqueda o criterios de filtro.","clearSearch":"Limpiar búsqueda"}},"users":{"title":"Usuarios","description":"Gestiona usuarios del sistema","stats":{"totalUsers":"Total de Usuarios","enrolledUsers":"Usuarios Inscritos","activeUsers":"Usuarios Activos","averageProgress":"Progreso Promedio"}},"modals":{"delete":{"confirmTitle":"Confirmar Eliminación","confirmMessage":"¿Estás seguro de que quieres eliminar este elemento? Esta acción no se puede deshacer.","confirmButton":"Eliminar","cancelButton":"Cancelar","typeToConfirm":"Escribe <strong>DELETE</strong> para confirmar:","typeHere":"Escribe DELETE aquí","itemToDelete":"Elemento a eliminar:","processing":"Procesando..."},"close":"Cerrar","save":"Guardar","cancel":"Cancelar"},"notifications":{"createSuccess":"{{resource}} creado exitosamente","updateSuccess":"{{resource}} actualizado exitosamente","deleteSuccess":"{{resource}} eliminado exitosamente","duplicateSuccess":"{{resource}} duplicado exitosamente","error":"Ocurrió un error","savingChanges":"Guardando cambios...","operationFailed":"La operación falló"},"viewMode":{"cards":"Tarjetas","list":"Lista","grid":"Cuadrícula","switchTo":"Cambiar a vista {{mode}}"},"emptyStates":{"noItemsFound":"No se encontraron elementos","noItemsDescription":"No hay elementos que coincidan con tus criterios de búsqueda.","createFirst":"Crear Primero","getStarted":"Empezar"},"filters":{"filterBy":"Filtrar por","clearAll":"Limpiar Todo","apply":"Aplicar","reset":"Reiniciar","course":"Curso","category":"Categoría","difficulty":"Dificultad","status":"Estado","type":"Tipo"},"pagination":{"showing":"Mostrando","of":"de","results":"resultados","page":"Página","previous":"Anterior","next":"Siguiente","first":"Primera","last":"Última"},"validation":{"required":"Este campo es obligatorio","invalidEmail":"Email inválido","invalidUrl":"URL inválida","minLength":"Debe tener al menos {{length}} caracteres","maxLength":"No debe exceder {{length}} caracteres","mustBeNumber":"Debe ser un número","mustBePositive":"Debe ser un número positivo"}}'),xe=window.qe_data?.locale?.substring(0,2)||"en",be={en:{translation:ge},es:{translation:ye}};me.use(v).init({resources:be,lng:xe,fallbackLng:"en",interpolation:{escapeValue:!1}});const ve=me;var _e="popstate";function je(e={}){return function(e,t,r,s={}){let{window:n=document.defaultView,v5Compat:a=!1}=s,o=n.history,i="POP",l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){i="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:i,location:h.location,delta:t})}function p(e){return function(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),we(r,"No window.location.(origin|href) available to create URL");let s="string"==typeof e?e:Ee(e);return s=s.replace(/ $/,"%20"),!t&&s.startsWith("//")&&(s=r+s),new URL(s,r)}(e)}null==c&&(c=0,o.replaceState({...o.state,idx:c},""));let h={get action(){return i},get location(){return e(n,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(_e,d),l=e,()=>{n.removeEventListener(_e,d),l=null}},createHref:e=>t(n,e),createURL:p,encodeLocation(e){let t=p(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){i="PUSH";let s=Ce(h.location,e,t);r&&r(s,e),c=u()+1;let d=ke(s,c),p=h.createHref(s);try{o.pushState(d,"",p)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;n.location.assign(p)}a&&l&&l({action:i,location:h.location,delta:1})},replace:function(e,t){i="REPLACE";let s=Ce(h.location,e,t);r&&r(s,e),c=u();let n=ke(s,c),d=h.createHref(s);o.replaceState(n,"",d),a&&l&&l({action:i,location:h.location,delta:0})},go:e=>o.go(e)};return h}(function(e,t){let{pathname:r="/",search:s="",hash:n=""}=Se(e.location.hash.substring(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),Ce("",{pathname:r,search:s,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),s="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");s=-1===r?t:t.slice(0,r)}return s+"#"+("string"==typeof t?t:Ee(t))},function(e,t){Ne("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)},e)}function we(e,t){if(!1===e||null==e)throw new Error(t)}function Ne(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function ke(e,t){return{usr:e.state,key:e.key,idx:t}}function Ce(e,t,r=null,s){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?Se(t):t,state:r,key:t&&t.key||s||Math.random().toString(36).substring(2,10)}}function Ee({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function Se(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function qe(e,t,r="/"){return function(e,t,r,s){let n=Be(("string"==typeof t?Se(t):t).pathname||"/",r);if(null==n)return null;let a=Oe(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let o=null;for(let e=0;null==o&&e<a.length;++e){let t=Ue(n);o=$e(a[e],t,s)}return o}(e,t,r,!1)}function Oe(e,t=[],r=[],s="",n=!1){let a=(e,a,o=n,i)=>{let l={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:a,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(s)&&o)return;we(l.relativePath.startsWith(s),`Absolute route path "${l.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(s.length)}let c=Ke([s,l.relativePath]),u=r.concat(l);e.children&&e.children.length>0&&(we(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),Oe(e.children,t,u,c,o)),(null!=e.path||e.index)&&t.push({path:c,score:De(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of Te(e.path))a(e,t,!0,r);else a(e,t)}),t}function Te(e){let t=e.split("/");if(0===t.length)return[];let[r,...s]=t,n=r.endsWith("?"),a=r.replace(/\?$/,"");if(0===s.length)return n?[a,""]:[a];let o=Te(s.join("/")),i=[];return i.push(...o.map(e=>""===e?a:[a,e].join("/"))),n&&i.push(...o),i.map(t=>e.startsWith("/")&&""===t?"/":t)}new WeakMap;var Pe=/^:[\w-]+$/,Ae=3,Le=2,ze=1,Me=10,Re=-2,Ie=e=>"*"===e;function De(e,t){let r=e.split("/"),s=r.length;return r.some(Ie)&&(s+=Re),t&&(s+=Le),r.filter(e=>!Ie(e)).reduce((e,t)=>e+(Pe.test(t)?Ae:""===t?ze:Me),s)}function $e(e,t,r=!1){let{routesMeta:s}=e,n={},a="/",o=[];for(let e=0;e<s.length;++e){let i=s[e],l=e===s.length-1,c="/"===a?t:t.slice(a.length)||"/",u=Fe({path:i.relativePath,caseSensitive:i.caseSensitive,end:l},c),d=i.route;if(!u&&l&&r&&!s[s.length-1].route.index&&(u=Fe({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},c)),!u)return null;Object.assign(n,u.params),o.push({params:n,pathname:Ke([a,u.pathname]),pathnameBase:We(Ke([a,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(a=Ke([a,u.pathnameBase]))}return o}function Fe(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,s]=function(e,t=!1,r=!0){Ne("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(s.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(s.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}(e.path,e.caseSensitive,e.end),n=t.match(r);if(!n)return null;let a=n[0],o=a.replace(/(.)\/+$/,"$1"),i=n.slice(1);return{params:s.reduce((e,{paramName:t,isOptional:r},s)=>{if("*"===t){let e=i[s]||"";o=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const n=i[s];return e[t]=r&&!n?void 0:(n||"").replace(/%2F/g,"/"),e},{}),pathname:a,pathnameBase:o,pattern:e}}function Ue(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return Ne(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Be(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,s=e.charAt(r);return s&&"/"!==s?null:e.slice(r)||"/"}function Qe(e,t,r,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function He(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function Ve(e,t,r,s=!1){let n;"string"==typeof e?n=Se(e):(n={...e},we(!n.pathname||!n.pathname.includes("?"),Qe("?","pathname","search",n)),we(!n.pathname||!n.pathname.includes("#"),Qe("#","pathname","hash",n)),we(!n.search||!n.search.includes("#"),Qe("#","search","hash",n)));let a,o=""===e||""===n.pathname,i=o?"/":n.pathname;if(null==i)a=r;else{let e=t.length-1;if(!s&&i.startsWith("..")){let t=i.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t="/"){let{pathname:r,search:s="",hash:n=""}="string"==typeof e?Se(e):e,a=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:a,search:Ge(s),hash:Ye(n)}}(n,a),c=i&&"/"!==i&&i.endsWith("/"),u=(o||"."===i)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var Ke=e=>e.join("/").replace(/\/\/+/g,"/"),We=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ge=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Ye=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Xe(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}var Je=["POST","PUT","PATCH","DELETE"],Ze=(new Set(Je),["GET",...Je]);new Set(Ze),Symbol("ResetLoaderData");var et=o.createContext(null);et.displayName="DataRouter";var tt=o.createContext(null);tt.displayName="DataRouterState";o.createContext(!1);var rt=o.createContext({isTransitioning:!1});rt.displayName="ViewTransition",o.createContext(new Map).displayName="Fetchers",o.createContext(null).displayName="Await";var st=o.createContext(null);st.displayName="Navigation";var nt=o.createContext(null);nt.displayName="Location";var at=o.createContext({outlet:null,matches:[],isDataRoute:!1});at.displayName="Route";var ot=o.createContext(null);function it(){return null!=o.useContext(nt)}function lt(){return we(it(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(nt).location}ot.displayName="RouteError";var ct="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ut(e){o.useContext(st).static||o.useLayoutEffect(e)}function dt(){let{isDataRoute:e}=o.useContext(at);return e?function(){let{router:e}=function(e){let t=o.useContext(et);return we(t,vt(e)),t}("useNavigate"),t=_t("useNavigate"),r=o.useRef(!1);return ut(()=>{r.current=!0}),o.useCallback(async(s,n={})=>{Ne(r.current,ct),r.current&&("number"==typeof s?e.navigate(s):await e.navigate(s,{fromRouteId:t,...n}))},[e,t])}():function(){we(it(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(et),{basename:t,navigator:r}=o.useContext(st),{matches:s}=o.useContext(at),{pathname:n}=lt(),a=JSON.stringify(He(s)),i=o.useRef(!1);return ut(()=>{i.current=!0}),o.useCallback((s,o={})=>{if(Ne(i.current,ct),!i.current)return;if("number"==typeof s)return void r.go(s);let l=Ve(s,JSON.parse(a),n,"path"===o.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Ke([t,l.pathname])),(o.replace?r.replace:r.push)(l,o.state,o)},[t,r,a,n,e])}()}var pt=o.createContext(null);function ht(){let{matches:e}=o.useContext(at),t=e[e.length-1];return t?t.params:{}}function ft(e,{relative:t}={}){let{matches:r}=o.useContext(at),{pathname:s}=lt(),n=JSON.stringify(He(r));return o.useMemo(()=>Ve(e,JSON.parse(n),s,"path"===t),[e,n,s,t])}function mt(e,t,r,s,n){we(it(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=o.useContext(st),{matches:i}=o.useContext(at),l=i[i.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",p=l&&l.route;{let e=p&&p.path||"";wt(u,!p||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let h,f=lt();if(t){let e="string"==typeof t?Se(t):t;we("/"===d||e.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${e.pathname}" was given in the \`location\` prop.`),h=e}else h=f;let m=h.pathname||"/",g=m;if("/"!==d){let e=d.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=qe(e,{pathname:g});Ne(p||null!=y,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Ne(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=function(e,t=[],r=null,s=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let n=e,a=r?.errors;if(null!=a){let e=n.findIndex(e=>e.route.id&&void 0!==a?.[e.route.id]);we(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),n=n.slice(0,Math.min(n.length,e+1))}let i=!1,l=-1;if(r)for(let e=0;e<n.length;e++){let t=n[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(l=e),t.route.id){let{loaderData:e,errors:s}=r,a=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!s||void 0===s[t.route.id]);if(t.route.lazy||a){i=!0,n=l>=0?n.slice(0,l+1):[n[0]];break}}}return n.reduceRight((e,c,u)=>{let d,p=!1,h=null,f=null;r&&(d=a&&c.route.id?a[c.route.id]:void 0,h=c.route.errorElement||yt,i&&(l<0&&0===u?(wt("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,f=null):l===u&&(p=!0,f=c.route.hydrateFallbackElement||null)));let m=t.concat(n.slice(0,u+1)),g=()=>{let t;return t=d?h:p?f:c.route.Component?o.createElement(c.route.Component,null):c.route.element?c.route.element:e,o.createElement(bt,{match:c,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:t})};return r&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?o.createElement(xt,{location:r.location,revalidation:r.revalidation,component:h,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:s}):g()},null)}(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Ke([d,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:Ke([d,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),i,r,s,n);return t&&x?o.createElement(nt.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},x):x}function gt(){let e=function(){let e=o.useContext(ot),t=function(e){let t=o.useContext(tt);return we(t,vt(e)),t}("useRouteError"),r=_t("useRouteError");return void 0!==e?e:t.errors?.[r]}(),t=Xe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},a={padding:"2px 4px",backgroundColor:s},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=o.createElement(o.Fragment,null,o.createElement("p",null,"💿 Hey developer 👋"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:a},"ErrorBoundary")," or"," ",o.createElement("code",{style:a},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),r?o.createElement("pre",{style:n},r):null,i)}var yt=o.createElement(gt,null),xt=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?o.createElement(at.Provider,{value:this.props.routeContext},o.createElement(ot.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function bt({routeContext:e,match:t,children:r}){let s=o.useContext(et);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),o.createElement(at.Provider,{value:e},r)}function vt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _t(e){let t=function(e){let t=o.useContext(at);return we(t,vt(e)),t}(e),r=t.matches[t.matches.length-1];return we(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var jt={};function wt(e,t,r){t||jt[e]||(jt[e]=!0,Ne(!1,r))}function Nt(e){return function(e){let t=o.useContext(at).outlet;return t?o.createElement(pt.Provider,{value:e},t):t}(e.context)}function kt(e){we(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ct({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:n,static:a=!1}){we(!it(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),l=o.useMemo(()=>({basename:i,navigator:n,static:a,future:{}}),[i,n,a]);"string"==typeof r&&(r=Se(r));let{pathname:c="/",search:u="",hash:d="",state:p=null,key:h="default"}=r,f=o.useMemo(()=>{let e=Be(c,i);return null==e?null:{location:{pathname:e,search:u,hash:d,state:p,key:h},navigationType:s}},[i,c,u,d,p,h,s]);return Ne(null!=f,`<Router basename="${i}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),null==f?null:o.createElement(st.Provider,{value:l},o.createElement(nt.Provider,{children:t,value:f}))}function Et({children:e,location:t}){return mt(St(e),t)}function St(e,t=[]){let r=[];return o.Children.forEach(e,(e,s)=>{if(!o.isValidElement(e))return;let n=[...t,s];if(e.type===o.Fragment)return void r.push.apply(r,St(e.props.children,n));we(e.type===kt,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),we(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=St(e.props.children,n)),r.push(a)}),r}o.memo(function({routes:e,future:t,state:r,unstable_onError:s}){return mt(e,void 0,r,s,t)}),o.Component;var qt="get",Ot="application/x-www-form-urlencoded";function Tt(e){return null!=e&&"string"==typeof e.tagName}var Pt=null,At=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lt(e){return null==e||At.has(e)?e:(Ne(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ot}"`),null)}function zt(e,t){if(!1===e||null==e)throw new Error(t)}function Mt(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function Rt(e,t,r,s,n,a){let o=(e,t)=>!r[t]||e.route.id!==r[t].route.id,i=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===a?t.filter((e,t)=>o(e,t)||i(e,t)):"data"===a?t.filter((t,a)=>{let l=s.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(o(t,a)||i(t,a))return!0;if(t.route.shouldRevalidate){let s=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof s)return s}return!0}):[]}function It(e,t,{includeHydrateFallback:r}={}){return s=e.map(e=>{let s=t.routes[e.route.id];if(!s)return[];let n=[s.module];return s.clientActionModule&&(n=n.concat(s.clientActionModule)),s.clientLoaderModule&&(n=n.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(n=n.concat(s.hydrateFallbackModule)),s.imports&&(n=n.concat(s.imports)),n}).flat(1),[...new Set(s)];var s}function Dt(){let e=o.useContext(et);return zt(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $t(){let e=o.useContext(tt);return zt(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0"),"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis,Symbol("SingleFetchRedirect");var Ft=o.createContext(void 0);function Ut(){let e=o.useContext(Ft);return zt(e,"You must render this element inside a <HydratedRouter> element"),e}function Bt(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Qt({page:e,...t}){let{router:r}=Dt(),s=o.useMemo(()=>qe(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?o.createElement(Vt,{page:e,matches:s,...t}):null}function Ht(e){let{manifest:t,routeModules:r}=Ut(),[s,n]=o.useState([]);return o.useEffect(()=>{let s=!1;return async function(e,t,r){return function(e,t){let r=new Set,s=new Set(t);return e.reduce((e,n)=>{if(t&&(null==(a=n)||"string"!=typeof a.page)&&"script"===n.as&&n.href&&s.has(n.href))return e;var a;let o=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let s of r)t[s]=e[s];return t}(n));return r.has(o)||(r.add(o),e.push({key:o,link:n})),e},[])}((await Promise.all(e.map(async e=>{let s=t.routes[e.route.id];if(s){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(s,r);return e.links?e.links():[]}return[]}))).flat(1).filter(Mt).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,r).then(e=>{s||n(e)}),()=>{s=!0}},[e,t,r]),s}function Vt({page:e,matches:t,...r}){let s=lt(),{manifest:n,routeModules:a}=Ut(),{basename:i}=Dt(),{loaderData:l,matches:c}=$t(),u=o.useMemo(()=>Rt(e,t,c,n,s,"data"),[e,t,c,n,s]),d=o.useMemo(()=>Rt(e,t,c,n,s,"assets"),[e,t,c,n,s]),p=o.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let r=new Set,o=!1;if(t.forEach(e=>{let t=n.routes[e.route.id];t&&t.hasLoader&&(!u.some(t=>t.route.id===e.route.id)&&e.route.id in l&&a[e.route.id]?.shouldRevalidate||t.hasClientLoader?o=!0:r.add(e.route.id))}),0===r.size)return[];let c=function(e,t,r){let s="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===s.pathname?s.pathname=`_root.${r}`:t&&"/"===Be(s.pathname,t)?s.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${r}`,s}(e,i,"data");return o&&r.size>0&&c.searchParams.set("_routes",t.filter(e=>r.has(e.route.id)).map(e=>e.route.id).join(",")),[c.pathname+c.search]},[i,l,s,n,u,t,e,a]),h=o.useMemo(()=>It(d,n),[d,n]),f=Ht(d);return o.createElement(o.Fragment,null,p.map(e=>o.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r})),h.map(e=>o.createElement("link",{key:e,rel:"modulepreload",href:e,...r})),f.map(({key:e,link:t})=>o.createElement("link",{key:e,nonce:r.nonce,...t})))}Ft.displayName="FrameworkContext";function Kt(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}o.Component;var Wt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{Wt&&(window.__reactRouterVersion="7.8.2")}catch(e){}function Gt({basename:e,children:t,window:r}){let s=o.useRef();null==s.current&&(s.current=je({window:r,v5Compat:!0}));let n=s.current,[a,i]=o.useState({action:n.action,location:n.location}),l=o.useCallback(e=>{o.startTransition(()=>i(e))},[i]);return o.useLayoutEffect(()=>n.listen(l),[n,l]),o.createElement(Ct,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:n})}var Yt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xt=o.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:n,replace:a,state:i,target:l,to:c,preventScrollReset:u,viewTransition:d,...p},h){let f,{basename:m}=o.useContext(st),g="string"==typeof c&&Yt.test(c),y=!1;if("string"==typeof c&&g&&(f=c,Wt))try{let e=new URL(window.location.href),t=c.startsWith("//")?new URL(e.protocol+c):new URL(c),r=Be(t.pathname,m);t.origin===e.origin&&null!=r?c=r+t.search+t.hash:y=!0}catch(e){Ne(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=function(e,{relative:t}={}){we(it(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=o.useContext(st),{hash:n,pathname:a,search:i}=ft(e,{relative:t}),l=a;return"/"!==r&&(l="/"===a?r:Ke([r,a])),s.createHref({pathname:l,search:i,hash:n})}(c,{relative:s}),[b,v,_]=function(e,t){let r=o.useContext(Ft),[s,n]=o.useState(!1),[a,i]=o.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:p}=t,h=o.useRef(null);o.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return h.current&&e.observe(h.current),()=>{e.disconnect()}}},[e]),o.useEffect(()=>{if(s){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[s]);let f=()=>{n(!0)},m=()=>{n(!1),i(!1)};return r?"intent"!==e?[a,h,{}]:[a,h,{onFocus:Bt(l,f),onBlur:Bt(c,m),onMouseEnter:Bt(u,f),onMouseLeave:Bt(d,m),onTouchStart:Bt(p,f)}]:[!1,h,{}]}(r,p),j=function(e,{target:t,replace:r,state:s,preventScrollReset:n,relative:a,viewTransition:i}={}){let l=dt(),c=lt(),u=ft(e,{relative:a});return o.useCallback(o=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(o,t)){o.preventDefault();let t=void 0!==r?r:Ee(c)===Ee(u);l(e,{replace:t,state:s,preventScrollReset:n,relative:a,viewTransition:i})}},[c,l,u,r,s,t,e,n,a,i])}(c,{replace:a,state:i,target:l,preventScrollReset:u,relative:s,viewTransition:d}),w=o.createElement("a",{...p,..._,href:f||x,onClick:y||n?e:function(t){e&&e(t),t.defaultPrevented||j(t)},ref:Kt(h,v),target:l,"data-discover":g||"render"!==t?void 0:"true"});return b&&!g?o.createElement(o.Fragment,null,w,o.createElement(Qt,{page:x})):w});Xt.displayName="Link";var Jt=o.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:n,to:a,viewTransition:i,children:l,...c},u){let d=ft(a,{relative:c.relative}),p=lt(),h=o.useContext(tt),{navigator:f,basename:m}=o.useContext(st),g=null!=h&&function(e,{relative:t}={}){let r=o.useContext(rt);we(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Zt("useViewTransitionState"),n=ft(e,{relative:t});if(!r.isTransitioning)return!1;let a=Be(r.currentLocation.pathname,s)||r.currentLocation.pathname,i=Be(r.nextLocation.pathname,s)||r.nextLocation.pathname;return null!=Fe(n.pathname,i)||null!=Fe(n.pathname,a)}(d)&&!0===i,y=f.encodeLocation?f.encodeLocation(d).pathname:d.pathname,x=p.pathname,b=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;t||(x=x.toLowerCase(),b=b?b.toLowerCase():null,y=y.toLowerCase()),b&&m&&(b=Be(b,m)||b);const v="/"!==y&&y.endsWith("/")?y.length-1:y.length;let _,j=x===y||!s&&x.startsWith(y)&&"/"===x.charAt(v),w=null!=b&&(b===y||!s&&b.startsWith(y)&&"/"===b.charAt(y.length)),N={isActive:j,isPending:w,isTransitioning:g},k=j?e:void 0;_="function"==typeof r?r(N):[r,j?"active":null,w?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let C="function"==typeof n?n(N):n;return o.createElement(Xt,{...c,"aria-current":k,className:_,ref:u,style:C,to:a,viewTransition:i},"function"==typeof l?l(N):l)});function Zt(e){let t=o.useContext(et);return we(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}Jt.displayName="NavLink",o.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:n,state:a,method:i=qt,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:p,...h},f)=>{let m=function(){let{router:e}=Zt("useSubmit"),{basename:t}=o.useContext(st),r=_t("useRouteId");return o.useCallback(async(s,n={})=>{let{action:a,method:o,encType:i,formData:l,body:c}=function(e,t){let r,s,n,a,o;if(Tt(i=e)&&"form"===i.tagName.toLowerCase()){let o=e.getAttribute("action");s=o?Be(o,t):null,r=e.getAttribute("method")||qt,n=Lt(e.getAttribute("enctype"))||Ot,a=new FormData(e)}else if(function(e){return Tt(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Tt(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let o=e.form;if(null==o)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||o.getAttribute("action");if(s=i?Be(i,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||qt,n=Lt(e.getAttribute("formenctype"))||Lt(o.getAttribute("enctype"))||Ot,a=new FormData(o,e),!function(){if(null===Pt)try{new FormData(document.createElement("form"),0),Pt=!1}catch(e){Pt=!0}return Pt}()){let{name:t,type:r,value:s}=e;if("image"===r){let e=t?`${t}.`:"";a.append(`${e}x`,"0"),a.append(`${e}y`,"0")}else t&&a.append(t,s)}}else{if(Tt(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=qt,s=null,n=Ot,o=e}var i;return a&&"text/plain"===n&&(o=a,a=void 0),{action:s,method:r.toLowerCase(),encType:n,formData:a,body:o}}(s,t);if(!1===n.navigate){let t=n.fetcherKey||tr();await e.fetch(t,r,n.action||a,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||o,formEncType:n.encType||i,flushSync:n.flushSync})}else await e.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||o,formEncType:n.encType||i,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,r])}(),g=function(e,{relative:t}={}){let{basename:r}=o.useContext(st),s=o.useContext(at);we(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),a={...ft(e||".",{relative:t})},i=lt();if(null==e){a.search=i.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();a.search=r?`?${r}`:""}}return e&&"."!==e||!n.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(a.pathname="/"===a.pathname?r:Ke([r,a.pathname])),Ee(a)}(l,{relative:u}),y="get"===i.toLowerCase()?"get":"post",x="string"==typeof l&&Yt.test(l);return o.createElement("form",{ref:f,method:y,action:g,onSubmit:s?c:e=>{if(c&&c(e),e.defaultPrevented)return;e.preventDefault();let s=e.nativeEvent.submitter,o=s?.getAttribute("formmethod")||i;m(s||e.currentTarget,{fetcherKey:t,method:o,navigate:r,replace:n,state:a,relative:u,preventScrollReset:d,viewTransition:p})},...h,"data-discover":x||"render"!==e?void 0:"true"})}).displayName="Form";var er=0,tr=()=>`__${String(++er)}__`;function rr(e){var t,r,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var n=e.length;for(t=0;t<n;t++)e[t]&&(r=rr(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}const sr=function(){for(var e,t,r=0,s="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=rr(e))&&(s&&(s+=" "),s+=t);return s};!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var nr=e=>"number"==typeof e&&!isNaN(e),ar=e=>"string"==typeof e,or=e=>"function"==typeof e,ir=e=>ar(e)||or(e)?e:null,lr=(e,t)=>!1===e||nr(e)&&e>0?e:t,cr=e=>(0,o.isValidElement)(e)||ar(e)||or(e)||nr(e);function ur({enter:e,exit:t,appendPosition:r=!1,collapse:s=!0,collapseDuration:n=300}){return function({children:a,position:i,preventExitTransition:l,done:c,nodeRef:u,isIn:d,playToast:p}){let h=r?`${e}--${i}`:e,f=r?`${t}--${i}`:t,m=(0,o.useRef)(0);return(0,o.useLayoutEffect)(()=>{let e=u.current,t=h.split(" "),r=s=>{s.target===u.current&&(p(),e.removeEventListener("animationend",r),e.removeEventListener("animationcancel",r),0===m.current&&"animationcancel"!==s.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",r),e.addEventListener("animationcancel",r)},[]),(0,o.useEffect)(()=>{let e=u.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t,r=300){let{scrollHeight:s,style:n}=e;requestAnimationFrame(()=>{n.minHeight="initial",n.height=s+"px",n.transition=`all ${r}ms`,requestAnimationFrame(()=>{n.height="0",n.padding="0",n.margin="0",setTimeout(t,r)})})}(e,c,n):c()};d||(l?t():(m.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))},[d]),o.createElement(o.Fragment,null,a)}}function dr(e,t){return{content:pr(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function pr(e,t,r=!1){return(0,o.isValidElement)(e)&&!ar(e.type)?(0,o.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):or(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function hr({delay:e,isRunning:t,closeToast:r,type:s="default",hide:n,className:a,controlledProgress:i,progress:l,rtl:c,isIn:u,theme:d}){let p=n||i&&0===l,h={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};i&&(h.transform=`scaleX(${l})`);let f=sr("Toastify__progress-bar",i?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${d}`,`Toastify__progress-bar--${s}`,{"Toastify__progress-bar--rtl":c}),m=or(a)?a({rtl:c,type:s,defaultClassName:f}):sr(f,a),g={[i&&l>=1?"onTransitionEnd":"onAnimationEnd"]:i&&l<1?null:()=>{u&&r()}};return o.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},o.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${d} Toastify__progress-bar--${s}`}),o.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:m,style:h,...g}))}var fr=1,mr=()=>""+fr++;var gr=new Map,yr=[],xr=new Set,br=e=>xr.forEach(t=>t(e)),vr=()=>gr.size>0;function _r(e,t){var r;if(t)return!(null==(r=gr.get(t))||!r.isToastActive(e));let s=!1;return gr.forEach(t=>{t.isToastActive(e)&&(s=!0)}),s}function jr(e,t){cr(e)&&(vr()||yr.push({content:e,options:t}),gr.forEach(r=>{r.buildToast(e,t)}))}function wr(e,t){gr.forEach(r=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===r.id)&&r.toggle(e,null==t?void 0:t.id)})}function Nr(e){let t=e.containerId||1;return{subscribe(r){let s=function(e,t,r){let s=1,n=0,a=[],o=[],i=t,l=new Map,c=new Set,u=()=>{o=Array.from(l.values()),c.forEach(e=>e())},d=e=>{var t,r;null==(r=null==(t=e.props)?void 0:t.onClose)||r.call(t,e.removalReason),e.isActive=!1},p=e=>{if(null==e)l.forEach(d);else{let t=l.get(e);t&&d(t)}u()},h=e=>{var t,s;let{toastId:n,updateId:a}=e.props,o=null==a;e.staleId&&l.delete(e.staleId),e.isActive=!0,l.set(n,e),u(),r(dr(e,o?"added":"updated")),o&&(null==(s=(t=e.props).onOpen)||s.call(t))};return{id:e,props:i,observe:e=>(c.add(e),()=>c.delete(e)),toggle:(e,t)=>{l.forEach(r=>{var s;(null==t||t===r.props.toastId)&&(null==(s=r.toggle)||s.call(r,e))})},removeToast:p,toasts:l,clearQueue:()=>{n-=a.length,a=[]},buildToast:(t,o)=>{if((({containerId:t,toastId:r,updateId:s})=>{let n=t?t!==e:1!==e,a=l.has(r)&&null==s;return n||a})(o))return;let{toastId:c,updateId:d,data:f,staleId:m,delay:g}=o,y=null==d;y&&n++;let x={...i,style:i.toastStyle,key:s++,...Object.fromEntries(Object.entries(o).filter(([e,t])=>null!=t)),toastId:c,updateId:d,data:f,isIn:!1,className:ir(o.className||i.toastClassName),progressClassName:ir(o.progressClassName||i.progressClassName),autoClose:!o.isLoading&&lr(o.autoClose,i.autoClose),closeToast(e){l.get(c).removalReason=e,p(c)},deleteToast(){let e=l.get(c);if(null!=e){if(r(dr(e,"removed")),l.delete(c),n--,n<0&&(n=0),a.length>0)return void h(a.shift());u()}}};x.closeButton=i.closeButton,!1===o.closeButton||cr(o.closeButton)?x.closeButton=o.closeButton:!0===o.closeButton&&(x.closeButton=!cr(i.closeButton)||i.closeButton);let b={content:t,props:x,staleId:m};i.limit&&i.limit>0&&n>i.limit&&y?a.push(b):nr(g)?setTimeout(()=>{h(b)},g):h(b)},setProps(e){i=e},setToggle:(e,t)=>{let r=l.get(e);r&&(r.toggle=t)},isToastActive:e=>{var t;return null==(t=l.get(e))?void 0:t.isActive},getSnapshot:()=>o}}(t,e,br);gr.set(t,s);let n=s.observe(r);return yr.forEach(e=>jr(e.content,e.options)),yr=[],()=>{n(),gr.delete(t)}},setProps(e){var r;null==(r=gr.get(t))||r.setProps(e)},getSnapshot(){var e;return null==(e=gr.get(t))?void 0:e.getSnapshot()}}}function kr(e){return e&&(ar(e.toastId)||nr(e.toastId))?e.toastId:mr()}function Cr(e,t){return jr(e,t),t.toastId}function Er(e,t){return{...t,type:t&&t.type||e,toastId:kr(t)}}function Sr(e){return(t,r)=>Cr(t,Er(e,r))}function qr(e,t){return Cr(e,Er("default",t))}qr.loading=(e,t)=>Cr(e,Er("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),qr.promise=function(e,{pending:t,error:r,success:s},n){let a;t&&(a=ar(t)?qr.loading(t,n):qr.loading(t.render,{...n,...t}));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},i=(e,t,r)=>{if(null==t)return void qr.dismiss(a);let s={type:e,...o,...n,data:r},i=ar(t)?{render:t}:t;return a?qr.update(a,{...s,...i}):qr(i.render,{...s,...i}),r},l=or(e)?e():e;return l.then(e=>i("success",s,e)).catch(e=>i("error",r,e)),l},qr.success=Sr("success"),qr.info=Sr("info"),qr.error=Sr("error"),qr.warning=Sr("warning"),qr.warn=qr.warning,qr.dark=(e,t)=>Cr(e,Er("default",{theme:"dark",...t})),qr.dismiss=function(e){!function(e){if(vr()){if(null==e||(e=>ar(e)||nr(e))(e))gr.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=gr.get(e.containerId);t?t.removeToast(e.id):gr.forEach(t=>{t.removeToast(e.id)})}}else yr=yr.filter(t=>null!=e&&t.options.toastId!==e)}(e)},qr.clearWaitingQueue=(e={})=>{gr.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},qr.isActive=_r,qr.update=(e,t={})=>{let r=((e,{containerId:t})=>{var r;return null==(r=gr.get(t||1))?void 0:r.toasts.get(e)})(e,t);if(r){let{props:s,content:n}=r,a={delay:100,...s,...t,toastId:t.toastId||e,updateId:mr()};a.toastId!==e&&(a.staleId=e);let o=a.render||n;delete a.render,Cr(o,a)}},qr.done=e=>{qr.update(e,{progress:1})},qr.onChange=function(e){return xr.add(e),()=>{xr.delete(e)}},qr.play=e=>wr(!0,e),qr.pause=e=>wr(!1,e);var Or="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,Tr=({theme:e,type:t,isLoading:r,...s})=>o.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${t})`,...s}),Pr={info:function(e){return o.createElement(Tr,{...e},o.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return o.createElement(Tr,{...e},o.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return o.createElement(Tr,{...e},o.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return o.createElement(Tr,{...e},o.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return o.createElement("div",{className:"Toastify__spinner"})}};var Ar=e=>{let{isRunning:t,preventExitTransition:r,toastRef:s,eventHandlers:n,playToast:a}=function(e){let[t,r]=(0,o.useState)(!1),[s,n]=(0,o.useState)(!1),a=(0,o.useRef)(null),i=(0,o.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:u,onClick:d,closeOnClick:p}=e;function h(){r(!0)}function f(){r(!1)}function m(r){let s=a.current;if(i.canDrag&&s){i.didMove=!0,t&&f(),"x"===e.draggableDirection?i.delta=r.clientX-i.start:i.delta=r.clientY-i.start,i.start!==r.clientX&&(i.canCloseOnClick=!1);let n="x"===e.draggableDirection?`${i.delta}px, var(--y)`:`0, calc(${i.delta}px + var(--y))`;s.style.transform=`translate3d(${n},0)`,s.style.opacity=""+(1-Math.abs(i.delta/i.removalDistance))}}function g(){document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",g);let t=a.current;if(i.canDrag&&i.didMove&&t){if(i.canDrag=!1,Math.abs(i.delta)>i.removalDistance)return n(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=gr.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:r}),(0,o.useEffect)(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||f(),window.addEventListener("focus",h),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",f)}},[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){i.didMove=!1,document.addEventListener("pointermove",m),document.addEventListener("pointerup",g);let r=a.current;i.canCloseOnClick=!0,i.canDrag=!0,r.style.transition="none","x"===e.draggableDirection?(i.start=t.clientX,i.removalDistance=r.offsetWidth*(e.draggablePercent/100)):(i.start=t.clientY,i.removalDistance=r.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:r,bottom:s,left:n,right:o}=a.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=n&&t.clientX<=o&&t.clientY>=r&&t.clientY<=s?f():h()}};return l&&c&&(y.onMouseEnter=f,e.stacked||(y.onMouseLeave=h)),p&&(y.onClick=e=>{d&&d(e),i.canCloseOnClick&&u(!0)}),{playToast:h,pauseToast:f,isRunning:t,preventExitTransition:s,toastRef:a,eventHandlers:y}}(e),{closeButton:i,children:l,autoClose:c,onClick:u,type:d,hideProgressBar:p,closeToast:h,transition:f,position:m,className:g,style:y,progressClassName:x,updateId:b,role:v,progress:_,rtl:j,toastId:w,deleteToast:N,isIn:k,isLoading:C,closeOnClick:E,theme:S,ariaLabel:q}=e,O=sr("Toastify__toast",`Toastify__toast-theme--${S}`,`Toastify__toast--${d}`,{"Toastify__toast--rtl":j},{"Toastify__toast--close-on-click":E}),T=or(g)?g({rtl:j,position:m,type:d,defaultClassName:O}):sr(O,g),P=function({theme:e,type:t,isLoading:r,icon:s}){let n=null,a={theme:e,type:t};return!1===s||(or(s)?n=s({...a,isLoading:r}):(0,o.isValidElement)(s)?n=(0,o.cloneElement)(s,a):r?n=Pr.spinner():(e=>e in Pr)(t)&&(n=Pr[t](a))),n}(e),A=!!_||!c,L={closeToast:h,type:d,theme:S},z=null;return!1===i||(z=or(i)?i(L):(0,o.isValidElement)(i)?(0,o.cloneElement)(i,L):function({closeToast:e,theme:t,ariaLabel:r="close"}){return o.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:t=>{t.stopPropagation(),e(!0)},"aria-label":r},o.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},o.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}(L)),o.createElement(f,{isIn:k,done:N,position:m,preventExitTransition:r,nodeRef:s,playToast:a},o.createElement("div",{id:w,tabIndex:0,onClick:u,"data-in":k,className:T,...n,style:y,ref:s,...k&&{role:v,"aria-label":q}},null!=P&&o.createElement("div",{className:sr("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!C})},P),pr(l,e,!t),z,!e.customProgressBar&&o.createElement(hr,{...b&&!A?{key:`p-${b}`}:{},rtl:j,theme:S,delay:c,isRunning:t,isIn:k,closeToast:h,hide:p,type:d,className:x,controlledProgress:A,progress:_||0})))},Lr=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),zr=ur(Lr("bounce",!0)),Mr=(ur(Lr("slide",!0)),ur(Lr("zoom")),ur(Lr("flip")),{position:"top-right",transition:zr,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function Rr(e){let t={...Mr,...e},r=e.stacked,[s,n]=(0,o.useState)(!0),a=(0,o.useRef)(null),{getToastToRender:i,isToastActive:l,count:c}=function(e){var t;let{subscribe:r,getSnapshot:s,setProps:n}=(0,o.useRef)(Nr(e)).current;n(e);let a=null==(t=(0,o.useSyncExternalStore)(r,s,s))?void 0:t.slice();return{getToastToRender:function(t){if(!a)return[];let r=new Map;return e.newestOnTop&&a.reverse(),a.forEach(e=>{let{position:t}=e.props;r.has(t)||r.set(t,[]),r.get(t).push(e)}),Array.from(r,e=>t(e[0],e[1]))},isToastActive:_r,count:null==a?void 0:a.length}}(t),{className:u,style:d,rtl:p,containerId:h,hotKeys:f}=t;function m(e){let t=sr("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":p});return or(u)?u({position:e,rtl:p,defaultClassName:t}):sr(t,ir(u))}function g(){r&&(n(!0),qr.play())}return Or(()=>{var e;if(r){let r=a.current.querySelectorAll('[data-in="true"]'),n=12,o=null==(e=t.position)?void 0:e.includes("top"),i=0,l=0;Array.from(r).reverse().forEach((e,t)=>{let r=e;r.classList.add("Toastify__toast--stacked"),t>0&&(r.dataset.collapsed=`${s}`),r.dataset.pos||(r.dataset.pos=o?"top":"bot");let a=i*(s?.2:1)+(s?0:n*t);r.style.setProperty("--y",`${o?a:-1*a}px`),r.style.setProperty("--g",`${n}`),r.style.setProperty("--s",""+(1-(s?l:0))),i+=r.offsetHeight,l+=.025})}},[s,c,r]),(0,o.useEffect)(()=>{function e(e){var t;let r=a.current;f(e)&&(null==(t=r.querySelector('[tabIndex="0"]'))||t.focus(),n(!1),qr.pause()),"Escape"===e.key&&(document.activeElement===r||null!=r&&r.contains(document.activeElement))&&(n(!0),qr.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[f]),o.createElement("section",{ref:a,className:"Toastify",id:h,onMouseEnter:()=>{r&&(n(!1),qr.pause())},onMouseLeave:g,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},i((e,t)=>{let s=t.length?{...d}:{...d,pointerEvents:"none"};return o.createElement("div",{tabIndex:-1,className:m(e),"data-stacked":r,style:s,key:`c-${e}`},t.map(({content:e,props:t})=>o.createElement(Ar,{...t,stacked:r,collapseAll:g,isIn:l(t.toastId,t.containerId),key:`t-${t.key}`},e)))}))}const Ir=()=>{const e=window.qe_data||window.qeApiConfig||{},{api_url:t,nonce:r,endpoints:s}=e;if(console.log("🔍 API Config Debug:",{hasQeData:!!window.qe_data,hasQeApiConfig:!!window.qeApiConfig,apiUrl:t,hasNonce:!!r,hasEndpoints:!!s}),!t||!r)throw new Error(`WordPress API configuration not found. \n      Ensure qe_data is properly localized in WordPress. \n      Available data: ${JSON.stringify(e,null,2)}`);const n={apiUrl:t,nonce:r,endpoints:s||{courses:`${t}/wp/v2/course`,lessons:`${t}/wp/v2/lesson`,quizzes:`${t}/wp/v2/quiz`,questions:`${t}/wp/v2/question`,books:`${t}/wp/v2/book`,categories:`${t}/wp/v2/qe_category`,topics:`${t}/wp/v2/qe_topic`,difficulties:`${t}/wp/v2/qe_difficulty`,courseTypes:`${t}/wp/v2/course_type`,media:`${t}/wp/v2/media`,users:`${t}/wp/v2/users`},debug:e.debug||!1,user:e.user||null};return console.log("✅ Final API Configuration:",n),n},Dr=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");return e},$r=async(e,t={})=>{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":Dr().nonce},credentials:"same-origin",...t},s=await fetch(e,r);if(!s.ok){const e=await s.json().catch(()=>({message:`HTTP error! status: ${s.status}`}));throw new Error(e.message||"Request failed")}return s.json()},Fr={getSettings:async()=>{const e=`${Dr().api_url}/quiz-extended/v1/settings`;try{return(await $r(e,{method:"GET"})).data}catch(e){throw console.error("Error fetching settings:",e),e}},getScoreFormat:async()=>{const e=`${Dr().api_url}/quiz-extended/v1/settings/score-format`;try{return(await $r(e,{method:"GET"})).data.score_format}catch(e){return console.error("Error fetching score format:",e),"percentage"}},updateSettings:async e=>{const t=`${Dr().api_url}/quiz-extended/v1/settings`;try{return(await $r(t,{method:"POST",body:JSON.stringify(e)})).data}catch(e){throw console.error("Error updating settings:",e),e}},updateScoreFormat:async e=>Fr.updateSettings({score_format:e}),getTheme:async()=>{const e=`${Dr().api_url}/quiz-extended/v1/settings/theme`;try{return await $r(e,{method:"GET"})}catch(e){return console.error("Error fetching theme:",e),{success:!0,data:{primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#ffffff",dark_mode:!1}}}},updateTheme:async e=>Fr.updateSettings({theme:e})},Ur=Fr,Br=window.ReactJSXRuntime,Qr=(0,o.createContext)(),Hr=()=>{const e=(0,o.useContext)(Qr);if(!e)throw new Error("useTheme debe ser usado dentro de un ThemeProvider");return e},Vr=({children:e})=>{const[t,r]=(0,o.useState)({primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#ffffff",dark_mode:!1}),[s,n]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{const e=await Fr.getTheme();e.success&&e.data&&(r(e.data),a(e.data))}catch(e){console.error("Error loading theme:",e),a(t)}finally{n(!1)}})()},[]);const a=e=>{const t=document.documentElement;t.style.setProperty("--qe-primary",e.primary),t.style.setProperty("--qe-secondary",e.secondary),t.style.setProperty("--qe-accent",e.accent),t.style.setProperty("--qe-background",e.background);const r=Kr(e.primary),s=Kr(e.secondary),n=Kr(e.accent);t.style.setProperty("--qe-primary-light",`rgba(${r}, 0.1)`),t.style.setProperty("--qe-primary-hover",Wr(e.primary,-10)),t.style.setProperty("--qe-secondary-light",`rgba(${s}, 0.1)`),t.style.setProperty("--qe-secondary-hover",Wr(e.secondary,-10)),t.style.setProperty("--qe-accent-light",`rgba(${n}, 0.1)`),t.style.setProperty("--qe-accent-hover",Wr(e.accent,-10)),e.dark_mode?(t.classList.add("qe-dark-mode"),t.style.setProperty("--qe-text","#f3f4f6"),t.style.setProperty("--qe-text-secondary","#d1d5db"),t.style.setProperty("--qe-border","#374151"),t.style.setProperty("--qe-bg-card","#1f2937"),t.style.setProperty("--qe-bg-hover","#374151")):(t.classList.remove("qe-dark-mode"),t.style.setProperty("--qe-text","#111827"),t.style.setProperty("--qe-text-secondary","#6b7280"),t.style.setProperty("--qe-border","#e5e7eb"),t.style.setProperty("--qe-bg-card","#ffffff"),t.style.setProperty("--qe-bg-hover","#f9fafb"))},i=async e=>{try{if((await Fr.updateSettings({theme:e})).success){const s={...t,...e};return r(s),a(s),!0}return!1}catch(e){return console.error("Error updating theme:",e),!1}},l={theme:t,loading:s,updateTheme:i,toggleDarkMode:async()=>{const e={...t,dark_mode:!t.dark_mode};return await i(e)},getColor:e=>t[e]||"#000000",isDarkMode:()=>t.dark_mode};return(0,Br.jsx)(Qr.Provider,{value:l,children:e})};function Kr(e){return`${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}`}function Wr(e,t){const r=parseInt(e.slice(1),16),s=Math.round(2.55*t),n=(r>>16)+s,a=(r>>8&255)+s,o=(255&r)+s;return"#"+(16777216+65536*(n<255?n<1?0:n:255)+256*(a<255?a<1?0:a:255)+(o<255?o<1?0:o:255)).toString(16).slice(1)}const Gr=({label:e,value:t,icon:r,iconColor:s="text-gray-500",bgColor:n="bg-gray-50"})=>(0,Br.jsx)("div",{className:`${n} rounded-lg p-4 shadow-sm border border-gray-100`,children:(0,Br.jsxs)("div",{className:"flex items-center",children:[r&&(0,Br.jsx)("div",{className:"flex-shrink-0",children:(0,Br.jsx)(r,{className:`h-6 w-6 ${s}`})}),(0,Br.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-600 truncate",children:e}),(0,Br.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:t})]})]})}),Yr=({stats:e=[],className:t=""})=>{if(!e||0===e.length)return null;const r=`grid-cols-2 md:grid-cols-3 lg:grid-cols-${Math.min(e.length,6)}`;return(0,Br.jsx)("div",{className:`grid ${r} gap-4 ${t}`,children:e.map((e,t)=>(0,Br.jsx)(Gr,{label:e.label,value:e.value,icon:e.icon,iconColor:e.iconColor,bgColor:e.bgColor},t))})},Xr=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},Jr=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),Zr=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var es={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const ts=(0,o.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:n="",children:a,iconNode:i,...l},c)=>(0,o.createElement)("svg",{ref:c,...es,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:Jr("lucide",n),...!a&&!Zr(l)&&{"aria-hidden":"true"},...l},[...i.map(([e,t])=>(0,o.createElement)(e,t)),...Array.isArray(a)?a:[a]])),rs=(e,t)=>{const r=(0,o.forwardRef)(({className:r,...s},n)=>{return(0,o.createElement)(ts,{ref:n,iconNode:t,className:Jr(`lucide-${a=Xr(e),a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...s});var a});return r.displayName=Xr(e),r},ss=rs("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),ns={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},as={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-indigo-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},os=i().forwardRef(({children:e,variant:t="primary",size:r="md",type:s="button",className:n="",isLoading:a=!1,loadingText:o,iconLeft:i,iconRight:l,...c},u)=>{const{t:d}=N(),p=o||d("common.loading"),h=`inline-flex items-center justify-center font-semibold rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-75 disabled:cursor-not-allowed ${ns[r]} ${as[t]} ${n}`;return(0,Br.jsx)("button",{ref:u,type:s,className:h,disabled:a||c.disabled,...c,children:a?(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)(ss,{className:"animate-spin h-4 w-4 "+(p?"mr-2":"")}),p]}):(0,Br.jsxs)(Br.Fragment,{children:[i&&(0,Br.jsx)(i,{className:"h-4 w-4 mr-2"}),e,l&&(0,Br.jsx)(l,{className:"h-4 w-4 ml-2"})]})})}),is=({title:e,description:t,stats:r=[],primaryAction:s,secondaryAction:n,isLoading:a=!1,className:o=""})=>(0,Br.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 ${o}`,children:[(0,Br.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e}),t&&(0,Br.jsx)("p",{className:"text-gray-600 mt-1",children:t})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[a&&(0,Br.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,Br.jsx)(ss,{className:"animate-spin h-4 w-4 mr-2"}),(0,Br.jsx)("span",{children:"Updating..."})]}),n&&(0,Br.jsx)(os,{variant:"secondary",size:"md",onClick:n.onClick,disabled:n.isLoading||a,iconLeft:n.icon,children:n.text}),s&&(0,Br.jsx)(os,{variant:"primary",size:"md",onClick:s.onClick,isLoading:s.isLoading,iconLeft:s.icon,children:s.text})]})]}),r.length>0&&(0,Br.jsx)(Yr,{stats:r})]}),ls=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.endpoints)throw new Error("API endpoints not configured in WordPress");return e},cs=async(e,t={})=>{try{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":ls().nonce},credentials:"same-origin",...t},s=await fetch(e,r);if(!s.ok){const e=await s.text();throw new Error(`API Error ${s.status}: ${s.statusText} - ${e}`)}return{data:await s.json(),headers:{"X-WP-Total":s.headers.get("X-WP-Total"),"X-WP-TotalPages":s.headers.get("X-WP-TotalPages")}}}catch(t){throw console.error("💥 API Request Failed:",e,t),t}},us=(e={})=>{const{page:t=1,perPage:r=20,search:s="",orderBy:n="date",order:a="desc",embed:o=!0}=e,i=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:n,order:a});return o&&i.append("_embed","true"),s&&s.trim()&&i.append("search",s.trim()),i},ds=(e,t,r={})=>{const{sanitizer:s=e=>e,validator:n=()=>({isValid:!0,errors:[]}),transformer:a=e=>e,buildParams:o=us}=r,i=()=>{const e=ls();if(!e.endpoints[t])throw new Error(`Endpoint '${t}' not configured`);return e.endpoints[t]};return{getAll:async(t={})=>{try{const r=`${i()}?${o(t).toString()}`;console.log(`🎯 GET ${e}s:`,r);const n=await cs(r);return{data:Array.isArray(n.data)?n.data.map(s):[],pagination:{currentPage:t.page||1,totalPages:parseInt(n.headers["X-WP-TotalPages"]||"1"),total:parseInt(n.headers["X-WP-Total"]||"0"),perPage:t.perPage||20}}}catch(t){throw console.error(`❌ Error fetching ${e}s:`,t),t}},getOne:async(t,r={})=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const n=i(),a=new URLSearchParams;!1!==r.embed&&a.append("_embed","true");const o=`${n}/${t}?${a.toString()}`;console.log(`🎯 GET ${e}:`,o);const l=await cs(o);return s(l.data)}catch(r){if(console.error(`❌ Error fetching ${e} ${t}:`,r),r.message.includes("404"))return null;throw r}},create:async t=>{try{const r=n(t);if(!r.isValid)throw new Error(`Validation failed: ${r.errors.join(", ")}`);const o=i(),l=a(t);console.log(`📝 Creating ${e}:`,l);const c=await cs(o,{method:"POST",body:JSON.stringify(l)});return console.log(`✅ ${e} created:`,c.data.id),s(c.data)}catch(t){throw console.error(`❌ Error creating ${e}:`,t),t}},update:async(t,r)=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const o=n(r);if(!o.isValid)throw new Error(`Validation failed: ${o.errors.join(", ")}`);const l=i(),c=a(r);console.log(`✏️ Updating ${e} ${t}:`,c);const u=`${l}/${t}`,d=await cs(u,{method:"POST",body:JSON.stringify(c)});return console.log(`✅ ${e} updated:`,t),s(d.data)}catch(r){throw console.error(`❌ Error updating ${e} ${t}:`,r),r}},delete:async(t,r={})=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const s=i(),n=new URLSearchParams;r.force&&n.append("force","true");const a=`${s}/${t}?${n.toString()}`;return console.log(`🗑️ Deleting ${e} ${t}`),await cs(a,{method:"DELETE"}),console.log(`✅ ${e} deleted:`,t),!0}catch(r){throw console.error(`❌ Error deleting ${e} ${t}:`,r),r}},getCount:async(t={})=>{try{return(await service.getAll({...t,perPage:1})).pagination.total}catch(t){return console.error(`❌ Error getting ${e} count:`,t),0}}}},ps=(e={})=>{const{search:t="",status:r=null,type:s=null,autoFetch:n=!0,enablePolling:a=!0,pollingInterval:i=3e4}=e,[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)(!1),[p,h]=(0,o.useState)(null),[f,m]=(0,o.useState)(!1),[g,y]=(0,o.useState)(!1),[x,b]=(0,o.useState)({currentPage:1,totalPages:1,total:0,perPage:20,hasMore:!1}),v=(0,o.useRef)(!0),_=(0,o.useRef)({search:t,status:r,type:s}),j=(0,o.useRef)(""),w=(0,o.useRef)(null),N=(0,o.useRef)(0),k=(0,o.useRef)(!0);(0,o.useEffect)(()=>{_.current={search:t,status:r,type:s}},[t,r,s]),(0,o.useEffect)(()=>{const e=()=>{k.current=!document.hidden,!document.hidden&&a&&(console.log("🔍 Page visible again, checking for new messages..."),C())};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[a]),(0,o.useEffect)(()=>()=>{v.current=!1,w.current&&clearTimeout(w.current)},[]);const C=(0,o.useCallback)(async()=>{if(v.current&&k.current)try{const e=Ir(),t=_.current,r=new URLSearchParams({page:"1",per_page:"1",orderby:"created_at",order:"desc"});t.status&&r.append("status",t.status),t.type&&r.append("type",t.type);const s=`${e.endpoints.custom_api}/messages?${r}`;console.log("🔄 Checking for new messages...");const n=await cs(s);if(!v.current)return;const a=n.headers["X-WP-Total"],o=a?parseInt(a,10):0;if(N.current>0&&o>N.current){const e=o-N.current;console.log(`🔔 ${e} new message(s) detected!`),y(!0),"Notification"in window&&"granted"===Notification.permission&&new Notification("Quiz Extended",{body:`You have ${e} new message(s)`,icon:"/wp-content/plugins/quiz-extended/assets/icon.png"})}N.current=o}catch(e){console.error("❌ Error checking for new messages:",e)}},[]),E=(0,o.useCallback)(()=>{if(!a||w.current)return;console.log(`⏰ Starting polling every ${i/1e3}s`);const e=()=>{C(),w.current=setTimeout(e,i)};w.current=setTimeout(e,i)},[a,i,C]),S=(0,o.useCallback)(()=>{w.current&&(console.log("⏸️ Stopping polling"),clearTimeout(w.current),w.current=null)},[]),q=(0,o.useCallback)(async(e=!1)=>{if(!v.current)return;const t=e?1:x.currentPage+1;if(e||x.hasMore)try{e&&(d(!0),h(null),c([]),y(!1));const r=Ir(),s=_.current,n=new URLSearchParams({page:t.toString(),per_page:"20",orderby:"created_at",order:"desc"});s.search&&n.append("search",s.search),s.status&&n.append("status",s.status),s.type&&n.append("type",s.type);const a=`${r.endpoints.custom_api}/messages?${n}`,o=`${a}-${t}-${e}`;if(o===j.current&&!e)return void console.log("🚫 Duplicate request prevented");j.current=o,console.log("🚀 Fetching messages:",a);const i=await cs(a);if(!v.current)return;const l=i.data?.data||[],u=i.headers["X-WP-Total"],p=i.headers["X-WP-TotalPages"],f=u?parseInt(u,10):l.length;N.current=f;const m={currentPage:t,totalPages:p?parseInt(p,10):1,total:f,perPage:20,hasMore:t<(p?parseInt(p,10):1)};b(m),c(t=>e?l:[...t,...l]),console.log(`✅ Loaded ${l.length} messages (Page ${t})`)}catch(e){console.error("❌ Error fetching messages:",e),v.current&&h(e.message||"Failed to load messages")}finally{v.current&&d(!1)}else console.log("📭 No more messages to load")},[x]),O=(0,o.useCallback)(async(e,t)=>{if(v.current){m(!0);try{const r=`${Ir().endpoints.custom_api}/messages/${e}`,s={status:t};console.log(`📝 Updating message ${e}:`,s);const n=await cs(r,{method:"PUT",body:JSON.stringify(s)});if(!v.current)return;const a=n.data;return c(t=>t.map(t=>t.id===e?{...t,...a}:t)),window.jQuery&&window.jQuery(document).trigger("qe-message-status-changed"),console.log("✅ Message updated successfully"),a}catch(e){throw console.error("❌ Error updating message:",e),e}finally{v.current&&m(!1)}}},[]),T=(0,o.useCallback)(async e=>{if(v.current){m(!0);try{const t=`${Ir().endpoints.custom_api}/messages/${e}`;if(console.log(`🗑️ Deleting message ${e}`),await cs(t,{method:"DELETE"}),!v.current)return;c(t=>t.filter(t=>t.id!==e)),b(e=>({...e,total:e.total-1})),console.log("✅ Message deleted successfully")}catch(e){throw console.error("❌ Error deleting message:",e),e}finally{v.current&&m(!1)}}},[]),P=(0,o.useCallback)(async()=>{if("Notification"in window&&"default"===Notification.permission){const e=await Notification.requestPermission();return console.log("🔔 Notification permission:",e),"granted"===e}return"granted"===Notification.permission},[]),A=(0,o.useMemo)(()=>({totalMessages:x.total,unreadMessages:l.filter(e=>"unread"===e.status).length,feedbackMessages:l.filter(e=>"question_feedback"===e.type).length,challengeMessages:l.filter(e=>"question_challenge"===e.type).length}),[l,x.total]);return(0,o.useEffect)(()=>{n&&q(!0)},[t,r,s]),(0,o.useEffect)(()=>(a?E():S(),()=>S()),[a,E,S]),{messages:l,loading:u,error:p,pagination:{...x,total:x.total},computed:A,updating:f,hasNewMessages:g,fetchMessages:q,updateMessageStatus:O,deleteMessage:T,checkForNewMessages:C,startPolling:E,stopPolling:S,requestNotificationPermission:P,sendMessage:async()=>console.log("sendMessage not implemented in this hook yet")}},hs=(e={})=>{const{role:t=null,courseId:r=null,enrollmentStatus:s=null,search:n="",autoFetch:a=!0,initialFilters:i={},debounceMs:l=500}=e,[c,u]=(0,o.useState)([]),[d,p]=(0,o.useState)(!0),[h,f]=(0,o.useState)(!1),[m,g]=(0,o.useState)(null),[y,x]=(0,o.useState)({currentPage:1,totalPages:1,total:0,perPage:20}),[b,v]=(0,o.useState)(!1),[_,j]=(0,o.useState)({search:n||"",role:t,courseId:r,enrollmentStatus:s,orderby:"registered_date",order:"desc",...i}),w=(0,o.useRef)(_),N=(0,o.useRef)(e),k=(0,o.useRef)(null),C=(0,o.useRef)(!0),E=(0,o.useRef)("");(0,o.useEffect)(()=>{w.current=_},[_]),(0,o.useEffect)(()=>{N.current=e},[e]),(0,o.useEffect)(()=>()=>{C.current=!1,k.current&&clearTimeout(k.current)},[]);const S=async(e,t={})=>{try{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":Ir().nonce},credentials:"same-origin",...t},s=await fetch(e,r);if(!s.ok){const e=await s.text();throw new Error(`API Error ${s.status}: ${s.statusText} - ${e}`)}return s}catch(e){throw console.error("API Request Error:",e),e}},q=(0,o.useCallback)(async(e={})=>{const{reset:t=!1,page:r=1,additionalFilters:s={}}=e;try{t&&(p(!0),g(null));const e=Ir(),n=w.current,a=new URLSearchParams({page:r.toString(),per_page:"20",orderby:n.orderBy||"registered",order:n.order||"desc",context:"edit"});n.search&&a.append("search",n.search),n.role&&a.append("roles",n.role),Object.entries(s).forEach(([e,t])=>{null!=t&&""!==t&&a.append(e,t)});const o=`${e.endpoints.users}?${a}`,i=`${o}-${r}-${t}`;if(i===E.current)return void console.log("🚫 Duplicate user request prevented:",o);E.current=i,console.log("🚀 Fetching users:",o);const l=await S(o),c=await l.json();if(!C.current)return;const d=l.headers.get("X-WP-Total"),h=l.headers.get("X-WP-TotalPages"),f={currentPage:r,totalPages:h?parseInt(h,10):1,total:d?parseInt(d,10):c.length,perPage:20};x(f),v(r<f.totalPages);let m=c;n.courseId&&(m=await O(c,n.courseId)),u(t||1===r?m:e=>{const t=new Set(e.map(e=>e.id)),r=m.filter(e=>!t.has(e.id));return[...e,...r]}),console.log("✅ Users loaded:",m.length)}catch(e){console.error("❌ Error fetching users:",e),C.current&&(g(e.message||"Failed to fetch users"),(t||1===r)&&(u([]),x({currentPage:1,totalPages:1,total:0,perPage:20}),v(!1)))}finally{C.current&&p(!1)}},[]),O=async(e,t)=>{try{const r=Ir(),s=e.map(async e=>{try{const s=await S(`${r.endpoints.users}/${e.id}?context=edit`),n=await s.json(),a=`_enrolled_course_${t}`,o=n.meta&&n.meta[a];return{...e,enrollmentData:{isEnrolled:!!o,enrollmentDate:o?n.meta[`${a}_date`]:null,progress:n.meta[`_course_${t}_progress`]||0,lastActivity:n.meta[`_course_${t}_last_activity`]||null}}}catch(t){return console.warn(`Failed to get enrollment data for user ${e.id}:`,t),{...e,enrollmentData:{isEnrolled:!1,enrollmentDate:null,progress:0,lastActivity:null}}}});return await Promise.all(s)}catch(t){return console.error("Error enriching users with enrollment data:",t),e}},T=(0,o.useCallback)((e={})=>{k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{C.current&&q({reset:!0,...e})},l)},[q,l]);(0,o.useEffect)(()=>{a&&(console.log("🎯 Initial user load"),q({reset:!0}))},[]),(0,o.useEffect)(()=>{j(e=>{const a={...e,search:n||"",role:t,courseId:r,enrollmentStatus:s};return JSON.stringify(a)!==JSON.stringify(e)?a:e})},[n,t,r,s]),(0,o.useEffect)(()=>{a&&(console.log("🔄 User filters changed, debouncing fetch..."),T())},[_,T,a]);const P=(0,o.useCallback)(async(e,t)=>{try{f(!0),g(null);const r=Ir(),s={[`_enrolled_course_${t}`]:!0,[`_enrolled_course_${t}_date`]:(new Date).toISOString(),[`_course_${t}_progress`]:0};console.log("📝 Enrolling user in course:",{userId:e,courseId:t});const n=await S(`${r.endpoints.users}/${e}`,{method:"POST",body:JSON.stringify({meta:s})}),a=await n.json();return u(r=>r.map(r=>r.id===e?{...r,enrollmentData:{...r.enrollmentData,isEnrolled:!0,enrollmentDate:s[`_enrolled_course_${t}_date`],progress:0}}:r)),console.log("✅ User enrolled successfully"),a}catch(e){throw console.error("❌ Error enrolling user:",e),g(e.message||"Failed to enroll user"),e}finally{f(!1)}},[]),A=(0,o.useCallback)(async(e,t)=>{try{f(!0),g(null);const r=Ir();console.log("❌ Unenrolling user from course:",{userId:e,courseId:t});const s=await S(`${r.endpoints.users}/${e}`,{method:"POST",body:JSON.stringify({meta:{[`_enrolled_course_${t}`]:null}})}),n=await s.json();return u(t=>t.map(t=>t.id===e?{...t,enrollmentData:{...t.enrollmentData,isEnrolled:!1,enrollmentDate:null,progress:0}}:t)),console.log("✅ User unenrolled successfully"),n}catch(e){throw console.error("❌ Error unenrolling user:",e),g(e.message||"Failed to unenroll user"),e}finally{f(!1)}},[]),L=(0,o.useCallback)(async(e,t)=>{try{f(!0),g(null);const r=Ir();console.log("👤 Updating user role:",{userId:e,newRole:t});const s=await S(`${r.endpoints.users}/${e}`,{method:"POST",body:JSON.stringify({roles:[t]})}),n=await s.json();return u(t=>t.map(t=>t.id===e?{...t,roles:n.roles}:t)),console.log("✅ User role updated successfully"),n}catch(e){throw console.error("❌ Error updating user role:",e),g(e.message||"Failed to update user role"),e}finally{f(!1)}},[]),z=(0,o.useCallback)(()=>{b&&!d&&q({page:y.currentPage+1,reset:!1})},[b,d,y.currentPage,q]),M=(0,o.useCallback)(()=>{E.current="",q({reset:!0})},[q]),R=(0,o.useMemo)(()=>({totalUsers:c.length,usersByRole:c.reduce((e,t)=>{const r=t.roles?.[0]||"subscriber";return e[r]=(e[r]||0)+1,e},{}),enrolledUsers:c.filter(e=>e.enrollmentData?.isEnrolled).length,unenrolledUsers:c.filter(e=>!e.enrollmentData?.isEnrolled).length,activeUsers:c.filter(e=>{if(!e.enrollmentData?.lastActivity)return!1;const t=new Date;return t.setDate(t.getDate()-30),new Date(e.enrollmentData.lastActivity)>t}).length,averageProgress:c.length>0?Math.round(c.reduce((e,t)=>e+(t.enrollmentData?.progress||0),0)/c.length):0,recentRegistrations:c.filter(e=>{const t=new Date;return t.setDate(t.getDate()-7),new Date(e.date_registered||e.registered)>t}).length}),[c]);return{users:c,loading:d,updating:h,error:m,pagination:y,hasMore:b,filters:_,computed:R,enrollUserInCourse:P,unenrollUserFromCourse:A,updateUserRole:L,refreshUsers:M,loadMoreUsers:z,fetchUsers:T}},fs=rs("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ms=rs("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),gs=rs("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ys=rs("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xs=rs("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),bs=rs("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),vs=({isOpen:e,onClose:t,onMessageSent:r})=>{const[s,n]=(0,o.useState)("all"),[a,i]=(0,o.useState)([]),[l,c]=(0,o.useState)([]),[u,d]=(0,o.useState)(""),[p,h]=(0,o.useState)(""),[f,m]=(0,o.useState)(""),[g,y]=(0,o.useState)("announcement"),[x,b]=(0,o.useState)(!1),[v,_]=(0,o.useState)(!1),[j,w]=(0,o.useState)(""),[N,k]=(0,o.useState)(!1);(0,o.useEffect)(()=>{e&&"specific"===s&&C()},[e,s]);const C=async()=>{k(!0);try{const e=`${Ir().endpoints.users}?per_page=100`,t=await cs(e);c(t.data||[])}catch(e){console.error("Error fetching users:",e),w("Error al cargar usuarios")}finally{k(!1)}},E=async e=>{if(e.preventDefault(),p.trim()&&f.trim())if("specific"!==s||0!==a.length){b(!0),w("");try{const e=`${Ir().endpoints.custom_api}/messages/send`,n="all"===s?["all"]:a;await cs(e,{method:"POST",body:JSON.stringify({recipient_ids:n,subject:p,message:f,type:g})}),_(!0),setTimeout(()=>{S(),r&&r(),t()},2e3)}catch(e){console.error("Error sending message:",e),w(e.message||"Error al enviar el mensaje")}finally{b(!1)}}else w("Selecciona al menos un usuario");else w("Asunto y mensaje son obligatorios")},S=()=>{n("all"),i([]),h(""),m(""),y("announcement"),_(!1),w(""),d("")},q=l.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase()));return e?(0,Br.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Br.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white",children:(0,Br.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h2",{className:"text-2xl font-bold",children:"Enviar Mensaje"}),(0,Br.jsx)("p",{className:"text-blue-100 mt-1",children:"Comunícate con tus estudiantes"})]}),(0,Br.jsx)("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:(0,Br.jsx)(fs,{className:"w-5 h-5"})})]})}),(0,Br.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:v?(0,Br.jsxs)("div",{className:"text-center py-12",children:[(0,Br.jsx)(ms,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,Br.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"¡Mensaje Enviado!"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Tu mensaje ha sido enviado correctamente"})]}):(0,Br.jsxs)("form",{onSubmit:E,className:"space-y-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Destinatarios"}),(0,Br.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Br.jsxs)("button",{type:"button",onClick:()=>n("all"),className:"p-4 border-2 rounded-lg flex items-center justify-center space-x-2 transition-colors "+("all"===s?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[(0,Br.jsx)(gs,{className:"w-5 h-5"}),(0,Br.jsx)("span",{className:"font-medium",children:"Todos los usuarios"})]}),(0,Br.jsxs)("button",{type:"button",onClick:()=>n("specific"),className:"p-4 border-2 rounded-lg flex items-center justify-center space-x-2 transition-colors "+("specific"===s?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"),children:[(0,Br.jsx)(ys,{className:"w-5 h-5"}),(0,Br.jsx)("span",{className:"font-medium",children:"Usuarios específicos"})]})]})]}),"specific"===s&&(0,Br.jsxs)("div",{children:[(0,Br.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Seleccionar usuarios (",a.length," seleccionados)"]}),(0,Br.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),placeholder:"Buscar usuarios...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-3 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Br.jsx)("div",{className:"border border-gray-300 rounded-lg max-h-60 overflow-y-auto",children:N?(0,Br.jsxs)("div",{className:"p-4 text-center text-gray-500",children:[(0,Br.jsx)(xs,{className:"w-5 h-5 animate-spin inline mr-2"}),"Cargando usuarios..."]}):0===q.length?(0,Br.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No se encontraron usuarios"}):q.map(e=>(0,Br.jsxs)("label",{className:"flex items-center p-3 hover:bg-gray-50 cursor-pointer border-b border-gray-100 last:border-b-0",children:[(0,Br.jsx)("input",{type:"checkbox",checked:a.includes(e.id),onChange:()=>{return t=e.id,void i(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Br.jsxs)("div",{className:"ml-3",children:[(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,Br.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]})]},e.id))})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de mensaje"}),(0,Br.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Br.jsx)("option",{value:"announcement",children:"Anuncio"}),(0,Br.jsx)("option",{value:"notification",children:"Notificación"}),(0,Br.jsx)("option",{value:"alert",children:"Alerta"})]})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asunto *"}),(0,Br.jsx)("input",{type:"text",value:p,onChange:e=>h(e.target.value),placeholder:"Asunto del mensaje...",required:!0,maxLength:200,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mensaje *"}),(0,Br.jsx)("textarea",{value:f,onChange:e=>m(e.target.value),placeholder:"Escribe tu mensaje aquí...",required:!0,maxLength:5e3,rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),(0,Br.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[f.length,"/5000 caracteres"]})]}),j&&(0,Br.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,Br.jsx)("p",{className:"text-sm text-red-600",children:j})})]})}),!v&&(0,Br.jsxs)("div",{className:"border-t border-gray-200 p-6 bg-gray-50 flex justify-end space-x-3",children:[(0,Br.jsx)("button",{type:"button",onClick:t,disabled:x,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,Br.jsx)("button",{onClick:E,disabled:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:x?(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)(xs,{className:"w-4 h-4 animate-spin"}),(0,Br.jsx)("span",{children:"Enviando..."})]}):(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)(bs,{className:"w-4 h-4"}),(0,Br.jsx)("span",{children:"Enviar Mensaje"})]})})]})]})}):null},_s=({message:e,onSelect:t,isActive:r})=>(0,Br.jsxs)("div",{className:`p-3 cursor-pointer border-b border-gray-200 hover:bg-gray-100 ${r?"bg-blue-100":""} ${"unread"===e.status?"font-bold":""}`,onClick:()=>t(e),children:[(0,Br.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Br.jsx)("p",{className:"text-sm truncate",children:e.sender_name||"Sistema"}),(0,Br.jsx)("time",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("es-ES",{day:"numeric",month:"short"})})]}),(0,Br.jsx)("p",{className:"text-sm truncate mt-1",children:e.subject})]}),js=({message:e,onUpdateStatus:t,onDelete:r})=>e?(0,Br.jsxs)("div",{className:"p-6 h-full flex flex-col",children:[(0,Br.jsxs)("div",{className:"pb-4 border-b border-gray-200",children:[(0,Br.jsx)("h2",{className:"text-xl font-semibold mb-2",children:e.subject}),(0,Br.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Br.jsxs)("p",{children:[(0,Br.jsx)("strong",{children:"De:"})," ",e.sender_name||"Sistema"]}),(0,Br.jsx)("span",{className:"mx-2",children:"|"}),(0,Br.jsxs)("time",{children:[(0,Br.jsx)("strong",{children:"Fecha:"})," ",new Date(e.created_at).toLocaleString("es-ES",{dateStyle:"short",timeStyle:"short"})]})]})]}),(0,Br.jsx)("div",{className:"py-4 flex-grow overflow-y-auto",dangerouslySetInnerHTML:{__html:e.message}}),(0,Br.jsxs)("div",{className:"pt-4 border-t border-gray-200 flex items-center justify-between",children:[(0,Br.jsx)("div",{children:"unread"===e.status&&(0,Br.jsx)("button",{onClick:()=>{"unread"===e.status&&t(e.id,"read")},className:"px-4 py-2 text-sm bg-blue-500 text-white rounded hover:bg-blue-600",children:"Marcar como leído"})}),(0,Br.jsx)("button",{onClick:()=>r(e.id),className:"px-4 py-2 text-sm bg-red-500 text-white rounded hover:bg-red-600",children:"Eliminar"})]})]}):(0,Br.jsx)("div",{className:"h-full flex items-center justify-center bg-gray-50",children:(0,Br.jsx)("p",{className:"text-gray-500",children:"Selecciona un mensaje para leerlo"})}),ws=()=>{const{messages:e,isLoading:t,error:r,total:s,updateMessageStatus:n,deleteMessage:a,sendMessage:i}=ps(),{users:l,isLoading:c}=hs(),[u,d]=(0,o.useState)(null),[p,h]=(0,o.useState)(!1),f=e=>{d(e),"unread"===e.status&&n(e.id,"read")},m=(0,o.useCallback)(async e=>{await a(e),u&&u.id===e&&d(null)},[a,u]);return t?(0,Br.jsx)("div",{className:"p-4",children:"Cargando mensajes..."}):r?(0,Br.jsxs)("p",{className:"text-red-500",children:["Error: ",r.message]}):(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,Br.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,Br.jsxs)("h2",{className:"text-lg font-semibold",children:["Bandeja de Entrada (",s," mensajes)"]}),(0,Br.jsx)("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Enviar Mensaje"})]}),(0,Br.jsxs)("div",{className:"flex",style:{height:"600px"},children:[(0,Br.jsx)("div",{className:"w-1/3 border-r border-gray-200 overflow-y-auto",children:e.length>0?e.map(e=>(0,Br.jsx)(_s,{message:e,onSelect:f,isActive:u?.id===e.id},e.id)):(0,Br.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No hay mensajes."})}),(0,Br.jsx)("div",{className:"w-2/3",children:(0,Br.jsx)(js,{message:u,onUpdateStatus:n,onDelete:m})})]}),p&&(0,Br.jsx)(vs,{isOpen:p,onClose:()=>h(!1),onSendMessage:i,users:l,isLoadingUsers:c})]})},Ns=()=>(0,Br.jsxs)("div",{className:"container mx-auto p-4 md:p-6 lg:p-8",children:[(0,Br.jsx)(is,{title:"Panel de Administración",subtitle:"Bienvenido, aquí tienes un resumen de la actividad de tu plataforma."}),(0,Br.jsx)("div",{className:"my-8",children:(0,Br.jsx)(Yr,{stats:[{label:"Usuarios Totales",value:"1,234"},{label:"Cursos Activos",value:"56"},{label:"Nuevos Mensajes",value:"8"},{label:"Preguntas",value:"2,500"}]})}),(0,Br.jsx)("div",{className:"mt-8",children:(0,Br.jsx)(ws,{})})]}),ks=({service:e,resourceName:t="resource",initialFilters:r={},debounceMs:s=500,autoFetch:n=!0,perPage:a=20,dataProcessor:i=null,computedValuesCalculator:l=null})=>{const[c,u]=(0,o.useState)([]),[d,p]=(0,o.useState)(!1),[h,f]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1),[y,x]=(0,o.useState)(!1),[b,v]=(0,o.useState)(null),[_,j]=(0,o.useState)({currentPage:1,totalPages:1,total:0,perPage:a,hasMore:!1}),[w,N]=(0,o.useState)({search:"",...r}),k=(0,o.useRef)(null),C=(0,o.useRef)(!0),E=(0,o.useRef)(""),S=(0,o.useRef)(!0),q=JSON.stringify(r);(0,o.useEffect)(()=>{S.current||N({search:"",...r})},[q]),(0,o.useEffect)(()=>(C.current=!0,()=>{C.current=!1,k.current&&clearTimeout(k.current)}),[]);const O=(0,o.useCallback)(async(r=!1,s={})=>{try{if(!e||!e.getAll)return void console.error(`❌ ${t}: Invalid service provided`);const n=s.perPage||_.perPage,o={...w,...s},l=JSON.stringify({reset:r,filters:o,page:_.currentPage});if(l===E.current&&!r)return void console.log(`⏭️ ${t}: Skipping duplicate fetch`);E.current=l,r&&p(!0),v(null);const c=r?1:_.currentPage,d={};Object.keys(o).forEach(e=>{const t=o[e];t&&"all"!==t&&""!==t&&(d[e]=t)}),console.log(`🔄 Fetching ${t}s:`,{page:c,perPage:a,filters:d});const h=await e.getAll({...d,page:c,perPage:n});if(!C.current)return;let f=h.data||[];i&&"function"==typeof i&&(f=f.map(i)),u(r?f:e=>[...e,...f]),j(e=>({...e,currentPage:r?1:c,totalPages:h.pagination?.totalPages||1,total:h.pagination?.total||0,hasMore:h.pagination?.currentPage<h.pagination?.totalPages})),console.log(`✅ ${t}s fetched:`,{count:f.length,total:h.pagination?.total||0})}catch(e){if(!C.current)return;console.error(`❌ Error fetching ${t}s:`,e),v(e.message||`Failed to fetch ${t}s`)}finally{C.current&&p(!1)}},[e,t,w,_.currentPage,_.perPage,i]),T=(0,o.useCallback)(()=>{_.hasMore&&!d&&j(e=>({...e,currentPage:e.currentPage+1}))},[_.hasMore,d]),P=(0,o.useCallback)(async r=>{try{f(!0),v(null),console.log(`📝 Creating ${t}:`,r);const s=await e.create(r);if(!C.current)return null;const n=await e.getOne(s.id);if(!C.current)return null;const a=i?i(n):n;return u(e=>[a,...e]),j(e=>({...e,total:e.total+1})),console.log(`✅ ${t} created with full data:`,a.id),a}catch(e){if(!C.current)return null;throw console.error(`❌ Error creating ${t}:`,e),v(e.message||`Failed to create ${t}`),e}finally{C.current&&f(!1)}},[e,t,i]),A=(0,o.useCallback)(async(r,s)=>{try{if(g(!0),v(null),console.log(`✏️ Updating ${t} ${r}:`,s),await e.update(r,s),!C.current)return null;const n=await e.getOne(r);if(!C.current)return null;const a=i?i(n):n;return u(e=>e.map(e=>e.id===r?a:e)),console.log(`✅ ${t} ${r} updated with full data`),a}catch(e){if(!C.current)return null;throw console.error(`❌ Error updating ${t} ${r}:`,e),v(e.message||`Failed to update ${t}`),e}finally{C.current&&g(!1)}},[e,t,i]),L=(0,o.useCallback)(async(r,s={})=>{try{if(x(!0),v(null),console.log(`🗑️ Deleting ${t} ${r}`),await e.delete(r,s),!C.current)return;u(e=>e.filter(e=>e.id!==r)),j(e=>({...e,total:Math.max(0,e.total-1)})),console.log(`✅ ${t} ${r} deleted`)}catch(e){if(!C.current)return;throw console.error(`❌ Error deleting ${t} ${r}:`,e),v(e.message||`Failed to delete ${t}`),e}finally{C.current&&x(!1)}},[e,t]),z=(0,o.useCallback)(async r=>{try{f(!0),v(null),console.log(`📋 Duplicating ${t} ${r}`);const s=c.find(e=>e.id===r);if(!s)throw new Error(`${t} not found`);let n;if(e.duplicate)n=await e.duplicate(r);else{const t={...s,title:`${s.title||"Untitled"} (Copy)`,status:"draft"};delete t.id,delete t.date,delete t.modified,n=await e.create(t)}if(!C.current)return null;const a=i?i(n):n;return u(e=>[a,...e]),j(e=>({...e,total:e.total+1})),console.log(`✅ ${t} ${r} duplicated:`,a.id),a}catch(e){if(!C.current)return null;throw console.error(`❌ Error duplicating ${t} ${r}:`,e),v(e.message||`Failed to duplicate ${t}`),e}finally{C.current&&f(!1)}},[e,t,c,i]),M=(0,o.useCallback)((e,t)=>{N(r=>({...r,[e]:t}))},[]),R=(0,o.useCallback)(()=>{N({search:"",...r})},[r]),I=(0,o.useCallback)(()=>{E.current="",O(!0)},[O]);(0,o.useEffect)(()=>{if(n||!S.current)return S.current=!1,k.current&&clearTimeout(k.current),k.current=setTimeout(()=>{O(!0)},s),()=>{k.current&&clearTimeout(k.current)};S.current=!1},[w,n,s,O]),(0,o.useEffect)(()=>{_.currentPage>1&&O(!1)},[_.currentPage]);const D=(0,o.useMemo)(()=>l&&"function"==typeof l?l(c):{total:c.length,published:c.filter(e=>"publish"===e.status).length,draft:c.filter(e=>"draft"===e.status).length,private:c.filter(e=>"private"===e.status).length},[c,l]);return{items:c,loading:d,creating:h,updating:m,deleting:y,error:b,pagination:_,computed:D,filters:w,updateFilter:M,resetFilters:R,setFilters:N,fetchItems:O,loadMore:T,createItem:P,updateItem:A,deleteItem:L,duplicateItem:z,refresh:I,hasMore:_.hasMore}},Cs=["publish","draft","private","pending","future","trash"],Es={true:["true","yes","1",1,!0],false:["false","no","0",0,!1,"",null,void 0]},Ss=(e,t="")=>null==e?t:String(e).trim(),qs=(e,t=0,r=0)=>{const s=parseInt(e);return isNaN(s)||s<r?t:s},Os=(e,t=1)=>{if(""===e||null==e)return null;const r=parseInt(e);return isNaN(r)||r<t?null:r},Ts=(e,t=!1)=>!!Es.true.includes(e)||!Es.false.includes(e)&&t,Ps=e=>((e,t=0,r=2,s=0)=>{const n=parseFloat(e);return isNaN(n)||n<s?t:Math.round(n*Math.pow(10,r))/Math.pow(10,r)})(e,0,2,0),As=e=>((e,t=2,r=.01)=>{if(""===e||null==e)return null;const s=parseFloat(e);return isNaN(s)||s<r?null:Math.round(s*Math.pow(10,t))/Math.pow(10,t)})(e,2,.01),Ls=e=>{if(!e||""===e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const t=new Date(e);if(!isNaN(t.getTime()))return e}const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]},zs=e=>Array.isArray(e)?e.map(e=>parseInt(e)).filter(e=>!isNaN(e)&&e>0):[],Ms=e=>{if(!e)return[];if(Array.isArray(e))return zs(e);const t=parseInt(e);return!isNaN(t)&&t>0?[t]:[]},Rs=(e,t="draft")=>{const r=Ss(e,t).toLowerCase();return Cs.includes(r)?r:t},Is=(e,t,r)=>{const s=Ss(e,r).toLowerCase();return t.includes(s)?s:r},Ds=e=>e?"object"==typeof e&&e.rendered?Ss(e.rendered):Ss(e):"",$s=(e,t)=>null==e||""===e?`${t} is required`:null,Fs=(e,t="en-US")=>{if(!e)return"";const r=new Date(e);return isNaN(r.getTime())?"":r.toLocaleDateString(t)},Us=e=>{const t=Ss(e);return t?t.charAt(0).toUpperCase()+t.slice(1):""},Bs=(e,t,r="...")=>{const s=Ss(e);return s.length<=t?s:s.substring(0,t)+r},Qs=e=>{const t=e._embedded?.["wp:featuredmedia"]?.[0];return t&&(t.source_url||t.media_details?.sizes?.medium?.source_url||t.media_details?.sizes?.thumbnail?.source_url)||""},Hs=(e=[])=>({isValid:0===e.length,errors:e}),Vs={_start_date:"",_end_date:"",_price:0,_sale_price:null,_duration_weeks:null,_max_students:null,_difficulty_level:"medium",_product_type:"free",_woocommerce_product_id:0,_lesson_ids:[],_lesson_count:0,_student_count:0,_instructor_id:null,_certificate_template:null,_course_requirements:"",_course_objectives:"",_target_audience:""},Ks=["publish","draft","private","pending"],Ws=["easy","medium","hard","beginner","intermediate","advanced"],Gs=["free","paid"],Ys=ds("course","courses",{sanitizer:e=>{if(!e)return console.warn("⚠️ sanitizeCourseData - No data provided"),null;const t=Ds(e.title),r=Ds(e.content),s=Ds(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:s,status:Rs(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,featured_media:e.featured_media||0,featured_media_url:Qs(e),qe_category:Ms(e.qe_category),qe_difficulty:Ms(e.qe_difficulty),qe_topic:Ms(e.qe_topic),course_type:Ms(e.course_type),meta:{...Vs,...e.meta},enrolled_users_count:e.enrolled_users_count||0,lessons_count:e.lessons_count||0,is_free:void 0===e.is_free||e.is_free,_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=$s(e.title,"Course title");r&&t.push(r),e.status&&!Ks.includes(e.status)&&t.push(`Invalid status. Must be one of: ${Ks.join(", ")}`),["qe_category","qe_difficulty","qe_topic","course_type"].forEach(r=>{void 0!==e[r]&&(Array.isArray(e[r])||t.push(`${r} must be an array`))});const s=e.meta||e;if(void 0!==s._price&&""!==s._price&&isNaN(parseFloat(s._price))&&t.push("Price must be a valid number"),void 0!==s._sale_price&&""!==s._sale_price&&null!==s._sale_price&&isNaN(parseFloat(s._sale_price))&&t.push("Sale price must be a valid number"),s._price&&s._sale_price&&parseFloat(s._sale_price)>=parseFloat(s._price)&&t.push("Sale price must be less than regular price"),void 0!==s._duration_weeks&&""!==s._duration_weeks&&null!==s._duration_weeks){const e=parseInt(s._duration_weeks);(isNaN(e)||e<=0)&&t.push("Duration must be a positive number")}if(void 0!==s._max_students&&""!==s._max_students&&null!==s._max_students){const e=parseInt(s._max_students);(isNaN(e)||e<=0)&&t.push("Max students must be a positive number")}if(s._difficulty_level&&!Ws.includes(s._difficulty_level)&&t.push(`Invalid difficulty level. Must be one of: ${Ws.join(", ")}`),s._product_type&&!Gs.includes(s._product_type)&&t.push(`Invalid product type. Must be one of: ${Gs.join(", ")}`),s._start_date&&s._end_date){const e=((e,t)=>{if(!e||!t)return null;const r=new Date(e),s=new Date(t);return isNaN(r.getTime())||isNaN(s.getTime())?"Invalid date format":r>=s?"End date must be after start date":null})(s._start_date,s._end_date);e&&t.push(e)}return Hs(t)},transformer:e=>{console.log("🔄 transformCourseDataForApi - Input:",e);const t={title:Ss(e.title),content:Ss(e.content||""),excerpt:Ss(e.excerpt||""),status:Rs(e.status,"publish")};return void 0!==e.featured_media&&(t.featured_media=Os(e.featured_media,1)),void 0!==e.qe_category&&(t.qe_category=Ms(e.qe_category)),void 0!==e.qe_difficulty&&(t.qe_difficulty=Ms(e.qe_difficulty)),void 0!==e.qe_topic&&(t.qe_topic=Ms(e.qe_topic)),void 0!==e.course_type&&(t.course_type=Ms(e.course_type)),t.meta={},void 0!==e._start_date?t.meta._start_date=Ls(e._start_date):void 0!==e.startDate?t.meta._start_date=Ls(e.startDate):void 0!==e.meta?._start_date&&(t.meta._start_date=Ls(e.meta._start_date)),void 0!==e._end_date?t.meta._end_date=Ls(e._end_date):void 0!==e.endDate?t.meta._end_date=Ls(e.endDate):void 0!==e.meta?._end_date&&(t.meta._end_date=Ls(e.meta._end_date)),void 0!==e._price?t.meta._price=Ps(e._price):void 0!==e.price?t.meta._price=Ps(e.price):void 0!==e.meta?._price&&(t.meta._price=Ps(e.meta._price)),void 0!==e._sale_price?t.meta._sale_price=As(e._sale_price):void 0!==e.salePrice?t.meta._sale_price=As(e.salePrice):void 0!==e.meta?._sale_price&&(t.meta._sale_price=As(e.meta._sale_price)),void 0!==e._duration_weeks?t.meta._duration_weeks=Os(e._duration_weeks,1):void 0!==e.durationWeeks?t.meta._duration_weeks=Os(e.durationWeeks,1):void 0!==e.meta?._duration_weeks&&(t.meta._duration_weeks=Os(e.meta._duration_weeks,1)),void 0!==e._max_students?t.meta._max_students=Os(e._max_students,1):void 0!==e.maxStudents?t.meta._max_students=Os(e.maxStudents,1):void 0!==e.meta?._max_students&&(t.meta._max_students=Os(e.meta._max_students,1)),void 0!==e._difficulty_level?t.meta._difficulty_level=Is(e._difficulty_level,Ws,"medium"):void 0!==e.difficulty?t.meta._difficulty_level=Is(e.difficulty,Ws,"medium"):void 0!==e.meta?._difficulty_level&&(t.meta._difficulty_level=Is(e.meta._difficulty_level,Ws,"medium")),void 0!==e._product_type?t.meta._product_type=Is(e._product_type,Gs,"free"):void 0!==e.productType?t.meta._product_type=Is(e.productType,Gs,"free"):void 0!==e.meta?._product_type&&(t.meta._product_type=Is(e.meta._product_type,Gs,"free")),void 0!==e._woocommerce_product_id?t.meta._woocommerce_product_id=qs(e._woocommerce_product_id,0,0):void 0!==e.woocommerceProductId?t.meta._woocommerce_product_id=qs(e.woocommerceProductId,0,0):void 0!==e.meta?._woocommerce_product_id&&(t.meta._woocommerce_product_id=qs(e.meta._woocommerce_product_id,0,0)),void 0!==e._lesson_ids?t.meta._lesson_ids=zs(e._lesson_ids):void 0!==e.lessonIds?t.meta._lesson_ids=zs(e.lessonIds):void 0!==e.meta?._lesson_ids&&(t.meta._lesson_ids=zs(e.meta._lesson_ids)),void 0!==e._instructor_id?t.meta._instructor_id=Os(e._instructor_id,1):void 0!==e.instructorId?t.meta._instructor_id=Os(e.instructorId,1):void 0!==e.meta?._instructor_id&&(t.meta._instructor_id=Os(e.meta._instructor_id,1)),void 0!==e._course_requirements?t.meta._course_requirements=Ss(e._course_requirements):void 0!==e.requirements?t.meta._course_requirements=Ss(e.requirements):void 0!==e.meta?._course_requirements&&(t.meta._course_requirements=Ss(e.meta._course_requirements)),void 0!==e._course_objectives?t.meta._course_objectives=Ss(e._course_objectives):void 0!==e.objectives?t.meta._course_objectives=Ss(e.objectives):void 0!==e.meta?._course_objectives&&(t.meta._course_objectives=Ss(e.meta._course_objectives)),void 0!==e._target_audience?t.meta._target_audience=Ss(e._target_audience):void 0!==e.targetAudience?t.meta._target_audience=Ss(e.targetAudience):void 0!==e.meta?._target_audience&&(t.meta._target_audience=Ss(e.meta._target_audience)),t.meta={...Vs,...t.meta},console.log("🔄 transformCourseDataForApi - Output:",t),t},buildParams:(e={})=>{const t=us(e);return e.category&&t.append("qe_category",e.category.toString()),t}}),Xs=async(e={})=>Ys.getAll(e),Js=async(e,t={})=>Ys.getOne(e,t),Zs=async e=>Ys.create(e),en=async(e,t)=>Ys.update(e,t),tn=async(e,t={})=>Ys.delete(e,t),rn=async e=>{try{const t=await Js(e);if(!t)throw new Error("Course not found");const r={title:`${t.title?.rendered||t.title||"Untitled"} (Copy)`,description:t.content?.rendered||t.content||"",excerpt:t.excerpt?.rendered||t.excerpt||"",status:"draft",price:t.meta?._course_price||"0",salePrice:t.meta?._sale_price||"",difficulty:t.meta?._course_difficulty||"intermediate",category:t.meta?._course_category||"general",duration:t.meta?._course_duration||0,maxStudents:t.meta?._max_students||0,featured:!1,startDate:"",endDate:""};console.log("📋 Duplicating course:",e);const s=await Zs(r);return console.log("✅ Course duplicated:",s.id),s}catch(t){throw console.error(`❌ Error duplicating course ${e}:`,t),t}},sn=Xs,nn=Js,an=Zs,on=en,ln=tn,cn=rn,un=async(e={})=>Ys.getCount(e),dn=async e=>{try{return!!await Js(e)}catch(e){return!1}},pn=async e=>{try{const t=await Js(e);return parseInt(t.meta?.enrolled_users_count||"0")}catch(t){return console.error(`❌ Error getting enrolled users for course ${e}:`,t),0}},hn=async(e,t)=>{if(!["publish","draft","private"].includes(t))throw new Error(`Invalid status: ${t}`);return en(e,{status:t})},fn=async e=>hn(e,"publish"),mn=async e=>hn(e,"draft"),gn=async(e,t)=>en(e,{featured:t}),yn=async(e,t={})=>Xs({...t,search:e}),xn=async(e,t={})=>Xs({...t,category:e}),bn=async(e,t={})=>Xs({...t,difficulty:e}),vn=async(e={})=>Xs({...e,featured:!0}),jn=async(e={})=>Xs({...e,status:"publish"}),wn=(t={})=>{const{search:r="",category:s=null,difficulty:n=null,status:a=null,autoFetch:i=!0,perPage:l=20}=t,c=(0,o.useMemo)(()=>e=>({...e,lesson_count:e.meta?._lesson_count||0,student_count:e.meta?._student_count||0,enrolled_users_count:e.meta?.enrolled_users_count||0,price:parseFloat(e.meta?._course_price||0),sale_price:parseFloat(e.meta?._sale_price||0),difficulty:e.meta?._course_difficulty||"intermediate",category:e.meta?._course_category||"general",completion_rate:parseInt(e.meta?._completion_rate||"0"),duration_hours:parseInt(e.meta?._course_duration||"0"),featured:"yes"===e.meta?._featured,on_sale:e.meta?._sale_price&&parseFloat(e.meta._sale_price)<parseFloat(e.meta._course_price||0),has_lessons:(e.meta?._lesson_count||0)>0,has_students:(e.meta?._student_count||0)>0}),[]),u=(0,o.useMemo)(()=>e=>{if(!Array.isArray(e)||0===e.length)return{totalCourses:0,publishedCourses:0,draftCourses:0,privateCourses:0,totalStudents:0,totalLessons:0,totalPrice:0,averagePrice:0,totalRevenue:0,averageDuration:0,averageCompletionRate:0,featuredCount:0,onSaleCount:0,freeCoursesCount:0,paidCoursesCount:0,byCategory:{},byDifficulty:{}};const t=e.length;let r=0,s=0,n=0,a=0,o=0,i=0,l=0,c=0,u=0,d=0,p=0,h=0,f=0,m=0;const g={},y={};return e.forEach(e=>{const t=e.meta||{},x=e.status||"draft",b=parseFloat(t._price||0),v=parseFloat(t._sale_price||0),_=parseInt(t._student_count||e.enrolled_users_count||0),j=parseInt(t._lesson_count||e.lessons_count||0),w=parseInt(t._course_duration||0),N=parseFloat(t._completion_rate||0),k="yes"===t._featured||!0===t._featured,C=t._product_type||"free";"publish"===x&&r++,"draft"===x&&s++,"private"===x&&n++,a+=_,o+=j,"paid"===C&&b>0?(i+=b,l++,m++,c+=(v>0&&v<b?v:b)*_,v>0&&v<b&&h++):"free"!==C&&0!==b||f++,w>0&&(u+=w),N>0&&(d+=N),k&&p++;const E=e.qe_category||[];Array.isArray(E)&&E.length>0?E.forEach(t=>{const r=e._embedded?.["wp:term"]?.[0]?.find(e=>e.id===t)?.name||"Uncategorized";g[r]=(g[r]||0)+1}):g.Uncategorized=(g.Uncategorized||0)+1;const S=t._course_difficulty||t._difficulty||"intermediate";y[S]=(y[S]||0)+1}),{totalCourses:t,publishedCourses:r,draftCourses:s,privateCourses:n,totalStudents:a,totalLessons:o,totalPrice:i,averagePrice:l>0?Math.round(i/l*100)/100:0,totalRevenue:Math.round(100*c)/100,averageDuration:t>0?Math.round(u/t):0,averageCompletionRate:t>0?Math.round(d/t):0,featuredCount:p,onSaleCount:h,freeCoursesCount:f,paidCoursesCount:m,byCategory:g,byDifficulty:y}},[]),{items:d,loading:p,creating:h,updating:f,deleting:m,error:g,pagination:y,computed:x,filters:b,updateFilter:v,resetFilters:_,setFilters:j,fetchItems:w,loadMore:N,createItem:k,updateItem:C,deleteItem:E,duplicateItem:S,refresh:q,hasMore:O}=ks({service:e,resourceName:"course",initialFilters:{search:r,category:s,difficulty:n,status:a||"publish,draft,private"},debounceMs:500,autoFetch:i,perPage:l,dataProcessor:c,computedValuesCalculator:u});return{courses:d,loading:p,creating:h,updating:f,deleting:m,error:g,pagination:y,computed:x,filters:b,updateFilter:v,resetFilters:_,setFilters:j,fetchCourses:w,loadMoreCourses:N,createCourse:k,updateCourse:C,deleteCourse:E,duplicateCourse:S,refresh:q,publishCourse:async e=>C(e,{status:"publish"}),unpublishCourse:async e=>C(e,{status:"draft"}),toggleFeatured:async(e,t)=>C(e,{featured:t}),updatePrice:async(e,t,r=null)=>C(e,{price:t,...null!==r&&{salePrice:r}}),hasMore:O}},Nn={_course_id:null,_lesson_order:1,_duration_minutes:0,_lesson_type:"text",_video_url:"",_content_type:"free",_prerequisite_lessons:[],_resources_urls:[],_completion_criteria:"view_all",_is_required:!1,_lesson_description:"",_lesson_steps:[],_has_quiz:!1,_quiz_id:null},kn=["publish","draft","private","pending"],Cn=["view_all","pass_quiz","complete_steps","view","quiz","assignment","time","manual"],En=e=>Array.isArray(e)?e.map((e,t)=>e&&"object"==typeof e?{type:Is(e.type,["video","text","pdf","quiz","image","audio"],"text"),order:qs(e.order,t+1,1),title:Ss(e.title),data:e.data&&"object"==typeof e.data?e.data:{}}:null).filter(e=>null!==e):[],Sn=ds("lesson","lessons",{sanitizer:e=>{if(!e)return console.warn("⚠️ sanitizeLessonData - No data provided"),null;const t=Ds(e.title),r=Ds(e.content),s=Ds(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:s,status:Rs(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,menu_order:qs(e.menu_order,1,0),meta:{...Nn,...e.meta,_is_required:Ts(e.meta?._is_required),_has_quiz:Ts(e.meta?._has_quiz),_prerequisite_lessons:zs(e.meta?._prerequisite_lessons),_lesson_steps:En(e.meta?._lesson_steps),_resources_urls:Array.isArray(e.meta?._resources_urls)?e.meta._resources_urls:[]},_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=$s(e.title,"Lesson title");r&&t.push(r),e.status&&!kn.includes(e.status)&&t.push(`Invalid status. Must be one of: ${kn.join(", ")}`);const s=e.meta||e,n=s._course_id||e.courseId;n?parseInt(n)<=0&&t.push("Course ID must be a positive number"):t.push("Course ID is required");const a=s._completion_criteria||e.completionCriteria;return a&&!Cn.includes(a)&&t.push(`Invalid completion criteria. Must be one of: ${Cn.join(", ")}`),Hs(t)},transformer:e=>{console.log("🔄 transformLessonDataForApi - Input:",e);const t={title:Ss(e.title),content:Ss(e.content||""),excerpt:Ss(e.description||""),status:Rs(e.status,"publish"),menu_order:qs(e.lessonOrder||1,1,0),meta:{}};return void 0!==e.courseId&&(t.meta._course_id=Os(e.courseId,1)),void 0!==e.lessonOrder&&(t.meta._lesson_order=qs(e.lessonOrder,1,0)),void 0!==e.completionCriteria&&(t.meta._completion_criteria=Is(e.completionCriteria,Cn,"view_all")),void 0!==e.description&&(t.meta._lesson_description=Ss(e.description)),void 0!==e.steps&&(t.meta._lesson_steps=En(e.steps)),t.meta={...Nn,...t.meta},console.log("🔄 transformLessonDataForApi - Output:",t),t},buildParams:(e={})=>{const{page:t=1,perPage:r=20,search:s="",courseId:n=null,lessonType:a=null,orderBy:o="menu_order",order:i="asc",embed:l=!0}=e,c=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:o,order:i});if(l&&c.append("_embed","true"),s&&s.trim()&&c.append("search",s.trim()),n){const e=parseInt(n,10);Number.isInteger(e)&&e>0&&c.append("course_id",e.toString())}return a&&(c.append("meta_query[1][key]","_lesson_type"),c.append("meta_query[1][value]",a),c.append("meta_query[1][compare]","=")),c}}),qn=async(e={})=>Sn.getAll(e),On=async(e,t={})=>{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid course ID provided");return console.log("🎓 Getting lessons for course:",e),qn({...t,courseId:e})},Tn=async(e,t={})=>Sn.getOne(e,t),Pn=async e=>Sn.create(e),An=async(e,t)=>Sn.update(e,t),Ln=async(e,t={})=>Sn.delete(e,t),zn=async e=>{try{const t=await Tn(e);if(!t)throw new Error("Lesson not found");const r={title:`${t.title?.rendered||t.title||"Untitled"} (Copy)`,content:t.content?.rendered||t.content||"",excerpt:t.excerpt?.rendered||t.excerpt||"",status:"draft",courseId:t.meta?._course_id,lessonOrder:parseInt(t.meta?._lesson_order||"0")+1,lessonType:t.meta?._lesson_type||"mixed",description:t.meta?._lesson_description||"",steps:t.meta?._lesson_steps||[],prerequisiteLessons:t.meta?._prerequisite_lessons||[],completionCriteria:t.meta?._completion_criteria||"view",isRequired:"yes"===t.meta?._is_required,duration:t.meta?._duration_minutes||0,videoUrl:t.meta?._video_url||"",hasQuiz:"yes"===t.meta?._has_quiz};console.log("📋 Duplicating lesson:",e);const s=await Pn(r);return console.log("✅ Lesson duplicated:",s.id),s}catch(t){throw console.error(`❌ Error duplicating lesson ${e}:`,t),t}},Mn=async(e={})=>Sn.getCount(e),Rn=async e=>{try{return!!await Tn(e)}catch(e){return!1}},In=async(e,t)=>{if(!["publish","draft","private"].includes(t))throw new Error(`Invalid status: ${t}`);return An(e,{status:t})},Dn=async e=>In(e,"publish"),$n=async e=>In(e,"draft"),Fn=async(e,t)=>An(e,{lessonOrder:t}),Un=async(e,t)=>An(e,{courseId:t}),Bn=async(e,t={})=>qn({...t,lessonType:e}),Qn=async(e={})=>qn({...e,status:"publish"}),Hn=async(e={})=>{try{const t=await qn({...e,perPage:100}),r={total:t.pagination.total,published:0,draft:0,byType:{},withQuizzes:0,totalDuration:0,averageDuration:0};return t.data.forEach(e=>{"publish"===e.status&&r.published++,"draft"===e.status&&r.draft++;const t=e.meta?._lesson_type||"mixed";r.byType[t]=(r.byType[t]||0)+1,"yes"===e.meta?._has_quiz&&r.withQuizzes++;const s=parseInt(e.meta?._duration_minutes||"0");r.totalDuration+=s}),r.averageDuration=t.data.length>0?Math.round(r.totalDuration/t.data.length):0,console.log("📊 Lesson statistics:",r),r}catch(e){throw console.error("❌ Error getting lesson statistics:",e),e}},Vn=qn,Kn=Tn,Wn=Pn,Gn=An,Yn=Ln,Xn=(e={})=>{const{search:r="",courseId:s=null,lessonType:n=null,status:a=null,autoFetch:i=!0,perPage:l=20}=e,c=(0,o.useMemo)(()=>e=>({...e,course_id:e.meta?._course_id||null,lesson_order:parseInt(e.meta?._lesson_order||"0"),lesson_type:e.meta?._lesson_type||"mixed",description:e.meta?._lesson_description||"",steps:e.meta?._lesson_steps||[],steps_count:Array.isArray(e.meta?._lesson_steps)?e.meta._lesson_steps.length:0,prerequisite_lessons:e.meta?._prerequisite_lessons||[],completion_criteria:e.meta?._completion_criteria||"view",is_required:"yes"===e.meta?._is_required,duration_minutes:parseInt(e.meta?._duration_minutes||"0"),video_url:e.meta?._video_url||"",has_quiz:"yes"===e.meta?._has_quiz,quiz_id:e.meta?._quiz_id||null,has_video:Boolean(e.meta?._video_url),has_steps:Array.isArray(e.meta?._lesson_steps)&&e.meta._lesson_steps.length>0,has_prerequisites:Array.isArray(e.meta?._prerequisite_lessons)&&e.meta._prerequisite_lessons.length>0}),[]),u=(0,o.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,published:0,draft:0,private:0,totalSteps:0,averageStepsPerLesson:0,totalDuration:0,averageDuration:0,byType:{},withQuizzes:0,withVideo:0,withPrerequisites:0,requiredLessons:0};let r=0,s=0;const n={};let a=0,o=0,i=0,l=0;return e.forEach(e=>{r+=e.steps_count||0,s+=e.duration_minutes||0;const t=e.lesson_type||"mixed";n[t]=(n[t]||0)+1,e.has_quiz&&a++,e.has_video&&o++,e.has_prerequisites&&i++,e.is_required&&l++}),{total:t,published:e.filter(e=>"publish"===e.status).length,draft:e.filter(e=>"draft"===e.status).length,private:e.filter(e=>"private"===e.status).length,totalSteps:r,averageStepsPerLesson:t>0?Math.round(r/t):0,totalDuration:s,averageDuration:t>0?Math.round(s/t):0,byType:n,withQuizzes:a,withVideo:o,withPrerequisites:i,requiredLessons:l}},[]),{items:d,loading:p,creating:h,updating:f,deleting:m,error:g,pagination:y,computed:x,filters:b,updateFilter:v,resetFilters:_,setFilters:j,fetchItems:w,loadMore:N,createItem:k,updateItem:C,deleteItem:E,duplicateItem:S,refresh:q,hasMore:O}=ks({service:t,resourceName:"lesson",initialFilters:{search:r,courseId:s,lessonType:n,status:a||"publish,draft,private"},dataProcessor:c,computedValuesCalculator:u,...e});return{lessons:d,loading:p,creating:h,updating:f,deleting:m,error:g,pagination:y,computed:x,filters:b,updateFilter:v,resetFilters:_,setFilters:j,fetchLessons:w,loadMoreLessons:N,createLesson:k,updateLesson:C,deleteLesson:E,duplicateLesson:S,refresh:q,publishLesson:async e=>C(e,{status:"publish"}),unpublishLesson:async e=>C(e,{status:"draft"}),updateLessonOrder:async(e,t)=>C(e,{lessonOrder:t}),moveLessonToCourse:async(e,t)=>C(e,{courseId:t}),updateLessonType:async(e,t)=>C(e,{lessonType:t}),addStepToLesson:async(e,t)=>{const r=d.find(t=>t.id===e);if(!r)throw new Error("Lesson not found");const s=r.steps||[];return C(e,{steps:[...s,t]})},removeStepFromLesson:async(e,t)=>{const r=d.find(t=>t.id===e);if(!r)throw new Error("Lesson not found");const s=r.steps||[];return C(e,{steps:s.filter((e,r)=>r!==t)})},hasMore:O}},Jn={_course_id:null,_quiz_type:"standard",_difficulty_level:"intermediate",_quiz_category:"",_passing_score:70,_time_limit:0,_max_attempts:0,_randomize_questions:!1,_show_results:!0,_enable_negative_scoring:!1,_quiz_question_ids:[],_lesson_ids:[],_total_points:0,_quiz_instructions:""},Zn=["standard","graded","practice","survey","assessment","certification"],ea=["easy","medium","hard","beginner","intermediate","advanced","expert"],ta=["publish","draft","private","pending"],ra=ds("quiz","quizzes",{sanitizer:e=>{if(!e)return console.warn("⚠️ sanitizeQuizData - No data provided"),null;const t=Ds(e.title),r=Ds(e.content),s=Ds(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:s,status:Rs(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,meta:{...Jn,...e.meta,_randomize_questions:Ts(e.meta?._randomize_questions),_show_results:Ts(e.meta?._show_results,!0),_enable_negative_scoring:Ts(e.meta?._enable_negative_scoring),_quiz_question_ids:zs(e.meta?._quiz_question_ids),_lesson_ids:zs(e.meta?._lesson_ids)},questions_count:e.questions_count||e.meta?._quiz_question_ids?.length||0,total_attempts:e.total_attempts||0,_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=$s(e.title,"Quiz title");r&&t.push(r),e.status&&!ta.includes(e.status)&&t.push(`Invalid status. Must be one of: ${ta.join(", ")}`);const s=e.meta||e,n=s._quiz_type||e.quizType;n&&!Zn.includes(n)&&t.push(`Invalid quiz type. Must be one of: ${Zn.join(", ")}`);const a=s._difficulty_level||e.difficulty;a&&!ea.includes(a)&&t.push(`Invalid difficulty level. Must be one of: ${ea.join(", ")}`);const o=s._passing_score||e.passingScore;if(void 0!==o){const e=((e,t,r,s)=>{const n=parseFloat(e);return isNaN(n)?`${s} must be a valid number`:n<0||n>100?`${s} must be between 0 and 100`:null})(o,0,0,"Passing score");e&&t.push(e)}const i=s._time_limit||e.timeLimit;if(void 0!==i){const e=parseInt(i);(isNaN(e)||e<0)&&t.push("Time limit must be a positive number or 0 (unlimited)")}const l=s._max_attempts||e.maxAttempts;if(void 0!==l){const e=parseInt(l);(isNaN(e)||e<0)&&t.push("Max attempts must be a positive number or 0 (unlimited)")}const c=s._quiz_question_ids||e.questionIds;return c&&!Array.isArray(c)&&t.push("Question IDs must be an array"),Hs(t)},transformer:e=>{console.log("🔄 transformQuizDataForApi - Input:",e);const t={title:Ss(e.title),content:Ss(e.content||e.instructions||""),status:Rs(e.status,"draft")};if(void 0!==e.qe_category)if(Array.isArray(e.qe_category))t.qe_category=e.qe_category.map(e=>parseInt(e,10)).filter(e=>!isNaN(e)&&e>0);else if(e.qe_category){const r=parseInt(e.qe_category,10);!isNaN(r)&&r>0&&(t.qe_category=[r])}return t.meta={},void 0!==e._course_id?t.meta._course_id=Os(e._course_id,1):void 0!==e.courseId?t.meta._course_id=Os(e.courseId,1):void 0!==e.meta?._course_id&&(t.meta._course_id=Os(e.meta._course_id,1)),void 0!==e._quiz_type?t.meta._quiz_type=Is(e._quiz_type,Zn,"standard"):void 0!==e.quizType?t.meta._quiz_type=Is(e.quizType,Zn,"standard"):void 0!==e.meta?._quiz_type&&(t.meta._quiz_type=Is(e.meta._quiz_type,Zn,"standard")),void 0!==e._difficulty_level?t.meta._difficulty_level=Is(e._difficulty_level,ea,"intermediate"):void 0!==e.difficulty?t.meta._difficulty_level=Is(e.difficulty,ea,"intermediate"):void 0!==e.meta?._difficulty_level&&(t.meta._difficulty_level=Is(e.meta._difficulty_level,ea,"intermediate")),void 0!==e._quiz_category?t.meta._quiz_category=Ss(e._quiz_category):void 0!==e.category?t.meta._quiz_category=Ss(e.category):void 0!==e.meta?._quiz_category&&(t.meta._quiz_category=Ss(e.meta._quiz_category)),void 0!==e._passing_score?(t.meta._passing_score=qs(e._passing_score,70,0),t.meta._passing_score=Math.min(t.meta._passing_score,100)):void 0!==e.passingScore?(t.meta._passing_score=qs(e.passingScore,70,0),t.meta._passing_score=Math.min(t.meta._passing_score,100)):void 0!==e.meta?._passing_score&&(t.meta._passing_score=qs(e.meta._passing_score,70,0),t.meta._passing_score=Math.min(t.meta._passing_score,100)),void 0!==e._time_limit?t.meta._time_limit=qs(e._time_limit,0,0):void 0!==e.timeLimit?t.meta._time_limit=qs(e.timeLimit,0,0):void 0!==e.meta?._time_limit&&(t.meta._time_limit=qs(e.meta._time_limit,0,0)),void 0!==e._max_attempts?t.meta._max_attempts=qs(e._max_attempts,0,0):void 0!==e.maxAttempts?t.meta._max_attempts=qs(e.maxAttempts,0,0):void 0!==e.meta?._max_attempts&&(t.meta._max_attempts=qs(e.meta._max_attempts,0,0)),void 0!==e._randomize_questions?t.meta._randomize_questions=Ts(e._randomize_questions):void 0!==e.randomizeQuestions?t.meta._randomize_questions=Ts(e.randomizeQuestions):void 0!==e.meta?._randomize_questions&&(t.meta._randomize_questions=Ts(e.meta._randomize_questions)),void 0!==e._show_results?t.meta._show_results=Ts(e._show_results,!0):void 0!==e.showResults?t.meta._show_results=Ts(e.showResults,!0):void 0!==e.meta?._show_results&&(t.meta._show_results=Ts(e.meta._show_results,!0)),void 0!==e._enable_negative_scoring?t.meta._enable_negative_scoring=Ts(e._enable_negative_scoring):void 0!==e.enableNegativeScoring?t.meta._enable_negative_scoring=Ts(e.enableNegativeScoring):void 0!==e.meta?._enable_negative_scoring&&(t.meta._enable_negative_scoring=Ts(e.meta._enable_negative_scoring)),void 0!==e._quiz_question_ids?t.meta._quiz_question_ids=zs(e._quiz_question_ids):void 0!==e.questionIds?t.meta._quiz_question_ids=zs(e.questionIds):void 0!==e.meta?._quiz_question_ids&&(t.meta._quiz_question_ids=zs(e.meta._quiz_question_ids)),void 0!==e._lesson_ids?t.meta._lesson_ids=zs(e._lesson_ids):void 0!==e.lessonIds?t.meta._lesson_ids=zs(e.lessonIds):void 0!==e.meta?._lesson_ids&&(t.meta._lesson_ids=zs(e.meta._lesson_ids)),void 0!==e._total_points?t.meta._total_points=qs(e._total_points,0,0):void 0!==e.totalPoints?t.meta._total_points=qs(e.totalPoints,0,0):void 0!==e.meta?._total_points&&(t.meta._total_points=qs(e.meta._total_points,0,0)),void 0!==e._quiz_instructions?t.meta._quiz_instructions=Ss(e._quiz_instructions):void 0!==e.instructions?t.meta._quiz_instructions=Ss(e.instructions):void 0!==e.meta?._quiz_instructions&&(t.meta._quiz_instructions=Ss(e.meta._quiz_instructions)),t.meta={...Jn,...t.meta},console.log("🔄 transformQuizDataForApi - Output:",t),console.log("📌 Category in transformed:",t.qe_category),t},buildParams:(e={})=>{const{page:t=1,perPage:r=20,search:s="",courseId:n=null,quizType:a=null,difficulty:o=null,category:i=null,orderBy:l="date",order:c="desc",embed:u=!0}=e,d=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:l,order:c});if(u&&d.append("_embed","true"),s&&s.trim()&&d.append("search",s.trim()),n){const e=parseInt(n,10);Number.isInteger(e)&&e>0&&d.append("course_id",e.toString())}return a&&(d.append("meta_query[1][key]","_quiz_type"),d.append("meta_query[1][value]",a),d.append("meta_query[1][compare]","=")),o&&(d.append("meta_query[2][key]","_difficulty_level"),d.append("meta_query[2][value]",o),d.append("meta_query[2][compare]","=")),i&&d.append("qe_category",i.toString()),d}}),sa=(e={})=>ra.getAll(e),na=e=>ra.getOne(e),aa=e=>ra.create(e),oa=(e,t)=>ra.update(e,t),ia=e=>ra.delete(e),la=e=>ra.duplicate(e),ca=(e,t={})=>sa({...t,courseId:e}),ua=async e=>{try{const t=await na(e);return{totalQuestions:t.meta?._quiz_question_ids?.length||0,totalPoints:t.meta?._total_points||0,passingScore:t.meta?._passing_score||70,timeLimit:t.meta?._time_limit||0,maxAttempts:t.meta?._max_attempts||0,totalAttempts:t.total_attempts||0,averageScore:t.average_score||0}}catch(e){throw console.error("Error fetching quiz stats:",e),e}},da=async(e,t)=>{try{const r=await na(e),s=r.meta?._quiz_question_ids||[];return s.includes(t)?(console.warn("Question already exists in quiz"),r):oa(e,{questionIds:[...s,t]})}catch(e){throw console.error("Error adding question to quiz:",e),e}},pa=async(e,t)=>{try{const r=await na(e),s=r.meta?._quiz_question_ids||[];return oa(e,{questionIds:s.filter(e=>e!==t)})}catch(e){throw console.error("Error removing question from quiz:",e),e}},ha=(e,t)=>oa(e,{questionIds:t}),fa=sa,ma=na,ga=aa,ya=oa,xa=ia,ba=la,va=(e={})=>{const{search:t="",courseId:r=null,quizType:n=null,difficulty:a=null,category:i=null,status:l=null,autoFetch:c=!0,perPage:u=20}=e,d=(0,o.useMemo)(()=>e=>({...e,course_id:e.meta?._course_id||null,quiz_type:e.meta?._quiz_type||"standard",difficulty:e.meta?._difficulty_level||"intermediate",category:e.meta?._quiz_category||"",passing_score:parseInt(e.meta?._passing_score||"70"),time_limit:parseInt(e.meta?._time_limit||"0"),max_attempts:parseInt(e.meta?._max_attempts||"0"),randomize_questions:"yes"===e.meta?._randomize_questions,show_results:"yes"===e.meta?._show_results,enable_negative_scoring:"yes"===e.meta?._enable_negative_scoring,question_ids:e.meta?._quiz_question_ids||[],question_count:Array.isArray(e.meta?._quiz_question_ids)?e.meta._quiz_question_ids.length:0,total_points:parseInt(e.meta?._total_points||"0"),instructions:e.meta?._quiz_instructions||"",has_time_limit:parseInt(e.meta?._time_limit||"0")>0,has_attempt_limit:parseInt(e.meta?._max_attempts||"0")>0,has_questions:Array.isArray(e.meta?._quiz_question_ids)&&e.meta._quiz_question_ids.length>0,is_randomized:"yes"===e.meta?._randomize_questions}),[]),p=(0,o.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,published:0,draft:0,private:0,totalQuestions:0,averageQuestions:0,totalPoints:0,averagePoints:0,byType:{},byDifficulty:{},withTimeLimit:0,withAttemptLimit:0,randomized:0};let r=0,s=0;const n={},a={};let o=0,i=0,l=0;return e.forEach(e=>{r+=e.question_count||0,s+=e.total_points||0;const t=e.quiz_type||"standard";n[t]=(n[t]||0)+1;const c=e.difficulty||"intermediate";a[c]=(a[c]||0)+1,e.has_time_limit&&o++,e.has_attempt_limit&&i++,e.is_randomized&&l++}),{total:t,published:e.filter(e=>"publish"===e.status).length,draft:e.filter(e=>"draft"===e.status).length,private:e.filter(e=>"private"===e.status).length,totalQuestions:r,averageQuestions:t>0?Math.round(r/t):0,totalPoints:s,averagePoints:t>0?Math.round(s/t):0,byType:n,byDifficulty:a,withTimeLimit:o,withAttemptLimit:i,randomized:l}},[]),{items:h,loading:f,creating:m,updating:g,deleting:y,error:x,pagination:b,computed:v,filters:_,updateFilter:j,resetFilters:w,setFilters:N,fetchItems:k,loadMore:C,createItem:E,updateItem:S,deleteItem:q,duplicateItem:O,refresh:T,hasMore:P}=ks({service:s,resourceName:"quiz",initialFilters:{search:t,courseId:r,quizType:n,difficulty:a,category:i,status:l||"publish,draft,private"},debounceMs:500,autoFetch:c,perPage:u,dataProcessor:d,computedValuesCalculator:p});return{quizzes:h,loading:f,creating:m,updating:g,deleting:y,error:x,pagination:b,computed:v,filters:_,updateFilter:j,resetFilters:w,setFilters:N,fetchQuizzes:k,loadMoreQuizzes:C,createQuiz:E,updateQuiz:S,deleteQuiz:q,duplicateQuiz:O,refresh:T,publishQuiz:async e=>S(e,{status:"publish"}),unpublishQuiz:async e=>S(e,{status:"draft"}),addQuestionToQuiz:async(e,t)=>{const r=h.find(t=>t.id===e);if(!r)throw new Error("Quiz not found");const s=r.question_ids||[];return s.includes(t)?(console.log("⚠️ Question already in quiz"),r):S(e,{questionIds:[...s,t]})},removeQuestionFromQuiz:async(e,t)=>{const r=h.find(t=>t.id===e);if(!r)throw new Error("Quiz not found");const s=r.question_ids||[];return S(e,{questionIds:s.filter(e=>e!==t)})},updateQuizSettings:async(e,t)=>{const r=["passingScore","timeLimit","maxAttempts","randomizeQuestions","showResults","enableNegativeScoring"],s={};return Object.keys(t).forEach(e=>{r.includes(e)&&(s[e]=t[e])}),S(e,s)},reorderQuestions:async(e,t)=>S(e,{questionIds:t}),hasMore:P}},_a=va,ja=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.api_url)throw new Error("API URL not configured in WordPress");return e},wa=async(e,t={})=>{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":ja().nonce},credentials:"same-origin",...t},s=await fetch(e,r);if(!s.ok){const e=await s.text();throw new Error(`API Error ${s.status}: ${s.statusText} - ${e}`)}return s},Na=async(e,t)=>{try{const r=`${ja().api_url}/wp/v2/${e}`;console.log(`➕ Creating ${e} term:`,t.name);const s=await wa(r,{method:"POST",body:JSON.stringify(t)}),n=await s.json();return console.log(`✅ Created ${e} term:`,n.name,`(ID: ${n.id})`),n}catch(t){throw console.error(`❌ Error creating ${e} term:`,t),t}},ka=(e=[])=>{const{t}=N(),[r,s]=(0,o.useState)({}),[n,a]=(0,o.useState)(!0),[i,l]=(0,o.useState)(null);return(0,o.useEffect)(()=>{0!==e.length?(async()=>{try{a(!0),l(null);const r=e.map(e=>(async(e,t={})=>{try{const r=ja(),{perPage:s=100,search:n="",hideEmpty:a=!1}=t,o=new URLSearchParams({per_page:s.toString(),hide_empty:a.toString(),_fields:"id,name,slug,description,count,parent"});n&&o.append("search",n);const i=`${r.api_url}/wp/v2/${e}?${o}`;console.log(`🔍 Fetching ${e} terms:`,i);const l=await wa(i),c=await l.json();return console.log(`✅ Fetched ${c.length} ${e} terms`),c}catch(t){throw console.error(`❌ Error fetching ${e} terms:`,t),t}})(e,{hideEmpty:!1})),n=await Promise.all(r),o={};e.forEach((e,r)=>{const s=n[r]||[];o[e]=[{value:"all",label:t("courses.category.all")},...s.map(e=>({value:e.id,label:e.name}))]}),s(o)}catch(e){console.error("Failed to fetch taxonomy options:",e),l(e)}finally{a(!1)}})():a(!1)},[JSON.stringify(e),t]),{options:r,isLoading:n,error:i}},Ca=({title:e,itemCount:t,createButtonText:r,onCreate:s,isCreating:n,children:a,filters:o})=>{const{t:i}=N();return(0,Br.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full",children:[(0,Br.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Br.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[e," (",t,")"]}),(0,Br.jsx)("button",{onClick:s,disabled:n,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-blue-700 transition-colors text-sm disabled:opacity-50",children:n?i("common.creating"):r})]}),o]}),(0,Br.jsx)("div",{className:"flex-1 overflow-y-auto",children:a})]})},Ea=rs("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Sa=rs("sliders-horizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),qa=({searchConfig:e,filtersConfig:t=[]})=>{const{t:r}=N(),[s,n]=(0,o.useState)(!1),a=(0,o.useRef)(null);return(0,o.useEffect)(()=>{const e=e=>{a.current&&!a.current.contains(e.target)&&n(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,Br.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,Br.jsxs)("div",{className:"relative flex-grow",children:[(0,Br.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,Br.jsx)(Ea,{className:"w-5 h-5 text-gray-400"})}),(0,Br.jsx)("input",{type:"text",value:e.value,onChange:e.onChange,placeholder:e.placeholder||r("common.search"),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),e.isLoading&&(0,Br.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,Br.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-900"})})]}),(0,Br.jsxs)("div",{className:"relative",ref:a,children:[(0,Br.jsxs)("button",{onClick:()=>n(!s),className:"w-full md:w-auto px-4 py-2 border border-gray-300 bg-white rounded-lg hover:bg-gray-50 text-gray-600 font-medium text-sm flex items-center justify-center gap-2",children:[(0,Br.jsx)(Sa,{className:"w-4 h-4"}),r("common.filters")]}),s&&(0,Br.jsx)("div",{className:"absolute top-full right-0 mt-2 w-72 bg-white border border-gray-200 rounded-lg shadow-xl z-10",children:(0,Br.jsxs)("div",{className:"p-4 space-y-4",children:[(0,Br.jsx)("h4",{className:"font-semibold text-gray-800",children:r("common.filterBy")}),t.filter(e=>e&&void 0!==e.value&&e.options).map((e,t)=>(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.label||`Filter ${t+1}`}),(0,Br.jsx)("select",{value:e.value,onChange:t=>e.onChange(t.target.value),disabled:e.isLoading,className:"w-full px-3 py-2 border border-gray-300 bg-white rounded-lg text-gray-800 text-sm focus:ring-blue-500 focus:border-blue-500",children:(e.options||[]).map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))})]},t))]})})]})]})},Oa=rs("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]),Ta=e=>e?.title?.rendered||e?.title||"Curso sin título",Pa=({course:e,isSelected:t,onClick:r})=>{const s=sr("p-4 cursor-pointer border-l-4 transition-colors duration-150",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t});return(0,Br.jsxs)("div",{className:s,onClick:()=>r(e),children:[(0,Br.jsx)("h3",{className:"font-semibold text-gray-800 truncate",children:Ta(e)}),(0,Br.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Br.jsx)(Oa,{className:"w-3 h-3"}),(0,Br.jsxs)("span",{children:[e.lesson_count||0," Lecciones"]})]}),(0,Br.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Br.jsx)(gs,{className:"w-3 h-3"}),(0,Br.jsxs)("span",{children:[e.student_count||0," Estudiantes"]})]})]})]})},Aa=rs("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),La=rs("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),za=rs("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),Ma=rs("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var Ra=r(5708),Ia=r.n(Ra),Da=r(5795);const $a="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function Fa(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function Ua(e){return"nodeType"in e}function Ba(e){var t,r;return e?Fa(e)?e:Ua(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function Qa(e){const{Document:t}=Ba(e);return e instanceof t}function Ha(e){return!Fa(e)&&e instanceof Ba(e).HTMLElement}function Va(e){return e instanceof Ba(e).SVGElement}function Ka(e){return e?Fa(e)?e.document:Ua(e)?Qa(e)?e:Ha(e)||Va(e)?e.ownerDocument:document:document:document}const Wa=$a?o.useLayoutEffect:o.useEffect;function Ga(e){const t=(0,o.useRef)(e);return Wa(()=>{t.current=e}),(0,o.useCallback)(function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return null==t.current?void 0:t.current(...r)},[])}function Ya(e,t){void 0===t&&(t=[e]);const r=(0,o.useRef)(e);return Wa(()=>{r.current!==e&&(r.current=e)},t),r}function Xa(e,t){const r=(0,o.useRef)();return(0,o.useMemo)(()=>{const t=e(r.current);return r.current=t,t},[...t])}function Ja(e){const t=Ga(e),r=(0,o.useRef)(null),s=(0,o.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,s]}function Za(e){const t=(0,o.useRef)();return(0,o.useEffect)(()=>{t.current=e},[e]),t.current}let eo={};function to(e,t){return(0,o.useMemo)(()=>{if(t)return t;const r=null==eo[e]?0:eo[e]+1;return eo[e]=r,e+"-"+r},[e,t])}function ro(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];return s.reduce((t,r)=>{const s=Object.entries(r);for(const[r,n]of s){const s=t[r];null!=s&&(t[r]=s+e*n)}return t},{...t})}}const so=ro(1),no=ro(-1);function ao(e){if(!e)return!1;const{KeyboardEvent:t}=Ba(e.target);return t&&e instanceof t}function oo(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=Ba(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const io=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[io.Translate.toString(e),io.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:s}=e;return t+" "+r+"ms "+s}}}),lo="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function co(e){return e.matches(lo)?e:e.querySelector(lo)}const uo={display:"none"};function po(e){let{id:t,value:r}=e;return i().createElement("div",{id:t,style:uo},r)}function ho(e){let{id:t,announcement:r,ariaLiveType:s="assertive"}=e;return i().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":s,"aria-atomic":!0},r)}const fo=(0,o.createContext)(null),mo={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},go={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function yo(e){let{announcements:t=go,container:r,hiddenTextDescribedById:s,screenReaderInstructions:n=mo}=e;const{announce:a,announcement:l}=function(){const[e,t]=(0,o.useState)("");return{announce:(0,o.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),c=to("DndLiveRegion"),[u,d]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{d(!0)},[]),function(e){const t=(0,o.useContext)(fo);(0,o.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,o.useMemo)(()=>({onDragStart(e){let{active:r}=e;a(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:s}=e;t.onDragMove&&a(t.onDragMove({active:r,over:s}))},onDragOver(e){let{active:r,over:s}=e;a(t.onDragOver({active:r,over:s}))},onDragEnd(e){let{active:r,over:s}=e;a(t.onDragEnd({active:r,over:s}))},onDragCancel(e){let{active:r,over:s}=e;a(t.onDragCancel({active:r,over:s}))}}),[a,t])),!u)return null;const p=i().createElement(i().Fragment,null,i().createElement(po,{id:s,value:n.draggable}),i().createElement(ho,{id:c,announcement:l}));return r?(0,Da.createPortal)(p,r):p}var xo,bo;function vo(){}function _o(e,t){return(0,o.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function jo(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(bo=xo||(xo={})).DragStart="dragStart",bo.DragMove="dragMove",bo.DragEnd="dragEnd",bo.DragCancel="dragCancel",bo.DragOver="dragOver",bo.RegisterDroppable="registerDroppable",bo.SetDroppableDisabled="setDroppableDisabled",bo.UnregisterDroppable="unregisterDroppable";const wo=Object.freeze({x:0,y:0});function No(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ko(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return r-s}function Co(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return s-r}function Eo(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}const So=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const n=Eo(t,t.left,t.top),a=[];for(const e of s){const{id:t}=e,s=r.get(t);if(s){const r=No(Eo(s),n);a.push({id:t,data:{droppableContainer:e,value:r}})}}return a.sort(ko)};function qo(e,t){const r=Math.max(t.top,e.top),s=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=n-s,i=a-r;if(s<n&&r<a){const r=t.width*t.height,s=e.width*e.height,n=o*i;return Number((n/(r+s-n)).toFixed(4))}return 0}const Oo=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const n=[];for(const e of s){const{id:s}=e,a=r.get(s);if(a){const r=qo(a,t);r>0&&n.push({id:s,data:{droppableContainer:e,value:r}})}}return n.sort(Co)};function To(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:wo}function Po(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];return s.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}const Ao=Po(1);const Lo={ignoreTransform:!1};function zo(e,t){void 0===t&&(t=Lo);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:s}=Ba(e).getComputedStyle(e);t&&(r=function(e,t,r){const s=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!s)return e;const{scaleX:n,scaleY:a,x:o,y:i}=s,l=e.left-o-(1-n)*parseFloat(r),c=e.top-i-(1-a)*parseFloat(r.slice(r.indexOf(" ")+1)),u=n?e.width/n:e.width,d=a?e.height/a:e.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}(r,t,s))}const{top:s,left:n,width:a,height:o,bottom:i,right:l}=r;return{top:s,left:n,width:a,height:o,bottom:i,right:l}}function Mo(e){return zo(e,{ignoreTransform:!0})}function Ro(e,t){const r=[];return e?function s(n){if(null!=t&&r.length>=t)return r;if(!n)return r;if(Qa(n)&&null!=n.scrollingElement&&!r.includes(n.scrollingElement))return r.push(n.scrollingElement),r;if(!Ha(n)||Va(n))return r;if(r.includes(n))return r;const a=Ba(e).getComputedStyle(n);return n!==e&&function(e,t){void 0===t&&(t=Ba(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const s=t[e];return"string"==typeof s&&r.test(s)})}(n,a)&&r.push(n),function(e,t){return void 0===t&&(t=Ba(e).getComputedStyle(e)),"fixed"===t.position}(n,a)?r:s(n.parentNode)}(e):r}function Io(e){const[t]=Ro(e,1);return null!=t?t:null}function Do(e){return $a&&e?Fa(e)?e:Ua(e)?Qa(e)||e===Ka(e).scrollingElement?window:Ha(e)?e:null:null:null}function $o(e){return Fa(e)?e.scrollX:e.scrollLeft}function Fo(e){return Fa(e)?e.scrollY:e.scrollTop}function Uo(e){return{x:$o(e),y:Fo(e)}}var Bo;function Qo(e){return!(!$a||!e)&&e===document.scrollingElement}function Ho(e){const t={x:0,y:0},r=Qo(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=s.y,isRight:e.scrollLeft>=s.x,maxScroll:s,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Bo||(Bo={}));const Vo={x:.2,y:.2};function Ko(e,t,r,s,n){let{top:a,left:o,right:i,bottom:l}=r;void 0===s&&(s=10),void 0===n&&(n=Vo);const{isTop:c,isBottom:u,isLeft:d,isRight:p}=Ho(e),h={x:0,y:0},f={x:0,y:0},m=t.height*n.y,g=t.width*n.x;return!c&&a<=t.top+m?(h.y=Bo.Backward,f.y=s*Math.abs((t.top+m-a)/m)):!u&&l>=t.bottom-m&&(h.y=Bo.Forward,f.y=s*Math.abs((t.bottom-m-l)/m)),!p&&i>=t.right-g?(h.x=Bo.Forward,f.x=s*Math.abs((t.right-g-i)/g)):!d&&o<=t.left+g&&(h.x=Bo.Backward,f.x=s*Math.abs((t.left+g-o)/g)),{direction:h,speed:f}}function Wo(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:r,right:s,bottom:n}=e.getBoundingClientRect();return{top:t,left:r,right:s,bottom:n,width:e.clientWidth,height:e.clientHeight}}function Go(e){return e.reduce((e,t)=>so(e,Uo(t)),wo)}const Yo=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+$o(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+Fo(t),0)}]];class Xo{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ro(t),s=Go(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,n]of Yo)for(const a of t)Object.defineProperty(this,a,{get:()=>{const t=n(r),o=s[e]-t;return this.rect[a]+o},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var s;null==(s=this.target)||s.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function Zo(e,t){const r=Math.abs(e.x),s=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+s**2)>t:"x"in t&&"y"in t?r>t.x&&s>t.y:"x"in t?r>t.x:"y"in t&&s>t.y}var ei,ti,ri;function si(e){e.preventDefault()}function ni(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(ei||(ei={})),(ri=ti||(ti={})).Space="Space",ri.Down="ArrowDown",ri.Right="ArrowRight",ri.Left="ArrowLeft",ri.Up="ArrowUp",ri.Esc="Escape",ri.Enter="Enter",ri.Tab="Tab";const ai={start:[ti.Space,ti.Enter],cancel:[ti.Esc],end:[ti.Space,ti.Enter,ti.Tab]},oi=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case ti.Right:return{...r,x:r.x+25};case ti.Left:return{...r,x:r.x-25};case ti.Down:return{...r,y:r.y+25};case ti.Up:return{...r,y:r.y-25}}};class ii{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Jo(Ka(t)),this.windowListeners=new Jo(Ba(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ei.Resize,this.handleCancel),this.windowListeners.add(ei.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ei.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&function(e,t){if(void 0===t&&(t=zo),!e)return;const{top:r,left:s,bottom:n,right:a}=t(e);Io(e)&&(n<=0||a<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(r),t(wo)}handleKeyDown(e){if(ao(e)){const{active:t,context:r,options:s}=this.props,{keyboardCodes:n=ai,coordinateGetter:a=oi,scrollBehavior:o="smooth"}=s,{code:i}=e;if(n.end.includes(i))return void this.handleEnd(e);if(n.cancel.includes(i))return void this.handleCancel(e);const{collisionRect:l}=r.current,c=l?{x:l.left,y:l.top}:wo;this.referenceCoordinates||(this.referenceCoordinates=c);const u=a(e,{active:t,context:r.current,currentCoordinates:c});if(u){const t=no(u,c),s={x:0,y:0},{scrollableAncestors:n}=r.current;for(const r of n){const n=e.code,{isTop:a,isRight:i,isLeft:l,isBottom:c,maxScroll:d,minScroll:p}=Ho(r),h=Wo(r),f={x:Math.min(n===ti.Right?h.right-h.width/2:h.right,Math.max(n===ti.Right?h.left:h.left+h.width/2,u.x)),y:Math.min(n===ti.Down?h.bottom-h.height/2:h.bottom,Math.max(n===ti.Down?h.top:h.top+h.height/2,u.y))},m=n===ti.Right&&!i||n===ti.Left&&!l,g=n===ti.Down&&!c||n===ti.Up&&!a;if(m&&f.x!==u.x){const e=r.scrollLeft+t.x,a=n===ti.Right&&e<=d.x||n===ti.Left&&e>=p.x;if(a&&!t.y)return void r.scrollTo({left:e,behavior:o});s.x=a?r.scrollLeft-e:n===ti.Right?r.scrollLeft-d.x:r.scrollLeft-p.x,s.x&&r.scrollBy({left:-s.x,behavior:o});break}if(g&&f.y!==u.y){const e=r.scrollTop+t.y,a=n===ti.Down&&e<=d.y||n===ti.Up&&e>=p.y;if(a&&!t.x)return void r.scrollTo({top:e,behavior:o});s.y=a?r.scrollTop-e:n===ti.Down?r.scrollTop-d.y:r.scrollTop-p.y,s.y&&r.scrollBy({top:-s.y,behavior:o});break}}this.handleMove(e,so(no(u,this.referenceCoordinates),s))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function li(e){return Boolean(e&&"distance"in e)}function ci(e){return Boolean(e&&"delay"in e)}ii.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:s=ai,onActivation:n}=t,{active:a}=r;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const t=a.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==n||n({event:e.nativeEvent}),0))}return!1}}];class ui{constructor(e,t,r){var s;void 0===r&&(r=function(e){const{EventTarget:t}=Ba(e);return e instanceof t?e:Ka(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:n}=e,{target:a}=n;this.props=e,this.events=t,this.document=Ka(a),this.documentListeners=new Jo(this.document),this.listeners=new Jo(r),this.windowListeners=new Jo(Ba(a)),this.initialCoordinates=null!=(s=oo(n))?s:wo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ei.Resize,this.handleCancel),this.windowListeners.add(ei.DragStart,si),this.windowListeners.add(ei.VisibilityChange,this.handleCancel),this.windowListeners.add(ei.ContextMenu,si),this.documentListeners.add(ei.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ci(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(li(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(ei.Click,ni,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ei.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:s,props:n}=this,{onMove:a,options:{activationConstraint:o}}=n;if(!s)return;const i=null!=(t=oo(e))?t:wo,l=no(s,i);if(!r&&o){if(li(o)){if(null!=o.tolerance&&Zo(l,o.tolerance))return this.handleCancel();if(Zo(l,o.distance))return this.handleStart()}return ci(o)&&Zo(l,o.tolerance)?this.handleCancel():void this.handlePending(o,l)}e.cancelable&&e.preventDefault(),a(i)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ti.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const di={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class pi extends ui{constructor(e){const{event:t}=e,r=Ka(t.target);super(e,di,r)}}pi.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return!(!r.isPrimary||0!==r.button||(null==s||s({event:r}),0))}}];const hi={move:{name:"mousemove"},end:{name:"mouseup"}};var fi;!function(e){e[e.RightClick=2]="RightClick"}(fi||(fi={})),class extends ui{constructor(e){super(e,hi,Ka(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return r.button!==fi.RightClick&&(null==s||s({event:r}),!0)}}];const mi={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var gi,yi;(class extends ui{constructor(e){super(e,mi)}static setup(){return window.addEventListener(mi.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(mi.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;const{touches:n}=r;return!(n.length>1||(null==s||s({event:r}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(gi||(gi={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(yi||(yi={}));const xi={x:{[Bo.Backward]:!1,[Bo.Forward]:!1},y:{[Bo.Backward]:!1,[Bo.Forward]:!1}};var bi,vi;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(bi||(bi={})),function(e){e.Optimized="optimized"}(vi||(vi={}));const _i=new Map;function ji(e,t){return Xa(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function wi(e){let{callback:t,disabled:r}=e;const s=Ga(t),n=(0,o.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(s)},[r]);return(0,o.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}function Ni(e){return new Xo(zo(e),e)}function ki(e,t,r){void 0===t&&(t=Ni);const[s,n]=(0,o.useState)(null);function a(){n(s=>{if(!e)return null;var n;if(!1===e.isConnected)return null!=(n=null!=s?s:r)?n:null;const a=t(e);return JSON.stringify(s)===JSON.stringify(a)?s:a})}const i=function(e){let{callback:t,disabled:r}=e;const s=Ga(t),n=(0,o.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(s)},[s,r]);return(0,o.useEffect)(()=>()=>null==n?void 0:n.disconnect(),[n]),n}({callback(t){if(e)for(const r of t){const{type:t,target:s}=r;if("childList"===t&&s instanceof HTMLElement&&s.contains(e)){a();break}}}}),l=wi({callback:a});return Wa(()=>{a(),e?(null==l||l.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==i||i.disconnect())},[e]),s}const Ci=[];function Ei(e,t){void 0===t&&(t=[]);const r=(0,o.useRef)(null);return(0,o.useEffect)(()=>{r.current=null},t),(0,o.useEffect)(()=>{const t=e!==wo;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?no(e,r.current):wo}function Si(e){return(0,o.useMemo)(()=>e?function(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}const qi=[];const Oi=[{sensor:pi,options:{}},{sensor:ii,options:{}}],Ti={current:{}},Pi={draggable:{measure:Mo},droppable:{measure:Mo,strategy:bi.WhileDragging,frequency:vi.Optimized},dragOverlay:{measure:zo}};class Ai extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}const Li={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ai,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:vo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Pi,measureDroppableContainers:vo,windowRect:null,measuringScheduled:!1},zi={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:vo,draggableNodes:new Map,over:null,measureDroppableContainers:vo},Mi=(0,o.createContext)(zi),Ri=(0,o.createContext)(Li);function Ii(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ai}}}function Di(e,t){switch(t.type){case xo.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case xo.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case xo.DragEnd:case xo.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xo.RegisterDroppable:{const{element:r}=t,{id:s}=r,n=new Ai(e.droppable.containers);return n.set(s,r),{...e,droppable:{...e.droppable,containers:n}}}case xo.SetDroppableDisabled:{const{id:r,key:s,disabled:n}=t,a=e.droppable.containers.get(r);if(!a||s!==a.key)return e;const o=new Ai(e.droppable.containers);return o.set(r,{...a,disabled:n}),{...e,droppable:{...e.droppable,containers:o}}}case xo.UnregisterDroppable:{const{id:r,key:s}=t,n=e.droppable.containers.get(r);if(!n||s!==n.key)return e;const a=new Ai(e.droppable.containers);return a.delete(r),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function $i(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:n}=(0,o.useContext)(Mi),a=Za(s),i=Za(null==r?void 0:r.id);return(0,o.useEffect)(()=>{if(!t&&!s&&a&&null!=i){if(!ao(a))return;if(document.activeElement===a.target)return;const e=n.get(i);if(!e)return;const{activatorNode:t,node:r}=e;if(!t.current&&!r.current)return;requestAnimationFrame(()=>{for(const e of[t.current,r.current]){if(!e)continue;const t=co(e);if(t){t.focus();break}}})}},[s,t,n,i,a]),null}const Fi=(0,o.createContext)({...wo,scaleX:1,scaleY:1});var Ui;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Ui||(Ui={}));const Bi=(0,o.memo)(function(e){var t,r,s,n;let{id:a,accessibility:l,autoScroll:c=!0,children:u,sensors:d=Oi,collisionDetection:p=Oo,measuring:h,modifiers:f,...m}=e;const g=(0,o.useReducer)(Di,void 0,Ii),[y,x]=g,[b,v]=function(){const[e]=(0,o.useState)(()=>new Set),t=(0,o.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,o.useCallback)(t=>{let{type:r,event:s}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,s)})},[e]),t]}(),[_,j]=(0,o.useState)(Ui.Uninitialized),w=_===Ui.Initialized,{draggable:{active:N,nodes:k,translate:C},droppable:{containers:E}}=y,S=null!=N?k.get(N):null,q=(0,o.useRef)({initial:null,translated:null}),O=(0,o.useMemo)(()=>{var e;return null!=N?{id:N,data:null!=(e=null==S?void 0:S.data)?e:Ti,rect:q}:null},[N,S]),T=(0,o.useRef)(null),[P,A]=(0,o.useState)(null),[L,z]=(0,o.useState)(null),M=Ya(m,Object.values(m)),R=to("DndDescribedBy",a),I=(0,o.useMemo)(()=>E.getEnabled(),[E]),D=function(e){return(0,o.useMemo)(()=>({draggable:{...Pi.draggable,...null==e?void 0:e.draggable},droppable:{...Pi.droppable,...null==e?void 0:e.droppable},dragOverlay:{...Pi.dragOverlay,...null==e?void 0:e.dragOverlay}}),[null==e?void 0:e.draggable,null==e?void 0:e.droppable,null==e?void 0:e.dragOverlay])}(h),{droppableRects:$,measureDroppableContainers:F,measuringScheduled:U}=function(e,t){let{dragging:r,dependencies:s,config:n}=t;const[a,i]=(0,o.useState)(null),{frequency:l,measure:c,strategy:u}=n,d=(0,o.useRef)(e),p=function(){switch(u){case bi.Always:return!1;case bi.BeforeDragging:return r;default:return!r}}(),h=Ya(p),f=(0,o.useCallback)(function(e){void 0===e&&(e=[]),h.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),m=(0,o.useRef)(null),g=Xa(t=>{if(p&&!r)return _i;if(!t||t===_i||d.current!==e||null!=a){const t=new Map;for(let r of e){if(!r)continue;if(a&&a.length>0&&!a.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}const e=r.node.current,s=e?new Xo(c(e),e):null;r.rect.current=s,s&&t.set(r.id,s)}return t}return t},[e,a,r,p,c]);return(0,o.useEffect)(()=>{d.current=e},[e]),(0,o.useEffect)(()=>{p||f()},[r,p]),(0,o.useEffect)(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),(0,o.useEffect)(()=>{p||"number"!=typeof l||null!==m.current||(m.current=setTimeout(()=>{f(),m.current=null},l))},[l,p,f,...s]),{droppableRects:g,measureDroppableContainers:f,measuringScheduled:null!=a}}(I,{dragging:w,dependencies:[C.x,C.y],config:D.droppable}),B=function(e,t){const r=null!=t?e.get(t):void 0,s=r?r.node.current:null;return Xa(e=>{var r;return null==t?null:null!=(r=null!=s?s:e)?r:null},[s,t])}(k,N),Q=(0,o.useMemo)(()=>L?oo(L):null,[L]),H=function(){const e=!1===(null==P?void 0:P.autoScrollEnabled),t="object"==typeof c?!1===c.enabled:!1===c,r=w&&!e&&!t;return"object"==typeof c?{...c,enabled:r}:{enabled:r}}(),V=function(e,t){return ji(e,t)}(B,D.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:s,config:n=!0}=e;const a=(0,o.useRef)(!1),{x:i,y:l}="boolean"==typeof n?{x:n,y:n}:n;Wa(()=>{if(!i&&!l||!t)return void(a.current=!1);if(a.current||!s)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const n=To(r(e),s);if(i||(n.x=0),l||(n.y=0),a.current=!0,Math.abs(n.x)>0||Math.abs(n.y)>0){const t=Io(e);t&&t.scrollBy({top:n.y,left:n.x})}},[t,i,l,s,r])}({activeNode:null!=N?k.get(N):null,config:H.layoutShiftCompensation,initialRect:V,measure:D.draggable.measure});const K=ki(B,D.draggable.measure,V),W=ki(B?B.parentElement:null),G=(0,o.useRef)({activatorEvent:null,active:null,activeNode:B,collisionRect:null,collisions:null,droppableRects:$,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Y=E.getNodeFor(null==(t=G.current.over)?void 0:t.id),X=function(e){let{measure:t}=e;const[r,s]=(0,o.useState)(null),n=wi({callback:(0,o.useCallback)(e=>{for(const{target:r}of e)if(Ha(r)){s(e=>{const s=t(r);return e?{...e,width:s.width,height:s.height}:s});break}},[t])}),a=(0,o.useCallback)(e=>{const r=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ha(t)?t:e}(e);null==n||n.disconnect(),r&&(null==n||n.observe(r)),s(r?t(r):null)},[t,n]),[i,l]=Ja(a);return(0,o.useMemo)(()=>({nodeRef:i,rect:r,setRef:l}),[r,i,l])}({measure:D.dragOverlay.measure}),J=null!=(r=X.nodeRef.current)?r:B,Z=w?null!=(s=X.rect)?s:K:null,ee=Boolean(X.nodeRef.current&&X.rect),te=To(re=ee?null:K,ji(re));var re;const se=Si(J?Ba(J):null),ne=function(e){const t=(0,o.useRef)(e),r=Xa(r=>e?r&&r!==Ci&&e&&t.current&&e.parentNode===t.current.parentNode?r:Ro(e):Ci,[e]);return(0,o.useEffect)(()=>{t.current=e},[e]),r}(w?null!=Y?Y:B:null),ae=function(e,t){void 0===t&&(t=zo);const[r]=e,s=Si(r?Ba(r):null),[n,a]=(0,o.useState)(qi);function i(){a(()=>e.length?e.map(e=>Qo(e)?s:new Xo(t(e),e)):qi)}const l=wi({callback:i});return Wa(()=>{null==l||l.disconnect(),i(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),n}(ne),oe=function(e,t){let{transform:r,...s}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...s}),r):r}(f,{transform:{x:C.x-te.x,y:C.y-te.y,scaleX:1,scaleY:1},activatorEvent:L,active:O,activeNodeRect:K,containerNodeRect:W,draggingNodeRect:Z,over:G.current.over,overlayNodeRect:X.rect,scrollableAncestors:ne,scrollableAncestorRects:ae,windowRect:se}),ie=Q?so(Q,C):null,le=function(e){const[t,r]=(0,o.useState)(null),s=(0,o.useRef)(e),n=(0,o.useCallback)(e=>{const t=Do(e.target);t&&r(e=>e?(e.set(t,Uo(t)),new Map(e)):null)},[]);return(0,o.useEffect)(()=>{const t=s.current;if(e!==t){a(t);const o=e.map(e=>{const t=Do(e);return t?(t.addEventListener("scroll",n,{passive:!0}),[t,Uo(t)]):null}).filter(e=>null!=e);r(o.length?new Map(o):null),s.current=e}return()=>{a(e),a(t)};function a(e){e.forEach(e=>{const t=Do(e);null==t||t.removeEventListener("scroll",n)})}},[n,e]),(0,o.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>so(e,t),wo):Go(e):wo,[e,t])}(ne),ce=Ei(le),ue=Ei(le,[K]),de=so(oe,ce),pe=Z?Ao(Z,oe):null,he=O&&pe?p({active:O,collisionRect:pe,droppableRects:$,droppableContainers:I,pointerCoordinates:ie}):null,fe=function(e){if(!e||0===e.length)return null;const[t]=e;return t.id}(he),[me,ge]=(0,o.useState)(null),ye=function(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}(ee?oe:so(oe,ue),null!=(n=null==me?void 0:me.rect)?n:null,K),xe=(0,o.useRef)(null),be=(0,o.useCallback)((e,t)=>{let{sensor:r,options:s}=t;if(null==T.current)return;const n=k.get(T.current);if(!n)return;const a=e.nativeEvent,o=new r({active:T.current,activeNode:n,event:a,options:s,context:G,onAbort(e){if(!k.get(e))return;const{onDragAbort:t}=M.current,r={id:e};null==t||t(r),b({type:"onDragAbort",event:r})},onPending(e,t,r,s){if(!k.get(e))return;const{onDragPending:n}=M.current,a={id:e,constraint:t,initialCoordinates:r,offset:s};null==n||n(a),b({type:"onDragPending",event:a})},onStart(e){const t=T.current;if(null==t)return;const r=k.get(t);if(!r)return;const{onDragStart:s}=M.current,n={activatorEvent:a,active:{id:t,data:r.data,rect:q}};(0,Da.unstable_batchedUpdates)(()=>{null==s||s(n),j(Ui.Initializing),x({type:xo.DragStart,initialCoordinates:e,active:t}),b({type:"onDragStart",event:n}),A(xe.current),z(a)})},onMove(e){x({type:xo.DragMove,coordinates:e})},onEnd:i(xo.DragEnd),onCancel:i(xo.DragCancel)});function i(e){return async function(){const{active:t,collisions:r,over:s,scrollAdjustedTranslate:n}=G.current;let o=null;if(t&&n){const{cancelDrop:i}=M.current;o={activatorEvent:a,active:t,collisions:r,delta:n,over:s},e===xo.DragEnd&&"function"==typeof i&&await Promise.resolve(i(o))&&(e=xo.DragCancel)}T.current=null,(0,Da.unstable_batchedUpdates)(()=>{x({type:e}),j(Ui.Uninitialized),ge(null),A(null),z(null),xe.current=null;const t=e===xo.DragEnd?"onDragEnd":"onDragCancel";if(o){const e=M.current[t];null==e||e(o),b({type:t,event:o})}})}}xe.current=o},[k]),ve=(0,o.useCallback)((e,t)=>(r,s)=>{const n=r.nativeEvent,a=k.get(s);if(null!==T.current||!a||n.dndKit||n.defaultPrevented)return;const o={active:a};!0===e(r,t.options,o)&&(n.dndKit={capturedBy:t.sensor},T.current=s,be(r,t))},[k,be]),_e=function(e,t){return(0,o.useMemo)(()=>e.reduce((e,r)=>{const{sensor:s}=r;return[...e,...s.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,r)}))]},[]),[e,t])}(d,ve);!function(e){(0,o.useEffect)(()=>{if(!$a)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(d),Wa(()=>{K&&_===Ui.Initializing&&j(Ui.Initialized)},[K,_]),(0,o.useEffect)(()=>{const{onDragMove:e}=M.current,{active:t,activatorEvent:r,collisions:s,over:n}=G.current;if(!t||!r)return;const a={active:t,activatorEvent:r,collisions:s,delta:{x:de.x,y:de.y},over:n};(0,Da.unstable_batchedUpdates)(()=>{null==e||e(a),b({type:"onDragMove",event:a})})},[de.x,de.y]),(0,o.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:r,droppableContainers:s,scrollAdjustedTranslate:n}=G.current;if(!e||null==T.current||!t||!n)return;const{onDragOver:a}=M.current,o=s.get(fe),i=o&&o.rect.current?{id:o.id,rect:o.rect.current,data:o.data,disabled:o.disabled}:null,l={active:e,activatorEvent:t,collisions:r,delta:{x:n.x,y:n.y},over:i};(0,Da.unstable_batchedUpdates)(()=>{ge(i),null==a||a(l),b({type:"onDragOver",event:l})})},[fe]),Wa(()=>{G.current={activatorEvent:L,active:O,activeNode:B,collisionRect:pe,collisions:he,droppableRects:$,draggableNodes:k,draggingNode:J,draggingNodeRect:Z,droppableContainers:E,over:me,scrollableAncestors:ne,scrollAdjustedTranslate:de},q.current={initial:Z,translated:pe}},[O,B,he,pe,k,J,Z,$,E,me,ne,de]),function(e){let{acceleration:t,activator:r=gi.Pointer,canScroll:s,draggingRect:n,enabled:a,interval:i=5,order:l=yi.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:p,threshold:h}=e;const f=function(e){let{delta:t,disabled:r}=e;const s=Za(t);return Xa(e=>{if(r||!s||!e)return xi;const n=Math.sign(t.x-s.x),a=Math.sign(t.y-s.y);return{x:{[Bo.Backward]:e.x[Bo.Backward]||-1===n,[Bo.Forward]:e.x[Bo.Forward]||1===n},y:{[Bo.Backward]:e.y[Bo.Backward]||-1===a,[Bo.Forward]:e.y[Bo.Forward]||1===a}}},[r,t,s])}({delta:p,disabled:!a}),[m,g]=function(){const e=(0,o.useRef)(null);return[(0,o.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]),(0,o.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),y=(0,o.useRef)({x:0,y:0}),x=(0,o.useRef)({x:0,y:0}),b=(0,o.useMemo)(()=>{switch(r){case gi.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case gi.DraggableRect:return n}},[r,n,c]),v=(0,o.useRef)(null),_=(0,o.useCallback)(()=>{const e=v.current;if(!e)return;const t=y.current.x*x.current.x,r=y.current.y*x.current.y;e.scrollBy(t,r)},[]),j=(0,o.useMemo)(()=>l===yi.TreeOrder?[...u].reverse():u,[l,u]);(0,o.useEffect)(()=>{if(a&&u.length&&b){for(const e of j){if(!1===(null==s?void 0:s(e)))continue;const r=u.indexOf(e),n=d[r];if(!n)continue;const{direction:a,speed:o}=Ko(e,n,b,t,h);for(const e of["x","y"])f[e][a[e]]||(o[e]=0,a[e]=0);if(o.x>0||o.y>0)return g(),v.current=e,m(_,i),y.current=o,void(x.current=a)}y.current={x:0,y:0},x.current={x:0,y:0},g()}else g()},[t,_,s,g,a,i,JSON.stringify(b),JSON.stringify(f),m,u,j,d,JSON.stringify(h)])}({...H,delta:C,draggingRect:pe,pointerCoordinates:ie,scrollableAncestors:ne,scrollableAncestorRects:ae});const je=(0,o.useMemo)(()=>({active:O,activeNode:B,activeNodeRect:K,activatorEvent:L,collisions:he,containerNodeRect:W,dragOverlay:X,draggableNodes:k,droppableContainers:E,droppableRects:$,over:me,measureDroppableContainers:F,scrollableAncestors:ne,scrollableAncestorRects:ae,measuringConfiguration:D,measuringScheduled:U,windowRect:se}),[O,B,K,L,he,W,X,k,E,$,me,F,ne,ae,D,U,se]),we=(0,o.useMemo)(()=>({activatorEvent:L,activators:_e,active:O,activeNodeRect:K,ariaDescribedById:{draggable:R},dispatch:x,draggableNodes:k,over:me,measureDroppableContainers:F}),[L,_e,O,K,x,R,k,me,F]);return i().createElement(fo.Provider,{value:v},i().createElement(Mi.Provider,{value:we},i().createElement(Ri.Provider,{value:je},i().createElement(Fi.Provider,{value:ye},u)),i().createElement($i,{disabled:!1===(null==l?void 0:l.restoreFocus)})),i().createElement(yo,{...l,hiddenTextDescribedById:R}))}),Qi=(0,o.createContext)(null),Hi="button";const Vi={timeout:25};function Ki(e,t,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(t,1)[0]),s}function Wi(e,t){return e.reduce((e,r,s)=>{const n=t.get(r);return n&&(e[s]=n),e},Array(e.length))}function Gi(e){return null!==e&&e>=0}const Yi=e=>{let{rects:t,activeIndex:r,overIndex:s,index:n}=e;const a=Ki(t,s,r),o=t[n],i=a[n];return i&&o?{x:i.left-o.left,y:i.top-o.top,scaleX:i.width/o.width,scaleY:i.height/o.height}:null},Xi={scaleX:1,scaleY:1},Ji=e=>{var t;let{activeIndex:r,activeNodeRect:s,index:n,rects:a,overIndex:o}=e;const i=null!=(t=a[r])?t:s;if(!i)return null;if(n===r){const e=a[o];return e?{x:0,y:r<o?e.top+e.height-(i.top+i.height):e.top-i.top,...Xi}:null}const l=function(e,t,r){const s=e[t],n=e[t-1],a=e[t+1];return s?r<t?n?s.top-(n.top+n.height):a?a.top-(s.top+s.height):0:a?a.top-(s.top+s.height):n?s.top-(n.top+n.height):0:0}(a,n,r);return n>r&&n<=o?{x:0,y:-i.height-l,...Xi}:n<r&&n>=o?{x:0,y:i.height+l,...Xi}:{x:0,y:0,...Xi}},Zi="Sortable",el=i().createContext({activeIndex:-1,containerId:Zi,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Yi,disabled:{draggable:!1,droppable:!1}});function tl(e){let{children:t,id:r,items:s,strategy:n=Yi,disabled:a=!1}=e;const{active:l,dragOverlay:c,droppableRects:u,over:d,measureDroppableContainers:p}=(0,o.useContext)(Ri),h=to(Zi,r),f=Boolean(null!==c.rect),m=(0,o.useMemo)(()=>s.map(e=>"object"==typeof e&&"id"in e?e.id:e),[s]),g=null!=l,y=l?m.indexOf(l.id):-1,x=d?m.indexOf(d.id):-1,b=(0,o.useRef)(m),v=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(m,b.current),_=-1!==x&&-1===y||v,j=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(a);Wa(()=>{v&&g&&p(m)},[v,m,g,p]),(0,o.useEffect)(()=>{b.current=m},[m]);const w=(0,o.useMemo)(()=>({activeIndex:y,containerId:h,disabled:j,disableTransforms:_,items:m,overIndex:x,useDragOverlay:f,sortedRects:Wi(m,u),strategy:n}),[y,h,j.draggable,j.droppable,_,m,x,u,f,n]);return i().createElement(el.Provider,{value:w},t)}const rl=e=>{let{id:t,items:r,activeIndex:s,overIndex:n}=e;return Ki(r,s,n).indexOf(t)},sl=e=>{let{containerId:t,isSorting:r,wasDragging:s,index:n,items:a,newIndex:o,previousItems:i,previousContainerId:l,transition:c}=e;return!(!c||!s||i!==a&&n===o||!r&&(o===n||t!==l))},nl={duration:200,easing:"ease"},al="transform",ol=io.Transition.toString({property:al,duration:0,easing:"linear"}),il={roleDescription:"sortable"};function ll(e){let{animateLayoutChanges:t=sl,attributes:r,disabled:s,data:n,getNewIndex:a=rl,id:i,strategy:l,resizeObserverConfig:c,transition:u=nl}=e;const{items:d,containerId:p,activeIndex:h,disabled:f,disableTransforms:m,sortedRects:g,overIndex:y,useDragOverlay:x,strategy:b}=(0,o.useContext)(el),v=function(e,t){var r,s;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(s=null==e?void 0:e.droppable)?s:t.droppable}}(s,f),_=d.indexOf(i),j=(0,o.useMemo)(()=>({sortable:{containerId:p,index:_,items:d},...n}),[p,n,_,d]),w=(0,o.useMemo)(()=>d.slice(d.indexOf(i)),[d,i]),{rect:N,node:k,isOver:C,setNodeRef:E}=function(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:n}=e;const a=to("Droppable"),{active:i,dispatch:l,over:c,measureDroppableContainers:u}=(0,o.useContext)(Mi),d=(0,o.useRef)({disabled:r}),p=(0,o.useRef)(!1),h=(0,o.useRef)(null),f=(0,o.useRef)(null),{disabled:m,updateMeasurementsFor:g,timeout:y}={...Vi,...n},x=Ya(null!=g?g:s),b=wi({callback:(0,o.useCallback)(()=>{p.current?(null!=f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),f.current=null},y)):p.current=!0},[y]),disabled:m||!i}),v=(0,o.useCallback)((e,t)=>{b&&(t&&(b.unobserve(t),p.current=!1),e&&b.observe(e))},[b]),[_,j]=Ja(v),w=Ya(t);return(0,o.useEffect)(()=>{b&&_.current&&(b.disconnect(),p.current=!1,b.observe(_.current))},[_,b]),(0,o.useEffect)(()=>(l({type:xo.RegisterDroppable,element:{id:s,key:a,disabled:r,node:_,rect:h,data:w}}),()=>l({type:xo.UnregisterDroppable,key:a,id:s})),[s]),(0,o.useEffect)(()=>{r!==d.current.disabled&&(l({type:xo.SetDroppableDisabled,id:s,key:a,disabled:r}),d.current.disabled=r)},[s,a,r,l]),{active:i,rect:h,isOver:(null==c?void 0:c.id)===s,node:_,over:c,setNodeRef:j}}({id:i,data:j,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...c}}),{active:S,activatorEvent:q,activeNodeRect:O,attributes:T,setNodeRef:P,listeners:A,isDragging:L,over:z,setActivatorNodeRef:M,transform:R}=function(e){let{id:t,data:r,disabled:s=!1,attributes:n}=e;const a=to("Draggable"),{activators:i,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:p,over:h}=(0,o.useContext)(Mi),{role:f=Hi,roleDescription:m="draggable",tabIndex:g=0}=null!=n?n:{},y=(null==c?void 0:c.id)===t,x=(0,o.useContext)(y?Fi:Qi),[b,v]=Ja(),[_,j]=Ja(),w=function(e,t){return(0,o.useMemo)(()=>e.reduce((e,r)=>{let{eventName:s,handler:n}=r;return e[s]=e=>{n(e,t)},e},{}),[e,t])}(i,t),N=Ya(r);return Wa(()=>(p.set(t,{id:t,key:a,node:b,activatorNode:_,data:N}),()=>{const e=p.get(t);e&&e.key===a&&p.delete(t)}),[p,t]),{active:c,activatorEvent:l,activeNodeRect:u,attributes:(0,o.useMemo)(()=>({role:f,tabIndex:g,"aria-disabled":s,"aria-pressed":!(!y||f!==Hi)||void 0,"aria-roledescription":m,"aria-describedby":d.draggable}),[s,f,g,y,m,d.draggable]),isDragging:y,listeners:s?void 0:w,node:b,over:h,setNodeRef:v,setActivatorNodeRef:j,transform:x}}({id:i,data:j,attributes:{...il,...r},disabled:v.draggable}),I=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(E,P),D=Boolean(S),$=D&&!m&&Gi(h)&&Gi(y),F=!x&&L,U=F&&$?R:null,B=$?null!=U?U:(null!=l?l:b)({rects:g,activeNodeRect:O,activeIndex:h,overIndex:y,index:_}):null,Q=Gi(h)&&Gi(y)?a({id:i,items:d,activeIndex:h,overIndex:y}):_,H=null==S?void 0:S.id,V=(0,o.useRef)({activeId:H,items:d,newIndex:Q,containerId:p}),K=d!==V.current.items,W=t({active:S,containerId:p,isDragging:L,isSorting:D,id:i,index:_,items:d,newIndex:V.current.newIndex,previousItems:V.current.items,previousContainerId:V.current.containerId,transition:u,wasDragging:null!=V.current.activeId}),G=function(e){let{disabled:t,index:r,node:s,rect:n}=e;const[a,i]=(0,o.useState)(null),l=(0,o.useRef)(r);return Wa(()=>{if(!t&&r!==l.current&&s.current){const e=n.current;if(e){const t=zo(s.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&i(r)}}r!==l.current&&(l.current=r)},[t,r,s,n]),(0,o.useEffect)(()=>{a&&i(null)},[a]),a}({disabled:!W,index:_,node:k,rect:N});return(0,o.useEffect)(()=>{D&&V.current.newIndex!==Q&&(V.current.newIndex=Q),p!==V.current.containerId&&(V.current.containerId=p),d!==V.current.items&&(V.current.items=d)},[D,Q,p,d]),(0,o.useEffect)(()=>{if(H===V.current.activeId)return;if(null!=H&&null==V.current.activeId)return void(V.current.activeId=H);const e=setTimeout(()=>{V.current.activeId=H},50);return()=>clearTimeout(e)},[H]),{active:S,activeIndex:h,attributes:T,data:j,rect:N,index:_,newIndex:Q,items:d,isOver:C,isSorting:D,isDragging:L,listeners:A,node:k,overIndex:y,over:z,setNodeRef:I,setActivatorNodeRef:M,setDroppableNodeRef:E,setDraggableNodeRef:P,transform:null!=G?G:B,transition:G||K&&V.current.newIndex===_?ol:F&&!ao(q)||!u?void 0:D||W?io.Transition.toString({...u,property:al}):void 0}}ti.Down,ti.Right,ti.Up,ti.Left;const cl=()=>new Promise((e,t)=>{if("undefined"==typeof wp||!wp.media)return void t(new Error("La librería de medios de WordPress no está disponible."));const r=wp.media({title:"Seleccionar o subir imagen",button:{text:"Usar esta imagen"},multiple:!1,library:{type:"image"}});r.on("select",()=>{const t=r.state().get("selection").first().toJSON();e(t.url)}),r.on("close",()=>{}),r.open()}),ul=({tabs:e,activeTab:t=0,setActiveTab:r=()=>{}})=>(0,Br.jsxs)("div",{children:[(0,Br.jsx)("div",{className:"border-b border-gray-200",children:(0,Br.jsx)("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:e.map((e,s)=>(0,Br.jsx)("button",{onClick:()=>r(s),className:sr("whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm",{"border-blue-600 text-blue-700":t===s,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":t!==s}),children:e.name},e.name))})}),(0,Br.jsx)("div",{className:"pt-6",children:e[t]&&e[t].content})]}),dl=rs("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),pl=({isOpen:e,onClose:t,onAdd:r,resourceName:s,useResourceHook:n,itemsKey:a="items",filterConfigs:i=[],alreadyAddedIds:l=[]})=>{const{t:c}=N(),[u,d]=(0,o.useState)([]),[p,h]=(0,o.useState)(""),[f,m]=(0,o.useState)(""),g=(0,o.useRef)(null);(0,o.useEffect)(()=>(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{m(p)},300),()=>{g.current&&clearTimeout(g.current)}),[p]);const y=n({search:f,perPage:100}),x=y[a]||[],b=(0,o.useMemo)(()=>({value:p,onChange:e=>h(e.target.value),placeholder:`Buscar ${s}...`,isLoading:y.loading}),[p,y.loading,s]);return(0,o.useEffect)(()=>{e||(h(""),m(""),d([]))},[e]),e?(0,Br.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,Br.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,Br.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:t}),(0,Br.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[(0,Br.jsxs)("header",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,Br.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Seleccionar ",s]}),(0,Br.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,Br.jsx)(fs,{className:"h-5 w-5"})})]}),(0,Br.jsx)("div",{className:"p-4 border-b",children:(0,Br.jsx)(qa,{searchConfig:b,filtersConfig:i})}),(0,Br.jsxs)("main",{className:"flex-1 overflow-y-auto p-2",children:[y.loading&&(0,Br.jsx)("p",{className:"p-4 text-center text-gray-500",children:"Cargando..."}),!y.loading&&x.map(e=>{const t=u.some(t=>t.id===e.id),r=l.includes(e.id);return(0,Br.jsxs)("div",{onClick:()=>!r&&(e=>{d(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])})(e),className:"flex items-center justify-between p-3 rounded-md cursor-pointer "+(r?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"),children:[(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Br.jsx)("div",{className:"w-5 h-5 border rounded flex items-center justify-center "+(t?"bg-blue-600 border-blue-600":"border-gray-300"),children:t&&(0,Br.jsx)(dl,{className:"w-4 h-4 text-white"})}),(0,Br.jsx)("span",{children:e.title?.rendered||e.title})]}),r&&(0,Br.jsx)("span",{className:"text-xs font-semibold text-gray-500",children:"AÑADIDO"})]},e.id)}),!y.loading&&0===x.length&&(0,Br.jsx)("p",{className:"p-4 text-center text-gray-500",children:"No se encontraron resultados."})]}),(0,Br.jsxs)("footer",{className:"px-6 py-4 border-t bg-gray-50 flex items-center justify-between",children:[(0,Br.jsxs)("p",{className:"text-sm text-gray-600",children:[u.length," seleccionados"]}),(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Br.jsx)(os,{variant:"secondary",onClick:()=>{u.length>0&&(r(u),d([]))},disabled:0===u.length,children:"Añadir y Seguir"}),(0,Br.jsx)(os,{variant:"primary",onClick:()=>{u.length>0&&r([...u]),d([]),t()},disabled:0===u.length,children:"Añadir y Cerrar"})]})]})]})]})}):null},hl=e=>e?.title?.rendered||e?.title||"Curso sin título",fl=({lesson:e,onRemove:t})=>{const{attributes:r,listeners:s,setNodeRef:n,transform:a,transition:o}=ll({id:e.id}),i={transform:io.Transform.toString(a),transition:o};return(0,Br.jsxs)("div",{ref:n,style:i,className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Br.jsx)("button",{type:"button",...r,...s,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,Br.jsx)(Aa,{className:"h-5 w-5"})}),(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title?.rendered||e.title})]}),(0,Br.jsx)("button",{type:"button",onClick:()=>t(e.id),className:"text-red-600 hover:text-red-800",children:(0,Br.jsx)(La,{className:"w-4 h-4"})})]})},ml=({courseId:e,mode:t,onSave:r,onCancel:s,onTriggerCreation:n,isCollapsed:a,categoryOptions:i,onCategoryCreated:l})=>{const{t:c}=N(),[u,d]=(0,o.useState)(!1),[p,h]=(0,o.useState)(!1),[f,m]=(0,o.useState)(null),[g,y]=(0,o.useState)({}),[x,b]=(0,o.useState)(0),v=jo(_o(pi)),{lessons:_,fetchLessons:j}=Xn({courseId:e,autoFetch:!1,perPage:100}),[w,k]=(0,o.useState)([]),[C,E]=(0,o.useState)(!1),[S,q]=(0,o.useState)(""),[O,T]=(0,o.useState)(!1),[P,A]=(0,o.useState)(!1);(0,o.useEffect)(()=>{k(_)},[_]);const L=(0,o.useCallback)(()=>{y({title:"",content:"",status:"publish",duration:"",featured_image_id:null,featured_image_url:"",_course_position:"0",_start_date:"",_end_date:"",qe_category:[]}),k([])},[]);(0,o.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&L();else{d(!0),m(null);try{const t=await Js(e),r=t.meta||{};y({title:hl(t),content:t.content?.rendered||"",status:t.status||"publish",qe_category:t.qe_category||[],duration:r._course_duration||"",featured_image_id:t.featured_media||null,featured_image_url:t._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"",_course_position:r._course_position||"0",_start_date:r._start_date||"",_end_date:r._end_date||""}),j(!0,{courseId:e})}catch(e){m("Failed to load course data.")}finally{d(!1)}}})()},[e,t,L,j]);const z=(e,t)=>{y(r=>({...r,[e]:t}))},M=async()=>{try{const e=await cl();e&&e.id&&e.url&&(z("featured_image_id",e.id),z("featured_image_url",e.url))}catch(e){console.error("Error al seleccionar imagen:",e)}},R=e=>{k(t=>t.filter(t=>t.id!==e))},I=(0,Br.jsxs)("div",{className:"flex flex-col gap-6 h-full",children:[(0,Br.jsx)("input",{type:"text",value:g.title||"",onChange:e=>z("title",e.target.value),placeholder:c("courses.fields.title"),className:sr("w-full focus:outline-none bg-transparent flex-shrink-0","create"===t?"text-2xl font-bold":"text-xl font-semibold border-b pb-2 border-gray-200")}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-shrink-0",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:c("courses.fields.image")}),g.featured_image_url?(0,Br.jsxs)("div",{className:"group relative",children:[(0,Br.jsx)("img",{src:g.featured_image_url,alt:"Imagen destacada",className:"w-full h-48 object-cover rounded-lg"}),(0,Br.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:(0,Br.jsx)("button",{onClick:M,className:"text-white text-sm font-semibold bg-gray-800 bg-opacity-70 px-4 py-2 rounded-md",children:"Cambiar Imagen"})})]}):(0,Br.jsxs)("button",{onClick:M,className:"w-full h-48 flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:bg-gray-50",children:[(0,Br.jsx)(za,{className:"h-10 w-10 text-gray-400 mb-2"}),"Subir Imagen"]})]}),(0,Br.jsxs)("div",{className:"flex-shrink-0",children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:c("courses.fields.position")}),(0,Br.jsx)("input",{type:"number",value:g._course_position||"0",onChange:e=>z("_course_position",e.target.value),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,Br.jsxs)("div",{className:"flex-shrink-0",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:c("courses.fields.category")}),!C&&(0,Br.jsxs)("button",{onClick:()=>E(!0),type:"button",className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[(0,Br.jsx)(Ma,{className:"h-4 w-4"})," Añadir Nueva"]})]}),C&&(0,Br.jsx)("div",{className:"mb-3 p-3 bg-gray-50 border rounded-md",children:(0,Br.jsxs)("div",{className:"flex gap-2",children:[(0,Br.jsx)("input",{type:"text",value:S,onChange:e=>q(e.target.value),placeholder:"Nombre de la categoría",className:"flex-1 input border-gray-300 rounded-md"}),(0,Br.jsx)(os,{size:"sm",onClick:async()=>{if(S.trim()){T(!0);try{const e=await Na("qe_category",{name:S.trim()});l&&l(e),z("qe_category",[e.id.toString()]),q(""),E(!1)}catch(e){console.error("Error creating category:",e)}finally{T(!1)}}},isLoading:O,children:"Guardar"}),(0,Br.jsx)(os,{size:"sm",variant:"secondary",onClick:()=>E(!1),children:"Cancelar"})]})}),(0,Br.jsxs)("select",{value:g.qe_category?.[0]||"",onChange:e=>z("qe_category",[e.target.value]),className:"w-full input border-gray-300 rounded-md",children:[(0,Br.jsx)("option",{value:"",children:c("common.select")}),i.map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-shrink-0",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("courses.fields.startDate")}),(0,Br.jsx)("input",{type:"date",value:g._start_date||"",onChange:e=>z("_start_date",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("courses.fields.endDate")}),(0,Br.jsx)("input",{type:"date",value:g._end_date||"",onChange:e=>z("_end_date",e.target.value),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,Br.jsxs)("div",{className:"flex-shrink-0",children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("courses.fields.duration")}),(0,Br.jsx)("input",{type:"text",value:g.duration||"",onChange:e=>z("duration",e.target.value),placeholder:"Ej: 10 horas",className:"w-full input border-gray-300 rounded-md"})]}),(0,Br.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex-shrink-0",children:c("courses.fields.description")}),(0,Br.jsx)(Ia(),{theme:"snow",value:g.content||"",onChange:e=>z("content",e),className:"h-full"})]})]}),D=(0,Br.jsxs)("div",{className:"space-y-4",children:[(0,Br.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,Br.jsx)("button",{onClick:()=>A(!0),className:"bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg text-sm",children:"Añadir Existente"}),(0,Br.jsx)("button",{onClick:()=>n("lesson",e=>k(t=>[...t,e])),className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm",children:"Crear Nueva Lección"})]}),(0,Br.jsx)(Bi,{sensors:v,collisionDetection:So,onDragEnd:e=>{const{active:t,over:r}=e;if(t.id!==r?.id){const e=w.findIndex(e=>e.id===t.id),s=w.findIndex(e=>e.id===r.id);k(t=>Ki(t,e,s))}},children:(0,Br.jsx)(tl,{items:w.map(e=>e.id),strategy:Ji,children:(0,Br.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,Br.jsx)(fl,{lesson:e,onRemove:R},e.id))})})}),0===w.length&&(0,Br.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Este curso aún no tiene lecciones."})]}),$=[{name:c("common.settings"),content:I},{name:"Constructor",content:D}];if(u)return(0,Br.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Br.jsx)("p",{children:c("common.loading")})});const F=c("create"===t?"courses.createCourse":"courses.editCourse");return(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsxs)("div",{className:sr("bg-white rounded-lg border border-gray-200 flex flex-col h-full",{"overflow-hidden":a}),children:[(0,Br.jsxs)("header",{className:sr("flex-shrink-0",{"p-4 border-b flex items-center justify-between":!a,"h-full flex items-center justify-center border-r":a}),children:[(0,Br.jsx)("div",{className:sr("font-bold text-gray-800",{"transform -rotate-90 whitespace-nowrap text-sm tracking-wider uppercase":a}),children:a?hl(g):(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h3",{className:"text-lg",children:F}),"edit"===t&&(0,Br.jsx)("p",{className:"text-xs font-normal text-gray-500",children:hl(g)})]})}),!a&&(0,Br.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Br.jsx)("button",{onClick:async()=>{h(!0);try{const e={title:g.title,content:g.content,status:g.status,featured_media:g.featured_image_id,qe_category:g.qe_category,meta:{_course_duration:g.duration,_lesson_ids:w.map(e=>e.id),_course_position:parseInt(g._course_position)||0,_start_date:g._start_date||"",_end_date:g._end_date||""}};await r(e),"create"===t&&s()}catch(e){m(e.message)}finally{h(!1)}},disabled:p,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm",children:c(p?"common.saving":"common.save")}),(0,Br.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-800",children:(0,Br.jsx)(fs,{className:"h-5 w-5"})})]})]}),(0,Br.jsxs)("main",{className:sr("flex-1 overflow-y-auto",{"p-6":!a,hidden:a}),children:[f&&(0,Br.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:f}),(0,Br.jsx)(ul,{tabs:$,activeTab:x,setActiveTab:b})]})]}),(0,Br.jsx)(pl,{isOpen:P,onClose:()=>A(!1),onAdd:e=>{const t=e.filter(e=>!w.some(t=>t.id===e.id));k(e=>[...e,...t])},resourceName:"Lecciones",useResourceHook:Xn,itemsKey:"lessons",alreadyAddedIds:w.map(e=>e.id)})]})},gl=rs("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),yl=rs("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),xl=rs("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),bl=rs("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),vl=rs("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),_l=rs("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),jl=rs("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),wl=({value:e,onChange:t,disabled:r=!1,onCreateNew:s})=>{const{t:n}=N(),[a,i]=(0,o.useState)(""),[l,c]=(0,o.useState)(!1),{quizzes:u,loading:d,fetchQuizzes:p}=_a({autoFetch:!1}),[h,f]=(0,o.useState)(null),m=(0,o.useRef)(null),g=(0,o.useRef)(null),{quizzes:y}=_a({autoFetch:!0,perPage:100});(0,o.useEffect)(()=>{if(e&&y.length>0){const t=y.find(t=>t.id===e);f(t||null)}else e||f(null)},[e,y]),(0,o.useEffect)(()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,o.useEffect)(()=>(g.current&&clearTimeout(g.current),a.trim()?(c(!0),g.current=setTimeout(()=>{p(!0,{search:a})},300)):c(!1),()=>clearTimeout(g.current)),[a,p]);const x=e=>e?.title?.rendered||e?.title||"Cuestionario sin título";return h?(0,Br.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 border rounded-md",children:[(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-800",children:x(h)}),!r&&(0,Br.jsx)("button",{onClick:()=>{f(null),t(null)},className:"text-red-500 hover:text-red-700",children:(0,Br.jsx)(fs,{className:"w-4 h-4"})})]}):(0,Br.jsxs)("div",{className:"relative",ref:m,children:[(0,Br.jsxs)("div",{className:"flex gap-2",children:[(0,Br.jsxs)("div",{className:"relative flex-grow",children:[(0,Br.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Br.jsx)(Ea,{className:"h-4 w-4 text-gray-400"})}),(0,Br.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),onFocus:()=>c(!0),placeholder:"Buscar o crear cuestionario...",disabled:r,className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 rounded-md"})]}),s&&(0,Br.jsxs)("button",{onClick:s,disabled:r,className:"flex-shrink-0 flex items-center gap-2 px-3 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[(0,Br.jsx)(Ma,{className:"w-4 h-4"}),"Crear Nuevo"]})]}),l&&(0,Br.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[d&&(0,Br.jsx)("p",{className:"p-2 text-sm text-gray-500",children:"Buscando..."}),!d&&u.length>0&&u.map(e=>(0,Br.jsx)("div",{onClick:()=>(e=>{f(e),t(e.id),c(!1),i("")})(e),className:"p-2 text-sm cursor-pointer hover:bg-gray-100",children:x(e)},e.id)),!d&&0===u.length&&a&&(0,Br.jsx)("p",{className:"p-2 text-sm text-gray-500",children:"No se encontraron resultados."})]})]})},Nl=rs("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]),kl=({step:e,onUpdate:t,isViewMode:r})=>{const{t:s}=N(),[n,a]=(0,o.useState)(!1),[i,l]=(0,o.useState)(0),[c,u]=(0,o.useState)(null),d=(0,o.useRef)(null);return(0,Br.jsxs)("div",{className:"space-y-2",children:[(0,Br.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Archivo PDF"}),e.data?.file_id?(0,Br.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 border border-gray-200 rounded-md",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Br.jsx)(ms,{className:"h-4 w-4 text-green-500"}),(0,Br.jsx)("a",{href:e.data.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate",title:e.data.filename,children:e.data.filename})]}),!r&&(0,Br.jsx)("button",{type:"button",onClick:()=>{t("data",{...e.data,file_id:null,filename:null,url:null})},className:"p-1 text-red-500 hover:text-red-700",children:(0,Br.jsx)(La,{className:"h-4 w-4"})})]}):(0,Br.jsxs)("div",{children:[(0,Br.jsx)("input",{type:"file",accept:"application/pdf",ref:d,onChange:async r=>{const s=r.target.files?.[0];if(!s)return;const n=((e,t={})=>{const{maxSize:r=5242880,allowedTypes:s=["image/jpeg","image/jpg","image/png","image/gif","image/webp"]}=t;return e?e.size>r?{isValid:!1,error:`File size exceeds ${(r/1048576).toFixed(2)}MB limit`}:s.includes(e.type)?{isValid:!0}:{isValid:!1,error:`File type ${e.type} is not allowed. Allowed types: ${s.join(", ")}`}:{isValid:!1,error:"No file provided"}})(s,{maxSize:10485760,allowedTypes:["application/pdf"]});if(n.isValid){a(!0),u(null),l(0);try{const r=await(async(e,t={})=>{try{const r=(()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.api_url)throw new Error("API URL not configured in WordPress");return e})(),{title:s=e.name,alt_text:n="",caption:a="",onProgress:o=null}=t;console.log("📤 Uploading media:",e.name,`(${(e.size/1024).toFixed(2)} KB)`);const i=new FormData;i.append("file",e),s&&i.append("title",s),n&&i.append("alt_text",n),a&&i.append("caption",a);const l=new XMLHttpRequest,c=new Promise((e,t)=>{o&&l.upload.addEventListener("progress",e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);o(t)}}),l.addEventListener("load",()=>{if(l.status>=200&&l.status<300)try{const t=JSON.parse(l.responseText);console.log("✅ Media uploaded successfully:",t.id),e(t)}catch(e){t(new Error("Failed to parse upload response"))}else t(new Error(`Upload failed with status ${l.status}: ${l.statusText}`))}),l.addEventListener("error",()=>{t(new Error("Network error during upload"))}),l.addEventListener("abort",()=>{t(new Error("Upload cancelled"))}),l.open("POST",`${r.api_url}/wp/v2/media`),l.setRequestHeader("X-WP-Nonce",r.nonce),l.send(i)}),u=await c;return{id:u.id,url:u.source_url,title:u.title?.rendered||u.title,alt:u.alt_text||"",caption:u.caption?.rendered||u.caption,mediaDetails:u.media_details,mimeType:u.mime_type}}catch(e){throw console.error("❌ Error uploading media:",e),e}})(s,{onProgress:l});t("data",{...e.data,file_id:r.id,filename:s.name,url:r.url})}catch(e){u(e.message||"Upload failed")}finally{a(!1)}}else u(n.error)},className:"hidden",disabled:n||r}),(0,Br.jsxs)("button",{type:"button",onClick:()=>d.current?.click(),disabled:n||r,className:"w-full flex items-center justify-center px-3 py-2 border-2 border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:bg-gray-50 disabled:cursor-not-allowed",children:[(0,Br.jsx)(Nl,{className:"h-4 w-4 mr-2"}),n?`Subiendo... ${i}%`:"Seleccionar un archivo PDF"]})]}),n&&(0,Br.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,Br.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${i}%`}})}),c&&(0,Br.jsx)("p",{className:"text-xs text-red-600 mt-1",children:c})]})},Cl=e=>e?.title?.rendered||e?.title||"Lección sin título",El=({step:e,index:t,onUpdate:r,quillRef:s,onTriggerCreation:n})=>{const a=(0,o.useCallback)(async()=>{try{const e=await cl();if(e&&s.current){const t=s.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e),t.setSelection(r.index+1)}}catch(e){console.error("Error al abrir el selector de medios:",e)}},[s]),i=(0,o.useMemo)(()=>({toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:a}}}),[a]);switch(e.type){case"video":return(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"URL del Video"}),(0,Br.jsx)("input",{type:"url",value:e.data?.video_url||"",onChange:s=>r(t,"data",{...e.data,video_url:s.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"https://..."})]});case"quiz":return(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Seleccionar Cuestionario"}),(0,Br.jsx)(wl,{value:e.data?.quiz_id||null,onChange:s=>r(t,"data",{...e.data,quiz_id:s}),onCreateNew:()=>n("quiz",s=>{r(t,"data",{...e.data,quiz_id:s})})})]});case"pdf":return(0,Br.jsx)(kl,{step:e,onUpdate:(e,s)=>r(t,e,s)});default:return(0,Br.jsx)(Ia(),{ref:s,theme:"snow",value:e.data?.content||"",onChange:s=>r(t,"data",{...e.data,content:s}),className:"bg-white",modules:i})}},Sl=({step:e,index:t,onUpdate:r,onRemove:s,onTriggerCreation:n})=>{const{attributes:a,listeners:i,setNodeRef:l,transform:c,transition:u}=ll({id:e.id}),[d,p]=(0,o.useState)(!1),h={transform:io.Transform.toString(c),transition:u},f=(0,o.useRef)(null),m={text:(0,Br.jsx)(gl,{className:"h-4 w-4 text-green-700"}),video:(0,Br.jsx)(yl,{className:"h-4 w-4 text-blue-700"}),quiz:(0,Br.jsx)(xl,{className:"h-4 w-4 text-purple-700"}),pdf:(0,Br.jsx)(bl,{className:"h-4 w-4 text-red-700"})};return(0,Br.jsxs)("div",{ref:l,style:h,className:"bg-white border border-gray-200 rounded-lg",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,Br.jsx)("button",{type:"button",...a,...i,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,Br.jsx)(Aa,{className:"h-5 w-5"})}),(0,Br.jsx)("div",{className:"p-2 rounded bg-gray-100",children:m[e.type]||m.text}),(0,Br.jsx)("div",{className:"flex-1",children:(0,Br.jsx)("input",{type:"text",value:e.title,onChange:e=>r(t,"title",e.target.value),placeholder:"Título del paso",className:"font-medium text-sm text-gray-900 bg-transparent w-full focus:outline-none"})})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Br.jsx)("button",{type:"button",onClick:()=>p(!d),className:"p-1 text-gray-400 hover:text-gray-600",children:d?(0,Br.jsx)(vl,{className:"h-4 w-4"}):(0,Br.jsx)(_l,{className:"h-4 w-4"})}),(0,Br.jsx)("button",{type:"button",onClick:()=>s(t),className:"p-1 text-red-400 hover:text-red-600",children:(0,Br.jsx)(La,{className:"h-4 w-4"})})]})]}),d&&(0,Br.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,Br.jsx)(El,{step:e,index:t,onUpdate:r,quillRef:f,onTriggerCreation:n})})]})},ql=({onAddStep:e})=>{const[t,r]=(0,o.useState)(!1),s=[{type:"text",label:"Texto",icon:(0,Br.jsx)(gl,{className:"w-4 h-4"})},{type:"video",label:"Video",icon:(0,Br.jsx)(yl,{className:"w-4 h-4"})},{type:"quiz",label:"Cuestionario",icon:(0,Br.jsx)(xl,{className:"w-4 h-4"})},{type:"pdf",label:"PDF",icon:(0,Br.jsx)(bl,{className:"w-4 h-4"})}];return(0,Br.jsxs)("div",{className:"relative inline-block",children:[(0,Br.jsxs)("button",{onClick:()=>r(!t),className:"bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-gray-300 transition-colors text-sm flex items-center gap-2",children:[(0,Br.jsx)(Ma,{className:"w-4 h-4"}),"Añadir Paso"]}),t&&(0,Br.jsx)("div",{className:"absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:(0,Br.jsx)("div",{className:"py-1",children:s.map(({type:t,label:s,icon:n})=>(0,Br.jsxs)("button",{onClick:()=>{e(t),r(!1)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[n," ",s]},t))})})]})},Ol=({lessonId:e,mode:t,onSave:r,onCancel:s,availableCourses:n,onTriggerCreation:a,isCollapsed:i=!1})=>{const{t:l}=N(),[c,u]=(0,o.useState)(!1),[d,p]=(0,o.useState)(!1),[h,f]=(0,o.useState)(null),[m,g]=(0,o.useState)({}),[y,x]=(0,o.useState)(0),b=jo(_o(pi)),v=(0,o.useCallback)(()=>{g({title:"",content:"",status:"publish",courseId:"",steps:[]}),x(0)},[]);(0,o.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&v();else{u(!0),f(null),x(0);try{const t=await Tn(e);g({title:Cl(t),content:t.content?.rendered||"",status:t.status||"publish",courseId:t.meta?._course_id?.toString()||"",steps:(t.meta?._lesson_steps||[]).map((e,t)=>({...e,id:`step-${t}`}))})}catch(e){f("Failed to load lesson data.")}finally{u(!1)}}})()},[e,t,v]);const _=(e,t)=>{g(r=>({...r,[e]:t}))},j=(e,t,r)=>{const s=[...m.steps];"data"===t?s[e].data=r:s[e][t]=r,_("steps",s)},w=e=>{_("steps",m.steps.filter((t,r)=>r!==e))};if(c)return(0,Br.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Br.jsx)("p",{children:"Cargando..."})});const k=[{name:"Ajustes",content:(0,Br.jsxs)("div",{className:"space-y-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Título de la Lección"}),(0,Br.jsx)("input",{type:"text",value:m.title||"",onChange:e=>_("title",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Curso"}),(0,Br.jsxs)("select",{value:m.courseId||"",onChange:e=>_("courseId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Br.jsx)("option",{value:"",children:"Seleccionar curso..."}),n.map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripción / Contenido Principal"}),(0,Br.jsx)(Ia(),{theme:"snow",value:m.content||"",onChange:e=>_("content",e)})]})]})},{name:"Pasos",content:(0,Br.jsxs)("div",{className:"space-y-4",children:[(0,Br.jsx)(Bi,{sensors:b,collisionDetection:So,onDragEnd:e=>{const{active:t,over:r}=e;if(t.id!==r?.id){const e=m.steps.findIndex(e=>e.id===t.id),s=m.steps.findIndex(e=>e.id===r.id);_("steps",Ki(m.steps,e,s))}},children:(0,Br.jsx)(tl,{items:(m.steps||[]).map(e=>e.id),strategy:Ji,children:(m.steps||[]).map((e,t)=>(0,Br.jsx)(Sl,{step:e,index:t,onUpdate:j,onRemove:w,onTriggerCreation:a},e.id))})}),(0,Br.jsx)(ql,{onAddStep:e=>{const t={id:`step-${Date.now()}`,title:`Nuevo Paso (${e})`,type:e,data:{}};_("steps",[...m.steps||[],t])}})]})}],C="create"===t?"Crear Nueva Lección":`Editando: ${Cl(m)||"..."}`;return(0,Br.jsxs)("div",{className:sr("bg-white rounded-lg border border-gray-200 flex flex-col h-full",{"overflow-hidden":i}),children:[(0,Br.jsxs)("header",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[(0,Br.jsx)("h3",{className:sr("text-lg font-bold text-gray-800 truncate",{"transform -rotate-90 whitespace-nowrap":i}),children:C}),!i&&(0,Br.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Br.jsxs)("button",{onClick:async()=>{p(!0),f(null);try{const e=m.steps.map(({id:e,...t})=>t),t={title:m.title,content:m.content,status:m.status,meta:{_course_id:m.courseId,_lesson_steps:e}};await r(t)}catch(e){f(e.message||"Failed to save the lesson.")}finally{p(!1)}},disabled:d,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 flex items-center gap-2",children:[(0,Br.jsx)(jl,{className:"w-4 h-4"}),d?"Guardando...":"Guardar"]}),(0,Br.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-800",children:(0,Br.jsx)(fs,{className:"h-5 w-5"})})]})]}),(0,Br.jsxs)("main",{className:sr("flex-1 overflow-y-auto",{"p-6":!i,hidden:i}),children:[h&&(0,Br.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:h}),(0,Br.jsx)(ul,{tabs:k,activeTab:y,setActiveTab:x})]})]})},Tl=rs("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Pl={_course_id:0,_question_lesson:0,_question_type:"multiple_choice",_difficulty_level:"medium",_points:1,_points_incorrect:0,_question_order:0,_is_required:!1,_quiz_ids:[],_question_options:[],_explanation:"",_question_provider:"human"},Al=["multiple_choice","true_false","essay","short_answer","fill_blank"],Ll=["easy","medium","hard"],zl=e=>e?{id:e.id||0,title:Ds(e.title),content:Ds(e.content),status:Rs(e.status,"draft"),date:e.date||"",modified:e.modified||"",qe_category:zs(e.qe_category),qe_provider:zs(e.qe_provider),meta:{...Pl,...e.meta||{},_quiz_ids:zs(e.meta?._quiz_ids),_question_options:Array.isArray(e.meta?._question_options)?e.meta._question_options.map(e=>({...e,isCorrect:Ts(e.isCorrect)})):[]},_embedded:e._embedded||{}}:null,Ml=e=>{const t=zl(e);if(!t)return null;const r=(t.content||t.meta?._explanation||"").replace(/<p>|<\/p>/g,"").trim();return{...t,formattedType:Us(t.meta._question_type.replace("_"," ")),formattedDifficulty:Us(t.meta._difficulty_level),formattedDate:Fs(t.date),shortExplanation:Bs(r,100),fullExplanation:r,isPublished:"publish"===t.status}},Rl=ds("question","questions",{sanitizer:zl,validator:e=>{const t=[],r=$s(e.title,"Question title");r&&t.push(r);const s=e.type||e.meta?._question_type;return"multiple_choice"!==s&&"true_false"!==s||(!e.options||e.options.length<1?t.push("At least one option is required."):e.options.some(e=>e.isCorrect)||t.push("At least one option must be marked as correct.")),Hs(t)},transformer:e=>{console.log("🔄 transformQuestionDataForApi - Input:",e);const t={title:Ss(e.title),content:Ss(e.explanation||""),status:Rs(e.status,"publish"),qe_category:zs(e.qe_category),qe_provider:e.provider?[qs(e.provider)]:[],meta:{}};return t.meta._course_id=qs(e.courseId,0),t.meta._question_lesson=qs(e.lessonId,0),t.meta._quiz_ids=zs(e.quizIds),t.meta._explanation=Ss(e.explanation),t.meta._question_type=Is(e.type,Al,"multiple_choice"),t.meta._difficulty_level=Is(e.difficulty,Ll,"medium"),t.meta._points=qs(e.points,1,0),t.meta._points_incorrect=qs(e.pointsIncorrect,0,0),Array.isArray(e.options)&&(t.meta._question_options=e.options.map((e,t)=>({id:t,text:Ss(e.text),isCorrect:Ts(e.isCorrect)}))),console.log("🔄 transformQuestionDataForApi - Output:",t),t},buildParams:(e={})=>{const t=us(e);return e.quizId&&t.append("quiz_id",e.quizId.toString()),t}}),Il=async(e={})=>Rl.getAll(e),Dl=async(e,t={})=>Rl.getOne(e,t),$l=async e=>Rl.create(e),Fl=async(e,t)=>Rl.update(e,t),Ul=async e=>Rl.delete(e),Bl=Il,Ql=Dl,Hl=$l,Vl=Fl,Kl=Ul,Wl=async(e,t={})=>{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid quiz ID provided");return console.log("📝 Getting questions for quiz:",e),Bl({...t,quizId:e})},Gl=async e=>Rl.duplicate(e),Yl=async(e={})=>Rl.getCount(e),Xl=async e=>{try{return!!await Ql(e)}catch(e){return!1}},Jl=async(e,t)=>Fl(e,{status:t}),Zl=async(e,t)=>Fl(e,{meta:{_question_order:t}}),ec=async(e,t={})=>Bl({...t,questionType:e}),tc=async(e,t={})=>Bl({...t,difficulty:e}),rc=async(e,t={})=>Bl({...t,category:e}),sc=async(e,t={})=>Bl({...t,provider:e}),nc=async(e={})=>Bl({...e,status:"publish"}),ac=async e=>{try{const t=await Ql(e);return{id:t.id,type:t.meta?._question_type||"multiple_choice",difficulty:t.meta?._difficulty_level||"medium",points:t.meta?._points||1,optionsCount:t.meta?._question_options?.length||0,correctAnswersCount:t.meta?._question_options?.filter(e=>e.isCorrect)?.length||0,isRequired:t.meta?._is_required||!1,provider:t.meta?._provider||"custom"}}catch(e){throw console.error("❌ Error getting question statistics:",e),e}},oc=async e=>{try{console.log(`📝 Bulk creating ${e.length} questions...`);const t=e.map(e=>$l(e)),r=await Promise.all(t);return console.log(`✅ Successfully created ${r.length} questions`),r}catch(e){throw console.error("❌ Error in bulk question creation:",e),e}},ic=(e={})=>{const t=(0,o.useMemo)(()=>e=>Ml(e),[]),r=(0,o.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,totalPoints:0,trueFalseQuestions:0,essayQuestions:0,byDifficulty:{}};let r=0,s=0,n=0;const a={easy:0,medium:0,hard:0};return e.forEach(e=>{r+=e.meta?._points||0;const t=e.meta?._question_type,o=e.meta?._difficulty_level||"medium";"true_false"===t&&s++,"essay"===t&&n++,a.hasOwnProperty(o)&&a[o]++}),{total:t,totalPoints:r,trueFalseQuestions:s,essayQuestions:n,byDifficulty:a}},[]),s=ks({service:n,resourceName:"question",initialFilters:{search:e.search||"",quizId:e.quizId||null,type:e.type||null,difficulty:e.difficulty||null,category:e.category||null,status:e.status||"publish,draft,private"},dataProcessor:t,computedValuesCalculator:r,...e}),{items:a,fetchItems:i,loadMore:l,createItem:c,updateItem:u,deleteItem:d,duplicateItem:p,refresh:h}=s;return{...s,questions:a,fetchQuestions:i,loadMoreQuestions:l,createQuestion:c,updateQuestion:u,deleteQuestion:d,duplicateQuestion:p,refreshQuestions:h}},lc=ic,cc={primary:"qe-btn-primary",secondary:"qe-btn-secondary",accent:"qe-btn-accent",ghost:"qe-btn-ghost"},uc=({variant:e="primary",className:t="",style:r={},children:s,disabled:n,...a})=>{const o=cc[e]||cc.primary;return(0,Br.jsx)("button",{type:"button",className:`${o} ${t}`.trim(),style:r,disabled:n,...a,children:s})},dc=({question:e,onRemove:t})=>{const{attributes:r,listeners:s,setNodeRef:n,transform:a,transition:o}=ll({id:e.id}),i={transform:io.Transform.toString(a),transition:o};return(0,Br.jsxs)("div",{ref:n,style:i,className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Br.jsx)("button",{type:"button",...r,...s,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,Br.jsx)(Aa,{className:"h-5 w-5"})}),(0,Br.jsx)("div",{children:(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title?.rendered||e.title})})]}),(0,Br.jsx)("button",{type:"button",onClick:()=>t(e.id),className:"text-red-600 hover:text-red-800",children:(0,Br.jsx)(La,{className:"w-4 h-4"})})]})},pc=({onAddQuestion:e,onCreateNew:t,selectedQuestions:r})=>{const{t:s}=N(),[n,a]=(0,o.useState)(""),{questions:i,loading:l,error:c,fetchItems:u}=ic({autoFetch:!1}),d=e=>{e.preventDefault(),n.trim()&&u(!0,{search:n})};return(0,Br.jsxs)("div",{className:"space-y-4",children:[(0,Br.jsx)("h4",{className:"font-medium text-gray-800",children:s("quizzes.form.addQuestions")}),(0,Br.jsxs)("div",{className:"flex gap-2",children:[(0,Br.jsx)("input",{type:"text",value:n,onChange:e=>a(e.target.value),onKeyDown:e=>{"Enter"===e.key&&d(e)},placeholder:s("quizzes.form.searchPlaceholder"),className:"flex-1 input border-gray-300 rounded-md"}),(0,Br.jsxs)(uc,{onClick:d,disabled:l,variant:"primary",className:"font-semibold py-2 px-3 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,Br.jsx)(Ea,{className:"w-4 h-4"}),s(l?"common.searching":"common.search")]}),(0,Br.jsxs)(uc,{onClick:t,variant:"ghost",className:"font-semibold py-2 px-3 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,Br.jsx)(Ma,{className:"w-4 h-4"}),s("common.createNew")]})]}),c&&(0,Br.jsx)("p",{className:"text-sm text-red-600",children:c.message}),i.length>0&&(0,Br.jsx)("div",{className:"border rounded-md max-h-48 overflow-y-auto bg-white",children:i.map(t=>{const n=r.some(e=>e.id===t.id);return(0,Br.jsxs)("div",{className:"flex justify-between items-center p-3 border-b last:border-b-0",children:[(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.title?.rendered||"Untitled"}),(0,Br.jsx)("button",{onClick:()=>e(t),disabled:n,className:"text-sm font-semibold py-1 px-3 rounded-full "+(n?"bg-gray-200 text-gray-500":"bg-green-100 text-green-700 hover:bg-green-200"),children:s(n?"common.added":"common.add")})]},t.id)})})]})},hc=({quizId:e,mode:t,onSave:r,onCancel:s,availableCourses:n,availableCategories:a,isContextual:i=!1})=>{const{t:l}=N(),[c,u]=(0,o.useState)(!1),[d,p]=(0,o.useState)(!1),[h,f]=(0,o.useState)(null),[m,g]=(0,o.useState)(0),[y,x]=(0,o.useState)({}),[b,v]=(0,o.useState)([]),_=jo(_o(pi)),{questions:j}=ic({perPage:100}),w=(0,o.useCallback)(()=>{x({title:"",content:"",status:"publish",courseId:"",qe_category:[],difficulty_level:"medium",passing_score:"70",time_limit:"",max_attempts:"",randomize_questions:!1,show_results:!0,enable_negative_scoring:!1,questionIds:[]}),v([])},[]);(0,o.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&w();else{u(!0),f(null);try{const t=await na(e),r=t.meta||{};x({title:t.title?.rendered||"",content:t.content?.rendered||r._quiz_instructions||"",status:t.status||"publish",courseId:r._course_id?.toString()||"",qe_category:Array.isArray(t.qe_category)?t.qe_category.map(String):[],difficulty_level:r._difficulty_level||"medium",passing_score:r._passing_score?.toString()||"70",time_limit:r._time_limit?.toString()||"",max_attempts:r._max_attempts?.toString()||"",randomize_questions:r._randomize_questions||!1,show_results:void 0===r._show_results||r._show_results,enable_negative_scoring:r._enable_negative_scoring||!1,questionIds:r._quiz_question_ids||[]});const s=(r._quiz_question_ids||[]).map(e=>j.find(t=>t.id===e)).filter(Boolean);v(s)}catch(e){f(l("errors.fetchQuiz"))}finally{u(!1)}}})()},[e,t,l,j,w]);const k=(e,t)=>{x(r=>({...r,[e]:t}))},C=e=>{const t=b.filter(t=>t.id!==e);v(t),k("questionIds",t.map(e=>e.id))};if(c)return(0,Br.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Br.jsx)("p",{children:l("common.loading")})});const E=[{value:"easy",label:l("common.easy")},{value:"medium",label:l("common.medium")},{value:"hard",label:l("common.hard")}],S=(0,Br.jsxs)("div",{className:"space-y-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.title")}),(0,Br.jsx)("input",{type:"text",value:y.title||"",onChange:e=>k("title",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.course")}),(0,Br.jsxs)("select",{value:y.courseId||"",onChange:e=>k("courseId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Br.jsx)("option",{value:"",children:l("common.select")}),n.map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.category")}),(0,Br.jsxs)("select",{value:y.qe_category?.[0]||"",onChange:e=>k("qe_category",[e.target.value]),className:"w-full input border-gray-300 rounded-md",children:[(0,Br.jsx)("option",{value:"",children:l("common.select")}),a.map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.difficulty")}),(0,Br.jsx)("select",{value:y.difficulty_level||"medium",onChange:e=>k("difficulty_level",e.target.value),className:"w-full input border-gray-300 rounded-md",children:E.map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.instructions")}),(0,Br.jsx)(Ia(),{theme:"snow",value:y.content||"",onChange:e=>k("content",e)})]}),(0,Br.jsxs)("div",{className:"border-t pt-6",children:[(0,Br.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:l("common.settings")}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.passingScore")}),(0,Br.jsx)("input",{type:"number",min:"0",max:"100",value:y.passing_score||"",onChange:e=>k("passing_score",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.timeLimit")}),(0,Br.jsx)("input",{type:"number",min:"0",value:y.time_limit||"",onChange:e=>k("time_limit",e.target.value),placeholder:l("common.unlimited"),className:"w-full input border-gray-300 rounded-md"})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:l("quizzes.form.maxAttempts")}),(0,Br.jsx)("input",{type:"number",min:"0",value:y.max_attempts||"",onChange:e=>k("max_attempts",e.target.value),placeholder:l("common.unlimited"),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,Br.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,Br.jsxs)("label",{className:"flex items-center",children:[(0,Br.jsx)("input",{type:"checkbox",checked:y.randomize_questions||!1,onChange:e=>k("randomize_questions",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,Br.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:l("quizzes.form.randomize")})]}),(0,Br.jsxs)("label",{className:"flex items-center",children:[(0,Br.jsx)("input",{type:"checkbox",checked:y.show_results||!1,onChange:e=>k("show_results",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,Br.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:l("quizzes.form.showResults")})]}),(0,Br.jsxs)("label",{className:"flex items-center",children:[(0,Br.jsx)("input",{type:"checkbox",checked:y.enable_negative_scoring||!1,onChange:e=>k("enable_negative_scoring",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,Br.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:l("quizzes.form.negativeScoring")})]})]})]})]}),q=(0,Br.jsxs)("div",{className:"space-y-6",children:[(0,Br.jsx)(pc,{onAddQuestion:e=>{if(!b.some(t=>t.id===e.id)){const t=[...b,e];v(t),k("questionIds",t.map(e=>e.id))}},onCreateNew:()=>alert("Próximamente: Crear nueva pregunta desde aquí."),selectedQuestions:b}),(0,Br.jsxs)("div",{children:[(0,Br.jsxs)("h4",{className:"font-medium text-gray-800 mb-2",children:[l("quizzes.form.selectedQuestions")," (",b.length,")"]}),b.length>0?(0,Br.jsx)(Bi,{sensors:_,collisionDetection:So,onDragEnd:e=>{const{active:t,over:r}=e;if(t.id!==r?.id){const e=b.findIndex(e=>e.id===t.id),s=b.findIndex(e=>e.id===r.id),n=Ki(b,e,s);v(n),k("questionIds",n.map(e=>e.id))}},children:(0,Br.jsx)(tl,{items:b.map(e=>e.id),strategy:Ji,children:(0,Br.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,Br.jsx)(dc,{question:e,onRemove:C},e.id))})})}):(0,Br.jsx)("p",{className:"text-sm text-gray-500 p-4 border rounded-md text-center bg-gray-50",children:l("quizzes.form.noQuestions")})]})]}),O=[{name:l("common.settings"),content:S},{name:l("common.questions"),content:q}],T="create"===t?l("quizzes.createNew"):l("quizzes.editTitle",{title:y.title||"..."});return(0,Br.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full",children:[(0,Br.jsxs)("header",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[(0,Br.jsx)("h3",{className:"text-lg font-bold text-gray-800 truncate pr-4",children:T}),(0,Br.jsxs)("div",{className:"flex items-center gap-4",children:[i&&(0,Br.jsxs)("button",{onClick:s,className:"text-gray-600 hover:text-gray-900 flex items-center gap-2 text-sm font-semibold",children:[(0,Br.jsx)(Tl,{className:"w-4 h-4"})," Volver"]}),(0,Br.jsxs)(uc,{onClick:async()=>{p(!0),f(null);try{const e={title:y.title,content:y.content,status:y.status,meta:{_course_id:y.courseId,_difficulty_level:y.difficulty_level,_passing_score:y.passing_score,_time_limit:""===y.time_limit?0:parseInt(y.time_limit,10),_max_attempts:""===y.max_attempts?0:parseInt(y.max_attempts,10),_randomize_questions:y.randomize_questions,_show_results:y.show_results,_enable_negative_scoring:y.enable_negative_scoring,_quiz_question_ids:y.questionIds},qe_category:y.qe_category.map(e=>parseInt(e,10)).filter(e=>!isNaN(e)&&e>0)};await r(e)}catch(e){f(e.message||l("errors.saveQuiz"))}finally{p(!1)}},disabled:d,variant:"primary",className:"font-semibold py-2 px-4 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,Br.jsx)(jl,{className:"w-4 h-4"}),l(d?"common.saving":"common.save")]}),!i&&(0,Br.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-800",children:(0,Br.jsx)(fs,{className:"h-5 w-5"})})]})]}),(0,Br.jsxs)("main",{className:"flex-1 overflow-y-auto p-6",children:[h&&(0,Br.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:h}),(0,Br.jsx)(ul,{tabs:O,activeTab:m,setActiveTab:g})]})]})},fc=()=>{const{t:e}=N(),[t,r]=(0,o.useState)([{type:"courseList"}]),s=wn({autoFetch:!0,perPage:50}),n=Xn({autoFetch:!1}),a=_a({autoFetch:!1}),{options:i,refetch:l}=ka(["qe_category"]),c=e=>{r([{type:"courseList"},{type:"course",id:e.id}])},u=()=>{r([{type:"courseList"},{type:"course",id:"new"}])},d=()=>{r(e=>e.slice(0,-1))},p=(e,t)=>{r(r=>[...r,{type:e,id:"new",onCreated:t}])},h=async(e,r)=>{let o,i;if("lesson"===r?(o=n,i="createLesson"):"quiz"===r&&(o=a,i="createQuiz"),o&&i)try{const r=t[t.length-1],a=await o[i](e);r.onCreated&&r.onCreated(a),d(),s.refresh(),n.refresh()}catch(e){console.error(`Failed to create ${r} in context:`,e)}},f=(0,o.useMemo)(()=>i.qe_category||[],[i.qe_category]),m=(0,o.useMemo)(()=>(s.courses||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[s.courses]),g=(0,o.useMemo)(()=>({value:s.filters?.search||"",onChange:e=>s.updateFilter("search",e.target.value),placeholder:e("courses.searchPlaceholder"),isLoading:s.loading}),[s.filters,s.loading,e]),y=(0,o.useMemo)(()=>s.filters?[{label:e("filters.category"),value:s.filters.category||"all",onChange:e=>s.updateFilter("category",e),options:f,isLoading:!i.qe_category}]:[],[s.filters,f,i.qe_category,e]);if(!s.filters||!s.computed)return(0,Br.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Br.jsx)("p",{children:e("common.loading")})});const x={1:["20%"],2:["20%","79%"],3:["20%","7%","71%"],4:["20%","7%","7%","63%"]},b=x[t.length]||x[4],v=(r,n)=>{const a=!(n===t.length-1);switch(r.type){case"courseList":return(0,Br.jsx)(Ca,{title:e("courses.title"),itemCount:s.computed.totalCourses||0,createButtonText:e("courses.addNew"),onCreate:u,isCreating:s.creating,filters:(0,Br.jsx)(qa,{searchConfig:g,filtersConfig:y}),children:(s.courses||[]).map(e=>(0,Br.jsx)(Pa,{course:e,isSelected:t[1]?.id===e.id,onClick:c},e.id))});case"course":return(0,Br.jsx)(ml,{courseId:"new"===r.id?null:r.id,mode:"new"===r.id?"create":"edit",onSave:"new"===r.id?s.createCourse:e=>s.updateCourse(r.id,e),onCancel:d,onTriggerCreation:p,isCollapsed:a,categoryOptions:f.filter(e=>"all"!==e.value),onCategoryCreated:l},r.id);case"lesson":return(0,Br.jsx)(Ol,{lessonId:"new"===r.id?null:r.id,mode:"create",onSave:e=>h(e,"lesson"),onCancel:d,availableCourses:m,onTriggerCreation:p,isCollapsed:a,isContextual:!0},r.id);case"quiz":return(0,Br.jsx)(hc,{mode:"create",onSave:e=>h(e,"quiz"),onCancel:d,availableCourses:m,availableCategories:[],onTriggerCreation:p,isCollapsed:a,isContextual:!0},r.id);default:return null}};return(0,Br.jsx)("div",{className:"qe-lms-admin-app h-full flex overflow-hidden px-6 py-6 space-x-6",children:t.map((e,t)=>(0,Br.jsx)("div",{className:"transition-all duration-300 ease-in-out h-full flex-shrink-0",style:{width:b[t]},children:v(e,t)},`${e.type}-${e.id}-${t}`))})},mc=rs("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),gc=rs("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),yc=({lesson:e,isSelected:t,onClick:r})=>{const{t:s}=N(),n=e=>e?.title?.rendered||e?.title||s("lessons.untitled","Untitled Lesson"),a=sr("p-4 cursor-pointer border-l-4 transition-colors duration-150",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t});return(0,Br.jsx)("div",{className:a,onClick:()=>r(e),children:(0,Br.jsxs)("div",{className:"flex items-center w-full gap-4",children:[(0,Br.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:(0,Br.jsx)(mc,{className:"w-5 h-5 text-green-600"})}),(0,Br.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Br.jsx)("p",{className:"text-sm font-semibold text-gray-900 truncate",title:n(e),children:n(e)}),(0,Br.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[(0,Br.jsx)(gc,{className:"w-3 h-3"}),(0,Br.jsxs)("span",{children:[e.steps_count||0," Pasos"]})]})]})]})})},xc=()=>{const{t:e}=N(),[t,r]=(0,o.useState)(null),[s,n]=(0,o.useState)("view"),[a,i]=(0,o.useState)({isActive:!1,childType:null,onCreated:null}),l=Xn({autoFetch:!0,perPage:50}),c=wn({autoFetch:!0,perPage:100}),u=_a({autoFetch:!0,perPage:100}),d=e=>{r(e.id),n("edit")},p=()=>{i({isActive:!1,childType:null,onCreated:null})},h=(0,o.useMemo)(()=>[{value:"all",label:e("courses.category.all")},...(c.courses||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title}))],[c.courses,e]),f=(0,o.useMemo)(()=>l.filters&&l.updateFilter?[{label:"Curso",value:l.filters.courseId||"all",onChange:e=>l.updateFilter("courseId",e),options:h,isLoading:c.loading}]:[],[l.filters,l.updateFilter,h,c.loading,e]),m=(0,o.useMemo)(()=>l.filters&&l.updateFilter?{value:l.filters.search||"",onChange:e=>l.updateFilter("search",e.target.value),placeholder:e("lessons.searchPlaceholder","Buscar lecciones..."),isLoading:l.loading}:{value:"",onChange:()=>{},placeholder:e("lessons.searchPlaceholder","Buscar lecciones..."),isLoading:!1},[l.filters,l.updateFilter,l.loading,e]);if(!l.filters||!l.computed||!c.courses)return(0,Br.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Br.jsx)("p",{children:e("common.loading")})});const g=a.isActive&&"quiz"===a.childType;return(0,Br.jsxs)("div",{className:"qe-lms-admin-app h-full flex overflow-hidden px-6",children:[(0,Br.jsx)("div",{className:sr("transition-all duration-500 ease-in-out h-full flex-shrink-0",{"w-full lg:w-[20%]":!g,"w-[20%] opacity-60 pointer-events-none":g}),children:(0,Br.jsx)(Ca,{title:"Lecciones",itemCount:l.computed.total||0,createButtonText:"Crear Lección",onCreate:()=>{r(null),n("create")},isCreating:l.creating,filters:(0,Br.jsx)(qa,{searchConfig:m,filtersConfig:f}),children:(l.lessons||[]).map(e=>(0,Br.jsx)(yc,{lesson:e,isSelected:t===e.id,onClick:d},e.id))})}),(0,Br.jsx)("div",{className:sr("transition-all duration-500 ease-in-out h-full flex-shrink-0",{"flex-1":!g&&(t||"create"===s),"w-0":!t&&!g&&"create"!==s,"w-[7%]":g}),children:("edit"===s||"create"===s)&&(0,Br.jsx)(Ol,{lessonId:t,mode:s,onSave:"create"===s?l.createLesson:e=>l.updateLesson(t,e),onCancel:()=>n("view"),availableCourses:h.filter(e=>"all"!==e.value),onTriggerCreation:(e,t)=>{i({isActive:!0,childType:e,onCreated:t})},isCollapsed:g},t||"new")}),(0,Br.jsx)("div",{className:sr("transition-all duration-500 ease-in-out h-full",{"flex-1":g,"w-0":!g}),children:g&&(0,Br.jsx)(hc,{mode:"create",onSave:async e=>{if("quiz"===a.childType)try{const t=await u.createQuiz(e);a.onCreated&&a.onCreated(t.id),p()}catch(e){console.error("Failed to create quiz in context:",e)}},onCancel:p,availableCourses:h.filter(e=>"all"!==e.value),availableCategories:[],isContextual:!0})})]})},bc=({master:e,detail:t})=>(0,Br.jsxs)("div",{className:"grid grid-cols-10 gap-6 h-full max-w-screen mx-auto",children:[(0,Br.jsx)("div",{className:"col-span-10 lg:col-span-2 h-[calc(100vh-8rem)]",children:e}),(0,Br.jsx)("div",{className:"col-span-10 lg:col-span-8 h-[calc(100vh-8rem)]",children:t})]}),vc=({quiz:e,isSelected:t,onClick:r})=>{const{t:s}=N(),n=sr("p-4 cursor-pointer border-l-4",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t});return(0,Br.jsxs)("li",{onClick:r,className:n,children:[(0,Br.jsx)("h3",{className:sr("font-semibold",{"text-blue-800":t,"text-gray-900":!t}),children:e.title?.rendered||e.title||s("common.untitled")}),(0,Br.jsxs)("div",{className:sr("text-sm mt-1 flex items-center space-x-4",{"text-blue-700":t,"text-gray-500":!t}),children:[(0,Br.jsxs)("span",{className:"flex items-center",title:s("quizzes.card.questions",{count:e.question_count}),children:[(0,Br.jsx)(xl,{className:"w-4 h-4 mr-1"}),e.question_count||0]}),(0,Br.jsxs)("span",{className:"flex items-center",title:s("quizzes.card.attempts",{count:e.total_attempts}),children:[(0,Br.jsx)(gs,{className:"w-4 h-4 mr-1"}),e.total_attempts||0]})]})]})},_c=()=>{const{t:e}=N(),[t,r]=(0,o.useState)(null),[s,n]=(0,o.useState)("view"),{quizzes:a,loading:i,error:l,pagination:c,creating:u,filters:d,updateFilter:p,createQuiz:h,updateQuiz:f}=_a({autoFetch:!0,perPage:50}),{courses:m,loading:g}=wn({autoFetch:!0,perPage:100}),{options:y,isLoading:x}=ka(["qe_category"]),b={value:d.search,onChange:e=>p("search",e.target.value),placeholder:e("quizzes.searchPlaceholder"),isLoading:i},v=(0,o.useMemo)(()=>(m||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[m]),_=(0,o.useMemo)(()=>(y.qe_category||[]).filter(e=>"all"!==e.value),[y.qe_category]),j=[{label:e("quizzes.form.course"),value:d.courseId||"all",onChange:e=>p("courseId",e),options:[{value:"all",label:e("courses.all")},...v],isLoading:g},{label:e("quizzes.form.category"),value:d.category||"all",onChange:e=>p("category",e),options:y.qe_category||[{value:"all",label:e("courses.category.all")}],isLoading:x}],w=(0,Br.jsx)(Ca,{title:e("quizzes.title"),itemCount:c.total||0,createButtonText:e("quizzes.createNew"),onCreate:()=>{r(null),n("create")},isCreating:u,filters:(0,Br.jsx)(qa,{searchConfig:b,filtersConfig:j}),children:i&&0===a.length?(0,Br.jsx)("p",{className:"p-4 text-center text-gray-500",children:e("common.loading")}):(0,Br.jsx)("ul",{className:"divide-y divide-gray-200",children:a.map(e=>(0,Br.jsx)(vc,{quiz:e,isSelected:t===e.id,onClick:()=>{return t=e.id,r(t),void n("edit");var t}},e.id))})}),k="edit"===s||"create"===s?(0,Br.jsx)(hc,{quizId:t,mode:s,onSave:async e=>{if("create"===s){const t=await h(e);r(t.id),n("edit")}else"edit"===s&&await f(t,e)},availableCourses:v,availableCategories:_},t||"create"):(0,Br.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full justify-center items-center",children:(0,Br.jsx)("div",{className:"text-center text-gray-500",children:(0,Br.jsx)("p",{children:e("quizzes.selectQuizToStart")})})});return(0,Br.jsxs)("div",{className:"bg-gray-100 h-full",children:[l&&(0,Br.jsx)("p",{className:"text-red-500 bg-red-50 p-4 rounded-md mb-4",children:l}),(0,Br.jsx)(bc,{master:w,detail:k})]})},jc=rs("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),wc=rs("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Nc=rs("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),kc=rs("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Cc=rs("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Ec=rs("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Sc=rs("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),qc=rs("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Oc=rs("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Tc=rs("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Pc=rs("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),Ac=({item:e,viewMode:t="cards",actions:r=[],children:s,className:n="",header:a,footer:l,onClick:c,clickable:u=!1})=>{const[d,p]=(0,o.useState)(!1),h="bg-white border border-gray-200 transition-shadow "+(u?"cursor-pointer hover:shadow-lg":"shadow-sm hover:shadow-md"),f="cards"===t?"rounded-lg p-6":"rounded-md p-4 flex items-center space-x-4";return(0,Br.jsxs)("div",{className:`${h} ${f} ${n}`,onClick:t=>{t.target.closest(".dropdown-menu")||t.target.closest(".dropdown-trigger")||c&&u&&c(e)},children:[a&&(0,Br.jsx)("div",{className:"mb-4",children:a}),(0,Br.jsx)("div",{className:"list"===t?"flex-1":"",children:s}),l&&(0,Br.jsx)("div",{className:"mt-4",children:l}),r.length>0&&(0,Br.jsxs)("div",{className:"relative",children:[(0,Br.jsx)("button",{onClick:e=>{e.stopPropagation(),p(!d)},className:"dropdown-trigger p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:(0,Br.jsx)(Pc,{className:"h-5 w-5"})}),d&&(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),(0,Br.jsx)("div",{className:"dropdown-menu absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200 z-20",children:(0,Br.jsx)("div",{className:"py-1",children:r.map((t,r)=>(0,Br.jsxs)(i().Fragment,{children:[(0,Br.jsxs)("button",{onClick:r=>((t,r)=>{r.stopPropagation(),p(!1),t.onClick&&t.onClick(e)})(t,r),className:`w-full text-left px-4 py-2 text-sm flex items-center space-x-2 hover:bg-gray-50 ${t.color||"text-gray-700"}`,children:[t.icon&&(0,Br.jsx)(t.icon,{className:"h-4 w-4"}),(0,Br.jsx)("span",{children:t.label})]}),t.divider&&(0,Br.jsx)("div",{className:"border-t border-gray-100 my-1"})]},r))})})]})]})]})},Lc=({user:e,viewMode:t="cards",onEnroll:r,onUnenroll:s,onUpdateRole:n,onView:a,showEnrollment:o=!0,showProgress:i=!0,courseId:l=null,className:c=""})=>{const u=e.roles?.[0]||"subscriber",d=e.enrollmentData?.isEnrolled||!1,p=e.enrollmentData?.progress||0,h=e.enrollmentData?.enrollmentDate,f=e.enrollmentData?.lastActivity,m=e.date_registered||e.registered,g=e.avatar_urls?.[96]||e.avatar_urls?.[48]||null,y=e.name?e.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase():e.username?.charAt(0).toUpperCase()||"U",x=e=>{switch(e){case"administrator":return"text-red-600 bg-red-100";case"editor":return"text-purple-600 bg-purple-100";case"author":return"text-blue-600 bg-blue-100";case"contributor":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},b=e=>e?new Date(e).toLocaleDateString():"N/A",v=(e=>{if(!e)return{status:"inactive",label:"Never",color:"text-gray-500"};const t=new Date(e),r=new Date,s=Math.floor((r-t)/864e5);return 0===s?{status:"today",label:"Today",color:"text-green-600"}:s<=7?{status:"recent",label:`${s}d ago`,color:"text-green-500"}:s<=30?{status:"moderate",label:`${s}d ago`,color:"text-yellow-500"}:{status:"inactive",label:`${s}d ago`,color:"text-red-500"}})(f),_=[{label:"View Details",icon:wc,onClick:a,color:"text-blue-600"},...o&&l?[d?{label:"Unenroll",icon:Nc,onClick:()=>s?.(e.id,l),color:"text-red-600"}:{label:"Enroll",icon:jc,onClick:()=>r?.(e.id,l),color:"text-green-600"}]:[],{label:"Update Role",icon:kc,onClick:()=>n?.(e.id),color:"text-purple-600"}].filter(e=>e.onClick);return(0,Br.jsx)(Ac,{item:e,viewMode:t,actions:_,className:c,clickable:!!a,onClick:a?()=>a(e):void 0,children:"cards"===t?(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsxs)("div",{className:"flex items-center mb-4",children:[(0,Br.jsx)("div",{className:"flex-shrink-0 mr-3",children:g?(0,Br.jsx)("img",{src:g,alt:e.name||e.username,className:"h-12 w-12 rounded-full object-cover"}):(0,Br.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Br.jsx)("span",{className:"text-lg font-medium text-gray-600",children:y})})}),(0,Br.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Br.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name||e.username||"Unknown User"}),(0,Br.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,Br.jsxs)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x(u)}`,children:[(0,Br.jsx)(Cc,{className:"h-3 w-3 mr-1"}),u]}),o&&l&&(0,Br.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(d?"text-green-600 bg-green-100":"text-gray-600 bg-gray-100"),children:d?(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)(ms,{className:"h-3 w-3 mr-1"}),"Enrolled"]}):(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)(Ec,{className:"h-3 w-3 mr-1"}),"Not Enrolled"]})})]})]})]}),(0,Br.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,Br.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Br.jsx)(Sc,{className:"h-4 w-4 mr-2"}),(0,Br.jsx)("span",{className:"truncate",children:e.email||"No email"})]}),(0,Br.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Br.jsx)(qc,{className:"h-4 w-4 mr-2"}),(0,Br.jsxs)("span",{children:["Registered ",b(m)]})]}),(0,Br.jsxs)("div",{className:"flex items-center text-sm",children:[(0,Br.jsx)(Oc,{className:"h-4 w-4 mr-2 text-gray-400"}),(0,Br.jsxs)("span",{className:v.color,children:["Last active: ",v.label]})]})]}),o&&l&&d&&(0,Br.jsxs)("div",{className:"space-y-3 mb-4 p-3 bg-blue-50 rounded-lg",children:[(0,Br.jsx)("h4",{className:"text-sm font-medium text-blue-900",children:"Course Enrollment"}),(0,Br.jsxs)("div",{className:"flex items-center text-sm text-blue-700",children:[(0,Br.jsx)(qc,{className:"h-3 w-3 mr-2"}),(0,Br.jsxs)("span",{children:["Enrolled ",b(h)]})]}),i&&(0,Br.jsxs)("div",{className:"space-y-1",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,Br.jsx)("span",{className:"text-blue-700",children:"Progress"}),(0,Br.jsxs)("span",{className:"font-medium text-blue-900",children:[p,"%"]})]}),(0,Br.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2",children:(0,Br.jsx)("div",{className:`h-2 rounded-full transition-all duration-300 ${(e=>e>=80?"bg-green-500":e>=50?"bg-yellow-500":e>=20?"bg-orange-500":"bg-red-500")(p)}`,style:{width:`${p}%`}})})]})]}),(0,Br.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-400 pt-3 border-t border-gray-100",children:[(0,Br.jsxs)("span",{children:["ID: ",e.id]}),(0,Br.jsx)("span",{children:e.username})]})]}):(0,Br.jsxs)("div",{className:"flex items-center w-full",children:[(0,Br.jsx)("div",{className:"flex-shrink-0 mr-4",children:g?(0,Br.jsx)("img",{src:g,alt:e.name||e.username,className:"h-10 w-10 rounded-full object-cover"}):(0,Br.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,Br.jsx)("span",{className:"text-sm font-medium text-gray-600",children:y})})}),(0,Br.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.name||e.username||"Unknown User"}),(0,Br.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,Br.jsx)("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${x(u)}`,children:u}),o&&l&&(0,Br.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(d?"text-green-600 bg-green-100":"text-gray-600 bg-gray-100"),children:d?"Enrolled":"Not Enrolled"})]})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500",children:[(0,Br.jsx)("span",{className:"truncate",children:e.email}),(0,Br.jsxs)("span",{children:["Registered ",b(m)]}),(0,Br.jsx)("span",{className:v.color,children:v.label}),i&&d&&(0,Br.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Br.jsx)(Tc,{className:"h-3 w-3"}),(0,Br.jsxs)("span",{children:[p,"%"]})]})]})]})]})})},zc=({currentMode:e,onModeChange:t,modes:r=[],className:s="",size:n="sm"})=>{if(!r.length)return null;const a={xs:"p-1 text-xs",sm:"p-2 text-sm",md:"p-3 text-base",lg:"p-4 text-lg"},o={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return(0,Br.jsx)("div",{className:`flex items-center border border-gray-200 rounded-lg p-1 ${s}`,children:r.map(r=>{const s=r.icon,i=e===r.value;return(0,Br.jsxs)("button",{onClick:()=>t(r.value),className:`${a[n]} rounded flex items-center space-x-1 transition-colors ${i?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}`,title:`Switch to ${r.label} view`,children:[s&&(0,Br.jsx)(s,{className:o[n]}),(0,Br.jsx)("span",{children:r.label})]},r.value)})})},Mc=({size:e="default",message:t,variant:r="default",centered:s=!0,className:n="",fullScreen:a=!1,overlay:o=!1})=>{const i={xs:{spinner:"h-3 w-3",text:"text-xs"},sm:{spinner:"h-4 w-4",text:"text-sm"},default:{spinner:"h-6 w-6",text:"text-base"},lg:{spinner:"h-8 w-8",text:"text-lg"},xl:{spinner:"h-12 w-12",text:"text-xl"}}[e],l={default:{spinner:"text-gray-400",text:"text-gray-600"},primary:{spinner:"text-indigo-600",text:"text-indigo-600"},white:{spinner:"text-white",text:"text-white"}}[r],c=[s&&"flex flex-col items-center justify-center",a&&"fixed inset-0 z-50",a&&o&&"bg-black bg-opacity-50",!a&&s&&"py-8",n].filter(Boolean).join(" "),u=["flex flex-col items-center justify-center",t?"space-y-3":"",a&&"bg-white rounded-lg p-8 shadow-lg"].filter(Boolean).join(" ");return(0,Br.jsx)("div",{className:c,children:(0,Br.jsxs)("div",{className:u,children:[(0,Br.jsx)(ss,{className:`${i.spinner} ${l.spinner} animate-spin`}),t&&(0,Br.jsx)("p",{className:`${i.text} ${l.text} font-medium`,children:t})]})})},Rc=({icon:e,title:t,description:r,actionText:s,onAction:n,actionVariant:a="primary",size:o="default",className:i="",children:l})=>{const c={small:{container:"py-6",icon:"h-8 w-8",title:"text-lg",description:"text-sm",spacing:"space-y-3"},default:{container:"py-12",icon:"h-12 w-12",title:"text-xl",description:"text-base",spacing:"space-y-4"},large:{container:"py-20",icon:"h-16 w-16",title:"text-2xl",description:"text-lg",spacing:"space-y-6"}}[o];return(0,Br.jsx)("div",{className:`text-center ${c.container} ${i}`,children:(0,Br.jsxs)("div",{className:`mx-auto ${c.spacing}`,children:[e&&(0,Br.jsx)("div",{className:"mx-auto flex items-center justify-center",children:(0,Br.jsx)(e,{className:`${c.icon} text-gray-400`,strokeWidth:1.5})}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h3",{className:`${c.title} font-semibold text-gray-900`,children:t}),r&&(0,Br.jsx)("p",{className:`mt-2 ${c.description} text-gray-500 max-w-sm mx-auto`,children:r})]}),l,s&&n&&(0,Br.jsx)("div",{children:(0,Br.jsx)(os,{variant:a,onClick:n,className:"inline-flex items-center",children:s})})]})})},Ic=({title:e="Items",description:t,createButtonText:r="Create Item",onCreateClick:s,statistics:n=[],items:a=[],loading:o=!1,viewMode:i="cards",onViewModeChange:l,viewModes:c=[{value:"cards",label:"Cards"},{value:"list",label:"List"}],children:u,emptyStateComponent:d,filtersComponent:p,emptyState:h,className:f="",showStatistics:m=!0,showViewToggle:g=!0,showItemCount:y=!0})=>{const x=e||"Item",b=x.toLowerCase(),v={title:`No ${b} found`,description:`You haven't created any ${b} yet.`,actionText:r||`Create ${x}`,...h};return(0,Br.jsxs)("div",{className:`space-y-6 ${f}`,children:[(0,Br.jsx)("div",{className:"flex justify-between items-center",children:(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:x}),t&&(0,Br.jsx)("p",{className:"text-gray-600 mt-1",children:t})]})}),p&&(0,Br.jsx)("div",{className:"bg-white shadow rounded-lg border border-gray-200",children:p}),m&&n.length>0&&(0,Br.jsx)(Yr,{stats:n}),(0,Br.jsxs)("div",{className:"flex justify-between items-center",children:[y&&(0,Br.jsx)("div",{className:"text-sm text-gray-600",children:o?"Loading...":`${a.length} ${b}${1!==a.length?"s":""} found`}),g&&l&&(0,Br.jsx)(zc,{currentMode:i,onModeChange:l,modes:c})]}),o&&0===a.length?(0,Br.jsx)("div",{className:"text-center py-12",children:(0,Br.jsx)(Mc,{size:"lg",message:`Loading ${b}...`})}):0===a.length?d||(0,Br.jsx)(Rc,{icon:v.icon,title:v.title,description:v.description,actionText:v.actionText,onAction:s}):(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)("div",{className:"cards"===i?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:u}),o&&a.length>0&&(0,Br.jsx)("div",{className:"text-center py-4",children:(0,Br.jsx)(Mc,{size:"sm",message:`Loading more ${b}...`})})]})]})},Dc=rs("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),$c=["Sofía García","Mateo Rodríguez","Valentina Martínez","Santiago Hernández","Isabella González","Sebastián Pérez","Camila López","Matías Sánchez","Valeria Ramírez","Alejandro Flores","Mariana Gómez","Diego Díaz","Gabriela Cruz","Emiliano Ortiz","Daniela Reyes"],Fc=({isOpen:e,onClose:t})=>{const[r,s]=(0,o.useState)([]),[n,a]=(0,o.useState)(10),[i,l]=(0,o.useState)(!1);return e?(0,Br.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,Br.jsxs)("h3",{className:"text-lg font-semibold flex items-center",children:[(0,Br.jsx)(gs,{className:"mr-2"}),"Generador de Usuarios Ficticios"]}),(0,Br.jsx)("button",{onClick:t,children:(0,Br.jsx)(fs,{})})]}),(0,Br.jsxs)("div",{className:"p-6 space-y-4",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Br.jsx)("label",{children:"Número de usuarios a generar:"}),(0,Br.jsx)("input",{type:"number",value:n,onChange:e=>a(parseInt(e.target.value,10)),className:"w-24 px-3 py-2 border border-gray-300 rounded-md",min:"1",max:"50"}),(0,Br.jsx)(os,{onClick:()=>{const e=[];for(let t=0;t<n;t++){const r=$c[Math.floor(Math.random()*$c.length)];e.push({id:`fake_${t+1}`,display_name:r,avatar_url:`https://i.pravatar.cc/150?u=${t}`})}s(e)},children:"Generar"})]}),r.length>0&&(0,Br.jsxs)("div",{children:[(0,Br.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Usuarios Generados (JSON)"}),(0,Br.jsx)(os,{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(r,null,2)),l(!0),setTimeout(()=>l(!1),2e3)},variant:"secondary",size:"sm",iconLeft:Dc,children:i?"¡Copiado!":"Copiar"})]}),(0,Br.jsx)("textarea",{readOnly:!0,value:JSON.stringify(r,null,2),className:"w-full h-64 p-2 border border-gray-300 rounded-md bg-gray-50"})]})]})]})}):null},Uc=()=>{const[e,t]=(0,o.useState)(!1),[r,s]=(0,o.useState)("grid"),[n,a]=(0,o.useState)([]),[i,l]=(0,o.useState)(1),[c,u]=(0,o.useState)(""),[d,p]=(0,o.useState)({role:""}),[h,f]=(0,o.useState)("asc"),{users:m,isLoading:g,error:y,totalPages:x,totalUsers:b,fetchUsers:v,deleteUser:_,updateUser:j,createUser:w}=hs(),N=(0,o.useCallback)(e=>{u(e),l(1)},[]),k=(0,o.useCallback)(e=>{p(e),l(1)},[]),C=(0,o.useCallback)(e=>{f(e),l(1)},[]),E=(e,t)=>{a(r=>t?[...r,e]:r.filter(t=>t!==e))},S=(0,o.useMemo)(()=>m,[m]);return(0,Br.jsxs)("div",{className:"space-y-6",children:[(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestión de Usuarios"}),(0,Br.jsx)("p",{className:"text-gray-600 mt-1",children:"Administra usuarios, inscripciones y permisos."})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Br.jsxs)(uc,{onClick:()=>t(!0),variant:"ghost",className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm",children:[(0,Br.jsx)(gs,{className:"h-4 w-4 mr-2"}),"Generar Usuarios Ficticios"]}),(0,Br.jsxs)(uc,{onClick:()=>alert('Funcionalidad de "Añadir Usuario" pendiente de implementación.'),variant:"primary",className:"inline-flex items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm",children:[(0,Br.jsx)(jc,{className:"h-4 w-4 mr-2"}),"Añadir Usuario"]})]})]}),(0,Br.jsx)(Ic,{resourceType:"user",viewMode:r,onViewModeChange:s,items:S,isLoading:g,error:y,onSearch:N,onFilterChange:k,onSortChange:C,filterOptions:[{id:"role",name:"Rol",options:[{value:"",label:"Todos los roles"},{value:"subscriber",label:"Suscritor"},{value:"editor",label:"Editor"},{value:"author",label:"Autor"},{value:"contributor",label:"Colaborador"},{value:"administrator",label:"Administrador"}]}],pagination:{currentPage:i,totalPages:x,onPageChange:e=>{e>0&&e<=x&&l(e)}},renderGridItem:e=>(0,Br.jsx)(Lc,{user:e,isSelected:n.includes(e.id),onSelect:E},e.id)})]}),(0,Br.jsx)(Fc,{isOpen:e,onClose:()=>t(!1)})]})},Bc=rs("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Qc=e=>e?.title?.rendered||e?.title||"Pregunta sin título",Hc=({question:e,isSelected:t,onClick:r})=>{const s=sr("p-4 cursor-pointer border-l-4 transition-colors duration-150",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t});return(0,Br.jsxs)("div",{className:s,onClick:()=>r(e),children:[(0,Br.jsx)("h4",{className:"font-semibold text-sm text-gray-800 truncate",children:Qc(e)}),(0,Br.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[(0,Br.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Br.jsx)(gc,{className:"w-3 h-3"}),{multiple_choice:"Opción Múltiple",true_false:"Verdadero/Falso",fill_in_the_blanks:"Rellenar Huecos"}[e.meta?._question_type]||"Tipo Desconocido"]}),e._embedded?.["wp:term"]?.[0]?.[0]?.name&&(0,Br.jsxs)("span",{className:"flex items-center gap-1",children:[(0,Br.jsx)(Bc,{className:"w-3 h-3"}),e._embedded["wp:term"][0][0].name]})]}),(0,Br.jsx)("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full ${{easy:"bg-green-100 text-green-700",medium:"bg-yellow-100 text-yellow-700",hard:"bg-red-100 text-red-700"}[e.meta?._difficulty_level]||"bg-gray-100 text-gray-700"}`,children:e.meta?._difficulty_level||"N/A"})]})]})},Vc=(e,t,r=[])=>{const s=(0,o.useRef)(null),n=(0,o.useRef)(e);return(0,o.useEffect)(()=>{n.current=e},[e]),(0,o.useEffect)(()=>()=>{s.current&&clearTimeout(s.current)},[]),(0,o.useCallback)((...e)=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{n.current(...e)},t)},[t,...r])},Kc=({availableQuizzes:e,selectedQuizIds:t,onChange:r,disabled:s})=>{const{t:n}=N(),[a,i]=(0,o.useState)(""),l=(e=>{const[t,r]=(0,o.useState)(e);return(0,o.useEffect)(()=>{const t=setTimeout(()=>{r(e)},300);return()=>{clearTimeout(t)}},[e,300]),t})(a),{quizzes:c,loading:u}=_a({search:l,autoFetch:!0,perPage:100}),d=l?c:e;return(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Asignar a Cuestionarios"}),(0,Br.jsxs)("div",{className:"relative mb-2",children:[(0,Br.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,Br.jsx)(Ea,{className:"h-4 w-4 text-gray-400"})}),(0,Br.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"Buscar cuestionarios...",className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 rounded-md",disabled:s})]}),(0,Br.jsxs)("div",{className:"max-h-40 overflow-y-auto border rounded-md p-2 space-y-1 bg-gray-50",children:[u&&(0,Br.jsx)("p",{className:"text-xs text-gray-500 text-center py-2",children:"Buscando..."}),!u&&(d||[]).map(e=>{const n=t.includes(e.id);return(0,Br.jsxs)("div",{onClick:()=>(e=>{if(s)return;const n=t.includes(e)?t.filter(t=>t!==e):[...t,e];r(n)})(e.id),className:"flex items-center gap-3 p-2 rounded-md cursor-pointer "+(s?"cursor-not-allowed opacity-70":"hover:bg-gray-100"),children:[(0,Br.jsx)("div",{className:"w-5 h-5 border rounded flex items-center justify-center flex-shrink-0 "+(n?"bg-blue-600 border-blue-600":"border-gray-300"),children:n&&(0,Br.jsx)(dl,{className:"w-4 h-4 text-white"})}),(0,Br.jsx)("span",{className:"text-sm",children:e.title?.rendered||e.title})]},e.id)}),!u&&0===(d||[]).length&&(0,Br.jsx)("p",{className:"text-xs text-gray-500 text-center py-4",children:"No se encontraron cuestionarios."})]})]})},Wc=({id:e,option:t,index:r,isReadOnly:s,isMultipleChoice:n,handleOptionChange:a,setCorrectAnswer:o,removeOption:i})=>{const{attributes:l,listeners:c,setNodeRef:u,transform:d,transition:p}=ll({id:e}),h={transform:io.Transform.toString(d),transition:p};return(0,Br.jsxs)("div",{ref:u,style:h,className:"flex items-center gap-2",children:[!s&&(0,Br.jsx)("button",{type:"button",...l,...c,className:"cursor-move text-gray-400 hover:text-gray-600 p-1",children:(0,Br.jsx)(Aa,{className:"h-5 w-5"})}),(0,Br.jsx)("input",{type:n?"checkbox":"radio",name:`correct_answer_${e}`,checked:t.isCorrect||!1,onChange:()=>o(r),disabled:s,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,Br.jsx)("input",{type:"text",value:t.text||"",onChange:e=>a(r,"text",e.target.value),placeholder:`Opción ${r+1}`,disabled:s,className:"flex-1 input border-gray-300 rounded-md"}),!s&&(0,Br.jsx)("button",{type:"button",onClick:()=>i(r),className:"text-red-500 hover:text-red-700 p-1",children:(0,Br.jsx)(La,{className:"w-4 h-4"})})]})},Gc=e=>e?.title?.rendered||e?.title||"Pregunta sin título",Yc=({questionId:e,mode:t,onSave:r,onCancel:s,categoryOptions:n,providerOptions:a,onCategoryCreated:i,onProviderCreated:l,availableQuizzes:c,availableLessons:u,availableCourses:d})=>{const{t:p}=N(),[h,f]=(0,o.useState)(!1),[m,g]=(0,o.useState)(!1),[y,x]=(0,o.useState)(null),[b,v]=(0,o.useState)({}),_=(0,o.useRef)(null),[j,w]=(0,o.useState)(!1),[k,C]=(0,o.useState)(""),[E,S]=(0,o.useState)(!1),[q,O]=(0,o.useState)(!1),[T,P]=(0,o.useState)(""),[A,L]=(0,o.useState)(!1),z=jo(_o(pi,{activationConstraint:{distance:8}})),M=(0,o.useCallback)(()=>{v({title:"",status:"publish",type:"multiple_choice",difficulty:"medium",category:"",points:"1",pointsIncorrect:"0",explanation:"",quizIds:[],lessonId:"",courseId:"",provider:"",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})},[]);(0,o.useEffect)(()=>{(async()=>{if(e&&"edit"===t){f(!0);try{const t=await Dl(e),r=t.content?.rendered||t.meta?._explanation||"";v({title:Gc(t),status:t.status||"publish",type:t.meta?._question_type||"multiple_choice",difficulty:t.meta?._difficulty_level||"medium",points:t.meta?._points?.toString()||"1",pointsIncorrect:t.meta?._points_incorrect?.toString()||"0",explanation:r,options:t.meta?._question_options||[{text:"",isCorrect:!1},{text:"",isCorrect:!1}],quizIds:t.meta?._quiz_ids||[],lessonId:t.meta?._question_lesson?.toString()||"",courseId:t.meta?._course_id?.toString()||"",category:t.qe_category?.[0]?.toString()||"",provider:t.qe_provider?.[0]?.toString()||""})}catch(e){x("Failed to load question data.")}finally{f(!1)}}else"create"===t&&M()})()},[e,t,M]);const R=(e,t)=>{v(r=>({...r,[e]:t}))},I=(e,t,r)=>{v(s=>({...s,options:s.options.map((s,n)=>n===e?{...s,[t]:r}:s)}))},D=e=>{b.options.length>1&&v(t=>({...t,options:t.options.filter((t,r)=>r!==e)}))},$=e=>{v(t=>({...t,options:t.options.map((r,s)=>({...r,isCorrect:"multiple_choice"===t.type?s===e?!r.isCorrect:r.isCorrect:s===e}))}))},F=async(e,t,r,s,n,a,o)=>{if(t.trim()){s(!0);try{const s=await Na(e,{name:t.trim()});r&&r(),o(s.id.toString()),n(""),a(!1)}catch(t){"term_exists"===t.response?.data?.code&&t.response.data.data.term_id?(o(t.response.data.data.term_id.toString()),n(""),a(!1)):console.error(`Error creating ${e}:`,t)}finally{s(!1)}}},U=(0,o.useCallback)(async()=>{try{const e=await cl();if(e&&_.current){const t=_.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e),t.setSelection(r.index+1)}}catch(e){console.error("Error al abrir selector de medios:",e)}},[]),B=(0,o.useMemo)(()=>({toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:U}}}),[U]);if(h)return(0,Br.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Br.jsx)("p",{children:p("common.loading")})});const Q=p("create"===t?"questions.createQuestion":"questions.editQuestion");return(0,Br.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full",children:[(0,Br.jsxs)("header",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:Q}),"edit"===t&&(0,Br.jsx)("p",{className:"text-xs font-normal text-gray-500",children:Gc(b)})]}),(0,Br.jsxs)("div",{className:"flex items-center gap-4",children:[(0,Br.jsx)(uc,{onClick:async()=>{g(!0),x(null);try{let e=0;if("multiple_choice"===b.type||"true_false"===b.type){const t=b.options.filter(e=>!e.isCorrect).length;t>0&&(e=Number((1/t).toFixed(4)))}const n={title:b.title,status:b.status,content:b.explanation,type:b.type,difficulty:b.difficulty,points:"1",pointsIncorrect:e.toString(),quizIds:b.quizIds,lessonId:b.lessonId,courseId:b.courseId,options:b.options,explanation:b.explanation,qe_category:b.category?[parseInt(b.category)]:[],qe_provider:b.provider?[parseInt(b.provider)]:[],meta:{_question_type:b.type,_difficulty_level:b.difficulty,_points:1,_points_incorrect:e,_question_options:b.options,_quiz_ids:b.quizIds,_question_lesson:b.lessonId?parseInt(b.lessonId):0,_course_id:b.courseId?parseInt(b.courseId):0,_explanation:b.explanation}};await r(n),"create"===t&&s()}catch(e){console.error("Error saving question:",e),x(e.message||"Error al guardar la pregunta")}finally{g(!1)}},disabled:m,variant:"primary",className:"font-semibold py-2 px-4 rounded-lg text-sm",children:p(m?"common.saving":"common.save")}),(0,Br.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-800",children:(0,Br.jsx)(fs,{className:"h-5 w-5"})})]})]}),(0,Br.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[y&&(0,Br.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md flex items-center justify-between",children:[(0,Br.jsx)("span",{children:y}),(0,Br.jsx)("button",{onClick:()=>x(null),className:"text-red-500 hover:text-red-700",children:(0,Br.jsx)(fs,{className:"h-4 w-4"})})]}),(0,Br.jsx)("input",{type:"text",value:b.title||"",onChange:e=>R("title",e.target.value),placeholder:p("questions.fields.title"),className:"w-full text-xl font-bold focus:outline-none bg-transparent border-b pb-2"}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:p("questions.fields.category")}),!j&&(0,Br.jsx)("button",{onClick:()=>w(!0),type:"button",className:"text-sm text-blue-600 hover:text-blue-700",children:(0,Br.jsx)(Ma,{className:"h-4 w-4 inline-block"})})]}),j&&(0,Br.jsx)("div",{className:"mb-2 p-2 bg-gray-50 border rounded-md",children:(0,Br.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Br.jsx)("input",{type:"text",value:k,onChange:e=>C(e.target.value),placeholder:"Nueva...",className:"flex-1 w-full px-2 py-1 border-gray-300 rounded-md text-sm"}),(0,Br.jsx)(os,{size:"xs",onClick:()=>F("qe_category",k,i,S,C,w,e=>R("category",e)),isLoading:E,children:"OK"}),(0,Br.jsx)(os,{size:"xs",variant:"secondary",onClick:()=>w(!1),children:"X"})]})}),(0,Br.jsxs)("select",{value:b.category||"",onChange:e=>R("category",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Br.jsx)("option",{value:"",children:p("common.select")}),(n||[]).map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:p("questions.fields.provider")}),!q&&(0,Br.jsx)("button",{onClick:()=>O(!0),type:"button",className:"text-sm text-blue-600 hover:text-blue-700",children:(0,Br.jsx)(Ma,{className:"h-4 w-4 inline-block"})})]}),q&&(0,Br.jsx)("div",{className:"mb-2 p-2 bg-gray-50 border rounded-md",children:(0,Br.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Br.jsx)("input",{type:"text",value:T,onChange:e=>P(e.target.value),placeholder:"Nuevo...",className:"flex-1 w-full px-2 py-1 border-gray-300 rounded-md text-sm"}),(0,Br.jsx)(os,{size:"xs",onClick:()=>F("qe_provider",T,l,L,P,O,e=>R("provider",e)),isLoading:A,children:"OK"}),(0,Br.jsx)(os,{size:"xs",variant:"secondary",onClick:()=>O(!1),children:"X"})]})}),(0,Br.jsxs)("select",{value:b.provider||"",onChange:e=>R("provider",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Br.jsx)("option",{value:"",children:p("common.select")}),(a||[]).map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p("questions.fields.difficulty")}),(0,Br.jsx)("select",{value:b.difficulty||"medium",onChange:e=>R("difficulty",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[{value:"easy",label:"Fácil"},{value:"medium",label:"Medio"},{value:"hard",label:"Difícil"}].map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asignar a Curso"}),(0,Br.jsxs)("select",{value:b.courseId||"",onChange:e=>R("courseId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Br.jsx)("option",{value:"",children:"Sin curso asignado"}),(d||[]).map(e=>(0,Br.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]})]}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Asignar a Lección"}),(0,Br.jsxs)("select",{value:b.lessonId||"",onChange:e=>R("lessonId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,Br.jsx)("option",{value:"",children:"Pregunta General"}),(u||[]).map(e=>(0,Br.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]})]})]}),["multiple_choice","true_false"].includes(b.type)&&(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Respuestas *"}),(0,Br.jsx)(Bi,{sensors:z,collisionDetection:So,onDragEnd:e=>{const{active:t,over:r}=e;if(t.id!==r.id){const e=b.options.findIndex((e,r)=>r===t.id),s=b.options.findIndex((e,t)=>t===r.id);v(t=>({...t,options:Ki(t.options,e,s)}))}},children:(0,Br.jsx)(tl,{items:b.options?.map((e,t)=>t)||[],strategy:Ji,children:(0,Br.jsx)("div",{className:"space-y-3",children:(b.options||[]).map((e,t)=>(0,Br.jsx)(Wc,{id:t,option:e,index:t,isMultipleChoice:"multiple_choice"===b.type,handleOptionChange:I,setCorrectAnswer:$,removeOption:D},t))})})}),"multiple_choice"===b.type&&(0,Br.jsx)(os,{variant:"secondary",size:"sm",onClick:()=>{v(e=>({...e,options:[...e.options,{text:"",isCorrect:!1}]}))},className:"mt-3",iconLeft:Ma,children:"Añadir Opción"})]}),(0,Br.jsx)(Kc,{availableQuizzes:c,selectedQuizIds:b.quizIds||[],onChange:e=>R("quizIds",e)}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:p("questions.fields.explanation")}),(0,Br.jsx)(Ia(),{ref:_,theme:"snow",value:b.explanation||"",onChange:e=>R("explanation",e),modules:B})]})]})]})},Xc=()=>{const{t:e}=N(),[t,r]=(0,o.useState)(null),[s,n]=(0,o.useState)("view"),a=lc({autoFetch:!0,perPage:50}),i=Xn({autoFetch:!0,perPage:100}),l=_a({autoFetch:!0,perPage:100}),c=wn({autoFetch:!0,perPage:100}),{options:u,isLoading:d,refetch:p}=ka(["qe_category","qe_provider"]),h=e=>{r(e.id),n("edit")},f=(0,o.useMemo)(()=>u.qe_category||[],[u.qe_category]),m=(0,o.useMemo)(()=>u.qe_provider||[],[u.qe_provider]),g=(0,o.useMemo)(()=>[{value:"all",label:"Todas las Lecciones"},...(i.lessons||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title}))],[i.lessons]),y=(0,o.useMemo)(()=>a.filters?[{label:e("filters.category"),value:a.filters.category||"all",onChange:e=>a.updateFilter("category",e),options:f,isLoading:d},{label:"Lección",value:a.filters.lessonId||"all",onChange:e=>a.updateFilter("lessonId",e),options:g,isLoading:i.loading},{label:"Proveedor",value:a.filters.provider||"all",onChange:e=>a.updateFilter("provider",e),options:m,isLoading:d}]:[],[a.filters,f,g,m,d,i.loading,e]),x=(0,o.useMemo)(()=>({value:a.filters?.search||"",onChange:e=>a.updateFilter("search",e.target.value),placeholder:e("questions.searchPlaceholder"),isLoading:a.loading}),[a.filters,a.loading,e]);return a.filters&&a.computed?(0,Br.jsxs)("div",{className:"qe-lms-admin-app h-full flex overflow-hidden px-6 py-6 space-x-6",children:[(0,Br.jsx)("div",{className:"transition-all duration-500 ease-in-out h-full flex-shrink-0 w-full lg:w-[30%]",children:(0,Br.jsx)(Ca,{title:e("questions.title"),itemCount:a.computed.total||0,createButtonText:e("questions.addNew"),onCreate:()=>{r(null),n("create")},isCreating:a.creating,filters:(0,Br.jsx)(qa,{searchConfig:x,filtersConfig:y}),children:(a.questions||[]).map(e=>(0,Br.jsx)(Hc,{question:e,isSelected:t===e.id,onClick:h},e.id))})}),(0,Br.jsx)("div",{className:sr("transition-all duration-500 ease-in-out h-full flex-1",{"w-0 opacity-0":"view"===s,"opacity-100":"view"!==s}),children:("edit"===s||"create"===s)&&(0,Br.jsx)(Yc,{questionId:t,mode:s,onSave:"create"===s?a.createQuestion:e=>a.updateQuestion(t,e),onCancel:()=>{r(null),n("view")},categoryOptions:f.filter(e=>"all"!==e.value),providerOptions:m.filter(e=>"all"!==e.value),onCategoryCreated:p,onProviderCreated:p,availableQuizzes:l.quizzes,availableLessons:i.lessons,availableCourses:c.courses},t||"new")})]}):(0,Br.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,Br.jsx)("p",{children:e("common.loading")})})},Jc=rs("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]),Zc=rs("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),eu=rs("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]),tu=rs("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ru=rs("mail-open",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]),su=rs("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),nu=({messages:e,loading:t,onMessageClick:r,onStatusChange:s,updating:n})=>{const a=e=>{switch(e){case"question_feedback":return(0,Br.jsx)(Zc,{className:"w-5 h-5 text-blue-500"});case"question_challenge":return(0,Br.jsx)(eu,{className:"w-5 h-5 text-orange-500"});default:return(0,Br.jsx)(Sc,{className:"w-5 h-5 text-gray-500"})}},o=e=>{const t={unread:{color:"bg-red-100 text-red-800",label:"Unread"},read:{color:"bg-blue-100 text-blue-800",label:"Read"},resolved:{color:"bg-green-100 text-green-800",label:"Resolved"},archived:{color:"bg-gray-100 text-gray-800",label:"Archived"}},r=t[e]||t.read;return(0,Br.jsx)("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${r.color}`,children:r.label})},i=e=>{const t=new Date(e),r=new Date,s=Math.floor((r-t)/36e5);return s<1?"Just now":s<24?`${s}h ago`:s<48?"Yesterday":t.toLocaleDateString()},l=(e,t,r)=>{e.stopPropagation(),s(t,r)};return t&&0===e.length?(0,Br.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:(0,Br.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Br.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),(0,Br.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading messages..."})]})}):0===e.length?(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Br.jsx)(Sc,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,Br.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No messages found"}),(0,Br.jsx)("p",{className:"text-gray-500",children:"There are no messages matching your filters."})]}):(0,Br.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:(0,Br.jsx)("div",{className:"divide-y divide-gray-200",children:e.map(e=>(0,Br.jsx)("div",{onClick:()=>r(e),className:"p-6 hover:bg-gray-50 cursor-pointer transition-colors "+("unread"===e.status?"bg-blue-50":""),children:(0,Br.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Br.jsxs)("div",{className:"flex items-start space-x-4 flex-1",children:[(0,Br.jsx)("div",{className:"flex-shrink-0 mt-1",children:a(e.type)}),(0,Br.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Br.jsx)("h3",{className:"text-sm font-medium truncate "+("unread"===e.status?"text-gray-900":"text-gray-700"),children:e.subject}),"unread"===e.status&&(0,Br.jsx)("span",{className:"flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full"})]}),(0,Br.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2 mb-2",children:e.message}),(0,Br.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,Br.jsxs)("span",{children:["From: ",e.sender_name||`User #${e.sender_id}`]}),(0,Br.jsx)("span",{children:"•"}),(0,Br.jsxs)("span",{children:["Question #",e.related_object_id]}),(0,Br.jsx)("span",{children:"•"}),(0,Br.jsx)("span",{children:i(e.created_at)})]})]})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-3 ml-4",children:[o(e.status),(0,Br.jsxs)("div",{className:"flex items-center space-x-1",children:["unread"===e.status&&(0,Br.jsx)("button",{onClick:t=>l(t,e.id,"read"),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Mark as read",disabled:n,children:(0,Br.jsx)(ru,{className:"w-4 h-4"})}),"read"===e.status&&(0,Br.jsx)("button",{onClick:t=>l(t,e.id,"resolved"),className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded transition-colors",title:"Mark as resolved",disabled:n,children:(0,Br.jsx)(ms,{className:"w-4 h-4"})}),("read"===e.status||"resolved"===e.status)&&(0,Br.jsx)("button",{onClick:t=>l(t,e.id,"archived"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Archive",disabled:n,children:(0,Br.jsx)(su,{className:"w-4 h-4"})})]})]})]})},e.id))})})},au=rs("file-question-mark",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]),ou=({message:e,onClose:t,onStatusChange:r,updating:s})=>{const[n,a]=(0,o.useState)(e.status),i=async t=>{a(t),await r(e.id,t)},l=(e=>{const t={question_feedback:{icon:Zc,label:"Feedback",color:"text-blue-600",bgColor:"bg-blue-100"},question_challenge:{icon:eu,label:"Challenge",color:"text-orange-600",bgColor:"bg-orange-100"}};return t[e]||t.question_feedback})(e.type),c=l.icon;return(0,Br.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-hidden",children:[(0,Br.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6 text-white",children:(0,Br.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Br.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Br.jsx)("div",{className:`p-3 ${l.bgColor} ${l.color} rounded-lg`,children:(0,Br.jsx)(c,{className:"w-6 h-6"})}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("div",{className:"flex items-center space-x-2 mb-1",children:(0,Br.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-white bg-opacity-20 rounded",children:l.label})}),(0,Br.jsx)("h2",{className:"text-xl font-bold",children:e.subject})]})]}),(0,Br.jsx)("button",{onClick:t,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:(0,Br.jsx)(fs,{className:"w-5 h-5"})})]})}),(0,Br.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-250px)]",children:[(0,Br.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Br.jsx)(ys,{className:"w-4 h-4 text-gray-400"}),(0,Br.jsx)("span",{className:"text-gray-600",children:"From:"}),(0,Br.jsx)("span",{className:"font-medium text-gray-900",children:e.sender_name||`User #${e.sender_id}`})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Br.jsx)(qc,{className:"w-4 h-4 text-gray-400"}),(0,Br.jsx)("span",{className:"text-gray-600",children:"Date:"}),(0,Br.jsx)("span",{className:"font-medium text-gray-900",children:(u=e.created_at,new Date(u).toLocaleString())})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Br.jsx)(au,{className:"w-4 h-4 text-gray-400"}),(0,Br.jsx)("span",{className:"text-gray-600",children:"Question:"}),(0,Br.jsxs)("a",{href:`/wp-admin/post.php?post=${e.related_object_id}&action=edit`,target:"_blank",rel:"noopener noreferrer",className:"font-medium text-blue-600 hover:text-blue-800",children:["Question #",e.related_object_id]})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-2 text-sm",children:[(0,Br.jsx)(Sc,{className:"w-4 h-4 text-gray-400"}),(0,Br.jsx)("span",{className:"text-gray-600",children:"Status:"}),(0,Br.jsx)("span",{className:"font-medium capitalize "+("unread"===n?"text-red-600":"read"===n?"text-blue-600":"resolved"===n?"text-green-600":"text-gray-600"),children:n})]})]}),(0,Br.jsxs)("div",{className:"mb-6",children:[(0,Br.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Message:"}),(0,Br.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:(0,Br.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:e.message})})]})]}),(0,Br.jsx)("div",{className:"border-t border-gray-200 p-6 bg-gray-50",children:(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("div",{className:"text-sm text-gray-600",children:["Message ID: ",e.id]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-2",children:["unread"===n&&(0,Br.jsxs)("button",{onClick:()=>i("read"),disabled:s,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Br.jsx)(ru,{className:"w-4 h-4"}),(0,Br.jsx)("span",{children:"Mark as Read"})]}),"read"===n&&(0,Br.jsxs)("button",{onClick:()=>i("resolved"),disabled:s,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Br.jsx)(ms,{className:"w-4 h-4"}),(0,Br.jsx)("span",{children:"Mark as Resolved"})]}),("read"===n||"resolved"===n)&&(0,Br.jsxs)("button",{onClick:()=>i("archived"),disabled:s,className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,Br.jsx)(su,{className:"w-4 h-4"}),(0,Br.jsx)("span",{children:"Archive"})]}),(0,Br.jsx)("button",{onClick:t,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:"Close"})]})]})})]})});var u},iu=()=>{const[e,t]=(0,o.useState)(null),[r,s]=(0,o.useState)(!1),[n,a]=(0,o.useState)(!1),{searchValue:i,isSearching:l,handleSearchChange:c,clearSearch:u}=((e="",t,r=500)=>{const[s,n]=(0,o.useState)(e),[a,i]=(0,o.useState)(!1),l=Vc(async e=>{i(!0);try{await t(e)}finally{i(!1)}},r,[t]);return{searchValue:s,isSearching:a,handleSearchChange:(0,o.useCallback)(e=>{n(e),l(e)},[l]),clearSearch:(0,o.useCallback)(()=>{n(""),l("")},[l]),setSearchValue:n}})("",()=>{},500),{filters:d,isFiltering:p,updateFilter:h,resetFilters:f}=((e={},t,r=300)=>{const[s,n]=(0,o.useState)(e),[a,i]=(0,o.useState)(!1),l=Vc(async e=>{i(!0);try{await t(e)}finally{i(!1)}},r,[t]);return{filters:s,isFiltering:a,updateFilter:(0,o.useCallback)((e,t)=>{n(r=>{const s={...r,[e]:t};return l(s),s})},[l]),updateFilters:(0,o.useCallback)(e=>{n(t=>{const r={...t,...e};return l(r),r})},[l]),resetFilters:(0,o.useCallback)(()=>{n(e),l(e)},[e,l])}})({status:"all",type:"all"},()=>{},300),{messages:m,loading:g,error:y,pagination:x,computed:b,updating:v,hasNewMessages:_,updateMessage:j,fetchMessages:w,requestNotificationPermission:N}=ps({search:i,status:"all"!==d.status?d.status:null,type:"all"!==d.type?d.type:null,autoFetch:!0,enablePolling:!0,pollingInterval:3e4});(0,o.useEffect)(()=>{N()},[N]);const k=(0,o.useMemo)(()=>{const{totalMessages:e=0,unreadMessages:t=0,feedbackMessages:r=0,challengeMessages:s=0}=b||{};return[{label:"Total Messages",value:e,icon:Jc,iconColor:"text-blue-500"},{label:"Unread",value:t,icon:Sc,iconColor:"text-red-500"},{label:"Feedback",value:r,icon:Zc,iconColor:"text-green-500"},{label:"Challenges",value:s,icon:eu,iconColor:"text-orange-500"}]},[b]),C=(0,o.useCallback)(()=>{w(!0)},[w]),E=(0,o.useCallback)(e=>{t(e),s(!0),"unread"===e.status&&j(e.id,{status:"read"})},[j]),S=(0,o.useCallback)(()=>{s(!1),setTimeout(()=>t(null),300)},[]),q=(0,o.useCallback)(async(e,t)=>{try{await j(e,{status:t})}catch(e){console.error("Error updating message status:",e)}},[j]),O={value:i,onChange:e=>c(e.target.value),onClear:u,placeholder:"Search messages...",isLoading:l},T=[{label:"Status",value:d.status,onChange:e=>h("status",e),options:[{value:"all",label:"All Statuses"},{value:"unread",label:"Unread"},{value:"read",label:"Read"},{value:"resolved",label:"Resolved"},{value:"archived",label:"Archived"}],placeholder:"All Statuses"},{label:"Type",value:d.type,onChange:e=>h("type",e),options:[{value:"all",label:"All Types"},{value:"question_feedback",label:"Feedback"},{value:"question_challenge",label:"Challenge"}],placeholder:"All Types"}];return(0,Br.jsxs)("div",{className:"space-y-6 p-6",children:[(0,Br.jsx)(is,{title:"Messages",description:"Manage student feedback and question challenges",stats:k,isLoading:p||l,primaryAction:{text:"Enviar Mensaje",onClick:()=>a(!0),icon:bs}}),_&&(0,Br.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center justify-between",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Br.jsx)("div",{className:"flex-shrink-0",children:(0,Br.jsx)(ms,{className:"w-5 h-5 text-blue-500"})}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"New messages available"}),(0,Br.jsx)("p",{className:"text-sm text-blue-600",children:"Click refresh to see the latest messages"})]})]}),(0,Br.jsx)("button",{onClick:C,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Refresh Now"})]}),(0,Br.jsx)(qa,{searchConfig:O,filtersConfig:T,onRefresh:C,onResetFilters:f,isLoading:g}),y&&(0,Br.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,Br.jsxs)("div",{className:"flex",children:[(0,Br.jsx)(tu,{className:"h-5 w-5 text-red-400 mr-2 flex-shrink-0"}),(0,Br.jsx)("p",{className:"text-sm text-red-700",children:y})]})}),(0,Br.jsx)(nu,{messages:m,loading:g,onMessageClick:E,onStatusChange:q,updating:v}),r&&e&&(0,Br.jsx)(ou,{message:e,onClose:S,onStatusChange:q,updating:v}),(0,Br.jsx)(vs,{isOpen:n,onClose:()=>a(!1),onMessageSent:C})]})},lu=rs("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),cu=rs("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),uu=rs("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),du=rs("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),pu=rs("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]]),hu=rs("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),fu=()=>{const[e,t]=(0,o.useState)("general"),[r,s]=(0,o.useState)("percentage"),[n,a]=(0,o.useState)({primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#ffffff",dark_mode:!1}),[i,l]=(0,o.useState)(!1),[c,u]=(0,o.useState)(!0),d={primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#ffffff",dark_mode:!1};(0,o.useEffect)(()=>{(async()=>{try{const e=await Ur.getSettings();s(e.score_format||"percentage"),e.theme&&a(e.theme)}catch(e){console.error("Error loading settings:",e),qr.error("Error al cargar la configuración")}finally{u(!1)}})()},[]);const p=(e,t)=>{a(r=>({...r,[e]:t}))},h=({label:e,value:t,onChange:r,description:s})=>(0,Br.jsxs)("div",{className:"space-y-2",children:[(0,Br.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:e}),s&&(0,Br.jsx)("p",{className:"text-xs text-gray-500",children:s}),(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Br.jsx)("input",{type:"color",value:t,onChange:e=>r(e.target.value),className:"h-12 w-20 rounded border-2 border-gray-300 cursor-pointer"}),(0,Br.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),pattern:"^#[0-9A-Fa-f]{6}$",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"#000000"}),(0,Br.jsx)("div",{className:"h-12 w-32 rounded border-2 border-gray-300",style:{backgroundColor:t}})]})]});return c?(0,Br.jsx)("div",{className:"p-8 max-w-4xl mx-auto",children:(0,Br.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Br.jsx)("div",{className:"text-gray-600",children:"Cargando configuración..."})})}):(0,Br.jsxs)("div",{className:"p-8 max-w-4xl mx-auto",children:[(0,Br.jsxs)("div",{className:"mb-8",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Br.jsx)(kc,{className:"w-8 h-8 text-blue-600"}),(0,Br.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Configuración"})]}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Configura las opciones globales del sistema de gestión de aprendizaje"})]}),(0,Br.jsx)("div",{className:"mb-6 border-b border-gray-200",children:(0,Br.jsxs)("nav",{className:"flex gap-4",children:[(0,Br.jsx)("button",{onClick:()=>t("general"),className:"px-4 py-2 font-medium transition-colors border-b-2 "+("general"===e?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:(0,Br.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Br.jsx)(kc,{className:"w-4 h-4"}),"General"]})}),(0,Br.jsx)("button",{onClick:()=>t("theme"),className:"px-4 py-2 font-medium transition-colors border-b-2 "+("theme"===e?"text-blue-600 border-blue-600":"text-gray-600 border-transparent hover:text-gray-900"),children:(0,Br.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Br.jsx)(lu,{className:"w-4 h-4"}),"Tema y Colores"]})})]})}),(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200",children:["general"===e&&(0,Br.jsx)(Br.Fragment,{children:(0,Br.jsxs)("div",{className:"p-6",children:[(0,Br.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Formato de Puntuación"}),(0,Br.jsx)("p",{className:"text-gray-600 mb-6",children:"Selecciona cómo se mostrarán las puntuaciones en toda la plataforma"}),(0,Br.jsxs)("div",{className:"space-y-4",children:[(0,Br.jsxs)("label",{className:"flex items-start gap-4 p-4 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50",children:[(0,Br.jsx)("input",{type:"radio",name:"scoreFormat",value:"percentage",checked:"percentage"===r,onChange:e=>s(e.target.value),className:"mt-1 w-5 h-5 text-blue-600"}),(0,Br.jsxs)("div",{className:"flex-1",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Br.jsx)(cu,{className:"w-5 h-5 text-blue-600"}),(0,Br.jsx)("span",{className:"font-medium text-gray-900",children:"Porcentaje (0-100%)"})]}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"Las puntuaciones se mostrarán como porcentajes del 0% al 100%"}),(0,Br.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Ejemplo: ",(0,Br.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"75%"})]})]})]}),(0,Br.jsxs)("label",{className:"flex items-start gap-4 p-4 border-2 rounded-lg cursor-pointer transition-all hover:bg-gray-50",children:[(0,Br.jsx)("input",{type:"radio",name:"scoreFormat",value:"base10",checked:"base10"===r,onChange:e=>s(e.target.value),className:"mt-1 w-5 h-5 text-blue-600"}),(0,Br.jsxs)("div",{className:"flex-1",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,Br.jsx)(uu,{className:"w-5 h-5 text-blue-600"}),(0,Br.jsx)("span",{className:"font-medium text-gray-900",children:"Base 10 (0-10)"})]}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"Las puntuaciones se mostrarán en escala del 0 al 10 (estilo español)"}),(0,Br.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Ejemplo: ",(0,Br.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"7.5/10"})]})]})]})]})]})}),"theme"===e&&(0,Br.jsx)(Br.Fragment,{children:(0,Br.jsxs)("div",{className:"p-6",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Personalización del Tema"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Configura los colores y el tema de la interfaz"})]}),(0,Br.jsxs)("button",{onClick:()=>{confirm("¿Estás seguro de que quieres restaurar los colores por defecto?")&&a(d)},className:"flex items-center gap-2 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,Br.jsx)(du,{className:"w-4 h-4"}),"Restaurar por defecto"]})]}),(0,Br.jsx)("div",{className:"mb-8 p-4 bg-gray-50 rounded-lg",children:(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[n.dark_mode?(0,Br.jsx)(pu,{className:"w-5 h-5 text-gray-700"}):(0,Br.jsx)(hu,{className:"w-5 h-5 text-yellow-500"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h3",{className:"font-medium text-gray-900",children:"Modo Oscuro"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"Activa el tema oscuro para reducir la fatiga visual"})]})]}),(0,Br.jsx)("button",{onClick:()=>{a(e=>({...e,dark_mode:!e.dark_mode}))},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(n.dark_mode?"qe-toggle-active":"qe-toggle-inactive"),children:(0,Br.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(n.dark_mode?"translate-x-6":"translate-x-1")})})]})}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,Br.jsx)(h,{label:"Color Principal",description:"Color primario de la interfaz",value:n.primary,onChange:e=>p("primary",e)}),(0,Br.jsx)(h,{label:"Color Secundario",description:"Color para elementos secundarios",value:n.secondary,onChange:e=>p("secondary",e)}),(0,Br.jsx)(h,{label:"Color de Acento",description:"Color para destacar elementos",value:n.accent,onChange:e=>p("accent",e)}),(0,Br.jsx)(h,{label:"Color de Fondo",description:"Color de fondo de la interfaz",value:n.background,onChange:e=>p("background",e)})]}),(0,Br.jsxs)("div",{className:"p-6 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Br.jsx)("h3",{className:"text-sm font-medium text-gray-700 mb-4",children:"Vista Previa"}),(0,Br.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,Br.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:n.primary},children:"Botón Principal"}),(0,Br.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:n.secondary},children:"Botón Secundario"}),(0,Br.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:n.accent},children:"Botón de Acento"}),(0,Br.jsx)("div",{className:"px-4 py-2 rounded-lg border-2 font-medium",style:{backgroundColor:n.background,borderColor:n.primary,color:n.primary},children:"Fondo"})]})]})]})}),(0,Br.jsx)("div",{className:"p-6 bg-gray-50 flex justify-end border-t border-gray-200",children:(0,Br.jsxs)(uc,{onClick:async()=>{l(!0);try{"general"===e?await Ur.updateScoreFormat(r):"theme"===e&&await Ur.updateTheme(n),qr.success("Configuración guardada correctamente"),setTimeout(()=>{window.location.reload()},1e3)}catch(e){console.error("Error saving settings:",e),qr.error("Error al guardar la configuración"),l(!1)}},disabled:i,variant:"primary",className:"flex items-center gap-2 px-6 py-2 rounded-lg",children:[(0,Br.jsx)(jl,{className:"w-4 h-4"}),i?"Guardando...":"Guardar Cambios"]})})]}),(0,Br.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,Br.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Br.jsx)("strong",{children:"Nota:"})," Al cambiar el formato de puntuación, se aplicará globalmente a toda la plataforma para todos los usuarios. La página se recargará automáticamente para aplicar los cambios."]})})]})},mu=()=>{const[e,t]=(0,o.useState)({primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#ffffff",dark_mode:!1}),[r,s]=(0,o.useState)(!0),[n,a]=(0,o.useState)(!1),i={primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#ffffff",dark_mode:!1};(0,o.useEffect)(()=>{l()},[]);const l=async()=>{try{const e=await Ur.getSettings();e.theme&&t(e.theme)}catch(e){console.error("Error loading theme:",e),qr.error("Error al cargar configuración de tema")}finally{s(!1)}},c=(e,r)=>{t(t=>({...t,[e]:r}))},u=({label:e,value:t,onChange:r,description:s})=>(0,Br.jsxs)("div",{className:"space-y-2",children:[(0,Br.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:e}),s&&(0,Br.jsx)("p",{className:"text-xs text-gray-500",children:s}),(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Br.jsx)("input",{type:"color",value:t,onChange:e=>r(e.target.value),className:"h-12 w-20 rounded border-2 border-gray-300 cursor-pointer"}),(0,Br.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),pattern:"^#[0-9A-Fa-f]{6}$",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"#000000"}),(0,Br.jsx)("div",{className:"h-12 w-32 rounded border-2 border-gray-300",style:{backgroundColor:t}})]})]});return r?(0,Br.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Br.jsxs)("div",{className:"text-center",children:[(0,Br.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Cargando configuración..."})]})}):(0,Br.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,Br.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,Br.jsx)("div",{className:"flex items-center justify-between",children:(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Br.jsx)(lu,{className:"w-8 h-8 text-blue-600"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuración de Tema"}),(0,Br.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Personaliza los colores del frontend para evitar conflictos con tu tema de WordPress"})]})]})})}),(0,Br.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[e.dark_mode?(0,Br.jsx)(pu,{className:"w-6 h-6 text-blue-600"}):(0,Br.jsx)(hu,{className:"w-6 h-6 text-amber-500"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h3",{className:"font-semibold text-gray-900",children:"Modo Oscuro"}),(0,Br.jsx)("p",{className:"text-sm text-gray-500",children:"Activa el modo oscuro para todo el frontend del plugin"})]})]}),(0,Br.jsx)("button",{onClick:()=>{t(e=>({...e,dark_mode:!e.dark_mode}))},className:"relative inline-flex h-8 w-14 items-center rounded-full transition-colors "+(e.dark_mode?"qe-toggle-active":"qe-toggle-inactive"),children:(0,Br.jsx)("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform "+(e.dark_mode?"translate-x-7":"translate-x-1")})})]}),(0,Br.jsxs)("div",{className:"space-y-6",children:[(0,Br.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,Br.jsx)(lu,{className:"w-5 h-5"}),"Colores Personalizados"]}),(0,Br.jsx)(u,{label:"Color Primario",description:"Usado en botones principales, enlaces y elementos destacados",value:e.primary,onChange:e=>c("primary",e)}),(0,Br.jsx)(u,{label:"Color Secundario",description:"Usado en elementos secundarios y acentos alternativos",value:e.secondary,onChange:e=>c("secondary",e)}),(0,Br.jsx)(u,{label:"Color de Acento",description:"Usado para alertas, notificaciones y elementos de atención",value:e.accent,onChange:e=>c("accent",e)}),(0,Br.jsx)(u,{label:"Color de Fondo",description:"Color de fondo principal de las tarjetas y contenedores",value:e.background,onChange:e=>c("background",e)})]}),(0,Br.jsxs)("div",{className:"mt-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:[(0,Br.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vista Previa"}),(0,Br.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Br.jsx)("button",{style:{backgroundColor:e.primary},className:"px-4 py-2 text-white rounded font-medium hover:opacity-90 transition-opacity",children:"Botón Primario"}),(0,Br.jsx)("button",{style:{backgroundColor:e.secondary},className:"px-4 py-2 text-white rounded font-medium hover:opacity-90 transition-opacity",children:"Botón Secundario"}),(0,Br.jsx)("button",{style:{backgroundColor:e.accent},className:"px-4 py-2 text-white rounded font-medium hover:opacity-90 transition-opacity",children:"Botón de Acento"}),(0,Br.jsx)("div",{style:{backgroundColor:e.background},className:"px-4 py-2 text-gray-900 rounded border-2 border-gray-300 text-center font-medium",children:"Tarjeta"})]})]}),(0,Br.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Br.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Br.jsx)("strong",{children:"Nota:"})," Los colores de éxito (verde) y error (rojo) se mantienen fijos para consistencia visual y accesibilidad."]})})]}),(0,Br.jsxs)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between",children:[(0,Br.jsxs)(uc,{onClick:()=>{confirm("¿Estás seguro de que quieres restaurar los colores por defecto?")&&t(i)},variant:"secondary",className:"flex items-center gap-2 px-4 py-2 rounded-lg",disabled:n,children:[(0,Br.jsx)(du,{className:"w-4 h-4"}),"Restaurar por Defecto"]}),(0,Br.jsxs)(uc,{onClick:async()=>{a(!0);try{await Ur.updateTheme(e),qr.success("Tema actualizado correctamente"),setTimeout(()=>window.location.reload(),1e3)}catch(e){console.error("Error saving theme:",e),qr.error("Error al guardar el tema")}finally{a(!1)}},variant:"primary",className:"flex items-center gap-2 px-6 py-2 rounded-lg",disabled:n,children:[(0,Br.jsx)(jl,{className:"w-4 h-4"}),n?"Guardando...":"Guardar Cambios"]})]})]})})},gu=function(){return(0,Br.jsx)(Vr,{children:(0,Br.jsx)(Gt,{children:(0,Br.jsxs)("div",{className:"qe-lms-admin-app h-screen flex flex-col",children:[(0,Br.jsxs)(Et,{children:[(0,Br.jsx)(kt,{path:"/courses",element:(0,Br.jsx)(fc,{})}),(0,Br.jsx)(kt,{path:"/lessons",element:(0,Br.jsx)(xc,{})}),(0,Br.jsx)(kt,{path:"/quizzes",element:(0,Br.jsx)(_c,{})}),(0,Br.jsx)(kt,{path:"/questions",element:(0,Br.jsx)(Xc,{})}),(0,Br.jsx)(kt,{path:"/students",element:(0,Br.jsx)(Uc,{})}),(0,Br.jsx)(kt,{path:"/messages",element:(0,Br.jsx)(iu,{})}),(0,Br.jsx)(kt,{path:"/settings",element:(0,Br.jsx)(fu,{})}),(0,Br.jsx)(kt,{path:"/theme",element:(0,Br.jsx)(mu,{})}),(0,Br.jsx)(kt,{path:"*",element:(0,Br.jsx)(Ns,{})})]}),(0,Br.jsx)(Rr,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})})},yu=(0,o.createContext)(),xu=()=>{const e=(0,o.useContext)(yu);if(!e)throw new Error("useScoreFormat must be used within ScoreFormatProvider");return e},bu=({children:e})=>{const[t,r]=(0,o.useState)("percentage"),[s,n]=(0,o.useState)(!0);(0,o.useEffect)(()=>{(async()=>{try{const e=await Ur.getScoreFormat();r(e)}catch(e){console.error("Error loading score format:",e);const t=localStorage.getItem("scoreFormat");t&&r(t)}finally{n(!1)}})()},[]),(0,o.useEffect)(()=>{s||localStorage.setItem("scoreFormat",t)},[t,s]);const a={format:t,setScoreFormat:e=>{"percentage"!==e&&"base10"!==e||r(e)},toggleFormat:()=>{r(e=>"percentage"===e?"base10":"percentage")},convertScore:e=>{const r=parseFloat(e);return isNaN(r)?0:"base10"===t?r/10:r},formatScore:(e,r={})=>{const s=parseFloat(e);if(isNaN(s))return"0";if("base10"===t){const e=s/10;return e%1==0?Math.round(e):e.toFixed(2)}return s%1==0?Math.round(s):s.toFixed(2)},getFormatLabel:()=>"base10"===t?"Base 10 (0-10)":"Porcentaje (0-100%)",isBase10:"base10"===t,isPercentage:"percentage"===t,loading:s};return(0,Br.jsx)(yu.Provider,{value:a,children:e})},vu=rs("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),_u=rs("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ju=rs("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),wu=rs("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Nu=rs("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),ku=()=>{const[e,t]=i().useState(!1),[r,s]=i().useState(!1),{t:n}=N(),a=window.qe_data?.user?.name,o=window.qe_data?.user?.email,l=window.qe_data?.logout_url,c=[{to:"/",text:n("sidebar.myDesk"),icon:vu},{to:"/courses",text:n("sidebar.studyPlanner"),icon:qc},{to:"/test",text:n("sidebar.test"),icon:gl},{to:"/materials",text:n("sidebar.supportMaterial"),icon:mc},{to:"/videos",text:n("sidebar.videosClasses"),icon:yl}],u=({isActive:t})=>{const r="h-20 flex items-center p-3 transition-colors duration-200 border-l-4 border-b-4",s=e?"justify-center":"";return t?`${r} ${s} border-l-primary border-b-transparent text-primary`:`${r} ${s} border-l-transparent border-b-transparent text-primary hover:border-b-accent`},d=()=>(0,Br.jsxs)("div",{className:"bg-white text-text-main flex flex-col h-full",children:[(0,Br.jsx)("div",{className:"p-4 transition-all duration-300",children:(0,Br.jsx)("div",{className:"flex items-center justify-end h-16",children:(0,Br.jsx)("div",{onClick:()=>t(!e),role:"button",tabIndex:"0",onKeyDown:r=>{"Enter"!==r.key&&" "!==r.key||t(!e)},title:n(e?"sidebar.expand":"sidebar.collapse"),className:"text-primary hover:text-accent transition-colors cursor-pointer",children:e?(0,Br.jsx)(_u,{size:32}):(0,Br.jsx)(ju,{size:32})})})}),(0,Br.jsx)("nav",{className:"flex-1 px-2 space-y-2",children:c.map(t=>(0,Br.jsxs)(Jt,{to:t.to,end:!0,className:u,title:e?t.text:"",onClick:()=>r&&s(!1),children:[(0,Br.jsx)(t.icon,{className:"w-6 h-6"}),!e&&(0,Br.jsx)("span",{className:"ml-4 text-lg",children:t.text})]},t.to))}),(0,Br.jsxs)("div",{className:"p-4 mt-auto",children:[l&&(0,Br.jsxs)("a",{href:l,className:"flex items-center p-3 text-lg transition-colors mb-4 border-l-4 border-b-4 border-transparent text-primary hover:border-b-accent "+(e?"justify-center":""),title:e?n("sidebar.logout"):"",children:[(0,Br.jsx)(wu,{className:"w-6 h-6"}),!e&&(0,Br.jsx)("span",{className:"ml-4",children:n("sidebar.logout")})]}),(0,Br.jsxs)("div",{className:"flex items-center pt-4 border-t-2 border-primary "+(e?"justify-center":""),children:[(0,Br.jsx)(ys,{className:"w-8 h-8 text-secondary flex-shrink-0"}),!e&&(0,Br.jsxs)("div",{className:"flex flex-col flex-1 min-w-0 ml-3 justify-center pt-0.5",children:[(0,Br.jsx)("p",{className:"m-0 text-base font-semibold text-primary truncate leading-tight",title:a,children:a}),(0,Br.jsx)("p",{className:"text-xs text-text-main truncate leading-tight",title:o,children:o})]})]})]})]});return(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)("button",{className:"md:hidden absolute top-4 left-4 z-20 p-2 text-secondary bg-white rounded-full shadow",onClick:()=>s(!0),children:(0,Br.jsx)(Nu,{})}),(0,Br.jsx)("div",{className:"hidden md:block relative h-full transition-all duration-300 "+(e?"w-24":"w-64"),children:(0,Br.jsx)("aside",{className:"h-full",children:(0,Br.jsx)(d,{})})}),r&&(0,Br.jsxs)("div",{className:"fixed inset-0 z-40 flex md:hidden",children:[(0,Br.jsx)("div",{className:"fixed inset-0 bg-black opacity-50",onClick:()=>s(!1)}),(0,Br.jsxs)("aside",{className:"relative z-50 w-64 bg-white flex flex-col",children:[(0,Br.jsx)("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 text-primary",children:(0,Br.jsx)(fs,{})}),(0,Br.jsx)(d,{})]})]})]})},Cu=()=>{const e=lt(),t=(0,o.useRef)(null);return(0,o.useLayoutEffect)(()=>{const e=()=>{if(!t.current)return;const e=document.querySelector("header, #masthead, .elementor-location-header"),r=document.querySelector("#wpadminbar"),s=(e?e.offsetHeight:0)+(r?r.offsetHeight:0);t.current.style.height=`calc(100vh - ${s}px)`};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e.pathname,(0,Br.jsxs)("div",{ref:t,className:"flex bg-gray-100",children:[(0,Br.jsx)(ku,{}),(0,Br.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden",children:(0,Br.jsx)("main",{className:"flex-1 overflow-x-hidden overflow-y-auto bg-gray-100",children:(0,Br.jsx)(Nt,{})})})]})},Eu=async e=>{try{const t=`${Ir().endpoints.custom_api}/rankings/quiz/${e}`;console.log(`🚀 Fetching ranking for quiz ID: ${e}`);const r=await cs(t);return console.log("✅ Quiz ranking fetched:",r.data),r.data.data}catch(t){throw console.error(`❌ Error fetching quiz ranking for quiz ID ${e}:`,t),t}},Su=e=>{const[t,r]=(0,o.useState)(null),[s,n]=(0,o.useState)(!0),[a,i]=(0,o.useState)(null),l=(0,o.useCallback)(async()=>{if(e){n(!0),i(null);try{const t=await Eu(e);r(t)}catch(e){i("Could not load quiz ranking."),console.error("Error fetching quiz ranking:",e)}finally{n(!1)}}else n(!1)},[e]);return(0,o.useEffect)(()=>{l()},[l]),{ranking:t,loading:s,error:a,refetch:l}},qu=Su,Ou=rs("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),Tu=rs("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),Pu=rs("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Au=({quizId:e=null,maxResults:t=null,showCourseColumn:r=!0})=>{const{attempts:s,loading:n,error:a}=(({userId:e,perPage:t=10,autoFetch:r=!0}={})=>{const[s,n]=(0,o.useState)([]),[a,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)({currentPage:1,totalPages:1,total:0,hasMore:!1}),p=(0,o.useCallback)(async(r=1)=>{i(!0),c(null);try{const s=`${Ir().apiUrl}/quiz-extended/v1/my-quiz-attempts`,a=new URLSearchParams({page:r.toString(),per_page:t.toString()});e&&a.append("user_id",e);const o=`${s}?${a}`,i=await cs(o),l=i.data.map(e=>({...e,quizTitle:e.quizTitle||"Cuestionario Desconocido",courseTitle:e.courseTitle||"Curso Desconocido"}));n(e=>1===r?l:[...e,...l]);const c={currentPage:r,totalPages:parseInt(i.headers["X-WP-TotalPages"]||"1",10),total:parseInt(i.headers["X-WP-Total"]||"0",10)};c.hasMore=c.currentPage<c.totalPages,d(c)}catch(e){console.error("Error fetching quiz attempts:",e),c("No se pudieron cargar los resultados de los cuestionarios.")}finally{i(!1)}},[e,t]),h=(0,o.useCallback)(()=>{u.hasMore&&!a&&p(u.currentPage+1)},[u,a,p]);return(0,o.useEffect)(()=>{r&&p(1)},[r,p]),{attempts:s,loading:a,error:l,pagination:u,fetchAttempts:p,loadMore:h}})(),i=dt(),{formatScore:l}=xu(),c=e?s.filter(t=>parseInt(t.quiz_id)===parseInt(e)).slice(0,t||5):s,u=[...new Set(c.map(e=>e.quiz_id))],{ranking:d,loading:p}=qu(e),{rankings:h,loading:f}=((e=[])=>{const[t,r]=(0,o.useState)({}),[s,n]=(0,o.useState)(!0),[a,i]=(0,o.useState)(null),l=(0,o.useCallback)(async()=>{if(!e||0===e.length)return n(!1),void r({});n(!0),i(null);try{const t=e.map(e=>Eu(e).then(t=>({quizId:e,data:t})).catch(t=>(console.error(`Error fetching ranking for quiz ${e}:`,t),{quizId:e,data:null}))),s=(await Promise.all(t)).reduce((e,{quizId:t,data:r})=>(e[t]=r,e),{});r(s)}catch(e){i("Could not load quiz rankings."),console.error("Error fetching quiz rankings:",e)}finally{n(!1)}},[e.join(",")]);return(0,o.useEffect)(()=>{l()},[l]),{rankings:t,loading:s,error:a,refetch:l}})(e?[]:u),m=(t,r,s)=>{const n=e?d:h[t];if(!n)return"-";const a=n.statistics;if(!a)return"-";const o=s?a.avg_score_with_risk:a.avg_score_without_risk;if(null==o)return"-";const i=r-o;return i>0?`+${i.toFixed(1)}`:i.toFixed(1)};return a?(0,Br.jsx)("div",{className:"p-4 text-red-600 bg-red-50 rounded-md",children:a}):0===c.length?(0,Br.jsxs)("div",{className:"p-8 text-center bg-gray-50 rounded-lg",children:[(0,Br.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:e?"No hay intentos para este cuestionario":"No has completado ningún cuestionario todavía"}),(0,Br.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:e?"":"¡Sigue aprendiendo y tus resultados aparecerán aquí!"})]}):(0,Br.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100",children:[!e&&(0,Br.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-blue-50 p-6 border-b border-gray-200",children:(0,Br.jsx)("div",{className:"flex items-center justify-between",children:(0,Br.jsxs)("div",{children:[(0,Br.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,Br.jsx)(Ou,{className:"w-7 h-7 mr-3 text-indigo-600"}),"Mis Resultados de Cuestionarios"]}),(0,Br.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Revisa tu progreso y compara tus notas con la media"})]})})}),(0,Br.jsx)("div",{className:"overflow-x-auto",children:(0,Br.jsxs)("table",{className:"min-w-full",children:[(0,Br.jsx)("thead",{children:(0,Br.jsxs)("tr",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border-b-2 border-gray-200",children:[(0,Br.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:(0,Br.jsxs)("div",{className:"flex items-center",children:[(0,Br.jsx)(qc,{className:"w-4 h-4 mr-2"}),"Fecha"]})}),r&&(0,Br.jsx)(Br.Fragment,{children:(0,Br.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:(0,Br.jsxs)("div",{className:"flex items-center",children:[(0,Br.jsx)(mc,{className:"w-4 h-4 mr-2"}),"Curso / Cuestionario"]})})}),(0,Br.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider bg-blue-50",children:(0,Br.jsx)("div",{className:"flex items-center justify-center",children:(0,Br.jsx)("div",{className:"bg-blue-100 px-3 py-1 rounded-full",children:"Sin Riesgo"})})}),(0,Br.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider bg-yellow-50",children:(0,Br.jsx)("div",{className:"flex items-center justify-center",children:(0,Br.jsx)("div",{className:"bg-yellow-100 px-3 py-1 rounded-full",children:"Con Riesgo"})})}),(0,Br.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Estado"}),(0,Br.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Acción"})]})}),(0,Br.jsx)("tbody",{className:"divide-y divide-gray-100",children:c.map((e,t)=>{if(!e||!e.attempt_id)return null;const s=m(e.quiz_id,e.score,!1),n=m(e.quiz_id,e.score_with_risk,!0);return(0,Br.jsxs)("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-slate-50 transition-all duration-200",children:[(0,Br.jsx)("td",{className:"px-6 py-5 whitespace-nowrap",children:(0,Br.jsxs)("div",{className:"flex items-center",children:[(0,Br.jsx)("div",{className:"bg-indigo-100 p-2 rounded-lg mr-3",children:(0,Br.jsx)(qc,{className:"w-4 h-4 text-indigo-600"})}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("div",{className:"text-sm font-semibold text-gray-800",children:new Date(e.end_time).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),(0,Br.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.end_time).toLocaleDateString("es-ES",{year:"numeric"})})]})]})}),r&&(0,Br.jsx)("td",{className:"px-6 py-5",children:(0,Br.jsxs)("div",{className:"space-y-2",children:[(0,Br.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,Br.jsx)(mc,{className:"w-3 h-3 mr-1.5 text-indigo-400"}),e.courseTitle||"Sin curso"]}),(0,Br.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Br.jsx)("div",{className:"text-sm font-medium text-gray-800 max-w-xs truncate",children:e.quizTitle||"Cuestionario sin título"}),(0,Br.jsx)("button",{onClick:t=>{t.stopPropagation(),i(`/courses/${e.course_id}`,{state:{selectedQuizId:e.quiz_id,scrollToQuiz:!0}})},className:"text-indigo-600 hover:text-indigo-800 transition-colors",title:"Ir al cuestionario",children:(0,Br.jsx)(Tu,{className:"w-4 h-4"})})]})]})}),(0,Br.jsx)("td",{className:"px-6 py-5 text-center bg-gradient-to-br from-blue-50 to-blue-100/50",children:(0,Br.jsxs)("div",{className:"inline-flex flex-col items-center space-y-2 py-2",children:[(0,Br.jsx)("div",{className:"text-2xl font-bold "+(e.passed?"text-green-600":"text-red-600"),children:l(e.score)}),"-"!==s&&(0,Br.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-white/80 shadow-sm",children:[parseFloat(s)>0?(0,Br.jsx)(Tc,{className:"w-3 h-3 text-green-600"}):parseFloat(s)<0?(0,Br.jsx)(Pu,{className:"w-3 h-3 text-red-600"}):null,(0,Br.jsx)("span",{className:"text-xs font-semibold "+(parseFloat(s)>0?"text-green-600":parseFloat(s)<0?"text-red-600":"text-gray-600"),children:s})]})]})}),(0,Br.jsx)("td",{className:"px-6 py-5 text-center bg-gradient-to-br from-yellow-50 to-yellow-100/50",children:(0,Br.jsxs)("div",{className:"inline-flex flex-col items-center space-y-2 py-2",children:[(0,Br.jsx)("div",{className:"text-2xl font-bold "+(e.passed?"text-green-600":"text-red-600"),children:l(e.score_with_risk)}),"-"!==n&&(0,Br.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-white/80 shadow-sm",children:[parseFloat(n)>0?(0,Br.jsx)(Tc,{className:"w-3 h-3 text-green-600"}):parseFloat(n)<0?(0,Br.jsx)(Pu,{className:"w-3 h-3 text-red-600"}):null,(0,Br.jsx)("span",{className:"text-xs font-semibold "+(parseFloat(n)>0?"text-green-600":parseFloat(n)<0?"text-red-600":"text-gray-600"),children:n})]})]})}),(0,Br.jsx)("td",{className:"px-6 py-5 text-center",children:e.passed?(0,Br.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:[(0,Br.jsx)(ms,{className:"w-4 h-4 text-green-600"}),(0,Br.jsx)("span",{className:"text-sm font-bold text-green-700",children:"Aprobado"})]}):(0,Br.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-red-50 to-rose-50 border border-red-200",children:[(0,Br.jsx)(Ec,{className:"w-4 h-4 text-red-600"}),(0,Br.jsx)("span",{className:"text-sm font-bold text-red-700",children:"No Aprobado"})]})}),(0,Br.jsx)("td",{className:"px-6 py-5 text-center",children:(0,Br.jsxs)("button",{onClick:()=>i(`/dashboard/attempts/${e.attempt_id}`),className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-sm font-medium rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[(0,Br.jsx)(wc,{className:"w-4 h-4"}),"Ver Detalles"]})})]},e.attempt_id)})})]})})]})},Lu=rs("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),zu=rs("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]),Mu=rs("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),Ru=()=>{const[e,t]=(0,o.useState)(null),[r,s]=(0,o.useState)("all"),{messages:n,loading:a,error:i,unreadCount:l,markAsRead:c,markAllAsRead:u}=((e={})=>{const{filter:t="all",autoFetch:r=!0,enablePolling:s=!0,pollingInterval:n=6e4}=e,[a,i]=(0,o.useState)([]),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(null),[p,h]=(0,o.useState)(0),f=(0,o.useRef)(!0),m=(0,o.useRef)(null),g=(0,o.useRef)(Date.now());(0,o.useEffect)(()=>()=>{f.current=!1,m.current&&clearTimeout(m.current)},[]);const y=(0,o.useCallback)(async(e=!0)=>{if(f.current){e&&c(!0),d(null);try{const e=Ir(),r=new URLSearchParams({per_page:"50",orderby:"created_at",order:"desc"});"unread"===t?r.append("status","unread"):"read"===t&&r.append("status","read");const s=`${e.endpoints.custom_api}/messages/inbox?${r}`;console.log("📬 Fetching user inbox:",s);const n=await cs(s);if(!f.current)return;const a=n.data?.data||[];i(a);const o=a.filter(e=>"unread"===e.status).length;h(o),g.current=Date.now(),console.log(`✅ Loaded ${a.length} messages (${o} unread)`)}catch(e){console.error("❌ Error fetching inbox:",e),f.current&&d(e.message||"Error al cargar los mensajes")}finally{f.current&&e&&c(!1)}}},[t]),x=(0,o.useCallback)(async e=>{if(f.current)try{const t=`${Ir().endpoints.custom_api}/messages/${e}/read`;if(console.log(`📖 Marking message ${e} as read`),await cs(t,{method:"PUT"}),!f.current)return;i(t=>t.map(t=>t.id===e?{...t,status:"read"}:t)),h(e=>Math.max(0,e-1)),console.log("✅ Message marked as read")}catch(e){throw console.error("❌ Error marking message as read:",e),e}},[]),b=(0,o.useCallback)(async()=>{const e=a.filter(e=>"unread"===e.status);for(const t of e)try{await x(t.id)}catch(e){console.error(`Error marking message ${t.id} as read:`,e)}},[a,x]),v=(0,o.useCallback)(()=>{if(!s||m.current)return;console.log(`⏰ Starting inbox polling every ${n/1e3}s`);const e=()=>{document.hidden||y(!1),m.current=setTimeout(e,n)};m.current=setTimeout(e,n)},[s,n,y]),_=(0,o.useCallback)(()=>{m.current&&(console.log("⏸️ Stopping inbox polling"),clearTimeout(m.current),m.current=null)},[]);return(0,o.useEffect)(()=>{r&&y(!0)},[t,r]),(0,o.useEffect)(()=>(s&&!l?v():_(),()=>{_()}),[s,l,v,_]),(0,o.useEffect)(()=>{const e=()=>{!document.hidden&&s&&(console.log("🔍 Page visible, checking for new messages..."),y(!1))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[s,y]),{messages:a,loading:l,error:u,unreadCount:p,fetchMessages:y,markAsRead:x,markAllAsRead:b,startPolling:v,stopPolling:_}})({filter:r,autoFetch:!0,enablePolling:!0,pollingInterval:6e4}),d=(0,o.useCallback)(r=>{const s=n.find(e=>e.id===r);e===r?t(null):(t(r),s&&"unread"===s.status&&c(r))},[e,n,c]),p=e=>e.includes("announcement")?"Anuncio":e.includes("notification")?"Notificación":e.includes("alert")?"Alerta":"Mensaje",h=e=>{const t=new Date(e),r=new Date,s=Math.floor((r-t)/36e5);return s<1?"Hace un momento":s<24?`Hace ${s}h`:s<48?"Ayer":t.toLocaleDateString()};return(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,Br.jsx)("div",{className:"border-b border-gray-200 p-6",children:(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Br.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Br.jsx)(Sc,{className:"w-6 h-6 text-blue-600"})}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Mensajes"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:a?(0,Br.jsxs)("span",{className:"flex items-center",children:[(0,Br.jsx)(xs,{className:"w-3 h-3 animate-spin mr-1"}),"Cargando..."]}):l>0?(0,Br.jsxs)("span",{className:"text-blue-600 font-medium",children:[l," ",1===l?"mensaje nuevo":"mensajes nuevos"]}):"No tienes mensajes nuevos"})]})]}),(0,Br.jsxs)("div",{className:"flex space-x-2",children:[(0,Br.jsxs)("button",{onClick:()=>s("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("all"===r?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:["Todos (",n.length,")"]}),(0,Br.jsxs)("button",{onClick:()=>s("unread"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors "+("unread"===r?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:["No leídos (",l,")"]}),l>0&&(0,Br.jsxs)("button",{onClick:u,className:"px-4 py-2 rounded-lg text-sm font-medium text-green-600 hover:bg-green-50 transition-colors flex items-center space-x-1",title:"Marcar todos como leídos",children:[(0,Br.jsx)(Mu,{className:"w-4 h-4"}),(0,Br.jsx)("span",{children:"Marcar todos"})]})]})]})}),(0,Br.jsxs)("div",{className:"divide-y divide-gray-200",children:[i&&(0,Br.jsx)("div",{className:"p-4 bg-red-50 border-b border-red-200",children:(0,Br.jsxs)("div",{className:"flex items-center",children:[(0,Br.jsx)(tu,{className:"w-5 h-5 text-red-500 mr-2"}),(0,Br.jsx)("p",{className:"text-red-700",children:i})]})}),a&&0===n.length?(0,Br.jsxs)("div",{className:"p-12 text-center",children:[(0,Br.jsx)(xs,{className:"w-8 h-8 animate-spin text-blue-500 mx-auto mb-4"}),(0,Br.jsx)("p",{className:"text-gray-500",children:"Cargando mensajes..."})]}):0===n.length?(0,Br.jsxs)("div",{className:"p-12 text-center",children:[(0,Br.jsx)(Sc,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,Br.jsx)("p",{className:"text-gray-500",children:"unread"===r?"No tienes mensajes sin leer":"No tienes mensajes"})]}):n.map(t=>{return(0,Br.jsxs)("div",{className:"transition-colors "+("unread"===t.status?"bg-blue-50":"bg-white"),children:[(0,Br.jsx)("div",{onClick:()=>d(t.id),className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors",children:(0,Br.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Br.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,Br.jsx)("div",{className:"flex-shrink-0 mt-1",children:(r=t.type,r.includes("announcement")?(0,Br.jsx)(Lu,{className:"w-5 h-5 text-blue-500"}):r.includes("alert")?(0,Br.jsx)(tu,{className:"w-5 h-5 text-red-500"}):(0,Br.jsx)(zu,{className:"w-5 h-5 text-gray-500"}))}),(0,Br.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,Br.jsx)("h3",{className:"text-sm font-medium truncate "+("unread"===t.status?"text-gray-900":"text-gray-700"),children:t.subject}),"unread"===t.status&&(0,Br.jsx)("span",{className:"flex-shrink-0 w-2 h-2 bg-blue-500 rounded-full"})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-500",children:[(0,Br.jsxs)("span",{className:"flex items-center",children:[(0,Br.jsx)(ys,{className:"w-3 h-3 mr-1"}),t.sender_name||"Sistema"]}),(0,Br.jsxs)("span",{className:"flex items-center",children:[(0,Br.jsx)(qc,{className:"w-3 h-3 mr-1"}),h(t.created_at)]}),(0,Br.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:p(t.type)})]}),e!==t.id&&(0,Br.jsx)("p",{className:"text-sm text-gray-600 mt-2 line-clamp-2",children:t.message})]})]}),(0,Br.jsx)("div",{className:"ml-4 flex-shrink-0",children:e===t.id?(0,Br.jsx)(vl,{className:"w-5 h-5 text-gray-400"}):(0,Br.jsx)(_l,{className:"w-5 h-5 text-gray-400"})})]})}),e===t.id&&(0,Br.jsx)("div",{className:"px-4 pb-4 pt-2 border-t border-gray-200 bg-gray-50",children:(0,Br.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,Br.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:t.message})})})]},t.id);var r})]})]})},Iu=()=>{const e=window.qe_data?.user?.name||"Estudiante";return(0,Br.jsxs)("div",{className:"container mx-auto p-6 space-y-8",children:[(0,Br.jsxs)("header",{children:[(0,Br.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["¡Bienvenido de nuevo, ",e,"!"]}),(0,Br.jsx)("p",{className:"mt-2 text-lg text-gray-600",children:"Aquí tienes un resumen de tu progreso y mensajes."})]}),(0,Br.jsxs)("main",{className:"space-y-8",children:[(0,Br.jsx)(Ru,{}),(0,Br.jsx)(Au,{})]})]})},Du=rs("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),$u=rs("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Fu=rs("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),Uu=rs("message-square-warning",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 15h.01",key:"q59x07"}],["path",{d:"M12 7v4",key:"xawao1"}]]),Bu=({question:e,initialFeedbackType:t="feedback",onClose:r})=>{const[s,n]=(0,o.useState)(t),[a,i]=(0,o.useState)(""),[l,c]=(0,o.useState)(!1),[u,d]=(0,o.useState)(""),[p,h]=(0,o.useState)(!1),f="object"==typeof e.title&&e.title?.rendered?e.title.rendered:e.title;return(0,Br.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:(0,Br.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md animate-fade-in-up",children:p?(0,Br.jsxs)("div",{className:"text-center p-4",children:[(0,Br.jsx)(ms,{className:"mx-auto h-12 w-12 text-green-500"}),(0,Br.jsx)("h3",{className:"text-lg font-bold text-gray-800 mt-4 mb-2",children:"¡Mensaje Enviado!"}),(0,Br.jsx)("p",{className:"text-gray-600 mb-4",children:"Gracias por tu colaboración. Hemos recibido tu mensaje."}),(0,Br.jsx)(uc,{onClick:r,variant:"primary",className:"w-full px-4 py-2 rounded-md",children:"Cerrar"})]}):(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Br.jsxs)("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[(0,Br.jsx)(Uu,{className:"mr-2 text-indigo-500"}),"challenge"===s?"Impugnar Pregunta":"Comentario o Sugerencia"]}),(0,Br.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-700",children:(0,Br.jsx)(fs,{size:24})})]}),(0,Br.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Pregunta: ",(0,Br.jsx)("span",{className:"font-semibold",dangerouslySetInnerHTML:{__html:f||""}})]}),(0,Br.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),a.trim()){c(!0),d(""),h(!1);try{await(async e=>{try{const{endpoints:t}=Ir(),r=`${t.custom_api}/feedback/question`;console.log("📤 Enviando feedback de pregunta:",e);const s=await cs(r,{method:"POST",body:JSON.stringify(e)});return console.log("✅ Feedback enviado exitosamente:",s.data),s.data.data}catch(e){throw console.error("❌ Error al enviar el mensaje de feedback:",e),e}})({question_id:e.id,feedback_type:s,message:a}),h(!0),i(""),setTimeout(()=>{r()},3e3)}catch(e){d(e.message||"Error al enviar el mensaje.")}finally{c(!1)}}else d("El mensaje no puede estar vacío.")},children:[(0,Br.jsxs)("div",{className:"mb-4",children:[(0,Br.jsx)("label",{htmlFor:"feedbackType",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Mensaje"}),(0,Br.jsxs)("select",{id:"feedbackType",value:s,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,Br.jsx)("option",{value:"feedback",children:"💬 Comentario o Sugerencia"}),(0,Br.jsx)("option",{value:"challenge",children:"⚠️ Impugnación"})]})]}),(0,Br.jsxs)("div",{className:"mb-4",children:[(0,Br.jsx)("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-1",children:"Tu mensaje"}),(0,Br.jsx)("textarea",{id:"message",rows:"5",value:a,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"challenge"===s?"Explica por qué crees que la pregunta o sus respuestas son incorrectas...":"Escribe aquí tu duda, sugerencia o corrección..."})]}),u&&(0,Br.jsx)("p",{className:"text-sm text-red-600 mb-4",children:u}),(0,Br.jsx)("div",{className:"flex justify-end",children:(0,Br.jsxs)(uc,{type:"submit",disabled:l,variant:"primary",className:"px-4 py-2 rounded-md flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[l?(0,Br.jsx)(xs,{className:"animate-spin mr-2",size:20}):(0,Br.jsx)(bs,{className:"mr-2",size:20}),"Enviar Mensaje"]})})]})]})})})},Qu=({question:e,result:t,index:r})=>{const[s,n]=(0,o.useState)(!1),[a,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)("feedback"),[u,d]=(0,o.useState)(!1),[p,h]=(0,o.useState)(!1),{t:f}=N(),m=e=>{c(e),i(!0)},g=Ml(e);if(!g||!t)return(0,Br.jsxs)("div",{className:"p-4 border border-red-200 bg-red-50 rounded-lg flex items-center",children:[(0,Br.jsx)($u,{className:"h-5 w-5 text-red-500 mr-3"}),(0,Br.jsx)("p",{className:"text-sm text-red-700",children:"Error: Invalid question data or result provided."})]});const{title:y,meta:x,fullExplanation:b}=g,v=x?._question_options||[],{answer_given:_,correct_answer:j,is_correct:w,is_risked:k,error_percentage:C,total_answers:E}=t;return(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg mb-6 shadow-sm",children:[(0,Br.jsxs)("div",{className:"p-6",children:[(0,Br.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Br.jsx)("div",{className:"flex-1",children:(0,Br.jsx)("h3",{className:"text-base text-gray-800 font-medium",dangerouslySetInnerHTML:{__html:y}})}),(0,Br.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,Br.jsx)("button",{onClick:async()=>{if(!p){h(!0);try{const t=await(async e=>{try{const t=`${Ir().endpoints.custom_api}/favorite-questions/toggle`;console.log(`🔖 Toggling favorite for question ID: ${e}`);const r=await cs(t,{method:"POST",body:JSON.stringify({question_id:e})});return console.log("✅ Favorite toggled:",r.data),r.data.data}catch(t){throw console.error(`❌ Error toggling favorite for question ID ${e}:`,t),t}})(e.id);d(t.is_favorited)}catch(e){console.error("Error toggling favorite:",e)}finally{h(!1)}}},disabled:p,className:`transition-colors ${u?"text-yellow-500 hover:text-yellow-600":"text-gray-400 hover:text-yellow-500"} ${p?"opacity-50 cursor-wait":""}`,title:"Marcar como favorita",children:(0,Br.jsx)(Fu,{className:"w-5 h-5 "+(u?"fill-current":"")})}),(0,Br.jsx)("button",{onClick:()=>m("feedback"),className:"text-gray-400 hover:text-blue-500",title:"Comentario o sugerencia",children:(0,Br.jsx)(Jc,{className:"w-5 h-5"})}),(0,Br.jsx)("button",{onClick:()=>m("challenge"),className:"text-gray-400 hover:text-red-500",title:"Impugnar pregunta",children:(0,Br.jsx)($u,{className:"w-5 h-5"})}),k&&(0,Br.jsxs)("span",{className:"flex items-center text-xs text-orange-600 font-semibold px-2 py-1 bg-orange-50 rounded",title:"Marcada con riesgo",children:[(0,Br.jsx)($u,{className:"w-3 h-3 mr-1"}),"Riesgo"]}),w?(0,Br.jsx)(ms,{className:"w-6 h-6 text-green-500"}):null===_?(0,Br.jsx)(Ec,{className:"w-6 h-6 text-gray-400"}):(0,Br.jsx)(Ec,{className:"w-6 h-6 text-red-500"})]})]}),(0,Br.jsx)("div",{className:"space-y-3",children:v.map((e,t)=>{return(0,Br.jsx)("div",{className:"flex items-center p-3 border-2 rounded-lg transition-colors "+(r=e.id,r==j?k?"border-2 border-green-500 bg-white text-green-700 font-semibold":"border-2 border-green-500 bg-green-50 text-green-800 font-semibold":r!=_||w?"border-2 border-gray-200 bg-white":k?"border-2 border-red-500 bg-white text-red-700 font-semibold":"border-2 border-red-500 bg-red-50 text-red-800 font-semibold"),children:(0,Br.jsxs)("span",{className:"text-sm",children:[String.fromCharCode(65+t),") ",e.text]})},e.id);var r})}),null===_&&(0,Br.jsx)("div",{className:"mt-4 p-3 bg-gray-100 border-l-4 border-gray-400 rounded",children:(0,Br.jsx)("p",{className:"text-sm text-gray-700 font-semibold",children:"⚠️ Esta pregunta no fue contestada"})})]}),E>0&&(0,Br.jsx)("div",{className:"mx-6 mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Br.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Br.jsx)("span",{className:"font-semibold",children:"Información de la pregunta:"}),(0,Br.jsx)("br",{}),"Esta pregunta ha sido fallada por el ",(0,Br.jsxs)("span",{className:"font-bold",children:[C,"%"]})," del alumnado."]})}),b&&(0,Br.jsxs)("div",{className:"border-t border-gray-200",children:[(0,Br.jsxs)("div",{onClick:()=>n(!s),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n(!s))},role:"button",tabIndex:"0","aria-expanded":s,className:"flex justify-between items-center w-full px-7 pt-4 pb-2 text-left cursor-pointer",children:[(0,Br.jsx)("p",{className:"font-semibold text-gray-700",children:f("questions.fields.explanation")}),s?(0,Br.jsx)(vl,{className:"h-5 w-5 text-gray-500"}):(0,Br.jsx)(_l,{className:"h-5 w-5 text-gray-500"})]}),s&&(0,Br.jsx)("div",{className:"px-8 pb-4",children:(0,Br.jsx)("div",{className:"bg-gray-50 rounded-md p-4",children:(0,Br.jsx)("p",{className:"text-sm text-gray-600",dangerouslySetInnerHTML:{__html:b}})})})]})]}),a&&(0,Br.jsx)(Bu,{question:e,initialFeedbackType:l,onClose:()=>i(!1)})]})},Hu=rs("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Vu=rs("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ku=({label:e,value:t,icon:r,colorClass:s="bg-gray-100 text-gray-800"})=>(0,Br.jsxs)("div",{className:`text-center p-3 rounded-lg ${s}`,children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,Br.jsx)(r,{className:"w-4 h-4 mr-2"}),(0,Br.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wider",children:e})]}),(0,Br.jsx)("span",{className:"block text-2xl font-bold",children:t})]}),Wu=({result:e})=>{const{formatScore:t}=xu();if(!e)return null;const{score:r,score_with_risk:s,detailed_results:n,duration_seconds:a}=e;return(0,Br.jsx)("aside",{className:"lg:w-80 w-full flex-shrink-0",children:(0,Br.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[(0,Br.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Resumen de Resultados"}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 gap-3 mb-6",children:[(0,Br.jsx)(Ku,{label:"Puntuación",value:t(r),icon:Ou,colorClass:"bg-blue-50 text-blue-800"}),(0,Br.jsx)(Ku,{label:"Puntuación (con riesgo)",value:t(s),icon:Hu,colorClass:"bg-yellow-50 text-yellow-800"}),(0,Br.jsx)(Ku,{label:"Tiempo Empleado",value:(o=a,null==o?"N/A":`${Math.floor(o/60).toString().padStart(2,"0")}:${(o%60).toString().padStart(2,"0")}`),icon:Vu,colorClass:"bg-gray-100 text-gray-800"})]}),(0,Br.jsx)("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Mapa de Preguntas"}),(0,Br.jsx)("div",{className:"grid grid-cols-10 gap-1.5 p-2 bg-gray-50 rounded-lg",children:n&&n.map((e,t)=>{let r="",s="";return null!==e.answer_given?e.is_risked?e.is_correct?(r="bg-white border-2 border-green-500 text-green-600",s=`Pregunta ${t+1}: Correcta (con riesgo)`):(r="bg-white border-2 border-red-500 text-red-600",s=`Pregunta ${t+1}: Incorrecta (con riesgo)`):e.is_correct?(r="bg-green-500 text-white",s=`Pregunta ${t+1}: Correcta`):(r="bg-red-500 text-white",s=`Pregunta ${t+1}: Incorrecta`):(r="bg-gray-300 text-white",s=`Pregunta ${t+1}: Sin contestar`),(0,Br.jsx)("div",{className:`w-full h-7 rounded text-xs font-bold transition-colors flex items-center justify-center ${r}`,title:s,children:t+1},e.question_id)})})]})});var o},Gu=({result:e,quizTitle:t,questions:r})=>{const{t:s}=N(),{formatScore:n}=xu();if(!e)return(0,Br.jsx)("div",{className:"text-center p-8",children:s("quizzes.loadingResults")});const{detailed_results:a,score:o,score_with_risk:i}=e,l=a?.filter(e=>e.is_correct).length||0,c=a?.filter(e=>!e.is_correct&&null!==e.answer_given).length||0,u=a?.filter(e=>null===e.answer_given).length||0;return(0,Br.jsxs)("div",{className:"flex flex-col lg:flex-row-reverse gap-8 items-start p-4 max-w-screen-2xl mx-auto",children:[(0,Br.jsx)(Wu,{result:e}),(0,Br.jsxs)("main",{className:"flex-grow w-full",children:[(0,Br.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 mb-6 shadow-sm",children:(0,Br.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:s("quizzes.quizResults")})}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Br.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-lg p-6 shadow-md",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Br.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Puntuación Sin Riesgo"}),(0,Br.jsx)(Ou,{className:"w-6 h-6 text-blue-600"})]}),(0,Br.jsx)("div",{className:"text-4xl font-bold text-blue-600 mb-4",children:n(o)}),(0,Br.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("span",{className:"flex items-center text-gray-700",children:[(0,Br.jsx)(ms,{className:"w-4 h-4 mr-2 text-green-600"}),"Aciertos"]}),(0,Br.jsx)("span",{className:"font-semibold text-gray-900",children:l})]}),(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("span",{className:"flex items-center text-gray-700",children:[(0,Br.jsx)(Du,{className:"w-4 h-4 mr-2 text-gray-500"}),"Sin contestar"]}),(0,Br.jsx)("span",{className:"font-semibold text-gray-900",children:u})]}),(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("span",{className:"flex items-center text-gray-700",children:[(0,Br.jsx)(Ec,{className:"w-4 h-4 mr-2 text-red-600"}),"Errores"]}),(0,Br.jsx)("span",{className:"font-semibold text-gray-900",children:c})]})]})]}),(0,Br.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-orange-50 border-2 border-yellow-200 rounded-lg p-6 shadow-md",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Br.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Puntuación Con Riesgo"}),(0,Br.jsx)(Ou,{className:"w-6 h-6 text-yellow-600"})]}),(0,Br.jsx)("div",{className:"text-4xl font-bold text-yellow-600 mb-4",children:n(i)}),(0,Br.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("span",{className:"flex items-center text-gray-700",children:[(0,Br.jsx)(ms,{className:"w-4 h-4 mr-2 text-green-600"}),"Aciertos"]}),(0,Br.jsx)("span",{className:"font-semibold text-gray-900",children:l})]}),(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("span",{className:"flex items-center text-gray-700",children:[(0,Br.jsx)(Du,{className:"w-4 h-4 mr-2 text-gray-500"}),"Sin contestar"]}),(0,Br.jsx)("span",{className:"font-semibold text-gray-900",children:u})]}),(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("span",{className:"flex items-center text-gray-700",children:[(0,Br.jsx)(Ec,{className:"w-4 h-4 mr-2 text-red-600"}),"Errores"]}),(0,Br.jsx)("span",{className:"font-semibold text-gray-900",children:c})]})]})]})]}),a&&r?(0,Br.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,Br.jsx)(Qu,{question:e,result:a.find(t=>t.question_id===e.id)},e.id))}):(0,Br.jsx)("p",{children:s("quizzes.noDetailedResults")}),(0,Br.jsx)("div",{className:"mt-8 text-center pb-4",children:(0,Br.jsx)(Xt,{to:"/courses",children:(0,Br.jsx)(uc,{variant:"primary",className:"w-full sm:w-auto inline-flex items-center justify-center px-8 py-3 rounded-lg font-semibold shadow-md",children:"Volver a Cursos"})})})]})]})},Yu=()=>{const{attemptId:e}=ht(),t=lt(),r=dt(),{details:s,loading:n,error:a}=(e=>{const[t,r]=(0,o.useState)(null),[s,n]=(0,o.useState)(!0),[a,i]=(0,o.useState)(null),l=(0,o.useCallback)(async()=>{if(e){n(!0),i(null);try{const t=`${Ir().apiUrl}/quiz-extended/v1/quiz-attempts/${e}`;console.log(`🚀 Fetching attempt details from: ${t}`);const s=await cs(t);if(!(s&&s.data&&s.data.success))throw new Error(s?.data?.data?.message||"La respuesta de la API no tuvo el formato esperado o falló.");r(s.data.data),console.log("✅ Attempt details loaded successfully:",s.data.data)}catch(e){console.error("❌ Error fetching attempt details:",e),i(e.message||"No se pudieron cargar los detalles del intento.")}finally{n(!1)}}else n(!1)},[e]);return(0,o.useEffect)(()=>{l()},[l]),{details:t,loading:s,error:a,refetch:l}})(e),i=t.state?.returnTo||"/";if(n)return(0,Br.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Br.jsx)(xs,{className:"animate-spin"})});if(a)return(0,Br.jsx)("div",{className:"p-8 text-red-600 bg-red-50 rounded-md",children:a});if(!s)return(0,Br.jsx)("div",{className:"p-8",children:"No se encontraron detalles para este intento."});const l={...s.attempt,detailed_results:s.detailed_results},c=s.attempt.quizTitle,u=s.questions;return(0,Br.jsxs)("div",{className:"container mx-auto p-6",children:[(0,Br.jsxs)(uc,{onClick:()=>{i&&"/"!==i&&t.state?.returnToQuiz?r(i,{state:{selectedQuizId:t.state.returnToQuiz,scrollToQuiz:!0}}):r(i&&"/"!==i?i:"/")},variant:"primary",className:"inline-flex items-center px-4 py-2 mb-6 text-sm font-medium rounded-lg shadow-sm",children:[(0,Br.jsx)(Tl,{className:"w-4 h-4 mr-2"}),t.state?.fromQuizConfirmation?"Volver al Cuestionario":"Volver al Dashboard"]}),(0,Br.jsx)(Gu,{result:l,quizTitle:c,questions:u})]})},Xu=({course:e})=>{const{id:t,title:r,excerpt:s,_embedded:n}=e,a=n?.["wp:featuredmedia"]?.[0]?.source_url,o=r||"Curso sin título",i=(s||"").replace(/<[^>]+>/g,"");return(0,Br.jsxs)(Xt,{to:`/courses/${t}`,className:"flex flex-col bg-white shadow-lg overflow-hidden group transition-all duration-300 hover:shadow-2xl",style:{minHeight:"380px"},children:[(0,Br.jsx)("div",{className:"relative bg-primary flex-shrink-0",style:{clipPath:"polygon(0 0, 100% 0, 100% 100%, 94% 90%, 6% 90%, 0 100%)"},children:(0,Br.jsx)("div",{className:"p-7",children:(0,Br.jsx)("div",{className:"relative w-full pb-[56.25%] bg-gray-700 overflow-hidden",children:a?(0,Br.jsx)("img",{src:a,alt:o,className:"absolute top-0 left-0 w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):(0,Br.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:(0,Br.jsx)(mc,{className:"w-12 h-12 text-gray-400"})})})})}),(0,Br.jsx)("div",{className:"flex-grow flex items-center justify-center p-4",children:(0,Br.jsxs)("div",{className:"bg-primary text-white w-full p-4 text-center",children:[(0,Br.jsx)("h3",{className:"font-semibold text-lg",dangerouslySetInnerHTML:{__html:o}}),i&&(0,Br.jsx)("p",{className:"text-sm text-gray-200 mt-2 line-clamp-2",children:i})]})})]})},Ju=({icon:e,title:t,message:r})=>(0,Br.jsxs)("div",{className:"text-center py-16",children:[(0,Br.jsx)(e,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,Br.jsx)("h3",{className:"mt-2 text-lg font-semibold text-gray-900",children:t}),(0,Br.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:r})]}),Zu=()=>{const{t:e}=N(),{courses:t,loading:r,error:s}=wn({autoFetch:!0,_embed:!0});return(0,Br.jsxs)("div",{className:"bg-gray-100 p-4 h-[97vh] w-full overflow-y-auto",children:[(0,Br.jsx)("header",{className:"border-b border-gray-200 pb-4 mb-6",children:(0,Br.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:e("courses.title")})}),(0,Br.jsx)("main",{children:r&&0===t.length?(0,Br.jsx)(Ju,{icon:xs,title:e("courses.loadingCourses"),message:e("common.processing")}):s?(0,Br.jsx)(Ju,{icon:$u,title:e("notifications.error"),message:s}):t&&0!==t.length?(0,Br.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(e=>(0,Br.jsx)(Xu,{course:e},e.id))}):(0,Br.jsx)(Ju,{icon:zu,title:e("courses.noCourses"),message:e("courses.noCoursesDescription")})})]})},ed=()=>(0,Br.jsx)("div",{children:(0,Br.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Libros"})}),td=()=>(0,Br.jsx)("div",{children:(0,Br.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:"Mi Perfil"})}),rd=rs("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),sd=({lessons:e,isLoading:t,selectedStepId:r,onSelectStep:s,quizzes:n})=>{const{t:a}=N(),[i,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(r&&!i){const t=e.find(e=>e.meta?._lesson_steps?.some(e=>e.id===r));t&&l(t.id)}},[r,i,e]);const d=e=>{switch(e){case"video":return(0,Br.jsx)(rd,{className:"w-4 h-4 text-gray-500 flex-shrink-0"});case"quiz":return(0,Br.jsx)(gc,{className:"w-4 h-4 text-gray-500 flex-shrink-0"});default:return(0,Br.jsx)(gl,{className:"w-4 h-4 text-gray-500 flex-shrink-0"})}},p=(0,Br.jsxs)("div",{className:"p-4 animate-pulse",children:[!c&&(0,Br.jsx)("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-6"}),(0,Br.jsxs)("div",{className:"space-y-4",children:[(0,Br.jsx)("div",{className:"h-5 bg-gray-300 rounded w-full"}),(0,Br.jsx)("div",{className:"h-5 bg-gray-300 rounded w-5/6"}),(0,Br.jsx)("div",{className:"h-5 bg-gray-300 rounded w-full"})]})]});return(0,Br.jsx)("aside",{className:"transition-all duration-300 flex-shrink-0 "+(c?"w-24":"lg:w-80 w-full"),children:(0,Br.jsx)("div",{className:"h-[100%] border-l-2 border-black-200",children:(0,Br.jsxs)("div",{className:"bg-gray-100 h-full flex flex-col",children:[(0,Br.jsxs)("div",{className:"p-4 border-b border-gray-200 flex-shrink-0 flex items-center "+(c?"justify-center":"justify-between"),children:[!c&&(0,Br.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:a("courses.courseContent")}),(0,Br.jsx)("div",{onClick:()=>u(!c),role:"button",tabIndex:"0",onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||u(!c)},title:a(c?"sidebar.expand":"sidebar.collapse"),className:"text-primary hover:text-accent transition-colors cursor-pointer",children:c?(0,Br.jsx)(ju,{size:24}):(0,Br.jsx)(_u,{size:24})})]}),(0,Br.jsx)("div",{className:"flex-1 overflow-y-auto",children:t?p:e&&e.length>0?(0,Br.jsx)("ul",{children:e.map(e=>{const t=i===e.id,o=e.meta?._lesson_steps||[];return(0,Br.jsxs)("li",{className:"border-b border-gray-200",children:[(0,Br.jsxs)("div",{onClick:()=>{return t=e.id,void(c||l(e=>e===t?null:t));var t},className:`p-4 flex justify-between items-center ${c?"":"cursor-pointer"} ${t&&!c?"bg-gray-200":"hover:bg-gray-200"}`,title:c?e.title:"",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-3 "+(c?"justify-center w-full":""),children:[(0,Br.jsx)(mc,{className:"w-5 h-5 text-indigo-600 flex-shrink-0"}),!c&&(0,Br.jsx)("span",{className:"text-sm font-bold text-gray-800",children:e.title})]}),!c&&o.length>0&&(t?(0,Br.jsx)(vl,{className:"w-5 h-5 text-gray-500"}):(0,Br.jsx)(_l,{className:"w-5 h-5 text-gray-500"}))]}),t&&!c&&o.length>0&&(0,Br.jsx)("ul",{className:"bg-white",children:o.map(t=>{const o=t.id===r,i="quiz"===t.type?(e=>{const t=n.find(t=>t.id===e);return t?t.title.rendered||t.title:a("quiz")})(t.data.quiz_id):t.title;return(0,Br.jsxs)("li",{onClick:()=>s(t,e),className:"flex items-center space-x-2 py-3 px-4 border-l-4 transition-colors cursor-pointer "+(o?"border-blue-500 bg-blue-50":"border-transparent hover:bg-gray-50"),style:{paddingLeft:"2rem"},children:[d(t.type),(0,Br.jsx)("span",{className:"text-sm "+(o?"font-semibold text-blue-800":"text-gray-600"),children:i})]},t.id)})})]},e.id)})}):!c&&(0,Br.jsx)("p",{className:"p-4 text-gray-500",children:a("noLessonsForCourse")})})]})})})},nd=(rs("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),({question:e,index:t,questionNumber:r,onSelectAnswer:s,selectedAnswer:n,onAnswerChange:a,isRisked:o,onToggleRisk:i,onClearAnswer:l,isSubmitted:c,disabled:u=!1,showCorrectAnswer:d=!1,isPracticeMode:p=!1})=>{if(!e)return null;const{id:h,title:f,meta:m}=e,g="object"==typeof f&&f?.rendered?f.rendered:f,y=m?._question_options||[],x=void 0!==r?r:t+1;return(0,Br.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg mb-6 shadow-sm",children:(0,Br.jsxs)("div",{className:"p-6",children:[(0,Br.jsx)("div",{className:"mb-6",children:(0,Br.jsx)("h3",{className:"text-base text-gray-800 font-medium",dangerouslySetInnerHTML:{__html:`${x}. ${g||""}`}})}),(0,Br.jsx)("div",{className:"space-y-3",children:y.map((e,t)=>{const r=null!=n&&e.id===n,o=r?"border-2":"border-2 border-gray-200 hover:bg-gray-50",i=r?"font-semibold":"text-gray-700";return(0,Br.jsxs)("label",{className:`flex items-center cursor-pointer p-3 rounded-lg transition-colors ${o}`,style:r?{borderColor:"var(--qe-primary)",backgroundColor:"var(--qe-primary-light)"}:{},children:[(0,Br.jsx)("input",{type:"radio",name:`question-${h}`,value:e.id,checked:r,onChange:()=>{return t=h,r=e.id,void(p&&a?a(r):s&&s(t,r));var t,r},disabled:c||u,className:"h-4 w-4 border-gray-300",style:{accentColor:"var(--qe-primary)"}}),(0,Br.jsxs)("span",{className:`ml-3 text-sm transition-colors ${i}`,style:r?{color:"var(--qe-primary)"}:{},children:[String.fromCharCode(65+t),") ",e.text]})]},e.id)})}),null!=n&&!c&&!p&&i&&l&&(0,Br.jsxs)("div",{className:"mt-6 border-t pt-4 flex items-center justify-between",children:[(0,Br.jsxs)("label",{className:"flex items-center cursor-pointer group",children:[(0,Br.jsx)("input",{type:"checkbox",checked:o,onChange:()=>i(h),disabled:c,className:"h-4 w-4 rounded border-gray-300 qe-checkbox-accent",style:{accentColor:"var(--qe-accent)"}}),(0,Br.jsx)("span",{className:"ml-2 text-sm font-semibold text-gray-600 transition-colors",style:{"--hover-color":"var(--qe-accent)"},children:"Marcar con riesgo"})]}),(0,Br.jsx)("button",{type:"button",onClick:()=>l(h),title:"Limpiar selección",className:"p-2 rounded-full transition-colors",style:{color:"var(--qe-text-secondary, #6b7280)",backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.1)",e.currentTarget.style.color="#dc2626"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color="var(--qe-text-secondary, #6b7280)"},children:(0,Br.jsx)(La,{className:"w-4 h-4"})})]})]})})}),ad=({label:e,value:t,colorClass:r="bg-gray-200"})=>(0,Br.jsxs)("div",{className:`text-center p-2 rounded-md ${r}`,children:[(0,Br.jsx)("span",{className:"block text-xs text-gray-700",children:e}),(0,Br.jsx)("span",{className:"block text-xl font-bold text-gray-900",children:t})]}),od=({color:e,text:t})=>(0,Br.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,Br.jsx)("span",{className:`w-3 h-3 rounded-full mr-2 border ${e}`}),(0,Br.jsx)("span",{children:t})]}),id=({questions:e,userAnswers:t,riskedAnswers:r,onQuestionSelect:s,onSubmit:n})=>{const a=Object.keys(t).length,o=r.length,i=e.length-a;return(0,Br.jsx)("div",{className:"sticky top-4 w-full",children:(0,Br.jsxs)("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:[(0,Br.jsxs)("div",{className:"flex justify-around items-center mb-4 p-2 bg-gray-50 rounded-lg",children:[(0,Br.jsx)(od,{color:"bg-primary border-primary",text:"Contestada"}),(0,Br.jsx)(od,{color:"bg-yellow-500 border-yellow-500",text:"Con Riesgo"}),(0,Br.jsx)(od,{color:"bg-gray-400 border-gray-400",text:"Impugnada"})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[(0,Br.jsx)(ad,{label:"Contestadas",value:a}),(0,Br.jsx)(ad,{label:"Con Riesgo",value:o,colorClass:"bg-yellow-100"}),(0,Br.jsx)(ad,{label:"Sin Riesgo",value:a-o}),(0,Br.jsx)(ad,{label:"Sin Contestar",value:i})]}),(0,Br.jsx)("div",{className:"grid grid-cols-10 gap-1.5 mb-6",children:e.map((e,n)=>{const a=t.hasOwnProperty(e.id);let o="";return o=r.includes(e.id)?"bg-yellow-500 text-primary border-yellow-500":a?"bg-primary text-yellow-500 border-primary":"bg-white border-2 border-primary text-primary",(0,Br.jsx)("div",{onClick:()=>s(n),className:`w-full h-7 rounded text-xs font-bold transition-colors flex items-center justify-center ${o}`,children:n+1},e.id)})}),(0,Br.jsx)("button",{onClick:n,className:"w-full px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary/90 shadow-md transition-all transform hover:-translate-y-px",children:"FINALIZAR EXAMEN"})]})})},ld=({durationMinutes:e,onTimeUp:t,isPaused:r})=>{const[s,n]=(0,o.useState)(60*e);return(0,o.useEffect)(()=>{if(r||e<=0)return;const s=setInterval(()=>{n(e=>e<=1?(clearInterval(s),t(),0):e-1)},1e3);return()=>clearInterval(s)},[r,t,e]),e<=0?null:(0,Br.jsxs)("div",{className:"mt-4 bg-white p-4 rounded-lg border border-gray-200 shadow-sm text-center",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center text-gray-700",children:[(0,Br.jsx)(Vu,{className:"w-5 h-5 mr-2"}),(0,Br.jsx)("span",{className:"text-lg font-semibold",children:"Tiempo Restante"})]}),(0,Br.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:(a=s,`${Math.floor(a/3600).toString().padStart(2,"0")}:${Math.floor(a%3600/60).toString().padStart(2,"0")}:${(a%60).toString().padStart(2,"0")}`)})]});var a},cd=rs("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),ud=rs("highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]),dd=rs("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),pd=({isActive:e,onClose:t})=>{const r=(0,o.useRef)(null),[s,n]=(0,o.useState)(!1),[a,i]=(0,o.useState)("pen"),[l,c]=(0,o.useState)("#000000"),[u,d]=(0,o.useState)(2),[p,h]=(0,o.useState)(null),{theme:f}=Hr();(0,o.useEffect)(()=>{if(!r.current||!e)return;const t=r.current,s=t.getContext("2d"),n=()=>{const e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight,document.documentElement.clientHeight),r=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth,document.documentElement.clientWidth);t.width=r,t.height=e,s.lineCap="round",s.lineJoin="round"};n(),window.addEventListener("resize",n);const a=new ResizeObserver(n);return a.observe(document.body),h(s),()=>{window.removeEventListener("resize",n),a.disconnect()}},[e]),(0,o.useEffect)(()=>{if(p)if("pen"===a)p.globalCompositeOperation="source-over",p.strokeStyle=l,p.lineWidth=u,p.globalAlpha=1;else if("highlighter"===a){p.globalCompositeOperation="source-over";const e=parseInt(l.slice(1,3),16),t=parseInt(l.slice(3,5),16),r=parseInt(l.slice(5,7),16);p.strokeStyle=`rgba(${e}, ${t}, ${r}, 0.4)`,p.lineWidth=4*u,p.globalAlpha=1}else"eraser"===a&&(p.globalCompositeOperation="destination-out",p.lineWidth=3*u,p.globalAlpha=1)},[p,a,l,u]);const m=()=>{p&&(n(!1),p.closePath())},g=[{name:"Negro",value:"#000000"},{name:"Primario",value:f.primary},{name:"Secundario",value:f.secondary},{name:"Acento",value:f.accent},{name:"Rojo",value:"#dc2626"},{name:"Verde",value:"#16a34a"}];return e?(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)("div",{className:"fixed inset-0 pointer-events-none z-40",style:{overflow:"hidden"},children:(0,Br.jsx)("canvas",{ref:r,className:"absolute top-0 left-0 pointer-events-auto",style:{cursor:"crosshair"},onMouseDown:e=>{if(!p)return;n(!0);const t=r.current.getBoundingClientRect(),s=e.pageX-t.left-window.pageXOffset,a=e.pageY-t.top-window.pageYOffset;p.beginPath(),p.moveTo(s,a)},onMouseMove:e=>{if(!s||!p)return;const t=r.current.getBoundingClientRect(),n=e.pageX-t.left-window.pageXOffset,a=e.pageY-t.top-window.pageYOffset;p.lineTo(n,a),p.stroke()},onMouseUp:m,onMouseLeave:m})}),(0,Br.jsx)("div",{className:"fixed top-20 right-4 rounded-lg shadow-xl border p-3 pointer-events-auto z-50 animate-slideDown",style:{backgroundColor:"var(--qe-bg-card)",borderColor:"var(--qe-border)"},children:(0,Br.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Br.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b",style:{borderColor:"var(--qe-border)"},children:[(0,Br.jsx)("span",{className:"text-xs font-semibold",style:{color:"var(--qe-text)"},children:"Herramientas"}),(0,Br.jsx)("button",{onClick:t,className:"hover:rotate-90 transition-all duration-300",style:{color:"var(--qe-text-secondary)"},onMouseEnter:e=>e.currentTarget.style.color="#dc2626",onMouseLeave:e=>e.currentTarget.style.color="var(--qe-text-secondary)",title:"Cerrar",children:(0,Br.jsx)(fs,{className:"w-4 h-4"})})]}),(0,Br.jsxs)("div",{className:"flex gap-2",children:[(0,Br.jsx)("button",{onClick:()=>i("pen"),className:"p-2 rounded transition-colors",style:{backgroundColor:"pen"===a?"var(--qe-primary)":"var(--qe-bg-hover)",color:"pen"===a?"white":"var(--qe-text)"},title:"Lápiz",children:(0,Br.jsx)(cd,{className:"w-5 h-5"})}),(0,Br.jsx)("button",{onClick:()=>i("highlighter"),className:"p-2 rounded transition-colors",style:{backgroundColor:"highlighter"===a?"var(--qe-accent)":"var(--qe-bg-hover)",color:"highlighter"===a?"white":"var(--qe-text)"},title:"Subrayador",children:(0,Br.jsx)(ud,{className:"w-5 h-5"})}),(0,Br.jsx)("button",{onClick:()=>i("eraser"),className:"p-2 rounded transition-colors",style:{backgroundColor:"eraser"===a?"#dc2626":"var(--qe-bg-hover)",color:"eraser"===a?"white":"var(--qe-text)"},title:"Borrador",children:(0,Br.jsx)(dd,{className:"w-5 h-5"})}),(0,Br.jsx)("button",{onClick:()=>{p&&r.current&&p.clearRect(0,0,r.current.width,r.current.height)},className:"p-2 rounded transition-colors",style:{backgroundColor:"var(--qe-bg-hover)",color:"var(--qe-text)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#fef2f2",e.currentTarget.style.color="#dc2626"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-bg-hover)",e.currentTarget.style.color="var(--qe-text)"},title:"Limpiar todo",children:(0,Br.jsx)(La,{className:"w-5 h-5"})})]}),"eraser"!==a&&(0,Br.jsxs)("div",{className:"pt-2 border-t",style:{borderColor:"var(--qe-border)"},children:[(0,Br.jsx)("span",{className:"text-xs font-medium mb-2 block",style:{color:"var(--qe-text-secondary)"},children:"Color:"}),(0,Br.jsx)("div",{className:"grid grid-cols-3 gap-2",children:g.map(e=>(0,Br.jsx)("button",{onClick:()=>c(e.value),className:"w-8 h-8 rounded-full border-2 transition-all",style:{backgroundColor:e.value,borderColor:l===e.value?"var(--qe-text)":"var(--qe-border)",transform:l===e.value?"scale(1.1)":"scale(1)"},title:e.name},e.value))})]}),(0,Br.jsxs)("div",{className:"pt-2 border-t",style:{borderColor:"var(--qe-border)"},children:[(0,Br.jsx)("span",{className:"text-xs font-medium mb-2 block",style:{color:"var(--qe-text-secondary)"},children:"Grosor:"}),(0,Br.jsx)("input",{type:"range",min:"1",max:"5",value:u,onChange:e=>d(Number(e.target.value)),className:"w-full",style:{accentColor:"var(--qe-primary)"}})]})]})})]}):null},hd=rs("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),fd=({quizId:e,customQuiz:t=null})=>{const[r,s]=(0,o.useState)(null),[n,a]=(0,o.useState)([]),[i,l]=(0,o.useState)({}),[c,u]=(0,o.useState)([]),[d,p]=(0,o.useState)("loading"),[h,f]=(0,o.useState)(null),[m,g]=(0,o.useState)(null),[y,x]=(0,o.useState)(null),[b,v]=(0,o.useState)(!1),{theme:_}=Hr(),{questions:j,loading:w,error:N}=ic({perPage:100,autoFetch:!0});(0,o.useEffect)(()=>{(async()=>{if(x(Date.now()),t)return s(t),a(t.meta?._quiz_question_ids||[]),void f("custom-attempt");if(e)try{const t=await ma(e);s(t),a(t.meta?._quiz_question_ids||[]);const r=await(async e=>{try{const{endpoints:t}=Ir(),r=`${t.custom_api}/quiz-attempts/start`;console.log(`🚀 Starting quiz attempt for quiz ID: ${e}`);const s=await cs(r,{method:"POST",body:JSON.stringify({quiz_id:e})});return console.log("✅ Attempt started:",s.data),s.data.data}catch(e){throw console.error("❌ Error starting quiz attempt:",e),e}})(e);if(!r.attempt_id)throw new Error("Failed to get a valid attempt ID.");f(r.attempt_id)}catch(e){console.error("Error fetching or starting quiz:",e),p("error")}})()},[e,t]);const k=(0,o.useMemo)(()=>w||0===n.length?[]:[...n.map(e=>j.find(t=>t.id===e)).filter(Boolean)].sort(()=>Math.random()-.5),[n,j,w]);(0,o.useEffect)(()=>{r&&h&&!w&&(k.length>0||0===n.length)&&p("in-progress")},[r,h,w,k,n]);const C=(e,t)=>{l(r=>({...r,[e]:t}))},E=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},S=e=>{l(t=>{const r={...t};return delete r[e],r}),u(t=>t.filter(t=>t!==e))},q=async()=>{if(!h)return console.error("Cannot submit without an attempt ID."),void p("error");p("submitting");const e=k.map(e=>({question_id:e.id,answer_given:i.hasOwnProperty(e.id)?i[e.id]:null,is_risked:c.includes(e.id)}));try{let r;if("custom-attempt"===h&&t){const s=t.meta._quiz_question_ids,n=Date.now(),a=Math.round((n-y)/1e3);r=await(async(e,t)=>{try{const{endpoints:r}=Ir(),s=`${r.custom_api}/quiz-generator/calculate-results`;console.log("🧮 Calculating custom quiz result...");const n=await cs(s,{method:"POST",body:JSON.stringify({question_ids:e,answers:t})});return console.log("✅ Custom quiz result calculated:",n.data),n.data.data}catch(e){throw console.error("❌ Error calculating custom quiz result:",e),e}})(s,e),r.duration_seconds=a}else r=await(async(e,t)=>{try{const{endpoints:r}=Ir(),s=`${r.custom_api}/quiz-attempts/submit`;console.log(`📤 Submitting answers for attempt ID: ${e}`);const n=await cs(s,{method:"POST",body:JSON.stringify({attempt_id:e,answers:t})});return console.log("✅ Attempt submitted successfully:",n.data),n.data.data}catch(e){throw console.error("❌ Error submitting quiz attempt:",e),e}})(h,e);g(r),p("submitted")}catch(e){console.error("Error al enviar el cuestionario:",e),p("error")}};if("loading"===d||n.length>0&&w)return(0,Br.jsx)("div",{className:"text-center p-8",children:"Cargando cuestionario..."});if("error"===d||N)return(0,Br.jsx)("div",{className:"text-center p-8 text-red-600",children:"No se pudo cargar el cuestionario."});if("submitting"===d)return(0,Br.jsx)("div",{className:"text-center p-8",children:"Enviando respuestas..."});if("submitted"===d)return(0,Br.jsx)(Gu,{result:m,quizTitle:r?.title?.rendered,questions:k});if(0===k.length&&!w)return(0,Br.jsx)("div",{className:"text-center p-8 text-gray-600",children:"Este cuestionario no tiene preguntas."});const O=r?.meta?._time_limit||0;return(0,Br.jsxs)("div",{className:"w-full max-w-screen-2xl mx-auto p-4 flex flex-col lg:flex-row gap-8 h-[100%] relative",children:[(0,Br.jsx)("button",{onClick:()=>v(!b),className:"fixed top-6 right-6 z-40 p-3 rounded-full shadow-lg transition-all duration-300 text-white",style:{backgroundColor:b?"#dc2626":_.primary,transform:b?"rotate(45deg)":"rotate(0deg)"},onMouseEnter:e=>{b||(e.currentTarget.style.transform="scale(1.1)")},onMouseLeave:e=>{b||(e.currentTarget.style.transform="scale(1)")},title:b?"Desactivar herramientas de dibujo":"Activar herramientas de dibujo",children:(0,Br.jsx)(hd,{className:"w-6 h-6 transition-transform duration-300",style:{transform:b?"rotate(-45deg)":"rotate(0deg)"}})}),(0,Br.jsx)(pd,{isActive:b,onClose:()=>v(!1)}),(0,Br.jsx)("main",{className:"w-full lg:w-2/3 lg:overflow-y-auto lg:pr-4",children:k.map((e,t)=>(0,Br.jsx)(nd,{question:e,index:t,selectedAnswer:i[e.id],isRisked:c.includes(e.id),onSelectAnswer:C,onToggleRisk:E,onClearAnswer:S,isSubmitted:"submitted"===d||"submitting"===d},e.id))}),(0,Br.jsx)("aside",{className:"w-full lg:w-1/3",children:(0,Br.jsxs)("div",{className:"sticky top-4 space-y-4",children:[(0,Br.jsx)(id,{questions:k,userAnswers:i,riskedAnswers:c,onSubmit:q}),(0,Br.jsx)(ld,{durationMinutes:O,onTimeUp:q,isPaused:"submitted"===d||"submitting"===d})]})})]})},md=rs("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),gd=rs("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),yd=({icon:e,label:t,value:r})=>(0,Br.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Br.jsx)(e,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,Br.jsxs)("span",{className:"font-semibold mr-1",children:[t,":"]}),(0,Br.jsx)("span",{children:r})]}),xd=({quiz:e,onStartQuiz:t})=>{const r=dt(),{ranking:s,loading:n,error:a}=Su(e?.id),{formatScore:o}=xu();if(!e)return(0,Br.jsx)("div",{className:"text-center p-8",children:(0,Br.jsx)("p",{className:"text-gray-500",children:"No se pudo cargar la información del cuestionario."})});const{title:i,question_count:l=0,time_limit:c=0,passing_score:u=0,difficulty:d=null}=e,p=s?.statistics,h=s?.currentUser,f=h?.id;let m=null;f&&s&&(m=s.top?.find(e=>e.user_id===f),m||(m=s.relative?.find(e=>e.user_id===f)));const g=m?.score||0,y=m?.score_with_risk||0,x=p?.avg_score_without_risk?g-p.avg_score_without_risk:0,b=p?.avg_score_with_risk?y-p.avg_score_with_risk:0,v={easy:{label:"Fácil",color:"text-green-600",bg:"bg-green-50"},medium:{label:"Medio",color:"text-yellow-600",bg:"bg-yellow-50"},hard:{label:"Difícil",color:"text-red-600",bg:"bg-red-50"}}[d]||{label:"Medio",color:"text-gray-600",bg:"bg-gray-50"};return(0,Br.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-8 shadow-lg max-w-5xl mx-auto space-y-6",children:[(0,Br.jsxs)("div",{className:"text-center",children:[(0,Br.jsx)(xl,{className:"mx-auto h-12 w-12 text-indigo-500 mb-4"}),(0,Br.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:i?.rendered||i||"Cuestionario"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Estás a punto de comenzar el cuestionario. ¿Estás listo?"})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-left bg-gray-50 p-6 rounded-lg border border-gray-200",children:[(0,Br.jsx)(yd,{icon:xl,label:"Preguntas",value:l}),(0,Br.jsx)(yd,{icon:Vu,label:"Tiempo Límite",value:c>0?`${c} min`:"Sin límite"}),(0,Br.jsx)(yd,{icon:ms,label:"Puntuación Mínima",value:o(u)}),(0,Br.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Br.jsx)(md,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,Br.jsx)("span",{className:"font-semibold mr-1",children:"Dificultad:"}),(0,Br.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${v.bg} ${v.color}`,children:v.label})]})]}),p&&p.total_users>0&&!n&&h&&(0,Br.jsxs)("div",{className:"space-y-4",children:[(0,Br.jsxs)("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,Br.jsx)(Tc,{className:"w-5 h-5 mr-2 text-blue-600"}),(0,Br.jsx)("h3",{className:"text-base font-bold text-gray-800",children:"Estadísticas Sin Riesgo"})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Br.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-100",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,Br.jsx)(gs,{className:"w-4 h-4 mr-1 text-blue-600"}),(0,Br.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Media UA"})]}),(0,Br.jsx)("div",{className:"text-blue-600 font-bold text-center text-2xl",children:o(p.avg_score_without_risk)}),(0,Br.jsxs)("div",{className:"text-center text-xs text-gray-500 mt-1",children:[p.total_users," usuarios"]})]}),(0,Br.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-green-100",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,Br.jsx)(Ou,{className:"w-4 h-4 mr-1 text-green-600"}),(0,Br.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Mi Nota"})]}),(0,Br.jsx)("div",{className:"text-green-600 font-bold text-center text-2xl",children:o(g)}),(0,Br.jsx)("div",{className:"text-center text-xs text-gray-500 mt-1",children:"Último intento"})]}),(0,Br.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-purple-100",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[x>0?(0,Br.jsx)(Tc,{className:"w-4 h-4 mr-1 text-purple-600"}):x<0?(0,Br.jsx)(Pu,{className:"w-4 h-4 mr-1 text-purple-600"}):(0,Br.jsx)(gd,{className:"w-4 h-4 mr-1 text-purple-600"}),(0,Br.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Mi Percentil"})]}),(0,Br.jsxs)("div",{className:"font-bold text-center text-2xl "+(x>0?"text-green-600":x<0?"text-red-600":"text-gray-600"),children:[x>0?"+":"",x.toFixed(1)]}),(0,Br.jsx)("div",{className:"text-center text-xs text-gray-500 mt-1",children:"vs. media"})]})]})]}),(0,Br.jsxs)("div",{className:"p-6 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg border border-orange-200",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,Br.jsx)(Tc,{className:"w-5 h-5 mr-2 text-orange-600"}),(0,Br.jsx)("h3",{className:"text-base font-bold text-gray-800",children:"Estadísticas Con Riesgo"})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Br.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-orange-100",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,Br.jsx)(gs,{className:"w-4 h-4 mr-1 text-orange-600"}),(0,Br.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Media UA"})]}),(0,Br.jsx)("div",{className:"text-orange-600 font-bold text-center text-2xl",children:o(p.avg_score_with_risk)}),(0,Br.jsxs)("div",{className:"text-center text-xs text-gray-500 mt-1",children:[p.total_users," usuarios"]})]}),(0,Br.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-green-100",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,Br.jsx)(Ou,{className:"w-4 h-4 mr-1 text-green-600"}),(0,Br.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Mi Nota"})]}),(0,Br.jsx)("div",{className:"text-green-600 font-bold text-center text-2xl",children:o(y)}),(0,Br.jsx)("div",{className:"text-center text-xs text-gray-500 mt-1",children:"Último intento"})]}),(0,Br.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-purple-100",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[b>0?(0,Br.jsx)(Tc,{className:"w-4 h-4 mr-1 text-purple-600"}):b<0?(0,Br.jsx)(Pu,{className:"w-4 h-4 mr-1 text-purple-600"}):(0,Br.jsx)(gd,{className:"w-4 h-4 mr-1 text-purple-600"}),(0,Br.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Mi Percentil"})]}),(0,Br.jsxs)("div",{className:"font-bold text-center text-2xl "+(b>0?"text-green-600":b<0?"text-red-600":"text-gray-600"),children:[b>0?"+":"",b.toFixed(1)]}),(0,Br.jsx)("div",{className:"text-center text-xs text-gray-500 mt-1",children:"vs. media"})]})]})]})]}),(0,Br.jsxs)("div",{className:"mt-6",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Br.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Mis Últimos Intentos"}),(0,Br.jsx)(uc,{onClick:e=>{e.preventDefault(),r("/")},variant:"primary",className:"text-sm font-medium px-3 py-1.5 rounded-lg",children:"Ver todos →"})]}),(0,Br.jsx)(Au,{quizId:e.id,maxResults:5,showCourseColumn:!1})]}),(0,Br.jsx)("div",{className:"text-center pt-6",children:(0,Br.jsxs)(uc,{onClick:t,variant:"primary",className:"w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 text-white font-bold text-lg rounded-xl shadow-lg transform hover:-translate-y-0.5",style:{background:"linear-gradient(to right, var(--qe-primary), var(--qe-secondary))"},children:[(0,Br.jsx)(rd,{className:"w-6 h-6 mr-2"}),"Comenzar Cuestionario"]})})]})},bd=({step:e})=>{const{url:t,filename:r}=e.data;return t?(0,Br.jsx)("div",{className:"w-full bg-white p-4 rounded-lg border shadow-sm",children:(0,Br.jsx)("div",{className:"aspect-w-4 aspect-h-5",children:(0,Br.jsx)("embed",{src:t,type:"application/pdf",className:"w-full h-full",style:{minHeight:"73vh"}})})}):(0,Br.jsxs)("div",{className:"p-4 border border-red-200 bg-red-50 rounded-lg flex items-center",children:[(0,Br.jsx)($u,{className:"h-5 w-5 text-red-500 mr-3"}),(0,Br.jsx)("p",{className:"text-sm text-red-700",children:"No se ha proporcionado una URL para el PDF."})]})},vd=({step:e,lesson:t,quizzes:r})=>{const[s,n]=(0,o.useState)(!1);if((0,o.useEffect)(()=>{n(!1)},[e]),!e||!t)return(0,Br.jsxs)("div",{className:"flex-grow lg:w-2/3 p-8 flex flex-col items-center justify-center text-center bg-white rounded-lg shadow-md",children:[(0,Br.jsx)(mc,{className:"w-16 h-16 text-gray-300 mb-4"}),(0,Br.jsx)("h2",{className:"text-2xl font-semibold text-gray-700",children:"Selecciona un paso"}),(0,Br.jsx)("p",{className:"text-gray-500 mt-2",children:"Elige un paso de la lista de lecciones para ver su contenido."})]});const a="quiz"===e.type?e.data?.quiz_id||e.quiz_id:null,i="quiz"===e.type?(e=>{if(!r||0===r.length)return"Cuestionario";const t=r.find(t=>t.id===e);return t?t.title.rendered||t.title:"Cuestionario"})(a):e.title;return(0,Br.jsxs)("div",{className:"flex-grow lg:w-full bg-gray-100 h-[100%] overflow-y-auto",children:[(0,Br.jsxs)("div",{className:"mb-6 px-6 pt-6",children:[(0,Br.jsx)("p",{className:"text-sm text-indigo-600 font-semibold",children:t.title.rendered}),(0,Br.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mt-1",children:i})]}),(0,Br.jsx)("div",{className:"border-t pt-6 px-6 pb-6",children:(e=>{if(!e||!e.type)return(0,Br.jsx)("p",{className:"text-gray-500",children:"Contenido del paso no disponible."});const t=e.data||{};switch(e.type){case"video":const a=(e=>{if(!e)return null;let t=null,r=null;let s=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return s&&s[1]&&(t=s[1],r=`https://www.youtube.com/embed/${t}`),r||(s=e.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:video\/)?(\d+)/),s&&s[1]&&(t=s[1],r=`https://player.vimeo.com/video/${t}`)),r||!e.includes("youtube.com/embed")&&!e.includes("player.vimeo.com/video")?r:e})(t.video_url);return(0,Br.jsx)("div",{children:a?(0,Br.jsx)("div",{className:"aspect-video",children:(0,Br.jsx)("iframe",{className:"w-full h-full rounded-lg",src:a,title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,Br.jsx)("p",{children:"La URL del video no es válida o no es compatible."})});case"text":return(0,Br.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:t.content||"No hay contenido de texto."}});case"quiz":const o=t.quiz_id||e.quiz_id||e.data?.quiz_id;if(!o)return(0,Br.jsx)("p",{children:"Error: No se ha especificado un ID de cuestionario para este paso."});const i=r.find(e=>e.id===o);return s?(0,Br.jsx)(fd,{quizId:o}):(0,Br.jsx)(xd,{quiz:i,onStartQuiz:()=>n(!0)});case"pdf":return(0,Br.jsx)(bd,{step:e});default:return(0,Br.jsxs)("p",{children:["Tipo de paso no soportado: ",e.type]})}})(e)})]})},_d=rs("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),jd=({courseId:e,courseTitle:t,onClose:r})=>{const[s,n]=(0,o.useState)(!0),[i,l]=(0,o.useState)(null),[c,u]=(0,o.useState)(null),{formatScore:d}=xu();(0,o.useEffect)(()=>{p()},[e]);const p=async()=>{try{n(!0),l(null);const t=await a.default.get(`/courses/${e}/ranking`);u(t.data.data)}catch(e){console.error("Error loading course ranking:",e),l("No se pudo cargar el ranking del curso")}finally{n(!1)}},h=e=>{switch(e){case 1:return(0,Br.jsx)(_d,{className:"w-5 h-5 text-yellow-500"});case 2:return(0,Br.jsx)(Ou,{className:"w-5 h-5 text-gray-400"});case 3:return(0,Br.jsx)(Ou,{className:"w-5 h-5 text-amber-600"});default:return(0,Br.jsx)("span",{className:"w-5 h-5 text-center font-bold text-gray-500",children:e})}};return(0,Br.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Br.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,Br.jsxs)("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",style:{backgroundColor:"var(--qe-primary-light)"},children:[(0,Br.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Br.jsx)(Tc,{className:"w-6 h-6",style:{color:"var(--qe-primary)"}}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Ranking del Curso"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:t})]})]}),(0,Br.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,Br.jsx)(fs,{className:"w-5 h-5 text-gray-500"})})]}),(0,Br.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[s&&(0,Br.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,Br.jsx)(xs,{className:"w-8 h-8 animate-spin mb-4",style:{color:"var(--qe-primary)"}}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Cargando ranking..."})]}),i&&(0,Br.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,Br.jsx)(tu,{className:"w-12 h-12 text-red-500 mb-4"}),(0,Br.jsx)("p",{className:"text-red-600 text-center",children:i}),(0,Br.jsx)("button",{onClick:p,className:"mt-4 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"var(--qe-primary)"},children:"Reintentar"})]}),!s&&!i&&c&&(0,Br.jsxs)(Br.Fragment,{children:[(0,Br.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Br.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Br.jsx)("strong",{children:"Total de cuestionarios:"})," ",c.total_quizzes,(0,Br.jsx)("br",{}),(0,Br.jsx)("span",{className:"text-xs text-blue-600",children:"La puntuación media se calcula dividiendo la suma de las mejores puntuaciones entre el total de cuestionarios del curso."})]})}),0===c.ranking.length?(0,Br.jsxs)("div",{className:"text-center py-12",children:[(0,Br.jsx)(_d,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,Br.jsx)("p",{className:"text-gray-500",children:"No hay datos de ranking para este curso aún."}),(0,Br.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Los usuarios aparecerán aquí cuando completen cuestionarios."})]}):(0,Br.jsx)("div",{className:"overflow-x-auto",children:(0,Br.jsxs)("table",{className:"w-full",children:[(0,Br.jsx)("thead",{children:(0,Br.jsxs)("tr",{className:"border-b-2 border-gray-200",children:[(0,Br.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700 w-16",children:"Pos."}),(0,Br.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Usuario"}),(0,Br.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Media"}),(0,Br.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Completados"}),(0,Br.jsx)("th",{className:"text-center py-3 px-4 font-semibold text-gray-700",children:"Progreso"}),(0,Br.jsx)("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"Estado"})]})}),(0,Br.jsx)("tbody",{children:c.ranking.map((e,t)=>(0,Br.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors "+(t<3?"bg-yellow-50":""),children:[(0,Br.jsx)("td",{className:"py-4 px-4",children:(0,Br.jsx)("div",{className:"flex items-center justify-center",children:h(e.position)})}),(0,Br.jsx)("td",{className:"py-4 px-4",children:(0,Br.jsx)("span",{className:"font-medium text-gray-900",children:e.display_name})}),(0,Br.jsx)("td",{className:"py-4 px-4 text-center",children:(0,Br.jsx)("span",{className:"text-lg font-bold",style:{color:"var(--qe-primary)"},children:d(e.average_score)})}),(0,Br.jsx)("td",{className:"py-4 px-4 text-center",children:(0,Br.jsxs)("span",{className:"text-gray-700",children:[e.quizzes_completed," / ",e.total_quizzes]})}),(0,Br.jsx)("td",{className:"py-4 px-4",children:(0,Br.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Br.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:(0,Br.jsx)("div",{className:"h-2 rounded-full transition-all",style:{width:`${e.completion_percentage}%`,backgroundColor:"var(--qe-primary)"}})}),(0,Br.jsxs)("span",{className:"text-xs text-gray-600 w-12 text-right",children:[e.completion_percentage,"%"]})]})}),(0,Br.jsx)("td",{className:"py-4 px-4",children:e.quizzes_pending>0?(0,Br.jsxs)("span",{className:"text-xs px-2 py-1 bg-orange-100 text-orange-700 rounded-full",children:[e.quizzes_pending," ",1===e.quizzes_pending?"pendiente":"pendientes"]}):(0,Br.jsxs)("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full flex items-center gap-1 w-fit",children:[(0,Br.jsx)("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Completado"]})})]},e.user_id))})]})})]})]}),(0,Br.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50 flex justify-end",children:(0,Br.jsx)("button",{onClick:r,className:"px-6 py-2 rounded-lg font-medium transition-colors",style:{backgroundColor:"var(--qe-primary)",color:"white"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:"Cerrar"})})]})})},wd=()=>(0,Br.jsxs)("div",{className:"flex items-center justify-center h-full text-gray-500",children:[(0,Br.jsx)(xs,{className:"animate-spin mr-2"}),"Cargando contenido del curso..."]}),Nd=({message:e})=>(0,Br.jsxs)("div",{className:"p-4 text-red-600",children:["Error: ",e]}),kd=()=>(0,Br.jsx)("div",{className:"p-4 text-gray-500",children:"Curso no encontrado o no hay lecciones disponibles."}),Cd=()=>{const{courseId:e}=ht(),t=lt(),{t:r}=N(),[s,n]=(0,o.useState)(null),[a,i]=(0,o.useState)({lesson:null,step:null}),[l,c]=(0,o.useState)(null),[u,d]=(0,o.useState)(!1),[p,h]=(0,o.useState)(!1),{lessons:f,loading:m,error:g}=Xn({courseId:e,autoFetch:!!e,perPage:100}),{quizzes:y,loading:x,error:b}=_a({perPage:100,autoFetch:!0}),{data:v,loading:_,error:j}=(e=>{const[t,r]=(0,o.useState)(null),[s,n]=(0,o.useState)(!0),[a,i]=(0,o.useState)(null),l=(0,o.useCallback)(async()=>{if(e){n(!0),i(null);try{const t=await nn(parseInt(e));r(t)}catch(e){i(e)}finally{n(!1)}}else n(!1)},[e]);return(0,o.useEffect)(()=>{l()},[l]),{data:t,loading:s,error:a}})(e);return(0,o.useEffect)(()=>{v&&n(v)},[v]),(0,o.useEffect)(()=>{const e=j||g||b;e&&c(e.message||"Ocurrió un error")},[j,g,b]),(0,o.useEffect)(()=>{if(u||m||x||!f?.length)return;const e=t.state?.selectedQuizId;if(e&&y?.length>0){const t=y.find(t=>parseInt(t.id)===parseInt(e));if(t){const e={id:`quiz-${t.id}`,type:"quiz",quiz_id:t.id,quiz:t},r=f.find(e=>{const r=e.meta?._lesson_steps?.some(e=>e?.quiz_id&&parseInt(e.quiz_id)===parseInt(t.id));return r})||f[0];return i({lesson:r,step:e}),d(!0),void window.history.replaceState({},document.title)}}const r=f[0],s=r?.meta?._lesson_steps?.[0];r&&s&&(i({lesson:r,step:s}),d(!0))},[f,m,y,x,u,t.state]),_||x||m?(0,Br.jsx)(wd,{}):l?(0,Br.jsx)(Nd,{message:l}):s&&f&&0!==f.length?(0,Br.jsxs)("div",{className:"flex flex-col h-full overflow-hidden bg-gray-100",children:[s&&(0,Br.jsxs)("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between shadow-sm",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:s.title?.rendered||s.title}),(0,Br.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[f.length," ",1===f.length?"lección":"lecciones"]})]}),(0,Br.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all hover:shadow-md",style:{backgroundColor:"var(--qe-primary)",color:"white"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,Br.jsx)(Tc,{className:"w-5 h-5"}),"Ranking del Curso"]})]}),(0,Br.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,Br.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Br.jsx)(vd,{lesson:a.lesson,step:a.step,quizzes:y})}),(0,Br.jsx)(sd,{lessons:f,isLoading:m,selectedStepId:a.step?.id,onSelectStep:(e,t)=>{i({step:e,lesson:t})},quizzes:y})]}),p&&s&&(0,Br.jsx)(jd,{courseId:parseInt(e),courseTitle:s.title?.rendered||s.title,onClose:()=>h(!1)})]}):(0,Br.jsx)(kd,{})},Ed=rs("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Sd=rs("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),qd=rs("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),Od=rs("sliders-vertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]),Td=({isOpen:e,onClose:t,onGenerate:r,courses:s,lessons:n,categories:a,difficulties:i,isLoading:l,isPracticeMode:c=!1})=>{const[u,d]=(0,o.useState)({course:"all",lesson:"all",category:"all",difficulty:"all",numQuestions:10,timeLimit:0}),p=(e,t)=>{d(r=>({...r,[e]:t}))},h=[{value:"all",label:"Todos los Cursos"},...s.map(e=>({value:e.id,label:e.title.rendered||e.title}))],f=[{value:"all",label:"Todas las Lecciones"},...n.map(e=>({value:e.id,label:e.title.rendered||e.title}))],m=(e,t,r,s,n,a=!1)=>(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-2",children:e}),(0,Br.jsx)("select",{id:t,name:t,value:r,onChange:e=>s(t,e.target.value),disabled:a,className:"w-full h-10 pl-3 pr-6 text-base placeholder-gray-600 border rounded-lg appearance-none focus:shadow-outline-blue focus:border-blue-300",children:n.map(e=>(0,Br.jsx)("option",{value:e.value,children:e.label},e.value))})]});return e?(0,Br.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[(0,Br.jsx)("div",{className:"fixed inset-0 bg-gray-500 opacity-75",onClick:t}),(0,Br.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-auto",children:[(0,Br.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,Br.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[(0,Br.jsx)(Od,{className:"w-5 h-5"}),c?"Configurar Práctica":"Configurar Cuestionario"]}),(0,Br.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,Br.jsx)(fs,{className:"h-5 w-5"})})]}),(0,Br.jsxs)("div",{className:"p-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[m("Filtrar por Curso","course",u.course,p,h,l),m("Filtrar por Lección","lesson",u.lesson,p,f,l),m("Filtrar por Categoría","category",u.category,p,a,l),m("Filtrar por Dificultad","difficulty",u.difficulty,p,i,l),(0,Br.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número de Preguntas"}),(0,Br.jsx)("input",{type:"number",min:"1",max:"50",value:u.numQuestions,onChange:e=>p("numQuestions",parseInt(e.target.value,10)),className:"w-full h-10 px-3 text-base placeholder-gray-600 border rounded-lg focus:shadow-outline-blue focus:border-blue-300"})]}),!c&&(0,Br.jsxs)("div",{children:[(0,Br.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Límite de Tiempo (minutos)"}),(0,Br.jsx)("input",{type:"number",min:"0",value:u.timeLimit,onChange:e=>p("timeLimit",parseInt(e.target.value,10)),className:"w-full h-10 px-3 text-base placeholder-gray-600 border rounded-lg focus:shadow-outline-blue focus:border-blue-300",placeholder:"0 para ilimitado"})]})]})]}),(0,Br.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end",children:(0,Br.jsx)(os,{onClick:()=>{r(u)},disabled:l,children:l?"Cargando filtros...":c?"Comenzar Práctica":"Generar Cuestionario"})})]})]}):null},Pd=()=>{const{t:e}=N(),[t,r]=(0,o.useState)(!1),[s,n]=(0,o.useState)(null),{courses:a,loading:i}=wn({perPage:100}),{lessons:l,loading:c}=Xn({perPage:100}),{options:u,isLoading:d}=ka(["qe_category","qe_difficulty"]),{questions:p,loading:h,fetchQuestions:f}=lc({autoFetch:!1}),m=(0,o.useCallback)(async e=>{n(e),r(!1),await f(!0,{category:"all"!==e.category?e.category:null,difficulty:"all"!==e.difficulty?e.difficulty:null,lesson:"all"!==e.lesson?e.lesson:null,perPage:e.numQuestions})},[f]);if(!s)return(0,Br.jsxs)("div",{className:"p-8",children:[(0,Br.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Br.jsxs)("div",{className:"text-center mb-12",children:[(0,Br.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl mb-6 shadow-lg",children:(0,Br.jsx)(Ed,{className:"w-10 h-10 text-white"})}),(0,Br.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:"Generador de Test"}),(0,Br.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Crea cuestionarios personalizados seleccionando el número de preguntas, categoría, dificultad y más"})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[(0,Br.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Br.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-4",children:(0,Br.jsx)(Sd,{className:"w-6 h-6 text-purple-600"})}),(0,Br.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Filtros Avanzados"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"Selecciona categorías, niveles de dificultad y lecciones específicas"})]}),(0,Br.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Br.jsx)("div",{className:"w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mb-4",children:(0,Br.jsx)(kc,{className:"w-6 h-6 text-indigo-600"})}),(0,Br.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Personalizable"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"Configura el número de preguntas y el tiempo límite según tus necesidades"})]}),(0,Br.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Br.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:(0,Br.jsx)(qd,{className:"w-6 h-6 text-blue-600"})}),(0,Br.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Listo para Usar"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"Comienza inmediatamente después de generar tu cuestionario personalizado"})]})]}),(0,Br.jsx)("div",{className:"text-center",children:(0,Br.jsxs)("button",{onClick:()=>{r(!0)},className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,Br.jsx)(Od,{className:"w-5 h-5 mr-2"}),"Configurar Cuestionario"]})}),(0,Br.jsx)("div",{className:"mt-12 bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-6 border border-purple-100",children:(0,Br.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Br.jsx)(Ed,{className:"w-5 h-5 text-purple-600 mt-0.5 flex-shrink-0"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h4",{className:"text-sm font-semibold text-purple-900 mb-1",children:"¿Cómo funciona?"}),(0,Br.jsxs)("p",{className:"text-sm text-purple-700",children:['1. Haz clic en "Configurar Cuestionario"',(0,Br.jsx)("br",{}),"2. Selecciona tus preferencias (categoría, dificultad, número de preguntas, etc.)",(0,Br.jsx)("br",{}),"3. Genera tu test personalizado y comienza a practicar"]})]})]})})]}),t&&(0,Br.jsx)(Td,{isOpen:t,onClose:()=>r(!1),onGenerate:m,courses:a,lessons:l,categories:u.qe_category||[],difficulties:u.qe_difficulty||[],isLoading:i||c||d})]});if(h)return(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,Br.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-purple-100 rounded-full mb-4 animate-pulse",children:(0,Br.jsx)(Ed,{className:"w-8 h-8 text-purple-600"})}),(0,Br.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Generando tu cuestionario..."}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Estamos seleccionando las mejores preguntas para ti"})]})});const g={id:"custom",title:{rendered:"Cuestionario Personalizado"},meta:{_quiz_question_ids:p.map(e=>e.id),_time_limit:s.timeLimit||0,_passing_score:70},question_count:p.length};return(0,Br.jsxs)("div",{className:"p-6",children:[(0,Br.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Cuestionario Personalizado"}),(0,Br.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[p.length," preguntas •",s.timeLimit>0?` ${s.timeLimit} minutos`:" Sin límite de tiempo"]})]}),(0,Br.jsxs)("button",{onClick:()=>{n(null),r(!1)},className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[(0,Br.jsx)(du,{className:"w-4 h-4 mr-2"}),"Nuevo Cuestionario"]})]}),(0,Br.jsx)(fd,{quizId:"custom",customQuiz:g})]})},Ad=()=>{const{quizId:e}=ht(),t=dt(),[r,s]=(0,o.useState)(!1),[n,a]=(0,o.useState)(null),{formatScore:l}=xu(),{quizzes:c,loading:u}=va({perPage:100}),{courses:d,loading:p}=wn({perPage:100}),{lessons:h,loading:f}=Xn({perPage:100});if((0,o.useEffect)(()=>{if(c.length>0&&e){const t=c.find(t=>t.id===parseInt(e));a(t)}},[c,e]),u||p||f)return(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Br.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Cargando cuestionario..."})]})})});if(!n)return(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Br.jsx)(BookOpen,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,Br.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cuestionario no encontrado"}),(0,Br.jsx)("p",{className:"text-gray-600 mb-6",children:"El cuestionario que buscas no existe o ha sido eliminado."}),(0,Br.jsx)(uc,{onClick:()=>t("/"),variant:"primary",className:"px-6 py-2 rounded-lg",children:"Volver al Dashboard"})]})})});if(r)return(0,Br.jsx)(fd,{quizId:n.id});const m=n.meta?._lesson_ids||[],g=h.filter(e=>m.includes(e.id)),y=d.filter(e=>g.some(t=>(t.meta?._course_ids||[]).includes(e.id))),x=n.meta?._quiz_question_ids?.length||0,b=n.meta?._time_limit||0,v=n.meta?._passing_score||0;return(0,Br.jsx)("div",{className:"p-6",children:(0,Br.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Br.jsxs)("button",{onClick:()=>t("/"),className:"inline-flex items-center text-gray-600 hover:text-gray-800 mb-6 transition-colors",children:[(0,Br.jsx)(ChevronLeft,{className:"w-5 h-5 mr-1"}),"Volver al Dashboard"]}),(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,Br.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 text-white",children:(0,Br.jsx)("div",{className:"flex items-start justify-between",children:(0,Br.jsxs)("div",{className:"flex-1",children:[(0,Br.jsx)("h1",{className:"text-3xl font-bold mb-3",children:n.title?.rendered||n.title}),(0,Br.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-indigo-100",children:[y.map((e,t)=>(0,Br.jsxs)(i().Fragment,{children:[t>0&&(0,Br.jsx)("span",{children:"•"}),(0,Br.jsx)("span",{className:"bg-white/10 px-2 py-1 rounded",children:e.title?.rendered||e.title})]},e.id)),g.length>0&&(0,Br.jsx)("span",{children:"›"}),g.map((e,t)=>(0,Br.jsxs)(i().Fragment,{children:[t>0&&(0,Br.jsx)("span",{children:"•"}),(0,Br.jsx)("span",{className:"bg-white/10 px-2 py-1 rounded",children:e.title?.rendered||e.title})]},e.id))]})]})})}),(0,Br.jsxs)("div",{className:"p-8",children:[(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,Br.jsx)("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Br.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,Br.jsx)(gl,{className:"w-6 h-6 text-blue-600"})}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Preguntas"}),(0,Br.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:x})]})]})}),b>0&&(0,Br.jsx)("div",{className:"bg-orange-50 rounded-lg p-6 border border-orange-200",children:(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Br.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,Br.jsx)(Vu,{className:"w-6 h-6 text-orange-600"})}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Tiempo Límite"}),(0,Br.jsxs)("p",{className:"text-2xl font-bold text-orange-900",children:[b," min"]})]})]})}),v>0&&(0,Br.jsx)("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200",children:(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Br.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,Br.jsx)(Target,{className:"w-6 h-6 text-green-600"})}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"Puntuación Mínima"}),(0,Br.jsx)("p",{className:"text-2xl font-bold text-green-900",children:l(v)})]})]})})]}),n.content?.rendered&&(0,Br.jsx)("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:(0,Br.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Br.jsx)(Info,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"Descripción del Cuestionario"}),(0,Br.jsx)("div",{className:"text-sm text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:n.content.rendered}})]})]})}),(0,Br.jsx)("div",{className:"mb-8 p-6 bg-indigo-50 rounded-lg border border-indigo-200",children:(0,Br.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Br.jsx)(Ou,{className:"w-5 h-5 text-indigo-600 mt-0.5 flex-shrink-0"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h3",{className:"text-sm font-semibold text-indigo-900 mb-2",children:"Instrucciones"}),(0,Br.jsxs)("ul",{className:"text-sm text-indigo-800 space-y-2",children:[(0,Br.jsx)("li",{children:"• Lee cada pregunta cuidadosamente antes de responder"}),(0,Br.jsx)("li",{children:"• Selecciona la opción que consideres correcta"}),b>0&&(0,Br.jsxs)("li",{children:["• El cuestionario tiene un límite de tiempo de ",b," minutos"]}),(0,Br.jsx)("li",{children:"• Puedes marcar preguntas con riesgo si no estás seguro"}),(0,Br.jsx)("li",{children:"• Revisa tus respuestas antes de enviar el cuestionario"}),v>0&&(0,Br.jsxs)("li",{children:["• Necesitas obtener al menos ",l(v)," para aprobar"]})]})]})]})}),(0,Br.jsx)("div",{className:"flex justify-center",children:(0,Br.jsxs)("button",{onClick:()=>s(!0),className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,Br.jsx)(Play,{className:"w-6 h-6 mr-2"}),"Comenzar Cuestionario"]})})]})]})]})})},Ld=rs("book-check",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9 9.5 2 2 4-4",key:"1dth82"}]]),zd=()=>{const e=dt(),[t,r]=(0,o.useState)({}),[s,n]=(0,o.useState)({}),[a,i]=(0,o.useState)(""),{courses:l,loading:c}=wn({perPage:100}),{lessons:u,loading:d}=Xn({perPage:100}),{quizzes:p,loading:h}=va({perPage:100});console.log("📊 Data loaded:",{courses:l.length,lessons:u.length,quizzes:p.length});const f=(0,o.useMemo)(()=>{if(!l.length||!u.length||!p.length)return console.log("⚠️ Missing data for organization"),[];const e=[];return l.forEach(t=>{console.log(`📚 Processing course: ${t.title?.rendered||t.title}`);const r=u.filter(e=>(e.meta?._course_ids||[]).includes(t.id));if(console.log(`  Found ${r.length} lessons for course ${t.id}`),0===r.length)return;const s={id:t.id,title:t.title?.rendered||t.title,lessons:[]};r.forEach(e=>{console.log(`  📄 Processing lesson: ${e.title?.rendered||e.title}`);const r=p.filter(r=>{const s=r.meta?._lesson_ids||[],n=r.meta?._course_ids||[];return s.includes(e.id)||0===s.length&&n.includes(t.id)});console.log(`    Found ${r.length} quizzes for lesson ${e.id}`),0!==r.length&&s.lessons.push({id:e.id,title:e.title?.rendered||e.title,quizzes:r.map(e=>({id:e.id,title:e.title?.rendered||e.title,questionCount:e.question_count||0,timeLimit:e.time_limit||0,passingScore:e.passing_score||0}))})}),s.lessons.length>0&&e.push(s)}),console.log("✅ Organization complete:",e),e},[l,u,p]),m=(0,o.useMemo)(()=>p.length?p.filter(e=>{const t=e.meta?._lesson_ids||[],r=e.meta?._course_ids||[];return 0===t.length&&0===r.length}).map(e=>({id:e.id,title:e.title?.rendered||e.title,questionCount:e.question_count||0,timeLimit:e.time_limit||0,passingScore:e.passing_score||0})):[],[p]),g=(0,o.useMemo)(()=>a?f.map(e=>({...e,lessons:e.lessons.map(e=>({...e,quizzes:e.quizzes.filter(e=>e.title.toLowerCase().includes(a.toLowerCase()))})).filter(e=>e.quizzes.length>0)})).filter(e=>e.lessons.length>0):f,[f,a]),y=(0,o.useMemo)(()=>a?m.filter(e=>e.title.toLowerCase().includes(a.toLowerCase())):m,[m,a]),x=t=>{e(`/quiz/${t}`)},b=c||d||h,v=f.reduce((e,t)=>e+t.lessons.reduce((e,t)=>e+t.quizzes.length,0),0)+m.length;return(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Br.jsxs)("div",{className:"mb-6",children:[(0,Br.jsxs)("button",{onClick:()=>e("/test"),className:"inline-flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[(0,Br.jsx)(ju,{className:"w-5 h-5 mr-1"}),"Volver a Test"]}),(0,Br.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Biblioteca de Cuestionarios"}),(0,Br.jsx)("p",{className:"text-gray-600 mt-2",children:"Accede a todos los cuestionarios disponibles organizados por curso y lección"})]}),(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,Br.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white",children:[(0,Br.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Br.jsx)(mc,{className:"w-8 h-8"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h2",{className:"text-2xl font-bold",children:"Todos los Cuestionarios"}),(0,Br.jsx)("p",{className:"text-indigo-100 text-sm mt-1",children:b?"Cargando...":`${v} cuestionarios disponibles`})]})]})}),(0,Br.jsxs)("div",{className:"relative",children:[(0,Br.jsx)(Ea,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-indigo-300"}),(0,Br.jsx)("input",{type:"text",placeholder:"Buscar cuestionario...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-indigo-200 focus:outline-none focus:ring-2 focus:ring-white/50"})]})]}),(0,Br.jsx)("div",{className:"p-6",children:b?(0,Br.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,Br.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-3"}),(0,Br.jsx)("span",{className:"text-gray-600",children:"Cargando cuestionarios..."})]}):0===g.length&&0===y.length?(0,Br.jsxs)("div",{className:"text-center py-12",children:[(0,Br.jsx)(Ld,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,Br.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:a?"No se encontraron cuestionarios":"No hay cuestionarios disponibles"}),(0,Br.jsx)("p",{className:"text-gray-500",children:a?"Intenta con otros términos de búsqueda":"Los cuestionarios aparecerán aquí cuando estén disponibles"})]}):(0,Br.jsxs)("div",{className:"space-y-6",children:[g.length>0&&(0,Br.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,Br.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Br.jsxs)("button",{onClick:()=>{return t=e.id,void r(e=>({...e,[t]:!e[t]}));var t},className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[t[e.id]?(0,Br.jsx)(_l,{className:"w-5 h-5 text-gray-600"}):(0,Br.jsx)(_u,{className:"w-5 h-5 text-gray-600"}),(0,Br.jsx)(mc,{className:"w-5 h-5 text-indigo-600"}),(0,Br.jsx)("span",{className:"font-semibold text-gray-800",children:e.title})]}),(0,Br.jsxs)("span",{className:"text-sm text-gray-500",children:[e.lessons.reduce((e,t)=>e+t.quizzes.length,0)," cuestionarios"]})]}),t[e.id]&&(0,Br.jsx)("div",{className:"bg-white",children:e.lessons.map(e=>(0,Br.jsxs)("div",{className:"border-t border-gray-200",children:[(0,Br.jsxs)("button",{onClick:()=>{return t=e.id,void n(e=>({...e,[t]:!e[t]}));var t},className:"w-full flex items-center justify-between p-4 pl-12 hover:bg-gray-50 transition-colors",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[s[e.id]?(0,Br.jsx)(_l,{className:"w-4 h-4 text-gray-500"}):(0,Br.jsx)(_u,{className:"w-4 h-4 text-gray-500"}),(0,Br.jsx)(gl,{className:"w-4 h-4 text-purple-600"}),(0,Br.jsx)("span",{className:"text-gray-700 font-medium",children:e.title})]}),(0,Br.jsxs)("span",{className:"text-xs text-gray-500",children:[e.quizzes.length," cuestionarios"]})]}),s[e.id]&&(0,Br.jsx)("div",{className:"bg-gray-50 border-t border-gray-200",children:e.quizzes.map(e=>(0,Br.jsxs)("button",{onClick:()=>x(e.id),className:"w-full flex items-center justify-between p-4 pl-20 hover:bg-gray-100 transition-colors border-b border-gray-200 last:border-b-0",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,Br.jsx)(Ld,{className:"w-4 h-4 text-green-600"}),(0,Br.jsx)("span",{className:"text-gray-800 text-sm",children:e.title})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Br.jsx)(gl,{className:"w-3 h-3"}),(0,Br.jsxs)("span",{children:[e.questionCount," preguntas"]})]}),e.timeLimit>0&&(0,Br.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Br.jsx)(Vu,{className:"w-3 h-3"}),(0,Br.jsxs)("span",{children:[e.timeLimit," min"]})]})]})]},e.id))})]},e.id))})]},e.id))}),y.length>0&&(0,Br.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Br.jsx)("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:(0,Br.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Br.jsx)(gl,{className:"w-5 h-5 text-gray-600"}),(0,Br.jsx)("span",{className:"font-semibold text-gray-800",children:"Otros Cuestionarios"}),(0,Br.jsxs)("span",{className:"text-sm text-gray-500",children:["(",y.length,")"]})]})}),(0,Br.jsx)("div",{className:"bg-white",children:y.map(e=>(0,Br.jsxs)("button",{onClick:()=>x(e.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors border-b border-gray-200 last:border-b-0",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,Br.jsx)(Ld,{className:"w-4 h-4 text-green-600"}),(0,Br.jsx)("span",{className:"text-gray-800 text-sm",children:e.title})]}),(0,Br.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Br.jsx)(gl,{className:"w-3 h-3"}),(0,Br.jsxs)("span",{children:[e.questionCount," preguntas"]})]}),e.timeLimit>0&&(0,Br.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Br.jsx)(Vu,{className:"w-3 h-3"}),(0,Br.jsxs)("span",{children:[e.timeLimit," min"]})]})]})]},e.id))})]})]})})]})]})})},Md=rs("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Rd=({questions:e,answers:t,onBackToConfig:r})=>{const s=(0,o.useMemo)(()=>{let r=0,s=0,n=0;const a=e.map(e=>{const a=t[e.id],o=e.meta?._correct_answer;if(!a)return n++,{question:e,userAnswer:null,correctAnswer:o,isCorrect:!1,wasAnswered:!1};const i=a===o;return i?r++:s++,{question:e,userAnswer:a,correctAnswer:o,isCorrect:i,wasAnswered:!0}});return{correct:r,incorrect:s,unanswered:n,total:e.length,percentage:Math.round(r/e.length*100),detailedResults:a}},[e,t]),n=e=>({option_a:"A",option_b:"B",option_c:"C",option_d:"D"}[e]||e);return(0,Br.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 mb-6",children:[(0,Br.jsxs)("div",{className:"text-center mb-8",children:[(0,Br.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-full mb-4",children:(0,Br.jsx)(mc,{className:"w-10 h-10 text-white"})}),(0,Br.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"¡Práctica Completada!"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Revisa tus respuestas y aprende de los errores"})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,Br.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center border border-blue-200",children:[(0,Br.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:s.total}),(0,Br.jsx)("div",{className:"text-sm text-blue-700",children:"Total"})]}),(0,Br.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center border border-green-200",children:[(0,Br.jsx)("div",{className:"text-3xl font-bold text-green-600 mb-1",children:s.correct}),(0,Br.jsx)("div",{className:"text-sm text-green-700",children:"Correctas"})]}),(0,Br.jsxs)("div",{className:"bg-red-50 rounded-lg p-4 text-center border border-red-200",children:[(0,Br.jsx)("div",{className:"text-3xl font-bold text-red-600 mb-1",children:s.incorrect}),(0,Br.jsx)("div",{className:"text-sm text-red-700",children:"Incorrectas"})]}),(0,Br.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center border border-gray-200",children:[(0,Br.jsx)("div",{className:"text-3xl font-bold text-gray-600 mb-1",children:s.unanswered}),(0,Br.jsx)("div",{className:"text-sm text-gray-700",children:"Sin responder"})]})]}),(0,Br.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-6 border border-blue-200",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Br.jsx)("span",{className:"text-sm font-medium text-blue-900",children:"Precisión"}),(0,Br.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[s.percentage,"%"]})]}),(0,Br.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-3",children:(0,Br.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 h-3 rounded-full transition-all duration-500",style:{width:`${s.percentage}%`}})})]})]}),(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[(0,Br.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:"Revisión de Respuestas"}),(0,Br.jsx)("div",{className:"space-y-6",children:s.detailedResults.map((e,t)=>{const r="object"==typeof e.question.title&&e.question.title?.rendered?e.question.title.rendered:e.question.title;return(0,Br.jsxs)("div",{className:"border rounded-lg p-5 "+(e.wasAnswered?e.isCorrect?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-gray-300 bg-gray-50"),children:[(0,Br.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,Br.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,Br.jsx)("span",{className:"flex-shrink-0 w-8 h-8 bg-white rounded-full flex items-center justify-center text-sm font-semibold text-gray-700 border border-gray-300",children:t+1}),(0,Br.jsx)("div",{className:"flex-1",children:(0,Br.jsx)("div",{className:"text-gray-800 font-medium",dangerouslySetInnerHTML:{__html:r}})})]}),(0,Br.jsx)("div",{className:"flex-shrink-0 ml-4",children:e.wasAnswered?e.isCorrect?(0,Br.jsx)(ms,{className:"w-6 h-6 text-green-600"}):(0,Br.jsx)(Ec,{className:"w-6 h-6 text-red-600"}):(0,Br.jsx)("div",{className:"inline-flex items-center px-3 py-1 bg-gray-200 text-gray-700 rounded-full text-xs font-medium",children:"Sin responder"})})]}),(0,Br.jsx)("div",{className:"ml-11 space-y-2",children:["option_a","option_b","option_c","option_d"].map(t=>{const r=e.question.meta?.[`_${t}`];if(!r)return null;const s=e.userAnswer===t,a=e.correctAnswer===t;return(0,Br.jsx)("div",{className:"p-3 rounded-lg border "+(a?"border-green-500 bg-green-100":s?"border-red-500 bg-red-100":"border-gray-200 bg-white"),children:(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Br.jsxs)("span",{className:"font-semibold text-gray-700",children:[n(t),"."]}),(0,Br.jsx)("span",{className:"text-gray-800",dangerouslySetInnerHTML:{__html:r}})]}),a&&(0,Br.jsx)("span",{className:"text-xs font-medium text-green-700 bg-green-200 px-2 py-1 rounded",children:"Correcta"}),s&&!a&&(0,Br.jsx)("span",{className:"text-xs font-medium text-red-700 bg-red-200 px-2 py-1 rounded",children:"Tu respuesta"})]})},t)})}),e.question.meta?._explanation&&(0,Br.jsx)("div",{className:"ml-11 mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,Br.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Br.jsx)(mc,{className:"w-4 h-4 text-blue-600 mt-0.5 flex-shrink-0"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("div",{className:"text-xs font-semibold text-blue-900 mb-1",children:"Explicación"}),(0,Br.jsx)("div",{className:"text-sm text-blue-800",dangerouslySetInnerHTML:{__html:e.question.meta._explanation}})]})]})})]},e.question.id)})})]}),(0,Br.jsx)("div",{className:"flex justify-center",children:(0,Br.jsxs)("button",{onClick:r,className:"inline-flex items-center px-8 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg",children:[(0,Br.jsx)(du,{className:"w-5 h-5 mr-2"}),"Nueva Práctica"]})})]})},Id=({quizId:e,customQuiz:t=null,customQuestions:r=null})=>{const s=dt(),[n,a]=(0,o.useState)(0),[i,l]=(0,o.useState)({}),[c,u]=(0,o.useState)(!1),{questions:d,loading:p}=lc({quiz:"practice"!==e?e:null,autoFetch:"practice"!==e}),h=t,f=r||d,m=(0,o.useMemo)(()=>h?.meta?._quiz_question_ids?h.meta._quiz_question_ids.map(e=>f.find(t=>t.id===parseInt(e))).filter(Boolean):[],[h,f]),g=(0,o.useMemo)(()=>m.length?[...m].sort(()=>Math.random()-.5):[],[m]),y=g[n],x=(0,o.useCallback)((e,t)=>{l(r=>({...r,[e]:t}))},[]),b=(0,o.useCallback)(()=>{n<g.length-1&&a(e=>e+1)},[n,g.length]),v=(0,o.useCallback)(()=>{n>0&&a(e=>e-1)},[n]),_=(0,o.useCallback)(()=>{u(!0)},[]),j=(0,o.useCallback)(()=>{s("/test/practice")},[s]);if(p)return(0,Br.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,Br.jsxs)("div",{className:"text-center",children:[(0,Br.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 qe-spinner-primary mb-4"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Cargando práctica..."})]})});if(!h||0===g.length)return(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Br.jsx)(Ld,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,Br.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No hay preguntas disponibles"}),(0,Br.jsx)("p",{className:"text-gray-600 mb-4",children:"No se encontraron preguntas con los filtros seleccionados."}),(0,Br.jsx)("button",{onClick:j,className:"qe-btn-primary px-6 py-2 rounded-lg transition-colors",children:"Volver a configurar"})]});if(c)return(0,Br.jsx)(Rd,{questions:g,answers:i,onBackToConfig:j});const w=Object.keys(i).length,N=(n+1)/g.length*100;return(0,Br.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[(0,Br.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Br.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Br.jsx)(Ld,{className:"w-5 h-5 qe-icon-primary"}),(0,Br.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Pregunta ",n+1," de ",g.length]})]}),(0,Br.jsxs)("span",{className:"text-sm text-gray-600",children:[w," / ",g.length," respondidas"]})]}),(0,Br.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Br.jsx)("div",{className:"qe-progress-bar h-2 rounded-full transition-all duration-300",style:{width:`${N}%`}})})]}),y&&(0,Br.jsx)("div",{className:"mb-6",children:(0,Br.jsx)(nd,{question:y,questionNumber:n+1,selectedAnswer:i[y.id],onAnswerChange:e=>x(y.id,e),disabled:!1,showCorrectAnswer:!1,isPracticeMode:!0})}),(0,Br.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,Br.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Br.jsxs)("button",{onClick:v,disabled:0===n,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,Br.jsx)(ju,{className:"w-4 h-4 mr-1"}),"Anterior"]}),(0,Br.jsx)("div",{className:"flex items-center space-x-2",children:g.map((e,t)=>(0,Br.jsx)("button",{onClick:()=>a(t),className:"w-8 h-8 rounded-full text-xs font-medium transition-colors "+(t===n?"qe-bg-primary text-white":i[g[t].id]?"bg-green-100 text-green-700 border border-green-300":"bg-gray-100 text-gray-600 border border-gray-300"),children:t+1},t))}),n===g.length-1?(0,Br.jsxs)("button",{onClick:_,className:"inline-flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[(0,Br.jsx)(ms,{className:"w-4 h-4 mr-2"}),"Finalizar"]}):(0,Br.jsxs)("button",{onClick:b,className:"qe-btn-primary inline-flex items-center px-4 py-2 rounded-lg transition-colors",children:["Siguiente",(0,Br.jsx)(_u,{className:"w-4 h-4 ml-1"})]})]})}),(0,Br.jsx)("div",{className:"mt-4 qe-card-primary rounded-lg p-4",children:(0,Br.jsxs)("p",{className:"text-sm qe-text-primary",children:["💡 ",(0,Br.jsx)("strong",{children:"Modo práctica:"})," Tómate tu tiempo. No hay límite de tiempo ni penalizaciones. Podrás ver las respuestas correctas al finalizar."]})})]})},Dd=()=>{const[e,t]=(0,o.useState)(!1),[r,s]=(0,o.useState)(null),{courses:n,loading:a}=wn({perPage:100}),{lessons:i,loading:l}=Xn({perPage:100}),{options:c,isLoading:u}=ka(["qe_category","qe_difficulty"]),{questions:d,loading:p,fetchQuestions:h}=lc({autoFetch:!1,perPage:100}),f=(0,o.useCallback)(async e=>{s(e),t(!1),await h(!0,{perPage:100,status:"publish"})},[h]),m=()=>{s(null),t(!1)};if(!r)return(0,Br.jsxs)("div",{className:"p-8",children:[(0,Br.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,Br.jsxs)("div",{className:"text-center mb-12",children:[(0,Br.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl mb-6 shadow-lg",children:(0,Br.jsx)(Ld,{className:"w-10 h-10 text-white"})}),(0,Br.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:"Modo Práctica"}),(0,Br.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Practica sin presión: sin límite de tiempo, sin puntuaciones ni penalizaciones"})]}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[(0,Br.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Br.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:(0,Br.jsx)(Hu,{className:"w-6 h-6 text-blue-600"})}),(0,Br.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Sin Presión"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"No hay límite de tiempo ni puntuaciones. Enfócate en aprender"})]}),(0,Br.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Br.jsx)("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:(0,Br.jsx)(Md,{className:"w-6 h-6 text-cyan-600"})}),(0,Br.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Retroalimentación Inmediata"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"Ve las respuestas correctas y explicaciones al finalizar"})]}),(0,Br.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,Br.jsx)("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:(0,Br.jsx)(du,{className:"w-6 h-6 text-teal-600"})}),(0,Br.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Ilimitado"}),(0,Br.jsx)("p",{className:"text-sm text-gray-600",children:"Repite cuantas veces quieras. Ideal para reforzar conocimientos"})]})]}),(0,Br.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-10",children:(0,Br.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Br.jsx)(Md,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h4",{className:"text-sm font-semibold text-yellow-900 mb-2",children:"¿En qué se diferencia del modo normal?"}),(0,Br.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,Br.jsx)("li",{children:"✅ Sin cronómetro ni límite de tiempo"}),(0,Br.jsx)("li",{children:"✅ No se registra puntuación ni se afecta tu ranking"}),(0,Br.jsx)("li",{children:"✅ No hay penalizaciones por respuestas incorrectas"}),(0,Br.jsx)("li",{children:"✅ Perfecto para aprender sin estrés"})]})]})]})}),(0,Br.jsx)("div",{className:"text-center",children:(0,Br.jsxs)("button",{onClick:()=>{t(!0)},className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,Br.jsx)(kc,{className:"w-5 h-5 mr-2"}),"Configurar Práctica"]})}),(0,Br.jsx)("div",{className:"mt-12 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-100",children:(0,Br.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Br.jsx)(Ld,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Consejo de estudio"}),(0,Br.jsx)("p",{className:"text-sm text-blue-700",children:"El modo práctica es ideal para familiarizarte con el tipo de preguntas y repasar conceptos antes de realizar un test formal. Tómate tu tiempo y asegúrate de entender cada respuesta."})]})]})})]}),e&&(0,Br.jsx)(Td,{isOpen:e,onClose:()=>t(!1),onGenerate:f,courses:n,lessons:i,categories:c.qe_category||[],difficulties:c.qe_difficulty||[],isLoading:a||l||u,isPracticeMode:!0})]});if(p)return(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,Br.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4 animate-pulse",children:(0,Br.jsx)(Ld,{className:"w-8 h-8 text-blue-600"})}),(0,Br.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Preparando tu práctica..."}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Seleccionando las preguntas ideales para ti"})]})});let g=[...d];r&&(r.lesson&&"all"!==r.lesson&&(g=g.filter(e=>(e.meta?._lesson_ids||[]).includes(parseInt(r.lesson)))),r.category&&"all"!==r.category&&(g=g.filter(e=>(e.qe_category||[]).includes(parseInt(r.category)))),r.difficulty&&"all"!==r.difficulty&&(g=g.filter(e=>(e.qe_difficulty||[]).includes(parseInt(r.difficulty)))),r.numQuestions&&g.length>r.numQuestions&&(g=g.sort(()=>Math.random()-.5).slice(0,r.numQuestions)));const y={id:"practice",title:{rendered:"Modo Práctica"},meta:{_quiz_question_ids:g.map(e=>e.id),_time_limit:0,_passing_score:0},question_count:g.length};return 0===g.length?(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,Br.jsx)(Ld,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,Br.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No hay preguntas disponibles"}),(0,Br.jsx)("p",{className:"text-gray-600 mb-6",children:"No se encontraron preguntas con los filtros seleccionados. Intenta ajustar tu configuración."}),(0,Br.jsxs)("button",{onClick:m,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg",children:[(0,Br.jsx)(du,{className:"w-5 h-5 mr-2"}),"Configurar Nueva Práctica"]})]})})}):(0,Br.jsxs)("div",{className:"p-6",children:[(0,Br.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Modo Práctica"}),(0,Br.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[g.length," preguntas • Sin límite de tiempo • Sin puntuación"]})]}),(0,Br.jsxs)("button",{onClick:m,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[(0,Br.jsx)(du,{className:"w-4 h-4 mr-2"}),"Nueva Práctica"]})]}),(0,Br.jsx)(Id,{quizId:"practice",customQuiz:y,customQuestions:g})]})},$d=()=>(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Br.jsxs)("div",{className:"mb-8",children:[(0,Br.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Material de Apoyo"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Encuentra recursos y materiales de estudio complementarios"})]}),(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Br.jsx)(mc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,Br.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Material de Apoyo"}),(0,Br.jsx)("p",{className:"text-gray-500 mb-6",children:"Esta sección estará disponible próximamente. Aquí encontrarás documentos, guías y recursos complementarios."}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto mt-8",children:[(0,Br.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Br.jsx)(gl,{className:"w-8 h-8 text-indigo-500 mx-auto mb-2"}),(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Documentos PDF"})]}),(0,Br.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Br.jsx)(mc,{className:"w-8 h-8 text-indigo-500 mx-auto mb-2"}),(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Guías de Estudio"})]}),(0,Br.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Br.jsx)(bl,{className:"w-8 h-8 text-indigo-500 mx-auto mb-2"}),(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Recursos Descargables"})]})]})]})]})}),Fd=()=>(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Br.jsxs)("div",{className:"mb-8",children:[(0,Br.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Vídeos / Clases"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Accede a tus clases grabadas y contenido multimedia"})]}),(0,Br.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[(0,Br.jsx)(yl,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,Br.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Biblioteca de Vídeos"}),(0,Br.jsx)("p",{className:"text-gray-500 mb-6",children:"Esta sección estará disponible próximamente. Aquí podrás ver clases grabadas, tutoriales y contenido multimedia."}),(0,Br.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-w-3xl mx-auto mt-8",children:[(0,Br.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Br.jsx)(qd,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Clases en Vivo"})]}),(0,Br.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Br.jsx)(Vu,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Grabaciones"})]}),(0,Br.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Br.jsx)(mc,{className:"w-8 h-8 text-red-500 mx-auto mb-2"}),(0,Br.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Tutoriales"})]})]})]})]})}),Ud=rs("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Bd=()=>{const e=dt(),t=[{id:"generator",title:"Generador de Test",description:"Crea cuestionarios personalizados seleccionando preguntas por categoría, dificultad y proveedor",icon:Ed,iconColor:"text-purple-500",bgColor:"bg-purple-50",hoverBg:"hover:bg-purple-100",borderColor:"border-purple-200",route:"/quiz-generator",available:!0},{id:"practice",title:"Modo Práctica",description:"Practica con preguntas aleatorias sin límite de tiempo ni penalizaciones",icon:Ld,iconColor:"text-blue-500",bgColor:"bg-blue-50",hoverBg:"hover:bg-blue-100",borderColor:"border-blue-200",route:"/test/practice",available:!0},{id:"exams",title:"Exámenes Oficiales",description:"Realiza exámenes completos con las condiciones y tiempos del examen real",icon:Ud,iconColor:"text-red-500",bgColor:"bg-red-50",hoverBg:"hover:bg-red-100",borderColor:"border-red-200",route:"/test/official-exams",available:!1},{id:"history",title:"Historial de Tests",description:"Consulta todos tus intentos anteriores y revisa tus respuestas",icon:gl,iconColor:"text-green-500",bgColor:"bg-green-50",hoverBg:"hover:bg-green-100",borderColor:"border-green-200",route:"/test/history",available:!1},{id:"library",title:"Biblioteca de Cuestionarios",description:"Accede a todos los cuestionarios disponibles organizados por curso y lección",icon:mc,iconColor:"text-indigo-500",bgColor:"bg-indigo-50",hoverBg:"hover:bg-indigo-100",borderColor:"border-indigo-200",route:"/test/library",available:!0}];return(0,Br.jsx)("div",{className:"p-8",children:(0,Br.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,Br.jsxs)("div",{className:"mb-8",children:[(0,Br.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Test"}),(0,Br.jsx)("p",{className:"text-gray-600",children:"Elige el tipo de práctica que mejor se adapte a tus necesidades"})]}),(0,Br.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(t=>{const r=t.icon,s=t.available;return(0,Br.jsxs)("div",{onClick:()=>(t=>{t.available&&e(t.route)})(t),className:`\n                  relative bg-white rounded-lg border-2 shadow-sm p-6 transition-all duration-200\n                  ${t.borderColor}\n                  ${s?`${t.hoverBg} cursor-pointer hover:shadow-md`:"opacity-60 cursor-not-allowed"}\n                `,children:[!s&&(0,Br.jsx)("div",{className:"absolute top-4 right-4",children:(0,Br.jsx)("span",{className:"px-3 py-1 text-xs font-semibold text-gray-600 bg-gray-200 rounded-full",children:"Próximamente"})}),(0,Br.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,Br.jsx)("div",{className:`p-3 rounded-lg ${t.bgColor}`,children:(0,Br.jsx)(r,{className:`w-8 h-8 ${t.iconColor}`})}),(0,Br.jsxs)("div",{className:"flex-1",children:[(0,Br.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),(0,Br.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed",children:t.description})]})]}),s&&(0,Br.jsxs)("div",{className:"mt-4 flex items-center text-sm font-medium text-indigo-600",children:[(0,Br.jsx)("span",{children:"Acceder"}),(0,Br.jsx)("svg",{className:"w-4 h-4 ml-1 transition-transform group-hover:translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Br.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},t.id)})}),(0,Br.jsx)("div",{className:"mt-8 bg-indigo-50 border border-indigo-200 rounded-lg p-6",children:(0,Br.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Br.jsx)(gl,{className:"w-5 h-5 text-indigo-600 mt-0.5 flex-shrink-0"}),(0,Br.jsxs)("div",{children:[(0,Br.jsx)("h4",{className:"text-sm font-semibold text-indigo-900 mb-1",children:"Sobre los Tests"}),(0,Br.jsxs)("p",{className:"text-sm text-indigo-700",children:["El ",(0,Br.jsx)("strong",{children:"Generador de Test"}),", el ",(0,Br.jsx)("strong",{children:"Modo Práctica"})," y la ",(0,Br.jsx)("strong",{children:"Biblioteca de Cuestionarios"})," ya están disponibles. Próximamente añadiremos más modalidades de práctica para mejorar tu preparación."]})]})]})})]})})},Qd=function(){return(0,Br.jsx)(Vr,{children:(0,Br.jsx)(bu,{children:(0,Br.jsxs)(Gt,{children:[(0,Br.jsx)(Et,{children:(0,Br.jsxs)(kt,{path:"/",element:(0,Br.jsx)(Cu,{}),children:[(0,Br.jsx)(kt,{index:!0,element:(0,Br.jsx)(Iu,{})}),(0,Br.jsx)(kt,{path:"/dashboard/attempts/:attemptId",element:(0,Br.jsx)(Yu,{})}),(0,Br.jsx)(kt,{path:"courses",element:(0,Br.jsx)(Zu,{})}),(0,Br.jsx)(kt,{path:"courses/:courseId",element:(0,Br.jsx)(Cd,{})}),(0,Br.jsx)(kt,{path:"test",element:(0,Br.jsx)(Bd,{})}),(0,Br.jsx)(kt,{path:"test/practice",element:(0,Br.jsx)(Dd,{})}),(0,Br.jsx)(kt,{path:"test/library",element:(0,Br.jsx)(zd,{})}),(0,Br.jsx)(kt,{path:"quiz/:quizId",element:(0,Br.jsx)(Ad,{})}),(0,Br.jsx)(kt,{path:"quiz-generator",element:(0,Br.jsx)(Pd,{})}),(0,Br.jsx)(kt,{path:"materials",element:(0,Br.jsx)($d,{})}),(0,Br.jsx)(kt,{path:"videos",element:(0,Br.jsx)(Fd,{})}),(0,Br.jsx)(kt,{path:"books",element:(0,Br.jsx)(ed,{})}),(0,Br.jsx)(kt,{path:"profile",element:(0,Br.jsx)(td,{})})]})}),(0,Br.jsx)(Rr,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0})]})})})},Hd=document.getElementById("root"),Vd=document.getElementById("qe-frontend-root");Hd&&l.createRoot(Hd).render((0,Br.jsx)(i().StrictMode,{children:(0,Br.jsx)(k,{i18n:ve,children:(0,Br.jsx)(gu,{})})})),Vd&&l.createRoot(Vd).render((0,Br.jsx)(i().StrictMode,{children:(0,Br.jsx)(k,{i18n:ve,children:(0,Br.jsx)(Qd,{})})}))})()})();