(()=>{var e,t,r,n,s={2:(e,t,r)=>{var n=r(2199),s=r(4664),o=r(5950);e.exports=function(e){return n(e,o,s)}},8:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6773);t.debounce=function(e,t=0,r={}){"object"!=typeof r&&(r={});const{leading:s=!1,trailing:o=!0,maxWait:a}=r,i=Array(2);let l;s&&(i[0]="leading"),o&&(i[1]="trailing");let c=null;const d=n.debounce(function(...t){l=e.apply(this,t),c=null},t,{edges:i}),u=function(...t){return null!=a&&(null===c&&(c=Date.now()),Date.now()-c>=a)?(l=e.apply(this,t),c=Date.now(),d.cancel(),d.schedule(),l):(d.apply(this,t),l)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),l),u}},10:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("chart-no-axes-column",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]])},25:(e,t,r)=>{e.exports=r(1334).last},48:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(1609),s=r(2389),o=r(6359),a=r(8919),i=r(790);const l=({title:e,itemCount:t,createButtonText:r,onCreate:l,isCreating:c,children:d,filters:u,onLoadMore:p,hasMore:f=!1,isLoadingMore:m=!1})=>{const{t:h}=(0,s.Bd)(),{getColor:g,isDarkMode:x}=(0,o.DP)(),y=(0,n.useRef)(null),b=(0,n.useRef)(null),v=(0,n.useRef)(null),j={text:x?g("textPrimary","#f9fafb"):g("primary","#1a202c"),textMuted:x?g("textSecondary","#9ca3af"):"#6b7280",accent:g("accent","#f59e0b"),bgCard:x?g("secondaryBackground","#1f2937"):"#ffffff",border:x?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",shadow:x?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",shadowSm:x?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.05)",cardBorder:x?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.04)",accentGlow:x?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)"},w=(0,n.useCallback)(e=>{const[t]=e;t.isIntersecting&&f&&!m&&p&&p()},[f,m,p]);return(0,n.useEffect)(()=>{if(!p||!v.current)return;const e={root:y.current,rootMargin:"100px",threshold:.1};return b.current=new IntersectionObserver(w,e),b.current.observe(v.current),()=>{b.current&&b.current.disconnect()}},[w,p]),(0,i.jsxs)("div",{className:"rounded-2xl flex flex-col h-full overflow-hidden",style:{backgroundColor:j.bgCard,border:`1px solid ${j.cardBorder}`,boxShadow:j.shadow},children:[(0,i.jsxs)("div",{className:"p-5",style:{borderBottom:`1px solid ${j.cardBorder}`},children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-xl font-bold tracking-tight",style:{color:j.text},children:e}),(0,i.jsxs)("p",{className:"text-sm mt-0.5",style:{color:j.textMuted},children:[t," elementos"]})]}),(0,i.jsx)(a.A,{variant:"primary",size:"md",onClick:l,disabled:c,children:c?h("common.creating"):r})]}),u]}),(0,i.jsxs)("div",{ref:y,className:"flex-1 overflow-y-auto p-2",children:[d,p&&(0,i.jsxs)("div",{ref:v,className:"py-4 text-center",children:[m&&(0,i.jsx)("p",{className:"text-sm",style:{color:j.textMuted},children:h("common.loadingMore")}),!f&&!m&&t>0&&(0,i.jsx)("p",{className:"text-sm",style:{color:j.textMuted},children:h("common.endOfList")})]})]})]})}},58:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9181);t.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&n.isLength(e.length)}},79:(e,t,r)=>{var n=r(3702),s=r(80),o=r(4739),a=r(8655),i=r(1175);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=i,e.exports=l},80:(e,t,r)=>{var n=r(6025),s=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0||(r==t.length-1?t.pop():s.call(t,r,1),--this.size,0))}},104:(e,t,r)=>{var n=r(3661);function s(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],o=r.cache;if(o.has(s))return o.get(s);var a=e.apply(this,n);return r.cache=o.set(s,a)||o,a};return r.cache=new(s.Cache||n),r}s.Cache=n,e.exports=s},153:(e,t,r)=>{"use strict";r.d(t,{BC:()=>i,d7:()=>s,ui:()=>a});var n=r(1609);const s=(e,t)=>{const[r,s]=(0,n.useState)(e);return(0,n.useEffect)(()=>{const r=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),r},o=(e,t,r=[])=>{const s=(0,n.useRef)(null),o=(0,n.useRef)(e);return(0,n.useEffect)(()=>{o.current=e},[e]),(0,n.useEffect)(()=>()=>{s.current&&clearTimeout(s.current)},[]),(0,n.useCallback)((...e)=>{s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{o.current(...e)},t)},[t,...r])},a=(e="",t,r=500)=>{const[s,a]=(0,n.useState)(e),[i,l]=(0,n.useState)(!1),c=o(async e=>{l(!0);try{await t(e)}finally{l(!1)}},r,[t]);return{searchValue:s,isSearching:i,handleSearchChange:(0,n.useCallback)(e=>{a(e),c(e)},[c]),clearSearch:(0,n.useCallback)(()=>{a(""),c("")},[c]),setSearchValue:a}},i=(e={},t,r=300)=>{const[s,a]=(0,n.useState)(e),[i,l]=(0,n.useState)(!1),c=o(async e=>{l(!0);try{await t(e)}finally{l(!1)}},r,[t]);return{filters:s,isFiltering:i,updateFilter:(0,n.useCallback)((e,t)=>{a(r=>{const n={...r,[e]:t};return c(n),n})},[c]),updateFilters:(0,n.useCallback)(e=>{a(t=>{const r={...t,...e};return c(r),r})},[c]),resetFilters:(0,n.useCallback)(()=>{a(e),c(e)},[e,c])}}},179:(e,t,r)=>{var n=r(4932),s=r(9999),o=r(9931),a=r(1769),i=r(1791),l=r(3138),c=r(8816),d=r(3349),u=c(function(e,t){var r={};if(null==e)return r;var c=!1;t=n(t,function(t){return t=a(t,e),c||(c=t.length>1),t}),i(e,d(e),r),c&&(r=s(r,7,l));for(var u=t.length;u--;)o(r,t[u]);return r});e.exports=u},180:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},181:e=>{e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},184:(e,t,r)=>{e.exports=r(4259).sortBy},232:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},250:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},270:(e,t,r)=>{var n=r(7068),s=r(346);e.exports=function e(t,r,o,a,i){return t===r||(null==t||null==r||!s(t)&&!s(r)?t!=t&&r!=r:n(t,r,o,a,e,i))}},289:(e,t,r)=>{var n=r(2651);e.exports=function(e){return n(this,e).get(e)}},294:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},305:(e,t,r)=>{e.exports=r(4200).get},311:e=>{"use strict";e.exports=function(e,t,r,n,s,o,a,i){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,s,o,a,i],d=0;(l=new Error(t.replace(/%s/g,function(){return c[d++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},316:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8509),s=r(58),o=r(4905),a=r(6761);t.isIterateeCall=function(e,t,r){return!!o.isObject(r)&&!!("number"==typeof t&&s.isArrayLike(r)&&n.isIndex(t)&&t<r.length||"string"==typeof t&&t in r)&&a.eq(r[t],e)}},317:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},346:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},361:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},392:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},418:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},583:(e,t,r)=>{var n=r(7237),s=r(7255),o=r(8586),a=r(7797);e.exports=function(e){return o(e)?n(a(e)):s(e)}},631:(e,t,r)=>{var n=r(8077),s=r(9326);e.exports=function(e,t){return null!=e&&s(e,t,n)}},641:(e,t,r)=>{var n=r(6649),s=r(5950);e.exports=function(e,t){return e&&n(e,t,s)}},645:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},659:(e,t,r)=>{var n=r(1873),s=Object.prototype,o=s.hasOwnProperty,a=s.toString,i=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,i),r=e[i];try{e[i]=void 0;var n=!0}catch(e){}var s=a.call(e);return n&&(t?e[i]=r:delete e[i]),s}},665:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},689:(e,t,r)=>{var n=r(2),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,o,a,i){var l=1&r,c=n(e),d=c.length;if(d!=n(t).length&&!l)return!1;for(var u=d;u--;){var p=c[u];if(!(l?p in t:s.call(t,p)))return!1}var f=i.get(e),m=i.get(t);if(f&&m)return f==t&&m==e;var h=!0;i.set(e,t),i.set(t,e);for(var g=l;++u<d;){var x=e[p=c[u]],y=t[p];if(o)var b=l?o(y,x,p,t,e,i):o(x,y,p,e,t,i);if(!(void 0===b?x===y||a(x,y,r,o,i):b)){h=!1;break}g||(g="constructor"==p)}if(h&&!g){var v=e.constructor,j=t.constructor;v==j||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof j&&j instanceof j||(h=!1)}return i.delete(e),i.delete(t),h}},695:(e,t,r)=>{var n=r(8096),s=r(2428),o=r(6449),a=r(3656),i=r(361),l=r(7167),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),d=!r&&s(e),u=!r&&!d&&a(e),p=!r&&!d&&!u&&l(e),f=r||d||u||p,m=f?n(e.length,String):[],h=m.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||u&&("offset"==g||"parent"==g)||p&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,h))||m.push(g);return m}},697:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},717:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8273);t.isMatch=function(e,t){return n.isMatchWith(e,t,()=>{})}},756:(e,t,r)=>{var n=r(3805);e.exports=function(e){return e==e&&!n(e)}},776:(e,t,r)=>{var n=r(756),s=r(5950);e.exports=function(e){for(var t=s(e),r=t.length;r--;){var o=t[r],a=e[o];t[r]=[o,a,n(a)]}return t}},790:e=>{"use strict";e.exports=window.ReactJSXRuntime},802:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]])},827:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},884:(e,t,r)=>{"use strict";r.d(t,{HB:()=>d,KL:()=>i,XE:()=>c,c6:()=>l});var n=r(8243);const s={_course_id:0,_question_lesson:0,_question_type:"multiple_choice",_difficulty_level:"medium",_points:1,_points_incorrect:0,_question_order:0,_is_required:!1,_quiz_ids:[],_question_options:[],_explanation:"",_question_provider:"human"},o=["multiple_choice","true_false","essay","short_answer","fill_blank"],a=["easy","medium","hard"],i=e=>{console.log("ðŸ”„ transformQuestionDataForApi - Input:",e);const t={title:(0,n.xV)(e.title),content:(0,n.xV)(e.explanation||e.content||""),status:(0,n.se)(e.status,"publish"),qe_category:(0,n.E5)(e.qe_category),qe_provider:e.provider?[(0,n.o5)(e.provider)]:[],meta:{}};if(void 0!==e.courseId&&null!==e.courseId&&""!==e.courseId&&"0"!==e.courseId&&0!==e.courseId){const r=(0,n.o5)(e.courseId,0);r>0&&(t.meta._course_id=r)}if(void 0!==e.lessonId&&null!==e.lessonId&&""!==e.lessonId&&"0"!==e.lessonId&&0!==e.lessonId){const r=(0,n.o5)(e.lessonId,0);r>0&&(t.meta._question_lesson=r)}return t.meta._quiz_ids=(0,n.E5)(e.quizIds),t.meta._explanation=(0,n.xV)(e.explanation||e.content||""),t.meta._question_type=(0,n.zi)(e.type,o,"multiple_choice"),t.meta._difficulty_level=(0,n.zi)(e.difficulty,a,"medium"),t.meta._points=(0,n.o5)(e.points,1,0),t.meta._points_incorrect=(0,n.o5)(e.pointsIncorrect,0,0),Array.isArray(e.options)&&(t.meta._question_options=e.options.map((e,t)=>({id:t,text:(0,n.xV)(e.text),isCorrect:(0,n.kM)(e.isCorrect)}))),console.log("ðŸ”„ transformQuestionDataForApi - Output:",t),console.log("ðŸ“ Content length:",t.content?.length||0),console.log("ðŸ“ Explanation length:",t.meta._explanation?.length||0),t},l=e=>e?(console.log("ðŸ” sanitizeQuestionData - Raw data:",{id:e.id,hasContent:!!e.content,contentType:typeof e.content,contentRendered:e.content?.rendered,contentValue:e.content}),{id:e.id||0,title:(0,n.w3)(e.title),content:(0,n.w3)(e.content),status:(0,n.se)(e.status,"draft"),date:e.date||"",modified:e.modified||"",is_favorite:(0,n.kM)(e.is_favorite),qe_category:(0,n.E5)(e.qe_category),qe_provider:(0,n.E5)(e.qe_provider),meta:{...s,...e.meta||{},_quiz_ids:(0,n.E5)(e.meta?._quiz_ids),_question_options:Array.isArray(e.meta?._question_options)?e.meta._question_options.map(e=>({...e,isCorrect:(0,n.kM)(e.isCorrect)})):[]},_embedded:e._embedded||{}}):null,c=e=>{const t=[],r=(0,n.Kf)(e.title,"Question title");r&&t.push(r);const s=e.type||e.meta?._question_type;return"multiple_choice"!==s&&"true_false"!==s||(!e.options||e.options.length<1?t.push("At least one option is required."):e.options.some(e=>e.isCorrect)||t.push("At least one option must be marked as correct.")),(0,n.vQ)(t)},d=e=>{const t=l(e);if(!t)return null;const r=t.content||t.meta?._explanation||"",s=r.replace(/<[^>]*>/g,"").trim();return{...t,formattedType:(0,n.ZH)(t.meta._question_type.replace("_"," ")),formattedDifficulty:(0,n.ZH)(t.meta._difficulty_level),formattedDate:(0,n.Yq)(t.date),shortExplanation:(0,n.EJ)(s,100),fullExplanation:r,isPublished:"publish"===t.status,isFavorite:t.is_favorite||!1}}},909:(e,t,r)=>{var n=r(641),s=r(8329)(n);e.exports=s},938:e=>{e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},945:(e,t,r)=>{var n=r(79),s=r(8223),o=r(3661);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!s||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(e,t),this.size=r.size,this}},964:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1004:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},1013:(e,t,r)=>{var n=r(5160),s=r(6800),o=r(1489),a=Math.ceil,i=Math.max;e.exports=function(e,t,r){t=(r?s(e,t,r):void 0===t)?1:i(o(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var c=0,d=0,u=Array(a(l/t));c<l;)u[d++]=n(e,c,c+=t);return u}},1033:e=>{e.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},1042:(e,t,r)=>{var n=r(3729)(Object,"create");e.exports=n},1081:(e,t,r)=>{e.exports=r(2810).uniqBy},1175:(e,t,r)=>{var n=r(6025);e.exports=function(e,t){var r=this.__data__,s=n(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}},1300:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1366);t.toNumber=function(e){return n.isSymbol(e)?NaN:Number(e)}},1331:(e,t,r)=>{var n=r(2552),s=r(8879),o=r(346),a=Function.prototype,i=Object.prototype,l=a.toString,c=i.hasOwnProperty,d=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=n(e))return!1;var t=s(e);if(null===t)return!0;var r=c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==d}},1334:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(645),s=r(4483),o=r(58);t.last=function(e){if(o.isArrayLike(e))return n.last(s.toArray(e))}},1366:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}},1380:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1409:(e,t,r)=>{"use strict";r.d(t,{N9:()=>L,oR:()=>M});var n=r(1609),s=r(4164);!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.firstChild?t.insertBefore(r,t.firstChild):t.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var o=e=>"number"==typeof e&&!isNaN(e),a=e=>"string"==typeof e,i=e=>"function"==typeof e,l=e=>a(e)||i(e)?e:null,c=(e,t)=>!1===e||o(e)&&e>0?e:t,d=e=>(0,n.isValidElement)(e)||a(e)||i(e)||o(e);function u({enter:e,exit:t,appendPosition:r=!1,collapse:s=!0,collapseDuration:o=300}){return function({children:a,position:i,preventExitTransition:l,done:c,nodeRef:d,isIn:u,playToast:p}){let f=r?`${e}--${i}`:e,m=r?`${t}--${i}`:t,h=(0,n.useRef)(0);return(0,n.useLayoutEffect)(()=>{let e=d.current,t=f.split(" "),r=n=>{n.target===d.current&&(p(),e.removeEventListener("animationend",r),e.removeEventListener("animationcancel",r),0===h.current&&"animationcancel"!==n.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",r),e.addEventListener("animationcancel",r)},[]),(0,n.useEffect)(()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t,r=300){let{scrollHeight:n,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=n+"px",s.transition=`all ${r}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,r)})})}(e,c,o):c()};u||(l?t():(h.current=1,e.className+=` ${m}`,e.addEventListener("animationend",t)))},[u]),n.createElement(n.Fragment,null,a)}}function p(e,t){return{content:f(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function f(e,t,r=!1){return(0,n.isValidElement)(e)&&!a(e.type)?(0,n.cloneElement)(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):i(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:r}):e}function m({delay:e,isRunning:t,closeToast:r,type:o="default",hide:a,className:l,controlledProgress:c,progress:d,rtl:u,isIn:p,theme:f}){let m=a||c&&0===d,h={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};c&&(h.transform=`scaleX(${d})`);let g=(0,s.A)("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${o}`,{"Toastify__progress-bar--rtl":u}),x=i(l)?l({rtl:u,type:o,defaultClassName:g}):(0,s.A)(g,l),y={[c&&d>=1?"onTransitionEnd":"onAnimationEnd"]:c&&d<1?null:()=>{p&&r()}};return n.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":m},n.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${f} Toastify__progress-bar--${o}`}),n.createElement("div",{role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:x,style:h,...y}))}var h=1,g=()=>""+h++;var x=new Map,y=[],b=new Set,v=e=>b.forEach(t=>t(e)),j=()=>x.size>0;function w(e,t){var r;if(t)return!(null==(r=x.get(t))||!r.isToastActive(e));let n=!1;return x.forEach(t=>{t.isToastActive(e)&&(n=!0)}),n}function N(e,t){d(e)&&(j()||y.push({content:e,options:t}),x.forEach(r=>{r.buildToast(e,t)}))}function k(e,t){x.forEach(r=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===r.id)&&r.toggle(e,null==t?void 0:t.id)})}function C(e){let t=e.containerId||1;return{subscribe(r){let n=function(e,t,r){let n=1,s=0,a=[],i=[],u=t,f=new Map,m=new Set,h=()=>{i=Array.from(f.values()),m.forEach(e=>e())},g=e=>{var t,r;null==(r=null==(t=e.props)?void 0:t.onClose)||r.call(t,e.removalReason),e.isActive=!1},x=e=>{if(null==e)f.forEach(g);else{let t=f.get(e);t&&g(t)}h()},y=e=>{var t,n;let{toastId:s,updateId:o}=e.props,a=null==o;e.staleId&&f.delete(e.staleId),e.isActive=!0,f.set(s,e),h(),r(p(e,a?"added":"updated")),a&&(null==(n=(t=e.props).onOpen)||n.call(t))};return{id:e,props:u,observe:e=>(m.add(e),()=>m.delete(e)),toggle:(e,t)=>{f.forEach(r=>{var n;(null==t||t===r.props.toastId)&&(null==(n=r.toggle)||n.call(r,e))})},removeToast:x,toasts:f,clearQueue:()=>{s-=a.length,a=[]},buildToast:(t,i)=>{if((({containerId:t,toastId:r,updateId:n})=>{let s=t?t!==e:1!==e,o=f.has(r)&&null==n;return s||o})(i))return;let{toastId:m,updateId:g,data:b,staleId:v,delay:j}=i,w=null==g;w&&s++;let N={...u,style:u.toastStyle,key:n++,...Object.fromEntries(Object.entries(i).filter(([e,t])=>null!=t)),toastId:m,updateId:g,data:b,isIn:!1,className:l(i.className||u.toastClassName),progressClassName:l(i.progressClassName||u.progressClassName),autoClose:!i.isLoading&&c(i.autoClose,u.autoClose),closeToast(e){f.get(m).removalReason=e,x(m)},deleteToast(){let e=f.get(m);if(null!=e){if(r(p(e,"removed")),f.delete(m),s--,s<0&&(s=0),a.length>0)return void y(a.shift());h()}}};N.closeButton=u.closeButton,!1===i.closeButton||d(i.closeButton)?N.closeButton=i.closeButton:!0===i.closeButton&&(N.closeButton=!d(u.closeButton)||u.closeButton);let k={content:t,props:N,staleId:v};u.limit&&u.limit>0&&s>u.limit&&w?a.push(k):o(j)?setTimeout(()=>{y(k)},j):y(k)},setProps(e){u=e},setToggle:(e,t)=>{let r=f.get(e);r&&(r.toggle=t)},isToastActive:e=>{var t;return null==(t=f.get(e))?void 0:t.isActive},getSnapshot:()=>i}}(t,e,v);x.set(t,n);let s=n.observe(r);return y.forEach(e=>N(e.content,e.options)),y=[],()=>{s(),x.delete(t)}},setProps(e){var r;null==(r=x.get(t))||r.setProps(e)},getSnapshot(){var e;return null==(e=x.get(t))?void 0:e.getSnapshot()}}}function _(e){return e&&(a(e.toastId)||o(e.toastId))?e.toastId:g()}function S(e,t){return N(e,t),t.toastId}function E(e,t){return{...t,type:t&&t.type||e,toastId:_(t)}}function A(e){return(t,r)=>S(t,E(e,r))}function M(e,t){return S(e,E("default",t))}M.loading=(e,t)=>S(e,E("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),M.promise=function(e,{pending:t,error:r,success:n},s){let o;t&&(o=a(t)?M.loading(t,s):M.loading(t.render,{...s,...t}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(e,t,r)=>{if(null==t)return void M.dismiss(o);let n={type:e,...l,...s,data:r},i=a(t)?{render:t}:t;return o?M.update(o,{...n,...i}):M(i.render,{...n,...i}),r},d=i(e)?e():e;return d.then(e=>c("success",n,e)).catch(e=>c("error",r,e)),d},M.success=A("success"),M.info=A("info"),M.error=A("error"),M.warning=A("warning"),M.warn=M.warning,M.dark=(e,t)=>S(e,E("default",{theme:"dark",...t})),M.dismiss=function(e){!function(e){if(j()){if(null==e||(e=>a(e)||o(e))(e))x.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=x.get(e.containerId);t?t.removeToast(e.id):x.forEach(t=>{t.removeToast(e.id)})}}else y=y.filter(t=>null!=e&&t.options.toastId!==e)}(e)},M.clearWaitingQueue=(e={})=>{x.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},M.isActive=w,M.update=(e,t={})=>{let r=((e,{containerId:t})=>{var r;return null==(r=x.get(t||1))?void 0:r.toasts.get(e)})(e,t);if(r){let{props:n,content:s}=r,o={delay:100,...n,...t,toastId:t.toastId||e,updateId:g()};o.toastId!==e&&(o.staleId=e);let a=o.render||s;delete o.render,S(a,o)}},M.done=e=>{M.update(e,{progress:1})},M.onChange=function(e){return b.add(e),()=>{b.delete(e)}},M.play=e=>k(!0,e),M.pause=e=>k(!1,e);var T="undefined"!=typeof window?n.useLayoutEffect:n.useEffect,P=({theme:e,type:t,isLoading:r,...s})=>n.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===e?"currentColor":`var(--toastify-icon-color-${t})`,...s}),O={info:function(e){return n.createElement(P,{...e},n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return n.createElement(P,{...e},n.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return n.createElement(P,{...e},n.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return n.createElement(P,{...e},n.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return n.createElement("div",{className:"Toastify__spinner"})}};var z=e=>{let{isRunning:t,preventExitTransition:r,toastRef:o,eventHandlers:a,playToast:l}=function(e){let[t,r]=(0,n.useState)(!1),[s,o]=(0,n.useState)(!1),a=(0,n.useRef)(null),i=(0,n.useRef)({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:l,pauseOnHover:c,closeToast:d,onClick:u,closeOnClick:p}=e;function f(){r(!0)}function m(){r(!1)}function h(r){let n=a.current;if(i.canDrag&&n){i.didMove=!0,t&&m(),"x"===e.draggableDirection?i.delta=r.clientX-i.start:i.delta=r.clientY-i.start,i.start!==r.clientX&&(i.canCloseOnClick=!1);let s="x"===e.draggableDirection?`${i.delta}px, var(--y)`:`0, calc(${i.delta}px + var(--y))`;n.style.transform=`translate3d(${s},0)`,n.style.opacity=""+(1-Math.abs(i.delta/i.removalDistance))}}function g(){document.removeEventListener("pointermove",h),document.removeEventListener("pointerup",g);let t=a.current;if(i.canDrag&&i.didMove&&t){if(i.canDrag=!1,Math.abs(i.delta)>i.removalDistance)return o(!0),e.closeToast(!0),void e.collapseAll();t.style.transition="transform 0.2s, opacity 0.2s",t.style.removeProperty("transform"),t.style.removeProperty("opacity")}}(function(e){var t;null==(t=x.get(e.containerId||1))||t.setToggle(e.id,e.fn)})({id:e.toastId,containerId:e.containerId,fn:r}),(0,n.useEffect)(()=>{if(e.pauseOnFocusLoss)return document.hasFocus()||m(),window.addEventListener("focus",f),window.addEventListener("blur",m),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",m)}},[e.pauseOnFocusLoss]);let y={onPointerDown:function(t){if(!0===e.draggable||e.draggable===t.pointerType){i.didMove=!1,document.addEventListener("pointermove",h),document.addEventListener("pointerup",g);let r=a.current;i.canCloseOnClick=!0,i.canDrag=!0,r.style.transition="none","x"===e.draggableDirection?(i.start=t.clientX,i.removalDistance=r.offsetWidth*(e.draggablePercent/100)):(i.start=t.clientY,i.removalDistance=r.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent)/100)}},onPointerUp:function(t){let{top:r,bottom:n,left:s,right:o}=a.current.getBoundingClientRect();"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&t.clientX>=s&&t.clientX<=o&&t.clientY>=r&&t.clientY<=n?m():f()}};return l&&c&&(y.onMouseEnter=m,e.stacked||(y.onMouseLeave=f)),p&&(y.onClick=e=>{u&&u(e),i.canCloseOnClick&&d(!0)}),{playToast:f,pauseToast:m,isRunning:t,preventExitTransition:s,toastRef:a,eventHandlers:y}}(e),{closeButton:c,children:d,autoClose:u,onClick:p,type:h,hideProgressBar:g,closeToast:y,transition:b,position:v,className:j,style:w,progressClassName:N,updateId:k,role:C,progress:_,rtl:S,toastId:E,deleteToast:A,isIn:M,isLoading:T,closeOnClick:P,theme:z,ariaLabel:q}=e,D=(0,s.A)("Toastify__toast",`Toastify__toast-theme--${z}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":P}),I=i(j)?j({rtl:S,position:v,type:h,defaultClassName:D}):(0,s.A)(D,j),L=function({theme:e,type:t,isLoading:r,icon:s}){let o=null,a={theme:e,type:t};return!1===s||(i(s)?o=s({...a,isLoading:r}):(0,n.isValidElement)(s)?o=(0,n.cloneElement)(s,a):r?o=O.spinner():(e=>e in O)(t)&&(o=O[t](a))),o}(e),R=!!_||!u,$={closeToast:y,type:h,theme:z},B=null;return!1===c||(B=i(c)?c($):(0,n.isValidElement)(c)?(0,n.cloneElement)(c,$):function({closeToast:e,theme:t,ariaLabel:r="close"}){return n.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:t=>{t.stopPropagation(),e(!0)},"aria-label":r},n.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}($)),n.createElement(b,{isIn:M,done:A,position:v,preventExitTransition:r,nodeRef:o,playToast:l},n.createElement("div",{id:E,tabIndex:0,onClick:p,"data-in":M,className:I,...a,style:w,ref:o,...M&&{role:C,"aria-label":q}},null!=L&&n.createElement("div",{className:(0,s.A)("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},L),f(d,e,!t),B,!e.customProgressBar&&n.createElement(m,{...k&&!R?{key:`p-${k}`}:{},rtl:S,theme:z,delay:u,isRunning:t,isIn:M,closeToast:y,hide:g,type:h,className:N,controlledProgress:R,progress:_||0})))},q=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),D=u(q("bounce",!0)),I=(u(q("slide",!0)),u(q("zoom")),u(q("flip")),{position:"top-right",transition:D,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&"KeyT"===e.code});function L(e){let t={...I,...e},r=e.stacked,[o,a]=(0,n.useState)(!0),c=(0,n.useRef)(null),{getToastToRender:d,isToastActive:u,count:p}=function(e){var t;let{subscribe:r,getSnapshot:s,setProps:o}=(0,n.useRef)(C(e)).current;o(e);let a=null==(t=(0,n.useSyncExternalStore)(r,s,s))?void 0:t.slice();return{getToastToRender:function(t){if(!a)return[];let r=new Map;return e.newestOnTop&&a.reverse(),a.forEach(e=>{let{position:t}=e.props;r.has(t)||r.set(t,[]),r.get(t).push(e)}),Array.from(r,e=>t(e[0],e[1]))},isToastActive:w,count:null==a?void 0:a.length}}(t),{className:f,style:m,rtl:h,containerId:g,hotKeys:x}=t;function y(e){let t=(0,s.A)("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":h});return i(f)?f({position:e,rtl:h,defaultClassName:t}):(0,s.A)(t,l(f))}function b(){r&&(a(!0),M.play())}return T(()=>{var e;if(r){let r=c.current.querySelectorAll('[data-in="true"]'),n=12,s=null==(e=t.position)?void 0:e.includes("top"),a=0,i=0;Array.from(r).reverse().forEach((e,t)=>{let r=e;r.classList.add("Toastify__toast--stacked"),t>0&&(r.dataset.collapsed=`${o}`),r.dataset.pos||(r.dataset.pos=s?"top":"bot");let l=a*(o?.2:1)+(o?0:n*t);r.style.setProperty("--y",`${s?l:-1*l}px`),r.style.setProperty("--g",`${n}`),r.style.setProperty("--s",""+(1-(o?i:0))),a+=r.offsetHeight,i+=.025})}},[o,p,r]),(0,n.useEffect)(()=>{function e(e){var t;let r=c.current;x(e)&&(null==(t=r.querySelector('[tabIndex="0"]'))||t.focus(),a(!1),M.pause()),"Escape"===e.key&&(document.activeElement===r||null!=r&&r.contains(document.activeElement))&&(a(!0),M.play())}return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[x]),n.createElement("section",{ref:c,className:"Toastify",id:g,onMouseEnter:()=>{r&&(a(!1),M.pause())},onMouseLeave:b,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},d((e,t)=>{let s=t.length?{...m}:{...m,pointerEvents:"none"};return n.createElement("div",{tabIndex:-1,className:y(e),"data-stacked":r,style:s,key:`c-${e}`},t.map(({content:e,props:t})=>n.createElement(z,{...t,stacked:r,collapseAll:b,isIn:u(t.toastId,t.containerId),key:`t-${t.key}`},e)))}))}},1420:(e,t,r)=>{var n=r(79);e.exports=function(){this.__data__=new n,this.size=0}},1436:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]])},1455:e=>{"use strict";e.exports=window.wp.apiFetch},1459:e=>{e.exports=function(e){return this.__data__.has(e)}},1464:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]])},1465:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}},1489:(e,t,r)=>{var n=r(7400);e.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},1523:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,T:()=>i});var n=r(1609),s=r(7804),o=r(2719),a=r(884);const i=(e={})=>{const t=(0,n.useMemo)(()=>e=>(0,a.HB)(e),[]),r=(0,n.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,totalPoints:0,trueFalseQuestions:0,essayQuestions:0,byDifficulty:{}};let r=0,n=0,s=0;const o={easy:0,medium:0,hard:0};return e.forEach(e=>{r+=e.meta?._points||0;const t=e.meta?._question_type,a=e.meta?._difficulty_level||"medium";"true_false"===t&&n++,"essay"===t&&s++,o.hasOwnProperty(a)&&o[a]++}),{total:t,totalPoints:r,trueFalseQuestions:n,essayQuestions:s,byDifficulty:o}},[]),i=(()=>{const e=window.qe_data?.user;return!(!e||!e.roles?.includes("administrator")&&!0!==e.capabilities?.manage_options)})()?"publish,draft,private":"publish",l=(0,s.q)({service:o,resourceName:"question",initialFilters:{search:e.search||"",quizId:e.quizId||null,type:e.type||null,difficulty:e.difficulty||null,category:e.category||null,course_id:e.course_id||null,lessons:e.lessons||null,status_filters:e.status_filters||null,status:void 0!==e.status?e.status:i},dataProcessor:t,computedValuesCalculator:r,...e}),{items:c,fetchItems:d,loadMore:u,createItem:p,updateItem:f,deleteItem:m,duplicateItem:h,refresh:g}=l;return{...l,questions:c,fetchQuestions:d,loadMoreQuestions:u,createQuestion:p,updateQuestion:f,deleteQuestion:m,duplicateQuestion:h,refreshQuestions:g}},l=i},1549:(e,t,r)=>{var n=r(2032),s=r(3862),o=r(6721),a=r(2749),i=r(5749);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=i,e.exports=l},1574:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=109)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),s=r(18),o=r(19),a=r(45),i=r(46),l=r(47),c=r(48),d=r(49),u=r(12),p=r(32),f=r(33),m=r(31),h=r(1),g={Scope:h.Scope,create:h.create,find:h.find,query:h.query,register:h.register,Container:n.default,Format:s.default,Leaf:o.default,Embed:c.default,Scroll:a.default,Block:l.default,Inline:i.default,Text:d.default,Attributor:{Attribute:u.default,Class:p.default,Style:f.default,Store:m.default}};t.default=g},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=this;return t="[Parchment] "+t,(r=e.call(this,t)||this).message=t,r.name=r.constructor.name,r}return s(t,e),t}(Error);t.ParchmentError=o;var a,i={},l={},c={},d={};function u(e,t){var r;if(void 0===t&&(t=a.ANY),"string"==typeof e)r=d[e]||i[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)r=d.text;else if("number"==typeof e)e&a.LEVEL&a.BLOCK?r=d.block:e&a.LEVEL&a.INLINE&&(r=d.inline);else if(e instanceof HTMLElement){var n=(e.getAttribute("class")||"").split(/\s+/);for(var s in n)if(r=l[n[s]])break;r=r||c[e.tagName]}return null==r?null:t&a.LEVEL&r.scope&&t&a.TYPE&r.scope?r:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(a=t.Scope||(t.Scope={})),t.create=function(e,t){var r=u(e);if(null==r)throw new o("Unable to create "+e+" blot");var n=r,s=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(t);return new n(s,t)},t.find=function e(r,n){return void 0===n&&(n=!1),null==r?null:null!=r[t.DATA_KEY]?r[t.DATA_KEY].blot:n?e(r.parentNode,n):null},t.query=u,t.register=function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(t.length>1)return t.map(function(t){return e(t)});var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new o("Invalid definition");if("abstract"===n.blotName)throw new o("Cannot register abstract class");return d[n.blotName||n.attrName]=n,"string"==typeof n.keyName?i[n.keyName]=n:(null!=n.className&&(l[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map(function(e){return e.toUpperCase()}):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach(function(e){null!=c[e]&&null!=n.className||(c[e]=n)}))),n}},function(e,t,r){var n=r(51),s=r(11),o=r(3),a=r(20),i=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var r={};return 0===e.length?this:(r.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var r={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(r.attributes=t),this.push(r)},l.prototype.push=function(e){var t=this.ops.length,r=this.ops[t-1];if(e=o(!0,{},e),"object"==typeof r){if("number"==typeof e.delete&&"number"==typeof r.delete)return this.ops[t-1]={delete:r.delete+e.delete},this;if("number"==typeof r.delete&&null!=e.insert&&(t-=1,"object"!=typeof(r=this.ops[t-1])))return this.ops.unshift(e),this;if(s(e.attributes,r.attributes)){if("string"==typeof e.insert&&"string"==typeof r.insert)return this.ops[t-1]={insert:r.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof r.retain)return this.ops[t-1]={retain:r.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],r=[];return this.forEach(function(n){(e(n)?t:r).push(n)}),[t,r]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce(function(e,t){return t.insert?e+a.length(t):t.delete?e-t.delete:e},0)},l.prototype.length=function(){return this.reduce(function(e,t){return e+a.length(t)},0)},l.prototype.slice=function(e,t){e=e||0,"number"!=typeof t&&(t=1/0);for(var r=[],n=a.iterator(this.ops),s=0;s<t&&n.hasNext();){var o;s<e?o=n.next(e-s):(o=n.next(t-s),r.push(o)),s+=a.length(o)}return new l(r)},l.prototype.compose=function(e){var t=a.iterator(this.ops),r=a.iterator(e.ops),n=[],o=r.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){for(var i=o.retain;"insert"===t.peekType()&&t.peekLength()<=i;)i-=t.peekLength(),n.push(t.next());o.retain-i>0&&r.next(o.retain-i)}for(var c=new l(n);t.hasNext()||r.hasNext();)if("insert"===r.peekType())c.push(r.next());else if("delete"===t.peekType())c.push(t.next());else{var d=Math.min(t.peekLength(),r.peekLength()),u=t.next(d),p=r.next(d);if("number"==typeof p.retain){var f={};"number"==typeof u.retain?f.retain=d:f.insert=u.insert;var m=a.attributes.compose(u.attributes,p.attributes,"number"==typeof u.retain);if(m&&(f.attributes=m),c.push(f),!r.hasNext()&&s(c.ops[c.ops.length-1],f)){var h=new l(t.rest());return c.concat(h).chop()}}else"number"==typeof p.delete&&"number"==typeof u.retain&&c.push(p)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var r=[this,e].map(function(t){return t.map(function(r){if(null!=r.insert)return"string"==typeof r.insert?r.insert:i;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")}).join("")}),o=new l,c=n(r[0],r[1],t),d=a.iterator(this.ops),u=a.iterator(e.ops);return c.forEach(function(e){for(var t=e[1].length;t>0;){var r=0;switch(e[0]){case n.INSERT:r=Math.min(u.peekLength(),t),o.push(u.next(r));break;case n.DELETE:r=Math.min(t,d.peekLength()),d.next(r),o.delete(r);break;case n.EQUAL:r=Math.min(d.peekLength(),u.peekLength(),t);var i=d.next(r),l=u.next(r);s(i.insert,l.insert)?o.retain(r,a.attributes.diff(i.attributes,l.attributes)):o.push(l).delete(r)}t-=r}}),o.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var r=a.iterator(this.ops),n=new l,s=0;r.hasNext();){if("insert"!==r.peekType())return;var o=r.peek(),i=a.length(o)-r.peekLength(),c="string"==typeof o.insert?o.insert.indexOf(t,i)-i:-1;if(c<0)n.push(r.next());else if(c>0)n.push(r.next(c));else{if(!1===e(n,r.next(1).attributes||{},s))return;s+=1,n=new l}}n.length()>0&&e(n,{},s)},l.prototype.transform=function(e,t){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);for(var r=a.iterator(this.ops),n=a.iterator(e.ops),s=new l;r.hasNext()||n.hasNext();)if("insert"!==r.peekType()||!t&&"insert"===n.peekType())if("insert"===n.peekType())s.push(n.next());else{var o=Math.min(r.peekLength(),n.peekLength()),i=r.next(o),c=n.next(o);if(i.delete)continue;c.delete?s.push(c):s.retain(o,a.attributes.transform(i.attributes,c.attributes,t))}else s.retain(a.length(r.next()));return s.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var r=a.iterator(this.ops),n=0;r.hasNext()&&n<=e;){var s=r.peekLength(),o=r.peekType();r.next(),"delete"!==o?("insert"===o&&(n<e||!t)&&(e+=s),n+=s):e-=Math.min(s,e-n)}return e},e.exports=l},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n=Object.prototype.toString,s=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},i=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var t,s=r.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!s&&!o)return!1;for(t in e);return void 0===t||r.call(e,t)},l=function(e,t){s&&"__proto__"===t.name?s(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!r.call(e,t))return;if(o)return o(e,t).value}return e[t]};e.exports=function e(){var t,r,n,s,o,d,u=arguments[0],p=1,f=arguments.length,m=!1;for("boolean"==typeof u&&(m=u,u=arguments[1]||{},p=2),(null==u||"object"!=typeof u&&"function"!=typeof u)&&(u={});p<f;++p)if(null!=(t=arguments[p]))for(r in t)n=c(u,r),u!==(s=c(t,r))&&(m&&s&&(i(s)||(o=a(s)))?(o?(o=!1,d=n&&a(n)?n:[]):d=n&&i(n)?n:{},l(u,{name:r,newValue:e(m,d,s)})):void 0!==s&&l(u,{name:r,newValue:s}));return u}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=u(r(3)),a=u(r(2)),i=u(r(0)),l=u(r(16)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return p(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),n(t,[{key:"attach",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new i.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new a.default).insert(this.value(),(0,o.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var r=i.default.query(e,i.default.Scope.BLOCK_ATTRIBUTE);null!=r&&this.attributes.attribute(r,t)}},{key:"formatAt",value:function(e,t,r,n){this.format(r,n)}},{key:"insertAt",value:function(e,r,n){if("string"==typeof r&&r.endsWith("\n")){var o=i.default.create(g.blotName);this.parent.insertBefore(o,0===e?this:this.next),o.insertAt(0,r.slice(0,-1))}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n)}}]),t}(i.default.Embed);h.scope=i.default.Scope.BLOCK_BLOT;var g=function(e){function t(e){p(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.cache={},r}return m(t,e),n(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(i.default.Leaf).reduce(function(e,t){return 0===t.length()?e:e.insert(t.value(),x(t))},new a.default).insert("\n",x(this))),this.cache.delta}},{key:"deleteAt",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),this.cache={}}},{key:"formatAt",value:function(e,r,n,o){r<=0||(i.default.query(n,i.default.Scope.BLOCK)?e+r===this.length()&&this.format(n,o):s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(r,this.length()-e-1),n,o),this.cache={})}},{key:"insertAt",value:function(e,r,n){if(null!=n)return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);if(0!==r.length){var o=r.split("\n"),a=o.shift();a.length>0&&(e<this.length()-1||null==this.children.tail?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),a):this.children.tail.insertAt(this.children.tail.length(),a),this.cache={});var i=this;o.reduce(function(e,t){return(i=i.split(e,!0)).insertAt(0,t),t.length},e+a.length)}}},{key:"insertBefore",value:function(e,r){var n=this.children.head;s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r),n instanceof l.default&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,r){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,r),this.cache={}}},{key:"optimize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r&&(0===e||e>=this.length()-1)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var o=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,r);return this.cache={},o}}]),t}(i.default.Block);function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"==typeof e.formats&&(t=(0,o.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:x(e.parent,t))}g.blotName="block",g.tagName="P",g.defaultChild="break",g.allowedChildren=[c.default,i.default.Embed,d.default],t.bubbleFormats=x,t.BlockEmbed=h,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(50);var a=g(r(2)),i=g(r(14)),l=g(r(8)),c=g(r(9)),d=g(r(0)),u=r(15),p=g(u),f=g(r(3)),m=g(r(10)),h=g(r(34));function g(e){return e&&e.__esModule?e:{default:e}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,m.default)("quill"),b=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=v(t,n),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=d.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new i.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e){e===l.default.events.TEXT_CHANGE&&r.root.classList.toggle("ql-blank",r.editor.isBlank())}),this.emitter.on(l.default.events.SCROLL_UPDATE,function(e,t){var n=r.selection.lastRange,s=n&&0===n.length?n.index:void 0;j.call(r,function(){return r.editor.update(null,t,s)},e)});var o=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+s+"<p><br></p></div>");this.setContents(o),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),m.default.level(e)}},{key:"find",value:function(e){return e.__quill||d.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&y.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var s=e.attrName||e.blotName;"string"==typeof s?this.register("formats/"+s,e,t):Object.keys(e).forEach(function(n){r.register(n,e[n],t)})}else null==this.imports[e]||n||y.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?d.default.register(t):e.startsWith("modules")&&"function"==typeof t.register&&t.register()}}]),o(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var r=e;(e=document.createElement("div")).classList.add(r)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,r){var n=this,o=w(e,t,r),a=s(o,4);return e=a[0],t=a[1],r=a[3],j.call(this,function(){return n.editor.deleteText(e,t)},r,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return j.call(this,function(){var n=r.getSelection(!0),s=new a.default;if(null==n)return s;if(d.default.query(e,d.default.Scope.BLOCK))s=r.editor.formatLine(n.index,n.length,x({},e,t));else{if(0===n.length)return r.selection.format(e,t),s;s=r.editor.formatText(n.index,n.length,x({},e,t))}return r.setSelection(n,l.default.sources.SILENT),s},n)}},{key:"formatLine",value:function(e,t,r,n,o){var a,i=this,l=w(e,t,r,n,o),c=s(l,4);return e=c[0],t=c[1],a=c[2],o=c[3],j.call(this,function(){return i.editor.formatLine(e,t,a)},o,e,0)}},{key:"formatText",value:function(e,t,r,n,o){var a,i=this,l=w(e,t,r,n,o),c=s(l,4);return e=c[0],t=c[1],a=c[2],o=c[3],j.call(this,function(){return i.editor.formatText(e,t,a)},o,e,0)}},{key:"getBounds",value:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t="number"==typeof e?this.selection.getBounds(e,r):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:t.bottom-n.top,height:t.height,left:t.left-n.left,right:t.right-n.left,top:t.top-n.top,width:t.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=w(e,t),n=s(r,2);return e=n[0],t=n[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,r=w(e,t),n=s(r,2);return e=n[0],t=n[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,r,n){var s=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return j.call(this,function(){return s.editor.insertEmbed(t,r,n)},o,t)}},{key:"insertText",value:function(e,t,r,n,o){var a,i=this,l=w(e,0,r,n,o),c=s(l,4);return e=c[0],a=c[2],o=c[3],j.call(this,function(){return i.editor.insertText(e,t,a)},o,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,r){this.clipboard.dangerouslyPasteHTML(e,t,r)}},{key:"removeFormat",value:function(e,t,r){var n=this,o=w(e,t,r),a=s(o,4);return e=a[0],t=a[1],r=a[3],j.call(this,function(){return n.editor.removeFormat(e,t)},r,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return j.call(this,function(){e=new a.default(e);var r=t.getLength(),n=t.editor.deleteText(0,r),s=t.editor.applyDelta(e),o=s.ops[s.ops.length-1];return null!=o&&"string"==typeof o.insert&&"\n"===o.insert[o.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),s.delete(1)),n.compose(s)},r)}},{key:"setSelection",value:function(t,r,n){if(null==t)this.selection.setRange(null,r||e.sources.API);else{var o=w(t,r,n),a=s(o,4);t=a[0],r=a[1],n=a[3],this.selection.setRange(new u.Range(t,r),n),n!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,r=(new a.default).insert(e);return this.setContents(r,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return j.call(this,function(){return e=new a.default(e),t.editor.applyDelta(e,r)},r,!0)}}]),e}();function v(e,t){if((t=(0,f.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==b.DEFAULTS.theme){if(t.theme=b.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=h.default;var r=(0,f.default)(!0,{},t.theme.DEFAULTS);[r,t].forEach(function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach(function(t){!0===e.modules[t]&&(e.modules[t]={})})});var n=Object.keys(r.modules).concat(Object.keys(t.modules)).reduce(function(e,t){var r=b.import("modules/"+t);return null==r?y.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=r.DEFAULTS||{},e},{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,f.default)(!0,{},b.DEFAULTS,{modules:n},r,t),["bounds","container","scrollingContainer"].forEach(function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))}),t.modules=Object.keys(t.modules).reduce(function(e,r){return t.modules[r]&&(e[r]=t.modules[r]),e},{}),t}function j(e,t,r,n){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new a.default;var s=null==r?null:this.getSelection(),o=this.editor.delta,i=e();if(null!=s&&(!0===r&&(r=s.index),null==n?s=N(s,i,t):0!==n&&(s=N(s,r,n,t)),this.setSelection(s,l.default.sources.SILENT)),i.length()>0){var c,d,u=[l.default.events.TEXT_CHANGE,i,o,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(u)),t!==l.default.sources.SILENT&&(d=this.emitter).emit.apply(d,u)}return i}function w(e,t,r,s,o){var a={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(o=s,s=r,r=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(o=s,s=r,r=t,t=0),"object"===(void 0===r?"undefined":n(r))?(a=r,o=s):"string"==typeof r&&(null!=s?a[r]=s:o=r),[e,t,a,o=o||l.default.sources.API]}function N(e,t,r,n){if(null==e)return null;var o=void 0,i=void 0;if(t instanceof a.default){var c=[e.index,e.index+e.length].map(function(e){return t.transformPosition(e,n!==l.default.sources.USER)}),d=s(c,2);o=d[0],i=d[1]}else{var p=[e.index,e.index+e.length].map(function(e){return e<t||e===t&&n===l.default.sources.USER?e:r>=0?e+r:Math.max(t,e+r)}),f=s(p,2);o=f[0],i=f[1]}return new u.Range(o,i-o)}b.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},b.events=l.default.events,b.sources=l.default.sources,b.version="1.3.7",b.imports={delta:a.default,parchment:d.default,"core/module":c.default,"core/theme":h.default},t.expandConfig=v,t.overload=w,t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=i(r(7)),a=i(r(0));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"formatAt",value:function(e,r,n,o){if(t.compare(this.statics.blotName,n)<0&&a.default.query(n,a.default.Scope.BLOT)){var i=this.isolate(e,r);o&&i.wrap(n,o)}else s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,o)}},{key:"optimize",value:function(e){if(s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}}}],[{key:"compare",value:function(e,r){var n=t.order.indexOf(e),s=t.order.indexOf(r);return n>=0||s>=0?n-s:e===r?0:e<r?-1:1}}]),t}(a.default.Inline);l.allowedChildren=[l,a.default.Embed,o.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(0))&&n.__esModule?n:{default:n}).default.Text);t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=a(r(54));function a(e){return e&&e.__esModule?e:{default:e}}var i=(0,a(r(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach(function(e){document.addEventListener(e,function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(e){var r;e.__quill&&e.__quill.emitter&&(r=e.__quill.emitter).handleDOM.apply(r,t)})})});var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",i.error),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(){i.log.apply(i,arguments),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach(function(t){var n=t.node,s=t.handler;(e.target===n||n.contains(e.target))&&s.apply(void 0,[e].concat(r))})}},{key:"listenDOM",value:function(e,t,r){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:r})}}]),t}(o.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r};n.DEFAULTS={},t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["error","warn","log","info"],s="warn";function o(e){if(n.indexOf(e)<=n.indexOf(s)){for(var t,r=arguments.length,o=Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=console)[e].apply(t,o)}}function a(e){return n.reduce(function(t,r){return t[r]=o.bind(console,r,e),t},{})}o.level=a.level=function(e){s=e},t.default=a},function(e,t,r){var n=Array.prototype.slice,s=r(52),o=r(53),a=e.exports=function(e,t,r){return r||(r={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?r.strict?e===t:e==t:function(e,t,r){var c,d;if(i(e)||i(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=n.call(e),t=n.call(t),a(e,t,r));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var u=s(e),p=s(t)}catch(e){return!1}if(u.length!=p.length)return!1;for(u.sort(),p.sort(),c=u.length-1;c>=0;c--)if(u[c]!=p[c])return!1;for(c=u.length-1;c>=0;c--)if(d=u[c],!a(e[d],t[d],r))return!1;return typeof e==typeof t}(e,t,r))};function i(e){return null==e}function l(e){return!(!e||"object"!=typeof e||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||e.length>0&&"number"!=typeof e[0])}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=function(){function e(e,t,r){void 0===r&&(r={}),this.attrName=e,this.keyName=t;var s=n.Scope.TYPE&n.Scope.ATTRIBUTE;null!=r.scope?this.scope=r.scope&n.Scope.LEVEL|s:this.scope=n.Scope.ATTRIBUTE,null!=r.whitelist&&(this.whitelist=r.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,function(e){return e.name})},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=n.query(e,n.Scope.BLOT&(this.scope|n.Scope.TYPE))&&(null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=u(r(2)),i=u(r(0)),l=u(r(4)),c=u(r(6)),d=u(r(7));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=function(e){function t(){return p(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),t}(c.default);h.blotName="code",h.tagName="CODE";var g=function(e){function t(){return p(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),s(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce(function(t,r){return t.insert(r).insert("\n",e.formats())},new a.default)}},{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r){var s=this.descendant(d.default,this.length()-1),a=n(s,1)[0];null!=a&&a.deleteAt(a.length()-1,1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}},{key:"formatAt",value:function(e,r,n,s){if(0!==r&&null!=i.default.query(n,i.default.Scope.BLOCK)&&(n!==this.statics.blotName||s!==this.statics.formats(this.domNode))){var o=this.newlineIndex(e);if(!(o<0||o>=e+r)){var a=this.newlineIndex(e,!0)+1,l=o-a+1,c=this.isolate(a,l),d=c.next;c.format(n,s),d instanceof t&&d.formatAt(0,e-a+r-l,n,s)}}}},{key:"insertAt",value:function(e,t,r){if(null==r){var s=this.descendant(d.default,e),o=n(s,2),a=o[0],i=o[1];a.insertAt(i,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(i.default.create("text","\n")),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===r.statics.formats(r.domNode)&&(r.optimize(e),r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(e){var t=i.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof i.default.Embed?t.remove():t.unwrap()})}}],[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("spellcheck",!1),r}},{key:"formats",value:function(){return!0}}]),t}(l.default);g.blotName="code-block",g.tagName="PRE",g.TAB="  ",t.Code=h,t.default=g},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=x(r(2)),i=x(r(20)),l=x(r(0)),c=x(r(13)),d=x(r(24)),u=r(4),p=x(u),f=x(r(16)),m=x(r(21)),h=x(r(11)),g=x(r(3));function x(e){return e&&e.__esModule?e:{default:e}}var y=/^[ -~]*$/,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return o(e,[{key:"applyDelta",value:function(e){var t=this,r=!1;this.scroll.update();var o=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce(function(e,t){if(1===t.insert){var r=(0,m.default)(t.attributes);return delete r.image,e.insert({image:t.attributes.image},r)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,m.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"==typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)},new a.default)}(e)).reduce(function(e,a){var c=a.retain||a.delete||a.insert.length||1,d=a.attributes||{};if(null!=a.insert){if("string"==typeof a.insert){var f=a.insert;f.endsWith("\n")&&r&&(r=!1,f=f.slice(0,-1)),e>=o&&!f.endsWith("\n")&&(r=!0),t.scroll.insertAt(e,f);var m=t.scroll.line(e),h=s(m,2),x=h[0],y=h[1],b=(0,g.default)({},(0,u.bubbleFormats)(x));if(x instanceof p.default){var v=x.descendant(l.default.Leaf,y),j=s(v,1)[0];b=(0,g.default)(b,(0,u.bubbleFormats)(j))}d=i.default.attributes.diff(b,d)||{}}else if("object"===n(a.insert)){var w=Object.keys(a.insert)[0];if(null==w)return e;t.scroll.insertAt(e,w,a.insert[w])}o+=c}return Object.keys(d).forEach(function(r){t.scroll.formatAt(e,c,r,d[r])}),e+c},0),e.reduce(function(e,r){return"number"==typeof r.delete?(t.scroll.deleteAt(e,r.delete),e):e+(r.retain||r.insert.length||1)},0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new a.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(n).forEach(function(s){if(null==r.scroll.whitelist||r.scroll.whitelist[s]){var o=r.scroll.lines(e,Math.max(t,1)),a=t;o.forEach(function(t){var o=t.length();if(t instanceof c.default){var i=e-t.offset(r.scroll),l=t.newlineIndex(i+a)-i+1;t.formatAt(i,l,s,n[s])}else t.format(s,n[s]);a-=o})}}),this.scroll.optimize(),this.update((new a.default).retain(e).retain(t,(0,m.default)(n)))}},{key:"formatText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).forEach(function(s){r.scroll.formatAt(e,t,s,n[s])}),this.update((new a.default).retain(e).retain(t,(0,m.default)(n)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(e,t){return e.concat(t.delta())},new a.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=[];0===t?this.scroll.path(e).forEach(function(e){var t=s(e,1)[0];t instanceof p.default?r.push(t):t instanceof l.default.Leaf&&n.push(t)}):(r=this.scroll.lines(e,t),n=this.scroll.descendants(l.default.Leaf,e,t));var o=[r,n].map(function(e){if(0===e.length)return{};for(var t=(0,u.bubbleFormats)(e.shift());Object.keys(t).length>0;){var r=e.shift();if(null==r)return t;t=v((0,u.bubbleFormats)(r),t)}return t});return g.default.apply(g.default,o)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter(function(e){return"string"==typeof e.insert}).map(function(e){return e.insert}).join("")}},{key:"insertEmbed",value:function(e,t,r){return this.scroll.insertAt(e,t,r),this.update((new a.default).retain(e).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r)))}},{key:"insertText",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach(function(s){r.scroll.formatAt(e,t.length,s,n[s])}),this.update((new a.default).retain(e).insert(t,(0,m.default)(n)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===p.default.blotName&&!(e.children.length>1)&&e.children.head instanceof f.default}},{key:"removeFormat",value:function(e,t){var r=this.getText(e,t),n=this.scroll.line(e+t),o=s(n,2),i=o[0],l=o[1],d=0,u=new a.default;null!=i&&(d=i instanceof c.default?i.newlineIndex(l)-l+1:i.length()-l,u=i.delta().slice(l,l+d-1).insert("\n"));var p=this.getContents(e,t+d).diff((new a.default).insert(r).concat(u)),f=(new a.default).retain(e).concat(p);return this.applyDelta(f)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(y)&&l.default.find(t[0].target)){var s=l.default.find(t[0].target),o=(0,u.bubbleFormats)(s),i=s.offset(this.scroll),c=t[0].oldValue.replace(d.default.CONTENTS,""),p=(new a.default).insert(c),f=(new a.default).insert(s.value());e=(new a.default).retain(i).concat(p.diff(f,r)).reduce(function(e,t){return t.insert?e.insert(t.insert,o):e.push(t)},new a.default),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&(0,h.default)(n.compose(e),this.delta)||(e=n.diff(this.delta,r));return e}}]),e}();function v(e,t){return Object.keys(t).reduce(function(r,n){return null==e[n]||(t[n]===e[n]?r[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(r[n]=t[n].concat([e[n]])):r[n]=[t[n],e[n]]),r},{})}t.default=b},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=c(r(0)),a=c(r(21)),i=c(r(11)),l=c(r(8));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=(0,c(r(10)).default)("quill:selection"),f=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this.index=t,this.length=r},m=function(){function e(t,r){var n=this;u(this,e),this.emitter=r,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=o.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){n.mouseDown||setTimeout(n.update.bind(n,l.default.sources.USER),1)}),this.emitter.on(l.default.events.EDITOR_CHANGE,function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&n.update(l.default.sources.SILENT)}),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,function(){if(n.hasFocus()){var e=n.getNativeRange();null!=e&&e.start.node!==n.cursor.textNode&&n.emitter.once(l.default.events.SCROLL_UPDATE,function(){try{n.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(e){}})}}),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,function(e,t){if(t.range){var r=t.range,s=r.startNode,o=r.startOffset,a=r.endNode,i=r.endOffset;n.setNativeRange(s,o,a,i)}}),this.update(l.default.sources.SILENT)}return s(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",function(){e.composing=!0}),this.root.addEventListener("compositionend",function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout(function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)},1)}})}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,function(){e.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){e.mouseDown=!1,e.update(l.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var r=this.getNativeRange();if(null!=r&&r.native.collapsed&&!o.default.query(e,o.default.Scope.BLOCK)){if(r.start.node!==this.cursor.textNode){var n=o.default.find(r.start.node,!1);if(null==n)return;if(n instanceof o.default.Leaf){var s=n.split(r.start.offset);n.parent.insertBefore(this.cursor,s)}else n.insertBefore(this.cursor,r.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),t=Math.min(e+t,r-1)-e;var s=void 0,o=this.scroll.leaf(e),a=n(o,2),i=a[0],l=a[1];if(null==i)return null;var c=i.position(l,!0),d=n(c,2);s=d[0],l=d[1];var u=document.createRange();if(t>0){u.setStart(s,l);var p=this.scroll.leaf(e+t),f=n(p,2);if(i=f[0],l=f[1],null==i)return null;var m=i.position(l,!0),h=n(m,2);return s=h[0],l=h[1],u.setEnd(s,l),u.getBoundingClientRect()}var g="left",x=void 0;return s instanceof Text?(l<s.data.length?(u.setStart(s,l),u.setEnd(s,l+1)):(u.setStart(s,l-1),u.setEnd(s,l),g="right"),x=u.getBoundingClientRect()):(x=i.domNode.getBoundingClientRect(),l>0&&(g="right")),{bottom:x.top+x.height,height:x.height,left:x[g],right:x[g],top:x.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var r=this.normalizeNative(t);return p.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,r=[[e.start.node,e.start.offset]];e.native.collapsed||r.push([e.end.node,e.end.offset]);var s=r.map(function(e){var r=n(e,2),s=r[0],a=r[1],i=o.default.find(s,!0),l=i.offset(t.scroll);return 0===a?l:i instanceof o.default.Container?l+i.length():l+i.index(s,a)}),a=Math.min(Math.max.apply(Math,d(s)),this.scroll.length()-1),i=Math.min.apply(Math,[a].concat(d(s)));return new f(i,a-i)}},{key:"normalizeNative",value:function(e){if(!h(this.root,e.startContainer)||!e.collapsed&&!h(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach(function(e){for(var t=e.node,r=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>r)t=t.childNodes[r],r=0;else{if(t.childNodes.length!==r)break;r=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=r}),t}},{key:"rangeToNative",value:function(e){var t=this,r=e.collapsed?[e.index]:[e.index,e.index+e.length],s=[],o=this.scroll.length();return r.forEach(function(e,r){e=Math.min(o-1,e);var a,i=t.scroll.leaf(e),l=n(i,2),c=l[0],d=l[1],u=c.position(d,0!==r),p=n(u,2);a=p[0],d=p[1],s.push(a,d)}),s.length<2&&(s=s.concat(s)),s}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var r=this.getBounds(t.index,t.length);if(null!=r){var s=this.scroll.length()-1,o=this.scroll.line(Math.min(t.index,s)),a=n(o,1)[0],i=a;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,s));i=n(l,1)[0]}if(null!=a&&null!=i){var c=e.getBoundingClientRect();r.top<c.top?e.scrollTop-=c.top-r.top:r.bottom>c.bottom&&(e.scrollTop+=r.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p.info("setNativeRange",e,t,r,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=r.parentNode){var o=document.getSelection();if(null!=o)if(null!=e){this.hasFocus()||this.root.focus();var a=(this.getNativeRange()||{}).native;if(null==a||s||e!==a.startContainer||t!==a.startOffset||r!==a.endContainer||n!==a.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==r.tagName&&(n=[].indexOf.call(r.parentNode.childNodes,r),r=r.parentNode);var i=document.createRange();i.setStart(e,t),i.setEnd(r,n),o.removeAllRanges(),o.addRange(i)}}else o.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"==typeof t&&(r=t,t=!1),p.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,d(n).concat([t]))}else this.setNativeRange(null);this.update(r)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,r=this.getRange(),s=n(r,2),o=s[0],c=s[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,i.default)(t,this.lastRange)){var d;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var u,p=[l.default.events.SELECTION_CHANGE,(0,a.default)(this.lastRange),(0,a.default)(t),e];(d=this.emitter).emit.apply(d,[l.default.events.EDITOR_CHANGE].concat(p)),e!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,p)}}}]),e}();function h(e,t){try{t.parentNode}catch(e){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=f,t.default=m},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"insertInto",value:function(e,r){0===e.children.length?o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,r):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((n=r(0))&&n.__esModule?n:{default:n}).default.Embed);a.blotName="break",a.tagName="BR",t.default=a},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(44),a=r(30),i=r(1),l=function(e){function t(t){var r=e.call(this,t)||this;return r.build(),r}return s(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach(function(e){e.attach()})},t.prototype.build=function(){var e=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(t){try{var r=c(t);e.insertBefore(r,e.children.head||void 0)}catch(e){if(e instanceof i.ParchmentError)return;throw e}})},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,function(e,t,r){e.deleteAt(t,r)})},t.prototype.descendant=function(e,r){var n=this.children.find(r),s=n[0],o=n[1];return null==e.blotName&&e(s)||null!=e.blotName&&s instanceof e?[s,o]:s instanceof t?s.descendant(e,o):[null,-1]},t.prototype.descendants=function(e,r,n){void 0===r&&(r=0),void 0===n&&(n=Number.MAX_VALUE);var s=[],o=n;return this.children.forEachAt(r,n,function(r,n,a){(null==e.blotName&&e(r)||null!=e.blotName&&r instanceof e)&&s.push(r),r instanceof t&&(s=s.concat(r.descendants(e,n,o))),o-=a}),s},t.prototype.detach=function(){this.children.forEach(function(e){e.detach()}),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,r,n){this.children.forEachAt(e,t,function(e,t,s){e.formatAt(t,s,r,n)})},t.prototype.insertAt=function(e,t,r){var n=this.children.find(e),s=n[0],o=n[1];if(s)s.insertAt(o,t,r);else{var a=null==r?i.create("text",t):i.create(t,r);this.appendChild(a)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some(function(t){return e instanceof t}))throw new i.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce(function(e,t){return e+t.length()},0)},t.prototype.moveChildren=function(e,t){this.children.forEach(function(r){e.insertBefore(r,t)})},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var r=i.create(this.statics.defaultChild);this.appendChild(r),r.optimize(t)}else this.remove()},t.prototype.path=function(e,r){void 0===r&&(r=!1);var n=this.children.find(e,r),s=n[0],o=n[1],a=[[this,e]];return s instanceof t?a.concat(s.path(o,r)):(null!=s&&a.push([s,o]),a)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(r){r instanceof t&&r.moveChildren(this),e.prototype.replace.call(this,r)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=this.clone();return this.parent.insertBefore(r,this.next),this.children.forEachAt(e,this.length(),function(e,n,s){e=e.split(n,t),r.appendChild(e)}),r},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var r=this,n=[],s=[];e.forEach(function(e){e.target===r.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),s.push.apply(s,e.removedNodes))}),s.forEach(function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=i.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==r.domNode||t.detach())}}),n.filter(function(e){return e.parentNode==r.domNode}).sort(function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(e){var t=null;null!=e.nextSibling&&(t=i.find(e.nextSibling));var n=c(e);n.next==t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(r),r.insertBefore(n,t||void 0))})},t}(a.default);function c(e){var t=i.find(e);if(null==t)try{t=i.create(e)}catch(r){t=i.create(i.Scope.INLINE),[].slice.call(e.childNodes).forEach(function(e){t.domNode.appendChild(e)}),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=l},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(12),a=r(31),i=r(17),l=r(1),c=function(e){function t(t){var r=e.call(this,t)||this;return r.attributes=new a.default(r.domNode),r}return s(t,e),t.formats=function(e){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var r=l.query(e);r instanceof o.default?this.attributes.attribute(r,t):t&&(null==r||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,r){var n=e.prototype.replaceWith.call(this,t,r);return this.attributes.copy(n),n},t.prototype.update=function(t,r){var n=this;e.prototype.update.call(this,t,r),t.some(function(e){return e.target===n.domNode&&"attributes"===e.type})&&this.attributes.build()},t.prototype.wrap=function(r,n){var s=e.prototype.wrap.call(this,r,n);return s instanceof t&&s.statics.scope===this.statics.scope&&this.attributes.move(s),s},t}(i.default);t.default=c},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(30),a=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var r=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(r+=1),[this.parent.domNode,r]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=a.Scope.INLINE_BLOT,t}(o.default);t.default=i},function(e,t,r){var n=r(11),s=r(3),o={attributes:{compose:function(e,t,r){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=s(!0,{},t);for(var o in r||(n=Object.keys(n).reduce(function(e,t){return null!=n[t]&&(e[t]=n[t]),e},{})),e)void 0!==e[o]&&void 0===t[o]&&(n[o]=e[o]);return Object.keys(n).length>0?n:void 0},diff:function(e,t){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=Object.keys(e).concat(Object.keys(t)).reduce(function(r,s){return n(e[s],t[s])||(r[s]=void 0===t[s]?null:t[s]),r},{});return Object.keys(r).length>0?r:void 0},transform:function(e,t,r){if("object"!=typeof e)return t;if("object"==typeof t){if(!r)return t;var n=Object.keys(t).reduce(function(r,n){return void 0===e[n]&&(r[n]=t[n]),r},{});return Object.keys(n).length>0?n:void 0}}},iterator:function(e){return new a(e)},length:function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}};function a(e){this.ops=e,this.index=0,this.offset=0}a.prototype.hasNext=function(){return this.peekLength()<1/0},a.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var r=this.offset,n=o.length(t);if(e>=n-r?(e=n-r,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var s={};return t.attributes&&(s.attributes=t.attributes),"number"==typeof t.retain?s.retain=e:"string"==typeof t.insert?s.insert=t.insert.substr(r,e):s.insert=t.insert,s}return{retain:1/0}},a.prototype.peek=function(){return this.ops[this.index]},a.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},a.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},a.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,r=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[r].concat(n)}return[]},e.exports=o},function(e,t){var r=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,r,n;try{t=Map}catch(e){t=function(){}}try{r=Set}catch(e){r=function(){}}try{n=Promise}catch(e){n=function(){}}function s(o,i,l,c,d){"object"==typeof i&&(l=i.depth,c=i.prototype,d=i.includeNonEnumerable,i=i.circular);var u=[],p=[],f="undefined"!=typeof Buffer;return void 0===i&&(i=!0),void 0===l&&(l=1/0),function o(l,m){if(null===l)return null;if(0===m)return l;var h,g;if("object"!=typeof l)return l;if(e(l,t))h=new t;else if(e(l,r))h=new r;else if(e(l,n))h=new n(function(e,t){l.then(function(t){e(o(t,m-1))},function(e){t(o(e,m-1))})});else if(s.__isArray(l))h=[];else if(s.__isRegExp(l))h=new RegExp(l.source,a(l)),l.lastIndex&&(h.lastIndex=l.lastIndex);else if(s.__isDate(l))h=new Date(l.getTime());else{if(f&&Buffer.isBuffer(l))return h=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(h),h;e(l,Error)?h=Object.create(l):void 0===c?(g=Object.getPrototypeOf(l),h=Object.create(g)):(h=Object.create(c),g=c)}if(i){var x=u.indexOf(l);if(-1!=x)return p[x];u.push(l),p.push(h)}for(var y in e(l,t)&&l.forEach(function(e,t){var r=o(t,m-1),n=o(e,m-1);h.set(r,n)}),e(l,r)&&l.forEach(function(e){var t=o(e,m-1);h.add(t)}),l){var b;g&&(b=Object.getOwnPropertyDescriptor(g,y)),b&&null==b.set||(h[y]=o(l[y],m-1))}if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(l);for(y=0;y<v.length;y++){var j=v[y];(!(N=Object.getOwnPropertyDescriptor(l,j))||N.enumerable||d)&&(h[j]=o(l[j],m-1),N.enumerable||Object.defineProperty(h,j,{enumerable:!1}))}}if(d){var w=Object.getOwnPropertyNames(l);for(y=0;y<w.length;y++){var N,k=w[y];(N=Object.getOwnPropertyDescriptor(l,k))&&N.enumerable||(h[k]=o(l[k],m-1),Object.defineProperty(h,k,{enumerable:!1}))}}return h}(o,l)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return s.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},s.__objToStr=o,s.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},s.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},s.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},s.__getRegExpFlags=a,s}();"object"==typeof e&&e.exports&&(e.exports=r)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=f(r(0)),i=f(r(8)),l=r(4),c=f(l),d=f(r(16)),u=f(r(13)),p=f(r(25));function f(e){return e&&e.__esModule?e:{default:e}}function m(e){return e instanceof c.default||e instanceof l.BlockEmbed}var h=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.emitter=r.emitter,Array.isArray(r.whitelist)&&(n.whitelist=r.whitelist.reduce(function(e,t){return e[t]=!0,e},{})),n.domNode.addEventListener("DOMNodeInserted",function(){}),n.optimize(),n.enable(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,r){var s=this.line(e),a=n(s,2),i=a[0],c=a[1],p=this.line(e+r),f=n(p,1)[0];if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,r),null!=f&&i!==f&&c>0){if(i instanceof l.BlockEmbed||f instanceof l.BlockEmbed)return void this.optimize();if(i instanceof u.default){var m=i.newlineIndex(i.length(),!0);if(m>-1&&(i=i.split(m+1))===f)return void this.optimize()}else if(f instanceof u.default){var h=f.newlineIndex(0);h>-1&&f.split(h+1)}var g=f.children.head instanceof d.default?null:f.children.head;i.moveChildren(f,g),i.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,r,n,s){(null==this.whitelist||this.whitelist[n])&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,r,n,s),this.optimize())}},{key:"insertAt",value:function(e,r,n){if(null==n||null==this.whitelist||this.whitelist[r]){if(e>=this.length())if(null==n||null==a.default.query(r,a.default.Scope.BLOCK)){var s=a.default.create(this.statics.defaultChild);this.appendChild(s),null==n&&r.endsWith("\n")&&(r=r.slice(0,-1)),s.insertAt(0,r,n)}else{var i=a.default.create(r,n);this.appendChild(i)}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,r,n);this.optimize()}}},{key:"insertBefore",value:function(e,r){if(e.statics.scope===a.default.Scope.INLINE_BLOT){var n=a.default.create(this.statics.defaultChild);n.appendChild(e),e=n}o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(m,e)}},{key:"lines",value:function(){return function e(t,r,n){var s=[],o=n;return t.children.forEachAt(r,n,function(t,r,n){m(t)?s.push(t):t instanceof a.default.Container&&(s=s.concat(e(t,r,o))),o-=n}),s}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,r),e.length>0&&this.emitter.emit(i.default.events.SCROLL_OPTIMIZE,e,r))}},{key:"path",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var r=i.default.sources.USER;"string"==typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(i.default.events.SCROLL_BEFORE_UPDATE,r,e),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(i.default.events.SCROLL_UPDATE,r,e)}}}]),t}(a.default.Scroll);h.blotName="scroll",h.className="ql-editor",h.tagName="DIV",h.defaultChild="block",h.allowedChildren=[c.default,l.BlockEmbed,p.default],t.default=h},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=h(r(21)),i=h(r(11)),l=h(r(3)),c=h(r(2)),d=h(r(20)),u=h(r(0)),p=h(r(5)),f=h(r(10)),m=h(r(9));function h(e){return e&&e.__esModule?e:{default:e}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x=(0,f.default)("quill:keyboard"),y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.bindings={},Object.keys(n.options.bindings).forEach(function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&n.options.bindings[t]&&n.addBinding(n.options.bindings[t])}),n.addBinding({key:t.keys.ENTER,shiftKey:null},k),n.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},j),n.addBinding({key:t.keys.DELETE},{collapsed:!0},w)):(n.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},j),n.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},w)),n.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},N),n.addBinding({key:t.keys.DELETE},{collapsed:!1},N),n.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},j),n.listen(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"match",value:function(e,t){return t=S(t),!["altKey","ctrlKey","metaKey","shiftKey"].some(function(r){return!!t[r]!==e[r]&&null!==t[r]})&&t.key===(e.which||e.keyCode)}}]),o(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=S(e);if(null==n||null==n.key)return x.warn("Attempted to add invalid keyboard binding",n);"function"==typeof t&&(t={handler:t}),"function"==typeof r&&(r={handler:r}),n=(0,l.default)(n,t,r),this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",function(r){if(!r.defaultPrevented){var o=r.which||r.keyCode,a=(e.bindings[o]||[]).filter(function(e){return t.match(r,e)});if(0!==a.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),d=s(c,2),p=d[0],f=d[1],m=e.quill.getLeaf(l.index),h=s(m,2),g=h[0],x=h[1],y=0===l.length?[g,x]:e.quill.getLeaf(l.index+l.length),b=s(y,2),v=b[0],j=b[1],w=g instanceof u.default.Text?g.value().slice(0,x):"",N=v instanceof u.default.Text?v.value().slice(j):"",k={collapsed:0===l.length,empty:0===l.length&&p.length()<=1,format:e.quill.getFormat(l),offset:f,prefix:w,suffix:N};a.some(function(t){if(null!=t.collapsed&&t.collapsed!==k.collapsed)return!1;if(null!=t.empty&&t.empty!==k.empty)return!1;if(null!=t.offset&&t.offset!==k.offset)return!1;if(Array.isArray(t.format)){if(t.format.every(function(e){return null==k.format[e]}))return!1}else if("object"===n(t.format)&&!Object.keys(t.format).every(function(e){return!0===t.format[e]?null!=k.format[e]:!1===t.format[e]?null==k.format[e]:(0,i.default)(t.format[e],k.format[e])}))return!1;return!(null!=t.prefix&&!t.prefix.test(k.prefix)||null!=t.suffix&&!t.suffix.test(k.suffix)||!0===t.handler.call(e,l,k))})&&r.preventDefault()}}}})}}]),t}(m.default);function v(e,t){var r,n=e===b.keys.LEFT?"prefix":"suffix";return g(r={key:e,shiftKey:t,altKey:null},n,/^$/),g(r,"handler",function(r){var n=r.index;e===b.keys.RIGHT&&(n+=r.length+1);var o=this.quill.getLeaf(n);return!(s(o,1)[0]instanceof u.default.Embed&&(e===b.keys.LEFT?t?this.quill.setSelection(r.index-1,r.length+1,p.default.sources.USER):this.quill.setSelection(r.index-1,p.default.sources.USER):t?this.quill.setSelection(r.index,r.length+1,p.default.sources.USER):this.quill.setSelection(r.index+r.length+1,p.default.sources.USER),1))}),r}function j(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var r=this.quill.getLine(e.index),n=s(r,1)[0],o={};if(0===t.offset){var a=this.quill.getLine(e.index-1),i=s(a,1)[0];if(null!=i&&i.length()>1){var l=n.formats(),c=this.quill.getFormat(e.index-1,1);o=d.default.attributes.diff(l,c)||{}}}var u=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-u,u,p.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(e.index-u,u,o,p.default.sources.USER),this.quill.focus()}}function w(e,t){var r=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-r)){var n={},o=0,a=this.quill.getLine(e.index),i=s(a,1)[0];if(t.offset>=i.length()-1){var l=this.quill.getLine(e.index+1),c=s(l,1)[0];if(c){var u=i.formats(),f=this.quill.getFormat(e.index,1);n=d.default.attributes.diff(u,f)||{},o=c.length()}}this.quill.deleteText(e.index,r,p.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index+o-1,r,n,p.default.sources.USER)}}function N(e){var t=this.quill.getLines(e),r={};if(t.length>1){var n=t[0].formats(),s=t[t.length-1].formats();r=d.default.attributes.diff(s,n)||{}}this.quill.deleteText(e,p.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index,1,r,p.default.sources.USER),this.quill.setSelection(e.index,p.default.sources.SILENT),this.quill.focus()}function k(e,t){var r=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var n=Object.keys(t.format).reduce(function(e,r){return u.default.query(r,u.default.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e},{});this.quill.insertText(e.index,"\n",n,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach(function(e){null==n[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],p.default.sources.USER))})}function C(e){return{key:b.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var r=u.default.query("code-block"),n=t.index,o=t.length,a=this.quill.scroll.descendant(r,n),i=s(a,2),l=i[0],c=i[1];if(null!=l){var d=this.quill.getIndex(l),f=l.newlineIndex(c,!0)+1,m=l.newlineIndex(d+c+o),h=l.domNode.textContent.slice(f,m).split("\n");c=0,h.forEach(function(t,s){e?(l.insertAt(f+c,r.TAB),c+=r.TAB.length,0===s?n+=r.TAB.length:o+=r.TAB.length):t.startsWith(r.TAB)&&(l.deleteAt(f+c,r.TAB.length),c-=r.TAB.length,0===s?n-=r.TAB.length:o-=r.TAB.length),c+=t.length+1}),this.quill.update(p.default.sources.USER),this.quill.setSelection(n,o,p.default.sources.SILENT)}}}}function _(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,r){this.quill.format(e,!r.format[e],p.default.sources.USER)}}}function S(e){if("string"==typeof e||"number"==typeof e)return S({key:e});if("object"===(void 0===e?"undefined":n(e))&&(e=(0,a.default)(e,!1)),"string"==typeof e.key)if(null!=b.keys[e.key.toUpperCase()])e.key=b.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[y]=e.shortKey,delete e.shortKey),e}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:_("bold"),italic:_("italic"),underline:_("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",p.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",p.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",p.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,p.default.sources.USER)}},"indent code-block":C(!0),"outdent code-block":C(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,p.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,p.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,p.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,p.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),r=s(t,2),n=r[0],o=r[1],a=(0,l.default)({},n.formats(),{list:"checked"}),i=(new c.default).retain(e.index).insert("\n",a).retain(n.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(i,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var r=this.quill.getLine(e.index),n=s(r,2),o=n[0],a=n[1],i=(new c.default).retain(e.index).insert("\n",t.format).retain(o.length()-a-1).retain(1,{header:null});this.quill.updateContents(i,p.default.sources.USER),this.quill.setSelection(e.index+1,p.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var r=t.prefix.length,n=this.quill.getLine(e.index),o=s(n,2),a=o[0],i=o[1];if(i>r)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",p.default.sources.USER),this.quill.history.cutoff();var d=(new c.default).retain(e.index-i).delete(r+1).retain(a.length()-2-i).retain(1,{list:l});this.quill.updateContents(d,p.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,p.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),r=s(t,2),n=r[0],o=r[1],a=(new c.default).retain(e.index+n.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(a,p.default.sources.USER)}},"embed left":v(b.keys.LEFT,!1),"embed left shift":v(b.keys.LEFT,!0),"embed right":v(b.keys.RIGHT,!1),"embed right shift":v(b.keys.RIGHT,!0)}},t.default=b,t.SHORTKEY=y},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=i(r(0)),a=i(r(7));function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.selection=r,n.textNode=document.createTextNode(t.CONTENTS),n.domNode.appendChild(n.textNode),n._length=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"value",value:function(){}}]),s(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,r){if(0!==this._length)return n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);for(var s=this,a=0;null!=s&&s.statics.scope!==o.default.Scope.BLOCK_BLOT;)a+=s.offset(s.parent),s=s.parent;null!=s&&(this._length=t.CONTENTS.length,s.optimize(),s.formatAt(a,t.CONTENTS.length,e,r),this._length=0)}},{key:"index",value:function(e,r){return e===this.textNode?0:n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,r=this.selection.getNativeRange(),n=void 0,s=void 0,i=void 0;if(null!=r&&r.start.node===e&&r.end.node===e){var l=[e,r.start.offset,r.end.offset];n=l[0],s=l[1],i=l[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var c=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof a.default?(n=this.next.domNode,this.next.insertAt(0,c),this.textNode.data=t.CONTENTS):(this.textNode.data=c,this.parent.insertBefore(o.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=s){var d=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}([s,i].map(function(e){return Math.max(0,Math.min(n.data.length,e-1))}),2);return s=d[0],i=d[1],{startNode:n,startOffset:s,endNode:n,endOffset:i}}}}},{key:"update",value:function(e,t){var r=this;if(e.some(function(e){return"characterData"===e.type&&e.target===r.textNode})){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}]),t}(o.default.Embed);l.blotName="cursor",l.className="ql-cursor",l.tagName="span",l.CONTENTS="\ufeff",t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(0)),s=r(4),o=a(s);function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default.Container);i.allowedChildren=[o.default,s.BlockEmbed,i],t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=(n=r(0))&&n.__esModule?n:{default:n},i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"value",value:function(e){var r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return r.startsWith("rgb(")?"#"+(r=r.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map(function(e){return("00"+parseInt(e).toString(16)).slice(-2)}).join(""):r}}]),t}(a.default.Attributor.Style),l=new a.default.Attributor.Class("color","ql-color",{scope:a.default.Scope.INLINE}),c=new i("color","color",{scope:a.default.Scope.INLINE});t.ColorAttributor=i,t.ColorClass=l,t.ColorStyle=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){if(e!==this.statics.blotName||!r)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r);r=this.constructor.sanitize(r),this.domNode.setAttribute("href",r)}}],[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),r.setAttribute("href",e),r.setAttribute("rel","noopener noreferrer"),r.setAttribute("target","_blank"),r}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return i(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);function i(e,t){var r=document.createElement("a");r.href=e;var n=r.href.slice(0,r.href.indexOf(":"));return t.indexOf(n)>-1}a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=a,t.sanitize=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=i(r(23)),a=i(r(107));function i(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var d=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){r.togglePicker()}),this.label.addEventListener("keydown",function(e){switch(e.keyCode){case o.default.keys.ENTER:r.togglePicker();break;case o.default.keys.ESCAPE:r.escape(),e.preventDefault()}}),this.select.addEventListener("change",this.update.bind(this))}return s(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,r=document.createElement("span");return r.tabIndex="0",r.setAttribute("role","button"),r.classList.add("ql-picker-item"),e.hasAttribute("value")&&r.setAttribute("data-value",e.getAttribute("value")),e.textContent&&r.setAttribute("data-label",e.textContent),r.addEventListener("click",function(){t.selectItem(r,!0)}),r.addEventListener("keydown",function(e){switch(e.keyCode){case o.default.keys.ENTER:t.selectItem(r,!0),e.preventDefault();break;case o.default.keys.ESCAPE:t.escape(),e.preventDefault()}}),r}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=a.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach(function(r){var n=e.buildItem(r);t.appendChild(n),!0===r.selected&&e.selectItem(n)}),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach(function(t){e.container.setAttribute(t.name,t.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout(function(){return e.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.container.querySelector(".ql-selected");if(e!==r&&(null!=r&&r.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":n(Event))){var s=document.createEvent("Event");s.initEvent("change",!0,!0),this.select.dispatchEvent(s)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var r=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",r)}}]),e}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=x(r(0)),s=x(r(5)),o=r(4),a=x(o),i=x(r(16)),l=x(r(25)),c=x(r(24)),d=x(r(35)),u=x(r(6)),p=x(r(22)),f=x(r(7)),m=x(r(55)),h=x(r(42)),g=x(r(23));function x(e){return e&&e.__esModule?e:{default:e}}s.default.register({"blots/block":a.default,"blots/block/embed":o.BlockEmbed,"blots/break":i.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":d.default,"blots/inline":u.default,"blots/scroll":p.default,"blots/text":f.default,"modules/clipboard":m.default,"modules/history":h.default,"modules/keyboard":g.default}),n.default.register(a.default,i.default,c.default,u.default,p.default,f.default),t.default=s.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),s=function(){function e(e){this.domNode=e,this.domNode[n.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new n.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return n.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[n.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,r,s){var o=this.isolate(e,t);if(null!=n.query(r,n.Scope.BLOT)&&s)o.wrap(r,s);else if(null!=n.query(r,n.Scope.ATTRIBUTE)){var a=n.create(this.statics.scope);o.wrap(a),a.format(r,s)}},e.prototype.insertAt=function(e,t,r){var s=null==r?n.create("text",t):n.create(t,r),o=this.split(e);this.parent.insertBefore(s,o)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var r=null;e.children.insertBefore(this,t),null!=t&&(r=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==r||e.domNode.insertBefore(this.domNode,r),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var r=this.split(e);return r.split(t),r},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[n.DATA_KEY]&&delete this.domNode[n.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var r="string"==typeof e?n.create(e,t):e;return r.replace(this),r},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var r="string"==typeof e?n.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(r,this.next),r.appendChild(this),r},e.blotName="abstract",e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),s=r(32),o=r(33),a=r(1),i=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=n.default.keys(this.domNode),r=s.default.keys(this.domNode),i=o.default.keys(this.domNode);t.concat(r).concat(i).forEach(function(t){var r=a.query(t,a.Scope.ATTRIBUTE);r instanceof n.default&&(e.attributes[r.attrName]=r)})},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach(function(r){var n=t.attributes[r].value(t.domNode);e.format(r,n)})},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach(function(e){t.attributes[e].remove(t.domNode)}),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce(function(t,r){return t[r]=e.attributes[r].value(e.domNode),t},{})},e}();t.default=i},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});function o(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter(function(e){return 0===e.indexOf(t+"-")})}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){o(e,this.keyName).forEach(function(t){e.classList.remove(t)}),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(o(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=a},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});function o(e){var t=e.split("-"),r=t.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return t[0]+r}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map(function(e){return e.split(":")[0].trim()})},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[o(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[o(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[o(this.keyName)];return this.canAdd(e,t)?t:""},t}(r(12).default);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=r,this.modules={}}return n(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach(function(t){null==e.modules[t]&&e.addModule(t)})}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();s.DEFAULTS={modules:{}},s.themes={default:s},t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=i(r(0)),a=i(r(7));function i(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable",!1),[].slice.call(r.domNode.childNodes).forEach(function(e){r.contentNode.appendChild(e)}),r.leftGuard=document.createTextNode(l),r.rightGuard=document.createTextNode(l),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"index",value:function(e,r){return e===this.leftGuard?0:e===this.rightGuard?1:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,r)}},{key:"restore",value:function(e){var t=void 0,r=void 0,n=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof a.default){var s=this.prev.length();this.prev.insertAt(s,n),t={startNode:this.prev.domNode,startOffset:s+n.length}}else r=document.createTextNode(n),this.parent.insertBefore(o.default.create(r),this),t={startNode:r,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof a.default?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(r=document.createTextNode(n),this.parent.insertBefore(o.default.create(r),this.next),t={startNode:r,startOffset:n.length}));return e.data=l,t}},{key:"update",value:function(e,t){var r=this;e.forEach(function(e){if("characterData"===e.type&&(e.target===r.leftGuard||e.target===r.rightGuard)){var n=r.restore(e.target);n&&(t.range=n)}})}}]),t}(o.default.Embed);t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var n,s=(n=r(0))&&n.__esModule?n:{default:n},o={scope:s.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new s.default.Attributor.Attribute("align","align",o),i=new s.default.Attributor.Class("align","ql-align",o),l=new s.default.Attributor.Style("align","text-align",o);t.AlignAttribute=a,t.AlignClass=i,t.AlignStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var n,s=(n=r(0))&&n.__esModule?n:{default:n},o=r(26),a=new s.default.Attributor.Class("background","ql-bg",{scope:s.default.Scope.INLINE}),i=new o.ColorAttributor("background","background-color",{scope:s.default.Scope.INLINE});t.BackgroundClass=a,t.BackgroundStyle=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var n,s=(n=r(0))&&n.__esModule?n:{default:n},o={scope:s.default.Scope.BLOCK,whitelist:["rtl"]},a=new s.default.Attributor.Attribute("direction","dir",o),i=new s.default.Attributor.Class("direction","ql-direction",o),l=new s.default.Attributor.Style("direction","direction",o);t.DirectionAttribute=a,t.DirectionClass=i,t.DirectionStyle=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=(n=r(0))&&n.__esModule?n:{default:n},i={scope:a.default.Scope.INLINE,whitelist:["serif","monospace"]},l=new a.default.Attributor.Class("font","ql-font",i),c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"value",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(a.default.Attributor.Style),d=new c("font","font-family",i);t.FontStyle=d,t.FontClass=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var n,s=(n=r(0))&&n.__esModule?n:{default:n},o=new s.default.Attributor.Class("size","ql-size",{scope:s.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new s.default.Attributor.Style("size","font-size",{scope:s.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=o,t.SizeStyle=a},function(e,t,r){"use strict";e.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=a(r(0)),o=a(r(5));function a(e){return e&&e.__esModule?e:{default:e}}var i=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(o.default.events.EDITOR_CHANGE,function(e,t,r,s){e!==o.default.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&s!==o.default.sources.USER?n.transform(t):n.record(t,r))}),n.quill.keyboard.addBinding({key:"Z",shortKey:!0},n.undo.bind(n)),n.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},n.redo.bind(n)),/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"Y",shortKey:!0},n.redo.bind(n)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var r=this.stack[e].pop();this.stack[t].push(r),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(r[e],o.default.sources.USER),this.ignoreChange=!1;var n=l(r[e]);this.quill.setSelection(n)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var r=this.quill.getContents().diff(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var s=this.stack.undo.pop();r=r.compose(s.undo),e=s.redo.compose(e)}else this.lastRecorded=n;this.stack.undo.push({redo:e,undo:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}),this.stack.redo.forEach(function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(a(r(9)).default);function l(e){var t=e.reduce(function(e,t){return e+(t.delete||0)},0),r=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"==typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some(function(e){return null!=s.default.query(e,s.default.Scope.BLOCK)}))}(e)&&(r-=1),r}i.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=i,t.getLastChangeIndex=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=m(r(3)),a=m(r(2)),i=m(r(8)),l=m(r(23)),c=m(r(34)),d=m(r(59)),u=m(r(60)),p=m(r(28)),f=m(r(61));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],v=[!1,"serif","monospace"],j=["1","2","3",!1],w=["small",!1,"large","huge"],N=function(e){function t(e,r){h(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return e.emitter.listenDOM("click",document.body,function t(r){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==n.tooltip||n.tooltip.root.contains(r.target)||document.activeElement===n.tooltip.textbox||n.quill.hasFocus()||n.tooltip.hide(),null!=n.pickers&&n.pickers.forEach(function(e){e.container.contains(r.target)||e.close()})}),n}return x(t,e),n(t,[{key:"addModule",value:function(e){var r=s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(r),r}},{key:"buildButtons",value:function(e,t){e.forEach(function(e){(e.getAttribute("class")||"").split(/\s+/).forEach(function(r){if(r.startsWith("ql-")&&(r=r.slice(3),null!=t[r]))if("direction"===r)e.innerHTML=t[r][""]+t[r].rtl;else if("string"==typeof t[r])e.innerHTML=t[r];else{var n=e.value||"";null!=n&&t[r][n]&&(e.innerHTML=t[r][n])}})})}},{key:"buildPickers",value:function(e,t){var r=this;this.pickers=e.map(function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&C(e,y),new u.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var r=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&C(e,b,"background"===r?"#ffffff":"#000000"),new d.default(e,t[r])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?C(e,v):e.classList.contains("ql-header")?C(e,j):e.classList.contains("ql-size")&&C(e,w)),new p.default(e)}),this.quill.on(i.default.events.EDITOR_CHANGE,function(){r.pickers.forEach(function(e){e.update()})})}}]),t}(c.default);N.DEFAULTS=(0,o.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",function(){if(null!=t.files&&null!=t.files[0]){var r=new FileReader;r.onload=function(r){var n=e.quill.getSelection(!0);e.quill.updateContents((new a.default).retain(n.index).delete(n.length).insert({image:r.target.result}),i.default.sources.USER),e.quill.setSelection(n.index+1,i.default.sources.SILENT),t.value=""},r.readAsDataURL(t.files[0])}}),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var k=function(e){function t(e,r){h(this,t);var n=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.textbox=n.root.querySelector('input[type="text"]'),n.listen(),n}return x(t,e),n(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e,t,r=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var n=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",r,i.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",r,i.default.sources.USER)),this.quill.root.scrollTop=n;break;case"video":r=(t=(e=r).match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/))?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e;case"formula":if(!r)break;var s=this.quill.getSelection(!0);if(null!=s){var o=s.index+s.length;this.quill.insertEmbed(o,this.root.getAttribute("data-mode"),r,i.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(o+1," ",i.default.sources.USER),this.quill.setSelection(o+2,i.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(f.default);function C(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach(function(t){var n=document.createElement("option");t===r?n.setAttribute("selected","selected"):n.setAttribute("value",t),e.appendChild(n)})}t.BaseTooltip=k,t.default=N},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,r=this.iterator();t=r();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,r=this.head;null!=r;){if(r===e)return t;t+=r.length(),r=r.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var r,n=this.iterator();r=n();){var s=r.length();if(e<s||t&&e===s&&(null==r.next||0!==r.next.length()))return[r,e];e-=s}return[null,0]},e.prototype.forEach=function(e){for(var t,r=this.iterator();t=r();)e(t)},e.prototype.forEachAt=function(e,t,r){if(!(t<=0))for(var n,s=this.find(e),o=s[0],a=e-s[1],i=this.iterator(o);(n=i())&&a<e+t;){var l=n.length();e>a?r(n,e-a,Math.min(t,a+l-e)):r(n,0,Math.min(l,e+t-a)),a+=l}},e.prototype.map=function(e){return this.reduce(function(t,r){return t.push(e(r)),t},[])},e.prototype.reduce=function(e,t){for(var r,n=this.iterator();r=n();)t=e(t,r);return t},e}();t.default=n},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(17),a=r(1),i={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},l=function(e){function t(t){var r=e.call(this,t)||this;return r.scroll=r,r.observer=new MutationObserver(function(e){r.update(e)}),r.observer.observe(r.domNode,i),r.attach(),r}return s(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,r){this.update(),0===t&&r===this.length()?this.children.forEach(function(e){e.remove()}):e.prototype.deleteAt.call(this,t,r)},t.prototype.formatAt=function(t,r,n,s){this.update(),e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.insertAt=function(t,r,n){this.update(),e.prototype.insertAt.call(this,t,r,n)},t.prototype.optimize=function(t,r){var n=this;void 0===t&&(t=[]),void 0===r&&(r={}),e.prototype.optimize.call(this,r);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)t.push(s.pop());for(var i=function(e,t){void 0===t&&(t=!0),null!=e&&e!==n&&null!=e.domNode.parentNode&&(null==e.domNode[a.DATA_KEY].mutations&&(e.domNode[a.DATA_KEY].mutations=[]),t&&i(e.parent))},l=function(e){null!=e.domNode[a.DATA_KEY]&&null!=e.domNode[a.DATA_KEY].mutations&&(e instanceof o.default&&e.children.forEach(l),e.optimize(r))},c=t,d=0;c.length>0;d+=1){if(d>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach(function(e){var t=a.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(i(a.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,function(e){var t=a.find(e,!1);i(t,!1),t instanceof o.default&&t.children.forEach(function(e){i(e,!1)})})):"attributes"===e.type&&i(t.prev)),i(t))}),this.children.forEach(l),s=(c=[].slice.call(this.observer.takeRecords())).slice();s.length>0;)t.push(s.pop())}},t.prototype.update=function(t,r){var n=this;void 0===r&&(r={}),(t=t||this.observer.takeRecords()).map(function(e){var t=a.find(e.target,!0);return null==t?null:null==t.domNode[a.DATA_KEY].mutations?(t.domNode[a.DATA_KEY].mutations=[e],t):(t.domNode[a.DATA_KEY].mutations.push(e),null)}).forEach(function(e){null!=e&&e!==n&&null!=e.domNode[a.DATA_KEY]&&e.update(e.domNode[a.DATA_KEY].mutations||[],r)}),null!=this.domNode[a.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[a.DATA_KEY].mutations,r),this.optimize(t,r)},t.blotName="scroll",t.defaultChild="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="DIV",t}(o.default);t.default=l},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(18),a=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(r){if(r.tagName!==t.tagName)return e.formats.call(this,r)},t.prototype.format=function(r,n){var s=this;r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):(this.children.forEach(function(e){e instanceof o.default||(e=e.wrap(t.blotName,!0)),s.attributes.copy(e)}),this.unwrap())},t.prototype.formatAt=function(t,r,n,s){null!=this.formats()[n]||a.query(n,a.Scope.ATTRIBUTE)?this.isolate(t,r).format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var s=this.next;s instanceof t&&s.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}(n,s.formats())&&(s.moveChildren(this),s.remove())},t.blotName="inline",t.scope=a.Scope.INLINE_BLOT,t.tagName="SPAN",t}(o.default);t.default=i},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(18),a=r(1),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(r){var n=a.query(t.blotName).tagName;if(r.tagName!==n)return e.formats.call(this,r)},t.prototype.format=function(r,n){null!=a.query(r,a.Scope.BLOCK)&&(r!==this.statics.blotName||n?e.prototype.format.call(this,r,n):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,r,n,s){null!=a.query(n,a.Scope.BLOCK)?this.format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.insertAt=function(t,r,n){if(null==n||null!=a.query(r,a.Scope.INLINE))e.prototype.insertAt.call(this,t,r,n);else{var s=this.split(t),o=a.create(r,n);s.parent.insertBefore(o,s)}},t.prototype.update=function(t,r){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,r)},t.blotName="block",t.scope=a.Scope.BLOCK_BLOT,t.tagName="P",t}(o.default);t.default=i},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.formats=function(e){},t.prototype.format=function(t,r){e.prototype.formatAt.call(this,0,this.length(),t,r)},t.prototype.formatAt=function(t,r,n,s){0===t&&r===this.length()?this.format(n,s):e.prototype.formatAt.call(this,t,r,n,s)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(r(19).default);t.default=o},function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(19),a=r(1),i=function(e){function t(t){var r=e.call(this,t)||this;return r.text=r.statics.value(r.domNode),r}return s(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,r,n){null==n?(this.text=this.text.slice(0,t)+r+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,r,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(r){e.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var r=a.create(this.domNode.splitText(e));return this.parent.insertBefore(r,this.next),this.text=this.statics.value(this.domNode),r},t.prototype.update=function(e,t){var r=this;e.some(function(e){return"characterData"===e.type&&e.target===r.domNode})&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=a.Scope.INLINE_BLOT,t}(o.default);t.default=i},function(e,t,r){"use strict";var n=document.createElement("div");if(n.classList.toggle("test-class",!1),n.classList.contains("test-class")){var s=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)==!t?t:s.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var r=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>r.length)&&(t=r.length),t-=e.length;var n=r.indexOf(e,t);return-1!==n&&n===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,r=Object(this),n=r.length>>>0,s=arguments[1],o=0;o<n;o++)if(t=r[o],e.call(s,t,o,r))return t}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(e,t){var r=-1;function n(e,t,l){if(e==t)return e?[[0,e]]:[];(l<0||e.length<l)&&(l=null);var d=o(e,t),u=e.substring(0,d);d=a(e=e.substring(d),t=t.substring(d));var p=e.substring(e.length-d),f=function(e,t){var i;if(!e)return[[1,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,d=l.indexOf(c);if(-1!=d)return i=[[1,l.substring(0,d)],[0,c],[1,l.substring(d+c.length)]],e.length>t.length&&(i[0][0]=i[2][0]=r),i;if(1==c.length)return[[r,e],[1,t]];var u=function(e,t){var r=e.length>t.length?e:t,n=e.length>t.length?t:e;if(r.length<4||2*n.length<r.length)return null;function s(e,t,r){for(var n,s,i,l,c=e.substring(r,r+Math.floor(e.length/4)),d=-1,u="";-1!=(d=t.indexOf(c,d+1));){var p=o(e.substring(r),t.substring(d)),f=a(e.substring(0,r),t.substring(0,d));u.length<f+p&&(u=t.substring(d-f,d)+t.substring(d,d+p),n=e.substring(0,r-f),s=e.substring(r+p),i=t.substring(0,d-f),l=t.substring(d+p))}return 2*u.length>=e.length?[n,s,i,l,u]:null}var i,l,c,d,u,p=s(r,n,Math.ceil(r.length/4)),f=s(r,n,Math.ceil(r.length/2));return p||f?(i=f?p&&p[4].length>f[4].length?p:f:p,e.length>t.length?(l=i[0],c=i[1],d=i[2],u=i[3]):(d=i[0],u=i[1],l=i[2],c=i[3]),[l,c,d,u,i[4]]):null}(e,t);if(u){var p=u[0],f=u[1],m=u[2],h=u[3],g=u[4],x=n(p,m),y=n(f,h);return x.concat([[0,g]],y)}return function(e,t){for(var n=e.length,o=t.length,a=Math.ceil((n+o)/2),i=a,l=2*a,c=new Array(l),d=new Array(l),u=0;u<l;u++)c[u]=-1,d[u]=-1;c[i+1]=0,d[i+1]=0;for(var p=n-o,f=p%2!=0,m=0,h=0,g=0,x=0,y=0;y<a;y++){for(var b=-y+m;b<=y-h;b+=2){for(var v=i+b,j=(_=b==-y||b!=y&&c[v-1]<c[v+1]?c[v+1]:c[v-1]+1)-b;_<n&&j<o&&e.charAt(_)==t.charAt(j);)_++,j++;if(c[v]=_,_>n)h+=2;else if(j>o)m+=2;else if(f&&(k=i+p-b)>=0&&k<l&&-1!=d[k]&&_>=(N=n-d[k]))return s(e,t,_,j)}for(var w=-y+g;w<=y-x;w+=2){for(var N,k=i+w,C=(N=w==-y||w!=y&&d[k-1]<d[k+1]?d[k+1]:d[k-1]+1)-w;N<n&&C<o&&e.charAt(n-N-1)==t.charAt(o-C-1);)N++,C++;if(d[k]=N,N>n)x+=2;else if(C>o)g+=2;else if(!f){var _;if((v=i+p-w)>=0&&v<l&&-1!=c[v]&&(j=i+(_=c[v])-v,_>=(N=n-N)))return s(e,t,_,j)}}}return[[r,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-d),t=t.substring(0,t.length-d));return u&&f.unshift([0,u]),p&&f.push([0,p]),i(f),null!=l&&(f=function(e,t){var n=function(e,t){if(0===t)return[0,e];for(var n=0,s=0;s<e.length;s++){var o=e[s];if(o[0]===r||0===o[0]){var a=n+o[1].length;if(t===a)return[s+1,e];if(t<a){e=e.slice();var i=t-n,l=[o[0],o[1].slice(0,i)],c=[o[0],o[1].slice(i)];return e.splice(s,1,l,c),[s+1,e]}n=a}}throw new Error("cursor_pos is out of bounds!")}(e,t),s=n[1],o=n[0],a=s[o],i=s[o+1];if(null==a)return e;if(0!==a[0])return e;if(null!=i&&a[1]+i[1]===i[1]+a[1])return s.splice(o,2,i,a),c(s,o,2);if(null!=i&&0===i[1].indexOf(a[1])){s.splice(o,2,[i[0],a[1]],[0,a[1]]);var l=i[1].slice(a[1].length);return l.length>0&&s.splice(o+2,0,[i[0],l]),c(s,o,3)}return e}(f,l)),function(e){for(var t=!1,n=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},s=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},o=2;o<e.length;o+=1)0===e[o-2][0]&&s(e[o-2][1])&&e[o-1][0]===r&&n(e[o-1][1])&&1===e[o][0]&&n(e[o][1])&&(t=!0,e[o-1][1]=e[o-2][1].slice(-1)+e[o-1][1],e[o][1]=e[o-2][1].slice(-1)+e[o][1],e[o-2][1]=e[o-2][1].slice(0,-1));if(!t)return e;var a=[];for(o=0;o<e.length;o+=1)e[o][1].length>0&&a.push(e[o]);return a}(f)}function s(e,t,r,s){var o=e.substring(0,r),a=t.substring(0,s),i=e.substring(r),l=t.substring(s),c=n(o,a),d=n(i,l);return c.concat(d)}function o(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,o=0;r<s;)e.substring(o,s)==t.substring(o,s)?o=r=s:n=s,s=Math.floor((n-r)/2+r);return s}function a(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var r=0,n=Math.min(e.length,t.length),s=n,o=0;r<s;)e.substring(e.length-s,e.length-o)==t.substring(t.length-s,t.length-o)?o=r=s:n=s,s=Math.floor((n-r)/2+r);return s}function i(e){e.push([0,""]);for(var t,n=0,s=0,l=0,c="",d="";n<e.length;)switch(e[n][0]){case 1:l++,d+=e[n][1],n++;break;case r:s++,c+=e[n][1],n++;break;case 0:s+l>1?(0!==s&&0!==l&&(0!==(t=o(d,c))&&(n-s-l>0&&0==e[n-s-l-1][0]?e[n-s-l-1][1]+=d.substring(0,t):(e.splice(0,0,[0,d.substring(0,t)]),n++),d=d.substring(t),c=c.substring(t)),0!==(t=a(d,c))&&(e[n][1]=d.substring(d.length-t)+e[n][1],d=d.substring(0,d.length-t),c=c.substring(0,c.length-t))),0===s?e.splice(n-l,s+l,[1,d]):0===l?e.splice(n-s,s+l,[r,c]):e.splice(n-s-l,s+l,[r,c],[1,d]),n=n-s-l+(s?1:0)+(l?1:0)+1):0!==n&&0==e[n-1][0]?(e[n-1][1]+=e[n][1],e.splice(n,1)):n++,l=0,s=0,c="",d=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(n=1;n<e.length-1;)0==e[n-1][0]&&0==e[n+1][0]&&(e[n][1].substring(e[n][1].length-e[n-1][1].length)==e[n-1][1]?(e[n][1]=e[n-1][1]+e[n][1].substring(0,e[n][1].length-e[n-1][1].length),e[n+1][1]=e[n-1][1]+e[n+1][1],e.splice(n-1,1),u=!0):e[n][1].substring(0,e[n+1][1].length)==e[n+1][1]&&(e[n-1][1]+=e[n+1][1],e[n][1]=e[n][1].substring(e[n+1][1].length)+e[n+1][1],e.splice(n+1,1),u=!0)),n++;u&&i(e)}var l=n;function c(e,t,r){for(var n=t+r-1;n>=0&&n>=t-1;n--)if(n+1<e.length){var s=e[n],o=e[n+1];s[0]===o[1]&&e.splice(n,2,[s[0],s[1]+o[1]])}return e}l.INSERT=1,l.DELETE=r,l.EQUAL=0,e.exports=l},function(e,t){function r(e){var t=[];for(var r in e)t.push(r);return t}(e.exports="function"==typeof Object.keys?Object.keys:r).shim=r},function(e,t){var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function n(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function s(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=r?n:s).supported=n,t.unsupported=s},function(e,t){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function s(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,t,s=[];if(0===this._eventsCount)return s;for(t in e=this._events)r.call(e,t)&&s.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e,t){var r=n?n+e:e,s=this._events[r];if(t)return!!s;if(!s)return[];if(s.fn)return[s.fn];for(var o=0,a=s.length,i=new Array(a);o<a;o++)i[o]=s[o].fn;return i},a.prototype.emit=function(e,t,r,s,o,a){var i=n?n+e:e;if(!this._events[i])return!1;var l,c,d=this._events[i],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,s),!0;case 5:return d.fn.call(d.context,t,r,s,o),!0;case 6:return d.fn.call(d.context,t,r,s,o,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var p,f=d.length;for(c=0;c<f;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,s);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];d[c].fn.apply(d[c].context,l)}}return!0},a.prototype.on=function(e,t,r){var s=new o(t,r||this),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],s]:this._events[a].push(s):(this._events[a]=s,this._eventsCount++),this},a.prototype.once=function(e,t,r){var s=new o(t,r||this,!0),a=n?n+e:e;return this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],s]:this._events[a].push(s):(this._events[a]=s,this._eventsCount++),this},a.prototype.removeListener=function(e,t,r,o){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return 0===--this._eventsCount?this._events=new s:delete this._events[a],this;var i=this._events[a];if(i.fn)i.fn!==t||o&&!i.once||r&&i.context!==r||(0===--this._eventsCount?this._events=new s:delete this._events[a]);else{for(var l=0,c=[],d=i.length;l<d;l++)(i[l].fn!==t||o&&!i[l].once||r&&i[l].context!==r)&&c.push(i[l]);c.length?this._events[a]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new s:delete this._events[a]}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new s:delete this._events[t])):(this._events=new s,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=n,a.EventEmitter=a,void 0!==e&&(e.exports=a)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=b(r(3)),i=b(r(2)),l=b(r(0)),c=b(r(5)),d=b(r(10)),u=b(r(9)),p=r(36),f=r(37),m=b(r(13)),h=r(26),g=r(38),x=r(39),y=r(40);function b(e){return e&&e.__esModule?e:{default:e}}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=(0,d.default)("quill:clipboard"),w="__ql-matcher",N=[[Node.TEXT_NODE,I],[Node.TEXT_NODE,q],["br",function(e,t){return A(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,q],[Node.ELEMENT_NODE,z],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,O],[Node.ELEMENT_NODE,function(e,t){var r={},n=e.style||{};return n.fontStyle&&"italic"===E(e).fontStyle&&(r.italic=!0),n.fontWeight&&(E(e).fontWeight.startsWith("bold")||parseInt(E(e).fontWeight)>=700)&&(r.bold=!0),Object.keys(r).length>0&&(t=S(t,r)),parseFloat(n.textIndent||0)>0&&(t=(new i.default).insert("\t").concat(t)),t}],["li",function(e,t){var r=l.default.query(e);if(null==r||"list-item"!==r.blotName||!A(t,"\n"))return t;for(var n=-1,s=e.parentNode;!s.classList.contains("ql-clipboard");)"list"===(l.default.query(s)||{}).blotName&&(n+=1),s=s.parentNode;return n<=0?t:t.compose((new i.default).retain(t.length()-1).retain(1,{indent:n}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new i.default}]],k=[p.AlignAttribute,g.DirectionAttribute].reduce(function(e,t){return e[t.keyName]=t,e},{}),C=[p.AlignStyle,f.BackgroundStyle,h.ColorStyle,g.DirectionStyle,x.FontStyle,y.SizeStyle].reduce(function(e,t){return e[t.keyName]=t,e},{}),_=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.root.addEventListener("paste",n.onPaste.bind(n)),n.container=n.quill.addContainer("ql-clipboard"),n.container.setAttribute("contenteditable",!0),n.container.setAttribute("tabindex",-1),n.matchers=[],N.concat(n.options.matchers).forEach(function(e){var t=s(e,2),o=t[0],a=t[1];(r.matchVisual||a!==D)&&n.addMatcher(o,a)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"==typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[m.default.blotName]){var r=this.container.innerText;return this.container.innerHTML="",(new i.default).insert(r,v({},m.default.blotName,t[m.default.blotName]))}var n=this.prepareMatching(),o=s(n,2),a=o[0],l=o[1],c=T(this.container,a,l);return A(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new i.default).retain(c.length()-1).delete(1))),j.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"==typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var n=this.convert(t);this.quill.updateContents((new i.default).retain(e).concat(n),r),this.quill.setSelection(e+n.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var r=this.quill.getSelection(),n=(new i.default).retain(r.index),s=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){n=n.concat(t.convert()).delete(r.length),t.quill.updateContents(n,c.default.sources.USER),t.quill.setSelection(n.length()-r.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=s,t.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],r=[];return this.matchers.forEach(function(n){var o=s(n,2),a=o[0],i=o[1];switch(a){case Node.TEXT_NODE:r.push(i);break;case Node.ELEMENT_NODE:t.push(i);break;default:[].forEach.call(e.container.querySelectorAll(a),function(e){e[w]=e[w]||[],e[w].push(i)})}}),[t,r]}}]),t}(u.default);function S(e,t,r){return"object"===(void 0===t?"undefined":n(t))?Object.keys(t).reduce(function(e,r){return S(e,r,t[r])},e):e.reduce(function(e,n){return n.attributes&&n.attributes[t]?e.push(n):e.insert(n.insert,(0,a.default)({},v({},t,r),n.attributes))},new i.default)}function E(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function A(e,t){for(var r="",n=e.ops.length-1;n>=0&&r.length<t.length;--n){var s=e.ops[n];if("string"!=typeof s.insert)break;r=s.insert+r}return r.slice(-1*t.length)===t}function M(e){if(0===e.childNodes.length)return!1;var t=E(e);return["block","list-item"].indexOf(t.display)>-1}function T(e,t,r){return e.nodeType===e.TEXT_NODE?r.reduce(function(t,r){return r(e,t)},new i.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],function(n,s){var o=T(s,t,r);return s.nodeType===e.ELEMENT_NODE&&(o=t.reduce(function(e,t){return t(s,e)},o),o=(s[w]||[]).reduce(function(e,t){return t(s,e)},o)),n.concat(o)},new i.default):new i.default}function P(e,t,r){return S(r,e,!0)}function O(e,t){var r=l.default.Attributor.Attribute.keys(e),n=l.default.Attributor.Class.keys(e),s=l.default.Attributor.Style.keys(e),o={};return r.concat(n).concat(s).forEach(function(t){var r=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=r&&(o[r.attrName]=r.value(e),o[r.attrName])||(null==(r=k[t])||r.attrName!==t&&r.keyName!==t||(o[r.attrName]=r.value(e)||void 0),null==(r=C[t])||r.attrName!==t&&r.keyName!==t||(r=C[t],o[r.attrName]=r.value(e)||void 0))}),Object.keys(o).length>0&&(t=S(t,o)),t}function z(e,t){var r=l.default.query(e);if(null==r)return t;if(r.prototype instanceof l.default.Embed){var n={},s=r.value(e);null!=s&&(n[r.blotName]=s,t=(new i.default).insert(n,r.formats(e)))}else"function"==typeof r.formats&&(t=S(t,r.blotName,r.formats(e)));return t}function q(e,t){return A(t,"\n")||(M(e)||t.length()>0&&e.nextSibling&&M(e.nextSibling))&&t.insert("\n"),t}function D(e,t){if(M(e)&&null!=e.nextElementSibling&&!A(t,"\n\n")){var r=e.offsetHeight+parseFloat(E(e).marginTop)+parseFloat(E(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*r&&t.insert("\n")}return t}function I(e,t){var r=e.data;if("O:P"===e.parentNode.tagName)return t.insert(r.trim());if(0===r.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!E(e.parentNode).whiteSpace.startsWith("pre")){var n=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&M(e.parentNode)||null!=e.previousSibling&&M(e.previousSibling))&&(r=r.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&M(e.parentNode)||null!=e.nextSibling&&M(e.nextSibling))&&(r=r.replace(/\s+$/,n.bind(n,!1)))}return t.insert(r)}_.DEFAULTS={matchers:[],matchVisual:!0},t.default=_,t.matchAttributor=O,t.matchBlot=z,t.matchNewline=q,t.matchSpacing=D,t.matchText=I},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"optimize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);a.blotName="bold",a.tagName=["STRONG","B"],t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=d(r(2)),a=d(r(0)),i=d(r(5)),l=d(r(10)),c=d(r(9));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(0,l.default)("quill:toolbar"),f=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s,o=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(Array.isArray(o.options.container)){var a=document.createElement("div");h(a,o.options.container),e.container.parentNode.insertBefore(a,e.container),o.container=a}else"string"==typeof o.options.container?o.container=document.querySelector(o.options.container):o.container=o.options.container;return o.container instanceof HTMLElement?(o.container.classList.add("ql-toolbar"),o.controls=[],o.handlers={},Object.keys(o.options.handlers).forEach(function(e){o.addHandler(e,o.options.handlers[e])}),[].forEach.call(o.container.querySelectorAll("button, select"),function(e){o.attach(e)}),o.quill.on(i.default.events.EDITOR_CHANGE,function(e,t){e===i.default.events.SELECTION_CHANGE&&o.update(t)}),o.quill.on(i.default.events.SCROLL_OPTIMIZE,function(){var e=o.quill.selection.getRange(),t=n(e,1)[0];o.update(t)}),o):(s=p.error("Container required for toolbar",o.options),u(o,s))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,r=[].find.call(e.classList,function(e){return 0===e.indexOf("ql-")});if(r){if(r=r.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[r]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[r])return void p.warn("ignoring attaching to disabled format",r,e);if(null==a.default.query(r))return void p.warn("ignoring attaching to nonexistent format",r,e)}var s="SELECT"===e.tagName?"change":"click";e.addEventListener(s,function(s){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),s.preventDefault();t.quill.focus();var d=t.quill.selection.getRange(),u=n(d,1)[0];if(null!=t.handlers[r])t.handlers[r].call(t,l);else if(a.default.query(r).prototype instanceof a.default.Embed){if(!(l=prompt("Enter "+r)))return;t.quill.updateContents((new o.default).retain(u.index).delete(u.length).insert(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},r,l)),i.default.sources.USER)}else t.quill.format(r,l,i.default.sources.USER);t.update(u)}),this.controls.push([r,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach(function(r){var s=n(r,2),o=s[0],a=s[1];if("SELECT"===a.tagName){var i=void 0;if(null==e)i=null;else if(null==t[o])i=a.querySelector("option[selected]");else if(!Array.isArray(t[o])){var l=t[o];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),i=a.querySelector('option[value="'+l+'"]')}null==i?(a.value="",a.selectedIndex=-1):i.selected=!0}else if(null==e)a.classList.remove("ql-active");else if(a.hasAttribute("value")){var c=t[o]===a.getAttribute("value")||null!=t[o]&&t[o].toString()===a.getAttribute("value")||null==t[o]&&!a.getAttribute("value");a.classList.toggle("ql-active",c)}else a.classList.toggle("ql-active",null!=t[o])})}}]),t}(c.default);function m(e,t,r){var n=document.createElement("button");n.setAttribute("type","button"),n.classList.add("ql-"+t),null!=r&&(n.value=r),e.appendChild(n)}function h(e,t){Array.isArray(t[0])||(t=[t]),t.forEach(function(t){var r=document.createElement("span");r.classList.add("ql-formats"),t.forEach(function(e){if("string"==typeof e)m(r,e);else{var t=Object.keys(e)[0],n=e[t];Array.isArray(n)?function(e,t,r){var n=document.createElement("select");n.classList.add("ql-"+t),r.forEach(function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),n.appendChild(t)}),e.appendChild(n)}(r,t,n):m(r,t,n)}}),e.appendChild(r)})}f.DEFAULTS={},f.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var r=this.quill.getFormat();Object.keys(r).forEach(function(t){null!=a.default.query(t,a.default.Scope.INLINE)&&e.quill.format(t,!1)})}else this.quill.removeFormat(t,i.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",i.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,i.default.sources.USER),this.quill.format("direction",e,i.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t),n=parseInt(r.indent||0);if("+1"===e||"-1"===e){var s="+1"===e?1:-1;"rtl"===r.direction&&(s*=-1),this.quill.format("indent",n+s,i.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,i.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),r=this.quill.getFormat(t);"check"===e?"checked"===r.list||"unchecked"===r.list?this.quill.format("list",!1,i.default.sources.USER):this.quill.format("list","unchecked",i.default.sources.USER):this.quill.format("list",e,i.default.sources.USER)}}},t.default=f,t.addControls=h},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.label.innerHTML=r,n.container.classList.add("ql-color-picker"),[].slice.call(n.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(e){e.classList.add("ql-primary")}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"buildItem",value:function(e){var r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return r.style.backgroundColor=e.getAttribute("value")||"",r}},{key:"selectItem",value:function(e,r){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r);var n=this.label.querySelector(".ql-color-label"),s=e&&e.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=s:n.style.fill=s)}}]),t}(((n=r(28))&&n.__esModule?n:{default:n}).default);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.container.classList.add("ql-icon-picker"),[].forEach.call(n.container.querySelectorAll(".ql-picker-item"),function(e){e.innerHTML=r[e.getAttribute("data-value")||""]}),n.defaultItem=n.container.querySelector(".ql-selected"),n.selectItem(n.defaultItem),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"selectItem",value:function(e,r){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,r),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((n=r(28))&&n.__esModule?n:{default:n}).default);t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=r||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){n.root.style.marginTop=-1*n.quill.root.scrollTop+"px"}),this.hide()}return n(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,r=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=r+"px",this.root.classList.remove("ql-flip");var n=this.boundsContainer.getBoundingClientRect(),s=this.root.getBoundingClientRect(),o=0;if(s.right>n.right&&(o=n.right-s.right,this.root.style.left=t+o+"px"),s.left<n.left&&(o=n.left-s.left,this.root.style.left=t+o+"px"),s.bottom>n.bottom){var a=s.bottom-s.top,i=e.bottom-e.top+a;this.root.style.top=r-i+"px",this.root.classList.add("ql-flip")}return o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=p(r(3)),a=p(r(8)),i=r(43),l=p(i),c=p(r(27)),d=r(15),u=p(r(41));function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],x=function(e){function t(e,r){f(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=g);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-snow"),n}return h(t,e),s(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default),this.tooltip=new y(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(t,r){e.handlers.link.call(e,!r.format.link)})}}]),t}(l.default);x.DEFAULTS=(0,o.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var r=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(r)&&0!==r.indexOf("mailto:")&&(r="mailto:"+r),this.quill.theme.tooltip.edit("link",r)}else this.quill.format("link",!1)}}}}});var y=function(e){function t(e,r){f(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.preview=n.root.querySelector("a.ql-preview"),n}return h(t,e),s(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(t){if(null!=e.linkRange){var r=e.linkRange;e.restoreFocus(),e.quill.formatText(r,"link",!1,a.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()}),this.quill.on(a.default.events.SELECTION_CHANGE,function(t,r,n){if(null!=t){if(0===t.length&&n===a.default.sources.USER){var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],_n=!0,n=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(_n=(o=a.next()).done)&&(r.push(o.value),!t||r.length!==t);_n=!0);}catch(e){n=!0,s=e}finally{try{!_n&&a.return&&a.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e.quill.scroll.descendant(c.default,t.index),2),o=s[0],i=s[1];if(null!=o){e.linkRange=new d.Range(t.index-i,o.length());var l=c.default.formats(o.domNode);return e.preview.textContent=l,e.preview.setAttribute("href",l),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}})}},{key:"show",value:function(){n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(i.BaseTooltip);y.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=x},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=q(r(29)),s=r(36),o=r(38),a=r(64),i=q(r(65)),l=q(r(66)),c=r(67),d=q(c),u=r(37),p=r(26),f=r(39),m=r(40),h=q(r(56)),g=q(r(68)),x=q(r(27)),y=q(r(69)),b=q(r(70)),v=q(r(71)),j=q(r(72)),w=q(r(73)),N=r(13),k=q(N),C=q(r(74)),_=q(r(75)),S=q(r(57)),E=q(r(41)),A=q(r(28)),M=q(r(59)),T=q(r(60)),P=q(r(61)),O=q(r(108)),z=q(r(62));function q(e){return e&&e.__esModule?e:{default:e}}n.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":s.AlignClass,"attributors/class/background":u.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":m.SizeClass,"attributors/style/align":s.AlignStyle,"attributors/style/background":u.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":m.SizeStyle},!0),n.default.register({"formats/align":s.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":a.IndentClass,"formats/background":u.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":f.FontClass,"formats/size":m.SizeClass,"formats/blockquote":i.default,"formats/code-block":k.default,"formats/header":l.default,"formats/list":d.default,"formats/bold":h.default,"formats/code":N.Code,"formats/italic":g.default,"formats/link":x.default,"formats/script":y.default,"formats/strike":b.default,"formats/underline":v.default,"formats/image":j.default,"formats/video":w.default,"formats/list/item":c.ListItem,"modules/formula":C.default,"modules/syntax":_.default,"modules/toolbar":S.default,"themes/bubble":O.default,"themes/snow":z.default,"ui/icons":E.default,"ui/picker":A.default,"ui/icon-picker":T.default,"ui/color-picker":M.default,"ui/tooltip":P.default},!0),t.default=n.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=(n=r(0))&&n.__esModule?n:{default:n},i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"add",value:function(e,r){if("+1"===r||"-1"===r){var n=this.value(e)||0;r="+1"===r?n+1:n-1}return 0===r?(this.remove(e),!0):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r)}},{key:"canAdd",value:function(e,r){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,r)||o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(r))}},{key:"value",value:function(e){return parseInt(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(a.default.Attributor.Class),l=new i("indent","ql-indent",{scope:a.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(4))&&n.__esModule?n:{default:n}).default);s.blotName="blockquote",s.tagName="blockquote",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((n=r(4))&&n.__esModule?n:{default:n}).default);o.blotName="header",o.tagName=["H1","H2","H3","H4","H5","H6"],t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=l(r(0)),a=l(r(4)),i=l(r(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"format",value:function(e,r){e!==f.blotName||r?s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r):this.replaceWith(o.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,r){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,r),this):(this.parent.unwrap(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,r))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:s(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(a.default);p.blotName="list-item",p.tagName="LI";var f=function(e){function t(e){c(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=function(t){if(t.target.parentNode===e){var n=r.statics.formats(e),s=o.default.find(t.target);"checked"===n?s.format("list","unchecked"):"unchecked"===n&&s.format("list","checked")}};return e.addEventListener("touchstart",n),e.addEventListener("mousedown",n),r}return u(t,e),n(t,null,[{key:"create",value:function(e){var r="ordered"===e?"OL":"UL",n=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,r);return"checked"!==e&&"unchecked"!==e||n.setAttribute("data-checked","checked"===e),n}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),n(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,r=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e;var e,t,r}},{key:"insertBefore",value:function(e,r){if(e instanceof p)s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,r);else{var n=null==r?this.length():r.offset(this),o=this.split(n);o.parent.insertBefore(e,o)}}},{key:"optimize",value:function(e){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var r=this.next;null!=r&&r.prev===this&&r.statics.blotName===this.statics.blotName&&r.domNode.tagName===this.domNode.tagName&&r.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(r.moveChildren(this),r.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var r=o.default.create(this.statics.defaultChild);e.moveChildren(r),this.appendChild(r)}s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(i.default);f.blotName="list",f.scope=o.default.Scope.BLOCK_BLOT,f.tagName=["OL","UL"],f.defaultChild="list-item",f.allowedChildren=[p],t.ListItem=p,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(56))&&n.__esModule?n:{default:n}).default);s.blotName="italic",s.tagName=["EM","I"],t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);a.blotName="script",a.tagName=["SUB","SUP"],t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);s.blotName="strike",s.tagName="S",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((n=r(6))&&n.__esModule?n:{default:n}).default);s.blotName="underline",s.tagName="U",t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=(n=r(0))&&n.__esModule?n:{default:n},i=r(27),l=["alt","height","width"],c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){l.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return l.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,i.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(a.default.Embed);c.blotName="image",c.tagName="IMG",t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},a=r(4),i=(n=r(27))&&n.__esModule?n:{default:n},l=["height","width"],c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"format",value:function(e,r){l.indexOf(e)>-1?r?this.domNode.setAttribute(e,r):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,r)}}],[{key:"create",value:function(e){var r=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen",!0),r.setAttribute("src",this.sanitize(e)),r}},{key:"formats",value:function(e){return l.reduce(function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t},{})}},{key:"sanitize",value:function(e){return i.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(a.BlockEmbed);c.blotName="video",c.className="ql-video",c.tagName="IFRAME",t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=l(r(35)),a=l(r(5)),i=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,null,[{key:"create",value:function(e){var r=s(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"==typeof e&&(window.katex.render(e,r,{throwOnError:!1,errorColor:"#f00"}),r.setAttribute("data-value",e)),r}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(o.default);p.blotName="formula",p.className="ql-formula",p.tagName="SPAN";var f=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return u(t,e),n(t,null,[{key:"register",value:function(){a.default.register(p,!0)}}]),t}(i.default);t.FormulaBlot=p,t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},o=l(r(0)),a=l(r(5)),i=l(r(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),n(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(r(13)).default);p.className="ql-syntax";var f=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),m=function(e){function t(e,r){c(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if("function"!=typeof n.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var s=null;return n.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(s),s=setTimeout(function(){n.highlight(),s=null},n.options.interval)}),n.highlight(),n}return u(t,e),n(t,null,[{key:"register",value:function(){a.default.register(f,!0),a.default.register(p,!0)}}]),n(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(a.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(p).forEach(function(t){t.highlight(e.options.highlight)}),this.quill.update(a.default.sources.SILENT),null!=t&&this.quill.setSelection(t,a.default.sources.SILENT)}}}]),t}(i.default);m.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=p,t.CodeToken=f,t.default=m},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var n=function e(t,r,n){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,r);if(void 0===s){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in s)return s.value;var a=s.get;return void 0!==a?a.call(n):void 0},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(r(3)),a=u(r(8)),i=r(43),l=u(i),c=r(15),d=u(r(41));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],g=function(e){function t(e,r){p(this,t),null!=r.modules.toolbar&&null==r.modules.toolbar.container&&(r.modules.toolbar.container=h);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.container.classList.add("ql-bubble"),n}return m(t,e),s(t,[{key:"extendToolbar",value:function(e){this.tooltip=new x(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default)}}]),t}(l.default);g.DEFAULTS=(0,o.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var x=function(e){function t(e,r){p(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.quill.on(a.default.events.EDITOR_CHANGE,function(e,t,r,s){if(e===a.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&s===a.default.sources.USER){n.show(),n.root.style.left="0px",n.root.style.width="",n.root.style.width=n.root.offsetWidth+"px";var o=n.quill.getLines(t.index,t.length);if(1===o.length)n.position(n.quill.getBounds(t));else{var i=o[o.length-1],l=n.quill.getIndex(i),d=Math.min(i.length()-1,t.index+t.length-l),u=n.quill.getBounds(new c.Range(l,d));n.position(u)}}else document.activeElement!==n.textbox&&n.quill.hasFocus()&&n.hide()}),n}return m(t,e),s(t,[{key:"listen",value:function(){var e=this;n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){e.root.classList.remove("ql-editing")}),this.quill.on(a.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var r=n(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),s=this.root.querySelector(".ql-tooltip-arrow");if(s.style.marginLeft="",0===r)return r;s.style.marginLeft=-1*r-s.offsetWidth/2+"px"}}]),t}(i.BaseTooltip);x.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=x,t.default=g},function(e,t,r){e.exports=r(63)}]).default},e.exports=t()},1609:e=>{"use strict";e.exports=window.React},1663:(e,t,r)=>{"use strict";r.d(t,{By:()=>n,hS:()=>i});const n={NETWORK:"NETWORK_ERROR",API:"API_ERROR",VALIDATION:"VALIDATION_ERROR",AUTH:"AUTH_ERROR",NOT_FOUND:"NOT_FOUND",PERMISSION:"PERMISSION_ERROR",TIMEOUT:"TIMEOUT_ERROR",UNKNOWN:"UNKNOWN_ERROR"},s=e=>{const t=e.message?.toLowerCase()||"";return t.includes("network")||t.includes("fetch")?n.NETWORK:t.includes("404")?n.NOT_FOUND:t.includes("401")||t.includes("unauthorized")?n.AUTH:t.includes("403")||t.includes("forbidden")?n.PERMISSION:t.includes("validation")?n.VALIDATION:t.includes("timeout")?n.TIMEOUT:t.includes("api error")?n.API:n.UNKNOWN},o=(e,t)=>{const r={[n.NETWORK]:"Network error. Please check your connection.",[n.API]:"Server error. Please try again later.",[n.VALIDATION]:"Invalid data provided.",[n.AUTH]:"Authentication required. Please log in.",[n.NOT_FOUND]:"Resource not found.",[n.PERMISSION]:"You do not have permission to perform this action.",[n.TIMEOUT]:"Request timeout. Please try again.",[n.UNKNOWN]:"An unexpected error occurred."};return r[e]||r[n.UNKNOWN]},a=(e,t={})=>{const r=((e,t={})=>{const r=s(e);return{type:r,message:e.message,userMessage:o(r),originalError:e,context:t,timestamp:(new Date).toISOString(),stack:void 0}})(e,t);console.error("ðŸ”´ Error:",{type:r.type,message:r.message,context:r.context,timestamp:r.timestamp})},i=async(e,t={})=>{const{maxRetries:r=3,retryDelay:o=1e3,shouldRetry:i=e=>{const t=s(e);return t===n.NETWORK||t===n.TIMEOUT}}=t;let l;for(let t=0;t<=r;t++)try{return await e()}catch(e){if(l=e,t===r)break;if(!i(e))throw e;console.warn(`âš ï¸ Retry attempt ${t+1}/${r}`,e.message),await new Promise(e=>setTimeout(e,o*(t+1)))}throw a(l,{maxRetries:r,apiCall:e.name}),l}},1747:e=>{"use strict";var t=Object.prototype.hasOwnProperty,r="~";function n(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,n,o,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var i=new s(n,o||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],i]:e._events[l].push(i):(e._events[l]=i,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function i(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),i.prototype.eventNames=function(){var e,n,s=[];if(0===this._eventsCount)return s;for(n in e=this._events)t.call(e,n)&&s.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},i.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,o=n.length,a=new Array(o);s<o;s++)a[s]=n[s].fn;return a},i.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},i.prototype.emit=function(e,t,n,s,o,a){var i=r?r+e:e;if(!this._events[i])return!1;var l,c,d=this._events[i],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,n),!0;case 4:return d.fn.call(d.context,t,n,s),!0;case 5:return d.fn.call(d.context,t,n,s,o),!0;case 6:return d.fn.call(d.context,t,n,s,o,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var p,f=d.length;for(c=0;c<f;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,n);break;case 4:d[c].fn.call(d[c].context,t,n,s);break;default:if(!l)for(p=1,l=new Array(u-1);p<u;p++)l[p-1]=arguments[p];d[c].fn.apply(d[c].context,l)}}return!0},i.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},i.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},i.prototype.removeListener=function(e,t,n,s){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var i=this._events[o];if(i.fn)i.fn!==t||s&&!i.once||n&&i.context!==n||a(this,o);else{for(var l=0,c=[],d=i.length;l<d;l++)(i[l].fn!==t||s&&!i[l].once||n&&i[l].context!==n)&&c.push(i[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},i.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=r,i.EventEmitter=i,e.exports=i},1769:(e,t,r)=>{var n=r(6449),s=r(8586),o=r(1802),a=r(3222);e.exports=function(e,t){return n(e)?e:s(e,t)?[e]:o(a(e))}},1770:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,k:()=>o});var n=r(1609),s=r(5236);const o=(e={})=>{const{role:t=null,courseId:o=null,enrollmentStatus:a=null,search:i="",autoFetch:l=!0,initialFilters:c={},debounceMs:d=500}=e,[u,p]=(0,n.useState)([]),[f,m]=(0,n.useState)(!0),[h,g]=(0,n.useState)(!1),[x,y]=(0,n.useState)(null),[b,v]=(0,n.useState)({currentPage:1,totalPages:1,total:0,perPage:20}),[j,w]=(0,n.useState)(!1),[N,k]=(0,n.useState)({search:i||"",role:t,courseId:o,enrollmentStatus:a,orderby:"registered_date",order:"desc",...c}),C=(0,n.useRef)(N),_=(0,n.useRef)(e),S=(0,n.useRef)(null),E=(0,n.useRef)(!0),A=(0,n.useRef)("");(0,n.useEffect)(()=>{C.current=N},[N]),(0,n.useEffect)(()=>{_.current=e},[e]),(0,n.useEffect)(()=>()=>{E.current=!1,S.current&&clearTimeout(S.current)},[]);const M=async(e,t={})=>{try{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":(0,s.getApiConfig)().nonce},credentials:"same-origin",...t},n=await fetch(e,r);if(!n.ok){const e=await n.text();throw new Error(`API Error ${n.status}: ${n.statusText} - ${e}`)}return n}catch(e){throw console.error("API Request Error:",e),e}},T=(0,n.useCallback)(async(e={})=>{const{reset:t=!1,page:r=1,additionalFilters:n={}}=e;try{t&&(m(!0),y(null));const e=(0,s.getApiConfig)(),o=C.current;console.log("ðŸ” Current API Config:",e),console.log("ðŸ” Current Filters:",o);const a=new URLSearchParams({page:r.toString(),per_page:"20",orderby:o.orderBy||"registered_date",order:o.order||"desc",context:"edit"});o.search&&a.append("search",o.search),o.role&&a.append("roles",o.role),Object.entries(n).forEach(([e,t])=>{null!=t&&""!==t&&a.append(e,t)});const i=`${e.endpoints.users}?${a}`,l=`${i}-${r}-${t}`;if(l===A.current)return void console.log("ðŸš« Duplicate user request prevented:",i);A.current=l,console.log("ðŸš€ Fetching users from URL:",i);const c=await M(i);if(!c.ok)throw new Error(`HTTP ${c.status}: ${c.statusText}`);const d=await c.json();if(console.log("ðŸ“¥ Raw user data received:",d),!E.current)return;const u=c.headers.get("X-WP-Total"),f=c.headers.get("X-WP-TotalPages");console.log("ðŸ“Š Pagination headers:",{totalHeader:u,totalPagesHeader:f});const h={currentPage:r,totalPages:f?parseInt(f,10):1,total:u?parseInt(u,10):d.length,perPage:20};v(h),w(r<h.totalPages);const g=d.map(e=>({id:e.id,name:e.name||`${e.first_name} ${e.last_name}`.trim()||e.username,username:e.username,email:e.email,roles:e.roles||["subscriber"],avatar_urls:e.avatar_urls||{},date_registered:e.registered_date||e.registered||(new Date).toISOString(),first_name:e.first_name||"",last_name:e.last_name||"",description:e.description||"",url:e.url||"",enrollmentData:{isEnrolled:!1,progress:0,enrollmentDate:null,lastActivity:null}}));let x=g;o.courseId&&(x=await P(g,o.courseId)),p(t||1===r?x:e=>{const t=new Set(e.map(e=>e.id)),r=x.filter(e=>!t.has(e.id));return[...e,...r]}),console.log("âœ… Users processed and loaded:",x.length)}catch(e){console.error("âŒ Error fetching users:",e),E.current&&(y(e.message||"Failed to fetch users"),(t||1===r)&&(p([]),v({currentPage:1,totalPages:1,total:0,perPage:20}),w(!1)))}finally{E.current&&m(!1)}},[]),P=async(e,t)=>{console.log("ðŸ”„ Enriching users with enrollment data for course:",t);try{const{getUserEnrollments:n}=await Promise.resolve().then(r.bind(r,4953)),s=e.map(async e=>{try{const r=await n(e.id),s=(Array.isArray(r)?r:[]).find(e=>parseInt(e.course_id)===parseInt(t));return{...e,enrollmentData:{isEnrolled:!!s,enrollmentDate:s?.enrollment_date||null,progress:s?.progress||0,lastActivity:s?.last_activity||null}}}catch(t){return console.error(`âŒ Error fetching enrollments for user ${e.id}:`,t),{...e,enrollmentData:{isEnrolled:!1,enrollmentDate:null,progress:0,lastActivity:null}}}}),o=await Promise.all(s);return console.log("âœ… Users enriched with enrollment data:",o.length),o}catch(t){return console.error("âŒ Error enriching users with enrollment data:",t),e.map(e=>({...e,enrollmentData:{isEnrolled:!1,enrollmentDate:null,progress:0,lastActivity:null}}))}},O=(0,n.useCallback)((e={})=>{S.current&&clearTimeout(S.current),S.current=setTimeout(()=>{E.current&&T({reset:!0,...e})},d)},[T,d]);(0,n.useEffect)(()=>{l&&(console.log("ðŸŽ¯ Initial user load"),T({reset:!0}))},[]),(0,n.useEffect)(()=>{k(e=>{const r={...e,search:i||"",role:t,courseId:o,enrollmentStatus:a};return JSON.stringify(r)!==JSON.stringify(e)?r:e})},[i,t,o,a]),(0,n.useEffect)(()=>{l&&(console.log("ðŸ”„ User filters changed, debouncing fetch..."),O())},[N,O,l]);const z=(0,n.useCallback)(async(e,t)=>{try{g(!0),y(null);const{enrollUserInCourse:n}=await Promise.resolve().then(r.bind(r,4953));console.log("ðŸ“ Enrolling user in course:",{userId:e,courseId:t});const s=await n(parseInt(e),parseInt(t));if(s&&!1===s.success)throw new Error(s.error||"Failed to enroll user");return p(t=>t.map(t=>t.id===e?{...t,enrollmentData:{...t.enrollmentData,isEnrolled:!0,enrollmentDate:s.data?.enrollment_date||(new Date).toISOString(),progress:s.data?.progress||0}}:t)),console.log("âœ… User enrolled successfully"),s}catch(e){throw console.error("âŒ Error enrolling user:",e),y(e.message||"Failed to enroll user"),e}finally{g(!1)}},[]),q=(0,n.useCallback)(async(e,t)=>{try{g(!0),y(null);const{unenrollUserFromCourse:n}=await Promise.resolve().then(r.bind(r,4953));console.log("âŒ Unenrolling user from course:",{userId:e,courseId:t});const s=await n(parseInt(e),parseInt(t));if(s&&!1===s.success)throw new Error(s.error||"Failed to unenroll user");return p(t=>t.map(t=>t.id===e?{...t,enrollmentData:{...t.enrollmentData,isEnrolled:!1,enrollmentDate:null,progress:0}}:t)),console.log("âœ… User unenrolled successfully"),s}catch(e){throw console.error("âŒ Error unenrolling user:",e),y(e.message||"Failed to unenroll user"),e}finally{g(!1)}},[]),D=(0,n.useCallback)(async e=>{try{g(!0),y(null);const t=(0,s.getApiConfig)();let r,n;console.log("ðŸ‘¤ Fetching single user:",e);try{if(r=await M(`${t.endpoints.users}/${e}?context=edit`),!r.ok&&(401===r.status||403===r.status))throw console.warn("âš ï¸ Edit context failed, trying without context..."),new Error("Context edit not allowed");n=await r.json(),console.log("ðŸ“¥ Single user data received (edit context):",n)}catch(s){if(console.warn("âš ï¸ Falling back to regular context:",s.message),r=await M(`${t.endpoints.users}/${e}`),!r.ok)throw 404===r.status?new Error(`User with ID ${e} not found`):401===r.status?new Error(`Unauthorized access to user ${e}`):new Error(`HTTP ${r.status}: ${r.statusText}`);n=await r.json(),console.log("ðŸ“¥ Single user data received (regular context):",n)}console.log("ðŸ“¥ Single user data received:",n);const o={id:n.id,name:n.name||`${n.first_name} ${n.last_name}`.trim()||n.username,username:n.username,email:n.email,roles:n.roles||["subscriber"],avatar_urls:n.avatar_urls||{},date_registered:n.registered_date||n.registered||(new Date).toISOString(),first_name:n.first_name||"",last_name:n.last_name||"",description:n.description||"",url:n.url||"",nickname:n.nickname||"",meta:n.meta||{},enrollmentData:{isEnrolled:!1,progress:Math.floor(100*Math.random()),enrollmentDate:null,lastActivity:Math.random()>.5?new Date(Date.now()-7*Math.random()*24*60*60*1e3).toISOString():null}};return console.log("âœ… User processed:",o),o}catch(e){throw console.error("âŒ Error fetching single user:",e),y(e.message||"Failed to fetch user"),e}finally{g(!1)}},[]),I=(0,n.useCallback)(async(e,t)=>{try{g(!0),y(null);const r=(0,s.getApiConfig)();console.log("ðŸ‘¤ Updating user role:",{userId:e,newRole:t});const n=await M(`${r.endpoints.users}/${e}`,{method:"POST",body:JSON.stringify({roles:[t]})}),o=await n.json();return p(t=>t.map(t=>t.id===e?{...t,roles:o.roles}:t)),console.log("âœ… User role updated successfully"),o}catch(e){throw console.error("âŒ Error updating user role:",e),y(e.message||"Failed to update user role"),e}finally{g(!1)}},[]),L=(0,n.useCallback)(()=>{j&&!f&&T({page:b.currentPage+1,reset:!1})},[j,f,b.currentPage,T]),R=(0,n.useCallback)(()=>{A.current="",T({reset:!0})},[T]),$=(0,n.useMemo)(()=>({totalUsers:u.length,usersByRole:u.reduce((e,t)=>{const r=t.roles?.[0]||"subscriber";return e[r]=(e[r]||0)+1,e},{}),enrolledUsers:u.filter(e=>e.enrollmentData?.isEnrolled).length,unenrolledUsers:u.filter(e=>!e.enrollmentData?.isEnrolled).length,activeUsers:u.filter(e=>{if(!e.enrollmentData?.lastActivity)return!1;const t=new Date;return t.setDate(t.getDate()-30),new Date(e.enrollmentData.lastActivity)>t}).length,averageProgress:u.length>0?Math.round(u.reduce((e,t)=>e+(t.enrollmentData?.progress||0),0)/u.length):0,recentRegistrations:u.filter(e=>{const t=new Date;return t.setDate(t.getDate()-7),new Date(e.date_registered||e.registered)>t}).length}),[u]),B=(0,n.useCallback)(async(e,t="all")=>{try{g(!0),y(null),console.log("ðŸ“Š Fetching user progress:",{userId:e,timeframe:t});const r={overall:{averageProgress:50+Math.floor(50*Math.random()),completedCourses:Math.floor(8*Math.random()),totalCourses:5+Math.floor(10*Math.random()),totalTimeSpent:300+Math.floor(2e3*Math.random()),lessonsCompleted:15+Math.floor(50*Math.random()),totalLessons:30+Math.floor(70*Math.random()),certificatesEarned:Math.floor(5*Math.random())},courses:[{id:1,title:"WordPress Development Fundamentals",progress:70+Math.floor(30*Math.random()),timeSpent:200+Math.floor(300*Math.random()),lessonsCompleted:8+Math.floor(7*Math.random()),totalLessons:15,lastActivity:new Date(Date.now()-24*Math.floor(7*Math.random())*60*60*1e3).toISOString(),completed:Math.random()>.4},{id:2,title:"Advanced PHP Patterns",progress:40+Math.floor(60*Math.random()),timeSpent:150+Math.floor(400*Math.random()),lessonsCompleted:5+Math.floor(10*Math.random()),totalLessons:20,lastActivity:new Date(Date.now()-24*Math.floor(14*Math.random())*60*60*1e3).toISOString(),completed:Math.random()>.6},{id:3,title:"React for WordPress",progress:30+Math.floor(70*Math.random()),timeSpent:100+Math.floor(200*Math.random()),lessonsCompleted:3+Math.floor(12*Math.random()),totalLessons:18,lastActivity:new Date(Date.now()-24*Math.floor(21*Math.random())*60*60*1e3).toISOString(),completed:Math.random()>.7}],achievements:[{id:1,title:"First Steps",description:"Completed your first lesson",earnedDate:new Date(Date.now()-24*Math.floor(60*Math.random())*60*60*1e3).toISOString(),icon:"trophy"},{id:2,title:"Dedicated Learner",description:"Studied for 5 consecutive days",earnedDate:new Date(Date.now()-24*Math.floor(30*Math.random())*60*60*1e3).toISOString(),icon:"calendar"},{id:3,title:"Course Completion",description:"Completed your first course",earnedDate:new Date(Date.now()-24*Math.floor(45*Math.random())*60*60*1e3).toISOString(),icon:"award"}],weeklyActivity:Array.from({length:7},(e,t)=>({date:new Date(Date.now()-24*(6-t)*60*60*1e3).toISOString().split("T")[0],minutes:Math.floor(180*Math.random())}))};return console.log("âœ… User progress data generated:",r),r}catch(e){throw console.error("âŒ Error fetching user progress:",e),y(e.message||"Failed to fetch user progress"),e}finally{g(!1)}},[]);return{users:u,loading:f,updating:h,error:x,pagination:b,hasMore:j,filters:N,computed:$,setFilters:k,getUser:D,getUserProgress:B,enrollUserInCourse:z,unenrollUserFromCourse:q,updateUserRole:I,refreshUsers:R,loadMoreUsers:L,fetchUsers:O}},a=o},1791:(e,t,r)=>{var n=r(6547),s=r(3360);e.exports=function(e,t,r,o){var a=!r;r||(r={});for(var i=-1,l=t.length;++i<l;){var c=t[i],d=o?o(r[c],e[c],c,r,e):void 0;void 0===d&&(d=e[c]),a?s(r,c,d):n(r,c,d)}return r}},1799:(e,t,r)=>{var n=r(7217),s=r(270);e.exports=function(e,t,r,o){var a=r.length,i=a,l=!o;if(null==e)return!i;for(e=Object(e);a--;){var c=r[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<i;){var d=(c=r[a])[0],u=e[d],p=c[1];if(l&&c[2]){if(void 0===u&&!(d in e))return!1}else{var f=new n;if(o)var m=o(u,p,d,e,t,f);if(!(void 0===m?s(p,u,3,o,f):m))return!1}}return!0}},1800:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},1802:(e,t,r)=>{var n=r(2224),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(s,function(e,r,n,s){t.push(n?s.replace(o,"$1"):r||e)}),t});e.exports=a},1811:e=>{var t=Date.now;e.exports=function(e){var r=0,n=0;return function(){var s=t(),o=16-(s-n);if(n=s,o>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}},1837:(e,t,r)=>{"use strict";r.d(t,{S:()=>d});var n=r(1609),s=r(3627),o=r(4979),a=r(1436),i=r(2708),l=r(6359),c=r(790);const d=({id:e,option:t,index:r,isReadOnly:d,isMultipleChoice:u,handleOptionChange:p,setCorrectAnswer:f,removeOption:m})=>{const{attributes:h,listeners:g,setNodeRef:x,transform:y,transition:b}=(0,s.gl)({id:e}),{getColor:v,isDarkMode:j}=(0,l.DP)(),w=(0,n.useRef)(null),N=(0,n.useCallback)(e=>{e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")},[]);(0,n.useEffect)(()=>{N(w.current)},[t.text,N]);const k={text:j?v("textPrimary","#f9fafb"):v("primary","#1a202c"),textMuted:j?v("textSecondary","#9ca3af"):"#6b7280",inputBg:j?"rgba(255,255,255,0.05)":"#ffffff",border:j?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},C={transform:o.Ks.Transform.toString(y),transition:b};return(0,c.jsxs)("div",{ref:x,style:C,className:"flex items-start gap-2",children:[!d&&(0,c.jsx)("button",{type:"button",...h,...g,style:{cursor:"move",padding:"2px",marginTop:"6px",backgroundColor:"transparent",border:"none",color:k.textMuted,display:"flex",alignItems:"center"},children:(0,c.jsx)(a.A,{className:"h-4 w-4"})}),(0,c.jsx)("input",{type:u?"checkbox":"radio",name:`correct_answer_${e}`,checked:t.isCorrect||!1,onChange:()=>f(r),disabled:d,style:{width:"14px",height:"14px",marginTop:"8px",accentColor:j?"#f59e0b":"#3b82f6"}}),(0,c.jsx)("textarea",{ref:w,value:t.text||"",onChange:e=>{p(r,"text",e.target.value),N(e.target)},placeholder:`OpciÃ³n ${r+1}`,disabled:d,rows:1,style:{flex:1,padding:"6px 10px",borderRadius:"6px",backgroundColor:k.inputBg,border:`1px solid ${k.border}`,color:k.text,fontSize:"13px",outline:"none",resize:"none",overflow:"hidden",lineHeight:"1.4",fontFamily:"inherit"}}),!d&&(0,c.jsx)("button",{type:"button",onClick:()=>m(r),style:{padding:"4px",marginTop:"4px",backgroundColor:"transparent",border:"none",color:"#ef4444",cursor:"pointer",display:"flex",alignItems:"center",borderRadius:"6px"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=j?"rgba(239, 68, 68, 0.15)":"#fee2e2"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:(0,c.jsx)(i.A,{className:"w-4 h-4"})})]})}},1840:function(e){e.exports=function(){"use strict";return function(e,t,r){var n=t.prototype,s=function(e){return e&&(e.indexOf?e:e.s)},o=function(e,t,r,n,o){var a=e.name?e:e.$locale(),i=s(a[t]),l=s(a[r]),c=i||l.map(function(e){return e.slice(0,n)});if(!o)return c;var d=a.weekStart;return c.map(function(e,t){return c[(t+(d||0))%7]})},a=function(){return r.Ls[r.locale()]},i=function(e,t){return e.formats[t]||function(e){return e.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,r){return t||r.slice(1)})}(e.formats[t.toUpperCase()])},l=function(){var e=this;return{months:function(t){return t?t.format("MMMM"):o(e,"months")},monthsShort:function(t){return t?t.format("MMM"):o(e,"monthsShort","months",3)},firstDayOfWeek:function(){return e.$locale().weekStart||0},weekdays:function(t){return t?t.format("dddd"):o(e,"weekdays")},weekdaysMin:function(t){return t?t.format("dd"):o(e,"weekdaysMin","weekdays",2)},weekdaysShort:function(t){return t?t.format("ddd"):o(e,"weekdaysShort","weekdays",3)},longDateFormat:function(t){return i(e.$locale(),t)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};n.localeData=function(){return l.bind(this)()},r.localeData=function(){var e=a();return{firstDayOfWeek:function(){return e.weekStart||0},weekdays:function(){return r.weekdays()},weekdaysShort:function(){return r.weekdaysShort()},weekdaysMin:function(){return r.weekdaysMin()},months:function(){return r.months()},monthsShort:function(){return r.monthsShort()},longDateFormat:function(t){return i(e,t)},meridiem:e.meridiem,ordinal:e.ordinal}},r.months=function(){return o(a(),"months")},r.monthsShort=function(){return o(a(),"monthsShort","months",3)},r.weekdays=function(e){return o(a(),"weekdays",null,null,e)},r.weekdaysShort=function(e){return o(a(),"weekdaysShort","weekdays",3,e)},r.weekdaysMin=function(e){return o(a(),"weekdaysMin","weekdays",2,e)}}}()},1846:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"==typeof e&&null!==e}},1863:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");const r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}},1873:(e,t,r)=>{var n=r(9325).Symbol;e.exports=n},1882:(e,t,r)=>{var n=r(2552),s=r(3805);e.exports=function(e){if(!s(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1961:(e,t,r)=>{var n=r(9653);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},1963:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>S});var n=r(1609),s=r(2389),o=r(8723),a=r(697),i=r(8445),l=r(5333),c=r(5107),d=r(8697),u=r(3610),p=r(1409),f=r(5640),m=r(3827),h=r(5103),g=r(6172),x=r(3001),y=r(6359),b=r(6416),v=r(3197),j=r(4934),w=r(5404),N=r(2708),k=r(790);const C=({question:e,quizzes:t=[],viewMode:r,onClick:o,onEdit:a,onDuplicate:i,onDelete:l})=>{const{t:c}=(0,s.Bd)(),{getColor:d,isDarkMode:u}=(0,y.DP)(),p=(0,n.useMemo)(()=>({text:u?d("textPrimary","#f9fafb"):d("primary","#1a202c"),textMuted:u?d("textSecondary","#9ca3af"):"#6b7280",accent:d("accent","#f59e0b"),primary:d("primary","#3b82f6"),bgCard:u?d("secondaryBackground","#1f2937"):"#ffffff",border:u?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",hoverBg:u?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",shadow:u?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.06)",shadowHover:u?"0 8px 24px rgba(0,0,0,0.4)":"0 8px 24px rgba(0,0,0,0.12)"}),[d,u]),f=(0,n.useMemo)(()=>({title:e.title?.rendered||e.title||c("questions.untitled"),questionType:e.meta?._question_type||e.question_type||"multiple_choice",difficulty:e.meta?._difficulty_level||e.difficulty||"medium"}),[e,c]),m=(0,n.useMemo)(()=>{const t=(e._embedded?.["wp:term"]||[]).flat().find(e=>"qe_category"===e.taxonomy);return t?t.name:null},[e._embedded]),h={multiple_choice:{label:"OpciÃ³n MÃºltiple",color:p.primary},true_false:{label:"V/F",color:"#8b5cf6"},fill_in_the_blanks:{label:"Completar",color:"#10b981"},short_answer:{label:"Respuesta Corta",color:"#ec4899"},essay:{label:"Ensayo",color:"#6366f1"}},g={easy:{label:"FÃ¡cil",bg:u?"rgba(34, 197, 94, 0.2)":"#dcfce7",text:u?"#4ade80":"#16a34a"},medium:{label:"Media",bg:u?"rgba(245, 158, 11, 0.2)":"#fef3c7",text:u?"#fbbf24":"#d97706"},hard:{label:"DifÃ­cil",bg:u?"rgba(239, 68, 68, 0.2)":"#fee2e2",text:u?"#f87171":"#dc2626"}},x=h[f.questionType]||h.multiple_choice,b=g[f.difficulty]||g.medium,C=(t,r)=>{r.stopPropagation(),t(e)};return(0,k.jsxs)("div",{onClick:()=>o(e),className:"group relative rounded-xl cursor-pointer transition-all duration-200 flex flex-col",style:{backgroundColor:p.bgCard,border:`1px solid ${p.border}`,boxShadow:p.shadow},onMouseEnter:e=>{e.currentTarget.style.boxShadow=p.shadowHover,e.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:e=>{e.currentTarget.style.boxShadow=p.shadow,e.currentTarget.style.transform="translateY(0)"},children:[(0,k.jsxs)("div",{className:"flex items-center justify-between px-4 pt-3 pb-2",children:[(0,k.jsx)("span",{className:"text-xs font-medium px-2 py-0.5 rounded-full",style:{backgroundColor:`${x.color}20`,color:x.color},children:x.label}),(0,k.jsx)("span",{className:"text-[10px] font-semibold px-1.5 py-0.5 rounded",style:{backgroundColor:b.bg,color:b.text},children:b.label})]}),(0,k.jsxs)("div",{className:"px-4 pb-3 flex-1",children:[(0,k.jsx)("h3",{className:"font-medium text-sm line-clamp-2 leading-tight",style:{color:p.text},title:f.title,dangerouslySetInnerHTML:{__html:f.title}}),m&&(0,k.jsxs)("div",{className:"flex items-center gap-1 text-xs mt-2",style:{color:p.textMuted},children:[(0,k.jsx)(v.A,{size:10}),(0,k.jsx)("span",{className:"truncate",children:m})]})]}),(0,k.jsxs)("div",{className:"px-3 py-2 flex items-center justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",style:{borderTop:`1px solid ${p.border}`},children:[(0,k.jsx)("button",{type:"button",onClick:e=>C(a,e),style:{padding:"6px",borderRadius:"8px",backgroundColor:"transparent",color:p.textMuted,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=p.hoverBg,e.currentTarget.style.color=p.primary},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=p.textMuted},title:c("common.edit"),children:(0,k.jsx)(j.A,{size:15})}),(0,k.jsx)("button",{type:"button",onClick:e=>C(i,e),style:{padding:"6px",borderRadius:"8px",backgroundColor:"transparent",color:p.textMuted,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=p.hoverBg,e.currentTarget.style.color=p.accent},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=p.textMuted},title:c("common.duplicate"),children:(0,k.jsx)(w.A,{size:15})}),(0,k.jsx)("button",{type:"button",onClick:e=>C(l,e),style:{padding:"6px",borderRadius:"8px",backgroundColor:"transparent",color:p.textMuted,border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=u?"rgba(239, 68, 68, 0.15)":"#fee2e2",e.currentTarget.style.color="#ef4444"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=p.textMuted},title:c("common.delete"),children:(0,k.jsx)(N.A,{size:15})})]})]})};var _=r(9354);const S=()=>{const{t:e}=(0,s.Bd)(),{getColor:t,isDarkMode:r}=(0,y.DP)(),[v,j]=(0,n.useState)({isOpen:!1,mode:"create",questionId:null}),[w,N]=(0,n.useState)(!1),[S,E]=(0,n.useState)([]),[A,M]=(0,n.useState)(!1),T=(0,f.A)({autoFetch:!0,perPage:24,debounceMs:300}),P=(0,m.A)({autoFetch:!1}),O=(0,h.A)({autoFetch:!1}),z=(0,g.A)({autoFetch:!1,status:"publish,draft,private"}),{options:q,isLoading:D,refetch:I}=(0,x.h)(["qe_category","qe_provider"]);(0,n.useEffect)(()=>{0!==P.lessons.length||P.loading||P.fetchLessons(!0,{perPage:100}),0!==O.quizzes.length||O.loading||O.fetchQuizzes(!0,{perPage:100}),0!==z.courses.length||z.loading||z.fetchCourses(!0,{perPage:100})},[]);const L=T.filters?.course_id;(0,n.useEffect)(()=>{(async()=>{if(L&&"all"!==L){M(!0);try{const e=parseInt(L,10);if(!isNaN(e)){const t=await(0,b.getCourseLessons)(e,{perPage:100});E(t.data||[])}}catch(e){console.error("Error fetching lessons for course:",e),E([])}finally{M(!1)}}else E(P.lessons||[])})()},[L,P.lessons]);const R=(0,n.useMemo)(()=>q.qe_category||[],[q.qe_category]),$=(0,n.useMemo)(()=>q.qe_provider||[],[q.qe_provider]),B=(0,n.useMemo)(()=>(z.courses||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[z.courses]),F=(0,n.useMemo)(()=>S.map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[S]),U=(0,n.useCallback)(e=>{T.updateFilter("lessons",null),T.updateFilter("course_id","all"===e?null:e)},[T]),W=()=>{j({isOpen:!0,mode:"create",questionId:null})},H=e=>{j({isOpen:!0,mode:"edit",questionId:e.id})},Q=()=>{j({isOpen:!1,mode:"create",questionId:null})},V=async e=>{if(window.confirm("Â¿EstÃ¡s seguro de que quieres eliminar esta pregunta?"))try{await T.deleteQuestion(e.id),p.oR.success("Pregunta eliminada correctamente"),T.refresh()}catch(e){console.error("Error deleting question:",e),p.oR.error("Error al eliminar la pregunta")}},Y=async e=>{p.oR.info("Funcionalidad de duplicaciÃ³n prÃ³ximamente")},K=(0,n.useMemo)(()=>({text:r?t("textPrimary","#f9fafb"):t("primary","#1a202c"),textMuted:r?t("textSecondary","#9ca3af"):"#6b7280",accent:t("accent","#f59e0b"),primary:t("primary","#3b82f6"),background:r?t("background","#0f172a"):"#f5f7fa",bgCard:r?t("secondaryBackground","#1f2937"):"#ffffff",border:r?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",shadow:r?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",inputBg:r?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:r?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)"}),[t,r]);if(!T.filters||!T.computed)return(0,k.jsx)("div",{className:"flex items-center justify-center h-full",style:{backgroundColor:K.background},children:(0,k.jsx)(o.A,{className:"w-8 h-8 animate-spin",style:{color:K.accent}})});const G=T.pagination?.total||0,X=[T.filters?.category&&"all"!==T.filters.category,T.filters?.provider&&"all"!==T.filters.provider,T.filters?.difficulty&&"all"!==T.filters.difficulty,T.filters?.lessons&&"all"!==T.filters.lessons].filter(Boolean).length;return(0,k.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",style:{backgroundColor:K.background},children:[(0,k.jsxs)("div",{className:"flex-shrink-0 px-6 py-4",style:{backgroundColor:K.bgCard,borderBottom:`1px solid ${K.border}`},children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-2xl font-bold",style:{color:K.text},children:"Preguntas"}),(0,k.jsxs)("p",{className:"text-sm mt-0.5",style:{color:K.textMuted},children:[G.toLocaleString()," ",1===G?"pregunta":"preguntas"," en total"]})]}),(0,k.jsxs)("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:K.accent},children:[(0,k.jsx)(a.A,{size:18}),"Nueva Pregunta"]})]}),(0,k.jsxs)("div",{className:"flex items-center gap-3",children:[(0,k.jsxs)("div",{className:"flex-1 relative",children:[(0,k.jsx)(i.A,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:K.textMuted}}),(0,k.jsx)("input",{type:"text",value:T.filters?.search||"",onChange:e=>T.updateFilter("search",e.target.value),placeholder:"Buscar preguntas por tÃ­tulo...",className:"w-full pl-10 pr-4 py-2.5 rounded-xl text-sm transition-colors",style:{backgroundColor:K.inputBg,border:`1px solid ${K.border}`,color:K.text}}),T.loading&&(0,k.jsx)(o.A,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin",style:{color:K.textMuted}})]}),(0,k.jsxs)("button",{onClick:()=>N(!w),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:w||X>0?r?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)":K.inputBg,border:`1px solid ${w||X>0?K.accent:K.border}`,color:w||X>0?K.accent:K.text},children:[(0,k.jsx)(l.A,{size:16}),"Filtros",X>0&&(0,k.jsx)("span",{className:"w-5 h-5 rounded-full text-xs font-bold flex items-center justify-center text-white",style:{backgroundColor:K.accent},children:X}),(0,k.jsx)(c.A,{size:14,className:"transition-transform "+(w?"rotate-180":"")})]})]}),w&&(0,k.jsxs)("div",{className:"mt-4 pt-4 grid grid-cols-1 md:grid-cols-5 gap-4",style:{borderTop:`1px solid ${K.border}`},children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-xs font-medium mb-1.5",style:{color:K.textMuted},children:[e("admin.tests.course"),(0,k.jsx)("span",{className:"ml-1 opacity-60",children:"(filtra lecciones)"})]}),(0,k.jsxs)("select",{value:T.filters?.course_id||"all",onChange:e=>U(e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:K.inputBg,border:`1px solid ${K.border}`,color:K.text},children:[(0,k.jsx)("option",{value:"all",children:e("admin.tests.allCourses")}),B.map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-xs font-medium mb-1.5",style:{color:K.textMuted},children:[e("admin.questionModal.lesson"),A&&(0,k.jsx)(o.A,{size:12,className:"inline-block ml-1 animate-spin"})]}),(0,k.jsxs)("select",{value:T.filters?.lessons||"all",onChange:e=>T.updateFilter("lessons","all"===e.target.value?null:e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm",disabled:A,style:{backgroundColor:K.inputBg,border:`1px solid ${T.filters?.lessons?K.accent:K.border}`,color:K.text,opacity:A?.7:1},children:[(0,k.jsx)("option",{value:"all",children:e("common.allLessons")}),F.map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:K.textMuted},children:e("admin.tests.category")}),(0,k.jsxs)("select",{value:T.filters?.category||"all",onChange:e=>T.updateFilter("category",e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:K.inputBg,border:`1px solid ${K.border}`,color:K.text},children:[(0,k.jsx)("option",{value:"all",children:e("admin.tests.allCategories")}),R.filter(e=>"all"!==e.value).map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:K.textMuted},children:e("admin.questions.provider")}),(0,k.jsxs)("select",{value:T.filters?.provider||"all",onChange:e=>T.updateFilter("provider",e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:K.inputBg,border:`1px solid ${K.border}`,color:K.text},children:[(0,k.jsx)("option",{value:"all",children:e("admin.questions.allProviders")}),$.filter(e=>"all"!==e.value).map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:K.textMuted},children:e("admin.tests.difficulty")}),(0,k.jsx)("select",{value:T.filters?.difficulty||"all",onChange:e=>T.updateFilter("difficulty",e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:K.inputBg,border:`1px solid ${K.border}`,color:K.text},children:[{value:"all",label:"Todas"},{value:"easy",label:"FÃ¡cil"},{value:"medium",label:"Media"},{value:"hard",label:"DifÃ­cil"}].map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))})]}),X>0&&(0,k.jsx)("div",{className:"md:col-span-5 flex justify-end",children:(0,k.jsxs)("button",{onClick:()=>{T.updateFilter("category","all"),T.updateFilter("provider","all"),T.updateFilter("difficulty","all"),T.updateFilter("course_id",null),T.updateFilter("lessons",null)},className:"flex items-center gap-1 text-sm",style:{color:K.accent},children:[(0,k.jsx)(d.A,{size:14}),e("admin.tests.clearFilters")]})})]})]}),(0,k.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:0===T.questions.length?(0,k.jsxs)("div",{className:"flex flex-col items-center justify-center h-full rounded-2xl",style:{backgroundColor:K.bgCard,border:`1px solid ${K.border}`},children:[(0,k.jsx)("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mb-4",style:{backgroundColor:K.hoverBg},children:(0,k.jsx)(u.A,{className:"w-10 h-10",style:{color:K.textMuted,opacity:.5}})}),(0,k.jsx)("h3",{className:"text-lg font-semibold mb-1",style:{color:K.text},children:T.filters?.search?"Sin resultados":"No hay preguntas"}),(0,k.jsx)("p",{className:"text-sm mb-4",style:{color:K.textMuted},children:T.filters?.search?"Intenta con otros tÃ©rminos de bÃºsqueda":"Crea tu primera pregunta para comenzar"}),!T.filters?.search&&(0,k.jsxs)("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white",style:{backgroundColor:K.accent},children:[(0,k.jsx)(a.A,{size:16}),"Crear pregunta"]})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:T.questions.map(e=>(0,k.jsx)(C,{question:e,quizzes:O.quizzes,viewMode:"grid",onClick:H,onEdit:H,onDuplicate:Y,onDelete:V},e.id))}),T.hasMore&&(0,k.jsx)("div",{className:"flex justify-center mt-6",children:(0,k.jsx)("button",{onClick:T.loadMoreQuestions,disabled:T.loading,className:"flex items-center gap-2 px-6 py-2.5 rounded-xl font-medium transition-colors",style:{backgroundColor:K.bgCard,border:`1px solid ${K.border}`,color:K.text},children:T.loading?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(o.A,{size:16,className:"animate-spin"}),"Cargando..."]}):(0,k.jsx)(k.Fragment,{children:"Cargar mÃ¡s preguntas"})})})]})}),(0,k.jsx)(_.A,{isOpen:v.isOpen,onClose:Q,question:v.questionId?T.questions.find(e=>e.id===v.questionId):null,mode:v.mode,onSave:async(e,t)=>{try{"create"===v.mode?(await T.createQuestion(e),p.oR.success("Pregunta creada correctamente"),"reset"!==t&&Q()):(await T.updateQuestion(v.questionId,e),p.oR.success("Pregunta actualizada correctamente"),Q()),T.refresh()}catch(e){throw console.error("Error saving question:",e),p.oR.error("Error al guardar la pregunta"),e}},availableQuizzes:O.quizzes,availableLessons:P.lessons,availableCourses:z.courses,isLoading:T.creating||T.updating})]})}},1986:(e,t,r)=>{var n=r(1873),s=r(7828),o=r(5288),a=r(5911),i=r(317),l=r(4247),c=n?n.prototype:void 0,d=c?c.valueOf:void 0;e.exports=function(e,t,r,n,c,u,p){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new s(e),new s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=i;case"[object Set]":var m=1&n;if(f||(f=l),e.size!=t.size&&!m)return!1;var h=p.get(e);if(h)return h==t;n|=2,p.set(e,t);var g=a(f(e),f(t),n,c,u,p);return p.delete(e),g;case"[object Symbol]":if(d)return d.call(e)==d.call(t)}return!1}},1999:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2032:(e,t,r)=>{var n=r(1042);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},2049:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},2102:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},2162:(e,t,r)=>{"use strict";var n=r(1609),s=r(9888),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=s.useSyncExternalStore,i=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var u=i(null);if(null===u.current){var p={hasValue:!1,value:null};u.current=p}else p=u.current;u=c(function(){function e(e){if(!l){if(l=!0,a=e,e=n(e),void 0!==s&&p.hasValue){var t=p.value;if(s(t,e))return i=t}return i=e}if(t=i,o(a,e))return t;var r=n(e);return void 0!==s&&s(t,r)?(a=e,t):(a=e,i=r)}var a,i,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,n,s]);var f=a(e,u[0],u[1]);return l(function(){p.hasValue=!0,p.value=f},[f]),d(f),f}},2199:(e,t,r)=>{var n=r(4528),s=r(6449);e.exports=function(e,t,r){var o=t(e);return s(e)?o:n(o,r(e))}},2203:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(1609),s=r(2389),o=r(5244),a=r(697),i=r(8445),l=r(5333),c=r(8723),d=r(6359),u=r(6444),p=r(827),f=r(3160),m=r(3540),h=r(4934),g=r(790);const x=({book:e,onEdit:t})=>{const{t:r}=(0,s.Bd)(),{getColor:n,isDarkMode:o}=(0,d.DP)(),a={text:o?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:o?n("textSecondary","#9ca3af"):"#6b7280",accent:n("accent","#f59e0b"),bgCard:o?n("secondaryBackground","#1f2937"):"#ffffff",border:o?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",hoverBorder:o?n("accent","#f59e0b"):n("primary","#3b82f6"),buttonBg:o?n("accent","#f59e0b"):n("primary","#3b82f6"),buttonText:o?n("secondaryBackground","#1f2937"):"#ffffff",statusPublish:"#10b981",statusDraft:"#f59e0b"},i=e.title?.rendered||e.title||r("books.untitled","Sin tÃ­tulo"),l="publish"===e.status,c=e.pdf?.url||e.pdf?.file_id,u=e.featured_image_url||null;return(0,g.jsxs)("div",{className:"group relative rounded-xl overflow-hidden transition-all duration-300 cursor-pointer",style:{backgroundColor:a.bgCard,border:`1px solid ${a.border}`,boxShadow:o?"0 4px 20px rgba(0,0,0,0.3)":"0 4px 20px rgba(0,0,0,0.08)"},onClick:()=>t(e),onMouseEnter:e=>{e.currentTarget.style.borderColor=a.hoverBorder,e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=o?"0 8px 30px rgba(0,0,0,0.4)":"0 8px 30px rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.borderColor=a.border,e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=o?"0 4px 20px rgba(0,0,0,0.3)":"0 4px 20px rgba(0,0,0,0.08)"},children:[(0,g.jsxs)("div",{className:"aspect-[3/4] w-full relative overflow-hidden",style:{backgroundColor:o?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)"},children:[u?(0,g.jsx)("img",{src:u,alt:i,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):(0,g.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,g.jsx)(p.A,{size:48,style:{color:a.textMuted,opacity:.5}})}),(0,g.jsx)("div",{className:"absolute top-3 right-3 flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium",style:{backgroundColor:o?"rgba(0,0,0,0.6)":"rgba(255,255,255,0.9)",backdropFilter:"blur(8px)"},children:l?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(f.A,{size:12,style:{color:a.statusPublish}}),(0,g.jsx)("span",{style:{color:a.statusPublish},children:r("common.published","Publicado")})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(m.A,{size:12,style:{color:a.statusDraft}}),(0,g.jsx)("span",{style:{color:a.statusDraft},children:r("common.draft","Borrador")})]})}),(0,g.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{backgroundColor:"rgba(0,0,0,0.4)"},children:(0,g.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200",style:{backgroundColor:a.buttonBg,color:a.buttonText},onClick:r=>{r.stopPropagation(),t(e)},children:[(0,g.jsx)(h.A,{size:16}),r("common.edit","Editar")]})})]}),(0,g.jsxs)("div",{className:"p-4",children:[(0,g.jsx)("h3",{className:"font-semibold text-sm line-clamp-2 mb-2",style:{color:a.text},title:i,children:i}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(p.A,{size:14,style:{color:c?a.statusPublish:a.textMuted}}),(0,g.jsx)("span",{className:"text-xs",style:{color:c?a.statusPublish:a.textMuted},children:c?r("books.pdfAttached","PDF adjunto"):r("books.noPdf","Sin PDF")})]})]})]})};var y=r(6335);const b=()=>{const{t:e}=(0,s.Bd)(),{getColor:t,isDarkMode:r}=(0,d.DP)(),[p,f]=(0,n.useState)(null),[m,h]=(0,n.useState)(!1),[b,v]=(0,n.useState)("view"),j=(0,u.A)({autoFetch:!0,perPage:50,debounceMs:300}),w=(0,n.useMemo)(()=>({text:r?t("textPrimary","#f9fafb"):t("primary","#1a202c"),textMuted:r?t("textSecondary","#9ca3af"):"#6b7280",accent:t("accent","#f59e0b"),primary:t("primary","#3b82f6"),bgCard:r?t("secondaryBackground","#1f2937"):"#ffffff",bgPage:r?t("secondaryBackground","#111827"):"#f5f7fa",border:r?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",inputBg:r?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:r?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)",success:"#10b981",error:"#ef4444",info:"#3b82f6",shadow:r?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",shadowSm:r?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.05)",cardBorder:r?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.04)",accentGlow:r?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)"}),[t,r]),N=e=>{f(e.id),v("edit"),h(!0)},k=()=>{f(null),v("create"),h(!0)},C=(0,n.useMemo)(()=>[{value:"publish,draft",label:e("books.allStatus","Todos")},{value:"publish",label:e("common.published","Publicados")},{value:"draft",label:e("common.draft","Borradores")}],[e]),_=!j.filters||!j.pagination;return(0,g.jsxs)("div",{className:"flex flex-col h-[calc(100vh-100px)] relative",style:{backgroundColor:w.bgPage},children:[(0,g.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",style:{backgroundColor:w.bgCard,borderBottom:`1px solid ${w.cardBorder}`,boxShadow:w.shadowSm},children:[(0,g.jsxs)("div",{className:"flex items-center gap-4",children:[(0,g.jsx)("div",{className:"p-2.5 rounded-xl",style:{background:`linear-gradient(135deg, ${w.accent}, ${w.accent}dd)`,boxShadow:`0 4px 12px ${w.accentGlow}`},children:(0,g.jsx)(o.A,{size:22,className:"text-white"})}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-xl font-bold tracking-tight",style:{color:w.text},children:e("books.title","Libros")}),(0,g.jsxs)("p",{className:"text-xs mt-0.5",style:{color:w.textMuted},children:[j.pagination?.total||0," ",e("books.totalBooks","libros en total")]})]})]}),(0,g.jsxs)("button",{onClick:k,disabled:j.loading&&"create"===b,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-all duration-200 disabled:opacity-50",style:{background:`linear-gradient(135deg, ${w.accent}, ${w.accent}dd)`,color:"#fff",boxShadow:`0 4px 12px ${w.accentGlow}`},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow=`0 6px 20px ${w.accentGlow}`},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=`0 4px 12px ${w.accentGlow}`},children:[(0,g.jsx)(a.A,{size:18}),(0,g.jsx)("span",{children:e("books.createBook","Nuevo libro")})]})]}),(0,g.jsx)("div",{className:"flex-1 overflow-hidden p-4",children:(0,g.jsxs)("div",{className:"h-full rounded-2xl overflow-hidden flex flex-col",style:{backgroundColor:w.bgCard,boxShadow:w.shadow,border:`1px solid ${w.cardBorder}`},children:[(0,g.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 p-4",style:{borderBottom:`1px solid ${w.cardBorder}`},children:[(0,g.jsxs)("div",{className:"relative flex-1",children:[(0,g.jsx)(i.A,{size:16,className:"absolute left-3 top-1/2 transform -translate-y-1/2",style:{color:w.textMuted}}),(0,g.jsx)("input",{type:"text",value:j.filters?.search||"",onChange:e=>j.updateFilter?.("search",e.target.value),placeholder:e("books.searchPlaceholder","Buscar libros..."),className:"w-full pl-10 pr-4 py-2.5 rounded-xl text-sm focus:outline-none focus:ring-2 transition-all",style:{backgroundColor:w.inputBg,border:`1px solid ${w.cardBorder}`,color:w.text,"--tw-ring-color":w.accent}})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)(l.A,{size:16,style:{color:w.textMuted}}),(0,g.jsx)("select",{value:j.filters?.status||"publish,draft",onChange:e=>j.updateFilter?.("status",e.target.value),className:"px-4 py-2.5 rounded-xl text-sm focus:outline-none focus:ring-2 transition-all min-w-[140px]",style:{backgroundColor:w.inputBg,border:`1px solid ${w.cardBorder}`,color:w.text,"--tw-ring-color":w.accent},children:C.map(e=>(0,g.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,g.jsx)("div",{className:"flex-1 overflow-y-auto p-4",style:{backgroundColor:w.bgPage},children:_?(0,g.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,g.jsx)(c.A,{className:"w-8 h-8 animate-spin",style:{color:w.accent}})}):j.computed?.isEmpty&&!j.computed?.isFiltered?(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,g.jsx)("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mb-4",style:{backgroundColor:w.hoverBg},children:(0,g.jsx)(o.A,{size:36,style:{color:w.textMuted,opacity:.5}})}),(0,g.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:w.text},children:e("books.emptyState","No hay libros creados")}),(0,g.jsx)("p",{className:"text-sm mb-6 max-w-sm",style:{color:w.textMuted},children:e("books.emptyStateDescription","Comienza creando tu primer libro para que los usuarios puedan acceder a Ã©l.")}),(0,g.jsxs)("button",{onClick:k,className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium text-sm transition-all duration-200",style:{background:`linear-gradient(135deg, ${w.accent}, ${w.accent}dd)`,color:"#fff",boxShadow:`0 4px 12px ${w.accentGlow}`},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,g.jsx)(a.A,{size:18}),e("books.createFirst","Crear el primer libro")]})]}):j.computed?.isEmpty&&j.computed?.isFiltered?(0,g.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[(0,g.jsx)("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mb-4",style:{backgroundColor:w.hoverBg},children:(0,g.jsx)(i.A,{size:36,style:{color:w.textMuted,opacity:.5}})}),(0,g.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:w.text},children:e("books.noResults","Sin resultados")}),(0,g.jsx)("p",{className:"text-sm",style:{color:w.textMuted},children:e("books.noResultsDescription","No se encontraron libros con los filtros actuales.")})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:j.books.map(e=>(0,g.jsx)(x,{book:e,onEdit:N},e.id))}),j.computed?.hasMore&&(0,g.jsx)("div",{className:"mt-6 text-center",children:(0,g.jsx)("button",{onClick:()=>j.loadMore?.(),disabled:j.loading,className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium text-sm transition-all duration-200",style:{backgroundColor:w.inputBg,border:`1px solid ${w.cardBorder}`,color:w.text,boxShadow:w.shadowSm},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=w.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=w.inputBg},children:j.loading?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(c.A,{size:16,className:"animate-spin"}),e("common.loading","Cargando...")]}):e("common.loadMore","Cargar mÃ¡s")})})]})})]})}),(0,g.jsx)(y.A,{isOpen:m,bookId:p,mode:b,onSave:async e=>{try{"create"===b?await j.createBook(e):await j.updateBook(p,e)}catch(e){throw console.error("Error saving book:",e),e}},onClose:()=>{h(!1),setTimeout(()=>{f(null),v("view")},300)},onDelete:async e=>{try{await j.deleteBook(e)}catch(e){throw console.error("Error deleting book:",e),e}},getBook:j.getBook})]})}},2224:(e,t,r)=>{var n=r(104);e.exports=function(e){var t=n(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},2271:(e,t,r)=>{var n=r(1791),s=r(4664);e.exports=function(e,t){return n(e,s(e),t)}},2307:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2389:(e,t,r)=>{"use strict";r.d(t,{xC:()=>v,r9:()=>h,Bd:()=>b});var n=r(1609);r(4915),Object.create(null);const s={},o=(e,t,r,n)=>{c(r)&&s[r]||(c(r)&&(s[r]=new Date),((e,t,r,n)=>{const s=[r,{code:t,...n||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(s,"warn","react-i18next::",!0);c(s[0])&&(s[0]=`react-i18next:: ${s[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...s):console?.warn&&console.warn(...s)})(e,t,r,n))},a=(e,t)=>()=>{if(e.isInitialized)t();else{const r=()=>{setTimeout(()=>{e.off("initialized",r)},0),t()};e.on("initialized",r)}},i=(e,t,r)=>{e.loadNamespaces(t,a(e,r))},l=(e,t,r,n)=>{if(c(r)&&(r=[r]),e.options.preload&&e.options.preload.indexOf(t)>-1)return i(e,r,n);r.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,a(e,n))},c=e=>"string"==typeof e,d=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,u={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"Â©","&#169;":"Â©","&reg;":"Â®","&#174;":"Â®","&hellip;":"â€¦","&#8230;":"â€¦","&#x2F;":"/","&#47;":"/"},p=e=>u[e];let f,m={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(d,p)};const h={type:"3rdParty",init(e){((e={})=>{m={...m,...e}})(e.options.react),(e=>{f=e})(e)}},g=(0,n.createContext)();class x{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const y=(e,t,r,n)=>e.getFixedT(t,r,n),b=(e,t={})=>{const{i18n:r}=t,{i18n:s,defaultNS:a}=(0,n.useContext)(g)||{},d=r||s||f;if(d&&!d.reportNamespaces&&(d.reportNamespaces=new x),!d){o(d,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>{return c(t)?t:"object"==typeof(r=t)&&null!==r&&c(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var r},t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}d.options.react?.wait&&o(d,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const u={...m,...d.options.react,...t},{useSuspense:p,keyPrefix:h}=u;let b=e||a||d.options?.defaultNS;b=c(b)?[b]:b||["translation"],d.reportNamespaces.addUsedNamespaces?.(b);const v=(d.isInitialized||d.initializedStoreOnce)&&b.every(e=>((e,t,r={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:r.lng,precheck:(t,n)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!n(t.isLanguageChangingTo,e))return!1}}):(o(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,d,u)),j=((e,t,r,s)=>(0,n.useCallback)(y(e,t,r,s),[e,t,r,s]))(d,t.lng||null,"fallback"===u.nsMode?b:b[0],h),w=()=>j,N=()=>y(d,t.lng||null,"fallback"===u.nsMode?b:b[0],h),[k,C]=(0,n.useState)(w);let _=b.join();t.lng&&(_=`${t.lng}${_}`);const S=((e,t)=>{const r=(0,n.useRef)();return(0,n.useEffect)(()=>{r.current=e},[e,t]),r.current})(_),E=(0,n.useRef)(!0);(0,n.useEffect)(()=>{const{bindI18n:e,bindI18nStore:r}=u;E.current=!0,v||p||(t.lng?l(d,t.lng,b,()=>{E.current&&C(N)}):i(d,b,()=>{E.current&&C(N)})),v&&S&&S!==_&&E.current&&C(N);const n=()=>{E.current&&C(N)};return e&&d?.on(e,n),r&&d?.store.on(r,n),()=>{E.current=!1,d&&e&&e?.split(" ").forEach(e=>d.off(e,n)),r&&d&&r.split(" ").forEach(e=>d.store.off(e,n))}},[d,_]),(0,n.useEffect)(()=>{E.current&&v&&C(w)},[d,h,v]);const A=[k,d,v];if(A.t=k,A.i18n=d,A.ready=v,v)return A;if(!v&&!p)return A;throw new Promise(e=>{t.lng?l(d,t.lng,b,()=>e()):i(d,b,()=>e())})};function v({i18n:e,defaultNS:t,children:r}){const s=(0,n.useMemo)(()=>({i18n:e,defaultNS:t}),[e,t]);return(0,n.createElement)(g.Provider,{value:s},r)}},2404:(e,t,r)=>{var n=r(270);e.exports=function(e,t){return n(e,t)}},2428:(e,t,r)=>{var n=r(7534),s=r(346),o=Object.prototype,a=o.hasOwnProperty,i=o.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return s(e)&&a.call(e,"callee")&&!i.call(e,"callee")};e.exports=l},2452:(e,t,r)=>{"use strict";r.d(t,{A:()=>a,f:()=>o}),r(5236);const n=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");return e},s=async(e,t={})=>{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":n().nonce},credentials:"same-origin",...t},s=await fetch(e,r);if(!s.ok){const e=await s.json().catch(()=>({message:`HTTP error! status: ${s.status}`}));throw new Error(e.message||"Request failed")}const o=await s.text();if(!o||""===o.trim())return{success:!0,data:{}};try{return JSON.parse(o)}catch(e){throw console.error("JSON parse error. Response was:",o.substring(0,500)),new Error("Invalid JSON response from server")}},o={getSettings:async()=>{const e=`${n().api_url}/quiz-extended/v1/settings`;try{return(await s(e,{method:"GET"})).data}catch(e){throw console.error("Error fetching settings:",e),e}},getScoreFormat:async()=>{const e=`${n().api_url}/quiz-extended/v1/settings/score-format`;try{return(await s(e,{method:"GET"})).data.score_format}catch(e){return console.error("Error fetching score format:",e),"percentage"}},updateSettings:async e=>{const t=`${n().api_url}/quiz-extended/v1/settings`;try{return(await s(t,{method:"POST",body:JSON.stringify(e)})).data}catch(e){throw console.error("Error updating settings:",e),e}},updateScoreFormat:async e=>o.updateSettings({score_format:e}),getTheme:async()=>{const e=`${n().api_url}/quiz-extended/v1/settings/theme`;try{return await s(e,{method:"GET"})}catch(e){return console.error("Error fetching theme:",e),{success:!0,data:{theme:{light:{primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#ffffff",text:"#111827"},dark:{primary:"#60a5fa",secondary:"#a78bfa",accent:"#fbbf24",background:"#1f2937",text:"#f9fafb"}},is_dark_mode:!1}}}},updateTheme:async e=>o.updateSettings({theme:e}),updateCampusLogo:async e=>o.updateSettings({campus_logo:e}),updateCampusLogoDark:async e=>o.updateSettings({campus_logo_dark:e}),getEmailNotificationSettings:async()=>{const e=`${n().api_url}/quiz-extended/v1/settings/email-notifications`;try{return(await s(e,{method:"GET"})).data}catch(e){throw console.error("Error fetching email notification settings:",e),e}},updateEmailNotificationSettings:async e=>{const t=`${n().api_url}/quiz-extended/v1/settings/email-notifications`;try{return(await s(t,{method:"POST",body:JSON.stringify(e)})).data}catch(e){throw console.error("Error updating email notification settings:",e),e}},sendTestEmail:async()=>{const e=`${n().api_url}/quiz-extended/v1/settings/email-notifications/test`;try{return(await s(e,{method:"POST"})).data}catch(e){throw console.error("Error sending test email:",e),e}},getAutoloadStatus:async()=>{const e=`${n().api_url}/quiz-extended/v1/debug/autoload-status`;try{return await s(e,{method:"GET"})}catch(e){throw console.error("Error fetching autoload status:",e),e}},cleanupAutoloadOptions:async()=>{const e=`${n().api_url}/quiz-extended/v1/debug/cleanup-autoload`;try{return await s(e,{method:"POST"})}catch(e){throw console.error("Error cleaning up autoload options:",e),e}}},a=o},2520:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}},2523:e=>{e.exports=function(e,t,r,n){for(var s=e.length,o=r+(n?1:-1);n?o--:++o<s;)if(t(e[o],o,e))return o;return-1}},2552:(e,t,r)=>{var n=r(1873),s=r(659),o=r(9350),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?s(e):o(e)}},2651:(e,t,r)=>{var n=r(4218);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},2694:(e,t,r)=>{"use strict";var n=r(6925);function s(){}function o(){}o.resetWarningCache=s,e.exports=function(){function e(e,t,r,s,o,a){if(a!==n){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:s};return r.PropTypes=r,r}},2708:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},2719:(e,t,r)=>{"use strict";r.r(t),r.d(t,{bulkCreateQuestions:()=>A,create:()=>l,createQuestion:()=>f,delete:()=>d,deleteFn:()=>d,deleteQuestion:()=>h,duplicateQuestion:()=>x,getAll:()=>a,getOne:()=>i,getPublishedQuestions:()=>S,getQuestion:()=>p,getQuestionStatistics:()=>E,getQuestions:()=>u,getQuestionsByCategory:()=>C,getQuestionsByDifficulty:()=>k,getQuestionsByIds:()=>M,getQuestionsByProvider:()=>_,getQuestionsByQuiz:()=>g,getQuestionsByType:()=>N,getQuestionsCount:()=>y,getQuestionsForAdmin:()=>v,questionExists:()=>b,update:()=>c,updateQuestion:()=>m,updateQuestionOrder:()=>w,updateQuestionStatus:()=>j});var n=r(9700),s=r(884);const o=(0,n.eG)("question","questions",{sanitizer:s.c6,validator:s.XE,transformer:s.KL,buildParams:(e={})=>{const{difficulty:t,...r}=e,s=(0,n.DK)(r);if(e.quizId&&s.append("quiz_id",e.quizId.toString()),e.course_id&&s.append("course_id",e.course_id.toString()),e.lessons){const t=Array.isArray(e.lessons)?e.lessons.join(","):e.lessons;t&&s.append("lessons",t)}if(e.category&&"all"!==e.category){const t=Array.isArray(e.category)?e.category.join(","):e.category;s.append("qe_category",t)}return e.provider&&"all"!==e.provider&&s.append("qe_provider",e.provider),e.type&&"all"!==e.type&&s.append("type",e.type),t&&"all"!==t&&s.append("difficulty",t),e.status_filters&&Array.isArray(e.status_filters)&&e.status_filters.length>0&&s.append("status_filters",e.status_filters.join(",")),s}}),a=async(e={})=>{const t=await o.getAll(e);return t.data&&Array.isArray(t.data)&&console.log("ðŸ” Questions received from API:",t.data.map(e=>({id:e.id,title:e.title?.rendered||e.title,is_favorite:e.is_favorite}))),t},i=async(e,t={})=>o.getOne(e,t),l=async e=>o.create(e),c=async(e,t)=>o.update(e,t),d=async e=>o.delete(e),u=a,p=i,f=l,m=c,h=d,g=async(e,t={})=>{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid quiz ID provided");return console.log("ðŸ“ Getting questions for quiz:",e),u({...t,quizId:e})},x=async e=>o.duplicate(e),y=async(e={})=>o.getCount(e),b=async e=>{try{return!!await p(e)}catch(e){return!1}},v=async(e={})=>{const t=window.qe_data||{};if(!t.endpoints?.questions)throw new Error("Questions endpoint not configured");const{page:r=1,perPage:o=24,search:a="",course_id:i=null,lessons:l=null,category:c=null,provider:d=null,topic:u=null,difficulty:p=null,status:f="publish,draft,private",quizId:m=null,type:h=null}=e,g=new URLSearchParams({page:r.toString(),per_page:o.toString(),orderby:"date",order:"desc"});if(f&&g.append("status",f),a&&a.trim()&&g.append("search",a.trim()),i&&"all"!==i&&g.append("course_id",i.toString()),l&&"all"!==l){const e=Array.isArray(l)?l.join(","):l.toString();e&&g.append("lessons",e)}if(c&&"all"!==c){const e=Array.isArray(c)?c.join(","):c;g.append("qe_category",e)}d&&"all"!==d&&g.append("qe_provider",d),u&&"all"!==u&&g.append("qe_topic",u),p&&"all"!==p&&g.append("difficulty",p),m&&g.append("quiz_id",m.toString()),h&&"all"!==h&&g.append("type",h);const x=`${t.endpoints.questions}?${g.toString()}`;console.log("ðŸ” getQuestionsForAdmin:",{url:x,options:e});const y=await(0,n.qb)(x);return{data:Array.isArray(y.data)?y.data.map(s.c6):[],pagination:{currentPage:r,totalPages:parseInt(y.headers["X-WP-TotalPages"]||"1",10),total:parseInt(y.headers["X-WP-Total"]||"0",10),perPage:o}}},j=async(e,t)=>c(e,{status:t}),w=async(e,t)=>c(e,{meta:{_question_order:t}}),N=async(e,t={})=>u({...t,questionType:e}),k=async(e,t={})=>u({...t,difficulty:e}),C=async(e,t={})=>u({...t,category:e}),_=async(e,t={})=>u({...t,provider:e}),S=async(e={})=>u({...e,status:"publish"}),E=async e=>{try{const t=await p(e);return{id:t.id,type:t.meta?._question_type||"multiple_choice",difficulty:t.meta?._difficulty_level||"medium",points:t.meta?._points||1,optionsCount:t.meta?._question_options?.length||0,correctAnswersCount:t.meta?._question_options?.filter(e=>e.isCorrect)?.length||0,isRequired:t.meta?._is_required||!1,provider:t.meta?._provider||"custom"}}catch(e){throw console.error("âŒ Error getting question statistics:",e),e}},A=async e=>{try{console.log(`ðŸ“ Bulk creating ${e.length} questions...`);const t=e.map(e=>l(e)),r=await Promise.all(t);return console.log(`âœ… Successfully created ${r.length} questions`),r}catch(e){throw console.error("âŒ Error in bulk question creation:",e),e}},M=async(e,t={})=>{if(!Array.isArray(e)||0===e.length)return[];const r=t.batchSize||100,n=e.filter(e=>Number.isInteger(e)&&e>0);if(0===n.length)return[];console.log(`ðŸ“ Fetching ${n.length} questions by IDs (batch size: ${r})...`);try{const e=window.qe_data||{};if(!e.endpoints||!e.endpoints.questions)throw new Error("Questions endpoint not configured");const t=e.endpoints.questions,o=[];for(let s=0;s<n.length;s+=r){const a=n.slice(s,s+r),i=window.qe_data?.user?.roles?.includes("administrator")||!1,l=`${t}?${new URLSearchParams({include:a.join(","),per_page:r.toString(),context:i?"edit":"view",orderby:"include"}).toString()}`,c=await fetch(l,{headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},credentials:"same-origin"});if(!c.ok)throw new Error(`API Error ${c.status}: ${c.statusText}`);const d=await c.json();o.push(...d),console.log(`âœ… Loaded batch ${Math.floor(s/r)+1}: ${d.length} questions`)}const a=o.map(s.c6),i=new Map(a.map(e=>[e.id,e])),l=n.map(e=>i.get(e)).filter(Boolean);if(console.log(`âœ… Successfully fetched ${l.length}/${n.length} questions`),l.length<n.length){const e=n.filter(e=>!i.has(e));console.warn(`âš ï¸ Could not fetch ${e.length} questions:`,e)}return l}catch(e){throw console.error("âŒ Error fetching questions by IDs:",e),e}}},2749:(e,t,r)=>{var n=r(1042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:s.call(t,e)}},2779:(e,t,r)=>{"use strict";var n=r(1609);"function"==typeof Object.is&&Object.is,n.useSyncExternalStore,n.useRef,n.useEffect,n.useMemo,n.useDebugValue},2799:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},2804:(e,t,r)=>{var n=r(3729)(r(9325),"Promise");e.exports=n},2810:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8805),s=r(6440),o=r(8161),a=r(8202);t.uniqBy=function(e,t=s.identity){return o.isArrayLikeObject(e)?n.uniqBy(Array.from(e),a.iteratee(t)):[]}},2864:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},2865:(e,t,r)=>{var n=r(9570),s=r(1811)(n);e.exports=s},2871:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("user-minus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},2903:(e,t,r)=>{var n=r(3805),s=r(5527),o=r(181),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=s(e),r=[];for(var i in e)("constructor"!=i||!t&&a.call(e,i))&&r.push(i);return r}},2938:(e,t,r)=>{e.exports=r(8695).isPlainObject},2949:(e,t,r)=>{var n=r(2651);e.exports=function(e,t){var r=n(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}},2984:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(2049);t.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===n.getTag(e)}},3001:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var n=r(1609),s=r(2389),o=r(5026);const a=(e=[])=>{const{t}=(0,s.Bd)(),[r,a]=(0,n.useState)({}),[i,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(null);return(0,n.useEffect)(()=>{0!==e.length?(async()=>{try{l(!0),d(null);const r=e.map(e=>(0,o.NX)(e,{hideEmpty:!1,fetchAll:!0})),n=await Promise.all(r),s={};e.forEach((e,r)=>{const o=n[r]||[];s[e]=[{value:"all",label:t("courses.category.all")},...o.map(e=>({value:e.id,label:e.name}))]}),a(s)}catch(e){console.error("Failed to fetch taxonomy options:",e),d(e)}finally{l(!1)}})():l(!1)},[JSON.stringify(e),t]),{options:r,isLoading:i,error:c}}},3007:e=>{e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},3025:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1863),s=r(1465);t.toPath=function(e){if(Array.isArray(e))return e.map(s.toKey);if("symbol"==typeof e)return[e];const t=[],r=(e=n.toString(e)).length;if(0===r)return t;let o=0,a="",i="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),o++);o<r;){const n=e[o];i?"\\"===n&&o+1<r?(o++,a+=e[o]):n===i?i="":a+=n:l?'"'===n||"'"===n?i=n:"]"===n?(l=!1,t.push(a),a=""):a+=n:"["===n?(l=!0,a&&(t.push(a),a="")):"."===n?a&&(t.push(a),a=""):a+=n,o++}return a&&t.push(a),t}},3031:(e,t,r)=>{var n=r(3120),s=r(6155),o=r(9302),a=r(6800),i=o(function(e,t){if(null==e)return[];var r=t.length;return r>1&&a(e,t[0],t[1])?t=[]:r>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),s(e,n(t,1),[])});e.exports=i},3036:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(717),s=r(1465),o=r(3923),a=r(4200),i=r(7324);t.matchesProperty=function(e,t){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=s.toKey(e)}return t=o.cloneDeep(t),function(r){const s=a.get(r,e);return void 0===s?i.has(r,e):void 0===t?void 0===s:n.isMatch(s,t)}}},3040:(e,t,r)=>{var n=r(1549),s=r(79),o=r(8223);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||s),string:new n}}},3097:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3500),s=r(3998),o=r(3025);t.orderBy=function(e,t,r,a){if(null==e)return[];r=a?void 0:r,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));const i=(e,t)=>{let r=e;for(let e=0;e<t.length&&null!=r;++e)r=r[t[e]];return r},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||s.isKey(e)?e:{key:e,path:o.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"==typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:i(t,e.path):"function"==typeof e?e(t):Array.isArray(e)?i(t,e):"object"==typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let s=0;s<l.length;s++){const o=n.compareValues(e.criteria[s],t.criteria[s],r[s]);if(0!==o)return o}return 0}).map(e=>e.original)}},3120:(e,t,r)=>{var n=r(4528),s=r(5891);e.exports=function e(t,r,o,a,i){var l=-1,c=t.length;for(o||(o=s),i||(i=[]);++l<c;){var d=t[l];r>0&&o(d)?r>1?e(d,r-1,o,a,i):n(i,d):a||(i[i.length]=d)}return i}},3138:(e,t,r)=>{var n=r(1331);e.exports=function(e){return n(e)?void 0:e}},3160:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3181:(e,t,r)=>{var n=r(5508)();e.exports=n},3197:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},3200:function(e){e.exports=function(){"use strict";return function(e,t,r){var n=function(e,t){if(!t||!t.length||1===t.length&&!t[0]||1===t.length&&Array.isArray(t[0])&&!t[0].length)return null;var r;1===t.length&&t[0].length>0&&(t=t[0]),r=(t=t.filter(function(e){return e}))[0];for(var n=1;n<t.length;n+=1)t[n].isValid()&&!t[n][e](r)||(r=t[n]);return r};r.max=function(){var e=[].slice.call(arguments,0);return n("isAfter",e)},r.min=function(){var e=[].slice.call(arguments,0);return n("isBefore",e)}}}()},3201:e=>{var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},3221:e=>{e.exports=function(e){return function(t,r,n){for(var s=-1,o=Object(t),a=n(t),i=a.length;i--;){var l=a[e?i:++s];if(!1===r(o[l],l,o))break}return t}}},3222:(e,t,r)=>{var n=r(7556);e.exports=function(e){return null==e?"":n(e)}},3243:(e,t,r)=>{var n=r(3729),s=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=s},3290:(e,t,r)=>{e=r.nmd(e);var n=r(9325),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s?n.Buffer:void 0,i=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=i?i(r):new e.constructor(r);return e.copy(n),n}},3322:(e,t,r)=>{"use strict";r.d(t,{BV:()=>fe,C5:()=>ce,I9:()=>De,KC:()=>X,N_:()=>Le,Zp:()=>K,g:()=>J,k2:()=>Re,ok:()=>Be,qh:()=>ue,sv:()=>de,zy:()=>Q});var n=r(1609),s="popstate";function o(e={}){return function(e,t,r,n={}){let{window:o=document.defaultView,v5Compat:i=!1}=n,u=o.history,p="POP",f=null,m=h();function h(){return(u.state||{idx:null}).idx}function g(){p="POP";let e=h(),t=null==e?null:e-m;m=e,f&&f({action:p,location:y.location,delta:t})}function x(e){return function(e,t=!1){let r="http://localhost";"undefined"!=typeof window&&(r="null"!==window.location.origin?window.location.origin:window.location.href),a(r,"No window.location.(origin|href) available to create URL");let n="string"==typeof e?e:d(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}(e)}null==m&&(m=0,u.replaceState({...u.state,idx:m},""));let y={get action(){return p},get location(){return e(o,u)},listen(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(s,g),f=e,()=>{o.removeEventListener(s,g),f=null}},createHref:e=>t(o,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){p="PUSH";let n=c(y.location,e,t);r&&r(n,e),m=h()+1;let s=l(n,m),a=y.createHref(n);try{u.pushState(s,"",a)}catch(e){if(e instanceof DOMException&&"DataCloneError"===e.name)throw e;o.location.assign(a)}i&&f&&f({action:p,location:y.location,delta:1})},replace:function(e,t){p="REPLACE";let n=c(y.location,e,t);r&&r(n,e),m=h();let s=l(n,m),o=y.createHref(n);u.replaceState(s,"",o),i&&f&&f({action:p,location:y.location,delta:0})},go:e=>u.go(e)};return y}(function(e,t){let{pathname:r="/",search:n="",hash:s=""}=u(e.location.hash.substring(1));return r.startsWith("/")||r.startsWith(".")||(r="/"+r),c("",{pathname:r,search:n,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"==typeof t?t:d(t))},function(e,t){i("/"===e.pathname.charAt(0),`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)},e)}function a(e,t){if(!1===e||null==e)throw new Error(t)}function i(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function l(e,t){return{usr:e.state,key:e.key,idx:t}}function c(e,t,r=null,n){return{pathname:"string"==typeof e?e:e.pathname,search:"",hash:"",..."string"==typeof t?u(t):t,state:r,key:t&&t.key||n||Math.random().toString(36).substring(2,10)}}function d({pathname:e="/",search:t="",hash:r=""}){return t&&"?"!==t&&(e+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(e+="#"===r.charAt(0)?r:"#"+r),e}function u(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function p(e,t,r="/"){return function(e,t,r,n){let s=_(("string"==typeof t?u(t):t).pathname||"/",r);if(null==s)return null;let o=f(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,r)=>e===t[r])?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let e=0;null==a&&e<o.length;++e){let t=C(s);a=N(o[e],t,n)}return a}(e,t,r,!1)}function f(e,t=[],r=[],n="",s=!1){let o=(e,o,i=s,l)=>{let c={relativePath:void 0===l?e.path||"":l,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(n)&&i)return;a(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length)}let d=M([n,c.relativePath]),u=r.concat(c);e.children&&e.children.length>0&&(a(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),f(e.children,t,u,d,i)),(null!=e.path||e.index)&&t.push({path:d,score:w(d,e.index),routesMeta:u})};return e.forEach((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let r of m(e.path))o(e,t,!0,r);else o(e,t)}),t}function m(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===n.length)return s?[o,""]:[o];let a=m(n.join("/")),i=[];return i.push(...a.map(e=>""===e?o:[o,e].join("/"))),s&&i.push(...a),i.map(t=>e.startsWith("/")&&""===t?"/":t)}new WeakMap;var h=/^:[\w-]+$/,g=3,x=2,y=1,b=10,v=-2,j=e=>"*"===e;function w(e,t){let r=e.split("/"),n=r.length;return r.some(j)&&(n+=v),t&&(n+=x),r.filter(e=>!j(e)).reduce((e,t)=>e+(h.test(t)?g:""===t?y:b),n)}function N(e,t,r=!1){let{routesMeta:n}=e,s={},o="/",a=[];for(let e=0;e<n.length;++e){let i=n[e],l=e===n.length-1,c="/"===o?t:t.slice(o.length)||"/",d=k({path:i.relativePath,caseSensitive:i.caseSensitive,end:l},c),u=i.route;if(!d&&l&&r&&!n[n.length-1].route.index&&(d=k({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},c)),!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:M([o,d.pathname]),pathnameBase:T(M([o,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(o=M([o,d.pathnameBase]))}return a}function k(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t=!1,r=!0){i("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((e,{paramName:t,isOptional:r},n)=>{if("*"===t){let e=l[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const s=l[n];return e[t]=r&&!s?void 0:(s||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function C(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return i(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function _(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function S(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function E(e){let t=function(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}(e);return t.map((e,r)=>r===t.length-1?e.pathname:e.pathnameBase)}function A(e,t,r,n=!1){let s;"string"==typeof e?s=u(e):(s={...e},a(!s.pathname||!s.pathname.includes("?"),S("?","pathname","search",s)),a(!s.pathname||!s.pathname.includes("#"),S("#","pathname","hash",s)),a(!s.search||!s.search.includes("#"),S("#","search","hash",s)));let o,i=""===e||""===s.pathname,l=i?"/":s.pathname;if(null==l)o=r;else{let e=t.length-1;if(!n&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}o=e>=0?t[e]:"/"}let c=function(e,t="/"){let{pathname:r,search:n="",hash:s=""}="string"==typeof e?u(e):e,o=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)}),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:o,search:P(n),hash:O(s)}}(s,o),d=l&&"/"!==l&&l.endsWith("/"),p=(i||"."===l)&&r.endsWith("/");return c.pathname.endsWith("/")||!d&&!p||(c.pathname+="/"),c}var M=e=>e.join("/").replace(/\/\/+/g,"/"),T=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),P=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",O=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function z(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}var q=["POST","PUT","PATCH","DELETE"],D=(new Set(q),["GET",...q]);new Set(D),Symbol("ResetLoaderData");var I=n.createContext(null);I.displayName="DataRouter";var L=n.createContext(null);L.displayName="DataRouterState";n.createContext(!1);var R=n.createContext({isTransitioning:!1});R.displayName="ViewTransition",n.createContext(new Map).displayName="Fetchers",n.createContext(null).displayName="Await";var $=n.createContext(null);$.displayName="Navigation";var B=n.createContext(null);B.displayName="Location";var F=n.createContext({outlet:null,matches:[],isDataRoute:!1});F.displayName="Route";var U=n.createContext(null);U.displayName="RouteError";var W=!0;function H(){return null!=n.useContext(B)}function Q(){return a(H(),"useLocation() may be used only in the context of a <Router> component."),n.useContext(B).location}var V="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Y(e){n.useContext($).static||n.useLayoutEffect(e)}function K(){let{isDataRoute:e}=n.useContext(F);return e?function(){let{router:e}=function(e){let t=n.useContext(I);return a(t,oe(e)),t}("useNavigate"),t=ae("useNavigate"),r=n.useRef(!1);return Y(()=>{r.current=!0}),n.useCallback(async(n,s={})=>{i(r.current,V),r.current&&("number"==typeof n?e.navigate(n):await e.navigate(n,{fromRouteId:t,...s}))},[e,t])}():function(){a(H(),"useNavigate() may be used only in the context of a <Router> component.");let e=n.useContext(I),{basename:t,navigator:r}=n.useContext($),{matches:s}=n.useContext(F),{pathname:o}=Q(),l=JSON.stringify(E(s)),c=n.useRef(!1);return Y(()=>{c.current=!0}),n.useCallback((n,s={})=>{if(i(c.current,V),!c.current)return;if("number"==typeof n)return void r.go(n);let a=A(n,JSON.parse(l),o,"path"===s.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:M([t,a.pathname])),(s.replace?r.replace:r.push)(a,s.state,s)},[t,r,l,o,e])}()}var G=n.createContext(null);function X(){return n.useContext(G)}function J(){let{matches:e}=n.useContext(F),t=e[e.length-1];return t?t.params:{}}function Z(e,{relative:t}={}){let{matches:r}=n.useContext(F),{pathname:s}=Q(),o=JSON.stringify(E(r));return n.useMemo(()=>A(e,JSON.parse(o),s,"path"===t),[e,o,s,t])}function ee(e,t,r,s,o){a(H(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=n.useContext($),{matches:c}=n.useContext(F),d=c[c.length-1],f=d?d.params:{},m=d?d.pathname:"/",h=d?d.pathnameBase:"/",g=d&&d.route;if(W){let e=g&&g.path||"";le(m,!g||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let x,y=Q();if(t){let e="string"==typeof t?u(t):t;a("/"===h||e.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${e.pathname}" was given in the \`location\` prop.`),x=e}else x=y;let b=x.pathname||"/",v=b;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+b.replace(/^\//,"").split("/").slice(e.length).join("/")}let j=p(e,{pathname:v});W&&(i(g||null!=j,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),i(null==j||void 0!==j[j.length-1].route.element||void 0!==j[j.length-1].route.Component||void 0!==j[j.length-1].route.lazy,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`));let w=function(e,t=[],r=null,s=null){if(null==e){if(!r)return null;if(r.errors)e=r.matches;else{if(0!==t.length||r.initialized||!(r.matches.length>0))return null;e=r.matches}}let o=e,i=r?.errors;if(null!=i){let e=o.findIndex(e=>e.route.id&&void 0!==i?.[e.route.id]);a(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),o=o.slice(0,Math.min(o.length,e+1))}let l=!1,c=-1;if(r)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(c=e),t.route.id){let{loaderData:e,errors:n}=r,s=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!n||void 0===n[t.route.id]);if(t.route.lazy||s){l=!0,o=c>=0?o.slice(0,c+1):[o[0]];break}}}return o.reduceRight((e,a,d)=>{let u,p=!1,f=null,m=null;r&&(u=i&&a.route.id?i[a.route.id]:void 0,f=a.route.errorElement||re,l&&(c<0&&0===d?(le("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,m=null):c===d&&(p=!0,m=a.route.hydrateFallbackElement||null)));let h=t.concat(o.slice(0,d+1)),g=()=>{let t;return t=u?f:p?m:a.route.Component?n.createElement(a.route.Component,null):a.route.element?a.route.element:e,n.createElement(se,{match:a,routeContext:{outlet:e,matches:h,isDataRoute:null!=r},children:t})};return r&&(a.route.ErrorBoundary||a.route.errorElement||0===d)?n.createElement(ne,{location:r.location,revalidation:r.revalidation,component:f,error:u,children:g(),routeContext:{outlet:null,matches:h,isDataRoute:!0},unstable_onError:s}):g()},null)}(j&&j.map(e=>Object.assign({},e,{params:Object.assign({},f,e.params),pathname:M([h,l.encodeLocation?l.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:M([h,l.encodeLocation?l.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),c,r,s,o);return t&&w?n.createElement(B.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},w):w}function te(){let e=function(){let e=n.useContext(U),t=function(e){let t=n.useContext(L);return a(t,oe(e)),t}("useRouteError"),r=ae("useRouteError");return void 0!==e?e:t.errors?.[r]}(),t=z(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},i={padding:"2px 4px",backgroundColor:s},l=null;return W&&(console.error("Error handled by React Router default ErrorBoundary:",e),l=n.createElement(n.Fragment,null,n.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),n.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",n.createElement("code",{style:i},"ErrorBoundary")," or"," ",n.createElement("code",{style:i},"errorElement")," prop on your route."))),n.createElement(n.Fragment,null,n.createElement("h2",null,"Unexpected Application Error!"),n.createElement("h3",{style:{fontStyle:"italic"}},t),r?n.createElement("pre",{style:o},r):null,l)}var re=n.createElement(te,null),ne=class extends n.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?n.createElement(F.Provider,{value:this.props.routeContext},n.createElement(U.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function se({routeContext:e,match:t,children:r}){let s=n.useContext(I);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),n.createElement(F.Provider,{value:e},r)}function oe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ae(e){let t=function(e){let t=n.useContext(F);return a(t,oe(e)),t}(e),r=t.matches[t.matches.length-1];return a(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}var ie={};function le(e,t,r){t||ie[e]||(ie[e]=!0,i(!1,r))}function ce({to:e,replace:t,state:r,relative:s}){a(H(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=n.useContext($);i(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=n.useContext(F),{pathname:c}=Q(),d=K(),u=A(e,E(l),c,"path"===s),p=JSON.stringify(u);return n.useEffect(()=>{d(JSON.parse(p),{replace:t,state:r,relative:s})},[d,p,s,t,r]),null}function de(e){return function(e){let t=n.useContext(F).outlet;return t?n.createElement(G.Provider,{value:e},t):t}(e.context)}function ue(e){a(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function pe({basename:e="/",children:t=null,location:r,navigationType:s="POP",navigator:o,static:l=!1}){a(!H(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),d=n.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);"string"==typeof r&&(r=u(r));let{pathname:p="/",search:f="",hash:m="",state:h=null,key:g="default"}=r,x=n.useMemo(()=>{let e=_(p,c);return null==e?null:{location:{pathname:e,search:f,hash:m,state:h,key:g},navigationType:s}},[c,p,f,m,h,g,s]);return i(null!=x,`<Router basename="${c}"> is not able to match the URL "${p}${f}${m}" because it does not start with the basename, so the <Router> won't render anything.`),null==x?null:n.createElement($.Provider,{value:d},n.createElement(B.Provider,{children:t,value:x}))}function fe({children:e,location:t}){return ee(me(e),t)}function me(e,t=[]){let r=[];return n.Children.forEach(e,(e,s)=>{if(!n.isValidElement(e))return;let o=[...t,s];if(e.type===n.Fragment)return void r.push.apply(r,me(e.props.children,o));a(e.type===ue,`[${"string"==typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),a(!e.props.index||!e.props.children,"An index route cannot have child routes.");let i={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=me(e.props.children,o)),r.push(i)}),r}n.memo(function({routes:e,future:t,state:r,unstable_onError:n}){return ee(e,void 0,r,n,t)}),n.Component;var he="get",ge="application/x-www-form-urlencoded";function xe(e){return null!=e&&"string"==typeof e.tagName}function ye(e=""){return new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map(e=>[r,e]):[[r,n]])},[]))}var be=null,ve=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function je(e){return null==e||ve.has(e)?e:(i(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ge}"`),null)}function we(e,t){if(!1===e||null==e)throw new Error(t)}function Ne(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"==typeof e.imageSrcSet&&"string"==typeof e.imageSizes:"string"==typeof e.rel&&"string"==typeof e.href)}function ke(e,t,r,n,s,o){let a=(e,t)=>!r[t]||e.route.id!==r[t].route.id,i=(e,t)=>r[t].pathname!==e.pathname||r[t].route.path?.endsWith("*")&&r[t].params["*"]!==e.params["*"];return"assets"===o?t.filter((e,t)=>a(e,t)||i(e,t)):"data"===o?t.filter((t,o)=>{let l=n.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,o)||i(t,o))return!0;if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"==typeof n)return n}return!0}):[]}function Ce(e,t,{includeHydrateFallback:r}={}){return n=e.map(e=>{let n=t.routes[e.route.id];if(!n)return[];let s=[n.module];return n.clientActionModule&&(s=s.concat(n.clientActionModule)),n.clientLoaderModule&&(s=s.concat(n.clientLoaderModule)),r&&n.hydrateFallbackModule&&(s=s.concat(n.hydrateFallbackModule)),n.imports&&(s=s.concat(n.imports)),s}).flat(1),[...new Set(n)];var n}function _e(){let e=n.useContext(I);return we(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Se(){let e=n.useContext(L);return we(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}Object.getOwnPropertyNames(Object.prototype).sort().join("\0"),"undefined"!=typeof window?window:"undefined"!=typeof globalThis&&globalThis,Symbol("SingleFetchRedirect");var Ee=n.createContext(void 0);function Ae(){let e=n.useContext(Ee);return we(e,"You must render this element inside a <HydratedRouter> element"),e}function Me(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Te({page:e,...t}){let{router:r}=_e(),s=n.useMemo(()=>p(r.routes,e,r.basename),[r.routes,e,r.basename]);return s?n.createElement(Oe,{page:e,matches:s,...t}):null}function Pe(e){let{manifest:t,routeModules:r}=Ae(),[s,o]=n.useState([]);return n.useEffect(()=>{let n=!1;return async function(e,t,r){return function(e,t){let r=new Set,n=new Set(t);return e.reduce((e,s)=>{if(t&&(null==(o=s)||"string"!=typeof o.page)&&"script"===s.as&&s.href&&n.has(s.href))return e;var o;let a=JSON.stringify(function(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}(s));return r.has(a)||(r.add(a),e.push({key:a,link:s})),e},[])}((await Promise.all(e.map(async e=>{let n=t.routes[e.route.id];if(n){let e=await async function(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(t){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}(n,r);return e.links?e.links():[]}return[]}))).flat(1).filter(Ne).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"}))}(e,t,r).then(e=>{n||o(e)}),()=>{n=!0}},[e,t,r]),s}function Oe({page:e,matches:t,...r}){let s=Q(),{manifest:o,routeModules:a}=Ae(),{basename:i}=_e(),{loaderData:l,matches:c}=Se(),d=n.useMemo(()=>ke(e,t,c,o,s,"data"),[e,t,c,o,s]),u=n.useMemo(()=>ke(e,t,c,o,s,"assets"),[e,t,c,o,s]),p=n.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let r=new Set,n=!1;if(t.forEach(e=>{let t=o.routes[e.route.id];t&&t.hasLoader&&(!d.some(t=>t.route.id===e.route.id)&&e.route.id in l&&a[e.route.id]?.shouldRevalidate||t.hasClientLoader?n=!0:r.add(e.route.id))}),0===r.size)return[];let c=function(e,t,r){let n="string"==typeof e?new URL(e,"undefined"==typeof window?"server://singlefetch/":window.location.origin):e;return"/"===n.pathname?n.pathname=`_root.${r}`:t&&"/"===_(n.pathname,t)?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}(e,i,"data");return n&&r.size>0&&c.searchParams.set("_routes",t.filter(e=>r.has(e.route.id)).map(e=>e.route.id).join(",")),[c.pathname+c.search]},[i,l,s,o,d,t,e,a]),f=n.useMemo(()=>Ce(u,o),[u,o]),m=Pe(u);return n.createElement(n.Fragment,null,p.map(e=>n.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r})),f.map(e=>n.createElement("link",{key:e,rel:"modulepreload",href:e,...r})),m.map(({key:e,link:t})=>n.createElement("link",{key:e,nonce:r.nonce,...t})))}Ee.displayName="FrameworkContext";function ze(...e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}n.Component;var qe="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;try{qe&&(window.__reactRouterVersion="7.8.2")}catch(e){}function De({basename:e,children:t,window:r}){let s=n.useRef();null==s.current&&(s.current=o({window:r,v5Compat:!0}));let a=s.current,[i,l]=n.useState({action:a.action,location:a.location}),c=n.useCallback(e=>{n.startTransition(()=>l(e))},[l]);return n.useLayoutEffect(()=>a.listen(c),[a,c]),n.createElement(pe,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}var Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Le=n.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:o,replace:l,state:c,target:u,to:p,preventScrollReset:f,viewTransition:m,...h},g){let x,{basename:y}=n.useContext($),b="string"==typeof p&&Ie.test(p),v=!1;if("string"==typeof p&&b&&(x=p,qe))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),r=_(t.pathname,y);t.origin===e.origin&&null!=r?p=r+t.search+t.hash:v=!0}catch(e){i(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=function(e,{relative:t}={}){a(H(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:s}=n.useContext($),{hash:o,pathname:i,search:l}=Z(e,{relative:t}),c=i;return"/"!==r&&(c="/"===i?r:M([r,i])),s.createHref({pathname:c,search:l,hash:o})}(p,{relative:s}),[w,N,k]=function(e,t){let r=n.useContext(Ee),[s,o]=n.useState(!1),[a,i]=n.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:p}=t,f=n.useRef(null);n.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),n.useEffect(()=>{if(s){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[s]);let m=()=>{o(!0)},h=()=>{o(!1),i(!1)};return r?"intent"!==e?[a,f,{}]:[a,f,{onFocus:Me(l,m),onBlur:Me(c,h),onMouseEnter:Me(d,m),onMouseLeave:Me(u,h),onTouchStart:Me(p,m)}]:[!1,f,{}]}(r,h),C=function(e,{target:t,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:i}={}){let l=K(),c=Q(),u=Z(e,{relative:a});return n.useCallback(n=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(n,t)){n.preventDefault();let t=void 0!==r?r:d(c)===d(u);l(e,{replace:t,state:s,preventScrollReset:o,relative:a,viewTransition:i})}},[c,l,u,r,s,t,e,o,a,i])}(p,{replace:l,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m}),S=n.createElement("a",{...h,...k,href:x||j,onClick:v||o?e:function(t){e&&e(t),t.defaultPrevented||C(t)},ref:ze(g,N),target:u,"data-discover":b||"render"!==t?void 0:"true"});return w&&!b?n.createElement(n.Fragment,null,S,n.createElement(Te,{page:j})):S});Le.displayName="Link";var Re=n.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:o,to:i,viewTransition:l,children:c,...d},u){let p=Z(i,{relative:d.relative}),f=Q(),m=n.useContext(L),{navigator:h,basename:g}=n.useContext($),x=null!=m&&function(e,{relative:t}={}){let r=n.useContext(R);a(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=$e("useViewTransitionState"),o=Z(e,{relative:t});if(!r.isTransitioning)return!1;let i=_(r.currentLocation.pathname,s)||r.currentLocation.pathname,l=_(r.nextLocation.pathname,s)||r.nextLocation.pathname;return null!=k(o.pathname,l)||null!=k(o.pathname,i)}(p)&&!0===l,y=h.encodeLocation?h.encodeLocation(p).pathname:p.pathname,b=f.pathname,v=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;t||(b=b.toLowerCase(),v=v?v.toLowerCase():null,y=y.toLowerCase()),v&&g&&(v=_(v,g)||v);const j="/"!==y&&y.endsWith("/")?y.length-1:y.length;let w,N=b===y||!s&&b.startsWith(y)&&"/"===b.charAt(j),C=null!=v&&(v===y||!s&&v.startsWith(y)&&"/"===v.charAt(y.length)),S={isActive:N,isPending:C,isTransitioning:x},E=N?e:void 0;w="function"==typeof r?r(S):[r,N?"active":null,C?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let A="function"==typeof o?o(S):o;return n.createElement(Le,{...d,"aria-current":E,className:w,ref:u,style:A,to:i,viewTransition:l},"function"==typeof c?c(S):c)});function $e(e){let t=n.useContext(I);return a(t,function(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}(e)),t}function Be(e){i("undefined"!=typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=n.useRef(ye(e)),r=n.useRef(!1),s=Q(),o=n.useMemo(()=>function(e,t){let r=ye(e);return t&&t.forEach((e,n)=>{r.has(n)||t.getAll(n).forEach(e=>{r.append(n,e)})}),r}(s.search,r.current?null:t.current),[s.search]),a=K(),l=n.useCallback((e,t)=>{const n=ye("function"==typeof e?e(new URLSearchParams(o)):e);r.current=!0,a("?"+n,t)},[a,o]);return[o,l]}Re.displayName="NavLink",n.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:s,replace:o,state:i,method:l=he,action:c,onSubmit:u,relative:p,preventScrollReset:f,viewTransition:m,...h},g)=>{let x=function(){let{router:e}=$e("useSubmit"),{basename:t}=n.useContext($),r=ae("useRouteId");return n.useCallback(async(n,s={})=>{let{action:o,method:a,encType:i,formData:l,body:c}=function(e,t){let r,n,s,o,a;if(xe(i=e)&&"form"===i.tagName.toLowerCase()){let a=e.getAttribute("action");n=a?_(a,t):null,r=e.getAttribute("method")||he,s=je(e.getAttribute("enctype"))||ge,o=new FormData(e)}else if(function(e){return xe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return xe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||a.getAttribute("action");if(n=i?_(i,t):null,r=e.getAttribute("formmethod")||a.getAttribute("method")||he,s=je(e.getAttribute("formenctype"))||je(a.getAttribute("enctype"))||ge,o=new FormData(a,e),!function(){if(null===be)try{new FormData(document.createElement("form"),0),be=!1}catch(e){be=!0}return be}()){let{name:t,type:r,value:n}=e;if("image"===r){let e=t?`${t}.`:"";o.append(`${e}x`,"0"),o.append(`${e}y`,"0")}else t&&o.append(t,n)}}else{if(xe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=he,n=null,s=ge,a=e}var i;return o&&"text/plain"===s&&(a=o,o=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:o,body:a}}(n,t);if(!1===s.navigate){let t=s.fetcherKey||Ue();await e.fetch(t,r,s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||i,flushSync:s.flushSync})}else await e.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||a,formEncType:s.encType||i,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}(),y=function(e,{relative:t}={}){let{basename:r}=n.useContext($),s=n.useContext(F);a(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),i={...Z(e||".",{relative:t})},l=Q();if(null==e){i.search=l.search;let e=new URLSearchParams(i.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let r=e.toString();i.search=r?`?${r}`:""}}return e&&"."!==e||!o.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),"/"!==r&&(i.pathname="/"===i.pathname?r:M([r,i.pathname])),d(i)}(c,{relative:p}),b="get"===l.toLowerCase()?"get":"post",v="string"==typeof c&&Ie.test(c);return n.createElement("form",{ref:g,method:b,action:y,onSubmit:s?u:e=>{if(u&&u(e),e.defaultPrevented)return;e.preventDefault();let n=e.nativeEvent.submitter,s=n?.getAttribute("formmethod")||l;x(n||e.currentTarget,{fetcherKey:t,method:s,navigate:r,replace:o,state:i,relative:p,preventScrollReset:f,viewTransition:m})},...h,"data-discover":v||"render"!==e?void 0:"true"})}).displayName="Form";var Fe=0,Ue=()=>`__${String(++Fe)}__`},3345:e=>{e.exports=function(){return[]}},3349:(e,t,r)=>{var n=r(2199),s=r(6375),o=r(7241);e.exports=function(e){return n(e,o,s)}},3360:(e,t,r)=>{var n=r(3243);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},3375:(e,t,r)=>{"use strict";r.d(t,{Mp:()=>$e,vL:()=>Z,uN:()=>se,AN:()=>ce,fp:()=>C,y$:()=>_,Sj:()=>O,Vy:()=>N,sl:()=>q,fF:()=>He,PM:()=>We,zM:()=>Ye,MS:()=>g,FR:()=>x});var n=r(1609),s=r.n(n),o=r(5795),a=r(4979);const i={display:"none"};function l(e){let{id:t,value:r}=e;return s().createElement("div",{id:t,style:i},r)}function c(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;return s().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},r)}const d=(0,n.createContext)(null),u={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},p={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function f(e){let{announcements:t=p,container:r,hiddenTextDescribedById:i,screenReaderInstructions:f=u}=e;const{announce:m,announcement:h}=function(){const[e,t]=(0,n.useState)("");return{announce:(0,n.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),g=(0,a.YG)("DndLiveRegion"),[x,y]=(0,n.useState)(!1);if((0,n.useEffect)(()=>{y(!0)},[]),function(e){const t=(0,n.useContext)(d);(0,n.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,n.useMemo)(()=>({onDragStart(e){let{active:r}=e;m(t.onDragStart({active:r}))},onDragMove(e){let{active:r,over:n}=e;t.onDragMove&&m(t.onDragMove({active:r,over:n}))},onDragOver(e){let{active:r,over:n}=e;m(t.onDragOver({active:r,over:n}))},onDragEnd(e){let{active:r,over:n}=e;m(t.onDragEnd({active:r,over:n}))},onDragCancel(e){let{active:r,over:n}=e;m(t.onDragCancel({active:r,over:n}))}}),[m,t])),!x)return null;const b=s().createElement(s().Fragment,null,s().createElement(l,{id:i,value:f.draggable}),s().createElement(c,{id:g,announcement:h}));return r?(0,o.createPortal)(b,r):b}var m;function h(){}function g(e,t){return(0,n.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function x(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(m||(m={}));const y=Object.freeze({x:0,y:0});function b(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function v(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function j(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function w(e){let{left:t,top:r,height:n,width:s}=e;return[{x:t,y:r},{x:t+s,y:r},{x:t,y:r+n},{x:t+s,y:r+n}]}function N(e,t){if(!e||0===e.length)return null;const[r]=e;return t?r[t]:r}function k(e,t,r){return void 0===t&&(t=e.left),void 0===r&&(r=e.top),{x:t+.5*e.width,y:r+.5*e.height}}const C=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=k(t,t.left,t.top),o=[];for(const e of n){const{id:t}=e,n=r.get(t);if(n){const r=b(k(n),s);o.push({id:t,data:{droppableContainer:e,value:r}})}}return o.sort(v)},_=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=w(t),o=[];for(const e of n){const{id:t}=e,n=r.get(t);if(n){const r=w(n),a=s.reduce((e,t,n)=>e+b(r[n],t),0),i=Number((a/4).toFixed(4));o.push({id:t,data:{droppableContainer:e,value:i}})}}return o.sort(v)};function S(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),a=s-n,i=o-r;if(n<s&&r<o){const r=t.width*t.height,n=e.width*e.height,s=a*i;return Number((s/(r+n-s)).toFixed(4))}return 0}const E=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=[];for(const e of n){const{id:n}=e,o=r.get(n);if(o){const r=S(o,t);r>0&&s.push({id:n,data:{droppableContainer:e,value:r}})}}return s.sort(j)};function A(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:y}function M(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((t,r)=>({...t,top:t.top+e*r.y,bottom:t.bottom+e*r.y,left:t.left+e*r.x,right:t.right+e*r.x}),{...t})}}const T=M(1);const P={ignoreTransform:!1};function O(e,t){void 0===t&&(t=P);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:n}=(0,a.zk)(e).getComputedStyle(e);t&&(r=function(e,t,r){const n=function(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!n)return e;const{scaleX:s,scaleY:o,x:a,y:i}=n,l=e.left-a-(1-s)*parseFloat(r),c=e.top-i-(1-o)*parseFloat(r.slice(r.indexOf(" ")+1)),d=s?e.width/s:e.width,u=o?e.height/o:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(r,t,n))}const{top:n,left:s,width:o,height:i,bottom:l,right:c}=r;return{top:n,left:s,width:o,height:i,bottom:l,right:c}}function z(e){return O(e,{ignoreTransform:!0})}function q(e,t){const r=[];return e?function n(s){if(null!=t&&r.length>=t)return r;if(!s)return r;if((0,a.wz)(s)&&null!=s.scrollingElement&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!(0,a.sb)(s)||(0,a.xZ)(s))return r;if(r.includes(s))return r;const o=(0,a.zk)(e).getComputedStyle(s);return s!==e&&function(e,t){void 0===t&&(t=(0,a.zk)(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const n=t[e];return"string"==typeof n&&r.test(n)})}(s,o)&&r.push(s),function(e,t){return void 0===t&&(t=(0,a.zk)(e).getComputedStyle(e)),"fixed"===t.position}(s,o)?r:n(s.parentNode)}(e):r}function D(e){const[t]=q(e,1);return null!=t?t:null}function I(e){return a.Sw&&e?(0,a.l6)(e)?e:(0,a.Ll)(e)?(0,a.wz)(e)||e===(0,a.TW)(e).scrollingElement?window:(0,a.sb)(e)?e:null:null:null}function L(e){return(0,a.l6)(e)?e.scrollX:e.scrollLeft}function R(e){return(0,a.l6)(e)?e.scrollY:e.scrollTop}function $(e){return{x:L(e),y:R(e)}}var B;function F(e){return!(!a.Sw||!e)&&e===document.scrollingElement}function U(e){const t={x:0,y:0},r=F(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=n.y,isRight:e.scrollLeft>=n.x,maxScroll:n,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(B||(B={}));const W={x:.2,y:.2};function H(e,t,r,n,s){let{top:o,left:a,right:i,bottom:l}=r;void 0===n&&(n=10),void 0===s&&(s=W);const{isTop:c,isBottom:d,isLeft:u,isRight:p}=U(e),f={x:0,y:0},m={x:0,y:0},h=t.height*s.y,g=t.width*s.x;return!c&&o<=t.top+h?(f.y=B.Backward,m.y=n*Math.abs((t.top+h-o)/h)):!d&&l>=t.bottom-h&&(f.y=B.Forward,m.y=n*Math.abs((t.bottom-h-l)/h)),!p&&i>=t.right-g?(f.x=B.Forward,m.x=n*Math.abs((t.right-g-i)/g)):!u&&a<=t.left+g&&(f.x=B.Backward,m.x=n*Math.abs((t.left+g-a)/g)),{direction:f,speed:m}}function Q(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:r,right:n,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:s,width:e.clientWidth,height:e.clientHeight}}function V(e){return e.reduce((e,t)=>(0,a.WQ)(e,$(t)),y)}const Y=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+L(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+R(t),0)}]];class K{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=q(t),n=V(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,s]of Y)for(const o of t)Object.defineProperty(this,o,{get:()=>{const t=s(r),a=n[e]-t;return this.rect[o]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class G{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,r){var n;null==(n=this.target)||n.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function X(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return"number"==typeof t?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t&&n>t.y}var J,Z;function ee(e){e.preventDefault()}function te(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(J||(J={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(Z||(Z={}));const re={start:[Z.Space,Z.Enter],cancel:[Z.Esc],end:[Z.Space,Z.Enter,Z.Tab]},ne=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Z.Right:return{...r,x:r.x+25};case Z.Left:return{...r,x:r.x-25};case Z.Down:return{...r,y:r.y+25};case Z.Up:return{...r,y:r.y-25}}};class se{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new G((0,a.TW)(t)),this.windowListeners=new G((0,a.zk)(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(J.Resize,this.handleCancel),this.windowListeners.add(J.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(J.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&function(e,t){if(void 0===t&&(t=O),!e)return;const{top:r,left:n,bottom:s,right:o}=t(e);D(e)&&(s<=0||o<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(r),t(y)}handleKeyDown(e){if((0,a.kx)(e)){const{active:t,context:r,options:n}=this.props,{keyboardCodes:s=re,coordinateGetter:o=ne,scrollBehavior:i="smooth"}=n,{code:l}=e;if(s.end.includes(l))return void this.handleEnd(e);if(s.cancel.includes(l))return void this.handleCancel(e);const{collisionRect:c}=r.current,d=c?{x:c.left,y:c.top}:y;this.referenceCoordinates||(this.referenceCoordinates=d);const u=o(e,{active:t,context:r.current,currentCoordinates:d});if(u){const t=(0,a.Re)(u,d),n={x:0,y:0},{scrollableAncestors:s}=r.current;for(const r of s){const s=e.code,{isTop:o,isRight:a,isLeft:l,isBottom:c,maxScroll:d,minScroll:p}=U(r),f=Q(r),m={x:Math.min(s===Z.Right?f.right-f.width/2:f.right,Math.max(s===Z.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(s===Z.Down?f.bottom-f.height/2:f.bottom,Math.max(s===Z.Down?f.top:f.top+f.height/2,u.y))},h=s===Z.Right&&!a||s===Z.Left&&!l,g=s===Z.Down&&!c||s===Z.Up&&!o;if(h&&m.x!==u.x){const e=r.scrollLeft+t.x,o=s===Z.Right&&e<=d.x||s===Z.Left&&e>=p.x;if(o&&!t.y)return void r.scrollTo({left:e,behavior:i});n.x=o?r.scrollLeft-e:s===Z.Right?r.scrollLeft-d.x:r.scrollLeft-p.x,n.x&&r.scrollBy({left:-n.x,behavior:i});break}if(g&&m.y!==u.y){const e=r.scrollTop+t.y,o=s===Z.Down&&e<=d.y||s===Z.Up&&e>=p.y;if(o&&!t.x)return void r.scrollTo({top:e,behavior:i});n.y=o?r.scrollTop-e:s===Z.Down?r.scrollTop-d.y:r.scrollTop-p.y,n.y&&r.scrollBy({top:-n.y,behavior:i});break}}this.handleMove(e,(0,a.WQ)((0,a.Re)(u,this.referenceCoordinates),n))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function oe(e){return Boolean(e&&"distance"in e)}function ae(e){return Boolean(e&&"delay"in e)}se.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=re,onActivation:s}=t,{active:o}=r;const{code:a}=e.nativeEvent;if(n.start.includes(a)){const t=o.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==s||s({event:e.nativeEvent}),0))}return!1}}];class ie{constructor(e,t,r){var n;void 0===r&&(r=function(e){const{EventTarget:t}=(0,a.zk)(e);return e instanceof t?e:(0,a.TW)(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:s}=e,{target:o}=s;this.props=e,this.events=t,this.document=(0,a.TW)(o),this.documentListeners=new G(this.document),this.listeners=new G(r),this.windowListeners=new G((0,a.zk)(o)),this.initialCoordinates=null!=(n=(0,a.e_)(s))?n:y,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(J.Resize,this.handleCancel),this.windowListeners.add(J.DragStart,ee),this.windowListeners.add(J.VisibilityChange,this.handleCancel),this.windowListeners.add(J.ContextMenu,ee),this.documentListeners.add(J.Keydown,this.handleKeydown),t){if(null!=r&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ae(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(oe(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:n}=this.props;n(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(J.Click,te,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(J.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:n,props:s}=this,{onMove:o,options:{activationConstraint:i}}=s;if(!n)return;const l=null!=(t=(0,a.e_)(e))?t:y,c=(0,a.Re)(n,l);if(!r&&i){if(oe(i)){if(null!=i.tolerance&&X(c,i.tolerance))return this.handleCancel();if(X(c,i.distance))return this.handleStart()}return ae(i)&&X(c,i.tolerance)?this.handleCancel():void this.handlePending(i,c)}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Z.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const le={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ce extends ie{constructor(e){const{event:t}=e,r=(0,a.TW)(t.target);super(e,le,r)}}ce.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!(!r.isPrimary||0!==r.button||(null==n||n({event:r}),0))}}];const de={move:{name:"mousemove"},end:{name:"mouseup"}};var ue;!function(e){e[e.RightClick=2]="RightClick"}(ue||(ue={})),class extends ie{constructor(e){super(e,de,(0,a.TW)(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button!==ue.RightClick&&(null==n||n({event:r}),!0)}}];const pe={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var fe,me;(class extends ie{constructor(e){super(e,pe)}static setup(){return window.addEventListener(pe.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(pe.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:s}=r;return!(s.length>1||(null==n||n({event:r}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(fe||(fe={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(me||(me={}));const he={x:{[B.Backward]:!1,[B.Forward]:!1},y:{[B.Backward]:!1,[B.Forward]:!1}};var ge,xe;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(ge||(ge={})),function(e){e.Optimized="optimized"}(xe||(xe={}));const ye=new Map;function be(e,t){return(0,a.KG)(r=>e?r||("function"==typeof t?t(e):e):null,[t,e])}function ve(e){let{callback:t,disabled:r}=e;const s=(0,a._q)(t),o=(0,n.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(s)},[r]);return(0,n.useEffect)(()=>()=>null==o?void 0:o.disconnect(),[o]),o}function je(e){return new K(O(e),e)}function we(e,t,r){void 0===t&&(t=je);const[s,o]=(0,n.useState)(null);function i(){o(n=>{if(!e)return null;var s;if(!1===e.isConnected)return null!=(s=null!=n?n:r)?s:null;const o=t(e);return JSON.stringify(n)===JSON.stringify(o)?n:o})}const l=function(e){let{callback:t,disabled:r}=e;const s=(0,a._q)(t),o=(0,n.useMemo)(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(s)},[s,r]);return(0,n.useEffect)(()=>()=>null==o?void 0:o.disconnect(),[o]),o}({callback(t){if(e)for(const r of t){const{type:t,target:n}=r;if("childList"===t&&n instanceof HTMLElement&&n.contains(e)){i();break}}}}),c=ve({callback:i});return(0,a.Es)(()=>{i(),e?(null==c||c.observe(e),null==l||l.observe(document.body,{childList:!0,subtree:!0})):(null==c||c.disconnect(),null==l||l.disconnect())},[e]),s}const Ne=[];function ke(e,t){void 0===t&&(t=[]);const r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{r.current=null},t),(0,n.useEffect)(()=>{const t=e!==y;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?(0,a.Re)(e,r.current):y}function Ce(e){return(0,n.useMemo)(()=>e?function(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}(e):null,[e])}const _e=[];const Se=[{sensor:ce,options:{}},{sensor:se,options:{}}],Ee={current:{}},Ae={draggable:{measure:z},droppable:{measure:z,strategy:ge.WhileDragging,frequency:xe.Optimized},dragOverlay:{measure:O}};class Me extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return null!=(t=null==(r=this.get(e))?void 0:r.node.current)?t:void 0}}const Te={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Me,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:h},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Ae,measureDroppableContainers:h,windowRect:null,measuringScheduled:!1},Pe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:h,draggableNodes:new Map,over:null,measureDroppableContainers:h},Oe=(0,n.createContext)(Pe),ze=(0,n.createContext)(Te);function qe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Me}}}function De(e,t){switch(t.type){case m.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case m.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case m.DragEnd:case m.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case m.RegisterDroppable:{const{element:r}=t,{id:n}=r,s=new Me(e.droppable.containers);return s.set(n,r),{...e,droppable:{...e.droppable,containers:s}}}case m.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=t,o=e.droppable.containers.get(r);if(!o||n!==o.key)return e;const a=new Me(e.droppable.containers);return a.set(r,{...o,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case m.UnregisterDroppable:{const{id:r,key:n}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const o=new Me(e.droppable.containers);return o.delete(r),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function Ie(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:o}=(0,n.useContext)(Oe),i=(0,a.ZC)(s),l=(0,a.ZC)(null==r?void 0:r.id);return(0,n.useEffect)(()=>{if(!t&&!s&&i&&null!=l){if(!(0,a.kx)(i))return;if(document.activeElement===i.target)return;const e=o.get(l);if(!e)return;const{activatorNode:t,node:r}=e;if(!t.current&&!r.current)return;requestAnimationFrame(()=>{for(const e of[t.current,r.current]){if(!e)continue;const t=(0,a.ag)(e);if(t){t.focus();break}}})}},[s,t,o,l,i]),null}const Le=(0,n.createContext)({...y,scaleX:1,scaleY:1});var Re;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Re||(Re={}));const $e=(0,n.memo)(function(e){var t,r,i,l;let{id:c,accessibility:u,autoScroll:p=!0,children:h,sensors:g=Se,collisionDetection:x=E,measuring:b,modifiers:v,...j}=e;const w=(0,n.useReducer)(De,void 0,qe),[k,C]=w,[_,S]=function(){const[e]=(0,n.useState)(()=>new Set),t=(0,n.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,n.useCallback)(t=>{let{type:r,event:n}=t;e.forEach(e=>{var t;return null==(t=e[r])?void 0:t.call(e,n)})},[e]),t]}(),[M,P]=(0,n.useState)(Re.Uninitialized),z=M===Re.Initialized,{draggable:{active:L,nodes:R,translate:U},droppable:{containers:W}}=k,Q=null!=L?R.get(L):null,Y=(0,n.useRef)({initial:null,translated:null}),G=(0,n.useMemo)(()=>{var e;return null!=L?{id:L,data:null!=(e=null==Q?void 0:Q.data)?e:Ee,rect:Y}:null},[L,Q]),X=(0,n.useRef)(null),[J,Z]=(0,n.useState)(null),[ee,te]=(0,n.useState)(null),re=(0,a.YN)(j,Object.values(j)),ne=(0,a.YG)("DndDescribedBy",c),se=(0,n.useMemo)(()=>W.getEnabled(),[W]),oe=(ae=b,(0,n.useMemo)(()=>({draggable:{...Ae.draggable,...null==ae?void 0:ae.draggable},droppable:{...Ae.droppable,...null==ae?void 0:ae.droppable},dragOverlay:{...Ae.dragOverlay,...null==ae?void 0:ae.dragOverlay}}),[null==ae?void 0:ae.draggable,null==ae?void 0:ae.droppable,null==ae?void 0:ae.dragOverlay]));var ae;const{droppableRects:ie,measureDroppableContainers:le,measuringScheduled:ce}=function(e,t){let{dragging:r,dependencies:s,config:o}=t;const[i,l]=(0,n.useState)(null),{frequency:c,measure:d,strategy:u}=o,p=(0,n.useRef)(e),f=function(){switch(u){case ge.Always:return!1;case ge.BeforeDragging:return r;default:return!r}}(),m=(0,a.YN)(f),h=(0,n.useCallback)(function(e){void 0===e&&(e=[]),m.current||l(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[m]),g=(0,n.useRef)(null),x=(0,a.KG)(t=>{if(f&&!r)return ye;if(!t||t===ye||p.current!==e||null!=i){const t=new Map;for(let r of e){if(!r)continue;if(i&&i.length>0&&!i.includes(r.id)&&r.rect.current){t.set(r.id,r.rect.current);continue}const e=r.node.current,n=e?new K(d(e),e):null;r.rect.current=n,n&&t.set(r.id,n)}return t}return t},[e,i,r,f,d]);return(0,n.useEffect)(()=>{p.current=e},[e]),(0,n.useEffect)(()=>{f||h()},[r,f]),(0,n.useEffect)(()=>{i&&i.length>0&&l(null)},[JSON.stringify(i)]),(0,n.useEffect)(()=>{f||"number"!=typeof c||null!==g.current||(g.current=setTimeout(()=>{h(),g.current=null},c))},[c,f,h,...s]),{droppableRects:x,measureDroppableContainers:h,measuringScheduled:null!=i}}(se,{dragging:z,dependencies:[U.x,U.y],config:oe.droppable}),de=function(e,t){const r=null!=t?e.get(t):void 0,n=r?r.node.current:null;return(0,a.KG)(e=>{var r;return null==t?null:null!=(r=null!=n?n:e)?r:null},[n,t])}(R,L),ue=(0,n.useMemo)(()=>ee?(0,a.e_)(ee):null,[ee]),pe=function(){const e=!1===(null==J?void 0:J.autoScrollEnabled),t="object"==typeof p?!1===p.enabled:!1===p,r=z&&!e&&!t;return"object"==typeof p?{...p,enabled:r}:{enabled:r}}(),xe=function(e,t){return be(e,t)}(de,oe.draggable.measure);!function(e){let{activeNode:t,measure:r,initialRect:s,config:o=!0}=e;const i=(0,n.useRef)(!1),{x:l,y:c}="boolean"==typeof o?{x:o,y:o}:o;(0,a.Es)(()=>{if(!l&&!c||!t)return void(i.current=!1);if(i.current||!s)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const n=A(r(e),s);if(l||(n.x=0),c||(n.y=0),i.current=!0,Math.abs(n.x)>0||Math.abs(n.y)>0){const t=D(e);t&&t.scrollBy({top:n.y,left:n.x})}},[t,l,c,s,r])}({activeNode:null!=L?R.get(L):null,config:pe.layoutShiftCompensation,initialRect:xe,measure:oe.draggable.measure});const je=we(de,oe.draggable.measure,xe),Me=we(de?de.parentElement:null),Te=(0,n.useRef)({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Pe=W.getNodeFor(null==(t=Te.current.over)?void 0:t.id),$e=function(e){let{measure:t}=e;const[r,s]=(0,n.useState)(null),o=ve({callback:(0,n.useCallback)(e=>{for(const{target:r}of e)if((0,a.sb)(r)){s(e=>{const n=t(r);return e?{...e,width:n.width,height:n.height}:n});break}},[t])}),i=(0,n.useCallback)(e=>{const r=function(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return(0,a.sb)(t)?t:e}(e);null==o||o.disconnect(),r&&(null==o||o.observe(r)),s(r?t(r):null)},[t,o]),[l,c]=(0,a.lk)(i);return(0,n.useMemo)(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}({measure:oe.dragOverlay.measure}),Be=null!=(r=$e.nodeRef.current)?r:de,Fe=z?null!=(i=$e.rect)?i:je:null,Ue=Boolean($e.nodeRef.current&&$e.rect),We=A(He=Ue?null:je,be(He));var He;const Qe=Ce(Be?(0,a.zk)(Be):null),Ve=function(e){const t=(0,n.useRef)(e),r=(0,a.KG)(r=>e?r&&r!==Ne&&e&&t.current&&e.parentNode===t.current.parentNode?r:q(e):Ne,[e]);return(0,n.useEffect)(()=>{t.current=e},[e]),r}(z?null!=Pe?Pe:de:null),Ye=function(e,t){void 0===t&&(t=O);const[r]=e,s=Ce(r?(0,a.zk)(r):null),[o,i]=(0,n.useState)(_e);function l(){i(()=>e.length?e.map(e=>F(e)?s:new K(t(e),e)):_e)}const c=ve({callback:l});return(0,a.Es)(()=>{null==c||c.disconnect(),l(),e.forEach(e=>null==c?void 0:c.observe(e))},[e]),o}(Ve),Ke=function(e,t){let{transform:r,...n}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...n}),r):r}(v,{transform:{x:U.x-We.x,y:U.y-We.y,scaleX:1,scaleY:1},activatorEvent:ee,active:G,activeNodeRect:je,containerNodeRect:Me,draggingNodeRect:Fe,over:Te.current.over,overlayNodeRect:$e.rect,scrollableAncestors:Ve,scrollableAncestorRects:Ye,windowRect:Qe}),Ge=ue?(0,a.WQ)(ue,U):null,Xe=function(e){const[t,r]=(0,n.useState)(null),s=(0,n.useRef)(e),o=(0,n.useCallback)(e=>{const t=I(e.target);t&&r(e=>e?(e.set(t,$(t)),new Map(e)):null)},[]);return(0,n.useEffect)(()=>{const t=s.current;if(e!==t){n(t);const a=e.map(e=>{const t=I(e);return t?(t.addEventListener("scroll",o,{passive:!0}),[t,$(t)]):null}).filter(e=>null!=e);r(a.length?new Map(a):null),s.current=e}return()=>{n(e),n(t)};function n(e){e.forEach(e=>{const t=I(e);null==t||t.removeEventListener("scroll",o)})}},[o,e]),(0,n.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>(0,a.WQ)(e,t),y):V(e):y,[e,t])}(Ve),Je=ke(Xe),Ze=ke(Xe,[je]),et=(0,a.WQ)(Ke,Je),tt=Fe?T(Fe,Ke):null,rt=G&&tt?x({active:G,collisionRect:tt,droppableRects:ie,droppableContainers:se,pointerCoordinates:Ge}):null,nt=N(rt,"id"),[st,ot]=(0,n.useState)(null),at=function(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}(Ue?Ke:(0,a.WQ)(Ke,Ze),null!=(l=null==st?void 0:st.rect)?l:null,je),it=(0,n.useRef)(null),lt=(0,n.useCallback)((e,t)=>{let{sensor:r,options:n}=t;if(null==X.current)return;const s=R.get(X.current);if(!s)return;const a=e.nativeEvent,i=new r({active:X.current,activeNode:s,event:a,options:n,context:Te,onAbort(e){if(!R.get(e))return;const{onDragAbort:t}=re.current,r={id:e};null==t||t(r),_({type:"onDragAbort",event:r})},onPending(e,t,r,n){if(!R.get(e))return;const{onDragPending:s}=re.current,o={id:e,constraint:t,initialCoordinates:r,offset:n};null==s||s(o),_({type:"onDragPending",event:o})},onStart(e){const t=X.current;if(null==t)return;const r=R.get(t);if(!r)return;const{onDragStart:n}=re.current,s={activatorEvent:a,active:{id:t,data:r.data,rect:Y}};(0,o.unstable_batchedUpdates)(()=>{null==n||n(s),P(Re.Initializing),C({type:m.DragStart,initialCoordinates:e,active:t}),_({type:"onDragStart",event:s}),Z(it.current),te(a)})},onMove(e){C({type:m.DragMove,coordinates:e})},onEnd:l(m.DragEnd),onCancel:l(m.DragCancel)});function l(e){return async function(){const{active:t,collisions:r,over:n,scrollAdjustedTranslate:s}=Te.current;let i=null;if(t&&s){const{cancelDrop:o}=re.current;i={activatorEvent:a,active:t,collisions:r,delta:s,over:n},e===m.DragEnd&&"function"==typeof o&&await Promise.resolve(o(i))&&(e=m.DragCancel)}X.current=null,(0,o.unstable_batchedUpdates)(()=>{C({type:e}),P(Re.Uninitialized),ot(null),Z(null),te(null),it.current=null;const t=e===m.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=re.current[t];null==e||e(i),_({type:t,event:i})}})}}it.current=i},[R]),ct=(0,n.useCallback)((e,t)=>(r,n)=>{const s=r.nativeEvent,o=R.get(n);if(null!==X.current||!o||s.dndKit||s.defaultPrevented)return;const a={active:o};!0===e(r,t.options,a)&&(s.dndKit={capturedBy:t.sensor},X.current=n,lt(r,t))},[R,lt]),dt=function(e,t){return(0,n.useMemo)(()=>e.reduce((e,r)=>{const{sensor:n}=r;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,r)}))]},[]),[e,t])}(g,ct);!function(e){(0,n.useEffect)(()=>{if(!a.Sw)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(g),(0,a.Es)(()=>{je&&M===Re.Initializing&&P(Re.Initialized)},[je,M]),(0,n.useEffect)(()=>{const{onDragMove:e}=re.current,{active:t,activatorEvent:r,collisions:n,over:s}=Te.current;if(!t||!r)return;const a={active:t,activatorEvent:r,collisions:n,delta:{x:et.x,y:et.y},over:s};(0,o.unstable_batchedUpdates)(()=>{null==e||e(a),_({type:"onDragMove",event:a})})},[et.x,et.y]),(0,n.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:r,droppableContainers:n,scrollAdjustedTranslate:s}=Te.current;if(!e||null==X.current||!t||!s)return;const{onDragOver:a}=re.current,i=n.get(nt),l=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,c={active:e,activatorEvent:t,collisions:r,delta:{x:s.x,y:s.y},over:l};(0,o.unstable_batchedUpdates)(()=>{ot(l),null==a||a(c),_({type:"onDragOver",event:c})})},[nt]),(0,a.Es)(()=>{Te.current={activatorEvent:ee,active:G,activeNode:de,collisionRect:tt,collisions:rt,droppableRects:ie,draggableNodes:R,draggingNode:Be,draggingNodeRect:Fe,droppableContainers:W,over:st,scrollableAncestors:Ve,scrollAdjustedTranslate:et},Y.current={initial:Fe,translated:tt}},[G,de,rt,tt,R,Be,Fe,ie,W,st,Ve,et]),function(e){let{acceleration:t,activator:r=fe.Pointer,canScroll:s,draggingRect:o,enabled:i,interval:l=5,order:c=me.TreeOrder,pointerCoordinates:d,scrollableAncestors:u,scrollableAncestorRects:p,delta:f,threshold:m}=e;const h=function(e){let{delta:t,disabled:r}=e;const n=(0,a.ZC)(t);return(0,a.KG)(e=>{if(r||!n||!e)return he;const s=Math.sign(t.x-n.x),o=Math.sign(t.y-n.y);return{x:{[B.Backward]:e.x[B.Backward]||-1===s,[B.Forward]:e.x[B.Forward]||1===s},y:{[B.Backward]:e.y[B.Backward]||-1===o,[B.Forward]:e.y[B.Forward]||1===o}}},[r,t,n])}({delta:f,disabled:!i}),[g,x]=(0,a.$$)(),y=(0,n.useRef)({x:0,y:0}),b=(0,n.useRef)({x:0,y:0}),v=(0,n.useMemo)(()=>{switch(r){case fe.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case fe.DraggableRect:return o}},[r,o,d]),j=(0,n.useRef)(null),w=(0,n.useCallback)(()=>{const e=j.current;if(!e)return;const t=y.current.x*b.current.x,r=y.current.y*b.current.y;e.scrollBy(t,r)},[]),N=(0,n.useMemo)(()=>c===me.TreeOrder?[...u].reverse():u,[c,u]);(0,n.useEffect)(()=>{if(i&&u.length&&v){for(const e of N){if(!1===(null==s?void 0:s(e)))continue;const r=u.indexOf(e),n=p[r];if(!n)continue;const{direction:o,speed:a}=H(e,n,v,t,m);for(const e of["x","y"])h[e][o[e]]||(a[e]=0,o[e]=0);if(a.x>0||a.y>0)return x(),j.current=e,g(w,l),y.current=a,void(b.current=o)}y.current={x:0,y:0},b.current={x:0,y:0},x()}else x()},[t,w,s,x,i,l,JSON.stringify(v),JSON.stringify(h),g,u,N,p,JSON.stringify(m)])}({...pe,delta:U,draggingRect:tt,pointerCoordinates:Ge,scrollableAncestors:Ve,scrollableAncestorRects:Ye});const ut=(0,n.useMemo)(()=>({active:G,activeNode:de,activeNodeRect:je,activatorEvent:ee,collisions:rt,containerNodeRect:Me,dragOverlay:$e,draggableNodes:R,droppableContainers:W,droppableRects:ie,over:st,measureDroppableContainers:le,scrollableAncestors:Ve,scrollableAncestorRects:Ye,measuringConfiguration:oe,measuringScheduled:ce,windowRect:Qe}),[G,de,je,ee,rt,Me,$e,R,W,ie,st,le,Ve,Ye,oe,ce,Qe]),pt=(0,n.useMemo)(()=>({activatorEvent:ee,activators:dt,active:G,activeNodeRect:je,ariaDescribedById:{draggable:ne},dispatch:C,draggableNodes:R,over:st,measureDroppableContainers:le}),[ee,dt,G,je,C,ne,R,st,le]);return s().createElement(d.Provider,{value:S},s().createElement(Oe.Provider,{value:pt},s().createElement(ze.Provider,{value:ut},s().createElement(Le.Provider,{value:at},h)),s().createElement(Ie,{disabled:!1===(null==u?void 0:u.restoreFocus)})),s().createElement(f,{...u,hiddenTextDescribedById:ne}))}),Be=(0,n.createContext)(null),Fe="button",Ue="Draggable";function We(e){let{id:t,data:r,disabled:s=!1,attributes:o}=e;const i=(0,a.YG)(Ue),{activators:l,activatorEvent:c,active:d,activeNodeRect:u,ariaDescribedById:p,draggableNodes:f,over:m}=(0,n.useContext)(Oe),{role:h=Fe,roleDescription:g="draggable",tabIndex:x=0}=null!=o?o:{},y=(null==d?void 0:d.id)===t,b=(0,n.useContext)(y?Le:Be),[v,j]=(0,a.lk)(),[w,N]=(0,a.lk)(),k=function(e,t){return(0,n.useMemo)(()=>e.reduce((e,r)=>{let{eventName:n,handler:s}=r;return e[n]=e=>{s(e,t)},e},{}),[e,t])}(l,t),C=(0,a.YN)(r);return(0,a.Es)(()=>(f.set(t,{id:t,key:i,node:v,activatorNode:w,data:C}),()=>{const e=f.get(t);e&&e.key===i&&f.delete(t)}),[f,t]),{active:d,activatorEvent:c,activeNodeRect:u,attributes:(0,n.useMemo)(()=>({role:h,tabIndex:x,"aria-disabled":s,"aria-pressed":!(!y||h!==Fe)||void 0,"aria-roledescription":g,"aria-describedby":p.draggable}),[s,h,x,y,g,p.draggable]),isDragging:y,listeners:s?void 0:k,node:v,over:m,setNodeRef:j,setActivatorNodeRef:N,transform:b}}function He(){return(0,n.useContext)(ze)}const Qe="Droppable",Ve={timeout:25};function Ye(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:o}=e;const i=(0,a.YG)(Qe),{active:l,dispatch:c,over:d,measureDroppableContainers:u}=(0,n.useContext)(Oe),p=(0,n.useRef)({disabled:r}),f=(0,n.useRef)(!1),h=(0,n.useRef)(null),g=(0,n.useRef)(null),{disabled:x,updateMeasurementsFor:y,timeout:b}={...Ve,...o},v=(0,a.YN)(null!=y?y:s),j=ve({callback:(0,n.useCallback)(()=>{f.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),g.current=null},b)):f.current=!0},[b]),disabled:x||!l}),w=(0,n.useCallback)((e,t)=>{j&&(t&&(j.unobserve(t),f.current=!1),e&&j.observe(e))},[j]),[N,k]=(0,a.lk)(w),C=(0,a.YN)(t);return(0,n.useEffect)(()=>{j&&N.current&&(j.disconnect(),f.current=!1,j.observe(N.current))},[N,j]),(0,n.useEffect)(()=>(c({type:m.RegisterDroppable,element:{id:s,key:i,disabled:r,node:N,rect:h,data:C}}),()=>c({type:m.UnregisterDroppable,key:i,id:s})),[s]),(0,n.useEffect)(()=>{r!==p.current.disabled&&(c({type:m.SetDroppableDisabled,id:s,key:i,disabled:r}),p.current.disabled=r)},[s,i,r,c]),{active:l,rect:h,isOver:(null==d?void 0:d.id)===s,node:N,over:d,setNodeRef:k}}},3403:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4200);t.property=function(e){return function(t){return n.get(t,e)}}},3412:(e,t,r)=>{e.exports=r(5012).range},3488:e=>{e.exports=function(e){return e}},3500:(e,t)=>{"use strict";function r(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:e!=e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.compareValues=(e,t,n)=>{if(e!==t){const s=r(e),o=r(t);if(s===o&&0===s){if(e<t)return"desc"===n?1:-1;if(e>t)return"desc"===n?-1:1}return"desc"===n?o-s:s-o}return 0}},3540:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},3558:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]])},3605:e=>{e.exports=function(e){return this.__data__.get(e)}},3610:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},3627:(e,t,r)=>{"use strict";r.d(t,{JR:()=>C,_G:()=>p,be:()=>i,gB:()=>h,gl:()=>w});var n=r(1609),s=r.n(n),o=r(3375),a=r(4979);function i(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function l(e,t){return e.reduce((e,r,n)=>{const s=t.get(r);return s&&(e[n]=s),e},Array(e.length))}function c(e){return null!==e&&e>=0}const d=e=>{let{rects:t,activeIndex:r,overIndex:n,index:s}=e;const o=i(t,n,r),a=t[s],l=o[s];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},u={scaleX:1,scaleY:1},p=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:s,rects:o,overIndex:a}=e;const i=null!=(t=o[r])?t:n;if(!i)return null;if(s===r){const e=o[a];return e?{x:0,y:r<a?e.top+e.height-(i.top+i.height):e.top-i.top,...u}:null}const l=function(e,t,r){const n=e[t],s=e[t-1],o=e[t+1];return n?r<t?s?n.top-(s.top+s.height):o?o.top-(n.top+n.height):0:o?o.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}(o,s,r);return s>r&&s<=a?{x:0,y:-i.height-l,...u}:s<r&&s>=a?{x:0,y:i.height+l,...u}:{x:0,y:0,...u}},f="Sortable",m=s().createContext({activeIndex:-1,containerId:f,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:d,disabled:{draggable:!1,droppable:!1}});function h(e){let{children:t,id:r,items:i,strategy:c=d,disabled:u=!1}=e;const{active:p,dragOverlay:h,droppableRects:g,over:x,measureDroppableContainers:y}=(0,o.fF)(),b=(0,a.YG)(f,r),v=Boolean(null!==h.rect),j=(0,n.useMemo)(()=>i.map(e=>"object"==typeof e&&"id"in e?e.id:e),[i]),w=null!=p,N=p?j.indexOf(p.id):-1,k=x?j.indexOf(x.id):-1,C=(0,n.useRef)(j),_=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(j,C.current),S=-1!==k&&-1===N||_,E=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(u);(0,a.Es)(()=>{_&&w&&y(j)},[_,j,w,y]),(0,n.useEffect)(()=>{C.current=j},[j]);const A=(0,n.useMemo)(()=>({activeIndex:N,containerId:b,disabled:E,disableTransforms:S,items:j,overIndex:k,useDragOverlay:v,sortedRects:l(j,g),strategy:c}),[N,b,E.draggable,E.droppable,S,j,k,g,v,c]);return s().createElement(m.Provider,{value:A},t)}const g=e=>{let{id:t,items:r,activeIndex:n,overIndex:s}=e;return i(r,n,s).indexOf(t)},x=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:s,items:o,newIndex:a,previousItems:i,previousContainerId:l,transition:c}=e;return!(!c||!n||i!==o&&s===a||!r&&(a===s||t!==l))},y={duration:200,easing:"ease"},b="transform",v=a.Ks.Transition.toString({property:b,duration:0,easing:"linear"}),j={roleDescription:"sortable"};function w(e){let{animateLayoutChanges:t=x,attributes:r,disabled:s,data:i,getNewIndex:l=g,id:d,strategy:u,resizeObserverConfig:p,transition:f=y}=e;const{items:h,containerId:w,activeIndex:N,disabled:k,disableTransforms:C,sortedRects:_,overIndex:S,useDragOverlay:E,strategy:A}=(0,n.useContext)(m),M=function(e,t){var r,n;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(r=null==e?void 0:e.draggable)?r:t.draggable,droppable:null!=(n=null==e?void 0:e.droppable)?n:t.droppable}}(s,k),T=h.indexOf(d),P=(0,n.useMemo)(()=>({sortable:{containerId:w,index:T,items:h},...i}),[w,i,T,h]),O=(0,n.useMemo)(()=>h.slice(h.indexOf(d)),[h,d]),{rect:z,node:q,isOver:D,setNodeRef:I}=(0,o.zM)({id:d,data:P,disabled:M.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...p}}),{active:L,activatorEvent:R,activeNodeRect:$,attributes:B,setNodeRef:F,listeners:U,isDragging:W,over:H,setActivatorNodeRef:Q,transform:V}=(0,o.PM)({id:d,data:P,attributes:{...j,...r},disabled:M.draggable}),Y=(0,a.jn)(I,F),K=Boolean(L),G=K&&!C&&c(N)&&c(S),X=!E&&W,J=X&&G?V:null,Z=G?null!=J?J:(null!=u?u:A)({rects:_,activeNodeRect:$,activeIndex:N,overIndex:S,index:T}):null,ee=c(N)&&c(S)?l({id:d,items:h,activeIndex:N,overIndex:S}):T,te=null==L?void 0:L.id,re=(0,n.useRef)({activeId:te,items:h,newIndex:ee,containerId:w}),ne=h!==re.current.items,se=t({active:L,containerId:w,isDragging:W,isSorting:K,id:d,index:T,items:h,newIndex:re.current.newIndex,previousItems:re.current.items,previousContainerId:re.current.containerId,transition:f,wasDragging:null!=re.current.activeId}),oe=function(e){let{disabled:t,index:r,node:s,rect:i}=e;const[l,c]=(0,n.useState)(null),d=(0,n.useRef)(r);return(0,a.Es)(()=>{if(!t&&r!==d.current&&s.current){const e=i.current;if(e){const t=(0,o.Sj)(s.current,{ignoreTransform:!0}),r={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(r.x||r.y)&&c(r)}}r!==d.current&&(d.current=r)},[t,r,s,i]),(0,n.useEffect)(()=>{l&&c(null)},[l]),l}({disabled:!se,index:T,node:q,rect:z});return(0,n.useEffect)(()=>{K&&re.current.newIndex!==ee&&(re.current.newIndex=ee),w!==re.current.containerId&&(re.current.containerId=w),h!==re.current.items&&(re.current.items=h)},[K,ee,w,h]),(0,n.useEffect)(()=>{if(te===re.current.activeId)return;if(null!=te&&null==re.current.activeId)return void(re.current.activeId=te);const e=setTimeout(()=>{re.current.activeId=te},50);return()=>clearTimeout(e)},[te]),{active:L,activeIndex:N,attributes:B,data:P,rect:z,index:T,newIndex:ee,items:h,isOver:D,isSorting:K,isDragging:W,listeners:U,node:q,overIndex:S,over:H,setNodeRef:Y,setActivatorNodeRef:Q,setDroppableNodeRef:I,setDraggableNodeRef:F,transform:null!=oe?oe:Z,transition:oe||ne&&re.current.newIndex===T?v:X&&!(0,a.kx)(R)||!f?void 0:K||se?a.Ks.Transition.toString({...f,property:b}):void 0}}function N(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const k=[o.vL.Down,o.vL.Right,o.vL.Up,o.vL.Left],C=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:s,droppableContainers:i,over:l,scrollableAncestors:c}}=t;if(k.includes(e.code)){if(e.preventDefault(),!r||!n)return;const t=[];i.getEnabled().forEach(r=>{if(!r||null!=r&&r.disabled)return;const a=s.get(r.id);if(a)switch(e.code){case o.vL.Down:n.top<a.top&&t.push(r);break;case o.vL.Up:n.top>a.top&&t.push(r);break;case o.vL.Left:n.left>a.left&&t.push(r);break;case o.vL.Right:n.left<a.left&&t.push(r)}});const p=(0,o.y$)({active:r,collisionRect:n,droppableRects:s,droppableContainers:t,pointerCoordinates:null});let f=(0,o.Vy)(p,"id");if(f===(null==l?void 0:l.id)&&p.length>1&&(f=p[1].id),null!=f){const e=i.get(r.id),t=i.get(f),l=t?s.get(t.id):null,p=null==t?void 0:t.node.current;if(p&&l&&e&&t){const r=(0,o.sl)(p).some((e,t)=>c[t]!==e),s=_(e,t),i=(u=t,!(!N(d=e)||!N(u))&&!!_(d,u)&&d.data.current.sortable.index<u.data.current.sortable.index),f=r||!s?{x:0,y:0}:{x:i?n.width-l.width:0,y:i?n.height-l.height:0},m={x:l.left,y:l.top};return f.x&&f.y?m:(0,a.Re)(m,f)}}}var d,u};function _(e,t){return!(!N(e)||!N(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}},3650:(e,t,r)=>{var n=r(4335)(Object.keys,Object);e.exports=n},3656:(e,t,r)=>{e=r.nmd(e);var n=r(9325),s=r(9935),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,i=a&&a.exports===o?n.Buffer:void 0,l=(i?i.isBuffer:void 0)||s;e.exports=l},3661:(e,t,r)=>{var n=r(3040),s=r(7670),o=r(289),a=r(4509),i=r(2949);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=s,l.prototype.get=o,l.prototype.has=a,l.prototype.set=i,e.exports=l},3663:(e,t,r)=>{var n=r(1799),s=r(776),o=r(7197);e.exports=function(e){var t=s(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},3702:e=>{e.exports=function(){this.__data__=[],this.size=0}},3704:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3714:(e,t,r)=>{var n=r(3730);e.exports=function(e,t,r){for(var s=-1,o=e.criteria,a=t.criteria,i=o.length,l=r.length;++s<i;){var c=n(o[s],a[s]);if(c)return s>=l?c:c*("desc"==r[s]?-1:1)}return e.index-t.index}},3729:(e,t,r)=>{var n=r(5083),s=r(392);e.exports=function(e,t){var r=s(e,t);return n(r)?r:void 0}},3730:(e,t,r)=>{var n=r(4394);e.exports=function(e,t){if(e!==t){var r=void 0!==e,s=null===e,o=e==e,a=n(e),i=void 0!==t,l=null===t,c=t==t,d=n(t);if(!l&&!d&&!a&&e>t||a&&i&&c&&!l&&!d||s&&i&&c||!r&&c||!o)return 1;if(!s&&!a&&!d&&e<t||d&&r&&o&&!s&&!a||l&&r&&o||!i&&o||!c)return-1}return 0}},3736:(e,t,r)=>{var n=r(1873),s=n?n.prototype:void 0,o=s?s.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},3805:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3826:function(e){e.exports=function(){"use strict";var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,s,o){var a=s.prototype;o.utc=function(e){return new s({date:e,utc:!0,args:arguments})},a.utc=function(t){var r=o(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},a.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var i=a.parse;a.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),i.call(this,e)};var l=a.init;a.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var c=a.utcOffset;a.utcOffset=function(n,s){var o=this.$utils().u;if(o(n))return this.$u?0:o(this.$offset)?c.call(this):this.$offset;if("string"==typeof n&&(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var s=(""+n[0]).match(r)||["-",0,0],o=s[0],a=60*+s[1]+ +s[2];return 0===a?0:"+"===o?a:-a}(n),null===n))return this;var a=Math.abs(n)<=16?60*n:n;if(0===a)return this.utc(s);var i=this.clone();if(s)return i.$offset=a,i.$u=!1,i;var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(i=this.local().add(a+l,e)).$offset=a,i.$x.$localOffset=l,i};var d=a.format;a.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,t)},a.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},a.isUTC=function(){return!!this.$u},a.toISOString=function(){return this.toDate().toISOString()},a.toString=function(){return this.toDate().toUTCString()};var u=a.toDate;a.toDate=function(e){return"s"===e&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():u.call(this)};var p=a.diff;a.diff=function(e,t,r){if(e&&this.$u===e.$u)return p.call(this,e,t,r);var n=this.local(),s=o(e).local();return p.call(n,s,t,r)}}}()},3827:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,H:()=>i});var n=r(1609),s=r(7804),o=r(9777),a=r(6416);const i=(e={})=>{const{search:t="",courseId:r=null,lessonType:i=null,status:l=null,autoFetch:c=!0,perPage:d=20}=e,[u,p]=(0,n.useState)([]),[f,m]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null),[x,y]=(0,n.useState)(null),b=Boolean(r),v=(0,n.useCallback)(async()=>{if(r){m(!0),g(null);try{console.log(`ðŸ“š useLessons: Fetching lessons for course ${r} using optimized endpoint`);const e=await(0,a.getCourseLessons)(parseInt(r,10),{perPage:d,status:l||"publish,draft,private"});console.log(`âœ… useLessons: Received ${e.data?.length||0} lessons in correct order`),p(e.data||[]),y(e.pagination)}catch(e){console.error("âŒ useLessons: Error fetching course lessons:",e),g(e),p([])}finally{m(!1)}}},[r,d,l]);(0,n.useEffect)(()=>{b&&c&&v()},[b,c,v]);const j=(0,n.useMemo)(()=>e=>{const t=e.meta?._start_date||"",r=t?new Date(t):null,n=new Date,s=!r||r<=n;return{...e,course_id:e.meta?._course_id||null,lesson_order:parseInt(e.meta?._lesson_order||"0"),lesson_type:e.meta?._lesson_type||"mixed",description:e.meta?._lesson_description||"",steps:e.meta?._lesson_steps||[],steps_count:Array.isArray(e.meta?._lesson_steps)?e.meta._lesson_steps.length:0,prerequisite_lessons:e.meta?._prerequisite_lessons||[],completion_criteria:e.meta?._completion_criteria||"view",is_required:"yes"===e.meta?._is_required,duration_minutes:parseInt(e.meta?._duration_minutes||"0"),video_url:e.meta?._video_url||"",has_quiz:"yes"===e.meta?._has_quiz,quiz_id:e.meta?._quiz_id||null,start_date:t,start_date_parsed:r,is_available:s,has_video:Boolean(e.meta?._video_url),has_steps:Array.isArray(e.meta?._lesson_steps)&&e.meta._lesson_steps.length>0,has_prerequisites:Array.isArray(e.meta?._prerequisite_lessons)&&e.meta._prerequisite_lessons.length>0,has_start_date:Boolean(t)}},[]),w=(0,n.useMemo)(()=>u.map(j),[u,j]),N=(0,n.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,published:0,draft:0,private:0,totalSteps:0,averageStepsPerLesson:0,totalDuration:0,averageDuration:0,byType:{},withQuizzes:0,withVideo:0,withPrerequisites:0,requiredLessons:0};let r=0,n=0;const s={};let o=0,a=0,i=0,l=0;return e.forEach(e=>{r+=e.steps_count||0,n+=e.duration_minutes||0;const t=e.lesson_type||"mixed";s[t]=(s[t]||0)+1,e.has_quiz&&o++,e.has_video&&a++,e.has_prerequisites&&i++,e.is_required&&l++}),{total:t,published:e.filter(e=>"publish"===e.status).length,draft:e.filter(e=>"draft"===e.status).length,private:e.filter(e=>"private"===e.status).length,totalSteps:r,averageStepsPerLesson:t>0?Math.round(r/t):0,totalDuration:n,averageDuration:t>0?Math.round(n/t):0,byType:s,withQuizzes:o,withVideo:a,withPrerequisites:i,requiredLessons:l}},[]),k=(0,n.useMemo)(()=>N(w),[w,N]),{items:C,loading:_,creating:S,updating:E,deleting:A,error:M,pagination:T,computed:P,filters:O,updateFilter:z,resetFilters:q,setFilters:D,fetchItems:I,loadMore:L,createItem:R,updateItem:$,deleteItem:B,duplicateItem:F,refresh:U,hasMore:W}=(0,s.q)({service:o,resourceName:"lesson",initialFilters:{search:t,courseId:b?null:r,lessonType:i,status:l||"publish,draft,private"},dataProcessor:j,computedValuesCalculator:N,autoFetch:!b&&c,...e}),H=b?w:C,Q=b?f:_,V=b?h:M,Y=b?x:T,K=b?k:P,G=!b&&W,X=(0,n.useCallback)(()=>b?v():U(),[b,v,U]),J=(0,n.useCallback)(e=>b?v():I(e),[b,v,I]),Z=(0,n.useCallback)(()=>b?(console.warn("âš ï¸  loadMore is not supported when filtering by courseId"),Promise.resolve()):L(),[b,L]);return{lessons:H,loading:Q,creating:S,updating:E,deleting:A,error:V,pagination:Y,computed:K,filters:O,updateFilter:z,resetFilters:q,setFilters:D,fetchLessons:J,loadMoreLessons:Z,createLesson:R,updateLesson:$,deleteLesson:B,duplicateLesson:F,refresh:X,publishLesson:async e=>$(e,{status:"publish"}),unpublishLesson:async e=>$(e,{status:"draft"}),updateLessonOrder:async(e,t)=>$(e,{lessonOrder:t}),moveLessonToCourse:async(e,t)=>$(e,{courseId:t}),updateLessonType:async(e,t)=>$(e,{lessonType:t}),addStepToLesson:async(e,t)=>{const r=H.find(t=>t.id===e);if(!r)throw new Error("Lesson not found");const n=r.steps||[];return $(e,{steps:[...n,t]})},removeStepFromLesson:async(e,t)=>{const r=H.find(t=>t.id===e);if(!r)throw new Error("Lesson not found");const n=r.steps||[];return $(e,{steps:n.filter((e,r)=>r!==t)})},hasMore:G}},l=i},3838:(e,t,r)=>{var n=r(1791),s=r(7241);e.exports=function(e,t){return e&&n(t,s(t),e)}},3844:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3964);t.cloneDeep=function(e){return n.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},3862:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},3873:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(1609),s=r(8445);const o=(0,r(9407).A)("sliders-horizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var a=r(2389),i=r(6359),l=r(790);const c=({searchConfig:e,filtersConfig:t=[]})=>{const{t:r}=(0,a.Bd)(),{getColor:c,isDarkMode:d}=(0,i.DP)(),[u,p]=(0,n.useState)(!1),f=(0,n.useRef)(null),m={text:d?c("textPrimary","#f9fafb"):c("primary","#1a202c"),textMuted:d?c("textSecondary","#9ca3af"):"#6b7280",accent:c("accent","#f59e0b"),primary:c("primary","#3b82f6"),bgCard:d?c("secondaryBackground","#1f2937"):"#ffffff",border:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",inputBg:d?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:d?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)"};return(0,n.useEffect)(()=>{const e=e=>{f.current&&!f.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,l.jsxs)("div",{className:"relative flex-grow",children:[(0,l.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:(0,l.jsx)(s.A,{className:"w-5 h-5",style:{color:m.textMuted}})}),(0,l.jsx)("input",{type:"text",value:e.value,onChange:e.onChange,placeholder:e.placeholder||r("common.search"),className:"w-full pl-10 pr-4 py-2 border rounded-lg",style:{backgroundColor:m.inputBg,borderColor:m.border,color:m.text}}),e.isLoading&&(0,l.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:m.accent}})})]}),(0,l.jsxs)("div",{className:"relative",ref:f,children:[(0,l.jsxs)("button",{onClick:()=>p(!u),className:"w-full md:w-auto px-4 py-2 border rounded-lg font-medium text-sm flex items-center justify-center gap-2 transition-colors",style:{backgroundColor:m.bgCard,borderColor:m.border,color:m.text},onMouseEnter:e=>e.currentTarget.style.backgroundColor=m.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor=m.bgCard,children:[(0,l.jsx)(o,{className:"w-4 h-4"}),r("common.filter")]}),u&&(0,l.jsx)("div",{className:"absolute top-full right-0 mt-2 w-72 border rounded-lg shadow-xl z-10",style:{backgroundColor:m.bgCard,borderColor:m.border},children:(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsx)("h4",{className:"font-semibold",style:{color:m.text},children:r("common.filter")}),t.filter(e=>e&&void 0!==e.value&&e.options).map((e,t)=>(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:m.text},children:e.label||`Filter ${t+1}`}),(0,l.jsx)("select",{value:e.value,onChange:t=>e.onChange(t.target.value),disabled:e.isLoading,className:"w-full px-3 py-2 border rounded-lg text-sm",style:{backgroundColor:m.inputBg,borderColor:m.border,color:m.text},children:(e.options||[]).map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]},t))]})})]})]})}},3893:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},3908:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3916:(e,t,r)=>{var n=r(3360),s=r(641),o=r(5389);e.exports=function(e,t){var r={};return t=o(t,3),s(e,function(e,s,o){n(r,s,t(e,s,o))}),r}},3923:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(9467);t.cloneDeep=function(e){return n.cloneDeepWith(e)}},3937:e=>{e.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},3954:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},3964:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6012),s=r(2049),o=r(9184),a=r(2520),i=r(3908);function l(e,t,r,n=new Map,d=void 0){const u=d?.(e,t,r,n);if(void 0!==u)return u;if(a.isPrimitive(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=l(e[s],s,r,n,d);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[s,o]of e)t.set(s,l(o,s,r,n,d));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const s of e)t.add(l(s,void 0,r,n,d));return t}if("undefined"!=typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(i.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=l(e[s],s,r,n,d);return t}if(e instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),c(t,e,r,n,d),t}if("undefined"!=typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),c(t,e,r,n,d),t}if("undefined"!=typeof Blob&&e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,r,n,d),t}if(e instanceof Boolean){const t=new Boolean(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof Number){const t=new Number(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if(e instanceof String){const t=new String(e.valueOf());return n.set(e,t),c(t,e,r,n,d),t}if("object"==typeof e&&function(e){switch(s.getTag(e)){case o.argumentsTag:case o.arrayTag:case o.arrayBufferTag:case o.dataViewTag:case o.booleanTag:case o.dateTag:case o.float32ArrayTag:case o.float64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.mapTag:case o.numberTag:case o.objectTag:case o.regexpTag:case o.setTag:case o.stringTag:case o.symbolTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),c(t,e,r,n,d),t}return e}function c(e,t,r=e,s,o){const a=[...Object.keys(t),...n.getSymbols(t)];for(let n=0;n<a.length;n++){const i=a[n],c=Object.getOwnPropertyDescriptor(e,i);(null==c||c.writable)&&(e[i]=l(t[i],i,r,s,o))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},3998:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1366),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!=typeof e&&"boolean"!=typeof e&&null!=e&&!n.isSymbol(e))||"string"==typeof e&&(o.test(e)||!s.test(e))||null!=t&&Object.hasOwn(t,e))}},4125:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(1609),s=r(2389),o=r(5773),a=r(8445),i=r(5103),l=r(153),c=r(6359),d=r(790);const u=({availableQuizzes:e,selectedQuizIds:t,onChange:r,disabled:u})=>{const{t:p}=(0,s.Bd)(),{getColor:f,isDarkMode:m}=(0,c.DP)(),[h,g]=(0,n.useState)(""),x=(0,l.d7)(h,300),y={text:m?f("textPrimary","#f9fafb"):f("primary","#1a202c"),textMuted:m?f("textSecondary","#9ca3af"):"#6b7280",accent:f("accent","#f59e0b"),primary:f("primary","#3b82f6"),inputBg:m?"#1f2937":"#ffffff",bgSubtle:m?"#111827":"#f9fafb",border:m?"#374151":"#e5e7eb",hoverBg:m?"#1f2937":"#f3f4f6"},{quizzes:b,loading:v}=(0,i.A)({search:x,autoFetch:!0,perPage:100}),j=x?b:e;return(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:y.text},children:p("admin.questionModal.assignToTests")}),(0,d.jsxs)("div",{className:"relative mb-2",children:[(0,d.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,d.jsx)(a.A,{className:"h-4 w-4",style:{color:y.textMuted}})}),(0,d.jsx)("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:p("admin.questionModal.searchTests"),className:"w-full pl-10 pr-3 py-2 text-sm border rounded-md",style:{backgroundColor:y.inputBg,borderColor:y.border,color:y.text},disabled:u})]}),(0,d.jsxs)("div",{className:"max-h-40 overflow-y-auto border rounded-md p-2 space-y-1",style:{backgroundColor:y.bgSubtle,borderColor:y.border},children:[v&&(0,d.jsx)("p",{className:"text-xs text-center py-2",style:{color:y.textMuted},children:p("common.searching")}),!v&&(j||[]).map(e=>{const n=t.includes(e.id);return(0,d.jsxs)("div",{onClick:()=>(e=>{if(u)return;const n=t.includes(e)?t.filter(t=>t!==e):[...t,e];r(n)})(e.id),className:"flex items-center gap-3 p-2 rounded-md cursor-pointer "+(u?"cursor-not-allowed opacity-70":""),style:{backgroundColor:n?y.hoverBg:"transparent"},onMouseEnter:e=>!u&&(e.currentTarget.style.backgroundColor=y.hoverBg),onMouseLeave:e=>!u&&!n&&(e.currentTarget.style.backgroundColor="transparent"),children:[(0,d.jsx)("div",{className:"w-5 h-5 border rounded flex items-center justify-center flex-shrink-0",style:{backgroundColor:n?y.primary:"transparent",borderColor:n?y.primary:y.border},children:n&&(0,d.jsx)(o.A,{className:"w-4 h-4 text-white"})}),(0,d.jsx)("span",{className:"text-sm",style:{color:y.text},children:e.title?.rendered||e.title})]},e.id)}),!v&&0===(j||[]).length&&(0,d.jsx)("p",{className:"text-xs text-center py-4",style:{color:y.textMuted},children:p("admin.questionModal.noTestsFound")})]})]})}},4128:(e,t,r)=>{var n=r(1800),s=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(s,""):e}},4164:(e,t,r)=>{"use strict";function n(e){var t,r,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(r=n(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function s(){for(var e,t,r=0,s="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=n(e))&&(s&&(s+=" "),s+=t);return s}r.d(t,{$:()=>s,A:()=>o});const o=s},4180:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]])},4200:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8193),s=r(5112),o=r(1465),a=r(3025);t.get=function e(t,r,i){if(null==t)return i;switch(typeof r){case"string":{if(n.isUnsafeProperty(r))return i;const o=t[r];return void 0===o?s.isDeepKey(r)?e(t,a.toPath(r),i):i:o}case"number":case"symbol":{"number"==typeof r&&(r=o.toKey(r));const e=t[r];return void 0===e?i:e}default:{if(Array.isArray(r))return function(e,t,r){if(0===t.length)return r;let s=e;for(let e=0;e<t.length;e++){if(null==s)return r;if(n.isUnsafeProperty(t[e]))return r;s=s[t[e]]}return void 0===s?r:s}(t,r,i);if(r=Object.is(r?.valueOf(),-0)?"-0":String(r),n.isUnsafeProperty(r))return i;const e=t[r];return void 0===e?i:e}}}},4218:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},4247:e=>{e.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},4248:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},4259:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3097),s=r(5711),o=r(316);t.sortBy=function(e,...t){const r=t.length;return r>1&&o.isIterateeCall(e,t[0],t[1])?t=[]:r>2&&o.isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),n.orderBy(e,s.flatten(t),["asc"])}},4297:(e,t,r)=>{e.exports=r(5259).throttle},4335:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},4363:(e,t,r)=>{"use strict";r(2799)},4394:(e,t,r)=>{var n=r(2552),s=r(346);e.exports=function(e){return"symbol"==typeof e||s(e)&&"[object Symbol]"==n(e)}},4471:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},4483:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},4509:(e,t,r)=>{var n=r(2651);e.exports=function(e){return n(this,e).has(e)}},4528:e=>{e.exports=function(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}},4539:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},4569:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(1300);t.toFinite=function(e){return e?(e=n.toNumber(e))===1/0||e===-1/0?(e<0?-1:1)*Number.MAX_VALUE:e==e?e:0:0===e?e:0}},4570:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("ghost",[["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}],["path",{d:"M12 2a8 8 0 0 0-8 8v12l3-3 2.5 2.5L12 19l2.5 2.5L17 19l3 3V10a8 8 0 0 0-8-8z",key:"uwwb07"}]])},4629:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isLeapYear=function(){return this.$y%4==0&&this.$y%100!=0||this.$y%400==0}}}()},4664:(e,t,r)=>{var n=r(9770),s=r(3345),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,i=a?function(e){return null==e?[]:(e=Object(e),n(a(e),function(t){return o.call(e,t)}))}:s;e.exports=i},4684:(e,t,r)=>{var n=r(9302),s=r(5288),o=r(6800),a=r(7241),i=Object.prototype,l=i.hasOwnProperty,c=n(function(e,t){e=Object(e);var r=-1,n=t.length,c=n>2?t[2]:void 0;for(c&&o(t[0],t[1],c)&&(n=1);++r<n;)for(var d=t[r],u=a(d),p=-1,f=u.length;++p<f;){var m=u[p],h=e[m];(void 0===h||s(h,i[m])&&!l.call(e,m))&&(e[m]=d[m])}return e});e.exports=c},4713:(e,t,r)=>{var n=r(2523),s=r(5389),o=r(1489),a=Math.max;e.exports=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var l=null==r?0:o(r);return l<0&&(l=a(i+l,0)),n(e,s(t,3),l)}},4733:(e,t,r)=>{var n=r(1791),s=r(5950);e.exports=function(e,t){return e&&n(t,s(t),e)}},4739:(e,t,r)=>{var n=r(6025);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},4840:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},4857:(e,t,r)=>{"use strict";r.d(t,{A:()=>d});var n=r(1609),s=r.n(n),o=r(8723),a=r(2389),i=r(6359),l=r(790);const c={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base",xs:"px-2 py-1 text-xs"},d=s().forwardRef(({children:e,variant:t="primary",size:r="md",type:n="button",className:s="",isLoading:d=!1,loadingText:u,iconLeft:p,iconRight:f,...m},h)=>{const{t:g}=(0,a.Bd)(),{getColor:x,isDarkMode:y}=(0,i.DP)(),b=u||g("common.loading"),v={primary:x("primary","#3b82f6"),accent:x("accent","#f59e0b"),text:y?x("textPrimary","#f9fafb"):x("primary","#1a202c"),textMuted:y?x("textSecondary","#9ca3af"):"#6b7280",inputBg:y?"rgba(255,255,255,0.05)":"#ffffff",border:y?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",hoverBg:y?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},j=(()=>{switch(t){case"primary":default:return{backgroundColor:v.primary,color:"#ffffff",borderColor:v.primary};case"secondary":return{backgroundColor:v.inputBg,color:v.text,border:`1px solid ${v.border}`};case"danger":return{backgroundColor:"#dc2626",color:"#ffffff",borderColor:"#dc2626"}}})(),w=`inline-flex items-center justify-center font-semibold rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors disabled:opacity-75 disabled:cursor-not-allowed ${c[r]} ${s}`;return(0,l.jsx)("button",{ref:h,type:n,className:w,style:j,disabled:d||m.disabled,onMouseEnter:e=>{d||m.disabled||"secondary"===t&&(e.currentTarget.style.backgroundColor=v.hoverBg)},onMouseLeave:e=>{d||m.disabled||(e.currentTarget.style.backgroundColor=j.backgroundColor)},...m,children:d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{className:"animate-spin h-4 w-4 "+(b?"mr-2":"")}),b]}):(0,l.jsxs)(l.Fragment,{children:[p&&(0,l.jsx)(p,{className:"h-4 w-4 mr-2"}),e,f&&(0,l.jsx)(f,{className:"h-4 w-4 ml-2"})]})})})},4894:(e,t,r)=>{var n=r(1882),s=r(294);e.exports=function(e){return null!=e&&s(e.length)&&!n(e)}},4901:(e,t,r)=>{var n=r(2552),s=r(294),o=r(346),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&s(e.length)&&!!a[n(e)]}},4905:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},4915:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},4932:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}},4934:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},4953:(e,t,r)=>{"use strict";r.d(t,{batchEnrollUsers:()=>c,enrollUserInCourse:()=>i,getUserEnrollments:()=>a,i9:()=>d,unenrollUserFromCourse:()=>l});var n=r(5236),s=r(9700),o=r(1663);const a=async e=>{try{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Valid user ID is required");const t=(0,n.getApiConfig)(),r=`${t.apiUrl}/qe/v1/users/${e}/enrollments`;console.log(`ðŸ“š Fetching enrollments for user ${e}...`);const o=await(0,s.qb)(r,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin"}),a=o.data?.data||o.data;return console.log(`âœ… Fetched ${Array.isArray(a)?a.length:0} enrollments for user ${e}`),Array.isArray(a)?a:[]}catch(t){return console.error(`âŒ Error fetching user enrollments for user ${e}:`,t),(0,o.hS)(t,o.By.FETCH,{resource:"user-enrollments",userId:e,action:"getUserEnrollments"})}},i=async(e,t)=>{try{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Valid user ID is required");if(!t||!Number.isInteger(t)||t<=0)throw new Error("Valid course ID is required");const r=(0,n.getApiConfig)(),o=`${r.apiUrl}/qe/v1/users/${e}/enrollments`;console.log(`âž• Enrolling user ${e} in course ${t}...`);const a=await(0,s.qb)(o,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},credentials:"same-origin",body:JSON.stringify({course_id:t})});return console.log(`âœ… User ${e} successfully enrolled in course ${t}`),a.data}catch(r){return console.error(`âŒ Error enrolling user ${e} in course ${t}:`,r),(0,o.hS)(r,o.By.CREATE,{resource:"user-enrollment",userId:e,courseId:t,action:"enrollUserInCourse"})}},l=async(e,t)=>{try{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Valid user ID is required");if(!t||!Number.isInteger(t)||t<=0)throw new Error("Valid course ID is required");const r=(0,n.getApiConfig)(),o=`${r.apiUrl}/qe/v1/users/${e}/enrollments/${t}`;console.log(`âž– Unenrolling user ${e} from course ${t}...`);const a=await(0,s.qb)(o,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},credentials:"same-origin"});return console.log(`âœ… User ${e} successfully unenrolled from course ${t}`),a.data}catch(r){return console.error(`âŒ Error unenrolling user ${e} from course ${t}:`,r),(0,o.hS)(r,o.By.DELETE,{resource:"user-enrollment",userId:e,courseId:t,action:"unenrollUserFromCourse"})}},c=async(e,t)=>{try{if(!Array.isArray(e)||0===e.length)throw new Error("User IDs array is required");if(!t||!Number.isInteger(t)||t<=0)throw new Error("Valid course ID is required");console.log(`ðŸ“¦ Batch enrolling ${e.length} users in course ${t}...`);const r={success:[],failed:[],total:e.length},n=5;for(let s=0;s<e.length;s+=n){const o=e.slice(s,s+n);(await Promise.allSettled(o.map(e=>i(e,t)))).forEach((e,t)=>{const n=o[t];"fulfilled"===e.status&&!1!==e.value?.success?r.success.push(n):r.failed.push({userId:n,error:e.reason?.message||"Unknown error"})})}return console.log(`âœ… Batch enrollment complete: ${r.success.length} success, ${r.failed.length} failed`),r}catch(e){throw console.error("âŒ Error in batch enrollment:",e),e}},d=async(e,t={})=>{try{if(!e||"number"!=typeof e&&"string"!=typeof e)throw new Error("Valid course ID is required");const{page:r=1,perPage:o=50,includeGhosts:a=!1}=t,i=(0,n.getApiConfig)(),l=new URLSearchParams({page:r.toString(),per_page:o.toString(),include_ghosts:a.toString()}),c=`${i.apiUrl}/qe/v1/courses/${e}/enrolled-users?${l}`;console.log(`ðŸ‘¥ Fetching enrolled users for course ${e}...`);const d=await(0,s.qb)(c,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":i.nonce},credentials:"same-origin"}),u=d.data?.data||[],p=d.data?.meta||{};return console.log(`âœ… Fetched ${u.length} enrolled users for course ${e}`),{data:u,meta:p}}catch(t){return console.error(`âŒ Error fetching enrolled users for course ${e}:`,t),(0,o.hS)(t,o.By.FETCH,{resource:"enrolled-users",courseId:e,action:"getEnrolledUsers"})}}},4979:(e,t,r)=>{"use strict";r.d(t,{$$:()=>h,Es:()=>f,KG:()=>x,Ks:()=>S,Ll:()=>i,Re:()=>k,Sw:()=>o,TW:()=>p,WQ:()=>N,YG:()=>j,YN:()=>g,ZC:()=>b,_q:()=>m,ag:()=>A,e_:()=>_,jn:()=>s,kx:()=>C,l6:()=>a,lk:()=>y,sb:()=>d,wz:()=>c,xZ:()=>u,zk:()=>l});var n=r(1609);function s(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}const o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function a(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function i(e){return"nodeType"in e}function l(e){var t,r;return e?a(e)?e:i(e)&&null!=(t=null==(r=e.ownerDocument)?void 0:r.defaultView)?t:window:window}function c(e){const{Document:t}=l(e);return e instanceof t}function d(e){return!a(e)&&e instanceof l(e).HTMLElement}function u(e){return e instanceof l(e).SVGElement}function p(e){return e?a(e)?e.document:i(e)?c(e)?e:d(e)||u(e)?e.ownerDocument:document:document:document}const f=o?n.useLayoutEffect:n.useEffect;function m(e){const t=(0,n.useRef)(e);return f(()=>{t.current=e}),(0,n.useCallback)(function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return null==t.current?void 0:t.current(...r)},[])}function h(){const e=(0,n.useRef)(null);return[(0,n.useCallback)((t,r)=>{e.current=setInterval(t,r)},[]),(0,n.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}function g(e,t){void 0===t&&(t=[e]);const r=(0,n.useRef)(e);return f(()=>{r.current!==e&&(r.current=e)},t),r}function x(e,t){const r=(0,n.useRef)();return(0,n.useMemo)(()=>{const t=e(r.current);return r.current=t,t},[...t])}function y(e){const t=m(e),r=(0,n.useRef)(null),s=(0,n.useCallback)(e=>{e!==r.current&&(null==t||t(e,r.current)),r.current=e},[]);return[r,s]}function b(e){const t=(0,n.useRef)();return(0,n.useEffect)(()=>{t.current=e},[e]),t.current}let v={};function j(e,t){return(0,n.useMemo)(()=>{if(t)return t;const r=null==v[e]?0:v[e]+1;return v[e]=r,e+"-"+r},[e,t])}function w(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((t,r)=>{const n=Object.entries(r);for(const[r,s]of n){const n=t[r];null!=n&&(t[r]=n+e*s)}return t},{...t})}}const N=w(1),k=w(-1);function C(e){if(!e)return!1;const{KeyboardEvent:t}=l(e.target);return t&&e instanceof t}function _(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=l(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const S=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[S.Translate.toString(e),S.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),E="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function A(e){return e.matches(E)?e:e.querySelector(E)}},5012:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(316),s=r(4569);t.range=function(e,t,r){r&&"number"!=typeof r&&n.isIterateeCall(e,t,r)&&(t=r=void 0),e=s.toFinite(e),void 0===t?(t=e,e=0):t=s.toFinite(t),r=void 0===r?e<t?1:-1:s.toFinite(r);const o=Math.max(Math.ceil((t-e)/(r||1)),0),a=new Array(o);for(let t=0;t<o;t++)a[t]=e,e+=r;return a}},5026:(e,t,r)=>{"use strict";r.d(t,{A3:()=>a,NX:()=>o,Xi:()=>l,pi:()=>i});const n=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.api_url)throw new Error("API URL not configured in WordPress");return e},s=async(e,t={})=>{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":n().nonce},credentials:"same-origin",...t},s=await fetch(e,r);if(!s.ok){const e=await s.text();throw new Error(`API Error ${s.status}: ${s.statusText} - ${e}`)}return s},o=async(e,t={})=>{try{const r=n(),{perPage:o=100,search:a="",hideEmpty:i=!1,fetchAll:l=!1}=t,c=new URLSearchParams({per_page:o.toString(),hide_empty:i.toString(),_fields:"id,name,slug,description,count,parent,meta"});a&&c.append("search",a);const d=`${r.api_url}/wp/v2/${e}?${c}`,u=await s(d),p=await u.json(),f=parseInt(u.headers.get("X-WP-TotalPages")||"1",10);if(l&&f>1){const t=[];for(let n=2;n<=f;n++){const o=new URLSearchParams(c);o.set("page",n.toString());const a=`${r.api_url}/wp/v2/${e}?${o}`,i=await s(a),l=await i.json();t.push(...l)}p.push(...t)}return p}catch(t){throw console.error(`âŒ Error fetching ${e} terms:`,t),t}},a=async(e,t)=>{try{const r=`${n().api_url}/wp/v2/${e}`;console.log(`âž• Creating ${e} term:`,t.name);const o=await s(r,{method:"POST",body:JSON.stringify(t)}),a=await o.json();return console.log(`âœ… Created ${e} term:`,a.name,`(ID: ${a.id})`),a}catch(t){throw console.error(`âŒ Error creating ${e} term:`,t),t}},i=async(e,t,r)=>{try{const o=`${n().api_url}/wp/v2/${e}/${t}`;console.log(`âœï¸ Updating ${e} term #${t}`);const a=await s(o,{method:"POST",body:JSON.stringify(r)}),i=await a.json();return console.log(`âœ… Updated ${e} term:`,i.name),i}catch(r){throw console.error(`âŒ Error updating ${e} term #${t}:`,r),r}},l=async(e,t,r=!1)=>{try{const o=`${n().api_url}/wp/v2/${e}/${t}?force=${r}`;console.log(`ðŸ—‘ï¸ Deleting ${e} term #${t}`);const a=await s(o,{method:"DELETE"}),i=await a.json();return console.log(`âœ… Deleted ${e} term`),i}catch(r){throw console.error(`âŒ Error deleting ${e} term #${t}:`,r),r}}},5083:(e,t,r)=>{var n=r(1882),s=r(7296),o=r(3805),a=r(7473),i=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,p=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||s(e))&&(n(e)?p:i).test(a(e))}},5103:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,J:()=>a});var n=r(1609),s=r(7804),o=r(8766);const a=(e={})=>{const{search:t="",courseId:r=null,quizType:a=null,difficulty:i=null,category:l=null,status:c=null,autoFetch:d=!0,perPage:u=20}=e,p=(0,n.useMemo)(()=>e=>({...e,course_id:e.meta?._course_id||null,quiz_type:e.meta?._quiz_type||"standard",difficulty:e.meta?._difficulty_level||"intermediate",category:e.meta?._quiz_category||"",passing_score:parseInt(e.meta?._passing_score||"70"),time_limit:parseInt(e._time_limit||e.meta?._time_limit||"0"),max_attempts:parseInt(e.meta?._max_attempts||"0"),randomize_questions:"yes"===e.meta?._randomize_questions,show_results:"yes"===e.meta?._show_results,enable_negative_scoring:"yes"===e.meta?._enable_negative_scoring,question_ids:e.meta?._quiz_question_ids||[],question_count:Array.isArray(e.meta?._quiz_question_ids)?e.meta._quiz_question_ids.length:0,total_points:parseInt(e.meta?._total_points||"0"),instructions:e.meta?._quiz_instructions||"",has_time_limit:parseInt(e._time_limit||e.meta?._time_limit||"0")>0,has_attempt_limit:parseInt(e.meta?._max_attempts||"0")>0,has_questions:Array.isArray(e.meta?._quiz_question_ids)&&e.meta._quiz_question_ids.length>0,is_randomized:"yes"===e.meta?._randomize_questions}),[]),f=(0,n.useMemo)(()=>e=>{const t=e.length;if(0===t)return{total:0,published:0,draft:0,private:0,totalQuestions:0,averageQuestions:0,totalPoints:0,averagePoints:0,byType:{},byDifficulty:{},withTimeLimit:0,withAttemptLimit:0,randomized:0};let r=0,n=0;const s={},o={};let a=0,i=0,l=0;return e.forEach(e=>{r+=e.question_count||0,n+=e.total_points||0;const t=e.quiz_type||"standard";s[t]=(s[t]||0)+1;const c=e.difficulty||"intermediate";o[c]=(o[c]||0)+1,e.has_time_limit&&a++,e.has_attempt_limit&&i++,e.is_randomized&&l++}),{total:t,published:e.filter(e=>"publish"===e.status).length,draft:e.filter(e=>"draft"===e.status).length,private:e.filter(e=>"private"===e.status).length,totalQuestions:r,averageQuestions:t>0?Math.round(r/t):0,totalPoints:n,averagePoints:t>0?Math.round(n/t):0,byType:s,byDifficulty:o,withTimeLimit:a,withAttemptLimit:i,randomized:l}},[]),{items:m,loading:h,creating:g,updating:x,deleting:y,error:b,pagination:v,computed:j,filters:w,updateFilter:N,resetFilters:k,setFilters:C,fetchItems:_,loadMore:S,createItem:E,updateItem:A,deleteItem:M,duplicateItem:T,refresh:P,hasMore:O}=(0,s.q)({service:o,resourceName:"quiz",initialFilters:{search:t,courseId:r,quizType:a,difficulty:i,category:l,status:c||"publish,draft,private"},debounceMs:500,autoFetch:d,perPage:u,dataProcessor:p,computedValuesCalculator:f});return{quizzes:m,loading:h,creating:g,updating:x,deleting:y,error:b,pagination:v,computed:j,filters:w,updateFilter:N,resetFilters:k,setFilters:C,fetchQuizzes:_,loadMoreQuizzes:S,createQuiz:E,updateQuiz:A,deleteQuiz:M,duplicateQuiz:T,refresh:P,publishQuiz:async e=>A(e,{status:"publish"}),unpublishQuiz:async e=>A(e,{status:"draft"}),addQuestionToQuiz:async(e,t)=>{const r=m.find(t=>t.id===e);if(!r)throw new Error("Quiz not found");const n=r.question_ids||[];return n.includes(t)?(console.log("âš ï¸ Question already in quiz"),r):A(e,{questionIds:[...n,t]})},removeQuestionFromQuiz:async(e,t)=>{const r=m.find(t=>t.id===e);if(!r)throw new Error("Quiz not found");const n=r.question_ids||[];return A(e,{questionIds:n.filter(e=>e!==t)})},updateQuizSettings:async(e,t)=>{const r=["passingScore","timeLimit","maxAttempts","randomizeQuestions","showResults","enableNegativeScoring"],n={};return Object.keys(t).forEach(e=>{r.includes(e)&&(n[e]=t[e])}),A(e,n)},reorderQuestions:async(e,t)=>A(e,{questionIds:t}),hasMore:O}},i=a},5107:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},5112:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},5128:(e,t,r)=>{var n=r(909),s=r(4894);e.exports=function(e,t){var r=-1,o=s(e)?Array(e.length):[];return n(e,function(e,n,s){o[++r]=t(e,n,s)}),o}},5160:e=>{e.exports=function(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),(r=r>s?s:r)<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(s);++n<s;)o[n]=e[n+t];return o}},5236:(e,t,r)=>{"use strict";r.d(t,{KZ:()=>s,getApiConfig:()=>n});const n=()=>{const e=window.qe_data||window.qeApiConfig||{},{api_url:t,nonce:r,endpoints:n}=e;if(console.log("ðŸ” API Config Debug:",{hasQeData:!!window.qe_data,hasQeApiConfig:!!window.qeApiConfig,apiUrl:t,hasNonce:!!r,hasEndpoints:!!n}),!t||!r)throw new Error(`WordPress API configuration not found. \n      Ensure qe_data is properly localized in WordPress. \n      Available data: ${JSON.stringify(e,null,2)}`);const s={apiUrl:t,nonce:r,endpoints:n||{courses:`${t}/wp/v2/qe_course`,lessons:`${t}/wp/v2/qe_lesson`,quizzes:`${t}/wp/v2/qe_quiz`,questions:`${t}/wp/v2/qe_question`,books:`${t}/wp/v2/book`,categories:`${t}/wp/v2/qe_category`,topics:`${t}/wp/v2/qe_topic`,difficulties:`${t}/wp/v2/qe_difficulty`,courseTypes:`${t}/wp/v2/course_type`,media:`${t}/wp/v2/media`,users:`${t}/wp/v2/users`},debug:e.debug||!1,user:e.user||null};return console.log("âœ… Final API Configuration:",s),s},s=()=>{try{const{nonce:e}=n();return{"Content-Type":"application/json","X-WP-Nonce":e}}catch(e){return console.error("âŒ Error getting default headers:",e),{"Content-Type":"application/json"}}}},5244:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},5259:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(8);t.throttle=function(e,t=0,r={}){const{leading:s=!0,trailing:o=!0}=r;return n.debounce(e,t,{leading:s,maxWait:t,trailing:o})}},5288:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5333:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]])},5338:(e,t,r)=>{"use strict";var n=r(5795);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},5389:(e,t,r)=>{var n=r(3663),s=r(7978),o=r(3488),a=r(6449),i=r(583);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?s(e[0],e[1]):n(e):i(e)}},5404:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},5481:(e,t,r)=>{var n=r(9325)["__core-js_shared__"];e.exports=n},5508:(e,t,r)=>{var n=r(6151),s=r(6800),o=r(7400);e.exports=function(e){return function(t,r,a){return a&&"number"!=typeof a&&s(t,r,a)&&(r=a=void 0),t=o(t),void 0===r?(r=t,t=0):r=o(r),a=void 0===a?t<r?1:-1:o(a),n(t,r,a,e)}}},5527:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},5529:(e,t,r)=>{var n=r(9344),s=r(8879),o=r(5527);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:n(s(e))}},5556:(e,t,r)=>{e.exports=r(2694)()},5580:(e,t,r)=>{var n=r(3729)(r(9325),"DataView");e.exports=n},5640:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(1609),s=r(2719),o=r(884);const a=(e={})=>{const{autoFetch:t=!0,perPage:r=24,debounceMs:a=300}=e,[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(!1),[f,m]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null),[x,y]=(0,n.useState)({currentPage:1,totalPages:1,total:0,perPage:r,hasMore:!1}),[b,v]=(0,n.useState)({search:"",course_id:null,lessons:null,category:"all",provider:"all",topic:"all",difficulty:"all",status:"publish,draft,private"}),j=(0,n.useRef)(!0),w=(0,n.useRef)(null),N=(0,n.useRef)(!0);(0,n.useEffect)(()=>(j.current=!0,()=>{j.current=!1,w.current&&clearTimeout(w.current)}),[]);const k=(0,n.useCallback)(async(e=!0)=>{try{d(!0),g(null);const t=e?1:x.currentPage;console.log("ðŸ” useQuestionsAdmin fetchQuestions:",{page:t,filters:b,note:"course_id is UI-only (filters lessons dropdown), only lessons filter goes to API"});const r=await(0,s.getQuestionsForAdmin)({page:t,perPage:x.perPage,search:b.search,lessons:b.lessons,category:b.category,provider:b.provider,topic:b.topic,difficulty:b.difficulty,status:b.status});if(!j.current)return;const n=(r.data||[]).map(o.HB);l(e?n:e=>[...e,...n]),y({currentPage:r.pagination.currentPage,totalPages:r.pagination.totalPages,total:r.pagination.total,perPage:r.pagination.perPage,hasMore:r.pagination.currentPage<r.pagination.totalPages}),console.log("âœ… Questions loaded:",n.length)}catch(e){if(!j.current)return;console.error("âŒ Error fetching questions:",e),g(e.message)}finally{j.current&&d(!1)}},[b,x.currentPage,x.perPage]),C=(0,n.useCallback)(async()=>{if(!x.hasMore||c)return;const e=x.currentPage+1;try{d(!0);const t=await(0,s.getQuestionsForAdmin)({page:e,perPage:x.perPage,search:b.search,lessons:b.lessons,category:b.category,provider:b.provider,topic:b.topic,difficulty:b.difficulty,status:b.status});if(!j.current)return;const r=(t.data||[]).map(o.HB);l(e=>[...e,...r]),y(r=>({...r,currentPage:e,hasMore:e<t.pagination.totalPages})),console.log("âœ… Loaded more questions:",r.length)}catch(e){if(!j.current)return;console.error("âŒ Error loading more:",e),g(e.message)}finally{j.current&&d(!1)}},[x,c,b]),_=(0,n.useCallback)((e,t)=>{v(r=>({...r,[e]:t}))},[]),S=(0,n.useCallback)(async e=>{try{p(!0);const t=await(0,s.create)(e),r=await(0,s.getOne)(t.id),n=(0,o.HB)(r);return l(e=>[n,...e]),y(e=>({...e,total:e.total+1})),n}catch(e){throw console.error("âŒ Error creating question:",e),e}finally{p(!1)}},[]),E=(0,n.useCallback)(async(e,t)=>{try{m(!0),await(0,s.update)(e,t);const r=await(0,s.getOne)(e),n=(0,o.HB)(r);return l(t=>t.map(t=>t.id===e?n:t)),n}catch(e){throw console.error("âŒ Error updating question:",e),e}finally{m(!1)}},[]),A=(0,n.useCallback)(async e=>{try{await(0,s.deleteFn)(e),l(t=>t.filter(t=>t.id!==e)),y(e=>({...e,total:Math.max(0,e.total-1)}))}catch(e){throw console.error("âŒ Error deleting question:",e),e}},[]),M=(0,n.useCallback)(()=>{k(!0)},[k]);(0,n.useEffect)(()=>{if(t||!N.current)return N.current=!1,w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{k(!0)},a),()=>{w.current&&clearTimeout(w.current)};N.current=!1},[b,t,a]);const T=(0,n.useMemo)(()=>({total:i.length,byDifficulty:{easy:i.filter(e=>"easy"===e.meta?._difficulty_level).length,medium:i.filter(e=>"medium"===e.meta?._difficulty_level).length,hard:i.filter(e=>"hard"===e.meta?._difficulty_level).length}}),[i]);return{questions:i,loading:c,creating:u,updating:f,error:h,pagination:x,computed:T,filters:b,updateFilter:_,setFilters:v,fetchQuestions:k,loadMoreQuestions:C,createQuestion:S,updateQuestion:E,deleteQuestion:A,refresh:M,hasMore:x.hasMore}}},5708:function(e,t,r){"use strict";var n,s=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)},function(e,t){function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},o.apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,i=o.length;a<i;a++,s++)n[s]=o[a];return n},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},l=i(r(1609)),c=i(r(5795)),d=i(r(2404)),u=i(r(1574)),p=function(e){function t(t){var r=e.call(this,t)||this;r.dirtyProps=["modules","formats","bounds","theme","children"],r.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],r.state={generation:0},r.selection=null,r.onEditorChange=function(e,t,n,s){var o,a,i,l;"text-change"===e?null===(a=(o=r).onEditorChangeText)||void 0===a||a.call(o,r.editor.root.innerHTML,t,s,r.unprivilegedEditor):"selection-change"===e&&(null===(l=(i=r).onEditorChangeSelection)||void 0===l||l.call(i,t,s,r.unprivilegedEditor))};var n=r.isControlled()?t.value:t.defaultValue;return r.value=null!=n?n:"",r}return s(t,e),t.prototype.validateProps=function(e){var t;if(l.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(l.default.Children.count(e.children)&&"textarea"===(null===(t=l.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var r,n=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var s=this.getEditorContents(),o=null!=(r=e.value)?r:"";this.isEqualValue(o,s)||this.setEditorContents(this.editor,o)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),a(this.cleanProps,this.dirtyProps).some(function(t){return!d.default(e[t],n.props[t])})},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some(function(r){return!d.default(e[r],t.props[r])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var r=this;if(this.editor&&this.shouldComponentRegenerate(e)){var n=this.editor.getContents(),s=this.editor.getSelection();this.regenerationSnapshot={delta:n,selection:s},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var o=this.regenerationSnapshot,a=(n=o.delta,o.selection);delete this.regenerationSnapshot,this.instantiateEditor();var i=this.editor;i.setContents(n),f(function(){return r.setEditorSelection(i,a)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var r=new u.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(r,t.tabIndex),this.hookEditor(r),r},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?d.default(e.ops,t.ops):d.default(e,t)},t.prototype.setEditorContents=function(e,t){var r=this;this.value=t;var n=this.getEditorSelection();"string"==typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),f(function(){return r.setEditorSelection(e,n)})},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var r=e.getLength();t.index=Math.max(0,Math.min(t.index,r-1)),t.length=Math.max(0,Math.min(t.length,r-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var r,n;(null===(n=null===(r=e)||void 0===r?void 0:r.scroll)||void 0===n?void 0:n.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=c.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,r=t.children,n=t.preserveWhitespace,s={key:this.state.generation,ref:function(t){e.editingArea=t}};return l.default.Children.count(r)?l.default.cloneElement(l.default.Children.only(r),s):n?l.default.createElement("pre",o({},s)):l.default.createElement("div",o({},s))},t.prototype.render=function(){var e;return l.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!=e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,r,n){var s,o;if(this.editor){var a=this.isDelta(this.value)?n.getContents():n.getHTML();a!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=a,null===(o=(s=this.props).onChange)||void 0===o||o.call(s,e,t,r,n))}},t.prototype.onEditorChangeSelection=function(e,t,r){var n,s,o,a,i,l;if(this.editor){var c=this.getEditorSelection(),u=!c&&e,p=c&&!e;d.default(e,c)||(this.selection=e,null===(s=(n=this.props).onChangeSelection)||void 0===s||s.call(n,e,t,r),u?null===(a=(o=this.props).onFocus)||void 0===a||a.call(o,e,t,r):p&&(null===(l=(i=this.props).onBlur)||void 0===l||l.call(i,c,t,r)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=u.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(l.default.Component);function f(e){Promise.resolve().then(e)}e.exports=p},5711:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e,t=1){const r=[],n=Math.floor(t),s=(e,t)=>{for(let o=0;o<e.length;o++){const a=e[o];Array.isArray(a)&&t<n?s(a,t+1):r.push(a)}};return s(e,0),r}},5749:(e,t,r)=>{var n=r(1042);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},5750:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,r,n){var s=r.prototype,o=s.format;n.en.formats=e,s.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var r=this.$locale().formats,n=function(t,r){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,n,s){var o=s&&s.toUpperCase();return n||r[s]||e[s]||r[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,r){return t||r.slice(1)})})}(t,void 0===r?{}:r);return o.call(this,n)}}}()},5773:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},5795:e=>{"use strict";e.exports=window.ReactDOM},5861:(e,t,r)=>{var n=r(5580),s=r(8223),o=r(2804),a=r(6545),i=r(8303),l=r(2552),c=r(7473),d="[object Map]",u="[object Promise]",p="[object Set]",f="[object WeakMap]",m="[object DataView]",h=c(n),g=c(s),x=c(o),y=c(a),b=c(i),v=l;(n&&v(new n(new ArrayBuffer(1)))!=m||s&&v(new s)!=d||o&&v(o.resolve())!=u||a&&v(new a)!=p||i&&v(new i)!=f)&&(v=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case h:return m;case g:return d;case x:return u;case y:return p;case b:return f}return t}),e.exports=v},5891:(e,t,r)=>{var n=r(1873),s=r(2428),o=r(6449),a=n?n.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||s(e)||!!(a&&e&&e[a])}},5899:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]])},5911:(e,t,r)=>{var n=r(8859),s=r(4248),o=r(9219);e.exports=function(e,t,r,a,i,l){var c=1&r,d=e.length,u=t.length;if(d!=u&&!(c&&u>d))return!1;var p=l.get(e),f=l.get(t);if(p&&f)return p==t&&f==e;var m=-1,h=!0,g=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++m<d;){var x=e[m],y=t[m];if(a)var b=c?a(y,x,m,t,e,l):a(x,y,m,e,t,l);if(void 0!==b){if(b)continue;h=!1;break}if(g){if(!s(t,function(e,t){if(!o(g,t)&&(x===e||i(x,e,r,a,l)))return g.push(t)})){h=!1;break}}else if(x!==y&&!i(x,y,r,a,l)){h=!1;break}}return l.delete(e),l.delete(t),h}},5950:(e,t,r)=>{var n=r(695),s=r(8984),o=r(4894);e.exports=function(e){return o(e)?n(e):s(e)}},5970:(e,t,r)=>{var n=r(3120);e.exports=function(e){return null!=e&&e.length?n(e,1):[]}},5977:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},6009:(e,t,r)=>{e=r.nmd(e);var n=r(4840),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,a=o&&o.exports===s&&n.process,i=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=i},6012:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6025:(e,t,r)=>{var n=r(5288);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}},6038:(e,t,r)=>{var n=r(5861),s=r(346);e.exports=function(e){return s(e)&&"[object Set]"==n(e)}},6110:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},6151:e=>{var t=Math.ceil,r=Math.max;e.exports=function(e,n,s,o){for(var a=-1,i=r(t((n-e)/(s||1)),0),l=Array(i);i--;)l[o?i:++a]=e,e+=s;return l}},6155:(e,t,r)=>{var n=r(4932),s=r(7422),o=r(5389),a=r(5128),i=r(3937),l=r(7301),c=r(3714),d=r(3488),u=r(6449);e.exports=function(e,t,r){t=t.length?n(t,function(e){return u(e)?function(t){return s(t,1===e.length?e[0]:e)}:e}):[d];var p=-1;t=n(t,l(o));var f=a(e,function(e,r,s){return{criteria:n(t,function(t){return t(e)}),index:++p,value:e}});return i(f,function(e,t){return c(e,t,r)})}},6166:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]])},6169:(e,t,r)=>{var n=r(9653);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},6172:(e,t,r)=>{"use strict";r.d(t,{A:()=>i,h:()=>a});var n=r(1609),s=r(7804),o=r(6584);const a=(e={})=>{const{search:t="",category:r=null,difficulty:a=null,status:i=null,enrolledOnly:l=!1,autoFetch:c=!0,perPage:d=100,embed:u=!1,fields:p=null}=e,f=(0,n.useMemo)(()=>e=>({...e,lesson_count:e.meta?._lesson_count||e.lessons_count||0,student_count:e.enrolled_users_count||e.meta?._student_count||0,enrolled_users_count:e.enrolled_users_count||e.meta?.enrolled_users_count||0,price:parseFloat(e.meta?._course_price||0),sale_price:parseFloat(e.meta?._sale_price||0),difficulty:e.meta?._course_difficulty||"intermediate",category:e.meta?._course_category||"general",completion_rate:parseInt(e.meta?._completion_rate||"0"),duration_hours:parseInt(e.meta?._course_duration||"0"),featured:"yes"===e.meta?._featured,on_sale:e.meta?._sale_price&&parseFloat(e.meta._sale_price)<parseFloat(e.meta._course_price||0),has_lessons:(e.meta?._lesson_count||e.lessons_count||0)>0,has_students:(e.enrolled_users_count||e.meta?._student_count||0)>0}),[]),m=(0,n.useMemo)(()=>e=>{if(!Array.isArray(e)||0===e.length)return{totalCourses:0,publishedCourses:0,draftCourses:0,privateCourses:0,totalStudents:0,totalLessons:0,totalPrice:0,averagePrice:0,totalRevenue:0,averageDuration:0,averageCompletionRate:0,featuredCount:0,onSaleCount:0,freeCoursesCount:0,paidCoursesCount:0,byCategory:{},byDifficulty:{}};const t=e.length;let r=0,n=0,s=0,o=0,a=0,i=0,l=0,c=0,d=0,u=0,p=0,f=0,m=0,h=0;const g={},x={};return e.forEach(e=>{const t=e.meta||{},y=e.status||"draft",b=parseFloat(t._price||0),v=parseFloat(t._sale_price||0),j=parseInt(e.enrolled_users_count||t._student_count||0),w=parseInt(t._lesson_count||e.lessons_count||0),N=parseInt(t._course_duration||0),k=parseFloat(t._completion_rate||0),C="yes"===t._featured||!0===t._featured,_=t._product_type||"free";"publish"===y&&r++,"draft"===y&&n++,"private"===y&&s++,o+=j,a+=w,"paid"===_&&b>0?(i+=b,l++,h++,c+=(v>0&&v<b?v:b)*j,v>0&&v<b&&f++):"free"!==_&&0!==b||m++,N>0&&(d+=N),k>0&&(u+=k),C&&p++;const S=e.qe_category||[];Array.isArray(S)&&S.length>0?S.forEach(t=>{const r=e._embedded?.["wp:term"]?.[0]?.find(e=>e.id===t)?.name||"Uncategorized";g[r]=(g[r]||0)+1}):g.Uncategorized=(g.Uncategorized||0)+1;const E=t._course_difficulty||t._difficulty||"intermediate";x[E]=(x[E]||0)+1}),{totalCourses:t,publishedCourses:r,draftCourses:n,privateCourses:s,totalStudents:o,totalLessons:a,totalPrice:i,averagePrice:l>0?Math.round(i/l*100)/100:0,totalRevenue:Math.round(100*c)/100,averageDuration:t>0?Math.round(d/t):0,averageCompletionRate:t>0?Math.round(u/t):0,featuredCount:p,onSaleCount:f,freeCoursesCount:m,paidCoursesCount:h,byCategory:g,byDifficulty:x}},[]),{items:h,loading:g,creating:x,updating:y,deleting:b,error:v,pagination:j,computed:w,filters:N,updateFilter:k,resetFilters:C,setFilters:_,fetchItems:S,loadMore:E,createItem:A,updateItem:M,deleteItem:T,duplicateItem:P,refresh:O,hasMore:z}=(0,s.q)({service:o,resourceName:"course",initialFilters:{search:t,category:r,difficulty:a,status:i||"publish",enrolledOnly:l,embed:u,fields:p},debounceMs:500,autoFetch:c,perPage:d,dataProcessor:f,computedValuesCalculator:m});return{courses:h,loading:g,creating:x,updating:y,deleting:b,error:v,pagination:j,computed:w,filters:N,updateFilter:k,resetFilters:C,setFilters:_,fetchCourses:S,loadMoreCourses:E,createCourse:A,updateCourse:M,deleteCourse:T,duplicateCourse:P,refresh:O,publishCourse:async e=>M(e,{status:"publish"}),unpublishCourse:async e=>M(e,{status:"draft"}),toggleFeatured:async(e,t)=>M(e,{featured:t}),updatePrice:async(e,t,r=null)=>M(e,{price:t,...null!==r&&{salePrice:r}}),hasMore:z}},i=a},6189:e=>{var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},6241:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},6316:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},6335:(e,t,r)=>{"use strict";r.d(t,{A:()=>k});var n=r(1609),s=r(2389),o=r(7946),a=r(1464),i=r(8723),l=r(827),c=r(1436),d=r(9612),u=r(697),p=r(8852),f=r(2708),m=r(8697),h=r(6359),g=r(8245),x=r(8004),y=r(3375),b=r(3627),v=r(4979),j=r(790);const w=({chapter:e,onDelete:t,modalColors:r})=>{const{attributes:n,listeners:s,setNodeRef:o,transform:a,transition:i}=(0,b.gl)({id:e.id}),d={transform:v.Ks.Transform.toString(a),transition:i,backgroundColor:r.bgInput,border:`1px solid ${r.border}`};return(0,j.jsxs)("div",{ref:o,style:d,className:"flex items-center gap-3 p-3 rounded-lg mb-2 group",children:[(0,j.jsx)("div",{...n,...s,className:"cursor-grab text-gray-400 hover:text-gray-600",children:(0,j.jsx)(c.A,{size:16})}),(0,j.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,j.jsx)("div",{className:"font-medium text-sm truncate",style:{color:r.text},children:e.title}),e.pdf?.filename&&(0,j.jsxs)("div",{className:"text-xs truncate flex items-center gap-1",style:{color:r.textMuted},children:[(0,j.jsx)(l.A,{size:12}),e.pdf.filename]})]}),(0,j.jsx)("button",{type:"button",onClick:()=>t(e.id),className:"p-1.5 rounded hover:bg-red-100 text-red-500 transition-colors opacity-0 group-hover:opacity-100",title:"Eliminar capÃ­tulo",children:(0,j.jsx)(f.A,{size:14})})]})},N=({size:e,className:t})=>(0,j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[(0,j.jsx)("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),(0,j.jsx)("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),k=({isOpen:e,bookId:t,mode:r="create",onSave:c,onClose:v,onDelete:k,getBook:C})=>{const{t:_}=(0,s.Bd)(),{getColor:S,isDarkMode:E}=(0,h.DP)(),A={text:E?S("textPrimary","#f9fafb"):S("primary","#1a202c"),textMuted:E?S("textSecondary","#9ca3af"):"#6b7280",accent:S("accent","#f59e0b"),bgModal:E?S("secondaryBackground","#1f2937"):"#ffffff",bgOverlay:"rgba(0,0,0,0.5)",bgInput:E?"rgba(255,255,255,0.05)":"#ffffff",border:E?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",borderFocus:E?S("accent","#f59e0b"):S("primary","#3b82f6"),buttonPrimary:E?S("accent","#f59e0b"):S("primary","#3b82f6"),buttonPrimaryText:"#ffffff",buttonSecondary:E?S("accent","#f59e0b"):S("primary","#3b82f6"),buttonSecondaryText:"#ffffff",buttonDanger:"#ef4444",success:"#10b981",error:"#ef4444"},M=(0,y.FR)((0,y.MS)(y.AN),(0,y.MS)(y.uN,{coordinateGetter:b.JR})),[T,P]=(0,n.useState)({title:"",description:"",status:"publish",start_date:"",end_date:"",featured_media:null,featured_image_url:null,pdf:{file_id:null,filename:null,url:null},chapters:[]}),[O,z]=(0,n.useState)(0),[q,D]=(0,n.useState)(!1),[I,L]=(0,n.useState)(!1),[R,$]=(0,n.useState)(!1),[B,F]=(0,n.useState)(!1),[U,W]=(0,n.useState)(0),[H,Q]=(0,n.useState)(null),[V,Y]=(0,n.useState)(null),[K,G]=(0,n.useState)(!1),X=(0,n.useRef)(null),J=(0,n.useRef)(null);(0,n.useEffect)(()=>{e&&("edit"===r&&t&&C?ee():"create"===r&&Z())},[e,t,r]);const Z=()=>{P({title:"",description:"",status:"publish",start_date:"",end_date:"",featured_media:null,featured_image_url:null,pdf:{file_id:null,filename:null,url:null},chapters:[]}),z(0),D(!1),Q(null),Y(null),G(!1)},ee=async()=>{L(!0),Q(null);try{const e=await C(t),r=(e.chapters||[]).map((e,t)=>({...e,id:e.id||`chapter_${Date.now()}_${t}`}));P({title:e.title?.rendered||e.title||"",description:e.description||e.content?.rendered||"",status:e.status||"publish",start_date:e.meta?._book_start_date||"",end_date:e.meta?._book_end_date||"",featured_media:e.featured_media||null,featured_image_url:e.featured_image_url||null,pdf:e.pdf||{file_id:null,filename:null,url:null},chapters:r})}catch(e){Q(e.message||"Error loading book")}finally{L(!1)}},te=(e,t)=>{P(r=>({...r,[e]:t}))},re=e=>{P(t=>({...t,chapters:t.chapters.filter(t=>t.id!==e)}))},ne=async()=>{try{const e=await(0,x.I)({title:_("books.selectImage","Seleccionar imagen de portada"),buttonText:_("common.select","Seleccionar"),type:"image"});e&&P(t=>({...t,featured_media:e.id,featured_image_url:e.url}))}catch(e){Q(e.message||_("books.uploadFailed","Error al seleccionar la imagen"))}},se=async e=>{if(e.preventDefault(),T.title.trim())if("create"!==r||0!==T.chapters.length){$(!0),Q(null);try{await c({title:T.title,description:T.description,status:T.status,featured_media:T.featured_media,pdf_file_id:T.pdf.file_id,pdf_filename:T.pdf.filename,pdf_url:T.pdf.url,chapters:T.chapters,meta:{_book_start_date:T.start_date||"",_book_end_date:T.end_date||""}}),v()}catch(e){Q(e.message||"Error saving book")}finally{$(!1)}}else Q("Es necesario aÃ±adir al menos una actualizaciÃ³n (PDF) para crear el libro.");else Q("El tÃ­tulo es obligatorio")};return e?(0,j.jsxs)("div",{className:"fixed inset-0 z-[100000] flex items-center justify-center p-4",children:[(0,j.jsx)("div",{className:"absolute inset-0 transition-opacity duration-300",style:{backgroundColor:A.bgOverlay},onClick:v}),(0,j.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] flex flex-col rounded-xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",style:{backgroundColor:A.bgModal},children:[(0,j.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 flex-shrink-0",style:{borderBottom:`1px solid ${A.border}`},children:[(0,j.jsx)("h2",{className:"text-lg font-bold",style:{color:A.text},children:"create"===r?_("books.createBook","Crear Libro"):_("books.editBook","Editar Libro")}),(0,j.jsx)("button",{onClick:v,className:"p-2 rounded-lg transition-colors hover:brightness-110",style:{backgroundColor:A.buttonSecondary,color:A.buttonSecondaryText},children:(0,j.jsx)(m.A,{size:20})})]}),I?(0,j.jsx)("div",{className:"flex-1 flex items-center justify-center p-12",children:(0,j.jsx)(i.A,{className:"w-8 h-8 animate-spin",style:{color:A.accent}})}):(0,j.jsxs)("form",{onSubmit:se,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[H&&(0,j.jsxs)("div",{className:"px-4 py-3 rounded-lg flex items-center gap-2",style:{backgroundColor:`${A.error}15`,border:`1px solid ${A.error}30`,color:A.error},children:[(0,j.jsx)(o.A,{size:18})," ",(0,j.jsx)("span",{className:"text-sm",children:H})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("label",{className:"block text-sm font-medium mb-2",style:{color:A.text},children:[_("books.title","TÃ­tulo")," *"]}),(0,j.jsx)("input",{type:"text",value:T.title,onChange:e=>te("title",e.target.value),required:!0,className:"w-full px-4 py-2.5 rounded-lg text-sm transition-colors focus:ring-2 outline-none",style:{backgroundColor:A.bgInput,border:`1px solid ${A.border}`,color:A.text,"--tw-ring-color":A.accent}})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:A.text},children:_("books.status","Estado")}),(0,j.jsxs)("select",{value:T.status,onChange:e=>te("status",e.target.value),className:"w-full px-4 py-2.5 rounded-lg text-sm transition-colors focus:ring-2 outline-none",style:{backgroundColor:A.bgInput,border:`1px solid ${A.border}`,color:A.text,"--tw-ring-color":A.accent},children:[(0,j.jsx)("option",{value:"publish",children:_("common.published","Publicado")}),(0,j.jsx)("option",{value:"draft",children:_("common.draft","Borrador")})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:A.text},children:_("books.startDate","Fecha de inicio")}),(0,j.jsx)("input",{type:"date",value:T.start_date,onChange:e=>te("start_date",e.target.value),className:"w-full px-4 py-2.5 rounded-lg text-sm transition-colors focus:ring-2 outline-none",style:{backgroundColor:A.bgInput,border:`1px solid ${A.border}`,color:A.text,"--tw-ring-color":A.accent}})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:A.text},children:_("books.endDate","Fecha de fin")}),(0,j.jsx)("input",{type:"date",value:T.end_date,onChange:e=>te("end_date",e.target.value),className:"w-full px-4 py-2.5 rounded-lg text-sm transition-colors focus:ring-2 outline-none",style:{backgroundColor:A.bgInput,border:`1px solid ${A.border}`,color:A.text,"--tw-ring-color":A.accent}})]})]}),(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,j.jsx)("span",{className:"text-sm font-medium",style:{color:A.text},children:_("books.description","DescripciÃ³n")}),(0,j.jsx)("p",{className:"text-xs",style:{color:A.textMuted},children:_("books.woocommerceReminder","Recuerda dar de alta el libro en Woocommerce para que estÃ© disponible para la compra")})]})}),(0,j.jsxs)("div",{className:"p-4 rounded-xl",style:{backgroundColor:E?"rgba(0,0,0,0.2)":"#f8f9fa"},children:[(0,j.jsxs)("label",{className:"block text-sm font-medium mb-3",style:{color:A.text},children:[_("books.fullPdf","Libro Completo (PDF)"),(0,j.jsx)("span",{className:"text-xs font-normal ml-2 opacity-70",children:_("common.optional","Opcional")})]}),T.pdf.file_id?(0,j.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:A.border,backgroundColor:A.bgModal},children:[(0,j.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,j.jsx)(l.A,{size:18,className:"text-red-500 shrink-0"}),(0,j.jsx)("div",{className:"truncate",children:(0,j.jsx)("p",{className:"text-sm font-medium truncate",style:{color:A.text},children:T.pdf.filename})})]}),(0,j.jsx)("button",{type:"button",onClick:()=>{P(e=>({...e,pdf:{file_id:null,filename:null,url:null}}))},className:"p-1.5 hover:bg-red-50 text-red-500 rounded transition-colors",children:(0,j.jsx)(f.A,{size:16})})]}):(0,j.jsxs)("div",{onClick:()=>!B&&X.current?.click(),className:"border-2 border-dashed rounded-lg p-6 flex flex-col items-center justify-center cursor-pointer transition-colors "+(B?"opacity-50 cursor-wait":"hover:border-blue-500"),style:{borderColor:A.border},children:[(0,j.jsx)("input",{type:"file",accept:"application/pdf",ref:X,onChange:async e=>{const t=e.target.files?.[0];if(!t)return;const r=(0,g.nJ)(t,{maxSize:52428800,allowedTypes:["application/pdf"]});if(r.isValid){F(!0),Y(null),W(0);try{const e=await(0,g.o7)(t,{onProgress:W});P(r=>({...r,pdf:{file_id:e.id,filename:t.name,url:e.url}}))}catch(e){Y(e.message||_("books.uploadFailed","Error al subir el archivo"))}finally{F(!1),X.current&&(X.current.value="")}}else Y(r.error)},className:"hidden",disabled:B}),(0,j.jsx)(a.A,{size:24,style:{color:A.textMuted},className:"mb-2"}),(0,j.jsx)("span",{className:"text-sm font-medium",style:{color:A.textMuted},children:B?"Subiendo...":_("books.uploadPdf","Subir PDF Completo")})]}),V&&(0,j.jsx)("p",{className:"text-xs mt-2 text-red-500",children:V})]})]}),(0,j.jsxs)("div",{className:"space-y-6",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:A.text},children:_("books.featuredImage","Imagen de portada")}),T.featured_image_url?(0,j.jsxs)("div",{className:"relative rounded-lg overflow-hidden group h-40 border",style:{borderColor:A.border},children:[(0,j.jsx)("img",{src:T.featured_image_url,alt:"Cover",className:"w-full h-full object-cover"}),(0,j.jsxs)("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[(0,j.jsx)("button",{type:"button",onClick:()=>{P(e=>({...e,featured_media:null,featured_image_url:null}))},className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600",children:(0,j.jsx)(f.A,{size:16})}),(0,j.jsx)("button",{type:"button",onClick:ne,className:"p-2 bg-blue-500 text-white rounded-full hover:bg-blue-600",children:(0,j.jsx)(a.A,{size:16})})]})]}):(0,j.jsxs)("button",{type:"button",onClick:ne,className:"w-full h-40 flex flex-col items-center justify-center rounded-lg border-2 border-dashed transition-colors hover:border-gray-400 group",style:{borderColor:A.border,backgroundColor:"transparent"},children:[(0,j.jsx)(d.A,{size:24,className:"mb-2 group-hover:text-gray-600",style:{color:A.textMuted}}),(0,j.jsx)("span",{className:"text-sm group-hover:text-gray-600",style:{color:A.textMuted},children:"Seleccionar imagen"})]})]}),(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,j.jsxs)("label",{className:"block text-sm font-medium",style:{color:A.text},children:[_("books.updates","Actualizaciones"),"create"===r&&(0,j.jsx)("span",{className:"text-xs font-normal ml-2",style:{color:A.error},children:"*"})]}),(0,j.jsxs)("button",{type:"button",onClick:()=>!q&&J.current?.click(),disabled:q,className:"text-xs flex items-center gap-1 font-medium px-2 py-1 rounded transition-all disabled:opacity-50 hover:brightness-110",style:{backgroundColor:A.buttonSecondary,color:A.buttonSecondaryText},children:[(0,j.jsx)("input",{type:"file",accept:"application/pdf",ref:J,onChange:async e=>{const t=e.target.files?.[0];if(!t)return;const r=(0,g.nJ)(t,{maxSize:52428800,allowedTypes:["application/pdf"]});if(r.isValid){D(!0),z(0);try{const e=await(0,g.o7)(t,{onProgress:z}),r={id:`chapter_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:t.name.replace(".pdf",""),date_added:(new Date).toISOString(),pdf:{file_id:e.id,filename:t.name,url:e.url}};P(e=>({...e,chapters:[...e.chapters,r]})),Q(null)}catch(e){alert(_("books.uploadFailed","Error al subir capÃ­tulo"))}finally{D(!1),J.current&&(J.current.value="")}}else alert(r.error)},className:"hidden"}),q?(0,j.jsx)(i.A,{size:12,className:"animate-spin"}):(0,j.jsx)(u.A,{size:14}),q?"Subiendo...":"AÃ±adir PDF"]})]}),(0,j.jsx)("div",{className:"rounded-xl border p-4 min-h-[200px] flex flex-col",style:{backgroundColor:A.bgModal,borderColor:H&&"create"===r&&0===T.chapters.length?A.error:A.border},children:(0,j.jsx)("div",{className:"flex-1",children:0===T.chapters.length?(0,j.jsxs)("div",{className:"h-full flex flex-col items-center justify-center text-gray-400 py-8",children:[(0,j.jsx)(N,{size:32,className:"mb-2 opacity-50"}),(0,j.jsx)("span",{className:"text-sm",children:_("books.noUpdates","Sin actualizaciones")})]}):(0,j.jsx)(y.Mp,{sensors:M,collisionDetection:y.fp,onDragEnd:e=>{const{active:t,over:r}=e;t.id!==r.id&&P(e=>{const n=e.chapters.findIndex(e=>e.id===t.id),s=e.chapters.findIndex(e=>e.id===r.id);return{...e,chapters:(0,b.be)(e.chapters,n,s)}})},children:(0,j.jsx)(b.gB,{items:T.chapters.map(e=>e.id),strategy:b._G,children:T.chapters.map(e=>(0,j.jsx)(w,{chapter:e,onDelete:re,modalColors:A},e.id))})})})})]})]})]})]}),!I&&(0,j.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between flex-shrink-0 border-t",style:{borderColor:A.border,backgroundColor:E?"rgba(0,0,0,0.2)":"#f9fafb"},children:[(0,j.jsx)("div",{children:"edit"===r&&k&&(K?(0,j.jsxs)("div",{className:"flex items-center gap-2",children:[(0,j.jsx)("span",{className:"text-sm text-red-500",children:"Â¿Seguro?"}),(0,j.jsx)("button",{onClick:async()=>{$(!0);try{await k(t),v()}catch(e){Q(e.message),$(!1)}},className:"px-3 py-1.5 rounded-lg bg-red-500 text-white text-xs font-medium",children:"SÃ­, borrar"}),(0,j.jsx)("button",{onClick:()=>G(!1),className:"px-3 py-1.5 text-xs font-medium text-gray-500",children:"No"})]}):(0,j.jsxs)("button",{onClick:()=>G(!0),className:"flex items-center gap-2 text-red-500 text-sm hover:underline font-medium bg-transparent border-0",children:[(0,j.jsx)(f.A,{size:16})," Eliminar libro"]}))}),(0,j.jsxs)("div",{className:"flex items-center gap-3",children:[(0,j.jsx)("button",{onClick:v,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors hover:brightness-110",style:{backgroundColor:A.buttonSecondary,color:A.buttonSecondaryText},children:"Cancelar"}),(0,j.jsxs)("button",{onClick:se,disabled:R||!T.title.trim(),className:"flex items-center gap-2 px-6 py-2 rounded-lg text-sm font-semibold text-white transition-all shadow-md disabled:opacity-50 hover:brightness-110",style:{backgroundColor:A.buttonPrimary},children:[R?(0,j.jsx)(i.A,{size:16,className:"animate-spin"}):(0,j.jsx)(p.A,{size:16}),"create"===r?"Crear Libro":"Guardar Cambios"]})]})]})]})]}):null}},6359:(e,t,r)=>{"use strict";r.d(t,{DP:()=>l,NP:()=>d,SS:()=>i});var n=r(1609),s=r(2452),o=r(790);const a=(0,n.createContext)(),i={light:{primary:"#3b82f6",secondary:"#8b5cf6",accent:"#f59e0b",background:"#f3f4f6",secondaryBackground:"#ffffff",text:"#111827",textPrimary:"#111827",textSecondary:"#6b7280",textColorContrast:"#ffffff",borderColor:"#3b82f6",hoverColor:"#2563eb"},dark:{primary:"#60a5fa",secondary:"#a78bfa",accent:"#fbbf24",background:"#1f2937",secondaryBackground:"#111827",text:"#f9fafb",textPrimary:"#f9fafb",textSecondary:"#9ca3af",textColorContrast:"#ffffff",borderColor:"#60a5fa",hoverColor:"#3b82f6"}},l=()=>{const e=(0,n.useContext)(a);if(!e)throw new Error("useTheme debe ser usado dentro de un ThemeProvider");return e},c=()=>{const e=window.qe_data||{};if(void 0!==e.isDarkMode)return e.isDarkMode;const t=document.documentElement,r=document.body,n=["admin-color-midnight","admin-color-coffee","admin-color-ectoplasm","admin-color-ocean","admin-color-modern"];for(const e of n)if(r.classList.contains(e))return!0;const s=["dark-mode","dark","is-dark","is-dark-theme","theme-dark","dark-theme","night-mode","night","darkmode","color-scheme-dark"];for(const e of s)if(t.classList.contains(e)||r.classList.contains(e))return!0;const o=["data-theme","data-color-scheme","data-mode","data-bs-theme"];for(const e of o){const n=t.getAttribute(e),s=r.getAttribute(e);if("dark"===n||"dark"===s)return!0}const a=["theme","color-scheme","dark-mode","darkMode","theme-mode","flavor","flavor-theme","flavor-mode","flavor-color-scheme"];for(const e of a){const t=localStorage.getItem(e);if("dark"===t||"true"===t||"1"===t)return!0}const i=getComputedStyle(t).getPropertyValue("color-scheme").trim();return!("dark"!==i&&!i.includes("dark"))||null},d=({children:e})=>{const[t,r]=(0,n.useState)((()=>{const e=(window.qe_data||{}).theme;return e&&e.light&&e.dark&&"object"==typeof e.light&&"object"==typeof e.dark?e:(console.warn("Invalid or missing theme in window.qe_data, using DEFAULT_THEME"),i)})()),[l,d]=(0,n.useState)((()=>{const e=localStorage.getItem("qe_dark_mode");if(null!==e)return"true"===e;const t=c();if(null!==t)return localStorage.setItem("qe_dark_mode",String(t)),t;if(window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;return localStorage.setItem("qe_dark_mode",String(e)),e}return!1})()),[f,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(window.matchMedia){const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{null===localStorage.getItem("qe_dark_mode")&&d(e.matches)};return e.addEventListener("change",t),()=>{e.removeEventListener("change",t)}}},[]),(0,n.useEffect)(()=>{h(t,l)},[t,l]);const h=(e,t)=>{e&&e.light&&e.dark||(console.error("Invalid theme data in applyThemeToDOM, using DEFAULT_THEME"),e=i);const r=document.documentElement,n=t?e.dark:e.light;if(!n||"object"!=typeof n)return void console.error("Invalid currentMode in applyThemeToDOM");r.style.setProperty("--qe-primary",n.primary||"#3b82f6"),r.style.setProperty("--qe-secondary",n.secondary||"#8b5cf6"),r.style.setProperty("--qe-accent",n.accent||"#f59e0b"),r.style.setProperty("--qe-background",n.background||"#f3f4f6"),r.style.setProperty("--qe-secondary-background",n.secondaryBackground||"#ffffff"),r.style.setProperty("--qe-text",n.text||"#111827"),r.style.setProperty("--qe-text-primary",n.textPrimary||n.text||"#111827"),r.style.setProperty("--qe-text-secondary",n.textSecondary||(t?"#9ca3af":"#6b7280")),r.style.setProperty("--qe-text-contrast",n.textColorContrast||"#ffffff"),r.style.setProperty("--qe-border-color",n.borderColor||n.primary||"#3b82f6");const s=u(n.primary||"#3b82f6"),o=u(n.secondary||"#8b5cf6"),a=u(n.accent||"#f59e0b");if(r.style.setProperty("--qe-primary-light",`rgba(${s}, 0.1)`),r.style.setProperty("--qe-primary-hover",p(n.primary||"#3b82f6",t?10:-10)),r.style.setProperty("--qe-secondary-light",`rgba(${o}, 0.1)`),r.style.setProperty("--qe-secondary-hover",p(n.secondary||"#8b5cf6",t?10:-10)),r.style.setProperty("--qe-accent-light",`rgba(${a}, 0.1)`),r.style.setProperty("--qe-accent-hover",p(n.accent||"#f59e0b",t?10:-10)),t){r.classList.add("qe-dark-mode"),r.style.setProperty("--qe-border","#374151"),r.style.setProperty("--qe-bg-card",n.secondaryBackground||"#1f2937"),r.style.setProperty("--qe-bg-hover","#374151");const e=u(n.primary||"#60a5fa");r.style.setProperty("--scrollbar-track","rgba(0, 0, 0, 0.2)"),r.style.setProperty("--scrollbar-thumb",`rgba(${e}, 0.4)`),r.style.setProperty("--scrollbar-thumb-hover",`rgba(${e}, 0.6)`),r.style.setProperty("--scrollbar-thumb-active",`rgba(${e}, 0.8)`)}else{r.classList.remove("qe-dark-mode"),r.style.setProperty("--qe-border","#e5e7eb"),r.style.setProperty("--qe-bg-card",n.secondaryBackground||"#ffffff"),r.style.setProperty("--qe-bg-hover","#f9fafb");const e=u(n.primary||"#3b82f6");r.style.setProperty("--scrollbar-track","rgba(0, 0, 0, 0.05)"),r.style.setProperty("--scrollbar-thumb",`rgba(${e}, 0.3)`),r.style.setProperty("--scrollbar-thumb-hover",`rgba(${e}, 0.5)`),r.style.setProperty("--scrollbar-thumb-active",`rgba(${e}, 0.7)`)}},g=(0,n.useCallback)(async e=>{try{return!!(await s.f.updateSettings({theme:e})).success&&(r(e),!0)}catch(e){return console.error("Error updating theme:",e),!1}},[]),x=(0,n.useCallback)(e=>{r(e)},[]),y=(0,n.useCallback)(()=>{d(e=>{const t=!e;return console.log("toggleDarkMode: setting to",t),localStorage.setItem("qe_dark_mode",String(t)),t})},[]),b=(0,n.useCallback)(e=>{localStorage.setItem("qe_dark_mode",String(e)),d(e)},[]),v=(0,n.useCallback)(()=>{const e=c();return null!==e?(localStorage.setItem("qe_dark_mode",String(e)),localStorage.setItem("qe_wp_dark_mode",String(e)),d(e),e):(d(e=>e),null)},[]),j=(0,n.useCallback)(()=>{const e=localStorage.getItem("qe_dark_mode"),t=c();return null!==e&&null!==t&&"true"===e!==t},[]),w=(0,n.useCallback)((e,r="#000000")=>t&&t.light&&t.dark?(l?t.dark:t.light)[e]||r:(console.warn("Theme is invalid in getColor, using DEFAULT_THEME"),(l?i.dark:i.light)[e]||r),[t,l]),N=(0,n.useCallback)(()=>t&&t.light&&t.dark?l?t.dark:t.light:(console.warn("Theme is invalid in getCurrentColors, using DEFAULT_THEME"),l?i.dark:i.light),[t,l]),k=(0,n.useMemo)(()=>({theme:t,isDarkMode:l,loading:f,updateTheme:g,setThemePreview:x,toggleDarkMode:y,setDarkMode:b,syncWithWordPress:v,hasCustomPreference:j,getCurrentColors:N,getColor:w}),[t,l,f,g,x,y,b,v,j,N,w]);return(0,o.jsx)(a.Provider,{value:k,children:e})};function u(e){return`${parseInt(e.slice(1,3),16)}, ${parseInt(e.slice(3,5),16)}, ${parseInt(e.slice(5,7),16)}`}function p(e,t){const r=parseInt(e.slice(1),16),n=Math.round(2.55*t),s=(r>>16)+n,o=(r>>8&255)+n,a=(255&r)+n;return"#"+(16777216+65536*(s<255?s<1?0:s:255)+256*(o<255?o<1?0:o:255)+(a<255?a<1?0:a:255)).toString(16).slice(1)}},6375:(e,t,r)=>{var n=r(4528),s=r(8879),o=r(4664),a=r(3345),i=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,o(e)),e=s(e);return t}:a;e.exports=i},6416:(e,t,r)=>{"use strict";r.d(t,{getCourseLessons:()=>a});var n=r(9700),s=r(5236),o=r(1663);const a=async(e,t={})=>{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid course ID provided");const{page:r=1,perPage:a=100,status:i="publish,draft,private"}=t;try{console.log(`ðŸ“š Getting lessons for course ${e}...`);const t=(0,s.getApiConfig)();console.log("ðŸ”§ API Config:",t);const o=new URLSearchParams({page:r.toString(),per_page:a.toString(),status:i}),l=`${t.apiUrl}/qe/v1/courses/${e}/lessons?${o.toString()}`;console.log("ðŸŒ Requesting URL:",l);const c=await(0,n.qb)(l,{method:"GET",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce}});return console.log("ðŸ“¦ Raw API Result:",c),console.log("ðŸ“š Lessons data:",c.data),console.log("ðŸ” DEBUG: Orden de IDs recibidos de la API:",c.data.data?.map(e=>e.id)),console.log(`âœ… Retrieved ${c.data.data?.length||0} lessons for course ${e}`),{data:c.data.data||[],pagination:c.data.pagination||{total:0,total_pages:0,current_page:1,per_page:a,has_more:!1}}}catch(t){throw console.error(`âŒ Error getting lessons for course ${e}:`,t),console.error("âŒ Error details:",t.message,t.stack),(0,o.hS)(t,"Failed to get course lessons")}}},6440:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},6444:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(1609),s=r(5236);const o={search:"",status:"publish,draft"},a=(e={})=>{const{autoFetch:t=!0,perPage:r=20,debounceMs:a=300}=e,[i,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(null),[f,m]=(0,n.useState)(o),[h,g]=(0,n.useState)({page:1,perPage:r,total:0,totalPages:0}),x=(0,n.useRef)(null),y=(0,n.useRef)(null),b=(0,n.useRef)(!1),v=(0,n.useCallback)(()=>`${(0,s.getApiConfig)().apiUrl}/quiz-extended/v1`,[]),j=(0,n.useCallback)(async(e,t={})=>{const r=(0,s.getApiConfig)(),n=`${v()}${e}`,o=await fetch(n,{...t,headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce,...t.headers},credentials:"same-origin"});if(!o.ok){const e=await o.json().catch(()=>({}));throw new Error(e.message||`HTTP ${o.status}`)}return o.json()},[v]),w=(0,n.useCallback)(async(e=!1,t=null)=>{y.current&&y.current.abort(),y.current=new AbortController,d(!0),p(null);try{const n=t||f,s=e?1:h.page,o=new URLSearchParams({page:s.toString(),per_page:r.toString(),status:n.status||"publish,draft"});n.search&&o.append("search",n.search);const a=await j(`/books?${o.toString()}`,{signal:y.current.signal});if(a.success&&a.data){const e=a.data;l(Array.isArray(e.data)?e.data:[]),g({page:e.pagination?.page||1,perPage:e.pagination?.per_page||r,total:e.pagination?.total||0,totalPages:e.pagination?.total_pages||0})}else l(Array.isArray(a)?a:[])}catch(e){"AbortError"!==e.name&&(console.error("Error fetching books:",e),p(e.message))}finally{d(!1)}},[f,h.page,r,j]),N=(0,n.useCallback)((e,t)=>{m(r=>{const n={...r,[e]:t};return"search"===e?(x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{w(!0,n)},a)):w(!0,n),n})},[w,a]),k=(0,n.useCallback)(async()=>{c||h.page>=h.totalPages||g(e=>({...e,page:e.page+1}))},[c,h.page,h.totalPages]),C=(0,n.useCallback)(async e=>{try{const t=await j(`/books/${e}`);return t.success&&t.data?t.data:t}catch(e){throw console.error("Error fetching book:",e),e}},[j]),_=(0,n.useCallback)(async e=>{d(!0);try{const t=await j("/books",{method:"POST",body:JSON.stringify(e)}),r=t.success&&t.data?t.data:t;if(r&&r.id)return l(e=>[r,...e]),g(e=>({...e,total:e.total+1})),r;throw new Error(t.message||"Failed to create book")}catch(e){throw console.error("Error creating book:",e),e}finally{d(!1)}},[j]),S=(0,n.useCallback)(async(e,t)=>{d(!0);try{const r=await j(`/books/${e}`,{method:"PUT",body:JSON.stringify(t)}),n=r.success&&r.data?r.data:r;if(n&&n.id)return l(t=>t.map(t=>t.id===e?n:t)),n;throw new Error(r.message||"Failed to update book")}catch(e){throw console.error("Error updating book:",e),e}finally{d(!1)}},[j]),E=(0,n.useCallback)(async e=>{d(!0);try{const t=await j(`/books/${e}`,{method:"DELETE"});if(!1!==t.success)return l(t=>t.filter(t=>t.id!==e)),g(e=>({...e,total:Math.max(0,e.total-1)})),t;throw new Error(t.message||"Failed to delete book")}catch(e){throw console.error("Error deleting book:",e),e}finally{d(!1)}},[j]),A=(0,n.useCallback)(async(e="")=>{try{const t=e?`?search=${encodeURIComponent(e)}`:"",r=await j(`/books/wc-products${t}`);return!1!==r.success?r:{data:[],woocommerce_active:!1}}catch(e){return console.error("Error fetching WC products:",e),{data:[],woocommerce_active:!1}}},[j]),M=(0,n.useCallback)(async(e,t)=>{try{const r=await j(`/books/${e}/link-product`,{method:"POST",body:JSON.stringify({product_id:t})});if(r.success){const t=await C(e);return l(r=>r.map(r=>r.id===e?t:r)),r}throw new Error(r.message||"Failed to link product")}catch(e){throw console.error("Error linking product:",e),e}},[j,C]),T=(0,n.useCallback)(async e=>{try{const t=await j(`/books/${e}/unlink-product`,{method:"POST"});if(t.success){const r=await C(e);return l(t=>t.map(t=>t.id===e?r:t)),t}throw new Error(t.message||"Failed to unlink product")}catch(e){throw console.error("Error unlinking product:",e),e}},[j,C]),P=(0,n.useCallback)(()=>{w(!0)},[w]);(0,n.useEffect)(()=>{t&&!b.current&&(b.current=!0,w(!0))},[t,w]),(0,n.useEffect)(()=>{b.current&&h.page>1&&w(!1)},[h.page]),(0,n.useEffect)(()=>()=>{x.current&&clearTimeout(x.current),y.current&&y.current.abort()},[]);const O=(0,n.useMemo)(()=>({hasMore:h.page<h.totalPages,isEmpty:!c&&0===i.length,isFiltered:""!==f.search}),[h,c,i.length,f]);return{books:i,loading:c,error:u,filters:f,pagination:h,computed:O,fetchBooks:w,updateFilter:N,loadMore:k,refresh:P,getBook:C,createBook:_,updateBook:S,deleteBook:E,getWcProducts:A,linkProduct:M,unlinkProduct:T}}},6449:e=>{var t=Array.isArray;e.exports=t},6545:(e,t,r)=>{var n=r(3729)(r(9325),"Set");e.exports=n},6547:(e,t,r)=>{var n=r(3360),s=r(5288),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];o.call(e,t)&&s(a,r)&&(void 0!==r||t in e)||n(e,t,r)}},6584:(e,t,r)=>{"use strict";r.r(t),r.d(t,{batchUpdateOrders:()=>y,courseExists:()=>S,create:()=>p,createCourse:()=>w,delete:()=>m,deleteCourse:()=>k,deleteFn:()=>m,duplicate:()=>h,duplicateCourse:()=>C,duplicateDeep:()=>g,getAll:()=>d,getCount:()=>_,getCourse:()=>j,getCourses:()=>v,getCoursesByCategory:()=>z,getCoursesByDifficulty:()=>q,getEnrolledUsersCount:()=>E,getFeaturedCourses:()=>D,getOne:()=>u,getPublishedCourses:()=>I,publishCourse:()=>M,resetCourse:()=>L,searchCoursesByTitle:()=>O,toggleCourseFeatured:()=>P,unpublishCourse:()=>T,update:()=>f,updateCourse:()=>N,updateCourseStatus:()=>A,updateLessonOrderMap:()=>b,updateOrder:()=>x});var n=r(9700),s=r(8243);const o={_start_date:"",_end_date:"",_price:0,_sale_price:null,_duration_weeks:null,_max_students:null,_difficulty_level:"medium",_product_type:"free",_woocommerce_product_id:0,_lesson_ids:[],_lesson_count:0,_student_count:0,_instructor_id:null,_certificate_template:null,_course_requirements:"",_course_objectives:"",_target_audience:""},a=["publish","draft","private","pending"],i=["easy","medium","hard","beginner","intermediate","advanced"],l=["free","paid"],c=(0,n.eG)("course","courses",{sanitizer:e=>{if(!e)return console.warn("âš ï¸ sanitizeCourseData - No data provided"),null;const t=(0,s.w3)(e.title),r=(0,s.w3)(e.content),n=(0,s.w3)(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:n,status:(0,s.se)(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,menu_order:e.menu_order||0,featured_media:e.featured_media||0,featured_media_url:(0,s.Nc)(e),qe_category:(0,s.KJ)(e.qe_category),qe_difficulty:(0,s.KJ)(e.qe_difficulty),qe_topic:(0,s.KJ)(e.qe_topic),course_type:(0,s.KJ)(e.course_type),meta:{...o,...e.meta},enrolled_users_count:e.enrolled_users_count||0,lessons_count:e.lessons_count||0,is_free:void 0===e.is_free||e.is_free,_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=(0,s.Kf)(e.title,"Course title");r&&t.push(r),e.status&&!a.includes(e.status)&&t.push(`Invalid status. Must be one of: ${a.join(", ")}`),["qe_category","qe_difficulty","qe_topic","course_type"].forEach(r=>{void 0!==e[r]&&(Array.isArray(e[r])||t.push(`${r} must be an array`))});const n=e.meta||e;if(void 0!==n._price&&""!==n._price&&isNaN(parseFloat(n._price))&&t.push("Price must be a valid number"),void 0!==n._sale_price&&""!==n._sale_price&&null!==n._sale_price&&isNaN(parseFloat(n._sale_price))&&t.push("Sale price must be a valid number"),n._price&&n._sale_price&&parseFloat(n._sale_price)>=parseFloat(n._price)&&t.push("Sale price must be less than regular price"),void 0!==n._duration_weeks&&""!==n._duration_weeks&&null!==n._duration_weeks){const e=parseInt(n._duration_weeks);(isNaN(e)||e<=0)&&t.push("Duration must be a positive number")}if(void 0!==n._max_students&&""!==n._max_students&&null!==n._max_students){const e=parseInt(n._max_students);(isNaN(e)||e<=0)&&t.push("Max students must be a positive number")}if(n._difficulty_level&&!i.includes(n._difficulty_level)&&t.push(`Invalid difficulty level. Must be one of: ${i.join(", ")}`),n._product_type&&!l.includes(n._product_type)&&t.push(`Invalid product type. Must be one of: ${l.join(", ")}`),n._start_date&&n._end_date){const e=(0,s.wb)(n._start_date,n._end_date);e&&t.push(e)}return(0,s.vQ)(t)},transformer:e=>{const t={title:(0,s.xV)(e.title),content:(0,s.xV)(e.content||""),excerpt:(0,s.xV)(e.excerpt||""),status:(0,s.se)(e.status,"publish")};if(void 0!==e.menu_order){const r=parseInt(e.menu_order);t.menu_order=isNaN(r)?0:r}if(void 0!==e.featured_media){const r=parseInt(e.featured_media);t.featured_media=isNaN(r)||r<0?0:r}return void 0!==e.qe_category&&(t.qe_category=(0,s.KJ)(e.qe_category)),void 0!==e.qe_difficulty&&(t.qe_difficulty=(0,s.KJ)(e.qe_difficulty)),void 0!==e.qe_topic&&(t.qe_topic=(0,s.KJ)(e.qe_topic)),void 0!==e.course_type&&(t.course_type=(0,s.KJ)(e.course_type)),t.meta={},void 0!==e._start_date?t.meta._start_date=(0,s.iV)(e._start_date):void 0!==e.startDate?t.meta._start_date=(0,s.iV)(e.startDate):void 0!==e.meta?._start_date&&(t.meta._start_date=(0,s.iV)(e.meta._start_date)),void 0!==e._end_date?t.meta._end_date=(0,s.iV)(e._end_date):void 0!==e.endDate?t.meta._end_date=(0,s.iV)(e.endDate):void 0!==e.meta?._end_date&&(t.meta._end_date=(0,s.iV)(e.meta._end_date)),void 0!==e._price?t.meta._price=(0,s.j4)(e._price):void 0!==e.price?t.meta._price=(0,s.j4)(e.price):void 0!==e.meta?._price&&(t.meta._price=(0,s.j4)(e.meta._price)),void 0!==e._sale_price?t.meta._sale_price=(0,s.Rz)(e._sale_price):void 0!==e.salePrice?t.meta._sale_price=(0,s.Rz)(e.salePrice):void 0!==e.meta?._sale_price&&(t.meta._sale_price=(0,s.Rz)(e.meta._sale_price)),void 0!==e._duration_weeks?t.meta._duration_weeks=(0,s.ee)(e._duration_weeks,1):void 0!==e.durationWeeks?t.meta._duration_weeks=(0,s.ee)(e.durationWeeks,1):void 0!==e.meta?._duration_weeks&&(t.meta._duration_weeks=(0,s.ee)(e.meta._duration_weeks,1)),void 0!==e._max_students?t.meta._max_students=(0,s.ee)(e._max_students,1):void 0!==e.maxStudents?t.meta._max_students=(0,s.ee)(e.maxStudents,1):void 0!==e.meta?._max_students&&(t.meta._max_students=(0,s.ee)(e.meta._max_students,1)),void 0!==e._difficulty_level?t.meta._difficulty_level=(0,s.zi)(e._difficulty_level,i,"medium"):void 0!==e.difficulty?t.meta._difficulty_level=(0,s.zi)(e.difficulty,i,"medium"):void 0!==e.meta?._difficulty_level&&(t.meta._difficulty_level=(0,s.zi)(e.meta._difficulty_level,i,"medium")),void 0!==e._product_type?t.meta._product_type=(0,s.zi)(e._product_type,l,"free"):void 0!==e.productType?t.meta._product_type=(0,s.zi)(e.productType,l,"free"):void 0!==e.meta?._product_type&&(t.meta._product_type=(0,s.zi)(e.meta._product_type,l,"free")),void 0!==e._woocommerce_product_id?t.meta._woocommerce_product_id=(0,s.o5)(e._woocommerce_product_id,0,0):void 0!==e.woocommerceProductId?t.meta._woocommerce_product_id=(0,s.o5)(e.woocommerceProductId,0,0):void 0!==e.meta?._woocommerce_product_id&&(t.meta._woocommerce_product_id=(0,s.o5)(e.meta._woocommerce_product_id,0,0)),void 0!==e._lesson_ids?t.meta._lesson_ids=(0,s.E5)(e._lesson_ids):void 0!==e.lessonIds?t.meta._lesson_ids=(0,s.E5)(e.lessonIds):void 0!==e.meta?._lesson_ids&&(t.meta._lesson_ids=(0,s.E5)(e.meta._lesson_ids)),void 0!==e._lesson_order_map?t.meta._lesson_order_map=e._lesson_order_map:void 0!==e.lessonOrderMap?t.meta._lesson_order_map=e.lessonOrderMap:void 0!==e.meta?._lesson_order_map&&(t.meta._lesson_order_map=e.meta._lesson_order_map),void 0!==e._instructor_id?t.meta._instructor_id=(0,s.ee)(e._instructor_id,1):void 0!==e.instructorId?t.meta._instructor_id=(0,s.ee)(e.instructorId,1):void 0!==e.meta?._instructor_id&&(t.meta._instructor_id=(0,s.ee)(e.meta._instructor_id,1)),void 0!==e._course_requirements?t.meta._course_requirements=(0,s.xV)(e._course_requirements):void 0!==e.requirements?t.meta._course_requirements=(0,s.xV)(e.requirements):void 0!==e.meta?._course_requirements&&(t.meta._course_requirements=(0,s.xV)(e.meta._course_requirements)),void 0!==e._course_objectives?t.meta._course_objectives=(0,s.xV)(e._course_objectives):void 0!==e.objectives?t.meta._course_objectives=(0,s.xV)(e.objectives):void 0!==e.meta?._course_objectives&&(t.meta._course_objectives=(0,s.xV)(e.meta._course_objectives)),void 0!==e._target_audience?t.meta._target_audience=(0,s.xV)(e._target_audience):void 0!==e.targetAudience?t.meta._target_audience=(0,s.xV)(e.targetAudience):void 0!==e.meta?._target_audience&&(t.meta._target_audience=(0,s.xV)(e.meta._target_audience)),t.meta={...o,...t.meta},t},buildParams:(e={})=>{const t={...e,orderBy:"menu_order",order:"asc"},r=(0,n.DK)(t);return e.category&&r.append("qe_category",e.category.toString()),r}}),d=async(e={})=>c.getAll(e),u=async(e,t={})=>c.getOne(e,t),p=async e=>c.create(e),f=async(e,t)=>c.update(e,t),m=async(e,t={})=>c.delete(e,t),h=async e=>{try{const t=await u(e);if(!t)throw new Error("Course not found");const r={title:`${t.title?.rendered||t.title||"Untitled"} (Copy)`,description:t.content?.rendered||t.content||"",excerpt:t.excerpt?.rendered||t.excerpt||"",status:"draft",price:t.meta?._course_price||"0",salePrice:t.meta?._sale_price||"",difficulty:t.meta?._course_difficulty||"intermediate",category:t.meta?._course_category||"general",duration:t.meta?._course_duration||0,maxStudents:t.meta?._max_students||0,featured:!1,startDate:"",endDate:""};console.log("ðŸ“‹ Duplicating course (shallow):",e);const n=await p(r);return console.log("âœ… Course duplicated:",n.id),n}catch(t){throw console.error(`âŒ Error duplicating course ${e}:`,t),t}},g=async(e,t=null)=>{try{const r=window.qe_data||{};if(!r.nonce)throw new Error("WordPress configuration not found");const n=`${r.api_url||`${window.location.origin}/wp-json`}/qe/v1/courses/${e}/duplicate`,s={};t&&(s.title=t),console.log("ðŸ“‹ Deep duplicating course:",e,"URL:",n);const o=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},credentials:"same-origin",body:JSON.stringify(s)});if(!o.ok){const e=await o.json().catch(()=>({}));throw new Error(e.message||`API Error ${o.status}: ${o.statusText}`)}const a=await o.json();return console.log("âœ… Course deep duplicated successfully:",{original:e,duplicated:a.data.course_id,lessons:a.data.lessons_count,quizzes:a.data.quizzes_count}),a.data}catch(t){throw console.error(`âŒ Error deep duplicating course ${e}:`,t),t}},x=async(e,t)=>{try{const r=window.qe_data||{};if(!r.nonce||!r.endpoints?.courses)throw new Error("WordPress configuration not found");const n=`${r.endpoints.courses}/${e}`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},credentials:"same-origin",body:JSON.stringify({menu_order:t})});if(!s.ok){const e=await s.text();throw new Error(`API Error ${s.status}: ${s.statusText} - ${e}`)}return await s.json()}catch(t){throw console.error(`âŒ Error updating course order ${e}:`,t),t}},y=async e=>{try{const t=e.map(({id:e,menu_order:t})=>x(e,t));return await Promise.all(t)}catch(e){throw console.error("âŒ Error batch updating course orders:",e),e}},b=async(e,t)=>{try{const r=window.qe_data||{};if(!r.nonce||!r.endpoints?.courses)throw new Error("WordPress configuration not found");const n=`${r.endpoints.courses}/${e}`,s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":r.nonce},credentials:"same-origin",body:JSON.stringify({meta:{_lesson_order_map:t}})});if(!s.ok){const e=await s.text();throw new Error(`API Error ${s.status}: ${s.statusText} - ${e}`)}return await s.json()}catch(t){throw console.error(`âŒ Error updating lesson order map for course ${e}:`,t),t}},v=d,j=u,w=p,N=f,k=m,C=h,_=async(e={})=>c.getCount(e),S=async e=>{try{return!!await u(e)}catch(e){return!1}},E=async e=>{try{const t=await u(e);return parseInt(t.meta?.enrolled_users_count||"0")}catch(t){return console.error(`âŒ Error getting enrolled users for course ${e}:`,t),0}},A=async(e,t)=>{if(!["publish","draft","private"].includes(t))throw new Error(`Invalid status: ${t}`);return f(e,{status:t})},M=async e=>A(e,"publish"),T=async e=>A(e,"draft"),P=async(e,t)=>f(e,{featured:t}),O=async(e,t={})=>d({...t,search:e}),z=async(e,t={})=>d({...t,category:e}),q=async(e,t={})=>d({...t,difficulty:e}),D=async(e={})=>d({...e,featured:!0}),I=async(e={})=>d({...e,status:"publish"}),L=async e=>{const t=(await Promise.resolve().then(r.t.bind(r,1455,23))).default;return await t({path:`/quiz-extended/v1/courses/${e}/reset`,method:"POST",data:{confirm:!0}})}},6649:(e,t,r)=>{var n=r(3221)();e.exports=n},6669:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var n=r(1609),s=r(3322),o=r(665),a=r(9044),i=r(9764),l=r(6110),c=r(3893),d=r(7504),u=r(7774),p=r(964),f=r(6166);const m=(0,r(9407).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var h=r(8723),g=r(6316),x=r(8635),y=r(7235),b=r(6359),v=r(9700),j=r(5236);const w={async getStats(){try{const e=(0,j.getApiConfig)(),t=await(0,v.qb)(`${e.restUrl}qe/v1/dashboard/stats`);return t.data||t}catch(e){return console.error("Error fetching dashboard stats:",e),{courses:0,lessons:0,quizzes:0,questions:0,students:0,messages:0}}}};var N=r(790);const k=()=>{const{getColor:e,isDarkMode:t}=(0,b.DP)(),[r,v]=(0,n.useState)(null),[j,k]=(0,n.useState)(!0),C=(0,n.useMemo)(()=>({text:t?e("textPrimary","#f9fafb"):e("primary","#1a202c"),textMuted:t?e("textSecondary","#9ca3af"):"#6b7280",accent:e("accent","#f59e0b"),primary:e("primary","#3b82f6"),bgCard:t?e("secondaryBackground","#1f2937"):"#ffffff",bgPage:t?e("secondaryBackground","#111827"):"#f5f7fa",border:t?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",inputBg:t?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:t?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)",success:"#10b981",error:"#ef4444",info:"#3b82f6",warning:"#f59e0b",shadow:t?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",shadowSm:t?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.05)",cardBorder:t?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.04)",accentGlow:t?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)"}),[e,t]);(0,n.useEffect)(()=>{(async()=>{try{const e=await w.getStats();v(e)}catch(e){console.error("Error loading dashboard stats:",e),v({courses:0,lessons:0,quizzes:0,questions:0,students:0,messages:0})}finally{k(!1)}})()},[]);const _=[{to:"/courses",label:"Cursos",icon:o.A,description:"Gestiona tus cursos",color:"#3b82f6"},{to:"/lessons",label:"Lecciones",icon:a.A,description:"Contenido educativo",color:"#8b5cf6"},{to:"/quizzes",label:"Quizzes",icon:i.A,description:"Evaluaciones",color:"#f59e0b"},{to:"/questions",label:"Preguntas",icon:l.A,description:"Banco de preguntas",color:"#10b981"},{to:"/students",label:"Estudiantes",icon:c.A,description:"Usuarios inscritos",color:"#ec4899"},{to:"/messages",label:"Mensajes",icon:d.A,description:"Bandeja de entrada",color:"#06b6d4"},{to:"/books",label:"Libros",icon:u.A,description:"Biblioteca digital",color:"#f97316"},{to:"/settings",label:"ConfiguraciÃ³n",icon:p.A,description:"Ajustes del plugin",color:"#6b7280"}],S=[{key:"courses",label:"Cursos",icon:o.A,color:"#3b82f6"},{key:"lessons",label:"Lecciones",icon:a.A,color:"#8b5cf6"},{key:"quizzes",label:"Quizzes",icon:i.A,color:"#f59e0b"},{key:"questions",label:"Preguntas",icon:l.A,color:"#10b981"},{key:"students",label:"Estudiantes",icon:c.A,color:"#ec4899"},{key:"messages",label:"Mensajes",icon:d.A,color:"#06b6d4"}];return(0,N.jsxs)("div",{className:"flex flex-col h-[calc(100vh-100px)]",style:{backgroundColor:C.bgPage},children:[(0,N.jsx)("div",{className:"flex items-center justify-between px-6 py-4",style:{backgroundColor:C.bgCard,borderBottom:`1px solid ${C.cardBorder}`,boxShadow:C.shadowSm},children:(0,N.jsxs)("div",{className:"flex items-center gap-4",children:[(0,N.jsx)("div",{className:"p-2.5 rounded-xl",style:{background:`linear-gradient(135deg, ${C.accent}, ${C.accent}dd)`,boxShadow:`0 4px 12px ${C.accentGlow}`},children:(0,N.jsx)(f.A,{size:22,className:"text-white"})}),(0,N.jsxs)("div",{children:[(0,N.jsx)("h1",{className:"text-xl font-bold tracking-tight",style:{color:C.text},children:"Quiz Extended"}),(0,N.jsx)("p",{className:"text-xs mt-0.5",style:{color:C.textMuted},children:"Panel de administraciÃ³n"})]})]})}),(0,N.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:[(0,N.jsx)("div",{className:"p-6 rounded-2xl mb-6",style:{background:`linear-gradient(135deg, ${C.accent}15, ${C.primary}10)`,border:`1px solid ${C.cardBorder}`},children:(0,N.jsxs)("div",{className:"flex items-start justify-between",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:C.text},children:"Â¡Bienvenido a Quiz Extended! ðŸ‘‹"}),(0,N.jsx)("p",{className:"text-sm max-w-xl",style:{color:C.textMuted},children:"Tu plataforma completa de aprendizaje para WordPress. Gestiona cursos, lecciones, quizzes y mucho mÃ¡s desde este panel de control."})]}),(0,N.jsxs)("div",{className:"hidden md:flex items-center gap-2 px-4 py-2 rounded-xl",style:{backgroundColor:t?"rgba(16, 185, 129, 0.1)":"#d1fae5",color:C.success},children:[(0,N.jsx)(m,{size:16}),(0,N.jsx)("span",{className:"text-sm font-medium",children:"Plugin activo"})]})]})}),(0,N.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:S.map(e=>{var t;const n=e.icon;return(0,N.jsxs)("div",{className:"p-4 rounded-xl",style:{backgroundColor:C.bgCard,border:`1px solid ${C.cardBorder}`,boxShadow:C.shadowSm},children:[(0,N.jsx)("div",{className:"flex items-center gap-3 mb-2",children:(0,N.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${e.color}15`},children:(0,N.jsx)(n,{size:18,style:{color:e.color}})})}),(0,N.jsx)("div",{className:"text-2xl font-bold",style:{color:C.text},children:j?(0,N.jsx)(h.A,{className:"w-5 h-5 animate-spin",style:{color:C.textMuted}}):null!==(t=r?.[e.key])&&void 0!==t?t:0}),(0,N.jsx)("div",{className:"text-xs",style:{color:C.textMuted},children:e.label})]},e.key)})}),(0,N.jsxs)("h3",{className:"text-sm font-semibold mb-4 flex items-center gap-2",style:{color:C.text},children:[(0,N.jsx)(g.A,{size:16,style:{color:C.accent}}),"Acceso RÃ¡pido"]}),(0,N.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:_.map(e=>{const t=e.icon;return(0,N.jsxs)(s.N_,{to:e.to,className:"group p-4 rounded-xl transition-all hover:scale-[1.02] focus:outline-none",style:{backgroundColor:C.bgCard,border:`1px solid ${C.cardBorder}`,boxShadow:C.shadowSm},children:[(0,N.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,N.jsx)("div",{className:"p-2.5 rounded-xl transition-all group-hover:scale-110",style:{backgroundColor:`${e.color}15`},children:(0,N.jsx)(t,{size:20,style:{color:e.color}})}),(0,N.jsx)(x.A,{size:16,className:"opacity-0 group-hover:opacity-100 transition-opacity",style:{color:C.textMuted}})]}),(0,N.jsx)("h4",{className:"font-semibold text-sm mb-1",style:{color:C.text},children:e.label}),(0,N.jsx)("p",{className:"text-xs",style:{color:C.textMuted},children:e.description})]},e.to)})}),(0,N.jsxs)("div",{className:"p-4 rounded-xl flex items-center justify-between",style:{backgroundColor:C.bgCard,border:`1px solid ${C.cardBorder}`},children:[(0,N.jsxs)("div",{className:"flex items-center gap-3",children:[(0,N.jsx)(y.A,{size:16,style:{color:C.textMuted}}),(0,N.jsxs)("span",{className:"text-xs",style:{color:C.textMuted},children:["Quiz Extended v",window.qe_data?.version||"1.0.0"]})]}),(0,N.jsx)("a",{href:"https://github.com/your-repo/quiz-extended",target:"_blank",rel:"noopener noreferrer",className:"text-xs hover:underline",style:{color:C.accent},children:"DocumentaciÃ³n â†’"})]})]})]})}},6721:(e,t,r)=>{var n=r(1042),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return s.call(t,e)?t[e]:void 0}},6757:(e,t,r)=>{var n=r(1033),s=Math.max;e.exports=function(e,t,r){return t=s(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,i=s(o.length-t,0),l=Array(i);++a<i;)l[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=r(l),n(e,this,c)}}},6761:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},6773:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t,{signal:r,edges:n}={}){let s,o=null;const a=null!=n&&n.includes("leading"),i=null==n||n.includes("trailing"),l=()=>{null!==o&&(e.apply(s,o),s=void 0,o=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,i&&l(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),s=void 0,o=null},p=function(...e){if(r?.aborted)return;s=this,o=e;const t=null==c;d(),a&&t&&l()};return p.schedule=d,p.cancel=u,p.flush=()=>{l()},r?.addEventListener("abort",u,{once:!0}),p}},6800:(e,t,r)=>{var n=r(5288),s=r(4894),o=r(361),a=r(3805);e.exports=function(e,t,r){if(!a(r))return!1;var i=typeof t;return!!("number"==i?s(r)&&o(t,r.length):"string"==i&&t in r)&&n(r[t],e)}},6844:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},6925:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6981:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ie});var n=r(1609),s=r(2389),o=r(6172),a=r(3827),i=r(5103),l=r(3001),c=r(48),d=r(3873),u=r(5244),p=r(3893),f=r(4164),m=r(790);const h=e=>e?.title?.rendered||e?.title||"Curso sin tÃ­tulo",g=({course:e,isSelected:t,onClick:r})=>{const n=(0,f.A)("p-4 cursor-pointer border-l-4 transition-colors duration-150",{"bg-blue-50 border-blue-600":t,"border-transparent hover:bg-gray-50":!t});return(0,m.jsxs)("div",{className:n,onClick:()=>r(e),children:[(0,m.jsx)("h3",{className:"font-semibold text-gray-800 truncate",children:h(e)}),(0,m.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[(0,m.jsx)(u.A,{className:"w-3 h-3"}),(0,m.jsxs)("span",{children:[e.lesson_count||0," Lecciones"]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[(0,m.jsx)(p.A,{className:"w-3 h-3"}),(0,m.jsxs)("span",{children:[e.student_count||0," Estudiantes"]})]})]})]})};var x=r(1436),y=r(2708),b=r(9612),v=r(697),j=r(9222),w=r(9492),N=r(8697),k=r(418),C=r(5708),_=r.n(C),S=r(3375),E=r(3627),A=r(4979),M=r(6584),T=r(5026),P=r(6416),O=r(8004);const z=({tabs:e,activeTab:t=0,setActiveTab:r=()=>{}})=>(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"border-b border-gray-200",children:(0,m.jsx)("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:e.map((e,n)=>(0,m.jsx)("button",{onClick:()=>r(n),className:(0,f.A)("whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm",{"border-blue-600 text-blue-700":t===n,"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":t!==n}),children:e.name},e.name))})}),(0,m.jsx)("div",{className:"pt-6",children:e[t]&&e[t].content})]});var q=r(4857),D=r(5773);const I=({isOpen:e,onClose:t,onAdd:r,resourceName:o,useResourceHook:a,itemsKey:i="items",filterConfigs:l=[],alreadyAddedIds:c=[]})=>{const{t:u}=(0,s.Bd)(),[p,f]=(0,n.useState)([]),[h,g]=(0,n.useState)(""),[x,y]=(0,n.useState)(""),b=(0,n.useRef)(null);(0,n.useEffect)(()=>(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{y(h)},300),()=>{b.current&&clearTimeout(b.current)}),[h]);const v=a({search:x,perPage:100}),j=v[i]||[],w=(0,n.useMemo)(()=>({value:h,onChange:e=>g(e.target.value),placeholder:`Buscar ${o}...`,isLoading:v.loading}),[h,v.loading,o]);return(0,n.useEffect)(()=>{e||(g(""),y(""),f([]))},[e]),e?(0,m.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,m.jsxs)("div",{className:"flex min-h-screen items-center justify-center p-4",children:[(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:t}),(0,m.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] overflow-hidden flex flex-col",children:[(0,m.jsxs)("header",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[(0,m.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Seleccionar ",o]}),(0,m.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:(0,m.jsx)(N.A,{className:"h-5 w-5"})})]}),(0,m.jsx)("div",{className:"p-4 border-b",children:(0,m.jsx)(d.A,{searchConfig:w,filtersConfig:l})}),(0,m.jsxs)("main",{className:"flex-1 overflow-y-auto p-2",children:[v.loading&&(0,m.jsx)("p",{className:"p-4 text-center text-gray-500",children:"Cargando..."}),!v.loading&&j.map(e=>{const t=p.some(t=>t.id===e.id),r=c.includes(e.id);return(0,m.jsxs)("div",{onClick:()=>!r&&(e=>{f(t=>t.some(t=>t.id===e.id)?t.filter(t=>t.id!==e.id):[...t,e])})(e),className:"flex items-center justify-between p-3 rounded-md cursor-pointer "+(r?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"),children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("div",{className:"w-5 h-5 border rounded flex items-center justify-center "+(t?"bg-blue-600 border-blue-600":"border-gray-300"),children:t&&(0,m.jsx)(D.A,{className:"w-4 h-4 text-white"})}),(0,m.jsx)("span",{children:e.title?.rendered||e.title})]}),r&&(0,m.jsx)("span",{className:"text-xs font-semibold text-gray-500",children:"AÃ‘ADIDO"})]},e.id)}),!v.loading&&0===j.length&&(0,m.jsx)("p",{className:"p-4 text-center text-gray-500",children:"No se encontraron resultados."})]}),(0,m.jsxs)("footer",{className:"px-6 py-4 border-t bg-gray-50 flex items-center justify-between",children:[(0,m.jsxs)("p",{className:"text-sm text-gray-600",children:[p.length," seleccionados"]}),(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)(q.A,{variant:"secondary",onClick:()=>{p.length>0&&(r(p),f([]))},disabled:0===p.length,children:"AÃ±adir y Seguir"}),(0,m.jsx)(q.A,{variant:"primary",onClick:()=>{p.length>0&&r([...p]),f([]),t()},disabled:0===p.length,children:"AÃ±adir y Cerrar"})]})]})]})]})}):null};var L=r(4471),R=r(180),$=r(2102),B=r(5107),F=r(9798),U=r(1999),W=r(5977),H=r(7164);const Q=({courseId:e})=>{const{t}=(0,s.Bd)(),[r,o]=(0,n.useState)([]),[a,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1),[f,h]=(0,n.useState)(null),[g,x]=(0,n.useState)(null),[b,v]=(0,n.useState)(20),[j,w]=(0,n.useState)(null),[N,C]=(0,n.useState)(!1),_=(0,n.useCallback)(async()=>{if(e){i(!0),h(null);try{const t=await(0,H.mF)(e);o(t.data?.users||[])}catch(e){console.error("Error fetching ghost users:",e),h("Error al cargar usuarios fantasma")}finally{i(!1)}}},[e]);return(0,n.useEffect)(()=>{_()},[_]),e?(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,m.jsxs)("div",{className:"flex items-start gap-3",children:[(0,m.jsx)(p.A,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{className:"font-medium text-blue-900",children:"Â¿QuÃ© son los usuarios fantasma?"}),(0,m.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Los usuarios fantasma simulan actividad en el curso para crear un baseline de rankings. Son usuarios reales de WordPress pero marcados internamente como fantasma, por lo que sus notas aparecen en las estadÃ­sticas pero no son visibles para los estudiantes regulares."})]})]})}),f&&(0,m.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3",children:[(0,m.jsx)(k.A,{className:"h-5 w-5 text-red-600 flex-shrink-0"}),(0,m.jsx)("p",{className:"text-sm text-red-700",children:f})]}),g&&(0,m.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-center gap-3",children:[(0,m.jsx)(L.A,{className:"h-5 w-5 text-green-600 flex-shrink-0"}),(0,m.jsx)("p",{className:"text-sm text-green-700",children:g})]}),j?.quiz_errors?.length>0&&(0,m.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg overflow-hidden",children:[(0,m.jsxs)("button",{onClick:()=>C(!N),className:"w-full flex items-center justify-between p-4 text-left hover:bg-orange-100 transition-colors",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)(R.A,{className:"h-5 w-5 text-orange-600 flex-shrink-0"}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("p",{className:"font-medium text-orange-900",children:[j.quiz_errors.length," Cuestionario(s) con errores"]}),(0,m.jsx)("p",{className:"text-sm text-orange-700",children:"Estos cuestionarios no pudieron procesarse para los usuarios fantasma"})]})]}),N?(0,m.jsx)($.A,{className:"h-5 w-5 text-orange-600"}):(0,m.jsx)(B.A,{className:"h-5 w-5 text-orange-600"})]}),N&&(0,m.jsxs)("div",{className:"border-t border-orange-200 p-4",children:[(0,m.jsx)("div",{className:"space-y-3",children:j.quiz_errors.map(e=>(0,m.jsxs)("div",{className:"bg-white border border-orange-100 rounded-lg p-3",children:[(0,m.jsxs)("div",{className:"flex items-start justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"font-medium text-gray-900",children:e.quiz_title}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["ID: ",e.quiz_id]})]}),(0,m.jsxs)("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded",children:[e.affected_users," usuario(s) afectados"]})]}),(0,m.jsx)("div",{className:"mt-2 p-2 bg-red-50 rounded text-sm",children:(0,m.jsxs)("p",{className:"text-red-700",children:[(0,m.jsxs)("strong",{children:["Error (",e.error_code,"):"]})," ",e.error]})})]},e.quiz_id))}),j.quiz_statistics&&(0,m.jsxs)("div",{className:"mt-4 pt-4 border-t border-orange-200",children:[(0,m.jsx)("h5",{className:"text-sm font-medium text-orange-900 mb-2",children:"Resumen de EstadÃ­sticas"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[(0,m.jsxs)("div",{className:"bg-white p-2 rounded border border-orange-100",children:[(0,m.jsx)("p",{className:"text-gray-500",children:"Total cuestionarios"}),(0,m.jsx)("p",{className:"font-semibold text-gray-900",children:j.quiz_statistics.total_quizzes_in_course})]}),(0,m.jsxs)("div",{className:"bg-white p-2 rounded border border-orange-100",children:[(0,m.jsx)("p",{className:"text-gray-500",children:"Intentos esperados"}),(0,m.jsx)("p",{className:"font-semibold text-gray-900",children:j.quiz_statistics.total_attempts_expected})]}),(0,m.jsxs)("div",{className:"bg-white p-2 rounded border border-green-100",children:[(0,m.jsx)("p",{className:"text-green-600",children:"Exitosos"}),(0,m.jsx)("p",{className:"font-semibold text-green-700",children:j.quiz_statistics.successful_attempts})]}),(0,m.jsxs)("div",{className:"bg-white p-2 rounded border border-red-100",children:[(0,m.jsx)("p",{className:"text-red-600",children:"Fallidos"}),(0,m.jsx)("p",{className:"font-semibold text-red-700",children:j.quiz_statistics.failed_attempts})]})]})]})]})]}),(0,m.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,m.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Generar Usuarios Fantasma"}),(0,m.jsxs)("div",{className:"flex items-end gap-4",children:[(0,m.jsxs)("div",{className:"flex-1 max-w-xs",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cantidad de usuarios"}),(0,m.jsx)("input",{type:"number",min:"1",max:"50",value:b,onChange:e=>v(Math.min(50,Math.max(1,parseInt(e.target.value)||1))),className:"w-full input border-gray-300 rounded-md"}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"MÃ¡ximo 50 usuarios por generaciÃ³n"})]}),(0,m.jsx)("button",{onClick:async()=>{c(!0),h(null),x(null),w(null);try{const t=(await(0,H.zU)(e,b)).data;w(t);const r=t?.quiz_statistics,n=t?.quiz_errors||[];if(r){const e=r.total_attempts_expected>0?Math.round(r.successful_attempts/r.total_attempts_expected*100):0;let s=`Se crearon ${t?.created_count||0} usuarios fantasma. `;s+=`Cuestionarios: ${r.successful_attempts}/${r.total_attempts_expected} intentos exitosos (${e}%).`,n.length>0&&(s+=` âš ï¸ ${n.length} cuestionario(s) con errores.`,C(!0)),x(s)}else x(`Se crearon ${t?.created_count||0} usuarios fantasma con sus intentos de cuestionarios`);_()}catch(e){console.error("Error generating ghost users:",e),h(e.response?.data?.message||"Error al generar usuarios fantasma")}finally{c(!1)}},disabled:l,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(F.A,{className:"h-4 w-4 animate-spin"}),"Generando..."]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(U.A,{className:"h-4 w-4"}),"Generar Usuarios"]})})]}),(0,m.jsxs)("div",{className:"mt-4 text-sm text-gray-600",children:[(0,m.jsx)("p",{children:(0,m.jsx)("strong",{children:"Cada usuario generado:"})}),(0,m.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1 text-gray-500",children:[(0,m.jsx)("li",{children:"TendrÃ¡ un nombre espaÃ±ol aleatorio"}),(0,m.jsx)("li",{children:"SerÃ¡ inscrito en el curso con progreso del 100%"}),(0,m.jsx)("li",{children:"CompletarÃ¡ todos los cuestionarios del curso"}),(0,m.jsx)("li",{children:"ObtendrÃ¡ notas aleatorias entre 4-9 (con y sin riesgo)"}),(0,m.jsx)("li",{children:"AparecerÃ¡ en los rankings del curso"})]})]})]}),(0,m.jsxs)("div",{className:"bg-white border rounded-lg p-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,m.jsxs)("h4",{className:"font-medium text-gray-900",children:["Usuarios Fantasma Actuales (",r.length,")"]}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsxs)("button",{onClick:_,disabled:a,className:"flex items-center gap-1 text-gray-600 hover:text-gray-900 text-sm",children:[(0,m.jsx)(W.A,{className:"h-4 w-4 "+(a?"animate-spin":"")}),"Actualizar"]}),r.length>0&&(0,m.jsxs)("button",{onClick:async()=>{if(window.confirm("Â¿EstÃ¡s seguro de eliminar todos los usuarios fantasma de este curso? Esta acciÃ³n no se puede deshacer.")){u(!0),h(null),x(null);try{const t=await(0,H.H_)(e);x(t.data?.message||"Usuarios fantasma eliminados"),o([])}catch(e){console.error("Error deleting ghost users:",e),h("Error al eliminar usuarios fantasma")}finally{u(!1)}}},disabled:d,className:"flex items-center gap-1 text-red-600 hover:text-red-800 text-sm",children:[d?(0,m.jsx)(F.A,{className:"h-4 w-4 animate-spin"}):(0,m.jsx)(y.A,{className:"h-4 w-4"}),"Eliminar Todos"]})]})]}),a?(0,m.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,m.jsx)(F.A,{className:"h-6 w-6 animate-spin text-gray-400"})}):0===r.length?(0,m.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,m.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,m.jsx)("p",{children:"No hay usuarios fantasma en este curso"}),(0,m.jsx)("p",{className:"text-sm mt-1",children:"Genera algunos para poblar los rankings"})]}):(0,m.jsx)("div",{className:"max-h-64 overflow-y-auto",children:(0,m.jsxs)("table",{className:"w-full text-sm",children:[(0,m.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:"Nombre"}),(0,m.jsx)("th",{className:"text-left py-2 px-3 font-medium text-gray-700",children:"Email"}),(0,m.jsx)("th",{className:"text-center py-2 px-3 font-medium text-gray-700",children:"Intentos"})]})}),(0,m.jsx)("tbody",{className:"divide-y divide-gray-100",children:r.map(e=>(0,m.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,m.jsx)("td",{className:"py-2 px-3 text-gray-900",children:e.display_name}),(0,m.jsx)("td",{className:"py-2 px-3 text-gray-500",children:e.user_email}),(0,m.jsx)("td",{className:"py-2 px-3 text-center text-gray-600",children:e.attempts_count})]},e.ID))})]})})]}),(0,m.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,m.jsxs)("div",{className:"flex items-start gap-3",children:[(0,m.jsx)(k.A,{className:"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,m.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,m.jsx)("p",{className:"font-medium",children:"Importante"}),(0,m.jsx)("p",{className:"mt-1",children:"Los usuarios fantasma son usuarios reales de WordPress. Si eliminas el curso, recuerda eliminar primero los usuarios fantasma para mantener la base de datos limpia."})]})]})})]}):(0,m.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,m.jsx)(k.A,{className:"h-12 w-12 mx-auto mb-3 text-yellow-500"}),(0,m.jsx)("p",{children:"Guarda el curso primero para poder gestionar usuarios fantasma"})]})};var V=r(4570),Y=r(2307),K=r(665),G=r(4180),X=r(3954),J=r(250),Z=r(7677),ee=r(9700);const te=({courseId:e})=>{const{t}=(0,s.Bd)(),[r,o]=(0,n.useState)([]),[a,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(null),[d,u]=(0,n.useState)(!1),[f,h]=(0,n.useState)({total:0,page:1,per_page:20,total_pages:0,course_title:""}),g=(0,n.useCallback)(async(t=1)=>{if(e){i(!0),c(null);try{const r=window.qe_data?.rest_url||"/wp-json/",n=new URLSearchParams({page:t.toString(),per_page:f.per_page.toString(),include_ghosts:d.toString()}),s=`${r}qe/v1/courses/${e}/enrolled-users?${n}`,a=(await(0,ee.qb)(s)).data;a?.success?(o(a.data||[]),h(a.meta||f)):c(a?.error||"Error al cargar estudiantes")}catch(e){console.error("Error fetching enrolled users:",e),c(e.message||"Error al cargar estudiantes inscritos")}finally{i(!1)}}},[e,d,f.per_page]);(0,n.useEffect)(()=>{g(1)},[e,d]);const x=e=>{e>=1&&e<=f.total_pages&&g(e)},y=e=>e>=7?"text-green-600 bg-green-50":e>=5?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50";return(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,m.jsx)(p.A,{className:"h-5 w-5 text-blue-600"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Estudiantes Inscritos"}),(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:[f.total," estudiante",1!==f.total?"s":""," ",d?"(incluyendo fantasmas)":"(reales)"]})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsxs)("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[(0,m.jsx)("input",{type:"checkbox",checked:d,onChange:e=>u(e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,m.jsx)(V.A,{className:"h-4 w-4 text-gray-400"}),(0,m.jsx)("span",{className:"text-gray-600",children:"Incluir fantasmas"})]}),(0,m.jsx)("button",{onClick:()=>g(f.page),disabled:a,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Actualizar",children:(0,m.jsx)(W.A,{className:"h-5 w-5 "+(a?"animate-spin":"")})})]})]}),l&&(0,m.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:l}),a?(0,m.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,m.jsx)(W.A,{className:"h-8 w-8 text-gray-400 animate-spin"})}):0===r.length?(0,m.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,m.jsx)(p.A,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,m.jsx)("p",{className:"font-medium",children:"No hay estudiantes inscritos"}),(0,m.jsx)("p",{className:"text-sm mt-1",children:"Los estudiantes aparecerÃ¡n aquÃ­ cuando se inscriban al curso"})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"overflow-hidden border border-gray-200 rounded-lg",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,m.jsx)("thead",{className:"bg-gray-50",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estudiante"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,m.jsxs)("div",{className:"flex items-center gap-1",children:[(0,m.jsx)(Y.A,{className:"h-3.5 w-3.5"}),"InscripciÃ³n"]})}),(0,m.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,m.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,m.jsx)(K.A,{className:"h-3.5 w-3.5"}),"Intentos"]})}),(0,m.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,m.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,m.jsx)(G.A,{className:"h-3.5 w-3.5"}),"Promedio"]})}),(0,m.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Mejor Nota"})]})}),(0,m.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>{return(0,m.jsxs)("tr",{className:"hover:bg-gray-50 "+(e.is_ghost?"bg-purple-50/30":""),children:[(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("div",{className:"w-9 h-9 bg-gray-200 rounded-full flex items-center justify-center text-gray-600 font-medium text-sm",children:e.display_name?.charAt(0)?.toUpperCase()||"?"}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.display_name}),e.is_ghost&&(0,m.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs bg-purple-100 text-purple-700",children:[(0,m.jsx)(V.A,{className:"h-3 w-3"}),"Fantasma"]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,m.jsx)(X.A,{className:"h-3 w-3"}),e.email]})]})]})}),(0,m.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:(t=e.enrollment_date,t?new Date(t).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}):"N/A")}),(0,m.jsx)("td",{className:"px-4 py-3 text-center",children:(0,m.jsx)("span",{className:"inline-flex items-center justify-center min-w-[2rem] px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded",children:e.total_attempts})}),(0,m.jsx)("td",{className:"px-4 py-3 text-center",children:e.total_attempts>0?(0,m.jsx)("span",{className:`inline-flex items-center justify-center min-w-[3rem] px-2 py-1 text-xs font-medium rounded ${y(e.avg_score)}`,children:e.avg_score.toFixed(1)}):(0,m.jsx)("span",{className:"text-xs text-gray-400",children:"-"})}),(0,m.jsx)("td",{className:"px-4 py-3 text-center",children:e.total_attempts>0?(0,m.jsx)("span",{className:`inline-flex items-center justify-center min-w-[3rem] px-2 py-1 text-xs font-medium rounded ${y(e.best_score)}`,children:e.best_score.toFixed(1)}):(0,m.jsx)("span",{className:"text-xs text-gray-400",children:"-"})})]},e.id);var t})})]})}),f.total_pages>1&&(0,m.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,m.jsxs)("p",{className:"text-sm text-gray-500",children:["Mostrando ",(f.page-1)*f.per_page+1," - ",Math.min(f.page*f.per_page,f.total)," de ",f.total]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("button",{onClick:()=>x(f.page-1),disabled:1===f.page,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:(0,m.jsx)(J.A,{className:"h-5 w-5"})}),(0,m.jsxs)("span",{className:"text-sm text-gray-600",children:["PÃ¡gina ",f.page," de ",f.total_pages]}),(0,m.jsx)("button",{onClick:()=>x(f.page+1),disabled:f.page===f.total_pages,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:(0,m.jsx)(Z.A,{className:"h-5 w-5"})})]})]})]})]})},re=e=>e?.title?.rendered||e?.title||"Curso sin tÃ­tulo",ne=({status:e})=>{const t={publish:{label:"Publicado",bgColor:"bg-green-100",textColor:"text-green-800",dotColor:"bg-green-500"},draft:{label:"Borrador",bgColor:"bg-yellow-100",textColor:"text-yellow-800",dotColor:"bg-yellow-500"},private:{label:"Privado",bgColor:"bg-orange-100",textColor:"text-orange-800",dotColor:"bg-orange-500"},pending:{label:"Pendiente",bgColor:"bg-blue-100",textColor:"text-blue-800",dotColor:"bg-blue-500"}},r=t[e]||t.draft;return(0,m.jsxs)("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${r.bgColor} ${r.textColor}`,children:[(0,m.jsx)("span",{className:`w-2 h-2 rounded-full ${r.dotColor}`}),r.label]})},se=({lesson:e,onRemove:t})=>{const{attributes:r,listeners:n,setNodeRef:s,transform:o,transition:a}=(0,E.gl)({id:e.id}),i={transform:A.Ks.Transform.toString(o),transition:a};return(0,m.jsxs)("div",{ref:s,style:i,className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("button",{type:"button",...r,...n,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,m.jsx)(x.A,{className:"h-5 w-5"})}),(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title?.rendered||e.title})]}),(0,m.jsx)("button",{type:"button",onClick:()=>t(e.id),className:"text-red-600 hover:text-red-800",children:(0,m.jsx)(y.A,{className:"w-4 h-4"})})]})},oe=({courseId:e,mode:t,onSave:r,onCancel:o,onTriggerCreation:i,isCollapsed:l,categoryOptions:c,onCategoryCreated:d,onOpenBatchActions:u})=>{const{t:h}=(0,s.Bd)(),[g,x]=(0,n.useState)(!1),[y,C]=(0,n.useState)(!1),[A,D]=(0,n.useState)(null),[L,R]=(0,n.useState)({}),[$,B]=(0,n.useState)(0),F=(0,S.FR)((0,S.MS)(S.AN)),{lessons:U,fetchLessons:W}=(0,a.A)({courseId:e,autoFetch:!1,perPage:100}),[H,V]=(0,n.useState)([]),[Y,K]=(0,n.useState)(!1),[G,X]=(0,n.useState)(""),[J,Z]=(0,n.useState)(!1),[ee,oe]=(0,n.useState)(!1),[ae,ie]=(0,n.useState)(!1),[le,ce]=(0,n.useState)(!1),[de,ue]=(0,n.useState)(null),pe=(0,n.useCallback)(()=>{R({title:"",content:"",status:"publish",duration:"",featured_image_id:null,featured_image_url:"",_course_position:"0",_start_date:"",_end_date:"",qe_category:[]}),V([])},[]);(0,n.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&pe();else{x(!0),D(null);try{const t=await(0,M.getOne)(e),r=t.meta||{};R({title:re(t),content:t.content?.rendered||"",status:t.status||"publish",qe_category:t.qe_category||[],duration:r._course_duration||"",featured_image_id:t.featured_media||null,featured_image_url:t._embedded?.["wp:featuredmedia"]?.[0]?.source_url||"",_course_position:r._course_position||"0",_start_date:r._start_date||"",_end_date:r._end_date||""});try{const t=await(0,P.getCourseLessons)(e,{perPage:100});V(t.data||[]),console.log(`âœ… Loaded ${t.data?.length||0} lessons for course ${e}`)}catch(e){console.error("Failed to load lessons:",e),V([])}}catch(e){D("Failed to load course data.")}finally{x(!1)}}})()},[e,t,pe]);const fe=(e,t)=>{R(r=>({...r,[e]:t}))},me=async()=>{try{const e=await(0,O.I)({title:"Seleccionar Imagen Destacada",buttonText:"Usar esta imagen"});if(!e)return;if(e&&e.id&&e.url){const t=parseInt(e.id,10);fe("featured_image_id",t),fe("featured_image_url",e.url)}}catch(e){console.error("Error al seleccionar imagen:",e)}},he=e=>{V(t=>t.filter(t=>t.id!==e))},ge=(0,m.jsxs)("div",{className:"flex flex-col gap-6 h-full",children:[(0,m.jsx)("input",{type:"text",value:L.title||"",onChange:e=>fe("title",e.target.value),placeholder:h("courses.fields.title"),className:(0,f.A)("w-full focus:outline-none bg-transparent flex-shrink-0","create"===t?"text-2xl font-bold":"text-xl font-semibold border-b pb-2 border-gray-200")}),(0,m.jsxs)("div",{className:"flex-shrink-0",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado del Curso"}),(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsxs)("select",{value:L.status||"publish",onChange:e=>fe("status",e.target.value),className:"flex-1 input border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"publish",children:"Publicado"}),(0,m.jsx)("option",{value:"draft",children:"Borrador"}),(0,m.jsx)("option",{value:"private",children:"Privado"})]}),(0,m.jsx)(ne,{status:L.status||"publish"})]}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Los cursos en borrador o privados no se mostrarÃ¡n en el frontend para los estudiantes"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-shrink-0",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h("courses.fields.image")}),L.featured_image_url?(0,m.jsxs)("div",{className:"group relative",children:[(0,m.jsx)("img",{src:L.featured_image_url,alt:"Imagen destacada",className:"w-full h-48 object-cover rounded-lg"}),(0,m.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity rounded-lg",children:(0,m.jsx)("button",{onClick:me,className:"text-white text-sm font-semibold bg-gray-800 bg-opacity-70 px-4 py-2 rounded-md",children:"Cambiar Imagen"})})]}):(0,m.jsxs)("button",{onClick:me,className:"w-full h-48 flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:bg-gray-50",children:[(0,m.jsx)(b.A,{className:"h-10 w-10 text-gray-400 mb-2"}),"Subir Imagen"]})]}),(0,m.jsxs)("div",{className:"flex-shrink-0",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:h("courses.fields.position")}),(0,m.jsx)("input",{type:"number",value:L._course_position||"0",onChange:e=>fe("_course_position",e.target.value),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,m.jsxs)("div",{className:"flex-shrink-0",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:h("courses.fields.category")}),!Y&&(0,m.jsxs)("button",{onClick:()=>K(!0),type:"button",className:"text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[(0,m.jsx)(v.A,{className:"h-4 w-4"})," AÃ±adir Nueva"]})]}),Y&&(0,m.jsx)("div",{className:"mb-3 p-3 bg-gray-50 border rounded-md",children:(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)("input",{type:"text",value:G,onChange:e=>X(e.target.value),placeholder:"Nombre de la categorÃ­a",className:"flex-1 input border-gray-300 rounded-md"}),(0,m.jsx)(q.A,{size:"sm",onClick:async()=>{if(G.trim()){Z(!0);try{const e=await(0,T.A3)("qe_category",{name:G.trim()});d&&d(e),fe("qe_category",[e.id.toString()]),X(""),K(!1)}catch(e){console.error("Error creating category:",e)}finally{Z(!1)}}},isLoading:J,children:"Guardar"}),(0,m.jsx)(q.A,{size:"sm",variant:"secondary",onClick:()=>K(!1),children:"Cancelar"})]})}),(0,m.jsxs)("select",{value:L.qe_category?.[0]||"",onChange:e=>fe("qe_category",[e.target.value]),className:"w-full input border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"",children:h("common.select")}),c.map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 flex-shrink-0",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:h("courses.fields.startDate")}),(0,m.jsx)("input",{type:"date",value:L._start_date||"",onChange:e=>fe("_start_date",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:h("courses.fields.endDate")}),(0,m.jsx)("input",{type:"date",value:L._end_date||"",onChange:e=>fe("_end_date",e.target.value),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,m.jsxs)("div",{className:"flex-shrink-0",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:h("courses.fields.duration")}),(0,m.jsx)("input",{type:"text",value:L.duration||"",onChange:e=>fe("duration",e.target.value),placeholder:"Ej: 10 horas",className:"w-full input border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{className:"flex flex-col flex-1 min-h-0",children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex-shrink-0",children:h("courses.fields.description")}),(0,m.jsx)(_(),{theme:"snow",value:L.content||"",onChange:e=>fe("content",e),className:"h-full"})]})]}),xe=(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,m.jsx)("button",{onClick:()=>oe(!0),className:"bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg text-sm",children:"AÃ±adir Existente"}),(0,m.jsx)("button",{onClick:()=>i("lesson",e=>V(t=>[...t,e])),className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm",children:"Crear Nueva LecciÃ³n"})]}),(0,m.jsx)(S.Mp,{sensors:F,collisionDetection:S.fp,onDragEnd:e=>{const{active:t,over:r}=e;if(r&&t.id!==r.id){const e=H.findIndex(e=>e.id===t.id),n=H.findIndex(e=>e.id===r.id);-1!==e&&-1!==n&&V(t=>(0,E.be)(t,e,n))}},children:(0,m.jsx)(E.gB,{items:H.map(e=>e.id),strategy:E._G,children:(0,m.jsx)("div",{className:"space-y-2",children:H.map(e=>(0,m.jsx)(se,{lesson:e,onRemove:he},e.id))})})}),0===H.length&&(0,m.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Este curso aÃºn no tiene lecciones."})]}),ye=(0,m.jsx)(Q,{courseId:e}),be=(0,m.jsx)(te,{courseId:e}),ve=[{name:h("common.settings"),content:ge},{name:"Constructor",content:xe},..."edit"===t?[{name:"Estudiantes",content:be,icon:p.A},{name:"Usuarios Fantasma",content:ye}]:[]];if(g)return(0,m.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,m.jsx)("p",{children:h("common.loading")})});const je=h("create"===t?"courses.createCourse":"courses.editCourse");return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("div",{className:(0,f.A)("bg-white rounded-lg border border-gray-200 flex flex-col h-full",{"overflow-hidden":l}),children:[(0,m.jsxs)("header",{className:(0,f.A)("flex-shrink-0",{"p-4 border-b flex items-center justify-between":!l,"h-full flex items-center justify-center border-r":l}),children:[(0,m.jsx)("div",{className:(0,f.A)("font-bold text-gray-800",{"transform -rotate-90 whitespace-nowrap text-sm tracking-wider uppercase":l}),children:l?re(L):(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"text-lg",children:je}),"edit"===t&&(0,m.jsx)("p",{className:"text-xs font-normal text-gray-500",children:re(L)})]}),"edit"===t&&L.status&&(0,m.jsx)(ne,{status:L.status})]})}),!l&&(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[u&&(0,m.jsxs)("button",{onClick:u,className:"flex items-center gap-2 bg-purple-600 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-purple-700 transition-colors",title:"Acciones por lotes en Quizzes",children:[(0,m.jsx)(j.A,{className:"h-4 w-4"}),"Batch Quizzes"]}),"edit"===t&&e&&(0,m.jsxs)("button",{onClick:()=>ie(!0),className:"flex items-center gap-2 bg-red-600 text-white font-semibold py-2 px-4 rounded-lg text-sm hover:bg-red-700 transition-colors",title:"Resetear curso - elimina usuarios, intentos y estadÃ­sticas",children:[(0,m.jsx)(w.A,{className:"h-4 w-4"}),"Reset"]}),(0,m.jsx)("button",{onClick:async()=>{C(!0);try{const e={};H.forEach((t,r)=>{e[t.id.toString()]=r+1}),console.log("ðŸ“‹ Saving course with lesson order map:",e);const n={title:L.title,content:L.content,status:L.status,featured_media:L.featured_image_id||0,qe_category:L.qe_category,meta:{_course_duration:L.duration,_lesson_ids:H.map(e=>e.id),_lesson_order_map:e,_course_position:parseInt(L._course_position)||0,_start_date:L._start_date||"",_end_date:L._end_date||""}};await r(n),"create"===t&&o()}catch(e){D(e.message)}finally{C(!1)}},disabled:y,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg text-sm",children:h(y?"common.saving":"common.save")}),(0,m.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-800",children:(0,m.jsx)(N.A,{className:"h-5 w-5"})})]})]}),(0,m.jsxs)("main",{className:(0,f.A)("flex-1 overflow-y-auto",{"p-6":!l,hidden:l}),children:[A&&(0,m.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:A}),(0,m.jsx)(z,{tabs:ve,activeTab:$,setActiveTab:B})]})]}),ae&&(0,m.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,m.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 overflow-hidden",children:[(0,m.jsx)("div",{className:"bg-red-600 p-4",children:(0,m.jsxs)("div",{className:"flex items-center gap-3 text-white",children:[(0,m.jsx)(k.A,{className:"h-6 w-6"}),(0,m.jsx)("h3",{className:"text-lg font-bold",children:"Resetear Curso"})]})}),(0,m.jsx)("div",{className:"p-6",children:de?(0,m.jsx)("div",{children:de.error?(0,m.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,m.jsx)("p",{className:"text-red-700 font-medium",children:"Error al resetear:"}),(0,m.jsx)("p",{className:"text-red-600 text-sm",children:de.error})]}):(0,m.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,m.jsx)("p",{className:"text-green-700 font-medium mb-3",children:"âœ… Curso reseteado exitosamente"}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,m.jsx)("div",{className:"text-gray-600",children:"Inscripciones eliminadas:"}),(0,m.jsx)("div",{className:"font-semibold",children:de.stats?.enrollments_deleted||0}),(0,m.jsx)("div",{className:"text-gray-600",children:"Progreso eliminado:"}),(0,m.jsx)("div",{className:"font-semibold",children:de.stats?.student_progress_deleted||0}),(0,m.jsx)("div",{className:"text-gray-600",children:"Intentos eliminados:"}),(0,m.jsx)("div",{className:"font-semibold",children:de.stats?.attempts_deleted||0}),(0,m.jsx)("div",{className:"text-gray-600",children:"Respuestas eliminadas:"}),(0,m.jsx)("div",{className:"font-semibold",children:de.stats?.answers_deleted||0}),(0,m.jsx)("div",{className:"text-gray-600",children:"Rankings eliminados:"}),(0,m.jsx)("div",{className:"font-semibold",children:de.stats?.rankings_deleted||0}),(0,m.jsx)("div",{className:"text-gray-600",children:"Stats eliminadas:"}),(0,m.jsx)("div",{className:"font-semibold",children:de.stats?.question_stats_deleted||0})]})]})}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("p",{className:"text-gray-700 mb-4",children:["Â¿EstÃ¡s seguro de que quieres resetear el curso ",(0,m.jsxs)("strong",{children:['"',re(L),'"']}),"?"]}),(0,m.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:[(0,m.jsx)("p",{className:"text-amber-800 text-sm font-medium mb-2",children:"Esta acciÃ³n eliminarÃ¡:"}),(0,m.jsxs)("ul",{className:"text-amber-700 text-sm space-y-1 list-disc list-inside",children:[(0,m.jsx)("li",{children:"Todas las inscripciones de usuarios"}),(0,m.jsx)("li",{children:"Todo el progreso de los estudiantes"}),(0,m.jsx)("li",{children:"Todos los intentos de quiz"}),(0,m.jsx)("li",{children:"Todas las respuestas de quiz"}),(0,m.jsx)("li",{children:"Todos los rankings del curso"}),(0,m.jsx)("li",{children:"Todas las estadÃ­sticas de preguntas"})]})]}),(0,m.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[(0,m.jsx)("p",{className:"text-green-800 text-sm font-medium mb-2",children:"Se conservarÃ¡n:"}),(0,m.jsxs)("ul",{className:"text-green-700 text-sm space-y-1 list-disc list-inside",children:[(0,m.jsx)("li",{children:"Lecciones y su contenido"}),(0,m.jsx)("li",{children:"Cuestionarios (quizzes)"}),(0,m.jsx)("li",{children:"Preguntas y respuestas"}),(0,m.jsx)("li",{children:"ConfiguraciÃ³n del curso"})]})]}),(0,m.jsx)("p",{className:"text-red-600 text-sm font-semibold",children:"âš ï¸ Esta acciÃ³n no se puede deshacer"})]})}),(0,m.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end gap-3",children:de?(0,m.jsx)("button",{onClick:()=>{ie(!1),ue(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Cerrar"}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{onClick:()=>ie(!1),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",disabled:le,children:"Cancelar"}),(0,m.jsx)("button",{onClick:async()=>{if(e){ce(!0),ue(null);try{const t=await(0,M.resetCourse)(e);ue(t.data||t),console.log("âœ… Course reset completed:",t)}catch(e){console.error("âŒ Course reset failed:",e),ue({error:e.message||"Error al resetear el curso"})}finally{ce(!1)}}},disabled:le,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",children:le?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Reseteando..."]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(w.A,{className:"h-4 w-4"}),"Confirmar Reset"]})})]})})]})}),(0,m.jsx)(I,{isOpen:ee,onClose:()=>oe(!1),onAdd:e=>{const t=e.filter(e=>!H.some(t=>t.id===e.id));V(e=>[...e,...t])},resourceName:"Lecciones",useResourceHook:a.A,itemsKey:"lessons",alreadyAddedIds:H.map(e=>e.id)})]})};var ae=r(827),ie=r(802),le=r(3610),ce=r(8309),de=r(8852),ue=r(9777),pe=r(8445),fe=r(8766);const me=({value:e,onChange:t,disabled:r=!1,onCreateNew:o})=>{const{t:a}=(0,s.Bd)(),[l,c]=(0,n.useState)(""),[d,u]=(0,n.useState)(!1),{quizzes:p,loading:f,fetchQuizzes:h}=(0,i.A)({autoFetch:!1}),[g,x]=(0,n.useState)(null),[y,b]=(0,n.useState)(!1),j=(0,n.useRef)(null),w=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{if(e){b(!0);try{const t=await(0,fe.getOne)(e);x(t)}catch(e){console.error("Error loading selected quiz:",e),x(null)}finally{b(!1)}}else x(null)})()},[e]),(0,n.useEffect)(()=>{const e=e=>{j.current&&!j.current.contains(e.target)&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,n.useEffect)(()=>(w.current&&clearTimeout(w.current),l.trim()?(u(!0),w.current=setTimeout(()=>{h(!0,{search:l,perPage:50})},300)):d&&(w.current=setTimeout(()=>{h(!0,{perPage:50})},100)),()=>clearTimeout(w.current)),[l,d,h]);const k=e=>e?.title?.rendered||e?.title||"Cuestionario sin tÃ­tulo";return y?(0,m.jsx)("div",{className:"flex items-center justify-center p-2 bg-gray-100 border rounded-md",children:(0,m.jsx)("p",{className:"text-sm text-gray-500",children:"Cargando..."})}):g?(0,m.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 border rounded-md",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-800",children:k(g)}),!r&&(0,m.jsx)("button",{onClick:()=>{x(null),t(null)},className:"text-red-500 hover:text-red-700",children:(0,m.jsx)(N.A,{className:"w-4 h-4"})})]}):(0,m.jsxs)("div",{className:"relative",ref:j,children:[(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsxs)("div",{className:"relative flex-grow",children:[(0,m.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,m.jsx)(pe.A,{className:"h-4 w-4 text-gray-400"})}),(0,m.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),onFocus:()=>u(!0),placeholder:"Buscar o crear cuestionario...",disabled:r,className:"w-full pl-10 pr-3 py-2 text-sm border border-gray-300 rounded-md"})]}),o&&(0,m.jsxs)("button",{onClick:o,disabled:r,className:"flex-shrink-0 flex items-center gap-2 px-3 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[(0,m.jsx)(v.A,{className:"w-4 h-4"}),"Crear Nuevo"]})]}),d&&(0,m.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[f&&(0,m.jsx)("p",{className:"p-2 text-sm text-gray-500",children:"Buscando..."}),!f&&p.length>0&&p.map(e=>(0,m.jsx)("div",{onClick:()=>(e=>{x(e),t(e.id),u(!1),c("")})(e),className:"p-2 text-sm cursor-pointer hover:bg-gray-100",children:k(e)},e.id)),!f&&0===p.length&&(0,m.jsx)("p",{className:"p-2 text-sm text-gray-500",children:l?"No se encontraron resultados.":"No hay cuestionarios disponibles."})]})]})};var he=r(1464),ge=r(8245);const xe=({step:e,onUpdate:t,isViewMode:r})=>{const{t:o}=(0,s.Bd)(),[a,i]=(0,n.useState)(!1),[l,c]=(0,n.useState)(0),[d,u]=(0,n.useState)(null),p=(0,n.useRef)(null);return(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-700",children:"Archivo PDF"}),e.data?.file_id?(0,m.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-100 border border-gray-200 rounded-md",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,m.jsx)(L.A,{className:"h-4 w-4 text-green-500"}),(0,m.jsx)("a",{href:e.data.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate",title:e.data.filename,children:e.data.filename})]}),!r&&(0,m.jsx)("button",{type:"button",onClick:()=>{t("data",{...e.data,file_id:null,filename:null,url:null})},className:"p-1 text-red-500 hover:text-red-700",children:(0,m.jsx)(y.A,{className:"h-4 w-4"})})]}):(0,m.jsxs)("div",{children:[(0,m.jsx)("input",{type:"file",accept:"application/pdf",ref:p,onChange:async r=>{const n=r.target.files?.[0];if(!n)return;const s=(0,ge.nJ)(n,{maxSize:10485760,allowedTypes:["application/pdf"]});if(s.isValid){i(!0),u(null),c(0);try{const r=await(0,ge.o7)(n,{onProgress:c});t("data",{...e.data,file_id:r.id,filename:n.name,url:r.url})}catch(e){u(e.message||"Upload failed")}finally{i(!1)}}else u(s.error)},className:"hidden",disabled:a||r}),(0,m.jsxs)("button",{type:"button",onClick:()=>p.current?.click(),disabled:a||r,className:"w-full flex items-center justify-center px-3 py-2 border-2 border-dashed border-gray-300 rounded-md text-sm text-gray-600 hover:bg-gray-50 disabled:cursor-not-allowed",children:[(0,m.jsx)(he.A,{className:"h-4 w-4 mr-2"}),a?`Subiendo... ${l}%`:"Seleccionar un archivo PDF"]})]}),a&&(0,m.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5",children:(0,m.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:`${l}%`}})}),d&&(0,m.jsx)("p",{className:"text-xs text-red-600 mt-1",children:d})]})},ye=e=>e?.title?.rendered||e?.title||"LecciÃ³n sin tÃ­tulo",be=({step:e,index:t,onUpdate:r,quillRef:s,onTriggerCreation:o})=>{const a=(0,n.useCallback)(async()=>{try{const e=await(0,O.I)({title:"Seleccionar imagen",buttonText:"Insertar imagen",type:"image"});if(e&&e.url&&s.current){const t=s.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e.url),t.setSelection(r.index+1)}}catch(e){console.error("Error al abrir el selector de medios:",e)}},[s]),i=(0,n.useMemo)(()=>({toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:a}}}),[a]);switch(e.type){case"video":return(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"URL del Video"}),(0,m.jsx)("input",{type:"url",value:e.data?.video_url||"",onChange:n=>r(t,"data",{...e.data,video_url:n.target.value}),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded",placeholder:"https://..."})]});case"quiz":return(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Seleccionar Cuestionario"}),(0,m.jsx)(me,{value:e.data?.quiz_id||null,onChange:n=>r(t,"data",{...e.data,quiz_id:n}),onCreateNew:()=>o("quiz",n=>{r(t,"data",{...e.data,quiz_id:n})})})]});case"pdf":return(0,m.jsx)(xe,{step:e,onUpdate:(e,n)=>r(t,e,n)});default:return(0,m.jsx)(_(),{ref:s,theme:"snow",value:e.data?.content||"",onChange:n=>r(t,"data",{...e.data,content:n}),className:"bg-white",modules:i})}},ve=({step:e,index:t,onUpdate:r,onRemove:s,onTriggerCreation:o})=>{const{attributes:a,listeners:i,setNodeRef:l,transform:c,transition:d}=(0,E.gl)({id:e.id}),[u,p]=(0,n.useState)(!1),f={transform:A.Ks.Transform.toString(c),transition:d},h=(0,n.useRef)(null),g={text:(0,m.jsx)(ae.A,{className:"h-4 w-4 text-green-700"}),video:(0,m.jsx)(ie.A,{className:"h-4 w-4 text-blue-700"}),quiz:(0,m.jsx)(le.A,{className:"h-4 w-4 text-purple-700"}),pdf:(0,m.jsx)(ce.A,{className:"h-4 w-4 text-red-700"})};return(0,m.jsxs)("div",{ref:l,style:f,className:"bg-white border border-gray-200 rounded-lg",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,m.jsx)("button",{type:"button",...a,...i,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,m.jsx)(x.A,{className:"h-5 w-5"})}),(0,m.jsx)("div",{className:"p-2 rounded bg-gray-100",children:g[e.type]||g.text}),(0,m.jsx)("div",{className:"flex-1",children:(0,m.jsx)("input",{type:"text",value:e.title,onChange:e=>r(t,"title",e.target.value),placeholder:"TÃ­tulo del paso",className:"font-medium text-sm text-gray-900 bg-transparent w-full focus:outline-none"})})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-2",children:[e.start_date&&(0,m.jsxs)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded flex items-center gap-1",children:[(0,m.jsx)(Y.A,{className:"h-3 w-3"}),new Date(e.start_date).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})]}),(0,m.jsx)("button",{type:"button",onClick:()=>p(!u),className:"p-1 text-gray-400 hover:text-gray-600",children:u?(0,m.jsx)($.A,{className:"h-4 w-4"}):(0,m.jsx)(B.A,{className:"h-4 w-4"})}),(0,m.jsx)("button",{type:"button",onClick:()=>s(t),className:"p-1 text-red-400 hover:text-red-600",children:(0,m.jsx)(y.A,{className:"h-4 w-4"})})]})]}),u&&(0,m.jsxs)("div",{className:"p-4 border-t border-gray-200 space-y-4",children:[(0,m.jsx)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1 flex items-center gap-1",children:[(0,m.jsx)(Y.A,{className:"h-3 w-3"}),"Fecha de inicio del paso"]}),(0,m.jsx)("input",{type:"date",value:(e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);return isNaN(t.getTime())?"":`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`})(e.start_date),onChange:e=>r(t,"start_date",e.target.value||""),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded"}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Este paso aparecerÃ¡ en el planificador a partir de esta fecha."})]})}),(0,m.jsx)(be,{step:e,index:t,onUpdate:r,quillRef:h,onTriggerCreation:o})]})]})},je=({onAddStep:e})=>{const[t,r]=(0,n.useState)(!1),s=[{type:"text",label:"Texto",icon:(0,m.jsx)(ae.A,{className:"w-4 h-4"})},{type:"video",label:"Video",icon:(0,m.jsx)(ie.A,{className:"w-4 h-4"})},{type:"quiz",label:"Cuestionario",icon:(0,m.jsx)(le.A,{className:"w-4 h-4"})},{type:"pdf",label:"PDF",icon:(0,m.jsx)(ce.A,{className:"w-4 h-4"})}];return(0,m.jsxs)("div",{className:"relative inline-block",children:[(0,m.jsxs)("button",{onClick:()=>r(!t),className:"bg-gray-200 text-gray-800 font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-gray-300 transition-colors text-sm flex items-center gap-2",children:[(0,m.jsx)(v.A,{className:"w-4 h-4"}),"AÃ±adir Paso"]}),t&&(0,m.jsx)("div",{className:"absolute left-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:(0,m.jsx)("div",{className:"py-1",children:s.map(({type:t,label:n,icon:s})=>(0,m.jsxs)("button",{onClick:()=>{e(t),r(!1)},className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[s," ",n]},t))})})]})},we=({lessonId:e,mode:t,onSave:r,onCancel:o,availableCourses:a,onTriggerCreation:i,isCollapsed:l=!1})=>{const{t:c}=(0,s.Bd)(),[d,u]=(0,n.useState)(!1),[p,h]=(0,n.useState)(!1),[g,x]=(0,n.useState)(null),[y,b]=(0,n.useState)({}),[v,j]=(0,n.useState)(0),w=(0,S.FR)((0,S.MS)(S.AN)),k=(0,n.useCallback)(()=>{b({title:"",content:"",status:"publish",courseId:"",steps:[],startDate:""}),j(0)},[]);(0,n.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&k();else{u(!0),x(null),j(0);try{const t=await(0,ue.getOne)(e);b({title:ye(t),content:t.content?.rendered||"",status:t.status||"publish",courseId:t.meta?._course_id?.toString()||"",steps:(t.meta?._lesson_steps||[]).map((e,t)=>({...e,id:`step-${t}`})),startDate:t.meta?._start_date||""})}catch(e){x("Failed to load lesson data.")}finally{u(!1)}}})()},[e,t,k]);const C=(e,t)=>{b(r=>({...r,[e]:t}))},A=(e,t,r)=>{const n=[...y.steps];"data"===t?n[e].data=r:n[e][t]=r,C("steps",n)},M=e=>{const t=y.steps.filter((t,r)=>r!==e).map((e,t)=>({...e,order:t+1}));C("steps",t)};if(d)return(0,m.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,m.jsx)("p",{children:"Cargando..."})});const T=[{name:"Ajustes",content:(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TÃ­tulo de la LecciÃ³n"}),(0,m.jsx)("input",{type:"text",value:y.title||"",onChange:e=>C("title",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Curso"}),(0,m.jsxs)("select",{value:y.courseId||"",onChange:e=>C("courseId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"",children:"Seleccionar curso..."}),a.map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:(0,m.jsxs)("span",{className:"flex items-center gap-2",children:[(0,m.jsx)(Y.A,{className:"w-4 h-4"}),"Fecha de Inicio"]})}),(0,m.jsx)("input",{type:"date",value:(e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);return isNaN(t.getTime())?"":`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`})(y.startDate),onChange:e=>C("startDate",e.target.value||""),className:"w-full input border-gray-300 rounded-md"}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"La lecciÃ³n serÃ¡ visible a partir de esta fecha. Dejar vacÃ­o para que estÃ© siempre disponible."})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DescripciÃ³n / Contenido Principal"}),(0,m.jsx)(_(),{theme:"snow",value:y.content||"",onChange:e=>C("content",e)})]})]})},{name:"Pasos",content:(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)(S.Mp,{sensors:w,collisionDetection:S.fp,onDragEnd:e=>{const{active:t,over:r}=e;if(r&&t.id!==r.id){const e=y.steps.findIndex(e=>e.id===t.id),n=y.steps.findIndex(e=>e.id===r.id);if(-1!==e&&-1!==n){const t=(0,E.be)(y.steps,e,n).map((e,t)=>({...e,order:t+1}));C("steps",t)}}},children:(0,m.jsx)(E.gB,{items:(y.steps||[]).map(e=>e.id),strategy:E._G,children:(y.steps||[]).map((e,t)=>(0,m.jsx)(ve,{step:e,index:t,onUpdate:A,onRemove:M,onTriggerCreation:i},e.id))})}),(0,m.jsx)(je,{onAddStep:e=>{const t=y.steps||[],r=t.length+1,n={id:`step-${Date.now()}`,title:`Nuevo Paso (${e})`,type:e,order:r,start_date:"",data:{}};C("steps",[...t,n])}})]})}],P="create"===t?"Crear Nueva LecciÃ³n":`Editando: ${ye(y)||"..."}`;return(0,m.jsxs)("div",{className:(0,f.A)("bg-white rounded-lg border border-gray-200 flex flex-col h-full",{"overflow-hidden":l}),children:[(0,m.jsxs)("header",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[(0,m.jsx)("h3",{className:(0,f.A)("text-lg font-bold text-gray-800 truncate",{"transform -rotate-90 whitespace-nowrap":l}),children:P}),!l&&(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsxs)("button",{onClick:async()=>{h(!0),x(null);try{const e=y.steps.map(({id:e,...t},r)=>({...t,order:r+1,start_date:t.start_date||""}));console.log("Steps being saved:",e);const t={_lesson_steps:e,_start_date:y.startDate||""};y.courseId&&""!==y.courseId&&"0"!==y.courseId&&(t._course_id=y.courseId);const n={title:y.title,content:y.content,status:y.status,meta:t};await r(n)}catch(e){x(e.message||"Failed to save the lesson.")}finally{h(!1)}},disabled:p,className:"bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg shadow-sm hover:bg-blue-700 transition-colors text-sm disabled:opacity-50 flex items-center gap-2",children:[(0,m.jsx)(de.A,{className:"w-4 h-4"}),p?"Guardando...":"Guardar"]}),(0,m.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-800",children:(0,m.jsx)(N.A,{className:"h-5 w-5"})})]})]}),(0,m.jsxs)("main",{className:(0,f.A)("flex-1 overflow-y-auto",{"p-6":!l,hidden:l}),children:[g&&(0,m.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:g}),(0,m.jsx)(z,{tabs:T,activeTab:v,setActiveTab:j})]})]})};var Ne=r(232),ke=r(2719),Ce=r(1523),_e=r(8919);const Se=({question:e,onRemove:t})=>{const{attributes:r,listeners:n,setNodeRef:s,transform:o,transition:a}=(0,E.gl)({id:e.id}),i={transform:A.Ks.Transform.toString(o),transition:a};return(0,m.jsxs)("div",{ref:s,style:i,className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("button",{type:"button",...r,...n,className:"cursor-move text-gray-400 hover:text-gray-600",children:(0,m.jsx)(x.A,{className:"h-5 w-5"})}),(0,m.jsx)("div",{children:(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.title?.rendered||e.title})})]}),(0,m.jsx)("button",{type:"button",onClick:()=>t(e.id),className:"text-red-600 hover:text-red-800",children:(0,m.jsx)(y.A,{className:"w-4 h-4"})})]})},Ee=({onAddQuestion:e,onCreateNew:t,selectedQuestions:r,searchResults:o,isSearching:a,onSearch:i})=>{const{t:l}=(0,s.Bd)(),[c,d]=(0,n.useState)(""),u=e=>{e.preventDefault(),c.trim()&&i(c)};return(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsx)("h4",{className:"font-medium text-gray-800",children:l("quizzes.form.addQuestions")}),(0,m.jsxs)("div",{className:"flex gap-2",children:[(0,m.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&u(e)},placeholder:l("quizzes.form.searchPlaceholder"),className:"flex-1 input border-gray-300 rounded-md"}),(0,m.jsxs)(_e.A,{onClick:u,disabled:a,variant:"primary",className:"font-semibold py-2 px-3 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,m.jsx)(pe.A,{className:"w-4 h-4"}),l(a?"common.searching":"common.search")]}),(0,m.jsxs)(_e.A,{onClick:t,variant:"ghost",className:"font-semibold py-2 px-3 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,m.jsx)(v.A,{className:"w-4 h-4"}),l("common.createNew")]})]}),o.length>0&&(0,m.jsx)("div",{className:"border rounded-md max-h-48 overflow-y-auto bg-white",children:o.map(t=>{const n=r.some(e=>e.id===t.id);return(0,m.jsxs)("div",{className:"flex justify-between items-center p-3 border-b last:border-b-0",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:t.title?.rendered||"Untitled"}),(0,m.jsx)("button",{onClick:()=>e(t),disabled:n,className:"text-sm font-semibold py-1 px-3 rounded-full "+(n?"bg-gray-200 text-gray-500":"bg-green-100 text-green-700 hover:bg-green-200"),children:l(n?"common.added":"common.add")})]},t.id)})})]})},Ae=({quizId:e,mode:t,onSave:r,onCancel:o,availableCourses:a,availableCategories:i,isContextual:l=!1})=>{const{t:c}=(0,s.Bd)(),[d,u]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),[h,g]=(0,n.useState)(null),[x,y]=(0,n.useState)(0),[b,v]=(0,n.useState)({}),[j,w]=(0,n.useState)([]),[k,C]=(0,n.useState)(!1),A=(0,S.FR)((0,S.MS)(S.AN)),{questions:M,loading:T,error:P,fetchItems:O}=(0,Ce.T)({autoFetch:!1}),q=(0,n.useCallback)(()=>{v({title:"",content:"",status:"publish",courseId:"",qe_category:[],difficulty_level:"medium",passing_score:"7.0",time_limit:"",max_attempts:"",randomize_questions:!1,show_results:!0,enable_negative_scoring:!1,questionIds:[],start_date:""}),w([]),C(!1)},[]);(0,n.useEffect)(()=>{(async()=>{if(!e||"edit"!==t&&"view"!==t)"create"===t&&q();else{u(!0),g(null),C(!1);try{console.log("ðŸ” Fetching quiz data for ID:",e);const t=await(0,fe.getOne)(e);console.log("ðŸ“¦ Quiz data received:",t);const r=t.meta||{},n="string"==typeof t.title?t.title:t.title?.rendered||"",s="string"==typeof t.content?t.content:t.content?.rendered||r._quiz_instructions||"";v({title:n,content:s,status:t.status||"publish",courseId:r._course_id?.toString()||"",qe_category:Array.isArray(t.qe_category)?t.qe_category.map(String):[],difficulty_level:r._difficulty_level||"medium",passing_score:r._passing_score?.toString()||"7.0",time_limit:r._time_limit?.toString()||"",max_attempts:r._max_attempts?.toString()||"",randomize_questions:r._randomize_questions||!1,show_results:void 0===r._show_results||r._show_results,enable_negative_scoring:r._enable_negative_scoring||!1,questionIds:r._quiz_question_ids||[],start_date:r._start_date||""}),console.log("âœ… Form data set:",{title:n,category:t.qe_category});const o=r._quiz_question_ids||[];if(console.log("ðŸ“ Loading questions for quiz. Total IDs:",o.length),o.length>0)try{const e=await(0,ke.getQuestionsByIds)(o,{batchSize:30});console.log("âœ… Loaded questions:",e.length),w(e),C(!0)}catch(e){console.error("âŒ Error loading questions:",e),g(c("errors.loadQuestions")||"Error loading questions"),w([]),C(!0)}else console.log("â„¹ï¸ Quiz has no questions"),w([]),C(!0)}catch(e){console.error("âŒ Error fetching quiz:",e),g(c("errors.fetchQuiz")),C(!0)}finally{u(!1)}}})()},[e,t,c,q]);const D=(e,t)=>{v(r=>({...r,[e]:t}))},I=e=>{const t=j.filter(t=>t.id!==e);w(t),D("questionIds",t.map(e=>e.id))};if(d)return(0,m.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,m.jsx)("p",{children:c("common.loading")})});const L=[{value:"easy",label:c("common.easy")},{value:"medium",label:c("common.medium")},{value:"hard",label:c("common.hard")}],R=(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.title")}),(0,m.jsx)("input",{type:"text",value:b.title||"",onChange:e=>D("title",e.target.value),className:"w-full input border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.course")}),(0,m.jsxs)("select",{value:b.courseId||"",onChange:e=>D("courseId",e.target.value),className:"w-full input border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"",children:c("common.select")}),a.map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.category")}),(0,m.jsxs)("select",{value:b.qe_category?.[0]||"",onChange:e=>D("qe_category",[e.target.value]),className:"w-full input border-gray-300 rounded-md",children:[(0,m.jsx)("option",{value:"",children:c("common.select")}),i.map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.difficulty")}),(0,m.jsx)("select",{value:b.difficulty_level||"medium",onChange:e=>D("difficulty_level",e.target.value),className:"w-full input border-gray-300 rounded-md",children:L.map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.startDate")}),(0,m.jsx)("input",{type:"date",value:b.start_date||"",onChange:e=>D("start_date",e.target.value),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.instructions")}),(0,m.jsx)(_(),{theme:"snow",value:b.content||"",onChange:e=>D("content",e)})]}),(0,m.jsxs)("div",{className:"border-t pt-6",children:[(0,m.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:c("common.settings")}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.passingScore")}),(0,m.jsx)("input",{type:"number",min:"0",max:"10",step:"0.1",value:b.passing_score||"",onChange:e=>D("passing_score",e.target.value),className:"w-full input border-gray-300 rounded-md",placeholder:"7.0"}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Base 10: 0-10 (ej: 7.0 = 70%)"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.timeLimit")}),(0,m.jsx)("input",{type:"number",min:"0",value:b.time_limit||"",onChange:e=>D("time_limit",e.target.value),placeholder:c("common.unlimited"),className:"w-full input border-gray-300 rounded-md"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c("quizzes.form.maxAttempts")}),(0,m.jsx)("input",{type:"number",min:"0",value:b.max_attempts||"",onChange:e=>D("max_attempts",e.target.value),placeholder:c("common.unlimited"),className:"w-full input border-gray-300 rounded-md"})]})]}),(0,m.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,m.jsxs)("label",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"checkbox",checked:b.randomize_questions||!1,onChange:e=>D("randomize_questions",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,m.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:c("quizzes.form.randomize")})]}),(0,m.jsxs)("label",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"checkbox",checked:b.show_results||!1,onChange:e=>D("show_results",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,m.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:c("quizzes.form.showResults")})]}),(0,m.jsxs)("label",{className:"flex items-center",children:[(0,m.jsx)("input",{type:"checkbox",checked:b.enable_negative_scoring||!1,onChange:e=>D("enable_negative_scoring",e.target.checked),className:"h-4 w-4 rounded border-gray-300"}),(0,m.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:c("quizzes.form.negativeScoring")})]})]})]})]}),$=(0,m.jsxs)("div",{className:"space-y-6",children:[(0,m.jsx)(Ee,{onAddQuestion:e=>{if(!j.some(t=>t.id===e.id)){const t=[...j,e];w(t),D("questionIds",t.map(e=>e.id))}},onCreateNew:()=>alert("PrÃ³ximamente: Crear nueva pregunta desde aquÃ­."),selectedQuestions:j,searchResults:M,isSearching:T,onSearch:e=>{O(!0,{search:e,perPage:50})}}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("h4",{className:"font-medium text-gray-800 mb-2",children:[c("quizzes.form.selectedQuestions")," (",j.length,")"]}),!k&&d?(0,m.jsx)("div",{className:"p-8 text-center",children:(0,m.jsxs)("p",{className:"text-gray-500",children:[c("common.loading"),"..."]})}):j.length>0?(0,m.jsx)(S.Mp,{sensors:A,collisionDetection:S.fp,onDragEnd:e=>{const{active:t,over:r}=e;if(r&&t.id!==r.id){const e=j.findIndex(e=>e.id===t.id),n=j.findIndex(e=>e.id===r.id);if(-1!==e&&-1!==n){const t=(0,E.be)(j,e,n);w(t),D("questionIds",t.map(e=>e.id))}}},children:(0,m.jsx)(E.gB,{items:j.map(e=>e.id),strategy:E._G,children:(0,m.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,m.jsx)(Se,{question:e,onRemove:I},e.id))})})}):(0,m.jsx)("p",{className:"text-sm text-gray-500 p-4 border rounded-md text-center bg-gray-50",children:c("quizzes.form.noQuestions")})]})]}),B=[{name:c("common.settings"),content:R},{name:c("common.questions"),content:$}],F="create"===t?c("quizzes.createNew"):c("quizzes.editTitle",{title:b.title||"..."});return(0,m.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 flex flex-col h-full",children:[(0,m.jsxs)("header",{className:"p-4 border-b flex items-center justify-between flex-shrink-0",children:[(0,m.jsx)("h3",{className:"text-lg font-bold text-gray-800 truncate pr-4",children:F}),(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[l&&(0,m.jsxs)("button",{onClick:o,className:"text-gray-600 hover:text-gray-900 flex items-center gap-2 text-sm font-semibold",children:[(0,m.jsx)(Ne.A,{className:"w-4 h-4"})," Volver"]}),(0,m.jsxs)(_e.A,{onClick:async()=>{f(!0),g(null);try{const e={_difficulty_level:b.difficulty_level,_passing_score:b.passing_score,_time_limit:""===b.time_limit?0:parseInt(b.time_limit,10),_max_attempts:""===b.max_attempts?0:parseInt(b.max_attempts,10),_randomize_questions:b.randomize_questions,_show_results:b.show_results,_enable_negative_scoring:b.enable_negative_scoring,_quiz_question_ids:b.questionIds,_start_date:b.start_date||""};b.courseId&&""!==b.courseId&&"0"!==b.courseId&&(e._course_id=b.courseId);const t={title:b.title,content:b.content,status:b.status,meta:e,qe_category:b.qe_category.map(e=>parseInt(e,10)).filter(e=>!isNaN(e)&&e>0)};await r(t)}catch(e){g(e.message||c("errors.saveQuiz"))}finally{f(!1)}},disabled:p,variant:"primary",className:"font-semibold py-2 px-4 rounded-lg shadow-sm text-sm flex items-center gap-2",children:[(0,m.jsx)(de.A,{className:"w-4 h-4"}),c(p?"common.saving":"common.save")]}),!l&&(0,m.jsx)("button",{onClick:o,className:"text-gray-500 hover:text-gray-800",children:(0,m.jsx)(N.A,{className:"h-5 w-5"})})]})]}),(0,m.jsxs)("main",{className:"flex-1 overflow-y-auto p-6",children:[h&&(0,m.jsx)("p",{className:"text-red-500 bg-red-50 p-3 rounded-md mb-4",children:h}),(0,m.jsx)(z,{tabs:B,activeTab:x,setActiveTab:y})]})]})};var Me=r(8723),Te=r(7946);const Pe=(0,r(9407).A)("gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);var Oe=r(3704),ze=r(6241),qe=r(8834);const De=({courseId:e,courseName:t,onClose:r})=>{const{t:o}=(0,s.Bd)(),[a,i]=(0,n.useState)([]),[l,c]=(0,n.useState)(!0),[d,u]=(0,n.useState)(null),[p,f]=(0,n.useState)(new Set),[h,g]=(0,n.useState)(!1),[x,y]=(0,n.useState)(null),[b,v]=(0,n.useState)(""),[j,w]=(0,n.useState)(""),[k,C]=(0,n.useState)(new Set),_=(0,n.useMemo)(()=>{const e={};return a.forEach(t=>{const r=t.lesson_id||"no-lesson",n=t.lesson_title||o("quizzes.noLesson","Sin lecciÃ³n");e[r]||(e[r]={lessonId:r,lessonTitle:n,quizzes:[]}),e[r].quizzes.push(t)}),Object.values(e)},[a,o]),S=[{value:"easy",label:o("quizzes.difficulty.easy","FÃ¡cil"),color:"bg-green-100 text-green-800"},{value:"medium",label:o("quizzes.difficulty.medium","Medio"),color:"bg-yellow-100 text-yellow-800"},{value:"hard",label:o("quizzes.difficulty.hard","DifÃ­cil"),color:"bg-red-100 text-red-800"}],E=(0,n.useCallback)(async()=>{if(e){c(!0),u(null);try{const t=window.qe_data?.endpoints?.custom_api||`${window.qe_data?.api_url}/qe/v1`,r=await fetch(`${t}/courses/${e}/quizzes`,{headers:{"Content-Type":"application/json","X-WP-Nonce":window.qe_data?.nonce}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const n=await r.json();i(n.data||[]);const s=new Set(n.data?.map(e=>e.lesson_id||"no-lesson")||[]);C(s)}catch(e){console.error("Error fetching course quizzes:",e),u(e.message)}finally{c(!1)}}},[e]);(0,n.useEffect)(()=>{E()},[E]);const A=e=>{const t=S.find(t=>t.value===e)||S[1];return(0,m.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${t.color}`,children:t.label})};return l?(0,m.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,m.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:r}),(0,m.jsxs)("div",{className:"ml-auto w-full max-w-lg bg-white shadow-xl h-full flex flex-col relative z-10 animate-slide-in-right",children:[(0,m.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:o("quizzes.batch.title","Acciones en Lote")}),(0,m.jsx)("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:(0,m.jsx)(N.A,{size:20,className:"text-gray-500"})})]}),(0,m.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,m.jsx)(Me.A,{className:"w-8 h-8 animate-spin text-blue-500"})})]})]}):d?(0,m.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,m.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:r}),(0,m.jsxs)("div",{className:"ml-auto w-full max-w-lg bg-white shadow-xl h-full flex flex-col relative z-10",children:[(0,m.jsxs)("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:o("quizzes.batch.title","Acciones en Lote")}),(0,m.jsx)("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:(0,m.jsx)(N.A,{size:20,className:"text-gray-500"})})]}),(0,m.jsx)("div",{className:"flex-1 flex items-center justify-center p-4",children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)(Te.A,{className:"w-12 h-12 text-red-500 mx-auto mb-2"}),(0,m.jsx)("p",{className:"text-red-600",children:d}),(0,m.jsx)("button",{onClick:E,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:o("common.retry","Reintentar")})]})})]})]}):(0,m.jsxs)("div",{className:"fixed inset-0 z-50 flex",children:[(0,m.jsx)("div",{className:"absolute inset-0 bg-black/30",onClick:r}),(0,m.jsxs)("div",{className:"ml-auto w-full max-w-lg bg-white shadow-xl h-full flex flex-col relative z-10",children:[(0,m.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:o("quizzes.batch.title","Acciones en Lote")}),(0,m.jsx)("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:(0,m.jsx)(N.A,{size:20,className:"text-gray-500"})})]}),(0,m.jsxs)("p",{className:"text-sm text-gray-600",children:[a.length," ",o("quizzes.title","cuestionarios")]})]}),(0,m.jsxs)("div",{className:"p-4 border-b border-gray-200 bg-gray-50 space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[p.size," ",o("common.selected","seleccionados")]}),(0,m.jsx)("button",{onClick:()=>{f(new Set(a.map(e=>e.id)))},className:"text-sm text-blue-600 hover:text-blue-800",children:o("common.selectAll","Seleccionar todos")}),(0,m.jsx)("button",{onClick:()=>{f(new Set)},className:"text-sm text-gray-600 hover:text-gray-800",children:o("common.deselectAll","Deseleccionar todos")})]}),(0,m.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[(0,m.jsx)(Pe,{size:14,className:"inline mr-1"}),o("quizzes.form.difficulty","Dificultad")]}),(0,m.jsxs)("select",{value:b,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,m.jsx)("option",{value:"",children:o("quizzes.batch.noChange","â€” Sin cambio â€”")}),S.map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:[(0,m.jsx)(Y.A,{size:14,className:"inline mr-1"}),o("quizzes.form.startDate","Fecha de Inicio")]}),(0,m.jsx)("input",{type:"date",value:j,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,m.jsx)("div",{className:"flex items-end",children:(0,m.jsxs)("button",{onClick:async()=>{if(0===p.size)return void alert(o("quizzes.batch.noSelection","Selecciona al menos un cuestionario"));const t={};if(b&&(t.difficulty_level=b),j&&(t.start_date=j),0!==Object.keys(t).length){g(!0),y(null);try{const r=window.qe_data?.endpoints?.custom_api||`${window.qe_data?.api_url}/qe/v1`,n=await fetch(`${r}/courses/${e}/quizzes/batch`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.qe_data?.nonce},body:JSON.stringify({quiz_ids:Array.from(p),updates:t})});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||`HTTP ${n.status}`)}const s=await n.json();y(s),i(e=>e.map(e=>p.has(e.id)?{...e,difficulty_level:b||e.difficulty_level,start_date:j||e.start_date}:e)),v(""),w("")}catch(e){console.error("Error applying batch update:",e),y({success:!1,error:e.message})}finally{g(!1)}}else alert(o("quizzes.batch.noChanges","No hay cambios que aplicar"))},disabled:h||0===p.size||!b&&!j,className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md text-sm font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[h?(0,m.jsx)(Me.A,{size:16,className:"animate-spin"}):(0,m.jsx)(de.A,{size:16}),o("quizzes.batch.apply","Aplicar Cambios")]})})]}),x&&(0,m.jsx)("div",{className:"p-3 rounded-md "+(x.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:x.success?(0,m.jsxs)("div",{className:"flex items-center gap-2 text-green-700",children:[(0,m.jsx)(L.A,{size:16}),(0,m.jsxs)("span",{className:"text-sm",children:[o("quizzes.batch.success","Cambios aplicados"),": ",x.summary?.updated||0," ",o("quizzes.batch.updated","actualizados")]})]}):(0,m.jsxs)("div",{className:"flex items-center gap-2 text-red-700",children:[(0,m.jsx)(Te.A,{size:16}),(0,m.jsx)("span",{className:"text-sm",children:x.error})]})})]}),(0,m.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===_.length?(0,m.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:o("quizzes.noQuizzes","No hay cuestionarios en este curso")}):(0,m.jsx)("div",{className:"divide-y divide-gray-200",children:_.map(e=>{const t=k.has(e.lessonId),r=(e=>{const t=e.map(e=>e.id),r=t.filter(e=>p.has(e)).length;return 0===r?"none":r===t.length?"all":"partial"})(e.quizzes);return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"flex items-center px-4 py-3 bg-gray-50 hover:bg-gray-100 cursor-pointer",onClick:()=>{return t=e.lessonId,void C(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},children:[(0,m.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{const t=e.map(e=>e.id),r=t.every(e=>p.has(e));f(e=>{const n=new Set(e);return r?t.forEach(e=>n.delete(e)):t.forEach(e=>n.add(e)),n})})(e.quizzes)},className:"mr-3 text-gray-400 hover:text-blue-600",children:"all"===r?(0,m.jsx)(Oe.A,{size:20,className:"text-blue-600"}):"partial"===r?(0,m.jsx)(ze.A,{size:20,className:"text-blue-400"}):(0,m.jsx)(qe.A,{size:20})}),t?(0,m.jsx)(B.A,{size:18,className:"text-gray-400 mr-2"}):(0,m.jsx)(Z.A,{size:18,className:"text-gray-400 mr-2"}),(0,m.jsx)("span",{className:"font-medium text-gray-800 flex-1",children:e.lessonTitle}),(0,m.jsxs)("span",{className:"text-sm text-gray-500",children:[e.quizzes.length," quizzes"]})]}),t&&(0,m.jsx)("div",{className:"bg-white",children:e.quizzes.map(e=>(0,m.jsxs)("div",{className:"flex items-center px-4 py-2 pl-12 border-l-4 hover:bg-gray-50 "+(p.has(e.id)?"border-blue-500 bg-blue-50":"border-transparent"),children:[(0,m.jsx)("button",{onClick:()=>{return t=e.id,void f(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},className:"mr-3 text-gray-400 hover:text-blue-600",children:p.has(e.id)?(0,m.jsx)(Oe.A,{size:18,className:"text-blue-600"}):(0,m.jsx)(qe.A,{size:18})}),(0,m.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,m.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[A(e.difficulty_level),e.start_date&&(0,m.jsxs)("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[(0,m.jsx)(Y.A,{size:12}),e.start_date]}),(0,m.jsxs)("span",{className:"text-xs text-gray-400",children:[e.question_count," preguntas"]})]})]})]},e.id))})]},e.lessonId)})})})]})]})},Ie=()=>{const{t:e}=(0,s.Bd)(),[t,r]=(0,n.useState)([{type:"courseList"}]),[u,p]=(0,n.useState)(!1),[f,h]=(0,n.useState)(null),x=(0,o.A)({autoFetch:!0,perPage:50,debounceMs:300,status:"publish,draft,private"}),y=(0,a.A)({autoFetch:!1}),b=(0,i.A)({autoFetch:!1}),{options:v,refetch:j}=(0,l.h)(["qe_category"]),w=e=>{r([{type:"courseList"},{type:"course",id:e.id}])},N=()=>{r([{type:"courseList"},{type:"course",id:"new"}])},k=()=>{r(e=>e.slice(0,-1))},C=(e,t)=>{r(r=>[...r,{type:e,id:"new",onCreated:t}])},_=async(e,r)=>{let n,s;if("lesson"===r?(n=y,s="createLesson"):"quiz"===r&&(n=b,s="createQuiz"),n&&s)try{const r=t[t.length-1],o=await n[s](e);r.onCreated&&r.onCreated(o),k(),x.refresh(),y.refresh()}catch(e){console.error(`Failed to create ${r} in context:`,e)}},S=(0,n.useMemo)(()=>v.qe_category||[],[v.qe_category]),E=(0,n.useMemo)(()=>(x.courses||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[x.courses]),A=(0,n.useMemo)(()=>({value:x.filters?.search||"",onChange:e=>x.updateFilter("search",e.target.value),placeholder:e("courses.searchPlaceholder"),isLoading:x.loading}),[x.filters,x.loading,e]),M=(0,n.useMemo)(()=>x.filters?[{label:e("filters.category"),value:x.filters.category||"all",onChange:e=>x.updateFilter("category",e),options:S,isLoading:!v.qe_category}]:[],[x.filters,S,v.qe_category,e]);if(!x.filters||!x.computed)return(0,m.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,m.jsx)("p",{children:e("common.loading")})});const T={1:["20%"],2:["20%","79%"],3:["20%","7%","71%"],4:["20%","7%","7%","63%"]},P=T[t.length]||T[4],O=(r,n)=>{const s=!(n===t.length-1);switch(r.type){case"courseList":return(0,m.jsx)(c.A,{title:e("courses.title"),itemCount:x.pagination?.total||0,createButtonText:e("courses.addNew"),onCreate:N,isCreating:x.creating,onLoadMore:x.loadMoreCourses,hasMore:x.hasMore,isLoadingMore:x.loading&&(x.courses?.length||0)>0,filters:(0,m.jsx)(d.A,{searchConfig:A,filtersConfig:M}),children:(x.courses||[]).map(e=>(0,m.jsx)(g,{course:e,isSelected:t[1]?.id===e.id,onClick:w},e.id))});case"course":return(0,m.jsx)(oe,{courseId:"new"===r.id?null:r.id,mode:"new"===r.id?"create":"edit",onSave:"new"===r.id?x.createCourse:e=>x.updateCourse(r.id,e),onCancel:k,onTriggerCreation:C,isCollapsed:s,categoryOptions:S.filter(e=>"all"!==e.value),onCategoryCreated:j,onOpenBatchActions:"new"!==r.id?()=>{return e=r.id,h(e),void p(!0);var e}:null},r.id);case"lesson":return(0,m.jsx)(we,{lessonId:"new"===r.id?null:r.id,mode:"create",onSave:e=>_(e,"lesson"),onCancel:k,availableCourses:E,onTriggerCreation:C,isCollapsed:s,isContextual:!0},r.id);case"quiz":return(0,m.jsx)(Ae,{mode:"create",onSave:e=>_(e,"quiz"),onCancel:k,availableCourses:E,availableCategories:[],onTriggerCreation:C,isCollapsed:s,isContextual:!0},r.id);default:return null}};return(0,m.jsxs)("div",{className:"qe-lms-admin-app h-full flex overflow-hidden px-6 py-6 space-x-6",children:[t.map((e,t)=>(0,m.jsx)("div",{className:"transition-all duration-300 ease-in-out h-full flex-shrink-0",style:{width:P[t]},children:O(e,t)},`${e.type}-${e.id}-${t}`)),u&&f&&(0,m.jsx)(De,{courseId:f,onClose:()=>{p(!1),h(null)}})]})}},7068:(e,t,r)=>{var n=r(7217),s=r(5911),o=r(1986),a=r(689),i=r(5861),l=r(6449),c=r(3656),d=r(7167),u="[object Arguments]",p="[object Array]",f="[object Object]",m=Object.prototype.hasOwnProperty;e.exports=function(e,t,r,h,g,x){var y=l(e),b=l(t),v=y?p:i(e),j=b?p:i(t),w=(v=v==u?f:v)==f,N=(j=j==u?f:j)==f,k=v==j;if(k&&c(e)){if(!c(t))return!1;y=!0,w=!1}if(k&&!w)return x||(x=new n),y||d(e)?s(e,t,r,h,g,x):o(e,t,v,r,h,g,x);if(!(1&r)){var C=w&&m.call(e,"__wrapped__"),_=N&&m.call(t,"__wrapped__");if(C||_){var S=C?e.value():e,E=_?t.value():t;return x||(x=new n),g(S,E,r,h,x)}}return!!k&&(x||(x=new n),a(e,t,r,h,g,x))}},7117:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>M});var n=r(1609),s=r(2389),o=r(8723),a=r(697),i=r(8445),l=r(5333),c=r(5107),d=r(8697),u=r(665),p=r(1409),f=r(3827),m=r(6172),h=r(6359),g=r(802),x=r(827),y=r(8309),b=r(3610),v=r(9407);const j=(0,v.A)("file-image",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]),w=(0,v.A)("volume-2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]),N=(0,v.A)("layers",[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]]);var k=r(4934),C=r(5404),_=r(2708),S=r(790);const E=({lesson:e,courses:t=[],onEdit:r,onDelete:s,onDuplicate:o})=>{const{getColor:a,isDarkMode:i}=(0,h.DP)(),l=(0,n.useMemo)(()=>({text:i?a("textPrimary","#f9fafb"):a("primary","#1a202c"),textMuted:i?a("textSecondary","#9ca3af"):"#6b7280",accent:a("accent","#f59e0b"),bgCard:i?a("secondaryBackground","#1f2937"):"#ffffff",border:i?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",shadow:i?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",hoverBg:i?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)",success:"#10b981",warning:"#f59e0b",danger:"#ef4444"}),[a,i]),c="string"==typeof e.title?e.title:e.title?.rendered||"Sin tÃ­tulo",d=e.meta||{},p=d._course_id,f=d._lesson_steps||[],m=Array.isArray(f)?f.length:0,v=d._lesson_description||"",E=d._lesson_order||"-",A=(0,n.useMemo)(()=>{if(!p||0===t.length)return"Sin curso";const e=t.find(e=>e.id?.toString()===p?.toString());return e?.title?.rendered||e?.title||`Curso #${p}`},[p,t]),M=(()=>{switch(e.status){case"publish":return{label:"Publicado",color:l.success};case"draft":return{label:"Borrador",color:l.warning};case"private":return{label:"Privado",color:l.textMuted};default:return{label:e.status,color:l.textMuted}}})(),T=(0,n.useMemo)(()=>{if(!Array.isArray(f)||0===f.length)return[];const e=f.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{}),t={video:g.A,text:x.A,pdf:y.A,quiz:b.A,image:j,audio:w};return Object.entries(e).map(([e,r])=>({type:e,count:r,Icon:t[e]||N}))},[f]);return(0,S.jsxs)("div",{onClick:()=>{r(e)},style:{backgroundColor:l.bgCard,border:`1px solid ${l.border}`,borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:l.shadow},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=i?"0 8px 30px rgba(0,0,0,0.5)":"0 8px 30px rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=l.shadow},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,S.jsx)("span",{style:{fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",color:M.color},children:M.label}),(0,S.jsxs)("span",{style:{fontSize:"11px",fontWeight:"500",padding:"2px 8px",borderRadius:"9999px",backgroundColor:i?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:l.textMuted},children:["Orden: ",E]})]}),(0,S.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",color:l.text,marginBottom:"8px",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:c}),(0,S.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"4px 10px",borderRadius:"8px",backgroundColor:i?"rgba(99, 102, 241, 0.15)":"rgba(99, 102, 241, 0.1)",marginBottom:"12px"},children:[(0,S.jsx)(u.A,{size:12,style:{color:"#6366f1"}}),(0,S.jsx)("span",{style:{fontSize:"12px",fontWeight:"500",color:"#6366f1"},children:A})]}),v&&(0,S.jsx)("p",{style:{fontSize:"13px",color:l.textMuted,marginBottom:"12px",lineHeight:"1.5",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:v}),(0,S.jsxs)("div",{style:{padding:"12px",borderRadius:"10px",backgroundColor:i?"rgba(255,255,255,0.04)":"rgba(0,0,0,0.02)",marginBottom:"16px"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,S.jsxs)("span",{style:{fontSize:"13px",fontWeight:"500",color:l.text},children:[m," ",1===m?"paso":"pasos"]}),(0,S.jsx)(N,{size:14,style:{color:l.textMuted}})]}),T.length>0&&(0,S.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px"},children:T.map(({type:e,count:t,Icon:r})=>(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"12px",color:l.textMuted},children:[(0,S.jsx)(r,{size:12}),(0,S.jsx)("span",{children:t})]},e))})]}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",paddingTop:"12px",borderTop:`1px solid ${l.border}`},onClick:e=>e.stopPropagation(),children:[(0,S.jsx)("button",{type:"button",onClick:()=>r(e),title:"Editar",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",border:"none",backgroundColor:i?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",color:"#3b82f6",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#3b82f6",e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=i?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",e.currentTarget.style.color="#3b82f6"},children:(0,S.jsx)(k.A,{size:14})}),(0,S.jsx)("button",{type:"button",onClick:()=>o&&o(e),title:"Duplicar",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",border:"none",backgroundColor:l.hoverBg,color:l.textMuted,cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l.accent,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=l.hoverBg,e.currentTarget.style.color=l.textMuted},children:(0,S.jsx)(C.A,{size:14})}),(0,S.jsx)("div",{style:{flex:1}}),(0,S.jsx)("button",{type:"button",onClick:()=>s(e),title:"Eliminar",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",border:"none",backgroundColor:i?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:"#ef4444",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#ef4444",e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=i?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",e.currentTarget.style.color="#ef4444"},children:(0,S.jsx)(_.A,{size:14})})]})]})};var A=r(7414);const M=()=>{const{t:e}=(0,s.Bd)(),{getColor:t,isDarkMode:r}=(0,h.DP)(),[g,x]=(0,n.useState)({isOpen:!1,mode:"create",lesson:null}),[y,b]=(0,n.useState)(!1),v=(0,f.A)({autoFetch:!0,perPage:24,debounceMs:300}),j=(0,m.A)({autoFetch:!1,status:"publish,draft,private"});(0,n.useEffect)(()=>{0!==j.courses.length||j.loading||j.fetchCourses(!0,{perPage:100})},[]);const w=(0,n.useMemo)(()=>(j.courses||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[j.courses]),N=()=>{x({isOpen:!0,mode:"create",lesson:null})},k=e=>{x({isOpen:!0,mode:"edit",lesson:e})},C=()=>{x({isOpen:!1,mode:"create",lesson:null})},_=async t=>{const r=t.title?.rendered||t.title;if(window.confirm(e("admin.lessons.deleteConfirm",{title:r})))try{await v.deleteLesson(t.id),p.oR.success(e("admin.lessons.deleteSuccess")),v.refresh()}catch(t){console.error("Error deleting lesson:",t),p.oR.error(e("errors.deleteLesson"))}},M=async t=>{p.oR.info(e("admin.lessons.duplicateComingSoon"))},T=(0,n.useMemo)(()=>({text:r?t("textPrimary","#f9fafb"):t("primary","#1a202c"),textMuted:r?t("textSecondary","#9ca3af"):"#6b7280",accent:t("accent","#f59e0b"),primary:t("primary","#3b82f6"),background:r?t("background","#0f172a"):"#f5f7fa",bgCard:r?t("secondaryBackground","#1f2937"):"#ffffff",border:r?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",shadow:r?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",inputBg:r?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:r?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)"}),[t,r]);if(!v.filters||!v.pagination)return(0,S.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",backgroundColor:T.background},children:(0,S.jsx)(o.A,{style:{width:"32px",height:"32px",animation:"spin 1s linear infinite",color:T.accent}})});const P=v.pagination?.total||0,O=[v.filters?.courseId&&"all"!==v.filters.courseId].filter(Boolean).length;return(0,S.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",backgroundColor:T.background},children:[(0,S.jsxs)("div",{style:{flexShrink:0,padding:"16px 24px",backgroundColor:T.bgCard,borderBottom:`1px solid ${T.border}`},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h1",{style:{fontSize:"24px",fontWeight:"700",color:T.text,margin:0},children:e("admin.lessons.title")}),(0,S.jsx)("p",{style:{fontSize:"14px",marginTop:"2px",color:T.textMuted,margin:0},children:e("admin.lessons.total",{count:P})})]}),(0,S.jsxs)("button",{onClick:N,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",borderRadius:"12px",fontWeight:"500",color:"white",backgroundColor:T.accent,border:"none",cursor:"pointer",transition:"opacity 0.2s"},children:[(0,S.jsx)(a.A,{size:18}),e("admin.lessons.newLesson")]})]}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,S.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,S.jsx)(i.A,{size:18,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:T.textMuted}}),(0,S.jsx)("input",{type:"text",value:v.filters?.search||"",onChange:e=>v.updateFilter("search",e.target.value),placeholder:e("admin.lessons.searchPlaceholder"),style:{width:"100%",paddingLeft:"40px",paddingRight:"16px",paddingTop:"10px",paddingBottom:"10px",borderRadius:"12px",fontSize:"14px",backgroundColor:T.inputBg,border:`1px solid ${T.border}`,color:T.text,outline:"none",boxSizing:"border-box"}}),v.loading&&(0,S.jsx)(o.A,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",animation:"spin 1s linear infinite",color:T.textMuted}})]}),(0,S.jsxs)("button",{onClick:()=>b(!y),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",borderRadius:"12px",fontSize:"14px",fontWeight:"500",backgroundColor:y||O>0?r?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)":T.inputBg,border:`1px solid ${y||O>0?T.accent:T.border}`,color:y||O>0?T.accent:T.text,cursor:"pointer",transition:"all 0.2s"},children:[(0,S.jsx)(l.A,{size:16}),e("admin.lessons.filters"),O>0&&(0,S.jsx)("span",{style:{width:"20px",height:"20px",borderRadius:"50%",fontSize:"12px",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"center",color:"white",backgroundColor:T.accent},children:O}),(0,S.jsx)(c.A,{size:14,style:{transition:"transform 0.2s",transform:y?"rotate(180deg)":"rotate(0)"}})]})]}),y&&(0,S.jsxs)("div",{style:{marginTop:"16px",paddingTop:"16px",display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",borderTop:`1px solid ${T.border}`},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"12px",fontWeight:"500",marginBottom:"6px",color:T.textMuted},children:e("admin.lessons.course")}),(0,S.jsxs)("select",{value:v.filters?.courseId||"all",onChange:e=>v.updateFilter("courseId",e.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"8px",fontSize:"14px",backgroundColor:T.inputBg,border:`1px solid ${T.border}`,color:T.text,cursor:"pointer"},children:[(0,S.jsx)("option",{value:"all",children:e("admin.lessons.allCourses")}),w.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),O>0&&(0,S.jsx)("div",{style:{display:"flex",alignItems:"flex-end"},children:(0,S.jsxs)("button",{onClick:()=>{v.updateFilter("courseId","all")},style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",color:T.accent,background:"none",border:"none",cursor:"pointer"},children:[(0,S.jsx)(d.A,{size:14}),e("admin.lessons.clearFilters")]})})]})]}),(0,S.jsx)("div",{style:{flex:1,overflowY:"auto",padding:"24px"},children:0===v.lessons.length?(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",borderRadius:"16px",backgroundColor:T.bgCard,border:`1px solid ${T.border}`},children:[(0,S.jsx)("div",{style:{width:"80px",height:"80px",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"16px",backgroundColor:T.hoverBg},children:(0,S.jsx)(u.A,{style:{width:"40px",height:"40px",color:T.textMuted,opacity:.5}})}),(0,S.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"8px",color:T.text},children:e("admin.lessons.noLessons")}),(0,S.jsx)("p",{style:{fontSize:"14px",marginBottom:"24px",color:T.textMuted},children:v.filters?.search?e("common.noResults"):e("admin.lessons.noLessonsDescription")}),!v.filters?.search&&(0,S.jsxs)("button",{onClick:N,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",borderRadius:"12px",fontWeight:"500",color:"white",backgroundColor:T.accent,border:"none",cursor:"pointer"},children:[(0,S.jsx)(a.A,{size:18}),e("admin.lessons.newLesson")]})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:{display:"grid",gap:"16px",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))"},children:v.lessons.map(e=>(0,S.jsx)(E,{lesson:e,courses:j.courses,onEdit:k,onDelete:_,onDuplicate:M},e.id))}),v.hasMore&&(0,S.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"24px"},children:(0,S.jsx)("button",{onClick:()=>v.loadMoreLessons(),disabled:v.loading,style:{padding:"10px 24px",borderRadius:"12px",fontWeight:"500",backgroundColor:T.inputBg,border:`1px solid ${T.border}`,color:T.text,cursor:v.loading?"not-allowed":"pointer",opacity:v.loading?.6:1},children:v.loading?e("common.loading"):e("admin.lessons.loadMore")})})]})}),(0,S.jsx)(A.A,{isOpen:g.isOpen,onClose:C,lesson:g.lesson,mode:g.mode,onSave:async(t,r="close")=>{try{if("create"===g.mode){const n=await v.createLesson(t);p.oR.success(e("admin.lessons.createSuccess")),x("reset"===r?{isOpen:!0,mode:"create",lesson:null}:{isOpen:!0,mode:"edit",lesson:n})}else await v.updateLesson(g.lesson.id,t),p.oR.success(e("admin.lessons.updateSuccess")),"reset"!==r&&C();v.refresh()}catch(t){throw console.error("Error saving lesson:",t),p.oR.error(e("errors.saveLesson")),t}},availableCourses:w})]})}},7122:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>K});var n=r(1609),s=r(2389),o=r(3704),a=r(8834),i=r(5107),l=r(1770),c=r(6172),d=r(3001),u=r(48),p=r(3873),f=r(9407);const m=(0,f.A)("crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]),h=(0,f.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var g=r(8686),x=r(3954);const y=(0,f.A)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var b=r(2307),v=r(3160),j=r(6316),w=r(665),N=r(6359),k=r(790);const C=({user:e,isSelected:t=!1,isChecked:r=!1,onClick:n,onToggleSelect:s,onShowEnrollments:i,onShowProgress:l,className:c=""})=>{const{theme:d}=(0,N.DP)(),u=e.roles?.[0]||"subscriber",p=e.enrollmentData||{},f=p.isEnrolled||!1,C=p.progress||0,_=p.lastActivity,S=e.avatar_urls?.[48]||e.avatar_urls?.[96]||null,E=e.name?e.name.split(" ").map(e=>e.charAt(0)).join("").toUpperCase():e.username?.charAt(0).toUpperCase()||"U",A=(e=>{if(!e)return{status:"inactive",color:"text-gray-400"};const t=new Date(e),r=new Date,n=Math.floor((r-t)/864e5);return 0===n?{status:"active",color:"text-green-500"}:n<=7?{status:"recent",color:"text-yellow-500"}:{status:"inactive",color:"text-red-500"}})(_),M=(e=>{switch(e){case"administrator":return m;case"editor":case"author":case"contributor":return h;default:return g.A}})(u),T=()=>{n?.(e)};return(0,k.jsxs)("div",{className:`\n        relative p-4 rounded-lg border cursor-pointer transition-all duration-200\n        hover:shadow-md hover:border-blue-300\n        ${t?"qe-bg-primary-light qe-border-primary shadow-sm":"bg-white border-gray-200 hover:bg-gray-50"}\n        ${c}\n      `,onClick:T,children:[(0,k.jsx)("div",{className:"absolute top-2 left-2 z-10",children:(0,k.jsx)("button",{onClick:t=>{t.stopPropagation(),s?.(e.id,!r)},className:"p-1 hover:bg-gray-100 rounded transition-colors",title:r?"Deselect user":"Select user",children:r?(0,k.jsx)(o.A,{className:"h-4 w-4 text-blue-600"}):(0,k.jsx)(a.A,{className:"h-4 w-4 text-gray-400"})})}),(0,k.jsxs)("div",{className:"flex items-start space-x-3 mb-3 ml-6",children:[(0,k.jsxs)("div",{className:"flex-shrink-0",children:[S?(0,k.jsx)("img",{src:S,alt:e.name||e.username,className:"h-10 w-10 rounded-full object-cover"}):(0,k.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-sm font-medium text-gray-600",children:E})}),(0,k.jsx)("div",{className:`w-3 h-3 rounded-full ${A.color.replace("text-","bg-")} \n            absolute -mt-2 ml-8 border-2 border-white`})]}),(0,k.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsx)("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:e.name||e.username||"Unknown User"}),(0,k.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,k.jsx)(M,{className:"h-3 w-3 text-gray-400"}),(0,k.jsx)("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${(e=>{switch(e){case"administrator":return"text-red-600 bg-red-100";case"editor":return"text-purple-600 bg-purple-100";case"author":return"text-blue-600 bg-blue-100";case"contributor":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}})(u)}`,children:u})]})]}),(0,k.jsx)("div",{className:"mt-1",children:(0,k.jsxs)("p",{className:"text-xs text-gray-500 truncate flex items-center",children:[(0,k.jsx)(x.A,{className:"h-3 w-3 mr-1"}),e.email||"No email"]})})]})]}),f&&(0,k.jsxs)("div",{className:"mb-3 p-2 qe-bg-secondary-light rounded-md",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,k.jsxs)("span",{className:"qe-text-secondary font-medium flex items-center",children:[(0,k.jsx)(y,{className:"h-3 w-3 mr-1"}),"Enrolled"]}),(0,k.jsxs)("span",{className:"text-gray-600",children:[C,"%"]})]}),(0,k.jsx)("div",{className:"mt-1 w-full bg-white rounded-full h-1.5",children:(0,k.jsx)("div",{className:"qe-bg-secondary h-1.5 rounded-full transition-all duration-300",style:{width:`${C}%`}})})]}),(0,k.jsxs)("div",{className:"flex items-center text-xs text-gray-500 mb-3",children:[(0,k.jsx)(b.A,{className:"h-3 w-3 mr-1"}),(0,k.jsxs)("span",{children:["Registered ",new Date(e.date_registered||e.registered).toLocaleDateString()]})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,k.jsxs)("button",{onClick:T,className:"flex items-center text-xs text-blue-600 hover:text-blue-800 font-medium",children:[(0,k.jsx)(v.A,{className:"h-3 w-3 mr-1"}),"View Details"]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[f&&(0,k.jsxs)("button",{onClick:t=>{t.stopPropagation(),l?.(e.id)},className:"flex items-center text-xs qe-text-accent hover:opacity-80 font-medium",children:[(0,k.jsx)(j.A,{className:"h-3 w-3 mr-1"}),"Progress"]}),(0,k.jsxs)("button",{onClick:t=>{t.stopPropagation(),i?.(e.id)},className:"flex items-center text-xs qe-text-secondary hover:opacity-80 font-medium",children:[(0,k.jsx)(w.A,{className:"h-3 w-3 mr-1"}),"Courses"]})]})]}),(0,k.jsx)("div",{className:"absolute top-2 right-2",children:(0,k.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-mono text-gray-500 bg-gray-100",children:["#",e.id]})})]})};var _=r(6844),S=r(8697),E=r(3540),A=r(4471),M=r(180),T=r(7235),P=r(2871),O=r(1999),z=r(8852),q=r(8919),D=r(8723);const I=({size:e="default",message:t,variant:r="default",centered:n=!0,className:s="",fullScreen:o=!1,overlay:a=!1})=>{const i={xs:{spinner:"h-3 w-3",text:"text-xs"},sm:{spinner:"h-4 w-4",text:"text-sm"},default:{spinner:"h-6 w-6",text:"text-base"},lg:{spinner:"h-8 w-8",text:"text-lg"},xl:{spinner:"h-12 w-12",text:"text-xl"}}[e],l={default:{spinner:"text-gray-400",text:"text-gray-600"},primary:{spinner:"text-indigo-600",text:"text-indigo-600"},white:{spinner:"text-white",text:"text-white"}}[r],c=[n&&"flex flex-col items-center justify-center",o&&"fixed inset-0 z-50",o&&a&&"bg-black bg-opacity-50",!o&&n&&"py-8",s].filter(Boolean).join(" "),d=["flex flex-col items-center justify-center",t?"space-y-3":"",o&&"bg-white rounded-lg p-8 shadow-lg"].filter(Boolean).join(" ");return(0,k.jsx)("div",{className:c,children:(0,k.jsxs)("div",{className:d,children:[(0,k.jsx)(D.A,{className:`${i.spinner} ${l.spinner} animate-spin`}),t&&(0,k.jsx)("p",{className:`${i.text} ${l.text} font-medium`,children:t})]})})},L=({userId:e,mode:t="edit",onSave:s,onCancel:o,onShowEnrollments:a,onShowProgress:i,isCollapsed:l=!1,roleOptions:c=[],className:d=""})=>{const{theme:u}=(0,N.DP)(),[p,f]=(0,n.useState)({username:"",email:"",first_name:"",last_name:"",roles:["subscriber"],password:"",description:"",url:"",nickname:""}),[m,y]=(0,n.useState)(!1),[C,D]=(0,n.useState)(!1),[L,R]=(0,n.useState)(!1),[$,B]=(0,n.useState)(null),[F,U]=(0,n.useState)("general"),[W,H]=(0,n.useState)([]),[Q,V]=(0,n.useState)(!1),[Y,K]=(0,n.useState)([]);(0,n.useEffect)(()=>{"edit"===t&&e&&"new"!==e?(G(),X(),J()):f({username:"",email:"",first_name:"",last_name:"",roles:["subscriber"],password:"",description:"",url:"",nickname:""})},[e,t]);const G=async()=>{if(e&&"new"!==e)try{y(!0);const{getApiConfig:t}=await Promise.resolve().then(r.bind(r,5236)),n=t();console.log("ðŸ”„ Loading user data for ID:",e);const s=await fetch(`${n.endpoints.users}/${e}?context=edit`,{headers:{"Content-Type":"application/json","X-WP-Nonce":n.nonce},credentials:"same-origin"});if(!s.ok){console.warn(`âš ï¸ Failed to load user with context=edit (${s.status}), trying without context...`);const t=await fetch(`${n.endpoints.users}/${e}`,{headers:{"Content-Type":"application/json","X-WP-Nonce":n.nonce},credentials:"same-origin"});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const r=await t.json();return console.log("ðŸ“¥ User data loaded (public context):",r),B(r),f({username:r.username||r.slug||"",email:"",first_name:r.name?.split(" ")[0]||"",last_name:r.name?.split(" ").slice(1).join(" ")||"",roles:r.roles||["subscriber"],password:"",description:r.description||"",url:r.url||r.link||"",nickname:r.name||r.username||r.slug||""}),void y(!1)}const o=await s.json();console.log("ðŸ“¥ User data loaded:",o),B(o),f({username:o.username||"",email:o.email||"",first_name:o.first_name||"",last_name:o.last_name||"",roles:o.roles||["subscriber"],password:"",description:o.description||"",url:o.url||"",nickname:o.nickname||o.username||""})}catch(e){console.error("âŒ Error loading user data:",e)}finally{y(!1)}},X=async()=>{if(e&&"new"!==e)try{V(!0);const{getUserEnrollments:t}=await Promise.resolve().then(r.bind(r,4953)),n=await t(e),s=n?.data||n;H(Array.isArray(s)?s:[])}catch(e){console.error("âŒ Error loading enrollments:",e),H([])}finally{V(!1)}},J=async()=>{try{const{getApiConfig:e}=await Promise.resolve().then(r.bind(r,5236)),t=e(),n=await fetch(`${t.apiUrl}/wp/v2/qe_course?per_page=100&status=publish,draft,private`,{headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin"});if(n.ok){const e=await n.json();K(e)}}catch(e){console.error("âŒ Error loading courses:",e),K([])}},Z=(e,t)=>{f(r=>({...r,[e]:t}))},ee=async e=>{e.preventDefault();try{D(!0),await(s?.(p))}catch(e){console.error("Error saving user:",e)}finally{D(!1)}},te=()=>{o?.()},re="create"===t||"new"===e,ne=$?.name||`${p.first_name} ${p.last_name}`.trim()||p.username,se=$?.avatar_urls?.[96]||$?.avatar_urls?.[48],oe=[{id:"general",label:"General",icon:g.A},{id:"activity",label:"Activity",icon:_.A},{id:"enrollments",label:"Enrollments",icon:w.A}];return m?(0,k.jsx)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full ${d}`,children:(0,k.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,k.jsx)(I,{size:"lg"})})}):l?(0,k.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${d}`,children:[(0,k.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[se?(0,k.jsx)("img",{src:se,alt:ne,className:"h-10 w-10 rounded-full object-cover mb-1.5"}):(0,k.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center mb-1.5",children:(0,k.jsx)(g.A,{className:"h-5 w-5 text-gray-400"})}),(0,k.jsx)("p",{className:"text-xs font-medium text-gray-900 truncate text-center w-full px-1 leading-tight",children:ne}),(0,k.jsx)("p",{className:"text-[10px] text-gray-500 uppercase tracking-wide",children:p.roles?.[0]||"subscriber"})]})}),(0,k.jsxs)("div",{className:"flex-1 p-2 space-y-1.5",children:[(0,k.jsx)("button",{onClick:a,className:"w-full p-2 text-sm text-gray-600 hover:bg-gray-50 rounded flex items-center justify-center",title:"View Enrollments",children:(0,k.jsx)(w.A,{className:"h-4 w-4"})}),(0,k.jsx)("button",{onClick:i,className:"w-full p-2 text-sm text-gray-600 hover:bg-gray-50 rounded flex items-center justify-center",title:"View Progress",children:(0,k.jsx)(j.A,{className:"h-4 w-4"})})]})]}):(0,k.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${d}`,children:[(0,k.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[!re&&se?(0,k.jsx)("img",{src:se,alt:ne,className:"h-16 w-16 rounded-full object-cover"}):(0,k.jsx)("div",{className:"h-16 w-16 rounded-full bg-gray-200 flex items-center justify-center",children:(0,k.jsx)(g.A,{className:"h-8 w-8 text-gray-400"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:re?"Create New User":ne}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:re?"Add a new user to the system":`User #${e}`}),!re&&$&&(0,k.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-xs text-gray-500",children:[(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(b.A,{className:"h-3 w-3 mr-1"}),"Registered ",new Date($.registered_date||$.registered||$.date_registered).toLocaleDateString()]}),(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(h,{className:"h-3 w-3 mr-1"}),$.roles?.[0]||"subscriber"]}),$.enrollmentData?.lastActivity&&(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(_.A,{className:"h-3 w-3 mr-1"}),"Last active ",new Date($.enrollmentData.lastActivity).toLocaleDateString()]})]})]})]}),(0,k.jsx)("button",{onClick:te,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md",children:(0,k.jsx)(S.A,{className:"h-5 w-5"})})]}),(0,k.jsx)("div",{className:"mt-4 border-b border-gray-200",children:(0,k.jsx)("nav",{className:"-mb-px flex space-x-8",children:oe.map(e=>{const t=e.icon;return(0,k.jsxs)("button",{onClick:()=>U(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center "+(F===e.id?"qe-border-primary qe-text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,k.jsx)(t,{className:"h-4 w-4 mr-2"}),e.label]},e.id)})})})]}),(0,k.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["general"===F&&(0,k.jsx)("form",{onSubmit:ee,className:"space-y-6",children:(0,k.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Username ",re&&(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsx)("input",{type:"text",value:p.username,onChange:e=>Z("username",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter username",required:re,disabled:!re})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Email Address ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsx)("input",{type:"email",value:p.email,onChange:e=>Z("email",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter email address",required:!0})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,k.jsx)("input",{type:"text",value:p.first_name,onChange:e=>Z("first_name",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"First name"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,k.jsx)("input",{type:"text",value:p.last_name,onChange:e=>Z("last_name",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Last name"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,k.jsx)("select",{value:p.roles[0],onChange:e=>Z("roles",[e.target.value]),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:c.map(e=>(0,k.jsx)("option",{value:e.value,children:e.label},e.value))})]}),re&&(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Password ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,k.jsxs)("div",{className:"mt-1 relative",children:[(0,k.jsx)("input",{type:L?"text":"password",value:p.password,onChange:e=>Z("password",e.target.value),className:"block w-full px-3 py-2 pr-10 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter password",required:!0}),(0,k.jsx)("button",{type:"button",onClick:()=>R(!L),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:L?(0,k.jsx)(E.A,{className:"h-4 w-4 text-gray-400"}):(0,k.jsx)(v.A,{className:"h-4 w-4 text-gray-400"})})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Website"}),(0,k.jsx)("input",{type:"url",value:p.url,onChange:e=>Z("url",e.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"https://example.com"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bio"}),(0,k.jsx)("textarea",{value:p.description,onChange:e=>Z("description",e.target.value),rows:4,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Brief description about the user..."})]})]})}),"activity"===F&&!re&&(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(_.A,{className:"h-8 w-8 text-blue-500"}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Registration Date"}),(0,k.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:$?.registered_date||$?.registered||$?.date_registered?new Date($.registered_date||$.registered||$.date_registered).toLocaleDateString():"Unknown"})]})]})}),(0,k.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(h,{className:"h-8 w-8 text-green-500"}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Current Role"}),(0,k.jsx)("p",{className:"text-lg font-semibold text-gray-900 capitalize",children:$?.roles?.[0]||"subscriber"})]})]})}),(0,k.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(x.A,{className:"h-8 w-8 text-purple-500"}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Email Status"}),(0,k.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:$?.email?"Verified":"No Email"})]})]})}),(0,k.jsx)("div",{className:"bg-orange-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)(g.A,{className:"h-8 w-8 text-orange-500"}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"User ID"}),(0,k.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:["#",$?.id||"Unknown"]})]})]})})]}),$?.capabilities&&Object.keys($.capabilities).length>0&&(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"User Capabilities"}),(0,k.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[Object.keys($.capabilities).slice(0,12).map(e=>(0,k.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.replace("_"," ")},e)),Object.keys($.capabilities).length>12&&(0,k.jsxs)("span",{className:"text-xs text-gray-500",children:["+",Object.keys($.capabilities).length-12," more"]})]})})]}),$?.meta&&Object.keys($.meta).length>0&&(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Additional Information"}),(0,k.jsx)("div",{className:"bg-gray-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"space-y-2 text-sm",children:[$.nickname&&(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"font-medium text-gray-600",children:"Nickname:"}),(0,k.jsx)("span",{className:"text-gray-900",children:$.nickname})]}),$.locale&&(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"font-medium text-gray-600",children:"Locale:"}),(0,k.jsx)("span",{className:"text-gray-900",children:$.locale})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"font-medium text-gray-600",children:"Username:"}),(0,k.jsx)("span",{className:"text-gray-900 font-mono",children:$.username})]}),$.link&&(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"font-medium text-gray-600",children:"Profile URL:"}),(0,k.jsx)("a",{href:$.link,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"View Profile"})]})]})})]})]}),"enrollments"===F&&!re&&(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsx)("div",{className:"flex items-center justify-between",children:(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Course Enrollments"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage user enrollment in courses"})]})}),Q?(0,k.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,k.jsx)(I,{size:"lg"})}):(0,k.jsx)("div",{className:"space-y-3",children:0===Y.length?(0,k.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,k.jsx)(w.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,k.jsx)("p",{className:"text-gray-500 font-medium",children:"No courses available"})]}):Y.map(t=>{const n=W.find(e=>parseInt(e.course_id)===parseInt(t.id)),s=!!n,o=t.title?.rendered||t.title||"Untitled Course";return(0,k.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,k.jsxs)("div",{className:"flex items-start justify-between",children:[(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,k.jsx)("h4",{className:"font-medium text-gray-900",children:o}),s?(0,k.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,k.jsx)(A.A,{className:"h-3 w-3 mr-1"}),"Enrolled"]}):(0,k.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,k.jsx)(M.A,{className:"h-3 w-3 mr-1"}),"Not Enrolled"]})]}),s&&n&&(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsxs)("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(b.A,{className:"h-3 w-3 mr-1"}),"Enrolled ",new Date(n.enrollment_date).toLocaleDateString()]}),n.last_activity&&(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(T.A,{className:"h-3 w-3 mr-1"}),"Last activity ",new Date(n.last_activity).toLocaleDateString()]})]}),void 0!==n.progress&&(0,k.jsxs)("div",{className:"space-y-1",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,k.jsxs)("span",{className:"text-gray-600 flex items-center",children:[(0,k.jsx)(j.A,{className:"h-3 w-3 mr-1"}),"Progress"]}),(0,k.jsxs)("span",{className:"font-medium",children:[n.progress,"%"]})]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,k.jsx)("div",{className:"qe-bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${n.progress}%`}})})]})]})]}),(0,k.jsx)("div",{className:"ml-4",children:s?(0,k.jsxs)(q.A,{onClick:()=>(async t=>{if(confirm("Are you sure you want to unenroll this user from the course?"))try{const{unenrollUserFromCourse:n}=await Promise.resolve().then(r.bind(r,4953));await n(e,t),await X()}catch(e){console.error("Error unenrolling user:",e),alert("Failed to unenroll user. Please try again.")}})(t.id),variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:[(0,k.jsx)(P.A,{className:"h-4 w-4 mr-1"}),"Unenroll"]}):(0,k.jsxs)(q.A,{onClick:()=>(async t=>{try{const{enrollUserInCourse:n}=await Promise.resolve().then(r.bind(r,4953));await n(e,t),await X()}catch(e){console.error("Error enrolling user:",e),alert("Failed to enroll user. Please try again.")}})(t.id),variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-800 hover:bg-green-50",children:[(0,k.jsx)(O.A,{className:"h-4 w-4 mr-1"}),"Enroll"]})})]})},t.id)})}),!Q&&Y.length>0&&(0,k.jsxs)("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[(0,k.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:Y.length}),(0,k.jsx)("div",{className:"text-xs text-blue-800",children:"Total Courses"})]}),(0,k.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-green-600",children:W.length}),(0,k.jsx)("div",{className:"text-xs text-green-800",children:"Enrolled"})]}),(0,k.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:Y.length-W.length}),(0,k.jsx)("div",{className:"text-xs text-gray-800",children:"Available"})]})]})]})]}),"general"===F&&(0,k.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-end space-x-3",children:[(0,k.jsx)(q.A,{onClick:te,variant:"ghost",disabled:C,children:"Cancel"}),(0,k.jsxs)(q.A,{onClick:ee,variant:"primary",disabled:C,loading:C,children:[(0,k.jsx)(z.A,{className:"h-4 w-4 mr-2"}),C?"Saving...":re?"Create User":"Save Changes"]})]})]})};var R=r(8445);const $=({userId:e,onCancel:t,availableCourses:s=[],onEnrollUser:o,onUnenrollUser:a,isCollapsed:i=!1,className:l=""})=>{const{theme:c}=(0,N.DP)(),[d,u]=(0,n.useState)(!1),[p,f]=(0,n.useState)(!1),[m,h]=(0,n.useState)([]),[g,x]=(0,n.useState)(""),[y,v]=(0,n.useState)("all"),[C,_]=(0,n.useState)(null);(0,n.useEffect)(()=>{e&&E()},[e]);const E=async()=>{if(e)try{u(!0);const{getApiConfig:t}=await Promise.resolve().then(r.bind(r,5236)),{getUserEnrollments:n}=await Promise.resolve().then(r.bind(r,4953)),s=t();let o=null;try{const t=await fetch(`/wp-json/wp/v2/users/${e}?context=edit`,{headers:{"Content-Type":"application/json","X-WP-Nonce":s.nonce},credentials:"same-origin"});if(t.ok)o=await t.json(),console.log("âœ… User loaded with context=edit");else{console.warn(`âš ï¸ Failed to load user with context=edit (${t.status}), trying public context...`);const r=await fetch(`/wp-json/wp/v2/users/${e}`,{headers:{"Content-Type":"application/json","X-WP-Nonce":s.nonce},credentials:"same-origin"});r.ok&&(o=await r.json(),console.log("âœ… User loaded with public context"))}}catch(e){console.warn("âš ï¸ Error loading user data:",e)}try{const t=await n(e);console.log("âœ… Enrollments loaded:",t);const r=t?.data||t;h(Array.isArray(r)?r:[])}catch(e){console.error("âŒ Error loading enrollments:",e),h([])}_(o)}catch(e){console.error("âŒ Error in loadUserEnrollments:",e),h([])}finally{u(!1)}},z=C?.name||`${C?.first_name} ${C?.last_name}`.trim()||C?.username,D=C?.avatar_urls?.[48]||C?.avatar_urls?.[96],L=(0,n.useMemo)(()=>{if(!Array.isArray(s))return console.warn("âš ï¸ availableCourses is not an array:",s),[];const e=Array.isArray(m)?m:[];return console.log("ðŸ” DEBUG - Available Courses:",s),console.log("ðŸ” DEBUG - User Enrollments:",e),s.map(t=>{const r=parseInt(t.value),n=e.find(e=>{const t=parseInt(e.course_id);return console.log(`ðŸ” Comparing course ${r} with enrollment ${t}:`,r===t),t===r}),s=!!n;return console.log(`ðŸ“Š Course "${t.label}" (ID: ${r}) - Enrolled: ${s}`,n),{...t,isEnrolled:s,enrollmentData:n||null}})},[s,m]),$=(0,n.useMemo)(()=>{let e=L;return g&&(e=e.filter(e=>e.label.toLowerCase().includes(g.toLowerCase()))),"enrolled"===y?e=e.filter(e=>e.isEnrolled):"available"===y&&(e=e.filter(e=>!e.isEnrolled)),e},[L,g,y]),B=(0,n.useMemo)(()=>{const e=L.length,t=L.filter(e=>e.isEnrolled).length;return{total:e,enrolled:t,available:e-t}},[L]);return d?(0,k.jsx)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full ${l}`,children:(0,k.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,k.jsx)(I,{size:"lg"})})}):i?(0,k.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${l}`,children:[(0,k.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)(w.A,{className:"h-6 w-6 text-gray-400 mb-1.5"}),(0,k.jsx)("p",{className:"text-xs font-medium text-gray-900 text-center leading-tight",children:"Enrollments"})]})}),(0,k.jsxs)("div",{className:"flex-1 p-2 space-y-2",children:[(0,k.jsxs)("div",{className:"bg-green-50 rounded px-2 py-1.5 text-center",children:[(0,k.jsx)("div",{className:"text-lg font-bold text-green-600",children:B.enrolled}),(0,k.jsx)("div",{className:"text-[10px] text-green-700 uppercase tracking-wide",children:"Enrolled"})]}),(0,k.jsxs)("div",{className:"bg-gray-50 rounded px-2 py-1.5 text-center",children:[(0,k.jsx)("div",{className:"text-lg font-bold text-gray-600",children:B.available}),(0,k.jsx)("div",{className:"text-[10px] text-gray-700 uppercase tracking-wide",children:"Available"})]}),(0,k.jsx)("div",{className:"border-t border-gray-200 pt-2 text-center",children:(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:[B.total," total"]})})]})]}):(0,k.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col max-w-full overflow-hidden ${l}`,children:[(0,k.jsxs)("div",{className:"p-4 md:p-6 border-b border-gray-200",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3 min-w-0 flex-1",children:[D?(0,k.jsx)("img",{src:D,alt:z,className:"h-10 w-10 md:h-12 md:w-12 rounded-full object-cover flex-shrink-0"}):(0,k.jsx)("div",{className:"h-10 w-10 md:h-12 md:w-12 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0",children:(0,k.jsx)(w.A,{className:"h-5 w-5 md:h-6 md:w-6 text-gray-400"})}),(0,k.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,k.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-gray-900 truncate",children:"Course Enrollments"}),(0,k.jsx)("p",{className:"text-sm text-gray-500 truncate",children:z})]})]}),(0,k.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md flex-shrink-0 ml-2",children:(0,k.jsx)(S.A,{className:"h-5 w-5"})})]}),(0,k.jsxs)("div",{className:"mt-4 grid grid-cols-3 gap-4",children:[(0,k.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:B.total}),(0,k.jsx)("div",{className:"text-xs text-blue-800",children:"Total Courses"})]}),(0,k.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-green-600",children:B.enrolled}),(0,k.jsx)("div",{className:"text-xs text-green-800",children:"Enrolled"})]}),(0,k.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[(0,k.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:B.available}),(0,k.jsx)("div",{className:"text-xs text-gray-800",children:"Available"})]})]})]}),(0,k.jsxs)("div",{className:"p-4 border-b border-gray-200 space-y-4",children:[(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,k.jsx)(R.A,{className:"h-4 w-4 text-gray-400"})}),(0,k.jsx)("input",{type:"text",placeholder:"Search courses...",value:g,onChange:e=>{x(e.target.value)},className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 min-w-0"})]}),(0,k.jsx)("div",{className:"flex space-x-2",children:[{value:"all",label:"All Courses",count:B.total},{value:"enrolled",label:"Enrolled",count:B.enrolled},{value:"available",label:"Available",count:B.available}].map(e=>(0,k.jsxs)("button",{onClick:()=>{return t=e.value,void v(t);var t},className:"flex items-center px-3 py-1.5 text-xs font-medium rounded-full transition-colors "+(y===e.value?"qe-bg-primary qe-text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[e.label,(0,k.jsx)("span",{className:"ml-1 px-1.5 py-0.5 rounded-full bg-black bg-opacity-20 text-xs",children:e.count})]},e.value))})]}),(0,k.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,k.jsx)("div",{className:"p-4 space-y-3",children:0===$.length?(0,k.jsxs)("div",{className:"text-center py-12",children:[(0,k.jsx)(w.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,k.jsx)("p",{className:"text-gray-500 font-medium",children:"No courses found"}),(0,k.jsx)("p",{className:"text-sm text-gray-400",children:g?"Try adjusting your search terms":"No courses match the selected filter"})]}):$.map(t=>(0,k.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,k.jsxs)("div",{className:"flex items-start justify-between",children:[(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,k.jsx)("h3",{className:"font-medium text-gray-900",children:t.label}),t.isEnrolled?(0,k.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,k.jsx)(A.A,{className:"h-3 w-3 mr-1"}),"Enrolled"]}):(0,k.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[(0,k.jsx)(M.A,{className:"h-3 w-3 mr-1"}),"Not Enrolled"]})]}),t.isEnrolled&&t.enrollmentData&&(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsxs)("div",{className:"flex items-center text-xs text-gray-500 space-x-4",children:[(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(b.A,{className:"h-3 w-3 mr-1"}),"Enrolled ",new Date(t.enrollmentData.enrollment_date).toLocaleDateString()]}),t.enrollmentData.last_activity&&(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(T.A,{className:"h-3 w-3 mr-1"}),"Last activity ",new Date(t.enrollmentData.last_activity).toLocaleDateString()]})]}),void 0!==t.enrollmentData.progress&&(0,k.jsxs)("div",{className:"space-y-1",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,k.jsxs)("span",{className:"text-gray-600 flex items-center",children:[(0,k.jsx)(j.A,{className:"h-3 w-3 mr-1"}),"Progress"]}),(0,k.jsxs)("span",{className:"font-medium",children:[t.enrollmentData.progress,"%"]})]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,k.jsx)("div",{className:"qe-bg-accent h-2 rounded-full transition-all duration-300",style:{width:`${t.enrollmentData.progress}%`}})})]})]})]}),(0,k.jsx)("div",{className:"ml-4",children:t.isEnrolled?(0,k.jsxs)(q.A,{onClick:()=>(async t=>{if(confirm("Are you sure you want to unenroll this user from the course?"))try{f(!0),await(a?.(e,t)),h(e=>e.filter(e=>parseInt(e.course_id)!==parseInt(t))),console.log("âœ… User unenrolled and state updated")}catch(e){console.error("Error unenrolling user:",e),await E()}finally{f(!1)}})(t.value),variant:"ghost",size:"sm",disabled:p,className:"text-red-600 hover:text-red-800 hover:bg-red-50",children:[(0,k.jsx)(P.A,{className:"h-4 w-4 mr-1"}),"Unenroll"]}):(0,k.jsxs)(q.A,{onClick:()=>(async t=>{try{f(!0),await(o?.(e,t)),h(r=>r.some(e=>parseInt(e.course_id)===parseInt(t))?r:[...r,{id:Date.now(),user_id:e,course_id:parseInt(t),enrollment_date:(new Date).toISOString(),progress:0,status:"active",last_activity:(new Date).toISOString()}]),console.log("âœ… User enrolled and state updated")}catch(e){console.error("Error enrolling user:",e),await E()}finally{f(!1)}})(t.value),variant:"ghost",size:"sm",disabled:p,className:"text-green-600 hover:text-green-800 hover:bg-green-50",children:[(0,k.jsx)(O.A,{className:"h-4 w-4 mr-1"}),"Enroll"]})})]})},t.value))})}),p&&(0,k.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:(0,k.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,k.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-500 mr-2"}),"Updating enrollments..."]})})]})};var B=r(2864),F=r(4180),U=r(8309),W=r(5977),H=r(5899);const Q=({userId:e,onCancel:t,availableCourses:r=[],isCollapsed:s=!1,className:o=""})=>{const{theme:a}=(0,N.DP)(),{getUser:i,getUserProgress:c,updating:d}=(0,l.A)({autoFetch:!1}),[u,p]=(0,n.useState)(!1),[f,m]=(0,n.useState)(null),[h,g]=(0,n.useState)(null),[x,y]=(0,n.useState)("all"),[v,C]=(0,n.useState)("overview");(0,n.useEffect)(()=>{e&&E()},[e,x]);const E=async()=>{if(e)try{p(!0),console.log("ðŸ“Š Loading progress data for user:",e);const[t,r]=await Promise.all([i(e),c(e,x)]);g(t),m(r),console.log("âœ… Progress data loaded:",{user:t,progress:r})}catch(e){console.error("âŒ Error loading progress data:",e)}finally{p(!1)}},M=h?.name||`${h?.first_name} ${h?.last_name}`.trim()||h?.username,P=h?.avatar_urls?.[48]||h?.avatar_urls?.[96],O=e=>{if(e<60)return`${e}m`;const t=Math.floor(e/60),r=e%60;return r>0?`${t}h ${r}m`:`${t}h`},z=[{id:"overview",label:"Overview",icon:B.A},{id:"courses",label:"Course Progress",icon:w.A},{id:"achievements",label:"Achievements",icon:F.A}];return u||d?(0,k.jsx)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full ${o}`,children:(0,k.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,k.jsx)(I,{size:"lg"})})}):s?(0,k.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${o}`,children:[(0,k.jsx)("div",{className:"p-3 border-b border-gray-200",children:(0,k.jsxs)("div",{className:"flex flex-col items-center",children:[(0,k.jsx)(j.A,{className:"h-6 w-6 text-gray-400 mb-1.5"}),(0,k.jsx)("p",{className:"text-xs font-medium text-gray-900 text-center leading-tight",children:"Progress"})]})}),(0,k.jsxs)("div",{className:"flex-1 p-2 space-y-2",children:[(0,k.jsxs)("div",{className:"bg-blue-50 rounded px-2 py-1.5 text-center",children:[(0,k.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[f?.overall?.averageProgress||0,(0,k.jsx)("span",{className:"text-sm",children:"%"})]}),(0,k.jsx)("div",{className:"text-[10px] text-blue-700 uppercase tracking-wide",children:"Average"})]}),(0,k.jsxs)("div",{className:"space-y-1.5 pt-1",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,k.jsx)("span",{className:"text-gray-500",children:"Courses"}),(0,k.jsx)("span",{className:"font-bold text-gray-900",children:f?.overall?.completedCourses||0})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,k.jsx)("span",{className:"text-gray-500",children:"Certs"}),(0,k.jsx)("span",{className:"font-bold text-gray-900",children:f?.overall?.certificatesEarned||0})]}),(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,k.jsx)("span",{className:"text-gray-500",children:"Time"}),(0,k.jsx)("span",{className:"font-bold text-gray-900 text-[10px]",children:f?.overall?.totalTimeSpent?O(f.overall.totalTimeSpent):"0m"})]})]})]})]}):(0,k.jsxs)("div",{className:`bg-white rounded-lg shadow-sm border border-gray-200 h-full flex flex-col ${o}`,children:[(0,k.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[P?(0,k.jsx)("img",{src:P,alt:M,className:"h-12 w-12 rounded-full object-cover"}):(0,k.jsx)("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center",children:(0,k.jsx)(j.A,{className:"h-6 w-6 text-gray-400"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Learning Progress"}),(0,k.jsx)("p",{className:"text-sm text-gray-500",children:M})]})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsxs)(q.A,{onClick:()=>{console.log("Exporting progress data for user:",e)},variant:"ghost",size:"sm",children:[(0,k.jsx)(U.A,{className:"h-4 w-4 mr-1"}),"Export"]}),(0,k.jsx)(q.A,{onClick:()=>{console.log("ðŸ”„ Refreshing progress data..."),E()},variant:"ghost",size:"sm",children:(0,k.jsx)(W.A,{className:"h-4 w-4"})}),(0,k.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md",children:(0,k.jsx)(S.A,{className:"h-5 w-5"})})]})]}),(0,k.jsx)("div",{className:"mt-4 flex space-x-2",children:[{value:"all",label:"All Time"},{value:"month",label:"This Month"},{value:"week",label:"This Week"}].map(e=>(0,k.jsx)("button",{onClick:()=>y(e.value),className:"px-3 py-1.5 text-xs font-medium rounded-md transition-colors "+(x===e.value?"qe-bg-primary qe-text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.label},e.value))}),(0,k.jsx)("div",{className:"mt-4 border-b border-gray-200",children:(0,k.jsx)("nav",{className:"-mb-px flex space-x-8",children:z.map(e=>{const t=e.icon;return(0,k.jsxs)("button",{onClick:()=>C(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center "+(v===e.id?"qe-border-primary qe-text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,k.jsx)(t,{className:"h-4 w-4 mr-2"}),e.label]},e.id)})})})]}),(0,k.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",children:["overview"===v&&f?.overall&&(0,k.jsxs)("div",{className:"space-y-6",children:[(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-blue-900",children:"Average Progress"}),(0,k.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[f.overall.averageProgress,"%"]})]}),(0,k.jsx)(j.A,{className:"h-8 w-8 text-blue-500"})]})}),(0,k.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-green-900",children:"Completed"}),(0,k.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[f.overall.completedCourses,"/",f.overall.totalCourses]})]}),(0,k.jsx)(A.A,{className:"h-8 w-8 text-green-500"})]})}),(0,k.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-purple-900",children:"Time Spent"}),(0,k.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:O(f.overall.totalTimeSpent)})]}),(0,k.jsx)(T.A,{className:"h-8 w-8 text-purple-500"})]})}),(0,k.jsx)("div",{className:"bg-yellow-50 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-yellow-900",children:"Certificates"}),(0,k.jsx)("p",{className:"text-2xl font-bold text-yellow-600",children:f.overall.certificatesEarned})]}),(0,k.jsx)(F.A,{className:"h-8 w-8 text-yellow-500"})]})})]}),(0,k.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Weekly Activity"}),(0,k.jsx)("div",{className:"flex items-end justify-between h-32 space-x-2",children:f.weeklyActivity?.map((e,t)=>(0,k.jsxs)("div",{className:"flex flex-col items-center flex-1",children:[(0,k.jsx)("div",{className:"qe-bg-primary rounded-t-sm w-full transition-all duration-300 hover:opacity-80",style:{height:`${Math.max(e.minutes/120*100,5)}%`,minHeight:e.minutes>0?"4px":"2px"},title:`${e.minutes} minutes`}),(0,k.jsx)("span",{className:"text-xs text-gray-500 mt-2",children:new Date(e.date).toLocaleDateString("en",{weekday:"short"})})]},t))})]})]}),"courses"===v&&f?.courses&&(0,k.jsx)("div",{className:"space-y-4",children:f.courses.map(e=>{return(0,k.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,k.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("h3",{className:"font-medium text-gray-900 mb-1",children:e.title}),(0,k.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(T.A,{className:"h-3 w-3 mr-1"}),O(e.timeSpent)]}),(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(w.A,{className:"h-3 w-3 mr-1"}),e.lessonsCompleted,"/",e.totalLessons," lessons"]}),(0,k.jsxs)("span",{className:"flex items-center",children:[(0,k.jsx)(_.A,{className:"h-3 w-3 mr-1"}),new Date(e.lastActivity).toLocaleDateString()]})]})]}),(0,k.jsx)("div",{className:"ml-4",children:e.completed?(0,k.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,k.jsx)(H.A,{className:"h-3 w-3 mr-1"}),"Completed"]}):(0,k.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium "+(t=e.progress,t>=80?"text-green-500 bg-green-100":t>=50?"text-yellow-500 bg-yellow-100":t>=20?"text-orange-500 bg-orange-100":"text-red-500 bg-red-100"),children:[e.progress,"%"]})})]}),(0,k.jsxs)("div",{className:"space-y-1",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,k.jsxs)("span",{className:"font-medium",children:[e.progress,"%"]})]}),(0,k.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,k.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 "+(e.completed?"bg-green-500":"qe-bg-accent"),style:{width:`${e.progress}%`}})})]})]},e.id);var t})}),"achievements"===v&&f?.achievements&&(0,k.jsx)("div",{className:"space-y-4",children:0===f.achievements.length?(0,k.jsxs)("div",{className:"text-center py-12",children:[(0,k.jsx)(F.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,k.jsx)("p",{className:"text-gray-500 font-medium",children:"No achievements yet"}),(0,k.jsx)("p",{className:"text-sm text-gray-400",children:"Complete courses and lessons to earn achievements"})]}):f.achievements.map(e=>(0,k.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("div",{className:"h-12 w-12 bg-yellow-100 rounded-full flex items-center justify-center",children:(0,k.jsx)(F.A,{className:"h-6 w-6 text-yellow-600"})})}),(0,k.jsxs)("div",{className:"flex-1",children:[(0,k.jsx)("h3",{className:"font-medium text-gray-900",children:e.title}),(0,k.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:e.description}),(0,k.jsxs)("div",{className:"flex items-center text-xs text-gray-400",children:[(0,k.jsx)(b.A,{className:"h-3 w-3 mr-1"}),"Earned on ",new Date(e.earnedDate).toLocaleDateString()]})]})]})},e.id))})]})]})};var V=r(3893);const Y=({selectedUserIds:e=[],availableCourses:t=[],onSubmit:r,onClose:s})=>{const[o,a]=(0,n.useState)([]),[i,l]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1),u=(0,n.useMemo)(()=>i?t.filter(e=>e.label.toLowerCase().includes(i.toLowerCase())):t,[t,i]),p=(0,n.useMemo)(()=>0!==u.length&&u.every(e=>o.includes(e.value)),[u,o]);return(0,k.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,k.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,k.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),(0,k.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[(0,k.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("div",{className:"flex-shrink-0 bg-white bg-opacity-20 rounded-full p-2",children:(0,k.jsx)(V.A,{className:"h-6 w-6 text-white"})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Batch Enrollment"}),(0,k.jsxs)("p",{className:"text-sm text-blue-100",children:["Enroll ",e.length," user",1!==e.length?"s":""," in courses"]})]})]}),(0,k.jsx)("button",{onClick:s,className:"text-white hover:text-blue-100 transition-colors",disabled:c,children:(0,k.jsx)(S.A,{className:"h-6 w-6"})})]})}),(0,k.jsxs)("div",{className:"px-6 py-4",children:[(0,k.jsx)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)(V.A,{className:"h-5 w-5 text-blue-600"}),(0,k.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,k.jsx)("strong",{children:e.length})," user",1!==e.length?"s":""," selected"]})]}),(0,k.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,k.jsx)(w.A,{className:"h-5 w-5 text-blue-600"}),(0,k.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[(0,k.jsx)("strong",{children:o.length})," course",1!==o.length?"s":""," selected"]})]})]}),o.length>0&&(0,k.jsxs)("div",{className:"text-sm text-gray-600",children:["Total enrollments: ",(0,k.jsx)("strong",{children:e.length*o.length})]})]})}),(0,k.jsx)("div",{className:"mb-4",children:(0,k.jsxs)("div",{className:"relative",children:[(0,k.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,k.jsx)(R.A,{className:"h-4 w-4 text-gray-400"})}),(0,k.jsx)("input",{type:"text",placeholder:"Search courses...",value:i,onChange:e=>l(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})}),(0,k.jsxs)("div",{className:"mb-3 flex items-center justify-between px-2",children:[(0,k.jsxs)("button",{onClick:()=>{const e=u.map(e=>e.value),t=e.every(e=>o.includes(e));a(t?t=>t.filter(t=>!e.includes(t)):t=>{const r=e.filter(e=>!t.includes(e));return[...t,...r]})},className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:[p?"Deselect All":"Select All"," (",u.length,")"]}),i&&(0,k.jsxs)("span",{className:"text-xs text-gray-500",children:["Showing ",u.length," of ",t.length," courses"]})]}),(0,k.jsx)("div",{className:"border border-gray-200 rounded-lg max-h-96 overflow-y-auto",children:0===u.length?(0,k.jsxs)("div",{className:"p-8 text-center",children:[(0,k.jsx)(w.A,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),(0,k.jsx)("p",{className:"text-gray-500 font-medium",children:"No courses found"}),i&&(0,k.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Try adjusting your search terms"})]}):(0,k.jsx)("div",{className:"divide-y divide-gray-200",children:u.map(e=>{const t=o.includes(e.value);return(0,k.jsx)("button",{onClick:()=>{return t=e.value,void a(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors flex items-center justify-between "+(t?"bg-blue-50":""),children:(0,k.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,k.jsx)("div",{className:"flex-shrink-0 h-5 w-5 rounded border-2 flex items-center justify-center transition-colors "+(t?"bg-blue-600 border-blue-600":"border-gray-300"),children:t&&(0,k.jsx)(A.A,{className:"h-4 w-4 text-white"})}),(0,k.jsx)("span",{className:"text-sm font-medium text-gray-900 truncate",children:e.label})]})},e.value)})})})]}),(0,k.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-between",children:[(0,k.jsx)("div",{className:"text-sm text-gray-600",children:o.length>0&&(0,k.jsxs)("span",{children:["Ready to create ",(0,k.jsx)("strong",{children:e.length*o.length})," enrollment",e.length*o.length!==1?"s":""]})}),(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)(q.A,{onClick:s,variant:"ghost",disabled:c,children:"Cancel"}),(0,k.jsx)(q.A,{onClick:async()=>{if(0!==o.length)try{d(!0),await r(o)}catch(e){console.error("Error submitting batch enrollment:",e),alert("An error occurred. Please try again.")}finally{d(!1)}else alert("Please select at least one course")},variant:"primary",disabled:0===o.length||c,loading:c,children:c?"Processing...":`Enroll in ${o.length} Course${1!==o.length?"s":""}`})]})]})]})]})})},K=()=>{const{t:e}=(0,s.Bd)(),[t,f]=(0,n.useState)([{type:"userList"}]),[m,h]=(0,n.useState)([]),[g,x]=(0,n.useState)(!1),[y,b]=(0,n.useState)(!1),v=(0,n.useRef)(null),j=(0,l.k)({autoFetch:!0,perPage:50,debounceMs:300}),w=(0,c.h)({autoFetch:!0,status:"publish,draft,private"}),{options:N,refetch:_}=(0,d.h)(["qe_category"]);(0,n.useEffect)(()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&b(!1)};if(y)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[y]);const S=e=>{f([{type:"userList"},{type:"user",id:e.id}])},E=()=>{f([{type:"userList"},{type:"user",id:"new"}])},A=()=>{f(e=>e.slice(0,-1))},M=e=>{f(t=>[...t,{type:"enrollment",userId:e}])},T=e=>{f(t=>[...t,{type:"progress",userId:e}])},P=(0,n.useCallback)((e,t)=>{h(r=>t?[...r,e]:r.filter(t=>t!==e))},[]),O=(0,n.useCallback)(e=>{if(e){const e=(j.users||[]).map(e=>e.id);h(e)}else h([])},[j.users]),z=(0,n.useCallback)(()=>{0!==m.length?x(!0):alert("Please select at least one user")},[m]),q=(0,n.useCallback)(async e=>{if(e&&0!==e.length)try{console.log("ðŸš€ Starting batch enrollment:",{users:m,courses:e});const{batchEnrollUsers:t}=await Promise.resolve().then(r.bind(r,4953)),n=[];for(const r of e){const e=await t(m,parseInt(r));n.push({courseId:r,...e})}const s=n.reduce((e,t)=>e+t.success.length,0),o=n.reduce((e,t)=>e+t.failed.length,0);alert(`Batch enrollment completed!\n\nSuccess: ${s}\nFailed: ${o}`),h([]),x(!1),j.refreshUsers?.()}catch(e){console.error("âŒ Error in batch enrollment:",e),alert("An error occurred during batch enrollment. Please try again.")}else alert("Please select at least one course")},[m,j]),D=(0,n.useMemo)(()=>[{value:"all",label:"All Roles"},{value:"administrator",label:"Administrator"},{value:"editor",label:"Editor"},{value:"author",label:"Author"},{value:"contributor",label:"Contributor"},{value:"subscriber",label:"Subscriber"}],[]),I=(0,n.useMemo)(()=>w.courses&&Array.isArray(w.courses)?w.courses.map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title||"Untitled Course"})):[],[w.courses]),R=(0,n.useMemo)(()=>({value:j.filters?.search||"",onChange:e=>{const t=e.target.value;j.setFilters?.(e=>({...e,search:t}))},placeholder:"Search users...",isLoading:j.loading}),[j.filters,j.loading,j.setFilters]),B=(0,n.useMemo)(()=>j.filters?[{label:"Role",value:j.filters.role||"all",onChange:e=>{j.setFilters?.(t=>({...t,role:"all"===e?null:e}))},options:D,isLoading:!1},{label:"Course",value:j.filters.courseId||"all",onChange:e=>{j.setFilters?.(t=>({...t,courseId:"all"===e?null:e}))},options:[{value:"all",label:"All Courses"},...I],isLoading:w.loading}]:[],[j.filters,j.setFilters,D,I,w.loading]),F=(0,n.useMemo)(()=>{const e=(j.users||[]).map(e=>e.id);return e.length>0&&e.every(e=>m.includes(e))},[j.users,m]);if(!j.filters||!j.computed)return(0,k.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,k.jsx)("p",{children:"Loading..."})});const U={1:["24%"],2:["24%","72%"],3:["20%","12%","64%"],4:["18%","10%","10%","58%"]},W=U[t.length]||U[4],H=(e,r)=>{const n=!(r===t.length-1);switch(e.type){case"userList":return(0,k.jsx)(u.A,{title:"Users",itemCount:j.pagination?.total||j.computed.totalUsers||0,createButtonText:"Add User",onCreate:E,isCreating:j.updating,filters:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"mb-3 flex items-center justify-between gap-2 bg-gray-50 p-2 rounded-md",children:[(0,k.jsx)("div",{className:"flex items-center gap-2",children:(0,k.jsxs)("button",{onClick:()=>O(!F),className:"flex items-center gap-1 px-2 py-1 text-sm text-gray-700 hover:bg-gray-200 rounded transition-colors",title:F?"Deselect all filtered users":"Select all filtered users",children:[F?(0,k.jsx)(o.A,{className:"h-4 w-4 text-blue-600"}):(0,k.jsx)(a.A,{className:"h-4 w-4"}),(0,k.jsx)("span",{className:"text-xs",children:m.length>0?`${m.length} selected`:"Select all"})]})}),(0,k.jsxs)("div",{className:"relative",ref:v,children:[(0,k.jsxs)("button",{onClick:()=>b(!y),disabled:0===m.length,className:"flex items-center gap-1 px-3 py-1 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:["Actions",(0,k.jsx)(i.A,{className:"h-3 w-3"})]}),y&&m.length>0&&(0,k.jsx)("div",{className:"absolute right-0 mt-1 w-48 bg-white border border-gray-200 rounded-md shadow-lg z-10",children:(0,k.jsx)("button",{onClick:()=>{b(!1),z()},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition-colors",children:"Batch Enrollment"})})]})]}),(0,k.jsx)(p.A,{searchConfig:R,filtersConfig:B})]}),onLoadMore:j.loadMoreUsers,hasMore:j.hasMore,isLoadingMore:j.loading&&j.users.length>0,children:(j.users||[]).map(e=>(0,k.jsx)(C,{user:e,isSelected:t[1]?.id===e.id,isChecked:m.includes(e.id),onClick:S,onToggleSelect:P,onShowEnrollments:M,onShowProgress:T},e.id))});case"user":return(0,k.jsx)(L,{userId:"new"===e.id?null:e.id,mode:"new"===e.id?"create":"edit",onSave:"new"===e.id?j.createUser:t=>j.updateUser(e.id,t),onCancel:A,onShowEnrollments:()=>M(e.id),onShowProgress:()=>T(e.id),isCollapsed:n,roleOptions:D.filter(e=>"all"!==e.value)},e.id);case"enrollment":return(0,k.jsx)($,{userId:e.userId,onCancel:A,availableCourses:I,onEnrollUser:j.enrollUserInCourse,onUnenrollUser:j.unenrollUserFromCourse,isCollapsed:n},e.userId);case"progress":return(0,k.jsx)(Q,{userId:e.userId,onCancel:A,availableCourses:I,isCollapsed:n},e.userId);default:return null}};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:"qe-lms-admin-app h-full flex overflow-x-auto px-4 py-6 space-x-4 min-w-full",children:t.map((e,r)=>{const n=r===t.length-1;return(0,k.jsx)("div",{className:"transition-all duration-300 ease-in-out h-full flex-shrink-0",style:{width:W[r],minWidth:n?"320px":0===r?"240px":"120px"},children:H(e,r)},`${e.type}-${e.id||e.userId}-${r}`)})}),g&&(0,k.jsx)(Y,{selectedUserIds:m,availableCourses:I,onSubmit:q,onClose:()=>x(!1)})]})}},7164:(e,t,r)=>{"use strict";r.d(t,{H_:()=>l,mF:()=>i,zU:()=>a}),r(5236);const n=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");return e},s=async(e,t={})=>{const r={credentials:"include",headers:{"Content-Type":"application/json","X-WP-Nonce":n().nonce}},s=await fetch(e,{...r,...t});if(!s.ok){const e=await s.json().catch(()=>({})),t=new Error(e.message||`HTTP ${s.status}`);throw t.response={data:e,status:s.status},t}return s.json()},o=()=>{const e=n();return e.endpoints?.custom_api||`${e.api_url}/quiz-extended/v1`},a=async(e,t=20)=>{const r=`${o()}/ghost-users/generate`;return s(r,{method:"POST",body:JSON.stringify({course_id:e,count:Math.min(t,50)})})},i=async e=>{const t=`${o()}/ghost-users/${e}`;return s(t)},l=async e=>{const t=`${o()}/ghost-users/${e}`;return s(t,{method:"DELETE"})}},7167:(e,t,r)=>{var n=r(4901),s=r(7301),o=r(6009),a=o&&o.isTypedArray,i=a?s(a):n;e.exports=i},7194:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>A});var n=r(1609),s=r.n(n),o=r(3558),a=r(8723),i=r(964),l=r(8852),c=r(9436),d=r(1004),u=r(8445),p=r(4539),f=r(8676),m=r(9407);const h=(0,m.A)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),g=(0,m.A)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var x=r(9492),y=r(3954),b=r(7504),v=r(418),j=r(7775),w=r(5977),N=r(5404),k=r(4471),C=r(1409),_=r(2452),S=r(6359),E=r(790);const A=()=>{const[e,t]=(0,n.useState)("general"),{theme:r,setThemePreview:m,getColor:A,isDarkMode:M}=(0,S.DP)(),T=(0,n.useMemo)(()=>({text:M?A("textPrimary","#f9fafb"):A("primary","#1a202c"),textMuted:M?A("textSecondary","#9ca3af"):"#6b7280",accent:A("accent","#f59e0b"),primary:A("primary","#3b82f6"),bgCard:M?A("secondaryBackground","#1f2937"):"#ffffff",bgPage:M?A("secondaryBackground","#111827"):"#f5f7fa",border:M?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",inputBg:M?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:M?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)",success:"#10b981",error:"#ef4444",info:"#3b82f6",warning:"#f59e0b",shadow:M?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",shadowSm:M?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.05)",cardBorder:M?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.04)",accentGlow:M?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)"}),[A,M]),[P,O]=(0,n.useState)((window.qe_data||{}).scoreFormat||"percentage"),[z,q]=(0,n.useState)(r),[D,I]=(0,n.useState)("light"),[L,R]=(0,n.useState)(!1),[$,B]=(0,n.useState)(!0),[F,U]=(0,n.useState)(window.qe_data?.campus_logo||""),[W,H]=(0,n.useState)(window.qe_data?.campus_logo_dark||""),[Q,V]=(0,n.useState)({enabled:!1,admin_email:"",notify_on_feedback:!0,notify_on_challenge:!0,email_subject_prefix:"[Quiz Extended]",include_question_content:!0}),[Y,K]=(0,n.useState)(""),[G,X]=(0,n.useState)(!1),[J,Z]=(0,n.useState)(!1),[ee,te]=(0,n.useState)("question"),[re,ne]=(0,n.useState)(""),[se,oe]=(0,n.useState)(null),[ae,ie]=(0,n.useState)(null),[le,ce]=(0,n.useState)(!1),[de,ue]=(0,n.useState)(!1),[pe,fe]=(0,n.useState)(""),[me,he]=(0,n.useState)(null),[ge,xe]=(0,n.useState)(null),[ye,be]=(0,n.useState)(!1),[ve,je]=(0,n.useState)(!1),[we,Ne]=(0,n.useState)([]),[ke,Ce]=(0,n.useState)(""),[_e,Se]=(0,n.useState)(null),[Ee,Ae]=(0,n.useState)(null),[Me,Te]=(0,n.useState)(!1),[Pe,Oe]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{const e=await _.A.getSettings(),t=e.score_format||"percentage";if(t!==P&&O(t),e.campus_logo&&U(e.campus_logo),e.campus_logo_dark&&H(e.campus_logo_dark),e.theme)if(e.theme.light&&e.theme.dark)q(e.theme);else{const t={light:{primary:e.theme.primary||S.SS.light.primary,secondary:e.theme.secondary||S.SS.light.secondary,accent:e.theme.accent||S.SS.light.accent,background:e.theme.background||S.SS.light.background,secondaryBackground:e.theme.secondaryBackground||S.SS.light.secondaryBackground,text:e.theme.text||S.SS.light.text,textPrimary:e.theme.textPrimary||e.theme.text||S.SS.light.textPrimary,textSecondary:e.theme.textSecondary||S.SS.light.textSecondary,textColorContrast:e.theme.textColorContrast||S.SS.light.textColorContrast,borderColor:e.theme.borderColor||e.theme.primary||S.SS.light.borderColor,hoverColor:e.theme.hoverColor||e.theme.accent||S.SS.light.hoverColor},dark:S.SS.dark};q(t)}try{const e=await _.A.getEmailNotificationSettings();e.settings&&V(e.settings),e.wp_admin_email&&K(e.wp_admin_email)}catch(e){console.error("Error loading email settings:",e)}}catch(e){console.error("Error loading settings:",e),C.oR.error("Error al cargar la configuraciÃ³n")}finally{B(!1)}})()},[]);const ze=async()=>{if(re){ce(!0),oe(null),ie(null);try{const e=await fetch(`/wp-json/quiz-extended/v1/debug/db-consult?type=${ee}&id=${parseInt(re)}`,{headers:{"X-WP-Nonce":window.qe_data?.nonce||""}}),t=await e.json();e.ok&&t.success?oe(t.data):ie(t.message||"Error fetching data")}catch(e){ie(e.message||"Network error")}finally{ce(!1)}}},qe=async()=>{if(pe){be(!0),he(null),xe(null);try{const e=await fetch(`/wp-json/quiz-extended/v1/debug/question-chain?id=${parseInt(pe)}`,{headers:{"X-WP-Nonce":window.qe_data?.nonce||""}}),t=await e.json();e.ok&&t.success?he(t.data):xe(t.message||"Error fetching chain")}catch(e){xe(e.message||"Network error")}finally{be(!1)}}},De=()=>{me&&(navigator.clipboard.writeText(JSON.stringify(me,null,2)),je(!0),setTimeout(()=>je(!1),2e3))};(0,n.useEffect)(()=>{"db-consults"!==e||we.length>0||fetch("/wp-json/quiz-extended/v1/debug/providers",{headers:{"X-WP-Nonce":window.qe_data?.nonce||""}}).then(e=>e.json()).then(e=>{e.success&&Ne(e.data)}).catch(()=>{})},[e]);const Ie=async()=>{if(ke){Te(!0),Se(null),Ae(null);try{const e=await fetch(`/wp-json/quiz-extended/v1/debug/provider-analysis?slug=${encodeURIComponent(ke)}`,{headers:{"X-WP-Nonce":window.qe_data?.nonce||""}}),t=await e.json();e.ok&&t.success?Se(t.data):Ae(t.message||"Error fetching provider data")}catch(e){Ae(e.message||"Network error")}finally{Te(!1)}}},Le=()=>{_e&&(navigator.clipboard.writeText(JSON.stringify(_e,null,2)),Oe(!0),setTimeout(()=>Oe(!1),2e3))},Re=(e,t,r)=>{const n={...z,[e]:{...z[e],[t]:r}};q(n),m(n)},$e=()=>{if(!window.wp||!window.wp.media)return void C.oR.error("El media uploader de WordPress no estÃ¡ disponible");const e=window.wp.media({title:"Seleccionar Logo del Campus (Modo Claro)",button:{text:"Usar esta imagen"},multiple:!1,library:{type:"image"}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();U(t.url)}),e.open()},Be=()=>{if(!window.wp||!window.wp.media)return void C.oR.error("El media uploader de WordPress no estÃ¡ disponible");const e=window.wp.media({title:"Seleccionar Logo del Campus (Modo Oscuro)",button:{text:"Usar esta imagen"},multiple:!1,library:{type:"image"}});e.on("select",()=>{const t=e.state().get("selection").first().toJSON();H(t.url)}),e.open()},Fe=({label:e,value:t,onChange:r,description:n})=>{const a=t||"#000000",[i,l]=s().useState(a),[c,d]=s().useState(!1),u=s().useRef(null);s().useEffect(()=>{l(a)},[a]);const p=()=>{l(a),d(!1)},f=e=>{l(e.target.value)};return(0,E.jsxs)("div",{className:"space-y-2",children:[(0,E.jsx)("label",{className:"block text-xs font-semibold",style:{color:T.text},children:e}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)("button",{type:"button",onClick:()=>{l(a),d(!0)},className:"w-8 h-8 rounded-lg border-2 shadow-sm cursor-pointer hover:scale-105 transition-all focus:outline-none flex-shrink-0",style:{backgroundColor:a,borderColor:T.cardBorder},title:"Elegir color"}),(0,E.jsx)("input",{type:"text",value:a,onChange:e=>r(e.target.value),pattern:"^#[0-9A-Fa-f]{6}$",className:"w-full px-2 py-1.5 rounded-lg focus:outline-none focus:ring-2 font-mono text-xs transition-all",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text,"--tw-ring-color":T.accent},placeholder:"#000000"})]}),c&&(0,E.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:p,children:(0,E.jsxs)("div",{className:"rounded-2xl shadow-xl p-6 max-w-md w-full mx-4",style:{backgroundColor:T.bgCard,boxShadow:T.shadow},onClick:e=>e.stopPropagation(),children:[(0,E.jsxs)("h3",{className:"text-lg font-semibold mb-2",style:{color:T.text},children:["Seleccionar ",e]}),(0,E.jsxs)("p",{className:"text-sm mb-4 flex items-center gap-2",style:{color:T.textMuted},children:[(0,E.jsx)(o.A,{className:"w-4 h-4"}),"Haz clic o arrastra el ratÃ³n en el selector para elegir un color"]}),(0,E.jsx)("div",{className:"mb-6 relative group",children:(0,E.jsx)("input",{ref:u,type:"color",value:i,onChange:f,onInput:f,className:"w-full h-48 cursor-crosshair rounded-xl transition-colors",style:{border:`2px solid ${T.cardBorder}`}})}),(0,E.jsxs)("div",{className:"mb-6 flex items-center gap-4",children:[(0,E.jsx)("div",{className:"w-16 h-16 rounded-xl shadow-sm",style:{backgroundColor:i,border:`2px solid ${T.cardBorder}`}}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:T.text},children:"CÃ³digo de color"}),(0,E.jsx)("input",{type:"text",value:i,onChange:f,pattern:"^#[0-9A-Fa-f]{6}$",className:"w-full px-3 py-2 rounded-lg focus:outline-none focus:ring-2 font-mono text-sm",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text,"--tw-ring-color":T.accent}})]})]}),(0,E.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,E.jsx)("button",{type:"button",onClick:p,className:"px-4 py-2 rounded-xl font-medium transition-all focus:outline-none",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text},children:"Cancelar"}),(0,E.jsx)("button",{type:"button",onClick:()=>{r&&r(i),d(!1)},className:"px-4 py-2 rounded-xl font-medium transition-all focus:outline-none",style:{background:`linear-gradient(135deg, ${T.accent}, ${T.accent}dd)`,color:"#fff",boxShadow:`0 4px 12px ${T.accentGlow}`},children:"Confirmar"})]})]})})]})};return $?(0,E.jsx)("div",{className:"flex flex-col h-[calc(100vh-100px)]",style:{backgroundColor:T.bgPage},children:(0,E.jsx)("div",{className:"flex items-center justify-center flex-1",children:(0,E.jsx)(a.A,{className:"w-8 h-8 animate-spin",style:{color:T.accent}})})}):(0,E.jsxs)("div",{className:"flex flex-col h-[calc(100vh-100px)]",style:{backgroundColor:T.bgPage},children:[(0,E.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",style:{backgroundColor:T.bgCard,borderBottom:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsxs)("div",{className:"flex items-center gap-4",children:[(0,E.jsx)("div",{className:"p-2.5 rounded-xl",style:{background:`linear-gradient(135deg, ${T.accent}, ${T.accent}dd)`,boxShadow:`0 4px 12px ${T.accentGlow}`},children:(0,E.jsx)(i.A,{size:22,className:"text-white"})}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h1",{className:"text-xl font-bold tracking-tight",style:{color:T.text},children:"ConfiguraciÃ³n"}),(0,E.jsx)("p",{className:"text-xs mt-0.5",style:{color:T.textMuted},children:"Opciones globales del sistema"})]})]}),"db-consults"!==e&&(0,E.jsxs)("button",{onClick:async()=>{R(!0);try{if("general"===e)await _.A.updateScoreFormat(P),F!==(window.qe_data?.campus_logo||"")&&await _.A.updateCampusLogo(F),W!==(window.qe_data?.campus_logo_dark||"")&&await _.A.updateCampusLogoDark(W);else if("theme"===e)await _.A.updateTheme(z);else if("notifications"===e)return await _.A.updateEmailNotificationSettings(Q),C.oR.success("ConfiguraciÃ³n de notificaciones guardada correctamente"),void R(!1);C.oR.success("ConfiguraciÃ³n guardada correctamente"),setTimeout(()=>{window.location.reload()},1e3)}catch(e){console.error("Error saving settings:",e),C.oR.error("Error al guardar la configuraciÃ³n"),R(!1)}},disabled:L,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-all duration-200 disabled:opacity-50 focus:outline-none",style:{background:`linear-gradient(135deg, ${T.accent}, ${T.accent}dd)`,color:"#fff",boxShadow:`0 4px 12px ${T.accentGlow}`},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow=`0 6px 20px ${T.accentGlow}`},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=`0 4px 12px ${T.accentGlow}`},children:[(0,E.jsx)(l.A,{size:18}),(0,E.jsx)("span",{children:L?"Guardando...":"Guardar"})]})]}),(0,E.jsx)("div",{className:"flex-1 overflow-hidden p-4",children:(0,E.jsxs)("div",{className:"h-full rounded-2xl overflow-hidden flex flex-col",style:{backgroundColor:T.bgCard,boxShadow:T.shadow,border:`1px solid ${T.cardBorder}`},children:[(0,E.jsx)("div",{className:"flex gap-1 px-4 pt-4",style:{borderBottom:`1px solid ${T.cardBorder}`},children:[{id:"general",label:"General",icon:i.A},{id:"theme",label:"Tema",icon:o.A},{id:"notifications",label:"Notificaciones",icon:c.A},{id:"maintenance",label:"Mantenimiento",icon:d.A},{id:"db-consults",label:"DB Consults",icon:u.A}].map(r=>{const n=r.icon,s=e===r.id;return(0,E.jsxs)("button",{onClick:()=>t(r.id),className:"flex items-center gap-2 px-4 py-3 font-medium text-sm transition-all focus:outline-none",style:{color:s?T.accent:T.textMuted,borderBottom:s?`2px solid ${T.accent}`:"2px solid transparent",marginBottom:"-1px"},children:[(0,E.jsx)(n,{size:16}),r.label]},r.id)})}),(0,E.jsxs)("div",{className:"flex-1 overflow-y-auto p-6",style:{backgroundColor:T.bgPage},children:["general"===e&&(0,E.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,E.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsx)("h2",{className:"text-lg font-semibold mb-2",style:{color:T.text},children:"Logos del Campus"}),(0,E.jsx)("p",{className:"text-sm mb-6",style:{color:T.textMuted},children:"Sube los logos que aparecerÃ¡n en la barra superior del campus."}),(0,E.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)(p.A,{className:"w-5 h-5",style:{color:T.warning}}),(0,E.jsx)("h3",{className:"font-medium",style:{color:T.text},children:"Logo Modo Claro"})]}),F?(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsx)("div",{className:"w-full h-20 rounded-xl overflow-hidden flex items-center justify-center p-3",style:{backgroundColor:"#ffffff",border:`2px solid ${T.cardBorder}`},children:(0,E.jsx)("img",{src:F,alt:"Campus Logo (Claro)",className:"max-w-full max-h-full object-contain"})}),(0,E.jsxs)("div",{className:"flex gap-2",children:[(0,E.jsx)("button",{type:"button",onClick:$e,className:"flex-1 px-3 py-2 text-sm rounded-xl transition-all focus:outline-none",style:{backgroundColor:T.primary,color:"#fff"},children:"Cambiar"}),(0,E.jsx)("button",{type:"button",onClick:()=>{U("")},className:"px-3 py-2 text-sm rounded-xl transition-all focus:outline-none",style:{backgroundColor:T.error,color:"#fff"},children:"Eliminar"})]})]}):(0,E.jsx)("button",{type:"button",onClick:$e,className:"w-full px-4 py-6 rounded-xl transition-all focus:outline-none",style:{backgroundColor:T.inputBg,border:`2px dashed ${T.cardBorder}`},children:(0,E.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,E.jsx)(p.A,{className:"w-6 h-6",style:{color:T.textMuted}}),(0,E.jsx)("span",{className:"text-sm font-medium",style:{color:T.textMuted},children:"Seleccionar logo"}),(0,E.jsx)("span",{className:"text-xs",style:{color:T.textMuted},children:"JPG, PNG, SVG"})]})})]}),(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)(f.A,{className:"w-5 h-5",style:{color:T.primary}}),(0,E.jsx)("h3",{className:"font-medium",style:{color:T.text},children:"Logo Modo Oscuro"})]}),W?(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsx)("div",{className:"w-full h-20 rounded-xl overflow-hidden flex items-center justify-center p-3",style:{backgroundColor:"#1f2937",border:`2px solid ${T.cardBorder}`},children:(0,E.jsx)("img",{src:W,alt:"Campus Logo (Oscuro)",className:"max-w-full max-h-full object-contain"})}),(0,E.jsxs)("div",{className:"flex gap-2",children:[(0,E.jsx)("button",{type:"button",onClick:Be,className:"flex-1 px-3 py-2 text-sm rounded-xl transition-all focus:outline-none",style:{backgroundColor:T.primary,color:"#fff"},children:"Cambiar"}),(0,E.jsx)("button",{type:"button",onClick:()=>{H("")},className:"px-3 py-2 text-sm rounded-xl transition-all focus:outline-none",style:{backgroundColor:T.error,color:"#fff"},children:"Eliminar"})]})]}):(0,E.jsx)("button",{type:"button",onClick:Be,className:"w-full px-4 py-6 rounded-xl transition-all focus:outline-none",style:{backgroundColor:M?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`2px dashed ${T.cardBorder}`},children:(0,E.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[(0,E.jsx)(f.A,{className:"w-6 h-6",style:{color:T.textMuted}}),(0,E.jsx)("span",{className:"text-sm font-medium",style:{color:T.textMuted},children:"Seleccionar logo"}),(0,E.jsx)("span",{className:"text-xs",style:{color:T.textMuted},children:"JPG, PNG, SVG"})]})}),(0,E.jsx)("p",{className:"text-xs",style:{color:T.textMuted},children:"Si no se especifica, se usarÃ¡ el logo del modo claro"})]})]})]}),(0,E.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsx)("h2",{className:"text-lg font-semibold mb-2",style:{color:T.text},children:"Formato de PuntuaciÃ³n"}),(0,E.jsx)("p",{className:"text-sm mb-6",style:{color:T.textMuted},children:"Selecciona cÃ³mo se mostrarÃ¡n las puntuaciones en toda la plataforma"}),(0,E.jsxs)("div",{className:"space-y-4",children:[(0,E.jsxs)("label",{className:"flex items-start gap-4 p-4 rounded-xl cursor-pointer transition-all",style:{backgroundColor:"percentage"===P?T.accentGlow:T.inputBg,border:`2px solid ${"percentage"===P?T.accent:T.cardBorder}`},children:[(0,E.jsx)("input",{type:"radio",name:"scoreFormat",value:"percentage",checked:"percentage"===P,onChange:e=>O(e.target.value),className:"mt-1 w-5 h-5",style:{accentColor:T.accent}}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,E.jsx)(h,{className:"w-5 h-5",style:{color:T.accent}}),(0,E.jsx)("span",{className:"font-medium",style:{color:T.text},children:"Porcentaje (0-100%)"})]}),(0,E.jsx)("p",{className:"text-sm",style:{color:T.textMuted},children:"Las puntuaciones se mostrarÃ¡n como porcentajes del 0% al 100%"}),(0,E.jsxs)("div",{className:"mt-2 text-sm",style:{color:T.textMuted},children:["Ejemplo: ",(0,E.jsx)("span",{className:"font-mono px-2 py-1 rounded",style:{backgroundColor:T.hoverBg},children:"75%"})]})]})]}),(0,E.jsxs)("label",{className:"flex items-start gap-4 p-4 rounded-xl cursor-pointer transition-all",style:{backgroundColor:"base10"===P?T.accentGlow:T.inputBg,border:`2px solid ${"base10"===P?T.accent:T.cardBorder}`},children:[(0,E.jsx)("input",{type:"radio",name:"scoreFormat",value:"base10",checked:"base10"===P,onChange:e=>O(e.target.value),className:"mt-1 w-5 h-5",style:{accentColor:T.accent}}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,E.jsx)(g,{className:"w-5 h-5",style:{color:T.accent}}),(0,E.jsx)("span",{className:"font-medium",style:{color:T.text},children:"Base 10 (0-10)"})]}),(0,E.jsx)("p",{className:"text-sm",style:{color:T.textMuted},children:"Las puntuaciones se mostrarÃ¡n en escala del 0 al 10 (estilo espaÃ±ol)"}),(0,E.jsxs)("div",{className:"mt-2 text-sm",style:{color:T.textMuted},children:["Ejemplo: ",(0,E.jsx)("span",{className:"font-mono px-2 py-1 rounded",style:{backgroundColor:T.hoverBg},children:"7.5/10"})]})]})]})]})]})]}),"theme"===e&&(0,E.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6 items-start",children:[(0,E.jsxs)("div",{className:"xl:col-span-2 space-y-6",children:[(0,E.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("h2",{className:"text-lg font-semibold",style:{color:T.text},children:"PersonalizaciÃ³n del Tema"}),(0,E.jsx)("p",{className:"text-sm mt-1",style:{color:T.textMuted},children:"Configura los colores para el modo claro y oscuro."})]}),(0,E.jsxs)("button",{onClick:()=>{confirm("Â¿EstÃ¡s seguro de que quieres restaurar los colores por defecto?")&&(q(S.SS),m(S.SS))},className:"flex items-center gap-2 px-4 py-2 rounded-xl transition-all focus:outline-none",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text},children:[(0,E.jsx)(x.A,{className:"w-4 h-4"}),"Restaurar"]})]}),(0,E.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-xl",style:{backgroundColor:T.hoverBg},children:[(0,E.jsxs)("div",{className:"flex items-center gap-3",children:[(0,E.jsx)(o.A,{className:"w-5 h-5",style:{color:T.text}}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h3",{className:"font-medium",style:{color:T.text},children:"Modo de EdiciÃ³n"}),(0,E.jsx)("p",{className:"text-xs",style:{color:T.textMuted},children:"Elige quÃ© modo quieres editar"})]})]}),(0,E.jsxs)("div",{className:"flex items-center gap-1 p-1 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`},children:[(0,E.jsxs)("button",{onClick:()=>I("light"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all focus:outline-none",style:{backgroundColor:"light"===D?T.accent:"transparent",color:"light"===D?"#fff":T.textMuted},children:[(0,E.jsx)(p.A,{className:"w-4 h-4"}),"Claro"]}),(0,E.jsxs)("button",{onClick:()=>I("dark"),className:"flex items-center gap-2 px-4 py-2 rounded-lg transition-all focus:outline-none",style:{backgroundColor:"dark"===D?T.accent:"transparent",color:"dark"===D?"#fff":T.textMuted},children:[(0,E.jsx)(f.A,{className:"w-4 h-4"}),"Oscuro"]})]})]})]}),(0,E.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsx)("h3",{className:"text-base font-semibold mb-4 flex items-center gap-2",style:{color:T.text},children:"light"===D?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(p.A,{className:"w-5 h-5",style:{color:T.warning}}),"Colores del Modo Claro"]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(f.A,{className:"w-5 h-5",style:{color:T.primary}}),"Colores del Modo Oscuro"]})}),(0,E.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 xl:grid-cols-2 2xl:grid-cols-3 gap-4",children:[(0,E.jsx)(Fe,{label:"Color Principal",description:"Color primario de la interfaz",value:z[D].primary,onChange:e=>Re(D,"primary",e)}),(0,E.jsx)(Fe,{label:"Color Secundario",description:"Color para elementos secundarios",value:z[D].secondary,onChange:e=>Re(D,"secondary",e)}),(0,E.jsx)(Fe,{label:"Color de Acento",description:"Color para destacar elementos",value:z[D].accent,onChange:e=>Re(D,"accent",e)}),(0,E.jsx)(Fe,{label:"Color de Fondo (Sidebars)",description:"Color de fondo para barras laterales",value:z[D].background,onChange:e=>Re(D,"background",e)}),(0,E.jsx)(Fe,{label:"Color de Fondo (Contenido)",description:"Color de fondo para el contenido principal",value:z[D].secondaryBackground,onChange:e=>Re(D,"secondaryBackground",e)}),(0,E.jsx)(Fe,{label:"Color de Texto Principal",description:"Color para textos principales y tÃ­tulos",value:z[D].textPrimary||z[D].text,onChange:e=>Re(D,"textPrimary",e)}),(0,E.jsx)(Fe,{label:"Color de Texto Secundario",description:"Color para textos descriptivos",value:z[D].textSecondary||`${z[D].text}70`,onChange:e=>Re(D,"textSecondary",e)}),(0,E.jsx)(Fe,{label:"Color de Texto en Contraste",description:"Color de texto sobre fondos de colores",value:z[D].textColorContrast||"#ffffff",onChange:e=>Re(D,"textColorContrast",e)}),(0,E.jsx)(Fe,{label:"Color de Bordes",description:"Color de bordes de tarjetas",value:z[D].borderColor||z[D].primary,onChange:e=>Re(D,"borderColor",e)}),(0,E.jsx)(Fe,{label:"Color de Hover",description:"Color al pasar el cursor",value:z[D].hoverColor||z[D].accent,onChange:e=>Re(D,"hoverColor",e)})]})]})]}),(0,E.jsxs)("div",{className:"space-y-6",children:[(0,E.jsxs)("div",{className:"p-6 rounded-xl sticky top-4",style:{backgroundColor:z[D].background,border:`2px solid ${z[D].borderColor||z[D].primary}`},children:[(0,E.jsxs)("h3",{className:"text-sm font-medium mb-4",style:{color:z[D].textPrimary||z[D].text},children:["Vista Previa - Modo ","light"===D?"Claro":"Oscuro"]}),(0,E.jsx)("p",{className:"text-xs mb-4",style:{color:z[D].textSecondary||`${z[D].text}70`},children:"Texto secundario para labels y descripciones"}),(0,E.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,E.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium transition-colors cursor-pointer text-center text-sm",style:{backgroundColor:z[D].primary},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=z[D].hoverColor||z[D].accent},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=z[D].primary},children:"BotÃ³n Principal"}),(0,E.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium text-center text-sm",style:{backgroundColor:z[D].secondary},children:"BotÃ³n Secundario"}),(0,E.jsx)("div",{className:"px-4 py-2 rounded-lg text-white font-medium text-center text-sm",style:{backgroundColor:z[D].accent},children:"BotÃ³n de Acento"})]})]}),(0,E.jsxs)("div",{className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:M?"rgba(59, 130, 246, 0.1)":"#dbeafe",border:"1px solid "+(M?"rgba(59, 130, 246, 0.2)":"#93c5fd")},children:[(0,E.jsx)(p.A,{className:"w-5 h-5 mt-0.5 flex-shrink-0",style:{color:T.info}}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h4",{className:"font-medium mb-1 text-sm",style:{color:T.info},children:"DetecciÃ³n AutomÃ¡tica"}),(0,E.jsx)("p",{className:"text-xs",style:{color:T.info},children:"El plugin detectarÃ¡ automÃ¡ticamente el modo oscuro segÃºn las preferencias del sistema."})]})]})]})]}),"notifications"===e&&(0,E.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 items-start",children:[(0,E.jsx)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:(0,E.jsxs)("label",{className:"flex items-center justify-between cursor-pointer",children:[(0,E.jsxs)("div",{className:"flex items-center gap-3",children:[(0,E.jsx)(y.A,{className:"w-5 h-5",style:{color:T.text}}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h3",{className:"font-medium",style:{color:T.text},children:"Activar Notificaciones por Email"}),(0,E.jsx)("p",{className:"text-sm",style:{color:T.textMuted},children:"Recibe un email cada vez que un estudiante envÃ­e un comentario o impugnaciÃ³n"})]})]}),(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("input",{type:"checkbox",checked:Q.enabled,onChange:e=>V({...Q,enabled:e.target.checked}),className:"sr-only peer"}),(0,E.jsx)("div",{className:"w-11 h-6 rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all",style:{backgroundColor:Q.enabled?T.accent:T.textMuted}})]})]})}),Q.enabled&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"p-6 rounded-xl space-y-6",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"block text-sm font-semibold mb-2",style:{color:T.text},children:"Email del Administrador"}),(0,E.jsx)("input",{type:"email",value:Q.admin_email,onChange:e=>V({...Q,admin_email:e.target.value}),placeholder:Y||"admin@ejemplo.com",className:"w-full px-4 py-2.5 rounded-xl focus:outline-none focus:ring-2",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text,"--tw-ring-color":T.accent}}),(0,E.jsxs)("p",{className:"mt-1 text-xs",style:{color:T.textMuted},children:["Deja vacÃ­o para usar el email de administrador de WordPress: ",(0,E.jsx)("strong",{children:Y})]})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("label",{className:"block text-sm font-semibold mb-2",style:{color:T.text},children:"Prefijo del Asunto"}),(0,E.jsx)("input",{type:"text",value:Q.email_subject_prefix,onChange:e=>V({...Q,email_subject_prefix:e.target.value}),placeholder:"[Quiz Extended]",className:"w-full px-4 py-2.5 rounded-xl focus:outline-none focus:ring-2",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text,"--tw-ring-color":T.accent}}),(0,E.jsx)("p",{className:"mt-1 text-xs",style:{color:T.textMuted},children:"Este texto aparecerÃ¡ al inicio del asunto de cada email"})]})]}),(0,E.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsx)("label",{className:"block text-sm font-semibold mb-4",style:{color:T.text},children:"Tipos de NotificaciÃ³n"}),(0,E.jsxs)("div",{className:"space-y-3",children:[(0,E.jsxs)("label",{className:"flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all",style:{backgroundColor:Q.notify_on_feedback?T.accentGlow:T.inputBg,border:`1px solid ${T.cardBorder}`},children:[(0,E.jsx)("input",{type:"checkbox",checked:Q.notify_on_feedback,onChange:e=>V({...Q,notify_on_feedback:e.target.checked}),className:"w-4 h-4 rounded",style:{accentColor:T.info}}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)(b.A,{className:"w-5 h-5",style:{color:T.info}}),(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{className:"font-medium",style:{color:T.text},children:"Comentarios / Dudas"}),(0,E.jsx)("p",{className:"text-xs",style:{color:T.textMuted},children:"Notificar cuando un estudiante envÃ­e un comentario o duda"})]})]})]}),(0,E.jsxs)("label",{className:"flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all",style:{backgroundColor:Q.notify_on_challenge?T.accentGlow:T.inputBg,border:`1px solid ${T.cardBorder}`},children:[(0,E.jsx)("input",{type:"checkbox",checked:Q.notify_on_challenge,onChange:e=>V({...Q,notify_on_challenge:e.target.checked}),className:"w-4 h-4 rounded",style:{accentColor:T.warning}}),(0,E.jsxs)("div",{className:"flex items-center gap-2",children:[(0,E.jsx)(v.A,{className:"w-5 h-5",style:{color:T.warning}}),(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{className:"font-medium",style:{color:T.text},children:"Impugnaciones"}),(0,E.jsx)("p",{className:"text-xs",style:{color:T.textMuted},children:"Notificar cuando un estudiante impugne una pregunta"})]})]})]}),(0,E.jsxs)("label",{className:"flex items-center gap-3 p-4 rounded-xl cursor-pointer transition-all",style:{backgroundColor:Q.include_question_content?T.accentGlow:T.inputBg,border:`1px solid ${T.cardBorder}`},children:[(0,E.jsx)("input",{type:"checkbox",checked:Q.include_question_content,onChange:e=>V({...Q,include_question_content:e.target.checked}),className:"w-4 h-4 rounded",style:{accentColor:T.accent}}),(0,E.jsxs)("div",{children:[(0,E.jsx)("span",{className:"font-medium",style:{color:T.text},children:"Incluir contenido de la pregunta"}),(0,E.jsx)("p",{className:"text-xs",style:{color:T.textMuted},children:"Muestra el texto de la pregunta en el email"})]})]})]})]}),(0,E.jsxs)("div",{className:"p-6 rounded-xl flex items-center justify-between",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("h4",{className:"font-medium",style:{color:T.text},children:"Probar ConfiguraciÃ³n"}),(0,E.jsx)("p",{className:"text-sm",style:{color:T.textMuted},children:"EnvÃ­a un email de prueba para verificar que todo funciona"})]}),(0,E.jsx)("button",{onClick:async()=>{X(!0);try{const e=await _.A.sendTestEmail();C.oR.success(e.message||"Email de prueba enviado correctamente")}catch(e){console.error("Error sending test email:",e),C.oR.error("Error al enviar el email de prueba. Verifica la configuraciÃ³n de tu servidor.")}finally{X(!1)}},disabled:G,className:"flex items-center gap-2 px-4 py-2.5 rounded-xl transition-all focus:outline-none disabled:opacity-50",style:{backgroundColor:T.success,color:"#fff"},children:G?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.A,{className:"w-4 h-4 animate-spin"}),"Enviando..."]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(j.A,{className:"w-4 h-4"}),"Enviar Prueba"]})})]})]}),!Q.enabled&&(0,E.jsxs)("div",{className:"p-4 rounded-xl flex items-start gap-3 lg:col-span-2",style:{backgroundColor:M?"rgba(245, 158, 11, 0.1)":"#fef3c7",border:"1px solid "+(M?"rgba(245, 158, 11, 0.2)":"#fcd34d")},children:[(0,E.jsx)(y.A,{className:"w-5 h-5 mt-0.5",style:{color:T.warning}}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h4",{className:"font-medium mb-1",style:{color:T.warning},children:"Notificaciones Desactivadas"}),(0,E.jsx)("p",{className:"text-sm",style:{color:M?T.warning:"#92400e"},children:"Activa las notificaciones para recibir emails cuando los estudiantes envÃ­en comentarios o impugnaciones."})]})]})]}),"maintenance"===e&&(0,E.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,E.jsx)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:(0,E.jsxs)("div",{className:"flex items-start gap-4",children:[(0,E.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:T.accentGlow},children:(0,E.jsx)(w.A,{className:"w-6 h-6",style:{color:T.accent}})}),(0,E.jsxs)("div",{className:"flex-1",children:[(0,E.jsx)("h3",{className:"text-lg font-bold mb-2",style:{color:T.text},children:"Actualizar Dificultad de Preguntas"}),(0,E.jsx)("p",{className:"text-sm mb-4",style:{color:T.textMuted},children:'Esta operaciÃ³n actualizarÃ¡ la dificultad de todas las preguntas basÃ¡ndose en la dificultad del cuestionario al que pertenecen. Las preguntas que no estÃ©n asociadas a ningÃºn cuestionario mantendrÃ¡n su dificultad actual o se les asignarÃ¡ "medio" por defecto.'}),(0,E.jsx)("div",{className:"p-4 rounded-xl mb-4",style:{backgroundColor:M?"rgba(245, 158, 11, 0.1)":"#fef3c7",border:"1px solid "+(M?"rgba(245, 158, 11, 0.2)":"#fcd34d")},children:(0,E.jsxs)("div",{className:"flex items-start gap-2",children:[(0,E.jsx)(v.A,{className:"w-5 h-5 mt-0.5",style:{color:T.warning}}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h4",{className:"font-medium mb-1",style:{color:T.warning},children:"Importante"}),(0,E.jsxs)("p",{className:"text-sm",style:{color:M?T.warning:"#92400e"},children:["â€¢ Esta operaciÃ³n puede tardar varios minutos dependiendo del nÃºmero de preguntas",(0,E.jsx)("br",{}),"â€¢ Se recomienda hacer un respaldo antes de ejecutar",(0,E.jsx)("br",{}),"â€¢ Las preguntas ya actualizadas se omitirÃ¡n automÃ¡ticamente"]})]})]})}),(0,E.jsx)("button",{onClick:async()=>{if(confirm("Â¿EstÃ¡s seguro de que quieres actualizar la dificultad de todas las preguntas basÃ¡ndose en sus cuestionarios? Esta operaciÃ³n puede tardar unos minutos.")){Z(!0);try{const e=await fetch("/wp-json/quiz-extended/v1/batch/update-question-difficulty",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":window.qe_data?.nonce||""}});if(!e.ok)throw new Error("Error en la respuesta del servidor");const t=await e.json();C.oR.success(t.message||"Dificultad actualizada correctamente"),t.stats&&console.log("EstadÃ­sticas de actualizaciÃ³n:",t.stats)}catch(e){console.error("Error updating question difficulty:",e),C.oR.error("Error al actualizar la dificultad de las preguntas")}finally{Z(!1)}}},disabled:J,className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all focus:outline-none disabled:opacity-50",style:{backgroundColor:T.accent,color:"#fff"},children:J?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.A,{className:"w-5 h-5 animate-spin"}),"Actualizando..."]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(w.A,{className:"w-5 h-5"}),"Ejecutar ActualizaciÃ³n"]})})]})]})})}),"db-consults"===e&&(0,E.jsxs)("div",{className:"space-y-6",children:[(0,E.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsx)("h2",{className:"text-lg font-semibold mb-1",style:{color:T.text},children:"DB Consults"}),(0,E.jsx)("p",{className:"text-sm mb-6",style:{color:T.textMuted},children:"Retrieve all raw DB data (post row + postmeta + taxonomies) for any entity by ID."}),(0,E.jsx)("div",{className:"flex flex-wrap gap-2 mb-5",children:["question","lesson","quiz","course"].map(e=>(0,E.jsx)("button",{onClick:()=>{te(e),oe(null),ie(null)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all focus:outline-none capitalize",style:{backgroundColor:ee===e?T.accent:T.inputBg,color:ee===e?"#fff":T.text,border:`1px solid ${ee===e?T.accent:T.cardBorder}`},children:e},e))}),(0,E.jsxs)("div",{className:"flex gap-3",children:[(0,E.jsx)("input",{type:"number",min:"1",value:re,onChange:e=>ne(e.target.value),onKeyDown:e=>"Enter"===e.key&&ze(),placeholder:"Enter ID...",className:"flex-1 px-4 py-2.5 rounded-xl focus:outline-none focus:ring-2 font-mono",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text,"--tw-ring-color":T.accent}}),(0,E.jsxs)("button",{onClick:ze,disabled:le||!re,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-all focus:outline-none disabled:opacity-50",style:{backgroundColor:T.accent,color:"#fff"},children:[le?(0,E.jsx)(a.A,{className:"w-4 h-4 animate-spin"}):(0,E.jsx)(u.A,{className:"w-4 h-4"}),"Query"]})]})]}),ae&&(0,E.jsxs)("div",{className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:M?"rgba(239,68,68,0.1)":"#fee2e2",border:"1px solid "+(M?"rgba(239,68,68,0.3)":"#fca5a5")},children:[(0,E.jsx)(v.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:T.error}}),(0,E.jsx)("p",{className:"text-sm",style:{color:T.error},children:ae})]}),se&&(0,E.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",style:{borderBottom:`1px solid ${T.cardBorder}`},children:[(0,E.jsxs)("span",{className:"text-sm font-semibold",style:{color:T.text},children:["Result â€” ",ee," #",re]}),(0,E.jsxs)("button",{onClick:()=>{se&&(navigator.clipboard.writeText(JSON.stringify(se,null,2)),ue(!0),setTimeout(()=>ue(!1),2e3))},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-all focus:outline-none",style:{backgroundColor:de?T.success:T.inputBg,color:de?"#fff":T.text,border:`1px solid ${T.cardBorder}`},children:[(0,E.jsx)(N.A,{className:"w-3.5 h-3.5"}),de?"Copied!":"Copy JSON"]})]}),(0,E.jsx)("pre",{className:"p-4 overflow-auto text-xs font-mono leading-relaxed",style:{color:T.text,backgroundColor:M?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.02)",maxHeight:"60vh"},children:JSON.stringify(se,null,2)})]}),(0,E.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsx)("h2",{className:"text-lg font-semibold mb-1",style:{color:T.text},children:"Question Chain Analysis"}),(0,E.jsxs)("p",{className:"text-sm mb-6",style:{color:T.textMuted},children:["Given a question ID, traces the full path: ",(0,E.jsx)("strong",{children:"Question â†’ Quizzes â†’ Lessons â†’ Courses"})," using both reverse lookups and the question's own meta IDs. Flags inconsistencies."]}),(0,E.jsxs)("div",{className:"flex gap-3",children:[(0,E.jsx)("input",{type:"number",min:"1",value:pe,onChange:e=>fe(e.target.value),onKeyDown:e=>"Enter"===e.key&&qe(),placeholder:"Question ID...",className:"flex-1 px-4 py-2.5 rounded-xl focus:outline-none focus:ring-2 font-mono",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text,"--tw-ring-color":T.accent}}),(0,E.jsxs)("button",{onClick:qe,disabled:ye||!pe,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-all focus:outline-none disabled:opacity-50",style:{backgroundColor:T.primary,color:"#fff"},children:[ye?(0,E.jsx)(a.A,{className:"w-4 h-4 animate-spin"}):(0,E.jsx)(u.A,{className:"w-4 h-4"}),"Analyze"]})]})]}),ge&&(0,E.jsxs)("div",{className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:M?"rgba(239,68,68,0.1)":"#fee2e2",border:"1px solid "+(M?"rgba(239,68,68,0.3)":"#fca5a5")},children:[(0,E.jsx)(v.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:T.error}}),(0,E.jsx)("p",{className:"text-sm",style:{color:T.error},children:ge})]}),me&&(()=>{const{question:e,chain:t,meta_resolved:r,summary:n}=me,s=n.warnings?.length>0,o=(e,t)=>(0,E.jsx)("span",{className:"px-2 py-0.5 rounded text-xs font-mono",style:{backgroundColor:t+"22",color:t},children:e});return(0,E.jsx)("div",{className:"space-y-4",children:(0,E.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",style:{borderBottom:`1px solid ${T.cardBorder}`},children:[(0,E.jsxs)("span",{className:"text-sm font-semibold",style:{color:T.text},children:["Chain â€” Question #",pe,': "',e.title,'"']}),(0,E.jsxs)("button",{onClick:De,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-all focus:outline-none",style:{backgroundColor:ve?T.success:T.inputBg,color:ve?"#fff":T.text,border:`1px solid ${T.cardBorder}`},children:[(0,E.jsx)(N.A,{className:"w-3.5 h-3.5"}),ve?"Copied!":"Copy JSON"]})]}),(0,E.jsxs)("div",{className:"p-4 space-y-4",children:[s&&(0,E.jsx)("div",{className:"space-y-1.5",children:n.warnings.map((e,t)=>(0,E.jsxs)("div",{className:"flex items-start gap-2 p-2.5 rounded-lg text-xs",style:{backgroundColor:M?"rgba(245,158,11,0.1)":"#fef3c7",color:T.warning},children:[(0,E.jsx)(v.A,{className:"w-3.5 h-3.5 flex-shrink-0 mt-0.5"}),e]},t))}),!s&&(0,E.jsxs)("div",{className:"flex items-center gap-2 text-xs p-2.5 rounded-lg",style:{backgroundColor:M?"rgba(16,185,129,0.1)":"#d1fae5",color:T.success},children:[(0,E.jsx)(k.A,{className:"w-3.5 h-3.5"})," All connections are consistent"]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("p",{className:"text-xs font-semibold mb-2",style:{color:T.textMuted},children:"QUESTION"}),(0,E.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-xs",style:{color:T.text},children:[(0,E.jsxs)("span",{className:"font-mono",children:["#",e.id]}),(0,E.jsx)("span",{className:"font-medium",children:e.title}),o(e.status,"publish"===e.status?T.success:T.warning),Object.entries(e.taxonomies||{}).map(([e,t])=>t.map(t=>(0,E.jsxs)("span",{className:"px-2 py-0.5 rounded text-xs",style:{backgroundColor:T.hoverBg,color:T.textMuted},children:[e,": ",t.name]},t.id)))]}),(0,E.jsxs)("div",{className:"mt-2 text-xs font-mono",style:{color:T.textMuted},children:["meta _course_ids: ",JSON.stringify(e.meta_ids._course_ids)," Â |Â  _lesson_ids: ",JSON.stringify(e.meta_ids._lesson_ids)]})]}),0===t.length&&(0,E.jsx)("div",{className:"text-xs p-3 rounded-lg",style:{backgroundColor:T.hoverBg,color:T.textMuted},children:"No quiz found that lists this question in _quiz_question_ids."}),t.map((e,t)=>{var r;return(0,E.jsxs)("div",{className:"border-l-2 pl-4 space-y-2",style:{borderColor:T.primary},children:[(0,E.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-xs",children:[(0,E.jsx)("span",{className:"font-bold",style:{color:T.primary},children:"Quiz"}),(0,E.jsxs)("span",{className:"font-mono",style:{color:T.text},children:["#",e.quiz_id]}),(0,E.jsx)("span",{style:{color:T.text},children:e.quiz_title}),o(e.quiz_status,"publish"===e.quiz_status?T.success:T.warning),(0,E.jsxs)("span",{style:{color:T.textMuted},children:["_course_id: ",e.quiz_course_id_meta||"none"]}),(0,E.jsxs)("span",{style:{color:T.textMuted},children:["(",null!==(r=e.question_ids_in_quiz?.length)&&void 0!==r?r:0," questions)"]})]}),0===e.lessons.length&&(0,E.jsx)("div",{className:"text-xs ml-4",style:{color:T.warning},children:"âš  Not referenced by any lesson"}),e.lessons.map((e,t)=>(0,E.jsxs)("div",{className:"border-l-2 pl-4 ml-2 space-y-1",style:{borderColor:T.accent},children:[(0,E.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-xs",children:[(0,E.jsx)("span",{className:"font-bold",style:{color:T.accent},children:"Lesson"}),(0,E.jsxs)("span",{className:"font-mono",style:{color:T.text},children:["#",e.lesson_id]}),(0,E.jsx)("span",{style:{color:T.text},children:e.lesson_title}),o(e.lesson_status,"publish"===e.lesson_status?T.success:T.warning),(0,E.jsxs)("span",{style:{color:T.textMuted},children:["via ",e.found_via]})]}),e.course?(0,E.jsxs)("div",{className:"flex flex-wrap gap-2 items-center text-xs ml-4",children:[(0,E.jsx)("span",{className:"font-bold",style:{color:T.info},children:"Course"}),(0,E.jsxs)("span",{className:"font-mono",style:{color:T.text},children:["#",e.course.course_id]}),(0,E.jsx)("span",{style:{color:T.text},children:e.course.course_title}),o(e.course.course_status,"publish"===e.course.course_status?T.success:T.warning)]}):(0,E.jsx)("div",{className:"text-xs ml-4",style:{color:T.warning},children:"âš  No course linked to this lesson"})]},t))]},t)}),(0,E.jsxs)("div",{className:"text-xs space-y-1 pt-2",style:{borderTop:`1px solid ${T.cardBorder}`,color:T.textMuted},children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("strong",{children:"Quizzes found:"})," ",n.quiz_ids_found_by_reverse_lookup.join(", ")||"none"]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("strong",{children:"Lessons found:"})," ",n.lesson_ids_found_by_reverse_lookup.join(", ")||"none"]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("strong",{children:"Courses found:"})," ",n.course_ids_found_by_reverse_lookup.join(", ")||"none"]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("strong",{children:"Meta courses:"})," ",n.course_ids_in_question_meta.join(", ")||"none"]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("strong",{children:"Meta lessons:"})," ",n.lesson_ids_in_question_meta.join(", ")||"none"]})]})]})]})})})(),(0,E.jsxs)("div",{className:"p-6 rounded-xl",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsx)("h2",{className:"text-lg font-semibold mb-1",style:{color:T.text},children:"Provider Analysis"}),(0,E.jsxs)("p",{className:"text-sm mb-5",style:{color:T.textMuted},children:["All questions for a provider â€” shows which lesson field was used during migration (",(0,E.jsx)("code",{className:"text-xs px-1 rounded",style:{backgroundColor:T.hoverBg},children:"_question_lesson"})," legacy vs",(0,E.jsx)("code",{className:"text-xs px-1 rounded",style:{backgroundColor:T.hoverBg},children:"_lesson_ids"})," new), quiz membership, and course links."]}),we.length>0&&(0,E.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:we.map(e=>(0,E.jsxs)("button",{onClick:()=>{Ce(e.slug),Se(null),Ae(null)},className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-all focus:outline-none",style:{backgroundColor:ke===e.slug?T.accent:T.inputBg,color:ke===e.slug?"#fff":T.text,border:`1px solid ${ke===e.slug?T.accent:T.cardBorder}`},children:[e.name," ",(0,E.jsxs)("span",{style:{opacity:.7},children:["(",e.question_count,")"]})]},e.slug))}),(0,E.jsxs)("div",{className:"flex gap-3",children:[(0,E.jsx)("input",{type:"text",value:ke,onChange:e=>Ce(e.target.value),onKeyDown:e=>"Enter"===e.key&&Ie(),placeholder:"Provider slug (e.g. david)...",className:"flex-1 px-4 py-2.5 rounded-xl focus:outline-none focus:ring-2 font-mono",style:{backgroundColor:T.inputBg,border:`1px solid ${T.cardBorder}`,color:T.text,"--tw-ring-color":T.accent}}),(0,E.jsxs)("button",{onClick:Ie,disabled:Me||!ke,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl font-medium transition-all focus:outline-none disabled:opacity-50",style:{backgroundColor:T.accent,color:"#fff"},children:[Me?(0,E.jsx)(a.A,{className:"w-4 h-4 animate-spin"}):(0,E.jsx)(u.A,{className:"w-4 h-4"}),"Analyze"]})]})]}),Ee&&(0,E.jsxs)("div",{className:"p-4 rounded-xl flex items-start gap-3",style:{backgroundColor:M?"rgba(239,68,68,0.1)":"#fee2e2",border:"1px solid "+(M?"rgba(239,68,68,0.3)":"#fca5a5")},children:[(0,E.jsx)(v.A,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:T.error}}),(0,E.jsx)("p",{className:"text-sm",style:{color:T.error},children:Ee})]}),_e&&(()=>{const{provider:e,total_questions:t,stats:r,questions:n}=_e;return(0,E.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:T.bgCard,border:`1px solid ${T.cardBorder}`,boxShadow:T.shadowSm},children:[(0,E.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",style:{borderBottom:`1px solid ${T.cardBorder}`},children:[(0,E.jsxs)("span",{className:"text-sm font-semibold",style:{color:T.text},children:[e.name," â€” ",t," questions"]}),(0,E.jsxs)("button",{onClick:Le,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-medium transition-all focus:outline-none",style:{backgroundColor:Pe?T.success:T.inputBg,color:Pe?"#fff":T.text,border:`1px solid ${T.cardBorder}`},children:[(0,E.jsx)(N.A,{className:"w-3.5 h-3.5"}),Pe?"Copied!":"Copy JSON"]})]}),(0,E.jsxs)("div",{className:"p-4 space-y-4",children:[(0,E.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[{label:"_question_lesson only (legacy)",value:r.has_question_lesson_only,warn:!0},{label:"_lesson_ids populated (new)",value:r.has_lesson_ids,warn:!1},{label:"_course_ids populated",value:r.has_course_ids,warn:!1},{label:"No lesson reference at all",value:r.has_no_lesson_at_all,warn:!0},{label:"In a quiz",value:r.in_a_quiz,warn:!1},{label:"Not in any quiz",value:r.not_in_any_quiz,warn:!0}].map(e=>(0,E.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:e.warn&&e.value>0?M?"rgba(245,158,11,0.1)":"#fef3c7":T.hoverBg},children:[(0,E.jsx)("div",{className:"text-xl font-bold",style:{color:e.warn&&e.value>0?T.warning:T.accent},children:e.value}),(0,E.jsx)("div",{className:"text-xs mt-0.5",style:{color:T.textMuted},children:e.label})]},e.label))}),(0,E.jsx)("div",{className:"overflow-auto",style:{maxHeight:"50vh"},children:(0,E.jsxs)("table",{className:"w-full text-xs border-collapse",children:[(0,E.jsx)("thead",{children:(0,E.jsx)("tr",{style:{borderBottom:`1px solid ${T.cardBorder}`},children:["ID","Title","Status","Difficulty","Lesson field","Lesson title","Course IDs","Quiz count"].map(e=>(0,E.jsx)("th",{className:"text-left py-2 px-2 font-semibold whitespace-nowrap",style:{color:T.textMuted},children:e},e))})}),(0,E.jsx)("tbody",{children:n.map((e,t)=>{const r=e.lesson_refs[0],n=t%2==0?"transparent":M?"rgba(255,255,255,0.02)":"rgba(0,0,0,0.01)";return(0,E.jsxs)("tr",{style:{backgroundColor:n,borderBottom:`1px solid ${T.cardBorder}22`},children:[(0,E.jsx)("td",{className:"py-1.5 px-2 font-mono",style:{color:T.textMuted},children:e.question_id}),(0,E.jsx)("td",{className:"py-1.5 px-2",style:{color:T.text,maxWidth:"240px"},children:(0,E.jsx)("span",{className:"line-clamp-1 block",title:e.question_title,children:e.question_title})}),(0,E.jsx)("td",{className:"py-1.5 px-2",children:(0,E.jsx)("span",{className:"px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:"publish"===e.question_status?`${T.success}22`:`${T.warning}22`,color:"publish"===e.question_status?T.success:T.warning},children:e.question_status})}),(0,E.jsx)("td",{className:"py-1.5 px-2",style:{color:T.textMuted},children:e.difficulty||"â€”"}),(0,E.jsx)("td",{className:"py-1.5 px-2 font-mono",style:{color:e.flags.has_lesson_ids?T.success:e.flags.has_question_lesson?T.warning:T.error},children:e.flags.has_lesson_ids?"_lesson_ids":e.flags.has_question_lesson?"_question_lesson":"none"}),(0,E.jsx)("td",{className:"py-1.5 px-2",style:{color:T.text},children:r?(0,E.jsxs)("span",{title:r.title,className:"line-clamp-1 block",style:{maxWidth:"200px"},children:["#",r.id," ",r.title]}):(0,E.jsx)("span",{style:{color:T.error},children:"â€”"})}),(0,E.jsx)("td",{className:"py-1.5 px-2 font-mono",style:{color:e.course_ids.length?T.text:T.error},children:e.course_ids.length?e.course_ids.join(", "):"â€”"}),(0,E.jsx)("td",{className:"py-1.5 px-2 font-mono",style:{color:e.quizzes.length?T.text:T.error},children:e.quizzes.length})]},e.question_id)})})]})})]})]})})()]})]})]})})]})}},7197:e=>{e.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},7199:(e,t,r)=>{var n=r(9653),s=r(6169),o=r(3201),a=r(3736),i=r(1961);e.exports=function(e,t,r){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return s(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i(e,r);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},7217:(e,t,r)=>{var n=r(79),s=r(1420),o=r(938),a=r(3605),i=r(9817),l=r(945);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=s,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=i,c.prototype.set=l,e.exports=c},7235:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7237:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},7241:(e,t,r)=>{var n=r(695),s=r(2903),o=r(4894);e.exports=function(e){return o(e)?n(e,!0):s(e)}},7255:(e,t,r)=>{var n=r(7422);e.exports=function(e){return function(t){return n(t,e)}}},7296:(e,t,r)=>{var n,s=r(5481),o=(n=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},7301:e=>{e.exports=function(e){return function(t){return e(t)}}},7324:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(5112),s=r(8509),o=r(2984),a=r(3025);t.has=function(e,t){let r;if(r=Array.isArray(t)?t:"string"==typeof t&&n.isDeepKey(t)&&null==e?.[t]?a.toPath(t):[t],0===r.length)return!1;let i=e;for(let e=0;e<r.length;e++){const t=r[e];if(!(null!=i&&Object.hasOwn(i,t)||(Array.isArray(i)||o.isArguments(i))&&s.isIndex(t)&&t<i.length))return!1;i=i[t]}return!0}},7334:e=>{e.exports=function(e){return function(){return e}}},7400:(e,t,r)=>{var n=r(9374),s=1/0;e.exports=function(e){return e?(e=n(e))===s||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},7414:(e,t,r)=>{"use strict";r.d(t,{A:()=>I});var n=r(1609),s=r(5795),o=r(8245),a=r(8004),i=r(7946),l=r(4471),c=r(3610),d=r(1464),u=r(4934),p=r(2307),f=r(8309),m=r(8931),h=r(3540),g=r(3160),x=r(827),y=r(1436),b=r(697),v=r(8852),j=r(8445),w=r(2708),N=r(802),k=r(8697),C=r(2389),_=r(3375),S=r(3627),E=r(4979),A=r(6359),M=r(5708),T=r.n(M),P=r(5103),O=r(8766),z=r(790);const q=({step:e,onRemove:t,onEdit:r,isViewMode:n,stepTypes:s,pageColors:o,isDarkMode:a,t:i})=>{const{attributes:l,listeners:c,setNodeRef:d,transform:p,transition:f}=(0,S.gl)({id:e.id}),m=s[e.type]?.icon||x.A,h=s[e.type]||s.text,g={transform:E.Ks.Transform.toString(p),transition:f};return(0,z.jsx)("div",{ref:d,style:{...g,backgroundColor:o.inputBg,border:`1px solid ${o.inputBorder}`,borderRadius:"10px",overflow:"hidden"},children:(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 14px"},children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[!n&&(0,z.jsx)("button",{type:"button",...l,...c,style:{cursor:"grab",color:o.textMuted,background:"none",border:"none",padding:"4px",flexShrink:0},children:(0,z.jsx)(y.A,{size:18})}),(0,z.jsx)("div",{style:{padding:"8px",borderRadius:"6px",backgroundColor:a?"rgba(99, 102, 241, 0.2)":"rgba(99, 102, 241, 0.1)",flexShrink:0},children:(0,z.jsx)(m,{size:16,style:{color:"#6366f1"}})}),(0,z.jsxs)("div",{style:{minWidth:0,flex:1},children:[(0,z.jsx)("h4",{style:{fontSize:"14px",fontWeight:"500",color:o.text,margin:0},children:e.title}),(0,z.jsxs)("p",{style:{fontSize:"12px",color:o.textMuted,margin:"2px 0 0",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[h.label," â€¢ ",(()=>{switch(e.type){case"video":return e.data?.video_url?e.data.video_url.substring(0,40)+"...":i("admin.lessonModal.noContent");case"text":if(e.data?.content){const t=e.data.content.replace(/<[^>]*>/g,"");return t.substring(0,50)+(t.length>50?"...":"")}return i("admin.lessonModal.noContent");case"pdf":return e.data?.filename||i("admin.lessonModal.noContent");case"quiz":return e.data?.quiz_id?`Test #${e.data.quiz_id}`:i("admin.lessonModal.noContent");default:return""}})()]})]})]}),(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[(0,z.jsxs)("button",{type:"button",onClick:()=>r(e),style:{padding:"6px 10px",borderRadius:"6px",border:"none",backgroundColor:a?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",color:"#3b82f6",cursor:"pointer",fontSize:"12px",fontWeight:"500",display:"flex",alignItems:"center",gap:"4px"},children:[(0,z.jsx)(u.A,{size:12}),i("common.edit")]}),!n&&(0,z.jsx)("button",{type:"button",onClick:()=>t(e.id),style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:a?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:"#ef4444",cursor:"pointer"},children:(0,z.jsx)(w.A,{size:14})})]})]})})},D=({isOpen:e,onClose:t,onSave:r,step:s,mode:i,stepTypes:u,pageColors:p,isDarkMode:f,t:m})=>{const[h,g]=(0,n.useState)({type:"text",title:"",data:{}}),[x,y]=(0,n.useState)(!1),[v,N]=(0,n.useState)(0),[k,C]=(0,n.useState)(null),_=(0,n.useRef)(null),S=(0,n.useRef)(null),E=(0,n.useRef)(null),[A,M]=(0,n.useState)(""),[O,q]=(0,n.useState)(null),D=(0,P.A)();(0,n.useEffect)(()=>{e&&("edit"===i&&s?(g({type:s.type||"text",title:s.title||"",data:s.data||{}}),"quiz"===s.type&&s.data?.quiz_id?D.fetchQuizzes({include:[s.data.quiz_id]}).then(()=>{const e=D.quizzes.find(e=>e.id===s.data.quiz_id);e&&q(e)}):q(null)):(g({type:"text",title:"",data:{}}),q(null)),C(null),M(""),D.clearQuizzes?.())},[e,i,s]),(0,n.useEffect)(()=>{"edit"===i&&"quiz"===s?.type&&s?.data?.quiz_id&&!O&&D.fetchQuizzes({include:[s.data.quiz_id]})},[i,s]),(0,n.useEffect)(()=>{if("edit"===i&&"quiz"===s?.type&&s?.data?.quiz_id&&D.quizzes.length>0){const e=D.quizzes.find(e=>e.id===s.data.quiz_id);e&&!O&&q(e)}},[D.quizzes,i,s,O]);const I=(0,n.useCallback)(async()=>{try{const e=await(0,a.I)({title:"Seleccionar imagen",buttonText:"Insertar imagen",type:"image"});if(e&&e.url&&S.current){const t=S.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e.url),t.setSelection(r.index+1)}}catch(e){console.error("Error al abrir el selector de medios:",e)}},[]),L=(0,n.useMemo)(()=>({toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:I}}}),[I]);if(!e)return null;const R={width:"100%",padding:"10px 12px",borderRadius:"8px",border:`2px solid ${p.inputBorder}`,backgroundColor:p.inputBg,color:p.text,fontSize:"14px",outline:"none",boxSizing:"border-box"},$={display:"block",fontSize:"13px",fontWeight:"500",color:p.text,marginBottom:"6px"};return(0,z.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:100010,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.5)"},children:[(0,z.jsx)("div",{style:{position:"fixed",inset:0},onMouseDown:e=>{E.current=e.target},onClick:e=>{E.current===e.target&&t(),E.current=null}}),(0,z.jsxs)("div",{style:{position:"relative",zIndex:100011,width:"100%",maxWidth:"600px",maxHeight:"85vh",margin:"0 16px",backgroundColor:p.cardBg,borderRadius:"12px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",display:"flex",flexDirection:"column"},children:[(0,z.jsx)("div",{style:{padding:"20px 24px",borderBottom:`1px solid ${p.inputBorder}`,flexShrink:0},children:(0,z.jsx)("h3",{style:{fontSize:"18px",fontWeight:"600",color:p.text,margin:0},children:m("edit"===i?"admin.lessonModal.editStep":"admin.lessonModal.addStep")})}),(0,z.jsx)("div",{style:{padding:"20px 24px",overflowY:"auto",flex:1},children:(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[k&&(0,z.jsx)("div",{style:{padding:"10px 12px",borderRadius:"8px",backgroundColor:f?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:"#ef4444",fontSize:"13px"},children:k}),"edit"!==i&&(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{style:$,children:m("admin.lessonModal.stepType")}),(0,z.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(u).map(([e,t])=>{const r=t.icon,n=h.type===e;return(0,z.jsxs)("button",{type:"button",onClick:()=>(e=>{g(t=>({...t,type:e,data:{}})),q(null),M(""),D.clearQuizzes?.()})(e),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 12px",borderRadius:"8px",border:`2px solid ${n?p.accent:p.inputBorder}`,backgroundColor:n?f?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)":"transparent",cursor:"pointer"},children:[(0,z.jsx)("div",{style:{padding:"6px",borderRadius:"6px",backgroundColor:f?"rgba(99, 102, 241, 0.2)":"rgba(99, 102, 241, 0.1)"},children:(0,z.jsx)(r,{size:14,style:{color:"#6366f1"}})}),(0,z.jsx)("span",{style:{fontSize:"13px",fontWeight:"500",color:p.text},children:t.label})]},e)})})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("label",{style:$,children:[m("admin.lessonModal.stepTitle")," *"]}),(0,z.jsx)("input",{type:"text",value:h.title,onChange:e=>g(t=>({...t,title:e.target.value})),style:R,placeholder:m("admin.lessonModal.stepTitlePlaceholder")})]}),"video"===h.type&&(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{style:$,children:m("admin.lessonModal.videoUrl")}),(0,z.jsx)("input",{type:"url",value:h.data?.video_url||"",onChange:e=>g(t=>({...t,data:{...t.data,video_url:e.target.value}})),style:R,placeholder:m("admin.lessonModal.videoUrlPlaceholder")}),(0,z.jsx)("p",{style:{fontSize:"12px",color:p.textMuted,marginTop:"6px"},children:"Soporta YouTube, Vimeo, y enlaces directos a video"})]}),"text"===h.type&&(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{style:$,children:m("admin.lessonModal.textContent")}),(0,z.jsx)("div",{style:{borderRadius:"8px",overflow:"hidden",border:`2px solid ${p.inputBorder}`},children:(0,z.jsx)(T(),{ref:S,theme:"snow",value:h.data?.content||"",onChange:e=>g(t=>({...t,data:{...t.data,content:e}})),modules:L,style:{backgroundColor:p.inputBg,minHeight:"200px"}})})]}),"pdf"===h.type&&(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{style:$,children:m("admin.lessonModal.pdfFile")}),h.data?.file_id?(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 14px",borderRadius:"8px",backgroundColor:f?"rgba(16, 185, 129, 0.15)":"rgba(16, 185, 129, 0.1)",border:"1px solid "+(f?"rgba(16, 185, 129, 0.3)":"rgba(16, 185, 129, 0.2)")},children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,z.jsx)(l.A,{size:18,style:{color:"#10b981"}}),(0,z.jsx)("a",{href:h.data.url,target:"_blank",rel:"noopener noreferrer",style:{fontSize:"14px",color:"#3b82f6",textDecoration:"none"},children:h.data.filename})]}),(0,z.jsx)("button",{type:"button",onClick:()=>{g(e=>({...e,data:{...e.data,file_id:null,filename:null,url:null}}))},style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:f?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:"#ef4444",cursor:"pointer"},children:(0,z.jsx)(w.A,{size:14})})]}):(0,z.jsxs)("div",{children:[(0,z.jsx)("input",{type:"file",accept:"application/pdf",ref:_,onChange:async e=>{const t=e.target.files?.[0];if(!t)return;const r=(0,o.nJ)(t,{maxSize:10485760,allowedTypes:["application/pdf"]});if(r.isValid){y(!0),C(null),N(0);try{const e=await(0,o.o7)(t,{onProgress:N});g(r=>({...r,data:{...r.data,file_id:e.id,filename:t.name,url:e.url}}))}catch(e){C(e.message||"Upload failed")}finally{y(!1)}}else C(r.error)},style:{display:"none"},disabled:x}),(0,z.jsxs)("button",{type:"button",onClick:()=>_.current?.click(),disabled:x,style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",padding:"20px",borderRadius:"8px",border:`2px dashed ${p.inputBorder}`,backgroundColor:"transparent",color:p.textMuted,fontSize:"14px",cursor:x?"not-allowed":"pointer",opacity:x?.6:1},children:[(0,z.jsx)(d.A,{size:20}),x?`${m("admin.lessonModal.uploading")} ${v}%`:m("admin.lessonModal.selectPdf")]}),x&&(0,z.jsx)("div",{style:{marginTop:"8px",width:"100%",height:"4px",borderRadius:"2px",backgroundColor:p.inputBorder,overflow:"hidden"},children:(0,z.jsx)("div",{style:{width:`${v}%`,height:"100%",backgroundColor:"#3b82f6",transition:"width 0.2s"}})})]})]}),"quiz"===h.type&&(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{style:$,children:m("admin.lessonModal.selectTest")}),O?(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 14px",borderRadius:"8px",backgroundColor:f?"rgba(16, 185, 129, 0.15)":"rgba(16, 185, 129, 0.1)",border:"1px solid "+(f?"rgba(16, 185, 129, 0.3)":"rgba(16, 185, 129, 0.2)"),marginBottom:"12px"},children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,z.jsx)(l.A,{size:18,style:{color:"#10b981"}}),(0,z.jsx)("span",{style:{fontSize:"14px",fontWeight:"500",color:p.text},children:O.title?.rendered||O.title})]}),(0,z.jsx)("button",{type:"button",onClick:()=>{q(null),g(e=>({...e,data:{...e.data,quiz_id:null}}))},style:{padding:"6px",borderRadius:"6px",border:"none",backgroundColor:f?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:"#ef4444",cursor:"pointer"},children:(0,z.jsx)(w.A,{size:14})})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("form",{onSubmit:e=>{e.preventDefault(),A.trim()&&D.fetchQuizzes({search:A.trim(),per_page:10})},style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[(0,z.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,z.jsx)(j.A,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:p.textMuted}}),(0,z.jsx)("input",{type:"text",value:A,onChange:e=>M(e.target.value),placeholder:m("admin.lessonModal.searchTestsPlaceholder"),style:{...R,paddingLeft:"36px"}})]}),(0,z.jsx)("button",{type:"submit",disabled:D.loading,style:{padding:"10px 16px",borderRadius:"8px",border:"none",backgroundColor:p.primary,color:"white",fontSize:"14px",fontWeight:"500",cursor:D.loading?"not-allowed":"pointer",opacity:D.loading?.6:1},children:D.loading?"...":m("admin.lessonModal.search")})]}),D.quizzes.length>0&&(0,z.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"200px",overflowY:"auto",padding:"4px"},children:D.quizzes.map(e=>(0,z.jsxs)("div",{onClick:()=>(e=>{q(e),g(t=>({...t,data:{...t.data,quiz_id:e.id}})),M(""),D.clearQuizzes?.()})(e),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:"8px",backgroundColor:p.inputBg,border:`1px solid ${p.inputBorder}`,cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=p.hoverBg,e.currentTarget.style.borderColor=p.primary},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=p.inputBg,e.currentTarget.style.borderColor=p.inputBorder},children:[(0,z.jsx)("span",{style:{fontSize:"14px",color:p.text},children:e.title?.rendered||e.title}),(0,z.jsx)(b.A,{size:16,style:{color:p.primary}})]},e.id))}),!D.quizzes.length&&(0,z.jsxs)("div",{style:{textAlign:"center",padding:"24px 16px",borderRadius:"8px",border:`2px dashed ${p.inputBorder}`,backgroundColor:p.hoverBg},children:[(0,z.jsx)(c.A,{size:24,style:{color:p.textMuted,opacity:.5,margin:"0 auto 8px"}}),(0,z.jsx)("p",{style:{fontSize:"13px",color:p.textMuted},children:m("admin.lessonModal.searchForTest")})]})]})]})]})}),(0,z.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",padding:"16px 24px",borderTop:`1px solid ${p.inputBorder}`,backgroundColor:f?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.02)",flexShrink:0},children:[(0,z.jsx)("button",{type:"button",onClick:t,style:{padding:"10px 18px",borderRadius:"8px",border:`1px solid ${p.inputBorder}`,backgroundColor:"transparent",color:p.text,fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:m("common.cancel")}),(0,z.jsx)("button",{type:"button",onClick:()=>{h.title.trim()?(r(h,"edit"===i?s?.id:null),t()):C(m("admin.lessonModal.stepTitleRequired"))},disabled:x,style:{padding:"10px 18px",borderRadius:"8px",border:"none",backgroundColor:p.accent,color:"white",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",opacity:x?.6:1},children:m("edit"===i?"common.save":"admin.lessonModal.addStepButton")})]})]})]})},I=({isOpen:e,onClose:t,lesson:r=null,onSave:o,mode:a="create",availableCourses:l=[],isLoading:d=!1,compact:u=!1,preselectedCourseId:y=null})=>{const{t:j}=(0,C.Bd)(),{getColor:E,isDarkMode:M}=(0,A.DP)(),T="9999-12-31",[P,I]=(0,n.useState)({title:"",content:"",courseId:"",description:"",lessonOrder:"1",completionCriteria:"view_all",startDate:"",steps:[]}),[L,R]=(0,n.useState)({}),[$,B]=(0,n.useState)({isOpen:!1,mode:"create",step:null}),[F,U]=(0,n.useState)([]),[W,H]=(0,n.useState)([]),[Q,V]=(0,n.useState)(!1),Y=(0,n.useRef)(null),K=(0,n.useRef)(null),G=(0,_.FR)((0,_.MS)(_.AN),(0,_.MS)(_.uN,{coordinateGetter:S.JR})),X=(0,n.useMemo)(()=>({text:M?E("textPrimary","#f9fafb"):E("primary","#1a202c"),textMuted:M?E("textSecondary","#9ca3af"):"#6b7280",accent:E("accent","#f59e0b"),primary:"#3b82f6",cardBg:M?E("secondaryBackground","#1e293b"):"#ffffff",inputBg:M?"rgba(255,255,255,0.05)":"#ffffff",inputBorder:M?"rgba(255,255,255,0.1)":"#e5e7eb",overlay:"rgba(0, 0, 0, 0.5)",success:"#10b981",danger:"#ef4444",hoverBg:M?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)"}),[E,M]);(0,n.useEffect)(()=>{if(r&&"create"!==a){I({title:r.title?.rendered||r.title||"",content:r.content?.rendered||r.content||"",courseId:r.meta?._course_id?.toString()||"",description:r.meta?._lesson_description||"",lessonOrder:r.meta?._lesson_order?.toString()||"1",completionCriteria:r.meta?._completion_criteria||"view_all",startDate:r.meta?._start_date||"",steps:(r.meta?._lesson_steps||[]).map((e,t)=>({...e,id:e.id||`step_${Date.now()}_${t}_${Math.random().toString(36).substr(2,9)}`}))});const e=r.meta?._assigned_quiz_ids||[];U(e),H([])}else"create"===a&&(I({title:"",content:"",courseId:y||"",description:"",lessonOrder:"1",completionCriteria:"view_all",startDate:"",steps:[]}),U([]),H([]))},[r,a]),(0,n.useEffect)(()=>{(async()=>{if(0!==F.length){V(!0);try{const e=await(0,O.getAll)({include:F.join(","),per_page:100,status:"publish,draft,private"}),t=e.data||e||[],r=F.map(e=>t.find(t=>t.id===e)||{id:e,title:`Test #${e}`,_notFound:!0});H(r)}catch(e){console.error("Error fetching assigned quizzes:",e),H(F.map(e=>({id:e,title:`Test #${e}`,_notFound:!0})))}finally{V(!1)}}else H([])})()},[F]);const J=(e,t)=>{I(r=>({...r,[e]:t})),L[e]&&R(t=>({...t,[e]:null}))},Z=async(e="close")=>{if((()=>{const e={};return P.title.trim()||(e.title=j("admin.lessonModal.titleRequired")),P.courseId||(e.courseId=j("admin.lessonModal.courseRequired")),u||(0===P.steps.length&&(e.steps=j("admin.lessonModal.stepsRequired")),P.steps.filter(e=>!e.title?.trim()).length>0&&(e.steps=j("admin.lessonModal.allStepsMustHaveTitle"))),R(e),0===Object.keys(e).length})())try{const t={title:P.title,content:P.content,status:"publish",courseId:parseInt(P.courseId),description:P.description,lessonOrder:parseInt(P.lessonOrder),completionCriteria:P.completionCriteria,startDate:P.startDate,steps:P.steps.map(({id:e,...t})=>t),assignedQuizIds:F};await o(t,e),"reset"===e&&(I({title:"",content:"",courseId:"",description:"",lessonOrder:"1",completionCriteria:"view_all",startDate:"",steps:[]}),U([]),R({}))}catch(e){R({submit:e.message||j("admin.lessonModal.saveError")})}else setActiveTab(0)},ee=()=>{B({isOpen:!0,mode:"create",step:null})},te=e=>{B({isOpen:!0,mode:"edit",step:e})},re=e=>{I(t=>({...t,steps:t.steps.filter(t=>t.id!==e).map((e,t)=>({...e,order:t+1}))}))},ne=W,se={video:{label:j("admin.lessonModal.stepTypes.video"),icon:N.A,color:"text-blue-600 bg-blue-50"},text:{label:j("admin.lessonModal.stepTypes.text"),icon:x.A,color:"text-green-600 bg-green-50"},pdf:{label:j("admin.lessonModal.stepTypes.pdf"),icon:f.A,color:"text-red-600 bg-red-50"},quiz:{label:j("admin.lessonModal.stepTypes.quiz"),icon:c.A,color:"text-purple-600 bg-purple-50"}};if(!e)return null;const oe="view"===a,ae="create"===a,ie=j(ae?"admin.lessonModal.createTitle":"edit"===a?"admin.lessonModal.editTitle":"admin.lessonModal.viewTitle"),le={width:"100%",padding:"10px 12px",borderRadius:"8px",border:`2px solid ${X.inputBorder}`,backgroundColor:X.inputBg,color:X.text,fontSize:"14px",outline:"none",boxSizing:"border-box"},ce={...le,cursor:"pointer"},de={display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:X.text};return(0,s.createPortal)((0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("div",{ref:Y,style:{position:"fixed",inset:0,zIndex:100001,display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"60px",backgroundColor:X.overlay,overflowY:"auto"},onMouseDown:e=>{K.current=e.target},onClick:e=>{e.target===e.currentTarget&&K.current===e.currentTarget&&t(),K.current=null},children:(0,z.jsxs)("div",{style:{width:"100%",maxWidth:"900px",margin:"0 16px 40px",backgroundColor:X.cardBg,borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:`1px solid ${X.inputBorder}`},children:[(0,z.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",color:X.text,margin:0},children:ie}),(0,z.jsx)("button",{type:"button",onClick:t,style:{padding:"6px",borderRadius:"6px",border:"none",background:"transparent",color:X.textMuted,cursor:"pointer",transition:"opacity 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>e.currentTarget.style.opacity="0.7",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:(0,z.jsx)(k.A,{size:18})})]}),(0,z.jsx)("div",{style:{maxHeight:"65vh",overflowY:"auto",padding:"24px"},children:(0,z.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[L.submit&&(0,z.jsxs)("div",{style:{padding:"12px",borderRadius:"8px",backgroundColor:M?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:X.danger,display:"flex",alignItems:"center",gap:"8px"},children:[(0,z.jsx)(i.A,{size:16}),(0,z.jsx)("span",{style:{fontSize:"14px"},children:L.submit})]}),(0,z.jsxs)("div",{children:[(0,z.jsxs)("label",{style:de,children:[j("admin.lessonModal.title")," *"]}),(0,z.jsx)("input",{type:"text",value:P.title,onChange:e=>J("title",e.target.value),placeholder:j("admin.lessonModal.titlePlaceholder"),style:{...le,borderColor:L.title?X.danger:X.inputBorder},disabled:oe}),L.title&&(0,z.jsx)("p",{style:{marginTop:"4px",fontSize:"12px",color:X.danger},children:L.title})]}),!u&&(0,z.jsxs)("div",{children:[(0,z.jsxs)("label",{style:de,children:[j("admin.lessonModal.course")," *"]}),(0,z.jsxs)("select",{value:P.courseId,onChange:e=>J("courseId",e.target.value),style:{...ce,borderColor:L.courseId?X.danger:X.inputBorder},disabled:oe,children:[(0,z.jsx)("option",{value:"",children:j("admin.lessonModal.selectCourse")}),l.map(e=>(0,z.jsx)("option",{value:e.value,children:e.label},e.value))]}),L.courseId&&(0,z.jsx)("p",{style:{marginTop:"4px",fontSize:"12px",color:X.danger},children:L.courseId})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{style:de,children:j("admin.lessonModal.description")}),(0,z.jsx)("textarea",{value:P.description,onChange:e=>J("description",e.target.value),rows:3,placeholder:j("admin.lessonModal.descriptionPlaceholder"),style:{...le,resize:"vertical"},disabled:oe})]}),(0,z.jsxs)("div",{style:{padding:"14px",borderRadius:"8px",backgroundColor:M?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`1px solid ${X.inputBorder}`,display:"flex",flexDirection:"column",gap:"14px"},children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[P.startDate!==T?(0,z.jsx)(g.A,{size:16,style:{color:"#10b981"}}):(0,z.jsx)(h.A,{size:16,style:{color:"#ef4444"}}),(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{style:{fontSize:"14px",fontWeight:"500",color:X.text},children:j("supportMaterial.visibility")}),(0,z.jsx)("div",{style:{fontSize:"12px",color:X.textMuted},children:P.startDate!==T?j("supportMaterial.visibleDescription"):j("supportMaterial.hiddenDescription")})]})]}),(0,z.jsx)("button",{type:"button",onClick:()=>J("startDate",P.startDate!==T?T:""),disabled:oe,style:{position:"relative",width:"44px",height:"24px",borderRadius:"12px",border:"none",backgroundColor:P.startDate!==T?"#10b981":"#9ca3af",cursor:oe?"not-allowed":"pointer",transition:"background-color 0.2s",flexShrink:0,opacity:oe?.6:1},children:(0,z.jsx)("span",{style:{position:"absolute",top:"2px",left:P.startDate!==T?"22px":"2px",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"#ffffff",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})})]}),P.startDate!==T&&(0,z.jsxs)("div",{children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[(0,z.jsx)(p.A,{size:14,style:{color:X.textMuted}}),(0,z.jsx)("label",{style:{fontSize:"14px",fontWeight:"500",color:X.text,margin:0},children:j("supportMaterial.unlockDate")})]}),(0,z.jsx)("input",{type:"date",value:P.startDate||"",onChange:e=>J("startDate",e.target.value||""),style:{...le,padding:"8px 12px"},disabled:oe}),(0,z.jsx)("div",{style:{fontSize:"12px",color:X.textMuted,marginTop:"4px"},children:j("supportMaterial.unlockDateDescription")}),P.startDate&&(0,z.jsx)("button",{type:"button",onClick:()=>J("startDate",""),disabled:oe,style:{marginTop:"6px",padding:"4px 10px",borderRadius:"4px",fontSize:"12px",backgroundColor:"transparent",border:`1px solid ${X.inputBorder}`,color:X.textMuted,cursor:oe?"not-allowed":"pointer"},children:j("supportMaterial.clearDate")})]})]}),!u&&(0,z.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{style:de,children:j("admin.lessonModal.lessonOrder")}),(0,z.jsx)("input",{type:"number",min:"1",value:P.lessonOrder,onChange:e=>J("lessonOrder",e.target.value),style:le,disabled:oe})]}),(0,z.jsxs)("div",{children:[(0,z.jsx)("label",{style:de,children:j("admin.lessonModal.completionCriteria")}),(0,z.jsxs)("select",{value:P.completionCriteria,onChange:e=>J("completionCriteria",e.target.value),style:ce,disabled:oe,children:[(0,z.jsx)("option",{value:"view_all",children:j("admin.lessonModal.completionViewAll")}),(0,z.jsx)("option",{value:"pass_quiz",children:j("admin.lessonModal.completionPassQuiz")}),(0,z.jsx)("option",{value:"complete_steps",children:j("admin.lessonModal.completionCompleteSteps")})]})]})]}),!u&&(0,z.jsxs)("div",{style:{paddingTop:"20px",borderTop:`1px solid ${X.inputBorder}`,marginTop:"8px"},children:[(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"16px"},children:[(0,z.jsxs)("div",{children:[(0,z.jsxs)("h4",{style:{fontSize:"16px",fontWeight:"600",color:X.text,margin:0},children:[j("admin.lessonModal.stepsTitle")," *"]}),(0,z.jsx)("p",{style:{fontSize:"13px",color:X.textMuted,marginTop:"4px"},children:j("admin.lessonModal.stepsDescription")})]}),!oe&&(0,z.jsxs)("button",{type:"button",onClick:ee,style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",borderRadius:"8px",border:"none",backgroundColor:X.accent,color:"white",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:[(0,z.jsx)(b.A,{size:16}),j("admin.lessonModal.addStep")]})]}),L.steps&&(0,z.jsxs)("div",{style:{padding:"12px",borderRadius:"8px",backgroundColor:M?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:X.danger,display:"flex",alignItems:"center",gap:"8px",marginBottom:"12px"},children:[(0,z.jsx)(i.A,{size:16}),(0,z.jsx)("span",{style:{fontSize:"14px"},children:L.steps})]}),P.steps.length>0?(0,z.jsx)(_.Mp,{sensors:G,collisionDetection:_.fp,onDragEnd:e=>{const{active:t,over:r}=e;if(t.id!==r?.id){const e=P.steps.findIndex(e=>e.id===t.id),n=P.steps.findIndex(e=>e.id===r.id),s=(0,S.be)(P.steps,e,n).map((e,t)=>({...e,order:t+1}));I(e=>({...e,steps:s}))}},children:(0,z.jsx)(S.gB,{items:P.steps.map(e=>e.id),strategy:S._G,children:(0,z.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:P.steps.map(e=>(0,z.jsx)(q,{step:e,onRemove:re,onEdit:te,isViewMode:oe,stepTypes:se,pageColors:X,isDarkMode:M,t:j},e.id))})})}):(0,z.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",borderRadius:"12px",border:`2px dashed ${X.inputBorder}`,backgroundColor:X.hoverBg},children:[(0,z.jsx)(c.A,{size:40,style:{color:X.textMuted,opacity:.5,margin:"0 auto 12px"}}),(0,z.jsx)("h3",{style:{fontSize:"14px",fontWeight:"500",color:X.text,marginBottom:"8px"},children:j("admin.lessonModal.noSteps")}),!oe&&(0,z.jsxs)("button",{type:"button",onClick:ee,style:{marginTop:"12px",display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 14px",borderRadius:"8px",border:"none",backgroundColor:X.accent,color:"white",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:[(0,z.jsx)(b.A,{size:16}),j("admin.lessonModal.addFirstStep")]})]})]}),!u&&F.length>0&&(0,z.jsxs)("div",{children:[(0,z.jsxs)("label",{style:de,children:[j("admin.lessonModal.assignedTests")," (",F.length,")"]}),Q?(0,z.jsx)("p",{style:{fontSize:"13px",color:X.textMuted},children:j("common.loading")}):(0,z.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:ne.map(e=>(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 12px",borderRadius:"8px",border:`1px solid ${X.inputBorder}`,backgroundColor:X.inputBg},children:[(0,z.jsx)("span",{style:{fontSize:"13px",fontWeight:"500",color:X.text},children:e.title?.rendered||e.title}),(0,z.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,z.jsxs)("button",{type:"button",onClick:()=>{return r=e.id,t(),void(window.location.hash=`tests?edit=${r}`);var r},style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"6px 10px",borderRadius:"6px",border:`1px solid ${X.primary}`,backgroundColor:"transparent",color:X.primary,fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.15s"},title:j("admin.lessonModal.editTestInPage"),children:[(0,z.jsx)(m.A,{size:14}),j("common.edit")]}),!oe&&(0,z.jsxs)("button",{type:"button",onClick:()=>{return t=e.id,U(e=>e.filter(e=>e!==t)),void H(e=>e.filter(e=>e.id!==t));var t},style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"6px 10px",borderRadius:"6px",border:`1px solid ${X.danger}`,backgroundColor:"transparent",color:X.danger,fontSize:"12px",fontWeight:"500",cursor:"pointer",transition:"all 0.15s"},title:j("admin.lessonModal.removeTest"),children:[(0,z.jsx)(w.A,{size:14}),j("common.remove")]})]})]},e.id))}),(0,z.jsx)("p",{style:{fontSize:"12px",color:X.textMuted,marginTop:"6px"},children:j("admin.lessonModal.testsEditHint")})]})]})}),!oe&&(0,z.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"16px 24px",borderTop:`1px solid ${X.inputBorder}`,backgroundColor:M?"rgba(0,0,0,0.2)":"rgba(0,0,0,0.02)"},children:[(0,z.jsx)("button",{type:"button",onClick:t,style:{padding:"10px 20px",borderRadius:"8px",border:`1px solid ${X.inputBorder}`,backgroundColor:"transparent",color:X.text,fontSize:"14px",fontWeight:"500",cursor:"pointer"},disabled:d,children:j("common.cancel")}),(0,z.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[ae&&(0,z.jsx)("button",{type:"button",onClick:()=>Z("reset"),disabled:d,style:{padding:"10px 20px",borderRadius:"8px",border:"none",backgroundColor:M?"rgba(245, 158, 11, 0.2)":"rgba(245, 158, 11, 0.15)",color:X.accent,fontSize:"14px",fontWeight:"500",cursor:d?"not-allowed":"pointer",opacity:d?.6:1},children:j("admin.lessonModal.saveAndNew")}),(0,z.jsxs)("button",{type:"button",onClick:()=>Z("close"),disabled:d,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",borderRadius:"8px",border:"none",backgroundColor:X.accent,color:"white",fontSize:"14px",fontWeight:"500",cursor:d?"not-allowed":"pointer",opacity:d?.6:1},children:[(0,z.jsx)(v.A,{size:16}),j(d?"common.saving":"common.save")]})]})]})]})}),(0,z.jsx)(D,{isOpen:$.isOpen,onClose:()=>{B({isOpen:!1,mode:"create",step:null})},onSave:(e,t)=>{if(t)I(r=>({...r,steps:r.steps.map(r=>r.id===t?{...r,...e}:r)}));else{const t={...e,id:`step_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,order:P.steps.length+1};I(e=>({...e,steps:[...e.steps,t]}))}},step:$.step,mode:$.mode,stepTypes:se,pageColors:X,isDarkMode:M,t:j})]}),document.body)}},7422:(e,t,r)=>{var n=r(1769),s=r(7797);e.exports=function(e,t){for(var r=0,o=(t=n(t,e)).length;null!=e&&r<o;)e=e[s(t[r++])];return r&&r==o?e:void 0}},7473:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7504:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]])},7534:(e,t,r)=>{var n=r(2552),s=r(346);e.exports=function(e){return s(e)&&"[object Arguments]"==n(e)}},7556:(e,t,r)=>{var n=r(1873),s=r(4932),o=r(6449),a=r(4394),i=n?n.prototype:void 0,l=i?i.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return s(t,e)+"";if(a(t))return l?l.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}},7670:(e,t,r)=>{var n=r(2651);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},7677:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},7690:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var n=r(1609),s=r(2389),o=r(8723),a=r(697),i=r(8445),l=r(5333),c=r(5107),d=r(8697),u=r(827),p=r(1409),f=r(5103),m=r(6172),h=r(3001),g=r(6359),x=r(3610),y=r(3893),b=r(7235),v=r(2307),j=r(4934),w=r(10),N=r(5404),k=r(2708),C=r(790);const _=({quiz:e,onEdit:t,onDelete:r,onDuplicate:s,onView:o,onStats:a})=>{const{getColor:i,isDarkMode:l}=(0,g.DP)(),c=(0,n.useMemo)(()=>({text:l?i("textPrimary","#f9fafb"):i("primary","#1a202c"),textMuted:l?i("textSecondary","#9ca3af"):"#6b7280",accent:i("accent","#f59e0b"),bgCard:l?i("secondaryBackground","#1f2937"):"#ffffff",border:l?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",shadow:l?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",hoverBg:l?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)",success:"#10b981",warning:"#f59e0b",danger:"#ef4444"}),[i,l]),d="string"==typeof e.title?e.title:e.title?.rendered||"Sin tÃ­tulo",u=e.question_count||0,p=e.total_attempts||0,f=e.meta?._time_limit||0,m=e.meta?._passing_score||"7.0",h=e.meta?._start_date,_=(()=>{switch(e.status){case"publish":return{label:"Publicado",color:c.success};case"draft":return{label:"Borrador",color:c.warning};case"private":return{label:"Privado",color:c.textMuted};default:return{label:e.status,color:c.textMuted}}})(),S=(()=>{const t=e.meta?._difficulty_level||"medium";switch(t){case"easy":return{label:"FÃ¡cil",color:"#10b981"};case"medium":return{label:"Media",color:"#f59e0b"};case"hard":return{label:"DifÃ­cil",color:"#ef4444"};default:return{label:t,color:c.textMuted}}})();return(0,C.jsxs)("div",{onClick:()=>{t(e)},style:{backgroundColor:c.bgCard,border:`1px solid ${c.border}`,borderRadius:"16px",padding:"20px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:c.shadow},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow=l?"0 8px 30px rgba(0,0,0,0.5)":"0 8px 30px rgba(0,0,0,0.12)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow=c.shadow},children:[(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"12px"},children:[(0,C.jsx)("span",{style:{fontSize:"11px",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",color:_.color},children:_.label}),(0,C.jsx)("span",{style:{fontSize:"11px",fontWeight:"500",padding:"2px 8px",borderRadius:"9999px",backgroundColor:l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:S.color},children:S.label})]}),(0,C.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",color:c.text,marginBottom:"12px",lineHeight:"1.4",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:d}),(0,C.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px",marginBottom:"16px"},children:[(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,C.jsx)(x.A,{size:14,style:{color:c.textMuted}}),(0,C.jsxs)("span",{style:{fontSize:"13px",color:c.textMuted},children:[u," ",1===u?"pregunta":"preguntas"]})]}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,C.jsx)(y.A,{size:14,style:{color:c.textMuted}}),(0,C.jsxs)("span",{style:{fontSize:"13px",color:c.textMuted},children:[p," ",1===p?"intento":"intentos"]})]}),f>0&&(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,C.jsx)(b.A,{size:14,style:{color:c.textMuted}}),(0,C.jsxs)("span",{style:{fontSize:"13px",color:c.textMuted},children:[f," min"]})]}),h&&(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,C.jsx)(v.A,{size:14,style:{color:c.textMuted}}),(0,C.jsx)("span",{style:{fontSize:"13px",color:c.textMuted},children:new Date(h).toLocaleDateString()})]})]}),(0,C.jsx)("div",{style:{padding:"8px 12px",borderRadius:"8px",backgroundColor:l?"rgba(59, 130, 246, 0.15)":"rgba(59, 130, 246, 0.1)",marginBottom:"16px"},children:(0,C.jsxs)("span",{style:{fontSize:"12px",fontWeight:"500",color:"#3b82f6"},children:["Nota mÃ­nima: ",m,"/10"]})}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",paddingTop:"12px",borderTop:`1px solid ${c.border}`},onClick:e=>e.stopPropagation(),children:[(0,C.jsx)("button",{type:"button",onClick:()=>t(e),title:"Editar",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",border:"none",backgroundColor:l?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",color:"#3b82f6",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#3b82f6",e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=l?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",e.currentTarget.style.color="#3b82f6"},children:(0,C.jsx)(j.A,{size:14})}),(0,C.jsx)("button",{type:"button",onClick:()=>a&&a(e),title:"EstadÃ­sticas",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",border:"none",backgroundColor:l?"rgba(16, 185, 129, 0.2)":"rgba(16, 185, 129, 0.1)",color:"#10b981",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#10b981",e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=l?"rgba(16, 185, 129, 0.2)":"rgba(16, 185, 129, 0.1)",e.currentTarget.style.color="#10b981"},children:(0,C.jsx)(w.A,{size:14})}),(0,C.jsx)("button",{type:"button",onClick:()=>s&&s(e),title:"Duplicar",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",border:"none",backgroundColor:c.hoverBg,color:c.textMuted,cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=c.accent,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=c.hoverBg,e.currentTarget.style.color=c.textMuted},children:(0,C.jsx)(N.A,{size:14})}),(0,C.jsx)("div",{style:{flex:1}}),(0,C.jsx)("button",{type:"button",onClick:()=>r(e),title:"Eliminar",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"8px",border:"none",backgroundColor:l?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:"#ef4444",cursor:"pointer",transition:"all 0.15s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#ef4444",e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=l?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",e.currentTarget.style.color="#ef4444"},children:(0,C.jsx)(k.A,{size:14})})]})]})};var S=r(5795),E=r(1436),A=r(8852),M=r(5708),T=r.n(M),P=r(3375),O=r(3627),z=r(4979),q=r(8766),D=r(2719),I=r(1523),L=r(9354);const R=({question:e,onRemove:t,onEdit:r,pageColors:n,isDarkMode:s})=>{const{attributes:o,listeners:a,setNodeRef:i,transform:l,transition:c}=(0,O.gl)({id:e.id}),d={transform:z.Ks.Transform.toString(l),transition:c};return(0,C.jsxs)("div",{ref:i,style:{...d,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",backgroundColor:n.inputBg,borderRadius:"8px",border:`1px solid ${n.inputBorder}`},children:[(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:0},children:[(0,C.jsx)("button",{type:"button",...o,...a,style:{cursor:"grab",color:n.textMuted,background:"none",border:"none",padding:"4px",flexShrink:0},children:(0,C.jsx)(E.A,{size:18})}),(0,C.jsx)("p",{style:{fontSize:"14px",fontWeight:"500",color:n.text,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title?.rendered||e.title})]}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexShrink:0},children:[(0,C.jsx)("button",{type:"button",onClick:()=>r(e),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:s?"rgba(59, 130, 246, 0.2)":"rgba(59, 130, 246, 0.1)",color:"#3b82f6",cursor:"pointer"},title:"Editar pregunta",children:(0,C.jsx)(j.A,{size:14})}),(0,C.jsx)("button",{type:"button",onClick:()=>t(e.id),style:{display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px",borderRadius:"6px",border:"none",backgroundColor:s?"rgba(239, 68, 68, 0.2)":"rgba(239, 68, 68, 0.1)",color:"#ef4444",cursor:"pointer"},title:"Quitar del test",children:(0,C.jsx)(k.A,{size:14})})]})]})},$=({isOpen:e,onClose:t,quizId:r,mode:s="create",onSave:o,availableCourses:l=[],availableCategories:u=[]})=>{const{getColor:p,isDarkMode:f}=(0,g.DP)(),[m,h]=(0,n.useState)(!1),[x,y]=(0,n.useState)(!1),[b,v]=(0,n.useState)(null),[j,w]=(0,n.useState)(0),[N,k]=(0,n.useState)({}),[_,E]=(0,n.useState)([]),[M,z]=(0,n.useState)(!1),[$,B]=(0,n.useState)(""),[F,U]=(0,n.useState)({isOpen:!1,mode:"create",question:null}),W=(0,P.FR)((0,P.MS)(P.AN)),{questions:H,loading:Q,fetchItems:V,createQuestion:Y,updateQuestion:K}=(0,I.T)({autoFetch:!1}),G=(0,n.useMemo)(()=>({text:f?p("textPrimary","#f9fafb"):p("primary","#1a202c"),textMuted:f?p("textSecondary","#9ca3af"):"#6b7280",accent:p("accent","#f59e0b"),primary:"#3b82f6",cardBg:f?p("secondaryBackground","#1e293b"):"#ffffff",inputBg:f?"rgba(255,255,255,0.05)":"#ffffff",inputBorder:f?"rgba(255,255,255,0.1)":"#e5e7eb",overlay:"rgba(0, 0, 0, 0.5)",success:"#10b981",danger:"#ef4444"}),[p,f]),X=(0,n.useCallback)(()=>{k({title:"",content:"",status:"publish",courseId:"",qe_category:[],difficulty_level:"medium",passing_score:"7.0",time_limit:"",max_attempts:"",randomize_questions:!1,show_results:!0,enable_negative_scoring:!1,questionIds:[],start_date:""}),E([]),z(!1),w(0),B("")},[]);(0,n.useEffect)(()=>{e&&(async()=>{if(!r||"edit"!==s&&"view"!==s)"create"===s&&X();else{h(!0),v(null),z(!1);try{const e=await(0,q.getOne)(r),t=e.meta||{},n="string"==typeof e.title?e.title:e.title?.rendered||"",s="string"==typeof e.content?e.content:e.content?.rendered||t._quiz_instructions||"";k({title:n,content:s,status:e.status||"publish",courseId:t._course_id?.toString()||"",qe_category:Array.isArray(e.qe_category)?e.qe_category.map(String):[],difficulty_level:t._difficulty_level||"medium",passing_score:t._passing_score?.toString()||"7.0",time_limit:t._time_limit?.toString()||"",max_attempts:t._max_attempts?.toString()||"",randomize_questions:t._randomize_questions||!1,show_results:void 0===t._show_results||t._show_results,enable_negative_scoring:t._enable_negative_scoring||!1,questionIds:t._quiz_question_ids||[],start_date:t._start_date||""});const o=t._quiz_question_ids||[];if(o.length>0)try{const e=await(0,D.getQuestionsByIds)(o,{batchSize:30});E(e)}catch(e){console.error("Error loading questions:",e),E([])}else E([]);z(!0)}catch(e){console.error("Error fetching quiz:",e),v("Error al cargar el test")}finally{h(!1)}}})()},[e,r,s,X]);const J=(e,t)=>{k(r=>({...r,[e]:t}))},Z=e=>{if(!_.some(t=>t.id===e.id)){const t=[..._,e];E(t),J("questionIds",t.map(e=>e.id))}},ee=e=>{const t=_.filter(t=>t.id!==e);E(t),J("questionIds",t.map(e=>e.id))},te=e=>{U({isOpen:!0,mode:"edit",question:e})},re=()=>{U({isOpen:!1,mode:"create",question:null})};if(!e)return null;const ne=[{id:0,label:"ConfiguraciÃ³n"},{id:1,label:`Preguntas (${_.length})`}],se={width:"100%",padding:"10px 12px",borderRadius:"8px",border:`2px solid ${G.inputBorder}`,backgroundColor:G.inputBg,color:G.text,fontSize:"14px",outline:"none"},oe={...se,paddingRight:"32px",appearance:"none",cursor:"pointer"},ae={display:"block",fontSize:"13px",fontWeight:"500",marginBottom:"6px",color:G.text};return(0,S.createPortal)((0,C.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:100010,display:"flex",alignItems:"flex-start",justifyContent:"center",paddingTop:"100px",backgroundColor:G.overlay,overflowY:"auto"},onClick:e=>{e.target===e.currentTarget&&t()},children:[(0,C.jsxs)("div",{style:{width:"100%",maxWidth:"800px",margin:"0 16px 40px",backgroundColor:G.cardBg,borderRadius:"16px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"20px 24px",borderBottom:`1px solid ${G.inputBorder}`},children:[(0,C.jsx)("h2",{style:{fontSize:"20px",fontWeight:"600",color:G.text},children:"create"===s?"Nuevo Test":"Editar Test"}),(0,C.jsx)("button",{type:"button",onClick:t,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"36px",height:"36px",borderRadius:"10px",border:"none",backgroundColor:f?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:G.textMuted,cursor:"pointer"},children:(0,C.jsx)(d.A,{size:20})})]}),(0,C.jsx)("div",{style:{display:"flex",gap:"8px",padding:"16px 24px",borderBottom:`1px solid ${G.inputBorder}`},children:ne.map(e=>(0,C.jsx)("button",{type:"button",onClick:()=>w(e.id),style:{padding:"10px 20px",borderRadius:"8px",border:"none",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.15s ease",backgroundColor:j===e.id?G.accent:f?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",color:j===e.id?"#ffffff":G.textMuted},children:e.label},e.id))}),(0,C.jsx)("div",{style:{padding:"24px",maxHeight:"60vh",overflowY:"auto"},children:m?(0,C.jsx)("div",{style:{textAlign:"center",padding:"40px",color:G.textMuted},children:"Cargando..."}):(0,C.jsxs)(C.Fragment,{children:[b&&(0,C.jsx)("div",{style:{padding:"12px 16px",marginBottom:"20px",borderRadius:"8px",backgroundColor:f?"rgba(239, 68, 68, 0.15)":"rgba(239, 68, 68, 0.1)",color:G.danger,fontSize:"14px"},children:b}),0===j&&(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"TÃ­tulo del Test *"}),(0,C.jsx)("input",{type:"text",value:N.title||"",onChange:e=>J("title",e.target.value),placeholder:"Ej: Examen de ConstituciÃ³n - Tema 1",style:se})]}),(0,C.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"Curso"}),(0,C.jsxs)("div",{style:{position:"relative"},children:[(0,C.jsxs)("select",{value:N.courseId||"",onChange:e=>J("courseId",e.target.value),style:oe,children:[(0,C.jsx)("option",{value:"",children:"Sin asignar"}),l.map(e=>(0,C.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,C.jsx)(c.A,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:G.textMuted}})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"CategorÃ­a"}),(0,C.jsxs)("div",{style:{position:"relative"},children:[(0,C.jsxs)("select",{value:N.qe_category?.[0]||"",onChange:e=>J("qe_category",e.target.value?[e.target.value]:[]),style:oe,children:[(0,C.jsx)("option",{value:"",children:"Sin categorÃ­a"}),u.map(e=>(0,C.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,C.jsx)(c.A,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:G.textMuted}})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"Estado"}),(0,C.jsxs)("div",{style:{position:"relative"},children:[(0,C.jsx)("select",{value:N.status||"publish",onChange:e=>J("status",e.target.value),style:oe,children:[{value:"publish",label:"Publicado"},{value:"draft",label:"Borrador"},{value:"private",label:"Privado"}].map(e=>(0,C.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,C.jsx)(c.A,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:G.textMuted}})]})]})]}),(0,C.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"Dificultad"}),(0,C.jsxs)("div",{style:{position:"relative"},children:[(0,C.jsx)("select",{value:N.difficulty_level||"medium",onChange:e=>J("difficulty_level",e.target.value),style:oe,children:[{value:"easy",label:"FÃ¡cil"},{value:"medium",label:"Media"},{value:"hard",label:"DifÃ­cil"}].map(e=>(0,C.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,C.jsx)(c.A,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:G.textMuted}})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"Nota Aprobado (0-10)"}),(0,C.jsx)("input",{type:"number",min:"0",max:"10",step:"0.1",value:N.passing_score||"",onChange:e=>J("passing_score",e.target.value),placeholder:"7.0",style:se})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"Fecha de Inicio"}),(0,C.jsx)("input",{type:"date",value:N.start_date||"",onChange:e=>J("start_date",e.target.value),style:se})]})]}),(0,C.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"16px"},children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"Tiempo LÃ­mite (minutos)"}),(0,C.jsx)("input",{type:"number",min:"0",value:N.time_limit||"",onChange:e=>J("time_limit",e.target.value),placeholder:"Sin lÃ­mite",style:se})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"MÃ¡ximo de Intentos"}),(0,C.jsx)("input",{type:"number",min:"0",value:N.max_attempts||"",onChange:e=>J("max_attempts",e.target.value),placeholder:"Sin lÃ­mite",style:se})]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{style:ae,children:"Instrucciones"}),(0,C.jsx)(T(),{theme:"snow",value:N.content||"",onChange:e=>J("content",e)})]}),(0,C.jsxs)("div",{style:{padding:"16px",borderRadius:"12px",backgroundColor:f?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`1px solid ${G.inputBorder}`},children:[(0,C.jsx)("p",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"12px",color:G.text},children:"Opciones del Test"}),(0,C.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,C.jsx)("input",{type:"checkbox",checked:N.randomize_questions||!1,onChange:e=>J("randomize_questions",e.target.checked),style:{width:"16px",height:"16px",accentColor:G.accent}}),(0,C.jsx)("span",{style:{fontSize:"14px",color:G.text},children:"Preguntas en orden aleatorio"})]})]})]}),1===j&&(0,C.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px"},children:[(0,C.jsx)("label",{style:{...ae,marginBottom:0},children:"Buscar y aÃ±adir preguntas"}),(0,C.jsxs)("button",{type:"button",onClick:()=>{U({isOpen:!0,mode:"create",question:null})},style:{display:"flex",alignItems:"center",gap:"6px",padding:"8px 14px",borderRadius:"8px",border:"none",backgroundColor:G.accent,color:"#ffffff",fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:[(0,C.jsx)(a.A,{size:14}),"Nueva Pregunta"]})]}),(0,C.jsxs)("form",{onSubmit:e=>{e?.preventDefault(),$.trim()&&V(!0,{search:$,perPage:50})},style:{display:"flex",gap:"8px"},children:[(0,C.jsx)("input",{type:"text",value:$,onChange:e=>B(e.target.value),placeholder:"Buscar preguntas por tÃ­tulo...",style:{...se,flex:1}}),(0,C.jsxs)("button",{type:"submit",disabled:Q,style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",borderRadius:"8px",border:"none",backgroundColor:G.primary,color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:[(0,C.jsx)(i.A,{size:16}),Q?"Buscando...":"Buscar"]})]})]}),H.length>0&&(0,C.jsx)("div",{style:{border:`1px solid ${G.inputBorder}`,borderRadius:"8px",maxHeight:"200px",overflowY:"auto"},children:H.map(e=>{const t=_.some(t=>t.id===e.id);return(0,C.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px 16px",borderBottom:`1px solid ${G.inputBorder}`},children:[(0,C.jsx)("p",{style:{fontSize:"14px",fontWeight:"500",color:G.text},children:e.title?.rendered||"Sin tÃ­tulo"}),(0,C.jsx)("button",{type:"button",onClick:()=>Z(e),disabled:t,style:{padding:"6px 12px",borderRadius:"9999px",border:"none",fontSize:"12px",fontWeight:"600",cursor:t?"default":"pointer",backgroundColor:t?f?"rgba(255,255,255,0.1)":"#e5e7eb":f?"rgba(16, 185, 129, 0.2)":"rgba(16, 185, 129, 0.1)",color:t?G.textMuted:G.success},children:t?"AÃ±adida":"AÃ±adir"})]},e.id)})}),(0,C.jsxs)("div",{children:[(0,C.jsxs)("label",{style:{...ae,marginBottom:"12px"},children:["Preguntas del Test (",_.length,")"]}),_.length>0?(0,C.jsx)(P.Mp,{sensors:W,collisionDetection:P.fp,onDragEnd:e=>{const{active:t,over:r}=e;if(r&&t.id!==r.id){const e=_.findIndex(e=>e.id===t.id),n=_.findIndex(e=>e.id===r.id);if(-1!==e&&-1!==n){const t=(0,O.be)(_,e,n);E(t),J("questionIds",t.map(e=>e.id))}}},children:(0,C.jsx)(O.gB,{items:_.map(e=>e.id),strategy:O._G,children:(0,C.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:_.map(e=>(0,C.jsx)(R,{question:e,onRemove:ee,onEdit:te,pageColors:G,isDarkMode:f},e.id))})})}):(0,C.jsx)("div",{style:{padding:"32px",textAlign:"center",borderRadius:"8px",backgroundColor:f?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`1px dashed ${G.inputBorder}`},children:(0,C.jsx)("p",{style:{color:G.textMuted,fontSize:"14px"},children:"No hay preguntas asignadas. Usa el buscador o crea una nueva pregunta."})})]})]})]})}),(0,C.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"12px",padding:"20px 24px",borderTop:`1px solid ${G.inputBorder}`,backgroundColor:G.cardBg},children:[(0,C.jsx)("button",{type:"button",onClick:t,disabled:x,style:{padding:"10px 20px",borderRadius:"8px",border:`1px solid ${G.inputBorder}`,backgroundColor:G.inputBg,color:G.text,fontSize:"14px",fontWeight:"500",cursor:"pointer"},children:"Cancelar"}),(0,C.jsxs)("button",{type:"button",onClick:async()=>{if(!N.title?.trim())return v("El tÃ­tulo es obligatorio"),void w(0);y(!0),v(null);try{const e={_difficulty_level:N.difficulty_level,_passing_score:N.passing_score,_time_limit:""===N.time_limit?0:parseInt(N.time_limit,10),_max_attempts:""===N.max_attempts?0:parseInt(N.max_attempts,10),_randomize_questions:N.randomize_questions,_show_results:N.show_results,_enable_negative_scoring:N.enable_negative_scoring,_quiz_question_ids:N.questionIds,_start_date:N.start_date||""};N.courseId&&""!==N.courseId&&"0"!==N.courseId&&(e._course_id=N.courseId);const r={title:N.title,content:N.content,status:N.status,meta:e,qe_category:N.qe_category.map(e=>parseInt(e,10)).filter(e=>!isNaN(e)&&e>0)};await o(r),t()}catch(e){v(e.message||"Error al guardar el test")}finally{y(!1)}},disabled:x,style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 20px",borderRadius:"8px",border:"none",backgroundColor:G.primary,color:"#ffffff",fontSize:"14px",fontWeight:"500",cursor:x?"not-allowed":"pointer",opacity:x?.7:1},children:[(0,C.jsx)(A.A,{size:16}),x?"Guardando...":"create"===s?"Crear Test":"Guardar Cambios"]})]})]}),(0,C.jsx)(L.A,{isOpen:F.isOpen,onClose:re,mode:F.mode,question:F.question,onSave:async(e,t)=>{try{if("create"===F.mode){const r=await Y(e);r&&Z(r),"reset"!==t&&re()}else{const t=await K(F.question?.id,e);t&&E(e=>e.map(e=>e.id===t.id?t:e)),re()}}catch(e){throw console.error("Error saving question:",e),e}},availableLessons:[],availableQuizzes:[],availableCourses:l.map(e=>({id:e.value,title:e.label})),parentQuizId:r})]}),document.body)},B=()=>{const{t:e}=(0,s.Bd)(),{getColor:t,isDarkMode:r}=(0,g.DP)(),[x,y]=(0,n.useState)({isOpen:!1,mode:"create",quizId:null}),[b,v]=(0,n.useState)(!1),j=(0,f.A)({autoFetch:!0,perPage:24,debounceMs:300}),w=(0,m.A)({autoFetch:!1,status:"publish,draft,private"}),{options:N,isLoading:k}=(0,h.h)(["qe_category"]);(0,n.useEffect)(()=>{0!==w.courses.length||w.loading||w.fetchCourses(!0,{perPage:100})},[]);const S=(0,n.useMemo)(()=>N.qe_category||[],[N.qe_category]),E=(0,n.useMemo)(()=>(w.courses||[]).map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),[w.courses]),A=()=>{y({isOpen:!0,mode:"create",quizId:null})},M=e=>{y({isOpen:!0,mode:"edit",quizId:e.id})},T=()=>{y({isOpen:!1,mode:"create",quizId:null})},P=async t=>{const r=t.title?.rendered||t.title;if(window.confirm(e("admin.tests.deleteConfirm",{title:r})))try{await j.deleteQuiz(t.id),p.oR.success(e("admin.tests.deleteSuccess")),j.refresh()}catch(t){console.error("Error deleting quiz:",t),p.oR.error(e("errors.saveQuiz"))}},O=async t=>{p.oR.info(e("admin.tests.duplicateComingSoon"))},z=t=>{p.oR.info(e("admin.tests.statsComingSoon"))},q=(0,n.useMemo)(()=>({text:r?t("textPrimary","#f9fafb"):t("primary","#1a202c"),textMuted:r?t("textSecondary","#9ca3af"):"#6b7280",accent:t("accent","#f59e0b"),primary:t("primary","#3b82f6"),background:r?t("background","#0f172a"):"#f5f7fa",bgCard:r?t("secondaryBackground","#1f2937"):"#ffffff",border:r?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",shadow:r?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",inputBg:r?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:r?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)"}),[t,r]);if(!j.filters||!j.pagination)return(0,C.jsx)("div",{className:"flex items-center justify-center h-full",style:{backgroundColor:q.background},children:(0,C.jsx)(o.A,{className:"w-8 h-8 animate-spin",style:{color:q.accent}})});const D=j.pagination?.total||0,I=[j.filters?.category&&"all"!==j.filters.category,j.filters?.courseId&&"all"!==j.filters.courseId].filter(Boolean).length;return(0,C.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",style:{backgroundColor:q.background},children:[(0,C.jsxs)("div",{className:"flex-shrink-0 px-6 py-4",style:{backgroundColor:q.bgCard,borderBottom:`1px solid ${q.border}`},children:[(0,C.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("h1",{className:"text-2xl font-bold",style:{color:q.text},children:e("admin.tests.title")}),(0,C.jsx)("p",{className:"text-sm mt-0.5",style:{color:q.textMuted},children:e("admin.tests.total",{count:D})})]}),(0,C.jsxs)("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium text-white transition-all hover:opacity-90",style:{backgroundColor:q.accent},children:[(0,C.jsx)(a.A,{size:18}),e("admin.tests.newTest")]})]}),(0,C.jsxs)("div",{className:"flex items-center gap-3",children:[(0,C.jsxs)("div",{className:"flex-1 relative",children:[(0,C.jsx)(i.A,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:q.textMuted}}),(0,C.jsx)("input",{type:"text",value:j.filters?.search||"",onChange:e=>j.updateFilter("search",e.target.value),placeholder:e("admin.tests.searchPlaceholder"),className:"w-full pl-10 pr-4 py-2.5 rounded-xl text-sm transition-colors",style:{backgroundColor:q.inputBg,border:`1px solid ${q.border}`,color:q.text}}),j.loading&&(0,C.jsx)(o.A,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin",style:{color:q.textMuted}})]}),(0,C.jsxs)("button",{onClick:()=>v(!b),className:"flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-colors",style:{backgroundColor:b||I>0?r?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)":q.inputBg,border:`1px solid ${b||I>0?q.accent:q.border}`,color:b||I>0?q.accent:q.text},children:[(0,C.jsx)(l.A,{size:16}),e("admin.tests.filters"),I>0&&(0,C.jsx)("span",{className:"w-5 h-5 rounded-full text-xs font-bold flex items-center justify-center text-white",style:{backgroundColor:q.accent},children:I}),(0,C.jsx)(c.A,{size:14,className:"transition-transform "+(b?"rotate-180":"")})]})]}),b&&(0,C.jsxs)("div",{className:"mt-4 pt-4 grid grid-cols-1 md:grid-cols-2 gap-4",style:{borderTop:`1px solid ${q.border}`},children:[(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:q.textMuted},children:e("admin.tests.course")}),(0,C.jsxs)("select",{value:j.filters?.courseId||"all",onChange:e=>j.updateFilter("courseId",e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:q.inputBg,border:`1px solid ${q.border}`,color:q.text},children:[(0,C.jsx)("option",{value:"all",children:e("admin.tests.allCourses")}),E.map(e=>(0,C.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,C.jsxs)("div",{children:[(0,C.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:q.textMuted},children:e("admin.tests.category")}),(0,C.jsxs)("select",{value:j.filters?.category||"all",onChange:e=>j.updateFilter("category",e.target.value),className:"w-full px-3 py-2 rounded-lg text-sm",style:{backgroundColor:q.inputBg,border:`1px solid ${q.border}`,color:q.text},children:[(0,C.jsx)("option",{value:"all",children:e("admin.tests.allCategories")}),S.filter(e=>"all"!==e.value).map(e=>(0,C.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),I>0&&(0,C.jsx)("div",{className:"md:col-span-2 flex justify-end",children:(0,C.jsxs)("button",{onClick:()=>{j.updateFilter("category","all"),j.updateFilter("courseId","all")},className:"flex items-center gap-1 text-sm",style:{color:q.accent},children:[(0,C.jsx)(d.A,{size:14}),e("admin.tests.clearFilters")]})})]})]}),(0,C.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:0===j.quizzes.length?(0,C.jsxs)("div",{className:"flex flex-col items-center justify-center h-full rounded-2xl",style:{backgroundColor:q.bgCard,border:`1px solid ${q.border}`},children:[(0,C.jsx)("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mb-4",style:{backgroundColor:q.hoverBg},children:(0,C.jsx)(u.A,{className:"w-10 h-10",style:{color:q.textMuted,opacity:.5}})}),(0,C.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:q.text},children:e("admin.tests.noTests")}),(0,C.jsx)("p",{className:"text-sm mb-6",style:{color:q.textMuted},children:j.filters?.search?e("common.noResults"):e("admin.tests.noTestsDescription")}),!j.filters?.search&&(0,C.jsxs)("button",{onClick:A,className:"flex items-center gap-2 px-4 py-2 rounded-xl font-medium text-white",style:{backgroundColor:q.accent},children:[(0,C.jsx)(a.A,{size:18}),e("admin.tests.newTest")]})]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))"},children:j.quizzes.map(e=>(0,C.jsx)(_,{quiz:e,onEdit:M,onDelete:P,onDuplicate:O,onStats:z},e.id))}),j.hasMore&&(0,C.jsx)("div",{className:"flex justify-center mt-6",children:(0,C.jsx)("button",{onClick:()=>j.loadMoreQuizzes(),disabled:j.loading,className:"px-6 py-2.5 rounded-xl font-medium transition-colors",style:{backgroundColor:q.inputBg,border:`1px solid ${q.border}`,color:q.text},children:j.loading?e("common.loading"):e("admin.tests.loadMore")})})]})}),(0,C.jsx)($,{isOpen:x.isOpen,onClose:T,quizId:x.quizId,mode:x.mode,onSave:async t=>{try{if("create"===x.mode){const r=await j.createQuiz(t);p.oR.success(e("admin.tests.createSuccess")),y({isOpen:!0,mode:"edit",quizId:r.id})}else await j.updateQuiz(x.quizId,t),p.oR.success(e("admin.tests.updateSuccess")),T();j.refresh()}catch(t){throw console.error("Error saving quiz:",t),p.oR.error(e("errors.saveQuiz")),t}},availableCourses:E,availableCategories:S.filter(e=>"all"!==e.value)})]})}},7730:(e,t,r)=>{var n=r(9172),s=r(7301),o=r(6009),a=o&&o.isMap,i=a?s(a):n;e.exports=i},7774:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]])},7775:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},7797:(e,t,r)=>{var n=r(4394);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},7804:(e,t,r)=>{"use strict";r.d(t,{q:()=>s});var n=r(1609);const s=({service:e,resourceName:t="resource",initialFilters:r={},debounceMs:s=500,autoFetch:o=!0,perPage:a=20,dataProcessor:i=null,computedValuesCalculator:l=null})=>{const[c,d]=(0,n.useState)([]),[u,p]=(0,n.useState)(!1),[f,m]=(0,n.useState)(!1),[h,g]=(0,n.useState)(!1),[x,y]=(0,n.useState)(!1),[b,v]=(0,n.useState)(null),[j,w]=(0,n.useState)({currentPage:1,totalPages:1,total:0,perPage:a,hasMore:!1}),[N,k]=(0,n.useState)({search:"",...r}),C=(0,n.useRef)(null),_=(0,n.useRef)(!0),S=(0,n.useRef)(""),E=(0,n.useRef)(!0),A=JSON.stringify(r);(0,n.useEffect)(()=>{E.current||k({search:"",...r})},[A]),(0,n.useEffect)(()=>(_.current=!0,()=>{_.current=!1,C.current&&clearTimeout(C.current)}),[]);const M=(0,n.useCallback)(async(r=!1,n={})=>{try{if(!e||!e.getAll)return void console.error(`âŒ ${t}: Invalid service provided`);const s=n.perPage||j.perPage,o={...N,...n},l=JSON.stringify({reset:r,filters:o,page:j.currentPage});if(l===S.current&&!r)return void console.log(`â­ï¸ ${t}: Skipping duplicate fetch`);S.current=l,r&&p(!0),v(null);const c=r?1:j.currentPage,u={};Object.keys(o).forEach(e=>{const t=o[e];t&&"all"!==t&&""!==t&&(u[e]=t)}),console.log(`ðŸ”„ Fetching ${t}s:`,{page:c,perPage:a,filters:u});const f=await e.getAll({...u,page:c,perPage:s});if(!_.current)return;let m=f.data||[];i&&"function"==typeof i&&(m=m.map(i)),d(r?m:e=>[...e,...m]),w(e=>({...e,currentPage:r?1:c,totalPages:f.pagination?.totalPages||1,total:f.pagination?.total||0,hasMore:f.pagination?.currentPage<f.pagination?.totalPages})),console.log(`âœ… ${t}s fetched:`,{count:m.length,total:f.pagination?.total||0})}catch(e){if(!_.current)return;console.error(`âŒ Error fetching ${t}s:`,e),v(e.message||`Failed to fetch ${t}s`)}finally{_.current&&p(!1)}},[e,t,N,j.currentPage,j.perPage,i]),T=(0,n.useCallback)(()=>{j.hasMore&&!u&&w(e=>({...e,currentPage:e.currentPage+1}))},[j.hasMore,u]),P=(0,n.useCallback)(async r=>{try{m(!0),v(null),console.log(`ðŸ“ Creating ${t}:`,r);const n=await e.create(r);if(!_.current)return null;const s=await e.getOne(n.id);if(!_.current)return null;const o=i?i(s):s;return d(e=>[o,...e]),w(e=>({...e,total:e.total+1})),console.log(`âœ… ${t} created with full data:`,o.id),o}catch(e){if(!_.current)return null;throw console.error(`âŒ Error creating ${t}:`,e),v(e.message||`Failed to create ${t}`),e}finally{_.current&&m(!1)}},[e,t,i]),O=(0,n.useCallback)(async(r,n)=>{try{if(g(!0),v(null),console.log(`âœï¸ Updating ${t} ${r}:`,n),await e.update(r,n),!_.current)return null;const s=await e.getOne(r);if(!_.current)return null;const o=i?i(s):s;return d(e=>e.map(e=>e.id===r?o:e)),console.log(`âœ… ${t} ${r} updated with full data`),o}catch(e){if(!_.current)return null;throw console.error(`âŒ Error updating ${t} ${r}:`,e),v(e.message||`Failed to update ${t}`),e}finally{_.current&&g(!1)}},[e,t,i]),z=(0,n.useCallback)(async(r,n={})=>{try{if(y(!0),v(null),console.log(`ðŸ—‘ï¸ Deleting ${t} ${r}`),await e.delete(r,n),!_.current)return;d(e=>e.filter(e=>e.id!==r)),w(e=>({...e,total:Math.max(0,e.total-1)})),console.log(`âœ… ${t} ${r} deleted`)}catch(e){if(!_.current)return;throw console.error(`âŒ Error deleting ${t} ${r}:`,e),v(e.message||`Failed to delete ${t}`),e}finally{_.current&&y(!1)}},[e,t]),q=(0,n.useCallback)(async r=>{try{m(!0),v(null),console.log(`ðŸ“‹ Duplicating ${t} ${r}`);const n=c.find(e=>e.id===r);if(!n)throw new Error(`${t} not found`);let s;if(e.duplicate)s=await e.duplicate(r);else{const t={...n,title:`${n.title||"Untitled"} (Copy)`,status:"draft"};delete t.id,delete t.date,delete t.modified,s=await e.create(t)}if(!_.current)return null;const o=i?i(s):s;return d(e=>[o,...e]),w(e=>({...e,total:e.total+1})),console.log(`âœ… ${t} ${r} duplicated:`,o.id),o}catch(e){if(!_.current)return null;throw console.error(`âŒ Error duplicating ${t} ${r}:`,e),v(e.message||`Failed to duplicate ${t}`),e}finally{_.current&&m(!1)}},[e,t,c,i]),D=(0,n.useCallback)((e,t)=>{k(r=>({...r,[e]:t}))},[]),I=(0,n.useCallback)(()=>{k({search:"",...r})},[r]),L=(0,n.useCallback)(()=>{S.current="",M(!0)},[M]);(0,n.useEffect)(()=>{if(o||!E.current)return E.current=!1,C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{M(!0)},s),()=>{C.current&&clearTimeout(C.current)};E.current=!1},[N,o,s,M]),(0,n.useEffect)(()=>{j.currentPage>1&&M(!1)},[j.currentPage]);const R=(0,n.useMemo)(()=>l&&"function"==typeof l?l(c):{total:c.length,published:c.filter(e=>"publish"===e.status).length,draft:c.filter(e=>"draft"===e.status).length,private:c.filter(e=>"private"===e.status).length},[c,l]);return{items:c,loading:u,creating:f,updating:h,deleting:x,error:b,pagination:j,computed:R,filters:N,updateFilter:D,resetFilters:I,setFilters:k,fetchItems:M,loadMore:T,createItem:P,updateItem:O,deleteItem:z,duplicateItem:q,refresh:L,hasMore:j.hasMore}}},7828:(e,t,r)=>{var n=r(9325).Uint8Array;e.exports=n},7861:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(717),s=r(3844);t.matches=function(e){return e=s.cloneDeep(e),t=>n.isMatch(t,e)}},7872:function(e){e.exports=function(){"use strict";return function(e,t,r){t.prototype.isBetween=function(e,t,n,s){var o=r(e),a=r(t),i="("===(s=s||"()")[0],l=")"===s[1];return(i?this.isAfter(o,n):!this.isBefore(o,n))&&(l?this.isBefore(a,n):!this.isAfter(a,n))||(i?this.isBefore(o,n):!this.isAfter(o,n))&&(l?this.isAfter(a,n):!this.isBefore(a,n))}}}()},7946:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},7978:(e,t,r)=>{var n=r(270),s=r(8156),o=r(631),a=r(8586),i=r(756),l=r(7197),c=r(7797);e.exports=function(e,t){return a(e)&&i(t)?l(c(e),t):function(r){var a=s(r,e);return void 0===a&&a===t?o(r,e):n(t,a,3)}}},8004:(e,t,r)=>{"use strict";r.d(t,{I:()=>n});const n=(e={})=>{const{title:t="Seleccionar o subir archivo",buttonText:r="Usar este archivo",multiple:n=!1,type:s="image"}=e;return new Promise((e,o)=>{if("undefined"==typeof wp||!wp.media)return void o(new Error("La librerÃ­a de medios de WordPress no estÃ¡ disponible."));let a=!1,i=null;const l=wp.media({title:t,button:{text:r},multiple:n,library:{type:s}});l.on("select",()=>{a=!0;try{const t=l.state().get("selection").first().toJSON();i={id:t.id,url:t.url,filename:t.filename,title:t.title,caption:t.caption,alt:t.alt,description:t.description,mime:t.mime,type:t.type,subtype:t.subtype,width:t.width,height:t.height,sizes:t.sizes||{}},e(i)}catch(e){o(e)}}),l.on("close",()=>{setTimeout(()=>{a||e(null)},100)}),l.open()})}},8077:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8090:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},8096:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},8156:(e,t,r)=>{var n=r(7422);e.exports=function(e,t,r){var s=null==e?void 0:n(e,t);return void 0===s?r:s}},8161:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(58),s=r(1846);t.isArrayLikeObject=function(e){return s.isObjectLike(e)&&n.isArrayLike(e)}},8193:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},8202:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(6440),s=r(3403),o=r(7861),a=r(3036);t.iteratee=function(e){if(null==e)return n.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?a.matchesProperty(e[0],e[1]):o.matches(e);case"string":case"symbol":case"number":return s.property(e)}}},8223:(e,t,r)=>{var n=r(3729)(r(9325),"Map");e.exports=n},8243:(e,t,r)=>{"use strict";r.d(t,{E5:()=>p,EJ:()=>w,KJ:()=>f,Kf:()=>x,Nc:()=>N,Rz:()=>d,Yq:()=>v,ZH:()=>j,ee:()=>i,i8:()=>b,iV:()=>u,j4:()=>c,kM:()=>l,o5:()=>a,se:()=>m,vQ:()=>k,w3:()=>g,wb:()=>y,xV:()=>o,zi:()=>h});const n=["publish","draft","private","pending","future","trash"],s={true:["true","yes","1",1,!0],false:["false","no","0",0,!1,"",null,void 0]},o=(e,t="")=>null==e?t:(e=>{if("string"!=typeof e)return e;const t=document.createElement("textarea");return t.innerHTML=e,t.value})(String(e).trim()),a=(e,t=0,r=0)=>{const n=parseInt(e);return isNaN(n)||n<r?t:n},i=(e,t=1)=>{if(""===e||null==e)return null;const r=parseInt(e);return isNaN(r)||r<t?null:r},l=(e,t=!1)=>!!s.true.includes(e)||!s.false.includes(e)&&t,c=e=>((e,t=0,r=2,n=0)=>{const s=parseFloat(e);return isNaN(s)||s<n?t:Math.round(s*Math.pow(10,r))/Math.pow(10,r)})(e,0,2,0),d=e=>((e,t=2,r=.01)=>{if(""===e||null==e)return null;const n=parseFloat(e);return isNaN(n)||n<r?null:Math.round(n*Math.pow(10,t))/Math.pow(10,t)})(e,2,.01),u=e=>{if(!e||""===e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e)){const t=new Date(e);if(!isNaN(t.getTime()))return e}const t=new Date(e);return isNaN(t.getTime())?"":t.toISOString().split("T")[0]},p=e=>Array.isArray(e)?e.map(e=>parseInt(e)).filter(e=>!isNaN(e)&&e>0):[],f=e=>{if(!e)return[];if(Array.isArray(e))return p(e);const t=parseInt(e);return!isNaN(t)&&t>0?[t]:[]},m=(e,t="draft")=>{const r=o(e,t).toLowerCase();return n.includes(r)?r:t},h=(e,t,r)=>{const n=o(e,r).toLowerCase();return t.includes(n)?n:r},g=e=>{if(!e)return"";if("object"==typeof e&&null!==e){const t=e.rendered||e.raw||"";return o(t)}return o(e)},x=(e,t)=>null==e||""===e?`${t} is required`:null,y=(e,t)=>{if(!e||!t)return null;const r=new Date(e),n=new Date(t);return isNaN(r.getTime())||isNaN(n.getTime())?"Invalid date format":r>=n?"End date must be after start date":null},b=(e,t,r,n)=>{const s=parseFloat(e);return isNaN(s)?`${n} must be a valid number`:s<t||s>r?`${n} must be between ${t} and ${r}`:null},v=(e,t="en-US")=>{if(!e)return"";const r=new Date(e);return isNaN(r.getTime())?"":r.toLocaleDateString(t)},j=e=>{const t=o(e);return t?t.charAt(0).toUpperCase()+t.slice(1):""},w=(e,t,r="...")=>{const n=o(e);return n.length<=t?n:n.substring(0,t)+r},N=e=>{const t=e._embedded?.["wp:featuredmedia"]?.[0];return t&&(t.source_url||t.media_details?.sizes?.medium?.source_url||t.media_details?.sizes?.thumbnail?.source_url)||""},k=(e=[])=>({isValid:0===e.length,errors:e})},8245:(e,t,r)=>{"use strict";r.d(t,{nJ:()=>s,o7:()=>n});const n=async(e,t={})=>{try{const r=(()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.api_url)throw new Error("API URL not configured in WordPress");return e})(),{title:n=e.name,alt_text:s="",caption:o="",onProgress:a=null}=t;console.log("ðŸ“¤ Uploading media:",e.name,`(${(e.size/1024).toFixed(2)} KB)`);const i=new FormData;i.append("file",e),n&&i.append("title",n),s&&i.append("alt_text",s),o&&i.append("caption",o);const l=new XMLHttpRequest,c=new Promise((e,t)=>{a&&l.upload.addEventListener("progress",e=>{if(e.lengthComputable){const t=Math.round(e.loaded/e.total*100);a(t)}}),l.addEventListener("load",()=>{if(l.status>=200&&l.status<300)try{const t=JSON.parse(l.responseText);console.log("âœ… Media uploaded successfully:",t.id),e(t)}catch(e){t(new Error("Failed to parse upload response"))}else t(new Error(`Upload failed with status ${l.status}: ${l.statusText}`))}),l.addEventListener("error",()=>{t(new Error("Network error during upload"))}),l.addEventListener("abort",()=>{t(new Error("Upload cancelled"))}),l.open("POST",`${r.api_url}/wp/v2/media`),l.setRequestHeader("X-WP-Nonce",r.nonce),l.send(i)}),d=await c;return{id:d.id,url:d.source_url,title:d.title?.rendered||d.title,alt:d.alt_text||"",caption:d.caption?.rendered||d.caption,mediaDetails:d.media_details,mimeType:d.mime_type}}catch(e){throw console.error("âŒ Error uploading media:",e),e}},s=(e,t={})=>{const{maxSize:r=5242880,allowedTypes:n=["image/jpeg","image/jpg","image/png","image/gif","image/webp"]}=t;return e?e.size>r?{isValid:!1,error:`File size exceeds ${(r/1048576).toFixed(2)}MB limit`}:n.includes(e.type)?{isValid:!0}:{isValid:!1,error:`File type ${e.type} is not allowed. Allowed types: ${n.join(", ")}`}:{isValid:!1,error:"No file provided"}}},8273:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(4905),s=r(2520),o=r(6761);function a(e,t,r,c){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,n){if(null==t)return!0;if(Array.isArray(t))return i(e,t,r,n);if(t instanceof Map)return function(e,t,r,n){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[s,o]of t.entries())if(!1===r(e.get(s),o,s,e,t,n))return!1;return!0}(e,t,r,n);if(t instanceof Set)return l(e,t,r,n);const o=Object.keys(t);if(null==e)return 0===o.length;if(0===o.length)return!0;if(n?.has(t))return n.get(t)===e;n?.set(t,e);try{for(let a=0;a<o.length;a++){const i=o[a];if(!s.isPrimitive(e)&&!(i in e))return!1;if(void 0===t[i]&&void 0!==e[i])return!1;if(null===t[i]&&null!==e[i])return!1;if(!r(e[i],t[i],i,e,t,n))return!1}return!0}finally{n?.delete(t)}}(e,t,r,c);case"function":return Object.keys(t).length>0?a(e,{...t},r,c):o.eq(e,t);default:return n.isObject(e)?"string"!=typeof t||""===t:o.eq(e,t)}}function i(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const s=new Set;for(let o=0;o<t.length;o++){const a=t[o];let i=!1;for(let l=0;l<e.length;l++){if(s.has(l))continue;let c=!1;if(r(e[l],a,o,e,t,n)&&(c=!0),c){s.add(l),i=!0;break}}if(!i)return!1}return!0}function l(e,t,r,n){return 0===t.size||e instanceof Set&&i([...e],[...t],r,n)}t.isMatchWith=function e(t,r,n){return"function"!=typeof n?e(t,r,()=>{}):a(t,r,function e(t,r,s,o,i,l){const c=n(t,r,s,o,i,l);return void 0!==c?Boolean(c):a(t,r,e,l)},new Map)},t.isSetMatch=l},8303:(e,t,r)=>{var n=r(3729)(r(9325),"WeakMap");e.exports=n},8309:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},8329:(e,t,r)=>{var n=r(4894);e.exports=function(e,t){return function(r,s){if(null==r)return r;if(!n(r))return e(r,s);for(var o=r.length,a=t?o:-1,i=Object(r);(t?a--:++a<o)&&!1!==s(i[a],a,i););return r}}},8351:function(e,t,r){var n;!function(){"use strict";var s,o=1e9,a={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},i=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,p=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,h=u(1286742750677284.5),g={};function x(e,t){var r,n,s,o,a,l,c,d,u=e.constructor,p=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),i?S(t,p):t;if(c=e.d,d=t.d,a=e.e,s=t.e,c=c.slice(),o=a-s){for(o<0?(n=c,o=-o,l=d.length):(n=d,s=a,l=c.length),o>(l=(a=Math.ceil(p/7))>l?a+1:l+1)&&(o=l,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for((l=c.length)-(o=d.length)<0&&(o=l,n=d,d=c,c=n),r=0;o;)r=(c[--o]=c[o]+d[o]+r)/m|0,c[o]%=m;for(r&&(c.unshift(r),++s),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=s,i?S(t,p):t}function y(e,t,r){if(e!==~~e||e<t||e>r)throw Error(c+e)}function b(e){var t,r,n,s=e.length-1,o="",a=e[0];if(s>0){for(o+=a,t=1;t<s;t++)(r=7-(n=e[t]+"").length)&&(o+=k(r)),o+=n;(r=7-(n=(a=e[t])+"").length)&&(o+=k(r))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}g.absoluteValue=g.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},g.comparedTo=g.cmp=function(e){var t,r,n,s,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,r=(n=o.d.length)<(s=e.d.length)?n:s;t<r;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return n===s?0:n>s^o.s<0?1:-1},g.decimalPlaces=g.dp=function(){var e=this,t=e.d.length-1,r=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)r--;return r<0?0:r},g.dividedBy=g.div=function(e){return v(this,new this.constructor(e))},g.dividedToIntegerBy=g.idiv=function(e){var t=this.constructor;return S(v(this,new t(e),0,1),t.precision)},g.equals=g.eq=function(e){return!this.cmp(e)},g.exponent=function(){return w(this)},g.greaterThan=g.gt=function(e){return this.cmp(e)>0},g.greaterThanOrEqualTo=g.gte=function(e){return this.cmp(e)>=0},g.isInteger=g.isint=function(){return this.e>this.d.length-2},g.isNegative=g.isneg=function(){return this.s<0},g.isPositive=g.ispos=function(){return this.s>0},g.isZero=function(){return 0===this.s},g.lessThan=g.lt=function(e){return this.cmp(e)<0},g.lessThanOrEqualTo=g.lte=function(e){return this.cmp(e)<1},g.logarithm=g.log=function(e){var t,r=this,n=r.constructor,o=n.precision,a=o+5;if(void 0===e)e=new n(10);else if((e=new n(e)).s<1||e.eq(s))throw Error(l+"NaN");if(r.s<1)throw Error(l+(r.s?"NaN":"-Infinity"));return r.eq(s)?new n(0):(i=!1,t=v(C(r,a),C(e,a),a),i=!0,S(t,o))},g.minus=g.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?E(t,e):x(t,(e.s=-e.s,e))},g.modulo=g.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(!(e=new n(e)).s)throw Error(l+"NaN");return r.s?(i=!1,t=v(r,e,0,1).times(e),i=!0,r.minus(t)):S(new n(r),s)},g.naturalExponential=g.exp=function(){return j(this)},g.naturalLogarithm=g.ln=function(){return C(this)},g.negated=g.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},g.plus=g.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x(t,e):E(t,(e.s=-e.s,e))},g.precision=g.sd=function(e){var t,r,n,s=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=w(s)+1,r=7*(n=s.d.length-1)+1,n=s.d[n]){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},g.squareRoot=g.sqrt=function(){var e,t,r,n,s,o,a,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=w(c),i=!1,0==(s=Math.sqrt(+c))||s==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),n=new d(t=s==1/0?"5e"+e:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new d(s.toString()),s=a=(r=d.precision)+3;;)if(n=(o=n).plus(v(c,o,a+2)).times(.5),b(o.d).slice(0,a)===(t=b(n.d)).slice(0,a)){if(t=t.slice(a-3,a+1),s==a&&"4999"==t){if(S(o,r+1,0),o.times(o).eq(c)){n=o;break}}else if("9999"!=t)break;a+=4}return i=!0,S(n,r)},g.times=g.mul=function(e){var t,r,n,s,o,a,l,c,d,u=this,p=u.constructor,f=u.d,h=(e=new p(e)).d;if(!u.s||!e.s)return new p(0);for(e.s*=u.s,r=u.e+e.e,(c=f.length)<(d=h.length)&&(o=f,f=h,h=o,a=c,c=d,d=a),o=[],n=a=c+d;n--;)o.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=o[s]+h[n]*f[s-n-1]+t,o[s--]=l%m|0,t=l/m|0;o[s]=(o[s]+t)%m|0}for(;!o[--a];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,i?S(e,p.precision):e},g.toDecimalPlaces=g.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),void 0===e?r:(y(e,0,o),void 0===t?t=n.rounding:y(t,0,8),S(r,e+w(r)+1,t))},g.toExponential=function(e,t){var r,n=this,s=n.constructor;return void 0===e?r=A(n,!0):(y(e,0,o),void 0===t?t=s.rounding:y(t,0,8),r=A(n=S(new s(n),e+1,t),!0,e+1)),r},g.toFixed=function(e,t){var r,n,s=this,a=s.constructor;return void 0===e?A(s):(y(e,0,o),void 0===t?t=a.rounding:y(t,0,8),r=A((n=S(new a(s),e+w(s)+1,t)).abs(),!1,e+w(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)},g.toInteger=g.toint=function(){var e=this,t=e.constructor;return S(new t(e),w(e)+1,t.rounding)},g.toNumber=function(){return+this},g.toPower=g.pow=function(e){var t,r,n,o,a,c,d=this,p=d.constructor,f=+(e=new p(e));if(!e.s)return new p(s);if(!(d=new p(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(s))return d;if(n=p.precision,e.eq(s))return S(d,n);if(c=(t=e.e)>=(r=e.d.length-1),a=d.s,c){if((r=f<0?-f:f)<=9007199254740991){for(o=new p(s),t=Math.ceil(n/7+4),i=!1;r%2&&M((o=o.times(d)).d,t),0!==(r=u(r/2));)M((d=d.times(d)).d,t);return i=!0,e.s<0?new p(s).div(o):S(o,n)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&e.d[Math.max(t,r)]?-1:1,d.s=1,i=!1,o=e.times(C(d,n+12)),i=!0,(o=j(o)).s=a,o},g.toPrecision=function(e,t){var r,n,s=this,a=s.constructor;return void 0===e?n=A(s,(r=w(s))<=a.toExpNeg||r>=a.toExpPos):(y(e,1,o),void 0===t?t=a.rounding:y(t,0,8),n=A(s=S(new a(s),e,t),e<=(r=w(s))||r<=a.toExpNeg,e)),n},g.toSignificantDigits=g.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(y(e,1,o),void 0===t?t=r.rounding:y(t,0,8)),S(new r(this),e,t)},g.toString=g.valueOf=g.val=g.toJSON=function(){var e=this,t=w(e),r=e.constructor;return A(e,t<=r.toExpNeg||t>=r.toExpPos)};var v=function(){function e(e,t){var r,n=0,s=e.length;for(e=e.slice();s--;)r=e[s]*t+n,e[s]=r%m|0,n=r/m|0;return n&&e.unshift(n),e}function t(e,t,r,n){var s,o;if(r!=n)o=r>n?1:-1;else for(s=o=0;s<r;s++)if(e[s]!=t[s]){o=e[s]>t[s]?1:-1;break}return o}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*m+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,s,o,a){var i,c,d,u,p,f,h,g,x,y,b,v,j,N,k,C,_,E,A=n.constructor,M=n.s==s.s?1:-1,T=n.d,P=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(l+"Division by zero");for(c=n.e-s.e,_=P.length,k=T.length,g=(h=new A(M)).d=[],d=0;P[d]==(T[d]||0);)++d;if(P[d]>(T[d]||0)&&--c,(v=null==o?o=A.precision:a?o+(w(n)-w(s))+1:o)<0)return new A(0);if(v=v/7+2|0,d=0,1==_)for(u=0,P=P[0],v++;(d<k||u)&&v--;d++)j=u*m+(T[d]||0),g[d]=j/P|0,u=j%P|0;else{for((u=m/(P[0]+1)|0)>1&&(P=e(P,u),T=e(T,u),_=P.length,k=T.length),N=_,y=(x=T.slice(0,_)).length;y<_;)x[y++]=0;(E=P.slice()).unshift(0),C=P[0],P[1]>=m/2&&++C;do{u=0,(i=t(P,x,_,y))<0?(b=x[0],_!=y&&(b=b*m+(x[1]||0)),(u=b/C|0)>1?(u>=m&&(u=m-1),1==(i=t(p=e(P,u),x,f=p.length,y=x.length))&&(u--,r(p,_<f?E:P,f))):(0==u&&(i=u=1),p=P.slice()),(f=p.length)<y&&p.unshift(0),r(x,p,y),-1==i&&(i=t(P,x,_,y=x.length))<1&&(u++,r(x,_<y?E:P,y)),y=x.length):0===i&&(u++,x=[0]),g[d++]=u,i&&x[0]?x[y++]=T[N]||0:(x=[T[N]],y=1)}while((N++<k||void 0!==x[0])&&v--)}return g[0]||g.shift(),h.e=c,S(h,a?o+w(h)+1:o)}}();function j(e,t){var r,n,o,a,l,c=0,u=0,f=e.constructor,m=f.precision;if(w(e)>16)throw Error(d+w(e));if(!e.s)return new f(s);for(null==t?(i=!1,l=m):l=t,a=new f(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(l+=Math.log(p(2,u))/Math.LN10*2+5|0,r=n=o=new f(s),f.precision=l;;){if(n=S(n.times(e),l),r=r.times(++c),b((a=o.plus(v(n,r,l))).d).slice(0,l)===b(o.d).slice(0,l)){for(;u--;)o=S(o.times(o),l);return f.precision=m,null==t?(i=!0,S(o,m)):o}o=a}}function w(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function N(e,t,r){if(t>e.LN10.sd())throw i=!0,r&&(e.precision=r),Error(l+"LN10 precision limit exceeded");return S(new e(e.LN10),t)}function k(e){for(var t="";e--;)t+="0";return t}function C(e,t){var r,n,o,a,c,d,u,p,f,m=1,h=e,g=h.d,x=h.constructor,y=x.precision;if(h.s<1)throw Error(l+(h.s?"NaN":"-Infinity"));if(h.eq(s))return new x(0);if(null==t?(i=!1,p=y):p=t,h.eq(10))return null==t&&(i=!0),N(x,p);if(p+=10,x.precision=p,n=(r=b(g)).charAt(0),a=w(h),!(Math.abs(a)<15e14))return u=N(x,p+2,y).times(a+""),h=C(new x(n+"."+r.slice(1)),p-10).plus(u),x.precision=y,null==t?(i=!0,S(h,y)):h;for(;n<7&&1!=n||1==n&&r.charAt(1)>3;)n=(r=b((h=h.times(e)).d)).charAt(0),m++;for(a=w(h),n>1?(h=new x("0."+r),a++):h=new x(n+"."+r.slice(1)),d=c=h=v(h.minus(s),h.plus(s),p),f=S(h.times(h),p),o=3;;){if(c=S(c.times(f),p),b((u=d.plus(v(c,new x(o),p))).d).slice(0,p)===b(d.d).slice(0,p))return d=d.times(2),0!==a&&(d=d.plus(N(x,p+2,y).times(a+""))),d=v(d,new x(m),p),x.precision=y,null==t?(i=!0,S(d,y)):d;d=u,o+=2}}function _(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(s=t.length;48===t.charCodeAt(s-1);)--s;if(t=t.slice(n,s)){if(s-=n,r=r-n-1,e.e=u(r/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=7;n<s;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),i&&(e.e>h||e.e<-h))throw Error(d+r)}else e.s=0,e.e=0,e.d=[0];return e}function S(e,t,r){var n,s,o,a,l,c,f,g,x=e.d;for(a=1,o=x[0];o>=10;o/=10)a++;if((n=t-a)<0)n+=7,s=t,f=x[g=0];else{if((g=Math.ceil((n+1)/7))>=(o=x.length))return e;for(f=o=x[g],a=1;o>=10;o/=10)a++;s=(n%=7)-7+a}if(void 0!==r&&(l=f/(o=p(10,a-s-1))%10|0,c=t<0||void 0!==x[g+1]||f%o,c=r<4?(l||c)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||c||6==r&&(n>0?s>0?f/p(10,a-s):0:x[g-1])%10&1||r==(e.s<0?8:7))),t<1||!x[0])return c?(o=w(e),x.length=1,t=t-o-1,x[0]=p(10,(7-t%7)%7),e.e=u(-t/7)||0):(x.length=1,x[0]=e.e=e.s=0),e;if(0==n?(x.length=g,o=1,g--):(x.length=g+1,o=p(10,7-n),x[g]=s>0?(f/p(10,a-s)%p(10,s)|0)*o:0),c)for(;;){if(0==g){(x[0]+=o)==m&&(x[0]=1,++e.e);break}if(x[g]+=o,x[g]!=m)break;x[g--]=0,o=1}for(n=x.length;0===x[--n];)x.pop();if(i&&(e.e>h||e.e<-h))throw Error(d+w(e));return e}function E(e,t){var r,n,s,o,a,l,c,d,u,p,f=e.constructor,h=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),i?S(t,h):t;if(c=e.d,p=t.d,n=t.e,d=e.e,c=c.slice(),a=d-n){for((u=a<0)?(r=c,a=-a,l=p.length):(r=p,n=d,l=c.length),a>(s=Math.max(Math.ceil(h/7),l)+2)&&(a=s,r.length=1),r.reverse(),s=a;s--;)r.push(0);r.reverse()}else{for((u=(s=c.length)<(l=p.length))&&(l=s),s=0;s<l;s++)if(c[s]!=p[s]){u=c[s]<p[s];break}a=0}for(u&&(r=c,c=p,p=r,t.s=-t.s),l=c.length,s=p.length-l;s>0;--s)c[l++]=0;for(s=p.length;s>a;){if(c[--s]<p[s]){for(o=s;o&&0===c[--o];)c[o]=m-1;--c[o],c[s]+=m}c[s]-=p[s]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--n;return c[0]?(t.d=c,t.e=n,i?S(t,h):t):new f(0)}function A(e,t,r){var n,s=w(e),o=b(e.d),a=o.length;return t?(r&&(n=r-a)>0?o=o.charAt(0)+"."+o.slice(1)+k(n):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(s<0?"e":"e+")+s):s<0?(o="0."+k(-s-1)+o,r&&(n=r-a)>0&&(o+=k(n))):s>=a?(o+=k(s+1-a),r&&(n=r-s-1)>0&&(o=o+"."+k(n))):((n=s+1)<a&&(o=o.slice(0,n)+"."+o.slice(n)),r&&(n=r-a)>0&&(s+1===a&&(o+="."),o+=k(n))),e.s<0?"-"+o:o}function M(e,t){if(e.length>t)return e.length=t,!0}function T(e){if(!e||"object"!=typeof e)throw Error(l+"Object expected");var t,r,n,s=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if(void 0!==(n=e[r=s[t]])){if(!(u(n)===n&&n>=s[t+1]&&n<=s[t+2]))throw Error(c+r+": "+n);this[r]=n}if(void 0!==(n=e[r="LN10"])){if(n!=Math.LN10)throw Error(c+r+": "+n);this[r]=new this(n)}return this}(a=function e(t){var r,n,s;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"==typeof e){if(0*e!=0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):_(t,e.toString())}if("string"!=typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(c+e);_(t,e)}if(o.prototype=g,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=T,void 0===t&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<s.length;)t.hasOwnProperty(n=s[r++])||(t[n]=this[n]);return o.config(t),o}(a)).default=a.Decimal=a,s=new a(1),void 0===(n=function(){return a}.call(t,r,t,e))||(e.exports=n)}()},8418:(e,t,r)=>{"use strict";r(2779)},8440:(e,t,r)=>{var n=r(6038),s=r(7301),o=r(6009),a=o&&o.isSet,i=a?s(a):n;e.exports=i},8445:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},8491:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},8493:(e,t,r)=>{"use strict";var n=r(1609),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,a=n.useEffect,i=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!s(e,r)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=o({inst:{value:r,getSnapshot:t}}),s=n[0].inst,d=n[1];return i(function(){s.value=r,s.getSnapshot=t,c(s)&&d({inst:s})},[e,r,t]),a(function(){return c(s)&&d({inst:s}),e(function(){c(s)&&d({inst:s})})},[e]),l(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},8509:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e,t=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return r.test(e)}}},8586:(e,t,r)=>{var n=r(6449),s=r(4394),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!s(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},8635:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},8655:(e,t,r)=>{var n=r(6025);e.exports=function(e){return n(this.__data__,e)>-1}},8676:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("moon",[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]])},8686:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},8695:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!=typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return null!=t&&(!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`)}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},8697:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8723:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addQuestionToQuiz:()=>y,create:()=>p,createQuiz:()=>N,delete:()=>m,deleteFn:()=>m,deleteQuiz:()=>C,duplicate:()=>h,duplicateQuiz:()=>_,getAll:()=>d,getOne:()=>u,getQuiz:()=>w,getQuizStatistics:()=>x,getQuizzes:()=>j,getQuizzesByCourse:()=>g,removeQuestionFromQuiz:()=>b,update:()=>f,updateQuiz:()=>k,updateQuizQuestionOrder:()=>v});var n=r(9700),s=r(8243);const o={_course_id:null,_quiz_type:"standard",_difficulty_level:"intermediate",_quiz_category:"",_passing_score:7,_time_limit:0,_max_attempts:0,_randomize_questions:!1,_show_results:!0,_enable_negative_scoring:!1,_quiz_question_ids:[],_lesson_ids:[],_total_points:0,_quiz_instructions:""},a=["standard","graded","practice","survey","assessment","certification"],i=["easy","medium","hard","beginner","intermediate","advanced","expert"],l=["publish","draft","private","pending"],c=(0,n.eG)("quiz","quizzes",{sanitizer:e=>{if(!e)return console.warn("âš ï¸ sanitizeQuizData - No data provided"),null;const t=(0,s.w3)(e.title),r=(0,s.w3)(e.content),n=(0,s.w3)(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:n,status:(0,s.se)(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,qe_category:Array.isArray(e.qe_category)?e.qe_category:[],meta:{...o,...e.meta,_randomize_questions:(0,s.kM)(e.meta?._randomize_questions),_show_results:(0,s.kM)(e.meta?._show_results,!0),_enable_negative_scoring:(0,s.kM)(e.meta?._enable_negative_scoring),_quiz_question_ids:(0,s.E5)(e.meta?._quiz_question_ids),_lesson_ids:(0,s.E5)(e.meta?._lesson_ids)},questions_count:e.questions_count||e.meta?._quiz_question_ids?.length||0,total_attempts:e.total_attempts||0,_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=(0,s.Kf)(e.title,"Quiz title");r&&t.push(r),e.status&&!l.includes(e.status)&&t.push(`Invalid status. Must be one of: ${l.join(", ")}`);const n=e.meta||e,o=n._quiz_type||e.quizType;o&&!a.includes(o)&&t.push(`Invalid quiz type. Must be one of: ${a.join(", ")}`);const c=n._difficulty_level||e.difficulty;c&&!i.includes(c)&&t.push(`Invalid difficulty level. Must be one of: ${i.join(", ")}`);const d=n._passing_score||e.passingScore;if(void 0!==d){const e=(0,s.i8)(d,0,10,"Passing score");e&&t.push(e)}const u=n._time_limit||e.timeLimit;if(void 0!==u){const e=parseInt(u);(isNaN(e)||e<0)&&t.push("Time limit must be a positive number or 0 (unlimited)")}const p=n._max_attempts||e.maxAttempts;if(void 0!==p){const e=parseInt(p);(isNaN(e)||e<0)&&t.push("Max attempts must be a positive number or 0 (unlimited)")}const f=n._quiz_question_ids||e.questionIds;return f&&!Array.isArray(f)&&t.push("Question IDs must be an array"),(0,s.vQ)(t)},transformer:e=>{console.log("ðŸ”„ transformQuizDataForApi - Input:",e);const t={title:(0,s.xV)(e.title),content:(0,s.xV)(e.content||e.instructions||""),status:(0,s.se)(e.status,"draft")};if(void 0!==e.qe_category)if(Array.isArray(e.qe_category))t.qe_category=e.qe_category.map(e=>parseInt(e,10)).filter(e=>!isNaN(e)&&e>0);else if(e.qe_category){const r=parseInt(e.qe_category,10);!isNaN(r)&&r>0&&(t.qe_category=[r])}t.meta={};const r=e._course_id||e.courseId||e.meta?._course_id;if(null!=r&&""!==r&&"0"!==r&&0!==r){const e=(0,s.ee)(r,1);e&&e>0&&(t.meta._course_id=e)}return void 0!==e._quiz_type?t.meta._quiz_type=(0,s.zi)(e._quiz_type,a,"standard"):void 0!==e.quizType?t.meta._quiz_type=(0,s.zi)(e.quizType,a,"standard"):void 0!==e.meta?._quiz_type&&(t.meta._quiz_type=(0,s.zi)(e.meta._quiz_type,a,"standard")),void 0!==e._difficulty_level?t.meta._difficulty_level=(0,s.zi)(e._difficulty_level,i,"intermediate"):void 0!==e.difficulty?t.meta._difficulty_level=(0,s.zi)(e.difficulty,i,"intermediate"):void 0!==e.meta?._difficulty_level&&(t.meta._difficulty_level=(0,s.zi)(e.meta._difficulty_level,i,"intermediate")),void 0!==e._start_date?t.meta._start_date=(0,s.xV)(e._start_date):void 0!==e.startDate?t.meta._start_date=(0,s.xV)(e.startDate):void 0!==e.meta?._start_date&&(t.meta._start_date=(0,s.xV)(e.meta._start_date)),void 0!==e._quiz_category?t.meta._quiz_category=(0,s.xV)(e._quiz_category):void 0!==e.category?t.meta._quiz_category=(0,s.xV)(e.category):void 0!==e.meta?._quiz_category&&(t.meta._quiz_category=(0,s.xV)(e.meta._quiz_category)),void 0!==e._passing_score?(t.meta._passing_score=parseFloat(e._passing_score)||7,t.meta._passing_score>10&&(t.meta._passing_score=t.meta._passing_score/10),t.meta._passing_score=Math.min(Math.max(t.meta._passing_score,0),10)):void 0!==e.passingScore?(t.meta._passing_score=parseFloat(e.passingScore)||7,t.meta._passing_score>10&&(t.meta._passing_score=t.meta._passing_score/10),t.meta._passing_score=Math.min(Math.max(t.meta._passing_score,0),10)):void 0!==e.meta?._passing_score&&(t.meta._passing_score=parseFloat(e.meta._passing_score)||7,t.meta._passing_score>10&&(t.meta._passing_score=t.meta._passing_score/10),t.meta._passing_score=Math.min(Math.max(t.meta._passing_score,0),10)),void 0!==e._time_limit?t.meta._time_limit=(0,s.o5)(e._time_limit,0,0):void 0!==e.timeLimit?t.meta._time_limit=(0,s.o5)(e.timeLimit,0,0):void 0!==e.meta?._time_limit&&(t.meta._time_limit=(0,s.o5)(e.meta._time_limit,0,0)),void 0!==e._max_attempts?t.meta._max_attempts=(0,s.o5)(e._max_attempts,0,0):void 0!==e.maxAttempts?t.meta._max_attempts=(0,s.o5)(e.maxAttempts,0,0):void 0!==e.meta?._max_attempts&&(t.meta._max_attempts=(0,s.o5)(e.meta._max_attempts,0,0)),void 0!==e._randomize_questions?t.meta._randomize_questions=(0,s.kM)(e._randomize_questions):void 0!==e.randomizeQuestions?t.meta._randomize_questions=(0,s.kM)(e.randomizeQuestions):void 0!==e.meta?._randomize_questions&&(t.meta._randomize_questions=(0,s.kM)(e.meta._randomize_questions)),void 0!==e._show_results?t.meta._show_results=(0,s.kM)(e._show_results,!0):void 0!==e.showResults?t.meta._show_results=(0,s.kM)(e.showResults,!0):void 0!==e.meta?._show_results&&(t.meta._show_results=(0,s.kM)(e.meta._show_results,!0)),void 0!==e._enable_negative_scoring?t.meta._enable_negative_scoring=(0,s.kM)(e._enable_negative_scoring):void 0!==e.enableNegativeScoring?t.meta._enable_negative_scoring=(0,s.kM)(e.enableNegativeScoring):void 0!==e.meta?._enable_negative_scoring&&(t.meta._enable_negative_scoring=(0,s.kM)(e.meta._enable_negative_scoring)),void 0!==e._quiz_question_ids?t.meta._quiz_question_ids=(0,s.E5)(e._quiz_question_ids):void 0!==e.questionIds?t.meta._quiz_question_ids=(0,s.E5)(e.questionIds):void 0!==e.meta?._quiz_question_ids&&(t.meta._quiz_question_ids=(0,s.E5)(e.meta._quiz_question_ids)),void 0!==e._lesson_ids?t.meta._lesson_ids=(0,s.E5)(e._lesson_ids):void 0!==e.lessonIds?t.meta._lesson_ids=(0,s.E5)(e.lessonIds):void 0!==e.meta?._lesson_ids&&(t.meta._lesson_ids=(0,s.E5)(e.meta._lesson_ids)),void 0!==e._total_points?t.meta._total_points=(0,s.o5)(e._total_points,0,0):void 0!==e.totalPoints?t.meta._total_points=(0,s.o5)(e.totalPoints,0,0):void 0!==e.meta?._total_points&&(t.meta._total_points=(0,s.o5)(e.meta._total_points,0,0)),void 0!==e._quiz_instructions?t.meta._quiz_instructions=(0,s.xV)(e._quiz_instructions):void 0!==e.instructions?t.meta._quiz_instructions=(0,s.xV)(e.instructions):void 0!==e.meta?._quiz_instructions&&(t.meta._quiz_instructions=(0,s.xV)(e.meta._quiz_instructions)),t.meta={...o,...t.meta},console.log("ðŸ”„ transformQuizDataForApi - Output:",t),console.log("ðŸ“Œ Category in transformed:",t.qe_category),t},buildParams:(e={})=>{const{page:t=1,perPage:r=20,search:n="",courseId:s=null,quizType:o=null,difficulty:a=null,category:i=null,orderBy:l="date",order:c="desc",embed:d=!0,include:u=null,status:p=null}=e,f=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:l,order:c});if(d&&f.append("_embed","true"),u&&f.append("include",u),p&&f.append("status",p),n&&n.trim()&&f.append("search",n.trim()),s){const e=parseInt(s,10);Number.isInteger(e)&&e>0&&f.append("course_id",e.toString())}return o&&(f.append("meta_query[1][key]","_quiz_type"),f.append("meta_query[1][value]",o),f.append("meta_query[1][compare]","=")),a&&(f.append("meta_query[2][key]","_difficulty_level"),f.append("meta_query[2][value]",a),f.append("meta_query[2][compare]","=")),i&&f.append("qe_category",i.toString()),f}}),d=(e={})=>c.getAll(e),u=e=>c.getOne(e),p=e=>c.create(e),f=(e,t)=>c.update(e,t),m=e=>c.delete(e),h=e=>c.duplicate(e),g=(e,t={})=>d({...t,courseId:e}),x=async e=>{try{const t=await u(e);return{totalQuestions:t.meta?._quiz_question_ids?.length||0,totalPoints:t.meta?._total_points||0,passingScore:t.meta?._passing_score||70,timeLimit:t.meta?._time_limit||0,maxAttempts:t.meta?._max_attempts||0,totalAttempts:t.total_attempts||0,averageScore:t.average_score||0}}catch(e){throw console.error("Error fetching quiz stats:",e),e}},y=async(e,t)=>{try{const r=await u(e),n=r.meta?._quiz_question_ids||[];return n.includes(t)?(console.warn("Question already exists in quiz"),r):f(e,{questionIds:[...n,t]})}catch(e){throw console.error("Error adding question to quiz:",e),e}},b=async(e,t)=>{try{const r=await u(e),n=r.meta?._quiz_question_ids||[];return f(e,{questionIds:n.filter(e=>e!==t)})}catch(e){throw console.error("Error removing question from quiz:",e),e}},v=(e,t)=>f(e,{questionIds:t}),j=d,w=u,N=p,k=f,C=m,_=h},8805:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const r=new Map;for(let n=0;n<e.length;n++){const s=e[n],o=t(s);r.has(o)||r.set(o,s)}return Array.from(r.values())}},8816:(e,t,r)=>{var n=r(5970),s=r(6757),o=r(2865);e.exports=function(e){return o(s(e,void 0,n),e+"")}},8834:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]])},8852:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},8859:(e,t,r)=>{var n=r(3661),s=r(1380),o=r(1459);function a(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}a.prototype.add=a.prototype.push=s,a.prototype.has=o,e.exports=a},8867:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)}}}()},8879:(e,t,r)=>{var n=r(4335)(Object.getPrototypeOf,Object);e.exports=n},8906:function(e){e.exports=function(){"use strict";return function(e,t){t.prototype.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)}}}()},8919:(e,t,r)=>{"use strict";r.d(t,{A:()=>a}),r(1609);var n=r(790);const s={primary:"qe-btn-primary",secondary:"qe-btn-secondary",accent:"qe-btn-accent",ghost:"qe-btn-ghost",success:"qe-btn-success"},o={sm:"qe-btn-sm",md:"qe-btn-md",lg:"qe-btn-lg"},a=({variant:e="primary",size:t="md",className:r="",style:a={},children:i,disabled:l,...c})=>{const d=s[e]||s.primary,u=o[t]||o.md;return(0,n.jsx)("button",{type:"button",className:`${d} ${u} ${r}`.trim(),style:a,disabled:l,...c,children:i})}},8931:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])},8948:(e,t,r)=>{var n=r(1791),s=r(6375);e.exports=function(e,t){return n(e,s(e),t)}},8969:(e,t,r)=>{var n=r(7422),s=r(5160);e.exports=function(e,t){return t.length<2?e:n(e,s(t,0,-1))}},8984:(e,t,r)=>{var n=r(5527),s=r(3650),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},9044:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("graduation-cap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]])},9172:(e,t,r)=>{var n=r(5861),s=r(346);e.exports=function(e){return s(e)&&"[object Map]"==n(e)}},9181:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},9184:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},9219:e=>{e.exports=function(e,t){return e.has(t)}},9222:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("sliders-vertical",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]])},9242:(e,t,r)=>{"use strict";e.exports=r(2162)},9302:(e,t,r)=>{var n=r(3488),s=r(6757),o=r(2865);e.exports=function(e,t){return o(s(e,t,n),e+"")}},9325:(e,t,r)=>{var n=r(4840),s="object"==typeof self&&self&&self.Object===Object&&self,o=n||s||Function("return this")();e.exports=o},9326:(e,t,r)=>{var n=r(1769),s=r(2428),o=r(6449),a=r(361),i=r(294),l=r(7797);e.exports=function(e,t,r){for(var c=-1,d=(t=n(t,e)).length,u=!1;++c<d;){var p=l(t[c]);if(!(u=null!=e&&r(e,p)))break;e=e[p]}return u||++c!=d?u:!!(d=null==e?0:e.length)&&i(d)&&a(p,d)&&(o(e)||s(e))}},9344:(e,t,r)=>{var n=r(3805),s=Object.create,o=function(){function e(){}return function(t){if(!n(t))return{};if(s)return s(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=o},9350:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9354:(e,t,r)=>{"use strict";r.d(t,{A:()=>w});var n=r(1609),s=r(8697),o=r(4934),a=r(2708),i=r(697),l=r(5107);const c=(0,r(9407).A)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);var d=r(1004),u=r(5708),p=r.n(u),f=r(3375),m=r(8004),h=r(3627),g=r(1837),x=r(4125),y=r(6359),b=r(5026),v=r(790);const j=e=>{if(!e||"string"!=typeof e)return"";let t=e.trim();return/<p[\s>]/i.test(t)?(t=t.replace(/<\/p>\s*(<br\s*\/?>)+\s*<p/gi,"</p><p><br></p><p"),t):(t=t.split(/<br\s*\/?>\s*|\n/).map(e=>`<p>${e||"<br>"}</p>`).join(""),t)},w=({isOpen:e,onClose:t,question:r=null,onSave:u,mode:w="create",availableQuizzes:N=[],availableLessons:k=[],availableCourses:C=[],isLoading:_=!1,onDelete:S=null,onDeleteFromDB:E=null,parentQuizId:A=null,isSimplified:M=!1})=>{const{getColor:T,isDarkMode:P}=(0,y.DP)(),O=(0,n.useMemo)(()=>({text:P?T("textPrimary","#f9fafb"):T("primary","#1a202c"),textMuted:P?T("textSecondary","#9ca3af"):"#6b7280",accent:T("accent","#f59e0b"),primary:T("primary","#3b82f6"),inputBg:P?"#1f2937":"#ffffff",inputBorder:P?"#374151":"#d1d5db",cardBg:P?T("secondaryBackground","#1f2937"):"#ffffff",headerBg:P?T("primary","#1a202c"):"#f9fafb",footerBg:P?"#111827":"#f9fafb",border:P?"#374151":"#e5e7eb",overlay:P?"rgba(0,0,0,0.7)":"rgba(0,0,0,0.5)"}),[T,P]),[z,q]=(0,n.useState)({title:"",type:"multiple_choice",difficulty:"medium",category:"",points:"1",pointsIncorrect:"0",explanation:"",quizIds:[],lessonId:"",courseId:"",provider:"",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1}]}),[D,I]=(0,n.useState)({}),[L,R]=(0,n.useState)(!1),[$,B]=(0,n.useState)(!1),[F,U]=(0,n.useState)(!1),[W,H]=(0,n.useState)(!1),[Q,V]=(0,n.useState)([]),[Y,K]=(0,n.useState)(!1),[G,X]=(0,n.useState)(!1),[J,Z]=(0,n.useState)(""),[ee,te]=(0,n.useState)(!1),[re,ne]=(0,n.useState)(!1),[se,oe]=(0,n.useState)(""),[ae,ie]=(0,n.useState)(!1),[le,ce]=(0,n.useState)([]),[de,ue]=(0,n.useState)(!1),[pe,fe]=(0,n.useState)(!1),[me,he]=(0,n.useState)(""),[ge,xe]=(0,n.useState)(!1),[ye,be]=(0,n.useState)(!1),[ve,je]=(0,n.useState)(!1),[we,Ne]=(0,n.useState)(""),[ke,Ce]=(0,n.useState)(!1),[_e,Se]=(0,n.useState)(!1),Ee=(0,n.useRef)(null),Ae=(0,n.useRef)(!1),Me=(0,n.useRef)(null),Te=(0,n.useCallback)(e=>{e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")},[]),Pe=(0,f.FR)((0,f.MS)(f.AN,{activationConstraint:{distance:8}}));(0,n.useEffect)(()=>{e&&(Oe(),ze())},[e]),(0,n.useEffect)(()=>{if("create"!==w||!e||0===Q.length)return;const t=Q.find(e=>"uniforme-azul"===e.slug);t&&q(e=>e.provider?e:{...e,provider:t.value})},[Q,w,e]);const Oe=async()=>{K(!0);try{const e=(await(0,b.NX)("qe_provider")).map(e=>({value:e.id,label:e.name,slug:e.slug,isTestUnlocked:e.meta?._test_unlocked||!1}));V(e)}catch(e){console.error("Error fetching providers:",e)}finally{K(!1)}},ze=async()=>{ue(!0);try{const e=(await(0,b.NX)("qe_category")).map(e=>({value:e.id,label:e.name}));ce(e)}catch(e){console.error("Error fetching categories:",e)}finally{ue(!1)}},qe=async()=>{const e=we.trim();if(e&&z.category){Ce(!0);try{const t=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),r=await(0,b.pi)("qe_category",z.category,{name:e,slug:t});ce(e=>e.map(e=>e.value==z.category?{...e,label:r.name,slug:r.slug}:e)),je(!1),Ne("")}catch(e){console.error("Error renaming category:",e)}finally{Ce(!1)}}},De=async()=>{const e=se.trim();if(e&&z.provider){ie(!0);try{const t=e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),r=await(0,b.pi)("qe_provider",z.provider,{name:e,slug:t});V(e=>e.map(e=>e.value==z.provider?{...e,label:r.name,slug:r.slug}:e)),ne(!1),oe("")}catch(e){console.error("Error renaming provider:",e)}finally{ie(!1)}}};(0,n.useEffect)(()=>{if(r&&"create"!==w){const e=r.meta?._quiz_ids||[],t=A&&!e.includes(A)?[...e,A]:e;q({title:r.title||"",type:r.meta?._question_type||"multiple_choice",difficulty:r.meta?._difficulty_level||"medium",category:r.qe_category?.[0]||"",points:r.meta?._points?.toString()||"1",pointsIncorrect:r.meta?._points_incorrect?.toString()||"0",explanation:j(("object"==typeof r.content?r.content?.rendered||r.content?.raw:r.content)||r.meta?._explanation||""),quizIds:t,lessonId:r.meta?._question_lesson?.toString()||"",courseId:r.meta?._course_id?.toString()||"",provider:r.qe_provider?.[0]||"",options:r.meta?._question_options||[{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})}else q({title:"",type:"multiple_choice",difficulty:"medium",category:"",points:"1",pointsIncorrect:"0",explanation:"",quizIds:A?[A]:[],lessonId:"",courseId:"",provider:"",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1}]});I({}),Ae.current=!1,setTimeout(()=>Te(Me.current),0)},[r,w,e,A,Te]),(0,n.useEffect)(()=>{if(Ae.current)return;if(!Ee.current||!z.explanation)return;const e=Ee.current.getEditor();if(!e)return;const t=z.explanation.replace(/<\/p>\s+<p/gi,"</p><p");e.root.innerHTML=t,e.update("silent"),Ae.current=!0},[z.explanation]);const Ie=(e,t)=>{q(r=>({...r,[e]:t})),D[e]&&I(t=>({...t,[e]:null}))},Le=(e,t,r)=>{q(n=>({...n,options:n.options.map((n,s)=>s===e?{...n,[t]:r}:n)}))},Re=e=>{z.options.length>2&&q(t=>({...t,options:t.options.filter((t,r)=>r!==e)}))},$e=e=>{"multiple_choice"===z.type&&q(t=>({...t,options:t.options.map((t,r)=>({...t,isCorrect:r===e}))}))},Be=async()=>{if(S){R(!0);try{await S(r?.id)}catch(e){I(e=>({...e,submit:"Error al eliminar la pregunta."})),R(!1),B(!1)}}},Fe=async()=>{if(E){U(!0);try{await E(r?.id)}catch(e){I(e=>({...e,submit:"Error al borrar la pregunta del campus."})),U(!1),H(!1)}}},Ue=e=>{e.preventDefault(),(async e=>{if(We())try{const t={...z,qe_category:z.category?[z.category]:[],qe_provider:z.provider?[z.provider]:[]};await u(t,e),"reset"===e&&(q(e=>({...e,title:"",explanation:"",quizIds:[],options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})),I({}))}catch(e){console.error("Error saving question:",e),I({submit:e.message||"Failed to save the question."})}})("close")},We=()=>{const e={};return z.title.trim()||(e.title="El tÃ­tulo de la pregunta es obligatorio"),"multiple_choice"!==z.type&&"true_false"!==z.type||(z.options.some(e=>e.isCorrect)||(e.options="Selecciona al menos una respuesta correcta"),z.options.some(e=>!e.text.trim())&&(e.options="Todas las opciones deben tener texto")),I(e),0===Object.keys(e).length},He=(0,n.useCallback)(async()=>{try{const e=await(0,m.I)({title:"Seleccionar imagen",buttonText:"Insertar imagen",type:"image"});if(e&&e.url&&Ee.current){const t=Ee.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e.url),t.setSelection(r.index+1)}}catch(e){console.error("Error al abrir el selector de medios:",e),alert("No se pudo abrir la librerÃ­a de medios de WordPress.")}},[]),Qe=(0,n.useMemo)(()=>({toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:He}}}),[He]);if(!e)return null;const Ve="view"===w,Ye="create"===w?"Nueva Pregunta":"edit"===w?"Editar Pregunta":"Ver Pregunta";return(0,v.jsx)("div",{className:"fixed inset-0 flex items-start justify-center z-[10000] p-4 pt-32",style:{backgroundColor:O.overlay},children:(0,v.jsxs)("div",{className:"rounded-xl shadow-2xl w-full max-w-3xl max-h-[75vh] flex flex-col overflow-hidden",style:{backgroundColor:O.cardBg},children:[(0,v.jsxs)("div",{className:"flex items-center justify-between px-5 py-3 flex-shrink-0",style:{backgroundColor:O.headerBg,borderBottom:`1px solid ${O.border}`},children:[(0,v.jsx)("h2",{className:"text-base font-bold",style:{color:O.text},children:Ye}),(0,v.jsx)("button",{type:"button",onClick:t,style:{padding:"6px",borderRadius:"8px",backgroundColor:"transparent",border:"none",color:O.textMuted,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=P?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",e.currentTarget.style.color=O.text},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=O.textMuted},children:(0,v.jsx)(s.A,{size:18})})]}),(0,v.jsxs)("form",{onSubmit:Ue,className:"flex-1 overflow-y-auto p-5 space-y-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:O.text},children:"TÃ­tulo de la Pregunta *"}),(0,v.jsx)("textarea",{ref:Me,value:z.title,onChange:e=>{Ie("title",e.target.value),Te(e.target)},placeholder:"Escribe el enunciado de la pregunta...",disabled:Ve,rows:1,style:{width:"100%",padding:"8px 10px",borderRadius:"8px",border:`2px solid ${D.title?"#ef4444":O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"14px",outline:"none",resize:"none",overflow:"hidden",lineHeight:"1.4",fontFamily:"inherit"}}),D.title&&(0,v.jsx)("p",{style:{marginTop:"4px",fontSize:"12px",color:"#ef4444"},children:D.title})]}),(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,v.jsx)("label",{className:"block text-xs font-bold uppercase",style:{color:O.text},children:"CategorÃ­a"}),!Ve&&!pe&&!ve&&(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2px"},children:[z.category&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{type:"button",onClick:()=>{const e=le.find(e=>e.value==z.category);Ne(e?.label||""),je(!0),fe(!1)},title:"Renombrar esta categorÃ­a",style:{padding:"2px",backgroundColor:"transparent",border:"none",color:O.accent,cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.7"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:(0,v.jsx)(o.A,{size:12})}),(0,v.jsx)("button",{type:"button",onClick:async()=>{if(!z.category)return;const e=le.find(e=>e.value==z.category);if(window.confirm(`Â¿Borrar la categorÃ­a "${e?.label||z.category}"?\n\nEsta acciÃ³n eliminarÃ¡ la categorÃ­a del sistema y no se puede deshacer.`)){be(!0);try{await(0,b.Xi)("qe_category",z.category,!0),ce(e=>e.filter(e=>e.value!=z.category)),Ie("category","")}catch(e){console.error("Error deleting category:",e)}finally{be(!1)}}},disabled:ye,title:"Borrar esta categorÃ­a",style:{padding:"2px",backgroundColor:"transparent",border:"none",color:"#ef4444",cursor:ye?"not-allowed":"pointer",display:"flex",alignItems:"center",opacity:ye?.5:1},onMouseEnter:e=>{ye||(e.currentTarget.style.opacity="0.7")},onMouseLeave:e=>{e.currentTarget.style.opacity=ye?"0.5":"1"},children:(0,v.jsx)(a.A,{size:13})})]}),(0,v.jsx)("button",{type:"button",onClick:()=>fe(!0),style:{padding:"2px",backgroundColor:"transparent",border:"none",color:O.accent,cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.7"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:(0,v.jsx)(i.A,{size:14})})]})]}),pe&&(0,v.jsx)("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:P?"#111827":"#f9fafb",border:`1px solid ${O.border}`,borderRadius:"6px"},children:(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,v.jsx)("input",{type:"text",value:me,onChange:e=>he(e.target.value),placeholder:"Nueva categorÃ­a...",style:{flex:1,padding:"6px 10px",border:`1px solid ${O.inputBorder}`,borderRadius:"4px",fontSize:"13px",backgroundColor:O.inputBg,color:O.text}}),(0,v.jsx)("button",{type:"button",onClick:async()=>{const e=me.trim();if(!e)return;const t=le.find(t=>t.label.toLowerCase()===e.toLowerCase());if(t)return Ie("category",t.value),fe(!1),void he("");xe(!0);try{const t=await(0,b.A3)("qe_category",{name:e}),r={value:t.id,label:t.name};ce(e=>[...e,r]),Ie("category",t.id),he(""),fe(!1)}catch(e){console.error("Error creating category:",e)}finally{xe(!1)}},disabled:ge,style:{padding:"6px 12px",backgroundColor:O.accent,color:"#fff",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"500",cursor:ge?"not-allowed":"pointer",opacity:ge?.7:1},children:ge?"...":"OK"}),(0,v.jsx)("button",{type:"button",onClick:()=>fe(!1),style:{padding:"6px 10px",backgroundColor:O.inputBg,color:O.text,border:`1px solid ${O.inputBorder}`,borderRadius:"4px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:"X"})]})}),ve&&(0,v.jsxs)("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:P?"#111827":"#f9fafb",border:`1px solid ${O.accent}`,borderRadius:"6px"},children:[(0,v.jsx)("div",{style:{fontSize:"10px",fontWeight:"600",color:O.accent,marginBottom:"6px",textTransform:"uppercase"},children:"Renombrar categorÃ­a"}),(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,v.jsx)("input",{type:"text",value:we,onChange:e=>Ne(e.target.value),onKeyDown:e=>{"Enter"===e.key&&qe(),"Escape"===e.key&&je(!1)},placeholder:"Nombre de la categorÃ­a...",autoFocus:!0,style:{flex:1,padding:"6px 10px",border:`1px solid ${O.inputBorder}`,borderRadius:"4px",fontSize:"13px",backgroundColor:O.inputBg,color:O.text}}),(0,v.jsx)("button",{type:"button",onClick:qe,disabled:ke||!we.trim(),style:{padding:"6px 12px",backgroundColor:O.accent,color:"#fff",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"500",cursor:ke||!we.trim()?"not-allowed":"pointer",opacity:ke||!we.trim()?.6:1},children:ke?"...":"OK"}),(0,v.jsx)("button",{type:"button",onClick:()=>{je(!1),Ne("")},style:{padding:"6px 10px",backgroundColor:O.inputBg,color:O.text,border:`1px solid ${O.inputBorder}`,borderRadius:"4px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:"X"})]})]}),(0,v.jsxs)("div",{style:{position:"relative"},children:[(0,v.jsxs)("select",{value:z.category,onChange:e=>Ie("category",e.target.value),disabled:Ve||de,style:{width:"100%",padding:"10px 32px 10px 12px",borderRadius:"8px",border:`2px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"14px",appearance:"none",cursor:"pointer",outline:"none"},children:[(0,v.jsx)("option",{value:"",children:de?"Cargando...":"Seleccionar categorÃ­a"}),le.map(e=>(0,v.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,v.jsx)(l.A,{size:16,style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:O.textMuted}})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,v.jsx)("label",{className:"block text-xs font-bold uppercase",style:{color:O.text},children:"Proveedor"}),!Ve&&!G&&!re&&(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2px"},children:[z.provider&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("button",{type:"button",onClick:async()=>{if(!z.provider)return;const e=Q.find(e=>e.value==z.provider),t=!e?.isTestUnlocked;try{await(0,b.pi)("qe_provider",z.provider,{meta:{_test_unlocked:t}}),V(e=>e.map(e=>e.value==z.provider?{...e,isTestUnlocked:t}:e))}catch(e){console.error("Error toggling provider test lock:",e)}},title:(()=>{const e=Q.find(e=>e.value==z.provider);return e?.isTestUnlocked?"Este proveedor puede aÃ±adir preguntas a tests (clic para bloquear)":"Este proveedor no puede aÃ±adir preguntas a tests (clic para desbloquear)"})(),style:{padding:"2px",backgroundColor:"transparent",border:"none",color:Q.find(e=>e.value==z.provider)?.isTestUnlocked?"#10b981":O.textMuted,cursor:"pointer",display:"flex",alignItems:"center",opacity:1},onMouseEnter:e=>{e.currentTarget.style.opacity="0.7"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:(0,v.jsx)(c,{size:13})}),(0,v.jsx)("button",{type:"button",onClick:()=>{const e=Q.find(e=>e.value==z.provider);oe(e?.label||""),ne(!0),X(!1)},title:"Renombrar este proveedor",style:{padding:"2px",backgroundColor:"transparent",border:"none",color:O.accent,cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.7"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:(0,v.jsx)(o.A,{size:12})}),(0,v.jsx)("button",{type:"button",onClick:async()=>{if(!z.provider)return;const e=Q.find(e=>e.value==z.provider);if(window.confirm(`Â¿Borrar el proveedor "${e?.label||z.provider}"?\n\nEsta acciÃ³n eliminarÃ¡ el proveedor del sistema y no se puede deshacer.`)){Se(!0);try{await(0,b.Xi)("qe_provider",z.provider,!0),V(e=>e.filter(e=>e.value!=z.provider)),Ie("provider","")}catch(e){console.error("Error deleting provider:",e)}finally{Se(!1)}}},disabled:_e,title:"Borrar este proveedor",style:{padding:"2px",backgroundColor:"transparent",border:"none",color:"#ef4444",cursor:_e?"not-allowed":"pointer",display:"flex",alignItems:"center",opacity:_e?.5:1},onMouseEnter:e=>{_e||(e.currentTarget.style.opacity="0.7")},onMouseLeave:e=>{e.currentTarget.style.opacity=_e?"0.5":"1"},children:(0,v.jsx)(a.A,{size:13})})]}),(0,v.jsx)("button",{type:"button",onClick:()=>X(!0),style:{padding:"2px",backgroundColor:"transparent",border:"none",color:O.accent,cursor:"pointer",display:"flex",alignItems:"center"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.7"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:(0,v.jsx)(i.A,{size:14})})]})]}),G&&(0,v.jsx)("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:P?"#111827":"#f9fafb",border:`1px solid ${O.border}`,borderRadius:"6px"},children:(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,v.jsx)("input",{type:"text",value:J,onChange:e=>Z(e.target.value),placeholder:"Nuevo proveedor...",style:{flex:1,padding:"6px 10px",border:`1px solid ${O.inputBorder}`,borderRadius:"4px",fontSize:"13px",backgroundColor:O.inputBg,color:O.text}}),(0,v.jsx)("button",{type:"button",onClick:async()=>{const e=J.trim();if(!e)return;const t=Q.find(t=>t.label.toLowerCase()===e.toLowerCase());if(t)return Ie("provider",t.value),X(!1),void Z("");te(!0);try{const t=await(0,b.A3)("qe_provider",{name:e}),r={value:t.id,label:t.name};V(e=>[...e,r]),Ie("provider",t.id),Z(""),X(!1)}catch(e){console.error("Error creating provider:",e)}finally{te(!1)}},disabled:ee,style:{padding:"6px 12px",backgroundColor:O.accent,color:"#fff",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"500",cursor:ee?"not-allowed":"pointer",opacity:ee?.7:1},children:ee?"...":"OK"}),(0,v.jsx)("button",{type:"button",onClick:()=>X(!1),style:{padding:"6px 10px",backgroundColor:O.inputBg,color:O.text,border:`1px solid ${O.inputBorder}`,borderRadius:"4px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:"X"})]})}),re&&(0,v.jsxs)("div",{style:{marginBottom:"8px",padding:"8px",backgroundColor:P?"#111827":"#f9fafb",border:`1px solid ${O.accent}`,borderRadius:"6px"},children:[(0,v.jsx)("div",{style:{fontSize:"10px",fontWeight:"600",color:O.accent,marginBottom:"6px",textTransform:"uppercase"},children:"Renombrar proveedor"}),(0,v.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,v.jsx)("input",{type:"text",value:se,onChange:e=>oe(e.target.value),onKeyDown:e=>{"Enter"===e.key&&De(),"Escape"===e.key&&ne(!1)},placeholder:"Nombre del proveedor...",autoFocus:!0,style:{flex:1,padding:"6px 10px",border:`1px solid ${O.inputBorder}`,borderRadius:"4px",fontSize:"13px",backgroundColor:O.inputBg,color:O.text}}),(0,v.jsx)("button",{type:"button",onClick:De,disabled:ae||!se.trim(),style:{padding:"6px 12px",backgroundColor:O.accent,color:"#fff",border:"none",borderRadius:"4px",fontSize:"13px",fontWeight:"500",cursor:ae||!se.trim()?"not-allowed":"pointer",opacity:ae||!se.trim()?.6:1},children:ae?"...":"OK"}),(0,v.jsx)("button",{type:"button",onClick:()=>{ne(!1),oe("")},style:{padding:"6px 10px",backgroundColor:O.inputBg,color:O.text,border:`1px solid ${O.inputBorder}`,borderRadius:"4px",fontSize:"13px",fontWeight:"500",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:"X"})]})]}),(0,v.jsxs)("div",{style:{position:"relative"},children:[(0,v.jsxs)("select",{value:z.provider,onChange:e=>Ie("provider",e.target.value),disabled:Ve||Y,style:{width:"100%",padding:"8px 24px 8px 10px",borderRadius:"8px",border:`2px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"14px",appearance:"none",cursor:"pointer",outline:"none"},children:[(0,v.jsx)("option",{value:"",children:Y?"Cargando...":"Seleccionar proveedor"}),Q.map(e=>(0,v.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,v.jsx)(l.A,{size:16,style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:O.textMuted}})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:O.text},children:"Dificultad"}),(0,v.jsxs)("div",{style:{position:"relative"},children:[(0,v.jsx)("select",{value:z.difficulty,onChange:e=>Ie("difficulty",e.target.value),disabled:Ve,style:{width:"100%",padding:"8px 24px 8px 10px",borderRadius:"8px",border:`2px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"14px",appearance:"none",cursor:"pointer",outline:"none"},children:[{value:"easy",label:"FÃ¡cil"},{value:"medium",label:"Media"},{value:"hard",label:"DifÃ­cil"}].map(e=>(0,v.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,v.jsx)(l.A,{size:16,style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:O.textMuted}})]})]})]}),!M&&(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:O.text},children:"Asignar a Curso"}),(0,v.jsxs)("div",{style:{position:"relative"},children:[(0,v.jsxs)("select",{value:z.courseId,onChange:e=>Ie("courseId",e.target.value),disabled:Ve,style:{width:"100%",padding:"8px 24px 8px 10px",borderRadius:"8px",border:`2px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"14px",appearance:"none",cursor:"pointer",outline:"none"},children:[(0,v.jsx)("option",{value:"",children:"Sin curso asignado"}),C.map(e=>(0,v.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]}),(0,v.jsx)(l.A,{size:16,style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:O.textMuted}})]})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:O.text},children:"Asignar a Tema"}),(0,v.jsxs)("div",{style:{position:"relative"},children:[(0,v.jsxs)("select",{value:z.lessonId,onChange:e=>Ie("lessonId",e.target.value),disabled:Ve,style:{width:"100%",padding:"8px 24px 8px 10px",borderRadius:"8px",border:`2px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"14px",appearance:"none",cursor:"pointer",outline:"none"},children:[(0,v.jsx)("option",{value:"",children:"Sin tema (Pregunta General)"}),k.map(e=>(0,v.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]}),(0,v.jsx)(l.A,{size:16,style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:O.textMuted}})]})]})]}),("multiple_choice"===z.type||"true_false"===z.type)&&(0,v.jsxs)("div",{children:[(0,v.jsx)("label",{className:"block text-xs font-bold uppercase mb-2",style:{color:O.text},children:"Opciones de Respuesta *"}),(0,v.jsx)(f.Mp,{sensors:Pe,collisionDetection:f.fp,onDragEnd:e=>{const{active:t,over:r}=e;t.id!==r.id&&q(e=>{const n=e.options.findIndex((e,r)=>r===t.id),s=e.options.findIndex((e,t)=>t===r.id);return{...e,options:(0,h.be)(e.options,n,s)}})},children:(0,v.jsx)(h.gB,{items:z.options.map((e,t)=>t),strategy:h._G,children:(0,v.jsx)("div",{className:"space-y-2",children:z.options.map((e,t)=>(0,v.jsx)(g.S,{id:t,option:e,index:t,isReadOnly:Ve,isMultipleChoice:"multiple_choice"===z.type,handleOptionChange:Le,setCorrectAnswer:$e,removeOption:Re},t))})})}),!Ve&&"multiple_choice"===z.type&&(0,v.jsxs)("button",{type:"button",onClick:()=>{q(e=>({...e,options:[...e.options,{text:"",isCorrect:!1}]}))},style:{marginTop:"8px",padding:"4px 8px",borderRadius:"6px",border:`1px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"12px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.8"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,v.jsx)(i.A,{size:12}),"AÃ±adir OpciÃ³n"]}),D.options&&(0,v.jsx)("p",{style:{marginTop:"4px",fontSize:"12px",color:"#dc2626"},children:D.options})]}),!A&&!M&&(0,v.jsx)("div",{className:"mb-3",children:(0,v.jsx)(x.A,{availableQuizzes:N,selectedQuizIds:z.quizIds,onChange:e=>Ie("quizIds",e),disabled:Ve})}),(0,v.jsxs)("div",{className:"explanation-editor",children:[(0,v.jsx)("label",{className:"block text-xs font-bold uppercase mb-1",style:{color:O.text},children:"ExplicaciÃ³n (Opcional)"}),(0,v.jsx)(p(),{ref:Ee,theme:"snow",defaultValue:"",onChange:e=>Ie("explanation",e),modules:Qe})]})]}),!Ve&&(0,v.jsxs)("div",{className:"flex items-center justify-between gap-3 p-4",style:{borderTop:`1px solid ${O.inputBorder}`,backgroundColor:O.cardBg},children:[(0,v.jsx)("div",{className:"flex items-center gap-2",children:(e=>{const t=(null!==(e=r?.meta?._quiz_ids?.length)&&void 0!==e?e:0)>0;return $?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{style:{fontSize:"13px",color:"#ef4444",fontWeight:"500"},children:"Â¿Confirmar?"}),(0,v.jsx)("button",{type:"button",onClick:Be,disabled:L,style:{padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:"#ef4444",color:"#ffffff",fontSize:"13px",fontWeight:"500",cursor:L?"not-allowed":"pointer"},children:L?"Eliminando...":"SÃ­, eliminar"}),(0,v.jsx)("button",{type:"button",onClick:()=>B(!1),disabled:L,style:{padding:"6px 12px",borderRadius:"6px",border:`1px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Cancelar"})]}):W?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("span",{style:{fontSize:"13px",color:"#b45309",fontWeight:"500"},children:"Â¿Borrar del campus?"}),(0,v.jsx)("button",{type:"button",onClick:Fe,disabled:F,style:{padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:"#b45309",color:"#ffffff",fontSize:"13px",fontWeight:"500",cursor:F?"not-allowed":"pointer"},children:F?"Borrando...":"SÃ­, borrar"}),(0,v.jsx)("button",{type:"button",onClick:()=>H(!1),disabled:F,style:{padding:"6px 12px",borderRadius:"6px",border:`1px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"13px",fontWeight:"500",cursor:"pointer"},children:"Cancelar"})]}):(0,v.jsxs)(v.Fragment,{children:["edit"===w&&S&&(0,v.jsxs)("button",{type:"button",onClick:()=>B(!0),disabled:L||_,style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #ef4444",backgroundColor:"transparent",color:"#ef4444",fontSize:"13px",fontWeight:"500",cursor:L||_?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:L||_?.5:1},children:[(0,v.jsx)(a.A,{size:13}),"Eliminar"]}),"edit"===w&&E&&!t&&(0,v.jsxs)("button",{type:"button",onClick:()=>H(!0),disabled:F||_,style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #b45309",backgroundColor:"transparent",color:"#b45309",fontSize:"13px",fontWeight:"500",cursor:F||_?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"4px",opacity:F||_?.5:1},children:[(0,v.jsx)(d.A,{size:13}),"Borrar de campus"]})]})})()}),(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[D.submit&&(0,v.jsx)("p",{style:{color:"#dc2626",fontSize:"13px"},children:D.submit}),(0,v.jsx)("button",{type:"button",onClick:t,disabled:_,style:{padding:"6px 12px",borderRadius:"6px",border:`1px solid ${O.inputBorder}`,backgroundColor:O.inputBg,color:O.text,fontSize:"13px",fontWeight:"500",cursor:_?"not-allowed":"pointer",opacity:_?.7:1},onMouseEnter:e=>{_||(e.currentTarget.style.opacity="0.8")},onMouseLeave:e=>{e.currentTarget.style.opacity=_?"0.7":"1"},children:"Cancelar"}),(0,v.jsx)("button",{type:"submit",onClick:Ue,disabled:_,style:{padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:"#3b82f6",color:"#ffffff",fontSize:"13px",fontWeight:"500",cursor:_?"not-allowed":"pointer",opacity:_?.7:1},onMouseEnter:e=>{_||(e.currentTarget.style.backgroundColor="#2563eb")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#3b82f6"},children:_?"Guardando...":"create"===w?"Crear Pregunta":"Guardar Cambios"})]})]})]})})}},9374:(e,t,r)=>{var n=r(4128),s=r(3805),o=r(4394),a=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(s(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=s(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=i.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):a.test(e)?NaN:+e}},9407:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var n=r(1609);const s=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),a=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:l="",children:c,iconNode:d,...u},p)=>(0,n.createElement)("svg",{ref:p,...i,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:o("lucide",l),...!c&&!a(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(c)?c:[c]])),c=(e,t)=>{const r=(0,n.forwardRef)(({className:r,...a},i)=>{return(0,n.createElement)(l,{ref:i,iconNode:t,className:o(`lucide-${c=s(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...a});var c});return r.displayName=s(e),r}},9436:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]])},9467:(e,t,r)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=r(3964),s=r(9184);t.cloneDeepWith=function(e,t){return n.cloneDeepWith(e,(r,o,a,i)=>{const l=t?.(r,o,a,i);if(void 0!==l)return l;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case s.numberTag:case s.stringTag:case s.booleanTag:{const t=new e.constructor(e?.valueOf());return n.copyProperties(t,e),t}case s.argumentsTag:{const t={};return n.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},9492:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},9570:(e,t,r)=>{var n=r(7334),s=r(3243),o=r(3488),a=s?function(e,t){return s(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:o;e.exports=a},9612:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},9653:(e,t,r)=>{var n=r(7828);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},9700:(e,t,r)=>{"use strict";r.d(t,{DK:()=>o,eG:()=>a,qb:()=>s}),r(5236);const n=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");if(!e.endpoints)throw new Error("API endpoints not configured in WordPress");return e},s=async(e,t={})=>{try{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":n().nonce},credentials:"same-origin",...t},s=await fetch(e,r);if(!s.ok){const e=await s.text();throw new Error(`API Error ${s.status}: ${s.statusText} - ${e}`)}return{data:await s.json(),headers:{"X-WP-Total":s.headers.get("X-WP-Total"),"X-WP-TotalPages":s.headers.get("X-WP-TotalPages")}}}catch(t){throw console.error("ðŸ’¥ API Request Failed:",e,t),t}},o=(e={})=>{const{page:t=1,perPage:r=50,search:n="",orderBy:s="date",order:o="desc",embed:a=!1,fields:i=null,status:l,category:c,difficulty:d,courseId:u,quizId:p,enrolledOnly:f}=e,m=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:s,order:o});return a&&m.append("_embed","true"),i&&Array.isArray(i)&&m.append("_fields",i.join(",")),n&&n.trim()&&m.append("search",n.trim()),l&&m.append("status",l),c&&m.append("qe_category",c),d&&m.append("qe_difficulty",d),u&&m.append("course_id",u.toString()),p&&m.append("quiz_id",p.toString()),!0!==f&&"true"!==f||m.append("enrolled_only","true"),m},a=(e,t,r={})=>{const{sanitizer:a=e=>e,validator:i=()=>({isValid:!0,errors:[]}),transformer:l=e=>e,buildParams:c=o}=r,d=()=>{const e=n();if(!e.endpoints[t])throw new Error(`Endpoint '${t}' not configured`);return e.endpoints[t]};return{getAll:async(t={})=>{try{const r=`${d()}?${c(t).toString()}`;console.log(`ðŸŽ¯ GET ${e}s:`,r);const n=await s(r);return{data:Array.isArray(n.data)?n.data.map(a):[],pagination:{currentPage:t.page||1,totalPages:parseInt(n.headers["X-WP-TotalPages"]||"1"),total:parseInt(n.headers["X-WP-Total"]||"0"),perPage:t.perPage||20}}}catch(t){throw console.error(`âŒ Error fetching ${e}s:`,t),t}},getOne:async(t,r={})=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const n=d(),o=new URLSearchParams;"edit"===r.context?o.append("context","edit"):o.append("context","view"),!1!==r.embed&&o.append("_embed","true");const i=`${n}/${t}?${o.toString()}`;console.log(`ðŸŽ¯ GET ${e}:`,i);const l=await s(i);return console.log(`ðŸ” RAW API response for ${e}:`,{id:l.data?.id,hasContent:!!l.data?.content,contentRendered:l.data?.content?.rendered,contentRaw:l.data?.content?.raw}),a(l.data)}catch(n){if(console.error(`âŒ Error fetching ${e} ${t}:`,n),(n.message.includes("403")||n.message.includes("401"))&&"edit"===r.context){console.warn(`âš ï¸ Access denied with context=edit, retrying with context=view for ${e} ${t}`);try{const n=d(),o=new URLSearchParams;o.append("context","view"),!1!==r.embed&&o.append("_embed","true");const i=`${n}/${t}?${o.toString()}`;console.log(`ðŸ”„ Retry GET ${e}:`,i);const l=await s(i);return a(l.data)}catch(r){throw console.error(`âŒ Retry also failed for ${e} ${t}:`,r),r}}if(n.message.includes("404"))return null;throw n}},create:async t=>{try{const e=i(t);if(!e.isValid)throw new Error(`Validation failed: ${e.errors.join(", ")}`);const r=d(),n=l(t),o=await s(r,{method:"POST",body:JSON.stringify(n)});return a(o.data)}catch(t){throw console.error(`âŒ Error creating ${e}:`,t),t}},update:async(t,r)=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const n=i(r);if(!n.isValid)throw new Error(`Validation failed: ${n.errors.join(", ")}`);const o=d(),c=l(r),u=`${o}/${t}`,p=await s(u,{method:"POST",body:JSON.stringify(c)});return a(p.data)}catch(r){throw console.error(`âŒ Error updating ${e} ${t}:`,r),r}},delete:async(t,r={})=>{try{if(!t||!Number.isInteger(t)||t<=0)throw new Error(`Invalid ${e} ID: ${t}`);const n=d(),o=new URLSearchParams;r.force&&o.append("force","true");const a=`${n}/${t}?${o.toString()}`;return console.log(`ðŸ—‘ï¸ Deleting ${e} ${t}`),await s(a,{method:"DELETE"}),console.log(`âœ… ${e} deleted:`,t),!0}catch(r){throw console.error(`âŒ Error deleting ${e} ${t}:`,r),r}},getCount:async(t={})=>{try{return(await service.getAll({...t,perPage:1})).pagination.total}catch(t){return console.error(`âŒ Error getting ${e} count:`,t),0}}}}},9752:(e,t,r)=>{var n=r(8491),s=r(9344),o=r(641),a=r(5389),i=r(8879),l=r(6449),c=r(3656),d=r(1882),u=r(3805),p=r(7167);e.exports=function(e,t,r){var f=l(e),m=f||c(e)||p(e);if(t=a(t,4),null==r){var h=e&&e.constructor;r=m?f?new h:[]:u(e)&&d(h)?s(i(e)):{}}return(m?n:o)(e,function(e,n,s){return t(r,e,n,s)}),r}},9764:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("file-question-mark",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]])},9770:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,s=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[s++]=a)}return o}},9771:e=>{"use strict";e.exports=function(){}},9777:(e,t,r)=>{"use strict";r.r(t),r.d(t,{create:()=>f,createLesson:()=>A,delete:()=>h,deleteFn:()=>h,deleteLesson:()=>T,duplicateLesson:()=>g,getAll:()=>d,getLesson:()=>E,getLessonStatistics:()=>_,getLessons:()=>S,getLessonsByCourse:()=>u,getLessonsByType:()=>k,getLessonsCount:()=>x,getOne:()=>p,getPublishedLessons:()=>C,lessonExists:()=>y,moveLessonToCourse:()=>N,publishLesson:()=>v,unpublishLesson:()=>j,update:()=>m,updateLesson:()=>M,updateLessonOrder:()=>w,updateLessonStatus:()=>b});var n=r(9700),s=r(8243);const o={_course_id:null,_lesson_order:1,_duration_minutes:0,_lesson_type:"text",_video_url:"",_content_type:"free",_prerequisite_lessons:[],_resources_urls:[],_completion_criteria:"view_all",_is_required:!1,_lesson_description:"",_lesson_steps:[],_has_quiz:!1,_quiz_id:null},a=["publish","draft","private","pending"],i=["view_all","pass_quiz","complete_steps","view","quiz","assignment","time","manual"],l=e=>Array.isArray(e)?e.map((e,t)=>e&&"object"==typeof e?{type:(0,s.zi)(e.type,["video","text","pdf","quiz","image","audio"],"text"),order:(0,s.o5)(e.order,t+1,1),title:(0,s.xV)(e.title),start_date:(0,s.xV)(e.start_date||""),data:e.data&&"object"==typeof e.data?e.data:{}}:null).filter(e=>null!==e):[],c=(0,n.eG)("lesson","lessons",{sanitizer:e=>{if(!e)return console.warn("âš ï¸ sanitizeLessonData - No data provided"),null;const t=(0,s.w3)(e.title),r=(0,s.w3)(e.content),n=(0,s.w3)(e.excerpt);return{id:e.id||0,title:t,content:r,excerpt:n,status:(0,s.se)(e.status,"draft"),date:e.date||"",modified:e.modified||"",slug:e.slug||"",author:e.author||0,menu_order:(0,s.o5)(e.menu_order,1,0),meta:{...o,...e.meta,_is_required:(0,s.kM)(e.meta?._is_required),_has_quiz:(0,s.kM)(e.meta?._has_quiz),_prerequisite_lessons:(0,s.E5)(e.meta?._prerequisite_lessons),_lesson_steps:l(e.meta?._lesson_steps),_resources_urls:Array.isArray(e.meta?._resources_urls)?e.meta._resources_urls:[]},_embedded:e._embedded||{},_links:e._links||{}}},validator:e=>{const t=[],r=(0,s.Kf)(e.title,"Lesson title");r&&t.push(r),e.status&&!a.includes(e.status)&&t.push(`Invalid status. Must be one of: ${a.join(", ")}`);const n=e.meta||e,o=n._course_id||e.courseId;if(console.log("ðŸ” validateLessonData - courseId:",o,"type:",typeof o),null!=o&&""!==o&&"0"!==o&&0!==o){const e=parseInt(o,10);console.log("ðŸ” validateLessonData - courseIdNum:",e,"isNaN:",isNaN(e)),(isNaN(e)||e<=0)&&t.push("Course ID must be a positive number if provided")}const l=n._completion_criteria||e.completionCriteria;return l&&!i.includes(l)&&t.push(`Invalid completion criteria. Must be one of: ${i.join(", ")}`),(0,s.vQ)(t)},transformer:e=>{var t;console.log("ðŸ”„ transformLessonDataForApi - Input:",e);const r={title:(0,s.xV)(e.title),content:(0,s.xV)(e.content||""),excerpt:(0,s.xV)(e.description||""),status:(0,s.se)(e.status,"publish"),menu_order:(0,s.o5)(e.menu_order||e.lessonOrder||1,1,0),meta:{}},n=e.courseId||e.meta?._course_id;if(null!=n&&""!==n&&"0"!==n&&0!==n){const e=(0,s.ee)(n,1);e&&e>0&&(r.meta._course_id=e)}void 0!==e.lessonOrder&&(r.meta._lesson_order=(0,s.o5)(e.lessonOrder,1,0)),void 0!==e.completionCriteria&&(r.meta._completion_criteria=(0,s.zi)(e.completionCriteria,i,"view_all")),void 0!==e.description&&(r.meta._lesson_description=(0,s.xV)(e.description));const a=e.steps||e.meta?._lesson_steps;void 0!==a&&(r.meta._lesson_steps=l(a),console.log("ðŸ”„ Steps being saved:",r.meta._lesson_steps));const c=null!==(t=e.startDate)&&void 0!==t?t:e.meta?._start_date;if(void 0!==c){if(""===c||/^\d{4}-\d{2}-\d{2}$/.test(c))r.meta._start_date=c;else{const e=new Date(c);if(isNaN(e.getTime()))r.meta._start_date="";else{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");r.meta._start_date=`${t}-${n}-${s}`}}console.log("ðŸ”„ Start date being saved:",r.meta._start_date)}const{_course_id:d,...u}=o,p={...u,...r.meta};return p._lesson_steps&&Array.isArray(p._lesson_steps)||(p._lesson_steps=[]),r.meta=p,console.log("ðŸ”„ transformLessonDataForApi - Output:",r),r},buildParams:(e={})=>{const{page:t=1,perPage:r=20,search:n="",courseId:s=null,lessonType:o=null,orderBy:a="menu_order",order:i="asc",embed:l=!0}=e,c=new URLSearchParams({page:t.toString(),per_page:r.toString(),orderby:a,order:i});if(l&&c.append("_embed","true"),n&&n.trim()&&c.append("search",n.trim()),s){const e=parseInt(s,10);Number.isInteger(e)&&e>0&&c.append("course_id",e.toString())}return o&&(c.append("meta_query[1][key]","_lesson_type"),c.append("meta_query[1][value]",o),c.append("meta_query[1][compare]","=")),c}}),d=async(e={})=>c.getAll(e),u=async(e,t={})=>{if(!e||!Number.isInteger(e)||e<=0)throw new Error("Invalid course ID provided");return console.log("ðŸŽ“ Getting lessons for course:",e),d({...t,courseId:e})},p=async(e,t={})=>c.getOne(e,t),f=async e=>c.create(e),m=async(e,t)=>c.update(e,t),h=async(e,t={})=>c.delete(e,t),g=async e=>{try{const t=await p(e);if(!t)throw new Error("Lesson not found");const r={title:`${t.title?.rendered||t.title||"Untitled"} (Copy)`,content:t.content?.rendered||t.content||"",excerpt:t.excerpt?.rendered||t.excerpt||"",status:"draft",courseId:t.meta?._course_id,lessonOrder:parseInt(t.meta?._lesson_order||"0")+1,lessonType:t.meta?._lesson_type||"mixed",description:t.meta?._lesson_description||"",steps:t.meta?._lesson_steps||[],prerequisiteLessons:t.meta?._prerequisite_lessons||[],completionCriteria:t.meta?._completion_criteria||"view",isRequired:"yes"===t.meta?._is_required,duration:t.meta?._duration_minutes||0,videoUrl:t.meta?._video_url||"",hasQuiz:"yes"===t.meta?._has_quiz};console.log("ðŸ“‹ Duplicating lesson:",e);const n=await f(r);return console.log("âœ… Lesson duplicated:",n.id),n}catch(t){throw console.error(`âŒ Error duplicating lesson ${e}:`,t),t}},x=async(e={})=>c.getCount(e),y=async e=>{try{return!!await p(e)}catch(e){return!1}},b=async(e,t)=>{if(!["publish","draft","private"].includes(t))throw new Error(`Invalid status: ${t}`);return m(e,{status:t})},v=async e=>b(e,"publish"),j=async e=>b(e,"draft"),w=async(e,t)=>m(e,{lessonOrder:t}),N=async(e,t)=>m(e,{courseId:t}),k=async(e,t={})=>d({...t,lessonType:e}),C=async(e={})=>d({...e,status:"publish"}),_=async(e={})=>{try{const t=await d({...e,perPage:100}),r={total:t.pagination.total,published:0,draft:0,byType:{},withQuizzes:0,totalDuration:0,averageDuration:0};return t.data.forEach(e=>{"publish"===e.status&&r.published++,"draft"===e.status&&r.draft++;const t=e.meta?._lesson_type||"mixed";r.byType[t]=(r.byType[t]||0)+1,"yes"===e.meta?._has_quiz&&r.withQuizzes++;const n=parseInt(e.meta?._duration_minutes||"0");r.totalDuration+=n}),r.averageDuration=t.data.length>0?Math.round(r.totalDuration/t.data.length):0,console.log("ðŸ“Š Lesson statistics:",r),r}catch(e){throw console.error("âŒ Error getting lesson statistics:",e),e}},S=d,E=p,A=f,M=m,T=h},9798:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});const n=(0,r(9407).A)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},9817:e=>{e.exports=function(e){return this.__data__.has(e)}},9888:(e,t,r)=>{"use strict";e.exports=r(8493)},9931:(e,t,r)=>{var n=r(1769),s=r(8090),o=r(8969),a=r(7797);e.exports=function(e,t){return t=n(t,e),null==(e=o(e,t))||delete e[a(s(t))]}},9935:e=>{e.exports=function(){return!1}},9999:(e,t,r)=>{var n=r(7217),s=r(8491),o=r(6547),a=r(4733),i=r(3838),l=r(3290),c=r(3007),d=r(2271),u=r(8948),p=r(2),f=r(3349),m=r(5861),h=r(6189),g=r(7199),x=r(5529),y=r(6449),b=r(3656),v=r(7730),j=r(3805),w=r(8440),N=r(5950),k=r(7241),C="[object Arguments]",_="[object Function]",S="[object Object]",E={};E[C]=E["[object Array]"]=E["[object ArrayBuffer]"]=E["[object DataView]"]=E["[object Boolean]"]=E["[object Date]"]=E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Map]"]=E["[object Number]"]=E[S]=E["[object RegExp]"]=E["[object Set]"]=E["[object String]"]=E["[object Symbol]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E["[object Error]"]=E[_]=E["[object WeakMap]"]=!1,e.exports=function e(t,r,A,M,T,P){var O,z=1&r,q=2&r,D=4&r;if(A&&(O=T?A(t,M,T,P):A(t)),void 0!==O)return O;if(!j(t))return t;var I=y(t);if(I){if(O=h(t),!z)return c(t,O)}else{var L=m(t),R=L==_||"[object GeneratorFunction]"==L;if(b(t))return l(t,z);if(L==S||L==C||R&&!T){if(O=q||R?{}:x(t),!z)return q?u(t,i(O,t)):d(t,a(O,t))}else{if(!E[L])return T?t:{};O=g(t,L,z)}}P||(P=new n);var $=P.get(t);if($)return $;P.set(t,O),w(t)?t.forEach(function(n){O.add(e(n,r,A,n,t,P))}):v(t)&&t.forEach(function(n,s){O.set(s,e(n,r,A,s,t,P))});var B=I?void 0:(D?q?f:p:q?k:N)(t);return s(B||t,function(n,s){B&&(n=t[s=n]),o(O,s,e(n,r,A,s,t,P))}),O}}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={id:e,loaded:!1,exports:{}};return s[e].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=s,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var s=Object.create(null);a.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var i=2&n&&r;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,a.d(s,o),s},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,r)=>(a.f[r](e,t),t),[])),a.u=e=>e+".js",a.miniCssF=e=>{},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r={},n="quiz-extended:",a.l=(e,t,s,o)=>{if(r[e])r[e].push(t);else{var i,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==n+s){i=u;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",n+s),i.src=e),r[e]=[t];var p=(t,n)=>{i.onerror=i.onload=null,clearTimeout(f);var s=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var n=r.length-1;n>-1&&(!e||!/^http(s?):/.test(e));)e=r[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={57:0};a.f.j=(t,r)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise((r,s)=>n=e[t]=[r,s]);r.push(n[2]=s);var o=a.p+a.u(t),i=new Error;a.l(o,r=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",i.name="ChunkLoadError",i.type=s,i.request=o,n[1](i)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,s,[o,i,l]=r,c=0;if(o.some(t=>0!==e[t])){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);l&&l(a)}for(t&&t(r);c<o.length;c++)s=o[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=globalThis.webpackChunkquiz_extended=globalThis.webpackChunkquiz_extended||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};a.r(e),a.d(e,{add:()=>To,century:()=>Zo,date:()=>Ko,day:()=>Yo,decade:()=>Jo,diff:()=>ta,endOf:()=>zo,eq:()=>qo,gt:()=>Io,gte:()=>Lo,hours:()=>Vo,inRange:()=>Uo,lt:()=>Ro,lte:()=>$o,max:()=>Fo,milliseconds:()=>Wo,min:()=>Bo,minutes:()=>Qo,month:()=>Go,neq:()=>Do,seconds:()=>Ho,startOf:()=>Oo,subtract:()=>Po,weekday:()=>ea,year:()=>Xo});var t={};a.r(t),a.d(t,{scaleBand:()=>Lb,scaleDiverging:()=>_k,scaleDivergingLog:()=>Sk,scaleDivergingPow:()=>Ak,scaleDivergingSqrt:()=>Mk,scaleDivergingSymlog:()=>Ek,scaleIdentity:()=>Nj,scaleImplicit:()=>Db,scaleLinear:()=>wj,scaleLog:()=>Pj,scaleOrdinal:()=>Ib,scalePoint:()=>$b,scalePow:()=>Bj,scaleQuantile:()=>Xj,scaleQuantize:()=>Jj,scaleRadial:()=>Wj,scaleSequential:()=>bk,scaleSequentialLog:()=>vk,scaleSequentialPow:()=>wk,scaleSequentialQuantile:()=>kk,scaleSequentialSqrt:()=>Nk,scaleSequentialSymlog:()=>jk,scaleSqrt:()=>Fj,scaleSymlog:()=>Dj,scaleThreshold:()=>Zj,scaleTime:()=>hk,scaleUtc:()=>gk,tickFormat:()=>vj});var r=a(1609),n=a.n(r),s=a(5338),o=a(2389);const i=e=>"string"==typeof e,l=()=>{let e,t;const r=new Promise((r,n)=>{e=r,t=n});return r.resolve=e,r.reject=t,r},c=e=>null==e?"":""+e,d=/###/g,u=e=>e&&e.indexOf("###")>-1?e.replace(d,"."):e,p=e=>!e||i(e),f=(e,t,r)=>{const n=i(t)?t.split("."):t;let s=0;for(;s<n.length-1;){if(p(e))return{};const t=u(n[s]);!e[t]&&r&&(e[t]=new r),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return p(e)?{}:{obj:e,k:u(n[s])}},m=(e,t,r)=>{const{obj:n,k:s}=f(e,t,Object);if(void 0!==n||1===t.length)return void(n[s]=r);let o=t[t.length-1],a=t.slice(0,t.length-1),i=f(e,a,Object);for(;void 0===i.obj&&a.length;)o=`${a[a.length-1]}.${o}`,a=a.slice(0,a.length-1),i=f(e,a,Object),i?.obj&&void 0!==i.obj[`${i.k}.${o}`]&&(i.obj=void 0);i.obj[`${i.k}.${o}`]=r},h=(e,t)=>{const{obj:r,k:n}=f(e,t);if(r&&Object.prototype.hasOwnProperty.call(r,n))return r[n]},g=(e,t,r)=>{for(const n in t)"__proto__"!==n&&"constructor"!==n&&(n in e?i(e[n])||e[n]instanceof String||i(t[n])||t[n]instanceof String?r&&(e[n]=t[n]):g(e[n],t[n],r):e[n]=t[n]);return e},x=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const b=e=>i(e)?e.replace(/[&<>"'\/]/g,e=>y[e]):e,v=[" ",",","?","!",";"],j=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}(20),w=(e,t,r=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const n=t.split(r);let s=e;for(let e=0;e<n.length;){if(!s||"object"!=typeof s)return;let t,o="";for(let a=e;a<n.length;++a)if(a!==e&&(o+=r),o+=n[a],t=s[o],void 0!==t){if(["string","number","boolean"].indexOf(typeof t)>-1&&a<n.length-1)continue;e+=a-e+1;break}s=t}return s},N=e=>e?.replace("_","-"),k={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class C{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||k,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,n){return n&&!this.debug?null:(i(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new C(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new C(this.logger,e)}}var _=new C;class S{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const r=this.observers[e].get(t)||0;this.observers[e].set(t,r+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([e,r])=>{for(let n=0;n<r;n++)e(...t)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,n])=>{for(let s=0;s<n;s++)r.apply(r,[e,...t])})}}class E extends S{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r,n={}){const s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,o=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],r&&(Array.isArray(r)?a.push(...r):i(r)&&s?a.push(...r.split(s)):a.push(r)));const l=h(this.data,a);return!l&&!t&&!r&&e.indexOf(".")>-1&&(e=a[0],t=a[1],r=a.slice(2).join(".")),!l&&o&&i(r)?w(this.data?.[e]?.[t],r,s):l}addResource(e,t,r,n,s={silent:!1}){const o=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let a=[e,t];r&&(a=a.concat(o?r.split(o):r)),e.indexOf(".")>-1&&(a=e.split("."),n=t,t=a[1]),this.addNamespaces(t),m(this.data,a,n),s.silent||this.emit("added",e,t,r,n)}addResources(e,t,r,n={silent:!1}){for(const n in r)(i(r[n])||Array.isArray(r[n]))&&this.addResource(e,t,n,r[n],{silent:!0});n.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,n,s,o={silent:!1,skipCopy:!1}){let a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),n=r,r=t,t=a[1]),this.addNamespaces(t);let i=h(this.data,a)||{};o.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?g(i,r,s):i={...i,...r},m(this.data,a,i),o.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var A={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,r,n,s){return e.forEach(e=>{t=this.processors[e]?.process(t,r,n,s)??t}),t}};const M=Symbol("i18next/PATH_KEY");function T(e,t){const{[M]:r}=e(function(){const e=[],t=Object.create(null);let r;return t.get=(n,s)=>(r?.revoke?.(),s===M?e:(e.push(s),r=Proxy.revocable(n,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}());return r.join(t?.keySeparator??".")}const P={},O=e=>!i(e)&&"boolean"!=typeof e&&"number"!=typeof e;class z extends S{constructor(e,t={}){super(),((e,t,r)=>{["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{t[e]&&(r[e]=t[e])})})(0,e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=_.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const r={...t};if(null==e)return!1;const n=this.resolve(e,r);return void 0!==n?.res}extractFromKey(e,t){let r=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===r&&(r=":");const n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const o=r&&e.indexOf(r)>-1,a=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,r)=>{t=t||"",r=r||"";const n=v.filter(e=>t.indexOf(e)<0&&r.indexOf(e)<0);if(0===n.length)return!0;const s=j.getRegExp(`(${n.map(e=>"?"===e?"\\?":e).join("|")})`);let o=!s.test(e);if(!o){const t=e.indexOf(r);t>0&&!s.test(e.substring(0,t))&&(o=!0)}return o})(e,r,n));if(o&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:i(s)?[s]:s};const o=e.split(r);(r!==n||r===n&&this.options.ns.indexOf(o[0])>-1)&&(s=o.shift()),e=o.join(n)}return{key:e,namespaces:i(s)?[s]:s}}translate(e,t,r){let n="object"==typeof t?{...t}:t;if("object"!=typeof n&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof n&&(n={...n}),n||(n={}),null==e)return"";"function"==typeof e&&(e=T(e,{...this.options,...n})),Array.isArray(e)||(e=[String(e)]);const s=void 0!==n.returnDetails?n.returnDetails:this.options.returnDetails,o=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],n),c=l[l.length-1];let d=void 0!==n.nsSeparator?n.nsSeparator:this.options.nsSeparator;void 0===d&&(d=":");const u=n.lng||this.language,p=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===u?.toLowerCase())return p?s?{res:`${c}${d}${a}`,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${d}${a}`:s?{res:a,usedKey:a,exactUsedKey:a,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:a;const f=this.resolve(e,n);let m=f?.res;const h=f?.usedKey||a,g=f?.exactUsedKey||a,x=void 0!==n.joinArrays?n.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,b=void 0!==n.count&&!i(n.count),v=z.hasDefaultValue(n),j=b?this.pluralResolver.getSuffix(u,n.count,n):"",w=n.ordinal&&b?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",N=b&&!n.ordinal&&0===n.count,k=N&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${j}`]||n[`defaultValue${w}`]||n.defaultValue;let C=m;y&&!m&&v&&(C=k);const _=O(C),S=Object.prototype.toString.apply(C);if(!(y&&C&&_&&["[object Number]","[object Function]","[object RegExp]"].indexOf(S)<0)||i(x)&&Array.isArray(C))if(y&&i(x)&&Array.isArray(m))m=m.join(x),m&&(m=this.extendTranslation(m,e,n,r));else{let t=!1,s=!1;!this.isValidLookup(m)&&v&&(t=!0,m=k),this.isValidLookup(m)||(s=!0,m=a);const i=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&s?void 0:m,l=v&&k!==m&&this.options.updateMissing;if(s||t||l){if(this.logger.log(l?"updateKey":"missingKey",u,c,a,l?k:m),o){const e=this.resolve(a,{...n,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(n.lng||this.language):e.push(n.lng||this.language);const r=(e,t,r)=>{const s=v&&r!==m?r:i;this.options.missingKeyHandler?this.options.missingKeyHandler(e,c,t,s,l,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(e,c,t,s,l,n),this.emit("missingKey",e,c,t,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,n);N&&n[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{r([e],a+t,n[`defaultValue${t}`]||k)})}):r(e,a,k))}m=this.extendTranslation(m,e,n,f,r),s&&m===a&&this.options.appendNamespaceToMissingKey&&(m=`${c}${d}${a}`),(s||t)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${d}${a}`:a,t?m:void 0,n))}else{if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,C,{...n,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(f.res=e,f.usedParams=this.getUsedParamsDetails(n),f):e}if(o){const e=Array.isArray(C),t=e?[]:{},r=e?g:h;for(const e in C)if(Object.prototype.hasOwnProperty.call(C,e)){const s=`${r}${o}${e}`;t[e]=v&&!m?this.translate(s,{...n,defaultValue:O(k)?k[e]:void 0,joinArrays:!1,ns:l}):this.translate(s,{...n,joinArrays:!1,ns:l}),t[e]===s&&(t[e]=C[e])}m=t}}return s?(f.res=m,f.usedParams=this.getUsedParamsDetails(n),f):m}extendTranslation(e,t,r,n,s){if(this.i18nFormat?.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const o=i(e)&&(void 0!==r?.interpolation?.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(o){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=r.replace&&!i(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,r.lng||this.language||n.usedLng,r),o){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(r.nest=!1)}!r.lng&&n&&n.res&&(r.lng=this.language||n.usedLng),!1!==r.nest&&(e=this.interpolator.nest(e,(...e)=>s?.[0]!==e[0]||r.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,a=i(o)?[o]:o;return null!=e&&a?.length&&!1!==r.applyPostProcessor&&(e=A.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e,t={}){let r,n,s,o,a;return i(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(r))return;const l=this.extractFromKey(e,t),c=l.key;n=c;let d=l.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const u=void 0!==t.count&&!i(t.count),p=u&&!t.ordinal&&0===t.count,f=void 0!==t.context&&(i(t.context)||"number"==typeof t.context)&&""!==t.context,m=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);d.forEach(e=>{this.isValidLookup(r)||(a=e,P[`${m[0]}-${e}`]||!this.utils?.hasLoadedNamespace||this.utils?.hasLoadedNamespace(a)||(P[`${m[0]}-${e}`]=!0,this.logger.warn(`key "${n}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(n=>{if(this.isValidLookup(r))return;o=n;const a=[c];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(a,c,n,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(n,t.count,t));const r=`${this.options.pluralSeparator}zero`,s=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&0===e.indexOf(s)&&a.push(c+e.replace(s,this.options.pluralSeparator)),a.push(c+e),p&&a.push(c+r)),f){const n=`${c}${this.options.contextSeparator||"_"}${t.context}`;a.push(n),u&&(t.ordinal&&0===e.indexOf(s)&&a.push(n+e.replace(s,this.options.pluralSeparator)),a.push(n+e),p&&a.push(n+r))}}let i;for(;i=a.pop();)this.isValidLookup(r)||(s=i,r=this.getResource(n,e,i,t))}))})}),{res:r,usedKey:n,exactUsedKey:s,usedLng:o,usedNS:a}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,r,n={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(e,t,r,n):this.resourceStore.getResource(e,t,r,n)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!i(e.replace);let n=r?e.replace:e;if(r&&void 0!==e.count&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const e of t)delete n[e]}return n}static hasDefaultValue(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&"defaultValue"===t.substring(0,12)&&void 0!==e[t])return!0;return!1}}class q{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=_.create("languageUtils")}getScriptPartFromCode(e){if(!(e=N(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=N(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(i(e)&&e.indexOf("-")>-1){let t;try{t=Intl.getCanonicalLocales(e)[0]}catch(e){}return t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const r=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(r)||(t=r)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const r=this.getScriptPartFromCode(e);if(this.isSupportedCode(r))return t=r;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),i(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),n=[],s=e=>{e&&(this.isSupportedCode(e)?n.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return i(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):i(e)&&s(this.formatLanguageCode(e)),r.forEach(e=>{n.indexOf(e)<0&&s(this.formatLanguageCode(e))}),n}}const D={zero:0,one:1,two:2,few:3,many:4,other:5},I={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class L{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=_.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const r=N("dev"===e?"en":e),n=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:n});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let o;try{o=new Intl.PluralRules(r,{type:n})}catch(r){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),I;if(!e.match(/-|_/))return I;const n=this.languageUtils.getLanguagePartFromCode(e);o=this.getRule(n,t)}return this.pluralRulesCache[s]=o,o}needsPlural(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(e,t,r={}){return this.getSuffixes(e,r).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let r=this.getRule(e,t);return r||(r=this.getRule("dev",t)),r?r.resolvedOptions().pluralCategories.sort((e,t)=>D[e]-D[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,r={}){const n=this.getRule(e,r);return n?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,r))}}const R=(e,t,r,n=".",s=!0)=>{let o=((e,t,r)=>{const n=h(e,r);return void 0!==n?n:h(t,r)})(e,t,r);return!o&&s&&i(r)&&(o=w(e,r,n),void 0===o&&(o=w(t,r,n))),o},$=e=>e.replace(/\$/g,"$$$$");class B{constructor(e={}){this.logger=_.create("interpolator"),this.options=e,this.format=e?.interpolation?.format||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:n,prefix:s,prefixEscaped:o,suffix:a,suffixEscaped:i,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:p,nestingSuffix:f,nestingSuffixEscaped:m,nestingOptionsSeparator:h,maxReplaces:g,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:b,this.escapeValue=void 0===r||r,this.useRawValueToEscape=void 0!==n&&n,this.prefix=s?x(s):o||"{{",this.suffix=a?x(a):i||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?x(u):p||x("$t("),this.nestingSuffix=f?x(f):m||x(")"),this.nestingOptionsSeparator=h||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e?.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,r,n){let s,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=e=>{if(e.indexOf(this.formatSeparator)<0){const s=R(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,r,{...n,...t,interpolationkey:e}):s}const s=e.split(this.formatSeparator),o=s.shift().trim(),a=s.join(this.formatSeparator).trim();return this.format(R(t,l,o,this.options.keySeparator,this.options.ignoreJSONStructure),a,r,{...n,...t,interpolationkey:o})};this.resetRegExp();const u=n?.missingInterpolationHandler||this.options.missingInterpolationHandler,p=void 0!==n?.interpolation?.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>$(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?$(this.escape(e)):$(e)}].forEach(t=>{for(a=0;s=t.regex.exec(e);){const r=s[1].trim();if(o=d(r),void 0===o)if("function"==typeof u){const t=u(e,s,n);o=i(t)?t:""}else if(n&&Object.prototype.hasOwnProperty.call(n,r))o="";else{if(p){o=s[0];continue}this.logger.warn(`missed to pass in variable ${r} for interpolating ${e}`),o=""}else i(o)||this.useRawValueToEscape||(o=c(o));const l=t.safeValue(o);if(e=e.replace(s[0],l),p?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,r={}){let n,s,o;const a=(e,t)=>{const r=this.nestingOptionsSeparator;if(e.indexOf(r)<0)return e;const n=e.split(new RegExp(`${r}[ ]*{`));let s=`{${n[1]}`;e=n[0],s=this.interpolate(s,o);const a=s.match(/'/g),i=s.match(/"/g);((a?.length??0)%2==0&&!i||i.length%2!=0)&&(s=s.replace(/'/g,'"'));try{o=JSON.parse(s),t&&(o={...t,...o})}catch(t){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,t),`${e}${r}${s}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let l=[];o={...r},o=o.replace&&!i(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const d=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(-1!==d&&(l=n[1].slice(d).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),n[1]=n[1].slice(0,d)),s=t(a.call(this,n[1].trim(),o),o),s&&n[0]===e&&!i(s))return s;i(s)||(s=c(s)),s||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${e}`),s=""),l.length&&(s=l.reduce((e,t)=>this.format(e,t,r.lng,{...r,interpolationkey:n[1].trim()}),s.trim())),e=e.replace(n[0],s),this.regexp.lastIndex=0}return e}}const F=e=>{const t={};return(r,n,s)=>{let o=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(o={...o,[s.interpolationkey]:void 0});const a=n+JSON.stringify(o);let i=t[a];return i||(i=e(N(n),s),t[a]=i),i(r)}},U=e=>(t,r,n)=>e(N(r),n)(t);class W{constructor(e={}){this.logger=_.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const r=t.cacheInBuiltFormats?F:U;this.formats={number:r((e,t)=>{const r=new Intl.NumberFormat(e,{...t});return e=>r.format(e)}),currency:r((e,t)=>{const r=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>r.format(e)}),datetime:r((e,t)=>{const r=new Intl.DateTimeFormat(e,{...t});return e=>r.format(e)}),relativetime:r((e,t)=>{const r=new Intl.RelativeTimeFormat(e,{...t});return e=>r.format(e,t.range||"day")}),list:r((e,t)=>{const r=new Intl.ListFormat(e,{...t});return e=>r.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=F(t)}format(e,t,r,n={}){const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(e=>e.indexOf(")")>-1)){const e=s.findIndex(e=>e.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}return s.reduce((e,t)=>{const{formatName:s,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const r={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);"currency"===t&&s.indexOf(":")<0?r.currency||(r.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?r.range||(r.range=s.trim()):s.split(";").forEach(e=>{if(e){const[t,...n]=e.split(":"),s=n.join(":").trim().replace(/^'+|'+$/g,""),o=t.trim();r[o]||(r[o]=s),"false"===s&&(r[o]=!1),"true"===s&&(r[o]=!0),isNaN(s)||(r[o]=parseInt(s,10))}})}return{formatName:t,formatOptions:r}})(t);if(this.formats[s]){let t=e;try{const a=n?.formatParams?.[n.interpolationkey]||{},i=a.locale||a.lng||n.locale||n.lng||r;t=this.formats[s](e,i,{...o,...n,...a})}catch(e){this.logger.warn(e)}return t}return this.logger.warn(`there was no format function for ${s}`),e},e)}}class H extends S{constructor(e,t,r,n={}){super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=_.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,n.backend,n)}queueLoad(e,t,r,n){const s={},o={},a={},i={};return e.forEach(e=>{let n=!0;t.forEach(t=>{const a=`${e}|${t}`;!r.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===o[a]&&(o[a]=!0):(this.state[a]=1,n=!1,void 0===o[a]&&(o[a]=!0),void 0===s[a]&&(s[a]=!0),void 0===i[t]&&(i[t]=!0)))}),n||(a[e]=!0)}),(Object.keys(s).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(s),pending:Object.keys(o),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(i)}}loaded(e,t,r){const n=e.split("|"),s=n[0],o=n[1];t&&this.emit("failedLoading",s,o,t),!t&&r&&this.store.addResourceBundle(s,o,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const a={};this.queue.forEach(r=>{((e,t,r)=>{const{obj:n,k:s}=f(e,t,Object);n[s]=n[s]||[],n[s].push(r)})(r.loaded,[s],o),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(r,e),t&&r.errors.push(t),0!==r.pendingCount||r.done||(Object.keys(r.loaded).forEach(e=>{a[e]||(a[e]={});const t=r.loaded[e];t.length&&t.forEach(t=>{void 0===a[e][t]&&(a[e][t]=!0)})}),r.done=!0,r.errors.length?r.callback(r.errors):r.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(e=>!e.done)}read(e,t,r,n=0,s=this.retryTimeout,o){if(!e.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:r,tried:n,wait:s,callback:o});this.readingCalls++;const a=(a,i)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&i&&n<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,r,n+1,2*s,o)},s):o(a,i)},i=this.backend[r].bind(this.backend);if(2!==i.length)return i(e,t,a);try{const r=i(e,t);r&&"function"==typeof r.then?r.then(e=>a(null,e)).catch(a):a(null,r)}catch(e){a(e)}}prepareLoading(e,t,r={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();i(e)&&(e=this.languageUtils.toResolveHierarchy(e)),i(t)&&(t=[t]);const s=this.queueLoad(e,t,r,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e,t=""){const r=e.split("|"),n=r[0],s=r[1];this.read(n,s,"read",void 0,void 0,(r,o)=>{r&&this.logger.warn(`${t}loading namespace ${s} for language ${n} failed`,r),!r&&o&&this.logger.log(`${t}loaded namespace ${s} for language ${n}`,o),this.loaded(e,r,o)})}saveMissing(e,t,r,n,s,o={},a=()=>{}){if(!this.services?.utils?.hasLoadedNamespace||this.services?.utils?.hasLoadedNamespace(t)){if(null!=r&&""!==r){if(this.backend?.create){const i={...o,isUpdate:s},l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,r,n,i):l(e,t,r,n),s&&"function"==typeof s.then?s.then(e=>a(null,e)).catch(a):a(null,s)}catch(e){a(e)}else l(e,t,r,n,a,i)}e&&e[0]&&this.store.addResource(e[0],t,r,n)}}else this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const Q=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),i(e[1])&&(t.defaultValue=e[1]),i(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const r=e[3]||e[2];Object.keys(r).forEach(e=>{t[e]=r[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),V=e=>(i(e.ns)&&(e.ns=[e.ns]),i(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),i(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e),Y=()=>{};class K extends S{constructor(e={},t){var r;if(super(),this.options=V(e),this.services={},this.logger=_,this.modules={external:[]},r=this,Object.getOwnPropertyNames(Object.getPrototypeOf(r)).forEach(e=>{"function"==typeof r[e]&&(r[e]=r[e].bind(r))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(i(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const r=Q();this.options={...r,...this.options,...V(e)},this.options.interpolation={...r.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const n=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?_.init(n(this.modules.logger),this.options):_.init(null,this.options),e=this.modules.formatter?this.modules.formatter:W;const t=new q(this.options);this.store=new E(this.options.resources,this.options);const s=this.services;s.logger=_,s.resourceStore=this.store,s.languageUtils=t,s.pluralResolver=new L(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=n(e),s.formatter.init&&s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new B(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new H(n(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(s.languageDetector=n(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=n(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new z(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Y),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const s=l(),o=()=>{const e=(e,r)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(r),t(e,r)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?o():setTimeout(o,0),s}loadResources(e,t=Y){let r=t;const n=i(e)?e:this.language;if("function"==typeof e&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===n?.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return r();const e=[],t=t=>{t&&"cimode"!==t&&this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};n?t(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e)),this.options.preload?.forEach?.(e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),r(e)})}else r(null)}reloadResources(e,t,r){const n=l();return"function"==typeof e&&(r=e,e=void 0),"function"==typeof t&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Y),this.services.backendConnector.reload(e,t,e=>{n.resolve(),r(e)}),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&A.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const r=l();this.emit("languageChanging",e);const n=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(s,o)=>{o?this.isLanguageChangingTo===e&&(n(o),this.translator.changeLanguage(o),this.isLanguageChangingTo=void 0,this.emit("languageChanged",o),this.logger.log("languageChanged",o)):this.isLanguageChangingTo=void 0,r.resolve((...e)=>this.t(...e)),t&&t(s,(...e)=>this.t(...e))},o=t=>{e||t||!this.services.languageDetector||(t=[]);const r=i(t)?t:t&&t[0],o=this.store.hasLanguageSomeTranslations(r)?r:this.services.languageUtils.getBestMatchFromCodes(i(t)?[t]:t);o&&(this.language||n(o),this.translator.language||this.translator.changeLanguage(o),this.services.languageDetector?.cacheUserLanguage?.(o)),this.loadResources(o,e=>{s(e,o)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),r}getFixedT(e,t,r){const n=(e,t,...s)=>{let o;o="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(s)):{...t},o.lng=o.lng||n.lng,o.lngs=o.lngs||n.lngs,o.ns=o.ns||n.ns,""!==o.keyPrefix&&(o.keyPrefix=o.keyPrefix||r||n.keyPrefix);const a=this.options.keySeparator||".";let i;return o.keyPrefix&&Array.isArray(e)?i=e.map(e=>("function"==typeof e&&(e=T(e,{...this.options,...t})),`${o.keyPrefix}${a}${e}`)):("function"==typeof e&&(e=T(e,{...this.options,...t})),i=o.keyPrefix?`${o.keyPrefix}${a}${e}`:e),this.t(i,o)};return i(e)?n.lng=e:n.lngs=e,n.ns=t,n.keyPrefix=r,n}t(...e){return this.translator?.translate(...e)}exists(...e){return this.translator?.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],n=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===r.toLowerCase())return!0;const o=(e,t)=>{const r=this.services.backendConnector.state[`${e}|${t}`];return-1===r||0===r||2===r};if(t.precheck){const e=t.precheck(this,o);if(void 0!==e)return e}return!(!this.hasResourceBundle(r,e)&&this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages)&&(!o(r,e)||n&&!o(s,e)))}loadNamespaces(e,t){const r=l();return this.options.ns?(i(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=l();i(e)&&(e=[e]);const n=this.options.preload||[],s=e.filter(e=>n.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return s.length?(this.options.preload=n.concat(s),this.loadResources(e=>{r.resolve(),t&&t(e)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(e){}const t=this.services?.languageUtils||new q(Q());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){return new K(e,t)}cloneInstance(e={},t=Y){const r=e.forkResourceStore;r&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},s=new K(n);if(void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e)),["store","services","language"].forEach(e=>{s[e]=this[e]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},r){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((r,n)=>(r[n]={...e[t][n]},r),e[t]),e),{});s.store=new E(e,n),s.services.resourceStore=s.store}return s.translator=new z(s.services,n),s.translator.on("*",(e,...t)=>{s.emit(e,...t)}),s.init(n,t),s.translator.options=n,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const G=K.createInstance();G.createInstance=K.createInstance,G.createInstance,G.dir,G.init,G.loadResources,G.reloadResources,G.use,G.changeLanguage,G.getFixedT,G.t,G.exists,G.setDefaultNamespace,G.hasLoadedNamespace,G.loadNamespaces,G.loadLanguages;const X=JSON.parse('{"common":{"save":"Save","cancel":"Cancel","delete":"Delete","edit":"Edit","remove":"Remove","duplicate":"Duplicate","view":"View","loading":"Loading...","uploading":"Uploading...","search":"Search","filter":"Filter","reset":"Reset","refresh":"Refresh","actions":"Actions","status":"Status","published":"Published","draft":"Draft","private":"Private","clearFilters":"Clear All Filters","noResults":"No results found","loadingMore":"Loading more...","endOfList":"You\'ve reached the end of the list.","updating":"Updating...","searching":"Searching...","filtering":"Filtering...","processing":"Processing...","optional":"Optional","required":"Required","all":"All","yes":"Yes","no":"No","back":"Back","next":"Next","previous":"Previous","close":"Close","settings":"Settings","questions":"Questions","select":"Select...","unlimited":"Unlimited","saving":"Saving...","add":"Add","added":"Added","createNew":"Create New","easy":"Easy","medium":"Medium","intermediate":"Intermediate","hard":"Hard","featureComingSoon":"Feature coming soon!","found":"found","quiz":"Quiz","progress":"Progress","of":"of","lastSaved":"Last saved","untitled":"Untitled","ago":"","days":"days ago","day":"day ago","hours":"hours ago","hour":"hour ago","minutes":"minutes ago","minute":"minute ago","justNow":"Just now","noLimit":"No limit","selectAll":"Select all","allSelected":"All selected","allTopics":"All topics","allLessons":"All lessons","confirm":"Confirm","openInNewTab":"Open in new tab","download":"Download"},"errors":{"fetchQuiz":"Failed to load quiz data.","saveQuiz":"Failed to save the quiz.","loadQuestions":"Failed to load quiz questions. Some questions may not exist or be inaccessible.","createLesson":"Failed to create theme","saveMaterial":"Failed to save material","deleteMaterial":"Failed to delete material","deleteTheme":"Failed to delete theme","saveOrder":"Failed to save order"},"sidebar":{"myDesk":"My Desk","studyPlanner":"Courses","test":"Test","statistics":"Statistics","supportMaterial":"Support Material","videosClasses":"Videos / Classes","profile":"My Profile","myAccount":"My Account","books":"Books","logout":"Log Out","exitCampus":"Exit Campus","lightMode":"Light Mode","darkMode":"Dark Mode","expand":"Expand","collapse":"Collapse","logoAlt":"Company Logo","logoText":"Your Logo","onlineClasses":"Online Classes","menu":"Menu","quickMenu":"Quick Menu"},"header":{"notifications":"Notifications","messages":"Messages"},"messages":{"totalMessages":"messages","unread":"unread","loading":"Loading messages...","error":"Error loading messages","emptyInbox":"Your inbox is empty","emptyInboxDescription":"You don\'t have any messages right now. When you receive feedback on your questions, they will appear here.","selectToRead":"Select a message to read","system":"System","yesterday":"Yesterday","markAsRead":"Mark as read","delete":"Delete","loadMore":"Load more messages","you":"Your original message","yourOriginalMessage":"Your original message","adminResponse":"Response","contactSupport":"This message is read-only. To respond, use the feedback feature in the quiz questions."},"courses":{"title":"Courses","description":"Create and manage courses with topics, pricing, and enrollments","addNew":"Add New Course","createCourse":"Create Course","editCourse":"Edit Course","viewCourse":"View Course","duplicateCourse":"Duplicate Course","deleteCourse":"Delete Course","noCourses":"No courses found","noCoursesDescription":"You haven\'t created any courses yet.","searchPlaceholder":"Search courses...","loadingCourses":"Loading courses...","loadingMoreCourses":"Loading more courses...","courseContent":"Course Content","myCourses":"My Courses","progress":"Progress","noImage":"No image","test":"Test","material":"Material","videos":"Videos","dashboard":"My Campus","studyPlanner":"Study Planner","tests":"Test","testGenerator":"Test Generator","selfPacedTests":"Self-Paced Tests","selfPacedPractice":"Self-Paced Practice","untitledLesson":"Untitled Lesson","testBrowser":"Test Browser","testHistory":"Test History","supportMaterial":"Support Material","videosSection":"Videos","videoClasses":"Video Classes","liveClasses":"Live Classes","statistics":"Statistics","noContent":"No content available","noContentDescription":"This course has no content added yet","overallProgress":"Overall Progress","contentProgress":"Content Progress","completed":"completed","remaining":"remaining","testsCompleted":"Tests Completed","totalProgress":"Total Progress","questionTypes":"Question Types","favorites":"Favorites","failed":"Failed","atRisk":"At Risk","notAnswered":"Unanswered","fields":{"title":"Course Title","description":"Description","excerpt":"Short Description","image":"Featured Image","category":"Category","difficulty":"Difficulty","price":"Price","salePrice":"Sale Price","productType":"Product Type","duration":"Duration","topics":"Topics","students":"Students","enrolled":"Enrolled","completion":"Completion","status":"Status","startDate":"Start Date","endDate":"End Date","position":"Display Position","maxStudents":"Maximum Students","difficultyLevel":"Difficulty Level"},"category":{"label":"Category","all":"All Categories","programming":"Programming","design":"Design","business":"Business","marketing":"Marketing","photography":"Photography"},"difficulty":{"label":"Difficulty","all":"All Levels","beginner":"Beginner","intermediate":"Intermediate","advanced":"Advanced","expert":"Expert"},"difficultyLevels":{"easy":"Easy","medium":"Medium","hard":"Hard"},"status":{"label":"Status","all":"All Statuses","publish":"Published","draft":"Draft","private":"Private"},"priceFilter":{"label":"Price","all":"All Prices","free":"Free","paid":"Paid","premium":"Premium ($100+)"},"stats":{"totalCourses":"Total Courses","totalStudents":"Students","totalTopics":"Topics","averagePrice":"Avg. Price","revenue":"Revenue","totalRevenue":"Total Revenue","featuredCourses":"Featured Courses","completionRate":"Completion Rate","averageDuration":"Avg. Duration"},"units":{"hours":"hours","hour":"hour","weeks":"weeks","week":"week","topics":"topics","topic":"topic","students":"students","student":"student","free":"Free","duration":"duration"},"tabs":{"basic":"Basic Info","taxonomies":"Categories & Tags","pricing":"Pricing","schedule":"Schedule","topics":"Topics","settings":"Settings"},"taxonomies":{"categories":"Categories","topics":"Topics","difficulty":"Difficulty","providers":"Providers","courseTypes":"Course Types"},"placeholders":{"title":"Enter course title...","excerpt":"Short description for cards and previews...","content":"Full course description, what students will learn...","newCategory":"New category name..."},"actions":{"uploadImage":"Upload Image","addCategory":"Add New","saveAndCreate":"Save & Create Another"},"hints":{"optional":"Optional","salePrice":"If set, this will be shown as the discounted price","startDate":"When the course becomes available to students","endDate":"When the course closes or expires (optional)","duration":"Estimated time to complete the course","createTopics":"Create topics first to assign them to this course","position":"Lower numbers appear first in the course list","maxStudents":"0 = unlimited enrollment","difficultyLevel":"This is a meta field, different from the taxonomy","image":"Recommended size: 1200x675px. Max 5MB."},"labels":{"pricePreview":"Price Preview","schedulePreview":"Schedule Preview","selected":"selected"},"info":{"woocommerce":"WooCommerce Integration","woocommerceDesc":"A WooCommerce product will be automatically created/updated when you save this course."},"validation":{"titleRequired":"Title is required","contentRequired":"Description is required","priceInvalid":"Price must be greater than 0","endDateInvalid":"End date must be after start date","positionInvalid":"Position must be a number","fixErrors":"Please fix the errors before saving"},"messages":{"createSuccess":"Course created successfully","updateSuccess":"Course updated successfully","deleteSuccess":"Course deleted successfully","duplicateSuccess":"Course duplicated successfully","createError":"Error creating course","updateError":"Error updating course","deleteError":"Error deleting course","duplicateError":"Error duplicating course","deleteConfirmTitle":"Delete Course","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone and will also remove all associated topics.","found":"{{count}} course found","found_plural":"{{count}} courses found","noCategories":"No categories available","noTopics":"No topics available yet"},"students":{"title":"Students","enrolledCount":"enrolled students","addStudent":"Add Student","name":"Name","email":"Email","avgScore":"Avg Score","actions":"Actions","remove":"Remove","enroll":"Enroll","noStudents":"No enrolled students","noStudentsDescription":"There are no students enrolled in this course yet.","searchPlaceholder":"Search user by name or email...","searchHint":"Type at least 2 characters to search","minSearchChars":"Type at least 2 characters","noResults":"No users found","confirmUnenroll":"Confirm removal","confirmUnenrollMessage":"Are you sure you want to remove {{name}} from this course?","enrollSuccess":"Student enrolled successfully","unenrollSuccess":"Student removed from course","ghost":"Ghost","ghostUsers":{"title":"Ghost Users","generate":"Generate Ghosts","generateDescription":"Generate ghost users to simulate activity in the course ranking.","count":"Count","generating":"Generating...","deleteAll":"Delete Ghosts","deleteAllConfirm":"Delete All Ghosts","deleteConfirmMessage":"Are you sure you want to delete all ghost users from this course? This will also delete their test attempts.","deleting":"Deleting...","generateSuccess":"{{count}} ghost users generated successfully","deleteSuccess":"{{count}} ghost users deleted","noGhosts":"No ghost users in this course","errors":{"generate":"Error generating ghost users","delete":"Error deleting ghost users"}},"errors":{"loadStudents":"Error loading students","enroll":"Error enrolling student","unenroll":"Error removing student"}}},"topics":{"title":"Topics","description":"Create and manage interactive topics with multiple content types","addNew":"Add New Topic","createTopic":"Create Topic","editTopic":"Edit Topic","viewTopic":"View Topic","duplicateTopic":"Duplicate Topic","deleteTopic":"Delete Topic","noTopics":"No topics found","noTopicsDescription":"You haven\'t created any topics yet.","searchPlaceholder":"Search topics by title...","loadingTopics":"Loading topics...","loadingMoreTopics":"Loading more topics...","fields":{"title":"Topic Title","description":"Description","content":"General Content","course":"Course","topicType":"Topic Type","topicOrder":"Topic Order","status":"Status","steps":"Content Steps","prerequisiteTopics":"Prerequisite Topics","completionCriteria":"Completion Criteria","isRequired":"Is Required","duration":"Duration","resources":"Resources"},"topicType":{"label":"Topic Type","all":"All Types","video":"Video","text":"Text Content","mixed":"Mixed Content","quiz":"Quiz","interactive":"Interactive"},"status":{"label":"Status","all":"All Statuses","publish":"Published","draft":"Draft","private":"Private"},"course":{"label":"Course","all":"All Courses","select":"Select a course...","required":"Course is required"},"stats":{"totalTopics":"Total Topics","videoTopics":"Video Topics","textTopics":"Text Topics","mixedTopics":"Mixed Topics","totalSteps":"Total Steps","averageSteps":"Avg. Steps/Topic","completedTopics":"Completed Topics","requiredTopics":"Required Topics"},"steps":{"title":"Content Steps","description":"Add and organize the content steps for this topic","addStep":"Add Step","addFirstStep":"Add First Step","noSteps":"This topic has no content steps yet.","noStepsDescription":"Steps allow you to organize content into manageable sections.","stepTitle":"Step Title","stepType":"Step Type","required":"At least one step is required","allStepsMustHaveTitle":"All steps must have a title"},"stepTypes":{"video":{"label":"Video","description":"Video content","videoUrl":"Video URL","duration":"Duration (minutes)","autoplay":"Autoplay","subtitlesUrl":"Subtitles URL"},"text":{"label":"Text Content","description":"Rich text content","content":"Content","estimatedTime":"Estimated Time (minutes)"},"pdf":{"label":"PDF Document","description":"Downloadable PDF file","fileUrl":"File URL","fileName":"File Name","fileSize":"File Size","downloadable":"Allow Download"},"quiz":{"label":"Quiz","description":"Knowledge assessment","quizId":"Quiz","passingScore":"Passing Score","maxAttempts":"Max Attempts","required":"Required to Complete"},"image":{"label":"Image","description":"Visual content","imageUrl":"Image URL","altText":"Alt Text","caption":"Caption","lightbox":"Enable Lightbox"},"audio":{"label":"Audio","description":"Audio content","audioUrl":"Audio URL","duration":"Duration (minutes)","transcriptUrl":"Transcript URL"}},"tabs":{"basic":"Basic Info","steps":"Content Steps","settings":"Advanced Settings"},"completionCriteria":{"label":"Completion Criteria","viewAll":"View All Content","passQuiz":"Pass Quiz","completeSteps":"Complete All Steps"},"placeholders":{"title":"Enter topic title...","description":"Brief description of the topic...","content":"General topic content (optional)...","stepTitle":"Enter step title...","videoUrl":"https://... (Video URL)","imageUrl":"https://... (Image URL)","audioUrl":"https://... (Audio URL)","pdfUrl":"https://... (PDF URL)"},"hints":{"course":"The topic must be associated with a course","topicType":"The type determines how the topic is presented","description":"This description appears on cards and previews","content":"This content appears before the topic steps. HTML is supported.","topicOrder":"Order of this topic within the course","steps":"Organize content into manageable steps","completionCriteria":"What the student must do to complete this topic","isRequired":"If checked, students must complete this topic","prerequisiteTopics":"Topics that must be completed before this one"},"actions":{"addStep":"Add Step","removeStep":"Remove Step","moveUp":"Move Up","moveDown":"Move Down","expandStep":"Expand Step","collapseStep":"Collapse Step"},"validation":{"titleRequired":"Title is required","courseRequired":"You must select a course","stepsRequired":"At least one step is required","stepTitleRequired":"Step title is required","videoUrlRequired":"Video URL is required","imageUrlRequired":"Image URL is required","audioUrlRequired":"Audio URL is required","pdfUrlRequired":"PDF URL is required","quizRequired":"You must select a quiz","fixErrors":"Please fix the errors before saving"},"messages":{"createSuccess":"Topic created successfully","updateSuccess":"Topic updated successfully","deleteSuccess":"Topic deleted successfully","duplicateSuccess":"Topic duplicated successfully","createError":"Error creating topic","updateError":"Error updating topic","deleteError":"Error deleting topic","duplicateError":"Error duplicating topic","deleteConfirmTitle":"Delete Topic","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} topic found","found_plural":"{{count}} topics found","noCourses":"No courses available","noQuizzes":"No quizzes available"},"filters":{"course":"Filter by Course","type":"Filter by Type","status":"Filter by Status","clearFilters":"Clear Filters"}},"books":{"title":"Books","description":"Description","woocommerceReminder":"Remember to register the book in WooCommerce so it is available for purchase","createBook":"Create Book","editBook":"Edit Book","deleteBook":"Delete Book","searchPlaceholder":"Search books...","allStatus":"All statuses","noPdf":"No PDF","untitled":"Untitled Book","linkedTo":"Linked to","emptyState":"No books created yet.","createFirst":"Create the first book","noResults":"No books found matching those criteria.","titleRequired":"Title is required","pdfFile":"PDF File","featuredImage":"Cover Image","startDate":"Start date","endDate":"End date","selectImage":"Select cover image","uploading":"Uploading...","selectPdf":"Select PDF file","uploadFailed":"Failed to upload file","wcProduct":"WooCommerce Product","linkProduct":"Link product","unlink":"Unlink","searchProducts":"Search products...","wcNotActive":"WooCommerce is not active","noProducts":"No products found","wcProductHelp":"Linking this book to a WooCommerce product allows you to control access based on purchases.","confirmDelete":"Are you sure you want to delete this book?","myBooks":"My Books","myBooksDescription":"Download the books you have purchased","loadingBooks":"Loading books...","noBooks":"No books available","noBooksDescription":"You haven\'t purchased any books yet. When you buy a product with an associated book, it will appear here.","download":"Download PDF","downloading":"Downloading...","noDownload":"Not available","updates":"Updates","viewChapters":"View Updates","fullVersion":"Full Version","fullPdf":"Complete Book (PDF)","notStarted":"Not started","ended":"Ended","noUpdates":"No updates","downloads":"Available Downloads"},"quizzes":{"title":"Quizzes","description":"Create and manage quizzes to assess student learning","timeRemaining":"Time Remaining","addNew":"Add New Quiz","createQuiz":"Create Quiz","editQuiz":"Edit Quiz","viewQuiz":"View Quiz","deleteQuiz":"Delete Quiz","duplicateQuiz":"Duplicate Quiz","untitled":"Untitled Quiz","noQuizzes":"No quizzes found","noQuizzesDescription":"You haven\'t created any quizzes yet.","searchPlaceholder":"Search quizzes...","noDetailedResults":"No detailed results to show.","loadingQuizzes":"Loading quizzes...","loadingResults":"Loading quiz results...","quizResults":"Quiz Results","createNew":"Create New Quiz","editTitle":"Editing: {{title}}","form":{"title":"Quiz Title","course":"Course","category":"Category","difficulty":"Difficulty","startDate":"Start Date","instructions":"Instructions","passingScore":"Passing Score (%)","timeLimit":"Time Limit (mins)","maxAttempts":"Max Attempts","randomize":"Randomize Questions","showResults":"Show Results After Completion","negativeScoring":"Enable Negative Scoring","addQuestions":"Add Questions from Bank","searchPlaceholder":"Search questions by title...","selectedQuestions":"Selected Questions","noQuestions":"No questions have been added yet."},"fields":{"title":"Quiz Title","instructions":"Instructions","course":"Course","category":"Category","difficulty":"Difficulty","quizType":"Quiz Type","passingScore":"Passing Score","timeLimit":"Time Limit","maxAttempts":"Max Attempts","questions":"Questions","totalPoints":"Total Points","randomizeQuestions":"Randomize Questions","showResults":"Show Results","enableNegativeScoring":"Enable Negative Scoring"},"question":{"unanswered":"Unanswered","answered":"Answered","withRisk":"At Risk","clearSelection":"Clear selection","answerExplanation":"Answer Explanation","noExplanationAvailable":"No explanation available for this question.","questionStatistics":"Question Statistics","failureRate":"Failure Rate","difficultQuestion":"This is a difficult question. Many students get it wrong. Take your time to think about it carefully.","noStatisticsAvailable":"Not enough data to show statistics for this question.","markWithRisk":"Mark at risk"},"reviewedQuestion":{"correct":"Correct","incorrect":"Incorrect","unanswered":"Unanswered","withRisk":"With risk","markFavorite":"Mark as favorite","removeFromFavorites":"Remove from favorites","addComment":"Add question","challenge":"Challenge","questionStatistics":"Question statistics","failedBy":"This question has been failed by {{percentage}}% of students.","answerExplanation":"Answer explanation","errorInvalidData":"Error: Invalid question data or result provided.","correctAnswerIs":"The correct answer is"},"feedbackModal":{"successTitle":"Message Sent!","successMessage":"Thank you for your collaboration. We have received your message.","close":"Close","titleChallenge":"Challenge Question","titleFeedback":"Question","question":"Question","messageType":"Message Type","optionFeedback":"Question","optionChallenge":"Challenge","yourMessage":"Your message","placeholderChallenge":"Explain why you think the question or its answers are incorrect...","placeholderFeedback":"Write your question here...","errorEmptyMessage":"The message cannot be empty.","errorSending":"Error sending the message.","cancel":"Cancel","send":"Send Message","sending":"Sending..."},"resultsSidebar":{"title":"Results Summary","score":"Score","scoreWithRisk":"Score (with risk)","timeSpent":"Time Spent","questionsMap":"Questions Map","questionUnanswered":"Question {{number}}: Unanswered","questionCorrect":"Question {{number}}: Correct","questionIncorrect":"Question {{number}}: Incorrect","questionCorrectWithRisk":"Question {{number}}: Correct (with risk)","questionIncorrectWithRisk":"Question {{number}}: Incorrect (with risk)","legendCorrect":"Correct","legendIncorrect":"Incorrect","legendRisking":"Risking"},"results":{"title":"Quiz Results","summary":"Summary","scoreWithoutRisk":"Without Risk","scoreWithRisk":"With Risk","correct":"Correct","incorrect":"Incorrect","unanswered":"Unanswered","globalAverage":"UA Average","percentile":"Percentile","myScore":"My Score","answeredWithRisk":"At risk","backToCourses":"Back to Courses","difficultyLevel":"Difficulty level","timeSpent":"Time"},"sidebar":{"loadingQuestions":"Loading questions...","unanswered":"Unanswered","answered":"Answered","withRisk":"At Risk","withoutRisk":"Without Risk","questionsMap":"Questions Map","loadingQuestion":"Loading question...","question":"Question","loading":"Loading...","loadMore":"Load more questions","finishExam":"FINISH EXAM"},"quiz":{"loadingQuiz":"Loading quiz...","errorTitle":"Error loading quiz","errorLoadingQuiz":"Could not load the quiz.","submittingAnswers":"Submitting answers...","noQuestionsAssigned":"This quiz has no questions assigned.","loadingMoreQuestions":"Loading more questions...","questionsLoadedCount":"{{loaded}} of {{total}} questions loaded","autoLoadingMore":"Scroll down to load more questions automatically","inProgress":"Quiz in progress","savedProgressFound":"Saved progress found","continueWhereYouLeft":"Would you like to continue where you left off or start over?","currentQuestion":"Current question","timeRemaining":"Time remaining","continueQuiz":"Continue","startOver":"Start over","showTimer":"Show timer","hideTimer":"Hide timer","quizProgress":"Quiz Progress","openMenu":"Open quiz menu"},"exitModal":{"title":"Exit quiz","message":"Are you sure you want to exit? Your progress will be saved automatically and you can continue later.","cancel":"Cancel","confirm":"Exit"},"stats":{"totalQuizzes":"Total Quizzes","totalQuestions":"Total Questions","totalPoints":"Total Points","averageQuestions":"Avg. Questions"},"messages":{"titleRequired":"Quiz title is required","courseRequired":"Please select a course","questionsRequired":"Please add at least one question","noQuestionsAdded":"No questions added yet.","createSuccess":"Quiz created successfully","updateSuccess":"Quiz updated successfully","deleteSuccess":"Quiz deleted successfully","duplicateSuccess":"Quiz duplicated successfully","deleteConfirmTitle":"Delete Quiz","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} quiz found","found_plural":"{{count}} quizzes found"},"actions":{"createNewQuiz":"Create New Quiz","saveAndAddNew":"Save & Add New","saveChanges":"Save Changes","addQuestion":"Add Question","searchQuestions":"Search Questions","createFirstQuiz":"Create First Quiz"},"card":{"questions_one":"{{count}} Question","questions_other":"{{count}} Questions","points_one":"{{count}} Point","points_other":"{{count}} Points","attempts_one":"{{count}} Attempt","attempts_other":"{{count}} Attempts","avgScore":"{{count}}% Avg. Score","noCourse":"No course associated","viewQuestions":"View Questions ({{count}})"},"labels":{"allCourses":"All Courses","selectCourse":"Select a course...","minutes":"minutes","unlimited":"Unlimited","attempts":"attempts"}},"dashboard":{"title":"LMS Dashboard","recentResults":"Recent Results","noAttempts":"You haven\'t completed any quizzes yet.","nextLiveClass":"Next Live Class","noLiveClasses":"No classes scheduled","noLiveClassesDescription":"No upcoming live classes","stats":{"totalAttempts":"Total Attempts","passed":"Passed","failed":"Failed","averageScore":"Average Score"},"errors":{"loadAttempts":"Error loading quiz results."}},"questions":{"title":"Questions","description":"Create and manage questions for quizzes","addNew":"Add New Question","createQuestion":"Create Question","editQuestion":"Edit Question","viewQuestion":"View Question","deleteQuestion":"Delete Question","duplicateQuestion":"Duplicate Question","untitled":"Untitled Question","noQuestions":"No questions found","noQuestionsDescription":"You haven\'t created any questions yet.","searchPlaceholder":"Search questions...","loadingQuestions":"Loading questions...","fields":{"title":"Question Title","type":"Question Type","difficulty":"Difficulty","category":"Category","points":"Points","explanation":"Explanation","options":"Options","correctAnswer":"Correct Answer","provider":"Provider"},"types":{"multipleChoice":"Multiple Choice","trueFalse":"True/False","shortAnswer":"Short Answer","essay":"Essay","matching":"Matching","fillBlank":"Fill in the Blank"},"stats":{"totalQuestions":"Total Questions","byDifficulty":"By Difficulty","byType":"By Type","averagePoints":"Avg. Points"},"messages":{"titleRequired":"Question title is required","typeRequired":"Question type is required","optionsRequired":"At least two options are required","correctAnswerRequired":"You must mark at least one correct answer","createSuccess":"Question created successfully","updateSuccess":"Question updated successfully","deleteSuccess":"Question deleted successfully","duplicateSuccess":"Question duplicated successfully","deleteConfirmTitle":"Delete Question","deleteConfirmMessage":"Are you sure you want to delete \\"{{title}}\\"? This action cannot be undone.","found":"{{count}} question found","found_plural":"{{count}} questions found"},"actions":{"addOption":"Add Option","removeOption":"Remove Option","createFirstQuestion":"Create First Question"},"placeholders":{"option":"Option {{number}}","searchQuestions":"Search questions by title..."},"card":{"points":"{{count}} Points","noTopic":"No topic associated","viewQuizzes":"View Associated Quizzes ({{count}})","difficulty":"Difficulty","provider":"Provider","difficulties":{"easy":"Easy","medium":"Medium","hard":"Hard"},"types":{"multiple_choice":"Multiple Choice","true_false":"True / False","fill_in_the_blanks":"Fill in the Blanks","short_answer":"Short Answer","essay":"Essay"}},"providers":{"human":"Human","ai":"AI","imported":"Imported"},"details":{"viewTitle":"Question View","questionType":"Question Type","difficulty":"Difficulty","points":"Points","category":"Category","question":"Question","answerOptions":"Answer Options","explanation":"Explanation","additionalInfo":"Additional Information","lessonId":"Lesson ID","courseId":"Course ID","provider":"Provider","noCategory":"No category","optionLabel":"Option {{number}}","correctPoints":"{{points}} correct","incorrectPoints":"{{points}} incorrect","emptyStateTitle":"Select a question to view details","emptyStateDescription":"Click on a question from the list or create a new one"},"batch":{"selectAll":"Select all","deselectAll":"Deselect all","deleteSelected":"Delete selected","duplicateSelected":"Duplicate selected","exportSelected":"Export selected","selectedCount":"{{count}} selected","selectedCount_plural":"{{count}} selected","deleteConfirm":"Delete {{count}} question?","deleteConfirm_plural":"Delete {{count}} questions?"}},"students":{"title":"Students","description":"Manage students and enrollments","noStudents":"No students found","noStudentsDescription":"No students match your current filters.","searchPlaceholder":"Search students...","stats":{"totalUsers":"Total Users","enrolledUsers":"Enrolled Users","activeUsers":"Active Users","averageProgress":"Avg. Progress","recentRegistrations":"Recent Registrations"},"filters":{"allRoles":"All Roles","allCourses":"All Courses","allStatuses":"All Statuses","enrolled":"Enrolled","notEnrolled":"Not Enrolled"},"roles":{"administrator":"Administrator","editor":"Editor","author":"Author","contributor":"Contributor","subscriber":"Subscriber"},"actions":{"enroll":"Enroll","unenroll":"Unenroll","updateRole":"Update Role","bulkEnroll":"Bulk Enroll","bulkUnenroll":"Bulk Unenroll","viewProfile":"View Profile"},"messages":{"courseManagementMode":"Course Management Mode","viewingInContext":"You\'re viewing users in the context of: {{courseName}}","noUsersFound":"No users found","noUsersMatch":"No users match your current filters. Try adjusting your search or filter criteria.","clearSearch":"Clear search"}},"users":{"title":"Users","description":"Manage system users","stats":{"totalUsers":"Total Users","enrolledUsers":"Enrolled Users","activeUsers":"Active Users","averageProgress":"Avg. Progress"}},"modals":{"delete":{"confirmTitle":"Confirm Delete","confirmMessage":"Are you sure you want to delete this item? This action cannot be undone.","confirmButton":"Delete","cancelButton":"Cancel","typeToConfirm":"Type <strong>DELETE</strong> to confirm:","typeHere":"Type DELETE here","itemToDelete":"Item to delete:","processing":"Processing..."},"close":"Close","save":"Save","cancel":"Cancel"},"notifications":{"createSuccess":"{{resource}} created successfully","updateSuccess":"{{resource}} updated successfully","deleteSuccess":"{{resource}} deleted successfully","duplicateSuccess":"{{resource}} duplicated successfully","error":"An error occurred","savingChanges":"Saving changes...","operationFailed":"Operation failed"},"viewMode":{"cards":"Cards","list":"List","grid":"Grid","switchTo":"Switch to {{mode}} view"},"emptyStates":{"noItemsFound":"No items found","noItemsDescription":"There are no items matching your search criteria.","createFirst":"Create First","getStarted":"Get Started"},"filters":{"filterBy":"Filter by","clearAll":"Clear All","apply":"Apply","reset":"Reset","course":"Course","category":"Category","difficulty":"Difficulty","status":"Status","type":"Type"},"pagination":{"showing":"Showing","of":"of","results":"results","page":"Page","previous":"Previous","next":"Next","first":"First","last":"Last"},"validation":{"required":"This field is required","invalidEmail":"Invalid email","invalidUrl":"Invalid URL","minLength":"Must be at least {{length}} characters","maxLength":"Must not exceed {{length}} characters","mustBeNumber":"Must be a number","mustBePositive":"Must be a positive number"},"ranking":{"title":"Test Ranking","yourPosition":"Your Position","averageScore":"Average Score","pending":"Pending","quizzesCompleted":"Quizzes Completed","completeAllQuizzes":"Complete all course quizzes to see your rank","loading":"Loading ranking...","error":"Error loading ranking","noData":"No rankings yet","noDataDescription":"Be the first to complete this test","noTestsYet":"No tests taken yet","completeFirstQuiz":"Complete your first quiz to appear in the ranking","avgWithoutRisk":"Avg without risk","avgWithRisk":"Avg with risk","totalUsers":"Participants","viewRanking":"View Ranking"},"events":{"pending":"Pending","nextEvent":"Next Event","noEventsScheduled":"No events scheduled","november":"November"},"supportMaterial":{"noMaterials":"No support materials available","noMaterialsDescription":"No support materials have been added to this course yet","document":"document","documents":"documents","file":"file","files":"files","download":"Download","read":"Read","noPreview":"Preview not available","noPreviewDescription":"This document cannot be displayed in the browser","showTopic":"Show topic","hideTopic":"Hide topic","available":"Available now","createTheme":"Create Theme","addMaterial":"Add Material","newTheme":"New Theme","lessonCreated":"Theme created successfully","materialSaved":"Material saved successfully","materialDeleted":"Material deleted successfully","deleteConfirm":"Are you sure you want to delete this material?","addMaterialNow":"Would you like to add support material now?","createMaterial":"Create Support Material","editMaterial":"Edit Support Material","materialTitle":"Material Title","materialTitlePlaceholder":"e.g., Study Guide, Reference Manual...","materialType":"Material Type","pdfDescription":"PDF File","textType":"Text","textDescription":"Text content","pdfFile":"PDF File","pdfUrlPlaceholder":"PDF file URL","selectPDF":"Select PDF","previewPDF":"Preview PDF","uploadPDF":"Upload PDF file","uploading":"Uploading...","fileUploaded":"File uploaded successfully","uploadError":"Error uploading file","maxSize":"Max size: 10 MB","selectFromLibrary":"Select from library","textContent":"Text Content","selectImage":"Select Image","deleteTheme":"Delete theme","deleteThemeTitle":"Delete Theme","deleteThemeConfirm":"Are you sure you want to delete this theme? This action cannot be undone.","deleteThemeWarning":"All materials associated with this theme will be permanently deleted.","associatedMaterials":"{{count}} associated material(s)","associatedMaterials_one":"1 associated material","associatedMaterials_other":"{{count}} associated materials","themeDeleted":"Theme deleted successfully","confirmDelete":"Delete","orderThemes":"Order Themes","saveOrder":"Save Order","orderSaved":"Order saved successfully","moveUp":"Move up","moveDown":"Move down","iosFallback":"For a better experience, open the PDF in a new tab or download it","safariPdfNote":"Safari cannot display embedded PDFs. Open in a new tab or download the file.","visibility":"Visibility","visibleDescription":"Students can see this material","hiddenDescription":"This material is hidden from students","unlockDate":"Unlock date","unlockDateDescription":"The material will automatically unlock on this date. Leave empty to always be available.","clearDate":"Clear date","hiddenBadge":"Hidden","lockedBadge":"Locked","errors":{"titleRequired":"Title is required","pdfRequired":"You must select a PDF file","contentRequired":"Content is required","saveFailed":"Failed to save material"}},"videos":{"noVideos":"No videos available","noVideosDescription":"No videos have been added to this course yet","video":"video","videos":"videos","watch":"Watch","noVideoUrl":"Video not available","noVideoUrlDescription":"This video does not have a valid URL","showLesson":"Expand theme","hideLesson":"Hide theme","available":"Available now","createTheme":"Create Theme","addVideo":"Add Video","createVideo":"Create Video","editVideo":"Edit Video","videoTitle":"Video Title","videoTitlePlaceholder":"E.g: Course Introduction, Lesson 1...","videoUrl":"Video URL","videoUrlPlaceholder":"https://www.youtube.com/watch?v=... or https://vimeo.com/...","urlHelp":"Supports YouTube and Vimeo URLs","duration":"Duration (optional)","durationPlaceholder":"Duration in minutes","durationHelp":"Estimated video time in minutes","videoSaved":"Video saved successfully","videoDeleted":"Video deleted successfully","deleteConfirm":"Are you sure you want to delete this video?","lessonCreated":"Theme created successfully","lessonUpdated":"Theme updated successfully","deleteTheme":"Delete theme","deleteThemeTitle":"Delete Theme","deleteThemeConfirm":"Are you sure you want to delete this theme? This action cannot be undone.","deleteThemeWarning":"All videos associated with this theme will be permanently deleted.","associatedVideos":"{{count}} associated video(s)","associatedVideos_one":"1 associated video","associatedVideos_other":"{{count}} associated videos","themeDeleted":"Theme deleted successfully","confirmDelete":"Delete","orderThemes":"Order Themes","saveOrder":"Save Order","orderSaved":"Order saved successfully","moveUp":"Move up","moveDown":"Move down","errors":{"titleRequired":"Title is required","urlRequired":"Video URL is required","invalidUrl":"URL is not valid","saveFailed":"Error saving video","deleteFailed":"Error deleting video","deleteTheme":"Error deleting theme","saveOrder":"Error saving order"}},"tests":{"noTests":"No tests available","noTestsDescription":"No tests have been added to this course yet","test":"test","tests":"tests","configuration":"Configuration","generateTest":"Generate Test","start":"Start","startTest":"Start Test","startQuiz":"Start Quiz","retake":"Retake","retakeQuiz":"Retake Quiz","passingScore":"Passing score","timeLimit":"Time limit","time":"Time","minutes":"minutes","noTimeLimit":"No limit","questions":"Questions","difficulty":"Difficulty","difficultyEasy":"Easy","difficultyMedium":"Medium","difficultyHard":"Hard","easy":"Easy","medium":"Medium","hard":"Hard","startDate":"Start date","showTopic":"Show topic","hideTopic":"Hide topic","available":"Available now","statistics":"Test Statistics","withoutRisk":"Without Risk","withRisk":"With Risk","avgScore":"UA Average","myScore":"My Score","percentile":"Percentile","cutoffScore":"Cutoff","score":"Score","recentAttempts":"Your Attempts Summary","attemptDate":"Attempt / Date","scorePercentile":"Score / Percentile","riskPercentile":"Risk / Percentile","viewCorrection":"View Correction","view":"View","last5Attempts":"Last 5 attempts","passed":"Passed","failed":"Failed","details":"Details","viewDetails":"View attempt details","viewerPlaceholder":"Test interface in development","viewerPlaceholderDescription":"The test interface will be displayed here","backToInfo":"Back to Test","loadingAttemptDetails":"Loading attempt details...","errorLoadingAttempt":"Error loading attempt","attemptDetails":"Attempt Details","searchPlaceholder":"Search tests...","noTestsFound":"No tests found","tryDifferentSearch":"Try a different search","customTestDescription":"Create a custom test based on your needs","customTest":"Custom Test","noQuestionsFound":"No questions found","adjustFilters":"Adjust filters to find available questions","startPractice":"Start Practice","testHistory":"Test History","attempt":"attempt","attempts":"attempts","searchQuiz":"Search quiz","quizNamePlaceholder":"Quiz name...","topic":"Topic","allTopics":"All topics","dateFrom":"From","dateTo":"To","showing":"Showing","of":"of","results":"results","clearFilters":"Clear filters","loadingHistory":"Loading history...","noAttemptsYet":"No attempts recorded yet","startTests":"Start taking tests to see your history","errorLoadingHistory":"Error loading history","tryAgain":"Try again","viewQuiz":"View quiz","aboveAverage":"above average","belowAverage":"below average","date":"Date","status":"Status","actions":"View","testInfo":"Information","myStats":"My Stats","createTheme":"Create Theme","addTest":"Add Test","createTest":"Create Test","editTest":"Edit Test","testTitle":"Test Title","testTitlePlaceholder":"E.g: Introduction Test","selectQuiz":"Select Quiz","selectQuizPlaceholder":"Select an existing quiz","createQuestion":"Create Question","noQuestions":"No questions in this quiz","testSaved":"Test saved successfully","testDeleted":"Test deleted successfully","deleteConfirm":"Are you sure you want to delete this test?","deleteError":"Error deleting test","deleteQuestionConfirm":"Are you sure you want to delete this question?","deleteTheme":"Delete theme","deleteThemeTitle":"Delete Theme","deleteThemeConfirm":"Are you sure you want to delete this theme?","deleteThemeWarning":"This action cannot be undone. All associated tests will be deleted.","associatedTests":"{{count}} associated test","associatedTests_one":"{{count}} associated test","associatedTests_other":"{{count}} associated tests","themeDeleted":"Theme deleted successfully","deleteThemeError":"Error deleting theme","confirmDelete":"Delete","points":"points","orderThemes":"Order Themes","saveOrder":"Save Order","orderSaved":"Order saved successfully","moveUp":"Move up","moveDown":"Move down","errors":{"titleRequired":"Title is required","quizRequired":"You must select a quiz","deleteQuestionFailed":"Error deleting question","saveOrder":"Error saving order"}},"navigation":{"previous":"Previous","next":"Next"},"progress":{"completed":"Completed","markComplete":"Mark as completed"},"login":{"welcomeBack":"Welcome back","signInToContinue":"Sign in to continue","username":"Username or email","usernamePlaceholder":"your@email.com","password":"Password","rememberMe":"Remember me","signIn":"Sign In","signingIn":"Signing in...","forgotPassword":"Forgot your password?","invalidCredentials":"Invalid username or password","error":"Login error. Please try again."},"statistics":{"title":"Course Statistics","averageScore":"Average Score","ranking":"Ranking","topPercent":"Top {{percent}}%","cutoffScore":"Cutoff score","passedCutoff":"You passed the cutoff score","noCutoffDataYet":"Cutoff score available soon","completedQuizzes":"Completed Quizzes","topicsCompleted":"Completed Topics","topicsWithProgress":"Topics with progress","bestPerformance":"Best Score","noDataYet":"No data yet","performanceByTopic":"Performance by Topic","noDataAvailable":"No data available yet","completeTestsToSeeStats":"Complete tests to see statistics","areasToImprove":"Areas to Improve","topicsToReview":"Topics to Review","topicAnalysis":"Topic Analysis","allTopicsInCourse":"All topics in the course","sortHighToLow":"Highest to lowest score","sortLowToHigh":"Lowest to highest score","noTopicsData":"No topic data available","review":"Review","reviewTopic":"View Topic","greatJob":"Excellent!","noWeakAreasFound":"You have no critical areas to improve","allTopicsAbove8":"All your topics have a score above 8","allTopics":"All Topics","critical":"Critical","needsImprovement":"Needs Work","good":"Good","difficultyAnalysis":"Difficulty Analysis","questionAnalysis":"Question Analysis","withRisk":"With Risk","withoutRisk":"Without Risk","filterByTopic":"Filter by topic","allTopicsFilter":"All topics","easy":"Easy","medium":"Medium","hard":"Hard","noDifficultyData":"No difficulty data available","noDataForDifficulty":"No data for this difficulty level","correct":"Correct","incorrect":"Incorrect","unanswered":"Unanswered","markedWithRisk":"Marked at risk","viewDetail":"View detail","riskAnalysis":"Risk Analysis","noRiskData":"No risk data available","noRiskDataForDifficulty":"No questions marked at risk for this difficulty level","quizzesCompleted":"Quizzes completed","score":"Score","attempt":"attempt","attempts":"attempts","temporary":"Temporary","temporaryNote":"Complete all tests to get your final score","temporaryRanking":"Temporary position. Complete all tests to see your final ranking","chart":{"title":"Score Evolution","error":"Error loading chart","noData":"Not enough data to show the chart. Complete some tests to see your evolution.","trendUp":"Improving +{{diff}}","trendDown":"Declining -{{diff}}","trendStable":"Stable","period":{"week":"7 days","month":"30 days","all":"All time"}}},"courseNotifications":{"title":"Notifications","unread":"unread","markAllRead":"Mark all as read","loadMore":"Load more","empty":"No notifications yet","emptyDescription":"When new topics, tests, videos or materials are added to this course, you\'ll receive notifications here.","types":{"new_topic":"New Topic","new_quiz":"New Test","new_video":"New Video","new_pdf":"New PDF","new_text":"New Content","topic_updated":"Topic Updated"}},"calendar":{"description":"View the course topic calendar","legend":"Legend","legendVideo":"Video","legendTest":"Test","legendPdf":"PDF","legendLesson":"Topic","legendNote":"Note","legendLiveClass":"Live Class","noDate":"No date","noLessons":"No topics","noLessonsDescription":"This course has no scheduled topics yet.","date":"Date","note":"Note","liveClass":"Live Class","addNote":"Add note","addLiveClass":"Add class","newNote":"New note","editNote":"Edit note","newLiveClass":"New live class","editLiveClass":"Edit class","noteTitle":"Title","noteTitlePlaceholder":"E.g.: Midterm exam","noteDescription":"Description","noteDescriptionPlaceholder":"Add an optional description...","noteDate":"Date","noteColor":"Color","confirmDeleteNote":"Delete this note?","liveClassTitle":"Title","liveClassTitlePlaceholder":"E.g.: Topic 5 review class","liveClassLink":"Meeting link","liveClassDescription":"Description","liveClassDescriptionPlaceholder":"Add an optional description...","liveClassDate":"Date","liveClassTime":"Time","liveClassColor":"Color","joinClass":"Join class"},"liveClasses":{"inProgress":"In progress","finished":"Finished","countdownDaysHours":"In {{days}}d {{hours}}h","countdownDays":"In {{days}} day{{s}}","countdownHoursMin":"In {{hours}}h {{min}}min","countdownMin":"Starts in {{min}} min","upcomingCount":"{{count}} class{{s}} scheduled"},"admin":{"tests":{"title":"Tests","newTest":"New Test","searchPlaceholder":"Search tests by title...","noTests":"No tests found","noTestsDescription":"You haven\'t created any tests yet. Click \\"New Test\\" to create one.","loadMore":"Load more","total":"{{count}} test in total","total_plural":"{{count}} tests in total","filters":"Filters","clearFilters":"Clear filters","category":"Category","allCategories":"All categories","course":"Course","allCourses":"All courses","difficulty":"Difficulty","allDifficulties":"All levels","easy":"Easy","medium":"Medium","hard":"Hard","questions":"questions","attempts":"attempts","noTimeLimit":"No limit","edit":"Edit","duplicate":"Duplicate","statistics":"Statistics","delete":"Delete","createSuccess":"Test created successfully","updateSuccess":"Test updated successfully","deleteSuccess":"Test deleted successfully","deleteConfirm":"Are you sure you want to delete \\"{{title}}\\"?","duplicateComingSoon":"Duplicate feature coming soon","statsComingSoon":"Statistics coming soon"},"testModal":{"createTitle":"Create New Test","editTitle":"Edit Test","tabConfig":"Configuration","tabQuestions":"Questions","title":"Title","titlePlaceholder":"E.g.: Geography Test - Topic 3","titleRequired":"Title is required","instructions":"Instructions","instructionsPlaceholder":"Instructions for students...","course":"Course","selectCourse":"Select course...","category":"Category","selectCategory":"Select category...","difficulty":"Difficulty","easy":"Easy","medium":"Medium","hard":"Hard","passingScore":"Passing score","timeLimit":"Time limit (minutes)","timeLimitPlaceholder":"Empty = no limit","autoCalculated":"Auto-calculated","maxAttempts":"Maximum attempts","maxAttemptsPlaceholder":"Empty = unlimited","randomizeQuestions":"Randomize questions","startDate":"Start date","startDatePlaceholder":"Select date...","selectedQuestions":"Selected questions","noQuestionsSelected":"No questions selected","noQuestionsSelectedDesc":"Use the search to add questions to this test","searchQuestions":"Search questions...","searchQuestionsButton":"Search","searchResults":"Search results","noSearchResults":"No questions found","addQuestion":"Add","removeQuestion":"Remove from test","editQuestion":"Edit question","newQuestion":"New Question","cancel":"Cancel","create":"Create Test","save":"Save Changes","saving":"Saving..."},"questions":{"title":"Questions","newQuestion":"New Question","searchPlaceholder":"Search questions by title...","noQuestions":"No questions found","noQuestionsDescription":"You haven\'t created any questions yet. Click \\"New Question\\" to create one.","loadMore":"Load more","total":"{{count}} question in total","total_plural":"{{count}} questions in total","filters":"Filters","clearFilters":"Clear filters","difficulty":"Difficulty","allDifficulties":"All levels","category":"Category","allCategories":"All categories","provider":"Provider","allProviders":"All providers","easy":"Easy","medium":"Medium","hard":"Hard","points":"pts","options":"options","assignedTests":"assigned tests","edit":"Edit","duplicate":"Duplicate","delete":"Delete","createSuccess":"Question created successfully","updateSuccess":"Question updated successfully","deleteSuccess":"Question deleted successfully","deleteConfirm":"Are you sure you want to delete this question?"},"questionModal":{"createTitle":"New Question","editTitle":"Edit Question","viewTitle":"View Question","title":"Question title","titlePlaceholder":"Enter the question title...","titleRequired":"Title is required","difficulty":"Difficulty","easy":"Easy","medium":"Medium","hard":"Hard","category":"Category","selectCategory":"No category","addCategory":"Add new category","newCategoryPlaceholder":"New category...","addCategoryButton":"Add","provider":"Provider","selectProvider":"No provider","addProvider":"Add new provider","newProviderPlaceholder":"New provider...","addProviderButton":"Add","points":"Points correct","pointsIncorrect":"Points incorrect","course":"Assign to Course","noCourse":"No course assigned","lesson":"Assign to Topic","noLesson":"No topic assigned","assignToTests":"Assign to Tests","searchTests":"Search tests...","noTestsFound":"No tests found.","options":"Answer options","optionPlaceholder":"Enter option...","addOption":"Add Option","markCorrect":"Mark as correct","removeOption":"Remove option","minOptions":"Minimum 2 options","noCorrectOption":"You must mark at least one option as correct","explanation":"Explanation (Optional)","explanationPlaceholder":"Explain why this is the correct answer...","cancel":"Cancel","create":"Create Question","createAndNew":"Create & New","save":"Save Changes","saving":"Saving..."},"lessons":{"title":"Lessons","newLesson":"New Lesson","searchPlaceholder":"Search lessons by title...","noLessons":"No lessons found","noLessonsDescription":"You haven\'t created any lessons yet. Click \\"New Lesson\\" to create one.","loadMore":"Load more","total":"{{count}} lesson total","total_plural":"{{count}} lessons total","filters":"Filters","clearFilters":"Clear filters","course":"Course","allCourses":"All courses","steps":"steps","edit":"Edit","duplicate":"Duplicate","delete":"Delete","createSuccess":"Lesson created successfully","updateSuccess":"Lesson updated successfully","deleteSuccess":"Lesson deleted successfully","deleteConfirm":"Are you sure you want to delete \\"{{title}}\\"?","duplicateComingSoon":"Duplicate feature coming soon"},"lessonModal":{"createTitle":"Create New Lesson","editTitle":"Edit Lesson","viewTitle":"View Lesson","tabConfig":"Configuration","tabTests":"Tests","title":"Title","titlePlaceholder":"e.g.: Introduction to the subject","titleRequired":"Title is required","course":"Course","selectCourse":"Select course...","courseRequired":"Course is required","description":"Description","descriptionPlaceholder":"Brief description of the lesson...","lessonOrder":"Order","completionCriteria":"Completion criteria","completionViewAll":"View all content","completionPassQuiz":"Pass the test","completionCompleteSteps":"Complete all steps","stepsTitle":"Content steps","stepsDescription":"Add the steps that make up this lesson","stepsRequired":"You must add at least one step","allStepsMustHaveTitle":"All steps must have a title","addStep":"Add Step","editStep":"Edit Step","addFirstStep":"Add first step","noSteps":"No steps","noContent":"No content","stepTitle":"Step title","stepTitlePlaceholder":"e.g.: Introduction","stepTitleRequired":"Step title is required","stepType":"Step type","addStepButton":"Add","stepTypes":{"video":"Video","text":"Text","pdf":"PDF","quiz":"Quiz"},"videoUrl":"Video URL","videoUrlPlaceholder":"https://youtube.com/watch?v=...","textContent":"Content","pdfFile":"PDF file","selectPdf":"Select PDF file","uploading":"Uploading...","selectTest":"Select Test","searchForTest":"Search for a test to add it as a step","quizId":"Quiz ID","quizIdPlaceholder":"Enter quiz ID","searchTests":"Search tests","searchTestsPlaceholder":"Search by title...","search":"Search","newTest":"New Test","assignedTests":"Assigned tests","noTestsAssigned":"No tests assigned to this lesson","searchResults":"Search results","add":"Add","editTest":"Edit test","editTestInPage":"Edit test in Tests page","testsEditHint":"Click on a test to edit it in the Tests page","removeTest":"Remove test","saveError":"Error saving lesson","saveAndNew":"Save & Create New"}}}'),J=JSON.parse('{"common":{"save":"Guardar","cancel":"Cancelar","delete":"Eliminar","edit":"Editar","remove":"Quitar","duplicate":"Duplicar","view":"Ver","loading":"Cargando...","uploading":"Subiendo...","search":"Buscar","filter":"Filtrar","reset":"Reiniciar","refresh":"Refrescar","actions":"Acciones","status":"Estado","published":"Publicado","draft":"Borrador","private":"Privado","clearFilters":"Limpiar Todos los Filtros","noResults":"No se encontraron resultados","loadingMore":"Cargando mÃ¡s...","endOfList":"Has llegado al final de la lista.","updating":"Actualizando...","searching":"Buscando...","filtering":"Filtrando...","processing":"Procesando...","optional":"Opcional","required":"Obligatorio","all":"Todos","yes":"SÃ­","no":"No","back":"Volver","next":"Siguiente","previous":"Anterior","close":"Cerrar","continue":"Continuar","finish":"Finalizar","skip":"Saltar","settings":"Ajustes","questions":"Preguntas","select":"Seleccionar...","unlimited":"Ilimitado","saving":"Guardando...","add":"AÃ±adir","added":"AÃ±adido","createNew":"Crear Nuevo","easy":"FÃ¡cil","medium":"Medio","intermediate":"Intermedio","hard":"DifÃ­cil","featureComingSoon":"Funcionalidad prÃ³ximamente disponible.","found":"encontrados","addToFavorites":"AÃ±adir a favoritos","removeFromFavorites":"Quitar de favoritos","quiz":"Cuestionario","progress":"Progreso","notStarted":"No iniciado","ended":"Finalizado","untitled":"Sin tÃ­tulo","ago":"Hace","days":"dÃ­as","day":"dÃ­a","hours":"horas","hour":"hora","minutes":"minutos","minute":"minuto","justNow":"Hace unos segundos","noLimit":"Sin lÃ­mite","selectAll":"Seleccionar todos","allSelected":"Todos seleccionados","allLessons":"Todos los temas","confirm":"Confirmar","openInNewTab":"Abrir en nueva pestaÃ±a","download":"Descargar"},"errors":{"fetchQuiz":"Error al cargar los datos del cuestionario.","saveQuiz":"Error al guardar el cuestionario.","loadQuestions":"Error al cargar las preguntas del cuestionario. Algunas preguntas pueden no existir o no ser accesibles.","createLesson":"Error al crear el tema","saveMaterial":"Error al guardar el material","deleteMaterial":"Error al eliminar el material","deleteTheme":"Error al eliminar el tema","saveOrder":"Error al guardar el orden"},"sidebar":{"myDesk":"Mi Escritorio","studyPlanner":"Cursos","test":"Test","statistics":"EstadÃ­sticas","supportMaterial":"Material de Apoyo","videosClasses":"VÃ­deos / Clases","profile":"Mi Perfil","myAccount":"Mi Cuenta","books":"Libros","logout":"Cerrar SesiÃ³n","exitCampus":"Salir del Campus","lightMode":"Modo Claro","darkMode":"Modo Oscuro","expand":"Expandir","collapse":"Colapsar","logoAlt":"Logo de la empresa","logoText":"Tu Logo","onlineClasses":"Clases Online","menu":"MenÃº","quickMenu":"MenÃº RÃ¡pido"},"header":{"notifications":"Notificaciones","messages":"MensajerÃ­a"},"messages":{"totalMessages":"mensajes","unread":"sin leer","loading":"Cargando mensajes...","error":"Error al cargar mensajes","emptyInbox":"Tu bandeja estÃ¡ vacÃ­a","emptyInboxDescription":"No tienes mensajes en este momento. Cuando recibas comentarios sobre tus preguntas, aparecerÃ¡n aquÃ­.","selectToRead":"Selecciona un mensaje para leerlo","system":"Sistema","yesterday":"Ayer","markAsRead":"Marcar como leÃ­do","delete":"Eliminar","loadMore":"Cargar mÃ¡s mensajes","you":"Tu mensaje original","yourOriginalMessage":"Tu mensaje original","adminResponse":"Respuesta","contactSupport":"Este mensaje es de solo lectura. Para responder, usa la funciÃ³n de feedback en las preguntas del cuestionario."},"dashboard":{"title":"Panel del LMS","recentResults":"Resultados Recientes","noAttempts":"AÃºn no has completado ningÃºn cuestionario.","nextLiveClass":"PrÃ³xima Clase en Directo","noLiveClasses":"Sin clases programadas","noLiveClassesDescription":"No hay clases en directo prÃ³ximas","stats":{"totalAttempts":"Intentos Totales","passed":"Aprobados","failed":"Suspendidos","averageScore":"PuntuaciÃ³n Media"},"errors":{"loadAttempts":"Error al cargar los resultados de los cuestionarios."}},"courses":{"title":"Cursos","description":"Crea y gestiona cursos con temas, precios e inscripciones","addNew":"AÃ±adir Nuevo Curso","createCourse":"Crear Curso","editCourse":"Editar Curso","viewCourse":"Ver Curso","duplicateCourse":"Duplicar Curso","deleteCourse":"Eliminar Curso","noCourses":"No se encontraron cursos","noCoursesDescription":"AÃºn no has creado ningÃºn curso.","searchPlaceholder":"Buscar cursos...","loadingCourses":"Cargando cursos...","loadingMoreCourses":"Cargando mÃ¡s cursos...","courseContent":"Contenido del Curso","myCourses":"Mis Cursos","progress":"Progreso del curso","noImage":"Sin imagen","test":"Test","material":"Material","videos":"Videos","dashboard":"Mi Campus","studyPlanner":"Planificador de Estudio","tests":"Test","testGenerator":"Generador de Tests","selfPacedTests":"Tests a tu Ritmo","selfPacedPractice":"PrÃ¡ctica a tu Ritmo","untitledLesson":"Tema sin tÃ­tulo","testBrowser":"Navegador de Tests","testHistory":"Historial de Tests","supportMaterial":"Material de Apoyo","videosSection":"Videos","videoClasses":"Videoclases","liveClasses":"Clases en Directo","statistics":"EstadÃ­sticas","noContent":"Sin contenido disponible","noContentDescription":"Este curso aÃºn no tiene contenido agregado","overallProgress":"Progreso General","contentProgress":"Progreso de Contenido","completed":"completados","remaining":"pendientes","testsCompleted":"Tests Completados","totalProgress":"Progreso Total","questionTypes":"Tipos de Preguntas","favorites":"Favoritas","failed":"Falladas","atRisk":"En Riesgo","notAnswered":"No Contestadas","fields":{"title":"TÃ­tulo del Curso","description":"DescripciÃ³n","excerpt":"DescripciÃ³n Corta","image":"Imagen Destacada","category":"CategorÃ­a","difficulty":"Dificultad","price":"Precio","salePrice":"Precio de Oferta","productType":"Tipo de Producto","duration":"DuraciÃ³n","lessons":"Temas","students":"Estudiantes","enrolled":"Inscritos","completion":"Completado","status":"Estado","startDate":"Fecha de Inicio","endDate":"Fecha de Fin","position":"PosiciÃ³n de VisualizaciÃ³n","maxStudents":"Estudiantes MÃ¡ximos","difficultyLevel":"Nivel de Dificultad"},"category":{"label":"CategorÃ­a","all":"Todas las CategorÃ­as","programming":"ProgramaciÃ³n","design":"DiseÃ±o","business":"Negocios","marketing":"Marketing","photography":"FotografÃ­a"},"difficulty":{"label":"Dificultad","all":"Todos los Niveles","beginner":"Principiante","intermediate":"Intermedio","advanced":"Avanzado","expert":"Experto"},"difficultyLevels":{"easy":"FÃ¡cil","medium":"Medio","hard":"DifÃ­cil"},"status":{"label":"Estado","all":"Todos los Estados","publish":"Publicado","draft":"Borrador","private":"Privado"},"priceFilter":{"label":"Precio","all":"Todos los Precios","free":"Gratis","paid":"De Pago","premium":"Premium (â‚¬100+)"},"stats":{"totalCourses":"Cursos Totales","totalStudents":"Estudiantes","totalLessons":"Temas","averagePrice":"Precio Promedio","revenue":"Ingresos","totalRevenue":"Ingresos Totales","featuredCourses":"Cursos Destacados","completionRate":"Tasa de FinalizaciÃ³n","averageDuration":"DuraciÃ³n Promedio"},"units":{"hours":"horas","hour":"hora","weeks":"semanas","week":"semana","lessons":"temas","lesson":"tema","students":"estudiantes","student":"estudiante","free":"Gratis","duration":"duraciÃ³n"},"tabs":{"basic":"InformaciÃ³n BÃ¡sica","taxonomies":"CategorÃ­as y Etiquetas","pricing":"Precios","schedule":"Calendario","lessons":"Temas","settings":"ConfiguraciÃ³n"},"taxonomies":{"categories":"CategorÃ­as","topics":"Temas","difficulty":"Dificultad","providers":"Proveedores","courseTypes":"Tipos de Curso"},"placeholders":{"title":"Introduce el tÃ­tulo del curso...","excerpt":"DescripciÃ³n breve para tarjetas y vistas previas...","content":"DescripciÃ³n completa del curso, quÃ© aprenderÃ¡n los estudiantes...","newCategory":"Nombre de la nueva categorÃ­a..."},"actions":{"uploadImage":"Subir Imagen","addCategory":"AÃ±adir Nueva","saveAndCreate":"Guardar y Crear Otro"},"hints":{"optional":"Opcional","salePrice":"Si se establece, se mostrarÃ¡ como el precio con descuento","startDate":"CuÃ¡ndo el curso estarÃ¡ disponible para los estudiantes","endDate":"CuÃ¡ndo el curso cierra o expira (opcional)","duration":"Tiempo estimado para completar el curso","createLessons":"Crea temas primero para asignarlas a este curso","position":"Los nÃºmeros mÃ¡s bajos aparecen primero en la lista de cursos","maxStudents":"0 = inscripciÃ³n ilimitada","difficultyLevel":"Este es un campo meta, diferente de la taxonomÃ­a","image":"TamaÃ±o recomendado: 1200x675px. MÃ¡x 5MB."},"labels":{"pricePreview":"Vista Previa del Precio","schedulePreview":"Vista Previa del Calendario","selected":"seleccionadas"},"info":{"woocommerce":"IntegraciÃ³n con WooCommerce","woocommerceDesc":"Se crearÃ¡/actualizarÃ¡ automÃ¡ticamente un producto de WooCommerce al guardar este curso."},"validation":{"titleRequired":"El tÃ­tulo es obligatorio","contentRequired":"La descripciÃ³n es obligatoria","priceInvalid":"El precio debe ser mayor que 0","endDateInvalid":"La fecha de fin debe ser posterior a la fecha de inicio","positionInvalid":"La posiciÃ³n debe ser un nÃºmero","fixErrors":"Por favor corrige los errores antes de guardar"},"messages":{"createSuccess":"Curso creado exitosamente","updateSuccess":"Curso actualizado exitosamente","deleteSuccess":"Curso eliminado exitosamente","duplicateSuccess":"Curso duplicado exitosamente","createError":"Error al crear el curso","updateError":"Error al actualizar el curso","deleteError":"Error al eliminar el curso","duplicateError":"Error al duplicar el curso","deleteConfirmTitle":"Eliminar Curso","deleteConfirmMessage":"Â¿EstÃ¡s seguro de que quieres eliminar \\"{{title}}\\"? Esta acciÃ³n no se puede deshacer y tambiÃ©n eliminarÃ¡ todos los temas asociados.","found":"{{count}} curso encontrado","found_plural":"{{count}} cursos encontrados","noCategories":"No hay categorÃ­as disponibles","noLessons":"AÃºn no hay temas disponibles"},"students":{"title":"Estudiantes","enrolledCount":"estudiantes inscritos","addStudent":"AÃ±adir Estudiante","name":"Nombre","email":"Correo","avgScore":"Media","actions":"Acciones","remove":"Quitar","enroll":"Inscribir","noStudents":"No hay estudiantes inscritos","noStudentsDescription":"AÃºn no hay estudiantes inscritos en este curso.","searchPlaceholder":"Buscar usuario por nombre o correo...","searchHint":"Escribe al menos 2 caracteres para buscar","minSearchChars":"Escribe al menos 2 caracteres","noResults":"No se encontraron usuarios","confirmUnenroll":"Confirmar eliminaciÃ³n","confirmUnenrollMessage":"Â¿EstÃ¡s seguro de que quieres eliminar a {{name}} de este curso?","enrollSuccess":"Estudiante inscrito correctamente","unenrollSuccess":"Estudiante eliminado del curso","ghost":"Fantasma","ghostUsers":{"title":"Usuarios Fantasma","generate":"Generar Fantasmas","generateDescription":"Genera usuarios fantasma para simular actividad en el ranking del curso.","count":"Cantidad","generating":"Generando...","deleteAll":"Eliminar Fantasmas","deleteAllConfirm":"Eliminar Todos los Fantasmas","deleteConfirmMessage":"Â¿EstÃ¡s seguro de que quieres eliminar todos los usuarios fantasma de este curso? Esta acciÃ³n eliminarÃ¡ tambiÃ©n sus intentos de test.","deleting":"Eliminando...","generateSuccess":"{{count}} usuarios fantasma generados correctamente","deleteSuccess":"{{count}} usuarios fantasma eliminados","noGhosts":"No hay usuarios fantasma en este curso","errors":{"generate":"Error al generar usuarios fantasma","delete":"Error al eliminar usuarios fantasma"}},"errors":{"loadStudents":"Error al cargar los estudiantes","enroll":"Error al inscribir al estudiante","unenroll":"Error al eliminar al estudiante"}}},"lessons":{"title":"Temas","description":"Crea y gestiona temas interactivos con mÃºltiples tipos de contenido","addNew":"AÃ±adir Nuevo Tema","createLesson":"Crear Tema","editLesson":"Editar Tema","viewLesson":"Ver Tema","duplicateLesson":"Duplicar Tema","deleteLesson":"Eliminar Tema","noLessons":"No se encontraron temas","noLessonsDescription":"AÃºn no has creado ningÃºn tema.","searchPlaceholder":"Buscar temas por tÃ­tulo...","loadingLessons":"Cargando temas...","loadingMoreLessons":"Cargando mÃ¡s temas...","fields":{"title":"TÃ­tulo del Tema","description":"DescripciÃ³n","content":"Contenido General","course":"Curso","lessonType":"Tipo de Tema","lessonOrder":"Orden del Tema","status":"Estado","steps":"Pasos de Contenido","prerequisiteLessons":"Temas Prerequisito","completionCriteria":"Criterio de FinalizaciÃ³n","isRequired":"Es Obligatoria","duration":"DuraciÃ³n","resources":"Recursos"},"lessonType":{"label":"Tipo de Tema","all":"Todos los Tipos","video":"Video","text":"Contenido de Texto","mixed":"Contenido Mixto","quiz":"Cuestionario","interactive":"Interactivo"},"status":{"label":"Estado","all":"Todos los Estados","publish":"Publicado","draft":"Borrador","private":"Privado"},"course":{"label":"Curso","all":"Todos los Cursos","select":"Seleccionar un curso...","required":"El curso es obligatorio"},"stats":{"totalLessons":"Total de Temas","videoLessons":"Temas de Video","textLessons":"Temas de Texto","mixedLessons":"Temas Mixtos","totalSteps":"Total de Pasos","averageSteps":"Promedio Pasos/Tema","completedLessons":"Temas Completados","requiredLessons":"Temas Obligatorios"},"steps":{"title":"Pasos de Contenido","description":"AÃ±ade y organiza los pasos de contenido para este tema","addStep":"AÃ±adir Paso","addFirstStep":"AÃ±adir Primer Paso","noSteps":"Este tema aÃºn no tiene pasos de contenido.","noStepsDescription":"Los pasos te permiten organizar el contenido en secciones manejables.","stepTitle":"TÃ­tulo del Paso","stepType":"Tipo de Paso","required":"Se requiere al menos un paso","allStepsMustHaveTitle":"Todos los pasos deben tener un tÃ­tulo"},"stepTypes":{"video":{"label":"Video","description":"Contenido de video","videoUrl":"URL del Video","duration":"DuraciÃ³n (minutos)","autoplay":"ReproducciÃ³n AutomÃ¡tica","subtitlesUrl":"URL de SubtÃ­tulos"},"text":{"label":"Contenido de Texto","description":"Contenido de texto enriquecido","content":"Contenido","estimatedTime":"Tiempo Estimado (minutos)"},"pdf":{"label":"Documento PDF","description":"Archivo PDF descargable","fileUrl":"URL del Archivo","fileName":"Nombre del Archivo","fileSize":"TamaÃ±o del Archivo","downloadable":"Permitir Descarga"},"quiz":{"label":"Cuestionario","description":"EvaluaciÃ³n de conocimientos","quizId":"Cuestionario","passingScore":"PuntuaciÃ³n MÃ­nima","maxAttempts":"Intentos MÃ¡ximos","required":"Obligatorio para Completar"},"image":{"label":"Imagen","description":"Contenido visual","imageUrl":"URL de la Imagen","altText":"Texto Alternativo","caption":"Pie de Foto","lightbox":"Habilitar Lightbox"},"audio":{"label":"Audio","description":"Contenido de audio","audioUrl":"URL del Audio","duration":"DuraciÃ³n (minutos)","transcriptUrl":"URL de TranscripciÃ³n"}},"tabs":{"basic":"InformaciÃ³n BÃ¡sica","steps":"Pasos de Contenido","settings":"ConfiguraciÃ³n Avanzada"},"completionCriteria":{"label":"Criterio de FinalizaciÃ³n","viewAll":"Ver Todo el Contenido","passQuiz":"Aprobar Cuestionario","completeSteps":"Completar Todos los Pasos"},"placeholders":{"title":"Introduce el tÃ­tulo del tema...","description":"Breve descripciÃ³n del tema...","content":"Contenido general del tema (opcional)...","stepTitle":"Introduce el tÃ­tulo del paso...","videoUrl":"https://... (URL del video)","imageUrl":"https://... (URL de la imagen)","audioUrl":"https://... (URL del audio)","pdfUrl":"https://... (URL del PDF)"},"hints":{"course":"El tema debe estar asociado a un curso","lessonType":"El tipo determina cÃ³mo se presenta el tema","description":"Esta descripciÃ³n aparece en tarjetas y vistas previas","content":"Este contenido aparece antes de los pasos del tema. HTML es soportado.","lessonOrder":"Orden de este tema dentro del curso","steps":"Organiza el contenido en pasos manejables","completionCriteria":"Â¿QuÃ© debe hacer el estudiante para completar este tema?","isRequired":"Si estÃ¡ marcado, los estudiantes deben completar este tema","prerequisiteLessons":"Temas que deben completarse antes de este"},"actions":{"addStep":"AÃ±adir Paso","removeStep":"Eliminar Paso","moveUp":"Mover Arriba","moveDown":"Mover Abajo","expandStep":"Expandir Paso","collapseStep":"Contraer Paso"},"validation":{"titleRequired":"El tÃ­tulo es obligatorio","courseRequired":"Debes seleccionar un curso","stepsRequired":"Se requiere al menos un paso","stepTitleRequired":"El tÃ­tulo del paso es obligatorio","videoUrlRequired":"La URL del video es obligatoria","imageUrlRequired":"La URL de la imagen es obligatoria","audioUrlRequired":"La URL del audio es obligatoria","pdfUrlRequired":"La URL del PDF es obligatoria","quizRequired":"Debes seleccionar un cuestionario","fixErrors":"Por favor corrige los errores antes de guardar"},"messages":{"createSuccess":"Tema creado exitosamente","updateSuccess":"Tema actualizado exitosamente","deleteSuccess":"Tema eliminado exitosamente","duplicateSuccess":"Tema duplicado exitosamente","createError":"Error al crear el tema","updateError":"Error al actualizar el tema","deleteError":"Error al eliminar el tema","duplicateError":"Error al duplicar el tema","deleteConfirmTitle":"Eliminar Tema","deleteConfirmMessage":"Â¿EstÃ¡s seguro de que quieres eliminar \\"{{title}}\\"? Esta acciÃ³n no se puede deshacer.","found":"{{count}} tema encontrado","found_plural":"{{count}} temas encontrados","noCourses":"No hay cursos disponibles","noQuizzes":"No hay cuestionarios disponibles"},"filters":{"course":"Filtrar por Curso","type":"Filtrar por Tipo","status":"Filtrar por Estado","clearFilters":"Limpiar Filtros"}},"books":{"title":"Libros","description":"DescripciÃ³n","woocommerceReminder":"Recuerda dar de alta el libro en Woocommerce para que estÃ© disponible para la compra","createBook":"Crear Libro","editBook":"Editar Libro","deleteBook":"Eliminar Libro","searchPlaceholder":"Buscar libros...","allStatus":"Todos los estados","noPdf":"Sin PDF","untitled":"Libro sin tÃ­tulo","linkedTo":"Vinculado a","emptyState":"No hay libros creados todavÃ­a.","createFirst":"Crear el primer libro","noResults":"No se encontraron libros con esos criterios.","titleRequired":"El tÃ­tulo es obligatorio","pdfFile":"Archivo PDF","featuredImage":"Imagen de portada","startDate":"Fecha de inicio","endDate":"Fecha de fin","selectImage":"Seleccionar imagen de portada","uploading":"Subiendo...","selectPdf":"Seleccionar archivo PDF","uploadFailed":"Error al subir el archivo","wcProduct":"Producto WooCommerce","linkProduct":"Vincular producto","unlink":"Desvincular","searchProducts":"Buscar productos...","wcNotActive":"WooCommerce no estÃ¡ activo","noProducts":"No se encontraron productos","wcProductHelp":"Vincular este libro a un producto de WooCommerce permite controlar el acceso segÃºn las compras.","confirmDelete":"Â¿EstÃ¡s seguro de eliminar este libro?","myBooks":"Mis Libros","myBooksDescription":"Descarga los libros que has adquirido","loadingBooks":"Cargando libros...","noBooks":"No tienes libros","noBooksDescription":"AÃºn no has adquirido ningÃºn libro. Cuando compres un producto con libro asociado, aparecerÃ¡ aquÃ­.","download":"Descargar PDF","downloading":"Descargando...","noDownload":"No disponible","updates":"Actualizaciones","viewChapters":"Ver Actualizaciones","fullVersion":"Libro Completo","fullPdf":"PDF Completo","downloads":"Descargas Disponibles","noUpdates":"Sin actualizaciones"},"quizzes":{"title":"Cuestionarios","description":"Crea y gestiona cuestionarios para evaluar el aprendizaje","timeRemaining":"Tiempo Restante","addNew":"AÃ±adir Nuevo Cuestionario","createQuiz":"Crear Cuestionario","editQuiz":"Editar Cuestionario","viewQuiz":"Ver Cuestionario","deleteQuiz":"Eliminar Cuestionario","duplicateQuiz":"Duplicar Cuestionario","untitled":"Cuestionario Sin TÃ­tulo","noQuizzes":"No se encontraron cuestionarios","noQuizzesDescription":"AÃºn no has creado ningÃºn cuestionario.","searchPlaceholder":"Buscar cuestionarios...","noDetailedResults":"No hay resultados detallados para mostrar.","loadingQuizzes":"Cargando cuestionarios...","loadingResults":"Cargando resultados del cuestionario...","quizResults":"Resultados del Cuestionario","createNew":"Crear Nuevo Cuestionario","editTitle":"Editando: {{title}}","form":{"title":"TÃ­tulo del Quiz","course":"Curso","category":"CategorÃ­a","difficulty":"Dificultad","startDate":"Fecha de Inicio","instructions":"Instrucciones","passingScore":"Nota para Aprobar (%)","timeLimit":"LÃ­mite de Tiempo (mins)","maxAttempts":"Intentos MÃ¡ximos","randomize":"Aleatorizar Preguntas","showResults":"Mostrar Resultados al Finalizar","negativeScoring":"Habilitar PuntuaciÃ³n Negativa","addQuestions":"AÃ±adir Preguntas del Banco","searchPlaceholder":"Buscar preguntas por tÃ­tulo...","selectedQuestions":"Preguntas Seleccionadas","noQuestions":"AÃºn no se han aÃ±adido preguntas."},"fields":{"title":"TÃ­tulo del Cuestionario","instructions":"Instrucciones","course":"Curso","category":"CategorÃ­a","difficulty":"Dificultad","quizType":"Tipo de Cuestionario","passingScore":"PuntuaciÃ³n MÃ­nima","timeLimit":"LÃ­mite de Tiempo","maxAttempts":"Intentos MÃ¡ximos","questions":"Preguntas","totalPoints":"Puntos Totales","randomizeQuestions":"Aleatorizar Preguntas","showResults":"Mostrar Resultados","enableNegativeScoring":"Habilitar PuntuaciÃ³n Negativa"},"question":{"unanswered":"Sin Contestar","answered":"Contestada","withRisk":"Con Riesgo","clearSelection":"Limpiar setema","answerExplanation":"ExplicaciÃ³n de la respuesta","noExplanationAvailable":"No hay explicaciÃ³n disponible para esta pregunta aÃºn.","questionStatistics":"EstadÃ­sticas de la pregunta","failureRate":"Porcentaje de fallos","difficultQuestion":"Esta es una pregunta difÃ­cil - mÃ¡s de la mitad de los estudiantes la fallan","noStatisticsAvailable":"No hay suficientes datos estadÃ­sticos para esta pregunta aÃºn.","markWithRisk":"Marcar con riesgo"},"reviewedQuestion":{"correct":"Correcta","incorrect":"Incorrecta","unanswered":"Sin contestar","withRisk":"Con riesgo","markFavorite":"Marcar como favorita","removeFromFavorites":"Quitar de favoritas","addComment":"Agregar duda","challenge":"Impugnar","questionStatistics":"EstadÃ­sticas de la pregunta","failedBy":"Esta pregunta ha sido fallada por el {{percentage}}% del alumnado.","answerExplanation":"ExplicaciÃ³n de la respuesta","errorInvalidData":"Error: Datos de pregunta o resultado invÃ¡lidos.","correctAnswerIs":"La respuesta correcta es"},"feedbackModal":{"successTitle":"Â¡Mensaje Enviado!","successMessage":"Gracias por tu colaboraciÃ³n. Hemos recibido tu mensaje.","close":"Cerrar","titleChallenge":"Impugnar Pregunta","titleFeedback":"Duda","question":"Pregunta","messageType":"Tipo de Mensaje","optionFeedback":"Duda","optionChallenge":"ImpugnaciÃ³n","yourMessage":"Tu mensaje","placeholderChallenge":"Explica por quÃ© crees que la pregunta o sus respuestas son incorrectas...","placeholderFeedback":"Escribe aquÃ­ tu duda...","errorEmptyMessage":"El mensaje no puede estar vacÃ­o.","errorSending":"Error al enviar el mensaje.","cancel":"Cancelar","send":"Enviar Mensaje","sending":"Enviando..."},"resultsSidebar":{"title":"Resumen de Resultados","score":"PuntuaciÃ³n","scoreWithRisk":"PuntuaciÃ³n (con riesgo)","timeSpent":"Tiempo Empleado","questionsMap":"Mapa de Preguntas","questionUnanswered":"Pregunta {{number}}: Sin contestar","questionCorrect":"Pregunta {{number}}: Correcta","questionIncorrect":"Pregunta {{number}}: Incorrecta","questionCorrectWithRisk":"Pregunta {{number}}: Correcta (con riesgo)","questionIncorrectWithRisk":"Pregunta {{number}}: Incorrecta (con riesgo)","legendCorrect":"Correcta","legendIncorrect":"Incorrecta","legendRisking":"Arriesgando"},"results":{"title":"Resultados del Cuestionario","summary":"Resumen","scoreWithoutRisk":"Sin Riesgo","scoreWithRisk":"Con Riesgo","correct":"Aciertos","incorrect":"Errores","unanswered":"Sin contestar","globalAverage":"Media UA","percentile":"Percentil","myScore":"Mi Nota","answeredWithRisk":"Con riesgo","backToCourses":"Volver a Cursos","difficultyLevel":"Nivel de dificultad","timeSpent":"Tiempo"},"sidebar":{"loadingQuestions":"Cargando preguntas...","unanswered":"Sin Contestar","answered":"Contestada","withRisk":"Con Riesgo","withoutRisk":"Sin Riesgo","questionsMap":"Mapa de Preguntas","loadingQuestion":"Cargando pregunta...","question":"Pregunta","loading":"Cargando...","loadMore":"Cargar mÃ¡s preguntas","finishExam":"FINALIZAR EXAMEN"},"quiz":{"loadingQuiz":"Cargando cuestionario...","errorTitle":"Error al cargar el cuestionario","errorLoadingQuiz":"No se pudo cargar el cuestionario.","submittingAnswers":"Enviando respuestas...","noQuestionsAssigned":"Este cuestionario no tiene preguntas asignadas.","loadingMoreQuestions":"Cargando mÃ¡s preguntas...","questionsLoadedCount":"{{loaded}} de {{total}} preguntas cargadas","autoLoadingMore":"DesplÃ¡zate hacia abajo para cargar mÃ¡s preguntas automÃ¡ticamente","inProgress":"Cuestionario en progreso","savedProgressFound":"Se encontrÃ³ progreso guardado","continueWhereYouLeft":"Â¿Deseas continuar donde lo dejaste o empezar de nuevo?","currentQuestion":"Pregunta actual","timeRemaining":"Tiempo restante","continueQuiz":"Continuar","startOver":"Empezar de nuevo","showTimer":"Mostrar temporizador","hideTimer":"Ocultar temporizador","quizProgress":"Progreso del Cuestionario","openMenu":"Abrir menÃº del cuestionario"},"exitModal":{"title":"Salir del cuestionario","message":"Â¿EstÃ¡s seguro de que quieres salir? Tu progreso se guardarÃ¡ automÃ¡ticamente y podrÃ¡s continuar mÃ¡s tarde.","cancel":"Cancelar","confirm":"Salir"},"stats":{"totalQuizzes":"Total de Cuestionarios","totalQuestions":"Total de Preguntas","totalPoints":"Total de Puntos","averageQuestions":"Promedio de Preguntas"},"messages":{"titleRequired":"El tÃ­tulo del cuestionario es obligatorio","courseRequired":"Por favor selecciona un curso","questionsRequired":"Por favor aÃ±ade al menos una pregunta","noQuestionsAdded":"AÃºn no se han aÃ±adido preguntas.","createSuccess":"Cuestionario creado exitosamente","updateSuccess":"Cuestionario actualizado exitosamente","deleteSuccess":"Cuestionario eliminado exitosamente","duplicateSuccess":"Cuestionario duplicado exitosamente","deleteConfirmTitle":"Eliminar Cuestionario","deleteConfirmMessage":"Â¿EstÃ¡s seguro de que quieres eliminar \\"{{title}}\\"? Esta acciÃ³n no se puede deshacer.","found":"{{count}} cuestionario encontrado","found_plural":"{{count}} cuestionarios encontrados"},"actions":{"createNewQuiz":"Crear Nuevo Cuestionario","saveAndAddNew":"Guardar y AÃ±adir Nuevo","saveChanges":"Guardar Cambios","addQuestion":"AÃ±adir Pregunta","searchQuestions":"Buscar Preguntas","createFirstQuiz":"Crear Primer Cuestionario"},"card":{"questions_one":"{{count}} Pregunta","questions_other":"{{count}} Preguntas","points_one":"{{count}} Punto","points_other":"{{count}} Puntos","attempts_one":"{{count}} Intento","attempts_other":"{{count}} Intentos","avgScore":"{{count}}% Nota Media","noCourse":"Sin curso asociado","viewQuestions":"Ver Preguntas ({{count}})"},"labels":{"allCourses":"Todos los Cursos","selectCourse":"Seleccionar curso...","minutes":"minutos","unlimited":"Ilimitado","attempts":"intentos"}},"questions":{"title":"Preguntas","description":"Crea y gestiona preguntas para cuestionarios","addNew":"AÃ±adir Nueva Pregunta","createQuestion":"Crear Pregunta","editQuestion":"Editar Pregunta","viewQuestion":"Ver Pregunta","deleteQuestion":"Eliminar Pregunta","duplicateQuestion":"Duplicar Pregunta","untitled":"Pregunta Sin TÃ­tulo","noQuestions":"No se encontraron preguntas","noQuestionsDescription":"AÃºn no has creado ninguna pregunta.","searchPlaceholder":"Buscar preguntas...","loadingQuestions":"Cargando preguntas...","fields":{"title":"TÃ­tulo de la Pregunta","type":"Tipo de Pregunta","difficulty":"Dificultad","category":"CategorÃ­a","points":"Puntos","explanation":"ExplicaciÃ³n","options":"Opciones","correctAnswer":"Respuesta Correcta","provider":"Proveedor"},"types":{"multipleChoice":"OpciÃ³n MÃºltiple","trueFalse":"Verdadero/Falso","shortAnswer":"Respuesta Corta","essay":"Ensayo","matching":"Emparejamiento","fillBlank":"Completar Espacios"},"stats":{"totalQuestions":"Total de Preguntas","byDifficulty":"Por Dificultad","byType":"Por Tipo","averagePoints":"Promedio de Puntos"},"messages":{"titleRequired":"El tÃ­tulo de la pregunta es obligatorio","typeRequired":"El tipo de pregunta es obligatorio","optionsRequired":"Se requieren al menos dos opciones","correctAnswerRequired":"Debes marcar al menos una respuesta correcta","createSuccess":"Pregunta creada exitosamente","updateSuccess":"Pregunta actualizada exitosamente","deleteSuccess":"Pregunta eliminada exitosamente","duplicateSuccess":"Pregunta duplicada exitosamente","deleteConfirmTitle":"Eliminar Pregunta","deleteConfirmMessage":"Â¿EstÃ¡s seguro de que quieres eliminar \\"{{title}}\\"? Esta acciÃ³n no se puede deshacer.","found":"{{count}} pregunta encontrada","found_plural":"{{count}} preguntas encontradas"},"actions":{"addOption":"AÃ±adir OpciÃ³n","removeOption":"Eliminar OpciÃ³n","createFirstQuestion":"Crear Primera Pregunta"},"placeholders":{"option":"OpciÃ³n {{number}}","searchQuestions":"Buscar preguntas por tÃ­tulo..."},"card":{"points":"{{count}} Puntos","noLesson":"Sin tema asociada","viewQuizzes":"Ver Cuestionarios Asociados ({{count}})","difficulty":"Dificultad","provider":"Proveedor","difficulties":{"easy":"FÃ¡cil","medium":"Media","hard":"DifÃ­cil"},"types":{"multiple_choice":"OpciÃ³n MÃºltiple","true_false":"Verdadero / Falso","fill_in_the_blanks":"Rellenar Huecos","short_answer":"Respuesta Corta","essay":"Ensayo"}},"providers":{"human":"Humano","ai":"IA","imported":"Importado"},"details":{"viewTitle":"Vista de Pregunta","questionType":"Tipo de Pregunta","difficulty":"Dificultad","points":"Puntos","category":"CategorÃ­a","question":"Pregunta","answerOptions":"Opciones de Respuesta","explanation":"ExplicaciÃ³n","additionalInfo":"InformaciÃ³n Adicional","lessonId":"LecciÃ³n ID","courseId":"Curso ID","provider":"Proveedor","noCategory":"Sin categorÃ­a","optionLabel":"OpciÃ³n {{number}}","correctPoints":"{{points}} correcta","incorrectPoints":"{{points}} incorrecta","emptyStateTitle":"Selecciona una pregunta para ver sus detalles","emptyStateDescription":"Haz clic en una pregunta de la lista o crea una nueva"},"batch":{"selectAll":"Seleccionar todas","deselectAll":"Deseleccionar todas","deleteSelected":"Eliminar seleccionadas","duplicateSelected":"Duplicar seleccionadas","exportSelected":"Exportar seleccionadas","selectedCount":"{{count}} seleccionada","selectedCount_plural":"{{count}} seleccionadas","deleteConfirm":"Â¿Eliminar {{count}} pregunta?","deleteConfirm_plural":"Â¿Eliminar {{count}} preguntas?"}},"students":{"title":"Estudiantes","description":"Gestiona estudiantes e inscripciones","noStudents":"No se encontraron estudiantes","noStudentsDescription":"No hay estudiantes que coincidan con los filtros actuales.","searchPlaceholder":"Buscar estudiantes...","stats":{"totalUsers":"Total de Usuarios","enrolledUsers":"Usuarios Inscritos","activeUsers":"Usuarios Activos","averageProgress":"Progreso Promedio","recentRegistrations":"Registros Recientes"},"filters":{"allRoles":"Todos los Roles","allCourses":"Todos los Cursos","allStatuses":"Todos los Estados","enrolled":"Inscritos","notEnrolled":"No Inscritos"},"roles":{"administrator":"Administrador","editor":"Editor","author":"Autor","contributor":"Colaborador","subscriber":"Suscriptor"},"actions":{"enroll":"Inscribir","unenroll":"Desinscribir","updateRole":"Actualizar Rol","bulkEnroll":"InscripciÃ³n Masiva","bulkUnenroll":"DesinscripciÃ³n Masiva","viewProfile":"Ver Perfil"},"messages":{"courseManagementMode":"Modo de GestiÃ³n de Curso","viewingInContext":"EstÃ¡s viendo usuarios en el contexto de: {{courseName}}","noUsersFound":"No se encontraron usuarios","noUsersMatch":"NingÃºn usuario coincide con tus filtros actuales. Intenta ajustar tu bÃºsqueda o criterios de filtro.","clearSearch":"Limpiar bÃºsqueda"}},"users":{"title":"Usuarios","description":"Gestiona usuarios del sistema","stats":{"totalUsers":"Total de Usuarios","enrolledUsers":"Usuarios Inscritos","activeUsers":"Usuarios Activos","averageProgress":"Progreso Promedio"}},"modals":{"delete":{"confirmTitle":"Confirmar EliminaciÃ³n","confirmMessage":"Â¿EstÃ¡s seguro de que quieres eliminar este elemento? Esta acciÃ³n no se puede deshacer.","confirmButton":"Eliminar","cancelButton":"Cancelar","typeToConfirm":"Escribe <strong>DELETE</strong> para confirmar:","typeHere":"Escribe DELETE aquÃ­","itemToDelete":"Elemento a eliminar:","processing":"Procesando..."},"close":"Cerrar","save":"Guardar","cancel":"Cancelar"},"notifications":{"createSuccess":"{{resource}} creado exitosamente","updateSuccess":"{{resource}} actualizado exitosamente","deleteSuccess":"{{resource}} eliminado exitosamente","duplicateSuccess":"{{resource}} duplicado exitosamente","error":"OcurriÃ³ un error","savingChanges":"Guardando cambios...","operationFailed":"La operaciÃ³n fallÃ³"},"viewMode":{"cards":"Tarjetas","list":"Lista","grid":"CuadrÃ­cula","switchTo":"Cambiar a vista {{mode}}"},"emptyStates":{"noItemsFound":"No se encontraron elementos","noItemsDescription":"No hay elementos que coincidan con tus criterios de bÃºsqueda.","createFirst":"Crear Primero","getStarted":"Empezar"},"filters":{"filterBy":"Filtrar por","clearAll":"Limpiar Todo","apply":"Aplicar","reset":"Reiniciar","course":"Curso","category":"CategorÃ­a","difficulty":"Dificultad","status":"Estado","type":"Tipo"},"pagination":{"showing":"Mostrando","of":"de","results":"resultados","page":"PÃ¡gina","previous":"Anterior","next":"Siguiente","first":"Primera","last":"Ãšltima"},"validation":{"required":"Este campo es obligatorio","invalidEmail":"Email invÃ¡lido","invalidUrl":"URL invÃ¡lida","minLength":"Debe tener al menos {{length}} caracteres","maxLength":"No debe exceder {{length}} caracteres","mustBeNumber":"Debe ser un nÃºmero","mustBePositive":"Debe ser un nÃºmero positivo"},"ranking":{"title":"Ranking del Test","yourPosition":"Tu PosiciÃ³n","averageScore":"PuntuaciÃ³n Media","pending":"Pendiente","quizzesCompleted":"Tests Completados","completeAllQuizzes":"Completa todos los tests del curso para ver tu posiciÃ³n","loading":"Cargando ranking...","error":"Error al cargar el ranking","noData":"AÃºn no hay rankings","noDataDescription":"SÃ© el primero en completar este test","noTestsYet":"AÃºn no has realizado ningÃºn test","completeFirstQuiz":"Completa tu primer test para aparecer en el ranking","avgWithoutRisk":"Media sin riesgo","avgWithRisk":"Media con riesgo","totalUsers":"Participantes","viewRanking":"Ver Ranking"},"events":{"pending":"Pendiente","nextEvent":"PrÃ³ximo Evento","noEventsScheduled":"No hay eventos programados","november":"Noviembre"},"supportMaterial":{"noMaterials":"No hay material de apoyo disponible","noMaterialsDescription":"AÃºn no se ha agregado material de apoyo a este curso","document":"documento","documents":"documentos","file":"archivo","files":"archivos","download":"Descargar","read":"Leer","noPreview":"Vista previa no disponible","noPreviewDescription":"Este documento no puede mostrarse en el navegador","showLesson":"Desplegar tema","hideLesson":"Ocultar tema","available":"Ya disponible","createTheme":"Crear Tema","addMaterial":"AÃ±adir Material","newTheme":"Nuevo Tema","lessonCreated":"Tema creado exitosamente","materialSaved":"Material guardado exitosamente","materialDeleted":"Material eliminado exitosamente","deleteConfirm":"Â¿EstÃ¡ seguro de eliminar este material?","addMaterialNow":"Â¿Deseas aÃ±adir material de apoyo ahora?","createMaterial":"Crear Material de Apoyo","editMaterial":"Editar Material de Apoyo","materialTitle":"TÃ­tulo del Material","materialTitlePlaceholder":"Ej: GuÃ­a de Estudio, Manual de Referencia...","materialType":"Tipo de Material","pdfDescription":"Archivo PDF","textType":"Texto","textDescription":"Contenido de texto","pdfFile":"Archivo PDF","pdfUrlPlaceholder":"URL del archivo PDF","selectPDF":"Seleccionar PDF","previewPDF":"Vista previa del PDF","uploadPDF":"Subir archivo PDF","uploading":"Subiendo...","fileUploaded":"Archivo subido exitosamente","uploadError":"Error al subir el archivo","maxSize":"TamaÃ±o mÃ¡ximo: 10 MB","selectFromLibrary":"Seleccionar desde la biblioteca","textContent":"Contenido de Texto","selectImage":"Seleccionar Imagen","deleteTheme":"Eliminar tema","deleteThemeTitle":"Eliminar Tema","deleteThemeConfirm":"Â¿EstÃ¡s seguro de que deseas eliminar este tema? Esta acciÃ³n no se puede deshacer.","deleteThemeWarning":"Se eliminarÃ¡n permanentemente todos los materiales asociados a este tema.","associatedMaterials":"{{count}} material(es) asociado(s)","associatedMaterials_one":"1 material asociado","associatedMaterials_other":"{{count}} materiales asociados","themeDeleted":"Tema eliminado exitosamente","confirmDelete":"Eliminar","orderThemes":"Ordenar Temas","saveOrder":"Guardar Orden","orderSaved":"Orden guardado exitosamente","moveUp":"Mover arriba","moveDown":"Mover abajo","iosFallback":"Para una mejor experiencia, abre el PDF en una nueva pestaÃ±a o descÃ¡rgalo","safariPdfNote":"Safari no puede mostrar PDFs embebidos. Abre en nueva pestaÃ±a o descarga el archivo.","visibility":"Visibilidad","visibleDescription":"Los estudiantes pueden ver este material","hiddenDescription":"Este material estÃ¡ oculto para los estudiantes","unlockDate":"Fecha de desbloqueo","unlockDateDescription":"El material se desbloquearÃ¡ automÃ¡ticamente en esta fecha. Dejar vacÃ­o para que estÃ© siempre disponible.","clearDate":"Quitar fecha","hiddenBadge":"Oculto","lockedBadge":"Bloqueado","errors":{"titleRequired":"El tÃ­tulo es requerido","pdfRequired":"Debe seleccionar un archivo PDF","contentRequired":"El contenido es requerido","saveFailed":"Error al guardar el material"}},"videos":{"noVideos":"No hay videos disponibles","noVideosDescription":"AÃºn no se han agregado videos a este curso","video":"video","videos":"videos","watch":"Ver","noVideoUrl":"Video no disponible","noVideoUrlDescription":"Este video no tiene una URL vÃ¡lida","showLesson":"Desplegar tema","hideLesson":"Ocultar tema","available":"Ya disponible","createTheme":"Crear Tema","addVideo":"AÃ±adir Video","createVideo":"Crear Video","editVideo":"Editar Video","videoTitle":"TÃ­tulo del Video","videoTitlePlaceholder":"Ej: IntroducciÃ³n al curso, LecciÃ³n 1...","videoUrl":"URL del Video","videoUrlPlaceholder":"https://www.youtube.com/watch?v=... o https://vimeo.com/...","urlHelp":"Soporta URLs de YouTube y Vimeo","duration":"DuraciÃ³n (opcional)","durationPlaceholder":"DuraciÃ³n en minutos","durationHelp":"Tiempo estimado del video en minutos","videoSaved":"Video guardado exitosamente","videoDeleted":"Video eliminado exitosamente","deleteConfirm":"Â¿EstÃ¡ seguro de eliminar este video?","lessonCreated":"Tema creado exitosamente","lessonUpdated":"Tema actualizado exitosamente","deleteTheme":"Eliminar tema","deleteThemeTitle":"Eliminar Tema","deleteThemeConfirm":"Â¿EstÃ¡s seguro de que deseas eliminar este tema? Esta acciÃ³n no se puede deshacer.","deleteThemeWarning":"Se eliminarÃ¡n permanentemente todos los videos asociados a este tema.","associatedVideos":"{{count}} video(s) asociado(s)","associatedVideos_one":"1 video asociado","associatedVideos_other":"{{count}} videos asociados","themeDeleted":"Tema eliminado exitosamente","confirmDelete":"Eliminar","orderThemes":"Ordenar Temas","saveOrder":"Guardar Orden","orderSaved":"Orden guardado exitosamente","moveUp":"Mover arriba","moveDown":"Mover abajo","errors":{"titleRequired":"El tÃ­tulo es requerido","urlRequired":"La URL del video es requerida","invalidUrl":"La URL no es vÃ¡lida","saveFailed":"Error al guardar el video","deleteFailed":"Error al eliminar el video","deleteTheme":"Error al eliminar el tema","saveOrder":"Error al guardar el orden"}},"tests":{"noTests":"No hay tests disponibles","noTestsDescription":"AÃºn no se han agregado tests a este curso","test":"test","tests":"tests","configuration":"ConfiguraciÃ³n","generateTest":"Generar Test","start":"Iniciar","startTest":"Comenzar Test","startQuiz":"Comenzar Cuestionario","retake":"Repetir","retakeQuiz":"Repetir Cuestionario","passingScore":"Nota mÃ­nima","timeLimit":"Tiempo lÃ­mite","time":"Tiempo","minutes":"minutos","noTimeLimit":"Sin lÃ­mite","questions":"Preguntas","difficulty":"Dificultad","difficultyEasy":"FÃ¡cil","difficultyMedium":"Medio","difficultyHard":"DifÃ­cil","easy":"FÃ¡cil","medium":"Medio","hard":"DifÃ­cil","startDate":"Fecha de inicio","showLesson":"Desplegar tema","hideLesson":"Ocultar tema","available":"Ya disponible","statistics":"EstadÃ­sticas del Test","withoutRisk":"Sin Arriesgar","withRisk":"Arriesgando","avgScore":"Media UA","myScore":"Mi Nota","score":"Nota","percentile":"Percentil","cutoffScore":"Nota de corte","recentAttempts":"Resumen de tus Intentos","attemptDate":"Intento / Fecha","scorePercentile":"Nota / Percentil","riskPercentile":"Arriesgando / Percentil","viewCorrection":"Ver CorrecciÃ³n","view":"Ver","last5Attempts":"Ãšltimos 5 intentos","passed":"Aprobado","failed":"No Aprobado","details":"Detalles","viewDetails":"Ver detalles del intento","viewerPlaceholder":"Interfaz de test en desarrollo","viewerPlaceholderDescription":"AquÃ­ se mostrarÃ¡ la interfaz para realizar el test","backToInfo":"Volver al Test","loadingAttemptDetails":"Cargando detalles del intento...","errorLoadingAttempt":"Error al cargar el intento","attemptDetails":"Detalles del Intento","searchPlaceholder":"Buscar tests...","noTestsFound":"No se encontraron tests","tryDifferentSearch":"Intenta una bÃºsqueda diferente","customTestDescription":"Crea un test personalizado segÃºn tus necesidades","customTest":"Test Personalizado","noQuestionsFound":"No se encontraron preguntas","adjustFilters":"Ajusta los filtros para encontrar preguntas disponibles","practiceAtYourPace":"Practica a tu ritmo sin presiÃ³n de tiempo","startPractice":"Comenzar PrÃ¡ctica","checkAnswer":"Verificar Respuesta","correctAnswer":"Â¡Correcto!","incorrectAnswer":"Incorrecto","wellDone":"Â¡Muy bien! Has acertado la respuesta.","keepPracticing":"Revisa la explicaciÃ³n y sigue practicando.","explanation":"ExplicaciÃ³n","noQuestionsAvailable":"No hay preguntas disponibles","testHistory":"Historial de Tests","attempt":"intento","attempts":"intentos","searchQuiz":"Buscar test","quizNamePlaceholder":"Nombre del test...","lesson":"Tema","allLessons":"Todos los temas","dateFrom":"Desde","dateTo":"Hasta","showing":"Mostrando","of":"de","results":"resultados","clearFilters":"Limpiar filtros","loadingHistory":"Cargando historial...","noAttemptsYet":"No tienes intentos registrados","startTests":"Comienza a realizar tests para ver tu historial","errorLoadingHistory":"Error al cargar el historial","tryAgain":"Intentar de nuevo","viewQuiz":"Ver test","aboveAverage":"sobre la media","belowAverage":"bajo la media","date":"Fecha","status":"Estado","actions":"Ver","testInfo":"InformaciÃ³n","myStats":"Mis EstadÃ­sticas","createTheme":"Crear Tema","addTest":"AÃ±adir Test","createTest":"Crear Test","editTest":"Editar Test","testTitle":"TÃ­tulo del Test","testTitlePlaceholder":"Ej: Test de IntroducciÃ³n","selectQuiz":"Seleccionar Quiz","selectQuizPlaceholder":"Selecciona un quiz existente","createQuestion":"Crear Pregunta","noQuestions":"No hay preguntas en este quiz","testSaved":"Test guardado correctamente","testDeleted":"Test eliminado correctamente","deleteConfirm":"Â¿EstÃ¡s seguro de que quieres eliminar este test?","deleteError":"Error al eliminar el test","deleteQuestionConfirm":"Â¿EstÃ¡s seguro de que quieres eliminar esta pregunta?","deleteTheme":"Eliminar tema","deleteThemeTitle":"Eliminar Tema","deleteThemeConfirm":"Â¿EstÃ¡s seguro de que quieres eliminar este tema?","deleteThemeWarning":"Esta acciÃ³n no se puede deshacer. Se eliminarÃ¡n todos los tests asociados.","associatedTests":"{{count}} test asociado","associatedTests_one":"{{count}} test asociado","associatedTests_other":"{{count}} tests asociados","themeDeleted":"Tema eliminado correctamente","deleteThemeError":"Error al eliminar el tema","confirmDelete":"Eliminar","points":"puntos","orderThemes":"Ordenar Temas","saveOrder":"Guardar Orden","orderSaved":"Orden guardado exitosamente","moveUp":"Mover arriba","moveDown":"Mover abajo","errors":{"titleRequired":"El tÃ­tulo es requerido","quizRequired":"Debes seleccionar un quiz","deleteQuestionFailed":"Error al eliminar la pregunta","saveOrder":"Error al guardar el orden"}},"navigation":{"previous":"Anterior","next":"Siguiente"},"progress":{"completed":"Completado","markComplete":"Marcar como completado"},"login":{"welcomeBack":"Bienvenido de vuelta","signInToContinue":"Inicia sesiÃ³n para continuar","username":"Usuario o correo electrÃ³nico","usernamePlaceholder":"tu@email.com","password":"ContraseÃ±a","rememberMe":"Recordarme","signIn":"Iniciar SesiÃ³n","signingIn":"Iniciando sesiÃ³n...","forgotPassword":"Â¿Olvidaste tu contraseÃ±a?","invalidCredentials":"Usuario o contraseÃ±a incorrectos","error":"Error al iniciar sesiÃ³n. Por favor, intenta de nuevo."},"statistics":{"title":"EstadÃ­sticas del Curso","averageScore":"Nota Media","ranking":"Ranking","topPercent":"Top {{percent}}%","cutoffScore":"Nota de corte","passedCutoff":"Has superado la nota de corte","noCutoffDataYet":"Nota de corte disponible prÃ³ximamente","completedQuizzes":"Tests Completados","lessonsCompleted":"Temas Completados","lessonsWithProgress":"Temas con progreso","bestPerformance":"Mejor Nota","noDataYet":"Sin datos aÃºn","performanceByLesson":"Analisis temas","noDataAvailable":"No hay datos disponibles aÃºn","completeTestsToSeeStats":"Completa tests para ver estadÃ­sticas","areasToImprove":"Ãreas a Mejorar","lessonsToReview":"Temas a Repasar","lessonAnalysis":"AnÃ¡lisis de Temas","allLessonsInCourse":"Todos los temas del curso","sortHighToLow":"Mayor a menor nota","sortLowToHigh":"Menor a mayor nota","noLessonsData":"No hay datos de temas disponibles","review":"Repasar","reviewLesson":"Ver Tema","greatJob":"Â¡Excelente!","noWeakAreasFound":"No tienes Ã¡reas crÃ­ticas que mejorar","allLessonsAbove8":"Todos tus temas tienen nota superior a 8","allLessons":"Todos los Temas","critical":"Urgente","needsImprovement":"Mejorar","good":"Bien","difficultyAnalysis":"AnÃ¡lisis por Dificultad","questionAnalysis":"AnÃ¡lisis de Preguntas","withRisk":"Con Riesgo","withoutRisk":"Sin Riesgo","filterByLesson":"Filtrar por tema","allLessonsFilter":"Todos los temas","easy":"FÃ¡cil","medium":"Medio","hard":"DifÃ­cil","noDifficultyData":"No hay datos de dificultad disponibles","noDataForDifficulty":"No hay datos para esta dificultad","correct":"Correctas","incorrect":"Incorrectas","unanswered":"Sin contestar","markedWithRisk":"Marcadas con riesgo","viewDetail":"Ver detalle","riskAnalysis":"AnÃ¡lisis de Riesgo","noRiskData":"No hay datos de riesgo disponibles","noRiskDataForDifficulty":"No hay preguntas marcadas con riesgo en esta dificultad","quizzesCompleted":"Tests completados","score":"Nota","attempt":"intento","attempts":"intentos","temporary":"Temporal","temporaryNote":"Completa todos los tests para obtener tu nota definitiva","temporaryRanking":"PosiciÃ³n temporal. Completa todos los tests para ver tu ranking final","chart":{"title":"EvoluciÃ³n de Notas","error":"Error al cargar el grÃ¡fico","noData":"No hay datos suficientes para mostrar el grÃ¡fico. Completa algunos tests para ver tu evoluciÃ³n.","trendUp":"Mejorando +{{diff}}","trendDown":"Bajando -{{diff}}","trendStable":"Estable","period":{"week":"7 dÃ­as","month":"30 dÃ­as","all":"Todo"}}},"courseNotifications":{"title":"Notificaciones","unread":"sin leer","markAllRead":"Marcar todas como leÃ­das","loadMore":"Cargar mÃ¡s","empty":"No tienes notificaciones","emptyDescription":"Cuando haya nuevas temas, tests, vÃ­deos o materiales en este curso, recibirÃ¡s notificaciones aquÃ­.","types":{"new_lesson":"Nueva Tema","new_quiz":"Nuevo Test","new_video":"Nuevo VÃ­deo","new_pdf":"Nuevo PDF","new_text":"Nuevo Contenido","lesson_updated":"Tema Actualizada"}},"calendar":{"description":"Visualiza el calendario de temas del curso","legend":"Leyenda","legendVideo":"Video","legendTest":"Test","legendPdf":"PDF","legendLesson":"Tema","legendNote":"Nota","legendLiveClass":"Clase en directo","noDate":"Sin fecha","noLessons":"No hay temas","noLessonsDescription":"Este curso aÃºn no tiene temas programados.","date":"Fecha","note":"Nota","liveClass":"Clase en directo","addNote":"AÃ±adir nota","addLiveClass":"AÃ±adir clase","newNote":"Nueva nota","editNote":"Editar nota","newLiveClass":"Nueva clase en directo","editLiveClass":"Editar clase","noteTitle":"TÃ­tulo","noteTitlePlaceholder":"Ej: Examen parcial","noteDescription":"DescripciÃ³n","noteDescriptionPlaceholder":"AÃ±ade una descripciÃ³n opcional...","noteDate":"Fecha","noteColor":"Color","confirmDeleteNote":"Â¿Eliminar esta nota?","liveClassTitle":"TÃ­tulo","liveClassTitlePlaceholder":"Ej: Clase de repaso tema 5","liveClassLink":"Enlace de la reuniÃ³n","liveClassDescription":"DescripciÃ³n","liveClassDescriptionPlaceholder":"AÃ±ade una descripciÃ³n opcional...","liveClassDate":"Fecha","liveClassTime":"Hora","liveClassColor":"Color","joinClass":"Unirse a la clase"},"liveClasses":{"inProgress":"En curso","finished":"Finalizada","countdownDaysHours":"En {{days}}d {{hours}}h","countdownDays":"En {{days}} dÃ­a{{s}}","countdownHoursMin":"En {{hours}}h {{min}}min","countdownMin":"Empieza en {{min}} min","upcomingCount":"{{count}} clase{{s}} programada{{s}}"},"admin":{"tests":{"title":"Tests","newTest":"Nuevo Test","searchPlaceholder":"Buscar tests por tÃ­tulo...","noTests":"No se encontraron tests","noTestsDescription":"AÃºn no has creado ningÃºn test. Haz clic en \\"Nuevo Test\\" para crear uno.","loadMore":"Cargar mÃ¡s","total":"{{count}} test en total","total_plural":"{{count}} tests en total","filters":"Filtros","clearFilters":"Limpiar filtros","category":"CategorÃ­a","allCategories":"Todas las categorÃ­as","course":"Curso","allCourses":"Todos los cursos","difficulty":"Dificultad","allDifficulties":"Todos los niveles","easy":"FÃ¡cil","medium":"Medio","hard":"DifÃ­cil","questions":"preguntas","attempts":"intentos","noTimeLimit":"Sin lÃ­mite","edit":"Editar","duplicate":"Duplicar","statistics":"EstadÃ­sticas","delete":"Eliminar","createSuccess":"Test creado correctamente","updateSuccess":"Test actualizado correctamente","deleteSuccess":"Test eliminado correctamente","deleteConfirm":"Â¿EstÃ¡s seguro de que quieres eliminar \\"{{title}}\\"?","duplicateComingSoon":"Funcionalidad de duplicaciÃ³n prÃ³ximamente","statsComingSoon":"EstadÃ­sticas prÃ³ximamente"},"testModal":{"createTitle":"Crear Nuevo Test","editTitle":"Editar Test","tabConfig":"ConfiguraciÃ³n","tabQuestions":"Preguntas","title":"TÃ­tulo","titlePlaceholder":"Ej: Test de GeografÃ­a - Tema 3","titleRequired":"El tÃ­tulo es obligatorio","instructions":"Instrucciones","instructionsPlaceholder":"Instrucciones para los estudiantes...","course":"Curso","selectCourse":"Seleccionar curso...","category":"CategorÃ­a","selectCategory":"Seleccionar categorÃ­a...","difficulty":"Dificultad","easy":"FÃ¡cil","medium":"Medio","hard":"DifÃ­cil","passingScore":"Nota para aprobar","timeLimit":"LÃ­mite de tiempo (minutos)","timeLimitPlaceholder":"VacÃ­o = sin lÃ­mite","autoCalculated":"Calculado automÃ¡ticamente","maxAttempts":"Intentos mÃ¡ximos","maxAttemptsPlaceholder":"VacÃ­o = ilimitados","randomizeQuestions":"Aleatorizar preguntas","startDate":"Fecha de inicio","startDatePlaceholder":"Seleccionar fecha...","selectedQuestions":"Preguntas seleccionadas","noQuestionsSelected":"No hay preguntas seleccionadas","noQuestionsSelectedDesc":"Usa el buscador para aÃ±adir preguntas a este test","searchQuestions":"Buscar preguntas...","searchQuestionsButton":"Buscar","searchResults":"Resultados de bÃºsqueda","noSearchResults":"No se encontraron preguntas","addQuestion":"AÃ±adir","removeQuestion":"Quitar del test","editQuestion":"Editar pregunta","newQuestion":"Nueva Pregunta","cancel":"Cancelar","create":"Crear Test","save":"Guardar Cambios","saving":"Guardando..."},"questions":{"title":"Preguntas","newQuestion":"Nueva Pregunta","searchPlaceholder":"Buscar preguntas por tÃ­tulo...","noQuestions":"No se encontraron preguntas","noQuestionsDescription":"AÃºn no has creado ninguna pregunta. Haz clic en \\"Nueva Pregunta\\" para crear una.","loadMore":"Cargar mÃ¡s","total":"{{count}} pregunta en total","total_plural":"{{count}} preguntas en total","filters":"Filtros","clearFilters":"Limpiar filtros","difficulty":"Dificultad","allDifficulties":"Todos los niveles","category":"CategorÃ­a","allCategories":"Todas las categorÃ­as","provider":"Proveedor","allProviders":"Todos los proveedores","easy":"FÃ¡cil","medium":"Medio","hard":"DifÃ­cil","points":"pts","options":"opciones","assignedTests":"tests asignados","edit":"Editar","duplicate":"Duplicar","delete":"Eliminar","createSuccess":"Pregunta creada correctamente","updateSuccess":"Pregunta actualizada correctamente","deleteSuccess":"Pregunta eliminada correctamente","deleteConfirm":"Â¿EstÃ¡s seguro de que quieres eliminar esta pregunta?"},"questionModal":{"createTitle":"Nueva Pregunta","editTitle":"Editar Pregunta","viewTitle":"Ver Pregunta","title":"TÃ­tulo de la pregunta","titlePlaceholder":"Escribe el tÃ­tulo de la pregunta...","titleRequired":"El tÃ­tulo es obligatorio","difficulty":"Dificultad","easy":"FÃ¡cil","medium":"Medio","hard":"DifÃ­cil","category":"CategorÃ­a","selectCategory":"Sin categorÃ­a","addCategory":"AÃ±adir nueva categorÃ­a","newCategoryPlaceholder":"Nueva categorÃ­a...","addCategoryButton":"AÃ±adir","provider":"Proveedor","selectProvider":"Sin proveedor","addProvider":"AÃ±adir nuevo proveedor","newProviderPlaceholder":"Nuevo proveedor...","addProviderButton":"AÃ±adir","points":"Puntos correcta","pointsIncorrect":"Puntos incorrecta","course":"Asignar a Curso","noCourse":"Sin curso asignado","lesson":"Asignar a Tema","noLesson":"Sin tema asignado","assignToTests":"Asignar a Tests","searchTests":"Buscar tests...","noTestsFound":"No se encontraron tests.","options":"Opciones de respuesta","optionPlaceholder":"Escribe la opciÃ³n...","addOption":"AÃ±adir OpciÃ³n","markCorrect":"Marcar como correcta","removeOption":"Eliminar opciÃ³n","minOptions":"MÃ­nimo 2 opciones","noCorrectOption":"Debes marcar al menos una opciÃ³n como correcta","explanation":"ExplicaciÃ³n (Opcional)","explanationPlaceholder":"Explica por quÃ© esta es la respuesta correcta...","cancel":"Cancelar","create":"Crear Pregunta","createAndNew":"Crear y Nueva","save":"Guardar Cambios","saving":"Guardando..."},"lessons":{"title":"Temas","newLesson":"Nuevo Tema","searchPlaceholder":"Buscar temas por tÃ­tulo...","noLessons":"No se encontraron temas","noLessonsDescription":"AÃºn no has creado ningÃºn tema. Haz clic en \\"Nuevo Tema\\" para crear uno.","loadMore":"Cargar mÃ¡s","total":"{{count}} tema en total","total_plural":"{{count}} temas en total","filters":"Filtros","clearFilters":"Limpiar filtros","course":"Curso","allCourses":"Todos los cursos","steps":"pasos","edit":"Editar","duplicate":"Duplicar","delete":"Eliminar","createSuccess":"Tema creado correctamente","updateSuccess":"Tema actualizado correctamente","deleteSuccess":"Tema eliminado correctamente","deleteConfirm":"Â¿EstÃ¡s seguro de que quieres eliminar \\"{{title}}\\"?","duplicateComingSoon":"Funcionalidad de duplicaciÃ³n prÃ³ximamente"},"lessonModal":{"createTitle":"Crear Nuevo Tema","editTitle":"Editar Tema","viewTitle":"Ver Tema","tabConfig":"ConfiguraciÃ³n","tabTests":"Tests","title":"TÃ­tulo","titlePlaceholder":"Ej: IntroducciÃ³n a la materia","titleRequired":"El tÃ­tulo es obligatorio","course":"Curso","selectCourse":"Seleccionar curso...","courseRequired":"El curso es obligatorio","description":"DescripciÃ³n","descriptionPlaceholder":"DescripciÃ³n breve del tema...","lessonOrder":"Orden","completionCriteria":"Criterio de completado","completionViewAll":"Ver todo el contenido","completionPassQuiz":"Aprobar el test","completionCompleteSteps":"Completar todos los pasos","stepsTitle":"Pasos de contenido","stepsDescription":"AÃ±ade los pasos que componen este tema","stepsRequired":"Debes aÃ±adir al menos un paso","allStepsMustHaveTitle":"Todos los pasos deben tener un tÃ­tulo","addStep":"AÃ±adir Paso","editStep":"Editar Paso","addFirstStep":"AÃ±adir primer paso","noSteps":"No hay pasos","noContent":"Sin contenido","stepTitle":"TÃ­tulo del paso","stepTitlePlaceholder":"Ej: IntroducciÃ³n","stepTitleRequired":"El tÃ­tulo del paso es obligatorio","stepType":"Tipo de paso","addStepButton":"AÃ±adir","stepTypes":{"video":"VÃ­deo","text":"Texto","pdf":"PDF","quiz":"Test"},"videoUrl":"URL del vÃ­deo","videoUrlPlaceholder":"https://youtube.com/watch?v=...","textContent":"Contenido","pdfFile":"Archivo PDF","selectPdf":"Seleccionar archivo PDF","uploading":"Subiendo...","selectTest":"Seleccionar Test","searchForTest":"Busca un test para aÃ±adirlo como paso","quizId":"ID del Test","quizIdPlaceholder":"Introduce el ID del test","searchTests":"Buscar tests","searchTestsPlaceholder":"Buscar por tÃ­tulo...","search":"Buscar","newTest":"Nuevo Test","assignedTests":"Tests asignados","noTestsAssigned":"No hay tests asignados a este tema","searchResults":"Resultados de bÃºsqueda","add":"AÃ±adir","editTest":"Editar test","editTestInPage":"Editar test en pÃ¡gina de Tests","testsEditHint":"Haz clic en un test para editarlo en la pÃ¡gina de Tests","removeTest":"Quitar test","saveError":"Error al guardar el tema","saveAndNew":"Guardar y Crear Otro"}}}'),Z=window.qe_data?.locale?.substring(0,2)||"en",ee={en:{translation:X},es:{translation:J}};G.use(o.r9).init({resources:ee,lng:Z,fallbackLng:"en",interpolation:{escapeValue:!1}});const te=G;var re=a(3322),ne=a(1409),se=a(6359),oe=a(6166),ae=a(665),ie=a(827),le=a(9407);const ce=(0,le.A)("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);var de=a(3610),ue=a(5244),pe=a(3893),fe=a(7504),me=a(964),he=a(4539),ge=a(8676),xe=a(8697);const ye=(0,le.A)("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]);var be=a(790);const ve=()=>{const e=(0,re.zy)(),{t}=(0,o.Bd)(),{getColor:n,isDarkMode:s,toggleDarkMode:a}=(0,se.DP)(),[i,l]=(0,r.useState)(!1),c=window.qe_data?.campus_logo||"",d=window.qe_data?.campus_logo_dark||"",u=s&&d?d:c,p=n("primary","#3b82f6"),f=n("accent","#f59e0b"),m=n("textPrimary","#f9fafb"),h={text:s?m:p,textMuted:s?"rgba(255,255,255,0.7)":"rgba(0,0,0,0.6)",accent:f,bg:n("secondaryBackground","#ffffff"),border:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)",hoverBg:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},g=[{to:"/",text:t("admin.dashboard","Dashboard"),icon:oe.A,exact:!0},{to:"/courses",text:t("admin.courses","Cursos"),icon:ae.A},{to:"/lessons",text:t("admin.lessons","Lecciones"),icon:ie.A},{to:"/quizzes",text:t("admin.quizzes","Cuestionarios"),icon:ce},{to:"/questions",text:t("admin.questions","Preguntas"),icon:de.A},{to:"/books",text:t("admin.books","Libros"),icon:ue.A},{to:"/students",text:t("admin.students","Estudiantes"),icon:pe.A},{to:"/messages",text:t("admin.messages","Mensajes"),icon:fe.A}],x=(t,r=!1)=>r?e.pathname===t||""===e.pathname:e.pathname.startsWith(t),y=(e,t=!1)=>{const r=x(e,t);return{backgroundColor:"transparent",color:r?h.accent:h.text,borderBottom:r?`2px solid ${h.accent}`:"2px solid transparent"}},b=(e,t,r,n=!1)=>{const s=x(r,n);t?(e.currentTarget.style.color=h.accent,s||(e.currentTarget.style.borderBottom=`2px solid ${h.accent}`)):(e.currentTarget.style.color=s?h.accent:h.text,s||(e.currentTarget.style.borderBottom="2px solid transparent"))};return(0,be.jsxs)("header",{id:"qe-admin-topbar",style:{backgroundColor:h.bg,borderBottom:`1px solid ${h.border}`,position:"sticky",top:0,zIndex:100},className:"w-full",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 lg:px-8 py-3 w-full",children:[(0,be.jsx)("div",{className:"flex items-center gap-3 flex-shrink-0",children:u?(0,be.jsx)("img",{src:u,alt:"Campus Admin",className:"h-9 max-w-[180px] object-contain"}):(0,be.jsx)("h1",{className:"text-xl font-bold m-0",style:{color:h.text},children:"Campus Admin"})}),(0,be.jsx)("nav",{className:"hidden lg:flex items-center gap-1",children:g.map(e=>{const t=e.icon;return(0,be.jsxs)(re.k2,{to:e.to,end:e.exact,className:"flex items-center gap-1.5 px-3 py-2 text-sm font-medium transition-all duration-200 rounded-none focus:outline-none focus-visible:outline-none",style:y(e.to,e.exact),onMouseEnter:t=>b(t,!0,e.to,e.exact),onMouseLeave:t=>b(t,!1,e.to,e.exact),children:[(0,be.jsx)(t,{size:16}),(0,be.jsx)("span",{children:e.text})]},e.to)})}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(re.k2,{to:"/settings",className:"hidden lg:flex items-center gap-1.5 px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg focus:outline-none focus-visible:outline-none",style:{color:x("/settings")?h.accent:h.text,backgroundColor:x("/settings")?h.hoverBg:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=h.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=x("/settings")?h.hoverBg:"transparent"},children:(0,be.jsx)(me.A,{size:16})}),(0,be.jsx)("button",{onClick:a,className:"p-2 rounded-lg transition-all duration-200 focus:outline-none focus-visible:outline-none",style:{color:h.text,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=h.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},title:s?t("common.lightMode","Modo claro"):t("common.darkMode","Modo oscuro"),children:s?(0,be.jsx)(he.A,{size:20}):(0,be.jsx)(ge.A,{size:20})}),(0,be.jsx)("button",{onClick:()=>l(!i),className:"lg:hidden p-2 rounded-lg transition-all duration-200 focus:outline-none focus-visible:outline-none",style:{color:h.text,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=h.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:i?(0,be.jsx)(xe.A,{size:24}):(0,be.jsx)(ye,{size:24})})]})]}),i&&(0,be.jsx)("div",{className:"lg:hidden border-t",style:{backgroundColor:h.bg,borderColor:h.border},children:(0,be.jsxs)("nav",{className:"flex flex-col p-2",children:[g.map(e=>{const t=e.icon,r=x(e.to,e.exact);return(0,be.jsxs)(re.k2,{to:e.to,end:e.exact,onClick:()=>l(!1),className:"flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 focus:outline-none",style:{color:r?h.accent:h.text,backgroundColor:r?h.hoverBg:"transparent"},children:[(0,be.jsx)(t,{size:18}),(0,be.jsx)("span",{children:e.text})]},e.to)}),(0,be.jsxs)(re.k2,{to:"/settings",onClick:()=>l(!1),className:"flex items-center gap-3 px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 border-t mt-2 pt-4 focus:outline-none",style:{color:x("/settings")?h.accent:h.text,backgroundColor:x("/settings")?h.hoverBg:"transparent",borderColor:h.border},children:[(0,be.jsx)(me.A,{size:18}),(0,be.jsx)("span",{children:t("admin.settings","ConfiguraciÃ³n")})]})]})})]})},je=()=>{const{getColor:e,isDarkMode:t}=(0,se.DP)(),r={bg:e("background",t?"#111827":"#f3f4f6")};return(0,be.jsxs)("div",{className:"h-full flex flex-col overflow-hidden",style:{backgroundColor:r.bg},children:[(0,be.jsx)(ve,{}),(0,be.jsx)("main",{className:"flex-1 overflow-hidden",children:(0,be.jsx)(re.sv,{})})]})};var we=a(6669),Ne=a(6981),ke=a(7117),Ce=a(7690),_e=a(7122),Se=a(1963);const Ee=(0,le.A)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),Ae=(0,le.A)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var Me=a(802),Te=a(418),Pe=a(3954),Oe=a(4471);const ze=(0,le.A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),qe=(0,le.A)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var De=a(5977),Ie=a(697),Le=a(8445),Re=a(8834),$e=a(7235),Be=a(3704),Fe=a(8686),Ue=a(8635),We=a(250),He=a(9764);const Qe=(0,le.A)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var Ve=a(7775),Ye=a(5236),Ke=a(9700);var Ge=a(153),Xe=a(2719);const Je=(0,le.A)("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]);var Ze=a(9436),et=a(9798),tt=a(7946);const rt=({isOpen:e,onClose:t,onMessageSent:n,simplifiedMode:s=!1,courseId:o=null})=>{const{getColor:a,isDarkMode:i}=(0,se.DP)(),l={primary:a("primary","#1e3a5f"),accent:a("accent","#f59e0b"),textPrimary:i?a("textPrimary","#f9fafb"):"#1f2937",textSecondary:i?a("textSecondary","#9ca3af"):"#6b7280",textMuted:i?"#6b7280":"#9ca3af",background:i?a("background","#111827"):"#ffffff",backgroundSecondary:i?a("secondaryBackground","#1f2937"):"#f9fafb",border:i?"rgba(255,255,255,0.1)":"#e5e7eb",cardBg:i?a("secondaryBackground","#1f2937"):"#ffffff"},[c,d]=(0,r.useState)("all"),[u,p]=(0,r.useState)([]),[f,m]=(0,r.useState)(""),[h,g]=(0,r.useState)([]),[x,y]=(0,r.useState)([]),[b,v]=(0,r.useState)(""),[j,w]=(0,r.useState)(""),[N,k]=(0,r.useState)(""),[C,_]=(0,r.useState)("announcement"),[S,E]=(0,r.useState)(!1),[A,M]=(0,r.useState)(!1),[T,P]=(0,r.useState)(""),[O,z]=(0,r.useState)(!1),[q,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&!s&&"specific"===c&&I(),e&&!s&&"course"===c&&L()},[e,c,s]),(0,r.useEffect)(()=>{e&&s&&(_("announcement"),d("course"))},[e,s]);const I=async()=>{z(!0);try{const e=`${(0,Ye.getApiConfig)().endpoints.users}?per_page=100`,t=await(0,Ke.qb)(e);g(t.data||[])}catch(e){console.error("Error fetching users:",e),P("Error al cargar usuarios")}finally{z(!1)}},L=async()=>{D(!0);try{const e=`${(0,Ye.getApiConfig)().endpoints.courses}?per_page=100`,t=await(0,Ke.qb)(e);y(t.data||[])}catch(e){console.error("Error fetching courses:",e),P("Error al cargar cursos")}finally{D(!1)}},R=async e=>{if(e.preventDefault(),j.trim()&&N.trim()){if(s){if(!o)return void P("No se detectÃ³ el ID del curso")}else{if("specific"===c&&0===u.length)return void P("Selecciona al menos un usuario");if("course"===c&&!f)return void P("Selecciona un curso")}E(!0),P("");try{const e=`${(0,Ye.getApiConfig)().endpoints.custom_api}/messages/send`;let r;s&&o?(r=[`course:${o}`],console.log("ðŸ“¤ Modo simplificado - Enviando a curso:",o,"recipient_ids:",r)):r="all"===c?["all"]:"course"===c?[`course:${f}`]:u;const a={recipient_ids:r,subject:j,message:N,type:C};console.log("ðŸ“¤ Enviando mensaje:",a),await(0,Ke.qb)(e,{method:"POST",body:JSON.stringify(a)}),M(!0),setTimeout(()=>{$(),n&&n(),t()},2e3)}catch(e){console.error("Error sending message:",e);let t="Error al enviar el mensaje. Por favor, intÃ©ntalo de nuevo.";e.message?t=e.message:e.data?.message&&(t=e.data.message),P(t)}finally{E(!1)}}else P("Asunto y mensaje son obligatorios")},$=()=>{d("all"),p([]),m(""),w(""),k(""),_("announcement"),M(!1),P(""),v("")},B=h.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.email.toLowerCase().includes(b.toLowerCase())),F=[{value:"announcement",label:"Anuncio",icon:Je,color:"blue"},{value:"notification",label:"NotificaciÃ³n",icon:Ze.A,color:"amber"},{value:"alert",label:"Alerta",icon:Te.A,color:"red"}],U=[{value:"all",label:"Todos",sublabel:"usuarios",icon:pe.A},{value:"course",label:"Por curso",sublabel:"especÃ­fico",icon:ae.A},{value:"specific",label:"Usuarios",sublabel:"especÃ­ficos",icon:Fe.A}];return e?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 z-50 bg-black/60 backdrop-blur-sm",onClick:t}),(0,be.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-2 sm:p-4 pointer-events-none overflow-y-auto",children:(0,be.jsxs)("div",{className:"pointer-events-auto w-full max-w-2xl max-h-[95vh] sm:max-h-[90vh] flex flex-col rounded-xl sm:rounded-2xl shadow-2xl overflow-hidden my-auto",style:{backgroundColor:l.background,border:`2px solid ${i?l.accent:l.primary}`},children:[(0,be.jsxs)("div",{className:"px-4 py-3 sm:px-6 sm:py-5 flex items-center justify-between flex-shrink-0",style:{backgroundColor:i?l.backgroundSecondary:l.primary},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,be.jsx)("div",{className:"p-1.5 sm:p-2 rounded-lg sm:rounded-xl bg-white/20",children:(0,be.jsx)(Ve.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-base sm:text-xl font-bold text-white",children:s?"Mensaje al Curso":"Nuevo Mensaje"}),(0,be.jsx)("p",{className:"text-xs sm:text-sm text-white/80 hidden sm:block",children:s?"EnvÃ­a un mensaje a todos los miembros del curso":"ComunÃ­cate con tus estudiantes"})]})]}),(0,be.jsx)("button",{onClick:t,className:"p-1.5 sm:p-2 rounded-lg text-white/80 hover:text-white hover:bg-white/10 transition-colors",children:(0,be.jsx)(xe.A,{className:"w-5 h-5"})})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",style:{backgroundColor:l.background},children:A?(0,be.jsxs)("div",{className:"text-center py-8 sm:py-12",children:[(0,be.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center",style:{backgroundColor:"rgba(16, 185, 129, 0.1)"},children:(0,be.jsx)(Oe.A,{className:"w-10 h-10 text-emerald-500"})}),(0,be.jsx)("h3",{className:"text-xl font-bold mb-2",style:{color:l.textPrimary},children:"Â¡Mensaje Enviado!"}),(0,be.jsx)("p",{style:{color:l.textSecondary},children:"Tu mensaje ha sido enviado correctamente"})]}):(0,be.jsxs)("form",{onSubmit:R,className:"space-y-4 sm:space-y-5",children:[!s&&(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-semibold mb-2 sm:mb-3",style:{color:l.textPrimary},children:"Destinatarios"}),(0,be.jsx)("div",{className:"grid grid-cols-3 gap-2 sm:gap-3",children:U.map(e=>{const t=e.icon,r=c===e.value;return(0,be.jsxs)("button",{type:"button",onClick:()=>d(e.value),className:"p-2 sm:p-4 rounded-lg sm:rounded-xl border-2 transition-all duration-200 flex flex-col items-center gap-1 sm:gap-2",style:{borderColor:r?l.accent:l.border,backgroundColor:r?i?"rgba(245, 158, 11, 0.1)":"#fef3c7":l.background},children:[(0,be.jsx)("div",{className:"p-1.5 sm:p-2 rounded-md sm:rounded-lg",style:{backgroundColor:r?l.accent:i?"rgba(255,255,255,0.1)":"#f3f4f6",color:r?"#ffffff":l.textSecondary},children:(0,be.jsx)(t,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("span",{className:"block text-xs sm:text-sm font-medium",style:{color:r?l.accent:l.textPrimary},children:e.label}),(0,be.jsx)("span",{className:"text-[10px] sm:text-xs hidden sm:block",style:{color:l.textMuted},children:e.sublabel})]})]},e.value)})})]}),!s&&"course"===c&&(0,be.jsxs)("div",{className:"p-3 sm:p-4 rounded-lg sm:rounded-xl",style:{backgroundColor:l.backgroundSecondary},children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:l.textPrimary},children:"Seleccionar curso"}),q?(0,be.jsxs)("div",{className:"flex items-center justify-center py-3 sm:py-4 gap-2",style:{color:l.textSecondary},children:[(0,be.jsx)(et.A,{className:"w-4 h-4 sm:w-5 sm:h-5 animate-spin"}),(0,be.jsx)("span",{className:"text-sm",children:"Cargando cursos..."})]}):(0,be.jsxs)("select",{value:f,onChange:e=>m(e.target.value),className:"w-full px-3 py-2.5 sm:px-4 sm:py-3 rounded-lg text-sm focus:outline-none focus:ring-2",style:{backgroundColor:l.background,border:`1px solid ${l.border}`,color:l.textPrimary},children:[(0,be.jsx)("option",{value:"",children:"Selecciona un curso..."}),x.map(e=>(0,be.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]})]}),!s&&"specific"===c&&(0,be.jsxs)("div",{className:"p-3 sm:p-4 rounded-lg sm:rounded-xl",style:{backgroundColor:l.backgroundSecondary},children:[(0,be.jsxs)("label",{className:"block text-sm font-medium mb-2",style:{color:l.textPrimary},children:["Seleccionar usuarios",u.length>0&&(0,be.jsx)("span",{className:"ml-2 px-2 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:l.accent},children:u.length})]}),(0,be.jsxs)("div",{className:"relative mb-2 sm:mb-3",children:[(0,be.jsx)(Le.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",style:{color:l.textMuted}}),(0,be.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),placeholder:"Buscar usuarios...",className:"w-full pl-9 sm:pl-10 pr-4 py-2 sm:py-2.5 rounded-lg text-sm focus:outline-none focus:ring-2",style:{backgroundColor:l.background,border:`1px solid ${l.border}`,color:l.textPrimary}})]}),(0,be.jsx)("div",{className:"rounded-lg max-h-36 sm:max-h-48 overflow-y-auto",style:{border:`1px solid ${l.border}`},children:O?(0,be.jsxs)("div",{className:"p-4 text-center",style:{color:l.textSecondary},children:[(0,be.jsx)(et.A,{className:"w-5 h-5 animate-spin inline mr-2"}),"Cargando usuarios..."]}):0===B.length?(0,be.jsx)("div",{className:"p-4 text-center",style:{color:l.textSecondary},children:"No se encontraron usuarios"}):B.map((e,t)=>{const r=u.includes(e.id);return(0,be.jsxs)("label",{className:"flex items-center p-2.5 sm:p-3 cursor-pointer transition-colors",style:{borderBottom:t<B.length-1?`1px solid ${l.border}`:"none",backgroundColor:r?i?"rgba(245, 158, 11, 0.1)":"#fef3c7":"transparent"},children:[(0,be.jsx)("input",{type:"checkbox",checked:r,onChange:()=>{return t=e.id,void p(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"w-4 h-4 rounded flex-shrink-0",style:{accentColor:l.accent}}),(0,be.jsxs)("div",{className:"ml-2 sm:ml-3 flex-1 min-w-0",children:[(0,be.jsx)("p",{className:"text-sm font-medium truncate",style:{color:l.textPrimary},children:e.name}),(0,be.jsx)("p",{className:"text-xs truncate hidden sm:block",style:{color:l.textSecondary},children:e.email})]}),r&&(0,be.jsx)(Oe.A,{className:"w-4 h-4 flex-shrink-0 hidden sm:block",style:{color:l.accent}})]},e.id)})})]}),!s&&(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-semibold mb-2 sm:mb-3",style:{color:l.textPrimary},children:"Tipo de mensaje"}),(0,be.jsx)("div",{className:"flex gap-1.5 sm:gap-2",children:F.map(e=>{const t=e.icon,r=C===e.value,n={blue:{bg:i?"rgba(59, 130, 246, 0.2)":"#dbeafe",text:"#3b82f6",border:"#3b82f6"},amber:{bg:i?"rgba(245, 158, 11, 0.2)":"#fef3c7",text:"#f59e0b",border:"#f59e0b"},red:{bg:i?"rgba(239, 68, 68, 0.2)":"#fee2e2",text:"#ef4444",border:"#ef4444"}}[e.color];return(0,be.jsxs)("button",{type:"button",onClick:()=>_(e.value),className:"flex-1 px-2 py-2 sm:px-4 sm:py-3 rounded-lg border-2 flex items-center justify-center gap-1 sm:gap-2 transition-all",style:{borderColor:r?n.border:l.border,backgroundColor:r?n.bg:"transparent",color:r?n.text:l.textSecondary},children:[(0,be.jsx)(t,{className:"w-4 h-4"}),(0,be.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:e.label})]},e.value)})})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"block text-sm font-semibold mb-1.5 sm:mb-2",style:{color:l.textPrimary},children:["Asunto ",(0,be.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,be.jsx)("input",{type:"text",value:j,onChange:e=>w(e.target.value),placeholder:"Escribe el asunto del mensaje...",required:!0,maxLength:200,className:"w-full px-3 py-2.5 sm:px-4 sm:py-3 rounded-lg text-sm focus:outline-none focus:ring-2",style:{backgroundColor:l.background,border:`1px solid ${l.border}`,color:l.textPrimary}})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"block text-sm font-semibold mb-1.5 sm:mb-2",style:{color:l.textPrimary},children:["Mensaje ",(0,be.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,be.jsx)("textarea",{value:N,onChange:e=>k(e.target.value),placeholder:"Escribe tu mensaje aquÃ­...",required:!0,maxLength:5e3,rows:4,className:"w-full px-3 py-2.5 sm:px-4 sm:py-3 rounded-lg text-sm focus:outline-none focus:ring-2 resize-none",style:{backgroundColor:l.background,border:`1px solid ${l.border}`,color:l.textPrimary}}),(0,be.jsxs)("div",{className:"flex justify-between mt-1",children:[(0,be.jsx)("span",{className:"text-xs",style:{color:l.textSecondary},children:"Soporta texto plano"}),(0,be.jsxs)("span",{className:"text-xs",style:{color:N.length>4500?"#f59e0b":l.textSecondary},children:[N.length,"/5000"]})]})]}),T&&(0,be.jsxs)("div",{className:"flex items-center gap-2 p-3 rounded-lg",style:{backgroundColor:i?"rgba(239, 68, 68, 0.15)":"#fee2e2",border:"1px solid "+(i?"rgba(239, 68, 68, 0.3)":"#fecaca")},children:[(0,be.jsx)(tt.A,{className:"w-5 h-5 text-red-500 flex-shrink-0"}),(0,be.jsx)("p",{className:"text-sm text-red-500",children:T})]})]})}),!A&&(0,be.jsxs)("div",{className:"px-4 py-3 sm:px-6 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3 sm:gap-0 border-t flex-shrink-0",style:{backgroundColor:l.backgroundSecondary,borderColor:l.border},children:[(0,be.jsx)("div",{className:"text-xs hidden sm:block",style:{color:l.textSecondary},children:s?"Se enviarÃ¡ a todos los miembros del curso":(0,be.jsxs)(be.Fragment,{children:["all"===c&&"Se enviarÃ¡ a todos los usuarios","course"===c&&f&&"Se enviarÃ¡ a los usuarios del curso","specific"===c&&u.length>0&&`Se enviarÃ¡ a ${u.length} usuario(s)`]})}),(0,be.jsxs)("div",{className:"flex gap-2 sm:gap-3",children:[(0,be.jsx)("button",{type:"button",onClick:t,disabled:S,className:"flex-1 sm:flex-none px-3 sm:px-4 py-2 sm:py-2.5 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",style:{border:`1px solid ${l.border}`,color:l.textPrimary,backgroundColor:"transparent"},children:"Cancelar"}),(0,be.jsx)("button",{onClick:R,disabled:S||!j.trim()||!N.trim(),className:"flex-1 sm:flex-none px-4 sm:px-5 py-2 sm:py-2.5 rounded-lg text-sm font-medium text-white flex items-center justify-center gap-2 transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:l.accent},children:S?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(et.A,{className:"w-4 h-4 animate-spin"}),(0,be.jsx)("span",{className:"hidden sm:inline",children:"Enviando..."}),(0,be.jsx)("span",{className:"sm:hidden",children:"..."})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ve.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{children:"Enviar"})]})})]})]})]})})]}):null};var nt=a(5708),st=a.n(nt),ot=a(3375),at=a(3627),it=a(8004),lt=a(5026),ct=a(8919),dt=a(4857),ut=a(4125),pt=a(1837);const ft=e=>e?.title?.rendered||e?.title||"Pregunta sin tÃ­tulo",mt=({questionId:e,mode:t,onSave:n,onCancel:s,categoryOptions:a,providerOptions:i,onCategoryCreated:l,onProviderCreated:c,availableQuizzes:d,availableLessons:u,availableCourses:p,simpleMode:f=!1})=>{const{t:m}=(0,o.Bd)(),{getColor:h,isDarkMode:g}=(0,se.DP)(),x={text:g?h("textPrimary","#f9fafb"):h("primary","#1a202c"),textMuted:g?h("textSecondary","#9ca3af"):"#6b7280",accent:h("accent","#f59e0b"),primary:h("primary","#3b82f6"),bgCard:g?h("secondaryBackground","#1f2937"):"#ffffff",border:g?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",inputBg:g?"rgba(255,255,255,0.05)":"#ffffff",shadow:g?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",shadowSm:g?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.05)",cardBorder:g?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.04)",hoverBg:g?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)",accentGlow:g?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)"},[y,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),[k,C]=(0,r.useState)({}),_=(0,r.useRef)(null),S=(0,r.useRef)(!1),E=(0,r.useRef)(null),A=(0,r.useCallback)(e=>{e&&(e.style.height="auto",e.style.height=e.scrollHeight+"px")},[]),[M,T]=(0,r.useState)(!1),[P,O]=(0,r.useState)(""),[z,q]=(0,r.useState)(!1),[D,I]=(0,r.useState)(!1),[L,R]=(0,r.useState)(""),[$,B]=(0,r.useState)(!1),F=(0,ot.FR)((0,ot.MS)(ot.AN,{activationConstraint:{distance:8}})),U=(0,r.useCallback)(()=>{C({title:"",status:"publish",type:"multiple_choice",difficulty:"medium",category:"",points:"1",pointsIncorrect:"0",explanation:"",quizIds:[],lessonId:"",courseId:"",provider:"",options:[{text:"",isCorrect:!1},{text:"",isCorrect:!1}]})},[]);(0,r.useEffect)(()=>{S.current=!1,(async()=>{if(e&&"edit"===t){b(!0);try{const t=await(0,Xe.getOne)(e,{context:"view"});let r="";t.content?.rendered?r=t.content.rendered.trim():"string"==typeof t.content&&(r=t.content.trim()),console.log("ðŸ“ Question Data:",{id:t.id,contentRendered:t.content?.rendered,contentType:typeof t.content,finalContentHTML:r,htmlLength:r.length});const n={title:ft(t),status:t.status||"publish",type:t.meta?._question_type||"multiple_choice",difficulty:t.meta?._difficulty_level||"medium",points:t.meta?._points?.toString()||"1",pointsIncorrect:t.meta?._points_incorrect?.toString()||"0",explanation:r,options:t.meta?._question_options||[{text:"",isCorrect:!1},{text:"",isCorrect:!1}],quizIds:t.meta?._quiz_ids||[],lessonId:t.meta?._question_lesson?.toString()||"",courseId:t.meta?._course_id?.toString()||"",category:t.qe_category?.[0]?.toString()||"",provider:t.qe_provider?.[0]?.toString()||""};console.log("ðŸ”„ Setting formData with explanation:",{explanation:n.explanation,explanationLength:n.explanation?.length||0}),C(n)}catch(e){console.error("Error loading question:",e),N("Failed to load question data.")}finally{b(!1)}}else"create"===t&&U()})()},[e,t,U]),(0,r.useEffect)(()=>{A(E.current)},[k.title,A]),(0,r.useEffect)(()=>{if(S.current)return;if(!_.current||!k.explanation)return;const e=_.current.getEditor();if(!e)return;const t=k.explanation.replace(/<\/p>\s+<p/gi,"</p><p");e.root.innerHTML=t,e.update("silent"),S.current=!0},[k.explanation]);const W=(e,t)=>{C(r=>({...r,[e]:t}))},H=(e,t,r)=>{C(n=>({...n,options:n.options.map((n,s)=>s===e?{...n,[t]:r}:n)}))},Q=e=>{k.options.length>1&&C(t=>({...t,options:t.options.filter((t,r)=>r!==e)}))},V=e=>{C(t=>({...t,options:t.options.map((t,r)=>({...t,isCorrect:r===e}))}))},Y=async(e,t,r,n,s,o,a)=>{if(t.trim()){n(!0);try{const n=await(0,lt.A3)(e,{name:t.trim()});r&&r(),a(n.id.toString()),s(""),o(!1)}catch(t){"term_exists"===t.response?.data?.code&&t.response.data.data.term_id?(a(t.response.data.data.term_id.toString()),s(""),o(!1)):console.error(`Error creating ${e}:`,t)}finally{n(!1)}}},K=(0,r.useCallback)(async()=>{try{const e=await(0,it.I)({title:"Seleccionar imagen",buttonText:"Insertar imagen",type:"image"});if(e&&e.url&&_.current){const t=_.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e.url),t.setSelection(r.index+1)}}catch(e){console.error("Error al abrir selector de medios:",e)}},[]),G=(0,r.useMemo)(()=>({toolbar:{container:[[{header:[1,2,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]],handlers:{image:K}}}),[K]);if(y)return(0,be.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,be.jsx)("p",{children:m("common.loading")})});const X=m("create"===t?"questions.createQuestion":"questions.editQuestion");return(0,be.jsxs)("div",{className:"rounded-2xl flex flex-col h-full overflow-hidden",style:{backgroundColor:x.bgCard,border:`1px solid ${x.cardBorder}`,boxShadow:x.shadow},children:[(0,be.jsxs)("header",{className:"p-5 flex items-center justify-between flex-shrink-0",style:{borderBottom:`1px solid ${x.cardBorder}`},children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-lg font-bold tracking-tight",style:{color:x.text},children:X}),"edit"===t&&!f&&(0,be.jsx)("p",{className:"text-sm font-normal mt-0.5",style:{color:x.textMuted},children:ft(k)})]}),(0,be.jsx)("div",{className:"flex items-center gap-4",children:(0,be.jsx)("button",{onClick:s,className:"p-2 rounded-xl transition-all duration-200",style:{color:x.textMuted,backgroundColor:x.hoverBg},children:(0,be.jsx)(xe.A,{className:"h-5 w-5"})})})]}),(0,be.jsxs)("main",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[w&&(0,be.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl flex items-center justify-between",children:[(0,be.jsx)("span",{children:w}),(0,be.jsx)("button",{onClick:()=>N(null),className:"text-red-500 hover:text-red-700",children:(0,be.jsx)(xe.A,{className:"h-4 w-4"})})]}),(0,be.jsx)("textarea",{ref:E,value:k.title||"",onChange:e=>{W("title",e.target.value),A(e.target)},placeholder:m("questions.fields.title"),rows:1,className:"w-full text-lg font-bold focus:outline-none focus:ring-2 rounded-lg p-3 resize-none",style:{backgroundColor:x.inputBg,border:g?"1px solid rgba(255,255,255,0.2)":"1px solid #d1d5db",color:x.text,"--tw-ring-color":x.accent,overflow:"hidden"}}),!f&&(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,be.jsx)("label",{className:"block text-sm font-medium",style:{color:x.text},children:m("questions.fields.category")}),!M&&(0,be.jsx)("button",{onClick:()=>T(!0),type:"button",className:"text-sm",style:{color:x.accent},children:(0,be.jsx)(Ie.A,{className:"h-4 w-4 inline-block"})})]}),M&&(0,be.jsx)("div",{className:"mb-2 p-2 border rounded-md",style:{backgroundColor:x.inputBg,borderColor:x.border},children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("input",{type:"text",value:P,onChange:e=>O(e.target.value),placeholder:"Nueva...",className:"flex-1 w-full px-2 py-1 rounded-md text-sm",style:{backgroundColor:x.bgCard,borderColor:x.border,border:`1px solid ${x.border}`,color:x.text}}),(0,be.jsx)(dt.A,{size:"xs",onClick:()=>Y("qe_category",P,l,q,O,T,e=>W("category",e)),isLoading:z,children:"OK"}),(0,be.jsx)(dt.A,{size:"xs",variant:"secondary",onClick:()=>T(!1),children:"X"})]})}),(0,be.jsxs)("select",{value:k.category||"",onChange:e=>W("category",e.target.value),className:"w-full input rounded-md",style:{backgroundColor:x.inputBg,borderColor:x.border,border:`1px solid ${x.border}`,color:x.text},children:[(0,be.jsx)("option",{value:"",children:m("common.select")}),(a||[]).map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,be.jsx)("label",{className:"block text-sm font-medium",style:{color:x.text},children:m("questions.fields.provider")}),!D&&(0,be.jsx)("button",{onClick:()=>I(!0),type:"button",className:"text-sm",style:{color:x.accent},children:(0,be.jsx)(Ie.A,{className:"h-4 w-4 inline-block"})})]}),D&&(0,be.jsx)("div",{className:"mb-2 p-2 border rounded-md",style:{backgroundColor:x.inputBg,borderColor:x.border},children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("input",{type:"text",value:L,onChange:e=>R(e.target.value),placeholder:"Nuevo...",className:"flex-1 w-full px-2 py-1 rounded-md text-sm",style:{backgroundColor:x.bgCard,borderColor:x.border,border:`1px solid ${x.border}`,color:x.text}}),(0,be.jsx)(dt.A,{size:"xs",onClick:()=>Y("qe_provider",L,c,B,R,I,e=>W("provider",e)),isLoading:$,children:"OK"}),(0,be.jsx)(dt.A,{size:"xs",variant:"secondary",onClick:()=>I(!1),children:"X"})]})}),(0,be.jsxs)("select",{value:k.provider||"",onChange:e=>W("provider",e.target.value),className:"w-full input rounded-md",style:{backgroundColor:x.inputBg,borderColor:x.border,border:`1px solid ${x.border}`,color:x.text},children:[(0,be.jsx)("option",{value:"",children:m("common.select")}),(i||[]).map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:x.text},children:m("questions.fields.difficulty")}),(0,be.jsx)("select",{value:k.difficulty||"medium",onChange:e=>W("difficulty",e.target.value),className:"w-full input rounded-md",style:{backgroundColor:x.inputBg,borderColor:x.border,border:`1px solid ${x.border}`,color:x.text},children:[{value:"easy",label:"FÃ¡cil"},{value:"medium",label:"Medio"},{value:"hard",label:"DifÃ­cil"}].map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),!f&&(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:x.text},children:"Asignar a Curso"}),(0,be.jsxs)("select",{value:k.courseId||"",onChange:e=>W("courseId",e.target.value),className:"w-full input rounded-md",style:{backgroundColor:x.inputBg,borderColor:x.border,border:`1px solid ${x.border}`,color:x.text},children:[(0,be.jsx)("option",{value:"",children:"Sin curso asignado"}),(p||[]).map(e=>(0,be.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:x.text},children:"Asignar a LecciÃ³n"}),(0,be.jsxs)("select",{value:k.lessonId||"",onChange:e=>W("lessonId",e.target.value),className:"w-full input rounded-md",style:{backgroundColor:x.inputBg,borderColor:x.border,border:`1px solid ${x.border}`,color:x.text},children:[(0,be.jsx)("option",{value:"",children:"Pregunta General"}),(u||[]).map(e=>(0,be.jsx)("option",{value:e.id,children:e.title?.rendered||e.title},e.id))]})]})]}),["multiple_choice","true_false"].includes(k.type)&&(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:x.text},children:"Respuestas *"}),(0,be.jsx)(ot.Mp,{sensors:F,collisionDetection:ot.fp,onDragEnd:e=>{const{active:t,over:r}=e;if(t.id!==r.id){const e=k.options.findIndex((e,r)=>r===t.id),n=k.options.findIndex((e,t)=>t===r.id);C(t=>({...t,options:(0,at.be)(t.options,e,n)}))}},children:(0,be.jsx)(at.gB,{items:k.options?.map((e,t)=>t)||[],strategy:at._G,children:(0,be.jsx)("div",{className:"space-y-3",children:(k.options||[]).map((e,t)=>(0,be.jsx)(pt.S,{id:t,option:e,index:t,isMultipleChoice:"multiple_choice"===k.type,handleOptionChange:H,setCorrectAnswer:V,removeOption:Q},t))})})}),"multiple_choice"===k.type&&(0,be.jsx)(dt.A,{variant:"secondary",size:"sm",onClick:()=>{C(e=>({...e,options:[...e.options,{text:"",isCorrect:!1}]}))},className:"mt-3",iconLeft:Ie.A,children:"AÃ±adir OpciÃ³n"})]}),!f&&(0,be.jsx)(ut.A,{availableQuizzes:d,selectedQuizIds:k.quizIds||[],onChange:e=>W("quizIds",e)}),(0,be.jsxs)("div",{className:"explanation-editor",children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:x.text},children:m("questions.fields.explanation")}),(0,be.jsx)(st(),{ref:_,theme:"snow",defaultValue:"",onChange:e=>W("explanation",e),modules:G,style:{minHeight:"200px"}},`quill-${e||"new"}-${t}`)]})]}),(0,be.jsx)("footer",{className:"p-4 flex justify-end flex-shrink-0",style:{borderTop:`1px solid ${x.cardBorder}`,backgroundColor:x.bgCard},children:(0,be.jsx)(ct.A,{onClick:async()=>{j(!0),N(null);try{let e=0;if("multiple_choice"===k.type||"true_false"===k.type){const t=k.options.filter(e=>!e.isCorrect).length;t>0&&(e=Number((1/t).toFixed(4)))}console.log("ðŸ’¾ Saving question with explanation:",{explanationLength:k.explanation?.length||0,explanationPreview:k.explanation?.substring(0,100)||"EMPTY"});const r={_question_type:k.type,_difficulty_level:k.difficulty,_points:1,_points_incorrect:e,_question_options:k.options,_quiz_ids:k.quizIds,_explanation:k.explanation};k.lessonId&&""!==k.lessonId&&"0"!==k.lessonId&&(r._question_lesson=parseInt(k.lessonId)),k.courseId&&""!==k.courseId&&"0"!==k.courseId&&(r._course_id=parseInt(k.courseId));const o={title:k.title,type:k.type,difficulty:k.difficulty,points:"1",pointsIncorrect:e.toString(),quizIds:k.quizIds,lessonId:k.lessonId,courseId:k.courseId,options:k.options,explanation:k.explanation,qe_category:k.category?[parseInt(k.category)]:[],qe_provider:k.provider?[parseInt(k.provider)]:[],meta:r};console.log("ðŸ’¾ Data being saved:",o),await n(o),"create"===t&&s()}catch(e){console.error("Error saving question:",e),N(e.message||"Error al guardar la pregunta")}finally{j(!1)}},disabled:v,variant:"primary",className:"font-semibold py-2.5 px-6 rounded-xl text-sm",children:m(v?"common.saving":"common.save")})})]})};var ht=a(3001),gt=a(5103),xt=a(3827),yt=a(6172);const bt=e=>e?e.replace(/\(Curso:[^)]+\)\s*/gi,"").replace(/\(LecciÃ³n:[^)]+\)\s*/gi,"").replace(/\(Pregunta ID:[^)]+\)\s*/gi,"").replace(/\(Video:[^)]+\)\s*/gi,"").replace(/<p>\s*<\/p>/gi,"").trim():"",vt=({videoUrl:e})=>{const t=(e=>{if(!e)return null;const t=e.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)/);if(t)return`https://player.vimeo.com/video/${t[1]}`;const r=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]+)/);return r?`https://www.youtube.com/embed/${r[1]}`:e})(e);return t?(0,be.jsx)("div",{className:"rounded-lg overflow-hidden",style:{aspectRatio:"16/9",backgroundColor:"#000"},children:(0,be.jsx)("iframe",{src:t,className:"w-full h-full border-0",title:"Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):null},jt=({questionId:e,pageColors:t})=>{const[n,s]=(0,r.useState)(null);return(0,r.useEffect)(()=>{let t=!0;return e&&(async()=>{try{const r=(0,Ye.getApiConfig)(),n=await(0,Ke.qb)(`${r.endpoints.questions}/${e}`);if(t&&n){const t=n.data||n;s(t.title?.rendered||t.title||`Pregunta #${e}`)}}catch(r){console.error(r),t&&s(`Pregunta #${e}`)}})(),()=>{t=!1}},[e]),n?(0,be.jsx)("span",{className:"text-sm font-medium break-words",style:{color:t.text,display:"block",wordBreak:"break-word",overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:n}}):(0,be.jsx)("span",{className:"text-sm font-medium",style:{color:t.text},children:"Cargando pregunta..."})},wt=({initialSearch:e="",courseMode:t=!1,courseId:s=null})=>{const{t:a}=(0,o.Bd)(),{getColor:i,isDarkMode:l}=(0,se.DP)(),c=(0,re.g)(),[d,u]=((0,re.zy)(),(0,re.ok)()),p=d.get("messageId"),f=c.courseId||s,m=t||!!f,h=(0,r.useMemo)(()=>({text:l?i("textPrimary","#f9fafb"):i("primary","#1a202c"),textMuted:l?i("textSecondary","#9ca3af"):"#6b7280",accent:i("accent","#f59e0b"),primary:i("primary","#3b82f6"),bgCard:l?i("secondaryBackground","#1f2937"):"#ffffff",bgPage:l?i("secondaryBackground","#111827"):"#f5f7fa",border:l?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",inputBg:l?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:l?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)",success:"#10b981",error:"#ef4444",info:"#3b82f6",shadow:l?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",shadowSm:l?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.05)",cardBorder:l?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.04)",accentGlow:l?"rgba(245, 158, 11, 0.15)":"rgba(245, 158, 11, 0.1)"}),[i,l]),[g,x]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),w=(0,r.useRef)(null),[N,k]=(0,r.useState)(new Set),[C,_]=(0,r.useState)(!1),[S,E]=(0,r.useState)(""),[A,M]=(0,r.useState)(!1),[T,P]=(0,r.useState)([]),[O,z]=(0,r.useState)(!1),[q,D]=(0,r.useState)([]),[I,L]=(0,r.useState)(!1),[R,$]=(0,r.useState)(null),{searchValue:B,handleSearchChange:F,clearSearch:U}=(0,Ge.ui)(d.get("search")||e,()=>{},500),{filters:W,updateFilter:H}=(0,Ge.BC)({status:"all",type:"all"},()=>{},300),{options:Q,refetch:V}=(0,ht.h)(["qe_category","qe_provider"]),{quizzes:Y}=((0,r.useMemo)(()=>(Q.qe_category||[]).filter(e=>"all"!==e.value),[Q.qe_category]),(0,r.useMemo)(()=>(Q.qe_provider||[]).filter(e=>"all"!==e.value),[Q.qe_provider]),(0,gt.A)({autoFetch:!0,perPage:100})),{lessons:K}=(0,xt.A)({autoFetch:!0,perPage:100}),{courses:G}=(0,yt.A)({autoFetch:!0,perPage:100}),{messages:X,loading:J,computed:Z,pagination:ee,updateMessageStatus:te,fetchMessages:oe,requestNotificationPermission:ae}=((e={})=>{const{search:t="",status:n=null,type:s=null,courseId:o=null,autoFetch:a=!0,enablePolling:i=!0,pollingInterval:l=3e4}=e,[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),[x,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)({currentPage:1,totalPages:1,total:0,perPage:20,hasMore:!1}),j=(0,r.useRef)(!0),w=(0,r.useRef)({search:t,status:n,type:s,courseId:o}),N=(0,r.useRef)(""),k=(0,r.useRef)(null),C=(0,r.useRef)(0),_=(0,r.useRef)(!0);(0,r.useEffect)(()=>{w.current={search:t,status:n,type:s,courseId:o}},[t,n,s,o]),(0,r.useEffect)(()=>{const e=()=>{_.current=!document.hidden,!document.hidden&&i&&(console.log("ðŸ” Page visible again, checking for new messages..."),S())};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[i]),(0,r.useEffect)(()=>()=>{j.current=!1,k.current&&clearTimeout(k.current)},[]);const S=(0,r.useCallback)(async()=>{if(j.current&&_.current)try{const e=(0,Ye.getApiConfig)(),t=w.current,r=new URLSearchParams({page:"1",per_page:"1",orderby:"created_at",order:"desc"});t.status&&r.append("status",t.status),t.type&&r.append("type",t.type);const n=`${e.endpoints.custom_api}/messages?${r}`;console.log("ðŸ”„ Checking for new messages...");const s=await(0,Ke.qb)(n);if(!j.current)return;const o=s.headers["X-WP-Total"],a=o?parseInt(o,10):0;if(C.current>0&&a>C.current){const e=a-C.current;console.log(`ðŸ”” ${e} new message(s) detected!`),y(!0),"Notification"in window&&"granted"===Notification.permission&&new Notification("Quiz Extended",{body:`You have ${e} new message(s)`,icon:"/wp-content/plugins/quiz-extended/assets/icon.png"})}C.current=a}catch(e){console.error("âŒ Error checking for new messages:",e)}},[]),E=(0,r.useCallback)(()=>{if(!i||k.current)return;console.log(`â° Starting polling every ${l/1e3}s`);const e=()=>{S(),k.current=setTimeout(e,l)};k.current=setTimeout(e,l)},[i,l,S]),A=(0,r.useCallback)(()=>{k.current&&(console.log("â¸ï¸ Stopping polling"),clearTimeout(k.current),k.current=null)},[]),M=(0,r.useCallback)(async(e=!1)=>{if(!j.current)return;const t=e?1:b.currentPage+1;if(e||b.hasMore)try{e&&(p(!0),m(null),d([]),y(!1));const r=(0,Ye.getApiConfig)(),n=w.current,s=new URLSearchParams({page:t.toString(),per_page:"20",orderby:"created_at",order:"desc"});n.search&&s.append("search",n.search),n.status&&s.append("status",n.status),n.type&&s.append("type",n.type),n.courseId&&s.append("course_id",n.courseId);const o=`${r.endpoints.custom_api}/messages?${s}`,a=`${o}-${t}-${e}`;if(a===N.current&&!e)return void console.log("ðŸš« Duplicate request prevented");N.current=a,console.log("ðŸš€ Fetching messages:",o);const i=await(0,Ke.qb)(o);if(!j.current)return;const l=i.data?.data||[],c=i.headers["X-WP-Total"],u=i.headers["X-WP-TotalPages"],f=c?parseInt(c,10):l.length;C.current=f;const h={currentPage:t,totalPages:u?parseInt(u,10):1,total:f,perPage:20,hasMore:t<(u?parseInt(u,10):1)};v(h),d(t=>e?l:[...t,...l]),console.log(`âœ… Loaded ${l.length} messages (Page ${t})`)}catch(e){console.error("âŒ Error fetching messages:",e),j.current&&m(e.message||"Failed to load messages")}finally{j.current&&p(!1)}else console.log("ðŸ“­ No more messages to load")},[b]),T=(0,r.useCallback)(async(e,t)=>{if(j.current){g(!0);try{const r=`${(0,Ye.getApiConfig)().endpoints.custom_api}/messages/${e}`,n={status:t};console.log(`ðŸ“ Updating message ${e}:`,n);const s=await(0,Ke.qb)(r,{method:"PUT",body:JSON.stringify(n)});if(!j.current)return;const o=s.data;return console.log("ï¿½ Updating message ID:",e,"Type:",typeof e),console.log("ï¿½ðŸ“¦ API Response:",o),console.log("ðŸ“¦ Updated message ID:",o.id,"Type:",typeof o.id),console.log("ðŸ“¦ Updated status:",o.status),d(t=>{console.log("ðŸ“‹ Current messages:",t.map(e=>({id:e.id,idType:typeof e.id,status:e.status})));const r=t.map(t=>{if(t.id==e){const r={...t,...o};return console.log("ðŸ”„ Merging message:",{msgId:t.id,msgIdType:typeof t.id,updateId:e,updateIdType:typeof e,oldStatus:t.status,newStatus:o.status,mergedStatus:r.status}),r}return t});return console.log("ðŸ“‹ Updated messages array:",r.map(e=>({id:e.id,status:e.status}))),r}),window.jQuery&&window.jQuery(document).trigger("qe-message-status-changed"),console.log("âœ… Message updated successfully"),o}catch(e){throw console.error("âŒ Error updating message:",e),e}finally{j.current&&g(!1)}}},[]),P=(0,r.useCallback)(async e=>{if(j.current){g(!0);try{const t=`${(0,Ye.getApiConfig)().endpoints.custom_api}/messages/${e}`;if(console.log(`ðŸ—‘ï¸ Deleting message ${e}`),await(0,Ke.qb)(t,{method:"DELETE"}),!j.current)return;d(t=>t.filter(t=>t.id!==e)),v(e=>({...e,total:e.total-1})),console.log("âœ… Message deleted successfully")}catch(e){throw console.error("âŒ Error deleting message:",e),e}finally{j.current&&g(!1)}}},[]),O=(0,r.useCallback)(async()=>{if("Notification"in window&&"default"===Notification.permission){const e=await Notification.requestPermission();return console.log("ðŸ”” Notification permission:",e),"granted"===e}return"granted"===Notification.permission},[]),z=(0,r.useMemo)(()=>({totalMessages:b.total,unreadMessages:c.filter(e=>"unread"===e.status).length,feedbackMessages:c.filter(e=>"question_feedback"===e.type).length,challengeMessages:c.filter(e=>"question_challenge"===e.type).length}),[c,b.total]);return(0,r.useEffect)(()=>{a&&M(!0)},[t,n,s]),(0,r.useEffect)(()=>(i?E():A(),()=>A()),[i,E,A]),{messages:c,loading:u,error:f,pagination:{...b,total:b.total},computed:z,updating:h,hasNewMessages:x,fetchMessages:M,updateMessageStatus:T,deleteMessage:P,checkForNewMessages:S,startPolling:E,stopPolling:A,requestNotificationPermission:O,sendMessage:async()=>console.log("sendMessage not implemented in this hook yet")}})({search:B,status:"all"!==W.status?W.status:null,type:"all"!==W.type?W.type:null,courseId:R,autoFetch:!0,enablePolling:!0,pollingInterval:3e4}),ie=(0,r.useCallback)(async e=>{z(!0);try{const t=(0,Ye.getApiConfig)(),r=await(0,Ke.qb)(`${t.endpoints.custom_api}/messages/${e}/replies`),n=r?.data?.data||r?.data||{};P(n.replies||[]),console.log("ðŸ“© Replies loaded:",n.replies?.length||0)}catch(e){console.error("Error fetching replies:",e),P([])}finally{z(!1)}},[]);(0,r.useEffect)(()=>{m||(async()=>{L(!0);try{const e=(0,Ye.getApiConfig)(),t=await(0,Ke.qb)(`${e.endpoints.custom_api}/messages/courses`);D(t?.data?.courses||t?.courses||[])}catch(e){console.error("Error fetching courses with messages:",e)}finally{L(!1)}})()},[m]),(0,r.useEffect)(()=>{ae()},[ae]),(0,r.useEffect)(()=>{g&&!X.find(e=>e.id===g.id)&&x(null)},[X,g]),(0,r.useEffect)(()=>{if(!p||J||0===X.length)return;const e=parseInt(p,10);if(isNaN(e))return;const t=X.find(t=>t.id===e);if(t)console.log("ðŸ”— Deep link: Abriendo mensaje #"+e),x(t),j(!1),E(""),P([]),ie(e),u(e=>{const t=new URLSearchParams(e);return t.delete("messageId"),t});else{const t=async()=>{try{const t=(0,Ye.getApiConfig)(),r=await(0,Ke.qb)(`${t.endpoints.custom_api}/messages/${e}`),n=r?.data?.data||r?.data;n&&(console.log("ðŸ”— Deep link: Mensaje cargado desde API #"+e),x(n),j(!1),E(""),P([]),ie(e))}catch(e){console.error("Error loading message from deep link:",e),ne.oR.error("No se pudo cargar el mensaje")}u(e=>{const t=new URLSearchParams(e);return t.delete("messageId"),t})};t()}},[p,J,X,ie,u]);const le=(0,r.useCallback)(()=>{oe(!0),k(new Set),g&&ie(g.id)},[oe,g,ie]),ce=(0,r.useCallback)((e,t)=>{t.stopPropagation(),k(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},[]),de=(0,r.useCallback)(async e=>{if(0!==N.size){_(!0);try{const t=(0,Ye.getApiConfig)();await(0,Ke.qb)(`${t.endpoints.custom_api}/messages/batch`,{method:"POST",body:JSON.stringify({ids:Array.from(N),action:e})}),k(new Set),x(null),oe(!0)}catch(e){console.error("Error in batch action:",e)}finally{_(!1)}}},[N,oe]),ue=(0,r.useCallback)(e=>{x(e),j(!1),E(""),P([]),ie(e.id)},[ie]),pe=(0,r.useCallback)(()=>{x(null),P([]),E(""),oe(!0)},[oe]),fe=(0,r.useCallback)(async(e,t)=>{try{await te(e,t),g?.id===e&&x(e=>e?{...e,status:t}:null)}catch(e){console.error("Error updating message status:",e)}},[te,g]),me=(0,r.useCallback)(async()=>{if(S.trim()&&g){console.log("ðŸ“¤ Starting reply send...",{messageId:g.id,senderId:g.sender_id,replyLength:S.length}),M(!0);try{const e=`${(0,Ye.getApiConfig)().endpoints.custom_api}/messages/reply`,t={original_message_id:g.id,recipient_id:g.sender_id,subject:`Re: ${g.subject}`.substring(0,200),message:S,type:"reply"};console.log("ðŸ“¤ Sending to:",e),console.log("ðŸ“¤ Payload:",t);const r=await(0,Ke.qb)(e,{method:"POST",body:JSON.stringify(t)});console.log("âœ… Reply response:",r),E(""),await fe(g.id,"resolved"),await ie(g.id),ne.oR.success("Respuesta enviada correctamente")}catch(e){console.error("âŒ Error sending reply:",e),ne.oR.error(`Error al enviar: ${e.message||"Error desconocido"}`)}finally{M(!1)}}else console.log("ðŸš« Reply blocked: no text or no selected message")},[S,g,fe,ie]),he=(0,r.useCallback)(async e=>{if(g?.related_object_id)try{await(0,Xe.updateQuestion)(g.related_object_id,e),ne.oR.success("Pregunta actualizada correctamente"),j(!1)}catch(e){throw console.error("Error updating question:",e),ne.oR.error(`Error al guardar: ${e.message||"Error desconocido"}`),e}else console.error("No question ID available to update")},[g]),ge=e=>{const t=new Date(e),r=Math.floor((new Date-t)/864e5);return 0===r?t.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):1===r?"Ayer":r<7?t.toLocaleDateString("es-ES",{weekday:"short"}):t.toLocaleDateString("es-ES",{day:"numeric",month:"short"})},ye=e=>new Date(e).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}),ve=e=>"question_feedback"===e?{icon:Ee,label:"Duda",color:h.info,bgColor:l?"rgba(59, 130, 246, 0.2)":"#dbeafe"}:"question_challenge"===e?{icon:Ae,label:"ImpugnaciÃ³n",color:h.error,bgColor:l?"rgba(239, 68, 68, 0.2)":"#fee2e2"}:"video_feedback"===e?{icon:Me.A,label:"Duda (Video)",color:h.info,bgColor:l?"rgba(59, 130, 246, 0.2)":"#dbeafe"}:"video_challenge"===e?{icon:Te.A,label:"ImpugnaciÃ³n (Video)",color:h.error,bgColor:l?"rgba(239, 68, 68, 0.2)":"#fee2e2"}:{icon:Pe.A,label:"Mensaje",color:h.textMuted,bgColor:l?"rgba(255,255,255,0.1)":"#f3f4f6"},je=e=>"unread"===e||"read"===e?{label:"Sin leer",color:h.error,bgColor:l?"rgba(239, 68, 68, 0.2)":"#fee2e2",icon:Pe.A}:"resolved"===e?{label:"Resuelto",color:h.success,bgColor:l?"rgba(16, 185, 129, 0.2)":"#d1fae5",icon:Oe.A}:{label:e||"Archivado",color:h.textMuted,bgColor:l?"rgba(255,255,255,0.1)":"#f3f4f6",icon:ze},we=null!==g;return(0,r.useMemo)(()=>{if(!R)return null;const e=q.find(e=>e.id===R);return e?.title||null},[R,q]),(0,be.jsxs)("div",{className:"flex flex-col h-full relative overflow-hidden",style:{backgroundColor:h.bgPage,maxHeight:"100%"},children:[(0,be.jsxs)("div",{className:"flex-1 relative overflow-hidden min-h-0",children:[(0,be.jsxs)("div",{className:"absolute inset-0 flex flex-col transition-transform duration-300 ease-in-out "+(we?"-translate-x-full":"translate-x-0"),children:[(0,be.jsxs)("div",{className:"px-3 sm:px-4 py-3 flex flex-col sm:flex-row sm:items-center gap-3 flex-shrink-0"+(m?" sm:justify-end":""),style:{backgroundColor:h.bgCard,borderBottom:`1px solid ${h.cardBorder}`},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between sm:hidden",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(qe,{size:18,style:{color:h.accent}}),(0,be.jsx)("span",{className:"font-semibold text-sm",style:{color:h.text},children:"Mensajes"}),Z?.unread>0&&(0,be.jsx)("span",{className:"w-5 h-5 flex items-center justify-center rounded-full text-xs font-bold text-white",style:{backgroundColor:h.error},children:Z.unread})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("button",{onClick:le,disabled:J,className:"p-2 rounded-lg",style:{backgroundColor:h.inputBg,color:h.textMuted},children:(0,be.jsx)(De.A,{size:16,className:J?"animate-spin":""})}),(0,be.jsx)("button",{onClick:()=>b(!0),className:"p-2 rounded-lg",style:{background:`linear-gradient(135deg, ${h.accent}, ${h.accent}dd)`,color:"#fff"},children:(0,be.jsx)(Ie.A,{size:16})})]})]}),!m&&(0,be.jsxs)("div",{className:"flex sm:hidden items-center gap-2",children:[(0,be.jsxs)("div",{className:"relative flex-1",children:[(0,be.jsx)(Le.A,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:h.textMuted}}),(0,be.jsx)("input",{type:"text",value:B,onChange:e=>F(e.target.value),placeholder:"Buscar...",className:"w-full pl-9 pr-8 py-2 text-sm rounded-lg focus:outline-none",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`,color:h.text}}),B&&(0,be.jsx)("button",{onClick:U,className:"absolute right-2 top-1/2 -translate-y-1/2",style:{color:h.textMuted},children:(0,be.jsx)(xe.A,{size:14})})]}),(0,be.jsxs)("select",{value:W.status,onChange:e=>H("status",e.target.value),className:"text-xs px-2 py-2 rounded-lg",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`,color:h.text},children:[(0,be.jsx)("option",{value:"all",children:"Todos"}),(0,be.jsx)("option",{value:"unread",children:"Sin leer"}),(0,be.jsx)("option",{value:"resolved",children:"Resueltos"})]})]}),!m&&(0,be.jsxs)("div",{className:"hidden sm:flex items-center gap-3",children:[q.length>0&&(0,be.jsxs)("div",{className:"flex gap-1 p-1 rounded-lg",style:{backgroundColor:h.inputBg},children:[(0,be.jsxs)("button",{onClick:()=>$(null),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200",style:{backgroundColor:R?"transparent":h.bgCard,color:R?h.textMuted:h.text,boxShadow:R?"none":h.shadowSm},children:[(0,be.jsx)(qe,{size:16}),"Todos"]}),q.slice(0,4).map(e=>(0,be.jsxs)("button",{onClick:()=>$(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all duration-200 max-w-[150px]",style:{backgroundColor:R===e.id?h.bgCard:"transparent",color:R===e.id?h.text:h.textMuted,boxShadow:R===e.id?h.shadowSm:"none"},title:e.title,children:[(0,be.jsx)("span",{className:"truncate",children:e.title}),e.unread_count>0&&(0,be.jsx)("span",{className:"flex-shrink-0 w-5 h-5 flex items-center justify-center rounded-full text-xs font-bold text-white",style:{backgroundColor:h.error},children:e.unread_count})]},e.id)),q.length>4&&(0,be.jsxs)("select",{value:R&&!q.slice(0,4).find(e=>e.id===R)?R:"",onChange:e=>$(e.target.value?parseInt(e.target.value):null),className:"text-sm px-2 py-1.5 rounded-md transition-all",style:{backgroundColor:"transparent",color:h.textMuted,border:"none"},children:[(0,be.jsxs)("option",{value:"",children:["+",q.length-4," mÃ¡s"]}),q.slice(4).map(e=>(0,be.jsxs)("option",{value:e.id,children:[e.title," (",e.unread_count,")"]},e.id))]})]}),0===q.length&&!I&&(0,be.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:h.textMuted},children:[(0,be.jsx)(qe,{size:16}),(0,be.jsx)("span",{children:"Bandeja de entrada"})]})]}),!m&&(0,be.jsxs)("div",{className:"hidden sm:flex items-center gap-3 flex-1 max-w-xl mx-4",children:[(0,be.jsxs)("div",{className:"relative flex-1",children:[(0,be.jsx)(Le.A,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:h.textMuted}}),(0,be.jsx)("input",{type:"text",value:B,onChange:e=>F(e.target.value),placeholder:"Buscar mensajes...",className:"w-full pl-10 pr-10 py-2 text-sm rounded-lg focus:outline-none focus:ring-2 transition-all",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`,color:h.text,"--tw-ring-color":h.accent}}),B&&(0,be.jsx)("button",{onClick:U,className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-black/5",style:{color:h.textMuted},children:(0,be.jsx)(xe.A,{size:14})})]}),(0,be.jsxs)("select",{value:W.status,onChange:e=>H("status",e.target.value),className:"text-sm px-3 py-2 rounded-lg focus:outline-none focus:ring-2 transition-all",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`,color:h.text,"--tw-ring-color":h.accent},children:[(0,be.jsx)("option",{value:"all",children:"Todos"}),(0,be.jsx)("option",{value:"unread",children:"Sin leer"}),(0,be.jsx)("option",{value:"resolved",children:"Resueltos"})]}),(0,be.jsxs)("select",{value:W.type,onChange:e=>H("type",e.target.value),className:"text-sm px-3 py-2 rounded-lg focus:outline-none focus:ring-2 transition-all",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`,color:h.text,"--tw-ring-color":h.accent},children:[(0,be.jsx)("option",{value:"all",children:"Todos los tipos"}),(0,be.jsx)("option",{value:"question_feedback",children:"Dudas"}),(0,be.jsx)("option",{value:"question_challenge",children:"Impugnaciones"}),(0,be.jsx)("option",{value:"video_feedback",children:"Dudas de Video"}),(0,be.jsx)("option",{value:"video_challenge",children:"Impugnaciones de Video"})]})]}),(0,be.jsxs)("div",{className:"hidden sm:flex items-center gap-2",children:[N.size>0&&(0,be.jsxs)("div",{className:"flex items-center gap-2 mr-2 px-3 py-1.5 rounded-lg",style:{backgroundColor:l?"rgba(59, 130, 246, 0.15)":"#dbeafe"},children:[(0,be.jsxs)("span",{className:"text-sm font-medium",style:{color:h.info},children:[N.size," sel."]}),(0,be.jsx)("button",{onClick:()=>de("resolve"),className:"text-xs px-2 py-1 rounded font-medium",style:{backgroundColor:h.success,color:"#fff"},children:"Resueltos"})]}),(0,be.jsx)("button",{onClick:le,disabled:J,className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`,color:h.textMuted},children:(0,be.jsx)(De.A,{size:18,className:J?"animate-spin":""})}),(0,be.jsxs)("button",{onClick:()=>b(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200",style:{background:`linear-gradient(135deg, ${h.accent}, ${h.accent}dd)`,color:"#fff"},children:[(0,be.jsx)(Ie.A,{size:16}),"Nuevo mensaje"]})]})]}),(0,be.jsx)("div",{className:"flex-1 overflow-hidden p-2 sm:p-4 pb-16",children:(0,be.jsxs)("div",{className:"h-full rounded-xl overflow-hidden flex flex-col",style:{backgroundColor:h.bgCard,border:`1px solid ${h.cardBorder}`,boxShadow:h.shadow},children:[(0,be.jsxs)("div",{className:"hidden md:grid qe-msg-grid gap-4 px-4 py-3 text-xs font-semibold uppercase tracking-wider flex-shrink-0",style:{backgroundColor:h.inputBg,color:h.textMuted,borderBottom:`1px solid ${h.cardBorder}`},children:[(0,be.jsx)("div",{className:"flex items-center justify-center",children:(0,be.jsx)(Re.A,{size:14})}),(0,be.jsx)("div",{children:"Remitente"}),(0,be.jsx)("div",{children:"Mensaje"}),(0,be.jsx)("div",{children:"Tipo"}),(0,be.jsx)("div",{children:"Estado"}),(0,be.jsxs)("div",{className:"hidden lg:flex items-center gap-1",children:[(0,be.jsx)($e.A,{size:12}),"Fecha"]})]}),(0,be.jsxs)("div",{className:"flex-1 overflow-y-auto pb-4",children:[J&&0===X.length&&(0,be.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,be.jsx)("div",{className:"w-6 h-6 border-2 rounded-full animate-spin",style:{borderColor:`${h.accent}30`,borderTopColor:h.accent}})}),!J&&0===X.length&&(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center h-48",children:[(0,be.jsx)(qe,{size:40,style:{color:h.textMuted,opacity:.3}}),(0,be.jsx)("p",{className:"text-sm mt-3",style:{color:h.textMuted},children:R?"No hay mensajes en este curso":"No hay mensajes"})]}),X.map(e=>{e.id;const t=N.has(e.id),r="unread"===e.status||"read"===e.status,s=ve(e.type),o=je(e.status),a=s.icon,i=o.icon;return(0,be.jsxs)(n().Fragment,{children:[(0,be.jsxs)("div",{className:"hidden md:grid qe-msg-grid gap-4 px-4 py-3 items-center cursor-pointer transition-all duration-150",style:{backgroundColor:"transparent",borderBottom:`1px solid ${h.cardBorder}`},onClick:()=>ue(e),onMouseEnter:e=>{e.currentTarget.style.backgroundColor=h.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)("div",{className:"flex items-center justify-center",onClick:e=>e.stopPropagation(),children:(0,be.jsx)("button",{onClick:t=>ce(e.id,t),className:"transition-transform hover:scale-110",children:t?(0,be.jsx)(Be.A,{size:16,style:{color:h.accent}}):(0,be.jsx)(Re.A,{size:16,style:{color:h.textMuted}})})}),(0,be.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,be.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:h.inputBg},children:(0,be.jsx)(Fe.A,{size:14,style:{color:h.textMuted}})}),(0,be.jsx)("span",{className:"text-sm truncate "+(r?"font-semibold":""),style:{color:r?h.text:h.textMuted},children:e.sender_name||`Usuario #${e.sender_id}`}),r&&(0,be.jsx)("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:h.error}})]}),(0,be.jsx)("div",{className:"min-w-0",children:(0,be.jsx)("p",{className:"text-sm truncate "+(r?"font-medium":""),style:{color:h.text},children:bt(e.message)?bt(e.message).replace(/<[^>]*>/g,"").substring(0,100):"(Sin mensaje)"})}),(0,be.jsx)("div",{children:(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full font-medium",style:{backgroundColor:s.bgColor,color:s.color},children:[(0,be.jsx)(a,{size:12}),s.label]})}),(0,be.jsx)("div",{children:(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full font-medium",style:{backgroundColor:o.bgColor,color:o.color},children:[(0,be.jsx)(i,{size:12}),o.label]})}),(0,be.jsx)("div",{className:"hidden lg:block text-xs",style:{color:h.textMuted},children:(l=e.created_at,new Date(l).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,be.jsx)("div",{className:"md:hidden p-3 cursor-pointer transition-all duration-150 active:scale-[0.99]",style:{backgroundColor:"transparent",borderBottom:`1px solid ${h.cardBorder}`},onClick:()=>ue(e),children:(0,be.jsxs)("div",{className:"flex items-start gap-3",children:[(0,be.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,be.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:h.inputBg},children:(0,be.jsx)(Fe.A,{size:16,style:{color:h.textMuted}})}),r&&(0,be.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 rounded-full border-2",style:{backgroundColor:h.error,borderColor:h.bgCard}})]}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,be.jsx)("span",{className:"text-sm truncate "+(r?"font-semibold":"font-medium"),style:{color:h.text},children:e.sender_name||`Usuario #${e.sender_id}`}),(0,be.jsx)("span",{className:"text-xs flex-shrink-0",style:{color:h.textMuted},children:ge(e.created_at)})]}),(0,be.jsx)("p",{className:"text-sm line-clamp-2 mb-2 "+(r?"font-medium":""),style:{color:r?h.text:h.textMuted},children:bt(e.message)?bt(e.message).replace(/<[^>]*>/g,"").substring(0,120):"(Sin mensaje)"}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:s.bgColor,color:s.color},children:[(0,be.jsx)(a,{size:10}),s.label]}),(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:o.bgColor,color:o.color},children:[(0,be.jsx)(i,{size:10}),o.label]})]})]}),(0,be.jsx)(Ue.A,{size:16,className:"flex-shrink-0 mt-3",style:{color:h.textMuted,opacity:.5}})]})})]},e.id);var l}),ee.hasMore&&(0,be.jsx)("div",{className:"flex justify-center py-4",children:(0,be.jsx)("button",{onClick:()=>oe(!1),disabled:J,className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`,color:h.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=h.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=h.inputBg},children:J?(0,be.jsxs)("span",{className:"flex items-center gap-2",children:[(0,be.jsx)(De.A,{size:14,className:"animate-spin"}),"Cargando..."]}):`Cargar mÃ¡s mensajes (${X.length} de ${ee.total})`})})]})]})})]}),(0,be.jsx)("div",{className:"absolute inset-0 flex flex-col transition-transform duration-300 ease-in-out "+(we?"translate-x-0":"translate-x-full"),style:{backgroundColor:h.bgPage},children:g&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"px-3 sm:px-4 py-3 flex items-center justify-between flex-shrink-0",style:{backgroundColor:h.bgCard,borderBottom:`1px solid ${h.cardBorder}`},children:(0,be.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[(0,be.jsx)("button",{onClick:pe,className:"p-2 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:h.inputBg,color:h.text},children:(0,be.jsx)(We.A,{size:18})}),(0,be.jsxs)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{background:`linear-gradient(135deg, ${h.accent}, ${h.accent}dd)`},children:[(0,be.jsx)(Fe.A,{size:14,className:"text-white sm:hidden"}),(0,be.jsx)(Fe.A,{size:16,className:"text-white hidden sm:block"})]}),(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-0.5 sm:gap-2 min-w-0 flex-1",children:[(0,be.jsx)("span",{className:"font-bold text-sm truncate",style:{color:h.text},children:g.sender_name||`Usuario #${g.sender_id}`}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(()=>{const e=ve(g.type),t=e.icon;return(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-1.5 py-0.5 rounded font-medium flex-shrink-0",style:{backgroundColor:e.bgColor,color:e.color},children:[(0,be.jsx)(t,{size:10}),e.label]})})(),(()=>{const e=je(g.status);return(0,be.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded font-medium flex-shrink-0",style:{backgroundColor:e.bgColor,color:e.color},children:e.label})})()]})]})]})}),(0,be.jsxs)("div",{ref:w,className:"flex-1 overflow-y-auto p-3 sm:p-6 space-y-3 sm:space-y-4 min-h-0",style:{maxHeight:"calc(100vh - 250px)"},children:[(0,be.jsxs)("div",{className:"flex gap-2 sm:gap-4 max-w-4xl",children:[(0,be.jsxs)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${h.accent}, ${h.accent}dd)`},children:[(0,be.jsx)(Fe.A,{size:14,className:"text-white sm:hidden"}),(0,be.jsx)(Fe.A,{size:16,className:"text-white hidden sm:block"})]}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("div",{className:"rounded-2xl rounded-tl-sm p-3 sm:p-4",style:{backgroundColor:h.bgCard,border:`1px solid ${h.cardBorder}`,boxShadow:h.shadowSm},children:(0,be.jsx)("div",{className:"text-sm prose prose-sm max-w-none leading-relaxed break-words",style:{color:h.text},dangerouslySetInnerHTML:{__html:bt(g.message)}})}),(0,be.jsx)("p",{className:"text-xs mt-1.5 sm:mt-2 ml-2 sm:ml-3",style:{color:h.textMuted},children:ye(g.created_at)})]})]}),g.related_object_id&&("question_feedback"===g.type||"question_challenge"===g.type)&&(0,be.jsx)("div",{className:"ml-10 sm:ml-14 max-w-2xl p-3 sm:p-4 rounded-xl",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`},children:v?(0,be.jsx)("div",{className:"rounded-xl overflow-visible",style:{border:`1px solid ${h.cardBorder}`},children:(0,be.jsx)(mt,{questionId:g.related_object_id,mode:"edit",onSave:he,onCancel:()=>j(!1),simpleMode:!0})}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"flex items-start gap-2 mb-3",children:[(0,be.jsx)(He.A,{size:16,className:"flex-shrink-0 mt-0.5",style:{color:h.accent}}),(0,be.jsx)("div",{className:"min-w-0 flex-1",children:(0,be.jsx)(jt,{questionId:g.related_object_id,pageColors:h})})]}),(0,be.jsxs)("button",{onClick:()=>{const e=w.current?.scrollTop;j(!0),requestAnimationFrame(()=>{w.current&&(w.current.scrollTop=e)})},className:"flex items-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 rounded-xl text-sm font-medium w-full justify-center",style:{background:`linear-gradient(135deg, ${h.primary}, ${h.primary}dd)`,color:"#fff"},children:[(0,be.jsx)(Qe,{size:14}),"Editar pregunta"]})]})}),("video_feedback"===g.type||"video_challenge"===g.type)&&(()=>{const e=(e=>{if(!e)return null;const t=e.match(/\(Video:\s*([^)]+)\)/i);return t?t[1].trim():null})(g.message);return e?(0,be.jsxs)("div",{className:"ml-10 sm:ml-14 max-w-2xl p-3 sm:p-4 rounded-xl",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,be.jsx)(Me.A,{size:16,className:"flex-shrink-0",style:{color:h.accent}}),(0,be.jsx)("span",{className:"text-sm font-medium",style:{color:h.text},children:"Video de la duda"})]}),(0,be.jsx)(vt,{videoUrl:e})]}):null})(),O&&(0,be.jsx)("div",{className:"flex justify-center py-4",children:(0,be.jsx)("div",{className:"w-5 h-5 border-2 rounded-full animate-spin",style:{borderColor:`${h.accent}30`,borderTopColor:h.accent}})}),T.map(e=>(0,be.jsxs)("div",{className:"flex gap-2 sm:gap-4 justify-end max-w-4xl ml-auto",children:[(0,be.jsxs)("div",{className:"max-w-[85%] sm:max-w-[80%]",children:[(0,be.jsx)("div",{className:"rounded-2xl rounded-tr-sm p-3 sm:p-4",style:{background:`linear-gradient(135deg, ${h.primary}, ${h.primary}dd)`,color:"#fff",boxShadow:"0 2px 12px rgba(59, 130, 246, 0.2)"},children:(0,be.jsx)("div",{className:"text-sm prose prose-sm prose-invert max-w-none leading-relaxed break-words",dangerouslySetInnerHTML:{__html:e.message}})}),(0,be.jsxs)("p",{className:"text-xs mt-1.5 sm:mt-2 mr-2 sm:mr-3 text-right",style:{color:h.textMuted},children:[ye(e.created_at),e.sender_name&&(0,be.jsxs)("span",{className:"ml-1",children:["â€¢ ",e.sender_name]})]})]}),(0,be.jsxs)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${h.primary}, ${h.primary}dd)`},children:[(0,be.jsx)(Ve.A,{size:12,className:"text-white sm:hidden"}),(0,be.jsx)(Ve.A,{size:14,className:"text-white hidden sm:block"})]})]},e.id))]}),(0,be.jsx)("div",{className:"p-2 sm:p-3 flex-shrink-0",style:{backgroundColor:h.bgCard,borderTop:`1px solid ${h.cardBorder}`},children:(0,be.jsxs)("div",{className:"flex flex-col gap-2 max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"flex gap-2 items-end",children:[(0,be.jsx)("textarea",{value:S,onChange:e=>E(e.target.value),placeholder:"Escribe tu respuesta...",rows:3,maxLength:5e3,className:"flex-1 px-3 py-2 text-sm rounded-lg resize-none focus:outline-none focus:ring-2",style:{backgroundColor:h.inputBg,border:`1px solid ${h.cardBorder}`,color:h.text,"--tw-ring-color":h.accent}}),(0,be.jsx)("button",{onClick:me,disabled:!S.trim()||A,className:"px-3 sm:px-4 py-2 rounded-lg flex items-center justify-center gap-1.5 text-sm font-medium disabled:opacity-50",style:{background:`linear-gradient(135deg, ${h.accent}, ${h.accent}dd)`,color:"#fff"},children:A?(0,be.jsx)("div",{className:"w-4 h-4 border-2 rounded-full animate-spin",style:{borderColor:"rgba(255,255,255,0.3)",borderTopColor:"#fff"}}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ve.A,{size:14}),(0,be.jsx)("span",{className:"hidden sm:inline",children:"Enviar"})]})})]}),S.length>4500&&(0,be.jsxs)("span",{className:"text-xs text-right",style:{color:S.length>=5e3?h.error:h.textMuted},children:[S.length,"/5000 caracteres"]})]})})]})})]}),(0,be.jsx)(rt,{isOpen:y,onClose:()=>b(!1),onMessageSent:()=>{le()},simplifiedMode:m,courseId:f})]})};var Nt=a(2203),kt=a(1004);const Ct=(0,le.A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),_t=()=>{const{t:e}=(0,o.Bd)(),{getColor:t}=(0,se.DP)(),[n,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),d=async e=>{s(!0),i(null),c(null);try{const t=(0,Ye.getApiConfig)(),r=await(0,Ke.qb)(`${t.apiUrl}/quiz-extended/v1/migrations/run`,{method:"POST",body:JSON.stringify({type:e})});r.data&&r.data.data?i(r.data.data):i(r.data)}catch(e){console.error("Migration failed:",e),c(e.message||"Migration failed")}finally{s(!1)}};return(0,be.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-8",children:[(0,be.jsx)("h1",{className:"text-3xl font-bold mb-2",style:{color:t("primary","#1a202c")},children:"Gestor de Migraciones"}),(0,be.jsx)("p",{style:{color:t("textSecondary","#6b7280")},children:"Ejecuta scripts de mantenimiento y correcciÃ³n de datos."})]}),(0,be.jsxs)("div",{className:"grid gap-6",children:[(0,be.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:t("background","#ffffff"),borderColor:t("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${t("primary","#1a202c")}10`},children:(0,be.jsx)(kt.A,{size:24,style:{color:t("primary","#1a202c")}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:t("primary","#1a202c")},children:"Actualizar Esquema de Base de Datos"}),(0,be.jsxs)("p",{className:"text-sm mt-1",style:{color:t("textSecondary","#6b7280")},children:["Ejecuta ",(0,be.jsx)("code",{children:"dbDelta"})," para asegurar que todas las tablas y columnas necesarias existen. Usa esto si has actualizado el plugin y faltan columnas (ej. ",(0,be.jsx)("code",{children:"lesson_id"}),")."]})]})]}),(0,be.jsxs)("button",{onClick:()=>d("update_database_schema"),disabled:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50",style:{backgroundColor:t("primary","#1a202c"),color:"#ffffff"},children:[n?(0,be.jsx)(et.A,{size:18,className:"animate-spin"}):(0,be.jsx)(Ct,{size:18}),(0,be.jsx)("span",{children:"Ejecutar"})]})]}),a&&a.stats&&void 0!==a.stats.version&&(0,be.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-bold",children:[(0,be.jsx)(Oe.A,{size:18}),(0,be.jsx)("span",{children:"ActualizaciÃ³n Completada"})]}),(0,be.jsxs)("div",{className:"text-sm text-green-800",children:[(0,be.jsx)("span",{className:"font-semibold",children:"VersiÃ³n DB:"})," ",a.stats?.version]})]})]}),(0,be.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:t("background","#ffffff"),borderColor:t("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${t("primary","#1a202c")}10`},children:(0,be.jsx)(kt.A,{size:24,style:{color:t("primary","#1a202c")}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:t("primary","#1a202c")},children:"Corregir Relaciones LecciÃ³n-Curso"}),(0,be.jsxs)("p",{className:"text-sm mt-1",style:{color:t("textSecondary","#6b7280")},children:["Asigna el ",(0,be.jsx)("code",{children:"_course_id"})," a cada lecciÃ³n basÃ¡ndose en la lista de lecciones del curso. TambiÃ©n sincroniza los quizzes asociados."]})]})]}),(0,be.jsxs)("button",{onClick:()=>d("fix_lesson_course_relationships"),disabled:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50",style:{backgroundColor:t("primary","#1a202c"),color:"#ffffff"},children:[n?(0,be.jsx)(et.A,{size:18,className:"animate-spin"}):(0,be.jsx)(Ct,{size:18}),(0,be.jsx)("span",{children:"Ejecutar"})]})]}),a&&a.stats&&void 0!==a.stats.lessons_updated&&(0,be.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-bold",children:[(0,be.jsx)(Oe.A,{size:18}),(0,be.jsx)("span",{children:"MigraciÃ³n Completada"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm text-green-800",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Cursos Procesados:"}),a.stats?.courses_processed]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Lecciones Actualizadas:"}),a.stats?.lessons_updated]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Quizzes Sincronizados:"}),a.stats?.quizzes_synced]})]})]}),l&&(0,be.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-red-50 border border-red-200 text-red-700 flex items-center gap-2",children:[(0,be.jsx)(Te.A,{size:18}),(0,be.jsx)("span",{children:l})]})]}),(0,be.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:t("background","#ffffff"),borderColor:t("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${t("primary","#1a202c")}10`},children:(0,be.jsx)(De.A,{size:24,style:{color:t("primary","#1a202c")}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:t("primary","#1a202c")},children:"Sincronizar IDs de Cursos en Quizzes"}),(0,be.jsxs)("p",{className:"text-sm mt-1",style:{color:t("textSecondary","#6b7280")},children:["Reconstruye los campos ",(0,be.jsx)("code",{children:"_course_ids"})," y ",(0,be.jsx)("code",{children:"_lesson_id"})," en todos los quizzes. Esencial para que los filtros de historial funcionen correctamente."]})]})]}),(0,be.jsxs)("button",{onClick:()=>d("sync_quiz_course_ids"),disabled:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50",style:{backgroundColor:t("primary","#1a202c"),color:"#ffffff"},children:[n?(0,be.jsx)(et.A,{size:18,className:"animate-spin"}):(0,be.jsx)(Ct,{size:18}),(0,be.jsx)("span",{children:"Ejecutar"})]})]}),a&&a.stats&&void 0!==a.stats.synced&&(0,be.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-green-700 font-bold",children:[(0,be.jsx)(Oe.A,{size:18}),(0,be.jsx)("span",{children:"SincronizaciÃ³n Completada"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm text-green-800",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Total Quizzes:"}),a.stats?.total]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Sincronizados:"}),a.stats?.synced]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Errores:"}),a.stats?.errors]})]})]})]}),(0,be.jsxs)("div",{className:"p-6 rounded-xl border-2",style:{backgroundColor:t("background","#ffffff"),borderColor:t("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${t("primary","#1a202c")}10`},children:(0,be.jsx)(kt.A,{size:24,style:{color:t("primary","#1a202c")}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:t("primary","#1a202c")},children:"Migrar Preguntas a Multi-RelaciÃ³n"}),(0,be.jsxs)("p",{className:"text-sm mt-1",style:{color:t("textSecondary","#6b7280")},children:["Convierte las asociaciones antiguas de preguntas (",(0,be.jsx)("code",{children:"_course_id"}),", ",(0,be.jsx)("code",{children:"_lesson_id"}),") al nuevo formato de arrays (",(0,be.jsx)("code",{children:"_course_ids"}),", ",(0,be.jsx)("code",{children:"_lesson_ids"}),"). Necesario para el filtrado avanzado en el Generador de Quizzes."]})]})]}),(0,be.jsxs)("button",{onClick:()=>d("migrate_questions_to_multirelationship"),disabled:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50",style:{backgroundColor:t("primary","#1a202c"),color:"#ffffff"},children:[n?(0,be.jsx)(et.A,{size:18,className:"animate-spin"}):(0,be.jsx)(Ct,{size:18}),(0,be.jsx)("span",{children:"Ejecutar"})]})]}),a&&a.stats&&void 0!==a.stats.updated&&void 0!==a.stats.processed&&(0,be.jsxs)("div",{className:"mt-4 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-3 text-green-700 font-bold",children:[(0,be.jsx)(Oe.A,{size:18}),(0,be.jsx)("span",{children:"MigraciÃ³n Completada"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-green-800 mb-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Total:"}),a.stats?.total?.toLocaleString()]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Procesados:"}),a.stats?.processed?.toLocaleString()]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Actualizados:"}),(0,be.jsx)("span",{className:"text-green-600 font-bold",children:a.stats?.updated?.toLocaleString()})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Ya Migrados:"}),a.stats?.already_migrated?.toLocaleString()]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Sin Relaciones:"}),a.stats?.no_relations?.toLocaleString()]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Omitidos:"}),a.stats?.skipped?.toLocaleString()]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Batches:"}),a.stats?.batches_completed]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("span",{className:"block font-semibold",children:"Errores:"}),(0,be.jsx)("span",{className:a.stats?.errors>0?"text-red-600 font-bold":"",children:a.stats?.errors?.toLocaleString()})]})]}),a.stats?.error_details&&a.stats.error_details.length>0&&(0,be.jsxs)("div",{className:"mt-3 p-3 bg-red-50 rounded border border-red-200",children:[(0,be.jsx)("p",{className:"text-red-700 font-semibold mb-2",children:"Detalles de Errores (primeros 10):"}),(0,be.jsx)("ul",{className:"text-xs text-red-600 space-y-1",children:a.stats.error_details.map((e,t)=>(0,be.jsxs)("li",{children:[(0,be.jsxs)("strong",{children:["Pregunta #",e.question_id,":"]})," ",e.error]},t))})]}),(0,be.jsx)("p",{className:"text-xs text-green-600 mt-3 italic",children:"âœ… Es seguro ejecutar esta migraciÃ³n mÃºltiples veces. Los datos no se duplicarÃ¡n."})]})]})]})]})};var St=a(7194),Et=a(3558),At=a(9492),Mt=a(8852),Tt=a(2452);const Pt=()=>{const[e,t]=(0,r.useState)(se.SS),[n,s]=(0,r.useState)("light"),[o,a]=(0,r.useState)(!0),[i,l]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c()},[]);const c=async()=>{try{const e=await Tt.A.getSettings();if(e.theme)if(e.theme.light&&e.theme.dark)t(e.theme);else{const r={light:{primary:e.theme.primary||se.SS.light.primary,secondary:e.theme.secondary||se.SS.light.secondary,accent:e.theme.accent||se.SS.light.accent,background:e.theme.background||se.SS.light.background,text:e.theme.text||se.SS.light.text,textPrimary:e.theme.textPrimary||e.theme.text||se.SS.light.textPrimary,textSecondary:e.theme.textSecondary||se.SS.light.textSecondary,borderColor:e.theme.borderColor||e.theme.primary||se.SS.light.borderColor,hoverColor:e.theme.hoverColor||e.theme.accent||se.SS.light.hoverColor},dark:se.SS.dark};t(r)}}catch(e){console.error("Error loading theme:",e),ne.oR.error("Error al cargar configuraciÃ³n de tema")}finally{a(!1)}},d=(e,r,n)=>{t(t=>({...t,[e]:{...t[e],[r]:n}}))},u=({label:e,value:t,onChange:r,description:n})=>(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:e}),n&&(0,be.jsx)("p",{className:"text-xs text-gray-500",children:n}),(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("input",{type:"color",value:t,onChange:e=>r(e.target.value),className:"h-12 w-20 rounded border-2 border-gray-300 cursor-pointer"}),(0,be.jsx)("input",{type:"text",value:t,onChange:e=>r(e.target.value),pattern:"^#[0-9A-Fa-f]{6}$",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono",placeholder:"#000000"}),(0,be.jsx)("div",{className:"h-12 w-32 rounded border-2 border-gray-300",style:{backgroundColor:t}})]})]});return o?(0,be.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,be.jsx)("p",{className:"text-gray-600",children:"Cargando configuraciÃ³n..."})]})}):(0,be.jsx)("div",{className:"max-w-4xl mx-auto p-6",children:(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,be.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,be.jsx)("div",{className:"flex items-center justify-between",children:(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(Et.A,{className:"w-8 h-8 text-blue-600"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ConfiguraciÃ³n de Tema"}),(0,be.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Personaliza los colores para modo claro y oscuro. El plugin detectarÃ¡ automÃ¡ticamente la preferencia del usuario."})]})]})})}),(0,be.jsxs)("div",{className:"p-6 space-y-6",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(Et.A,{className:"w-6 h-6 text-blue-600"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"font-semibold text-gray-900",children:"Modo de EdiciÃ³n"}),(0,be.jsx)("p",{className:"text-sm text-gray-500",children:"Selecciona quÃ© modo quieres configurar"})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2 bg-white rounded-lg p-1 border border-gray-200",children:[(0,be.jsxs)("button",{onClick:()=>s("light"),className:"flex items-center gap-2 px-4 py-2 rounded-md transition-colors "+("light"===n?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,be.jsx)(he.A,{className:"w-4 h-4"}),"Claro"]}),(0,be.jsxs)("button",{onClick:()=>s("dark"),className:"flex items-center gap-2 px-4 py-2 rounded-md transition-colors "+("dark"===n?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100"),children:[(0,be.jsx)(ge.A,{className:"w-4 h-4"}),"Oscuro"]})]})]}),(0,be.jsxs)("div",{className:"space-y-6",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:"light"===n?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(he.A,{className:"w-5 h-5 text-yellow-500"}),"Colores del Modo Claro"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ge.A,{className:"w-5 h-5 text-indigo-500"}),"Colores del Modo Oscuro"]})}),(0,be.jsx)(u,{label:"Color Primario",description:"Usado en botones principales, enlaces y elementos destacados",value:e[n].primary,onChange:e=>d(n,"primary",e)}),(0,be.jsx)(u,{label:"Color Secundario",description:"Usado en elementos secundarios y acentos alternativos",value:e[n].secondary,onChange:e=>d(n,"secondary",e)}),(0,be.jsx)(u,{label:"Color de Acento",description:"Usado para alertas, notificaciones y elementos de atenciÃ³n",value:e[n].accent,onChange:e=>d(n,"accent",e)}),(0,be.jsx)(u,{label:"Color de Fondo",description:"Color de fondo principal de las tarjetas y contenedores",value:e[n].background,onChange:e=>d(n,"background",e)}),(0,be.jsx)(u,{label:"Color de Texto Principal",description:"Color para textos principales y tÃ­tulos",value:e[n].textPrimary||e[n].text,onChange:e=>d(n,"textPrimary",e)}),(0,be.jsx)(u,{label:"Color de Texto Secundario",description:"Color para textos descriptivos y labels (mÃ¡s tenue)",value:e[n].textSecondary||`${e[n].text}70`,onChange:e=>d(n,"textSecondary",e)}),(0,be.jsx)(u,{label:"Color de Bordes",description:"Color usado en los bordes de tarjetas y elementos (puede ser diferente al primario en modo oscuro)",value:e[n].borderColor||e[n].primary,onChange:e=>d(n,"borderColor",e)}),(0,be.jsx)(u,{label:"Color de Hover",description:"Color al pasar el cursor sobre botones y elementos interactivos",value:e[n].hoverColor||e[n].accent,onChange:e=>d(n,"hoverColor",e)})]}),(0,be.jsxs)("div",{className:"mt-8 p-6 rounded-lg border-2",style:{backgroundColor:e[n].background,borderColor:e[n].borderColor||e[n].primary},children:[(0,be.jsxs)("h3",{className:"text-lg font-semibold mb-4",style:{color:e[n].text},children:["Vista Previa - Modo ","light"===n?"Claro":"Oscuro"]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,be.jsx)("button",{style:{backgroundColor:e[n].primary},className:"px-4 py-2 text-white rounded font-medium transition-colors cursor-pointer",onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e[n].hoverColor||e[n].accent},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e[n].primary},children:"BotÃ³n Primario"}),(0,be.jsx)("button",{style:{backgroundColor:e[n].secondary},className:"px-4 py-2 text-white rounded font-medium transition-colors cursor-pointer",onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e[n].hoverColor||e[n].accent},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e[n].secondary},children:"BotÃ³n Secundario"}),(0,be.jsx)("button",{style:{backgroundColor:e[n].accent},className:"px-4 py-2 text-white rounded font-medium transition-colors cursor-pointer",onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e[n].hoverColor||e[n].accent},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e[n].accent},children:"BotÃ³n de Acento"}),(0,be.jsx)("div",{style:{backgroundColor:e[n].background,color:e[n].text,borderColor:e[n].borderColor||e[n].primary},className:"px-4 py-2 rounded border-2 text-center font-medium",children:"Texto de Ejemplo"})]})]}),(0,be.jsx)("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,be.jsxs)("div",{className:"flex items-start gap-3",children:[(0,be.jsx)(he.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,be.jsx)("strong",{children:"DetecciÃ³n AutomÃ¡tica:"})," El plugin detectarÃ¡ automÃ¡ticamente si el usuario prefiere el modo oscuro basÃ¡ndose en:"]}),(0,be.jsxs)("ul",{className:"text-sm text-blue-800 mt-2 ml-4 list-disc space-y-1",children:[(0,be.jsx)("li",{children:"La configuraciÃ³n de esquema de color del panel de WordPress"}),(0,be.jsx)("li",{children:"La preferencia del sistema operativo (prefers-color-scheme)"})]})]})]})})]}),(0,be.jsxs)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex justify-between",children:[(0,be.jsxs)(ct.A,{onClick:()=>{confirm("Â¿EstÃ¡s seguro de que quieres restaurar los colores por defecto?")&&t(se.SS)},variant:"secondary",className:"flex items-center gap-2 px-4 py-2 rounded-lg",disabled:i,children:[(0,be.jsx)(At.A,{className:"w-4 h-4"}),"Restaurar por Defecto"]}),(0,be.jsxs)(ct.A,{onClick:async()=>{l(!0);try{await Tt.A.updateTheme(e),ne.oR.success("Tema actualizado correctamente"),setTimeout(()=>window.location.reload(),1e3)}catch(e){console.error("Error saving theme:",e),ne.oR.error("Error al guardar el tema")}finally{l(!1)}},variant:"primary",className:"flex items-center gap-2 px-6 py-2 rounded-lg",disabled:i,children:[(0,be.jsx)(Mt.A,{className:"w-4 h-4"}),i?"Guardando...":"Guardar Cambios"]})]})]})})},Ot=function(){return(0,be.jsx)(se.NP,{children:(0,be.jsx)(re.I9,{children:(0,be.jsxs)("div",{className:"qe-lms-admin-app h-full flex flex-col overflow-hidden",children:[(0,be.jsxs)(re.BV,{children:[(0,be.jsxs)(re.qh,{element:(0,be.jsx)(je,{}),children:[(0,be.jsx)(re.qh,{index:!0,element:(0,be.jsx)(we.default,{})}),(0,be.jsx)(re.qh,{path:"/courses",element:(0,be.jsx)(Ne.default,{})}),(0,be.jsx)(re.qh,{path:"/lessons",element:(0,be.jsx)(ke.default,{})}),(0,be.jsx)(re.qh,{path:"/quizzes",element:(0,be.jsx)(Ce.default,{})}),(0,be.jsx)(re.qh,{path:"/questions",element:(0,be.jsx)(Se.default,{})}),(0,be.jsx)(re.qh,{path:"/students",element:(0,be.jsx)(_e.default,{})}),(0,be.jsx)(re.qh,{path:"/messages",element:(0,be.jsx)(wt,{})}),(0,be.jsx)(re.qh,{path:"/books",element:(0,be.jsx)(Nt.default,{})}),(0,be.jsx)(re.qh,{path:"/migrations",element:(0,be.jsx)(_t,{})}),(0,be.jsx)(re.qh,{path:"/settings",element:(0,be.jsx)(St.default,{})}),(0,be.jsx)(re.qh,{path:"/theme",element:(0,be.jsx)(Pt,{})})]}),(0,be.jsx)(re.qh,{path:"*",element:(0,be.jsx)(re.C5,{to:"/",replace:!0})})]}),(0,be.jsx)(ne.N9,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})})})},zt=(0,r.createContext)(),qt=()=>{const e=(0,r.useContext)(zt);if(!e)throw new Error("useScoreFormat must be used within ScoreFormatProvider");return e},Dt=({children:e})=>{const[t,n]=(0,r.useState)("percentage"),[s,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{const e=await Tt.A.getScoreFormat();n(e)}catch(e){console.error("Error loading score format:",e);const t=localStorage.getItem("scoreFormat");t&&n(t)}finally{o(!1)}})()},[]),(0,r.useEffect)(()=>{s||localStorage.setItem("scoreFormat",t)},[t,s]);const a={format:t,setScoreFormat:e=>{"percentage"!==e&&"base10"!==e||n(e)},toggleFormat:()=>{n(e=>"percentage"===e?"base10":"percentage")},convertScore:e=>{const r=parseFloat(e);return isNaN(r)?0:"percentage"===t?10*r:r},formatScore:(e,r={})=>{const n=parseFloat(e);if(isNaN(n))return"0";if("percentage"===t){const e=10*n;return e%1==0?Math.round(e):e.toFixed(2)}return n%1==0?Math.round(n):n.toFixed(2)},toBase10:e=>{const r=parseFloat(e);return isNaN(r)?0:"percentage"===t?r/10:r},getFormatLabel:()=>"base10"===t?"Base 10 (0-10)":"Porcentaje (0-100%)",isBase10:"base10"===t,isPercentage:"percentage"===t,loading:s};return(0,be.jsx)(zt.Provider,{value:a,children:e})},It=(0,r.createContext)(null),Lt=({children:e,enablePolling:t=!0,pollingInterval:n=3e4})=>{const s=(0,r.useMemo)(()=>window.qe_data?.user?.roles?.includes("administrator")||!1,[]),[o,a]=(0,r.useState)([]),[i,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(0),[h,g]=(0,r.useState)({currentPage:1,totalPages:1,total:0,perPage:20,hasMore:!1}),x=(0,r.useRef)(!0),y=(0,r.useRef)(null),b=(0,r.useRef)(""),v=(0,r.useRef)(!0),j=(0,r.useRef)(!1);(0,r.useEffect)(()=>{const e=()=>{v.current=!document.hidden,!document.hidden&&t&&j.current&&w(!0)};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[t]),(0,r.useEffect)(()=>()=>{x.current=!1,y.current&&clearTimeout(y.current)},[]);const w=(0,r.useCallback)(async(e=!1)=>{if(!x.current)return;const t=e?1:h.currentPage+1;if(e||h.hasMore)try{e&&(l(!0),d(null));const r=(0,Ye.getApiConfig)(),n=new URLSearchParams({page:t.toString(),per_page:"20",orderby:"created_at",order:"desc"}),o=s?"messages":"messages/inbox",i=`${r.endpoints.custom_api}/${o}?${n}`,c=`${i}-${t}-${e}`;if(c===b.current&&!e)return;b.current=c;const u=await(0,Ke.qb)(i);if(!x.current)return;const p=u.data?.data||[],f=u.headers["X-WP-Total"],m=u.headers["X-WP-TotalPages"],h={currentPage:t,totalPages:m?parseInt(m,10):1,total:f?parseInt(f,10):p.length,perPage:20,hasMore:t<(m?parseInt(m,10):1)};g(h),a(t=>e?p:[...t,...p]),j.current=!0,N()}catch(e){console.error("âŒ Error fetching messages:",e),x.current&&d(e.message||"Failed to load messages")}finally{x.current&&l(!1)}},[h]),N=(0,r.useCallback)(async()=>{if(x.current)try{const e=(0,Ye.getApiConfig)(),t=new URLSearchParams({status:"unread",per_page:"1",page:"1"}),r=s?"messages":"messages/inbox",n=`${e.endpoints.custom_api}/${r}?${t}`,o=await(0,Ke.qb)(n);if(!x.current)return;const a=o.headers["X-WP-Total"],i=a?parseInt(a,10):0;m(i)}catch(e){console.error("âŒ Error fetching unread count:",e)}},[s]),k=(0,r.useCallback)(async(e,t)=>{if(x.current){a(r=>r.map(r=>r.id==e?{...r,status:t}:r)),p(!0);try{const r=(0,Ye.getApiConfig)(),n=s?`${r.endpoints.custom_api}/messages/${e}`:`${r.endpoints.custom_api}/messages/${e}/read`,o=await(0,Ke.qb)(n,s?{method:"PUT",body:JSON.stringify({status:t})}:{method:"POST"});if(!x.current)return;const i=o.data||{status:t};return a(t=>t.map(t=>t.id==e?{...t,...i}:t)),window.jQuery&&window.jQuery(document).trigger("qe-message-status-changed"),N(),i}catch(e){throw console.error("âŒ Error updating message:",e),w(!0),e}finally{x.current&&p(!1)}}},[w,N,s]),C=(0,r.useCallback)(async e=>{if(!x.current)return;if(!s)throw new Error("No tienes permisos para eliminar mensajes.");const t=o;a(t=>t.filter(t=>t.id!=e)),g(e=>({...e,total:Math.max(0,e.total-1)})),p(!0);try{const t=`${(0,Ye.getApiConfig)().endpoints.custom_api}/messages/${e}`;if(await(0,Ke.qb)(t,{method:"DELETE"}),!x.current)return}catch(e){throw console.error("âŒ Error deleting message:",e),a(t),g(e=>({...e,total:e.total+1})),e}finally{x.current&&p(!1)}},[o,s]);(0,r.useEffect)(()=>{if(!t)return void(y.current&&(clearTimeout(y.current),y.current=null));const e=()=>{v.current&&j.current&&w(!0),y.current=setTimeout(e,n)};return y.current=setTimeout(e,n),()=>{y.current&&(clearTimeout(y.current),y.current=null)}},[t,n,w]),(0,r.useEffect)(()=>{w(!0)},[]);const _=(0,r.useMemo)(()=>({totalMessages:h.total,unreadMessages:f,feedbackMessages:o.filter(e=>"question_feedback"===e.type).length,challengeMessages:o.filter(e=>"question_challenge"===e.type).length}),[o,h.total,f]),S={messages:o,loading:i,error:c,pagination:h,computed:_,updating:u,fetchMessages:w,updateMessageStatus:k,deleteMessage:C};return(0,be.jsx)(It.Provider,{value:S,children:e})},Rt=(0,le.A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),$t=(0,le.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var Bt=a(2864);const Ft=(0,le.A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var Ut=a(5107);const Wt=(0,le.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),Ht=()=>{const{apiUrl:e}=(0,Ye.getApiConfig)();return`${e}/qe/v1`},Qt=async e=>{const t=`${Ht()}/notifications`;try{return await(0,Ke.qb)(t,{method:"POST",body:JSON.stringify(e)})}catch(e){throw console.error("Error creating notification:",e),e}};var Vt=a(6584);const Yt=new Map,Kt=new Map,Gt=e=>{const[t,n]=(0,r.useState)(null),[s,o]=(0,r.useState)(!!e),[a,i]=(0,r.useState)(null),l=(0,r.useCallback)(async(t=!1)=>{if(!e)return n(null),void o(!1);const r=parseInt(e,10);if(isNaN(r))return i(new Error("Invalid course ID")),void o(!1);if(!t&&Yt.has(r))return n(Yt.get(r)),void o(!1);if(Kt.has(r)){o(!0),i(null);try{const e=await Kt.get(r);n(e)}catch(e){i(e)}finally{o(!1)}return}o(!0),i(null);const s=(0,Vt.getOne)(r,{embed:!1});Kt.set(r,s);try{const e=await s;Yt.set(r,e),n(e)}catch(e){console.error(`Error fetching course ${r}:`,e),i(e)}finally{Kt.delete(r),o(!1)}},[e]);return(0,r.useEffect)(()=>{e?l():(n(null),o(!1))},[e,l]),{course:t,loading:s,error:a,refetch:()=>l(!0)}},Xt=({isMobileMenuOpen:e,setIsMobileMenuOpen:t,isInCourseRoute:n,courseId:s})=>{(0,re.zy)();const a=(0,re.Zp)(),{t:i}=(0,o.Bd)(),{getColor:l,isDarkMode:c,toggleDarkMode:d}=(0,se.DP)(),[u,p]=(0,r.useState)(!1),f=(0,r.useRef)(null),[m,h]=(0,r.useState)(0),[g,x]=(0,r.useState)(0),y=!0===window.qe_data?.user?.capabilities?.manage_options||!0===window.qe_data?.user?.is_admin,b=n&&s,{course:v}=Gt(b?s:null),j=v?.title?.rendered||v?.title||"";(0,r.useEffect)(()=>{const e=e=>{f.current&&!f.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,r.useEffect)(()=>{const e=s?parseInt(s,10):null,t=async()=>{if(e&&n)try{const t=await(async e=>{const t=`${Ht()}/courses/${e}/notifications/unread-count`;try{return await(0,Ke.qb)(t,{method:"GET"})}catch(e){throw console.error("Error fetching unread count:",e),e}})(e);h(t?.data?.data?.unread_count||t?.data?.unread_count||t?.unread_count||0)}catch(e){console.error("Error fetching unread notifications:",e),h(0)}},r=async()=>{if(e&&n&&y&&j)try{const e=(0,Ye.getApiConfig)(),t=new URLSearchParams({status:"unread",per_page:"1",page:"1",search:`(Curso: ${j})`}),r=`${e.endpoints.custom_api}/messages?${t}`,n=await(0,Ke.qb)(r),s=n.headers["X-WP-Total"]?parseInt(n.headers["X-WP-Total"],10):0;x(s)}catch(e){console.error("Error fetching unread messages:",e),x(0)}},o=()=>{t(),r()};o();const a=setInterval(o,3e4),i=()=>t(),l=()=>r();return window.addEventListener("notificationRead",i),window.addEventListener("notificationsMarkedAllRead",i),window.addEventListener("qe-message-status-changed",l),()=>{clearInterval(a),window.removeEventListener("notificationRead",i),window.removeEventListener("notificationsMarkedAllRead",i),window.removeEventListener("qe-message-status-changed",l)}},[s,n,y,j]);const w=g,N=(window.qe_data,window.qe_data,window.qe_data?.logout_url),k=window.qe_data?.home_url||"",C=window.qe_data?.campus_logo||"",_=window.qe_data?.campus_logo_dark||"",S=l("primary","#3b82f6"),E=(l("secondary","#8b5cf6"),l("accent","#f59e0b")),A=l("textPrimary","#f9fafb"),M=l("secondaryBackground","#ffffff"),T={text:c?A:S,accent:E,activeBg:S},P=c&&_?_:C,O=[{to:"/courses",text:i("sidebar.studyPlanner"),icon:ae.A,type:"internal"},{to:"/books",text:i("sidebar.books"),icon:ue.A,type:"internal"},{to:`${k}/suscripciones`,text:i("sidebar.subscriptions","Suscripciones"),icon:Rt,type:"exit"},{to:k,text:i("sidebar.exitCampus"),icon:$t,type:"exit"}],z=s?[{to:`/courses/${s}/dashboard`,text:i("courses.dashboard"),icon:ae.A,type:"internal"},{to:`/courses/${s}/notifications`,text:i("header.notifications"),icon:Ze.A,type:"internal",badge:m},{to:`/courses/${s}/messages`,text:i("header.messages"),icon:fe.A,type:"internal",badge:w},{to:`/courses/${s}/statistics`,text:i("courses.statistics"),icon:Bt.A,type:"internal"},...y?[{to:`/courses/${s}/students`,text:i("courses.students.title"),icon:pe.A,type:"internal"}]:[]]:[],q=n?z:O,D=(e,t,r)=>{t?(e.currentTarget.style.color=T.accent,r||(e.currentTarget.style.borderBottom=`2px solid ${T.accent}`)):(e.currentTarget.style.color=r?T.accent:T.text,r||(e.currentTarget.style.borderBottom="2px solid transparent"))};return(0,be.jsx)("header",{id:"qe-topbar",style:{backgroundColor:M,borderBottom:`1px solid ${T.text}33`,position:"relative",zIndex:9999,boxShadow:"0 1px 3px rgba(0, 0, 0, 0.08)"},className:"w-full",children:(0,be.jsxs)("div",{className:"flex items-center justify-between px-3 sm:px-4 lg:px-10 py-2 w-full max-w-full",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,be.jsx)("button",{onClick:()=>t(!e),className:"lg:hidden flex items-center justify-center p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:T.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${S}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},"aria-label":"Toggle menu",children:(0,be.jsx)(ye,{className:"w-6 h-6"})}),(0,be.jsx)("a",{href:k||"/",className:"flex items-center transition-opacity hover:opacity-80",title:"Ir a la pÃ¡gina principal",children:P?(0,be.jsx)("img",{src:P,alt:"Campus",className:"h-7 sm:h-8 max-w-[120px] sm:max-w-[180px] object-contain"}):(0,be.jsx)("h1",{className:"text-xl sm:text-2xl font-bold m-0",style:{color:T.text},children:"Campus"})})]}),(0,be.jsxs)("nav",{className:"hidden lg:flex items-center gap-1 xl:gap-3 absolute left-1/2 transform -translate-x-1/2 whitespace-nowrap",children:[n&&(0,be.jsxs)("div",{className:"relative",ref:f,children:[(0,be.jsxs)("button",{onClick:()=>p(!u),className:"flex items-center justify-center gap-1 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:u?`${T.hoverBg}20`:"transparent",color:T.text},onMouseEnter:e=>{u||(e.currentTarget.style.backgroundColor=`${T.hoverBg}20`)},onMouseLeave:e=>{u||(e.currentTarget.style.backgroundColor="transparent")},title:i("sidebar.quickMenu"),children:[(0,be.jsx)(Ft,{className:"w-5 h-5"}),(0,be.jsx)(Ut.A,{className:"w-4 h-4 transition-transform duration-200 "+(u?"rotate-180":"")})]}),u&&(0,be.jsxs)("div",{className:"absolute left-0 top-full mt-2 w-48 rounded-lg shadow-lg border overflow-hidden z-[9999]",style:{backgroundColor:M,borderColor:`${T.text}20`},children:[(0,be.jsxs)("button",{onClick:()=>{a("/courses"),p(!1)},className:"w-full flex items-center gap-3 px-4 py-3 transition-all duration-200 text-left",style:{color:T.text,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.color=T.accent},onMouseLeave:e=>{e.currentTarget.style.color=T.text},children:[(0,be.jsx)(ae.A,{className:"w-5 h-5"}),(0,be.jsx)("span",{className:"font-medium",children:i("sidebar.studyPlanner")})]}),(0,be.jsx)("div",{style:{height:"1px",backgroundColor:`${T.text}15`}}),(0,be.jsxs)("button",{onClick:()=>{a("/books"),p(!1)},className:"w-full flex items-center gap-3 px-4 py-3 transition-all duration-200 text-left",style:{color:T.text,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.color=T.accent},onMouseLeave:e=>{e.currentTarget.style.color=T.text},children:[(0,be.jsx)(ue.A,{className:"w-5 h-5"}),(0,be.jsx)("span",{className:"font-medium",children:i("sidebar.books")})]})]})]}),q.map(e=>"exit"===e.type?(0,be.jsxs)("a",{href:e.to,title:e.text,className:"flex items-center gap-1 xl:gap-2 px-2 xl:px-4 py-2 transition-all duration-200 font-medium outline-none focus:outline-none",style:{backgroundColor:"transparent",color:T.text,borderBottom:"2px solid transparent",paddingBottom:"6px"},onMouseEnter:e=>D(e,!0,!1),onMouseLeave:e=>D(e,!1,!1),children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),(0,be.jsx)("span",{className:"hidden xl:inline",children:e.text})]},e.to):"external"===e.type?(0,be.jsxs)("a",{href:e.to,target:"_blank",rel:"noopener noreferrer",title:e.text,className:"flex items-center gap-1 xl:gap-2 px-2 xl:px-4 py-2 transition-all duration-200 font-medium outline-none focus:outline-none",style:{backgroundColor:"transparent",color:T.text,borderBottom:"2px solid transparent",paddingBottom:"6px"},onMouseEnter:e=>D(e,!0,!1),onMouseLeave:e=>D(e,!1,!1),children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),(0,be.jsx)("span",{className:"hidden xl:inline",children:e.text})]},e.to):(0,be.jsx)(re.k2,{to:e.to,end:!0,title:e.text,className:"flex items-center gap-1 xl:gap-2 px-2 xl:px-4 py-2 transition-all duration-200 font-medium outline-none focus:outline-none",style:({isActive:e})=>(e=>({backgroundColor:"transparent",color:e?T.accent:T.text,borderBottom:e?`2px solid ${T.accent}`:"2px solid transparent",borderRadius:"0",paddingBottom:"6px"}))(e),onMouseEnter:e=>{const t="page"===e.currentTarget.getAttribute("aria-current");D(e,!0,t)},onMouseLeave:e=>{const t="page"===e.currentTarget.getAttribute("aria-current");D(e,!1,t)},children:({isActive:t})=>(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),e.badge>0&&(0,be.jsx)("span",{className:"absolute -top-2 -right-2 min-w-[18px] h-[18px] flex items-center justify-center text-[10px] font-bold rounded-full",style:{backgroundColor:E,color:"#ffffff"},children:e.badge>99?"99+":e.badge})]}),(0,be.jsx)("span",{className:"hidden xl:inline",children:e.text})]})},e.to))]}),(0,be.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 lg:gap-3 relative z-10",children:[n&&(0,be.jsxs)("div",{className:"flex lg:hidden items-center gap-1",children:[(0,be.jsx)(re.k2,{to:`/courses/${s}/dashboard`,end:!0,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:({isActive:e})=>({backgroundColor:e?`${T.accent}20`:"transparent",color:e?T.accent:T.text}),title:i("courses.dashboard"),children:(0,be.jsx)(ae.A,{className:"w-5 h-5"})}),z.filter(e=>void 0!==e.badge).map(e=>(0,be.jsx)(re.k2,{to:e.to,end:!0,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:({isActive:e})=>({backgroundColor:e?`${T.accent}20`:"transparent",color:e?T.accent:T.text}),title:e.text,children:(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),e.badge>0&&(0,be.jsx)("span",{className:"absolute -top-2 -right-2 min-w-[16px] h-[16px] flex items-center justify-center text-[9px] font-bold rounded-full",style:{backgroundColor:E,color:"#ffffff"},children:e.badge>99?"99+":e.badge})]})},e.to)),y&&s&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(re.k2,{to:`/courses/${s}/statistics`,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:({isActive:e})=>({backgroundColor:e?`${T.accent}20`:"transparent",color:e?T.accent:T.text}),title:i("courses.statistics"),children:(0,be.jsx)(Bt.A,{className:"w-5 h-5"})}),(0,be.jsx)(re.k2,{to:`/courses/${s}/students`,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:({isActive:e})=>({backgroundColor:e?`${T.accent}20`:"transparent",color:e?T.accent:T.text}),title:i("courses.students.title"),children:(0,be.jsx)(pe.A,{className:"w-5 h-5"})})]})]}),!n&&(0,be.jsxs)("div",{className:"flex lg:hidden items-center gap-1",children:[(0,be.jsx)(re.k2,{to:"/courses",className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200",style:({isActive:e})=>({backgroundColor:e?`${T.accent}20`:"transparent",color:e?T.accent:T.text}),title:i("sidebar.studyPlanner"),children:(0,be.jsx)(ae.A,{className:"w-5 h-5"})}),(0,be.jsx)(re.k2,{to:"/books",className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200",style:({isActive:e})=>({backgroundColor:e?`${T.accent}20`:"transparent",color:e?T.accent:T.text}),title:i("sidebar.books"),children:(0,be.jsx)(ue.A,{className:"w-5 h-5"})}),(0,be.jsx)("a",{href:k,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:T.text},title:i("sidebar.exitCampus"),children:(0,be.jsx)($t,{className:"w-5 h-5"})})]}),(0,be.jsx)("div",{className:"w-px h-5 lg:hidden",style:{backgroundColor:`${T.text}20`}}),(0,be.jsx)("button",{onClick:d,className:"flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:{backgroundColor:"transparent",color:T.text},onMouseEnter:e=>{e.currentTarget.style.color=T.accent},onMouseLeave:e=>{e.currentTarget.style.color=T.text},title:i(c?"sidebar.lightMode":"sidebar.darkMode"),children:c?(0,be.jsx)(he.A,{className:"w-5 h-5"}):(0,be.jsx)(ge.A,{className:"w-5 h-5"})}),(0,be.jsx)("a",{href:`${k}/mi-cuenta/edit-account/`,className:"hidden lg:flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:{backgroundColor:"transparent",color:T.text},onMouseEnter:e=>{e.currentTarget.style.color=T.accent},onMouseLeave:e=>{e.currentTarget.style.color=T.text},title:i("sidebar.myAccount"),children:(0,be.jsx)(Fe.A,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),N&&(0,be.jsx)("a",{href:N,className:"hidden lg:flex items-center justify-center p-2 rounded-lg transition-all duration-200 outline-none focus:outline-none",style:{backgroundColor:c?E:T.activeBg,color:c?M:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.filter=c?"brightness(1.15)":"none",e.currentTarget.style.backgroundColor=E},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=c?E:T.activeBg},title:i("sidebar.logout"),children:(0,be.jsx)(Wt,{className:"w-5 h-5"})})]})]})})},Jt=()=>{const e=(0,re.zy)(),{courseId:t}=(0,re.g)(),n=(0,r.useRef)(null),[s,o]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),{getColor:l,isDarkMode:c}=(0,se.DP)(),d=(e.pathname.startsWith("/courses/"),e.state,(e,t)=>{const r=e.replace("#",""),n=parseInt(r.substr(0,2),16),s=parseInt(r.substr(2,2),16),o=parseInt(r.substr(4,2),16),[a,i,l]=((e,t,r)=>{e/=255,t/=255,r/=255;const n=Math.max(e,t,r),s=Math.min(e,t,r);let o,a,i=(n+s)/2;if(n===s)o=a=0;else{const l=n-s;switch(a=i>.5?l/(2-n-s):l/(n+s),n){case e:o=((t-r)/l+(t<r?6:0))/6;break;case t:o=((r-e)/l+2)/6;break;case r:o=((e-t)/l+4)/6}}return[360*o,100*a,100*i]})(n,s,o),c=Math.max(0,Math.min(100,l+l*t)),[d,u,p]=((e,t,r)=>{let n,s,o;if(e/=360,r/=100,0==(t/=100))n=s=o=r;else{const a=(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e),i=r<.5?r*(1+t):r+t-r*t,l=2*r-i;n=a(l,i,e+1/3),s=a(l,i,e),o=a(l,i,e-1/3)}return[Math.round(255*n),Math.round(255*s),Math.round(255*o)]})(a,i,c);return`#${d.toString(16).padStart(2,"0")}${u.toString(16).padStart(2,"0")}${p.toString(16).padStart(2,"0")}`});(0,r.useEffect)(()=>{const e=l("secondaryBackground","#f3f4f6");let t=e;if(e&&e.startsWith("#")){const r=(e=>{const t=e.replace("#","");return(.299*parseInt(t.substr(0,2),16)+.587*parseInt(t.substr(2,2),16)+.114*parseInt(t.substr(4,2),16))/255>.5})(e);t=d(e,r?-.05:.05),o(t)}else o(e);const r=document.body.style.backgroundColor,n=document.documentElement.style.backgroundColor,s=t||e;return document.body.style.backgroundColor=s,document.documentElement.style.backgroundColor=s,()=>{document.body.style.backgroundColor=r,document.documentElement.style.backgroundColor=n}},[l,c,e]),(0,r.useLayoutEffect)(()=>{const e=()=>{if(!n.current)return;const e=document.querySelectorAll("header, #masthead, .elementor-location-header");let t=null;for(let r of e)if(r.offsetHeight>0){t=r;break}let r=!1,s=0;if(t){s=t.offsetHeight;const e=window.getComputedStyle(t);r="fixed"===e.position||"sticky"===e.position}n.current.style.position="relative",n.current.style.marginTop=r?`${s}px`:"0px";const o=n.current.offsetTop,a=window.innerHeight-o;n.current.style.height=`${Math.max(0,a)}px`,document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden"};e(),window.addEventListener("resize",e),window.addEventListener("scroll",e);const t=new ResizeObserver(e);document.body&&t.observe(document.body);const r=document.querySelector("header, #masthead, .elementor-location-header");return r&&t.observe(r),()=>{window.removeEventListener("resize",e),window.removeEventListener("scroll",e),t.disconnect(),document.body.style.overflow="",document.documentElement.style.overflow=""}},[]),e.pathname;const u=e.pathname.match(/\/courses\/(\d+)/)?.[1]||null,p=e.pathname.startsWith("/courses/")&&u;return(0,be.jsxs)("div",{ref:n,className:"flex flex-col w-full",style:{backgroundColor:s||"var(--qe-secondary-background)"},children:[(0,be.jsx)(Xt,{isMobileMenuOpen:a,setIsMobileMenuOpen:i,isInCourseRoute:p,courseId:u}),(0,be.jsx)("div",{className:"flex-1 flex flex-col w-full overflow-hidden relative",children:(0,be.jsx)("main",{className:"flex-1 w-full overflow-x-hidden overflow-y-auto",children:(0,be.jsx)(re.sv,{context:{isMobileMenuOpen:a,setIsMobileMenuOpen:i}})})})]})},Zt=({userId:e,courseId:t,quizId:n,perPage:s=10,autoFetch:o=!0,filters:a={}}={})=>{const[i,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),[f,m]=(0,r.useState)({currentPage:1,totalPages:1,total:0,hasMore:!1}),h=(0,r.useCallback)(async(r=1,o={})=>{d(!0),p(null);try{const i=`${(0,Ye.getApiConfig)().apiUrl}/quiz-extended/v1/my-quiz-attempts`,c=new URLSearchParams({page:r.toString(),per_page:s.toString()});e&&c.append("user_id",e),t&&c.append("course_id",t.toString()),n&&c.append("quiz_id",n.toString());const d={...a,...o};d.search&&c.append("search",d.search),d.lesson_id&&c.append("lesson_id",d.lesson_id),d.date_from&&c.append("date_from",d.date_from),d.date_to&&c.append("date_to",d.date_to);const u=`${i}?${c}`,p=await(0,Ke.qb)(u),f=p.data.map(e=>({...e,quizTitle:e.quizTitle||"Cuestionario Desconocido",courseTitle:e.courseTitle||"Curso Desconocido",lessonTitle:e.lessonTitle||"Sin lecciÃ³n"}));l(f);const h={currentPage:r,totalPages:parseInt(p.headers["X-WP-TotalPages"]||"1",10),total:parseInt(p.headers["X-WP-Total"]||"0",10)};h.hasMore=h.currentPage<h.totalPages,m(h)}catch(e){console.error("Error fetching quiz attempts:",e),p("No se pudieron cargar los resultados de los cuestionarios.")}finally{d(!1)}},[e,t,n,s,a.search,a.lesson_id,a.date_from,a.date_to]),g=(0,r.useCallback)(()=>{f.hasMore&&!c&&h(f.currentPage+1)},[f,c,h]);return(0,r.useEffect)(()=>{o&&h(1)},[o]),{attempts:i,loading:c,error:u,pagination:f,fetchAttempts:h,loadMore:g}},er=async(e,t=null)=>{try{const r=(0,Ye.getApiConfig)(),n=t?`?course_id=${t}`:"",s=`${r.endpoints.custom_api}/rankings/quiz/${e}${n}`;console.log(`ðŸš€ Fetching ranking for quiz ID: ${e}`);const o=await(0,Ke.qb)(s);return console.log("âœ… Quiz ranking fetched:",o.data),o.data.data}catch(t){throw console.error(`âŒ Error fetching quiz ranking for quiz ID ${e}:`,t),t}},tr=(e,t=null)=>{const[n,s]=(0,r.useState)(null),[o,a]=(0,r.useState)(!0),[i,l]=(0,r.useState)(null),c=(0,r.useCallback)(async()=>{if(e){a(!0),l(null);try{const r=await er(e,t);s(r)}catch(e){l("Could not load quiz ranking."),console.error("Error fetching quiz ranking:",e)}finally{a(!1)}}else a(!1)},[e,t]);return(0,r.useEffect)(()=>{c()},[c]),{ranking:n,loading:o,error:i,refetch:c}},rr=(e=[])=>{const[t,n]=(0,r.useState)({}),[s,o]=(0,r.useState)(!0),[a,i]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{if(!e||0===e.length)return o(!1),void n({});o(!0),i(null);try{const t=e.map(e=>er(e).then(t=>({quizId:e,data:t})).catch(t=>(console.error(`Error fetching ranking for quiz ${e}:`,t),{quizId:e,data:null}))),r=(await Promise.all(t)).reduce((e,{quizId:t,data:r})=>(e[t]=r,e),{});n(r)}catch(e){i("Could not load quiz rankings."),console.error("Error fetching quiz rankings:",e)}finally{o(!1)}},[e.join(",")]);return(0,r.useEffect)(()=>{l()},[l]),{rankings:t,loading:s,error:a,refetch:l}};var nr=a(4180),sr=a(2307),or=a(8931),ar=a(6316);const ir=(0,le.A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]);var lr=a(180),cr=a(3160);const dr=({quizId:e=null,maxResults:t=null,showCourseColumn:r=!0,limitedView:n=!1})=>{const{attempts:s,loading:o,error:a}=Zt(),i=(0,re.Zp)(),{formatScore:l}=qt();let c=e?s.filter(t=>parseInt(t.quiz_id)===parseInt(e)):s;n?c=c.slice(0,5):t&&(c=c.slice(0,t));const d=[...new Set(c.map(e=>e.quiz_id))],{ranking:u,loading:p}=tr(e),{rankings:f,loading:m}=rr(e?[]:d),h=(t,r,n)=>{const s=e?u:f[t];if(!s)return"-";const o=s.statistics;if(!o)return"-";const a=n?o.avg_score_with_risk:o.avg_score_without_risk;if(null==a)return"-";const i=r-a;return i>0?`+${i.toFixed(1)}`:i.toFixed(1)};return a?(0,be.jsx)("div",{className:"p-4 text-red-600 bg-red-50 rounded-md",children:a}):0===c.length?(0,be.jsxs)("div",{className:"p-8 text-center bg-gray-50 rounded-lg",children:[(0,be.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:e?"No hay intentos para este cuestionario":"No has completado ningÃºn cuestionario todavÃ­a"}),(0,be.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:e?"":"Â¡Sigue aprendiendo y tus resultados aparecerÃ¡n aquÃ­!"})]}):(0,be.jsxs)("div",{className:"rounded-lg shadow-sm border qe-border-primary pt-4",style:{backgroundColor:"var(--qe-bg-card)"},children:[!e&&(0,be.jsx)("div",{className:"px-4 pt-4 pb-3 border-b qe-border-primary mx-4 mb-4",children:(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-2 qe-bg-primary-light rounded-lg flex items-center justify-center",children:(0,be.jsx)(nr.A,{className:"w-5 h-5 qe-text-primary"})}),(0,be.jsx)("h2",{className:"text-lg font-bold qe-text-primary flex items-center",children:"Mis Cuestionarios"})]})}),(0,be.jsx)("div",{className:"overflow-x-auto mx-4 mb-4",children:(0,be.jsxs)("table",{className:"min-w-full",children:[(0,be.jsx)("thead",{children:(0,be.jsxs)("tr",{className:"qe-bg-primary-light border-b-2 qe-border-primary",children:[(0,be.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold qe-text-primary uppercase tracking-wider align-middle",children:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(sr.A,{className:"w-4 h-4 mr-2"}),"Fecha"]})}),r&&(0,be.jsx)(be.Fragment,{children:(0,be.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-bold qe-text-primary uppercase tracking-wider align-middle",children:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)(ae.A,{className:"w-4 h-4 mr-2"}),"Curso / Cuestionario"]})})}),(0,be.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold qe-text-primary uppercase tracking-wider align-middle bg-gradient-to-br from-blue-50 to-blue-100/50",children:(0,be.jsx)("div",{className:"flex items-center justify-center",children:(0,be.jsx)("div",{className:"qe-bg-card px-3 py-1 rounded-full",children:"Sin Riesgo"})})}),(0,be.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold qe-text-primary uppercase tracking-wider align-middle bg-yellow-50",children:(0,be.jsx)("div",{className:"flex items-center justify-center",children:(0,be.jsx)("div",{className:"qe-bg-card px-3 py-1 rounded-full",children:"Con Riesgo"})})}),(0,be.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold qe-text-primary uppercase tracking-wider align-middle",children:"Estado"}),(0,be.jsx)("th",{scope:"col",className:"px-6 py-4 text-center text-xs font-bold qe-text-primary uppercase tracking-wider align-middle",children:"AcciÃ³n"})]})}),(0,be.jsx)("tbody",{className:"divide-y qe-border-primary",children:c.map((e,t)=>{if(!e||!e.attempt_id)return null;const n=h(e.quiz_id,e.score,!1),s=h(e.quiz_id,e.score_with_risk,!0);return(0,be.jsxs)("tr",{className:"hover:qe-bg-primary-light transition-all duration-200",children:[(0,be.jsx)("td",{className:"px-6 py-5 whitespace-nowrap align-middle",children:(0,be.jsxs)("div",{className:"flex items-center",children:[(0,be.jsx)("div",{className:"qe-bg-primary-light p-2 rounded-lg mr-3",children:(0,be.jsx)(sr.A,{className:"w-4 h-4 qe-text-primary"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-sm font-semibold qe-text-primary",children:new Date(e.end_time).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),(0,be.jsx)("div",{className:"text-xs qe-text-secondary",children:new Date(e.end_time).toLocaleDateString("es-ES",{year:"numeric"})})]})]})}),r&&(0,be.jsx)("td",{className:"px-6 py-5 align-middle",children:(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex items-center text-xs qe-text-secondary",children:[(0,be.jsx)(ae.A,{className:"w-3 h-3 mr-1.5 qe-text-primary"}),e.courseTitle||"Sin curso"]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"text-sm font-medium qe-text-primary max-w-xs truncate",children:e.quizTitle||"Cuestionario sin tÃ­tulo"}),(0,be.jsx)("button",{onClick:t=>{t.stopPropagation(),i(`/courses/${e.course_id}`,{state:{selectedQuizId:e.quiz_id,scrollToQuiz:!0}})},className:"text-white rounded p-1 transition-colors",style:{backgroundColor:"var(--qe-primary)"},title:"Ir al cuestionario",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:(0,be.jsx)(or.A,{className:"w-4 h-4"})})]})]})}),(0,be.jsx)("td",{className:"px-6 py-5 text-center align-middle bg-gradient-to-br from-blue-50 to-blue-100/50",children:(0,be.jsxs)("div",{className:"inline-flex flex-col items-center space-y-2 py-2",children:[(0,be.jsx)("div",{className:"text-2xl font-bold "+(e.passed?"text-green-600":"text-red-600"),children:l(e.score)}),"-"!==n&&(0,be.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-white/80 shadow-sm",children:[parseFloat(n)>0?(0,be.jsx)(ar.A,{className:"w-3 h-3 text-green-600"}):parseFloat(n)<0?(0,be.jsx)(ir,{className:"w-3 h-3 text-red-600"}):null,(0,be.jsx)("span",{className:"text-xs font-semibold "+(parseFloat(n)>0?"text-green-600":parseFloat(n)<0?"text-red-600":"text-gray-600"),children:n})]})]})}),(0,be.jsx)("td",{className:"px-6 py-5 text-center align-middle bg-yellow-50",children:(0,be.jsxs)("div",{className:"inline-flex flex-col items-center space-y-2 py-2",children:[(0,be.jsx)("div",{className:"text-2xl font-bold "+(e.passed?"text-green-600":"text-red-600"),children:l(e.score_with_risk)}),"-"!==s&&(0,be.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full qe-bg-card shadow-sm",children:[parseFloat(s)>0?(0,be.jsx)(ar.A,{className:"w-3 h-3 text-green-600"}):parseFloat(s)<0?(0,be.jsx)(ir,{className:"w-3 h-3 text-red-600"}):null,(0,be.jsx)("span",{className:"text-xs font-semibold "+(parseFloat(s)>0?"text-green-600":parseFloat(s)<0?"text-red-600":"qe-text-secondary"),children:s})]})]})}),(0,be.jsx)("td",{className:"px-6 py-5 text-center align-middle",children:e.passed?(0,be.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-green-50 border border-green-200",children:[(0,be.jsx)(Oe.A,{className:"w-4 h-4 text-green-600"}),(0,be.jsx)("span",{className:"text-sm font-bold text-green-600",children:"Aprobado"})]}):(0,be.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-red-50 border border-red-200",children:[(0,be.jsx)(lr.A,{className:"w-4 h-4 text-red-600"}),(0,be.jsx)("span",{className:"text-sm font-bold text-red-600",children:"No Aprobado"})]})}),(0,be.jsx)("td",{className:"px-6 py-5 text-center align-middle",children:(0,be.jsxs)("button",{onClick:()=>i(`/dashboard/attempts/${e.attempt_id}`),className:"inline-flex items-center gap-2 px-4 py-2 text-white text-sm font-medium rounded-lg transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5",style:{backgroundColor:"var(--qe-primary)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:[(0,be.jsx)(cr.A,{className:"w-4 h-4"}),"Ver Detalles"]})})]},e.attempt_id)})})]})})]})};var ur=a(7677),pr=a(2708);const fr=()=>{const{getColor:e}=(0,se.DP)(),[t,n]=(0,r.useState)(0),[s,o]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),{messages:l,loading:c,error:d,unreadCount:u,fetchMessages:p,markAsRead:f,deleteMessage:m}=((e={})=>{const{filter:t="all",autoFetch:n=!0,enablePolling:s=!0,pollingInterval:o=6e4}=e,[a,i]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[p,f]=(0,r.useState)(0),m=(0,r.useRef)(!0),h=(0,r.useRef)(null),g=(0,r.useRef)(Date.now());(0,r.useEffect)(()=>()=>{m.current=!1,h.current&&clearTimeout(h.current)},[]);const x=(0,r.useCallback)(async()=>{if(m.current)try{const e=(0,Ye.getApiConfig)(),t=new URLSearchParams({status:"unread",per_page:"1",page:"1"}),r=`${e.endpoints.custom_api}/messages/inbox?${t}`,n=await(0,Ke.qb)(r);if(!m.current)return;const s=n.headers["X-WP-Total"],o=s?parseInt(s,10):0;f(o)}catch(e){console.error("âŒ Error fetching unread count:",e)}},[]),y=(0,r.useCallback)(async(e=!0)=>{if(m.current){e&&c(!0),u(null);try{const e=(0,Ye.getApiConfig)(),r=new URLSearchParams({per_page:"50",orderby:"created_at",order:"desc"});"unread"===t?r.append("status","unread"):"read"===t&&r.append("status","read");const n=`${e.endpoints.custom_api}/messages/inbox?${r}`;console.log("ðŸ“¬ Fetching user inbox:",n);const s=await(0,Ke.qb)(n);if(!m.current)return;const o=s.data?.data||[];i(o),x(),g.current=Date.now(),console.log(`âœ… Loaded ${o.length} messages`)}catch(e){console.error("âŒ Error fetching inbox:",e),m.current&&u(e.message||"Error al cargar los mensajes")}finally{m.current&&e&&c(!1)}}},[t,x]),b=(0,r.useCallback)(async e=>{if(m.current)try{const t=`${(0,Ye.getApiConfig)().endpoints.custom_api}/messages/${e}/read`;if(console.log(`ðŸ“– Marking message ${e} as read`),await(0,Ke.qb)(t,{method:"PUT"}),!m.current)return;i(t=>t.map(t=>t.id===e?{...t,status:"read"}:t)),x(),console.log("âœ… Message marked as read")}catch(e){throw console.error("âŒ Error marking message as read:",e),e}},[x]),v=(0,r.useCallback)(async()=>{const e=a.filter(e=>"unread"===e.status);for(const t of e)try{await b(t.id)}catch(e){console.error(`Error marking message ${t.id} as read:`,e)}},[a,b]),j=(0,r.useCallback)(async e=>{if(m.current)try{const t=`${(0,Ye.getApiConfig)().endpoints.custom_api}/messages/${e}`;if(console.log(`ðŸ—‘ï¸ Deleting message ${e}`),await(0,Ke.qb)(t,{method:"DELETE"}),!m.current)return;i(t=>t.filter(t=>t.id!==e)),x(),console.log("âœ… Message deleted")}catch(e){throw console.error("âŒ Error deleting message:",e),e}},[x]),w=(0,r.useCallback)(()=>{if(!s||h.current)return;console.log(`â° Starting inbox polling every ${o/1e3}s`);const e=()=>{document.hidden||y(!1),h.current=setTimeout(e,o)};h.current=setTimeout(e,o)},[s,o,y]),N=(0,r.useCallback)(()=>{h.current&&(console.log("â¸ï¸ Stopping inbox polling"),clearTimeout(h.current),h.current=null)},[]);return(0,r.useEffect)(()=>{n&&y(!0)},[t,n]),(0,r.useEffect)(()=>(s&&!l?w():N(),()=>{N()}),[s,l,w,N]),(0,r.useEffect)(()=>{const e=()=>{!document.hidden&&s&&(console.log("ðŸ” Page visible, checking for new messages..."),y(!1))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}},[s,y]),{messages:a,loading:l,error:d,unreadCount:p,fetchMessages:y,markAsRead:b,markAllAsRead:v,deleteMessage:j,startPolling:w,stopPolling:N}})({autoFetch:!0,enablePolling:!1}),h=s?l.filter(e=>e.subject.toLowerCase().includes(s.toLowerCase())||e.message.toLowerCase().includes(s.toLowerCase())):l,g=h[t];return(0,r.useEffect)(()=>{h.length>0&&t>=h.length&&n(h.length-1)},[h.length,t]),(0,r.useEffect)(()=>{g&&"unread"===g.status&&f(g.id).catch(()=>{})},[g,f]),(0,be.jsxs)("div",{className:"rounded-xl h-full flex flex-col shadow-lg border-2",style:{backgroundColor:e("secondaryBackground","#f8f9fa"),borderColor:e("primary","#3b82f6")},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between p-6 pb-4 border-b-2",style:{borderColor:e("primary","#3b82f6")+"30"},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(Pe.A,{className:"w-6 h-6",style:{color:e("primary","#3b82f6")}}),(0,be.jsx)("h2",{className:"text-xl font-bold qe-text-primary",children:"Mensajes"})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsx)("button",{onClick:()=>i(!a),className:"p-1.5 rounded text-white hover:qe-bg-accent transition-all",style:{backgroundColor:"var(--qe-primary)"},title:"Buscar",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:(0,be.jsx)(Le.A,{className:"w-4 h-4"})}),(0,be.jsx)("button",{onClick:()=>p(!0),disabled:c,className:"p-1.5 rounded text-white hover:qe-bg-accent transition-all disabled:opacity-50",style:{backgroundColor:"var(--qe-primary)"},title:"Actualizar",onMouseEnter:e=>{c||(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{c||(e.currentTarget.style.backgroundColor="var(--qe-primary)")},children:(0,be.jsx)(De.A,{className:"w-4 h-4 "+(c?"animate-spin":"")})}),h.length>0&&(0,be.jsxs)("div",{className:"flex items-center gap-1 ml-1 pl-1 border-l qe-border-primary",children:[(0,be.jsx)("button",{onClick:()=>{t>0&&n(t-1)},disabled:0===t,className:"p-1 rounded text-white hover:qe-bg-accent disabled:opacity-30 disabled:cursor-not-allowed transition-all",style:{backgroundColor:"var(--qe-primary)"},title:"Anterior",onMouseEnter:e=>{0!==t&&(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{0!==t&&(e.currentTarget.style.backgroundColor="var(--qe-primary)")},children:(0,be.jsx)(We.A,{className:"w-3.5 h-3.5"})}),(0,be.jsxs)("span",{className:"text-xs qe-text-primary px-1.5 min-w-[50px] text-center",children:[t+1,"/",h.length]}),(0,be.jsx)("button",{onClick:()=>{t<h.length-1&&n(t+1)},disabled:t===h.length-1,className:"p-1 rounded text-white hover:qe-bg-accent disabled:opacity-30 disabled:cursor-not-allowed transition-all",style:{backgroundColor:"var(--qe-primary)"},title:"Siguiente",onMouseEnter:e=>{t!==h.length-1&&(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{t!==h.length-1&&(e.currentTarget.style.backgroundColor="var(--qe-primary)")},children:(0,be.jsx)(ur.A,{className:"w-3.5 h-3.5"})})]})]})]}),a&&(0,be.jsxs)("div",{className:"p-3 border-b qe-border-primary qe-bg-primary-light",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("div",{className:"relative flex-1",children:[(0,be.jsx)("input",{type:"text",placeholder:"Buscar en mensajes...",value:s,onChange:e=>{o(e.target.value),n(0)},className:"w-full pl-8 pr-8 py-1.5 text-sm border qe-border-primary rounded-lg focus:outline-none focus:ring-2 focus:qe-ring-accent qe-bg-card qe-text-primary",style:{backgroundColor:"var(--qe-bg-card)"},autoFocus:!0}),(0,be.jsx)(Le.A,{className:"absolute left-2.5 top-2 w-3.5 h-3.5 qe-text-primary"}),s&&(0,be.jsx)("button",{onClick:()=>o(""),className:"absolute right-2.5 top-2 text-white rounded-full p-0.5 hover:qe-bg-accent transition-all",style:{backgroundColor:"var(--qe-primary)"},title:"Limpiar bÃºsqueda",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:(0,be.jsx)(xe.A,{className:"w-2.5 h-2.5"})})]}),(0,be.jsx)("button",{onClick:()=>{i(!1),o("")},className:"p-1.5 rounded text-white hover:qe-bg-accent transition-all flex-shrink-0",style:{backgroundColor:"var(--qe-primary)"},title:"Cerrar bÃºsqueda",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:(0,be.jsx)(xe.A,{className:"w-4 h-4"})})]}),s&&(0,be.jsxs)("div",{className:"text-xs qe-text-secondary mt-1.5",children:[h.length," resultado",1!==h.length?"s":""]})]}),(0,be.jsxs)("div",{className:"p-5",children:[d&&(0,be.jsx)("div",{className:"text-sm qe-text-error qe-bg-error-light p-3 rounded-lg",children:d}),c&&0===l.length?(0,be.jsxs)("div",{className:"text-center py-8 qe-text-secondary",children:[(0,be.jsx)(De.A,{className:"w-6 h-6 animate-spin mx-auto mb-2 qe-text-primary"}),(0,be.jsx)("p",{className:"text-sm",children:"Cargando mensajes..."})]}):0===h.length?(0,be.jsxs)("div",{className:"text-center py-8",children:[(0,be.jsx)(Pe.A,{className:"w-12 h-12 qe-text-secondary mx-auto mb-3 opacity-30"}),(0,be.jsx)("p",{className:"text-sm qe-text-secondary",children:s?"No se encontraron mensajes":"No tienes mensajes"})]}):g?(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-start justify-between",children:[(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("h3",{className:"text-xl font-bold qe-text-primary mb-2",children:g.subject}),(0,be.jsxs)("div",{className:"flex items-center gap-3 text-sm qe-text-primary",children:[(0,be.jsxs)("span",{className:"font-semibold",children:["De: ",g.sender_name||"Admin"]}),(0,be.jsx)("span",{children:"â€¢"}),(0,be.jsx)("span",{className:"qe-text-secondary",children:(e=>{const t=new Date(e),r=new Date,n=Math.floor((r-t)/36e5);return n<1?"Hace un momento":n<24?`Hace ${n}h`:n<48?"Ayer":t.toLocaleDateString("es-ES",{day:"numeric",month:"short"})})(g.created_at)}),"unread"===g.status&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("span",{children:"â€¢"}),(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 qe-text-accent font-medium",children:[(0,be.jsx)("span",{className:"w-1.5 h-1.5 qe-bg-accent rounded-full"}),"Nuevo"]})]})]})]}),(0,be.jsx)("button",{onClick:async()=>{if(g)try{await m(g.id),1===h.length?n(0):t>=h.length-1&&n(Math.max(0,t-1))}catch(e){console.error("Error deleting message:",e)}},className:"ml-4 p-2 rounded transition-all text-white",style:{backgroundColor:"var(--qe-error, #dc2626)"},title:"Borrar mensaje",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-error-dark, #b91c1c)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-error, #dc2626)"},children:(0,be.jsx)(pr.A,{className:"w-4 h-4"})})]}),(0,be.jsx)("div",{className:"prose prose-sm max-w-none",children:(0,be.jsx)("div",{className:"qe-bg-primary-light rounded-lg p-4 border qe-border-primary",children:(0,be.jsx)("div",{className:"qe-text-primary leading-relaxed",dangerouslySetInnerHTML:{__html:g.message}})})}),g.type&&(0,be.jsx)("div",{className:"flex items-center gap-2",children:(0,be.jsx)("span",{className:"text-xs px-2 py-1 qe-bg-primary-light qe-text-primary rounded",children:g.type.replace(/_/g," ").replace(/^\w/,e=>e.toUpperCase())})})]}):null]})]})};var mr=a(9044);const hr=async e=>{try{const{endpoints:t}=(0,Ye.getApiConfig)(),r=`${t.custom_api}/student-progress/course/${e}`;console.log(`ðŸ“Š Fetching course progress for course ${e}`);const n=await(0,Ke.qb)(r,{method:"GET"});return console.log("âœ… Course progress fetched:",n.data),n.data.data}catch(e){throw console.error("âŒ Error fetching course progress:",e),e}},gr=(e,t=!1,n=!1)=>{const[s,o]=(0,r.useState)(null),[a,i]=(0,r.useState)([]),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),p=(0,r.useCallback)(async()=>{if(e){c(!0),u(null);try{const t=await hr(e);o(t)}catch(e){console.error("Error fetching course progress:",e),u(e.message||"Error al cargar el progreso"),o(null)}finally{c(!1)}}},[e]),f=(0,r.useCallback)(async()=>{if(e)try{const t=await(async e=>{try{const{endpoints:t}=(0,Ye.getApiConfig)(),r=`${t.custom_api}/student-progress/completed/${e}`;console.log(`ðŸ“‹ Fetching completed content for course ${e}`);const n=await(0,Ke.qb)(r,{method:"GET"});return console.log("âœ… Completed content fetched:",n.data),n.data.data}catch(e){throw console.error("âŒ Error fetching completed content:",e),e}})(e);i(t||[])}catch(e){console.error("Error fetching completed content:",e),i([])}},[e]),m=(0,r.useCallback)(async(t,r,s=null,a=null)=>{if(!e)throw new Error("Course ID is required");c(!0),u(null);try{const l=await(async(e,t,r,n=null,s=null)=>{try{const{endpoints:o}=(0,Ye.getApiConfig)(),a=`${o.custom_api}/student-progress/mark-complete`;console.log("âœ… Marking content as complete:",{contentId:e,contentType:t,courseId:r,parentLessonId:n,stepIndex:s});const i={content_id:e,content_type:t,course_id:r};null!==n&&(i.parent_lesson_id=n),null!==s&&(i.step_index=s);const l=await(0,Ke.qb)(a,{method:"POST",body:JSON.stringify(i)});return console.log("âœ… Content marked as complete:",l.data),l.data.data}catch(e){throw console.error("âŒ Error marking content as complete:",e),e}})(t,r,e,s,a);void 0!==l?.progress&&o(e=>({...e,percentage:l.progress}));let c=t;return"step"===r&&null!==s&&null!==a&&(c=1e4*s+a),i(e=>e.find(e=>e.content_id===c&&e.content_type===r)?e:[...e,{content_id:c,content_type:r,completed_at:(new Date).toISOString()}]),await f(),n&&await p(),l}catch(e){throw console.error("Error marking content complete:",e),u(e.message||"Error al marcar como completado"),e}finally{c(!1)}},[e,n,p]),h=(0,r.useCallback)(async(t,r,s=null,a=null)=>{if(!e)throw new Error("Course ID is required");c(!0),u(null);try{const l=await(async(e,t,r,n=null,s=null)=>{try{const{endpoints:o}=(0,Ye.getApiConfig)(),a=`${o.custom_api}/student-progress/unmark-complete`;console.log("âŒ Unmarking content:",{contentId:e,contentType:t,courseId:r,parentLessonId:n,stepIndex:s});const i={content_id:e,content_type:t,course_id:r};null!==n&&(i.parent_lesson_id=n),null!==s&&(i.step_index=s);const l=await(0,Ke.qb)(a,{method:"POST",body:JSON.stringify(i)});return console.log("âœ… Content unmarked:",l.data),l.data.data}catch(e){throw console.error("âŒ Error unmarking content:",e),e}})(t,r,e,s,a);void 0!==l?.progress&&o(e=>({...e,percentage:l.progress}));let c=t;return"step"===r&&null!==s&&null!==a&&(c=1e4*s+a),i(e=>e.filter(e=>!(e.content_id===c&&e.content_type===r))),await f(),n&&await p(),l}catch(e){throw console.error("Error unmarking content:",e),u(e.message||"Error al desmarcar"),e}finally{c(!1)}},[e,n,p]),g=(0,r.useCallback)((e,t,r=null,n=null)=>{let s=e;return"step"===t&&null!==r&&null!==n&&(s=1e4*r+n),a.some(e=>e.content_id===s&&e.content_type===t)},[a]),x=(0,r.useCallback)(async()=>{n&&await p()},[n,p]);return(0,r.useEffect)(()=>{t&&e&&x()},[t,e,x]),{progress:s,completedItems:a,loading:l,error:d,markComplete:m,unmarkComplete:h,isCompleted:g,refresh:x,fetchProgress:p,fetchCompletedContent:f}},xr=()=>{const e=window.qe_data?.user||window.qeApiConfig?.user||null;return!!e&&(!(!e.capabilities||!e.capabilities.manage_options)||!(!e.roles||!Array.isArray(e.roles))&&e.roles.includes("administrator"))},yr=({course:e})=>{const{completedItems:t}=gr(e.id,!0),{lessons:r}=(0,xt.A)({courseId:e.id,autoFetch:!0,perPage:100}),n=e._embedded?.["wp:featuredmedia"]?.[0]?.source_url,s=e.title?.rendered||e.title||"Curso sin tÃ­tulo",o=r?.length||0,a=t?.filter(e=>"lesson"===e.content_type)?.length||0,i=o>0?Math.round(a/o*100):0;return(0,be.jsx)("div",{className:"qe-bg-primary-light rounded-lg p-3 border qe-border-primary hover:shadow-lg transition-all",children:(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"w-14 h-14 flex-shrink-0 rounded overflow-hidden",children:n?(0,be.jsx)("img",{src:n,alt:s,className:"w-full h-full object-cover"}):(0,be.jsx)("div",{className:"w-full h-full flex items-center justify-center",style:{backgroundColor:"var(--qe-primary)"},children:(0,be.jsx)(ae.A,{className:"w-5 h-5 text-white"})})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("h3",{className:"text-sm font-semibold qe-text-primary truncate mb-1",dangerouslySetInnerHTML:{__html:s}}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"flex-1 qe-bg-card rounded-full h-2 overflow-hidden",children:(0,be.jsx)("div",{className:"h-full transition-all duration-500 rounded-full",style:{width:`${i}%`,backgroundColor:"var(--qe-primary)"}})}),(0,be.jsxs)("span",{className:"text-xs font-medium qe-text-primary whitespace-nowrap",children:[i,"%"]})]})]}),(0,be.jsx)(re.N_,{to:`/courses/${e.id}`,className:"px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all flex-shrink-0",style:{backgroundColor:"var(--qe-primary)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--qe-accent)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="var(--qe-primary)"},children:i>0?"Continuar":"Comenzar"})]})})},br=()=>{const{getColor:e}=(0,se.DP)(),t=xr(),{courses:r,loading:n,error:s}=(0,yt.A)({autoFetch:!0,embed:!0,perPage:3,status:"publish",enrolledOnly:!t});return s?(0,be.jsx)("div",{className:"rounded-xl shadow-lg border-2 p-6",style:{backgroundColor:e("secondaryBackground","#f8f9fa"),borderColor:e("primary","#3b82f6")},children:(0,be.jsx)("p",{className:"text-sm qe-text-error",children:"Error al cargar cursos"})}):(0,be.jsxs)("div",{className:"p-6 rounded-xl shadow-lg border-2 h-full flex flex-col",style:{backgroundColor:e("secondaryBackground","#f8f9fa"),borderColor:e("primary","#3b82f6")},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b-2",style:{borderColor:e("primary","#3b82f6")+"30"},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(mr.A,{className:"w-6 h-6",style:{color:e("primary","#3b82f6")}}),(0,be.jsx)("h2",{className:"text-xl font-bold qe-text-primary",children:"Mis Cursos"})]}),(0,be.jsx)(re.N_,{to:"/courses",className:"px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all",style:{backgroundColor:e("primary","#3b82f6")},onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e("accent","#f59e0b")},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e("primary","#3b82f6")},children:"Ver todos"})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto",children:n&&0===r.length?(0,be.jsxs)("div",{className:"text-center py-8 qe-text-secondary",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-2",style:{borderColor:e("primary","#3b82f6")}}),(0,be.jsx)("p",{className:"text-sm",children:"Cargando cursos..."})]}):0===r.length?(0,be.jsxs)("div",{className:"text-center py-8",children:[(0,be.jsx)(ae.A,{className:"w-12 h-12 qe-text-secondary mx-auto mb-3 opacity-30"}),(0,be.jsx)("p",{className:"text-sm qe-text-secondary",children:"No estÃ¡s inscrito en ningÃºn curso"})]}):(0,be.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,be.jsx)(yr,{course:e},e.id))})})]})};var vr=a(10),jr=a(6241);const wr=(0,le.A)("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),Nr=({statsData:e,compact:t=!1,isDarkMode:n=!1,pageColors:s=null,mini:o=!1})=>{const{getColor:a}=(0,se.DP)(),[i,l]=(0,r.useState)(null),c=s||{text:n?"#f9fafb":"#1a202c",textMuted:n?"#9ca3af":"#6b7280",primary:a("primary","#3b82f6"),background:n?"#1f2937":"#ffffff",secondaryBg:n?"#111827":"#f3f4f6",border:n?"#374151":"#e5e7eb"},d=[{label:"Correctas",value:e?.correct_answers||0,color:"#10b981",icon:Oe.A,userPct:e?.user_correct_pct||0,globalPct:e?.global_stats?.correct_pct||0,diff:e?.comparison?.correct_diff||0},{label:"Incorrectas",value:e?.incorrect_answers||0,color:"#ef4444",icon:lr.A,userPct:e?.user_incorrect_pct||0,globalPct:e?.global_stats?.incorrect_pct||0,diff:e?.comparison?.incorrect_diff||0,invertDiff:!0},{label:"Sin Contestar",value:e?.unanswered||0,color:"#94a3b8",icon:de.A,userPct:e?.user_unanswered_pct||0,globalPct:e?.global_stats?.unanswered_pct||0,diff:e?.comparison?.unanswered_diff||0,invertDiff:!0}],u=d.reduce((e,t)=>e+t.value,0),p=e?.global_stats?.total_users>0;let f=-90;const m=d.map((e,t)=>{const r=u>0?e.value/u*100:0,n=r/100*360,s={...e,percentage:r,startAngle:f,endAngle:f+n,index:t};return f+=n,s}),h=(e,t,r,n)=>{const s=g(50,50,n,t),o=g(50,50,n,e),a=g(50,50,r,t),i=g(50,50,r,e),l=t-e<=180?0:1;return[`M ${s.x} ${s.y}`,`A ${n} ${n} 0 ${l} 0 ${o.x} ${o.y}`,`L ${i.x} ${i.y}`,`A ${r} ${r} 0 ${l} 1 ${a.x} ${a.y}`,"Z"].join(" ")},g=(e,t,r,n)=>{const s=n*Math.PI/180;return{x:e+r*Math.cos(s),y:t+r*Math.sin(s)}};return(0,be.jsxs)("div",{className:"p-3 rounded-lg border flex flex-col h-full "+(t?"":"shadow-lg"),style:{backgroundColor:c.background,borderColor:c.border||(n?"#374151":"#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-2 pb-2 border-b",style:{borderColor:c.border||(n?"#374151":"#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(wr,{className:"w-3.5 h-3.5",style:{color:c.primary}}),(0,be.jsx)("h2",{className:"text-xs font-semibold",style:{color:c.text},children:o?"Respuestas":"DistribuciÃ³n de Respuestas"})]}),p&&!o&&(0,be.jsxs)("div",{className:"flex items-center gap-1 text-[10px]",style:{color:c.textMuted},children:[(0,be.jsx)(pe.A,{className:"w-3 h-3"}),(0,be.jsx)("span",{children:e.global_stats.total_users})]})]}),o?(0,be.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center",children:[(0,be.jsxs)("div",{className:"relative w-20 h-20 mb-2",children:[(0,be.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[(0,be.jsx)("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:n?"#374151":"#f3f4f6",strokeWidth:"16"}),m.map((e,t)=>{const r=i===t;return(0,be.jsx)("path",{d:h(e.startAngle,e.endAngle,r?28:30,r?44:42),fill:e.color,className:"transition-all duration-300 cursor-pointer",onMouseEnter:()=>l(t),onMouseLeave:()=>l(null)},t)})]}),(0,be.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:c.text},children:u}),(0,be.jsx)("p",{className:"text-[9px]",style:{color:c.textMuted},children:"Total"})]})]}),(0,be.jsx)("div",{className:"w-full space-y-1",children:d.map((e,t)=>{const r=e.icon,n=u>0?(e.value/u*100).toFixed(0):0;return(0,be.jsxs)("div",{className:"flex items-center justify-between px-2 py-1 rounded text-[10px]",style:{backgroundColor:i===t?`${e.color}15`:"transparent"},onMouseEnter:()=>l(t),onMouseLeave:()=>l(null),children:[(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsx)(r,{className:"w-3 h-3",style:{color:e.color}}),(0,be.jsx)("span",{style:{color:c.text},children:e.label})]}),(0,be.jsxs)("span",{className:"font-bold",style:{color:e.color},children:[e.value," (",n,"%)"]})]},t)})})]}):(0,be.jsxs)("div",{className:"flex items-start gap-4 flex-1",children:[(0,be.jsxs)("div",{className:"relative flex-shrink-0 w-28 h-28",children:[(0,be.jsxs)("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[(0,be.jsx)("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:n?c.primary+"20":"#f3f4f6",strokeWidth:"16"}),m.map((e,t)=>{const r=i===t,n=r?28:30,s=r?44:42;return(0,be.jsx)("g",{children:(0,be.jsx)("path",{d:h(e.startAngle,e.endAngle,n,s),fill:e.color,className:"transition-all duration-300 cursor-pointer",style:{filter:r?"brightness(1.1) drop-shadow(0 2px 4px rgba(0,0,0,0.2))":"none",transformOrigin:"50% 50%"},onMouseEnter:()=>l(t),onMouseLeave:()=>l(null)})},t)})]}),(0,be.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",children:[(0,be.jsx)("p",{className:"text-2xl font-bold",style:{color:c.text},children:u}),(0,be.jsx)("p",{className:"text-xs",style:{color:c.textMuted},children:"Total"})]})]}),(0,be.jsx)("div",{className:"flex-1 space-y-2",children:d.map((e,t)=>{const r=e.icon,n=u>0?(e.value/u*100).toFixed(1):0,s=i===t,o=((e,t=!1)=>{const r=t?e<0:e>0;return Math.abs(e)<.5?{Icon:jr.A,color:c.textMuted,label:"igual"}:r?{Icon:ar.A,color:"#10b981",label:"mejor"}:{Icon:ir,color:"#ef4444",label:"peor"}})(e.diff,e.invertDiff),a=o.Icon;return(0,be.jsxs)("div",{className:"p-2 rounded transition-all cursor-pointer",style:{backgroundColor:s?`${e.color}15`:"transparent"},onMouseEnter:()=>l(t),onMouseLeave:()=>l(null),children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(r,{className:"w-3.5 h-3.5",style:{color:e.color}}),(0,be.jsx)("span",{className:"text-xs font-medium",style:{color:c.text},children:e.label})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsx)("span",{className:"text-sm font-bold",style:{color:e.color},children:e.value}),(0,be.jsxs)("span",{className:"text-xs",style:{color:c.textMuted},children:["(",n,"%)"]})]})]}),p&&(0,be.jsxs)("div",{className:"flex items-center justify-between mt-1 pl-5",children:[(0,be.jsx)("div",{className:"flex items-center gap-1",children:(0,be.jsxs)("span",{className:"text-xs",style:{color:c.textMuted},children:["Media: ",e.globalPct,"%"]})}),(0,be.jsxs)("div",{className:"flex items-center gap-0.5",children:[(0,be.jsx)(a,{className:"w-3 h-3",style:{color:o.color}}),(0,be.jsxs)("span",{className:"text-xs font-medium",style:{color:o.color},children:[e.diff>0?"+":"",e.diff,"%"]})]})]})]},t)})})]}),!o&&(void 0!==e?.correct_with_risk||void 0!==e?.incorrect_with_risk)&&(0,be.jsx)("div",{className:"mt-2 pt-2 border-t",style:{borderColor:c.border||(n?"#374151":"#e5e7eb")},children:(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-[10px]",children:[(0,be.jsxs)("div",{className:"p-1.5 rounded",style:{backgroundColor:n?"#10b98115":"#ecfdf5"},children:[(0,be.jsx)("div",{className:"font-medium mb-0.5",style:{color:"#10b981"},children:"Correctas"}),(0,be.jsxs)("div",{className:"flex justify-between",style:{color:c.text},children:[(0,be.jsx)("span",{children:"Con riesgo:"}),(0,be.jsx)("span",{className:"font-medium",children:e?.correct_with_risk||0})]}),(0,be.jsxs)("div",{className:"flex justify-between",style:{color:c.text},children:[(0,be.jsx)("span",{children:"Sin riesgo:"}),(0,be.jsx)("span",{className:"font-medium",children:e?.correct_without_risk||0})]})]}),(0,be.jsxs)("div",{className:"p-1.5 rounded",style:{backgroundColor:n?"#ef444415":"#fef2f2"},children:[(0,be.jsx)("div",{className:"font-medium mb-0.5",style:{color:"#ef4444"},children:"Incorrectas"}),(0,be.jsxs)("div",{className:"flex justify-between",style:{color:c.text},children:[(0,be.jsx)("span",{children:"Con riesgo:"}),(0,be.jsx)("span",{className:"font-medium",children:e?.incorrect_with_risk||0})]}),(0,be.jsxs)("div",{className:"flex justify-between",style:{color:c.text},children:[(0,be.jsx)("span",{children:"Sin riesgo:"}),(0,be.jsx)("span",{className:"font-medium",children:e?.incorrect_without_risk||0})]})]})]})})]})},kr=()=>{const{getColor:e}=(0,se.DP)(),[t,n]=(0,r.useState)("all"),[s,o]=(0,r.useState)({totalQuestions:0,correctAnswers:0,incorrectAnswers:0,unanswered:0}),[a,i]=(0,r.useState)(!1),{courses:l,loading:c}=(0,yt.A)({autoFetch:!0,perPage:100});(0,r.useEffect)(()=>{(async()=>{i(!0);try{const e=(0,Ye.getApiConfig)(),r="all"!==t?`?course_id=${t}`:"",n=`${e.apiUrl}/quiz-extended/v1/user-stats/questions${r}`;console.log("ðŸ“Š Fetching user stats from:",n);const s=await(0,Ke.qb)(n);console.log("ðŸ“Š User stats response:",s),console.log("ðŸ“Š Response data:",s.data);const a=s.data?.data||s.data||{};console.log("ðŸ“Š Extracted data:",a),o({totalQuestions:a.total_questions||0,correctAnswers:a.correct_answers||0,incorrectAnswers:a.incorrect_answers||0,unanswered:a.unanswered||0}),console.log("ðŸ“Š Final stats state:",{totalQuestions:a.total_questions||0,correctAnswers:a.correct_answers||0,incorrectAnswers:a.incorrect_answers||0,unanswered:a.unanswered||0})}catch(e){console.error("âŒ Error fetching user stats:",e),console.error("Error details:",e.response||e.message),o({totalQuestions:0,correctAnswers:0,incorrectAnswers:0,unanswered:0})}finally{i(!1)}})()},[t]);const d=c||a;return(0,be.jsxs)("div",{className:"p-6 rounded-xl shadow-lg border-2 h-full flex flex-col",style:{backgroundColor:e("secondaryBackground","#f8f9fa"),borderColor:e("primary","#3b82f6")},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4 pb-4 border-b-2",style:{borderColor:e("primary","#3b82f6")+"30"},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(vr.A,{className:"w-6 h-6",style:{color:e("primary","#3b82f6")}}),(0,be.jsx)("h2",{className:"text-xl font-bold qe-text-primary",children:"EstadÃ­sticas"})]}),(0,be.jsx)(re.N_,{to:"/statistics",className:"px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all",style:{backgroundColor:e("primary","#3b82f6")},onMouseEnter:t=>{t.currentTarget.style.backgroundColor=e("accent","#f59e0b")},onMouseLeave:t=>{t.currentTarget.style.backgroundColor=e("primary","#3b82f6")},children:"Ver todas"})]}),(0,be.jsx)("div",{className:"pb-4",children:(0,be.jsxs)("select",{value:t,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 text-sm border qe-border-primary rounded-lg qe-text-primary focus:outline-none focus:ring-2",style:{backgroundColor:e("background","#ffffff"),"--tw-ring-color":e("primary","#3b82f6")},disabled:c,children:[(0,be.jsx)("option",{value:"all",children:"Todos los cursos"}),l.map(e=>(0,be.jsx)("option",{value:e.id,children:e.title?.rendered||e.title||`Curso ${e.id}`},e.id))]})}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto",children:d?(0,be.jsxs)("div",{className:"text-center py-8 qe-text-secondary",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-2",style:{borderColor:e("primary","#3b82f6")}}),(0,be.jsx)("p",{className:"text-sm",children:"Cargando estadÃ­sticas..."})]}):0===s.totalQuestions?(0,be.jsxs)("div",{className:"text-center py-8",children:[(0,be.jsx)(vr.A,{className:"w-12 h-12 qe-text-secondary mx-auto mb-3 opacity-30"}),(0,be.jsx)("p",{className:"text-sm qe-text-secondary",children:"all"===t?"No has respondido ninguna pregunta aÃºn":"No has respondido preguntas de este curso"})]}):(0,be.jsx)("div",{className:"h-full",children:(0,be.jsx)(Nr,{compact:!0,statsData:{correct_answers:s.correctAnswers,incorrect_answers:s.incorrectAnswers,unanswered:s.unanswered,total_questions:s.totalQuestions}})})})]})},Cr={getBaseUrl:()=>`${(0,Ye.getApiConfig)().apiUrl}/quiz-extended/v1`,async saveProgress(e){try{const t=(0,Ye.getApiConfig)(),r=this.getBaseUrl(),n=await fetch(`${r}/quiz-autosave`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin",body:JSON.stringify(e)});if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to save quiz progress")}return await n.json()}catch(e){throw console.error("Error saving quiz progress:",e),e}},async getLatestAutosave(){try{const e=(0,Ye.getApiConfig)(),t=this.getBaseUrl(),r=await fetch(`${t}/quiz-autosave/latest`,{headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},credentials:"same-origin"});if(404===r.status)return null;if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(e.message||"Failed to fetch latest autosave")}return(await r.json()).data}catch(e){return console.error("Error fetching latest autosave:",e),null}},async getQuizAutosave(e){try{const t=(0,Ye.getApiConfig)(),r=this.getBaseUrl(),n=await fetch(`${r}/quiz-autosave/${e}`,{headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin"});if(404===n.status)return null;if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to fetch quiz autosave")}return(await n.json()).data}catch(e){return console.error("Error fetching quiz autosave:",e),null}},async deleteAutosave(e){try{const t=(0,Ye.getApiConfig)(),r=this.getBaseUrl(),n=await fetch(`${r}/quiz-autosave/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":t.nonce},credentials:"same-origin"});if(404===n.status)return{success:!0,message:"Autosave already deleted"};if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||"Failed to delete autosave")}return await n.json()}catch(e){throw console.error("Error deleting autosave:",e),e}},async clearAllAutosaves(){try{const e=(0,Ye.getApiConfig)(),t=this.getBaseUrl(),r=await fetch(`${t}/quiz-autosave/clear-all`,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},credentials:"same-origin"});if(!r.ok){const e=await r.json().catch(()=>({}));throw new Error(e.message||"Failed to clear all autosaves")}return await r.json()}catch(e){throw console.error("Error clearing all autosaves:",e),e}},async hasPendingQuiz(){try{return null!==await this.getLatestAutosave()}catch(e){return console.error("Error checking pending quiz:",e),!1}}},_r=Cr,Sr=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(!0),[o,a]=(0,r.useState)(!0),i=(0,re.Zp)();if((0,r.useEffect)(()=>{(async()=>{try{const e=await _r.getLatestAutosave();e&&t(e)}catch(e){console.error("Error checking for pending quiz:",e)}finally{a(!1)}})()},[]),o||!e||!n)return null;const{answered:l,total:c,percent:d}=(()=>{if(!e)return{answered:0,total:0,percent:0};const t="string"==typeof e.answers?JSON.parse(e.answers):e.answers,r="string"==typeof e.quiz_data?JSON.parse(e.quiz_data):e.quiz_data,n=Object.keys(t||{}).length,s=r?.meta?._quiz_question_ids?.length||0;return{answered:n,total:s,percent:s>0?Math.round(n/s*100):0}})();return(0,be.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-l-4 border-blue-500 rounded-lg shadow-md overflow-hidden",children:(0,be.jsx)("div",{className:"p-5",children:(0,be.jsxs)("div",{className:"flex items-start",children:[(0,be.jsx)("div",{className:"flex-shrink-0",children:(0,be.jsx)("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-500 text-white",children:(0,be.jsx)(tt.A,{className:"w-6 h-6"})})}),(0,be.jsxs)("div",{className:"ml-4 flex-1",children:[(0,be.jsxs)("div",{className:"flex items-start justify-between",children:[(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Tienes un cuestionario sin terminar"}),(0,be.jsx)("p",{className:"mt-1 text-sm text-gray-700",children:"ContinÃºa donde lo dejaste y completa tu evaluaciÃ³n"})]}),(0,be.jsx)("button",{onClick:()=>{s(!1)},className:"ml-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Cerrar notificaciÃ³n",children:(0,be.jsx)(xe.A,{className:"w-5 h-5"})})]}),(0,be.jsxs)("div",{className:"mt-3 bg-white rounded-lg p-3 space-y-2 border border-blue-200",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,be.jsx)("span",{className:"font-medium text-gray-700",children:"Cuestionario:"}),(0,be.jsx)("span",{className:"text-gray-900 font-semibold",children:e.quiz_title||"Sin tÃ­tulo"})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,be.jsx)("span",{className:"font-medium text-gray-700",children:"Progreso:"}),(0,be.jsxs)("span",{className:"text-gray-900",children:[l," de ",c," preguntas (",d,"%)"]})]}),e.time_remaining&&(0,be.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,be.jsxs)("span",{className:"font-medium text-gray-700 flex items-center gap-1",children:[(0,be.jsx)($e.A,{className:"w-4 h-4"}),"Tiempo restante:"]}),(0,be.jsxs)("span",{className:"text-gray-900",children:[Math.floor(e.time_remaining/60),":",(e.time_remaining%60).toString().padStart(2,"0")]})]}),(0,be.jsxs)("div",{className:"pt-2 border-t border-gray-200 text-xs text-gray-500",children:["Ãšltima actualizaciÃ³n: ",(e=>{const t=new Date(e),r=new Date-t,n=Math.floor(r/6e4),s=Math.floor(n/60),o=Math.floor(s/24);return o>0?`hace ${o} dÃ­a${o>1?"s":""}`:s>0?`hace ${s} hora${s>1?"s":""}`:n>0?`hace ${n} minuto${n>1?"s":""}`:"hace unos segundos"})(e.updated_at)]})]}),(0,be.jsx)("div",{className:"mt-3 w-full bg-gray-200 rounded-full h-2",children:(0,be.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${d}%`}})}),(0,be.jsxs)("button",{onClick:()=>{e&&e.quiz_id&&i(`/quiz/${e.quiz_id}`)},className:"mt-4 w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-2.5 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors shadow-sm",children:["Continuar cuestionario",(0,be.jsx)(Ue.A,{className:"w-4 h-4"})]})]})]})})})},Er=()=>{const e=window.qe_data?.user?.name||"Estudiante",{getColor:t}=(0,se.DP)();return(0,be.jsxs)("div",{className:"p-6 space-y-8 min-h-full max-w-full",style:{backgroundColor:t("secondaryBackground","#ffffff")},children:[(0,be.jsx)("header",{children:(0,be.jsxs)("h1",{className:"text-4xl font-bold qe-text-primary",children:["Â¡Bienvenido de nuevo, ",e,"!"]})}),(0,be.jsxs)("main",{className:"space-y-8",children:[(0,be.jsx)(Sr,{}),(0,be.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,be.jsx)("div",{className:"lg:col-span-1 h-full min-h-[400px]",children:(0,be.jsx)(br,{})}),(0,be.jsx)("div",{className:"lg:col-span-1 h-full min-h-[400px]",children:(0,be.jsx)(kr,{})}),(0,be.jsx)("div",{className:"lg:col-span-1 h-full min-h-[400px]",children:(0,be.jsx)(fr,{})})]}),(0,be.jsx)(dr,{limitedView:!0})]})]})},Ar=e=>{const[t,n]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0),[a,i]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{if(e){o(!0),i(null);try{const t=`${(0,Ye.getApiConfig)().apiUrl}/quiz-extended/v1/quiz-attempts/${e}`;console.log(`ðŸš€ Fetching attempt details from: ${t}`);const r=await(0,Ke.qb)(t);if(!(r&&r.data&&r.data.success))throw new Error(r?.data?.data?.message||"La respuesta de la API no tuvo el formato esperado o fallÃ³.");n(r.data.data),console.log("âœ… Attempt details loaded successfully:",r.data.data)}catch(e){console.error("âŒ Error fetching attempt details:",e),i(e.message||"No se pudieron cargar los detalles del intento.")}finally{o(!1)}}else o(!1)},[e]);return(0,r.useEffect)(()=>{l()},[l]),{details:t,loading:s,error:a,refetch:l}},Mr=(0,le.A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var Tr=a(5899);const Pr=(0,le.A)("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),Or=(0,le.A)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),zr=(0,le.A)("bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);var qr=a(884);const Dr=async e=>{try{const t=`${(0,Ye.getApiConfig)().endpoints.custom_api}/favorite-questions/toggle`;console.log(`ðŸ”– Toggling favorite for question ID: ${e}`);const r=await(0,Ke.qb)(t,{method:"POST",body:JSON.stringify({question_id:e})});return console.log("âœ… Favorite toggled:",r.data),r.data.data}catch(t){throw console.error(`âŒ Error toggling favorite for question ID ${e}:`,t),t}};var Ir=a(5795),Lr=a.n(Ir);const Rr=(0,le.A)("message-square-warning",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}],["path",{d:"M12 15h.01",key:"q59x07"}],["path",{d:"M12 7v4",key:"xawao1"}]]),$r=e=>e?"string"==typeof e?e:"object"==typeof e&&e.rendered?e.rendered:"object"==typeof e&&e.raw?e.raw:String(e):null,Br=({question:e,initialFeedbackType:t="feedback",onClose:n,courseId:s=null,courseName:a=null})=>{const[i,l]=(0,r.useState)(t),[c,d]=(0,r.useState)(""),[u,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),{t:x}=(0,o.Bd)(),{getColor:y,isDarkMode:b}=(0,se.DP)(),v=y("primary","#3b82f6"),j=y("accent","#f59e0b"),w=b?y("secondaryBackground","#1f2937"):"#ffffff",N=b?"rgba(255,255,255,0.05)":`${v}05`,k=b?"rgba(255,255,255,0.1)":`${v}15`,C=b?y("textPrimary","#f9fafb"):v,_=y("textSecondary","#6b7280"),S=$r(e?.title),E=$r(a),A=(()=>{switch(i){case"challenge":return{icon:Te.A,iconColor:j,bgColor:`${j}15`,label:x("quizzes.feedbackModal.optionChallenge")};case"correction":return{icon:ie.A,iconColor:"#ef4444",bgColor:"rgba(239, 68, 68, 0.1)",label:x("quizzes.feedbackModal.optionCorrection")||"CorrecciÃ³n"};default:return{icon:Rr,iconColor:v,bgColor:`${v}15`,label:x("quizzes.feedbackModal.optionFeedback")}}})(),M=A.icon;return(0,Ir.createPortal)((0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 bg-black/60 z-[10000] backdrop-blur-sm",onClick:n}),(0,be.jsx)("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center px-4 py-10 pointer-events-none",children:(0,be.jsxs)("div",{className:"rounded-2xl shadow-2xl max-w-lg w-full max-h-[calc(100vh-5rem)] overflow-y-auto pointer-events-auto",style:{backgroundColor:w,border:`1px solid ${k}`},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-5 py-3",style:{background:b?`linear-gradient(135deg, ${v}20 0%, ${j}10 100%)`:`linear-gradient(135deg, ${v}10 0%, ${j}08 100%)`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:A.bgColor,border:`1px solid ${A.iconColor}30`},children:(0,be.jsx)(M,{size:18,style:{color:A.iconColor}})}),(0,be.jsx)("h3",{className:"text-base font-bold",style:{color:C},children:x("challenge"===i?"quizzes.feedbackModal.titleChallenge":"quizzes.feedbackModal.titleFeedback")})]}),(0,be.jsx)("button",{onClick:n,className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{color:_,backgroundColor:b?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=b?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=b?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},"aria-label":x("quizzes.feedbackModal.close"),children:(0,be.jsx)(xe.A,{size:20})})]}),h?(0,be.jsxs)("div",{className:"p-8 text-center",children:[(0,be.jsx)("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-5 shadow-lg",style:{background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)"},children:(0,be.jsx)(Oe.A,{size:40,style:{color:"#ffffff"}})}),(0,be.jsx)("h4",{className:"text-2xl font-bold mb-2",style:{color:C},children:x("quizzes.feedbackModal.successTitle")}),(0,be.jsx)("p",{className:"text-sm mb-6",style:{color:_},children:x("quizzes.feedbackModal.successMessage")}),(0,be.jsx)("button",{onClick:n,className:"px-8 py-3 rounded-xl font-semibold transition-all shadow-md",style:{background:`linear-gradient(135deg, ${v} 0%, ${v}dd 100%)`,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:x("quizzes.feedbackModal.close")})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"p-6 space-y-5",children:[S&&(0,be.jsxs)("div",{className:"p-4 rounded-xl",style:{backgroundColor:N,border:`1px solid ${k}`},children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:_},children:x("quizzes.feedbackModal.question")}),(0,be.jsx)("p",{className:"text-sm leading-relaxed",style:{color:C},dangerouslySetInnerHTML:{__html:S}})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-semibold mb-2",style:{color:C},children:x("quizzes.feedbackModal.messageType")}),(0,be.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["feedback","challenge"].map(e=>{const t=i===e,r="challenge"===e?{color:j,bg:`${j}15`}:{color:v,bg:`${v}15`};return(0,be.jsxs)("button",{type:"button",onClick:()=>l(e),className:"px-4 py-3 rounded-xl text-sm font-medium transition-all flex items-center justify-center gap-2",style:{backgroundColor:t?r.bg:N,color:t?r.color:_,border:`2px solid ${t?r.color:"transparent"}`},children:["challenge"===e&&(0,be.jsx)(Te.A,{size:16}),"feedback"===e&&(0,be.jsx)(Rr,{size:16}),"feedback"===e&&x("quizzes.feedbackModal.optionFeedback"),"challenge"===e&&x("quizzes.feedbackModal.optionChallenge")]},e)})})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-semibold mb-2",style:{color:C},children:x("quizzes.feedbackModal.yourMessage")}),(0,be.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),rows:5,maxLength:5e3,className:"w-full px-4 py-3 rounded-xl transition-all focus:outline-none resize-none",style:{backgroundColor:N,border:`2px solid ${k}`,color:C},onFocus:e=>{e.currentTarget.style.borderColor=v,e.currentTarget.style.boxShadow=`0 0 0 3px ${v}20`},onBlur:e=>{e.currentTarget.style.borderColor=k,e.currentTarget.style.boxShadow="none"},placeholder:x("challenge"===i?"quizzes.feedbackModal.placeholderChallenge":"quizzes.feedbackModal.placeholderFeedback")})]}),f&&(0,be.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl text-sm",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444"},children:[(0,be.jsx)(Te.A,{size:18}),(0,be.jsx)("span",{children:f})]})]}),(0,be.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t",style:{borderColor:k,backgroundColor:N},children:[(0,be.jsx)("button",{type:"button",onClick:n,className:"px-5 py-2.5 rounded-xl font-semibold transition-all duration-200",style:{color:_,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=b?"rgba(255,255,255,0.1)":`${v}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:x("quizzes.feedbackModal.cancel")}),(0,be.jsx)("button",{type:"submit",onClick:async t=>{if(t?.preventDefault?.(),c.trim()){p(!0),m(""),g(!1);try{const t=(E||s?`(Curso: ${E||`ID ${s}`}) `:"")+c.trim();await(async e=>{try{const{endpoints:t}=(0,Ye.getApiConfig)(),r=`${t.custom_api}/feedback/question`;console.log("ðŸ“¤ Enviando feedback de pregunta:",e);const n=await(0,Ke.qb)(r,{method:"POST",body:JSON.stringify(e)});return console.log("âœ… Feedback enviado exitosamente:",n.data),n.data.data}catch(e){throw console.error("âŒ Error al enviar el mensaje de feedback:",e),e}})({question_id:e.id,feedback_type:i,message:t,course_id:s||0}),g(!0),d("")}catch(e){m(e.message||x("quizzes.feedbackModal.errorSending"))}finally{p(!1)}}else m(x("quizzes.feedbackModal.errorEmptyMessage"))},disabled:u||!c.trim(),className:"px-6 py-2.5 rounded-xl font-semibold flex items-center gap-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",style:{background:`linear-gradient(135deg, ${v} 0%, ${v}dd 100%)`,color:"#ffffff"},onMouseEnter:e=>{!u&&c.trim()&&(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 15px rgba(0,0,0,0.15)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:u?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(et.A,{className:"animate-spin",size:18}),x("quizzes.feedbackModal.sending")]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ve.A,{size:18}),x("quizzes.feedbackModal.send")]})})]})]})]})})]}),document.querySelector(".qe-lms-app")||document.body)},Fr=({question:e,result:t,index:s,displayIndex:a,courseId:i=null,courseName:l=null})=>{const[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)("feedback"),[f,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),{t:x}=(0,o.Bd)(),{getColor:y,isDarkMode:b}=(0,se.DP)(),v=n().useMemo(()=>(0,qr.HB)(e),[e]);(0,r.useEffect)(()=>{v&&m(v.isFavorite)},[v]);const j=b?y("secondaryBackground","#1f2937"):"#ffffff",w=b?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",N=b?"rgba(255,255,255,0.2)":"#e5e7eb",k=b?"#f9fafb":"#1a202c",C=b?"#9ca3af":"#6b7280";if(!v||!t)return(0,be.jsxs)("div",{className:"p-4 border rounded-lg flex items-center",style:{backgroundColor:b?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderColor:b?"rgba(239, 68, 68, 0.3)":"#fecaca"},children:[(0,be.jsx)(Te.A,{className:"h-5 w-5 mr-3",style:{color:"#ef4444"}}),(0,be.jsx)("p",{className:"text-sm",style:{color:b?"#fca5a5":"#b91c1c"},children:x("quizzes.reviewedQuestion.errorInvalidData")})]});const{title:_,meta:S,fullExplanation:E}=v,A=S?._question_options||[],{answer_given:M,correct_answer:T,is_correct:P,is_risked:O,error_percentage:z,total_answers:q}=t,D="#22c55e",I="#ef4444",L=null==M?"unanswered":P?"correct":"incorrect",R=e=>{p(e),d(!0)};return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{id:`question-${a||e.id}`,className:"rounded-lg mb-4 shadow-sm scroll-mt-6 transition-all duration-200",style:{backgroundColor:j,border:`1px solid ${N}`},children:[(0,be.jsxs)("div",{className:"p-3 border-b flex items-center justify-between",style:{borderColor:N},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"w-7 h-7 rounded-full flex items-center justify-center font-bold text-xs",style:{backgroundColor:w,color:k},children:a||s+1}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:["correct"===L&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:D+"15",color:D},children:[(0,be.jsx)(Oe.A,{size:12,strokeWidth:2.5}),x("quizzes.reviewedQuestion.correct")]}),"incorrect"===L&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:I+"15",color:I},children:[(0,be.jsx)(lr.A,{size:12,strokeWidth:2.5}),x("quizzes.reviewedQuestion.incorrect")]}),"unanswered"===L&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-bold",style:{backgroundColor:"#6b728015",color:b?"#ffffff":y("primary","#1a202c")},children:[(0,be.jsx)(Or,{size:12,strokeWidth:2.5}),x("quizzes.reviewedQuestion.unanswered")]}),O&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-[10px] font-semibold",style:{backgroundColor:y("accent","#f59e0b")+"15",color:y("accent","#f59e0b")},children:[(0,be.jsx)(Te.A,{size:12,strokeWidth:2.5}),x("quizzes.reviewedQuestion.withRisk")]})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)("button",{onClick:async()=>{if(!h){console.log(`ðŸŽ¯ BEFORE Toggle - Question ${e.id}:`,{currentState:f,questionDataIsFavorite:e.is_favorite,formattedQuestionIsFavorite:v.isFavorite}),g(!0);try{const t=await Dr(e.id);console.log(`ðŸŽ¯ AFTER Toggle - Question ${e.id}:`,{response:t,apiReturned_is_favorited:t.is_favorited,previousLocalState:f,newLocalState:t.is_favorited,shouldBeOppositeOf:f,expectedNewState:!f}),m(t.is_favorited)}catch(t){console.error(`âŒ Error toggling favorite for question ${e.id}:`,t)}finally{g(!1)}}},disabled:h,className:"p-1.5 rounded-lg transition-all duration-200 disabled:opacity-50",style:{color:f?y("accent","#f59e0b"):C,backgroundColor:f?y("accent","#f59e0b")+"10":"transparent"},onMouseEnter:e=>{h||(e.currentTarget.style.backgroundColor=y("accent","#f59e0b")+"15")},onMouseLeave:e=>{h||(e.currentTarget.style.backgroundColor=f?y("accent","#f59e0b")+"10":"transparent")},title:x("quizzes.reviewedQuestion.markFavorite"),children:(0,be.jsx)(zr,{size:16,fill:f?"currentColor":"none",strokeWidth:2})}),(0,be.jsx)("button",{onClick:()=>R("feedback"),className:"p-1.5 rounded-lg transition-all duration-200",style:{color:C,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=b?"rgba(255,255,255,0.1)":y("primary","#1a202c")+"10",e.currentTarget.style.color=b?y("textPrimary","#f9fafb"):y("primary","#1a202c")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=C},title:x("quizzes.reviewedQuestion.addComment"),children:(0,be.jsx)(fe.A,{size:16,strokeWidth:2})}),(0,be.jsx)("button",{onClick:()=>R("challenge"),className:"p-1.5 rounded-lg transition-all duration-200",style:{color:C,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=y("error","#ef4444")+"10",e.currentTarget.style.color=y("error","#ef4444")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=C},title:x("quizzes.reviewedQuestion.challenge"),children:(0,be.jsx)(Te.A,{size:16,strokeWidth:2})})]})]}),(0,be.jsxs)("div",{className:"p-4",children:[(0,be.jsx)("h3",{className:"explanation-content text-sm font-medium mb-3 leading-relaxed",style:{color:k},dangerouslySetInnerHTML:{__html:_}}),(0,be.jsx)("div",{className:"space-y-2",children:A.map((e,t)=>{const r=(e=>{const t=e==T;return null!=M?t?O?{backgroundColor:j,borderColor:D,indicatorColor:D,textColor:k}:{backgroundColor:D+"15",borderColor:D,indicatorColor:D,textColor:k}:e!=M||P?{backgroundColor:j,borderColor:N,indicatorColor:C,textColor:k}:O?{backgroundColor:j,borderColor:I,indicatorColor:I,textColor:k}:{backgroundColor:I+"15",borderColor:I,indicatorColor:I,textColor:k}:t?{backgroundColor:j,borderColor:N,indicatorColor:D,textColor:k}:{backgroundColor:j,borderColor:N,indicatorColor:C,textColor:k}})(e.id),n=e.id==M,s=e.id==T;return(0,be.jsxs)("div",{className:"flex items-center gap-3 p-2.5 rounded-lg border-2 transition-all duration-200",style:{backgroundColor:r.backgroundColor,borderColor:r.borderColor},children:[(0,be.jsx)("div",{className:"flex-shrink-0",children:s?(0,be.jsx)(Oe.A,{size:18,strokeWidth:2.5,style:{color:r.indicatorColor}}):n?(0,be.jsx)(lr.A,{size:18,strokeWidth:2.5,style:{color:r.indicatorColor}}):(0,be.jsx)(Or,{size:18,strokeWidth:2,style:{color:r.borderColor}})}),(0,be.jsx)("div",{className:"flex-shrink-0 w-5 h-5 rounded flex items-center justify-center text-[10px] font-bold",style:{backgroundColor:r.indicatorColor+"20",color:r.indicatorColor},children:String.fromCharCode(65+t)}),(0,be.jsx)("span",{className:"text-sm font-medium flex-1",style:{color:r.textColor},children:e.text})]},e.id)})})]}),(0,be.jsx)("div",{className:"px-4 pb-3",children:(0,be.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-semibold",style:{backgroundColor:P?D:I,color:"#ffffff"},children:[P?(0,be.jsx)(Oe.A,{size:14,strokeWidth:2.5}):(0,be.jsx)(lr.A,{size:14,strokeWidth:2.5}),(0,be.jsxs)("span",{children:[x("quizzes.reviewedQuestion.correctAnswerIs")," ",(0,be.jsx)("span",{className:"font-bold",children:String.fromCharCode(65+A.findIndex(e=>e.id==T))})]})]})}),q>0&&(0,be.jsx)("div",{className:"px-4 py-2.5 text-xs font-bold border-t",style:{borderColor:N,color:C},children:x("quizzes.reviewedQuestion.failedBy",{percentage:z,total:q})}),E&&(0,be.jsx)("div",{className:"border-t",style:{borderColor:N},children:(0,be.jsxs)("div",{className:"px-4 py-3",children:[(0,be.jsx)("span",{className:"text-xs font-semibold block mb-2",style:{color:C},children:x("quizzes.reviewedQuestion.answerExplanation")}),(0,be.jsx)("div",{className:"rounded-lg p-3",style:{backgroundColor:w},children:(0,be.jsx)("div",{className:"explanation-content text-xs leading-relaxed",style:{color:b?"#ffffff":C},dangerouslySetInnerHTML:{__html:E}})})]})})]}),c&&(0,be.jsx)(Br,{question:e,initialFeedbackType:u,onClose:()=>d(!1),courseId:i,courseName:l})]})},Ur=({bgColor:e,borderColor:t,textColor:r,text:n})=>(0,be.jsx)("div",{className:"px-2.5 py-1.5 rounded-md text-xs font-semibold text-center border-2",style:{backgroundColor:e,borderColor:t,color:r},children:n}),Wr=({result:e,questions:t})=>{const{t:n}=(0,o.Bd)(),{getColor:s,isDarkMode:a}=(0,se.DP)(),i="#22c55e",l="#ef4444",c=a?"#ffffff":s("primary","#1a202c"),d=a?"#4b5563":"#9ca3af",u=a?"#ffffff":"#6b7280",p=a?s("textPrimary","#f9fafb"):s("primary","#1a202c"),f=a?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",{detailed_results:m}=e||{detailed_results:[]},h=t?t.map(e=>m.find(t=>t.question_id===e.id)).filter(Boolean):m,g=h?h.length:0,x=(0,r.useRef)(null),y=(0,r.useRef)(null),b=(0,r.useRef)(null),[v,j]=(0,r.useState)(28);return(0,r.useEffect)(()=>{const e=x.current;if(!e)return;const t=()=>{const t=y.current,r=b.current;if(!t)return;const n=window.innerHeight,{top:s}=e.getBoundingClientRect(),o=Math.max(100,n-s-8),a=t.offsetHeight,i=r?r.offsetHeight+6:20,l=Math.max(0,o-a-i-24),c=Math.ceil(g/10)||1,d=(l-4*(c-1))/c;j(Math.max(16,Math.min(28,Math.floor(d))))},r=new ResizeObserver(t);return r.observe(e),t(),window.addEventListener("resize",t),()=>{r.disconnect(),window.removeEventListener("resize",t)}},[g]),e?(0,be.jsx)("aside",{className:"w-full pr-4 pt-4",children:(0,be.jsxs)("div",{ref:x,className:"p-3 rounded-lg border-2 shadow-sm",style:{backgroundColor:s("secondaryBackground","#ffffff"),borderColor:a?s("accent","#f59e0b"):s("borderColor","#e5e7eb")},children:[(0,be.jsx)("div",{ref:y,className:"px-1 py-1.5 border-b mb-3",style:{borderColor:a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-1.5",children:[(0,be.jsx)(Ur,{bgColor:i,borderColor:i,textColor:"#ffffff",text:n("quizzes.resultsSidebar.legendCorrect")}),(0,be.jsx)(Ur,{bgColor:"transparent",borderColor:i,textColor:c,text:n("quizzes.resultsSidebar.legendRisking")}),(0,be.jsx)(Ur,{bgColor:l,borderColor:l,textColor:"#ffffff",text:n("quizzes.resultsSidebar.legendIncorrect")}),(0,be.jsx)(Ur,{bgColor:"transparent",borderColor:l,textColor:c,text:n("quizzes.resultsSidebar.legendRisking")})]})}),(0,be.jsxs)("div",{className:"px-1 py-1.5",children:[(0,be.jsx)("h4",{ref:b,className:"text-[10px] font-semibold mb-1.5",style:{color:p},children:n("quizzes.resultsSidebar.questionsMap")}),(0,be.jsx)("div",{className:"grid grid-cols-10 gap-1 rounded",style:{backgroundColor:f},children:h&&h.map((e,t)=>{let r,s,o,a;return null!==e.answer_given&&void 0!==e.answer_given?e.is_risked?(r="transparent",s=e.is_correct?i:l,o=c,a=e.is_correct?n("quizzes.resultsSidebar.questionCorrectWithRisk",{number:t+1}):n("quizzes.resultsSidebar.questionIncorrectWithRisk",{number:t+1})):(r=e.is_correct?i:l,s=e.is_correct?i:l,o="#ffffff",a=e.is_correct?n("quizzes.resultsSidebar.questionCorrect",{number:t+1}):n("quizzes.resultsSidebar.questionIncorrect",{number:t+1})):(r=d,s=u,o="#ffffff",a=n("quizzes.resultsSidebar.questionUnanswered",{number:t+1})),(0,be.jsx)("button",{onClick:()=>(e=>{const t=document.getElementById(`question-${e}`);t&&(t.style.scrollMarginTop="80px",t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),t.style.borderLeftWidth="8px",t.style.transition="border-left-width 0.3s ease",setTimeout(()=>{t.style.borderLeftWidth="4px"},2e3))})(t+1),className:"w-full rounded font-bold border-2 transition-all duration-150 flex items-center justify-center cursor-pointer hover:scale-110 hover:shadow-sm",style:{backgroundColor:r,borderColor:s,borderStyle:"solid",color:o,height:v,fontSize:Math.max(8,Math.floor(.42*v)),lineHeight:1},title:a,"aria-label":a,children:t+1},e.question_id)})})]})]})}):null},Hr=({result:e,quizTitle:t,questions:n,noPadding:s=!1,difficulty:a=null,onBack:i=null,courseId:l=null,courseName:c=null})=>{const{t:d}=(0,o.Bd)(),{formatScore:u}=qt(),{getColor:p,isDarkMode:f}=(0,se.DP)(),[m,h]=(0,r.useState)(!1),g="#10b981",x="#ef4444",y=f?"#9ca3af":"#6b7280",b=p("primary","#3b82f6"),v=p("accent","#f59e0b"),j={text:f?p("textPrimary","#f9fafb"):p("primary","#1a202c"),textMuted:f?"#ffffff":p("textSecondary","#6b7280"),accent:v,bg:f?p("secondaryBackground","#1f2937"):"#ffffff",border:f?v:`${b}20`};if(!e)return(0,be.jsx)("div",{className:"text-center p-8",style:{color:p("text","#6b7280")},children:d("quizzes.loadingResults")});const{detailed_results:w,score:N,score_with_risk:k}=e,C=w?.filter(e=>e.is_correct).length||0,_=w?.filter(e=>!e.is_correct&&null!==e.answer_given).length||0,S=w?.filter(e=>null===e.answer_given).length||0,E=w?.filter(e=>e.is_correct&&!e.is_risked).length||0,A=w?.filter(e=>!e.is_correct&&null!==e.answer_given&&!e.is_risked).length||0,M=w?.filter(e=>null===e.answer_given).length||0,T=w?.filter(e=>e.is_risked&&null!==e.answer_given).length||0,P=M+T;return(0,be.jsxs)("div",{className:"h-full flex flex-col relative overflow-hidden",style:{backgroundColor:p("secondaryBackground","#f3f4f6")},children:[m&&(0,be.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>h(!1)}),(0,be.jsx)("button",{onClick:()=>h(!0),className:"lg:hidden fixed bottom-14 right-6 z-50 p-4 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:p("primary","#3b82f6"),color:"#ffffff"},"aria-label":"Abrir resumen de resultados",children:(0,be.jsx)(ye,{className:"w-6 h-6"})}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden "+(s?"":"p-4"),children:(0,be.jsxs)("div",{className:"w-full max-w-screen-2xl mx-auto flex flex-col lg:flex-row-reverse gap-6",children:[(0,be.jsxs)("aside",{className:`\n            fixed lg:relative\n            top-0 right-0\n            h-full lg:h-auto\n            w-[360px] lg:w-[400px]\n            flex-shrink-0\n            transition-transform duration-300\n            z-50 lg:z-auto\n            ${m?"translate-x-0":"translate-x-full lg:translate-x-0"}\n          `,style:{backgroundColor:m?p("background","#ffffff"):"transparent"},children:[(0,be.jsxs)("div",{className:"lg:hidden flex items-center justify-between px-4 py-5 border-b",style:{borderColor:p("borderColor","#e5e7eb")},children:[(0,be.jsx)("h3",{className:"font-bold text-xl",style:{color:j.text},children:d("quizzes.results.summary")}),(0,be.jsx)("button",{onClick:()=>h(!1),className:"p-2 rounded-lg transition-colors",style:{color:j.text},children:(0,be.jsx)(xe.A,{className:"w-6 h-6"})})]}),(0,be.jsx)("div",{className:"hidden lg:block sticky top-4 overflow-y-auto max-h-[calc(100vh-2rem)]",children:(0,be.jsx)(Wr,{result:e,questions:n})}),(0,be.jsx)("div",{className:"lg:hidden overflow-y-auto h-[calc(100%-88px)] px-4 py-4",children:(0,be.jsx)(Wr,{result:e,questions:n})})]}),(0,be.jsxs)("main",{className:"flex-1 min-w-0 "+(s?"px-4 sm:px-6 lg:px-4 py-4 lg:py-4 pb-24 lg:pb-12":"px-4 lg:pr-4 py-4 lg:pb-8 pb-24"),children:[(i||a||e?.duration_seconds)&&(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4 "+(s?"mt-4":""),children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[i&&(0,be.jsx)("button",{onClick:i,className:"p-1.5 rounded-full transition-all",style:{backgroundColor:f?"rgba(255,255,255,0.1)":`${j.text}10`},title:d("common.back"),children:(0,be.jsx)(We.A,{size:20,style:{color:j.text}})}),a&&(()=>{const e={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"},t={easy:d("tests.difficultyEasy")||"FÃ¡cil",medium:d("tests.difficultyMedium")||"Medio",hard:d("tests.difficultyHard")||"DifÃ­cil"};return(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("span",{className:"text-sm",style:{color:j.textMuted},children:[d("quizzes.results.difficultyLevel"),":"]}),(0,be.jsxs)("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full",style:{backgroundColor:`${e[a]}15`},children:[(0,be.jsx)(Mr,{size:12,style:{color:e[a]}}),(0,be.jsx)("span",{className:"text-xs font-medium",style:{color:e[a]},children:t[a]})]})]})})()]}),e?.duration_seconds&&(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)($e.A,{size:14,style:{color:j.textMuted}}),(0,be.jsxs)("span",{className:"text-sm",style:{color:j.textMuted},children:[d("quizzes.results.timeSpent"),":"]}),(0,be.jsxs)("span",{className:"text-sm font-medium",style:{color:j.text},children:[Math.floor(e.duration_seconds/60),":",String(e.duration_seconds%60).padStart(2,"0")]})]})]}),(0,be.jsxs)("div",{className:"rounded-xl overflow-hidden border-2 mb-4 "+(s?"mt-4 lg:mt-0":""),style:{backgroundColor:j.bg,borderColor:j.border},children:[(0,be.jsxs)("div",{className:"px-4 py-2 flex items-center gap-2",style:{backgroundColor:f?"rgba(255,255,255,0.05)":`${b}08`},children:[(0,be.jsx)(Tr.A,{size:16,style:{color:f?j.accent:b}}),(0,be.jsx)("span",{className:"text-sm font-bold uppercase tracking-wide",style:{color:j.text},children:d("quizzes.results.summary")})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2",children:[(0,be.jsxs)("div",{className:"border-r p-3",style:{borderColor:"rgba(156, 163, 175, 0.2)"},children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2 text-center",style:{color:f?j.textMuted:b},children:d("quizzes.results.scoreWithoutRisk")}),(0,be.jsx)("div",{className:"rounded-lg py-2 px-3 mb-3 text-center",style:{backgroundColor:b},children:(0,be.jsx)("span",{className:"text-2xl font-bold",style:{color:"#ffffff"},children:u(N)})}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Oe.A,{size:14,style:{color:g}}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:g},children:d("quizzes.results.correct")})]}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:g},children:E})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Pr,{size:14,style:{color:y}}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:y},children:d("quizzes.results.unanswered")})]}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:y},children:P})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(lr.A,{size:14,style:{color:x}}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:x},children:d("quizzes.results.incorrect")})]}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:x},children:A})]})]})]}),(0,be.jsxs)("div",{className:"p-3",children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2 text-center",style:{color:f?j.textMuted:b},children:d("quizzes.results.scoreWithRisk")}),(0,be.jsx)("div",{className:"rounded-lg py-2 px-3 mb-3 text-center",style:{backgroundColor:j.accent},children:(0,be.jsx)("span",{className:"text-2xl font-bold",style:{color:"#ffffff"},children:u(k)})}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Oe.A,{size:14,style:{color:g}}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:g},children:d("quizzes.results.correct")})]}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:g},children:C})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Pr,{size:14,style:{color:y}}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:y},children:d("quizzes.results.unanswered")})]}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:y},children:S})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(lr.A,{size:14,style:{color:x}}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:x},children:d("quizzes.results.incorrect")})]}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:x},children:_})]})]})]})]})]}),w&&n?(0,be.jsx)("div",{className:"space-y-4 "+(s?"pb-6":""),children:n.map((e,t)=>(0,be.jsx)(Fr,{question:e,result:w.find(t=>t.question_id===e.id),displayIndex:t+1,courseId:l,courseName:c},e.id))}):(0,be.jsx)("p",{className:s?"pb-6":"",style:{color:p("text","#6b7280")},children:d("quizzes.noDetailedResults")})]})]})})]})};var Qr=a(232);const Vr=()=>{const{attemptId:e}=(0,re.g)(),t=(0,re.zy)(),r=(0,re.Zp)(),{details:n,loading:s,error:o}=Ar(e),a=t.state?.returnTo||"/",i=t.state?.courseId||null,l=t.state?.courseName||null,c=t.state?.lessonId||null,d=t.state?.lessonTitle||null;if(s)return(0,be.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,be.jsx)(et.A,{className:"animate-spin"})});if(o)return(0,be.jsx)("div",{className:"p-8 text-red-600 bg-red-50 rounded-md",children:o});if(!n)return(0,be.jsx)("div",{className:"p-8",children:"No se encontraron detalles para este intento."});const u={...n.attempt,detailed_results:n.detailed_results},p=n.attempt.quizTitle,f=n.questions;return(0,be.jsxs)("div",{className:"container mx-auto p-6",children:[(0,be.jsxs)(ct.A,{onClick:()=>{a&&"/"!==a&&t.state?.returnToQuiz?r(a,{state:{selectedQuizId:t.state.returnToQuiz,scrollToQuiz:!0}}):r(a&&"/"!==a?a:"/")},variant:"primary",className:"inline-flex items-center px-4 py-2 mb-6 text-sm font-medium rounded-lg shadow-sm",children:[(0,be.jsx)(Qr.A,{className:"w-4 h-4 mr-2"}),t.state?.fromQuizConfirmation?"Volver al Cuestionario":"Volver al Dashboard"]}),(0,be.jsx)(Hr,{result:u,quizTitle:p,questions:f,courseId:i,courseName:l,lessonId:c,lessonTitle:d})]})};var Yr=a(5404);const Kr=(0,le.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Gr=({course:e,onEdit:t,onDuplicate:n,onMoveLeft:s,onMoveRight:a,isFirst:i=!1,isLast:l=!1,isUpdating:c=!1,isDuplicating:d=!1})=>{const{t:u}=(0,o.Bd)(),{getColor:p,isDarkMode:f}=(0,se.DP)(),{id:m,title:h,_embedded:g}=e,x={text:f?p("textPrimary","#f9fafb"):p("primary","#1a202c"),textMuted:f?p("textSecondary","#9ca3af"):`${p("primary","#1a202c")}70`,primary:p("primary","#3b82f6"),accent:p("accent","#f59e0b"),cardBg:f?p("secondaryBackground","#1f2937"):p("background","#ffffff"),secondaryBg:p("secondaryBackground","#1f2937"),hoverBg:f?"rgba(255,255,255,0.05)":`${p("primary","#1a202c")}08`,borderColor:f?p("accent","#f59e0b"):p("primary","#3b82f6"),buttonBg:f?p("accent","#f59e0b"):p("primary","#3b82f6"),buttonText:f?p("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:f?p("primary","#3b82f6"):p("accent","#f59e0b")},{progress:y}=gr(m,!0,!0),b=g?.["wp:featuredmedia"]?.[0]?.source_url,v=h?.rendered||h||u("courses.title"),j=y?.percentage||0,w=y?.steps_by_type||{quiz:{total:0,completed:0},video:{total:0,completed:0},text:{total:0,completed:0},pdf:{total:0,completed:0}},N=(0,r.useMemo)(()=>{const e=[];(w.quiz?.total||0)>0&&e.push({type:"quiz",completed:w.quiz.completed,total:w.quiz.total,icon:ce,label:u("courses.test")});const t=(w.text?.total||0)+(w.pdf?.total||0);return t>0&&e.push({type:"material",completed:(w.text?.completed||0)+(w.pdf?.completed||0),total:t,icon:ie.A,label:u("courses.material")}),(w.video?.total||0)>0&&e.push({type:"video",completed:w.video.completed,total:w.video.total,icon:Me.A,label:u("courses.videos")}),e},[w,u]);return(0,be.jsxs)("div",{className:"rounded-lg shadow-sm overflow-hidden flex flex-col w-full max-w-sm transition-all duration-300 hover:shadow-lg relative",style:{backgroundColor:x.cardBg,border:`2px solid ${x.borderColor}`},children:[(t||n||s||a)&&(0,be.jsxs)("div",{className:"absolute top-2 right-2 z-10 flex gap-1",children:[s&&(0,be.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),i||c||d||s(e)},disabled:i||c||d,className:"p-2 rounded-lg backdrop-blur-sm transition-all duration-200 hover:scale-110 disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:"rgba(0,0,0,0.6)",color:"#ffffff"},title:"Mover antes",children:(0,be.jsx)(We.A,{size:16})}),a&&(0,be.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),l||c||d||a(e)},disabled:l||c||d,className:"p-2 rounded-lg backdrop-blur-sm transition-all duration-200 hover:scale-110 disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:"rgba(0,0,0,0.6)",color:"#ffffff"},title:"Mover despuÃ©s",children:(0,be.jsx)(ur.A,{size:16})}),n&&(0,be.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),d||c||n(e)},disabled:d||c,className:"p-2 rounded-lg backdrop-blur-sm transition-all duration-200 hover:scale-110 disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:d?"rgba(245,158,11,0.8)":"rgba(0,0,0,0.6)",color:"#ffffff"},title:d?"Duplicando...":"Duplicar curso completo",children:(0,be.jsx)(Yr.A,{size:16,className:d?"animate-pulse":""})}),t&&(0,be.jsx)("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),d||c||t(e)},disabled:d||c,className:"p-2 rounded-lg backdrop-blur-sm transition-all duration-200 hover:scale-110 disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:"rgba(0,0,0,0.6)",color:"#ffffff"},title:u("common.edit"),children:(0,be.jsx)(Kr,{size:16})})]}),b?(0,be.jsx)("div",{className:"aspect-square bg-cover bg-center",style:{backgroundImage:`url(${b})`}}):(0,be.jsx)("div",{className:"aspect-square flex items-center justify-center",style:{backgroundColor:x.primary},children:(0,be.jsx)(ae.A,{className:"w-20 h-20 text-white opacity-50"})}),(0,be.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,be.jsxs)("div",{className:"p-4 pb-0",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:x.textMuted},children:u("courses.progress")}),(0,be.jsxs)("span",{className:"text-lg font-bold",style:{color:x.text},children:[j,"%"]})]}),(0,be.jsx)("div",{className:"rounded-full h-3 overflow-hidden",style:{backgroundColor:f?"rgba(255,255,255,0.1)":`${x.primary}15`},children:(0,be.jsx)("div",{className:"h-full transition-all duration-500 rounded-full",style:{width:`${j}%`,backgroundColor:x.primary}})})]}),N.length>0&&(0,be.jsx)("div",{className:"mt-4 overflow-hidden",style:{borderTop:"2px solid "+(f?"rgba(255,255,255,0.1)":`${x.primary}15`),borderBottom:"2px solid "+(f?"rgba(255,255,255,0.1)":`${x.primary}15`)},children:(0,be.jsx)("div",{className:"grid h-full",style:{gridTemplateColumns:`repeat(${N.length}, 1fr)`,minHeight:"80px"},children:N.map((e,t)=>(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center py-3 transition-all duration-200 "+(t<N.length-1?"border-r":""),style:{borderColor:f?"rgba(255,255,255,0.1)":`${x.primary}15`,backgroundColor:"transparent"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=x.hoverBg,onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,be.jsx)(e.icon,{size:20,style:{color:x.text},className:"mb-1"}),(0,be.jsxs)("span",{className:"text-xs font-bold",style:{color:x.text},children:[e.completed,"/",e.total]}),(0,be.jsx)("span",{className:"text-xs mt-0.5",style:{color:x.textMuted},children:e.label})]},e.type))})}),(0,be.jsx)("div",{className:"flex-1"}),(0,be.jsx)("div",{className:"p-4 pt-4",children:(0,be.jsx)(re.N_,{to:`/courses/${m}/dashboard`,state:{courseName:v},className:"block w-full py-3 px-4 text-center text-base font-semibold rounded-lg transition-all shadow-sm hover:shadow-md",style:{backgroundColor:x.buttonBg,color:x.buttonText},onMouseEnter:e=>{f?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=x.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=x.buttonBg},children:(0,be.jsx)("span",{dangerouslySetInnerHTML:{__html:v}})})})]})]})};var Xr=a(8723),Jr=a(9612);const Zr=({isOpen:e,courseId:t,mode:n="create",onSave:s,onClose:a,onDelete:i,getCourse:l})=>{const{t:c}=(0,o.Bd)(),{getColor:d,isDarkMode:u}=(0,se.DP)(),p=(0,r.useMemo)(()=>({text:u?d("textPrimary","#f9fafb"):d("primary","#1a202c"),textMuted:u?d("textSecondary","#9ca3af"):"#6b7280",accent:d("accent","#f59e0b"),bgCard:u?d("secondaryBackground","#1f2937"):"#ffffff",bg:u?d("background","#0f172a"):"#f9fafb",border:u?"#374151":"#e5e7eb",inputBg:u?"#1f2937":"#ffffff",inputBorder:u?"#374151":"#d1d5db"}),[d,u]),[f,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)(!1),[x,y]=(0,r.useState)(null),[b,v]=(0,r.useState)({title:"",content:"",status:"publish",featured_media:null,featured_image_url:null,_course_position:0});(0,r.useEffect)(()=>{e&&("edit"===n&&t?(async()=>{m(!0),y(null);try{const e=await l(t);e&&v({title:e.title?.rendered||e.title||"",content:e.content?.rendered||e.content||"",status:e.status||"publish",featured_media:e.featured_media||null,featured_image_url:e._embedded?.["wp:featuredmedia"]?.[0]?.source_url||null,_course_position:parseInt(e.meta?._course_position)||0})}catch(e){console.error("Error loading course:",e),y("No se pudo cargar el curso")}finally{m(!1)}})():(v({title:"",content:"",status:"publish",featured_media:null,featured_image_url:null,_course_position:0}),y(null),m(!1)))},[e,n,t,l]);const j=(e,t)=>{v(r=>({...r,[e]:t}))},w=async e=>{if(e.preventDefault(),b.title.trim()){g(!0),y(null);try{const e={title:b.title,content:b.content,status:b.status,featured_media:b.featured_media,meta:{_course_position:b._course_position}};await s(e),a()}catch(e){console.error("Error saving course:",e),y(e.message||"Error al guardar el curso")}finally{g(!1)}}else y("El tÃ­tulo es obligatorio")};return e?(0,be.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4",children:(0,be.jsxs)("div",{className:"relative w-full max-w-5xl max-h-[85vh] rounded-xl shadow-2xl overflow-hidden flex flex-col transition-all",style:{backgroundColor:p.bg},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{borderColor:p.border,backgroundColor:p.bgCard},children:[(0,be.jsx)("h2",{className:"text-base font-bold",style:{color:p.text},children:"create"===n?"Nuevo Curso":"Editar Curso"}),(0,be.jsx)("button",{onClick:a,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",style:{color:p.textMuted},children:(0,be.jsx)(xe.A,{size:18})})]}),(0,be.jsx)("form",{onSubmit:w,className:"flex-1 overflow-y-auto p-4",children:f?(0,be.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,be.jsx)(Xr.A,{className:"animate-spin",size:28,style:{color:p.accent}})}):(0,be.jsxs)(be.Fragment,{children:[x&&(0,be.jsxs)("div",{className:"mb-3 p-2.5 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-start gap-2",children:[(0,be.jsx)(tt.A,{size:16,className:"text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),(0,be.jsx)("p",{className:"text-xs text-red-600 dark:text-red-400",children:x})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-xs font-bold uppercase mb-1.5",style:{color:p.text},children:"TÃ­tulo del Curso *"}),(0,be.jsx)("input",{type:"text",value:b.title,onChange:e=>j("title",e.target.value),placeholder:"Ej: MatemÃ¡ticas Avanzadas",className:"w-full p-2.5 rounded-lg text-sm focus:ring-2 focus:ring-amber-500/20 outline-none transition-all",style:{border:`1px solid ${p.inputBorder}`,backgroundColor:p.inputBg,color:p.text},required:!0})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-xs font-bold uppercase mb-1.5",style:{color:p.text},children:"Estado"}),(0,be.jsxs)("select",{value:b.status,onChange:e=>j("status",e.target.value),className:"w-full p-2.5 rounded-lg text-sm outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{border:`1px solid ${p.inputBorder}`,backgroundColor:p.inputBg,color:p.text},children:[(0,be.jsx)("option",{value:"publish",children:"Publicado"}),(0,be.jsx)("option",{value:"draft",children:"Borrador"}),(0,be.jsx)("option",{value:"private",children:"Privado"})]})]}),(0,be.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-xs font-bold uppercase mb-1.5",style:{color:p.text},children:"Imagen Destacada"}),b.featured_image_url?(0,be.jsxs)("div",{className:"relative group",children:[(0,be.jsx)("img",{src:b.featured_image_url,alt:"Featured",className:"w-full h-32 object-cover rounded-lg"}),(0,be.jsx)("button",{type:"button",onClick:()=>{v(e=>({...e,featured_media:null,featured_image_url:null}))},className:"absolute top-1.5 right-1.5 p-1.5 rounded-full bg-red-500 text-white opacity-0 group-hover:opacity-100 transition-opacity",children:(0,be.jsx)(pr.A,{size:14})})]}):(0,be.jsxs)("button",{type:"button",onClick:async()=>{try{const e=await(0,it.I)({title:"Seleccionar Imagen Destacada",buttonText:"Usar esta imagen"});if(!e)return;if(e&&e.id&&e.url){const t=parseInt(e.id,10);v(r=>({...r,featured_media:t,featured_image_url:e.url}))}}catch(e){console.error("Error al seleccionar imagen:",e)}},className:"w-full h-32 rounded-lg border border-dashed flex flex-col items-center justify-center gap-1.5 hover:border-amber-500 transition-colors",style:{borderColor:p.border,color:p.textMuted},children:[(0,be.jsx)(Jr.A,{size:24}),(0,be.jsx)("span",{className:"text-xs font-medium",children:"Seleccionar imagen"})]})]}),(0,be.jsxs)("div",{className:"flex flex-col",children:[(0,be.jsx)("label",{className:"block text-xs font-bold uppercase mb-1.5",style:{color:p.text},children:"DescripciÃ³n"}),(0,be.jsx)("div",{className:"flex-1",children:(0,be.jsx)(st(),{theme:"snow",value:b.content,onChange:e=>j("content",e),style:{height:"100px",fontSize:"13px"},modules:{toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link"]]}})})]})]})]})]})}),(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-t",style:{borderColor:p.border,backgroundColor:p.bgCard},children:[(0,be.jsx)("div",{children:"edit"===n&&i&&(0,be.jsxs)("button",{type:"button",onClick:async()=>{if(window.confirm("Â¿EstÃ¡s seguro de que quieres eliminar este curso?"))try{await i(t),a()}catch(e){console.error("Error deleting course:",e),y("Error al eliminar el curso")}},className:"px-3 py-1.5 rounded-lg text-xs font-medium text-white bg-red-500 hover:bg-red-600 transition-colors",children:[(0,be.jsx)(pr.A,{size:14,className:"inline mr-1.5"}),"Eliminar"]})}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("button",{type:"button",onClick:a,className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",style:{color:p.text,border:`1px solid ${p.border}`,backgroundColor:"transparent"},children:"Cancelar"}),(0,be.jsx)("button",{onClick:w,disabled:h,className:"px-3 py-1.5 rounded-lg text-xs font-medium text-white transition-all hover:opacity-90 disabled:opacity-50",style:{backgroundColor:p.accent},children:h?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Xr.A,{size:14,className:"inline animate-spin mr-1.5"}),"Guardando..."]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Mt.A,{size:14,className:"inline mr-1.5"}),"create"===n?"Crear Curso":"Guardar Cambios"]})})]})]})]})}):null},en=({icon:e,title:t,message:r,colors:n})=>(0,be.jsxs)("div",{className:"text-center py-16",children:[(0,be.jsx)(e,{className:"mx-auto h-12 w-12",style:{color:n?.textMuted||"#9ca3af"}}),(0,be.jsx)("h3",{className:"mt-2 text-lg font-semibold",style:{color:n?.text||"#111827"},children:t}),(0,be.jsx)("p",{className:"mt-1 text-sm",style:{color:n?.textMuted||"#6b7280"},children:r})]}),tn=()=>{const{t:e}=(0,o.Bd)(),{getColor:t,isDarkMode:n,toggleDarkMode:s}=(0,se.DP)(),a=xr(),{isMobileMenuOpen:i,setIsMobileMenuOpen:l}=(0,re.KC)(),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),[f,m]=(0,r.useState)(null),h=window.qe_data?.home_url||"",g=window.qe_data?.logout_url,[x,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(null),[j,w]=(0,r.useState)("view"),[N,k]=(0,r.useState)(null),C={text:n?t("textPrimary","#f9fafb"):t("primary","#1a202c"),textMuted:n?t("textSecondary","#9ca3af"):`${t("primary","#1a202c")}70`,accent:t("accent","#f59e0b"),primary:t("primary","#3b82f6"),hoverBg:n?t("accent","#f59e0b"):t("primary","#1a202c")},_=(0,yt.A)({autoFetch:!0,embed:!0,status:a?"publish,draft,private":"publish",enrolledOnly:!a}),{courses:S,loading:E,error:A}=_;(0,r.useEffect)(()=>{S&&!E&&k(null)},[S,E]),(0,r.useEffect)(()=>{if(f){const e=setTimeout(()=>{m(null)},5e3);return()=>clearTimeout(e)}},[f]);const M=(0,r.useMemo)(()=>{const e=N||S;return e&&0!==e.length?[...e].sort((e,t)=>{const r=parseInt(e.menu_order)||0,n=parseInt(t.menu_order)||0;if(r!==n)return r-n;const s=(e.title?.rendered||e.title||"").toLowerCase(),o=(t.title?.rendered||t.title||"").toLowerCase();return s.localeCompare(o)}):[]},[S,N]),T=e=>{v(e.id),w("edit"),y(!0)},P=()=>{y(!1),setTimeout(()=>{v(null),w("view"),k(null)},300)},O=async e=>{if(!u&&window.confirm(`Â¿Duplicar el curso "${e.title?.rendered||e.title}"?\n\nSe duplicarÃ¡ TODO el contenido:\nâœ“ Lecciones\nâœ“ Cuestionarios\nâœ“ Preguntas\nâœ“ PDFs y materiales\n\nâœ— NO se duplicarÃ¡n usuarios ni progreso`)){p(e.id),m(null);try{const t=await Vt.duplicateDeep(e.id);m({type:"success",message:`Curso duplicado exitosamente: ${t.lessons_count} lecciones, ${t.quizzes_count} cuestionarios`}),k(null),_.refresh()}catch(e){console.error("Error duplicating course:",e),m({type:"error",message:`Error al duplicar el curso: ${e.message}`})}finally{p(null)}}},z=async e=>{if(c)return;const t=M.findIndex(t=>t.id===e.id);if(t<=0)return;d(!0);const r=M[t-1],n=t-1,s=t,o=M.map(t=>t.id===e.id?{...t,menu_order:n}:t.id===r.id?{...t,menu_order:s}:t);k(o);try{await Vt.batchUpdateOrders([{id:e.id,menu_order:n},{id:r.id,menu_order:s}])}catch(e){console.error("Error updating order:",e),k(null)}finally{d(!1)}},q=async e=>{if(c)return;const t=M.findIndex(t=>t.id===e.id);if(t>=M.length-1)return;d(!0);const r=M[t+1],n=t+1,s=t,o=M.map(t=>t.id===e.id?{...t,menu_order:n}:t.id===r.id?{...t,menu_order:s}:t);k(o);try{await Vt.batchUpdateOrders([{id:e.id,menu_order:n},{id:r.id,menu_order:s}])}catch(e){console.error("Error updating order:",e),k(null)}finally{d(!1)}},D=[{to:"/courses",text:e("sidebar.studyPlanner"),icon:ae.A,type:"internal"},{to:"/books",text:e("sidebar.books"),icon:ue.A,type:"internal"},{to:h,text:e("sidebar.exitCampus"),icon:$t,type:"exit"}];return(0,be.jsxs)("div",{className:"h-full w-full overflow-y-auto p-6",style:{backgroundColor:t("secondaryBackground","#f3f4f6")},children:[i&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>l(!1)}),(0,be.jsxs)("div",{className:"fixed top-0 right-0 h-full w-80 z-50 shadow-2xl overflow-y-auto",style:{backgroundColor:t("background","#ffffff")},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b",style:{borderColor:n?"rgba(255,255,255,0.1)":t("borderColor","#e5e7eb")},children:[(0,be.jsx)("h2",{className:"text-xl font-bold",style:{color:C.text},children:e("sidebar.menu")}),(0,be.jsx)("button",{onClick:()=>l(!1),className:"p-2 rounded-lg transition-colors",style:{color:C.text},children:(0,be.jsx)(xe.A,{className:"w-6 h-6"})})]}),(0,be.jsxs)("nav",{className:"p-4 space-y-2",children:[D.map(e=>"exit"===e.type?(0,be.jsxs)("a",{href:e.to,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:C.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${C.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e.text})]},e.to):"external"===e.type?(0,be.jsxs)("a",{href:e.to,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:C.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${C.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e.text})]},e.to):(0,be.jsxs)(re.k2,{to:e.to,end:!0,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:({isActive:e})=>({backgroundColor:e?C.primary:"transparent",color:e?"#ffffff":C.text}),onMouseEnter:e=>{"page"===e.currentTarget.getAttribute("aria-current")||(e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${C.primary}10`)},onMouseLeave:e=>{"page"===e.currentTarget.getAttribute("aria-current")||(e.currentTarget.style.backgroundColor="transparent")},onClick:()=>l(!1),children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e.text})]},e.to)),(0,be.jsx)("div",{className:"my-4",style:{height:"1px",backgroundColor:n?"rgba(255,255,255,0.1)":t("borderColor","#e5e7eb")}}),(0,be.jsxs)("button",{onClick:s,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:C.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${C.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[n?(0,be.jsx)(he.A,{className:"w-5 h-5"}):(0,be.jsx)(ge.A,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e(n?"sidebar.lightMode":"sidebar.darkMode")})]}),(0,be.jsxs)("a",{href:`${h}/mi-cuenta/edit-account/`,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:C.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${C.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(Fe.A,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e("sidebar.myAccount")})]}),g&&(0,be.jsxs)("a",{href:g,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:C.primary,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=C.accent},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=C.primary},children:[(0,be.jsx)(Wt,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e("sidebar.logout")})]})]})]})]}),(0,be.jsxs)("main",{children:[a&&(0,be.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4 rounded-2xl p-5",style:{backgroundColor:t("background","#ffffff"),border:`1px solid ${n?"rgba(255,255,255,0.08)":t("borderColor","#e5e7eb")}`},children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-3",style:{color:C.text},children:[(0,be.jsx)(ae.A,{className:"w-8 h-8",style:{color:C.accent}}),e("courses.title")]}),(0,be.jsx)("p",{className:"mt-1 text-sm",style:{color:C.textMuted},children:"Gestiona los cursos disponibles en la plataforma"})]}),(0,be.jsxs)("button",{onClick:()=>{v(null),w("create"),y(!0)},className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:-translate-y-0.5",style:{backgroundColor:C.accent,color:"#ffffff",boxShadow:`0 4px 10px ${C.accent}30`},children:[(0,be.jsx)(Ie.A,{size:18}),(0,be.jsx)("span",{children:"Nuevo Curso"})]})]}),E&&0===M.length?(0,be.jsx)(en,{icon:et.A,title:e("courses.loadingCourses"),message:e("common.processing"),colors:C}):A?(0,be.jsx)(en,{icon:Te.A,title:e("notifications.error"),message:A,colors:C}):M&&0!==M.length?(0,be.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:M.map((e,t)=>(0,be.jsx)("div",{className:"w-full flex justify-center",children:(0,be.jsx)(Gr,{course:e,onEdit:a?T:null,onDuplicate:a?O:null,onMoveLeft:a?z:null,onMoveRight:a?q:null,isFirst:0===t,isLast:t===M.length-1,isUpdating:c,isDuplicating:u===e.id})},e.id))}):(0,be.jsx)(en,{icon:qe,title:e("courses.noCourses"),message:e("courses.noCoursesDescription"),colors:C})]}),a&&(0,be.jsx)(Zr,{isOpen:x,courseId:b,mode:j,onSave:async e=>{try{"create"===j?await _.createCourse(e):await _.updateCourse(b,e),k(null),_.refresh(),P()}catch(e){throw console.error("Error saving course:",e),e}},onClose:P,onDelete:async e=>{try{await _.deleteCourse(e),k(null),_.refresh(),P()}catch(e){throw console.error("Error deleting course:",e),e}},getCourse:e=>{const t=N||S||[];return Promise.resolve(t.find(t=>t.id===e))}}),f&&(0,be.jsxs)("div",{className:"fixed bottom-6 right-6 z-50 max-w-md rounded-lg shadow-2xl p-4 flex items-start gap-3 animate-slideInRight",style:{backgroundColor:"success"===f.type?t("accent","#10b981"):"#ef4444",border:"2px solid "+("success"===f.type?"#059669":"#dc2626")},children:["success"===f.type?(0,be.jsx)(Oe.A,{className:"w-6 h-6 flex-shrink-0",style:{color:"#ffffff"}}):(0,be.jsx)(lr.A,{className:"w-6 h-6 flex-shrink-0",style:{color:"#ffffff"}}),(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("p",{className:"font-semibold text-white text-sm",children:"success"===f.type?"DuplicaciÃ³n Exitosa":"Error en DuplicaciÃ³n"}),(0,be.jsx)("p",{className:"text-white text-xs mt-1 opacity-90",children:f.message})]}),(0,be.jsx)("button",{onClick:()=>m(null),className:"text-white hover:bg-white hover:bg-opacity-20 rounded p-1 transition-colors",children:(0,be.jsx)(xe.A,{size:16})})]})]})},rn=()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found");return e},nn=({autoFetch:e=!0}={})=>{const[t,n]=(0,r.useState)([]),[s,o]=(0,r.useState)(!1),[a,i]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{o(!0),i(null);try{const e=await(async()=>{const e=`${rn().api_url||""}/quiz-extended/v1/books/my-books`;console.log("ðŸ“š Fetching user books:",e);const t=await(async(e,t={})=>{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":rn().nonce},credentials:"same-origin",...t},n=await fetch(e,r);if(!n.ok){const e=await n.text();throw new Error(`API Error ${n.status}: ${e}`)}return n.json()})(e);return t.success&&t.data?t.data.data||t.data:t.data||t||[]})();n(Array.isArray(e)?e:[])}catch(e){console.error("ðŸ“š Error fetching user books:",e),i(e.message||"Error loading books"),n([])}finally{o(!1)}},[]),c=(0,r.useCallback)(()=>{l()},[l]);return(0,r.useEffect)(()=>{e&&l()},[e,l]),{books:t,loading:s,error:a,refresh:c,fetchBooks:l,hasBooks:t.length>0}};var sn=a(6444),on=a(8309);const an=(0,le.A)("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),ln=(0,le.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),cn=({book:e,onClose:t,colors:r})=>{const{t:n}=(0,o.Bd)(),s=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString()}catch(e){return""}},a=e.pdf&&e.pdf.url;return(0,be.jsx)("div",{className:"fixed inset-0 z-[100000] flex items-center justify-center p-4 bg-black/50",onClick:t,children:(0,be.jsxs)("div",{className:"relative w-full max-w-lg rounded-xl shadow-2xl max-h-[80vh] flex flex-col overflow-hidden animate-in zoom-in duration-200",style:{backgroundColor:r.cardBg},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",style:{borderColor:r.disabledBg},children:[(0,be.jsx)("h3",{className:"font-bold text-lg",style:{color:r.text},children:n("books.downloads","Descargas Disponibles")}),(0,be.jsx)("button",{onClick:t,className:"p-1.5 rounded-full transition-colors hover:brightness-110",style:{backgroundColor:r.primary,color:"#ffffff"},children:(0,be.jsx)(xe.A,{size:20})})]}),(0,be.jsxs)("div",{className:"overflow-y-auto p-4 space-y-3",children:[a&&(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-2",style:{color:r.textMuted},children:n("books.fullVersion","Libro Completo")}),(0,be.jsxs)("a",{href:e.pdf.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg border transition-colors hover:bg-blue-50/10 group",style:{borderColor:r.borderColor},children:[(0,be.jsx)("div",{className:"text-red-500",children:(0,be.jsx)(ie.A,{size:24})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("p",{className:"font-medium truncate",style:{color:r.text},children:e.pdf.filename||e.title}),(0,be.jsx)("span",{className:"text-xs",style:{color:r.textMuted},children:n("books.fullPdf","PDF Completo")})]}),(0,be.jsx)(on.A,{size:18,style:{color:r.primary}})]})]}),(0,be.jsxs)("div",{children:[a&&(0,be.jsx)("h4",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:r.textMuted},children:n("books.updates","Actualizaciones")}),(0,be.jsx)("div",{className:"space-y-1",children:e.chapters.map(e=>(0,be.jsxs)("a",{href:e.pdf?.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 rounded-lg transition-colors hover:bg-black/5 dark:hover:bg-white/5 group",children:[(0,be.jsx)("div",{className:"flex items-center justify-center w-5 h-5 text-gray-400",children:(0,be.jsx)(an,{size:20,style:{color:r.textMuted}})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-2 h-5",children:[(0,be.jsx)("p",{className:"font-medium text-sm truncate leading-tight flex items-center mb-0",style:{color:r.text},children:e.title}),e.date_added&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 text-xs shrink-0",style:{color:r.textMuted},children:[(0,be.jsx)(sr.A,{size:12}),(0,be.jsx)("span",{children:s(e.date_added)})]})]}),(0,be.jsx)("div",{className:"p-1.5 rounded-full bg-blue-50 dark:bg-blue-900/30 text-blue-500",children:(0,be.jsx)(on.A,{size:14})})]},e.id))})]})]})]})})},dn=({book:e,isAdmin:t,onEdit:n})=>{const{t:s}=(0,o.Bd)(),{getColor:a,isDarkMode:i}=(0,se.DP)(),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),{id:p,title:f,description:m,featured_image_url:h,pdf:g,chapters:x,start_date:y,end_date:b,meta:v}=e,j=g?.url,w=x&&x.length>0,N=y||v?._book_start_date,k=b||v?._book_end_date,C=new Date,_=N?new Date(N):null,S=k?new Date(k):null,E=_&&!Number.isNaN(_.getTime())&&C<_,A=S&&!Number.isNaN(S.getTime())&&C>S,M=w,T=j||w,P=e=>{if(!e)return"";try{return new Date(e).toLocaleDateString()}catch(e){return""}},O={text:i?a("textPrimary","#f9fafb"):a("primary","#1a202c"),textMuted:i?a("textSecondary","#9ca3af"):`${a("primary","#1a202c")}70`,primary:a("primary","#3b82f6"),accent:a("accent","#f59e0b"),cardBg:i?a("secondaryBackground","#1f2937"):a("background","#ffffff"),borderColor:i?a("accent","#f59e0b"):a("primary","#3b82f6"),buttonBg:i?a("accent","#f59e0b"):a("primary","#3b82f6"),buttonText:i?a("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:i?a("primary","#3b82f6"):a("accent","#f59e0b"),disabledBg:i?"rgba(255,255,255,0.1)":"#e5e7eb",disabledText:i?"rgba(255,255,255,0.3)":"#9ca3af"};return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"rounded-lg shadow-sm overflow-hidden flex flex-col w-full max-w-sm transition-all duration-300 hover:shadow-lg",style:{backgroundColor:O.cardBg,border:`2px solid ${O.borderColor}`},children:[(0,be.jsxs)("div",{className:"relative",children:[h?(0,be.jsx)("div",{className:"aspect-square bg-cover bg-center",style:{backgroundImage:`url(${h})`}}):(0,be.jsx)("div",{className:"aspect-square flex items-center justify-center",style:{backgroundColor:O.primary},children:(0,be.jsx)(ue.A,{className:"w-20 h-20 text-white opacity-50"})}),t&&n&&(0,be.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),n(e)},className:"absolute top-2 right-2 p-2 rounded-full shadow-lg transition-transform hover:scale-110 z-10",style:{backgroundColor:O.accent,color:"#ffffff"},title:s("common.edit"),children:(0,be.jsx)(ln,{size:16})}),t&&(E||A)&&(0,be.jsx)("div",{className:"absolute top-2 left-2 px-2 py-1 rounded-full text-xs font-semibold",style:{backgroundColor:O.primary,color:"#ffffff"},title:E?"No iniciado":"Finalizado",children:E?"No iniciado":"Finalizado"})]}),(0,be.jsxs)("div",{className:"flex flex-col flex-1 p-4",children:[(0,be.jsx)("h3",{className:"text-lg font-bold mb-4 line-clamp-2",style:{color:O.text},dangerouslySetInnerHTML:{__html:f}}),(N||k)&&(0,be.jsxs)("div",{className:"text-xs mb-3",style:{color:O.textMuted},children:[N&&(0,be.jsxs)("span",{children:[s("books.startDate","Fecha de inicio"),": ",P(N)]}),N&&k&&(0,be.jsx)("span",{children:" Â· "}),k&&(0,be.jsxs)("span",{children:[s("books.endDate","Fecha de fin"),": ",P(k)]})]}),(0,be.jsx)("div",{className:"flex-1"}),(0,be.jsx)("button",{onClick:async()=>{if(T&&!l)if(M)u(!0);else{c(!0);try{window.open(j,"_blank")}catch(e){console.error("ðŸ“š Error downloading book:",e)}finally{setTimeout(()=>c(!1),1e3)}}},disabled:!T||l,className:"w-full py-3 px-4 flex items-center justify-center gap-2 text-base font-semibold rounded-lg transition-all shadow-sm hover:shadow-md disabled:cursor-not-allowed disabled:hover:shadow-sm",style:{backgroundColor:T?O.buttonBg:O.disabledBg,color:T?O.buttonText:O.disabledText},onMouseEnter:e=>{T&&!l&&(i?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=O.buttonHoverBg)},onMouseLeave:e=>{e.currentTarget.style.filter="none",T&&(e.currentTarget.style.backgroundColor=O.buttonBg)},children:l?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(et.A,{className:"w-5 h-5 animate-spin"}),s("books.downloading")]}):M?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(an,{className:"w-5 h-5"}),s("books.viewChapters","Ver Actualizaciones")]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(on.A,{className:"w-5 h-5"}),s(j?"books.download":"books.noDownload")]})})]})]}),d&&(0,be.jsx)(cn,{book:e,onClose:()=>u(!1),colors:O})]})};var un=a(6335);const pn=({icon:e,title:t,message:r,colors:n})=>(0,be.jsxs)("div",{className:"text-center py-16",children:[(0,be.jsx)(e,{className:"mx-auto h-12 w-12",style:{color:n?.textMuted||"#9ca3af"}}),(0,be.jsx)("h3",{className:"mt-2 text-lg font-semibold",style:{color:n?.text||"#111827"},children:t}),(0,be.jsx)("p",{className:"mt-1 text-sm",style:{color:n?.textMuted||"#6b7280"},children:r})]}),fn=()=>{const{t:e}=(0,o.Bd)(),{getColor:t,isDarkMode:n,toggleDarkMode:s}=(0,se.DP)(),a=xr(),{isMobileMenuOpen:i,setIsMobileMenuOpen:l}=(0,re.KC)(),c=window.qe_data?.home_url||"",d=window.qe_data?.logout_url,u={text:n?t("textPrimary","#f9fafb"):t("primary","#1a202c"),textMuted:n?t("textSecondary","#9ca3af"):`${t("primary","#1a202c")}70`,accent:t("accent","#f59e0b"),primary:t("primary","#3b82f6"),surface:t("background",n?"#111827":"#ffffff"),border:n?"rgba(255,255,255,0.08)":t("borderColor","#e5e7eb")},{books:p,loading:f,error:m,refresh:h}=nn({autoFetch:!0}),[g,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[v,j]=(0,r.useState)("view"),w=(0,sn.A)({autoFetch:!1}),N=()=>{b(null),j("create"),x(!0)},k=e=>{b(e.id),j("edit"),x(!0)},C=()=>{x(!1),setTimeout(()=>{b(null),j("view")},300)},_=a?p:p.filter(e=>{const t=e.start_date||e.meta?._book_start_date,r=e.end_date||e.meta?._book_end_date,n=new Date;if(t){const e=new Date(t);if(!Number.isNaN(e.getTime())&&n<e)return!1}if(r){const e=new Date(r);if(!Number.isNaN(e.getTime())&&n>e)return!1}return!0}),S=[{to:"/courses",text:e("sidebar.studyPlanner"),icon:ae.A,type:"internal"},{to:"/books",text:e("sidebar.books"),icon:ue.A,type:"internal"},{to:c,text:e("sidebar.exitCampus"),icon:$t,type:"exit"}];return(0,be.jsxs)("div",{className:"h-full w-full overflow-y-auto p-6",style:{backgroundColor:t("secondaryBackground","#f3f4f6")},children:[i&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>l(!1)}),(0,be.jsxs)("div",{className:"fixed top-0 right-0 h-full w-80 z-50 shadow-2xl overflow-y-auto",style:{backgroundColor:t("background","#ffffff")},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-6 py-5 border-b",style:{borderColor:n?"rgba(255,255,255,0.1)":t("borderColor","#e5e7eb")},children:[(0,be.jsx)("h2",{className:"text-xl font-bold",style:{color:u.text},children:e("sidebar.menu")}),(0,be.jsx)("button",{onClick:()=>l(!1),className:"p-2 rounded-lg transition-colors",style:{color:u.text},children:(0,be.jsx)(xe.A,{className:"w-6 h-6"})})]}),(0,be.jsxs)("nav",{className:"p-4 space-y-2",children:[S.map(e=>"exit"===e.type?(0,be.jsxs)("a",{href:e.to,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:u.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${u.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e.text})]},e.to):(0,be.jsxs)(re.k2,{to:e.to,end:!0,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:({isActive:e})=>({backgroundColor:e?u.primary:"transparent",color:e?"#ffffff":u.text}),onMouseEnter:e=>{"page"===e.currentTarget.getAttribute("aria-current")||(e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${u.primary}10`)},onMouseLeave:e=>{"page"===e.currentTarget.getAttribute("aria-current")||(e.currentTarget.style.backgroundColor="transparent")},onClick:()=>l(!1),children:[(0,be.jsx)(e.icon,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e.text})]},e.to)),(0,be.jsx)("div",{className:"my-4",style:{height:"1px",backgroundColor:n?"rgba(255,255,255,0.1)":t("borderColor","#e5e7eb")}}),(0,be.jsxs)("button",{onClick:s,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:u.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${u.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[n?(0,be.jsx)(he.A,{className:"w-5 h-5"}):(0,be.jsx)(ge.A,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e(n?"sidebar.lightMode":"sidebar.darkMode")})]}),(0,be.jsxs)("a",{href:`${c}/mi-cuenta/edit-account/`,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:"transparent",color:u.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?"rgba(255,255,255,0.1)":`${u.primary}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(Fe.A,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e("sidebar.myAccount")})]}),d&&(0,be.jsxs)("a",{href:d,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 font-medium",style:{backgroundColor:u.primary,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=u.accent},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=u.primary},children:[(0,be.jsx)(Wt,{className:"w-5 h-5"}),(0,be.jsx)("span",{children:e("sidebar.logout")})]})]})]})]}),(0,be.jsxs)("main",{children:[(0,be.jsxs)("div",{className:"mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4 rounded-2xl p-5",style:{backgroundColor:u.surface,border:`1px solid ${u.border}`},children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("h1",{className:"text-2xl font-bold flex items-center gap-3",style:{color:u.text},children:[(0,be.jsx)(ue.A,{className:"w-8 h-8",style:{color:u.primary}}),e("books.myBooks")]}),(0,be.jsx)("p",{className:"mt-1 text-sm",style:{color:u.textMuted},children:e("books.myBooksDescription")})]}),a&&(0,be.jsxs)("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:-translate-y-0.5",style:{backgroundColor:u.primary,color:"#ffffff",boxShadow:`0 4px 10px ${u.primary}30`},children:[(0,be.jsx)(Ie.A,{size:18}),(0,be.jsx)("span",{children:e("books.createBook","Nuevo Libro")})]})]}),f&&0===_.length?(0,be.jsx)(pn,{icon:et.A,title:e("books.loadingBooks"),message:e("common.processing"),colors:u}):m?(0,be.jsx)(pn,{icon:Te.A,title:e("notifications.error"),message:m,colors:u}):_&&0!==_.length?(0,be.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:_.map(e=>(0,be.jsx)(dn,{book:e,isAdmin:a,onEdit:k},e.id))}):(0,be.jsxs)("div",{className:"flex flex-col items-center",children:[(0,be.jsx)(pn,{icon:qe,title:e("books.noBooks"),message:e("books.noBooksDescription"),colors:u}),a&&(0,be.jsxs)("button",{onClick:N,className:"mt-4 px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2",style:{backgroundColor:u.primary,color:"#ffffff",boxShadow:`0 4px 10px ${u.primary}30`},children:[(0,be.jsx)(Ie.A,{size:18}),(0,be.jsx)("span",{children:e("books.createFirst","Crear el primer libro")})]})]})]}),a&&(0,be.jsx)(un.A,{isOpen:g,bookId:y,mode:v,onSave:async e=>{try{"create"===v?await w.createBook(e):await w.updateBook(y,e),h()}catch(e){throw console.error("Error saving book:",e),e}},onClose:C,onDelete:async e=>{try{await w.deleteBook(e),C(),h()}catch(e){throw console.error("Error deleting book:",e),e}},getBook:w.getBook})]})};var mn=a(6110);const hn=(0,le.A)("radio",[["path",{d:"M16.247 7.761a6 6 0 0 1 0 8.478",key:"1fwjs5"}],["path",{d:"M19.075 4.933a10 10 0 0 1 0 14.134",key:"ehdyv1"}],["path",{d:"M4.925 19.067a10 10 0 0 1 0-14.134",key:"1q22gi"}],["path",{d:"M7.753 16.239a6 6 0 0 1 0-8.478",key:"r2q7qm"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),gn=async(e,t={})=>{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":(()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found.");return e})().nonce},credentials:"same-origin",...t},n=await fetch(e,r);if(!n.ok){const e=await n.json().catch(()=>({message:"Request failed"}));throw new Error(e.message||`HTTP error ${n.status}`)}return n.json()},xn=async e=>{const t=`${(0,Ye.getApiConfig)().apiUrl}/quiz-extended/v1/courses/${e}/calendar-notes`;return(await gn(t,{method:"GET"})).data||[]},yn=async(e,t)=>{const r=`${(0,Ye.getApiConfig)().apiUrl}/quiz-extended/v1/courses/${e}/calendar-notes`;return(await gn(r,{method:"POST",body:JSON.stringify(t)})).data},bn=async(e,t,r)=>{const n=`${(0,Ye.getApiConfig)().apiUrl}/quiz-extended/v1/courses/${e}/calendar-notes/${t}`;return(await gn(n,{method:"PUT",body:JSON.stringify(r)})).data},vn=({isMobileMenuOpen:e,setIsMobileMenuOpen:t})=>{const{courseId:s}=(0,re.g)(),[a,i]=(0,r.useState)(!1),[l,c]=(0,r.useState)(()=>{const e=sessionStorage.getItem(`courseProgress_${s}`);return e?JSON.parse(e):null}),[d,u]=(0,r.useState)(s),[p,f]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),{t:g}=(0,o.Bd)(),{getColor:x,isDarkMode:y,toggleDarkMode:b}=(0,se.DP)(),{course:v}=Gt(s),j=v?.title?.rendered||v?.title||"",w=window.qe_data?.home_url||"",N=window.qe_data?.logout_url;(0,r.useEffect)(()=>{const e=()=>{s&&(console.log(`ðŸ“Š CourseSidebar: Fetching progress for course ${s}`),hr(s).then(e=>{console.log("ðŸ“Š CourseSidebar: Progress received:",e?.steps_by_type),c(e),sessionStorage.setItem(`courseProgress_${s}`,JSON.stringify(e))}).catch(e=>{console.error("Error loading course progress:",e)}))};if(s!==d){u(s),f(!1);const t=sessionStorage.getItem(`courseProgress_${s}`);return c(t?JSON.parse(t):null),void e()}p||(f(!0),e());const t=t=>{t.detail?.courseId&&String(t.detail.courseId)===String(s)&&e()};return window.addEventListener("courseProgressUpdated",t),()=>window.removeEventListener("courseProgressUpdated",t)},[s,d,p]),(0,r.useEffect)(()=>{s&&xn(s).then(e=>{const t=new Date;t.setHours(0,0,0,0);const r=e.filter(e=>"live_class"===e.type).filter(e=>new Date(e.note_date)>=t).sort((e,t)=>new Date(e.note_date)-new Date(t.note_date));h(r[0]||null)}).catch(()=>h(null))},[s]);const k=(0,r.useMemo)(()=>{const e=l?.steps_by_type||{},t=xr(),r=[{to:`/courses/${s}/study-planner`,text:g("courses.studyPlanner"),icon:sr.A,divider:!0}],n=e.quiz?.total>0;(n||t)&&r.push({to:`/courses/${s}/tests`,text:g("courses.tests"),icon:ce,badge:n?`${e.quiz.completed}/${e.quiz.total}`:null}),r.push({to:`/courses/${s}/test-generator`,text:g("courses.testGenerator"),icon:mn.A},{to:`/courses/${s}/self-paced-tests`,text:g("courses.selfPacedTests"),icon:$e.A,divider:!0});const o=(e.text?.total||0)+(e.pdf?.total||0),a=(e.text?.completed||0)+(e.pdf?.completed||0),i=o>0;(i||t)&&r.push({to:`/courses/${s}/material`,text:g("courses.supportMaterial"),icon:ie.A,badge:i?`${a}/${o}`:null,divider:!0});const c=e.video?.total>0;return(c||t)&&r.push({to:`/courses/${s}/videos`,text:g("courses.videoClasses"),icon:Me.A,badge:c?`${e.video.completed}/${e.video.total}`:null,divider:!0}),m&&r.push({to:`/courses/${s}/live-classes`,text:g("courses.liveClasses"),icon:hn}),r},[s,l,m,g]),C=x("primary","#3b82f6"),_=x("secondary","#8b5cf6"),S=x("accent","#f59e0b"),E=(x("textPrimary","#f9fafb"),x("secondaryBackground","#1f2937")),A=x("background","#ffffff"),M={text:y?S:C,hoverBg:y?S:C,hoverText:y?E:"#ffffff",hoverBorder:y?S:_,hoverBoxShadow:y?`inset 0 0 0 2px ${A}`:"inset 0 0 0 2px #ffffff",activeBg:y?S:C,activeText:y?E:"#ffffff",activeBorder:y?"transparent":C,badgeBg:y?`${S}30`:`${C}20`,badgeText:y?S:C},T=(e,t,r)=>{if(!r)if(t){e.currentTarget.style.backgroundColor=M.hoverBg,e.currentTarget.style.borderColor=M.hoverBorder,e.currentTarget.style.color=M.hoverText,e.currentTarget.style.boxShadow=M.hoverBoxShadow;const t=e.currentTarget.querySelector(".badge-course");t&&(t.style.backgroundColor="rgba(255, 255, 255, 0.2)",t.style.color=M.hoverText)}else{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor="transparent",e.currentTarget.style.color=M.text,e.currentTarget.style.boxShadow="none";const t=e.currentTarget.querySelector(".badge-course");t&&(t.style.backgroundColor=M.badgeBg,t.style.color=M.badgeText)}};return(0,be.jsxs)(be.Fragment,{children:[e&&(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",style:{top:"52px"},onClick:()=>t(!1)}),(0,be.jsx)("div",{className:`fixed left-0 h-[calc(100%-52px)] top-[52px] lg:relative lg:top-0 lg:left-auto lg:h-full transition-all duration-300 z-50 lg:z-auto shadow-lg lg:shadow-none w-64 ${a&&"lg:w-20"} ${e?"translate-x-0":"-translate-x-full lg:translate-x-0"}`,style:{backgroundColor:x("background","#ffffff")},children:(0,be.jsxs)("aside",{className:"h-full flex flex-col",children:[(0,be.jsxs)("div",{className:"p-4",children:[(0,be.jsxs)("div",{className:"flex gap-2 mb-2 justify-between "+(a?"lg:justify-center":"lg:justify-between"),style:{alignItems:"center",minHeight:"40px"},children:[!a&&(0,be.jsx)("h2",{className:"text-base font-bold truncate flex-1",style:{color:M.text,lineHeight:"24px",display:"flex",alignItems:"center"},title:j,children:(0,be.jsx)("span",{dangerouslySetInnerHTML:{__html:j}})}),(0,be.jsx)("button",{onClick:()=>i(!a),type:"button",title:g(a?"sidebar.expand":"sidebar.collapse"),className:"hidden lg:flex transition-colors cursor-pointer flex-shrink-0",style:{color:M.text,width:"24px",height:"24px",alignItems:"center",justifyContent:"center",padding:0,border:"none",background:"none"},onMouseEnter:e=>e.currentTarget.style.color=S,onMouseLeave:e=>e.currentTarget.style.color=M.text,children:a?(0,be.jsx)(ur.A,{size:24}):(0,be.jsx)(We.A,{size:24})})]}),(0,be.jsx)("div",{className:"w-full h-[2px]",style:{backgroundColor:`${M.text}40`}})]}),(0,be.jsxs)("div",{className:"lg:hidden px-2 pb-3 space-y-1.5",children:[(0,be.jsxs)(re.k2,{to:"/courses",onClick:()=>t(!1),className:"flex items-center gap-2 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:M.text,border:`1px solid ${M.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=M.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=M.text},children:[(0,be.jsx)(ae.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{className:"text-xs font-medium",children:g("sidebar.studyPlanner")})]}),(0,be.jsxs)(re.k2,{to:"/books",onClick:()=>t(!1),className:"flex items-center gap-2 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:M.text,border:`1px solid ${M.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=M.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=M.text},children:[(0,be.jsx)(ie.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{className:"text-xs font-medium",children:g("sidebar.books")})]}),(0,be.jsxs)("a",{href:w,className:"flex items-center gap-2 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:M.text,border:`1px solid ${M.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=M.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=M.text},children:[(0,be.jsx)($t,{className:"w-4 h-4"}),(0,be.jsx)("span",{className:"text-xs font-medium",children:g("sidebar.exitCampus")})]}),(0,be.jsxs)("div",{className:"flex gap-1.5 pt-1.5",children:[(0,be.jsx)("button",{onClick:b,className:"flex-1 flex items-center justify-center gap-1 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:M.text,border:`1px solid ${M.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=M.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=M.text},title:g(y?"sidebar.lightMode":"sidebar.darkMode"),children:y?(0,be.jsx)(he.A,{className:"w-4 h-4"}):(0,be.jsx)(ge.A,{className:"w-4 h-4"})}),(0,be.jsx)("a",{href:`${w}/mi-cuenta/edit-account/`,className:"flex-1 flex items-center justify-center gap-1 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:M.text,border:`1px solid ${M.text}40`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=M.hoverBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=M.text},title:g("sidebar.myAccount"),children:(0,be.jsx)(Fe.A,{className:"w-4 h-4"})}),N&&(0,be.jsx)("a",{href:N,className:"flex-1 flex items-center justify-center gap-1 p-2 rounded-lg transition-all duration-200",style:{backgroundColor:M.activeBg,color:"#ffffff",border:`1px solid ${M.activeBg}`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=S},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=M.activeBg},title:g("sidebar.logout"),children:(0,be.jsx)(Wt,{className:"w-4 h-4"})})]}),(0,be.jsx)("div",{className:"w-full h-[2px] mt-4",style:{backgroundColor:`${M.text}40`}})]}),(0,be.jsx)("nav",{className:"flex-1 px-2 space-y-2 overflow-hidden overflow-y-auto",children:k.map(e=>(0,be.jsxs)(n().Fragment,{children:[(0,be.jsx)(re.k2,{to:e.to,end:!0,onClick:()=>t(!1),className:({isActive:e})=>"flex items-center p-2 transition-all duration-200 rounded-lg border-[2px] "+(a?"justify-center":""),style:({isActive:e})=>(e=>e?{backgroundColor:M.activeBg,borderColor:M.activeBorder,color:M.activeText}:{backgroundColor:"transparent",borderColor:"transparent",color:M.text})(e),onMouseEnter:e=>{const t="page"===e.currentTarget.getAttribute("aria-current");T(e,!0,t)},onMouseLeave:e=>{const t="page"===e.currentTarget.getAttribute("aria-current");T(e,!1,t)},title:a?e.text:"",children:({isActive:t})=>(0,be.jsxs)("div",{className:"flex items-center relative w-full "+(a?"justify-center":""),children:[(0,be.jsx)(e.icon,{className:"w-5 h-5",style:{color:t?M.activeText:"currentColor"}}),!a&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("span",{className:"ml-3 text-base flex-1",style:{color:t?M.activeText:"currentColor"},children:e.text}),e.badge&&(0,be.jsx)("span",{className:"badge-course text-xs font-semibold px-2 py-0.5 rounded relative z-10",style:{backgroundColor:t?"rgba(255, 255, 255, 0.2)":M.badgeBg,color:t?M.activeText:M.badgeText},children:e.badge})]})]})}),e.divider&&(0,be.jsx)("div",{className:"px-4 py-2",children:(0,be.jsx)("div",{className:"w-full h-[2px]",style:{backgroundColor:`${M.text}40`}})})]},e.to))})]})})]})},jn=({courseId:e,courseName:t,sectionName:r,children:n})=>{const{t:s}=(0,o.Bd)(),{getColor:a}=(0,se.DP)(),{isMobileMenuOpen:i,setIsMobileMenuOpen:l}=(0,re.KC)();return(0,be.jsxs)("div",{className:"flex h-full w-full overflow-hidden",style:{backgroundColor:a("secondaryBackground","#f8f9fa")},children:[(0,be.jsx)(vn,{isMobileMenuOpen:i,setIsMobileMenuOpen:l}),(0,be.jsx)("div",{className:"flex-1 flex flex-col h-full w-full overflow-hidden min-h-0",children:(0,be.jsx)("main",{className:"flex-1 w-full h-full overflow-y-auto min-h-0",children:n})})]})},wn=async(e,t={})=>{try{const r={headers:{"Content-Type":"application/json","X-WP-Nonce":(()=>{const e=window.qe_data||{};if(!e.nonce)throw new Error("WordPress configuration not found. Ensure qe_data is loaded.");return e})().nonce},credentials:"same-origin",...t},n=await fetch(e,r);if(!n.ok){const e=await n.json().catch(()=>({}));throw new Error(e.message||`API Error: ${n.status} ${n.statusText}`)}return{data:await n.json(),headers:n.headers}}catch(e){throw console.error("API Request failed:",e),e}},Nn=async(e,t={})=>{const{page:r=1,perPage:n=10,withRisk:s=!1}=t,o=(0,Ye.getApiConfig)(),a=new URLSearchParams({course_id:e.toString(),page:r.toString(),per_page:n.toString(),with_risk:s.toString()}),i=`${o.apiUrl}/qe/v1/course-ranking/ranking?${a.toString()}`,{data:l}=await wn(i);return l},kn=async e=>{const t=(0,Ye.getApiConfig)(),r=new URLSearchParams({course_id:e.toString()}),n=`${t.apiUrl}/qe/v1/course-ranking/my-ranking-status?${r.toString()}`,{data:s}=await wn(n);return s};var Cn=a(6416);const Sn=(0,le.A)("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),En=(0,le.A)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]]),An=(0,le.A)("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),Mn=(0,le.A)("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),Tn=e=>{const[t,n]=(0,r.useState)(!1),[s,o]=(0,r.useState)(null),[a,i]=(0,r.useState)([]),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[p,f]=(0,r.useState)({currentPage:1,totalPages:0,perPage:10,totalUsers:0,userPage:null}),[m,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),v=(0,r.useRef)(0),j=(0,r.useCallback)(async(t=null,r=!1)=>{if(!e)return;const s=++v.current;n(!0),o(null);try{const n=await Nn(e,{page:t||p.currentPage,perPage:p.perPage,withRisk:m});if(s!==v.current)return;if(n.success){i(n.data.ranking||[]),!r&&y||(c(n.data.statistics||null),b(!0)),u(n.data.my_stats||null);const e=n.data.pagination||{};f(t=>({...t,totalPages:e.total_pages||0,perPage:e.per_page||t.perPage,totalUsers:e.total_users||0,userPage:e.user_page||null}))}else o(n.message||"Failed to load ranking")}catch(e){if(s!==v.current)return;console.error("Error fetching course ranking:",e),o(e.message||"An error occurred while loading the ranking")}finally{s===v.current&&n(!1)}},[e,p.currentPage,p.perPage,m,y]),w=(0,r.useCallback)(async()=>{if(e)try{const t=await kn(e);t.success&&x(t.data||null)}catch(e){console.error("Error fetching my ranking status:",e)}},[e]),N=(0,r.useCallback)(()=>{h(e=>!e),f(e=>({...e,currentPage:1}))},[]),k=(0,r.useCallback)(e=>{f(t=>e<1||t.totalPages>0&&e>t.totalPages||e===t.currentPage?t:{...t,currentPage:e})},[]),C=(0,r.useCallback)(()=>{f(e=>e.currentPage>=e.totalPages?e:{...e,currentPage:e.currentPage+1})},[]),_=(0,r.useCallback)(()=>{f(e=>e.currentPage<=1?e:{...e,currentPage:e.currentPage-1})},[]),S=(0,r.useCallback)(()=>{f(e=>1===e.currentPage?e:{...e,currentPage:1})},[]),E=(0,r.useCallback)(()=>{f(e=>0===e.totalPages||e.currentPage===e.totalPages?e:{...e,currentPage:e.totalPages})},[]),A=(0,r.useCallback)(()=>{f(e=>e.userPage&&e.currentPage!==e.userPage?{...e,currentPage:e.userPage}:e)},[]);return(0,r.useEffect)(()=>{y?j():j(null,!0)},[e,p.currentPage,m]),(0,r.useEffect)(()=>{w()},[w]),{loading:t,error:s,ranking:a,statistics:l,myStats:d,pagination:p,withRisk:m,myStatus:g,fetchRanking:j,toggleRisk:N,goToPage:k,nextPage:C,prevPage:_,firstPage:S,lastPage:E,goToUserPage:A,refetch:j}},Pn=Tn,On=(0,r.createContext)(null),zn=()=>{const e=(0,r.useContext)(On);if(!e)throw new Error("useRankingContext must be used within CourseRankingProvider");return e},qn=({courseId:e,courseName:t,isOpen:n,onOpen:s,onClose:a,children:i})=>{var l,c,d,u,p,f;const{t:m}=(0,o.Bd)(),{getColor:h,isDarkMode:g}=(0,se.DP)(),{formatScore:x}=qt(),{loading:y,error:b,ranking:v,statistics:j,myStats:w,myStatus:N,pagination:k,withRisk:C,toggleRisk:_,goToPage:S,nextPage:E,prevPage:A,firstPage:M,lastPage:T,goToUserPage:P}=Tn(e),O=h("primary","#1a202c"),z={bg:g?h("secondaryBackground","#1f2937"):"#ffffff",bgSecondary:h("secondaryBackground","#f9fafb"),text:g?h("textPrimary","#f9fafb"):O,textMuted:g?h("textSecondary","#9ca3af"):`${O}60`,accent:h("accent","#f59e0b"),border:g?"rgba(255,255,255,0.1)":h("borderColor","#e5e7eb"),containerBorder:g?h("accent","#f59e0b"):h("borderColor","#e5e7eb"),hoverBg:g?h("accent","#f59e0b"):O,iconColor:g?h("textPrimary","#f9fafb"):O,positionColor:g?h("textPrimary","#f9fafb"):O,userNameColor:g?h("textPrimary","#f9fafb"):O},q=null!==(l=N?.completed_quizzes)&&void 0!==l?l:0,D=null!==(c=N?.total_quizzes)&&void 0!==c?c:0,I=null!==(d=N?.average_score)&&void 0!==d?d:0,L=null!==(u=N?.position)&&void 0!==u?u:null,R=null!==(p=null!==(f=N?.total_users)&&void 0!==f?f:j?.total_users)&&void 0!==p?p:null;(0,r.useEffect)(()=>{n&&M()},[n]);const $={t:m,isDarkMode:g,getColor:h,formatScore:x,primaryColor:O,pageColors:z,loading:y,error:b,ranking:v,statistics:j,myStats:w,myStatus:N,pagination:k,withRisk:C,toggleRisk:_,goToPage:S,nextPage:E,prevPage:A,firstPage:M,lastPage:T,goToUserPage:P,completedQuizzes:q,totalQuizzes:D,userScore:I,userPosition:L,totalUsersInRanking:R,courseId:e,courseName:t,isOpen:n,onOpen:s,onClose:a};return(0,be.jsx)(On.Provider,{value:$,children:i})},Dn=()=>{const{t:e,isDarkMode:t,pageColors:r,myStats:n,userPosition:s,totalUsersInRanking:o,completedQuizzes:a,withRisk:i,onOpen:l}=zn(),c=t?r.accent:r.hoverBg,d=t?r.bgSecondary:"#ffffff",u=t?r.hoverBg:r.accent,p=i?n?.position_with_risk:n?.position_without_risk||s;return(0,be.jsx)("div",{className:"flex justify-end mb-4",children:(0,be.jsxs)("button",{onClick:l,className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-2",style:{backgroundColor:c,color:d},onMouseEnter:e=>{t?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=u},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=c},children:[(0,be.jsx)(Tr.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{children:e("ranking.ranking","Ranking")}),a>0&&p&&(0,be.jsxs)("span",{className:"px-1.5 py-0.5 rounded text-xs font-bold",style:{backgroundColor:"rgba(0,0,0,0.2)",color:d},children:["#",p,o?`/${o}`:""]})]})})},In=()=>{const{t:e,isDarkMode:t,getColor:r,formatScore:n,primaryColor:s,pageColors:o,loading:a,error:i,ranking:l,statistics:c,myStats:d,pagination:u,withRisk:p,toggleRisk:f,goToPage:m,nextPage:h,prevPage:g,firstPage:x,lastPage:y,completedQuizzes:b,totalQuizzes:v,userScore:j,userPosition:w,courseName:N,isOpen:k,onClose:C}=zn();return(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(k?"translate-x-0":"translate-x-full"),style:{backgroundColor:o.bgSecondary},children:(0,be.jsxs)("div",{className:"h-full flex flex-col",children:[(0,be.jsx)("div",{className:"px-4 py-3 flex items-center justify-between flex-shrink-0 border-b",style:{backgroundColor:o.bg,borderColor:o.border},children:(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("button",{onClick:C,className:"p-1.5 rounded-lg transition-colors",style:{backgroundColor:t?"rgba(255,255,255,0.1)":`${s}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.2)":`${s}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":`${s}10`},children:(0,be.jsx)(We.A,{className:"w-5 h-5",style:{color:o.text}})}),(0,be.jsx)(Tr.A,{className:"w-5 h-5",style:{color:t?o.accent:s}}),(0,be.jsx)("h3",{className:"text-sm font-bold flex items-center",style:{color:o.text},children:e("ranking.courseRanking","Ranking del Curso")})]})}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,be.jsx)("div",{className:"max-w-6xl mx-auto px-4 pt-6 pb-12",children:(0,be.jsx)("div",{className:"space-y-4",children:a&&!l.length?(0,be.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 mx-auto mb-3",style:{borderColor:s}}),(0,be.jsx)("p",{className:"text-sm",style:{color:o.textMuted},children:"Cargando..."})]})}):i?(0,be.jsxs)("div",{className:"p-4 rounded-lg",style:{backgroundColor:t?"rgba(239, 68, 68, 0.1)":"#fef2f2",border:"1px solid "+(t?"rgba(239, 68, 68, 0.3)":"#fecaca")},children:[(0,be.jsx)("p",{className:"font-medium",style:{color:"#ef4444"},children:"Error al cargar el ranking"}),(0,be.jsx)("p",{className:"text-sm",style:{color:t?"#fca5a5":"#dc2626"},children:i})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"rounded-2xl overflow-hidden p-4",style:{backgroundColor:r("background","#ffffff"),border:t?"1px solid #ffffff":"none"},children:[(0,be.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 items-start",children:[(0,be.jsx)("div",{className:"rounded-xl overflow-hidden p-4",style:{backgroundColor:r("background","#ffffff")},children:(0,be.jsxs)("div",{className:"mb-3",children:[(0,be.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wide mb-4 text-center",style:{color:t?"#ffffff":s},children:"Medias del curso"}),(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:"transparent"},children:"Â "}),(0,be.jsx)("div",{className:"mx-3",style:{backgroundColor:s,border:t?"1px solid #ffffff":"none",borderRadius:"0.75rem",overflow:"hidden"},children:(0,be.jsxs)("div",{className:"grid grid-cols-3 px-4 py-2",children:[(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Usuarios"}),(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:c?.total_users||0})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Sin Arriesgar"}),(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:n(c?.avg_score_without_risk||0)})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Arriesgando"}),(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:n(c?.avg_score_with_risk||0)})]})]})}),(c?.top_20_cutoff_without_risk>0||c?.top_20_cutoff_with_risk>0)&&(0,be.jsxs)("div",{className:"mt-3",children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:t?"#ffffff":s},children:"Nota de corte"}),(0,be.jsx)("div",{className:"mx-3",style:{backgroundColor:s,border:t?"1px solid #ffffff":"none",borderRadius:"0.75rem",overflow:"hidden"},children:(0,be.jsxs)("div",{className:"grid grid-cols-3 px-4 py-2",children:[(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Â "}),(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:"Top 20%"})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Sin Arriesgar"}),(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:n(c?.top_20_cutoff_without_risk||0)})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Arriesgando"}),(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:n(c?.top_20_cutoff_with_risk||0)})]})]})})]})]})}),b>0&&(0,be.jsxs)("div",{className:"rounded-xl overflow-hidden p-4",style:{backgroundColor:r("background","#ffffff")},children:[(0,be.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wide mb-4 text-center",style:{color:t?"#ffffff":s},children:"Tus medias - Uniforme Azul"}),(0,be.jsxs)("div",{className:"mb-3",children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:t?"#ffffff":s},children:"Sin Arriesgar"}),(0,be.jsx)("div",{className:"mx-3",style:{backgroundColor:s,border:t?"1px solid #ffffff":"none",borderRadius:"0.75rem",overflow:"hidden"},children:(0,be.jsxs)("div",{className:"grid grid-cols-3 px-4 py-2",children:[(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"PosiciÃ³n"}),(0,be.jsxs)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:["#",d?.position_without_risk||w||"-"]})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Mi Media"}),(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:n(d?.score_without_risk||j||0)})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Percentil"}),(()=>{const e=(d?.score_without_risk||j||0)-(c?.avg_score_without_risk||0);return(0,be.jsxs)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:[e>=0?"+":"",n(e)]})})()]})]})})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:t?"#ffffff":s},children:"Arriesgando"}),(0,be.jsx)("div",{className:"mx-3",style:{backgroundColor:s,border:t?"1px solid #ffffff":"none",borderRadius:"0.75rem",overflow:"hidden"},children:(0,be.jsxs)("div",{className:"grid grid-cols-3 px-4 py-2",children:[(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"PosiciÃ³n"}),(0,be.jsxs)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:["#",d?.position_with_risk||"-"]})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Mi Media"}),(0,be.jsx)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:n(d?.score_with_risk||0)})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-[10px] uppercase tracking-wide mb-0.5 font-bold",style:{color:t?o.accent:"#ffffff"},children:"Percentil"}),(()=>{const e=(d?.score_with_risk||0)-(c?.avg_score_with_risk||0);return(0,be.jsxs)("p",{className:"text-lg font-bold",style:{color:"#ffffff"},children:[e>=0?"+":"",n(e)]})})()]})]})})]})]})]}),(0,be.jsx)("div",{className:"flex justify-end mt-4 mb-1",children:(0,be.jsx)("button",{onClick:f,className:"px-4 py-2 text-sm font-semibold rounded-lg transition-all",style:{backgroundColor:t||p?o.accent:s,color:"#ffffff",border:t?"1px solid rgba(255,255,255,0.3)":"none"},children:p?"Con Riesgo":"Sin Riesgo"})}),(0,be.jsxs)("div",{className:"rounded-xl overflow-hidden mt-3",style:{backgroundColor:r("background","#ffffff"),border:t?"1px solid #ffffff":"none"},children:[(0,be.jsxs)("table",{className:"w-full",style:{backgroundColor:t?"#000000":"#ffffff"},children:[(0,be.jsxs)("colgroup",{children:[(0,be.jsx)("col",{style:{width:"56px"}}),(0,be.jsx)("col",{}),(0,be.jsx)("col",{style:{width:"130px"}})]}),(0,be.jsx)("thead",{children:(0,be.jsxs)("tr",{style:{backgroundColor:"#000000"},children:[(0,be.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wide",style:{color:"#ffffff"},children:"#"}),(0,be.jsx)("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wide",style:{color:"#ffffff"},children:"Usuario"}),(0,be.jsx)("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wide whitespace-nowrap",style:{color:p?o.accent:"#ffffff"},children:p?"Con Riesgo":"Sin Riesgo"})]})}),(0,be.jsx)("tbody",{children:l.map((e,r)=>{var a,i;const c=e.is_current_user,d=r===l.length-1,u=p?null!==(a=e.position_with_risk)&&void 0!==a?a:e.position:null!==(i=e.position_without_risk)&&void 0!==i?i:e.position,f=p?e.score_with_risk:e.score_without_risk,m=t?"#ffffff":1===u?"#eab308":2===u?"#9ca3af":3===u?"#f97316":o.text,h=t?"#ffffff":o.text;return(0,be.jsxs)("tr",{className:"transition-colors "+(d?"":"border-b"),style:{borderColor:t?"#ffffff":o.border,backgroundColor:c?t?"rgba(245, 158, 11, 0.1)":`${s}08`:"transparent"},children:[(0,be.jsx)("td",{className:"px-4 py-3",children:(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[u<=3&&(0,be.jsx)(Tr.A,{className:"w-4 h-4",style:{color:m}}),(0,be.jsx)("span",{className:"font-bold",style:{color:m},children:u})]})}),(0,be.jsx)("td",{className:"px-4 py-3",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("img",{src:e.avatar_url,alt:"",className:"w-8 h-8 rounded-full"}),(0,be.jsxs)("span",{className:"font-medium",style:{color:h},children:[e.display_name,c&&(0,be.jsx)("span",{className:"ml-2 text-[10px] px-1.5 py-0.5 rounded",style:{backgroundColor:t?o.accent:s,color:"#fff"},children:"TÃº"})]})]})}),(0,be.jsx)("td",{className:"px-4 py-3 text-center",children:(0,be.jsx)("span",{className:"font-bold",style:{color:h},children:n(null!=f?f:0)})})]},e.user_id)})})]}),0===l.length&&!a&&(0,be.jsxs)("div",{className:"text-center py-8",children:[(0,be.jsx)(Tr.A,{className:"w-10 h-10 mx-auto mb-3",style:{color:o.border}}),(0,be.jsx)("p",{className:"font-medium",style:{color:o.textMuted},children:"No hay usuarios en el ranking"})]})]})]}),u.totalUsers>0&&(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between p-3 rounded-lg gap-2",style:{backgroundColor:r("background","#ffffff"),border:t?"1px solid #ffffff":"none"},children:[(0,be.jsxs)("span",{className:"text-sm",style:{color:o.textMuted},children:[(u.currentPage-1)*u.perPage+1,"-",Math.min(u.currentPage*u.perPage,u.totalUsers)," de ",u.totalUsers,u.totalPages>1&&` (PÃ¡gina ${u.currentPage} de ${u.totalPages})`]}),u.totalPages>1&&(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsx)("button",{onClick:x,disabled:1===u.currentPage,className:"p-1.5 rounded border disabled:opacity-30 transition-all",style:{color:o.text,borderColor:o.border,backgroundColor:o.bg},onMouseEnter:e=>{1!==u.currentPage&&(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":"#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=o.bg},children:(0,be.jsx)(An,{className:"w-4 h-4"})}),(0,be.jsx)("button",{onClick:g,disabled:1===u.currentPage,className:"p-1.5 rounded border disabled:opacity-30 transition-all",style:{color:o.text,borderColor:o.border,backgroundColor:o.bg},onMouseEnter:e=>{1!==u.currentPage&&(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":"#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=o.bg},children:(0,be.jsx)(We.A,{className:"w-4 h-4"})}),(0,be.jsx)("div",{className:"flex gap-1",children:(()=>{const e=[],r=u.totalPages,n=u.currentPage;let a=Math.max(1,n-2),i=Math.min(r,n+2);n<=3&&(i=Math.min(5,r)),n>=r-2&&(a=Math.max(1,r-4));for(let r=a;r<=i;r++){const a=r===n;e.push((0,be.jsx)("button",{onClick:()=>m(r),className:"px-3 py-1 rounded text-sm font-semibold transition-all border",style:{backgroundColor:a?s:o.bg,borderColor:a?s:o.border,color:a||t?"#ffffff":s},children:r},r))}return e})()}),(0,be.jsx)("button",{onClick:h,disabled:u.currentPage===u.totalPages,className:"p-1.5 rounded border disabled:opacity-30 transition-all",style:{color:o.text,borderColor:o.border,backgroundColor:o.bg},onMouseEnter:e=>{u.currentPage!==u.totalPages&&(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":"#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=o.bg},children:(0,be.jsx)(ur.A,{className:"w-4 h-4"})}),(0,be.jsx)("button",{onClick:y,disabled:u.currentPage===u.totalPages,className:"p-1.5 rounded border disabled:opacity-30 transition-all",style:{color:o.text,borderColor:o.border,backgroundColor:o.bg},onMouseEnter:e=>{u.currentPage!==u.totalPages&&(e.currentTarget.style.backgroundColor=t?"rgba(255,255,255,0.1)":"#f3f4f6")},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=o.bg},children:(0,be.jsx)(Mn,{className:"w-4 h-4"})})]})]})]})})})})]})})},Ln=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{formatScore:a}=qt(),{course:i,loading:l}=Gt(t),c=i?.title?.rendered||i?.title||e("courses.title"),[d,u]=(0,r.useState)(null),[p,f]=(0,r.useState)(!0),[m,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),[v,j]=(0,r.useState)(!0),[w,N]=(0,r.useState)([]),[k,C]=(0,r.useState)(!0),[_,S]=(0,r.useState)(null),E={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:s?n("textSecondary","#9ca3af"):`${n("primary","#1a202c")}70`,accent:n("accent","#f59e0b"),primary:n("primary","#3b82f6"),background:n("background","#ffffff"),secondaryBg:n("secondaryBackground","#f3f4f6"),cardBg:s?n("secondaryBackground","#1f2937"):"#ffffff",primaryBackground:n("primaryBackground","#1a202c"),border:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"};(0,r.useEffect)(()=>{if(t){const e=parseInt(t,10);f(!0),kn(t).then(e=>{u(e.data),f(!1)}).catch(e=>{console.error("Error loading ranking status:",e),f(!1)}),j(!0),xn(t).then(e=>{const t=new Date;t.setHours(0,0,0,0);const r=e.filter(e=>"live_class"===e.type).filter(e=>new Date(e.note_date)>=t).sort((e,t)=>new Date(e.note_date)-new Date(t.note_date));b(r[0]||null),j(!1)}).catch(e=>{console.error("Error loading live classes:",e),j(!1)}),C(!0),(0,Cn.getCourseLessons)(e,{perPage:100}).then(e=>{console.log("ðŸ“š Dashboard lessons result:",e),N(e.data||[]),C(!1)}).catch(e=>{console.error("Error loading lessons:",e),C(!1)}),hr(e).then(e=>{S(e)}).catch(e=>{console.error("Error loading progress:",e)})}},[t]);const A=(0,r.useMemo)(()=>{const e={quiz:{total:0},text:{total:0},pdf:{total:0},video:{total:0}};return console.log("ðŸ“Š Calculating stepsByType from lessons:",w),w.forEach(t=>{const r=t.meta?._lesson_steps||[];console.log(`  ðŸ“– Lesson ${t.id} has ${r.length} steps:`,r),r.forEach(t=>{t.type&&(e[t.type]||(e[t.type]={total:0}),e[t.type].total+=1)})}),console.log("ðŸ“Š Final stepsByType:",e),e},[w]),M=({completed:e,total:t,icon:r,label:n,color:o})=>{const a=2*Math.PI*45,i=a-(t>0?e/t*100:0)/100*a;return(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center py-4",children:[(0,be.jsxs)("div",{className:"relative",style:{width:"110px",height:"110px"},children:[(0,be.jsxs)("svg",{className:"transform -rotate-90",width:"110",height:"110",children:[(0,be.jsx)("circle",{cx:"55",cy:"55",r:45,stroke:s?"rgba(255,255,255,0.1)":`${o}20`,strokeWidth:"8",fill:"none"}),(0,be.jsx)("circle",{cx:"55",cy:"55",r:45,stroke:o,strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:a,strokeDashoffset:i,style:{transition:"stroke-dashoffset 0.5s ease-in-out"}})]}),(0,be.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,be.jsx)(r,{size:18,style:{color:o},className:"mb-0.5"}),(0,be.jsxs)("span",{className:"text-lg font-bold",style:{color:E.text},children:[e,"/",t]})]})]}),(0,be.jsx)("span",{className:"text-xs font-medium mt-2 text-center",style:{color:E.textMuted},children:n})]})},T=(0,r.useMemo)(()=>{const t=[],r=_?.steps_by_type||{},n=r.quiz||A.quiz||{total:0,completed:0},s=r.text||A.text||{total:0,completed:0},o=r.pdf||A.pdf||{total:0,completed:0},a=r.video||A.video||{total:0,completed:0};(n.total||0)>0&&t.push({type:"quiz",total:n.total,completed:n.completed||0,icon:ce,label:e("courses.tests"),color:E.primary});const i=(s.total||0)+(o.total||0),l=(s.completed||0)+(o.completed||0);return i>0&&t.push({type:"material",total:i,completed:l,icon:ie.A,label:e("courses.supportMaterial"),color:"#10b981"}),(a.total||0)>0&&t.push({type:"video",total:a.total,completed:a.completed||0,icon:Me.A,label:e("courses.videosSection"),color:"#8b5cf6"}),t},[A,_,e,E.primary]),P=_?.percentage||0;return l?(0,be.jsx)("div",{className:"p-6 min-h-full w-full flex items-center justify-center",style:{backgroundColor:E.secondaryBg},children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto",style:{borderColor:E.primary}}),(0,be.jsx)("p",{className:"mt-4",style:{color:E.textMuted},children:e("common.loading")})]})}):(0,be.jsxs)(jn,{courseId:t,courseName:c,sectionName:e("courses.dashboard"),children:[(0,be.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 pb-24 space-y-6",children:[(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,be.jsxs)("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:E.cardBg,borderColor:E.border},children:[(0,be.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:s?E.accent:E.primary},children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Tr.A,{size:18,className:"text-white"}),(0,be.jsx)("span",{className:"font-semibold text-white text-sm",children:e("ranking.yourPosition")})]}),d&&d.completed_quizzes>0&&(0,be.jsxs)("button",{onClick:()=>h(!m),className:"flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold transition-all duration-200 shadow-sm",style:{backgroundColor:"#ffffff",color:s?E.secondaryBg:m?E.accent:E.primary},children:[m?(0,be.jsx)(Sn,{size:14,style:{color:s?E.primaryBackground:E.accent}}):(0,be.jsx)(En,{size:14,style:{color:s?E.primaryBackground:E.primary}}),(0,be.jsx)("span",{children:e(m?"tests.withRisk":"tests.withoutRisk")})]})]})}),(0,be.jsx)("div",{className:"p-6",children:p?(0,be.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:E.primary}})}):d&&d.completed_quizzes>0?(0,be.jsxs)("div",{className:"text-center space-y-4",children:[(0,be.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full",style:{backgroundColor:s?`${E.accent}20`:`${E.accent}15`},children:(0,be.jsxs)("span",{className:"text-2xl font-bold",style:{color:E.accent},children:["#",m?d.position_with_risk||"?":d.position||"?",d.total_users&&(0,be.jsxs)("span",{className:"text-sm font-normal",style:{color:E.textMuted},children:["/",d.total_users]})]})}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,be.jsx)(ar.A,{size:16,style:{color:E.primary}}),(0,be.jsx)("span",{className:"text-lg font-bold",style:{color:E.text},children:a(m?d.average_score_with_risk||0:d.average_score||0)})]}),(0,be.jsx)("p",{className:"text-xs",style:{color:E.textMuted},children:e("ranking.averageScore")})]}),(0,be.jsxs)("div",{className:"pt-4 border-t flex items-center justify-center gap-2",style:{borderColor:E.border},children:[(0,be.jsx)(pe.A,{size:14,style:{color:E.textMuted}}),(0,be.jsxs)("span",{className:"text-xs flex-1",style:{color:E.textMuted},children:[d.completed_quizzes,"/",d.total_quizzes," ",e("ranking.quizzesCompleted")]}),(0,be.jsx)("button",{onClick:()=>x(!0),className:"w-7 h-7 flex items-center justify-center rounded-lg border transition-all duration-200 hover:shadow-md",style:{backgroundColor:s?`${E.accent}20`:`${E.accent}10`,borderColor:s?`${E.accent}40`:`${E.accent}30`},title:e("statistics.ranking"),children:(0,be.jsx)(Bt.A,{size:14,style:{color:E.accent}})})]})]}):(0,be.jsxs)("div",{className:"text-center space-y-4",children:[(0,be.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full",style:{backgroundColor:s?"rgba(255,255,255,0.05)":"#f3f4f6"},children:(0,be.jsx)(Tr.A,{size:32,style:{color:E.textMuted}})}),(0,be.jsx)("div",{children:(0,be.jsx)("span",{className:"inline-block px-3 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:s?`${E.accent}20`:`${E.accent}15`,color:E.accent},children:e("ranking.noTestsYet")})}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)("p",{className:"text-sm font-semibold",style:{color:E.text},children:[d?.completed_quizzes||0," / ",d?.total_quizzes||0]}),(0,be.jsx)("p",{className:"text-xs",style:{color:E.textMuted},children:e("ranking.quizzesCompleted")})]}),(0,be.jsx)("p",{className:"text-xs px-2",style:{color:E.textMuted},children:e("ranking.completeFirstQuiz")})]})})]}),(0,be.jsxs)("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:E.cardBg,borderColor:E.border},children:[(0,be.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:s?E.accent:E.primary},children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(nr.A,{size:18,className:"text-white"}),(0,be.jsx)("span",{className:"font-semibold text-white text-sm",children:e("courses.contentSummary","Resumen de Contenido")})]})}),(0,be.jsx)("div",{className:"p-4",children:T.length>0?(0,be.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:T.map(e=>(0,be.jsx)(M,{completed:e.completed,total:e.total,icon:e.icon,label:e.label,color:e.color},e.type))}):(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,be.jsx)(ce,{size:48,style:{color:E.textMuted},className:"mb-3 opacity-50"}),(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:E.textMuted},children:e("courses.noContent")}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:E.textMuted},children:e("courses.noContentDescription")})]})})]}),(0,be.jsxs)("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:E.cardBg,borderColor:E.border},children:[(0,be.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:s?E.accent:E.primary},children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Me.A,{size:18,className:"text-white"}),(0,be.jsx)("span",{className:"font-semibold text-white text-sm",children:e("dashboard.nextLiveClass","PrÃ³xima Clase en Directo")})]})}),(0,be.jsx)("div",{className:"p-6",children:v?(0,be.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"#0891B2"}})}):y?(0,be.jsxs)("div",{className:"text-center space-y-4",children:[(0,be.jsxs)("div",{className:"inline-flex items-center justify-center px-4 py-2 rounded-full",style:{backgroundColor:s?"rgba(8, 145, 178, 0.2)":"rgba(8, 145, 178, 0.1)"},children:[(0,be.jsx)(sr.A,{size:16,style:{color:"#0891B2"},className:"mr-2"}),(0,be.jsxs)("span",{className:"text-sm font-semibold",style:{color:"#0891B2"},children:[new Date(y.note_date).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"}),y.time&&` - ${y.time.substring(0,5)}`]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"text-base font-bold mb-1",style:{color:E.text},children:y.title}),y.description&&(0,be.jsx)("p",{className:"text-xs line-clamp-2",style:{color:E.textMuted},children:y.description})]}),y.link&&(0,be.jsxs)("a",{href:y.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg font-medium text-sm transition-opacity hover:opacity-90",style:{backgroundColor:"#0891B2",color:"#fff"},children:[(0,be.jsx)(or.A,{size:16}),e("calendar.joinClass","Unirse a la clase")]})]}):(0,be.jsxs)("div",{className:"text-center space-y-4",children:[(0,be.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full",style:{backgroundColor:s?"rgba(255,255,255,0.05)":"#f3f4f6"},children:(0,be.jsx)(Me.A,{size:32,style:{color:E.textMuted}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:E.text},children:e("dashboard.noLiveClasses","Sin clases programadas")}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:E.textMuted},children:e("dashboard.noLiveClassesDescription","No hay clases en directo prÃ³ximas")})]})]})})]})]}),(0,be.jsxs)("div",{className:"rounded-xl border overflow-hidden",style:{backgroundColor:E.cardBg,borderColor:E.border},children:[(0,be.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:s?E.accent:E.primary},children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(ar.A,{size:18,className:"text-white"}),(0,be.jsx)("span",{className:"font-semibold text-white text-sm",children:e("courses.progress","Progreso del Curso")})]}),(0,be.jsxs)("span",{className:"text-white font-bold text-sm",children:[P,"%"]})]})}),(0,be.jsx)("div",{className:"px-6 py-4",children:(0,be.jsx)("div",{className:"rounded-full h-4 overflow-hidden",style:{backgroundColor:s?"rgba(255,255,255,0.1)":`${E.primary}15`},children:(0,be.jsx)("div",{className:"h-full transition-all duration-500 rounded-full",style:{width:`${P}%`,backgroundColor:s?E.accent:E.primary}})})})]})]}),(0,be.jsx)(qn,{courseId:t,courseName:c,isOpen:g,onOpen:()=>x(!0),onClose:()=>x(!1),children:(0,be.jsx)(In,{})})]})},Rn=(0,le.A)("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var $n=a(2102);const Bn=({lessons:e,isLoading:t,selectedStepId:n,onSelectStep:s,isOpen:a,onClose:i})=>{const{t:l}=(0,o.Bd)(),{getColor:c}=(0,se.DP)(),[d,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&e.length>0&&console.log("ðŸ” DEBUG CourseLessonList: Orden de lecciones recibidas:",e.map((e,t)=>({index:t,id:e.id,title:e.title?.rendered||e.title,_lesson_order:e.meta?._lesson_order})))},[e]),(0,r.useEffect)(()=>{if(n&&!d){const t=e.find(e=>e.meta?._lesson_steps?.some(e=>e.id===n));t&&u(t.id)}},[n,d,e]);const p=e=>{switch(e){case"video":return(0,be.jsx)(Rn,{className:"w-4 h-4 text-gray-500 flex-shrink-0"});case"quiz":return(0,be.jsx)(Be.A,{className:"w-4 h-4 text-gray-500 flex-shrink-0"});default:return(0,be.jsx)(ie.A,{className:"w-4 h-4 text-gray-500 flex-shrink-0"})}},f=(0,be.jsxs)("div",{className:"p-4 animate-pulse",children:[(0,be.jsx)("div",{className:"h-6 bg-gray-300 rounded w-3/4 mb-6"}),(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsx)("div",{className:"h-5 bg-gray-300 rounded w-full"}),(0,be.jsx)("div",{className:"h-5 bg-gray-300 rounded w-5/6"}),(0,be.jsx)("div",{className:"h-5 bg-gray-300 rounded w-full"})]})]});return a?(0,be.jsx)(be.Fragment,{children:(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity flex items-center justify-center p-4",onClick:i,children:(0,be.jsxs)("div",{className:"w-full max-w-4xl max-h-[85vh] rounded-xl shadow-lg border-2 flex flex-col",style:{backgroundColor:c("secondaryBackground","#f8f9fa"),borderColor:c("primary","#3b82f6")},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"p-6 border-b-2 flex items-center justify-between flex-shrink-0",style:{borderColor:c("primary","#3b82f6")+"30"},children:[(0,be.jsx)("h2",{className:"text-2xl font-bold qe-text-primary",children:l("courses.courseContent")}),(0,be.jsx)("button",{onClick:i,className:"p-2 rounded-lg transition-all",style:{backgroundColor:c("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=c("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=c("primary","#3b82f6")+"15"},title:"Cerrar",children:(0,be.jsx)(xe.A,{className:"w-6 h-6",style:{color:c("primary","#3b82f6")}})})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:t?f:e&&e.length>0?(0,be.jsx)("ul",{className:"space-y-3 max-w-3xl mx-auto",children:e.map(e=>{const t=d===e.id,r=e.meta?._lesson_steps||[],o=e.title?.rendered||e.title||"Sin tÃ­tulo";return(0,be.jsxs)("li",{className:"rounded-lg overflow-hidden border-2",style:{borderColor:c("primary","#3b82f6")+"30"},children:[(0,be.jsxs)("div",{onClick:()=>{return t=e.id,void u(e=>e===t?null:t);var t},className:"p-4 flex justify-between items-center cursor-pointer transition-all hover:bg-gray-100",style:{backgroundColor:t?c("primary","#3b82f6")+"10":"transparent"},children:[(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsx)(ae.A,{className:"w-5 h-5 flex-shrink-0",style:{color:c("primary","#3b82f6")}}),(0,be.jsx)("span",{className:"text-sm font-bold qe-text-primary",children:o})]}),r.length>0&&(t?(0,be.jsx)($n.A,{className:"w-5 h-5",style:{color:c("primary","#3b82f6")}}):(0,be.jsx)(Ut.A,{className:"w-5 h-5 qe-text-secondary"}))]}),t&&r.length>0&&(0,be.jsx)("ul",{className:"bg-white bg-opacity-50",children:r.map(t=>{const r=t.id===n,o=(e=>"quiz"===e.type&&e.data?.quiz_title?e.data.quiz_title:e.title||l("untitled"))(t);return(0,be.jsxs)("li",{onClick:()=>((e,t)=>{s(e,t),i&&i()})(t,e),className:"flex items-center space-x-2 py-3 px-6 border-l-4 transition-all cursor-pointer hover:bg-gray-50",style:{borderLeftColor:r?c("primary","#3b82f6"):"transparent",backgroundColor:r?c("primary","#3b82f6")+"15":"transparent"},onMouseEnter:e=>{r||(e.currentTarget.style.backgroundColor=c("primary","#3b82f6")+"08")},onMouseLeave:e=>{r||(e.currentTarget.style.backgroundColor="transparent")},children:[p(t.type),(0,be.jsx)("span",{className:"text-sm "+(r?"font-semibold qe-text-primary":"qe-text-secondary"),children:o})]},t.id)})})]},e.id)})}):(0,be.jsx)("p",{className:"p-4 qe-text-secondary text-center",children:l("noLessonsForCourse")})}),(0,be.jsx)("div",{className:"p-4 border-t-2 flex justify-center flex-shrink-0",style:{borderColor:c("primary","#3b82f6")+"30"},children:(0,be.jsx)("button",{onClick:i,className:"px-6 py-2 rounded-lg text-white font-semibold transition-all shadow-md hover:shadow-lg",style:{backgroundColor:c("primary","#3b82f6")},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:"Cerrar"})})]})})}):null},Fn=(0,le.A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),Un=(0,le.A)("pen-tool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Wn=(0,le.A)("highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]),Hn=(0,le.A)("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]);var Qn=a(5773),Vn=a(8766);const Yn=async(e,t=null,r=null)=>{try{const{endpoints:n}=(0,Ye.getApiConfig)(),s=`${n.custom_api}/quiz-attempts/start`;console.log(`ðŸš€ Starting quiz attempt for quiz ID: ${e}, Lesson ID: ${t}, Course ID: ${r}`);const o={quiz_id:e};t&&(o.lesson_id=t),r&&(o.course_id=parseInt(r,10));const a=await(0,Ke.qb)(s,{method:"POST",body:JSON.stringify(o)});return console.log("âœ… Attempt started:",a.data),a.data.data}catch(e){throw console.error("âŒ Error starting quiz attempt:",e),e}},Kn=(0,le.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Gn=n().memo(({question:e,index:t,questionNumber:n,onSelectAnswer:s,selectedAnswer:a,onAnswerChange:i,isRisked:l,onToggleRisk:c,onClearAnswer:d,isSubmitted:u,disabled:p=!1,showCorrectAnswer:f=!1,isPracticeMode:m=!1,showRiskSelector:h=!1,className:g=""})=>{const[x,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),{getColor:j,isDarkMode:w}=(0,se.DP)(),{t:N}=(0,o.Bd)();if(!e)return null;const{id:k,title:C,meta:_}=e,S="object"==typeof C&&C?.rendered?C.rendered:C,E=_?._question_options||[],A=void 0!==n?n:t+1,M=null!=a?l?"risked":"answered":"unanswered",T=w?j("textPrimary","#f9fafb"):j("primary","#1a202c"),P=w?"#ffffff":"#374151",O=j("secondaryBackground",w?"#1f2937":"#ffffff"),z=w?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",q=w?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",D=j("accent","#f59e0b"),I=(e="")=>{if("unanswered"===("risked"===M?"answered":M))return w?`#ffffff${e}`:`#374151${e}`;if(w){const t=j("primary","#3b82f6");return e?`${t}${e}`:t}return`${j("primary","#3b82f6")}${e}`},L=()=>"unanswered"===("risked"===M?"answered":M)?w?"rgba(255,255,255,0.7)":"#374151":w?"#4a8ae8":j("primary","#3b82f6"),R=()=>"unanswered"===("risked"===M?"answered":M)?w?"rgba(255,255,255,0.35)":"rgba(55,65,81,0.35)":w?`${j("primary","#3b82f6")}80`:`${j("primary","#3b82f6")}40`;return(0,be.jsx)("div",{id:`quiz-question-${k}`,"data-question-index":t,"data-question-number":A,className:`rounded-lg overflow-hidden shadow-sm mb-4 scroll-mt-6 transition-all duration-200 ${g}`,style:{backgroundColor:O,borderTop:`2px solid ${R()}`,borderRight:`2px solid ${R()}`,borderBottom:`2px solid ${R()}`,borderLeft:`4px solid ${L()}`},children:(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"px-4 py-3 border-b",style:{backgroundColor:w?"unanswered"===M?"rgba(255,255,255,0.03)":I("10"):I("08"),borderColor:w?"unanswered"===M?"rgba(255,255,255,0.1)":I("20"):I("10")},children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"flex items-center justify-center rounded-full font-bold text-sm",style:{width:"35px",height:"35px",backgroundColor:L(),color:"unanswered"===M&&w?j("secondaryBackground","#1f2937"):"#ffffff"},children:A}),"unanswered"===M&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full text-[13px] font-semibold",style:{backgroundColor:w?"rgba(255,255,255,0.15)":`${I()}20`,color:w?"#ffffff":I()},children:[(0,be.jsx)(Or,{size:15}),(0,be.jsx)("span",{children:N("quizzes.question.unanswered")})]}),"risked"===M&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full text-[13px] font-semibold",style:{backgroundColor:`${D}20`,color:D},children:[(0,be.jsx)(ir,{size:15}),(0,be.jsx)("span",{children:N("quizzes.question.withRisk")})]}),"answered"===M&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1 rounded-full text-[13px] font-semibold",style:{backgroundColor:w?`${j("primary","#3b82f6")}30`:I("20"),color:w?"#93c5fd":I()},children:[(0,be.jsx)(Oe.A,{size:15}),(0,be.jsx)("span",{children:N("quizzes.question.answered")})]})]}),null!=a&&!u&&(0,be.jsx)("button",{type:"button",onClick:()=>d(k),title:N("quizzes.question.clearSelection"),className:"p-1.5 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:P},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=w?"rgba(239,68,68,0.2)":"#fee2e2",e.currentTarget.style.color="#dc2626"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.color=P},children:(0,be.jsx)(pr.A,{size:16})})]})}),(0,be.jsx)("div",{className:"px-4 py-3",children:(0,be.jsx)("h3",{className:"text-lg font-medium leading-relaxed",style:{color:T},dangerouslySetInnerHTML:{__html:S||""}})}),(0,be.jsx)("div",{className:"px-4 pb-3 space-y-2",children:E.map((e,t)=>{const r=null!=a&&e.id===a;return(0,be.jsx)("label",{className:"flex items-start cursor-pointer p-3 rounded-lg transition-all duration-200 group",style:{backgroundColor:r?I("15"):"transparent",border:`2px solid ${r?I():w?"rgba(255,255,255,0.35)":"rgba(55,65,81,0.35)"}`},onMouseEnter:e=>{r||(e.currentTarget.style.backgroundColor=w?"rgba(255,255,255,0.05)":"rgba(55,65,81,0.05)",e.currentTarget.style.borderColor=w?"rgba(255,255,255,0.5)":"rgba(55,65,81,0.55)")},onMouseLeave:e=>{r||(e.currentTarget.style.backgroundColor="transparent",e.currentTarget.style.borderColor=w?"rgba(255,255,255,0.35)":"rgba(55,65,81,0.35)")},children:(0,be.jsxs)("div",{className:"flex items-start gap-3 flex-1",children:[(0,be.jsx)("div",{className:"flex items-center justify-center rounded-full transition-all duration-200 flex-shrink-0",style:{width:"23px",height:"23px",border:`2px solid ${r?I():w?"rgba(255,255,255,0.55)":"rgba(55,65,81,0.55)"}`,backgroundColor:r?I():"transparent"},children:r&&(0,be.jsx)("div",{className:"rounded-full",style:{width:"8px",height:"8px",backgroundColor:"#ffffff"}})}),(0,be.jsx)("input",{type:"radio",name:`question-${k}`,value:e.id,checked:r,onChange:()=>{return t=k,r=e.id,void(m&&i?i(r):s&&s(t,r));var t,r},disabled:u||p,className:"sr-only"}),(0,be.jsx)("div",{className:"flex items-center justify-center rounded font-bold text-xs transition-all duration-200 flex-shrink-0",style:{width:"25px",height:"25px",backgroundColor:r?I():w?"rgba(255,255,255,0.15)":"rgba(55,65,81,0.12)",color:r?"#ffffff":P},children:String.fromCharCode(65+t)}),(0,be.jsx)("span",{className:"text-lg leading-relaxed transition-colors duration-200",style:{color:T,fontWeight:r?"600":"500"},children:e.text})]})},e.id)})}),m&&(0,be.jsxs)("div",{className:"border-t",style:{borderColor:q},children:[(0,be.jsxs)("button",{onClick:()=>y(!x),className:"flex items-center justify-between w-full text-left px-6 py-4 transition-colors duration-200",style:{backgroundColor:x?z:"transparent"},onMouseEnter:e=>{x||(e.currentTarget.style.backgroundColor=z)},onMouseLeave:e=>{x||(e.currentTarget.style.backgroundColor="transparent")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"flex items-center justify-center rounded-lg",style:{width:"36px",height:"36px",backgroundColor:w?"rgba(59,130,246,0.2)":"rgba(59,130,246,0.1)"},children:(0,be.jsx)(Kn,{size:18,style:{color:j("primary","#3b82f6")}})}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:T},children:N("quizzes.question.answerExplanation")})]}),(0,be.jsx)("div",{className:"p-1 rounded transition-transform duration-200",style:{transform:x?"rotate(180deg)":"rotate(0deg)"},children:(0,be.jsx)(Ut.A,{size:20,style:{color:T}})})]}),x&&(0,be.jsx)("div",{className:"px-6 pb-5",style:{backgroundColor:z},children:(0,be.jsx)("div",{className:"p-4 rounded-lg",style:{backgroundColor:w?"rgba(255,255,255,0.05)":j("background","#ffffff"),border:`1px solid ${q}`},children:(0,be.jsx)("p",{className:"text-sm leading-relaxed",style:{color:P},children:_?._question_explanation||N("quizzes.question.noExplanationAvailable")})})})]}),m&&(0,be.jsxs)("div",{className:"border-t",style:{borderColor:q},children:[(0,be.jsxs)("button",{onClick:()=>v(!b),className:"flex items-center justify-between w-full text-left px-6 py-4 transition-colors duration-200",style:{backgroundColor:b?`${j("accent","#f59e0b")}15`:"transparent"},onMouseEnter:e=>{b||(e.currentTarget.style.backgroundColor=`${j("accent","#f59e0b")}08`)},onMouseLeave:e=>{b||(e.currentTarget.style.backgroundColor="transparent")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"flex items-center justify-center rounded-lg",style:{width:"36px",height:"36px",backgroundColor:`${j("accent","#f59e0b")}20`},children:(0,be.jsx)(ir,{size:18,style:{color:j("accent","#f59e0b")}})}),(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:j("accent","#f59e0b")},children:N("quizzes.question.questionStatistics")})]}),(0,be.jsx)("div",{className:"p-1 rounded transition-transform duration-200",style:{transform:b?"rotate(180deg)":"rotate(0deg)"},children:(0,be.jsx)(Ut.A,{size:20,style:{color:j("accent","#f59e0b")}})})]}),b&&(0,be.jsx)("div",{className:"px-6 pb-5",style:{backgroundColor:`${j("accent","#f59e0b")}10`},children:(0,be.jsx)("div",{className:"p-4 rounded-lg",style:{backgroundColor:w?"rgba(255,255,255,0.05)":j("background","#ffffff"),border:`1px solid ${j("accent","#f59e0b")}30`},children:void 0!==_?._question_fail_rate?(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("span",{className:"text-sm",style:{color:P},children:[N("quizzes.question.failureRate"),":"]}),(0,be.jsxs)("span",{className:"text-2xl font-bold",style:{color:j("accent","#f59e0b")},children:[_._question_fail_rate,"%"]})]}),(0,be.jsx)("div",{className:"w-full rounded-full overflow-hidden",style:{height:"8px",backgroundColor:`${j("accent","#f59e0b")}20`},children:(0,be.jsx)("div",{className:"h-full transition-all duration-300",style:{width:`${_._question_fail_rate}%`,backgroundColor:j("accent","#f59e0b")}})}),_._question_fail_rate>50&&(0,be.jsxs)("div",{className:"flex items-start gap-2 p-3 rounded-lg text-xs",style:{backgroundColor:`${j("accent","#f59e0b")}15`,color:j("accent","#f59e0b")},children:[(0,be.jsx)("span",{className:"font-bold",children:"âš ï¸"}),(0,be.jsx)("span",{children:N("quizzes.question.difficultQuestion")})]})]}):(0,be.jsx)("p",{className:"text-sm",style:{color:P},children:N("quizzes.question.noStatisticsAvailable")})})})]}),null!=a&&!u&&h&&c&&(0,be.jsx)("div",{className:"px-4 py-3 border-t",style:{backgroundColor:z,borderColor:I("10")},children:(0,be.jsxs)("label",{className:"flex items-center cursor-pointer group",children:[(0,be.jsx)("div",{className:"relative flex items-center justify-center rounded transition-all duration-200",style:{width:"20px",height:"20px",border:`2px solid ${l?j("accent","#f59e0b"):w?"rgba(255,255,255,0.55)":"rgba(55,65,81,0.55)"}`,backgroundColor:l?j("accent","#f59e0b"):"transparent"},children:l&&(0,be.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"#ffffff",strokeWidth:"3",viewBox:"0 0 24 24",children:(0,be.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),(0,be.jsx)("input",{type:"checkbox",checked:l,onChange:()=>c(k),disabled:u,className:"sr-only"}),(0,be.jsx)("span",{className:"ml-3 text-sm font-medium transition-colors duration-200",style:{color:l?j("accent","#f59e0b"):P},children:N("quizzes.question.markWithRisk")})]})})]})})}),Xn=({label:e,value:t,textColor:r,bgCard:n})=>(0,be.jsxs)("div",{className:"text-center px-2 py-1.5 rounded border-2",style:{backgroundColor:n,borderColor:r},children:[(0,be.jsx)("span",{className:"block text-xs font-semibold leading-tight",style:{color:r},children:e}),(0,be.jsx)("span",{className:"block text-[22px] font-bold",style:{color:r},children:t})]}),Jn=({bgColor:e,borderColor:t,textColor:r,text:n})=>(0,be.jsx)("div",{className:"px-3 py-1.5 rounded-md text-[11px] font-semibold flex items-center justify-center border-2",style:{backgroundColor:e,borderColor:t,color:r},children:n}),Zn=n().memo(({questions:e,questionIds:t=[],totalCount:n=null,userAnswers:s,riskedAnswers:a,onQuestionSelect:i,onSubmit:l,loadedCount:c=0,onLoadMore:d=null,scrollContainerRef:u=null})=>{const{getColor:p,isDarkMode:f}=(0,se.DP)(),{t:m}=(0,o.Bd)(),h=Object.keys(s).length,g=a.length,x=null!==n?n:e?e.length:t?t.length:0,y=Math.max(0,x-h),b=(Math.ceil(x/10),f?p("secondaryBackground","#1f2937"):"#ffffff"),v=f?p("textPrimary","#f9fafb"):p("primary","#1a202c"),j=p("primary","#1a202c"),w={unanswered:f?"#ffffff":"#6b7280",unansweredBg:f?"rgba(255,255,255,0.1)":"rgba(107,114,128,0.1)",unansweredBorder:f?"rgba(255,255,255,0.3)":"rgba(107,114,128,0.3)",answered:v,answeredBg:j,answeredBgBright:f?"#5a9cfc":j,risked:p("accent","#f59e0b"),impugned:"#9ca3af"},N=(0,r.useRef)(null),k=(0,r.useRef)(null),C=(0,r.useRef)(null),_=(0,r.useRef)(null),S=(0,r.useRef)(null),[E,A]=(0,r.useState)(28);return(0,r.useEffect)(()=>{const e=N.current;if(!e)return;const t=()=>{const t=k.current,r=C.current,n=_.current,s=S.current;if(!t||!r||!s)return;const o=window.innerHeight,{top:a}=e.getBoundingClientRect(),i=Math.max(100,o-a-8),l=t.offsetHeight,c=r.offsetHeight,d=n?n.offsetHeight+4:20,u=s.offsetHeight,p=Math.max(0,i-l-c-d-u-16),f=Math.ceil(x/10)||1,m=(p-4*(f-1))/f;A(Math.max(16,Math.min(28,Math.floor(m))))},r=new ResizeObserver(t);return r.observe(e),t(),window.addEventListener("resize",t),()=>{r.disconnect(),window.removeEventListener("resize",t)}},[x]),(0,be.jsx)("div",{className:"w-full",children:(0,be.jsxs)("div",{ref:N,className:"rounded-lg shadow-sm border-2 transition-all duration-200 p-2",style:{backgroundColor:p("secondaryBackground","#ffffff"),borderColor:f?p("accent","#f59e0b"):p("borderColor","#e5e7eb")},children:[(0,be.jsx)("div",{ref:k,className:"px-1 py-1.5 border-b",style:{borderColor:f?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:(0,be.jsxs)("div",{className:"flex flex-wrap gap-1.5",children:[(0,be.jsx)(Jn,{bgColor:w.unansweredBg,borderColor:w.unansweredBorder,textColor:w.unanswered,text:m("quizzes.sidebar.unanswered")}),(0,be.jsx)(Jn,{bgColor:w.answeredBgBright,borderColor:w.answeredBgBright,textColor:"#ffffff",text:m("quizzes.sidebar.answered")}),(0,be.jsx)(Jn,{bgColor:w.risked,borderColor:w.risked,textColor:"#ffffff",text:m("quizzes.sidebar.withRisk")})]})}),(0,be.jsx)("div",{ref:C,className:"px-1 py-2 border-b",style:{borderColor:f?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,be.jsx)(Xn,{label:m("quizzes.sidebar.answered"),value:h,textColor:w.answered,bgCard:b}),(0,be.jsx)(Xn,{label:m("quizzes.sidebar.withRisk"),value:g,textColor:w.risked,bgCard:b}),(0,be.jsx)(Xn,{label:m("quizzes.sidebar.withoutRisk"),value:h-g,textColor:w.answered,bgCard:b}),(0,be.jsx)(Xn,{label:m("quizzes.sidebar.unanswered"),value:y,textColor:w.unanswered,bgCard:b})]})}),(0,be.jsxs)("div",{className:"px-1 py-1.5 border-b",style:{borderColor:f?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:[(0,be.jsx)("h3",{ref:_,className:"text-[11px] font-semibold mb-1",style:{color:v},children:m("quizzes.sidebar.questionsMap")}),(0,be.jsx)("div",{children:(0,be.jsx)("div",{className:"grid grid-cols-10 gap-1",children:Array.from({length:x}).map((r,n)=>{const o=t&&t[n]?t[n]:e&&e[n]?e[n].id:`unloaded-${n}`,l=e&&e.some(e=>e.id===o),c=l,p=s.hasOwnProperty(o),h=a.includes(o);let g="",x="",y="",b="1";return l?h?(g=w.risked,x=w.risked,y="#ffffff"):p?(g=w.answeredBgBright,x=w.answeredBgBright,y="#ffffff"):(g=w.unansweredBg,x=w.unansweredBorder,y=w.unanswered):(g=f?"rgba(255,255,255,0.05)":w.unanswered+"15",x=f?"rgba(255,255,255,0.15)":w.unanswered+"30",y=f?"rgba(255,255,255,0.4)":w.unanswered+"60",b="0.5"),(0,be.jsx)("button",{onClick:()=>{console.log("ðŸ–±ï¸ Button clicked for question:",n+1,"isLoaded:",l),c?(async r=>{console.log("ðŸŽ¯ scrollToQuestion called with absoluteIndex:",r);const n=t[r];if(!n)return void console.warn("âš ï¸ Question ID not found for index:",r);const s=u?.current;if(!s)return void console.warn("âš ï¸ Scroll container not ready");const o=()=>s.querySelector(`#quiz-question-${n}`);let a=o();if(!a){console.log("â³ Question not loaded yet, checking if we can load more...");const t=e?.find(e=>e.id===n);if(!t&&d&&"function"==typeof d)try{await d(),await new Promise(e=>setTimeout(e,200)),a=o()}catch(e){console.error("âŒ Error loading more questions:",e)}}if(!a)return void console.warn("âŒ Question element not found even after attempting to load");const l=()=>{const e=s.getBoundingClientRect(),t=a.getBoundingClientRect().top-e.top+s.scrollTop,r=Math.max(0,t-16);s.scrollTo({top:r,behavior:"smooth"})};requestAnimationFrame(()=>{requestAnimationFrame(l)});const c=a.style.borderLeftWidth||"4px";if(a.style.borderLeftWidth="12px",a.style.transition="border-left-width 0.3s ease",setTimeout(()=>{a.style.borderLeftWidth=c},2e3),i){var p;const t=null!==(p=e?.findIndex(e=>e.id===n))&&void 0!==p?p:r;console.log("ðŸ“ž Calling onQuestionSelect with relativeIndex:",t),i(t)}})(n):l?console.log("âš ï¸ Element not ready yet, please wait..."):console.log("âš ï¸ Question not loaded yet")},disabled:!c,className:"w-full rounded font-bold transition-all duration-150 flex items-center justify-center border-2 disabled:cursor-wait hover:enabled:scale-110 hover:enabled:shadow-sm cursor-pointer",style:{backgroundColor:g,borderColor:x,color:y,opacity:b,height:E,fontSize:Math.max(8,Math.floor(.42*E)),lineHeight:1},title:l?`${m("quizzes.sidebar.question")} ${n+1}`:m("quizzes.sidebar.loadingQuestion"),children:n+1},o)})})})]}),(0,be.jsx)("div",{ref:S,className:"px-2 py-2 flex-shrink-0",children:(0,be.jsx)("button",{onClick:l,className:"w-full py-3 text-[15px] text-white font-bold rounded-lg shadow-sm transition-all duration-200 hover:scale-[1.02] hover:shadow-md active:scale-[0.98] text-center",style:{backgroundColor:w.answeredBg},children:m("quizzes.sidebar.finishExam")})})]})})}),es=({durationMinutes:e,onTimeUp:t,isPaused:n,initialTimeRemaining:s=null,onTick:a=null,compact:i=!1})=>{const{getColor:l,isDarkMode:c}=(0,se.DP)(),{t:d}=(0,o.Bd)(),[u,p]=(0,r.useState)(null!==s?s:60*e),f=(0,r.useRef)(t),m=(0,r.useRef)(a);(0,r.useEffect)(()=>{f.current=t},[t]),(0,r.useEffect)(()=>{m.current=a},[a]);const h=c?l("secondaryBackground","#1f2937"):"#ffffff",g=c?l("textPrimary","#f9fafb"):"#111827",x=c?l("textSecondary","#9ca3af"):"#374151",y=c?"rgba(255,255,255,0.3)":"#e5e7eb";(0,r.useEffect)(()=>{null!==s&&p(s)},[s]),(0,r.useEffect)(()=>{if(n||e<=0)return;const t=setInterval(()=>{p(e=>{if(e<=1)return clearInterval(t),f.current&&(console.log("â° Time is up! Submitting quiz..."),f.current()),0;const r=e-1;return m.current&&m.current(r),r})},1e3);return()=>clearInterval(t)},[n,e]);const b=e=>`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`;return e<=0?null:i?(0,be.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-lg",style:{backgroundColor:c?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:g},children:[(0,be.jsx)($e.A,{className:"w-4 h-4",style:{color:x}}),(0,be.jsx)("span",{className:"text-sm font-semibold tabular-nums",children:b(u)})]}):(0,be.jsxs)("div",{className:"mt-4 p-4 rounded-lg border shadow-sm text-center",style:{backgroundColor:h,borderColor:y},children:[(0,be.jsxs)("div",{className:"flex items-center justify-center",style:{color:x},children:[(0,be.jsx)($e.A,{className:"w-5 h-5 mr-2"}),(0,be.jsx)("span",{className:"text-lg font-semibold",children:d("quizzes.timeRemaining")})]}),(0,be.jsx)("p",{className:"text-3xl font-bold mt-2",style:{color:g},children:b(u)})]})},ts=n().memo(({isActive:e,isDrawingEnabled:t,tool:n,color:s,lineWidth:o,onClose:a,onClear:i,containerRef:l,showToolbar:c})=>{const d=(0,r.useRef)(null),[u,p]=(0,r.useState)(!1),[f,m]=(0,r.useState)(null),{getColor:h}=(0,se.DP)(),g=(0,r.useRef)(n),x=(0,r.useRef)(s),y=(0,r.useRef)(o);(0,r.useEffect)(()=>{console.log("ðŸ”„ Updating refs with new props:",{tool:n,color:s,lineWidth:o}),g.current=n,x.current=s,y.current=o,console.log("  â†’ Refs now contain:",{tool:g.current,color:x.current,lineWidth:y.current})},[n,s,o]),(0,r.useEffect)(()=>{i&&f&&d.current&&i(()=>{f.clearRect(0,0,d.current.width,d.current.height)})},[f,i]),(0,r.useEffect)(()=>{if(!d.current||!e||!l?.current)return;const t=d.current,r=l.current,n=t.getContext("2d"),s=()=>{const e=Math.max(r.scrollWidth,r.clientWidth),s=Math.max(r.scrollHeight,r.clientHeight);if(t.width!==e||t.height!==s){const r=t.width>0&&t.height>0?n.getImageData(0,0,t.width,t.height):null;t.width=e,t.height=s,n.lineCap="round",n.lineJoin="round",r&&n.putImageData(r,0,0),console.log("ðŸŽ¨ Canvas resized to:",{width:e,height:s})}};s();const o=new ResizeObserver(()=>{s()});o.observe(r),window.addEventListener("resize",s);const a=setInterval(s,2e3);return m(n),()=>{window.removeEventListener("resize",s),o.disconnect(),clearInterval(a)}},[e,l]),(0,r.useEffect)(()=>{console.log("ðŸ“¦ DrawingCanvas props updated:",{tool:n,color:s,lineWidth:o,isActive:e,isDrawingEnabled:t})},[n,s,o,e,t]),(0,r.useEffect)(()=>{if(f)if(console.log("ðŸŽ¨ Drawing tool changed (applying to context):",{tool:n,color:s,lineWidth:o}),"pen"===n)f.globalCompositeOperation="source-over",f.strokeStyle=s,f.lineWidth=o,f.globalAlpha=1;else if("highlighter"===n){f.globalCompositeOperation="source-over";const e=parseInt(s.slice(1,3),16),t=parseInt(s.slice(3,5),16),r=parseInt(s.slice(5,7),16);f.strokeStyle=`rgba(${e}, ${t}, ${r}, 0.4)`,f.lineWidth=4*o,f.globalAlpha=1}else"eraser"===n&&(f.globalCompositeOperation="destination-out",f.lineWidth=3*o,f.globalAlpha=1)},[f,n,s,o]);const b=e=>{if(!f||!l?.current||!t)return;const r=g.current,n=x.current,s=y.current;if(console.log("âœï¸ Starting to draw with:",{tool:r,color:n,lineWidth:s}),"pen"===r)f.globalCompositeOperation="source-over",f.strokeStyle=n,f.lineWidth=s,f.globalAlpha=1,console.log("  â†’ Applied PEN style:",{strokeStyle:f.strokeStyle,lineWidth:f.lineWidth});else if("highlighter"===r){f.globalCompositeOperation="source-over";const e=parseInt(n.slice(1,3),16),t=parseInt(n.slice(3,5),16),r=parseInt(n.slice(5,7),16);f.strokeStyle=`rgba(${e}, ${t}, ${r}, 0.4)`,f.lineWidth=4*s,f.globalAlpha=1,console.log("  â†’ Applied HIGHLIGHTER style:",{strokeStyle:f.strokeStyle,lineWidth:f.lineWidth})}else"eraser"===r&&(f.globalCompositeOperation="destination-out",f.lineWidth=3*s,f.globalAlpha=1,console.log("  â†’ Applied ERASER style:",{compositeOperation:f.globalCompositeOperation,lineWidth:f.lineWidth}));p(!0);const o=l.current.getBoundingClientRect(),a=e.clientX-o.left+l.current.scrollLeft,i=e.clientY-o.top+l.current.scrollTop;f.beginPath(),f.moveTo(a,i)},v=e=>{if(!(u&&f&&l?.current&&t))return;const r=l.current.getBoundingClientRect(),n=e.clientX-r.left+l.current.scrollLeft,s=e.clientY-r.top+l.current.scrollTop;f.lineTo(n,s),f.stroke()},j=()=>{f&&(p(!1),f.closePath())};return e?(0,be.jsx)("canvas",{ref:d,className:"absolute top-0 left-0 w-full",style:{cursor:t?"crosshair":"default",zIndex:20,pointerEvents:t?"auto":"none",touchAction:"none"},onMouseDown:b,onMouseMove:v,onMouseUp:j,onMouseLeave:j,onTouchStart:e=>{e.preventDefault();const t=e.touches[0];b({clientX:t.clientX,clientY:t.clientY})},onTouchMove:e=>{e.preventDefault();const t=e.touches[0];v({clientX:t.clientX,clientY:t.clientY})},onTouchEnd:e=>{e.preventDefault(),j()}}):null});var rs=a(4934);const ns=n().memo(({isActive:e,tool:t,onToolChange:r,color:n,onColorChange:s,lineWidth:o,onLineWidthChange:a,onClear:i,onClose:l})=>{const{getColor:c,isDarkMode:d}=(0,se.DP)();if(!e)return null;const u=[{id:"pen",icon:rs.A,label:"LÃ¡piz"},{id:"highlighter",icon:Wn,label:"Subrayador"},{id:"eraser",icon:Hn,label:"Borrador"}],p=d?c("secondaryBackground","#1f2937"):c("background","#ffffff"),f=d?"#f9fafb":c("textPrimary","#1f2937"),m=d?"#9ca3af":c("textSecondary","#6b7280"),h=d?"rgba(255,255,255,0.2)":c("borderColor","#e5e7eb"),g=d?c("accent","#f59e0b"):c("primary","#3b82f6");return(0,be.jsxs)("div",{className:"fixed top-20 right-4 z-50 rounded-xl shadow-2xl border-2 overflow-hidden",style:{backgroundColor:p,borderColor:g,maxWidth:"280px"},children:[(0,be.jsxs)("div",{className:"px-4 py-2 flex items-center justify-between",style:{backgroundColor:g,color:"#ffffff"},children:[(0,be.jsx)("span",{className:"font-semibold text-sm",children:"Herramientas de Dibujo"}),(0,be.jsx)("button",{onClick:l,className:"p-1 rounded hover:bg-white/20 transition-colors",children:(0,be.jsx)(xe.A,{size:16})})]}),(0,be.jsxs)("div",{className:"p-3 space-y-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"text-xs font-semibold mb-2 block",style:{color:m},children:"Herramienta"}),(0,be.jsx)("div",{className:"flex gap-2",children:u.map(({id:e,icon:n,label:s})=>(0,be.jsxs)("button",{onClick:()=>r(e),className:"flex-1 p-2 rounded-lg border-2 transition-all flex flex-col items-center gap-1",style:{borderColor:t===e?g:h,backgroundColor:t===e?`${g}20`:"transparent",color:t===e?g:f},title:s,children:[(0,be.jsx)(n,{size:18}),(0,be.jsx)("span",{className:"text-xs font-medium",children:s})]},e))})]}),("pen"===t||"highlighter"===t)&&(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"text-xs font-semibold mb-2 block",style:{color:m},children:"Color"}),(0,be.jsx)("div",{className:"flex flex-wrap gap-2",children:["#000000","#ff0000","#0000ff","#00ff00","#ffff00","#ff00ff","#00ffff","#ffa500"].map(e=>(0,be.jsx)("button",{onClick:()=>s(e),className:"w-8 h-8 rounded-lg border-2 transition-all",style:{backgroundColor:e,borderColor:n===e?g:h,transform:n===e?"scale(1.1)":"scale(1)"},title:e},e))})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"text-xs font-semibold mb-2 block",style:{color:m},children:"Grosor"}),(0,be.jsx)("div",{className:"flex gap-2",children:[{value:1,label:"Fino"},{value:2,label:"Medio"},{value:4,label:"Grueso"}].map(({value:e,label:t})=>(0,be.jsx)("button",{onClick:()=>a(e),className:"flex-1 py-2 px-3 rounded-lg border-2 transition-all text-xs font-medium",style:{borderColor:o===e?g:h,backgroundColor:o===e?`${g}20`:"transparent",color:o===e?g:f},children:t},e))})]}),(0,be.jsxs)("button",{onClick:i,className:"w-full py-2 px-4 rounded-lg font-medium text-sm flex items-center justify-center gap-2 transition-all",style:{backgroundColor:"#ef4444",color:"#ffffff"},children:[(0,be.jsx)(pr.A,{size:16}),"Borrar Todo"]})]})]})}),ss=({autosaveData:e,onResume:t,onRestart:r,onClose:n,isOpen:s=!0})=>{const{getColor:a,isDarkMode:i}=(0,se.DP)(),{t:l}=(0,o.Bd)();if(!s||!e)return null;const c=a("textPrimary","#f9fafb"),d=a("secondaryBackground","#1f2937"),u={text:i?c:a("primary","#1a202c"),textMuted:i?`${c}B3`:a("textMuted","#6b7280"),accent:a("accent","#f59e0b"),primary:a("primary","#1a202c"),cardBg:i?d:"#ffffff",overlayBg:i?"rgba(0,0,0,0.8)":"rgba(0,0,0,0.5)",infoBg:i?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.03)",border:i?`${c}20`:"rgba(0,0,0,0.1)"},{quiz_title:p,current_question_index:f,answers:m,time_remaining:h,updated_at:g,quiz_data:x}=e,y=x?.meta?._quiz_question_ids?.length||0,b=Object.keys(m||{}).length,v=y>0?Math.round(b/y*100):0;return(0,be.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:(0,be.jsxs)("div",{className:"flex items-center justify-center min-h-screen p-4",children:[(0,be.jsx)("div",{className:"fixed inset-0 transition-opacity",style:{backgroundColor:u.overlayBg},"aria-hidden":"true",onClick:n}),(0,be.jsxs)("div",{className:"relative w-full max-w-md rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:u.cardBg},children:[(0,be.jsxs)("div",{className:"px-5 py-4 flex items-center gap-3",style:{backgroundColor:i?u.accent:u.primary},children:[(0,be.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.2)"},children:(0,be.jsx)(Rn,{className:"w-5 h-5 text-white"})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("h3",{className:"text-base font-bold text-white truncate",children:l("quizzes.quiz.inProgress")}),(0,be.jsx)("p",{className:"text-xs text-white/70 truncate",children:l("quizzes.quiz.savedProgressFound")})]})]}),(0,be.jsxs)("div",{className:"p-5 space-y-4",children:[(0,be.jsx)("p",{className:"text-sm",style:{color:u.textMuted},children:l("quizzes.quiz.continueWhereYouLeft")}),(0,be.jsxs)("div",{className:"rounded-lg p-4 space-y-3",style:{backgroundColor:u.infoBg,border:`1px solid ${u.border}`},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,be.jsx)("span",{className:"text-xs font-medium uppercase tracking-wide",style:{color:u.textMuted},children:l("common.quiz")}),(0,be.jsx)("span",{className:"text-sm font-medium truncate",style:{color:u.text},children:p||l("common.untitled")})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,be.jsx)("span",{className:"text-xs font-medium uppercase tracking-wide",style:{color:u.textMuted},children:l("common.progress")}),(0,be.jsxs)("span",{className:"text-sm font-medium",style:{color:u.text},children:[b,"/",y," (",v,"%)"]})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,be.jsx)("span",{className:"text-xs font-medium uppercase tracking-wide",style:{color:u.textMuted},children:l("quizzes.quiz.currentQuestion")}),(0,be.jsxs)("span",{className:"text-sm font-medium",style:{color:u.text},children:[(f||0)+1," ",l("common.of")," ",y]})]}),h&&(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,be.jsxs)("span",{className:"text-xs font-medium uppercase tracking-wide flex items-center gap-1.5",style:{color:u.textMuted},children:[(0,be.jsx)($e.A,{className:"w-3.5 h-3.5"}),l("quizzes.quiz.timeRemaining")]}),(0,be.jsx)("span",{className:"text-sm font-medium",style:{color:u.accent},children:(e=>e?`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`:null)(h)})]}),(0,be.jsx)("div",{className:"pt-2",children:(0,be.jsx)("div",{className:"w-full h-2 rounded-full overflow-hidden",style:{backgroundColor:i?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:(0,be.jsx)("div",{className:"h-full rounded-full transition-all duration-300",style:{width:`${v}%`,backgroundColor:u.accent}})})}),(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2 pt-2 text-xs",style:{borderTop:`1px solid ${u.border}`,color:u.textMuted},children:[(0,be.jsx)("span",{children:l("common.lastSaved")}),(0,be.jsx)("span",{children:(e=>{const t=new Date(e),r=new Date-t,n=Math.floor(r/6e4),s=Math.floor(n/60),o=Math.floor(s/24);return o>0?`${l("common.ago")} ${o} ${l(o>1?"common.days":"common.day")}`:s>0?`${l("common.ago")} ${s} ${l(s>1?"common.hours":"common.hour")}`:n>0?`${l("common.ago")} ${n} ${l(n>1?"common.minutes":"common.minute")}`:l("common.justNow")})(g)})]})]})]}),(0,be.jsxs)("div",{className:"px-5 py-4 flex flex-col sm:flex-row gap-2",style:{backgroundColor:u.infoBg,borderTop:`1px solid ${u.border}`},children:[(0,be.jsxs)("button",{type:"button",onClick:t,className:"flex-1 inline-flex justify-center items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium text-white transition-all",style:{backgroundColor:u.accent},onMouseEnter:e=>e.currentTarget.style.opacity="0.9",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:[(0,be.jsx)(Oe.A,{className:"w-4 h-4"}),l("quizzes.quiz.continueQuiz")]}),(0,be.jsxs)("button",{type:"button",onClick:r,className:"flex-1 inline-flex justify-center items-center gap-2 rounded-lg px-4 py-2.5 text-sm font-medium transition-all",style:{backgroundColor:"transparent",color:u.text,border:`2px solid ${u.border}`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=i?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(At.A,{className:"w-4 h-4"}),l("quizzes.quiz.startOver")]})]})]})]})})},os=new Map,as=new Set,is=({quizId:e,lessonId:t=null,courseId:n=null,customQuiz:s=null,onQuizComplete:a,onQuizStateChange:i,onExit:l,hideDarkModeToggle:c=!1,isDrawingMode:d,setIsDrawingMode:u,isDrawingEnabled:p,setIsDrawingEnabled:f,showDrawingToolbar:m,setShowDrawingToolbar:h,drawingTool:g,drawingColor:x,drawingLineWidth:y,onDrawingToolChange:b,onDrawingColorChange:v,onDrawingLineWidthChange:j,onClearCanvas:w})=>{const[N,k]=(0,r.useState)(null),[C,_]=(0,r.useState)([]),[S,E]=(0,r.useState)(null),[A,M]=(0,r.useState)({}),[T,P]=(0,r.useState)([]),[O,z]=(0,r.useState)("loading"),[q,D]=(0,r.useState)(null),[I,L]=(0,r.useState)(null),[R,$]=(0,r.useState)([]),[B,F]=(0,r.useState)(null),[U,W]=(0,r.useState)(null),[H,Q]=(0,r.useState)(null),[V,Y]=(0,r.useState)(!1),[K,G]=(0,r.useState)(!1),[X,J]=(0,r.useState)(0),[Z,ee]=(0,r.useState)(!1),[te,re]=(0,r.useState)(null),[ne,oe]=(0,r.useState)(!0),[ae,ie]=(0,r.useState)(()=>window.innerWidth<1024);(0,r.useEffect)(()=>{const e=()=>ie(window.innerWidth<1024);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[le,ce]=(0,r.useState)(!1),[de,ue]=(0,r.useState)(!1),[pe,fe]=(0,r.useState)(!1),[me,ve]=(0,r.useState)("highlighter"),[je,we]=(0,r.useState)("#ffff00"),[Ne,ke]=(0,r.useState)(2),Ce=void 0!==d?d:le,_e=void 0!==p?p:de,Se=void 0!==m?m:pe,Ee=g||me,Ae=x||je,Me=y||Ne,Te=e=>u?u(e):ce(e),Pe=e=>f?f(e):ue(e),Oe=e=>h?h(e):fe(e),{getColor:ze,isDarkMode:qe,toggleDarkMode:De}=(0,se.DP)(),{t:Ie}=(0,o.Bd)(),Le=(0,r.useRef)(null),Re=(0,r.useRef)(null),$e=qe?ze("textPrimary","#f9fafb"):ze("primary","#1a202c"),Be=qe?ze("textSecondary","#9ca3af"):"#6b7280";(0,r.useEffect)(()=>{i&&"function"==typeof i&&i(O)},[O,i]);const{questions:Fe,loading:Ue,error:He,checkPrefetch:Qe,loadMore:Ve,hasMore:Ge,loadedCount:Je,totalCount:Ze,currentPage:tt,orderedQuestionIds:rt}=((e,t={})=>{const{enabled:n=!0,questionsPerPage:s=50,prefetchThreshold:o=5,randomize:a=!1,preservedOrder:i=null}=t,[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[m,h]=(0,r.useState)(0),[g,x]=(0,r.useState)(0),y=(0,r.useRef)(!1),[b,v]=(0,r.useState)([]);(0,r.useEffect)(()=>{if(e&&e.length>0)if(i&&i.length>0)console.log("ðŸ“‹ Using preserved question order from autosave"),v(i);else if(a){const t=[...e].sort(()=>Math.random()-.5);console.log("ðŸ”€ Shuffling questions for new quiz"),v(t)}else v(e)},[e,a,i]);const j=(0,r.useCallback)(async e=>{if(y.current)return console.log("â¸ï¸ Already loading, skipping duplicate request"),[];const t=(e-1)*s,r=Math.min(t+s,b.length),n=b.slice(t,r);if(0===n.length)return console.log("âœ… No more questions to load"),[];y.current=!0,u(!0),f(null);try{console.log(`ðŸ“¥ Loading page ${e} (${n.length} questions, IDs: ${t+1}-${r})`);const o=window.qe_data||{};if(!o.endpoints||!o.endpoints.questions)throw new Error("Questions endpoint not configured");const a=o.endpoints.questions,i=window.qe_data?.user?.roles?.includes("administrator")||!1,l=`${a}?${new URLSearchParams({include:n.join(","),per_page:s.toString(),page:"1",orderby:"include",context:i?"edit":"view"}).toString()}`,d=await fetch(l,{headers:{"Content-Type":"application/json","X-WP-Nonce":o.nonce},credentials:"same-origin"});if(!d.ok)throw new Error(`API Error ${d.status}: ${d.statusText}`);const u=await d.json();return c(e=>[...e,...u]),x(e=>e+u.length),h(e),console.log(`âœ… Loaded page ${e}: ${u.length} questions. Total: ${g+u.length}/${b.length}`),u}catch(e){return console.error("âŒ Error loading question page:",e),f(e.message||"Failed to load questions"),[]}finally{y.current=!1,u(!1)}},[b,s,g]),w=(0,r.useCallback)(async()=>{!n||0===b.length||m>0||(console.log(`ðŸš€ Loading initial page (${s} questions)...`),await j(1))},[n,b.length,m,s,j]),N=(0,r.useCallback)(async()=>{if(g>=b.length)return void console.log("âœ… All questions already loaded");const e=m+1;console.log(`ðŸ“¥ Loading page ${e}... (${g}/${b.length} loaded)`),await j(e)},[b.length,m,g,j]),k=(0,r.useCallback)(e=>{const t=g-e;g<b.length&&t<=o&&!y.current&&(console.log(`ðŸ”„ Auto-prefetching next page (${t} questions remaining)`),N())},[g,b.length,o,N]);return(0,r.useEffect)(()=>{n&&b.length>0&&0===m&&w()},[n,b.length,m,w]),{questions:l,loading:d,error:p,progress:b.length>0?Math.round(g/b.length*100):0,hasMore:g<b.length,loadMore:N,checkPrefetch:k,totalCount:b.length,loadedCount:g,currentPage:m,orderedQuestionIds:b}})(C,{enabled:"in-progress"===O||"loading"===O,questionsPerPage:50,prefetchThreshold:5,randomize:N?.meta?._randomize_questions||!1,preservedOrder:S}),nt=(0,r.useRef)(null);(0,r.useEffect)(()=>{if("in-progress"!==O||!Ge||Ue)return;const e=nt.current;if(!e)return;const t=new IntersectionObserver(e=>{const[t]=e;t.isIntersecting&&Ge&&!Ue&&(console.log("ðŸ‘ï¸ Trigger visible - Auto-loading more questions..."),"function"==typeof Ve&&Ve())},{root:Re.current,rootMargin:"200px",threshold:.1});return t.observe(e),()=>{e&&t.unobserve(e)}},[O,Ge,Ue,Ve]);const st=(0,r.useRef)(!1);(0,r.useEffect)(()=>{(async()=>{if(st.current)return void console.log("âš ï¸ Quiz attempt already started by this component, skipping");st.current=!0;const r=`${e}-${t||"no-lesson"}`;if(F(Date.now()),s){k(s);const e=s.meta?._quiz_question_ids||[];return _(e),void D("custom-attempt")}if(e){console.log("ðŸš€ Starting Quiz Attempt:",{quizId:e,lessonId:t});try{const s=await _r.getQuizAutosave(e);if(s)return Q(s),Y(!0),void z("awaiting-recovery");const o=await(0,Vn.getQuiz)(e);k(o);const a=o.meta?._quiz_question_ids||[];_(a);const i=await Yn(e,t,n);if(!i.attempt_id)throw new Error("Failed to get a valid attempt ID.");D(i.attempt_id),os.set(r,i.attempt_id),console.log("âœ… Quiz attempt started:",i.attempt_id)}catch(e){console.error("Error fetching or starting quiz:",e),os.delete(r),z("error")}}})()},[e,s,t]);const{clearAutosave:ot}=(({quizId:e,quizData:t,shuffledQuestionIds:n,currentQuestionIndex:s,answers:o,timeRemaining:a,attemptId:i,enabled:l=!0,debounceMs:c=1e3})=>{const[d,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),g=(0,r.useRef)(null),x=(0,r.useRef)(null),y=(0,r.useCallback)(async()=>{if(e&&t&&l)try{u(!0),h(null);const r={quiz_id:e,quiz_data:t,shuffled_question_ids:n||[],current_question_index:s||0,answers:o||{},time_remaining:a||null,attempt_id:i||null};await _r.saveProgress(r),f(new Date),x.current=JSON.stringify(r)}catch(e){console.error("Error autosaving quiz:",e),h(e.message||"Error al guardar el progreso")}finally{u(!1)}},[e,t,n,s,o,a,i,l]),b=(0,r.useCallback)(async()=>{if(e)try{g.current&&(clearTimeout(g.current),g.current=null),await _r.deleteAutosave(e),f(null),x.current=null}catch(e){console.error("Error clearing autosave:",e),h(e.message||"Error al eliminar el autoguardado")}},[e]);return(0,r.useEffect)(()=>{if(l&&e&&t)return JSON.stringify({quiz_id:e,shuffled_question_ids:n||[],current_question_index:s||0,answers:o||{},time_remaining:a||null})!==x.current?(g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{y()},c),()=>{g.current&&clearTimeout(g.current)}):void 0},[e,t,s,o,a,l,c,y]),(0,r.useEffect)(()=>()=>{g.current&&clearTimeout(g.current)},[]),{isSaving:d,lastSaved:p,saveNow:y,clearAutosave:b,error:m}})({quizId:e,quizData:N,shuffledQuestionIds:rt,currentQuestionIndex:X,answers:A,timeRemaining:U,attemptId:q,enabled:"in-progress"===O&&!s});(0,r.useEffect)(()=>{N&&q&&"loading"===O&&(Je>0||!Ue&&0===C.length)&&z("in-progress")},[N,q,Ue,Je,Ze,C.length,O]),(0,r.useEffect)(()=>{if("loading"===O&&C.length>0&&N&&q&&0===Je&&!Ue){const e=setTimeout(()=>{},2e3);return()=>clearTimeout(e)}},[O,C.length,N,q,Je,Ue]),(0,r.useEffect)(()=>{if("loading"===O&&N&&q){const e=setTimeout(()=>{0!==Je||Ue||z("in-progress")},1e4);return()=>clearTimeout(e)}},[O,N,q,Je,Ue]);const at=(e,t)=>{M(r=>({...r,[e]:t}))},it=e=>{P(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},lt=e=>{M(t=>{const r={...t};return delete r[e],r}),P(t=>t.filter(t=>t!==e))},ct=(0,r.useCallback)(async()=>{if(console.log("ðŸ”¥ handleSubmit called",{attemptId:q,timestamp:(new Date).toISOString()}),!q)return void z("error");if(as.has(q))return void console.warn("âš ï¸ Submission already in progress, ignoring duplicate call");as.add(q),z("submitting");const r=C&&C.length>0?C:Fe.map(e=>e.id),n=r.map(e=>({question_id:e,answer_given:A.hasOwnProperty(e)?A[e]:null,is_risked:T.includes(e)}));console.log(`ðŸ“¤ Submitting ${n.length} answers (${Object.keys(A).length} answered)`);try{let o;if("custom-attempt"===q&&s){const e=s.meta._quiz_question_ids,t=Date.now(),r=Math.round((t-B)/1e3);o=await(async(e,t)=>{try{const{endpoints:r}=(0,Ye.getApiConfig)(),n=`${r.custom_api}/quiz-generator/calculate-results`;console.log("ðŸ§® Calculating custom quiz result...");const s=await(0,Ke.qb)(n,{method:"POST",body:JSON.stringify({question_ids:e,answers:t})});return console.log("âœ… Custom quiz result calculated:",s.data),s.data.data}catch(e){throw console.error("âŒ Error calculating custom quiz result:",e),e}})(e,n),o.duration_seconds=r}else o=await(async(e,t)=>{try{const{endpoints:r}=(0,Ye.getApiConfig)(),n=`${r.custom_api}/quiz-attempts/submit`;console.log(`ðŸ“¤ Submitting answers for attempt ID: ${e}`);const s=await(0,Ke.qb)(n,{method:"POST",body:JSON.stringify({attempt_id:e,answers:t})});return console.log("âœ… Attempt submitted successfully:",s.data),s.data.data}catch(e){throw console.error("âŒ Error submitting quiz attempt:",e),e}})(q,n);e&&!s&&await ot();let i=Fe;try{const e=r,t=await(0,Xe.getQuestionsByIds)(e,{batchSize:50});t&&t.length>0&&(console.log(`âœ… Loaded ${t.length} questions for results display`),i=t)}catch(e){console.warn("âš ï¸ Could not load all questions for results, using cached data:",e)}$(i),L(o),z("submitted");const l=`${e}-${t||"no-lesson"}`;os.delete(l),as.delete(q),console.log("âœ… Quiz completed, cleaned up guards"),console.log("ðŸ“ž Calling onQuizComplete callback",{hasCallback:!!a,callbackType:typeof a,resultScore:o?.score,questionsCount:i?.length}),a&&"function"==typeof a?(a(o,i,N),console.log("âœ… onQuizComplete callback executed successfully")):console.warn("âš ï¸ onQuizComplete callback not available or not a function")}catch(e){console.error("âŒ Error submitting quiz:",e),as.delete(q),z("error")}},[q,Fe,C,A,T,s,B,e,t,ot,a,N]);if("loading"===O||Ue&&0===Fe.length)return(0,be.jsx)("div",{className:"text-center p-8",style:{color:$e},children:Ie("quizzes.quiz.loadingQuiz")});if("awaiting-recovery"===O)return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"text-center p-8",children:Ie("quizzes.quiz.loadingQuiz")}),(0,be.jsx)(ss,{autosaveData:H,onResume:async()=>{if(H)try{z("loading");const e="string"==typeof H.quiz_data?JSON.parse(H.quiz_data):H.quiz_data,t="string"==typeof H.answers?JSON.parse(H.answers):H.answers;k(e);const r=e.meta?._quiz_question_ids||[];_(r);const n=H.shuffled_question_ids||e._shuffled_question_ids||null;n&&n.length>0&&(console.log("ðŸ“‹ Restoring preserved question order from autosave"),E(n)),M(t),J(H.current_question_index||0),W(H.time_remaining),D(H.attempt_id),Y(!1)}catch(e){console.error("Error resuming quiz:",e),z("error")}},onRestart:async()=>{if(e)try{z("loading"),await _r.deleteAutosave(e);const r=await(0,Vn.getQuiz)(e);k(r);const n=r.meta?._quiz_question_ids||[];_(n),E(null);const s=await Yn(e,t);if(!s.attempt_id)throw new Error("Failed to get a valid attempt ID.");D(s.attempt_id),Y(!1),Q(null)}catch(e){console.error("Error restarting quiz:",e),z("error")}},isOpen:V})]});if("error"===O||He){const e=He?.message||Ie("quizzes.quiz.errorLoadingQuiz");return(0,be.jsxs)("div",{className:"text-center p-8",style:{color:"#ef4444"},children:[(0,be.jsx)("p",{className:"font-semibold mb-2",children:Ie("quizzes.quiz.errorTitle")}),(0,be.jsx)("p",{className:"text-sm",children:e})]})}if("submitting"===O)return(0,be.jsx)("div",{className:"text-center p-8",style:{color:$e},children:Ie("quizzes.quiz.submittingAnswers")});if("submitted"===O)return(0,be.jsx)("div",{className:"text-center p-8",style:{color:$e},children:Ie("quizzes.quiz.submittingAnswers")});if(N&&0===Fe.length&&!Ue&&0===C.length)return(0,be.jsx)("div",{className:"text-center p-8",style:{color:Be},children:Ie("quizzes.quiz.noQuestionsAssigned")});const dt=C.length,ut=dt>0?Math.max(1,Math.ceil(dt/2)):0;return(0,be.jsxs)("div",{className:"h-full flex flex-col relative overflow-hidden",style:{backgroundColor:ze("secondaryBackground","#f3f4f6")},children:[K&&(0,be.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50",children:(0,be.jsxs)("div",{className:"w-full max-w-md rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:qe?ze("secondaryBackground"):"#ffffff"},children:[(0,be.jsx)("div",{className:"px-6 py-4",style:{backgroundColor:ze(qe?"accent":"primary")},children:(0,be.jsx)("h3",{className:"text-lg font-bold text-white",children:Ie("quizzes.exitModal.title")})}),(0,be.jsx)("div",{className:"p-6",children:(0,be.jsx)("p",{style:{color:qe?"#f9fafb":"#374151"},children:Ie("quizzes.exitModal.message")})}),(0,be.jsxs)("div",{className:"flex gap-3 px-6 pb-6",children:[(0,be.jsx)("button",{onClick:()=>G(!1),className:"flex-1 px-4 py-3 rounded-lg font-medium transition-colors text-center",style:{backgroundColor:qe?"rgba(255,255,255,0.1)":"#f3f4f6",color:qe?"#f9fafb":"#374151"},children:Ie("quizzes.exitModal.cancel")}),(0,be.jsx)("button",{onClick:()=>{G(!1),l&&l()},className:"flex-1 px-4 py-3 rounded-lg font-medium text-white transition-colors text-center",style:{backgroundColor:ze(qe?"accent":"primary")},children:Ie("quizzes.exitModal.confirm")})]})]})}),Z&&(0,be.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>ee(!1)}),l&&(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",style:{backgroundColor:qe?ze("secondaryBackground"):"#ffffff",borderColor:qe?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("button",{onClick:()=>G(!0),className:"p-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:qe?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:qe?"#ffffff":ze("primary","#1a202c")},"aria-label":Ie("quizzes.exitModal.title"),children:(0,be.jsx)(We.A,{className:"w-5 h-5"})}),(0,be.jsx)("span",{className:"font-medium text-sm truncate",style:{color:qe?"#ffffff":ze("primary","#1a202c")},children:N?.title?.rendered||N?.title||Ie("quizzes.quiz.inProgress")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("button",{onClick:()=>oe(!ne),className:"p-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:qe?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:qe?"#ffffff":ze("primary","#1a202c")},"aria-label":Ie(ne?"quizzes.quiz.hideTimer":"quizzes.quiz.showTimer"),children:(0,be.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,be.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,be.jsx)("polyline",{points:"12 6 12 12 16 14"}),!ne&&(0,be.jsx)("line",{x1:"4",y1:"4",x2:"20",y2:"20",strokeWidth:"2.5"})]})}),ne&&(0,be.jsx)(es,{durationMinutes:ut,onTimeUp:ct,isPaused:"submitted"===O||"submitting"===O,initialTimeRemaining:U,onTick:e=>W(e),compact:!0}),!c&&(0,be.jsx)("button",{onClick:De,className:"p-2 rounded-lg transition-all duration-200 hover:scale-105",style:{backgroundColor:qe?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:qe?"#ffffff":ze("primary","#1a202c")},"aria-label":qe?"Modo claro":"Modo oscuro",children:qe?(0,be.jsx)(he.A,{className:"w-5 h-5"}):(0,be.jsx)(ge.A,{className:"w-5 h-5"})})]})]}),!ae&&(0,be.jsx)("button",{onClick:()=>{const e=!Se;Oe(e),Pe(e),Te(!0)},className:"fixed bottom-24 right-6 z-50 p-4 rounded-full shadow-lg transition-all duration-200 hover:scale-110 lg:bottom-6",style:{backgroundColor:Se?ze("accent","#f59e0b"):ze("primary","#3b82f6"),color:"#ffffff"},"aria-label":"Activar/Desactivar subrayador",children:(0,be.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,be.jsx)("path",{d:"m9 11-6 6v3h3l6-6"}),(0,be.jsx)("path",{d:"m22 2-7 7"}),(0,be.jsx)("path",{d:"M21 3 3 21"})]})}),(0,be.jsx)("button",{onClick:()=>ee(!0),className:"lg:hidden fixed bottom-6 right-6 z-50 p-4 rounded-full shadow-lg transition-all duration-200 hover:scale-110",style:{backgroundColor:ze("primary","#3b82f6"),color:"#ffffff"},"aria-label":Ie("quizzes.quiz.openMenu"),children:(0,be.jsx)(ye,{className:"w-6 h-6"})}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto",ref:Re,children:(0,be.jsxs)("div",{className:"w-full max-w-screen-2xl mx-auto flex flex-col lg:flex-row gap-8 justify-between px-4 sm:px-6 py-6",children:[(0,be.jsxs)("main",{ref:Le,className:"flex-1 min-w-0 lg:pr-4 relative pb-24 lg:pb-8",children:[!ae&&Ce&&(0,be.jsx)(ts,{isActive:Ce,isDrawingEnabled:_e,tool:Ee,color:Ae,lineWidth:Me,onClose:()=>{Te(!1),Pe(!1),Oe(!1)},onClear:e=>re(()=>e),containerRef:Le,showToolbar:!1}),Fe.map((e,t)=>(0,be.jsx)(Gn,{question:e,index:t,selectedAnswer:A[e.id],isRisked:T.includes(e.id),onSelectAnswer:at,onToggleRisk:it,onClearAnswer:lt,isSubmitted:"submitted"===O||"submitting"===O,showRiskSelector:!0},e.id)),Ge&&(0,be.jsxs)("div",{className:"mt-8 mb-4 flex flex-col items-center gap-4",children:[(0,be.jsx)("div",{ref:nt,className:"w-full h-px","aria-hidden":"true"}),Ue&&(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center p-6 gap-3",children:[(0,be.jsx)(et.A,{className:"w-8 h-8 animate-spin",style:{color:ze("primary","#3b82f6")}}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"font-medium",style:{color:ze("primary","#3b82f6")},children:Ie("quizzes.quiz.loadingMoreQuestions")}),(0,be.jsx)("p",{className:"text-sm mt-1",style:{color:Be},children:Ie("quizzes.quiz.questionsLoadedCount",{loaded:Je,total:Ze})})]})]}),!Ue&&(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:Be},children:Ie("quizzes.quiz.questionsLoadedCount",{loaded:Je,total:Ze})}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:Be,opacity:.7},children:Ie("quizzes.quiz.autoLoadingMore")})]})]})]}),(0,be.jsxs)("aside",{className:`\n        fixed lg:relative\n        top-0 right-0 \n        h-full lg:h-auto\n        w-80 lg:w-[320px] xl:w-[340px]\n        flex-shrink-0\n        transition-transform duration-300\n        z-50 lg:z-auto\n        ${Z?"translate-x-0":"translate-x-full lg:translate-x-0"}\n      `,style:{backgroundColor:Z?ze("background","#ffffff"):"transparent"},children:[(0,be.jsxs)("div",{className:"lg:hidden flex items-center justify-between px-4 py-5 border-b",style:{borderColor:ze("borderColor","#e5e7eb")},children:[(0,be.jsx)("h3",{className:"font-bold text-xl",style:{color:$e},children:Ie("quizzes.quiz.quizProgress")}),(0,be.jsx)("button",{onClick:()=>ee(!1),className:"p-2 rounded-lg transition-colors",style:{color:$e},children:(0,be.jsx)(xe.A,{className:"w-6 h-6"})})]}),(0,be.jsx)("div",{className:"space-y-3 p-4 lg:p-0 lg:sticky lg:top-6 overflow-y-auto h-[calc(100%-88px)] lg:max-h-[calc(100vh-3rem)] lg:ml-auto",children:(0,be.jsx)(Zn,{questions:Fe,questionIds:rt||C,totalCount:Ze,userAnswers:A,riskedAnswers:T,onSubmit:ct,loadedCount:Je,onLoadMore:Ge&&!Ue?Ve:null,scrollContainerRef:Re})})]})]})}),!ae&&(0,be.jsx)(ns,{isActive:Se,tool:Ee,onToolChange:e=>{console.log("ðŸ”§ Setting drawing tool:",e),b?b(e):ve(e)},color:Ae,onColorChange:e=>{console.log("ðŸŽ¨ Setting drawing color:",e),v?v(e):we(e)},lineWidth:Me,onLineWidthChange:e=>{console.log("ðŸ“ Setting line width:",e),j?j(e):ke(e)},onClear:()=>{te&&te()},onClose:()=>{Oe(!1),Pe(!1)}})]})},ls=({icon:e,label:t,value:r,isDarkMode:n})=>(0,be.jsxs)("div",{className:"flex items-center text-sm",style:{color:n?"#ffffff":"#4b5563"},children:[(0,be.jsx)(e,{className:"w-4 h-4 mr-2",style:{color:"#9ca3af"}}),(0,be.jsxs)("span",{className:"font-semibold mr-1",children:[t,":"]}),(0,be.jsx)("span",{children:r})]}),cs=({quiz:e,onStartQuiz:t})=>{const r=(0,re.Zp)(),{formatScore:n}=qt(),{getColor:s,isDarkMode:o}=(0,se.DP)(),{ranking:a,loading:i}=tr(e?.id),l={text:o?"#ffffff":"#1f2937",textMuted:o?"#ffffff":"#4b5563",textSecondary:o?"#d1d5db":"#6b7280",bg:o?s("secondaryBackground","#1f2937"):"#ffffff",bgSecondary:o?"rgba(255,255,255,0.05)":"#f9fafb",border:o?"rgba(255,255,255,0.1)":"#e5e7eb"};if(!e)return(0,be.jsx)("div",{className:"text-center p-8",children:(0,be.jsx)("p",{style:{color:l.textSecondary},children:"No se pudo cargar la informaciÃ³n del cuestionario."})});const{title:c,question_count:d=0,time_limit:u=0,passing_score:p=0,difficulty:f=null}=e,m=(e=>({easy:{label:"FÃ¡cil",color:"text-green-600",bg:"bg-green-50"},medium:{label:"Medio",color:"text-yellow-600",bg:"bg-yellow-50"},hard:{label:"DifÃ­cil",color:"text-red-600",bg:"bg-red-50"}}[e]||{label:"Medio",color:"text-gray-600",bg:"bg-gray-50"}))(f),h=a?.statistics||{},g=a?.currentUser||null,x=a?.top||[],y=a?.relative||[],b=x.find(e=>e.user_id===g?.id),v=y.find(e=>e.user_id===g?.id),j=b||v,w=null!=j&&h.total_users>0;return(0,be.jsxs)("div",{className:"rounded-lg p-8 shadow-lg max-w-5xl mx-auto space-y-6",style:{backgroundColor:l.bg,borderWidth:"1px",borderStyle:"solid",borderColor:l.border},children:[(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)(de.A,{className:"mx-auto h-12 w-12 text-indigo-500 mb-4"}),(0,be.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:l.text},children:c?.rendered||c||"Cuestionario"}),(0,be.jsx)("p",{style:{color:l.textMuted},children:"EstÃ¡s a punto de comenzar el cuestionario. Â¿EstÃ¡s listo?"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-left p-6 rounded-lg",style:{backgroundColor:l.bgSecondary,borderWidth:"1px",borderStyle:"solid",borderColor:l.border},children:[(0,be.jsx)(ls,{icon:de.A,label:"Preguntas",value:d,isDarkMode:o}),(0,be.jsx)(ls,{icon:$e.A,label:"Tiempo LÃ­mite",value:u>0?`${u} min`:"Sin lÃ­mite",isDarkMode:o}),(0,be.jsx)(ls,{icon:Oe.A,label:"PuntuaciÃ³n MÃ­nima",value:n(p),isDarkMode:o}),(0,be.jsxs)("div",{className:"flex items-center text-sm",style:{color:l.textMuted},children:[(0,be.jsx)(Mr,{className:"w-4 h-4 mr-2",style:{color:"#9ca3af"}}),(0,be.jsx)("span",{className:"font-semibold mr-1",children:"Dificultad:"}),(0,be.jsx)("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${m.bg} ${m.color}`,children:m.label})]})]}),w&&!i&&(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,be.jsxs)("div",{className:"p-6 rounded-lg border-2 shadow-sm",style:{background:o?"linear-gradient(to bottom right, rgba(59, 130, 246, 0.15), rgba(99, 102, 241, 0.15))":"linear-gradient(to bottom right, #eff6ff, #eef2ff)",borderColor:o?"rgba(59, 130, 246, 0.4)":"#bfdbfe"},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,be.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wide",style:{color:l.textMuted},children:"Sin Riesgo"}),(0,be.jsx)("div",{className:"p-2 rounded-lg shadow-sm",style:{backgroundColor:o?"rgba(255,255,255,0.1)":"#ffffff"},children:(0,be.jsx)(ar.A,{className:"w-5 h-5 text-blue-600"})})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{className:"text-sm",style:{color:l.textMuted},children:"Media UA:"}),(0,be.jsx)("span",{className:"text-lg font-bold",style:{color:l.text},children:n(h.avg_score_without_risk||0)})]}),(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{className:"text-sm",style:{color:l.textMuted},children:"Mi Nota:"}),(0,be.jsx)("span",{className:"text-lg font-bold text-blue-700",children:n(j?.score||0)})]}),(0,be.jsx)("div",{className:"my-2",style:{borderTopWidth:"1px",borderTopStyle:"solid",borderTopColor:o?"rgba(59, 130, 246, 0.3)":"#bfdbfe"}}),(0,be.jsxs)("div",{className:"flex justify-between items-center p-2 rounded",style:{backgroundColor:o?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.6)"},children:[(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:l.textMuted},children:"Mi Percentil:"}),(0,be.jsx)("span",{className:"text-xl font-extrabold text-blue-600",children:(()=>{const e=(j?.score||0)-(h.avg_score_without_risk||0);return`${e>0?"+":""}${n(e)}`})()})]})]})]}),(0,be.jsxs)("div",{className:"p-6 rounded-lg border-2 shadow-sm",style:{background:o?"linear-gradient(to bottom right, rgba(245, 158, 11, 0.15), rgba(217, 119, 6, 0.15))":"linear-gradient(to bottom right, #fefce8, #fffbeb)",borderColor:o?"rgba(245, 158, 11, 0.4)":"#fcd34d"},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,be.jsx)("h3",{className:"text-sm font-bold uppercase tracking-wide",style:{color:l.textMuted},children:"Con Riesgo"}),(0,be.jsx)("div",{className:"p-2 rounded-lg shadow-sm",style:{backgroundColor:o?"rgba(255,255,255,0.1)":"#ffffff"},children:(0,be.jsx)(Mr,{className:"w-5 h-5 text-amber-600"})})]}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{className:"text-sm",style:{color:l.textMuted},children:"Media UA:"}),(0,be.jsx)("span",{className:"text-lg font-bold",style:{color:l.text},children:n(h.avg_score_with_risk||0)})]}),(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsx)("span",{className:"text-sm",style:{color:l.textMuted},children:"Mi Nota:"}),(0,be.jsx)("span",{className:"text-lg font-bold text-amber-700",children:n(j?.score_with_risk||0)})]}),(0,be.jsx)("div",{className:"my-2",style:{borderTopWidth:"1px",borderTopStyle:"solid",borderTopColor:o?"rgba(245, 158, 11, 0.3)":"#fcd34d"}}),(0,be.jsxs)("div",{className:"flex justify-between items-center p-2 rounded",style:{backgroundColor:o?"rgba(255,255,255,0.1)":"rgba(255,255,255,0.6)"},children:[(0,be.jsx)("span",{className:"text-sm font-semibold",style:{color:l.textMuted},children:"Mi Percentil:"}),(0,be.jsx)("span",{className:"text-xl font-extrabold text-amber-600",children:(()=>{const e=(j?.score_with_risk||0)-(h.avg_score_with_risk||0);return`${e>0?"+":""}${n(e)}`})()})]})]})]})]}),(0,be.jsx)("div",{className:"text-center pt-2",children:(0,be.jsxs)(ct.A,{onClick:t,variant:"primary",className:"w-full sm:w-auto inline-flex items-center justify-center px-8 py-4 text-white font-bold text-lg rounded-xl shadow-lg transform hover:-translate-y-0.5",style:{background:"linear-gradient(to right, var(--qe-primary), var(--qe-secondary))"},children:[(0,be.jsx)(Rn,{className:"w-6 h-6 mr-2"}),"Comenzar Cuestionario"]})}),(0,be.jsxs)("div",{className:"pt-2",style:{borderTopWidth:"1px",borderTopStyle:"solid",borderTopColor:l.border},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:l.text},children:"Mis Ãšltimos Intentos"}),(0,be.jsx)(ct.A,{onClick:e=>{e.preventDefault(),r("/")},variant:"primary",className:"text-sm font-medium px-3 py-1.5 rounded-lg",children:"Ver todos â†’"})]}),(0,be.jsx)(dr,{quizId:e.id,maxResults:5,showCourseColumn:!1})]})]})},ds=({step:e})=>{const{url:t,filename:r}=e.data;return t?(0,be.jsx)("div",{className:"w-full bg-white p-4 rounded-lg border shadow-sm",children:(0,be.jsx)("div",{className:"aspect-w-4 aspect-h-5",children:(0,be.jsx)("embed",{src:t,type:"application/pdf",className:"w-full h-full",style:{minHeight:"73vh"}})})}):(0,be.jsxs)("div",{className:"p-4 border border-red-200 bg-red-50 rounded-lg flex items-center",children:[(0,be.jsx)(Te.A,{className:"h-5 w-5 text-red-500 mr-3"}),(0,be.jsx)("p",{className:"text-sm text-red-700",children:"No se ha proporcionado una URL para el PDF."})]})},us=(ie.A,Be.A,ae.A,({step:e,lesson:t,stepIndex:n=-1,lessons:s=[],onNavigate:o,courseId:a,onOpenRanking:i,rankingLoading:l,onOpenLessonList:c,onQuizStateChange:d})=>{const{getColor:u}=(0,se.DP)(),[p,f]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(null),[y,b]=(0,r.useState)(!1),[v,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(!1),[k,C]=(0,r.useState)("pen"),[_,S]=(0,r.useState)("#000000"),[E,A]=(0,r.useState)(2),[M,T]=(0,r.useState)(null);(0,r.useEffect)(()=>{d&&"function"==typeof d&&d(g)},[g,d]);const P="in-progress"===g;(0,r.useEffect)(()=>{console.log("ðŸ” StepContent props:",{step:e?.id,lesson:t?.id,lessonsCount:s?.length,courseId:a,hasOnNavigate:!!o})},[e,t,s,a,o]);const{isCompleted:O,markComplete:z,unmarkComplete:q,loading:D,completedItems:I}=gr(a,!0);(0,r.useEffect)(()=>{console.log("ðŸ” Completed items:",I)},[I]),(0,r.useEffect)(()=>{f(!1),h(!1)},[e]);const L=()=>{if(!t||!e||!s||0===s.length)return{currentLessonIndex:-1,currentStepIndex:-1,steps:[]};const r=s.findIndex(e=>e.id===t.id),o=t.meta?._lesson_steps||[];let a=n>=0&&n<o.length?n:o.findIndex(t=>!(!t.id||!e.id||t.id!==e.id)||(t===e||t.type===e.type&&JSON.stringify(t.data||{})===JSON.stringify(e.data||{})));return{currentLessonIndex:r,currentStepIndex:a,steps:o}},R=()=>{const{currentLessonIndex:e,currentStepIndex:r,steps:n}=L();if(-1===e||-1===r)return{hasPrev:!1,hasNext:!1,prevLesson:null,prevStep:null,nextLesson:null,nextStep:null};let o=null,a=null,i=null,l=null,c=!1,d=!1;if(r>0)o=t,a=n[r-1],c=!0;else if(e>0){const t=s[e-1],r=t.meta?._lesson_steps||[];r.length>0&&(o=t,a=r[r.length-1],c=!0)}if(r<n.length-1)i=t,l=n[r+1],d=!0;else if(e<s.length-1){const t=s[e+1],r=t.meta?._lesson_steps||[];r.length>0&&(i=t,l=r[0],d=!0)}return{hasPrev:c,hasNext:d,prevLesson:o,prevStep:a,nextLesson:i,nextStep:l}},$=R(),{currentStepIndex:B}=L(),F=!!(t&&e&&a&&-1!==B)&&O(t.id,"step",t.id,B),U=(()=>{if(!t||!a)return{completed:0,total:0};const e=t.meta?._lesson_steps||[],r=e.length;return{completed:e.filter((e,r)=>O(t.id,"step",t.id,r)).length,total:r}})();if(!e||!t)return(0,be.jsxs)("div",{className:"flex-grow lg:w-2/3 p-8 flex flex-col items-center justify-center text-center bg-white rounded-lg shadow-md",children:[(0,be.jsx)(ae.A,{className:"w-16 h-16 text-gray-300 mb-4"}),(0,be.jsx)("h2",{className:"text-2xl font-semibold text-gray-700",children:"Selecciona un paso"}),(0,be.jsx)("p",{className:"text-gray-500 mt-2",children:"Elige un paso de la lista de lecciones para ver su contenido."})]});"quiz"===e.type&&(e.data?.quiz_id||e.quiz_id);const W="quiz"===e.type?(H=e.data||{}).quiz_title?H.quiz_title:"Cuestionario":e.title;var H;return(0,be.jsxs)("div",{className:"flex-grow lg:w-full h-full flex flex-col",children:[!P&&(0,be.jsx)("div",{className:"sticky top-0 z-10 px-6 py-4 border-b flex-shrink-0",style:{backgroundColor:u("secondaryBackground","#f3f4f6")},children:p&&!m?(0,be.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("button",{onClick:c,className:"p-2 rounded-lg transition-all",style:{backgroundColor:u("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=u("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=u("primary","#3b82f6")+"15"},title:"Abrir Ã­ndice de lecciones",children:(0,be.jsx)(ye,{className:"w-6 h-6",style:{color:u("primary","#3b82f6")}})}),(0,be.jsx)("button",{onClick:()=>{y?N(!w):(b(!0),N(!0),j(!0))},className:"p-2 rounded-lg transition-all",style:{backgroundColor:w?u("accent","#f59e0b")+"25":u("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=w?u("accent","#f59e0b")+"35":u("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=w?u("accent","#f59e0b")+"25":u("primary","#3b82f6")+"15"},title:y?w?"Pausar dibujo":"Reanudar dibujo":"Activar herramientas",children:(0,be.jsx)(Un,{className:"w-6 h-6",style:{color:w?u("accent","#f59e0b"):u("primary","#3b82f6")}})}),y&&v&&(0,be.jsxs)("div",{className:"flex items-center gap-2 ml-2 pl-2 border-l-2",style:{borderColor:u("primary","#3b82f6")+"30"},children:[(0,be.jsxs)("div",{className:"flex gap-1",children:[(0,be.jsx)("button",{onClick:()=>C("pen"),className:"p-2 rounded transition-all",style:{backgroundColor:"pen"===k?u("primary","#3b82f6"):"transparent",color:"pen"===k?"white":u("primary","#3b82f6")},title:"LÃ¡piz",children:(0,be.jsx)(ln,{className:"w-5 h-5"})}),(0,be.jsx)("button",{onClick:()=>C("highlighter"),className:"p-2 rounded transition-all",style:{backgroundColor:"highlighter"===k?u("accent","#f59e0b"):"transparent",color:"highlighter"===k?"white":u("accent","#f59e0b")},title:"Resaltador",children:(0,be.jsx)(Wn,{className:"w-5 h-5"})}),(0,be.jsx)("button",{onClick:()=>C("eraser"),className:"p-2 rounded transition-all",style:{backgroundColor:"eraser"===k?"#dc2626":"transparent",color:"eraser"===k?"white":"#dc2626"},title:"Borrador",children:(0,be.jsx)(Hn,{className:"w-5 h-5"})})]}),"eraser"!==k&&(0,be.jsx)("div",{className:"flex gap-1 ml-2 pl-2 border-l",style:{borderColor:u("primary","#3b82f6")+"30"},children:[{value:"#000000",name:"Negro"},{value:u("primary","#3b82f6"),name:"Primario"},{value:u("accent","#f59e0b"),name:"Acento"},{value:"#dc2626",name:"Rojo"},{value:"#16a34a",name:"Verde"}].map(e=>(0,be.jsx)("button",{onClick:()=>S(e.value),className:"w-7 h-7 rounded border-2 transition-all hover:scale-110",style:{backgroundColor:e.value,borderColor:_===e.value?"#fff":"transparent",boxShadow:_===e.value?`0 0 0 2px ${u("primary","#3b82f6")}`:"none"},title:e.name},e.value))}),(0,be.jsx)("div",{className:"flex items-center gap-2 ml-2 pl-2 border-l",style:{borderColor:u("primary","#3b82f6")+"30"},children:(0,be.jsx)("input",{type:"range",min:"1",max:"5",value:E,onChange:e=>A(Number(e.target.value)),className:"w-20 h-1",style:{accentColor:u("primary","#3b82f6")},title:`Grosor: ${E}`})}),(0,be.jsxs)("div",{className:"flex gap-1 ml-2 pl-2 border-l",style:{borderColor:u("primary","#3b82f6")+"30"},children:[(0,be.jsx)("button",{onClick:()=>M&&M(),className:"p-2 rounded transition-all",style:{backgroundColor:"transparent",color:"#dc2626"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#fef2f2"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},title:"Limpiar todos los dibujos",children:(0,be.jsx)(pr.A,{className:"w-5 h-5"})}),(0,be.jsx)("button",{onClick:()=>j(!1),className:"px-3 py-1 rounded text-sm font-medium transition-all",style:{backgroundColor:u("primary","#3b82f6")+"15",color:u("primary","#3b82f6")},title:"Ocultar herramientas",children:"Ocultar"}),(0,be.jsx)("button",{onClick:()=>{b(!1),N(!1),j(!1)},className:"px-3 py-1 rounded text-sm font-medium text-white transition-all",style:{backgroundColor:"#dc2626"},title:"Salir del modo dibujo",children:"Salir"})]})]}),y&&!v&&(0,be.jsx)("button",{onClick:()=>j(!0),className:"px-3 py-2 rounded-lg transition-all text-sm font-medium",style:{backgroundColor:u("primary","#3b82f6")+"15",color:u("primary","#3b82f6")},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=u("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=u("primary","#3b82f6")+"15"},title:"Mostrar herramientas",children:"Herramientas"})]}),(0,be.jsx)("h1",{className:"text-xl font-bold text-gray-800 flex-1 text-center",children:W}),(0,be.jsxs)("button",{onClick:()=>f(!1),className:"flex items-center gap-2 px-4 py-2 text-sm font-medium rounded-lg text-white transition-all",style:{backgroundColor:"#ef4444"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#dc2626"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#ef4444"},title:"Salir del cuestionario",children:[(0,be.jsx)(xe.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{children:"Salir del cuestionario"})]})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"flex items-center justify-between gap-4 mb-3",children:[(0,be.jsx)("button",{onClick:c,className:"p-2 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:u("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=u("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=u("primary","#3b82f6")+"15"},title:"Abrir Ã­ndice de lecciones",children:(0,be.jsx)(ye,{className:"w-6 h-6",style:{color:u("primary","#3b82f6")}})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0 flex items-baseline gap-3",children:[(0,be.jsx)("p",{className:"text-sm qe-text-primary font-semibold flex-shrink-0",children:t.title.rendered}),(0,be.jsx)("span",{className:"text-gray-400",children:"â€¢"}),(0,be.jsx)("h1",{className:"text-xl font-bold text-gray-800 truncate",children:W})]})]}),(0,be.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,be.jsx)("span",{className:"qe-text-primary font-medium",children:"Progreso:"}),(0,be.jsxs)("span",{className:"font-semibold qe-text-primary",children:[U.completed," / ",U.total]})]}),(0,be.jsx)("div",{className:"flex-1 max-w-xs bg-gray-200 rounded-full h-2 overflow-hidden",children:(0,be.jsx)("div",{className:"h-full transition-all duration-300 rounded-full",style:{width:(U.total>0?U.completed/U.total*100:0)+"%",backgroundColor:"var(--qe-primary)"}})}),(0,be.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[U.total>0?Math.round(U.completed/U.total*100):0,"%"]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,be.jsxs)("button",{onClick:i,disabled:l,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:"var(--qe-primary)"},onMouseEnter:e=>{l||(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{l||(e.currentTarget.style.backgroundColor="var(--qe-primary)")},title:"Ver ranking del curso",children:[(0,be.jsx)(Tr.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{className:"hidden lg:inline",children:"Ranking"})]}),(0,be.jsxs)("button",{onClick:()=>{const{hasPrev:e,prevLesson:t,prevStep:r}=R();console.log("ðŸ” DEBUG handlePrevious:",{hasPrev:e,prevLesson:t,prevStep:r}),e&&r&&t&&o&&o(r,t)},disabled:!$.hasPrev,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:$.hasPrev?"var(--qe-primary)":"#9ca3af"},onMouseEnter:e=>{$.hasPrev&&(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{$.hasPrev&&(e.currentTarget.style.backgroundColor="var(--qe-primary)")},title:"Paso anterior",children:[(0,be.jsx)(We.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{className:"hidden sm:inline",children:"Anterior"})]}),("quiz"!==e.type||m)&&(0,be.jsx)("button",{onClick:async r=>{if(r.preventDefault(),r.stopPropagation(),t&&e&&a)try{const{currentStepIndex:r}=L();if(-1===r)return void console.error("âŒ Could not find current step index");console.log("ðŸ” DEBUG Toggle Complete:",{lessonId:t.id,stepIndex:r,stepId:e.id});const n=O(t.id,"step",t.id,r);console.log("ðŸ” Current completion status:",n),n?(await q(t.id,"step",t.id,r),console.log("âœ… Step unmarked as complete")):(await z(t.id,"step",t.id,r),console.log("âœ… Step marked as complete"))}catch(e){console.error("âŒ Error toggling step completion:",e)}else console.warn("âš ï¸ Missing required data:",{lesson:t,step:e,courseId:a})},disabled:D,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:F?"#10b981":"var(--qe-primary)"},onMouseEnter:e=>{D||(e.currentTarget.style.backgroundColor=F?"#059669":"var(--qe-accent)")},onMouseLeave:e=>{D||(e.currentTarget.style.backgroundColor=F?"#10b981":"var(--qe-primary)")},title:F?"Marcar como no completado":"Marcar como completado",children:F?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Qn.A,{className:"w-4 h-4"}),(0,be.jsx)("span",{className:"hidden md:inline",children:"Completado"})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Or,{className:"w-4 h-4"}),(0,be.jsx)("span",{className:"hidden md:inline",children:"Completar"})]})}),(0,be.jsxs)("button",{onClick:()=>{const{hasNext:e,nextLesson:t,nextStep:r}=R();console.log("ðŸ” DEBUG handleNext:",{hasNext:e,nextLesson:t,nextStep:r}),e&&r&&t&&o&&o(r,t)},disabled:!$.hasNext,className:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium rounded-lg text-white transition-all disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:$.hasNext?"var(--qe-primary)":"#9ca3af"},onMouseEnter:e=>{$.hasNext&&(e.currentTarget.style.backgroundColor="var(--qe-accent)")},onMouseLeave:e=>{$.hasNext&&(e.currentTarget.style.backgroundColor="var(--qe-primary)")},title:"Siguiente paso",children:[(0,be.jsx)("span",{className:"hidden sm:inline",children:"Siguiente"}),(0,be.jsx)(ur.A,{className:"w-4 h-4"})]})]})]})]})}),(0,be.jsx)("div",{className:"quiz"===e.type&&p?"flex-1 overflow-hidden":"flex-1 overflow-y-auto px-6 py-6",style:{backgroundColor:u("secondaryBackground","#f3f4f6")},children:(e=>{if(!e||!e.type)return(0,be.jsx)("p",{className:"text-gray-500",children:"Contenido del paso no disponible."});const r=e.data||{};switch(e.type){case"video":const n=(e=>{if(!e)return null;let t=null,r=null;let n=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return n&&n[1]&&(t=n[1],r=`https://www.youtube.com/embed/${t}`),r||(n=e.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:video\/)?(\d+)/),n&&n[1]&&(t=n[1],r=`https://player.vimeo.com/video/${t}`)),r||!e.includes("youtube.com/embed")&&!e.includes("player.vimeo.com/video")?r:e})(r.video_url);return(0,be.jsx)("div",{children:n?(0,be.jsx)("div",{className:"aspect-video",children:(0,be.jsx)("iframe",{className:"w-full h-full rounded-lg",src:n,title:e.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,be.jsx)("p",{children:"La URL del video no es vÃ¡lida o no es compatible."})});case"text":return(0,be.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:r.content||"No hay contenido de texto."}});case"quiz":const s=r.quiz_id||e.quiz_id||e.data?.quiz_id;if(!s)return(0,be.jsx)("p",{children:"Error: No se ha especificado un ID de cuestionario para este paso."});if(!p){const t={id:s,title:{rendered:r.quiz_title||e.data?.quiz_title||"Cuestionario"}};return(0,be.jsx)(cs,{quiz:t,onStartQuiz:()=>f(!0)})}return console.log("ðŸ” Rendering Quiz component:",{quizId:s,lessonId:t?.id,lesson:t}),(0,be.jsx)(is,{quizId:s,lessonId:t?.id||t?.ID,onQuizStateChange:e=>{x(e)},isDrawingMode:y,setIsDrawingMode:b,isDrawingEnabled:w,setIsDrawingEnabled:N,showDrawingToolbar:v,setShowDrawingToolbar:j,drawingTool:k,drawingColor:_,drawingLineWidth:E,onDrawingToolChange:C,onDrawingColorChange:S,onDrawingLineWidthChange:A,onClearCanvas:T,onQuizComplete:()=>{const{currentStepIndex:e}=L();-1!==e&&t&&a&&z(t.id,"step",t.id,e).then(()=>{console.log("âœ… Quiz step marked as complete"),h(!0)}).catch(e=>console.error("âŒ Error marking quiz as complete:",e))}});case"pdf":return(0,be.jsx)(ds,{step:e});default:return(0,be.jsxs)("p",{children:["Tipo de paso no soportado: ",e.type]})}})(e)})]})}),ps=({isOpen:e,onClose:t,courseId:n,courseName:s})=>{var o,a,i,l,c,d,u,p,f,m,h,g;const{loading:x,error:y,ranking:b,statistics:v,myStats:j,pagination:w,withRisk:N,toggleRisk:k,goToPage:C,nextPage:_,prevPage:S,firstPage:E,lastPage:A,goToUserPage:M}=Tn(n);return(0,r.useEffect)(()=>{e&&w.userPage&&1===w.currentPage&&M()},[e,w.userPage,w.currentPage,M]),e?(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-50 p-4 pt-24",children:(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-5xl w-full max-h-[75vh] overflow-hidden flex flex-col",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-2 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg shadow-md",children:(0,be.jsx)(Tr.A,{className:"w-6 h-6 text-white"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Ranking del Curso"}),(0,be.jsx)("p",{className:"text-sm text-gray-600",children:s})]})]}),(0,be.jsx)("button",{onClick:t,className:"p-2 hover:bg-white rounded-lg transition-colors",children:(0,be.jsx)(xe.A,{className:"w-5 h-5 text-gray-500"})})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:x&&!b.length?(0,be.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,be.jsx)("p",{className:"text-gray-600",children:"Cargando ranking..."})]})}):y?(0,be.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:[(0,be.jsx)("p",{className:"font-medium",children:"Error al cargar el ranking"}),(0,be.jsx)("p",{className:"text-sm mt-1",children:y})]}):(0,be.jsxs)("div",{className:"space-y-6",children:[v&&(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,be.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,be.jsx)("div",{className:"p-2 bg-blue-500 rounded-lg",children:(0,be.jsx)(pe.A,{className:"w-5 h-5 text-white"})}),(0,be.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Usuarios"})]}),(0,be.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:v.total_users})]}),(0,be.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,be.jsx)("div",{className:"p-2 bg-green-500 rounded-lg",children:(0,be.jsx)(ar.A,{className:"w-5 h-5 text-white"})}),(0,be.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Media Sin Riesgo"})]}),(0,be.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null!==(o=v.avg_score_without_risk)&&void 0!==o?o:0).toFixed(2)})]}),(0,be.jsxs)("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg p-4 border border-yellow-200",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,be.jsx)("div",{className:"p-2 bg-yellow-500 rounded-lg",children:(0,be.jsx)(nr.A,{className:"w-5 h-5 text-white"})}),(0,be.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Media Con Riesgo"})]}),(0,be.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null!==(a=v.avg_score_with_risk)&&void 0!==a?a:0).toFixed(2)})]})]}),j&&(0,be.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-yellow-100 rounded-lg p-6 border border-amber-200 shadow-md",children:[(0,be.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,be.jsx)(Tr.A,{className:"w-5 h-5 text-amber-600"}),"Tus EstadÃ­sticas"]}),(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,be.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,be.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3 border-b pb-2",children:"Sin Riesgo"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"PuntuaciÃ³n:"}),(0,be.jsx)("span",{className:"text-sm font-bold text-gray-900",children:(null!==(i=j.score_without_risk)&&void 0!==i?i:0).toFixed(2)})]}),(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"PosiciÃ³n:"}),(0,be.jsxs)("span",{className:"text-sm font-bold text-blue-600",children:["#",null!==(l=j.position_without_risk)&&void 0!==l?l:"-"]})]}),(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"Percentil:"}),(0,be.jsxs)("span",{className:"text-sm font-bold "+((null!==(c=j.percentile_without_risk)&&void 0!==c?c:0)>=0?"text-green-600":"text-red-600"),children:[(null!==(d=j.percentile_without_risk)&&void 0!==d?d:0)>0?"+":"",(null!==(u=j.percentile_without_risk)&&void 0!==u?u:0).toFixed(2)]})]})]})]}),(0,be.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[(0,be.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3 border-b pb-2",children:"Con Riesgo"}),(0,be.jsxs)("div",{className:"space-y-2",children:[(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"PuntuaciÃ³n:"}),(0,be.jsx)("span",{className:"text-sm font-bold text-gray-900",children:(null!==(p=j.score_with_risk)&&void 0!==p?p:0).toFixed(2)})]}),(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"PosiciÃ³n:"}),(0,be.jsxs)("span",{className:"text-sm font-bold text-blue-600",children:["#",null!==(f=j.position_with_risk)&&void 0!==f?f:"-"]})]}),(0,be.jsxs)("div",{className:"flex justify-between",children:[(0,be.jsx)("span",{className:"text-sm text-gray-600",children:"Percentil:"}),(0,be.jsxs)("span",{className:"text-sm font-bold "+((null!==(m=j.percentile_with_risk)&&void 0!==m?m:0)>=0?"text-green-600":"text-red-600"),children:[(null!==(h=j.percentile_with_risk)&&void 0!==h?h:0)>0?"+":"",(null!==(g=j.percentile_with_risk)&&void 0!==g?g:0).toFixed(2)]})]})]})]})]})]}),(0,be.jsx)("div",{className:"flex justify-center",children:(0,be.jsx)("button",{onClick:k,className:"px-6 py-3 rounded-lg font-semibold transition-all duration-200 shadow-md hover:shadow-lg "+(N?"bg-yellow-500 hover:bg-yellow-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:N?"Con Riesgo":"Sin Riesgo"})}),(0,be.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-md overflow-hidden",children:[(0,be.jsx)("div",{className:"overflow-x-auto",children:(0,be.jsxs)("table",{className:"w-full",children:[(0,be.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:(0,be.jsxs)("tr",{children:[(0,be.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"PosiciÃ³n"}),(0,be.jsx)("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider",children:"Usuario"}),(0,be.jsx)("th",{className:"px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider",children:"PuntuaciÃ³n"})]})}),(0,be.jsx)("tbody",{className:"divide-y divide-gray-200",children:b.map(e=>{var t;const r=e.is_current_user,n=1===e.position?"text-yellow-600 font-bold":2===e.position?"text-gray-500 font-bold":3===e.position?"text-orange-600 font-bold":"text-gray-700";return(0,be.jsxs)("tr",{className:"transition-colors "+(r?"bg-blue-50 border-l-4 border-l-blue-500":"hover:bg-gray-50"),children:[(0,be.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[1===e.position&&(0,be.jsx)(Tr.A,{className:"w-5 h-5 text-yellow-500"}),2===e.position&&(0,be.jsx)(nr.A,{className:"w-5 h-5 text-gray-400"}),3===e.position&&(0,be.jsx)(nr.A,{className:"w-5 h-5 text-orange-500"}),(0,be.jsxs)("span",{className:`text-lg font-semibold ${n}`,children:["#",e.position]})]})}),(0,be.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("img",{src:e.avatar_url,alt:e.display_name,className:"w-10 h-10 rounded-full border-2 border-gray-200"}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("p",{className:"font-medium "+(r?"text-blue-700":"text-gray-900"),children:[e.display_name,r&&(0,be.jsx)("span",{className:"ml-2 text-xs bg-blue-600 text-white px-2 py-1 rounded-full",children:"TÃº"})]}),(0,be.jsxs)("p",{className:"text-xs text-gray-500",children:[e.total_attempts," intento",1!==e.total_attempts?"s":""]})]})]})}),(0,be.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,be.jsx)("span",{className:"text-lg font-bold "+(r?"text-blue-700":"text-gray-900"),children:(null!==(t=e.score)&&void 0!==t?t:0).toFixed(2)})})]},e.user_id)})})]})}),0===b.length&&!x&&(0,be.jsxs)("div",{className:"text-center py-12",children:[(0,be.jsx)(Tr.A,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,be.jsx)("p",{className:"text-gray-500 font-medium",children:"No hay usuarios en el ranking todavÃ­a"}),(0,be.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Completa todos los cuestionarios para aparecer en el ranking"})]})]}),w.totalPages>1&&(0,be.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,be.jsxs)("div",{className:"text-sm text-gray-600",children:["Mostrando ",(w.currentPage-1)*w.perPage+1," - ",Math.min(w.currentPage*w.perPage,w.totalUsers)," de ",w.totalUsers," usuarios"]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("button",{onClick:E,disabled:1===w.currentPage,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Primera pÃ¡gina",children:(0,be.jsx)(An,{className:"w-4 h-4"})}),(0,be.jsx)("button",{onClick:S,disabled:1===w.currentPage,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Anterior",children:(0,be.jsx)(We.A,{className:"w-4 h-4"})}),(0,be.jsx)("div",{className:"flex gap-1",children:(()=>{const e=[],t=w.totalPages,r=w.currentPage;let n=Math.max(1,r-2),s=Math.min(t,r+2);r<=3&&(s=Math.min(5,t)),r>=t-2&&(n=Math.max(1,t-4));for(let t=n;t<=s;t++)e.push((0,be.jsx)("button",{onClick:()=>C(t),className:"px-3 py-1 rounded text-sm font-medium transition-colors "+(t===r?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t},t));return e})()}),(0,be.jsx)("button",{onClick:_,disabled:w.currentPage===w.totalPages,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Siguiente",children:(0,be.jsx)(ur.A,{className:"w-4 h-4"})}),(0,be.jsx)("button",{onClick:A,disabled:w.currentPage===w.totalPages,className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:"Ãšltima pÃ¡gina",children:(0,be.jsx)(Mn,{className:"w-4 h-4"})})]})]})]})}),(0,be.jsx)("div",{className:"p-4 border-t border-gray-200 flex justify-center bg-gray-50",children:(0,be.jsx)("button",{onClick:t,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-all shadow-md hover:shadow-lg",onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:"Cerrar"})})]})}):null},fs=()=>(0,be.jsxs)("div",{className:"flex items-center justify-center h-full text-gray-500",children:[(0,be.jsx)(et.A,{className:"animate-spin mr-2"}),"Cargando contenido del curso..."]}),ms=({message:e})=>(0,be.jsxs)("div",{className:"p-4 text-red-600",children:["Error: ",e]}),hs=()=>(0,be.jsx)("div",{className:"p-4 text-gray-500",children:"Curso no encontrado o no hay lecciones disponibles."}),gs=()=>{const{courseId:e}=(0,re.g)(),t=(0,re.zy)(),{t:n}=(0,o.Bd)(),[s,a]=(0,r.useState)(null),[i,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(null),[f,m]=(0,r.useState)({lesson:null,step:null,stepIndex:-1}),[h,g]=(0,r.useState)(null),[x,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(e){d(!0),p(null);try{const t=parseInt(e,10);if(isNaN(t))throw new Error("Invalid course ID");const r=await(0,Cn.getCourseLessons)(t,{perPage:100});console.log("ðŸ” DEBUG: Lecciones recibidas de la API (orden original):",r.data?.map(e=>({id:e.id,title:e.title?.rendered||e.title}))),l(r.data||[])}catch(e){console.error("Error fetching lessons:",e),p(e.message||"Failed to load lessons"),l([])}finally{d(!1)}}})()},[e]);const N=(0,r.useMemo)(()=>{if(!i||0===i.length)return[];console.log("ðŸ” DEBUG: Estado de lessons antes de procesar:",i.map(e=>({id:e.id,title:e.title?.rendered||e.title,_lesson_order:e.meta?._lesson_order})));const e=i.map(e=>{if(!e.meta?._lesson_steps||0===e.meta._lesson_steps.length)return e;const t=[...e.meta._lesson_steps].sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,meta:{...e.meta,_lesson_steps:t}}});return console.log("ðŸ” DEBUG: Lecciones procesadas (orden final):",e.map(e=>({id:e.id,title:e.title?.rendered||e.title}))),e},[i]),{ranking:k,myStatus:C,loading:_,totalQuizzes:S,refetch:E}=Pn(e,!1),{data:A,loading:M,error:T}=(e=>{const[t,n]=(0,r.useState)(null),[s,o]=(0,r.useState)(!0),[a,i]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{if(e){o(!0),i(null);try{const t=await(0,Vt.getCourse)(parseInt(e));n(t)}catch(e){i(e)}finally{o(!1)}}else o(!1)},[e]);return(0,r.useEffect)(()=>{l()},[l]),{data:t,loading:s,error:a}})(e);(0,r.useEffect)(()=>{A&&a(A)},[A]),(0,r.useEffect)(()=>{(T||u)&&g((T||u).message||"OcurriÃ³ un error")},[T,u]),(0,r.useEffect)(()=>{if(x||c||!N?.length)return;const e=t.state?.selectedLessonId,r=t.state?.selectedStepIndex;if(void 0!==e&&void 0!==r){const t=N.find(t=>parseInt(t.id)===parseInt(e));if(t&&t.meta?._lesson_steps){const e=t.meta._lesson_steps;if(r>=0&&r<e.length){const n=e[r];return m({lesson:t,step:n,stepIndex:r}),y(!0),void window.history.replaceState({},document.title)}}}const n=t.state?.selectedQuizId;if(n){const e=N.find(e=>{const t=e.meta?._lesson_steps?.some(e=>e?.data?.quiz_id&&parseInt(e.data.quiz_id)===parseInt(n));return t});if(e){const t=e.meta._lesson_steps.find(e=>e?.data?.quiz_id&&parseInt(e.data.quiz_id)===parseInt(n));if(t){const r=e.meta._lesson_steps.indexOf(t);return m({lesson:e,step:t,stepIndex:r}),y(!0),void window.history.replaceState({},document.title)}}}const s=N[0],o=s?.meta?._lesson_steps?.[0];s&&o&&(m({lesson:s,step:o,stepIndex:0}),y(!0))},[N,c,x,t.state]);const P=(e,t)=>{const r=(t.meta?._lesson_steps||[]).indexOf(e);m({step:e,lesson:t,stepIndex:r})};return M||c?(0,be.jsx)(fs,{}):h?(0,be.jsx)(ms,{message:h}):s&&N&&0!==N.length?(0,be.jsxs)("div",{className:"flex flex-col lg:flex-row h-full overflow-hidden",children:[(0,be.jsx)("div",{className:"flex-1 overflow-y-auto relative",children:(0,be.jsx)(us,{lesson:f.lesson,step:f.step,stepIndex:f.stepIndex,lessons:N,onNavigate:P,courseId:parseInt(e,10),onOpenRanking:async()=>{v(!0),await E()},rankingLoading:_,onOpenLessonList:()=>w(!0)})}),(0,be.jsx)(Bn,{lessons:N,isLoading:c,selectedStepId:f.step?.id,onSelectStep:P,isOpen:j,onClose:()=>w(!1)}),b&&(0,be.jsx)(ps,{isOpen:b,onClose:()=>v(!1),courseId:e,courseName:s?.title?.rendered||s?.title||"Curso"})]}):(0,be.jsx)(hs,{})};var xs=a(1523);const ys=({label:e,options:t,value:n,onChange:s,pageColors:o,isDarkMode:a})=>{var i;const{getColor:l}=(0,se.DP)(),[c,d]=(0,r.useState)(!1),u=t.find(e=>e.value===n);return(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:o.text},children:e}),(0,be.jsxs)("button",{type:"button",onClick:()=>d(!c),className:"w-full px-3 py-2 text-left rounded-lg flex items-center justify-between transition-all text-sm",style:{border:`2px solid ${c?o.accent:o.inputBorder}`,backgroundColor:o.inputBg,color:o.text},children:[(0,be.jsx)("span",{children:null!==(i=u?.label)&&void 0!==i?i:""}),(0,be.jsx)(Ut.A,{size:14,className:"transition-transform flex-shrink-0 "+(c?"rotate-180":""),style:{color:o.textMuted}})]}),c&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,be.jsx)("div",{className:"absolute z-20 w-full mt-1 max-h-48 overflow-auto rounded-lg shadow-lg border-2",style:{backgroundColor:a?l("secondaryBackground","#1f2937"):"#ffffff",borderColor:a?o.accent:o.inputBorder},children:t.map(e=>(0,be.jsxs)("div",{onClick:()=>{s(e.value),d(!1)},className:"px-3 py-2 cursor-pointer flex items-center justify-between transition-colors",style:{backgroundColor:e.value===n?a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)":"transparent"},onMouseEnter:t=>{e.value!==n&&(t.currentTarget.style.backgroundColor=a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)")},onMouseLeave:t=>{e.value!==n&&(t.currentTarget.style.backgroundColor="transparent")},children:[(0,be.jsx)("span",{className:"text-sm",style:{color:o.text},children:e.label}),e.value===n&&(0,be.jsx)(Qn.A,{size:12,style:{color:o.accent}})]},e.value))})]})]})},bs=({label:e,options:t,selected:n,onChange:s,placeholder:a="Seleccionar...",pageColors:i,isDarkMode:l,selectAllLabel:c})=>{const{t:d}=(0,o.Bd)(),{getColor:u}=(0,se.DP)(),[p,f]=(0,r.useState)(!1),m=t.map(e=>e.value),h=m.length>0&&m.every(e=>n.includes(e)),g=e=>{const t=n.includes(e)?n.filter(t=>t!==e):[...n,e];s(t)},x=t.filter(e=>n.includes(e.value)).map(e=>e.label);return(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:i.text},children:e}),(0,be.jsxs)("button",{type:"button",onClick:()=>f(!p),className:"w-full px-3 py-2 text-left rounded-lg flex items-center justify-between transition-all text-sm",style:{border:`2px solid ${p?i.accent:i.inputBorder}`,backgroundColor:i.inputBg,color:i.text},children:[(0,be.jsx)("span",{className:"block truncate",children:0===n.length?(0,be.jsx)("span",{style:{color:i.textMuted},children:a}):h?(0,be.jsx)("span",{children:c||d("common.allSelected")}):`${n.length} seleccionados`}),(0,be.jsx)(Ut.A,{size:14,className:"transition-transform "+(p?"rotate-180":""),style:{color:i.textMuted}})]}),p&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>f(!1)}),(0,be.jsxs)("div",{className:"absolute z-20 w-full mt-1 max-h-48 overflow-auto rounded-lg shadow-lg border-2",style:{backgroundColor:l?u("secondaryBackground","#1f2937"):"#ffffff",borderColor:l?i.accent:i.inputBorder},children:[(0,be.jsxs)("div",{onClick:()=>{s(h?[]:m)},className:"px-3 py-2 cursor-pointer flex items-center gap-2 transition-colors border-b",style:{backgroundColor:"transparent",borderColor:i.inputBorder},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0",style:{backgroundColor:h?i.accent:"transparent",borderColor:h?i.accent:i.inputBorder},children:h&&(0,be.jsx)(Qn.A,{size:10,className:"text-white"})}),(0,be.jsx)("span",{className:"text-sm font-medium",style:{color:i.text},children:c||d("common.selectAll")})]}),t.map(e=>(0,be.jsxs)("div",{onClick:()=>g(e.value),className:"px-3 py-2 cursor-pointer flex items-center gap-2 transition-colors",style:{backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0",style:{backgroundColor:n.includes(e.value)?i.accent:"transparent",borderColor:n.includes(e.value)?i.accent:i.inputBorder},children:n.includes(e.value)&&(0,be.jsx)(Qn.A,{size:10,className:"text-white"})}),(0,be.jsx)("span",{className:"text-sm truncate",style:{color:i.text},children:e.label})]},e.value))]})]}),n.length>0&&!h&&(0,be.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:x.map((e,r)=>(0,be.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:l?`${i.accent}30`:`${i.text}15`,color:l?"#ffffff":i.text},children:[e,(0,be.jsx)("button",{onClick:r=>{r.stopPropagation(),g(t.find(t=>t.label===e).value)},className:"ml-1 hover:opacity-70",children:(0,be.jsx)(xe.A,{size:10})})]},r))})]})},vs=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{course:a,loading:i}=Gt(t),l=a?.title?.rendered||a?.title||"",c={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:s?n("textSecondary","#9ca3af"):`${n("primary","#1a202c")}60`,accent:n("accent","#f59e0b"),primary:n("primary","#1a202c"),hoverBg:s?n("accent","#f59e0b"):n("primary","#1a202c"),inputBg:s?"rgba(0,0,0,0.2)":"#ffffff",inputBorder:s?"#ffffff":n("primary","#1a202c"),cardBg:s?n("secondaryBackground","#1f2937"):"#ffffff",containerBorder:s?n("accent","#f59e0b"):n("borderColor","#e5e7eb")},[d,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0),[g,x]=(0,r.useState)(null),[y,b]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)({lessons:[],difficulty:"all",numQuestions:10,statusFilters:[]}),{questions:k,loading:C,fetchQuestions:_}=(0,xs.A)({autoFetch:!1});(0,r.useEffect)(()=>{(async()=>{if(t){h(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=await(0,Cn.getCourseLessons)(e,{perPage:100});f(r.data||[])}catch(e){console.error("Error fetching lessons:",e),f([])}finally{h(!1)}}})()},[t]);const S=(e,t)=>{N(r=>({...r,[e]:t}))},E=e=>{N(t=>{const r=t.statusFilters.includes(e)?t.statusFilters.filter(t=>t!==e):[...t.statusFilters,e];return{...t,statusFilters:r}})},A=()=>{u(!1),x(null),b(null),j(null)},M=(0,r.useMemo)(()=>{const e=k.length>0?Math.max(1,Math.ceil(k.length/2)):0;return{id:"custom-generated",title:{rendered:"Test Personalizado"},meta:{_quiz_question_ids:k.map(e=>e.id),_time_limit:e,_passing_score:70},question_count:k.length}},[k]),T=p.map(t=>({value:t.id,label:t.title?.rendered||t.title||e("courses.untitledLesson")})),P=[{value:"all",label:e("courses.difficulty.all")},{value:"easy",label:e("common.easy")},{value:"medium",label:e("common.medium")},{value:"hard",label:e("common.hard")}],O=i||m;return(0,be.jsx)(jn,{courseId:t,courseName:l,sectionName:e("courses.testGenerator"),children:(0,be.jsxs)("div",{className:"relative h-full",children:[(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(d?"-translate-x-full":"translate-x-0"),children:(0,be.jsx)("div",{className:"h-full overflow-y-auto",children:(0,be.jsx)("div",{className:"mx-auto pt-8 pb-24",style:{paddingLeft:"3rem",paddingRight:"3rem"},children:O?(0,be.jsx)("div",{className:"rounded-xl border-2",style:{backgroundColor:c.cardBg,borderColor:c.containerBorder},children:[1,2,3].map(e=>(0,be.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse",style:{borderBottom:e<3?"1px solid rgba(156, 163, 175, 0.2)":"none"},children:[(0,be.jsx)("div",{className:"w-5 h-5 rounded",style:{backgroundColor:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"}}),(0,be.jsx)("div",{className:"h-4 rounded flex-1",style:{backgroundColor:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",maxWidth:"200px"}})]},e))}):(0,be.jsxs)("div",{className:"rounded-xl border-2",style:{backgroundColor:c.cardBg,borderColor:c.containerBorder},children:[(0,be.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:c.primary},children:(0,be.jsx)("h3",{className:"text-base font-bold text-white",children:e("courses.testGenerator")})}),(0,be.jsxs)("div",{className:"p-4 space-y-4",children:[(0,be.jsx)("div",{className:"rounded-lg p-3",style:{border:`1px solid ${c.inputBorder}`},children:(0,be.jsx)(bs,{label:e("lessons.title"),options:T,selected:w.lessons,onChange:e=>S("lessons",e),placeholder:e("common.all"),pageColors:c,isDarkMode:s,selectAllLabel:e("common.allLessons")})}),(0,be.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,be.jsx)("div",{className:"rounded-lg p-3",style:{border:`1px solid ${c.inputBorder}`},children:(0,be.jsx)(ys,{label:e("courses.difficulty.label"),options:P,value:w.difficulty,onChange:e=>S("difficulty",e),pageColors:c,isDarkMode:s})}),(0,be.jsxs)("div",{className:"rounded-lg p-3",style:{border:`1px solid ${c.inputBorder}`},children:[(0,be.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:c.text},children:e("courses.questionTypes")}),(0,be.jsx)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:[{id:"favorites",label:e("courses.favorites")},{id:"failed",label:e("courses.failed")},{id:"risked",label:e("courses.atRisk")},{id:"unanswered",label:e("courses.notAnswered")}].map(e=>{const t=w.statusFilters.includes(e.id);return(0,be.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer py-1",children:[(0,be.jsx)("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0",style:{backgroundColor:t?c.accent:"transparent",borderColor:t?c.accent:c.inputBorder},onClick:()=>E(e.id),children:t&&(0,be.jsx)(Qn.A,{size:12,className:"text-white"})}),(0,be.jsx)("span",{className:"text-sm",style:{color:c.text},onClick:()=>E(e.id),children:e.label})]},e.id)})})]})]}),(0,be.jsx)("div",{className:"grid grid-cols-2 gap-4",children:(0,be.jsx)("div",{className:"rounded-lg p-3",style:{border:`1px solid ${c.inputBorder}`},children:(0,be.jsx)(ys,{label:e("common.questions"),options:Array.from({length:20},(e,t)=>5*(t+1)).map(e=>({value:e,label:String(e)})),value:w.numQuestions,onChange:e=>S("numQuestions",e),pageColors:c,isDarkMode:s})})}),(0,be.jsx)("button",{onClick:async()=>{const e=p.map(e=>e.id).filter(Boolean),t=w.lessons.length>0,r=t&&w.lessons.length===e.length,n=t&&!r?w.lessons:null;await _(!0,{course_id:null,lessons:n,difficulty:"all"!==w.difficulty?w.difficulty:null,perPage:w.numQuestions,status_filters:w.statusFilters.length>0?w.statusFilters:null,status:"publish"}),u(!0)},disabled:C,className:"w-full py-2.5 rounded-lg font-medium text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{backgroundColor:c.accent,color:"#ffffff"},onMouseEnter:e=>{C||(e.currentTarget.style.opacity="0.9")},onMouseLeave:e=>{C||(e.currentTarget.style.opacity="1")},children:C?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,be.jsx)("span",{children:e("common.loading")})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(mn.A,{size:16}),(0,be.jsx)("span",{children:e("tests.generateTest")})]})})]})]})})})}),(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(d?"translate-x-0":"translate-x-full"),style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:d&&(0,be.jsx)("div",{className:"h-full flex flex-col",children:(0,be.jsx)("div",{className:"flex-1 overflow-hidden",children:k.length>0?g?(0,be.jsx)(Hr,{result:g,questions:y,quizInfo:v,quizTitle:e("tests.customTest"),noPadding:!0,onBack:()=>{x(null),b(null),j(null),u(!1)},courseId:t,courseName:l}):(0,be.jsx)(is,{quizId:"custom",customQuiz:M,onQuizComplete:(e,t,r)=>{x(e),b(t),j(r)},onExit:A,hideDarkModeToggle:!0}):(0,be.jsxs)("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center",children:[(0,be.jsx)("div",{className:"w-14 h-14 rounded-full flex items-center justify-center mb-4",style:{backgroundColor:s?`${c.accent}15`:`${c.text}10`},children:(0,be.jsx)(Te.A,{size:28,style:{color:c.textMuted}})}),(0,be.jsx)("h3",{className:"text-base font-bold mb-2",style:{color:c.text},children:e("tests.noQuestionsFound")}),(0,be.jsx)("p",{className:"max-w-md mx-auto mb-5 text-sm",style:{color:c.textMuted},children:e("tests.adjustFilters")}),(0,be.jsx)("button",{onClick:A,className:"px-5 py-2 rounded-lg font-medium text-sm transition-all",style:{backgroundColor:c.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:e("common.back")})]})})})})]})})},js=()=>{const{quizId:e}=(0,re.g)(),t=(0,re.Zp)(),[s,o]=(0,r.useState)(!1),[a,i]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),{formatScore:d}=qt(),{quizzes:u,loading:p}=(0,gt.J)({perPage:100}),{courses:f,loading:m}=(0,yt.A)({perPage:100}),{lessons:h,loading:g}=(0,xt.A)({perPage:100});if((0,r.useEffect)(()=>{if(u.length>0&&e){const t=u.find(t=>t.id===parseInt(e));i(t)}},[u,e]),(0,r.useEffect)(()=>{(async()=>{if(e)try{await _r.getQuizAutosave(parseInt(e))&&o(!0)}catch(e){console.error("Error checking autosave:",e)}finally{c(!1)}else c(!1)})()},[e]),p||m||g||l)return(0,be.jsx)("div",{className:"p-8",children:(0,be.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,be.jsx)("p",{className:"text-gray-600",children:"Cargando cuestionario..."})]})})});if(!a)return(0,be.jsx)("div",{className:"p-8",children:(0,be.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,be.jsx)(ae.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,be.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Cuestionario no encontrado"}),(0,be.jsx)("p",{className:"text-gray-600 mb-6",children:"El cuestionario que buscas no existe o ha sido eliminado."}),(0,be.jsx)(ct.A,{onClick:()=>t("/"),variant:"primary",className:"px-6 py-2 rounded-lg",children:"Volver al Dashboard"})]})})});if(s)return(0,be.jsx)(is,{quizId:a.id});const x=a.meta?._lesson_ids||[],y=h.filter(e=>x.includes(e.id)),b=f.filter(e=>y.some(t=>(t.meta?._course_ids||[]).includes(e.id))),v=a.meta?._quiz_question_ids?.length||0,j=a.meta?._quiz_question_ids?.length||0,w=j>0?Math.max(1,Math.ceil(j/2)):0,N=a.meta?._passing_score||0;return(0,be.jsx)("div",{className:"p-6",children:(0,be.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,be.jsxs)("button",{onClick:()=>t("/"),className:"inline-flex items-center text-gray-600 hover:text-gray-800 mb-6 transition-colors",children:[(0,be.jsx)(We.A,{className:"w-5 h-5 mr-1"}),"Volver al Dashboard"]}),(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,be.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-8 text-white",children:(0,be.jsx)("div",{className:"flex items-start justify-between",children:(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("h1",{className:"text-3xl font-bold mb-3",children:a.title?.rendered||a.title}),(0,be.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-sm text-indigo-100",children:[b.map((e,t)=>(0,be.jsxs)(n().Fragment,{children:[t>0&&(0,be.jsx)("span",{children:"â€¢"}),(0,be.jsx)("span",{className:"bg-white/10 px-2 py-1 rounded",children:e.title?.rendered||e.title})]},e.id)),y.length>0&&(0,be.jsx)("span",{children:"â€º"}),y.map((e,t)=>(0,be.jsxs)(n().Fragment,{children:[t>0&&(0,be.jsx)("span",{children:"â€¢"}),(0,be.jsx)("span",{className:"bg-white/10 px-2 py-1 rounded",children:e.title?.rendered||e.title})]},e.id))]})]})})}),(0,be.jsxs)("div",{className:"p-8",children:[(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,be.jsx)("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,be.jsx)(ie.A,{className:"w-6 h-6 text-blue-600"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm text-blue-700 font-medium",children:"Preguntas"}),(0,be.jsx)("p",{className:"text-2xl font-bold text-blue-900",children:v})]})]})}),w>0&&(0,be.jsx)("div",{className:"bg-orange-50 rounded-lg p-6 border border-orange-200",children:(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsx)("div",{className:"p-3 bg-orange-100 rounded-lg",children:(0,be.jsx)($e.A,{className:"w-6 h-6 text-orange-600"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm text-orange-700 font-medium",children:"Tiempo LÃ­mite"}),(0,be.jsxs)("p",{className:"text-2xl font-bold text-orange-900",children:[w," min"]})]})]})}),N>0&&(0,be.jsx)("div",{className:"bg-green-50 rounded-lg p-6 border border-green-200",children:(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,be.jsx)(Mr,{className:"w-6 h-6 text-green-600"})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-sm text-green-700 font-medium",children:"PuntuaciÃ³n MÃ­nima"}),(0,be.jsx)("p",{className:"text-2xl font-bold text-green-900",children:d(N)})]})]})})]}),a.content?.rendered&&(0,be.jsx)("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-200",children:(0,be.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,be.jsx)(Kn,{className:"w-5 h-5 text-gray-600 mt-0.5 flex-shrink-0"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-semibold text-gray-800 mb-2",children:"DescripciÃ³n del Cuestionario"}),(0,be.jsx)("div",{className:"text-sm text-gray-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:a.content.rendered}})]})]})}),(0,be.jsx)("div",{className:"mb-8 p-6 bg-indigo-50 rounded-lg border border-indigo-200",children:(0,be.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,be.jsx)(nr.A,{className:"w-5 h-5 text-indigo-600 mt-0.5 flex-shrink-0"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"text-sm font-semibold text-indigo-900 mb-2",children:"Instrucciones"}),(0,be.jsxs)("ul",{className:"text-sm text-indigo-800 space-y-2",children:[(0,be.jsx)("li",{children:"â€¢ Lee cada pregunta cuidadosamente antes de responder"}),(0,be.jsx)("li",{children:"â€¢ Selecciona la opciÃ³n que consideres correcta"}),w>0&&(0,be.jsxs)("li",{children:["â€¢ El cuestionario tiene un lÃ­mite de tiempo de ",w," minutos"]}),(0,be.jsx)("li",{children:"â€¢ Puedes marcar preguntas con riesgo si no estÃ¡s seguro"}),(0,be.jsx)("li",{children:"â€¢ Revisa tus respuestas antes de enviar el cuestionario"}),N>0&&(0,be.jsxs)("li",{children:["â€¢ Necesitas obtener al menos ",d(N)," para aprobar"]})]})]})]})}),(0,be.jsx)("div",{className:"flex justify-center",children:(0,be.jsxs)("button",{onClick:()=>o(!0),className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-bold text-lg rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,be.jsx)(Ct,{className:"w-6 h-6 mr-2"}),"Comenzar Cuestionario"]})})]})]})]})})},ws=(0,le.A)("book-check",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9 9.5 2 2 4-4",key:"1dth82"}]]),Ns=()=>{const e=(0,re.Zp)(),[t,n]=(0,r.useState)({}),[s,o]=(0,r.useState)({}),[a,i]=(0,r.useState)(""),{courses:l,loading:c}=(0,yt.A)({perPage:100}),{lessons:d,loading:u}=(0,xt.A)({perPage:100}),{quizzes:p,loading:f}=(0,gt.J)({perPage:100});console.log("ðŸ“Š Data loaded:",{courses:l.length,lessons:d.length,quizzes:p.length});const m=(0,r.useMemo)(()=>{if(!l.length||!d.length||!p.length)return console.log("âš ï¸ Missing data for organization"),[];const e=[];return l.forEach(t=>{console.log(`ðŸ“š Processing course: ${t.title?.rendered||t.title}`);const r=d.filter(e=>(e.meta?._course_ids||[]).includes(t.id));if(console.log(`  Found ${r.length} lessons for course ${t.id}`),0===r.length)return;const n={id:t.id,title:t.title?.rendered||t.title,lessons:[]};r.forEach(e=>{console.log(`  ðŸ“„ Processing lesson: ${e.title?.rendered||e.title}`);const r=p.filter(r=>{const n=r.meta?._lesson_ids||[],s=r.meta?._course_ids||[];return n.includes(e.id)||0===n.length&&s.includes(t.id)});console.log(`    Found ${r.length} quizzes for lesson ${e.id}`),0!==r.length&&n.lessons.push({id:e.id,title:e.title?.rendered||e.title,quizzes:r.map(e=>({id:e.id,title:e.title?.rendered||e.title,questionCount:e.question_count||0,timeLimit:e.time_limit||0,passingScore:e.passing_score||0}))})}),n.lessons.length>0&&e.push(n)}),console.log("âœ… Organization complete:",e),e},[l,d,p]),h=(0,r.useMemo)(()=>p.length?p.filter(e=>{const t=e.meta?._lesson_ids||[],r=e.meta?._course_ids||[];return 0===t.length&&0===r.length}).map(e=>({id:e.id,title:e.title?.rendered||e.title,questionCount:e.question_count||0,timeLimit:e.time_limit||0,passingScore:e.passing_score||0})):[],[p]),g=(0,r.useMemo)(()=>a?m.map(e=>({...e,lessons:e.lessons.map(e=>({...e,quizzes:e.quizzes.filter(e=>e.title.toLowerCase().includes(a.toLowerCase()))})).filter(e=>e.quizzes.length>0)})).filter(e=>e.lessons.length>0):m,[m,a]),x=(0,r.useMemo)(()=>a?h.filter(e=>e.title.toLowerCase().includes(a.toLowerCase())):h,[h,a]),y=t=>{e(`/quiz/${t}`)},b=c||u||f,v=m.reduce((e,t)=>e+t.lessons.reduce((e,t)=>e+t.quizzes.length,0),0)+h.length;return(0,be.jsx)("div",{className:"p-8",children:(0,be.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsxs)("button",{onClick:()=>e("/test"),className:"inline-flex items-center text-gray-600 hover:text-gray-800 mb-4 transition-colors",children:[(0,be.jsx)(We.A,{className:"w-5 h-5 mr-1"}),"Volver a Test"]}),(0,be.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Biblioteca de Cuestionarios"}),(0,be.jsx)("p",{className:"text-gray-600 mt-2",children:"Accede a todos los cuestionarios disponibles organizados por curso y lecciÃ³n"})]}),(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,be.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 text-white",children:[(0,be.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsx)(ae.A,{className:"w-8 h-8"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h2",{className:"text-2xl font-bold",children:"Todos los Cuestionarios"}),(0,be.jsx)("p",{className:"text-indigo-100 text-sm mt-1",children:b?"Cargando...":`${v} cuestionarios disponibles`})]})]})}),(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)(Le.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-indigo-300"}),(0,be.jsx)("input",{type:"text",placeholder:"Buscar cuestionario...",value:a,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white placeholder-indigo-200 focus:outline-none focus:ring-2 focus:ring-white/50"})]})]}),(0,be.jsx)("div",{className:"p-6",children:b?(0,be.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mr-3"}),(0,be.jsx)("span",{className:"text-gray-600",children:"Cargando cuestionarios..."})]}):0===g.length&&0===x.length?(0,be.jsxs)("div",{className:"text-center py-12",children:[(0,be.jsx)(ws,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,be.jsx)("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:a?"No se encontraron cuestionarios":"No hay cuestionarios disponibles"}),(0,be.jsx)("p",{className:"text-gray-500",children:a?"Intenta con otros tÃ©rminos de bÃºsqueda":"Los cuestionarios aparecerÃ¡n aquÃ­ cuando estÃ©n disponibles"})]}):(0,be.jsxs)("div",{className:"space-y-6",children:[g.length>0&&(0,be.jsx)("div",{className:"space-y-4",children:g.map(e=>(0,be.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,be.jsxs)("button",{onClick:()=>{return t=e.id,void n(e=>({...e,[t]:!e[t]}));var t},className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[t[e.id]?(0,be.jsx)(Ut.A,{className:"w-5 h-5 text-gray-600"}):(0,be.jsx)(ur.A,{className:"w-5 h-5 text-gray-600"}),(0,be.jsx)(ae.A,{className:"w-5 h-5 text-indigo-600"}),(0,be.jsx)("span",{className:"font-semibold text-gray-800",children:e.title})]}),(0,be.jsxs)("span",{className:"text-sm text-gray-500",children:[e.lessons.reduce((e,t)=>e+t.quizzes.length,0)," cuestionarios"]})]}),t[e.id]&&(0,be.jsx)("div",{className:"bg-white",children:e.lessons.map(e=>(0,be.jsxs)("div",{className:"border-t border-gray-200",children:[(0,be.jsxs)("button",{onClick:()=>{return t=e.id,void o(e=>({...e,[t]:!e[t]}));var t},className:"w-full flex items-center justify-between p-4 pl-12 hover:bg-gray-50 transition-colors",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[s[e.id]?(0,be.jsx)(Ut.A,{className:"w-4 h-4 text-gray-500"}):(0,be.jsx)(ur.A,{className:"w-4 h-4 text-gray-500"}),(0,be.jsx)(ie.A,{className:"w-4 h-4 text-purple-600"}),(0,be.jsx)("span",{className:"text-gray-700 font-medium",children:e.title})]}),(0,be.jsxs)("span",{className:"text-xs text-gray-500",children:[e.quizzes.length," cuestionarios"]})]}),s[e.id]&&(0,be.jsx)("div",{className:"bg-gray-50 border-t border-gray-200",children:e.quizzes.map(e=>(0,be.jsxs)("button",{onClick:()=>y(e.id),className:"w-full flex items-center justify-between p-4 pl-20 hover:bg-gray-100 transition-colors border-b border-gray-200 last:border-b-0",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,be.jsx)(ws,{className:"w-4 h-4 text-green-600"}),(0,be.jsx)("span",{className:"text-gray-800 text-sm",children:e.title})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,be.jsx)(ie.A,{className:"w-3 h-3"}),(0,be.jsxs)("span",{children:[e.questionCount," preguntas"]})]}),e.timeLimit>0&&(0,be.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,be.jsx)($e.A,{className:"w-3 h-3"}),(0,be.jsxs)("span",{children:[e.timeLimit," min"]})]})]})]},e.id))})]},e.id))})]},e.id))}),x.length>0&&(0,be.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,be.jsx)("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:(0,be.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,be.jsx)(ie.A,{className:"w-5 h-5 text-gray-600"}),(0,be.jsx)("span",{className:"font-semibold text-gray-800",children:"Otros Cuestionarios"}),(0,be.jsxs)("span",{className:"text-sm text-gray-500",children:["(",x.length,")"]})]})}),(0,be.jsx)("div",{className:"bg-white",children:x.map(e=>(0,be.jsxs)("button",{onClick:()=>y(e.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors border-b border-gray-200 last:border-b-0",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-3 flex-1",children:[(0,be.jsx)(ws,{className:"w-4 h-4 text-green-600"}),(0,be.jsx)("span",{className:"text-gray-800 text-sm",children:e.title})]}),(0,be.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,be.jsx)(ie.A,{className:"w-3 h-3"}),(0,be.jsxs)("span",{children:[e.questionCount," preguntas"]})]}),e.timeLimit>0&&(0,be.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,be.jsx)($e.A,{className:"w-3 h-3"}),(0,be.jsxs)("span",{children:[e.timeLimit," min"]})]})]})]},e.id))})]})]})})]})]})})},ks=(0,le.A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Cs=({questions:e,answers:t,onBackToConfig:n})=>{const s=(0,r.useMemo)(()=>{let r=0,n=0,s=0;const o=e.map(e=>{const o=t[e.id],a=e.meta?._correct_answer;if(!o)return s++,{question:e,userAnswer:null,correctAnswer:a,isCorrect:!1,wasAnswered:!1};const i=o===a;return i?r++:n++,{question:e,userAnswer:o,correctAnswer:a,isCorrect:i,wasAnswered:!0}});return{correct:r,incorrect:n,unanswered:s,total:e.length,percentage:Math.round(r/e.length*100),detailedResults:o}},[e,t]),o=e=>({option_a:"A",option_b:"B",option_c:"C",option_d:"D"}[e]||e);return(0,be.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-4",children:[(0,be.jsxs)("div",{className:"text-center mb-6",children:[(0,be.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-full mb-3",children:(0,be.jsx)(ae.A,{className:"w-8 h-8 text-white"})}),(0,be.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-1",children:"Â¡PrÃ¡ctica Completada!"}),(0,be.jsx)("p",{className:"text-sm text-gray-600",children:"Revisa tus respuestas y aprende de los errores"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mb-6",children:[(0,be.jsxs)("div",{className:"bg-blue-50 rounded-lg p-3 text-center border border-blue-200",children:[(0,be.jsx)("div",{className:"text-xl font-bold text-blue-600 mb-1",children:s.total}),(0,be.jsx)("div",{className:"text-xs text-blue-700",children:"Total"})]}),(0,be.jsxs)("div",{className:"bg-green-50 rounded-lg p-3 text-center border border-green-200",children:[(0,be.jsx)("div",{className:"text-xl font-bold text-green-600 mb-1",children:s.correct}),(0,be.jsx)("div",{className:"text-xs text-green-700",children:"Correctas"})]}),(0,be.jsxs)("div",{className:"bg-red-50 rounded-lg p-3 text-center border border-red-200",children:[(0,be.jsx)("div",{className:"text-xl font-bold text-red-600 mb-1",children:s.incorrect}),(0,be.jsx)("div",{className:"text-xs text-red-700",children:"Incorrectas"})]}),(0,be.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 text-center border border-gray-200",children:[(0,be.jsx)("div",{className:"text-xl font-bold text-gray-600 mb-1",children:s.unanswered}),(0,be.jsx)("div",{className:"text-xs text-gray-700",children:"Sin responder"})]})]}),(0,be.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg p-4 border border-blue-200",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,be.jsx)("span",{className:"text-xs font-medium text-blue-900",children:"PrecisiÃ³n"}),(0,be.jsxs)("span",{className:"text-xl font-bold text-blue-600",children:[s.percentage,"%"]})]}),(0,be.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2.5",children:(0,be.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${s.percentage}%`}})})]})]}),(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-4",children:[(0,be.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"RevisiÃ³n de Respuestas"}),(0,be.jsx)("div",{className:"space-y-4",children:s.detailedResults.map((e,t)=>{const r="object"==typeof e.question.title&&e.question.title?.rendered?e.question.title.rendered:e.question.title;return(0,be.jsxs)("div",{className:"border rounded-lg p-4 "+(e.wasAnswered?e.isCorrect?"border-green-300 bg-green-50":"border-red-300 bg-red-50":"border-gray-300 bg-gray-50"),children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,be.jsxs)("div",{className:"flex items-start space-x-3 flex-1",children:[(0,be.jsx)("span",{className:"flex-shrink-0 w-6 h-6 bg-white rounded-full flex items-center justify-center text-xs font-semibold text-gray-700 border border-gray-300",children:t+1}),(0,be.jsx)("div",{className:"flex-1",children:(0,be.jsx)("div",{className:"text-sm text-gray-800 font-medium",dangerouslySetInnerHTML:{__html:r}})})]}),(0,be.jsx)("div",{className:"flex-shrink-0 ml-3",children:e.wasAnswered?e.isCorrect?(0,be.jsx)(Oe.A,{className:"w-5 h-5 text-green-600"}):(0,be.jsx)(lr.A,{className:"w-5 h-5 text-red-600"}):(0,be.jsx)("div",{className:"inline-flex items-center px-2 py-0.5 bg-gray-200 text-gray-700 rounded-full text-[10px] font-medium",children:"Sin responder"})})]}),(0,be.jsx)("div",{className:"ml-9 space-y-2",children:["option_a","option_b","option_c","option_d"].map(t=>{const r=e.question.meta?.[`_${t}`];if(!r)return null;const n=e.userAnswer===t,s=e.correctAnswer===t;return(0,be.jsx)("div",{className:"p-2 rounded-lg border "+(s?"border-green-500 bg-green-100":n?"border-red-500 bg-red-100":"border-gray-200 bg-white"),children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsxs)("span",{className:"text-xs font-semibold text-gray-700",children:[o(t),"."]}),(0,be.jsx)("span",{className:"text-xs text-gray-800",dangerouslySetInnerHTML:{__html:r}})]}),s&&(0,be.jsx)("span",{className:"text-[10px] font-medium text-green-700 bg-green-200 px-1.5 py-0.5 rounded",children:"Correcta"}),n&&!s&&(0,be.jsx)("span",{className:"text-[10px] font-medium text-red-700 bg-red-200 px-1.5 py-0.5 rounded",children:"Tu respuesta"})]})},t)})}),e.question.meta?._explanation&&(0,be.jsx)("div",{className:"ml-9 mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,be.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,be.jsx)(ae.A,{className:"w-3.5 h-3.5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-[10px] font-semibold text-blue-900 mb-0.5",children:"ExplicaciÃ³n"}),(0,be.jsx)("div",{className:"text-xs text-blue-800",dangerouslySetInnerHTML:{__html:e.question.meta._explanation}})]})]})})]},e.question.id)})})]})]})},_s=({quizId:e,customQuiz:t=null,customQuestions:n=null})=>{const s=(0,re.Zp)(),[o,a]=(0,r.useState)(0),[i,l]=(0,r.useState)({}),[c,d]=(0,r.useState)(!1),{questions:u,loading:p}=(0,xs.A)({quiz:"practice"!==e?e:null,autoFetch:"practice"!==e}),f=t,m=n||u,h=(0,r.useMemo)(()=>f?.meta?._quiz_question_ids?f.meta._quiz_question_ids.map(e=>m.find(t=>t.id===parseInt(e))).filter(Boolean):[],[f,m]),g=(0,r.useMemo)(()=>h.length?[...h].sort(()=>Math.random()-.5):[],[h]),x=g[o],y=(0,r.useCallback)((e,t)=>{l(r=>({...r,[e]:t}))},[]),b=(0,r.useCallback)(()=>{o<g.length-1&&a(e=>e+1)},[o,g.length]),v=(0,r.useCallback)(()=>{o>0&&a(e=>e-1)},[o]),j=(0,r.useCallback)(()=>{d(!0)},[]),w=(0,r.useCallback)(()=>{s("/test/practice")},[s]);if(p)return(0,be.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 qe-spinner-primary mb-4"}),(0,be.jsx)("p",{className:"text-gray-600",children:"Cargando prÃ¡ctica..."})]})});if(!f||0===g.length)return(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,be.jsx)(ws,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,be.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No hay preguntas disponibles"}),(0,be.jsx)("p",{className:"text-gray-600 mb-4",children:"No se encontraron preguntas con los filtros seleccionados."}),(0,be.jsx)("button",{onClick:w,className:"qe-btn-primary px-6 py-2 rounded-lg transition-colors",children:"Volver a configurar"})]});if(c)return(0,be.jsx)(Cs,{questions:g,answers:i,onBackToConfig:w});const N=Object.keys(i).length,k=(o+1)/g.length*100;return(0,be.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 mb-6",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,be.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,be.jsx)(ws,{className:"w-5 h-5 qe-icon-primary"}),(0,be.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["Pregunta ",o+1," de ",g.length]})]}),(0,be.jsxs)("span",{className:"text-sm text-gray-600",children:[N," / ",g.length," respondidas"]})]}),(0,be.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,be.jsx)("div",{className:"qe-progress-bar h-2 rounded-full transition-all duration-300",style:{width:`${k}%`}})})]}),x&&(0,be.jsx)("div",{className:"mb-6",children:(0,be.jsx)(Gn,{question:x,questionNumber:o+1,selectedAnswer:i[x.id],onAnswerChange:e=>y(x.id,e),disabled:!1,showCorrectAnswer:!1,isPracticeMode:!0})}),(0,be.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("button",{onClick:v,disabled:0===o,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,be.jsx)(We.A,{className:"w-4 h-4 mr-1"}),"Anterior"]}),(0,be.jsx)("div",{className:"flex items-center space-x-2",children:g.map((e,t)=>(0,be.jsx)("button",{onClick:()=>a(t),className:"w-8 h-8 rounded-full text-xs font-medium transition-colors "+(t===o?"qe-bg-primary text-white":i[g[t].id]?"bg-green-100 text-green-700 border border-green-300":"bg-gray-100 text-gray-600 border border-gray-300"),children:t+1},t))}),o===g.length-1?(0,be.jsxs)("button",{onClick:j,className:"inline-flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium",children:[(0,be.jsx)(Oe.A,{className:"w-4 h-4 mr-2"}),"Finalizar"]}):(0,be.jsxs)("button",{onClick:b,className:"qe-btn-primary inline-flex items-center px-4 py-2 rounded-lg transition-colors",children:["Siguiente",(0,be.jsx)(ur.A,{className:"w-4 h-4 ml-1"})]})]})}),(0,be.jsx)("div",{className:"mt-4 qe-card-primary rounded-lg p-4",children:(0,be.jsxs)("p",{className:"text-sm qe-text-primary",children:["ðŸ’¡ ",(0,be.jsx)("strong",{children:"Modo prÃ¡ctica:"})," TÃ³mate tu tiempo. No hay lÃ­mite de tiempo ni penalizaciones. PodrÃ¡s ver las respuestas correctas al finalizar."]})})]})};var Ss=a(9222);const Es=({isOpen:e,onClose:t,onGenerate:n,courses:s,lessons:o,categories:a,difficulties:i,isLoading:l,isPracticeMode:c=!1})=>{const{getColor:d}=(0,se.DP)(),[u,p]=(0,r.useState)({course:"all",lesson:"all",category:"all",difficulty:"all",numQuestions:10,timeLimit:0}),f=(e,t)=>{p(r=>({...r,[e]:t}))},m=[{value:"all",label:"Todos los Cursos"},...s.map(e=>({value:e.id,label:e.title.rendered||e.title}))],h=[{value:"all",label:"Todas las Lecciones"},...o.map(e=>({value:e.id,label:e.title.rendered||e.title}))],g=(e,t,r,n,s,o=!1)=>(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{htmlFor:t,className:"block text-sm font-medium qe-text-primary mb-2",children:e}),(0,be.jsx)("select",{id:t,name:t,value:r,onChange:e=>n(t,e.target.value),disabled:o,className:"w-full h-10 pl-3 pr-6 text-base border-2 rounded-lg appearance-none transition-colors disabled:opacity-50 disabled:cursor-not-allowed",style:{borderColor:d("primary","#3b82f6")+"30"},onFocus:e=>{o||(e.currentTarget.style.borderColor=d("primary","#3b82f6"))},onBlur:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")+"30"},children:s.map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))})]});return e?(0,be.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:[(0,be.jsx)("div",{className:"fixed inset-0",onClick:t}),(0,be.jsxs)("div",{className:"relative w-full max-w-3xl max-h-[90vh] rounded-xl shadow-lg border-2 flex flex-col",style:{backgroundColor:d("secondaryBackground","#f8f9fa"),borderColor:d("primary","#3b82f6")},children:[(0,be.jsxs)("div",{className:"p-6 border-b-2 flex items-center justify-between flex-shrink-0",style:{borderColor:d("primary","#3b82f6")+"30"},children:[(0,be.jsxs)("h3",{className:"text-2xl font-bold qe-text-primary flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:d("primary","#3b82f6")+"20"},children:(0,be.jsx)(Ss.A,{className:"w-6 h-6",style:{color:d("primary","#3b82f6")}})}),c?"Configurar PrÃ¡ctica":"Configurar Cuestionario"]}),(0,be.jsx)("button",{onClick:t,className:"p-2 rounded-lg transition-all",style:{backgroundColor:d("primary","#3b82f6")+"15"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"25"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"15"},title:"Cerrar",children:(0,be.jsx)(xe.A,{className:"w-6 h-6",style:{color:d("primary","#3b82f6")}})})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,be.jsxs)("div",{className:"space-y-4 max-w-2xl mx-auto",children:[g("Filtrar por Curso","course",u.course,f,m,l),g("Filtrar por LecciÃ³n","lesson",u.lesson,f,h,l),g("Filtrar por CategorÃ­a","category",u.category,f,a,l),g("Filtrar por Dificultad","difficulty",u.difficulty,f,i,l),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium qe-text-primary mb-2",children:"NÃºmero de Preguntas"}),(0,be.jsx)("input",{type:"number",min:"1",max:"50",value:u.numQuestions,onChange:e=>f("numQuestions",parseInt(e.target.value,10)),className:"w-full h-10 px-3 text-base border-2 rounded-lg transition-colors",style:{borderColor:d("primary","#3b82f6")+"30"},onFocus:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")},onBlur:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")+"30"}})]}),!c&&(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium qe-text-primary mb-2",children:"LÃ­mite de Tiempo (minutos)"}),(0,be.jsx)("input",{type:"number",min:"0",value:u.timeLimit,onChange:e=>f("timeLimit",parseInt(e.target.value,10)),className:"w-full h-10 px-3 text-base border-2 rounded-lg transition-colors",style:{borderColor:d("primary","#3b82f6")+"30"},placeholder:"0 para ilimitado",onFocus:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")},onBlur:e=>{e.currentTarget.style.borderColor=d("primary","#3b82f6")+"30"}})]})]})]})}),(0,be.jsxs)("div",{className:"p-4 border-t-2 flex justify-center gap-3 flex-shrink-0",style:{borderColor:d("primary","#3b82f6")+"30"},children:[(0,be.jsx)("button",{onClick:t,className:"px-6 py-2 rounded-lg font-semibold transition-all border-2",style:{borderColor:d("primary","#3b82f6")+"30",color:d("primary","#3b82f6")},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=d("primary","#3b82f6")+"10"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Cancelar"}),(0,be.jsx)("button",{onClick:()=>{n(u)},disabled:l,className:"px-6 py-2 rounded-lg text-white font-semibold transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",style:{backgroundColor:d("primary","#3b82f6")},onMouseEnter:e=>{l||(e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:l?"Cargando filtros...":c?"Comenzar PrÃ¡ctica":"Generar Cuestionario"})]})]})]}):null},As=()=>{const[e,t]=(0,r.useState)(!1),[n,s]=(0,r.useState)(null),{courses:o,loading:a}=(0,yt.A)({perPage:100}),{lessons:i,loading:l}=(0,xt.A)({perPage:100}),{options:c,isLoading:d}=(0,ht.h)(["qe_category","qe_difficulty"]),{questions:u,loading:p,fetchQuestions:f}=(0,xs.A)({autoFetch:!1,perPage:100}),m=(0,r.useCallback)(async e=>{s(e),t(!1),await f(!0,{perPage:100,status:"publish"})},[f]),h=()=>{s(null),t(!1)};if(!n)return(0,be.jsxs)("div",{className:"p-8",children:[(0,be.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,be.jsxs)("div",{className:"text-center mb-12",children:[(0,be.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-600 rounded-2xl mb-6 shadow-lg",children:(0,be.jsx)(ws,{className:"w-10 h-10 text-white"})}),(0,be.jsx)("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:"Modo PrÃ¡ctica"}),(0,be.jsx)("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Practica sin presiÃ³n: sin lÃ­mite de tiempo, sin puntuaciones ni penalizaciones"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-10",children:[(0,be.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,be.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mb-4",children:(0,be.jsx)(ks,{className:"w-6 h-6 text-blue-600"})}),(0,be.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Sin PresiÃ³n"}),(0,be.jsx)("p",{className:"text-sm text-gray-600",children:"No hay lÃ­mite de tiempo ni puntuaciones. EnfÃ³cate en aprender"})]}),(0,be.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,be.jsx)("div",{className:"w-12 h-12 bg-cyan-100 rounded-lg flex items-center justify-center mb-4",children:(0,be.jsx)(Kn,{className:"w-6 h-6 text-cyan-600"})}),(0,be.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"RetroalimentaciÃ³n Inmediata"}),(0,be.jsx)("p",{className:"text-sm text-gray-600",children:"Ve las respuestas correctas y explicaciones al finalizar"})]}),(0,be.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,be.jsx)("div",{className:"w-12 h-12 bg-teal-100 rounded-lg flex items-center justify-center mb-4",children:(0,be.jsx)(At.A,{className:"w-6 h-6 text-teal-600"})}),(0,be.jsx)("h3",{className:"font-semibold text-gray-800 mb-2",children:"Ilimitado"}),(0,be.jsx)("p",{className:"text-sm text-gray-600",children:"Repite cuantas veces quieras. Ideal para reforzar conocimientos"})]})]}),(0,be.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-10",children:(0,be.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,be.jsx)(Kn,{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"text-sm font-semibold text-yellow-900 mb-2",children:"Â¿En quÃ© se diferencia del modo normal?"}),(0,be.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,be.jsx)("li",{children:"âœ… Sin cronÃ³metro ni lÃ­mite de tiempo"}),(0,be.jsx)("li",{children:"âœ… No se registra puntuaciÃ³n ni se afecta tu ranking"}),(0,be.jsx)("li",{children:"âœ… No hay penalizaciones por respuestas incorrectas"}),(0,be.jsx)("li",{children:"âœ… Perfecto para aprender sin estrÃ©s"})]})]})]})}),(0,be.jsx)("div",{className:"text-center",children:(0,be.jsxs)("button",{onClick:()=>{t(!0)},className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,be.jsx)(me.A,{className:"w-5 h-5 mr-2"}),"Configurar PrÃ¡ctica"]})}),(0,be.jsx)("div",{className:"mt-12 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-6 border border-blue-100",children:(0,be.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,be.jsx)(ws,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:"Consejo de estudio"}),(0,be.jsx)("p",{className:"text-sm text-blue-700",children:"El modo prÃ¡ctica es ideal para familiarizarte con el tipo de preguntas y repasar conceptos antes de realizar un test formal. TÃ³mate tu tiempo y asegÃºrate de entender cada respuesta."})]})]})})]}),e&&(0,be.jsx)(Es,{isOpen:e,onClose:()=>t(!1),onGenerate:m,courses:o,lessons:i,categories:c.qe_category||[],difficulties:c.qe_difficulty||[],isLoading:a||l||d,isPracticeMode:!0})]});if(p)return(0,be.jsx)("div",{className:"p-8",children:(0,be.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,be.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 rounded-full mb-4 animate-pulse",children:(0,be.jsx)(ws,{className:"w-8 h-8 text-blue-600"})}),(0,be.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Preparando tu prÃ¡ctica..."}),(0,be.jsx)("p",{className:"text-gray-600",children:"Seleccionando las preguntas ideales para ti"})]})});let g=[...u];n&&(n.lesson&&"all"!==n.lesson&&(g=g.filter(e=>(e.meta?._lesson_ids||[]).includes(parseInt(n.lesson)))),n.category&&"all"!==n.category&&(g=g.filter(e=>(e.qe_category||[]).includes(parseInt(n.category)))),n.difficulty&&"all"!==n.difficulty&&(g=g.filter(e=>(e.qe_difficulty||[]).includes(parseInt(n.difficulty)))),n.numQuestions&&g.length>n.numQuestions&&(g=g.sort(()=>Math.random()-.5).slice(0,n.numQuestions)));const x={id:"practice",title:{rendered:"Modo PrÃ¡ctica"},meta:{_quiz_question_ids:g.map(e=>e.id),_time_limit:0,_passing_score:0},question_count:g.length};return 0===g.length?(0,be.jsx)("div",{className:"p-8",children:(0,be.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,be.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,be.jsx)(ws,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,be.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"No hay preguntas disponibles"}),(0,be.jsx)("p",{className:"text-gray-600 mb-6",children:"No se encontraron preguntas con los filtros seleccionados. Intenta ajustar tu configuraciÃ³n."}),(0,be.jsxs)("button",{onClick:h,className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white font-semibold rounded-xl hover:from-blue-700 hover:to-cyan-700 transition-all shadow-lg",children:[(0,be.jsx)(At.A,{className:"w-5 h-5 mr-2"}),"Configurar Nueva PrÃ¡ctica"]})]})})}):(0,be.jsxs)("div",{className:"p-6",children:[(0,be.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Modo PrÃ¡ctica"}),(0,be.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[g.length," preguntas â€¢ Sin lÃ­mite de tiempo â€¢ Sin puntuaciÃ³n"]})]}),(0,be.jsxs)("button",{onClick:h,className:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:[(0,be.jsx)(At.A,{className:"w-4 h-4 mr-2"}),"Nueva PrÃ¡ctica"]})]}),(0,be.jsx)(_s,{quizId:"practice",customQuiz:x,customQuestions:g})]})};var Ms=a(5333);const Ts=()=>{const{t:e}=(0,o.Bd)(),t=(0,re.Zp)(),{courseId:n}=(0,re.g)(),{getColor:s,isDarkMode:a}=(0,se.DP)(),{formatScore:i}=qt(),l={text:a?s("textPrimary","#f9fafb"):s("primary","#1a202c"),textMuted:s("textSecondary",a?"#9ca3af":"#6b7280"),accent:s("accent","#f59e0b"),bgCard:a?s("secondaryBackground","#1f2937"):"#ffffff",bgSubtle:a?"rgba(255,255,255,0.05)":`${s("primary","#1a202c")}05`,hoverBg:a?"rgba(255,255,255,0.1)":`${s("primary","#1a202c")}10`,hoverBgStrong:a?"rgba(255,255,255,0.15)":`${s("primary","#1a202c")}20`,primaryBg:s("primary","#1a202c")},[c,d]=(0,r.useState)(""),[u,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),[h,g]=(0,r.useState)(""),[x,y]=(0,r.useState)(1),[b,v]=(0,r.useState)([]),[j,w]=(0,r.useState)(!1),N=(0,r.useMemo)(()=>({search:c,lesson_id:u,date_from:f,date_to:h}),[c,u,f,h]),{attempts:k,loading:C,error:_,pagination:S,fetchAttempts:E}=Zt({courseId:n?parseInt(n,10):null,perPage:10,autoFetch:!1,filters:N});(0,r.useEffect)(()=>{n&&(async()=>{try{const e=parseInt(n,10);if(!e||isNaN(e))return void console.error("Invalid courseId:",n);const t=await(0,Cn.getCourseLessons)(e);v(t.data||[])}catch(e){console.error("Error loading lessons:",e)}})()},[n]),(0,r.useEffect)(()=>{E(x,N)},[x,N,E]);const A=[...new Set(k.map(e=>e.quiz_id))],{rankings:M,loading:T}=rr(A),P=(e,t,r)=>{const n=M[e];if(!n)return null;const s=n.statistics;if(!s)return null;const o=r?s.avg_score_with_risk:s.avg_score_without_risk;return null==o?null:t-o},O=(e,r)=>{r.stopPropagation(),t(`/courses/${n}/tests`,{state:{selectedQuizId:parseInt(e.quiz_id),scrollToQuiz:!0,returnTo:`/courses/${n}/test-history`}})},z=(e,r)=>{r.stopPropagation(),t(`/courses/${n}/tests`,{state:{selectedQuizId:parseInt(e.quiz_id),viewAttemptId:parseInt(e.attempt_id),returnTo:`/courses/${n}/test-history`}})},q=e=>{y(e),window.scrollTo({top:0,behavior:"smooth"})},D=c||u||f||h;return(0,be.jsxs)("div",{className:"flex h-full w-full",children:[(0,be.jsx)(vn,{}),(0,be.jsxs)("div",{className:"flex-1 flex flex-col overflow-auto",style:{backgroundColor:s("secondaryBackground","#f3f4f6")},children:[(0,be.jsx)("header",{className:"px-6 py-3 border-b sticky top-0 z-[1] flex-shrink-0",style:{borderBottomColor:a?"rgba(255,255,255,0.1)":`${s("primary","#1a202c")}15`,backgroundColor:s("secondaryBackground","#f3f4f6")},children:(0,be.jsxs)("nav",{className:"flex items-center text-sm space-x-2",children:[(0,be.jsx)(re.N_,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:l.text},children:e("sidebar.studyPlanner")}),(0,be.jsx)(ur.A,{size:16,style:{color:l.textMuted}}),(0,be.jsx)("span",{className:"font-medium",style:{color:l.text},children:e("tests.testHistory")})]})}),(0,be.jsxs)("div",{className:"max-w-7xl w-full mx-auto px-4 py-6 pb-24",children:[(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:l.hoverBg},children:(0,be.jsx)(ce,{size:28,style:{color:l.text}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",style:{color:l.text},children:e("tests.testHistory")}),(0,be.jsxs)("p",{className:"text-sm mt-1",style:{color:l.textMuted},children:[S.total," ",1===S.total?e("tests.attempt"):e("tests.attempts")," ",e("common.total")]})]})]}),(0,be.jsxs)("button",{onClick:()=>w(!j),className:"w-full sm:w-auto flex items-center justify-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:j?l.primaryBg:l.hoverBg,color:j?"#ffffff":l.text},children:[(0,be.jsx)(Ms.A,{size:18}),(0,be.jsx)("span",{children:e("common.filters")}),D&&(0,be.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold",style:{backgroundColor:j?"#ffffff":l.primaryBg,color:j?l.primaryBg:"#ffffff"},children:[c,u,f,h].filter(Boolean).length})]})]}),j&&(0,be.jsxs)("div",{className:"p-4 rounded-xl border-2 mb-4",style:{backgroundColor:l.bgCard,borderColor:s("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:l.text},children:e("tests.searchQuiz")}),(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)(Le.A,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2",style:{color:l.textMuted}}),(0,be.jsx)("input",{type:"text",value:c,onChange:e=>{d(e.target.value),y(1)},placeholder:e("tests.quizNamePlaceholder"),className:"w-full pl-10 pr-3 py-2 rounded-lg border",style:{borderColor:s("borderColor","#e5e7eb"),backgroundColor:s("secondaryBackground","#f8f9fa"),color:l.text}})]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:l.text},children:e("tests.lesson")}),(0,be.jsxs)("select",{value:u,onChange:e=>{p(e.target.value),y(1)},className:"w-full px-3 py-2 rounded-lg border",style:{borderColor:s("borderColor","#e5e7eb"),backgroundColor:s("secondaryBackground","#f8f9fa"),color:l.text},children:[(0,be.jsx)("option",{value:"",children:e("tests.allLessons")}),b.map(t=>(0,be.jsx)("option",{value:t.id,children:t.title?.rendered||t.title||e("courses.untitledLesson")},t.id))]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:l.text},children:e("tests.dateFrom")}),(0,be.jsx)("input",{type:"date",value:f,onChange:e=>{m(e.target.value),y(1)},className:"w-full px-3 py-2 rounded-lg border",style:{borderColor:s("borderColor","#e5e7eb"),backgroundColor:s("secondaryBackground","#f8f9fa"),color:l.text}})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:l.text},children:e("tests.dateTo")}),(0,be.jsx)("input",{type:"date",value:h,onChange:e=>{g(e.target.value),y(1)},className:"w-full px-3 py-2 rounded-lg border",style:{borderColor:s("borderColor","#e5e7eb"),backgroundColor:s("secondaryBackground","#f8f9fa"),color:l.text}})]})]}),D&&(0,be.jsxs)("button",{onClick:()=>{d(""),p(""),m(""),g(""),y(1)},className:"mt-4 flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all",style:{backgroundColor:l.hoverBg,color:l.text},children:[(0,be.jsx)(xe.A,{size:16}),(0,be.jsx)("span",{children:e("common.clearFilters")})]})]})]}),C?(0,be.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,be.jsx)(et.A,{className:"w-8 h-8 animate-spin",style:{color:l.text}})}):_?(0,be.jsx)("div",{className:"p-6 rounded-lg border-2",style:{backgroundColor:a?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderColor:"#ef4444",color:"#ef4444"},children:_}):0===k.length?(0,be.jsxs)("div",{className:"p-12 text-center rounded-xl border-2",style:{backgroundColor:l.bgCard,borderColor:s("borderColor","#e5e7eb")},children:[(0,be.jsx)(ce,{size:64,className:"mx-auto mb-4",style:{color:l.textMuted}}),(0,be.jsx)("h3",{className:"text-xl font-semibold mb-2",style:{color:l.text},children:e("tests.noAttemptsYet")}),(0,be.jsx)("p",{style:{color:l.textMuted},children:e("tests.noAttemptsDescription")})]}):(0,be.jsx)("div",{className:"rounded-xl border-2",style:{backgroundColor:s("secondaryBackground","#f8f9fa"),borderColor:s("borderColor","#e5e7eb")},children:k.map((t,r)=>{const n=P(t.quiz_id,t.score,!1),s=P(t.quiz_id,t.score_with_risk,!0);return(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"px-4 py-4 sm:px-6 sm:py-5",children:[(0,be.jsxs)("div",{className:"sm:hidden space-y-3",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:l.hoverBg},children:(0,be.jsx)(sr.A,{size:16,style:{color:l.text}})}),(0,be.jsx)("div",{children:(0,be.jsx)("div",{className:"text-xs font-semibold",style:{color:l.text},children:new Date(t.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})})})]}),(0,be.jsx)("button",{onClick:e=>z(t,e),className:"p-2 rounded-lg text-xs font-medium transition-all",style:{backgroundColor:l.hoverBg,color:l.text},children:(0,be.jsx)(cr.A,{size:18})})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center text-xs mb-1",style:{color:l.textMuted},children:[(0,be.jsx)(ae.A,{size:12,className:"mr-1.5"}),t.lessonTitle||e("tests.noLesson")]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"text-sm font-medium line-clamp-1",style:{color:l.text},children:t.quizTitle||e("tests.untitledQuiz")}),(0,be.jsx)("button",{onClick:e=>O(t,e),className:"p-1 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:l.hoverBg},title:e("tests.goToQuiz"),children:(0,be.jsx)(or.A,{size:14,style:{color:l.text}})})]})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,be.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:l.bgSubtle},children:[(0,be.jsx)("div",{className:"text-xs mb-1",style:{color:l.textMuted},children:e("tests.withoutRisk")}),(0,be.jsx)("div",{className:"text-lg font-bold",style:{color:l.text},children:i(t.score||0)}),null!==n&&(0,be.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1 mt-1",style:{color:n>=0?"#10b981":"#ef4444"},children:[n>=0?(0,be.jsx)(ar.A,{size:12}):(0,be.jsx)(ir,{size:12}),n>=0?"+":"",n.toFixed(1)]})]}),(0,be.jsxs)("div",{className:"p-3 rounded-lg",style:{backgroundColor:`${l.accent}15`},children:[(0,be.jsx)("div",{className:"text-xs mb-1",style:{color:l.textMuted},children:e("tests.withRisk")}),(0,be.jsx)("div",{className:"text-lg font-bold",style:{color:l.accent},children:i(t.score_with_risk||0)}),null!==s&&(0,be.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1 mt-1",style:{color:s>=0?"#10b981":"#ef4444"},children:[s>=0?(0,be.jsx)(ar.A,{size:12}):(0,be.jsx)(ir,{size:12}),s>=0?"+":"",s.toFixed(1)]})]})]})]}),(0,be.jsxs)("div",{className:"hidden sm:grid sm:grid-cols-6 gap-4 items-center",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:l.hoverBg},children:(0,be.jsx)(sr.A,{size:18,style:{color:l.text}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-sm font-semibold",style:{color:l.text},children:new Date(t.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),(0,be.jsx)("div",{className:"text-xs",style:{color:l.textMuted},children:new Date(t.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{year:"numeric"})})]})]}),(0,be.jsxs)("div",{className:"col-span-2",children:[(0,be.jsxs)("div",{className:"flex items-center text-xs mb-1",style:{color:l.textMuted},children:[(0,be.jsx)(ae.A,{size:12,className:"mr-1.5"}),t.lessonTitle||e("tests.noLesson")]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"text-sm font-medium truncate",style:{color:l.text},children:t.quizTitle||e("tests.untitledQuiz")}),(0,be.jsx)("button",{onClick:e=>O(t,e),className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:l.hoverBg},title:e("tests.goToQuiz"),children:(0,be.jsx)(or.A,{size:14,style:{color:l.text}})})]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-lg font-bold mb-1",style:{color:l.text},children:i(t.score||0)}),null!==n&&(0,be.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1",style:{color:n>=0?"#10b981":"#ef4444"},children:[n>=0?(0,be.jsx)(ar.A,{size:12}):(0,be.jsx)(ir,{size:12}),n>=0?"+":"",n.toFixed(1)]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-lg font-bold mb-1",style:{color:l.accent},children:i(t.score_with_risk||0)}),null!==s&&(0,be.jsxs)("span",{className:"text-xs font-medium flex items-center gap-1",style:{color:s>=0?"#10b981":"#ef4444"},children:[s>=0?(0,be.jsx)(ar.A,{size:12}):(0,be.jsx)(ir,{size:12}),s>=0?"+":"",s.toFixed(1)]})]}),(0,be.jsx)("div",{className:"flex items-center justify-end",children:(0,be.jsxs)("button",{onClick:e=>z(t,e),className:"px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center gap-1.5",style:{backgroundColor:l.hoverBg,color:l.text},children:[(0,be.jsx)(cr.A,{size:14}),(0,be.jsx)("span",{children:e("tests.viewDetails")})]})})]})]}),r<k.length-1&&(0,be.jsx)("div",{style:{height:"1px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},t.attempt_id)})}),!C&&S.totalPages>1&&(0,be.jsxs)("div",{className:"mt-6 flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"text-sm",style:{color:l.textMuted},children:[e("tests.showing")," ",10*(x-1)+1," - ",Math.min(10*x,S.total)," ",e("tests.of")," ",S.total," ",e("tests.results")]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("button",{onClick:()=>q(x-1),disabled:1===x,className:"p-2 rounded-lg transition-all disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:l.hoverBg,color:l.text},children:(0,be.jsx)(We.A,{size:20})}),(0,be.jsx)("div",{className:"flex items-center gap-1",children:(()=>{const e=[],{currentPage:t,totalPages:r}=S;if(r<=7)for(let t=1;t<=r;t++)e.push(t);else if(t<=4){for(let t=1;t<=5;t++)e.push(t);e.push("..."),e.push(r)}else if(t>=r-3){e.push(1),e.push("...");for(let t=r-4;t<=r;t++)e.push(t)}else{e.push(1),e.push("...");for(let r=t-1;r<=t+1;r++)e.push(r);e.push("..."),e.push(r)}return e})().map((e,t)=>{if("..."===e)return(0,be.jsx)("span",{className:"px-3 py-2",style:{color:l.textMuted},children:"..."},`ellipsis-${t}`);const r=e===x;return(0,be.jsx)("button",{onClick:()=>q(e),className:"min-w-[40px] px-3 py-2 rounded-lg font-medium transition-all flex justify-center items-center",style:{backgroundColor:r?l.primaryBg:l.bgSubtle,color:r?"#ffffff":l.text},children:e},e)})}),(0,be.jsx)("button",{onClick:()=>q(x+1),disabled:x===S.totalPages,className:"p-2 rounded-lg transition-all disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:l.hoverBg,color:l.text},children:(0,be.jsx)(ur.A,{size:20})})]})]})]})]})]})},Ps=({selectedCourse:e,compact:t=!1,isDarkMode:n=!1,pageColors:s=null})=>{const{getColor:o}=(0,se.DP)(),[a,i]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),d=s||{text:n?o("textPrimary","#f9fafb"):o("primary","#1a202c"),textMuted:o("textSecondary","#6b7280"),accent:o("accent","#f59e0b"),primary:o("primary","#3b82f6"),background:o("background","#ffffff"),secondaryBg:o("secondaryBackground","#f3f4f6")};(0,r.useEffect)(()=>{u()},[e]);const u=async()=>{c(!0),setTimeout(()=>{const t=[{id:1,lesson_title:"Derecho Constitucional - ArtÃ­culos 1-10",course_title:"Curso de Oposiciones",total_questions:45,failed_questions:18,accuracy:60},{id:2,lesson_title:"MatemÃ¡ticas Financieras Avanzadas",course_title:"MatemÃ¡ticas para Oposiciones",total_questions:32,failed_questions:14,accuracy:56.3},{id:3,lesson_title:"LegislaciÃ³n Laboral - Contratos",course_title:"Derecho Laboral",total_questions:28,failed_questions:11,accuracy:60.7}],r=e?t.filter(e=>"Curso seleccionado"===e.course_title):t;i(r),c(!1)},500)};return l?(0,be.jsxs)("div",{className:"p-3 rounded-lg border animate-pulse",style:{backgroundColor:d.background,borderColor:d.border||(n?"#374151":"#e5e7eb")},children:[(0,be.jsx)("div",{className:"h-4 rounded mb-3 w-1/2",style:{backgroundColor:n?d.primary+"20":"#e5e7eb"}}),(0,be.jsx)("div",{className:"space-y-2",children:[1,2,3].map(e=>(0,be.jsx)("div",{className:"h-12 rounded",style:{backgroundColor:n?d.primary+"20":"#e5e7eb"}},e))})]}):(0,be.jsxs)("div",{className:"p-3 rounded-lg border "+(t?"":"shadow-lg"),style:{backgroundColor:d.background,borderColor:d.border||(n?"#374151":"#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b",style:{borderColor:d.border||(n?"#374151":"#e5e7eb")},children:[(0,be.jsx)(Te.A,{className:"w-4 h-4",style:{color:d.accent}}),(0,be.jsx)("h2",{className:"text-sm font-semibold",style:{color:d.text},children:"Lecciones a Repasar"})]}),0===a.length?(0,be.jsxs)("div",{className:"text-center py-6",children:[(0,be.jsx)(ae.A,{className:"w-8 h-8 mx-auto mb-2 opacity-30",style:{color:d.textMuted}}),(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:d.text},children:"Â¡Excelente!"}),(0,be.jsx)("p",{className:"text-xs",style:{color:d.textMuted},children:"No tienes lecciones que repasar"})]}):(0,be.jsx)("div",{className:"space-y-2",children:a.map((e,t)=>{const r=(s=e.accuracy)<50?{label:"Urgente",color:"#ef4444"}:s<65?{label:"Importante",color:d.accent}:{label:"Revisar",color:d.primary};var s;const o=(e=>e>=70?"#10b981":e>=50?d.accent:"#ef4444")(e.accuracy);return(0,be.jsx)("div",{className:"p-2.5 rounded border-l-2 transition-all hover:shadow-sm cursor-pointer",style:{backgroundColor:n?d.primary+"08":"#fafafa",borderLeftColor:r.color},children:(0,be.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,be.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold",style:{backgroundColor:r.color+"20",color:r.color},children:t+1}),(0,be.jsx)("h3",{className:"font-medium text-xs truncate",style:{color:d.text},children:e.lesson_title})]}),(0,be.jsxs)("div",{className:"flex items-center gap-3 ml-7",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsx)("span",{className:"text-xs",style:{color:d.textMuted},children:"Falladas:"}),(0,be.jsx)("span",{className:"text-xs font-bold",style:{color:"#ef4444"},children:e.failed_questions})]}),(0,be.jsx)("div",{className:"flex-1 h-1 rounded-full overflow-hidden",style:{backgroundColor:n?d.primary+"20":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${e.accuracy}%`,backgroundColor:o}})}),(0,be.jsxs)("span",{className:"text-xs font-bold",style:{color:o},children:[e.accuracy,"%"]})]})]}),(0,be.jsx)("div",{className:"flex-shrink-0 px-1.5 py-0.5 rounded text-xs font-medium",style:{backgroundColor:r.color+"20",color:r.color},children:r.label})]})},e.id)})}),a.length>0&&(0,be.jsx)("div",{className:"mt-3 p-2 rounded border-l-2",style:{backgroundColor:n?d.primary+"10":"#f0f9ff",borderLeftColor:d.primary},children:(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(ir,{className:"w-3.5 h-3.5",style:{color:d.primary}}),(0,be.jsx)("p",{className:"text-xs",style:{color:d.text},children:'ðŸ’¡ EnfÃ³cate en las lecciones marcadas como "Urgente"'})]})})]})},Os=({userAccuracy:e,selectedCourse:t,compact:n=!1,isDarkMode:s=!1,pageColors:o=null})=>{const{getColor:a}=(0,se.DP)(),[i,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),u=o||{text:s?"#f9fafb":"#1a202c",textMuted:s?"#9ca3af":"#6b7280",primary:a("primary","#3b82f6"),accent:a("accent","#f59e0b"),background:s?"#1f2937":"#ffffff",secondaryBg:s?"#111827":"#f3f4f6",border:s?"#374151":"#e5e7eb"};if((0,r.useEffect)(()=>{(async()=>{d(!0),setTimeout(()=>{const t=68.5;l({average:t,topPerformers:85,totalStudents:156,userRank:Math.floor(156*Math.random())+1,percentile:e>t?Math.min(95,50+(e-t)/31.5*50):Math.max(5,e/t*50)}),d(!1)},500)})()},[e,t]),c||!i)return(0,be.jsx)("div",{className:"p-4 rounded-lg border flex items-center justify-center",style:{backgroundColor:u.background,borderColor:s?u.primary+"40":"#e5e7eb",minHeight:"120px"},children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:u.primary}})});const p=[{label:"TÃº",value:e,color:u.primary,icon:Tr.A},{label:"Promedio",value:i.average,color:"#94a3b8",icon:pe.A},{label:"Top 20%",value:i.topPerformers,color:u.accent,icon:nr.A}],f=Math.max(...p.map(e=>e.value)),m=e-i.average,h=m>0;return(0,be.jsxs)("div",{className:"p-3 rounded-lg border h-full "+(n?"":"shadow-lg"),style:{backgroundColor:u.background,borderColor:u.border||(s?"#374151":"#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5 mb-2 pb-2 border-b",style:{borderColor:u.border||(s?"#374151":"#e5e7eb")},children:[(0,be.jsx)(pe.A,{className:"w-3.5 h-3.5",style:{color:u.primary}}),(0,be.jsx)("h2",{className:"text-xs font-semibold",style:{color:u.text},children:"ComparaciÃ³n"})]}),(0,be.jsx)("div",{className:"space-y-2 mb-2",children:p.map((e,t)=>{const r=e.icon,n=e.value/f*100;return(0,be.jsxs)("div",{className:"space-y-0.5",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsx)(r,{className:"w-3 h-3",style:{color:e.color}}),(0,be.jsx)("span",{className:"text-[10px] font-medium",style:{color:u.text},children:e.label})]}),(0,be.jsxs)("span",{className:"text-xs font-bold",style:{color:e.color},children:[e.value.toFixed(1),"%"]})]}),(0,be.jsx)("div",{className:"relative h-1.5 rounded-full overflow-hidden",style:{backgroundColor:s?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full transition-all duration-700",style:{width:`${n}%`,backgroundColor:e.color}})})]},t)})}),(0,be.jsx)("div",{className:"p-1.5 rounded border-l-2 mb-2",style:{backgroundColor:h?s?"#10b98115":"#10b98110":s?u.accent+"15":u.accent+"10",borderColor:h?"#10b981":u.accent},children:(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(ar.A,{className:"w-3 h-3 "+(h?"":"rotate-180"),style:{color:h?"#10b981":u.accent}}),(0,be.jsx)("p",{className:"text-[10px]",style:{color:u.text},children:h?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("strong",{style:{color:"#10b981"},children:["+",Math.abs(m).toFixed(1),"%"]})," sobre promedio"]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("strong",{style:{color:u.accent},children:[Math.abs(m).toFixed(1),"%"]})," para promedio"]})})]})}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,be.jsxs)("div",{className:"p-1.5 rounded text-center",style:{backgroundColor:s?"#3b82f615":"#eff6ff"},children:[(0,be.jsx)("p",{className:"text-[9px]",style:{color:u.textMuted},children:"PosiciÃ³n"}),(0,be.jsxs)("p",{className:"text-sm font-bold",style:{color:u.primary},children:["#",i.userRank]})]}),(0,be.jsxs)("div",{className:"p-1.5 rounded text-center",style:{backgroundColor:s?"#8b5cf615":"#f5f3ff"},children:[(0,be.jsx)("p",{className:"text-[9px]",style:{color:u.textMuted},children:"Percentil"}),(0,be.jsxs)("p",{className:"text-sm font-bold",style:{color:"#8b5cf6"},children:[i.percentile.toFixed(0),"%"]})]})]})]})},zs=(0,le.A)("chart-line",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),qs=({selectedCourse:e,timeRange:t,compact:n=!1,isDarkMode:s=!1,pageColors:o=null})=>{const{getColor:a}=(0,se.DP)(),[i,l]=(0,r.useState)([]),c=o||{text:s?a("textPrimary","#f9fafb"):a("primary","#1a202c"),textMuted:a("textSecondary","#6b7280"),primary:a("primary","#3b82f6"),background:a("background","#ffffff"),secondaryBg:a("secondaryBackground","#f3f4f6")};if((0,r.useEffect)(()=>{(()=>{const e=[],r=new Date,n="week"===t?7:"month"===t?30:"year"===t?12:30;for(let s=n-1;s>=0;s--){const o=new Date(r);"year"===t?o.setMonth(o.getMonth()-s):o.setDate(o.getDate()-s);const a=50+(n-s)/n*30,i=Math.min(100,Math.max(0,a+(20*Math.random()-10)));e.push({date:o.toLocaleDateString("es-ES",{month:"short",day:"year"===t?void 0:"numeric"}),accuracy:i.toFixed(1),questions:Math.floor(20*Math.random())+5})}l(e)})()},[t,e]),0===i.length)return null;const d=Math.max(...i.map(e=>parseFloat(e.accuracy))),u=Math.min(...i.map(e=>parseFloat(e.accuracy))),p=d-u||1,f=i.reduce((e,t)=>e+parseFloat(t.accuracy),0)/i.length||0,m=50,h=i.map((e,t)=>`${t/(i.length-1)*100},${m-(parseFloat(e.accuracy)-u)/p*m}`).join(" "),g=`0,50 ${h} 100,50`;return(0,be.jsxs)("div",{className:"p-3 rounded-lg border flex flex-col "+(n?"":"shadow-lg"),style:{backgroundColor:c.background,borderColor:c.border||(s?"#374151":"#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-2 pb-2 border-b",style:{borderColor:c.border||(s?"#374151":"#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(zs,{className:"w-4 h-4",style:{color:c.primary}}),(0,be.jsx)("h2",{className:"text-sm font-semibold",style:{color:c.text},children:"EvoluciÃ³n"})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:s?c.primary+"20":"#f3f4f6"},children:[(0,be.jsx)(sr.A,{className:"w-3 h-3",style:{color:c.primary}}),(0,be.jsx)("span",{className:"font-medium",style:{color:c.primary},children:"week"===t?"7d":"month"===t?"30d":"year"===t?"1a":"Todo"})]})]}),(0,be.jsx)("div",{className:"flex-1 mb-3",style:{minHeight:"80px"},children:(0,be.jsxs)("svg",{viewBox:"0 0 100 50",className:"w-full h-full",preserveAspectRatio:"none",children:[[0,50,100].map(e=>{const t=m-e/100*m;return(0,be.jsx)("g",{children:(0,be.jsx)("line",{x1:"0",y1:t,x2:100,y2:t,stroke:s?c.primary+"20":"#e5e7eb",strokeWidth:"0.3",strokeDasharray:"2,2"})},e)}),(0,be.jsx)("polygon",{points:g,fill:`url(#gradient-${s?"dark":"light"})`,opacity:"0.3"}),(0,be.jsx)("polyline",{points:h,fill:"none",stroke:c.primary,strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),i.map((e,t)=>{if(0!==t&&t!==i.length-1)return null;const r=t/(i.length-1)*100,n=m-(parseFloat(e.accuracy)-u)/p*m;return(0,be.jsx)("circle",{cx:r,cy:n,r:"1.5",fill:c.primary,stroke:c.background,strokeWidth:"0.5"},t)}),(0,be.jsx)("defs",{children:(0,be.jsxs)("linearGradient",{id:"gradient-"+(s?"dark":"light"),x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[(0,be.jsx)("stop",{offset:"0%",stopColor:c.primary,stopOpacity:"0.4"}),(0,be.jsx)("stop",{offset:"100%",stopColor:c.primary,stopOpacity:"0.05"})]})})]})}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t",style:{borderColor:c.border||(s?"#374151":"#e5e7eb")},children:[(0,be.jsxs)("div",{className:"text-center p-1.5 rounded",style:{backgroundColor:s?c.primary+"15":"#f3f4f6"},children:[(0,be.jsx)("p",{className:"text-xs",style:{color:c.textMuted},children:"Promedio"}),(0,be.jsxs)("p",{className:"text-base font-bold",style:{color:c.primary},children:[f.toFixed(1),"%"]})]}),(0,be.jsxs)("div",{className:"text-center p-1.5 rounded",style:{backgroundColor:s?"#10b98115":"#f0fdf4"},children:[(0,be.jsx)("p",{className:"text-xs",style:{color:c.textMuted},children:"Mejora"}),(0,be.jsxs)("p",{className:"text-base font-bold",style:{color:"#10b981"},children:["+",(d-u).toFixed(1),"%"]})]})]})]})},Ds=({selectedCourse:e,setSelectedCourse:t,timeRange:n,setTimeRange:s,compact:o=!1,isDarkMode:a=!1,pageColors:i=null})=>{const{getColor:l}=(0,se.DP)(),[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(!0),f=i||{text:a?l("textPrimary","#f9fafb"):l("primary","#1a202c"),textMuted:l("textSecondary","#6b7280"),primary:l("primary","#3b82f6"),background:l("background","#ffffff"),secondaryBg:l("secondaryBackground","#f3f4f6")};(0,r.useEffect)(()=>{m()},[]);const m=async()=>{try{const e=await fetch(`${window.qe_data.rest_url}quiz-extended/v1/user-enrollments`,{headers:{"X-WP-Nonce":window.qe_data.nonce}});if(!e.ok)throw new Error("Failed to fetch courses");const t=await e.json();d(t.data||[])}catch(e){console.error("Error fetching courses:",e)}finally{p(!1)}};return o?(0,be.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(ae.A,{className:"w-4 h-4",style:{color:f.textMuted}}),(0,be.jsxs)("select",{value:e||"",onChange:e=>t(e.target.value?parseInt(e.target.value):null),className:"text-sm py-1.5 px-2 border rounded-md transition-all focus:outline-none focus:ring-1",style:{borderColor:a?f.primary+"40":"#d1d5db",backgroundColor:f.background,color:f.text,minWidth:"140px"},disabled:u,children:[(0,be.jsx)("option",{value:"",children:"Todos los cursos"}),c.map(e=>(0,be.jsx)("option",{value:e.course_id,children:e.course_title},e.course_id))]})]}),(0,be.jsx)("div",{className:"flex items-center gap-1 p-0.5 rounded-md",style:{backgroundColor:a?f.primary+"20":"#f3f4f6"},children:[{value:"all",label:"Todo"},{value:"week",label:"7d"},{value:"month",label:"30d"},{value:"year",label:"1a"}].map(e=>(0,be.jsx)("button",{onClick:()=>s(e.value),className:"text-xs font-medium py-1 px-2 rounded transition-all",style:{backgroundColor:n===e.value?f.primary:"transparent",color:n===e.value?"#ffffff":f.textMuted},children:e.label},e.value))})]}):(0,be.jsxs)("div",{className:"p-4 rounded-lg border mb-4",style:{backgroundColor:f.background,borderColor:a?f.primary+"40":"#e5e7eb"},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b",style:{borderColor:a?f.primary+"30":"#e5e7eb"},children:[(0,be.jsx)(Ms.A,{className:"w-4 h-4",style:{color:f.primary}}),(0,be.jsx)("h3",{className:"text-sm font-semibold",style:{color:f.text},children:"Filtros"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"flex items-center gap-1 text-xs font-medium mb-1",style:{color:f.textMuted},children:[(0,be.jsx)(ae.A,{className:"w-3 h-3"}),"Curso"]}),(0,be.jsxs)("select",{value:e||"",onChange:e=>t(e.target.value?parseInt(e.target.value):null),className:"w-full text-sm p-2 border rounded-md transition-all focus:outline-none focus:ring-1",style:{borderColor:a?f.primary+"40":"#d1d5db",backgroundColor:f.background,color:f.text},disabled:u,children:[(0,be.jsx)("option",{value:"",children:"Todos los cursos"}),c.map(e=>(0,be.jsx)("option",{value:e.course_id,children:e.course_title},e.course_id))]})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"flex items-center gap-1 text-xs font-medium mb-1",style:{color:f.textMuted},children:[(0,be.jsx)(sr.A,{className:"w-3 h-3"}),"PerÃ­odo"]}),(0,be.jsx)("select",{value:n,onChange:e=>s(e.target.value),className:"w-full text-sm p-2 border rounded-md transition-all focus:outline-none focus:ring-1",style:{borderColor:a?f.primary+"40":"#d1d5db",backgroundColor:f.background,color:f.text},children:[{value:"all",label:"Todo el tiempo"},{value:"week",label:"Ãšltima semana"},{value:"month",label:"Ãšltimo mes"},{value:"year",label:"Ãšltimo aÃ±o"}].map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]})},Is=()=>{const{getColor:e,isDarkMode:t}=(0,se.DP)(),[n,s]=(0,r.useState)(null),[o,a]=(0,r.useState)("all"),[i,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),[u,p]=(0,r.useState)("questions"),f={text:t?"#f9fafb":"#1a202c",textMuted:t?"#9ca3af":"#6b7280",accent:e("accent","#f59e0b"),primary:e("primary","#3b82f6"),background:t?"#1f2937":"#ffffff",secondaryBg:t?"#111827":"#f3f4f6",border:t?"#374151":"#e5e7eb",cardBg:t?"#1f2937":"#ffffff"};(0,r.useEffect)(()=>{m()},[n,o]);const m=async()=>{d(!0);try{const e=new URLSearchParams;n&&e.append("course_id",n);const t=await fetch(`${window.qe_data.rest_url}quiz-extended/v1/user-stats/questions?${e}`,{headers:{"X-WP-Nonce":window.qe_data.nonce}});if(!t.ok)throw new Error("Failed to fetch statistics");const r=await t.json();console.log("Stats API Response:",r),l(r.data)}catch(e){console.error("Error fetching statistics:",e),l({total_questions:0,correct_answers:0,incorrect_answers:0,unanswered:0})}finally{d(!1)}};return(0,be.jsx)("div",{className:"h-full flex flex-col",style:{backgroundColor:f.secondaryBg},children:(0,be.jsxs)("div",{className:"container mx-auto px-3 py-3 max-w-7xl flex-1 flex flex-col min-h-0",children:[(0,be.jsx)("div",{className:"flex-shrink-0 px-3 py-2 rounded-lg mb-3",style:{backgroundColor:f.cardBg,border:`1px solid ${f.border}`},children:(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Bt.A,{className:"w-4 h-4",style:{color:f.primary}}),(0,be.jsx)("h1",{className:"text-sm font-bold",style:{color:f.text},children:"Mis EstadÃ­sticas"})]}),(0,be.jsx)(Ds,{selectedCourse:n,setSelectedCourse:s,timeRange:o,setTimeRange:a,compact:!0,isDarkMode:t,pageColors:f})]})}),c?(0,be.jsx)("div",{className:"flex-1 flex justify-center items-center",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:f.primary}})}):(0,be.jsxs)("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-12 gap-3 min-h-0",children:[(0,be.jsx)("div",{className:"lg:col-span-3",children:(0,be.jsx)(Nr,{statsData:i,compact:!0,isDarkMode:t,pageColors:f,mini:!0})}),(0,be.jsxs)("div",{className:"lg:col-span-5 flex flex-col min-h-0",children:[(0,be.jsxs)("div",{className:"flex-shrink-0 flex gap-1 p-1 rounded-lg mb-2",style:{backgroundColor:t?"#374151":"#e5e7eb"},children:[(0,be.jsxs)("button",{onClick:()=>p("questions"),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 rounded text-xs font-medium transition-all",style:{backgroundColor:"questions"===u?f.cardBg:"transparent",color:"questions"===u?f.primary:f.textMuted,boxShadow:"questions"===u?"0 1px 2px rgba(0,0,0,0.1)":"none"},children:[(0,be.jsx)(wr,{size:12}),"EvoluciÃ³n"]}),(0,be.jsxs)("button",{onClick:()=>p("lessons"),className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-1.5 rounded text-xs font-medium transition-all",style:{backgroundColor:"lessons"===u?f.cardBg:"transparent",color:"lessons"===u?f.accent:f.textMuted,boxShadow:"lessons"===u?"0 1px 2px rgba(0,0,0,0.1)":"none"},children:[(0,be.jsx)(ae.A,{size:12}),"Repasar"]})]}),(0,be.jsx)("div",{className:"flex-1 min-h-0",children:"questions"===u?(0,be.jsx)(qs,{selectedCourse:n,timeRange:o,compact:!0,isDarkMode:t,pageColors:f}):(0,be.jsx)(Ps,{selectedCourse:n,compact:!0,isDarkMode:t,pageColors:f})})]}),(0,be.jsx)("div",{className:"lg:col-span-4",children:(0,be.jsx)(Os,{userAccuracy:parseFloat(i&&0!==i.total_questions?(i.correct_answers/i.total_questions*100).toFixed(1):0),selectedCourse:n,compact:!0,isDarkMode:t,pageColors:f})})]})]})})};function Ls(e){return Ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ls(e)}function Rs(e){var t=function(e){if("object"!=Ls(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=Ls(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ls(t)?t:t+""}function $s(e,t,r){return(t=Rs(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(r),!0).forEach(function(t){$s(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bs(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Us(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function Ws(e,t){if(null==e)return{};var r,n,s=Us(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Hs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Rs(n.key),n)}}function Vs(e,t,r){return t&&Qs(e.prototype,t),r&&Qs(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ys(e){return Ys=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ys(e)}function Ks(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Ks=function(){return!!e})()}function Gs(e,t,r){return t=Ys(t),function(e,t){if(t&&("object"==Ls(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,Ks()?Reflect.construct(t,r||[],Ys(e).constructor):t.apply(e,r))}function Xs(e,t){return Xs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xs(e,t)}function Js(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xs(e,t)}function Zs(e){if(Array.isArray(e))return e}function eo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function to(e,t){if(e){if("string"==typeof e)return eo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eo(e,t):void 0}}function ro(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function no(e,t){return Zs(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,s,o,a,i=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(i.push(n.value),i.length!==t);l=!0);}catch(e){c=!0,s=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw s}}return i}}(e,t)||to(e,t)||ro()}function so(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=so(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}const oo=function(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=so(e))&&(n&&(n+=" "),n+=t);return n};var ao=a(311),io=a.n(ao),lo=function(){};function co(e,t){return void 0!==e[t]}function uo(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},po.apply(null,arguments)}function fo(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function mo(e){this.setState(function(t){var r=this.constructor.getDerivedStateFromProps(e,t);return null!=r?r:null}.bind(this))}function ho(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}fo.__suppressDeprecationWarning=!0,mo.__suppressDeprecationWarning=!0,ho.__suppressDeprecationWarning=!0;var go=a(5556),xo=a.n(go),yo="milliseconds",bo="seconds",vo="minutes",jo="hours",wo="day",No="week",ko="month",Co="year",_o="decade",So="century",Eo={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,day:864e5,week:6048e5},Ao={month:1,year:12,decade:120,century:1200};function Mo(e){return e%4==0&&e%100!=0||e%400==0?29:28}function To(e,t,r){switch(e=new Date(e),r){case yo:case bo:case vo:case jo:case wo:case No:return function(e,t){return function(e,t){var r=e.getTimezoneOffset(),n=t.getTimezoneOffset();return new Date(+t+(n-r)*Eo.minutes)}(e,new Date(+e+t))}(e,t*Eo[r]);case ko:case Co:case _o:case So:return function(e,t){var r=e.getFullYear(),n=e.getMonth(),s=e.getDate(),o=12*r+n+t,a=Math.trunc(o/12),i=o%12,l=Math.min(s,function(e){return[31,Mo(e),31,30,31,30,31,31,30,31,30,31]}(a)[i]),c=new Date(e);return c.setFullYear(a),c.setDate(1),c.setMonth(i),c.setDate(l),c}(e,t*Ao[r])}throw new TypeError('Invalid units: "'+r+'"')}function Po(e,t,r){return To(e,-t,r)}function Oo(e,t,r){switch(e=new Date(e),t){case So:case _o:case Co:e=Go(e,0);case ko:e=Ko(e,1);case No:case wo:e=Vo(e,0);case jo:e=Qo(e,0);case vo:e=Ho(e,0);case bo:e=Wo(e,0)}return t===_o&&(e=Po(e,Xo(e)%10,"year")),t===So&&(e=Po(e,Xo(e)%100,"year")),t===No&&(e=ea(e,0,r)),e}function zo(e,t,r){switch(e=Oo(e=new Date(e),t,r),t){case So:case _o:case Co:case ko:case No:(e=Po(e=To(e,1,t),1,wo)).setHours(23,59,59,999);break;case wo:e.setHours(23,59,59,999);break;case jo:case vo:case bo:e=Po(e=To(e,1,t),1,yo)}return e}var qo=na(function(e,t){return e===t}),Do=na(function(e,t){return e!==t}),Io=na(function(e,t){return e>t}),Lo=na(function(e,t){return e>=t}),Ro=na(function(e,t){return e<t}),$o=na(function(e,t){return e<=t});function Bo(){return new Date(Math.min.apply(Math,arguments))}function Fo(){return new Date(Math.max.apply(Math,arguments))}function Uo(e,t,r,n){return n=n||"day",(!t||Lo(e,t,n))&&(!r||$o(e,r,n))}var Wo=ra("Milliseconds"),Ho=ra("Seconds"),Qo=ra("Minutes"),Vo=ra("Hours"),Yo=ra("Day"),Ko=ra("Date"),Go=ra("Month"),Xo=ra("FullYear");function Jo(e,t){return void 0===t?Xo(Oo(e,_o)):To(e,t+10,Co)}function Zo(e,t){return void 0===t?Xo(Oo(e,So)):To(e,t+100,Co)}function ea(e,t,r){var n=(Yo(e)+7-(r||0))%7;return void 0===t?n:To(e,t-n,wo)}function ta(e,t,r,n){var s,o,a;switch(r){case yo:case bo:case vo:case jo:case wo:case No:s=t.getTime()-e.getTime();break;case ko:case Co:case _o:case So:s=12*(Xo(t)-Xo(e))+Go(t)-Go(e);break;default:throw new TypeError('Invalid units: "'+r+'"')}switch(r){case yo:o=1;break;case bo:o=1e3;break;case vo:o=6e4;break;case jo:o=36e5;break;case wo:o=864e5;break;case No:o=6048e5;break;case ko:o=1;break;case Co:o=12;break;case _o:o=120;break;case So:o=1200;break;default:throw new TypeError('Invalid units: "'+r+'"')}return a=s/o,n?a:Math.round(a)}function ra(e){var t=function(e){switch(e){case"Milliseconds":return 36e5;case"Seconds":return 3600;case"Minutes":return 60;case"Hours":return 1;default:return null}}(e);return function(r,n){if(void 0===n)return r["get"+e]();var s=new Date(r);return s["set"+e](n),t&&s["get"+e]()!=n&&("Hours"===e||n>=t&&s.getHours()-r.getHours()<Math.floor(n/t))&&s["set"+e](n+t),s}}function na(e){return function(t,r,n){return e(+Oo(t,n),+Oo(r,n))}}function sa(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function oa(e){return function(e){if(Array.isArray(e))return eo(e)}(e)||sa(e)||to(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var aa=a(1013),ia=a.n(aa);function la(e){return e&&e.ownerDocument||document}var ca=/([A-Z])/g,da=/^ms-/;function ua(e){return function(e){return e.replace(ca,"-$1").toLowerCase()}(e).replace(da,"-ms-")}var pa=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const fa=function(e,t){var r="",n="";if("string"==typeof t)return e.style.getPropertyValue(ua(t))||function(e,t){return function(e){var t=la(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}(e).getPropertyValue(ua(t));Object.keys(t).forEach(function(s){var o=t[s];o||0===o?function(e){return!(!e||!pa.test(e))}(s)?n+=s+"("+o+") ":r+=ua(s)+": "+o+";":e.style.removeProperty(ua(s))}),n&&(r+="transform: "+n+";"),e.style.cssText+=";"+r};function ma(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function ha(e){return"window"in e&&e.window===e?e:"nodeType"in(t=e)&&t.nodeType===document.DOCUMENT_NODE&&e.defaultView||!1;var t}function ga(e){var t="pageXOffset"===e?"scrollLeft":"scrollTop";return function(r,n){var s=ha(r);if(void 0===n)return s?s[e]:r[t];s?s.scrollTo(s[e],n):r[t]=n}}const xa=ga("pageXOffset"),ya=ga("pageYOffset");function ba(e){var t=la(e),r={top:0,left:0,height:0,width:0},n=t&&t.documentElement;return n&&ma(n,e)?(void 0!==e.getBoundingClientRect&&(r=e.getBoundingClientRect()),r={top:r.top+ya(n)-(n.clientTop||0),left:r.left+xa(n)-(n.clientLeft||0),width:r.width,height:r.height}):r}var va=function(e){return!!e&&"offsetParent"in e};function ja(e,t){var r,n={top:0,left:0};if("fixed"===fa(e,"position"))r=e.getBoundingClientRect();else{var s=t||function(e){for(var t=la(e),r=e&&e.offsetParent;va(r)&&"HTML"!==r.nodeName&&"static"===fa(r,"position");)r=r.offsetParent;return r||t.documentElement}(e);r=ba(e),"html"!==function(e){return e.nodeName&&e.nodeName.toLowerCase()}(s)&&(n=ba(s));var o=String(fa(s,"borderTopWidth")||0);n.top+=parseInt(o,10)-ya(s)||0;var a=String(fa(s,"borderLeftWidth")||0);n.left+=parseInt(a,10)-xa(s)||0}var i=String(fa(e,"marginTop")||0),l=String(fa(e,"marginLeft")||0);return po({},r,{top:r.top-n.top-(parseInt(i,10)||0),left:r.left-n.left-(parseInt(l,10)||0)})}const wa=!("undefined"==typeof window||!window.document||!window.document.createElement);var Na=(new Date).getTime(),ka="clearTimeout",Ca=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-Na)),n=setTimeout(e,r);return Na=t,n},_a=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};wa&&["","webkit","moz","o","ms"].some(function(e){var t=_a(e,"request");return t in window&&(ka=_a(e,"cancel"),Ca=function(e){return window[t](e)}),!!Ca});var Sa=function(e){"function"==typeof window[ka]&&window[ka](e)},Ea=Ca;function Aa(){return(0,r.useState)(null)}const Ma=e=>e&&"function"!=typeof e?t=>{e.current=t}:e;var Ta="top",Pa="bottom",Oa="right",za="left",qa="auto",Da=[Ta,Pa,Oa,za],Ia="start",La="end",Ra="viewport",$a="popper",Ba=Da.reduce(function(e,t){return e.concat([t+"-"+Ia,t+"-"+La])},[]),Fa=[].concat(Da,[qa]).reduce(function(e,t){return e.concat([t,t+"-"+Ia,t+"-"+La])},[]),Ua=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Wa(e){return e.split("-")[0]}function Ha(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Qa(e){return e instanceof Ha(e).Element||e instanceof Element}function Va(e){return e instanceof Ha(e).HTMLElement||e instanceof HTMLElement}function Ya(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Ha(e).ShadowRoot||e instanceof ShadowRoot)}var Ka=Math.max,Ga=Math.min,Xa=Math.round;function Ja(){var e=navigator.userAgentData;return null!=e&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Za(){return!/^((?!chrome|android).)*safari/i.test(Ja())}function ei(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var n=e.getBoundingClientRect(),s=1,o=1;t&&Va(e)&&(s=e.offsetWidth>0&&Xa(n.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Xa(n.height)/e.offsetHeight||1);var a=(Qa(e)?Ha(e):window).visualViewport,i=!Za()&&r,l=(n.left+(i&&a?a.offsetLeft:0))/s,c=(n.top+(i&&a?a.offsetTop:0))/o,d=n.width/s,u=n.height/o;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l,x:l,y:c}}function ti(e){var t=ei(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function ri(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&Ya(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function ni(e){return e?(e.nodeName||"").toLowerCase():null}function si(e){return Ha(e).getComputedStyle(e)}function oi(e){return["table","td","th"].indexOf(ni(e))>=0}function ai(e){return((Qa(e)?e.ownerDocument:e.document)||window.document).documentElement}function ii(e){return"html"===ni(e)?e:e.assignedSlot||e.parentNode||(Ya(e)?e.host:null)||ai(e)}function li(e){return Va(e)&&"fixed"!==si(e).position?e.offsetParent:null}function ci(e){for(var t=Ha(e),r=li(e);r&&oi(r)&&"static"===si(r).position;)r=li(r);return r&&("html"===ni(r)||"body"===ni(r)&&"static"===si(r).position)?t:r||function(e){var t=/firefox/i.test(Ja());if(/Trident/i.test(Ja())&&Va(e)&&"fixed"===si(e).position)return null;var r=ii(e);for(Ya(r)&&(r=r.host);Va(r)&&["html","body"].indexOf(ni(r))<0;){var n=si(r);if("none"!==n.transform||"none"!==n.perspective||"paint"===n.contain||-1!==["transform","perspective"].indexOf(n.willChange)||t&&"filter"===n.willChange||t&&n.filter&&"none"!==n.filter)return r;r=r.parentNode}return null}(e)||t}function di(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function ui(e,t,r){return Ka(e,Ga(t,r))}function pi(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function fi(e,t){return t.reduce(function(t,r){return t[r]=e,t},{})}const mi={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,r=e.state,n=e.name,s=e.options,o=r.elements.arrow,a=r.modifiersData.popperOffsets,i=Wa(r.placement),l=di(i),c=[za,Oa].indexOf(i)>=0?"height":"width";if(o&&a){var d=function(e,t){return pi("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:fi(e,Da))}(s.padding,r),u=ti(o),p="y"===l?Ta:za,f="y"===l?Pa:Oa,m=r.rects.reference[c]+r.rects.reference[l]-a[l]-r.rects.popper[c],h=a[l]-r.rects.reference[l],g=ci(o),x=g?"y"===l?g.clientHeight||0:g.clientWidth||0:0,y=m/2-h/2,b=d[p],v=x-u[c]-d[f],j=x/2-u[c]/2+y,w=ui(b,j,v),N=l;r.modifiersData[n]=((t={})[N]=w,t.centerOffset=w-j,t)}},effect:function(e){var t=e.state,r=e.options.element,n=void 0===r?"[data-popper-arrow]":r;null!=n&&("string"!=typeof n||(n=t.elements.popper.querySelector(n)))&&ri(t.elements.popper,n)&&(t.elements.arrow=n)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function hi(e){return e.split("-")[1]}var gi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xi(e){var t,r=e.popper,n=e.popperRect,s=e.placement,o=e.variation,a=e.offsets,i=e.position,l=e.gpuAcceleration,c=e.adaptive,d=e.roundOffsets,u=e.isFixed,p=a.x,f=void 0===p?0:p,m=a.y,h=void 0===m?0:m,g="function"==typeof d?d({x:f,y:h}):{x:f,y:h};f=g.x,h=g.y;var x=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),b=za,v=Ta,j=window;if(c){var w=ci(r),N="clientHeight",k="clientWidth";w===Ha(r)&&"static"!==si(w=ai(r)).position&&"absolute"===i&&(N="scrollHeight",k="scrollWidth"),(s===Ta||(s===za||s===Oa)&&o===La)&&(v=Pa,h-=(u&&w===j&&j.visualViewport?j.visualViewport.height:w[N])-n.height,h*=l?1:-1),s!==za&&(s!==Ta&&s!==Pa||o!==La)||(b=Oa,f-=(u&&w===j&&j.visualViewport?j.visualViewport.width:w[k])-n.width,f*=l?1:-1)}var C,_=Object.assign({position:i},c&&gi),S=!0===d?function(e,t){var r=e.x,n=e.y,s=t.devicePixelRatio||1;return{x:Xa(r*s)/s||0,y:Xa(n*s)/s||0}}({x:f,y:h},Ha(r)):{x:f,y:h};return f=S.x,h=S.y,l?Object.assign({},_,((C={})[v]=y?"0":"",C[b]=x?"0":"",C.transform=(j.devicePixelRatio||1)<=1?"translate("+f+"px, "+h+"px)":"translate3d("+f+"px, "+h+"px, 0)",C)):Object.assign({},_,((t={})[v]=y?h+"px":"",t[b]=x?f+"px":"",t.transform="",t))}const yi={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,r=e.options,n=r.gpuAcceleration,s=void 0===n||n,o=r.adaptive,a=void 0===o||o,i=r.roundOffsets,l=void 0===i||i,c={placement:Wa(t.placement),variation:hi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:"fixed"===t.options.strategy};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,xi(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:l})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,xi(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var bi={passive:!0};const vi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,r=e.instance,n=e.options,s=n.scroll,o=void 0===s||s,a=n.resize,i=void 0===a||a,l=Ha(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&c.forEach(function(e){e.addEventListener("scroll",r.update,bi)}),i&&l.addEventListener("resize",r.update,bi),function(){o&&c.forEach(function(e){e.removeEventListener("scroll",r.update,bi)}),i&&l.removeEventListener("resize",r.update,bi)}},data:{}};var ji={left:"right",right:"left",bottom:"top",top:"bottom"};function wi(e){return e.replace(/left|right|bottom|top/g,function(e){return ji[e]})}var Ni={start:"end",end:"start"};function ki(e){return e.replace(/start|end/g,function(e){return Ni[e]})}function Ci(e){var t=Ha(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function _i(e){return ei(ai(e)).left+Ci(e).scrollLeft}function Si(e){var t=si(e),r=t.overflow,n=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+s+n)}function Ei(e){return["html","body","#document"].indexOf(ni(e))>=0?e.ownerDocument.body:Va(e)&&Si(e)?e:Ei(ii(e))}function Ai(e,t){var r;void 0===t&&(t=[]);var n=Ei(e),s=n===(null==(r=e.ownerDocument)?void 0:r.body),o=Ha(n),a=s?[o].concat(o.visualViewport||[],Si(n)?n:[]):n,i=t.concat(a);return s?i:i.concat(Ai(ii(a)))}function Mi(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ti(e,t,r){return t===Ra?Mi(function(e,t){var r=Ha(e),n=ai(e),s=r.visualViewport,o=n.clientWidth,a=n.clientHeight,i=0,l=0;if(s){o=s.width,a=s.height;var c=Za();(c||!c&&"fixed"===t)&&(i=s.offsetLeft,l=s.offsetTop)}return{width:o,height:a,x:i+_i(e),y:l}}(e,r)):Qa(t)?function(e,t){var r=ei(e,!1,"fixed"===t);return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}(t,r):Mi(function(e){var t,r=ai(e),n=Ci(e),s=null==(t=e.ownerDocument)?void 0:t.body,o=Ka(r.scrollWidth,r.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),a=Ka(r.scrollHeight,r.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),i=-n.scrollLeft+_i(e),l=-n.scrollTop;return"rtl"===si(s||r).direction&&(i+=Ka(r.clientWidth,s?s.clientWidth:0)-o),{width:o,height:a,x:i,y:l}}(ai(e)))}function Pi(e){var t,r=e.reference,n=e.element,s=e.placement,o=s?Wa(s):null,a=s?hi(s):null,i=r.x+r.width/2-n.width/2,l=r.y+r.height/2-n.height/2;switch(o){case Ta:t={x:i,y:r.y-n.height};break;case Pa:t={x:i,y:r.y+r.height};break;case Oa:t={x:r.x+r.width,y:l};break;case za:t={x:r.x-n.width,y:l};break;default:t={x:r.x,y:r.y}}var c=o?di(o):null;if(null!=c){var d="y"===c?"height":"width";switch(a){case Ia:t[c]=t[c]-(r[d]/2-n[d]/2);break;case La:t[c]=t[c]+(r[d]/2-n[d]/2)}}return t}function Oi(e,t){void 0===t&&(t={});var r=t,n=r.placement,s=void 0===n?e.placement:n,o=r.strategy,a=void 0===o?e.strategy:o,i=r.boundary,l=void 0===i?"clippingParents":i,c=r.rootBoundary,d=void 0===c?Ra:c,u=r.elementContext,p=void 0===u?$a:u,f=r.altBoundary,m=void 0!==f&&f,h=r.padding,g=void 0===h?0:h,x=pi("number"!=typeof g?g:fi(g,Da)),y=p===$a?"reference":$a,b=e.rects.popper,v=e.elements[m?y:p],j=function(e,t,r,n){var s="clippingParents"===t?function(e){var t=Ai(ii(e)),r=["absolute","fixed"].indexOf(si(e).position)>=0&&Va(e)?ci(e):e;return Qa(r)?t.filter(function(e){return Qa(e)&&ri(e,r)&&"body"!==ni(e)}):[]}(e):[].concat(t),o=[].concat(s,[r]),a=o[0],i=o.reduce(function(t,r){var s=Ti(e,r,n);return t.top=Ka(s.top,t.top),t.right=Ga(s.right,t.right),t.bottom=Ga(s.bottom,t.bottom),t.left=Ka(s.left,t.left),t},Ti(e,a,n));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}(Qa(v)?v:v.contextElement||ai(e.elements.popper),l,d,a),w=ei(e.elements.reference),N=Pi({reference:w,element:b,strategy:"absolute",placement:s}),k=Mi(Object.assign({},b,N)),C=p===$a?k:w,_={top:j.top-C.top+x.top,bottom:C.bottom-j.bottom+x.bottom,left:j.left-C.left+x.left,right:C.right-j.right+x.right},S=e.modifiersData.offset;if(p===$a&&S){var E=S[s];Object.keys(_).forEach(function(e){var t=[Oa,Pa].indexOf(e)>=0?1:-1,r=[Ta,Pa].indexOf(e)>=0?"y":"x";_[e]+=E[r]*t})}return _}const zi={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var s=r.mainAxis,o=void 0===s||s,a=r.altAxis,i=void 0===a||a,l=r.fallbackPlacements,c=r.padding,d=r.boundary,u=r.rootBoundary,p=r.altBoundary,f=r.flipVariations,m=void 0===f||f,h=r.allowedAutoPlacements,g=t.options.placement,x=Wa(g),y=l||(x!==g&&m?function(e){if(Wa(e)===qa)return[];var t=wi(e);return[ki(e),t,ki(t)]}(g):[wi(g)]),b=[g].concat(y).reduce(function(e,r){return e.concat(Wa(r)===qa?function(e,t){void 0===t&&(t={});var r=t,n=r.placement,s=r.boundary,o=r.rootBoundary,a=r.padding,i=r.flipVariations,l=r.allowedAutoPlacements,c=void 0===l?Fa:l,d=hi(n),u=d?i?Ba:Ba.filter(function(e){return hi(e)===d}):Da,p=u.filter(function(e){return c.indexOf(e)>=0});0===p.length&&(p=u);var f=p.reduce(function(t,r){return t[r]=Oi(e,{placement:r,boundary:s,rootBoundary:o,padding:a})[Wa(r)],t},{});return Object.keys(f).sort(function(e,t){return f[e]-f[t]})}(t,{placement:r,boundary:d,rootBoundary:u,padding:c,flipVariations:m,allowedAutoPlacements:h}):r)},[]),v=t.rects.reference,j=t.rects.popper,w=new Map,N=!0,k=b[0],C=0;C<b.length;C++){var _=b[C],S=Wa(_),E=hi(_)===Ia,A=[Ta,Pa].indexOf(S)>=0,M=A?"width":"height",T=Oi(t,{placement:_,boundary:d,rootBoundary:u,altBoundary:p,padding:c}),P=A?E?Oa:za:E?Pa:Ta;v[M]>j[M]&&(P=wi(P));var O=wi(P),z=[];if(o&&z.push(T[S]<=0),i&&z.push(T[P]<=0,T[O]<=0),z.every(function(e){return e})){k=_,N=!1;break}w.set(_,z)}if(N)for(var q=function(e){var t=b.find(function(t){var r=w.get(t);if(r)return r.slice(0,e).every(function(e){return e})});if(t)return k=t,"break"},D=m?3:1;D>0&&"break"!==q(D);D--);t.placement!==k&&(t.modifiersData[n]._skip=!0,t.placement=k,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function qi(e,t,r){return void 0===r&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function Di(e){return[Ta,Oa,Pa,za].some(function(t){return e[t]>=0})}const Ii={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,r=e.name,n=t.rects.reference,s=t.rects.popper,o=t.modifiersData.preventOverflow,a=Oi(t,{elementContext:"reference"}),i=Oi(t,{altBoundary:!0}),l=qi(a,n),c=qi(i,s,o),d=Di(l),u=Di(c);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:u},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":u})}},Li={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,r=e.options,n=e.name,s=r.offset,o=void 0===s?[0,0]:s,a=Fa.reduce(function(e,r){return e[r]=function(e,t,r){var n=Wa(e),s=[za,Ta].indexOf(n)>=0?-1:1,o="function"==typeof r?r(Object.assign({},t,{placement:e})):r,a=o[0],i=o[1];return a=a||0,i=(i||0)*s,[za,Oa].indexOf(n)>=0?{x:i,y:a}:{x:a,y:i}}(r,t.rects,o),e},{}),i=a[t.placement],l=i.x,c=i.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=a}},Ri={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,r=e.name;t.modifiersData[r]=Pi({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},$i={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,r=e.options,n=e.name,s=r.mainAxis,o=void 0===s||s,a=r.altAxis,i=void 0!==a&&a,l=r.boundary,c=r.rootBoundary,d=r.altBoundary,u=r.padding,p=r.tether,f=void 0===p||p,m=r.tetherOffset,h=void 0===m?0:m,g=Oi(t,{boundary:l,rootBoundary:c,padding:u,altBoundary:d}),x=Wa(t.placement),y=hi(t.placement),b=!y,v=di(x),j="x"===v?"y":"x",w=t.modifiersData.popperOffsets,N=t.rects.reference,k=t.rects.popper,C="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,_="number"==typeof C?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),S=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,E={x:0,y:0};if(w){if(o){var A,M="y"===v?Ta:za,T="y"===v?Pa:Oa,P="y"===v?"height":"width",O=w[v],z=O+g[M],q=O-g[T],D=f?-k[P]/2:0,I=y===Ia?N[P]:k[P],L=y===Ia?-k[P]:-N[P],R=t.elements.arrow,$=f&&R?ti(R):{width:0,height:0},B=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},F=B[M],U=B[T],W=ui(0,N[P],$[P]),H=b?N[P]/2-D-W-F-_.mainAxis:I-W-F-_.mainAxis,Q=b?-N[P]/2+D+W+U+_.mainAxis:L+W+U+_.mainAxis,V=t.elements.arrow&&ci(t.elements.arrow),Y=V?"y"===v?V.clientTop||0:V.clientLeft||0:0,K=null!=(A=null==S?void 0:S[v])?A:0,G=O+Q-K,X=ui(f?Ga(z,O+H-K-Y):z,O,f?Ka(q,G):q);w[v]=X,E[v]=X-O}if(i){var J,Z="x"===v?Ta:za,ee="x"===v?Pa:Oa,te=w[j],re="y"===j?"height":"width",ne=te+g[Z],se=te-g[ee],oe=-1!==[Ta,za].indexOf(x),ae=null!=(J=null==S?void 0:S[j])?J:0,ie=oe?ne:te-N[re]-k[re]-ae+_.altAxis,le=oe?te+N[re]+k[re]-ae-_.altAxis:se,ce=f&&oe?function(e,t,r){var n=ui(e,t,r);return n>r?r:n}(ie,te,le):ui(f?ie:ne,te,f?le:se);w[j]=ce,E[j]=ce-te}t.modifiersData[n]=E}},requiresIfExists:["offset"]};function Bi(e,t,r){void 0===r&&(r=!1);var n,s,o=Va(t),a=Va(t)&&function(e){var t=e.getBoundingClientRect(),r=Xa(t.width)/e.offsetWidth||1,n=Xa(t.height)/e.offsetHeight||1;return 1!==r||1!==n}(t),i=ai(t),l=ei(e,a,r),c={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(o||!o&&!r)&&(("body"!==ni(t)||Si(i))&&(c=(n=t)!==Ha(n)&&Va(n)?{scrollLeft:(s=n).scrollLeft,scrollTop:s.scrollTop}:Ci(n)),Va(t)?((d=ei(t,!0)).x+=t.clientLeft,d.y+=t.clientTop):i&&(d.x=_i(i))),{x:l.left+c.scrollLeft-d.x,y:l.top+c.scrollTop-d.y,width:l.width,height:l.height}}function Fi(e){var t=new Map,r=new Set,n=[];function s(e){r.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!r.has(e)){var n=t.get(e);n&&s(n)}}),n.push(e)}return e.forEach(function(e){t.set(e.name,e)}),e.forEach(function(e){r.has(e.name)||s(e)}),n}var Ui={placement:"bottom",modifiers:[],strategy:"absolute"};function Wi(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}var Hi=function(e){void 0===e&&(e={});var t=e,r=t.defaultModifiers,n=void 0===r?[]:r,s=t.defaultOptions,o=void 0===s?Ui:s;return function(e,t,r){void 0===r&&(r=o);var s,a,i={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ui,o),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,d={state:i,setOptions:function(r){var s="function"==typeof r?r(i.options):r;u(),i.options=Object.assign({},o,i.options,s),i.scrollParents={reference:Qa(e)?Ai(e):e.contextElement?Ai(e.contextElement):[],popper:Ai(t)};var a,c,p=function(e){var t=Fi(e);return Ua.reduce(function(e,r){return e.concat(t.filter(function(e){return e.phase===r}))},[])}((a=[].concat(n,i.options.modifiers),c=a.reduce(function(e,t){var r=e[t.name];return e[t.name]=r?Object.assign({},r,t,{options:Object.assign({},r.options,t.options),data:Object.assign({},r.data,t.data)}):t,e},{}),Object.keys(c).map(function(e){return c[e]})));return i.orderedModifiers=p.filter(function(e){return e.enabled}),i.orderedModifiers.forEach(function(e){var t=e.name,r=e.options,n=void 0===r?{}:r,s=e.effect;if("function"==typeof s){var o=s({state:i,name:t,instance:d,options:n});l.push(o||function(){})}}),d.update()},forceUpdate:function(){if(!c){var e=i.elements,t=e.reference,r=e.popper;if(Wi(t,r)){i.rects={reference:Bi(t,ci(r),"fixed"===i.options.strategy),popper:ti(r)},i.reset=!1,i.placement=i.options.placement,i.orderedModifiers.forEach(function(e){return i.modifiersData[e.name]=Object.assign({},e.data)});for(var n=0;n<i.orderedModifiers.length;n++)if(!0!==i.reset){var s=i.orderedModifiers[n],o=s.fn,a=s.options,l=void 0===a?{}:a,u=s.name;"function"==typeof o&&(i=o({state:i,options:l,name:u,instance:d})||i)}else i.reset=!1,n=-1}}},update:(s=function(){return new Promise(function(e){d.forceUpdate(),e(i)})},function(){return a||(a=new Promise(function(e){Promise.resolve().then(function(){a=void 0,e(s())})})),a}),destroy:function(){u(),c=!0}};if(!Wi(e,t))return d;function u(){l.forEach(function(e){return e()}),l=[]}return d.setOptions(r).then(function(e){!c&&r.onFirstUpdate&&r.onFirstUpdate(e)}),d}}({defaultModifiers:[Ii,Ri,yi,vi,Li,zi,$i,mi]}),Qi=function(e){return{position:e,top:"0",left:"0",opacity:"0",pointerEvents:"none"}},Vi={name:"applyStyles",enabled:!1},Yi={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:function(e){var t=e.state;return function(){var e=t.elements,r=e.reference,n=e.popper;if("removeAttribute"in r){var s=(r.getAttribute("aria-describedby")||"").split(",").filter(function(e){return e.trim()!==n.id});s.length?r.setAttribute("aria-describedby",s.join(",")):r.removeAttribute("aria-describedby")}}},fn:function(e){var t,r=e.state.elements,n=r.popper,s=r.reference,o=null==(t=n.getAttribute("role"))?void 0:t.toLowerCase();if(n.id&&"tooltip"===o&&"setAttribute"in s){var a=s.getAttribute("aria-describedby");if(a&&-1!==a.split(",").indexOf(n.id))return;s.setAttribute("aria-describedby",a?a+","+n.id:n.id)}}},Ki=[];const Gi=function(e,t,n){var s=void 0===n?{}:n,o=s.enabled,a=void 0===o||o,i=s.placement,l=void 0===i?"bottom":i,c=s.strategy,d=void 0===c?"absolute":c,u=s.modifiers,p=void 0===u?Ki:u,f=Us(s,["enabled","placement","strategy","modifiers"]),m=(0,r.useRef)(),h=(0,r.useCallback)(function(){var e;null==(e=m.current)||e.update()},[]),g=(0,r.useCallback)(function(){var e;null==(e=m.current)||e.forceUpdate()},[]),x=function(e){const t=function(){const e=(0,r.useRef)(!0),t=(0,r.useRef)(()=>e.current);return(0,r.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}();return[e[0],(0,r.useCallback)(r=>{if(t())return e[1](r)},[t,e[1]])]}((0,r.useState)({placement:l,update:h,forceUpdate:g,attributes:{},styles:{popper:Qi(d),arrow:{}}})),y=x[0],b=x[1],v=(0,r.useMemo)(function(){return{name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:function(e){var t=e.state,r={},n={};Object.keys(t.elements).forEach(function(e){r[e]=t.styles[e],n[e]=t.attributes[e]}),b({state:t,styles:r,attributes:n,update:h,forceUpdate:g,placement:t.placement})}}},[h,g,b]);return(0,r.useEffect)(function(){m.current&&a&&m.current.setOptions({placement:l,strategy:d,modifiers:[].concat(p,[v,Vi])})},[d,l,v,a]),(0,r.useEffect)(function(){if(a&&null!=e&&null!=t)return m.current=Hi(e,t,po({},f,{placement:l,strategy:d,modifiers:[].concat(p,[Yi,v])})),function(){null!=m.current&&(m.current.destroy(),m.current=void 0,b(function(e){return po({},e,{attributes:{},styles:{popper:Qi(d)}})}))}},[a,e,t]),y};var Xi=!1,Ji=!1;try{var Zi={get passive(){return Xi=!0},get once(){return Ji=Xi=!0}};wa&&(window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,!0))}catch(e){}const el=function(e,t,r,n){return function(e,t,r,n){if(n&&"boolean"!=typeof n&&!Ji){var s=n.once,o=n.capture,a=r;!Ji&&s&&(a=r.__once||function e(n){this.removeEventListener(t,e,o),r.call(this,n)},r.__once=a),e.addEventListener(t,a,Xi?n:o)}e.addEventListener(t,r,n)}(e,t,r,n),function(){!function(e,t,r,n){var s=n&&"boolean"!=typeof n?n.capture:n;e.removeEventListener(t,r,s),r.__once&&e.removeEventListener(t,r.__once,s)}(e,t,r,n)}};function tl(e){const t=function(e){const t=(0,r.useRef)(e);return(0,r.useEffect)(()=>{t.current=e},[e]),t}(e);return(0,r.useCallback)(function(...e){return t.current&&t.current(...e)},[t])}var rl=a(9771),nl=a.n(rl);var sl=function(){},ol=function(e){return e&&("current"in e?e.current:e)};const al=function(e,t,n){var s=void 0===n?{}:n,o=s.disabled,a=s.clickTrigger,i=void 0===a?"click":a,l=(0,r.useRef)(!1),c=t||sl,d=(0,r.useCallback)(function(t){var r,n,s=ol(e);nl()(!!s,"RootClose captured a close event but does not have a ref to compare it to. useRootClose(), should be passed a ref that resolves to a DOM node"),l.current=!(s&&(n=t,!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey))&&function(e){return 0===e.button}(t)&&!ma(s,null!=(r=null==t.composedPath?void 0:t.composedPath()[0])?r:t.target))},[e]),u=tl(function(e){l.current||c(e)}),p=tl(function(e){27===e.keyCode&&c(e)});(0,r.useEffect)(function(){if(!o&&null!=e){var t=window.event,r=la(function(e){return e&&"setState"in e?Lr().findDOMNode(e):null!=e?e:null}(ol(e))),n=el(r,i,d,!0),s=el(r,i,function(e){e!==t?u(e):t=void 0}),a=el(r,"keyup",function(e){e!==t?p(e):t=void 0}),l=[];return"ontouchstart"in r.documentElement&&(l=[].slice.call(r.body.children).map(function(e){return el(e,"mousemove",sl)})),function(){n(),s(),a(),l.forEach(function(e){return e()})}}},[e,o,i,d,u,p])};var il=function(e){var t;return"undefined"==typeof document?null:null==e?la().body:("function"==typeof e&&(e=e()),e&&"current"in e&&(e=e.current),null!=(t=e)&&t.nodeType&&e||null)};function ll(e,t){var n=(0,r.useState)(function(){return il(e)}),s=n[0],o=n[1];if(!s){var a=il(e);a&&o(a)}return(0,r.useEffect)(function(){t&&s&&t(s)},[t,s]),(0,r.useEffect)(function(){var t=il(e);t!==s&&o(t)},[e,s]),s}function cl(e){return void 0===e&&(e={}),Array.isArray(e)?e:Object.keys(e).map(function(t){return e[t].name=t,e[t]})}var dl=n().forwardRef(function(e,t){var s,o,a=e.flip,i=e.offset,l=e.placement,c=e.containerPadding,d=void 0===c?5:c,u=e.popperConfig,p=void 0===u?{}:u,f=e.transition,m=Aa(),h=m[0],g=m[1],x=Aa(),y=x[0],b=x[1],v=(s=g,o=t,(0,r.useMemo)(()=>function(e,t){const r=Ma(e),n=Ma(t);return e=>{r&&r(e),n&&n(e)}}(s,o),[s,o])),j=ll(e.container),w=ll(e.target),N=(0,r.useState)(!e.show),k=N[0],C=N[1],_=Gi(w,h,function(e){var t,r,n,s,o=e.enabled,a=e.enableEvents,i=e.placement,l=e.flip,c=e.offset,d=e.fixed,u=e.containerPadding,p=e.arrowElement,f=e.popperConfig,m=void 0===f?{}:f,h=function(e){var t={};return Array.isArray(e)?(null==e||e.forEach(function(e){t[e.name]=e}),t):e||t}(m.modifiers);return po({},m,{placement:i,enabled:o,strategy:d?"fixed":m.strategy,modifiers:cl(po({},h,{eventListeners:{enabled:a},preventOverflow:po({},h.preventOverflow,{options:u?po({padding:u},null==(t=h.preventOverflow)?void 0:t.options):null==(r=h.preventOverflow)?void 0:r.options}),offset:{options:po({offset:c},null==(n=h.offset)?void 0:n.options)},arrow:po({},h.arrow,{enabled:!!p,options:po({},null==(s=h.arrow)?void 0:s.options,{element:p})}),flip:po({enabled:!!l},h.flip)}))})}({placement:l,enableEvents:!!e.show,containerPadding:d||5,flip:a,offset:i,arrowElement:y,popperConfig:p})),S=_.styles,E=_.attributes,A=Us(_,["styles","attributes"]);e.show?k&&C(!1):e.transition||k||C(!0);var M=e.show||f&&!k;if(al(h,e.onHide,{disabled:!e.rootClose||e.rootCloseDisabled,clickTrigger:e.rootCloseEvent}),!M)return null;var T=e.children(po({},A,{show:!!e.show,props:po({},E.popper,{style:S.popper,ref:v}),arrowProps:po({},E.arrow,{style:S.arrow,ref:b})}));if(f){var P=e.onExit,O=e.onExiting,z=e.onEnter,q=e.onEntering,D=e.onEntered;T=n().createElement(f,{in:e.show,appear:!0,onExit:P,onExiting:O,onExited:function(){C(!0),e.onExited&&e.onExited.apply(e,arguments)},onEnter:z,onEntering:q,onEntered:D},T)}return j?Lr().createPortal(T,j):null});dl.displayName="Overlay",dl.propTypes={show:xo().bool,placement:xo().oneOf(Fa),target:xo().any,container:xo().any,flip:xo().bool,children:xo().func.isRequired,containerPadding:xo().number,popperConfig:xo().object,rootClose:xo().bool,rootCloseEvent:xo().oneOf(["click","mousedown"]),rootCloseDisabled:xo().bool,onHide:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s;return e.rootClose?(s=xo().func).isRequired.apply(s,[e].concat(r)):xo().func.apply(xo(),[e].concat(r))},transition:xo().elementType,onEnter:xo().func,onEntering:xo().func,onEntered:xo().func,onExit:xo().func,onExiting:xo().func,onExited:xo().func};const ul=dl;var pl=a(2404),fl=a.n(pl);function ml(e,t){var r=ha(e);return r?r.innerHeight:t?e.clientHeight:ba(e).height}var hl,gl=Function.prototype.bind.call(Function.prototype.call,[].slice);function xl(e,t){if(!hl){var r=document.body,n=r.matches||r.matchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector;hl=function(e,t){return n.call(e,t)}}return hl(e,t)}function yl(e,t,r){e.closest&&!r&&e.closest(t);var n=e;do{if(xl(n,t))return n;n=n.parentElement}while(n&&n!==r&&n.nodeType===document.ELEMENT_NODE);return null}var bl=a(4713),vl=a.n(bl),jl=a(3181),wl=a.n(jl),Nl=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function kl(e,t){return e===t||!(!Nl(e)||!Nl(t))}function Cl(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!kl(e[r],t[r]))return!1;return!0}function _l(e,t){void 0===t&&(t=Cl);var r=null;function n(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(r&&r.lastThis===this&&t(n,r.lastArgs))return r.lastResult;var o=e.apply(this,n);return r={lastResult:o,lastArgs:n,lastThis:this},o}return n.clear=function(){r=null},n}function Sl(e,t){var r=ha(e);return r?r.innerWidth:t?e.clientWidth:ba(e).width}var El,Al=a(3031),Ml=a.n(Al);function Tl(e){if((!El&&0!==El||e)&&wa){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),El=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return El}function Pl(e){return Zs(e)||sa(e)||to(e)||ro()}function Ol(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var zl=a(4684),ql=a.n(zl),Dl=a(3916),Il=a.n(Dl),Ll=a(179),Rl=a.n(Ll),$l=a(9752),Bl=a.n($l);function Fl(e){return e.children}a(7872),a(8867),a(8906),a(1840),a(5750),a(3200),a(3826),a(4629);var Ul="PREV",Wl="NEXT",Hl="TODAY",Ql="DATE",Vl={MONTH:"month",WEEK:"week",WORK_WEEK:"work_week",DAY:"day",AGENDA:"agenda"},Yl=Object.keys(Vl).map(function(e){return Vl[e]});xo().oneOfType([xo().string,xo().func]),xo().any,xo().func,xo().oneOfType([xo().arrayOf(xo().oneOf(Yl)),xo().objectOf(function(e,t){if(-1!==Yl.indexOf(t)&&"boolean"==typeof e[t])return null;for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];return xo().elementType.apply(xo(),[e,t].concat(n))})]),xo().oneOfType([xo().oneOf(["overlap","no-overlap"]),xo().func]);var Kl={seconds:1e3,minutes:6e4,hours:36e5,day:864e5};function Gl(e,t){var r=Oo(e,"month");return Oo(r,"week",t.startOfWeek())}function Xl(e,t){var r=zo(e,"month");return zo(r,"week",t.startOfWeek())}function Jl(e,t){for(var r=Gl(e,t),n=Xl(e,t),s=[];$o(r,n,"day");)s.push(r),r=To(r,1,"day");return s}function Zl(e,t){var r=Oo(e,t);return qo(r,e)?r:To(r,1,t)}function ec(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"day",n=e,s=[];$o(n,t,r);)s.push(n),n=To(n,1,r);return s}function tc(e,t){return null==t&&null==e?null:(null==t&&(t=new Date),null==e&&(e=new Date),e=Oo(e,"day"),e=Vo(e,Vo(t)),e=Qo(e,Qo(t)),e=Ho(e,Ho(t)),Wo(e,Wo(t)))}function rc(e){return 0===Vo(e)&&0===Qo(e)&&0===Ho(e)&&0===Wo(e)}function nc(e,t,r){return r&&"milliseconds"!==r?Math.round(Math.abs(+Oo(e,r)/Kl[r]-+Oo(t,r)/Kl[r])):Math.abs(+e-+t)}var sc=xo().oneOfType([xo().string,xo().func]);function oc(e,t,r,n,s){var o="function"==typeof n?n(r,s,e):t.call(e,r,n,s);return io()(null==o||"string"==typeof o,"`localizer format(..)` must return a string, null, or undefined"),o}function ac(e,t,r){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,t+r,0,0)}function ic(e,t){return e.getTimezoneOffset()-t.getTimezoneOffset()}function lc(e,t){return nc(e,t,"minutes")+ic(e,t)}function cc(e){var t=Oo(e,"day");return nc(t,e,"minutes")+ic(t,e)}function dc(e,t){return Ro(e,t,"day")}function uc(e,t,r){return qo(e,t,"minutes")?Lo(t,r,"minutes"):Io(t,r,"minutes")}function pc(t,r){return function(t,r,n,s){return"day"===n&&(n="date"),Math.abs(e[n](t,void 0,s)-e[n](r,void 0,s))}(t,r,"day")}function fc(e){var t=e.evtA,r=t.start,n=t.end,s=t.allDay,o=e.evtB,a=o.start,i=o.end,l=o.allDay,c=+Oo(r,"day")-+Oo(a,"day"),d=pc(r,n),u=pc(a,i);return c||u-d||!!l-!!s||+r-+a||+n-+i}function mc(e){var t=e.event,r=t.start,n=t.end,s=e.range,o=s.start,a=s.end,i=Oo(r,"day"),l=$o(i,a,"day"),c=Do(i,n,"minutes")?Io(n,o,"minutes"):Lo(n,o,"minutes");return l&&c}function hc(e,t){return qo(e,t,"day")}function gc(e,t){return rc(e)&&rc(t)}var xc=Vs(function e(t){var r=this;Hs(this,e),io()("function"==typeof t.format,"date localizer `format(..)` must be a function"),io()("function"==typeof t.firstOfWeek,"date localizer `firstOfWeek(..)` must be a function"),this.propType=t.propType||sc,this.formats=t.formats,this.format=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return oc.apply(void 0,[r,t.format].concat(n))},this.startOfWeek=t.firstOfWeek,this.merge=t.merge||tc,this.inRange=t.inRange||Uo,this.lt=t.lt||Ro,this.lte=t.lte||$o,this.gt=t.gt||Io,this.gte=t.gte||Lo,this.eq=t.eq||qo,this.neq=t.neq||Do,this.startOf=t.startOf||Oo,this.endOf=t.endOf||zo,this.add=t.add||To,this.range=t.range||ec,this.diff=t.diff||nc,this.ceil=t.ceil||Zl,this.min=t.min||Bo,this.max=t.max||Fo,this.minutes=t.minutes||Qo,this.daySpan=t.daySpan||pc,this.firstVisibleDay=t.firstVisibleDay||Gl,this.lastVisibleDay=t.lastVisibleDay||Xl,this.visibleDays=t.visibleDays||Jl,this.getSlotDate=t.getSlotDate||ac,this.getTimezoneOffset=t.getTimezoneOffset||function(e){return e.getTimezoneOffset()},this.getDstOffset=t.getDstOffset||ic,this.getTotalMin=t.getTotalMin||lc,this.getMinutesFromMidnight=t.getMinutesFromMidnight||cc,this.continuesPrior=t.continuesPrior||dc,this.continuesAfter=t.continuesAfter||uc,this.sortEvents=t.sortEvents||fc,this.inEventRange=t.inEventRange||mc,this.isSameDate=t.isSameDate||hc,this.startAndEndAreDateOnly=t.startAndEndAreDateOnly||gc,this.segmentOffset=t.browserTZOffset?t.browserTZOffset():0});function yc(e,t,r,n){var s=Fs(Fs({},e.formats),r);return Fs(Fs({},e),{},{messages:n,startOfWeek:function(){return e.startOfWeek(t)},format:function(r,n){return e.format(r,s[n]||n,t)}})}var bc=function(e){function t(){var e;Hs(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=Gs(this,t,[].concat(n))).navigate=function(t){e.props.onNavigate(t)},e.view=function(t){e.props.onView(t)},e}return Js(t,e),Vs(t,[{key:"render",value:function(){var e=this.props,t=e.localizer.messages,r=e.label;return n().createElement("div",{className:"rbc-toolbar"},n().createElement("span",{className:"rbc-btn-group"},n().createElement("button",{type:"button",onClick:this.navigate.bind(null,Hl)},t.today),n().createElement("button",{type:"button",onClick:this.navigate.bind(null,Ul)},t.previous),n().createElement("button",{type:"button",onClick:this.navigate.bind(null,Wl)},t.next)),n().createElement("span",{className:"rbc-toolbar-label"},r),n().createElement("span",{className:"rbc-btn-group"},this.viewNamesGroup(t)))}},{key:"viewNamesGroup",value:function(e){var t=this,r=this.props.views,s=this.props.view;if(r.length>1)return r.map(function(r){return n().createElement("button",{type:"button",key:r,className:oo({"rbc-active":s===r}),onClick:t.view.bind(null,r)},e[r])})}}])}(n().Component);function vc(e,t){e&&e.apply(null,[].concat(t))}var jc={date:"Date",time:"Time",event:"Event",allDay:"All Day",week:"Week",work_week:"Work Week",day:"Day",month:"Month",previous:"Back",next:"Next",yesterday:"Yesterday",tomorrow:"Tomorrow",today:"Today",agenda:"Agenda",noEventsInRange:"There are no events in this range.",showMore:function(e){return"+".concat(e," more")}},wc=["style","className","event","selected","isAllDay","onSelect","onDoubleClick","onKeyPress","localizer","continuesPrior","continuesAfter","accessors","getters","children","components","slotStart","slotEnd"],Nc=function(e){function t(){return Hs(this,t),Gs(this,t,arguments)}return Js(t,e),Vs(t,[{key:"render",value:function(){var e=this.props,t=e.style,r=e.className,s=e.event,o=e.selected,a=e.isAllDay,i=e.onSelect,l=e.onDoubleClick,c=e.onKeyPress,d=e.localizer,u=e.continuesPrior,p=e.continuesAfter,f=e.accessors,m=e.getters,h=e.children,g=e.components,x=g.event,y=g.eventWrapper,b=e.slotStart,v=e.slotEnd,j=Ws(e,wc);delete j.resizable;var w=f.title(s),N=f.tooltip(s),k=f.end(s),C=f.start(s),_=f.allDay(s),S=a||_||d.diff(C,d.ceil(k,"day"),"day")>1,E=m.eventProp(s,C,k,o),A=n().createElement("div",{className:"rbc-event-content",title:N||void 0},x?n().createElement(x,{event:s,continuesPrior:u,continuesAfter:p,title:w,isAllDay:_,localizer:d,slotStart:b,slotEnd:v}):w);return n().createElement(y,Object.assign({},this.props,{type:"date"}),n().createElement("div",Object.assign({},j,{style:Fs(Fs({},E.style),t),className:oo("rbc-event",r,E.className,{"rbc-selected":o,"rbc-event-allday":S,"rbc-event-continues-prior":u,"rbc-event-continues-after":p}),onClick:function(e){return i&&i(s,e)},onDoubleClick:function(e){return l&&l(s,e)},onKeyDown:function(e){return c&&c(s,e)}}),"function"==typeof h?h(A):A))}}])}(n().Component);function kc(e,t){return!(!e||null==t)&&fl()(e,t)}function Cc(e,t){return(e.right-e.left)/t}function _c(e,t,r,n){var s=Cc(e,n);return r?n-1-Math.floor((t-e.left)/s):Math.floor((t-e.left)/s)}function Sc(e){var t=e.containerRef,s=e.accessors,o=e.getters,a=e.selected,i=e.components,l=e.localizer,c=e.position,d=e.show,u=e.events,p=e.slotStart,f=e.slotEnd,m=e.onSelect,h=e.onDoubleClick,g=e.onKeyPress,x=e.handleDragStart,y=e.popperRef,b=e.target,v=e.offset;!function(e){var t=e.ref,n=e.callback;(0,r.useEffect)(function(){var e=function(e){t.current&&!t.current.contains(e.target)&&n()};return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[t,n])}({ref:y,callback:d}),(0,r.useLayoutEffect)(function(){var e=function(e){var t=e.offset,r=e.container,n=e.box,s=ba(e.target),o=s.top,a=s.left,i=s.width,l=s.height,c=ba(r),d=c.top,u=c.left,p=c.width,f=c.height,m=ba(n),h=m.width,g=m.height,x=d+f,y=u+p,b=o+g,v=a+h,j=t.x,w=t.y;return{topOffset:b>x?o-g-w:o+w+l,leftOffset:v>y?a+j-h+i:a+j}}({target:b,offset:v,container:t.current,box:y.current}),r=e.topOffset,n=e.leftOffset;y.current.style.top="".concat(r,"px"),y.current.style.left="".concat(n,"px")},[v.x,v.y,b]);var j=c.width,w={minWidth:j+j/2};return n().createElement("div",{style:w,className:"rbc-overlay",ref:y},n().createElement("div",{className:"rbc-overlay-header"},l.format(p,"dayHeaderFormat")),u.map(function(e,t){return n().createElement(Nc,{key:t,type:"popup",localizer:l,event:e,getters:o,onSelect:m,accessors:s,components:i,onDoubleClick:h,onKeyPress:g,continuesPrior:l.lt(s.end(e),p,"day"),continuesAfter:l.gte(s.start(e),f,"day"),slotStart:p,slotEnd:f,selected:kc(e,a),draggable:!0,onDragStart:function(){return x(e)},onDragEnd:function(){return d()}})}))}var Ec=n().forwardRef(function(e,t){return n().createElement(Sc,Object.assign({},e,{popperRef:t}))});function Ac(e){var t=e.containerRef,s=e.popupOffset,o=void 0===s?5:s,a=e.overlay,i=e.accessors,l=e.localizer,c=e.components,d=e.getters,u=e.selected,p=e.handleSelectEvent,f=e.handleDoubleClickEvent,m=e.handleKeyPressEvent,h=e.handleDragStart,g=e.onHide,x=e.overlayDisplay,y=(0,r.useRef)(null);if(!a.position)return null;var b=o;isNaN(o)||(b={x:o,y:o});var v=a.position,j=a.events,w=a.date,N=a.end;return n().createElement(ul,{rootClose:!0,flip:!0,show:!0,placement:"bottom",onHide:g,target:a.target},function(e){var r=e.props;return n().createElement(Ec,Object.assign({},r,{containerRef:t,ref:y,target:a.target,offset:b,accessors:i,getters:d,selected:u,components:c,localizer:l,position:v,show:x,events:j,slotStart:w,slotEnd:N,onSelect:p,onDoubleClick:f,onKeyPress:m,handleDragStart:h}))})}Ec.propTypes={accessors:xo().object.isRequired,getters:xo().object.isRequired,selected:xo().object,components:xo().object.isRequired,localizer:xo().object.isRequired,position:xo().object.isRequired,show:xo().func.isRequired,events:xo().array.isRequired,slotStart:xo().instanceOf(Date).isRequired,slotEnd:xo().instanceOf(Date),onSelect:xo().func,onDoubleClick:xo().func,onKeyPress:xo().func,handleDragStart:xo().func,style:xo().object,offset:xo().shape({x:xo().number,y:xo().number})};var Mc=n().forwardRef(function(e,t){return n().createElement(Ac,Object.assign({},e,{containerRef:t}))});function Tc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;return el(r,e,t,{passive:!1})}function Pc(e,t){return!!function(e,t){var r=t.clientX,n=t.clientY;return yl(document.elementFromPoint(r,n),".rbc-event",e)}(e,t)}function Oc(e){var t=e;return e.touches&&e.touches.length&&(t=e.touches[0]),{clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY}}Mc.propTypes={popupOffset:xo().oneOfType([xo().number,xo().shape({x:xo().number,y:xo().number})]),overlay:xo().shape({position:xo().object,events:xo().array,date:xo().instanceOf(Date),end:xo().instanceOf(Date)}),accessors:xo().object.isRequired,localizer:xo().object.isRequired,components:xo().object.isRequired,getters:xo().object.isRequired,selected:xo().object,handleSelectEvent:xo().func,handleDoubleClickEvent:xo().func,handleKeyPressEvent:xo().func,handleDragStart:xo().func,onHide:xo().func,overlayDisplay:xo().func};var zc=function(){return Vs(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.global,s=void 0!==n&&n,o=r.longPressThreshold,a=void 0===o?250:o,i=r.validContainers,l=void 0===i?[]:i;Hs(this,e),this._initialEvent=null,this.selecting=!1,this.isDetached=!1,this.container=t,this.globalMouse=!t||s,this.longPressThreshold=a,this.validContainers=l,this._listeners=Object.create(null),this._handleInitialEvent=this._handleInitialEvent.bind(this),this._handleMoveEvent=this._handleMoveEvent.bind(this),this._handleTerminatingEvent=this._handleTerminatingEvent.bind(this),this._keyListener=this._keyListener.bind(this),this._dropFromOutsideListener=this._dropFromOutsideListener.bind(this),this._dragOverFromOutsideListener=this._dragOverFromOutsideListener.bind(this),this._removeTouchMoveWindowListener=Tc("touchmove",function(){},window),this._removeKeyDownListener=Tc("keydown",this._keyListener),this._removeKeyUpListener=Tc("keyup",this._keyListener),this._removeDropFromOutsideListener=Tc("drop",this._dropFromOutsideListener),this._removeDragOverFromOutsideListener=Tc("dragover",this._dragOverFromOutsideListener),this._addInitialEventListener()},[{key:"on",value:function(e,t){var r=this._listeners[e]||(this._listeners[e]=[]);return r.push(t),{remove:function(){var e=r.indexOf(t);-1!==e&&r.splice(e,1)}}}},{key:"emit",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var s;return(this._listeners[e]||[]).forEach(function(e){void 0===s&&(s=e.apply(void 0,r))}),s}},{key:"teardown",value:function(){this._initialEvent=null,this._initialEventData=null,this._selectRect=null,this.selecting=!1,this._lastClickData=null,this.isDetached=!0,this._listeners=Object.create(null),this._removeTouchMoveWindowListener&&this._removeTouchMoveWindowListener(),this._removeInitialEventListener&&this._removeInitialEventListener(),this._removeEndListener&&this._removeEndListener(),this._onEscListener&&this._onEscListener(),this._removeMoveListener&&this._removeMoveListener(),this._removeKeyUpListener&&this._removeKeyUpListener(),this._removeKeyDownListener&&this._removeKeyDownListener(),this._removeDropFromOutsideListener&&this._removeDropFromOutsideListener(),this._removeDragOverFromOutsideListener&&this._removeDragOverFromOutsideListener()}},{key:"isSelected",value:function(e){var t=this._selectRect;return!(!t||!this.selecting)&&qc(t,Dc(e))}},{key:"filter",value:function(e){return this._selectRect&&this.selecting?e.filter(this.isSelected,this):[]}},{key:"_addLongPressListener",value:function(e,t){var r=this,n=null,s=null,o=null,a=function(t){n=setTimeout(function(){l(),e(t)},r.longPressThreshold),s=Tc("touchmove",function(){return l()}),o=Tc("touchend",function(){return l()})},i=Tc("touchstart",a),l=function(){n&&clearTimeout(n),s&&s(),o&&o(),n=null,s=null,o=null};return t&&a(t),function(){l(),i()}}},{key:"_addInitialEventListener",value:function(){var e=this,t=Tc("mousedown",function(t){e._removeInitialEventListener(),e._handleInitialEvent(t),e._removeInitialEventListener=Tc("mousedown",e._handleInitialEvent)}),r=Tc("touchstart",function(t){e._removeInitialEventListener(),e._removeInitialEventListener=e._addLongPressListener(e._handleInitialEvent,t)});this._removeInitialEventListener=function(){t(),r()}}},{key:"_dropFromOutsideListener",value:function(e){var t=Oc(e),r=t.pageX,n=t.pageY,s=t.clientX,o=t.clientY;this.emit("dropFromOutside",{x:r,y:n,clientX:s,clientY:o}),e.preventDefault()}},{key:"_dragOverFromOutsideListener",value:function(e){var t=Oc(e),r=t.pageX,n=t.pageY,s=t.clientX,o=t.clientY;this.emit("dragOverFromOutside",{x:r,y:n,clientX:s,clientY:o}),e.preventDefault()}},{key:"_handleInitialEvent",value:function(e){if(this._initialEvent=e,!this.isDetached){var t,r=Oc(e),n=r.clientX,s=r.clientY,o=r.pageX,a=r.pageY,i=this.container();if(3!==e.which&&2!==e.button&&function(e,t,r){return!e||ma(e,document.elementFromPoint(t,r))}(i,n,s)){if(!this.globalMouse&&i&&!ma(i,e.target)){var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"object"!==Ls(e)&&(e={top:e,left:e,right:e,bottom:e}),e}(0),c=l.top,d=l.left,u=l.bottom,p=l.right;if(!qc({top:(t=Dc(i)).top-c,left:t.left-d,bottom:t.bottom+u,right:t.right+p},{top:a,left:o}))return}if(!1!==this.emit("beforeSelect",this._initialEventData={isTouch:/^touch/.test(e.type),x:o,y:a,clientX:n,clientY:s}))switch(e.type){case"mousedown":this._removeEndListener=Tc("mouseup",this._handleTerminatingEvent),this._onEscListener=Tc("keydown",this._handleTerminatingEvent),this._removeMoveListener=Tc("mousemove",this._handleMoveEvent);break;case"touchstart":this._handleMoveEvent(e),this._removeEndListener=Tc("touchend",this._handleTerminatingEvent),this._removeMoveListener=Tc("touchmove",this._handleMoveEvent)}}}}},{key:"_isWithinValidContainer",value:function(e){var t=e.target,r=this.validContainers;return!(r&&r.length&&t)||r.some(function(e){return!!t.closest(e)})}},{key:"_handleTerminatingEvent",value:function(e){var t=this.selecting,r=this._selectRect;if(!t&&e.type.includes("key")&&(e=this._initialEvent),this.selecting=!1,this._removeEndListener&&this._removeEndListener(),this._removeMoveListener&&this._removeMoveListener(),this._selectRect=null,this._initialEvent=null,this._initialEventData=null,e){var n=!this.container||ma(this.container(),e.target),s=this._isWithinValidContainer(e);return"Escape"!==e.key&&s?!t&&n?this._handleClickEvent(e):t?this.emit("select",r):this.emit("reset"):this.emit("reset")}}},{key:"_handleClickEvent",value:function(e){var t=Oc(e),r=t.pageX,n=t.pageY,s=t.clientX,o=t.clientY,a=(new Date).getTime();return this._lastClickData&&a-this._lastClickData.timestamp<250?(this._lastClickData=null,this.emit("doubleClick",{x:r,y:n,clientX:s,clientY:o})):(this._lastClickData={timestamp:a},this.emit("click",{x:r,y:n,clientX:s,clientY:o}))}},{key:"_handleMoveEvent",value:function(e){if(null!==this._initialEventData&&!this.isDetached){var t=this._initialEventData,r=t.x,n=t.y,s=Oc(e),o=s.pageX,a=s.pageY,i=Math.abs(r-o),l=Math.abs(n-a),c=Math.min(o,r),d=Math.min(a,n),u=this.selecting,p=this.isClick(o,a);(!p||u||i||l)&&(u||p||this.emit("selectStart",this._initialEventData),p||(this.selecting=!0,this._selectRect={top:d,left:c,x:o,y:a,right:c+i,bottom:d+l},this.emit("selecting",this._selectRect)),e.preventDefault())}}},{key:"_keyListener",value:function(e){this.ctrl=e.metaKey||e.ctrlKey}},{key:"isClick",value:function(e,t){var r=this._initialEventData,n=r.x,s=r.y;return!r.isTouch&&Math.abs(e-n)<=5&&Math.abs(t-s)<=5}}])}();function qc(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Dc(e),s=n.top,o=n.left,a=n.right,i=void 0===a?o:a,l=n.bottom,c=void 0===l?s:l,d=Dc(t),u=d.top,p=d.left,f=d.right,m=void 0===f?p:f,h=d.bottom;return!(c-r<u||s+r>(void 0===h?u:h)||i-r<p||o+r>m)}function Dc(e){if(!e.getBoundingClientRect)return e;var t=e.getBoundingClientRect(),r=t.left+Ic("left"),n=t.top+Ic("top");return{top:n,left:r,right:(e.offsetWidth||0)+r,bottom:(e.offsetHeight||0)+n}}function Ic(e){return"left"===e?window.pageXOffset||document.body.scrollLeft||0:"top"===e?window.pageYOffset||document.body.scrollTop||0:void 0}var Lc=function(e){function t(e,n){var s;return Hs(this,t),(s=Gs(this,t,[e,n])).state={selecting:!1},s.containerRef=(0,r.createRef)(),s}return Js(t,e),Vs(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable()}},{key:"componentDidUpdate",value:function(e){!e.selectable&&this.props.selectable&&this._selectable(),e.selectable&&!this.props.selectable&&this._teardownSelectable()}},{key:"render",value:function(){var e=this.props,t=e.range,r=e.getNow,s=e.getters,o=e.date,a=e.components.dateCellWrapper,i=e.localizer,l=this.state,c=l.selecting,d=l.startIdx,u=l.endIdx,p=r();return n().createElement("div",{className:"rbc-row-bg",ref:this.containerRef},t.map(function(e,r){var l=c&&r>=d&&r<=u,f=s.dayProp(e),m=f.className,h=f.style;return n().createElement(a,{key:r,value:e,range:t},n().createElement("div",{style:h,className:oo("rbc-day-bg",m,l&&"rbc-selected-cell",i.isSameDate(e,p)&&"rbc-today",o&&i.neq(o,e,"month")&&"rbc-off-range-bg")}))}))}},{key:"_selectable",value:function(){var e=this,t=this.containerRef.current,r=this._selector=new zc(this.props.container,{longPressThreshold:this.props.longPressThreshold}),n=function(r,n){if(!Pc(t,r)&&!function(e,t){return!!function(e,t){var r=t.clientX,n=t.clientY;return yl(document.elementFromPoint(r,n),".rbc-show-more",e)}(e,t)}(t,r)){var s=Dc(t),o=e.props,a=o.range,i=o.rtl;if(function(e,t){var r=t.x,n=t.y;return n>=e.top&&n<=e.bottom&&r>=e.left&&r<=e.right}(s,r)){var l=_c(s,r.x,i,a.length);e._selectSlot({startIdx:l,endIdx:l,action:n,box:r})}}e._initial={},e.setState({selecting:!1})};r.on("selecting",function(n){var s=e.props,o=s.range,a=s.rtl,i=-1,l=-1;if(e.state.selecting||(vc(e.props.onSelectStart,[n]),e._initial={x:n.x,y:n.y}),r.isSelected(t)){var c=Dc(t),d=function(e,t,r,n,s){var o=-1,a=-1,i=n-1,l=Cc(t,n),c=_c(t,r.x,s,n),d=t.top<r.y&&t.bottom>r.y,u=t.top<e.y&&t.bottom>e.y,p=e.y>t.bottom,f=t.top>e.y;return r.top<t.top&&r.bottom>t.bottom&&(o=0,a=i),d&&(f?(o=0,a=c):p&&(o=c,a=i)),u&&(o=a=s?i-Math.floor((e.x-t.left)/l):Math.floor((e.x-t.left)/l),d?c<o?o=c:a=c:e.y<r.y?a=i:o=0),{startIdx:o,endIdx:a}}(e._initial,c,n,o.length,a);i=d.startIdx,l=d.endIdx}e.setState({selecting:!0,startIdx:i,endIdx:l})}),r.on("beforeSelect",function(t){if("ignoreEvents"===e.props.selectable)return!Pc(e.containerRef.current,t)}),r.on("click",function(e){return n(e,"click")}),r.on("doubleClick",function(e){return n(e,"doubleClick")}),r.on("select",function(t){e._selectSlot(Fs(Fs({},e.state),{},{action:"select",bounds:t})),e._initial={},e.setState({selecting:!1}),vc(e.props.onSelectEnd,[e.state])})}},{key:"_teardownSelectable",value:function(){this._selector&&(this._selector.teardown(),this._selector=null)}},{key:"_selectSlot",value:function(e){var t=e.endIdx,r=e.startIdx,n=e.action,s=e.bounds,o=e.box;-1!==t&&-1!==r&&this.props.onSelectSlot&&this.props.onSelectSlot({start:r,end:t,action:n,bounds:s,box:o,resourceId:this.props.resourceId})}}])}(n().Component),Rc=(xo().object.isRequired,xo().object,xo().bool,xo().object.isRequired,xo().object.isRequired,xo().object.isRequired,xo().object.isRequired,xo().func,xo().func,xo().func,{segments:[],selected:{}}),$c=function(e,t){var r=e.selected;e.isAllDay;var s=e.accessors,o=e.getters,a=e.onSelect,i=e.onDoubleClick,l=e.onKeyPress,c=e.localizer,d=e.slotMetrics,u=e.components,p=e.resizable,f=d.continuesPrior(t),m=d.continuesAfter(t);return n().createElement(Nc,{event:t,getters:o,localizer:c,accessors:s,components:u,onSelect:a,onDoubleClick:i,onKeyPress:l,continuesPrior:f,continuesAfter:m,slotStart:d.first,slotEnd:d.last,selected:kc(t,r),resizable:p})},Bc=function(e,t,r){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ",o=Math.abs(t)/e*100+"%";return n().createElement("div",{key:r,className:"rbc-row-segment",style:{WebkitFlexBasis:o,flexBasis:o,maxWidth:o}},s)},Fc=function(e){function t(){return Hs(this,t),Gs(this,t,arguments)}return Js(t,e),Vs(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.segments,s=t.slotMetrics.slots,o=t.className,a=1;return n().createElement("div",{className:oo(o,"rbc-row")},r.reduce(function(t,r,n){var o=r.event,i=r.left,l=r.right,c=r.span,d="_lvl_"+n,u=i-a,p=$c(e.props,o);return u&&t.push(Bc(s,u,"".concat(d,"_gap"))),t.push(Bc(s,c,d,p)),a=l+1,t},[]))}}])}(n().Component);function Uc(e){var t=e.dateRange,r=e.unit,n=void 0===r?"day":r,s=e.localizer;return{first:t[0],last:s.add(t[t.length-1],1,n)}}function Wc(e){var t,r,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,o=[],a=[];for(t=0;t<e.length;t++){for(n=e[t],r=0;r<o.length&&Qc(n,o[r]);r++);r>=s?a.push(n):(o[r]||(o[r]=[])).push(n)}for(t=0;t<o.length;t++)o[t].sort(function(e,t){return e.left-t.left});return{levels:o,extra:a}}function Hc(e,t,r,n,s){var o={start:n.start(e),end:n.end(e)},a={start:t,end:r};return s.inEventRange({event:o,range:a})}function Qc(e,t){return t.some(function(t){return t.left<=e.right&&t.right>=e.left})}function Vc(e,t,r,n){var s={start:r.start(e),end:r.end(e),allDay:r.allDay(e)},o={start:r.start(t),end:r.end(t),allDay:r.allDay(t)};return n.sortEvents({evtA:s,evtB:o})}Fc.defaultProps=Fs({},Rc);var Yc=function(e,t){return e.left<=t&&e.right>=t},Kc=function(e,t){return e.filter(function(e){return Yc(e,t)}).map(function(e){return e.event})},Gc=function(e){function t(){return Hs(this,t),Gs(this,t,arguments)}return Js(t,e),Vs(t,[{key:"render",value:function(){for(var e=this.props,t=e.segments,r=e.slotMetrics.slots,s=Wc(t).levels[0],o=1,a=1,i=[];o<=r;){var l="_lvl_"+o,c=s.filter(function(e){return Yc(e,o)})[0]||{},d=c.event,u=c.left,p=c.right,f=c.span;if(d){var m=Math.max(0,u-a);if(this.canRenderSlotEvent(u,f)){var h=$c(this.props,d);m&&i.push(Bc(r,m,l+"_gap")),i.push(Bc(r,f,l,h)),a=o=p+1}else m&&i.push(Bc(r,m,l+"_gap")),i.push(Bc(r,1,l,this.renderShowMore(t,o))),a=o+=1}else{if(this.getHiddenEventsForSlot(t,o).length>0){var g=o-a;g&&i.push(Bc(r,g,l+"_gap")),i.push(Bc(r,1,l,this.renderShowMore(t,o))),a=o+=1;continue}o++}}return n().createElement("div",{className:"rbc-row"},i)}},{key:"getHiddenEventsForSlot",value:function(e,t){var r=Kc(e,t),n=Wc(e).levels[0].filter(function(e){return Yc(e,t)}).map(function(e){return e.event});return r.filter(function(e){return!n.some(function(t){return t===e})})}},{key:"canRenderSlotEvent",value:function(e,t){var r=this.props.segments;return wl()(e,e+t).every(function(e){return 1===Kc(r,e).length})}},{key:"renderShowMore",value:function(e,t){var r=this,s=this.props,o=s.localizer,a=s.slotMetrics,i=s.components,l=a.getEventsForSlot(t),c=Kc(e,t),d=c.length;if(null!=i&&i.showMore){var u=i.showMore,p=a.getDateForSlot(t-1);return!!d&&n().createElement(u,{localizer:o,slotDate:p,slot:t,count:d,events:l,remainingEvents:c})}return!!d&&n().createElement("button",{type:"button",key:"sm_"+t,className:oo("rbc-button-link","rbc-show-more"),onClick:function(e){return r.showMore(t,e)}},o.messages.showMore(d,c,l))}},{key:"showMore",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.props.onShowMore(e,t.target)}}])}(n().Component);Gc.defaultProps=Fs({},Rc);var Xc=function(e){var t=e.children;return n().createElement("div",{className:"rbc-row-content-scroll-container"},t)},Jc=function(e,t){return e[0].range===t[0].range&&e[0].events===t[0].events};function Zc(){return _l(function(e){for(var t=e.range,r=e.events,n=e.maxRows,s=e.minRows,o=e.accessors,a=e.localizer,i=Uc({dateRange:t,localizer:a}),l=i.first,c=i.last,d=r.map(function(e){return function(e,t,r,n){var s=Uc({dateRange:t,localizer:n}),o=s.first,a=s.last,i=n.diff(o,a,"day"),l=n.max(n.startOf(r.start(e),"day"),o),c=n.min(n.ceil(r.end(e),"day"),a),d=vl()(t,function(e){return n.isSameDate(e,l)}),u=n.diff(l,c,"day");return u=Math.min(u,i),{event:e,span:u=Math.max(u-n.segmentOffset,1),left:d+1,right:Math.max(d+u,1)}}(e,t,o,a)}),u=Wc(d,Math.max(n-1,1)),p=u.levels,f=u.extra,m=f.length>0?s-1:s;p.length<m;)p.push([]);return{first:l,last:c,levels:p,extra:f,range:t,slots:t.length,clone:function(t){return Zc()(Fs(Fs({},e),t))},getDateForSlot:function(e){return t[e]},getSlotForDate:function(e){return t.find(function(t){return a.isSameDate(t,e)})},getEventsForSlot:function(e){return d.filter(function(t){return function(e,t){return e.left<=t&&e.right>=t}(t,e)}).map(function(e){return e.event})},continuesPrior:function(e){return a.continuesPrior(o.start(e),l)},continuesAfter:function(e){var t=o.start(e),r=o.end(e);return a.continuesAfter(t,r,c)}}},Jc)}var ed=function(e){function t(){var e;Hs(this,t);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(e=Gs(this,t,[].concat(o))).handleSelectSlot=function(t){var r=e.props,n=r.range;(0,r.onSelectSlot)(n.slice(t.start,t.end+1),t)},e.handleShowMore=function(t,r){var n,s,o=e.props,a=o.range,i=o.onShowMore,l=e.slotMetrics(e.props),c=(n=e.containerRef.current,gl(n.querySelectorAll(".rbc-row-bg")))[0];c&&(s=c.children[t-1]),i(l.getEventsForSlot(t),a[t-1],s,t,r)},e.getContainer=function(){var t=e.props.container;return t?t():e.containerRef.current},e.renderHeadingCell=function(t,r){var n=e.props,s=n.renderHeader,o=n.getNow,a=n.localizer;return s({date:t,key:"header_".concat(r),className:oo("rbc-date-cell",a.isSameDate(t,o())&&"rbc-now")})},e.renderDummy=function(){var t=e.props,r=t.className,s=t.range,o=t.renderHeader,a=t.showAllEvents;return n().createElement("div",{className:r,ref:e.containerRef},n().createElement("div",{className:oo("rbc-row-content",a&&"rbc-row-content-scrollable")},o&&n().createElement("div",{className:"rbc-row",ref:e.headingRowRef},s.map(e.renderHeadingCell)),n().createElement("div",{className:"rbc-row",ref:e.eventRowRef},n().createElement("div",{className:"rbc-row-segment"},n().createElement("div",{className:"rbc-event"},n().createElement("div",{className:"rbc-event-content"},"Â "))))))},e.containerRef=(0,r.createRef)(),e.headingRowRef=(0,r.createRef)(),e.eventRowRef=(0,r.createRef)(),e.slotMetrics=Zc(),e}return Js(t,e),Vs(t,[{key:"getRowLimit",value:function(){var e,t=ml(this.eventRowRef.current),r=null!==(e=this.headingRowRef)&&void 0!==e&&e.current?ml(this.headingRowRef.current):0,n=ml(this.containerRef.current)-r;return Math.max(Math.floor(n/t),1)}},{key:"render",value:function(){var e=this.props,t=e.date,r=e.rtl,s=e.range,o=e.className,a=e.selected,i=e.selectable,l=e.renderForMeasure,c=e.accessors,d=e.getters,u=e.components,p=e.getNow,f=e.renderHeader,m=e.onSelect,h=e.localizer,g=e.onSelectStart,x=e.onSelectEnd,y=e.onDoubleClick,b=e.onKeyPress,v=e.resourceId,j=e.longPressThreshold,w=e.isAllDay,N=e.resizable,k=e.showAllEvents;if(l)return this.renderDummy();var C=this.slotMetrics(this.props),_=C.levels,S=C.extra,E=k?Xc:Fl,A=u.weekWrapper,M={selected:a,accessors:c,getters:d,localizer:h,components:u,onSelect:m,onDoubleClick:y,onKeyPress:b,resourceId:v,slotMetrics:C,resizable:N};return n().createElement("div",{className:o,role:"rowgroup",ref:this.containerRef},n().createElement(Lc,{localizer:h,date:t,getNow:p,rtl:r,range:s,selectable:i,container:this.getContainer,getters:d,onSelectStart:g,onSelectEnd:x,onSelectSlot:this.handleSelectSlot,components:u,longPressThreshold:j,resourceId:v}),n().createElement("div",{className:oo("rbc-row-content",k&&"rbc-row-content-scrollable"),role:"row"},f&&n().createElement("div",{className:"rbc-row ",ref:this.headingRowRef},s.map(this.renderHeadingCell)),n().createElement(E,null,n().createElement(A,Object.assign({isAllDay:w},M,{rtl:this.props.rtl}),_.map(function(e,t){return n().createElement(Fc,Object.assign({key:t,segments:e},M))}),!!S.length&&n().createElement(Gc,Object.assign({segments:S,onShowMore:this.handleShowMore},M))))))}}])}(n().Component);ed.defaultProps={minRows:0,maxRows:1/0};var td=function(e){var t=e.label;return n().createElement("span",{role:"columnheader","aria-sort":"none"},t)},rd=function(e){var t=e.label,r=e.drilldownView,s=e.onDrillDown;return r?n().createElement("button",{type:"button",className:"rbc-button-link",onClick:s},t):n().createElement("span",null,t)},nd=["date","className"],sd=function(e){function t(){var e;Hs(this,t);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(e=Gs(this,t,[].concat(o))).getContainer=function(){return e.containerRef.current},e.renderWeek=function(t,r){var s=e.props,o=s.events,a=s.components,i=s.selectable,l=s.getNow,c=s.selected,d=s.date,u=s.localizer,p=s.longPressThreshold,f=s.accessors,m=s.getters,h=s.showAllEvents,g=e.state,x=g.needLimitMeasure,y=g.rowLimit,b=function(e,t,r,n,s){return e.filter(function(e){return Hc(e,t,r,n,s)})}(oa(o),t[0],t[t.length-1],f,u),v=function(e,t,r){var n=oa(e),s=[],o=[];n.forEach(function(e){var n=t.start(e),a=t.end(e);r.daySpan(n,a)>1?s.push(e):o.push(e)});var a=s.sort(function(e,n){return Vc(e,n,t,r)}),i=o.sort(function(e,n){return Vc(e,n,t,r)});return[].concat(oa(a),oa(i))}(b,f,u);return n().createElement(ed,{key:r,ref:0===r?e.slotRowRef:void 0,container:e.getContainer,className:"rbc-month-row",getNow:l,date:d,range:t,events:v,maxRows:h?1/0:y,selected:c,selectable:i,components:a,accessors:f,getters:m,localizer:u,renderHeader:e.readerDateHeading,renderForMeasure:x,onShowMore:e.handleShowMore,onSelect:e.handleSelectEvent,onDoubleClick:e.handleDoubleClickEvent,onKeyPress:e.handleKeyPressEvent,onSelectSlot:e.handleSelectSlot,longPressThreshold:p,rtl:e.props.rtl,resizable:e.props.resizable,showAllEvents:h})},e.readerDateHeading=function(t){var r=t.date,s=t.className,o=Ws(t,nd),a=e.props,i=a.date,l=a.getDrilldownView,c=a.localizer,d=c.neq(i,r,"month"),u=c.isSameDate(r,i),p=l(r),f=c.format(r,"dateFormat"),m=e.props.components.dateHeader||rd;return n().createElement("div",Object.assign({},o,{className:oo(s,d&&"rbc-off-range",u&&"rbc-current"),role:"cell"}),n().createElement(m,{label:f,date:r,drilldownView:p,isOffRange:d,onDrillDown:function(t){return e.handleHeadingClick(r,p,t)}}))},e.handleSelectSlot=function(t,r){e._pendingSelection=e._pendingSelection.concat(t),clearTimeout(e._selectTimer),e._selectTimer=setTimeout(function(){return e.selectDates(r)})},e.handleHeadingClick=function(t,r,n){n.preventDefault(),e.clearSelection(),vc(e.props.onDrillDown,[t,r])},e.handleSelectEvent=function(){e.clearSelection();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onSelectEvent,r)},e.handleDoubleClickEvent=function(){e.clearSelection();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onDoubleClickEvent,r)},e.handleKeyPressEvent=function(){e.clearSelection();for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onKeyPressEvent,r)},e.handleShowMore=function(t,r,n,s,o){var a=e.props,i=a.popup,l=a.onDrillDown,c=a.onShowMore,d=a.getDrilldownView,u=a.doShowMoreDrillDown;if(e.clearSelection(),i){var p=ja(n,e.containerRef.current);e.setState({overlay:{date:r,events:t,position:p,target:o}})}else u&&vc(l,[r,d(r)||Vl.DAY]);vc(c,[t,r,s])},e.overlayDisplay=function(){e.setState({overlay:null})},e.state={rowLimit:5,needLimitMeasure:!0,date:null},e.containerRef=(0,r.createRef)(),e.slotRowRef=(0,r.createRef)(),e._bgRows=[],e._pendingSelection=[],e}return Js(t,e),Vs(t,[{key:"componentDidMount",value:function(){var e,t=this;this.state.needLimitMeasure&&this.measureRowLimit(this.props),window.addEventListener("resize",this._resizeListener=function(){e||Ea(function(){e=!1,t.setState({needLimitMeasure:!0})})},!1)}},{key:"componentDidUpdate",value:function(){this.state.needLimitMeasure&&this.measureRowLimit(this.props)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._resizeListener,!1)}},{key:"render",value:function(){var e=this.props,t=e.date,r=e.localizer,s=e.className,o=r.visibleDays(t,r),a=ia()(o,7);return this._weekCount=a.length,n().createElement("div",{className:oo("rbc-month-view",s),role:"table","aria-label":"Month View",ref:this.containerRef},n().createElement("div",{className:"rbc-row rbc-month-header",role:"row"},this.renderHeaders(a[0])),a.map(this.renderWeek),this.props.popup&&this.renderOverlay())}},{key:"renderHeaders",value:function(e){var t=this.props,r=t.localizer,s=t.components,o=e[0],a=e[e.length-1],i=s.header||td;return r.range(o,a,"day").map(function(e,t){return n().createElement("div",{key:"header_"+t,className:"rbc-header"},n().createElement(i,{date:e,localizer:r,label:r.format(e,"weekdayFormat")}))})}},{key:"renderOverlay",value:function(){var e,t,r=this,s=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},o=this.props,a=o.accessors,i=o.localizer,l=o.components,c=o.getters,d=o.selected,u=o.popupOffset,p=o.handleDragStart;return n().createElement(Mc,{overlay:s,accessors:a,localizer:i,components:l,getters:c,selected:d,popupOffset:u,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:p,show:!!s.position,overlayDisplay:this.overlayDisplay,onHide:function(){return r.setState({overlay:null})}})}},{key:"measureRowLimit",value:function(){this.setState({needLimitMeasure:!1,rowLimit:this.slotRowRef.current.getRowLimit()})}},{key:"selectDates",value:function(e){var t=this._pendingSelection.slice();this._pendingSelection=[],t.sort(function(e,t){return+e-+t});var r=new Date(t[0]),n=new Date(t[t.length-1]);n.setDate(t[t.length-1].getDate()+1),vc(this.props.onSelectSlot,{slots:t,start:r,end:n,action:e.action,bounds:e.bounds,box:e.box})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.date;return{date:r,needLimitMeasure:e.localizer.neq(r,t.date,"month")}}}])}(n().Component);sd.range=function(e,t){var r=t.localizer;return{start:r.firstVisibleDay(e,r),end:r.lastVisibleDay(e,r)}},sd.navigate=function(e,t,r){var n=r.localizer;switch(t){case Ul:return n.add(e,-1,"month");case Wl:return n.add(e,1,"month");default:return e}},sd.title=function(e,t){return t.localizer.format(e,"monthHeaderFormat")};var od=function(e){var t=e.min,r=e.max,n=e.step,s=e.slots,o=e.localizer;return"".concat(+o.startOf(t,"minutes"))+"".concat(+o.startOf(r,"minutes"))+"".concat(n,"-").concat(s)};function ad(e){for(var t=e.min,r=e.max,n=e.step,s=e.timeslots,o=e.localizer,a=od({start:t,end:r,step:n,timeslots:s,localizer:o}),i=1+o.getTotalMin(t,r),l=o.getMinutesFromMidnight(t),c=Math.ceil((i-1)/(n*s)),d=c*s,u=new Array(c),p=new Array(d),f=0;f<c;f++){u[f]=new Array(s);for(var m=0;m<s;m++){var h=f*s+m,g=h*n;p[h]=u[f][m]=o.getSlotDate(t,l,g)}}var x=p.length*n;function y(e){var r=o.diff(t,e,"minutes")+o.getDstOffset(t,e);return Math.min(r,i)}return p.push(o.getSlotDate(t,l,x)),{groups:u,update:function(e){return od(e)!==a?ad(e):this},dateIsInGroup:function(e,t){var n=u[t+1];return o.inRange(e,u[t][0],n?n[0]:r,"minutes")},nextSlot:function(e){var t=p[Math.min(p.findIndex(function(t){return t===e||o.eq(t,e)})+1,p.length-1)];return o.eq(t,e)&&(t=o.add(e,n,"minutes")),t},closestSlotToPosition:function(e){var t=Math.min(p.length-1,Math.max(0,Math.floor(e*d)));return p[t]},closestSlotFromPoint:function(e,t){var r=Math.abs(t.top-t.bottom);return this.closestSlotToPosition((e.y-t.top)/r)},closestSlotFromDate:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(o.lt(e,t,"minutes"))return p[0];if(o.gt(e,r,"minutes"))return p[p.length-1];var a=o.diff(t,e,"minutes");return p[(a-a%n)/n+s]},startsBeforeDay:function(e){return o.lt(e,t,"day")},startsAfterDay:function(e){return o.gt(e,r,"day")},startsBefore:function(e){return o.lt(o.merge(t,e),t,"minutes")},startsAfter:function(e){return o.gt(o.merge(r,e),r,"minutes")},getRange:function(e,s,a,i){a||(e=o.min(r,o.max(t,e))),i||(s=o.min(r,o.max(t,s)));var l=y(e),c=y(s),u=c>n*d&&!o.eq(r,s)?(l-n)/(n*d)*100:l/(n*d)*100;return{top:u,height:c/(n*d)*100-u,start:y(e),startDate:e,end:y(s),endDate:s}},getCurrentTimePosition:function(e){return y(e)/(n*d)*100}}}var id=function(){return Vs(function e(t,r){var n=r.accessors,s=r.slotMetrics;Hs(this,e);var o=s.getRange(n.start(t),n.end(t)),a=o.start,i=o.startDate,l=o.end,c=o.endDate,d=o.top,u=o.height;this.start=a,this.end=l,this.startMs=+i,this.endMs=+c,this.top=d,this.height=u,this.data=t},[{key:"_width",get:function(){if(this.rows){var e=this.rows.reduce(function(e,t){return Math.max(e,t.leaves.length+1)},0)+1;return 100/e}return this.leaves?(100-this.container._width)/(this.leaves.length+1):this.row._width}},{key:"width",get:function(){var e=this._width,t=Math.min(100,1.7*this._width);if(this.rows)return t;if(this.leaves)return this.leaves.length>0?t:e;var r=this.row.leaves;return r.indexOf(this)===r.length-1?e:t}},{key:"xOffset",get:function(){if(this.rows)return 0;if(this.leaves)return this.container._width;var e=this.row,t=e.leaves,r=e.xOffset,n=e._width;return r+(t.indexOf(this)+1)*n}}])}();function ld(e,t,r){return Math.abs(t.start-e.start)<r||t.start>e.start&&t.start<e.end}function cd(e){for(var t=e.events,r=e.minimumStartDifference,n=e.slotMetrics,s=e.accessors,o=function(e){for(var t=Ml()(e,["startMs",function(e){return-e.endMs}]),r=[];t.length>0;){var n=t.shift();r.push(n);for(var s=0;s<t.length;s++){var o=t[s];if(!(n.endMs>o.startMs)){if(s>0){var a=t.splice(s,1)[0];r.push(a)}break}}}return r}(t.map(function(e){return new id(e,{slotMetrics:n,accessors:s})})),a=[],i=function(){var e=o[l],t=a.find(function(t){return t.end>e.start||Math.abs(e.start-t.start)<r});if(!t)return e.rows=[],a.push(e),1;e.container=t;for(var n=null,s=t.rows.length-1;!n&&s>=0;s--)ld(t.rows[s],e,r)&&(n=t.rows[s]);n?(n.leaves.push(e),e.row=n):(e.leaves=[],t.rows.push(e))},l=0;l<o.length;l++)i();return o.map(function(e){return{event:e.data,style:{top:e.top,height:e.height,width:e.width,xOffset:Math.max(0,e.xOffset)}}})}function dd(e,t,r){for(var n=0;n<e.friends.length;++n)if(!(r.indexOf(e.friends[n])>-1)){t=t>e.friends[n].idx?t:e.friends[n].idx,r.push(e.friends[n]);var s=dd(e.friends[n],t,r);t=t>s?t:s}return t}var ud={overlap:cd,"no-overlap":function(e){var t=cd({events:e.events,minimumStartDifference:e.minimumStartDifference,slotMetrics:e.slotMetrics,accessors:e.accessors});t.sort(function(e,t){return e=e.style,t=t.style,e.top!==t.top?e.top>t.top?1:-1:e.height!==t.height?e.top+e.height<t.top+t.height?1:-1:0});for(var r=0;r<t.length;++r)t[r].friends=[],delete t[r].style.left,delete t[r].style.left,delete t[r].idx,delete t[r].size;for(var n=0;n<t.length-1;++n)for(var s=t[n],o=s.style.top,a=s.style.top+s.style.height,i=n+1;i<t.length;++i){var l=t[i],c=l.style.top,d=l.style.top+l.style.height;(c>=o&&d<=a||d>o&&d<=a||c>=o&&c<a)&&(s.friends.push(l),l.friends.push(s))}for(var u=0;u<t.length;++u){for(var p=t[u],f=[],m=0;m<100;++m)f.push(1);for(var h=0;h<p.friends.length;++h)void 0!==p.friends[h].idx&&(f[p.friends[h].idx]=0);p.idx=f.indexOf(1)}for(var g=0;g<t.length;++g){var x;if(!t[g].size){var y=[];x=100/(dd(t[g],0,y)+1),t[g].size=x;for(var b=0;b<y.length;++b)y[b].size=x}}for(var v=0;v<t.length;++v){var j=t[v];j.style.left=j.idx*j.size;for(var w=0,N=0;N<j.friends.length;++N){var k=j.friends[N].idx;w=w>k?w:k}w<=j.idx&&(j.size=100-j.idx*j.size);var C=0===j.idx?0:3;j.style.width="calc(".concat(j.size,"% - ").concat(C,"px)"),j.style.height="calc(".concat(j.style.height,"% - 2px)"),j.style.xOffset="calc(".concat(j.style.left,"% + ").concat(C,"px)")}return t}},pd=function(e){function t(){return Hs(this,t),Gs(this,t,arguments)}return Js(t,e),Vs(t,[{key:"render",value:function(){var e=this.props,t=e.renderSlot,r=e.resource,s=e.group,o=e.getters,a=e.components,i=(void 0===a?{}:a).timeSlotWrapper,l=void 0===i?Fl:i,c=o?o.slotGroupProp(s):{};return n().createElement("div",Object.assign({className:"rbc-timeslot-group"},c),s.map(function(e,s){var a=o?o.slotProp(e,r):{};return n().createElement(l,{key:s,value:e,resource:r},n().createElement("div",Object.assign({},a,{className:oo("rbc-time-slot",a.className)}),t&&t(e,s)))}))}}])}(r.Component);function fd(e){return"string"==typeof e?e:e+"%"}function md(e){var t=e.style,r=e.className,s=e.event,o=e.accessors,a=e.rtl,i=e.selected,l=e.label,c=e.continuesPrior,d=e.continuesAfter,u=e.getters,p=e.onClick,f=e.onDoubleClick,m=e.isBackgroundEvent,h=e.onKeyPress,g=e.components,x=g.event,y=g.eventWrapper,b=o.title(s),v=o.tooltip(s),j=o.end(s),w=o.start(s),N=u.eventProp(s,w,j,i),k=[n().createElement("div",{key:"1",className:"rbc-event-label"},l),n().createElement("div",{key:"2",className:"rbc-event-content"},x?n().createElement(x,{event:s,title:b}):b)],C=t.height,_=t.top,S=t.width,E=t.xOffset,A=Fs(Fs({},N.style),{},$s({top:fd(_),height:fd(C),width:fd(S)},a?"right":"left",fd(E)));return n().createElement(y,Object.assign({type:"time"},e),n().createElement("div",{role:"button",tabIndex:0,onClick:p,onDoubleClick:f,style:A,onKeyDown:h,title:v?("string"==typeof l?l+": ":"")+v:void 0,className:oo(m?"rbc-background-event":"rbc-event",r,N.className,{"rbc-selected":i,"rbc-event-continues-earlier":c,"rbc-event-continues-later":d})},k))}var hd=function(e){var t=e.children,r=e.className,s=e.style,o=e.innerRef;return n().createElement("div",{className:r,style:s,ref:o},t)},gd=n().forwardRef(function(e,t){return n().createElement(hd,Object.assign({},e,{innerRef:t}))}),xd=["dayProp"],yd=["eventContainerWrapper","timeIndicatorWrapper"],bd=function(e){function t(){var e;Hs(this,t);for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return(e=Gs(this,t,[].concat(o))).state={selecting:!1,timeIndicatorPosition:null},e.intervalTriggered=!1,e.renderEvents=function(t){var r=t.events,s=t.isBackgroundEvent,o=e.props,a=o.rtl,i=o.selected,l=o.accessors,c=o.localizer,d=o.getters,u=o.components,p=o.step,f=o.timeslots,m=o.dayLayoutAlgorithm,h=o.resizable,g=e.slotMetrics,x=c.messages,y=function(e){e.events,e.minimumStartDifference,e.slotMetrics,e.accessors;var t=e.dayLayoutAlgorithm,r=t;return t in ud&&(r=ud[t]),function(e){return!!(e&&e.constructor&&e.call&&e.apply)}(r)?r.apply(this,arguments):[]}({events:r,accessors:l,slotMetrics:g,minimumStartDifference:Math.ceil(p*f/2),dayLayoutAlgorithm:m});return y.map(function(t,r){var o,p,f=t.event,m=t.style,y=l.end(f),b=l.start(f),v=null!==(o=l.eventId(f))&&void 0!==o?o:"evt_"+r,j="eventTimeRangeFormat",w=g.startsBeforeDay(b),N=g.startsAfterDay(y);w?j="eventTimeRangeEndFormat":N&&(j="eventTimeRangeStartFormat"),p=w&&N?x.allDay:c.format({start:b,end:y},j);var k=w||g.startsBefore(b),C=N||g.startsAfter(y);return n().createElement(md,{style:m,event:f,label:p,key:v,getters:d,rtl:a,components:u,continuesPrior:k,continuesAfter:C,accessors:l,resource:e.props.resource,selected:kc(f,i),onClick:function(t){return e._select(Fs(Fs(Fs({},f),e.props.resource&&{sourceResource:e.props.resource}),s&&{isBackgroundEvent:!0}),t)},onDoubleClick:function(t){return e._doubleClick(f,t)},isBackgroundEvent:s,onKeyPress:function(t){return e._keyPress(f,t)},resizable:h})})},e._selectable=function(){var t=e.containerRef.current,r=e.props,n=r.longPressThreshold,s=r.localizer,o=e._selector=new zc(function(){return t},{longPressThreshold:n}),a=function(t){var r=e.props.onSelecting,n=e.state||{},o=i(t),a=o.startDate,l=o.endDate;r&&(s.eq(n.startDate,a,"minutes")&&s.eq(n.endDate,l,"minutes")||!1===r({start:a,end:l,resourceId:e.props.resource}))||e.state.start===o.start&&e.state.end===o.end&&e.state.selecting===o.selecting||e.setState(o)},i=function(r){var n=e.slotMetrics.closestSlotFromPoint(r,Dc(t));e.state.selecting||(e._initialSlot=n);var o=e._initialSlot;s.lte(o,n)?n=e.slotMetrics.nextSlot(n):s.gt(o,n)&&(o=e.slotMetrics.nextSlot(o));var a=e.slotMetrics.getRange(s.min(o,n),s.max(o,n));return Fs(Fs({},a),{},{selecting:!0,top:"".concat(a.top,"%"),height:"".concat(a.height,"%")})},l=function(t,r){if(!Pc(e.containerRef.current,t)){var n=i(t),s=n.startDate,o=n.endDate;e._selectSlot({startDate:s,endDate:o,action:r,box:t})}e.setState({selecting:!1})};o.on("selecting",a),o.on("selectStart",a),o.on("beforeSelect",function(t){if("ignoreEvents"===e.props.selectable)return!Pc(e.containerRef.current,t)}),o.on("click",function(e){return l(e,"click")}),o.on("doubleClick",function(e){return l(e,"doubleClick")}),o.on("select",function(t){e.state.selecting&&(e._selectSlot(Fs(Fs({},e.state),{},{action:"select",bounds:t})),e.setState({selecting:!1}))}),o.on("reset",function(){e.state.selecting&&e.setState({selecting:!1})})},e._teardownSelectable=function(){e._selector&&(e._selector.teardown(),e._selector=null)},e._selectSlot=function(t){for(var r=t.startDate,n=t.endDate,s=t.action,o=t.bounds,a=t.box,i=r,l=[];e.props.localizer.lte(i,n);)l.push(i),i=new Date(+i+60*e.props.step*1e3);vc(e.props.onSelectSlot,{slots:l,start:r,end:n,resourceId:e.props.resource,action:s,bounds:o,box:a})},e._select=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onSelectEvent,r)},e._doubleClick=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onDoubleClickEvent,r)},e._keyPress=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onKeyPressEvent,r)},e.slotMetrics=ad(e.props),e.containerRef=(0,r.createRef)(),e}return Js(t,e),Vs(t,[{key:"componentDidMount",value:function(){this.props.selectable&&this._selectable(),this.props.isNow&&this.setTimeIndicatorPositionUpdateInterval()}},{key:"componentWillUnmount",value:function(){this._teardownSelectable(),this.clearTimeIndicatorInterval()}},{key:"componentDidUpdate",value:function(e,t){this.props.selectable&&!e.selectable&&this._selectable(),!this.props.selectable&&e.selectable&&this._teardownSelectable();var r=this.props,n=r.getNow,s=r.isNow,o=r.localizer,a=r.date,i=r.min,l=r.max,c=o.neq(e.getNow(),n(),"minutes");if(e.isNow!==s||c){if(this.clearTimeIndicatorInterval(),s){var d=!c&&o.eq(e.date,a,"minutes")&&t.timeIndicatorPosition===this.state.timeIndicatorPosition;this.setTimeIndicatorPositionUpdateInterval(d)}}else s&&(o.neq(e.min,i,"minutes")||o.neq(e.max,l,"minutes"))&&this.positionTimeIndicator()}},{key:"setTimeIndicatorPositionUpdateInterval",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.intervalTriggered||t||this.positionTimeIndicator(),this._timeIndicatorTimeout=window.setTimeout(function(){e.intervalTriggered=!0,e.positionTimeIndicator(),e.setTimeIndicatorPositionUpdateInterval()},6e4)}},{key:"clearTimeIndicatorInterval",value:function(){this.intervalTriggered=!1,window.clearTimeout(this._timeIndicatorTimeout)}},{key:"positionTimeIndicator",value:function(){var e=this.props,t=e.min,r=e.max,n=(0,e.getNow)();if(n>=t&&n<=r){var s=this.slotMetrics.getCurrentTimePosition(n);this.intervalTriggered=!0,this.setState({timeIndicatorPosition:s})}else this.clearTimeIndicatorInterval()}},{key:"render",value:function(){var e=this.props,t=e.date,r=e.max,s=e.rtl,o=e.isNow,a=e.resource,i=e.accessors,l=e.localizer,c=e.getters,d=c.dayProp,u=Ws(c,xd),p=e.components,f=p.eventContainerWrapper,m=p.timeIndicatorWrapper,h=Ws(p,yd);this.slotMetrics=this.slotMetrics.update(this.props);var g=this.slotMetrics,x=this.state,y=x.selecting,b=x.top,v=x.height,j={start:x.startDate,end:x.endDate},w=d(r,a),N=w.className,k=w.style,C={className:"rbc-current-time-indicator",style:{top:"".concat(this.state.timeIndicatorPosition,"%")}},_=h.dayColumnWrapper||gd;return n().createElement(_,{ref:this.containerRef,date:t,style:k,className:oo(N,"rbc-day-slot","rbc-time-column",o&&"rbc-now",o&&"rbc-today",y&&"rbc-slot-selecting"),slotMetrics:g,resource:a},g.groups.map(function(e,t){return n().createElement(pd,{key:t,group:e,resource:a,getters:u,components:h})}),n().createElement(f,{localizer:l,resource:a,accessors:i,getters:u,components:h,slotMetrics:g},n().createElement("div",{className:oo("rbc-events-container",s&&"rtl")},this.renderEvents({events:this.props.backgroundEvents,isBackgroundEvent:!0}),this.renderEvents({events:this.props.events}))),y&&n().createElement("div",{className:"rbc-slot-selection",style:{top:b,height:v}},n().createElement("span",null,l.format(j,"selectRangeFormat"))),o&&this.intervalTriggered&&n().createElement(m,C,n().createElement("div",C)))}}])}(n().Component);bd.defaultProps={dragThroughEvents:!0,timeslots:2};var vd=function(e){var t=e.label;return n().createElement(n().Fragment,null,t)},jd=function(e){function t(){var e;Hs(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(e=Gs(this,t,[].concat(s))).handleHeaderClick=function(t,r,n){n.preventDefault(),vc(e.props.onDrillDown,[t,r])},e.renderRow=function(t){var r=e.props,s=r.events,o=r.rtl,a=r.selectable,i=r.getNow,l=r.range,c=r.getters,d=r.localizer,u=r.accessors,p=r.components,f=r.resizable,m=u.resourceId(t),h=t?s.filter(function(e){return u.resource(e)===m}):s;return n().createElement(ed,{isAllDay:!0,rtl:o,getNow:i,minRows:2,maxRows:e.props.allDayMaxRows+1,range:l,events:h,resourceId:m,className:"rbc-allday-cell",selectable:a,selected:e.props.selected,components:p,accessors:u,getters:c,localizer:d,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyPress:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:f})},e}return Js(t,e),Vs(t,[{key:"renderHeaderCells",value:function(e){var t=this,r=this.props,s=r.localizer,o=r.getDrilldownView,a=r.getNow,i=r.getters.dayProp,l=r.components.header,c=void 0===l?td:l,d=a();return e.map(function(e,r){var a=o(e),l=s.format(e,"dayFormat"),u=i(e),p=u.className,f=u.style,m=n().createElement(c,{date:e,label:l,localizer:s});return n().createElement("div",{key:r,style:f,className:oo("rbc-header",p,s.isSameDate(e,d)&&"rbc-today")},a?n().createElement("button",{type:"button",className:"rbc-button-link",onClick:function(r){return t.handleHeaderClick(e,a,r)}},m):n().createElement("span",null,m))})}},{key:"render",value:function(){var e=this,t=this.props,r=t.width,s=t.rtl,o=t.resources,a=t.range,i=t.events,l=t.getNow,c=t.accessors,d=t.selectable,u=t.components,p=t.getters,f=t.scrollRef,m=t.localizer,h=t.isOverflowing,g=t.components,x=g.timeGutterHeader,y=g.resourceHeader,b=void 0===y?vd:y,v=t.resizable,j={};h&&(j[s?"marginLeft":"marginRight"]="".concat(Tl()-1,"px"));var w=o.groupEvents(i);return n().createElement("div",{style:j,ref:f,className:oo("rbc-time-header",h&&"rbc-overflowing")},n().createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:r,minWidth:r,maxWidth:r}},x&&n().createElement(x,null)),o.map(function(t,r){var o=no(t,2),i=o[0],f=o[1];return n().createElement("div",{className:"rbc-time-header-content",key:i||r},f&&n().createElement("div",{className:"rbc-row rbc-row-resource",key:"resource_".concat(r)},n().createElement("div",{className:"rbc-header"},n().createElement(b,{index:r,label:c.resourceTitle(f),resource:f}))),n().createElement("div",{className:"rbc-row rbc-time-header-cell".concat(a.length<=1?" rbc-time-header-cell-single-day":"")},e.renderHeaderCells(a)),n().createElement(ed,{isAllDay:!0,rtl:s,getNow:l,minRows:2,maxRows:e.props.allDayMaxRows+1,range:a,events:w.get(i)||[],resourceId:f&&i,className:"rbc-allday-cell",selectable:d,selected:e.props.selected,components:u,accessors:c,getters:p,localizer:m,onSelect:e.props.onSelectEvent,onShowMore:e.props.onShowMore,onDoubleClick:e.props.onDoubleClickEvent,onKeyDown:e.props.onKeyPressEvent,onSelectSlot:e.props.onSelectSlot,longPressThreshold:e.props.longPressThreshold,resizable:v}))}))}}])}(n().Component),wd=function(e){function t(){var e;Hs(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=Gs(this,t,[].concat(n))).handleHeaderClick=function(t,r,n){n.preventDefault(),vc(e.props.onDrillDown,[t,r])},e}return Js(t,e),Vs(t,[{key:"renderHeaderCells",value:function(e){var t=this,r=this.props,s=r.localizer,o=r.getDrilldownView,a=r.getNow,i=r.getters.dayProp,l=r.components,c=l.header,d=void 0===c?td:c,u=l.resourceHeader,p=void 0===u?vd:u,f=r.resources,m=r.accessors,h=r.events,g=r.rtl,x=r.selectable,y=r.components,b=r.getters,v=r.resizable,j=a(),w=f.groupEvents(h);return e.map(function(r,l){var c=o(r),u=s.format(r,"dayFormat"),h=i(r),N=h.className,k=h.style,C=n().createElement(d,{date:r,label:u,localizer:s});return n().createElement("div",{key:l,className:"rbc-time-header-content rbc-resource-grouping"},n().createElement("div",{className:"rbc-row rbc-time-header-cell".concat(e.length<=1?" rbc-time-header-cell-single-day":"")},n().createElement("div",{style:k,className:oo("rbc-header",N,s.isSameDate(r,j)&&"rbc-today")},c?n().createElement("button",{type:"button",className:"rbc-button-link",onClick:function(e){return t.handleHeaderClick(r,c,e)}},C):n().createElement("span",null,C))),n().createElement("div",{className:"rbc-row"},f.map(function(e,t){var o=no(e,2),a=o[0],i=o[1];return n().createElement("div",{key:"resource_".concat(a,"_").concat(t),className:oo("rbc-header",N,s.isSameDate(r,j)&&"rbc-today")},n().createElement(p,{index:t,label:m.resourceTitle(i),resource:i}))})),n().createElement("div",{className:"rbc-row rbc-m-b-negative-3 rbc-h-full"},f.map(function(e,o){var i=no(e,2),l=i[0],c=i[1],d=(w.get(l)||[]).filter(function(e){return s.isSameDate(e.start,r)||s.isSameDate(e.end,r)});return n().createElement(ed,{key:"resource_".concat(l,"_").concat(o),isAllDay:!0,rtl:g,getNow:a,minRows:2,maxRows:t.props.allDayMaxRows+1,range:[r],events:d,resourceId:c&&l,className:"rbc-allday-cell",selectable:x,selected:t.props.selected,components:y,accessors:m,getters:b,localizer:s,onSelect:t.props.onSelectEvent,onShowMore:t.props.onShowMore,onDoubleClick:t.props.onDoubleClickEvent,onKeyDown:t.props.onKeyPressEvent,onSelectSlot:t.props.onSelectSlot,longPressThreshold:t.props.longPressThreshold,resizable:v})})))})}},{key:"render",value:function(){var e=this.props,t=e.width,r=e.rtl,s=e.range,o=e.scrollRef,a=e.isOverflowing,i=e.components.timeGutterHeader,l={};return a&&(l[r?"marginLeft":"marginRight"]="".concat(Tl()-1,"px")),n().createElement("div",{style:l,ref:o,className:oo("rbc-time-header",a&&"rbc-overflowing")},n().createElement("div",{className:"rbc-label rbc-time-header-gutter",style:{width:t,minWidth:t,maxWidth:t}},i&&n().createElement(i,null)),this.renderHeaderCells(s))}}])}(n().Component),Nd=function(e){var t=e.min,s=e.max,o=e.timeslots,a=e.step,i=e.localizer,l=e.getNow,c=e.resource,d=e.components,u=e.getters,p=e.gutterRef,f=d.timeGutterWrapper,m=(0,r.useMemo)(function(){return function(e){var t=e.min,r=e.max,n=e.localizer;return n.getTimezoneOffset(t)!==n.getTimezoneOffset(r)?{start:n.add(t,-1,"day"),end:n.add(r,-1,"day")}:{start:t,end:r}}({min:t,max:s,localizer:i})},[null==t?void 0:t.toISOString(),null==s?void 0:s.toISOString(),i]),h=m.start,g=m.end,x=no((0,r.useState)(ad({min:h,max:g,timeslots:o,step:a,localizer:i})),2),y=x[0],b=x[1];(0,r.useEffect)(function(){y&&b(y.update({min:h,max:g,timeslots:o,step:a,localizer:i}))},[null==h?void 0:h.toISOString(),null==g?void 0:g.toISOString(),o,a]);var v=(0,r.useCallback)(function(e,t){if(t)return null;var r=y.dateIsInGroup(l(),t);return n().createElement("span",{className:oo("rbc-label",r&&"rbc-now")},i.format(e,"timeGutterFormat"))},[y,i,l]);return n().createElement(f,{slotMetrics:y},n().createElement("div",{className:"rbc-time-gutter rbc-time-column",ref:p},y.groups.map(function(e,t){return n().createElement(pd,{key:t,group:e,resource:c,components:d,renderSlot:v,getters:u})})))},kd=n().forwardRef(function(e,t){return n().createElement(Nd,Object.assign({gutterRef:t},e))}),Cd={},_d=function(e){function t(e){var s;return Hs(this,t),(s=Gs(this,t,[e])).handleScroll=function(e){s.scrollRef.current&&(s.scrollRef.current.scrollLeft=e.target.scrollLeft)},s.handleResize=function(){Sa(s.rafHandle),s.rafHandle=Ea(s.checkOverflow)},s.handleKeyPressEvent=function(){s.clearSelection();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];vc(s.props.onKeyPressEvent,t)},s.handleSelectEvent=function(){s.clearSelection();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];vc(s.props.onSelectEvent,t)},s.handleDoubleClickEvent=function(){s.clearSelection();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];vc(s.props.onDoubleClickEvent,t)},s.handleShowMore=function(e,t,r,n,o){var a=s.props,i=a.popup,l=a.onDrillDown,c=a.onShowMore,d=a.getDrilldownView,u=a.doShowMoreDrillDown;if(s.clearSelection(),i){var p=ja(r,s.containerRef.current);s.setState({overlay:{date:t,events:e,position:Fs(Fs({},p),{},{width:"200px"}),target:o}})}else u&&vc(l,[t,d(t)||Vl.DAY]);vc(c,[e,t,n])},s.handleSelectAllDaySlot=function(e,t){var r=s.props.onSelectSlot,n=new Date(e[0]),o=new Date(e[e.length-1]);o.setDate(e[e.length-1].getDate()+1),vc(r,{slots:e,start:n,end:o,action:t.action,resourceId:t.resourceId})},s.overlayDisplay=function(){s.setState({overlay:null})},s.checkOverflow=function(){if(!s._updatingOverflow){var e=s.contentRef.current;if(null!=e&&e.scrollHeight){var t=e.scrollHeight>e.clientHeight;s.state.isOverflowing!==t&&(s._updatingOverflow=!0,s.setState({isOverflowing:t},function(){s._updatingOverflow=!1}))}}},s.memoizedResources=_l(function(e,t){return function(e,t){return{map:function(r){return e?e.map(function(e,n){return r([t.resourceId(e),e],n)}):[r([Cd,null],0)]},groupEvents:function(r){var n=new Map;return e?(r.forEach(function(e){var r=t.resource(e)||Cd;if(Array.isArray(r))r.forEach(function(t){var r=n.get(t)||[];r.push(e),n.set(t,r)});else{var s=n.get(r)||[];s.push(e),n.set(r,s)}}),n):(n.set(Cd,r),n)}}}(e,t)}),s.state={gutterWidth:void 0,isOverflowing:null},s.scrollRef=n().createRef(),s.contentRef=n().createRef(),s.containerRef=n().createRef(),s._scrollRatio=null,s.gutterRef=(0,r.createRef)(),s}return Js(t,e),Vs(t,[{key:"getSnapshotBeforeUpdate",value:function(){return this.checkOverflow(),null}},{key:"componentDidMount",value:function(){null==this.props.width&&this.measureGutter(),this.calculateScroll(),this.applyScroll(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),Sa(this.rafHandle),this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest)}},{key:"componentDidUpdate",value:function(){this.applyScroll()}},{key:"renderDayColumn",value:function(e,t,r,s,o,a,i,l,c,d){var u=this.props,p=u.min,f=u.max,m=(s.get(t)||[]).filter(function(t){return a.inRange(e,i.start(t),i.end(t),"day")}),h=(o.get(t)||[]).filter(function(t){return a.inRange(e,i.start(t),i.end(t),"day")});return n().createElement(bd,Object.assign({},this.props,{localizer:a,min:a.merge(e,p),max:a.merge(e,f),resource:r&&t,components:l,isNow:a.isSameDate(e,d),key:"".concat(t,"-").concat(e),date:e,events:m,backgroundEvents:h,dayLayoutAlgorithm:c}))}},{key:"renderResourcesFirst",value:function(e,t,r,n,s,o,a,i,l){var c=this;return t.map(function(t){var d=no(t,2),u=d[0],p=d[1];return e.map(function(e){return c.renderDayColumn(e,u,p,r,n,s,o,i,l,a)})})}},{key:"renderRangeFirst",value:function(e,t,r,s,o,a,i,l,c){var d=this;return e.map(function(e){return n().createElement("div",{style:{display:"flex",minHeight:"100%",flex:1},key:e},t.map(function(t){var u=no(t,2),p=u[0],f=u[1];return n().createElement("div",{style:{flex:1},key:a.resourceId(f)},d.renderDayColumn(e,p,f,r,s,o,a,l,c,i))}))})}},{key:"renderEvents",value:function(e,t,r,n){var s=this.props,o=s.accessors,a=s.localizer,i=s.resourceGroupingLayout,l=s.components,c=s.dayLayoutAlgorithm,d=this.memoizedResources(this.props.resources,o),u=d.groupEvents(t),p=d.groupEvents(r);return i?this.renderRangeFirst(e,d,u,p,a,o,n,l,c):this.renderResourcesFirst(e,d,u,p,a,o,n,l,c)}},{key:"render",value:function(){var e,t=this.props,r=t.events,s=t.backgroundEvents,o=t.range,a=t.width,i=t.rtl,l=t.selected,c=t.getNow,d=t.resources,u=t.components,p=t.accessors,f=t.getters,m=t.localizer,h=t.min,g=t.max,x=t.showMultiDayTimes,y=t.longPressThreshold,b=t.resizable,v=t.resourceGroupingLayout;a=a||this.state.gutterWidth;var j=o[0],w=o[o.length-1];this.slots=o.length;var N=[],k=[],C=[];r.forEach(function(e){if(Hc(e,j,w,p,m)){var t=p.start(e),r=p.end(e);p.allDay(e)||m.startAndEndAreDateOnly(t,r)||!x&&!m.isSameDate(t,r)?N.push(e):k.push(e)}}),s.forEach(function(e){Hc(e,j,w,p,m)&&C.push(e)}),N.sort(function(e,t){return Vc(e,t,p,m)});var _={range:o,events:N,width:a,rtl:i,getNow:c,localizer:m,selected:l,allDayMaxRows:this.props.showAllEvents?1/0:null!==(e=this.props.allDayMaxRows)&&void 0!==e?e:1/0,resources:this.memoizedResources(d,p),selectable:this.props.selectable,accessors:p,getters:f,components:u,scrollRef:this.scrollRef,isOverflowing:this.state.isOverflowing,longPressThreshold:y,onSelectSlot:this.handleSelectAllDaySlot,onSelectEvent:this.handleSelectEvent,onShowMore:this.handleShowMore,onDoubleClickEvent:this.props.onDoubleClickEvent,onKeyPressEvent:this.props.onKeyPressEvent,onDrillDown:this.props.onDrillDown,getDrilldownView:this.props.getDrilldownView,resizable:b};return n().createElement("div",{className:oo("rbc-time-view",d&&"rbc-time-view-resources"),ref:this.containerRef},d&&d.length>1&&v?n().createElement(wd,_):n().createElement(jd,_),this.props.popup&&this.renderOverlay(),n().createElement("div",{ref:this.contentRef,className:"rbc-time-content",onScroll:this.handleScroll},n().createElement(kd,{date:j,ref:this.gutterRef,localizer:m,min:m.merge(j,h),max:m.merge(j,g),step:this.props.step,getNow:this.props.getNow,timeslots:this.props.timeslots,components:u,className:"rbc-time-gutter",getters:f}),this.renderEvents(o,k,C,c())))}},{key:"renderOverlay",value:function(){var e,t,r=this,s=null!==(e=null===(t=this.state)||void 0===t?void 0:t.overlay)&&void 0!==e?e:{},o=this.props,a=o.accessors,i=o.localizer,l=o.components,c=o.getters,d=o.selected,u=o.popupOffset,p=o.handleDragStart;return n().createElement(Mc,{overlay:s,accessors:a,localizer:i,components:l,getters:c,selected:d,popupOffset:u,ref:this.containerRef,handleKeyPressEvent:this.handleKeyPressEvent,handleSelectEvent:this.handleSelectEvent,handleDoubleClickEvent:this.handleDoubleClickEvent,handleDragStart:p,show:!!s.position,overlayDisplay:this.overlayDisplay,onHide:function(){return r.setState({overlay:null})}})}},{key:"clearSelection",value:function(){clearTimeout(this._selectTimer),this._pendingSelection=[]}},{key:"measureGutter",value:function(){var e=this;this.measureGutterAnimationFrameRequest&&window.cancelAnimationFrame(this.measureGutterAnimationFrameRequest),this.measureGutterAnimationFrameRequest=window.requestAnimationFrame(function(){var t,r=null!==(t=e.gutterRef)&&void 0!==t&&t.current?Sl(e.gutterRef.current):void 0;r&&e.state.gutterWidth!==r&&e.setState({gutterWidth:r})})}},{key:"applyScroll",value:function(){if(null!=this._scrollRatio&&!0===this.props.enableAutoScroll){var e=this.contentRef.current;e.scrollTop=e.scrollHeight*this._scrollRatio,this._scrollRatio=null}}},{key:"calculateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.min,r=e.max,n=e.scrollToTime,s=e.localizer,o=s.diff(s.merge(n,t),n,"milliseconds"),a=s.diff(t,r,"milliseconds");this._scrollRatio=o/a}}])}(r.Component);_d.defaultProps={step:30,timeslots:2,resourceGroupingLayout:!1};var Sd=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Ed=function(e){function t(){return Hs(this,t),Gs(this,t,arguments)}return Js(t,e),Vs(t,[{key:"render",value:function(){var e=this.props,r=e.date,s=e.localizer,o=e.min,a=void 0===o?s.startOf(new Date,"day"):o,i=e.max,l=void 0===i?s.endOf(new Date,"day"):i,c=e.scrollToTime,d=void 0===c?s.startOf(new Date,"day"):c,u=e.enableAutoScroll,p=void 0===u||u,f=Ws(e,Sd),m=t.range(r,{localizer:s});return n().createElement(_d,Object.assign({},f,{range:m,eventOffset:10,localizer:s,min:a,max:l,scrollToTime:d,enableAutoScroll:p}))}}])}(n().Component);Ed.range=function(e,t){return[t.localizer.startOf(e,"day")]},Ed.navigate=function(e,t,r){var n=r.localizer;switch(t){case Ul:return n.add(e,-1,"day");case Wl:return n.add(e,1,"day");default:return e}},Ed.title=function(e,t){return t.localizer.format(e,"dayHeaderFormat")};var Ad=["date","localizer","min","max","scrollToTime","enableAutoScroll"],Md=function(e){function t(){return Hs(this,t),Gs(this,t,arguments)}return Js(t,e),Vs(t,[{key:"render",value:function(){var e=this.props,r=e.date,s=e.localizer,o=e.min,a=void 0===o?s.startOf(new Date,"day"):o,i=e.max,l=void 0===i?s.endOf(new Date,"day"):i,c=e.scrollToTime,d=void 0===c?s.startOf(new Date,"day"):c,u=e.enableAutoScroll,p=void 0===u||u,f=Ws(e,Ad),m=t.range(r,this.props);return n().createElement(_d,Object.assign({},f,{range:m,eventOffset:15,localizer:s,min:a,max:l,scrollToTime:d,enableAutoScroll:p}))}}])}(n().Component);Md.defaultProps=_d.defaultProps,Md.navigate=function(e,t,r){var n=r.localizer;switch(t){case Ul:return n.add(e,-1,"week");case Wl:return n.add(e,1,"week");default:return e}},Md.range=function(e,t){var r=t.localizer,n=r.startOfWeek(),s=r.startOf(e,"week",n),o=r.endOf(e,"week",n);return r.range(s,o)},Md.title=function(e,t){var r=t.localizer,n=Pl(Md.range(e,{localizer:r})),s=n[0],o=n.slice(1);return r.format({start:s,end:o.pop()},"dayRangeHeaderFormat")};var Td=["date","localizer","min","max","scrollToTime","enableAutoScroll"];function Pd(e,t){return Md.range(e,t).filter(function(e){return-1===[6,0].indexOf(e.getDay())})}var Od=function(e){function t(){return Hs(this,t),Gs(this,t,arguments)}return Js(t,e),Vs(t,[{key:"render",value:function(){var e=this.props,t=e.date,r=e.localizer,s=e.min,o=void 0===s?r.startOf(new Date,"day"):s,a=e.max,i=void 0===a?r.endOf(new Date,"day"):a,l=e.scrollToTime,c=void 0===l?r.startOf(new Date,"day"):l,d=e.enableAutoScroll,u=void 0===d||d,p=Ws(e,Td),f=Pd(t,this.props);return n().createElement(_d,Object.assign({},p,{range:f,eventOffset:15,localizer:r,min:o,max:i,scrollToTime:c,enableAutoScroll:u}))}}])}(n().Component);function zd(e){var t=e.accessors,s=e.components,o=e.date,a=e.events,i=e.getters,l=e.length,c=void 0===l?30:l,d=e.localizer,u=e.onDoubleClickEvent,p=e.onSelectEvent,f=e.selected,m=(0,r.useRef)(null),h=(0,r.useRef)(null),g=(0,r.useRef)(null),x=(0,r.useRef)(null),y=(0,r.useRef)(null);(0,r.useEffect)(function(){b()});var b=function(){if(y.current){var e=m.current,t=y.current.firstChild;if(t){var r,n,s=x.current.scrollHeight>x.current.clientHeight,o=[],a=o;o=[Sl(t.children[0]),Sl(t.children[1])],a[0]===o[0]&&a[1]===o[1]||(h.current.style.width=o[0]+"px",g.current.style.width=o[1]+"px"),s?(n="rbc-header-overflowing",(r=e).classList?r.classList.add(n):function(e,t){return e.classList?e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(r,n)||("string"==typeof r.className?r.className=r.className+" "+n:r.setAttribute("class",(r.className&&r.className.baseVal||"")+" "+n)),e.style.marginRight=Tl()+"px"):function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=Ol(e.className,t):e.setAttribute("class",Ol(e.className&&e.className.baseVal||"",t))}(e,"rbc-header-overflowing")}}},v=d.messages,j=d.add(o,c,"day"),w=d.range(o,j,"day");return(a=a.filter(function(e){return Hc(e,d.startOf(o,"day"),d.endOf(j,"day"),t,d)})).sort(function(e,r){return+t.start(e)-+t.start(r)}),n().createElement("div",{className:"rbc-agenda-view"},0!==a.length?n().createElement(n().Fragment,null,n().createElement("table",{ref:m,className:"rbc-agenda-table"},n().createElement("thead",null,n().createElement("tr",null,n().createElement("th",{className:"rbc-header",ref:h},v.date),n().createElement("th",{className:"rbc-header",ref:g},v.time),n().createElement("th",{className:"rbc-header"},v.event)))),n().createElement("div",{className:"rbc-agenda-content",ref:x},n().createElement("table",{className:"rbc-agenda-table"},n().createElement("tbody",{ref:y},w.map(function(e,r){return function(e,r,o){var a=s.event,l=s.date;return(r=r.filter(function(r){return Hc(r,d.startOf(e,"day"),d.endOf(e,"day"),t,d)})).map(function(c,m){var h=t.title(c),g=t.end(c),x=t.start(c),y=i.eventProp(c,x,g,kc(c,f)),b=0===m&&d.format(e,"agendaDateFormat"),v=0===m&&n().createElement("td",{rowSpan:r.length,className:"rbc-agenda-date-cell"},l?n().createElement(l,{day:e,label:b}):b);return n().createElement("tr",{key:o+"_"+m,className:y.className,style:y.style},v,n().createElement("td",{className:"rbc-agenda-time-cell"},function(e,r){var o="",a=s.time,i=d.messages.allDay,l=t.end(r),c=t.start(r);return t.allDay(r)||(d.eq(c,l)?i=d.format(c,"agendaTimeFormat"):d.isSameDate(c,l)?i=d.format({start:c,end:l},"agendaTimeRangeFormat"):d.isSameDate(e,c)?i=d.format(c,"agendaTimeFormat"):d.isSameDate(e,l)&&(i=d.format(l,"agendaTimeFormat"))),d.gt(e,c,"day")&&(o="rbc-continues-prior"),d.lt(e,l,"day")&&(o+=" rbc-continues-after"),n().createElement("span",{className:o.trim()},a?n().createElement(a,{event:r,day:e,label:i}):i)}(e,c)),n().createElement("td",{className:"rbc-agenda-event-cell",onClick:function(e){return p&&p(c,e)},onDoubleClick:function(e){return u&&u(c,e)}},a?n().createElement(a,{event:c,title:h}):h))},[])}(e,a,r)}))))):n().createElement("span",{className:"rbc-agenda-empty"},v.noEventsInRange))}Od.defaultProps=_d.defaultProps,Od.range=Pd,Od.navigate=Md.navigate,Od.title=function(e,t){var r=t.localizer,n=Pl(Pd(e,{localizer:r})),s=n[0],o=n.slice(1);return r.format({start:s,end:o.pop()},"dayRangeHeaderFormat")},zd.range=function(e,t){var r=t.length,n=void 0===r?30:r;return{start:e,end:t.localizer.add(e,n,"day")}},zd.navigate=function(e,t,r){var n=r.length,s=void 0===n?30:n,o=r.localizer;switch(t){case Ul:return o.add(e,-s,"day");case Wl:return o.add(e,s,"day");default:return e}},zd.title=function(e,t){var r=t.length,n=void 0===r?30:r,s=t.localizer,o=s.add(e,n,"day");return s.format({start:e,end:o},"agendaHeaderFormat")};var qd=$s($s($s($s($s({},Vl.MONTH,sd),Vl.WEEK,Md),Vl.WORK_WEEK,Od),Vl.DAY,Ed),Vl.AGENDA,zd),Dd=["action","date","today"],Id=function(e){return function(t){return function(e,t){var r=null;return"function"==typeof t?r=t(e):"string"==typeof t&&"object"===Ls(e)&&null!=e&&t in e&&(r=e[t]),r}(t,e)}},Ld=["view","date","getNow","onNavigate"],Rd=["view","toolbar","events","backgroundEvents","resourceGroupingLayout","style","className","elementProps","date","getNow","length","showMultiDayTimes","onShowMore","doShowMoreDrillDown","components","formats","messages","culture"];function $d(e){if(Array.isArray(e))return e;for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var s=no(n[r],2),o=s[0];s[1]&&t.push(o)}return t}var Bd=function(e){function t(){var e;Hs(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=Gs(this,t,[].concat(n))).getViews=function(){var t=e.props.views;return Array.isArray(t)?Bl()(t,function(e,t){return e[t]=qd[t]},{}):"object"===Ls(t)?Il()(t,function(e,t){return!0===e?qd[t]:e}):qd},e.getView=function(){return e.getViews()[e.props.view]},e.getDrilldownView=function(t){var r=e.props,n=r.view,s=r.drilldownView,o=r.getDrilldownView;return o?o(t,n,Object.keys(e.getViews())):s},e.handleRangeChange=function(t,r,n){var s=e.props,o=s.onRangeChange,a=s.localizer;o&&r.range&&o(r.range(t,{localizer:a}),n)},e.handleNavigate=function(t,r){var n=e.props,s=n.view,o=n.date,a=n.getNow,i=n.onNavigate,l=Ws(n,Ld),c=e.getView(),d=a();o=function(e,t){var r=t.action,n=t.date,s=t.today,o=Ws(t,Dd);switch(e="string"==typeof e?qd[e]:e,r){case Hl:n=s||new Date;break;case Ql:break;default:io()(e&&"function"==typeof e.navigate,"Calendar View components must implement a static `.navigate(date, action)` method.s"),n=e.navigate(n,r,o)}return n}(c,Fs(Fs({},l),{},{action:t,date:r||o||d,today:d})),i(o,s,t),e.handleRangeChange(o,c)},e.handleViewChange=function(t){t!==e.props.view&&function(e,t){return-1!==$d(t.views).indexOf(e)}(t,e.props)&&e.props.onView(t);var r=e.getViews();e.handleRangeChange(e.props.date||e.props.getNow(),r[t],t)},e.handleSelectEvent=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onSelectEvent,r)},e.handleDoubleClickEvent=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onDoubleClickEvent,r)},e.handleKeyPressEvent=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];vc(e.props.onKeyPressEvent,r)},e.handleSelectSlot=function(t){vc(e.props.onSelectSlot,t)},e.handleDrillDown=function(t,r){var n=e.props.onDrillDown;n?n(t,r,e.drilldownView):(r&&e.handleViewChange(r),e.handleNavigate(Ql,t))},e.state={context:t.getContext(e.props)},e}return Js(t,e),Vs(t,[{key:"render",value:function(){var e=this.props,t=e.view,r=e.toolbar,s=e.events,o=e.backgroundEvents,a=e.resourceGroupingLayout,i=e.style,l=e.className,c=e.elementProps,d=e.date,u=e.getNow,p=e.length,f=e.showMultiDayTimes,m=e.onShowMore,h=e.doShowMoreDrillDown;e.components,e.formats,e.messages,e.culture;var g=Ws(e,Rd);d=d||u();var x=this.getView(),y=this.state.context,b=y.accessors,v=y.components,j=y.getters,w=y.localizer,N=y.viewNames,k=v.toolbar||bc,C=x.title(d,{localizer:w,length:p});return n().createElement("div",Object.assign({},c,{className:oo(l,"rbc-calendar",g.rtl&&"rbc-rtl"),style:i}),r&&n().createElement(k,{date:d,view:t,views:N,label:C,onView:this.handleViewChange,onNavigate:this.handleNavigate,localizer:w}),n().createElement(x,Object.assign({},g,{events:s,backgroundEvents:o,date:d,getNow:u,length:p,localizer:w,getters:j,components:v,accessors:b,showMultiDayTimes:f,getDrilldownView:this.getDrilldownView,onNavigate:this.handleNavigate,onDrillDown:this.handleDrillDown,onSelectEvent:this.handleSelectEvent,onDoubleClickEvent:this.handleDoubleClickEvent,onKeyPressEvent:this.handleKeyPressEvent,onSelectSlot:this.handleSelectSlot,onShowMore:m,doShowMoreDrillDown:h,resourceGroupingLayout:a})))}}],[{key:"getDerivedStateFromProps",value:function(e){return{context:t.getContext(e)}}},{key:"getContext",value:function(e){var t,r=e.startAccessor,n=e.endAccessor,s=e.allDayAccessor,o=e.tooltipAccessor,a=e.titleAccessor,i=e.resourceAccessor,l=e.resourceIdAccessor,c=e.resourceTitleAccessor,d=e.eventIdAccessor,u=e.eventPropGetter,p=e.backgroundEventPropGetter,f=e.slotPropGetter,m=e.slotGroupPropGetter,h=e.dayPropGetter,g=e.view,x=e.views,y=e.localizer,b=e.culture,v=e.messages,j=void 0===v?{}:v,w=e.components,N=void 0===w?{}:w,k=e.formats,C=void 0===k?{}:k,_=$d(x);return{viewNames:_,localizer:yc(y,b,C,(t=j,Fs(Fs({},jc),t))),getters:{eventProp:function(){return u&&u.apply(void 0,arguments)||{}},backgroundEventProp:function(){return p&&p.apply(void 0,arguments)||{}},slotProp:function(){return f&&f.apply(void 0,arguments)||{}},slotGroupProp:function(){return m&&m.apply(void 0,arguments)||{}},dayProp:function(){return h&&h.apply(void 0,arguments)||{}}},components:ql()(N[g]||{},Rl()(N,_),{eventWrapper:Fl,backgroundEventWrapper:Fl,eventContainerWrapper:Fl,dateCellWrapper:Fl,weekWrapper:Fl,timeSlotWrapper:Fl,timeGutterWrapper:Fl,timeIndicatorWrapper:Fl}),accessors:{start:Id(r),end:Id(n),allDay:Id(s),tooltip:Id(o),title:Id(a),resource:Id(i),resourceId:Id(l),resourceTitle:Id(c),eventId:Id(d)}}}}])}(n().Component);Bd.defaultProps={events:[],backgroundEvents:[],elementProps:{},popup:!1,toolbar:!0,view:Vl.MONTH,views:[Vl.MONTH,Vl.WEEK,Vl.DAY,Vl.AGENDA],step:30,length:30,allDayMaxRows:1/0,doShowMoreDrillDown:!0,drilldownView:Vl.DAY,titleAccessor:"title",tooltipAccessor:"title",allDayAccessor:"allDay",startAccessor:"start",endAccessor:"end",resourceAccessor:"resourceId",resourceIdAccessor:"id",resourceTitleAccessor:"title",eventIdAccessor:"id",longPressThreshold:250,getNow:function(){return new Date},dayLayoutAlgorithm:"overlap"};var Fd=function e(t,r,s){void 0===s&&(s=[]);var o,a=t.displayName||t.name||"Component",i=!!(o=t)&&("function"!=typeof o||o.prototype&&o.prototype.isReactComponent),l=Object.keys(r),c=l.map(uo);!i&&s.length&&io()(!1);var d=function(e){function o(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];(t=e.call.apply(e,[this].concat(o))||this).handlers=Object.create(null),l.forEach(function(e){var n=r[e];t.handlers[n]=function(r){if(t.props[n]){var s;t._notifying=!0;for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];(s=t.props)[n].apply(s,[r].concat(a)),t._notifying=!1}t.unmounted||t.setState(function(t){var n,s=t.values;return{values:po(Object.create(null),s,(n={},n[e]=r,n))}})}}),s.length&&(t.attachRef=function(e){t.inner=e});var i=Object.create(null);return l.forEach(function(e){i[e]=t.props[uo(e)]}),t.state={values:i,prevProps:{}},t}var a,i;i=e,(a=o).prototype=Object.create(i.prototype),a.prototype.constructor=a,Xs(a,i);var d=o.prototype;return d.shouldComponentUpdate=function(){return!this._notifying},o.getDerivedStateFromProps=function(e,t){var r=t.values,n=t.prevProps,s={values:po(Object.create(null),r),prevProps:{}};return l.forEach(function(t){s.prevProps[t]=e[t],!co(e,t)&&co(n,t)&&(s.values[t]=e[uo(t)])}),s},d.componentWillUnmount=function(){this.unmounted=!0},d.render=function(){var e=this,r=this.props,s=r.innerRef,o=Us(r,["innerRef"]);c.forEach(function(e){delete o[e]});var a={};return l.forEach(function(t){var r=e.props[t];a[t]=void 0!==r?r:e.state.values[t]}),n().createElement(t,po({},o,a,this.handlers,{ref:s||this.attachRef}))},o}(n().Component);!function(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var r=null,n=null,s=null;if("function"==typeof t.componentWillMount?r="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(r="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?n="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(n="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==r||null!==n||null!==s){var o=e.displayName||e.name,a="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==r?"\n  "+r:"")+(null!==n?"\n  "+n:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=fo,t.componentWillReceiveProps=mo),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=ho;var i=t.componentDidUpdate;t.componentDidUpdate=function(e,t,r){var n=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:r;i.call(this,e,t,n)}}}(d),d.displayName="Uncontrolled("+a+")",d.propTypes=po({innerRef:function(){}},function(e){var t={};return Object.keys(e).forEach(function(e){t[uo(e)]=lo}),t}(r)),s.forEach(function(e){d.prototype[e]=function(){var t;return(t=this.inner)[e].apply(t,arguments)}});var u=d;return n().forwardRef&&((u=n().forwardRef(function(e,t){return n().createElement(d,po({},e,{innerRef:t,__source:{fileName:"/Users/jquense/src/uncontrollable/src/uncontrollable.js",lineNumber:128},__self:this}))})).propTypes=d.propTypes),u.ControlledComponent=t,u.deferControlTo=function(t,n,s){return void 0===n&&(n={}),e(t,po({},r,n),s)},u}(Bd,{view:"onView",date:"onNavigate",selected:"onSelectEvent"}),Ud=function(e,t,r){var n=e.start,s=e.end;return"".concat(r.format(n,"p",t)," â€“ ").concat(r.format(s,"p",t))},Wd={dateFormat:"dd",dayFormat:"dd eee",weekdayFormat:"ccc",selectRangeFormat:Ud,eventTimeRangeFormat:Ud,eventTimeRangeStartFormat:function(e,t,r){var n=e.start;return"".concat(r.format(n,"h:mma",t)," â€“ ")},eventTimeRangeEndFormat:function(e,t,r){var n=e.end;return" â€“ ".concat(r.format(n,"h:mma",t))},timeGutterFormat:"p",monthHeaderFormat:"MMMM yyyy",dayHeaderFormat:"cccc MMM dd",dayRangeHeaderFormat:function(e,t,r){var n=e.start,s=e.end;return"".concat(r.format(n,"MMMM dd",t)," â€“ ").concat(r.format(s,qo(n,s,"month")?"dd":"MMMM dd",t))},agendaHeaderFormat:function(e,t,r){var n=e.start,s=e.end;return"".concat(r.format(n,"P",t)," â€“ ").concat(r.format(s,"P",t))},agendaDateFormat:"ccc MMM dd",agendaTimeFormat:"p",agendaTimeRangeFormat:Ud};const Hd={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Qd(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Vd={date:Qd({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Qd({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Qd({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Yd={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Kd(e){return(t,r)=>{let n;if("formatting"===(r?.context?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,s=r?.width?String(r.width):t;n=e.formattingValues[s]||e.formattingValues[t]}else{const t=e.defaultWidth,s=r?.width?String(r.width):e.defaultWidth;n=e.values[s]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}const Gd={ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:Kd({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Kd({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Kd({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Kd({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Kd({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Xd(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(s);if(!o)return null;const a=o[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}(i,e=>e.test(a)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}(i,e=>e.test(a));let c;return c=e.valueCallback?e.valueCallback(l):l,c=r.valueCallback?r.valueCallback(c):c,{value:c,rest:t.slice(a.length)}}}function Jd(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],o=t.match(e.parsePattern);if(!o)return null;let a=e.valueCallback?e.valueCallback(o[0]):o[0];return a=r.valueCallback?r.valueCallback(a):a,{value:a,rest:t.slice(s.length)}}}const Zd={ordinalNumber:Jd({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:Xd({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Xd({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xd({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Xd({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Xd({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},eu={code:"en-US",formatDistance:(e,t,r)=>{let n;const s=Hd[e];return n="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:Vd,formatRelative:(e,t,r,n)=>Yd[e],localize:Gd,match:Zd,options:{weekStartsOn:0,firstWeekContainsDate:1}};let tu={};function ru(){return tu}Math.pow(10,8);const nu=6048e5,su=36e5,ou=Symbol.for("constructDateFrom");function au(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&ou in e?e[ou](t):e instanceof Date?new e.constructor(t):new Date(t)}function iu(e,t){return au(t||e,e)}function lu(e){const t=iu(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function cu(e,...t){const r=au.bind(null,e||t.find(e=>"object"==typeof e));return t.map(r)}function du(e,t){const r=iu(e,t?.in);return r.setHours(0,0,0,0),r}function uu(e,t){const r=iu(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function pu(e,t){const r=iu(e,t?.in);return function(e,t,r){const[n,s]=cu(r?.in,e,t),o=du(n),a=du(s),i=+o-lu(o),l=+a-lu(a);return Math.round((i-l)/864e5)}(r,uu(r))+1}function fu(e,t){const r=ru(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=iu(e,t?.in),o=s.getDay(),a=(o<n?7:0)+o-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function mu(e,t){return fu(e,{...t,weekStartsOn:1})}function hu(e,t){const r=iu(e,t?.in),n=r.getFullYear(),s=au(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const o=mu(s),a=au(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);const i=mu(a);return r.getTime()>=o.getTime()?n+1:r.getTime()>=i.getTime()?n:n-1}function gu(e,t){const r=iu(e,t?.in),n=+mu(r)-+function(e,t){const r=hu(e,t),n=au(t?.in||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),mu(n)}(r);return Math.round(n/nu)+1}function xu(e,t){const r=iu(e,t?.in),n=r.getFullYear(),s=ru(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=au(t?.in||e,0);a.setFullYear(n+1,0,o),a.setHours(0,0,0,0);const i=fu(a,t),l=au(t?.in||e,0);l.setFullYear(n,0,o),l.setHours(0,0,0,0);const c=fu(l,t);return+r>=+i?n+1:+r>=+c?n:n-1}function yu(e,t){const r=iu(e,t?.in),n=+fu(r,t)-+function(e,t){const r=ru(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=xu(e,t),o=au(t?.in||e,0);return o.setFullYear(s,0,n),o.setHours(0,0,0,0),fu(o,t)}(r,t);return Math.round(n/nu)+1}function bu(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const vu={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return bu("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):bu(r+1,2)},d:(e,t)=>bu(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>bu(e.getHours()%12||12,t.length),H:(e,t)=>bu(e.getHours(),t.length),m:(e,t)=>bu(e.getMinutes(),t.length),s:(e,t)=>bu(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return bu(Math.trunc(n*Math.pow(10,r-3)),t.length)}},ju={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return vu.y(e,t)},Y:function(e,t,r,n){const s=xu(e,n),o=s>0?s:1-s;return"YY"===t?bu(o%100,2):"Yo"===t?r.ordinalNumber(o,{unit:"year"}):bu(o,t.length)},R:function(e,t){return bu(hu(e),t.length)},u:function(e,t){return bu(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return bu(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return bu(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return vu.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return bu(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=yu(e,n);return"wo"===t?r.ordinalNumber(s,{unit:"week"}):bu(s,t.length)},I:function(e,t,r){const n=gu(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):bu(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):vu.d(e,t)},D:function(e,t,r){const n=pu(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):bu(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return bu(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),o=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return bu(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=0===n?7:n;switch(t){case"i":return String(s);case"ii":return bu(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(s=12===n?"noon":0===n?"midnight":n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(s=n>=17?"evening":n>=12?"afternoon":n>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return vu.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):vu.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):bu(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):bu(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):vu.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):vu.s(e,t)},S:function(e,t){return vu.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return Nu(n);case"XXXX":case"XX":return ku(n);default:return ku(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Nu(n);case"xxxx":case"xx":return ku(n);default:return ku(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+wu(n,":");default:return"GMT"+ku(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+wu(n,":");default:return"GMT"+ku(n,":")}},t:function(e,t,r){return bu(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return bu(+e,t.length)}};function wu(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),o=n%60;return 0===o?r+String(s):r+String(s)+t+bu(o,2)}function Nu(e,t){return e%60==0?(e>0?"-":"+")+bu(Math.abs(e)/60,2):ku(e,t)}function ku(e,t=""){const r=e>0?"-":"+",n=Math.abs(e);return r+bu(Math.trunc(n/60),2)+t+bu(n%60,2)}const Cu=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},_u=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Su={p:_u,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return Cu(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",Cu(n,t)).replace("{{time}}",_u(s,t))}},Eu=/^D+$/,Au=/^Y+$/,Mu=["D","DD","YY","YYYY"];function Tu(e){return Eu.test(e)}function Pu(e){return Au.test(e)}function Ou(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(console.warn(n),Mu.includes(e))throw new RangeError(n)}function zu(e){return!(!function(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}(e)&&"number"!=typeof e||isNaN(+iu(e)))}const qu=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Du=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Iu=/^'([^]*?)'?$/,Lu=/''/g,Ru=/[a-zA-Z]/;function $u(e,t,r){const n=ru(),s=r?.locale??n.locale??eu,o=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=iu(e,r?.in);if(!zu(i))throw new RangeError("Invalid time value");let l=t.match(Du).map(e=>{const t=e[0];return"p"===t||"P"===t?(0,Su[t])(e,s.formatLong):e}).join("").match(qu).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Bu(e)};if(ju[t])return{isToken:!0,value:e};if(t.match(Ru))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});s.localize.preprocessor&&(l=s.localize.preprocessor(i,l));const c={firstWeekContainsDate:o,weekStartsOn:a,locale:s};return l.map(n=>{if(!n.isToken)return n.value;const o=n.value;return(!r?.useAdditionalWeekYearTokens&&Pu(o)||!r?.useAdditionalDayOfYearTokens&&Tu(o))&&Ou(o,t,String(e)),(0,ju[o[0]])(i,o,s.localize,c)}).join("")}function Bu(e){const t=e.match(Iu);return t?t[1].replace(Lu,"'"):e}class Fu{subPriority=0;validate(e,t){return!0}}class Uu extends Fu{constructor(e,t,r,n,s){super(),this.value=e,this.validateValue=t,this.setValue=r,this.priority=n,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,r){return this.setValue(e,t,this.value,r)}}class Wu extends Fu{priority=10;subPriority=-1;constructor(e,t){super(),this.context=e||(e=>au(t,e))}set(e,t){return t.timestampIsSet?e:au(e,function(e,t){const r=function(e){return"function"==typeof e&&e.prototype?.constructor===e}(t)?new t(0):au(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}(e,this.context))}}class Hu{run(e,t,r,n){const s=this.parse(e,t,r,n);return s?{setter:new Uu(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,r){return!0}}const Qu=/^(1[0-2]|0?\d)/,Vu=/^(3[0-1]|[0-2]?\d)/,Yu=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Ku=/^(5[0-3]|[0-4]?\d)/,Gu=/^(2[0-3]|[0-1]?\d)/,Xu=/^(2[0-4]|[0-1]?\d)/,Ju=/^(1[0-1]|0?\d)/,Zu=/^(1[0-2]|0?\d)/,ep=/^[0-5]?\d/,tp=/^[0-5]?\d/,rp=/^\d/,np=/^\d{1,2}/,sp=/^\d{1,3}/,op=/^\d{1,4}/,ap=/^-?\d+/,ip=/^-?\d/,lp=/^-?\d{1,2}/,cp=/^-?\d{1,3}/,dp=/^-?\d{1,4}/,up=/^([+-])(\d{2})(\d{2})?|Z/,pp=/^([+-])(\d{2})(\d{2})|Z/,fp=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,mp=/^([+-])(\d{2}):(\d{2})|Z/,hp=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function gp(e,t){return e?{value:t(e.value),rest:e.rest}:e}function xp(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function yp(e,t){const r=t.match(e);if(!r)return null;if("Z"===r[0])return{value:0,rest:t.slice(1)};const n="+"===r[1]?1:-1,s=r[2]?parseInt(r[2],10):0,o=r[3]?parseInt(r[3],10):0,a=r[5]?parseInt(r[5],10):0;return{value:n*(s*su+6e4*o+1e3*a),rest:t.slice(r[0].length)}}function bp(e){return xp(ap,e)}function vp(e,t){switch(e){case 1:return xp(rp,t);case 2:return xp(np,t);case 3:return xp(sp,t);case 4:return xp(op,t);default:return xp(new RegExp("^\\d{1,"+e+"}"),t)}}function jp(e,t){switch(e){case 1:return xp(ip,t);case 2:return xp(lp,t);case 3:return xp(cp,t);case 4:return xp(dp,t);default:return xp(new RegExp("^-?\\d{1,"+e+"}"),t)}}function wp(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function Np(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const t=n+50;s=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return r?s:1-s}function kp(e){return e%400==0||e%4==0&&e%100!=0}const Cp=[31,28,31,30,31,30,31,31,30,31,30,31],_p=[31,29,31,30,31,30,31,31,30,31,30,31];function Sp(e,t,r){const n=iu(e,r?.in);return isNaN(t)?au(r?.in||e,NaN):t?(n.setDate(n.getDate()+t),n):n}function Ep(e,t,r){const n=ru(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=iu(e,r?.in),a=o.getDay(),i=7-s;return Sp(o,t<0||t>6?t-(a+i)%7:((t%7+7)%7+i)%7-(a+i)%7,r)}function Ap(e,t,r){const n=iu(e,r?.in);return Sp(n,t-function(e,t){const r=iu(e,t?.in).getDay();return 0===r?7:r}(n,r),r)}const Mp={G:new class extends Hu{priority=140;parse(e,t,r){switch(t){case"G":case"GG":case"GGG":return r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"});case"GGGGG":return r.era(e,{width:"narrow"});default:return r.era(e,{width:"wide"})||r.era(e,{width:"abbreviated"})||r.era(e,{width:"narrow"})}}set(e,t,r){return t.era=r,e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]},y:new class extends Hu{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return gp(vp(4,e),n);case"yo":return gp(r.ordinalNumber(e,{unit:"year"}),n);default:return gp(vp(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r){const n=e.getFullYear();if(r.isTwoDigitYear){const t=Np(r.year,n);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const s="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}},Y:new class extends Hu{priority=130;parse(e,t,r){const n=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return gp(vp(4,e),n);case"Yo":return gp(r.ordinalNumber(e,{unit:"year"}),n);default:return gp(vp(t.length,e),n)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,r,n){const s=xu(e,n);if(r.isTwoDigitYear){const t=Np(r.year,s);return e.setFullYear(t,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),fu(e,n)}const o="era"in t&&1!==t.era?1-r.year:r.year;return e.setFullYear(o,0,n.firstWeekContainsDate),e.setHours(0,0,0,0),fu(e,n)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:new class extends Hu{priority=130;parse(e,t){return jp("R"===t?4:t.length,e)}set(e,t,r){const n=au(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),mu(n)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:new class extends Hu{priority=130;parse(e,t){return jp("u"===t?4:t.length,e)}set(e,t,r){return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]},Q:new class extends Hu{priority=120;parse(e,t,r){switch(t){case"Q":case"QQ":return vp(t.length,e);case"Qo":return r.ordinalNumber(e,{unit:"quarter"});case"QQQ":return r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(e,{width:"narrow",context:"formatting"});default:return r.quarter(e,{width:"wide",context:"formatting"})||r.quarter(e,{width:"abbreviated",context:"formatting"})||r.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:new class extends Hu{priority=120;parse(e,t,r){switch(t){case"q":case"qq":return vp(t.length,e);case"qo":return r.ordinalNumber(e,{unit:"quarter"});case"qqq":return r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(e,{width:"narrow",context:"standalone"});default:return r.quarter(e,{width:"wide",context:"standalone"})||r.quarter(e,{width:"abbreviated",context:"standalone"})||r.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,r){return e.setMonth(3*(r-1),1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:new class extends Hu{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,r){const n=e=>e-1;switch(t){case"M":return gp(xp(Qu,e),n);case"MM":return gp(vp(2,e),n);case"Mo":return gp(r.ordinalNumber(e,{unit:"month"}),n);case"MMM":return r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(e,{width:"narrow",context:"formatting"});default:return r.month(e,{width:"wide",context:"formatting"})||r.month(e,{width:"abbreviated",context:"formatting"})||r.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}},L:new class extends Hu{priority=110;parse(e,t,r){const n=e=>e-1;switch(t){case"L":return gp(xp(Qu,e),n);case"LL":return gp(vp(2,e),n);case"Lo":return gp(r.ordinalNumber(e,{unit:"month"}),n);case"LLL":return r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(e,{width:"narrow",context:"standalone"});default:return r.month(e,{width:"wide",context:"standalone"})||r.month(e,{width:"abbreviated",context:"standalone"})||r.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.setMonth(r,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:new class extends Hu{priority=100;parse(e,t,r){switch(t){case"w":return xp(Ku,e);case"wo":return r.ordinalNumber(e,{unit:"week"});default:return vp(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r,n){return fu(function(e,t,r){const n=iu(e,r?.in),s=yu(n,r)-t;return n.setDate(n.getDate()-7*s),iu(n,r?.in)}(e,r,n),n)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:new class extends Hu{priority=100;parse(e,t,r){switch(t){case"I":return xp(Ku,e);case"Io":return r.ordinalNumber(e,{unit:"week"});default:return vp(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,r){return mu(function(e,t,r){const n=iu(e,r?.in),s=gu(n,r)-t;return n.setDate(n.getDate()-7*s),n}(e,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:new class extends Hu{priority=90;subPriority=1;parse(e,t,r){switch(t){case"d":return xp(Vu,e);case"do":return r.ordinalNumber(e,{unit:"date"});default:return vp(t.length,e)}}validate(e,t){const r=kp(e.getFullYear()),n=e.getMonth();return r?t>=1&&t<=_p[n]:t>=1&&t<=Cp[n]}set(e,t,r){return e.setDate(r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:new class extends Hu{priority=90;subpriority=1;parse(e,t,r){switch(t){case"D":case"DD":return xp(Yu,e);case"Do":return r.ordinalNumber(e,{unit:"date"});default:return vp(t.length,e)}}validate(e,t){return kp(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,r){return e.setMonth(0,r),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:new class extends Hu{priority=90;parse(e,t,r){switch(t){case"E":case"EE":case"EEE":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=Ep(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]},e:new class extends Hu{priority=90;parse(e,t,r,n){const s=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return gp(vp(t.length,e),s);case"eo":return gp(r.ordinalNumber(e,{unit:"day"}),s);case"eee":return r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});case"eeeee":return r.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"});default:return r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=Ep(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:new class extends Hu{priority=90;parse(e,t,r,n){const s=e=>{const t=7*Math.floor((e-1)/7);return(e+n.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return gp(vp(t.length,e),s);case"co":return gp(r.ordinalNumber(e,{unit:"day"}),s);case"ccc":return r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});case"ccccc":return r.day(e,{width:"narrow",context:"standalone"});case"cccccc":return r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"});default:return r.day(e,{width:"wide",context:"standalone"})||r.day(e,{width:"abbreviated",context:"standalone"})||r.day(e,{width:"short",context:"standalone"})||r.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,r,n){return(e=Ep(e,r,n)).setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:new class extends Hu{priority=90;parse(e,t,r){const n=e=>0===e?7:e;switch(t){case"i":case"ii":return vp(t.length,e);case"io":return r.ordinalNumber(e,{unit:"day"});case"iii":return gp(r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiii":return gp(r.day(e,{width:"narrow",context:"formatting"}),n);case"iiiiii":return gp(r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n);default:return gp(r.day(e,{width:"wide",context:"formatting"})||r.day(e,{width:"abbreviated",context:"formatting"})||r.day(e,{width:"short",context:"formatting"})||r.day(e,{width:"narrow",context:"formatting"}),n)}}validate(e,t){return t>=1&&t<=7}set(e,t,r){return(e=Ap(e,r)).setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:new class extends Hu{priority=80;parse(e,t,r){switch(t){case"a":case"aa":case"aaa":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(wp(r),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]},b:new class extends Hu{priority=80;parse(e,t,r){switch(t){case"b":case"bb":case"bbb":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(wp(r),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]},B:new class extends Hu{priority=80;parse(e,t,r){switch(t){case"B":case"BB":case"BBB":return r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(e,{width:"narrow",context:"formatting"});default:return r.dayPeriod(e,{width:"wide",context:"formatting"})||r.dayPeriod(e,{width:"abbreviated",context:"formatting"})||r.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,r){return e.setHours(wp(r),0,0,0),e}incompatibleTokens=["a","b","t","T"]},h:new class extends Hu{priority=70;parse(e,t,r){switch(t){case"h":return xp(Zu,e);case"ho":return r.ordinalNumber(e,{unit:"hour"});default:return vp(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,r){const n=e.getHours()>=12;return n&&r<12?e.setHours(r+12,0,0,0):n||12!==r?e.setHours(r,0,0,0):e.setHours(0,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]},H:new class extends Hu{priority=70;parse(e,t,r){switch(t){case"H":return xp(Gu,e);case"Ho":return r.ordinalNumber(e,{unit:"hour"});default:return vp(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,r){return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]},K:new class extends Hu{priority=70;parse(e,t,r){switch(t){case"K":return xp(Ju,e);case"Ko":return r.ordinalNumber(e,{unit:"hour"});default:return vp(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,r){return e.getHours()>=12&&r<12?e.setHours(r+12,0,0,0):e.setHours(r,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]},k:new class extends Hu{priority=70;parse(e,t,r){switch(t){case"k":return xp(Xu,e);case"ko":return r.ordinalNumber(e,{unit:"hour"});default:return vp(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,r){const n=r<=24?r%24:r;return e.setHours(n,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]},m:new class extends Hu{priority=60;parse(e,t,r){switch(t){case"m":return xp(ep,e);case"mo":return r.ordinalNumber(e,{unit:"minute"});default:return vp(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setMinutes(r,0,0),e}incompatibleTokens=["t","T"]},s:new class extends Hu{priority=50;parse(e,t,r){switch(t){case"s":return xp(tp,e);case"so":return r.ordinalNumber(e,{unit:"second"});default:return vp(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,r){return e.setSeconds(r,0),e}incompatibleTokens=["t","T"]},S:new class extends Hu{priority=30;parse(e,t){return gp(vp(t.length,e),e=>Math.trunc(e*Math.pow(10,3-t.length)))}set(e,t,r){return e.setMilliseconds(r),e}incompatibleTokens=["t","T"]},X:new class extends Hu{priority=10;parse(e,t){switch(t){case"X":return yp(up,e);case"XX":return yp(pp,e);case"XXXX":return yp(fp,e);case"XXXXX":return yp(hp,e);default:return yp(mp,e)}}set(e,t,r){return t.timestampIsSet?e:au(e,e.getTime()-lu(e)-r)}incompatibleTokens=["t","T","x"]},x:new class extends Hu{priority=10;parse(e,t){switch(t){case"x":return yp(up,e);case"xx":return yp(pp,e);case"xxxx":return yp(fp,e);case"xxxxx":return yp(hp,e);default:return yp(mp,e)}}set(e,t,r){return t.timestampIsSet?e:au(e,e.getTime()-lu(e)-r)}incompatibleTokens=["t","T","X"]},t:new class extends Hu{priority=40;parse(e){return bp(e)}set(e,t,r){return[au(e,1e3*r),{timestampIsSet:!0}]}incompatibleTokens="*"},T:new class extends Hu{priority=20;parse(e){return bp(e)}set(e,t,r){return[au(e,r),{timestampIsSet:!0}]}incompatibleTokens="*"}},Tp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Pp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Op=/^'([^]*?)'?$/,zp=/''/g,qp=/\S/,Dp=/[a-zA-Z]/;function Ip(e){return e.match(Op)[1].replace(zp,"'")}function Lp(e,t){return iu(e,t?.in).getDay()}function Rp(e,t,r){const[n,s]=cu(r?.in,e,t);return+du(n)===+du(s)}function $p(e,t){return Rp(au(t?.in||e,e),function(e){return au(e,Date.now())}(t?.in||e))}function Bp(e,t){const r=iu(e,t?.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function Fp(e,t){const[r,n]=cu(e,t.start,t.end);return{start:r,end:n}}function Up(e,t){const r=iu(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function Wp(e,t){return iu(e,t?.in).getDate()}function Hp(e,t,r){return function(e,t,r){return au(r?.in||e,+iu(e)+t)}(e,t*su,r)}const Qp={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dÃ­a",other:"{{count}} dÃ­as"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 aÃ±o",other:"alrededor de {{count}} aÃ±os"},xYears:{one:"1 aÃ±o",other:"{{count}} aÃ±os"},overXYears:{one:"mÃ¡s de 1 aÃ±o",other:"mÃ¡s de {{count}} aÃ±os"},almostXYears:{one:"casi 1 aÃ±o",other:"casi {{count}} aÃ±os"}},Vp={date:Qd({formats:{full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},defaultWidth:"full"}),time:Qd({formats:{full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:Qd({formats:{full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Yp={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'maÃ±ana a la' p",nextWeek:"eeee 'a la' p",other:"P"},Kp={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'maÃ±ana a las' p",nextWeek:"eeee 'a las' p",other:"P"},Gp={ordinalNumber:(e,t)=>Number(e)+"Âº",era:Kd({values:{narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","despuÃ©s de cristo"]},defaultWidth:"wide"}),quarter:Kd({values:{narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1Âº trimestre","2Âº trimestre","3Âº trimestre","4Âº trimestre"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Kd({values:{narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},defaultWidth:"wide"}),day:Kd({values:{narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sÃ¡"],abbreviated:["dom","lun","mar","miÃ©","jue","vie","sÃ¡b"],wide:["domingo","lunes","martes","miÃ©rcoles","jueves","viernes","sÃ¡bado"]},defaultWidth:"wide"}),dayPeriod:Kd({values:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"maÃ±ana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"maÃ±ana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"maÃ±ana",afternoon:"tarde",evening:"tarde",night:"noche"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la maÃ±ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la maÃ±ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la maÃ±ana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},defaultFormattingWidth:"wide"})},Xp={ordinalNumber:Jd({matchPattern:/^(\d+)(Âº)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:Xd({matchPatterns:{narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uÃº]n|despu[eÃ©]s de cristo|era com[uÃº]n)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uÃº]n)/i,/^(despu[eÃ©]s de cristo|era com[uÃº]n)/i]},defaultParseWidth:"any"}),quarter:Xd({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](Âº)? trimestre/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Xd({matchPatterns:{narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},defaultParseWidth:"any"}),day:Xd({matchPatterns:{narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[Ã¡a])/i,abbreviated:/^(dom|lun|mar|mi[Ã©e]|jue|vie|s[Ã¡a]b)/i,wide:/^(domingo|lunes|martes|mi[Ã©e]rcoles|jueves|viernes|s[Ã¡a]bado)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Xd({matchPatterns:{narrow:/^(a|p|mn|md|(de la|a las) (maÃ±ana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (maÃ±ana|tarde|noche))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/maÃ±ana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},defaultParseWidth:"any"})},Jp={code:"es",formatDistance:(e,t,r)=>{let n;const s=Qp[e];return n="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"en "+n:"hace "+n:n},formatLong:Vp,formatRelative:(e,t,r,n)=>1!==t.getHours()?Kp[e]:Yp[e],localize:Gp,match:Xp,options:{weekStartsOn:1,firstWeekContainsDate:1}},Zp={en:eu,es:Jp},ef=function(e){var t=e.startOfWeek,r=e.getDay,n=e.format,s=e.locales;return new xc({formats:Wd,firstOfWeek:function(e){return r(t(new Date,{locale:s[e]}))},format:function(e,t,r){return n(new Date(e),t,{locale:s[r]})}})}({format:$u,parse:function(e,t,r,n){const s=()=>au(n?.in||r,NaN),o=Object.assign({},ru()),a=n?.locale??o.locale??eu,i=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0;if(!t)return e?s():iu(r,n?.in);const c={firstWeekContainsDate:i,weekStartsOn:l,locale:a},d=[new Wu(n?.in,r)],u=t.match(Pp).map(e=>{const t=e[0];return t in Su?(0,Su[t])(e,a.formatLong):e}).join("").match(Tp),p=[];for(let r of u){!n?.useAdditionalWeekYearTokens&&Pu(r)&&Ou(r,t,e),!n?.useAdditionalDayOfYearTokens&&Tu(r)&&Ou(r,t,e);const o=r[0],i=Mp[o];if(i){const{incompatibleTokens:t}=i;if(Array.isArray(t)){const e=p.find(e=>t.includes(e.token)||e.token===o);if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${r}\` at the same time`)}else if("*"===i.incompatibleTokens&&p.length>0)throw new RangeError(`The format string mustn't contain \`${r}\` and any other token at the same time`);p.push({token:o,fullToken:r});const n=i.run(e,r,a.match,c);if(!n)return s();d.push(n.setter),e=n.rest}else{if(o.match(Dp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");if("''"===r?r="'":"'"===o&&(r=Ip(r)),0!==e.indexOf(r))return s();e=e.slice(r.length)}}if(e.length>0&&qp.test(e))return s();const f=d.map(e=>e.priority).sort((e,t)=>t-e).filter((e,t,r)=>r.indexOf(e)===t).map(e=>d.filter(t=>t.priority===e).sort((e,t)=>t.subPriority-e.subPriority)).map(e=>e[0]);let m=iu(r,n?.in);if(isNaN(+m))return s();const h={};for(const e of f){if(!e.validate(m,c))return s();const t=e.set(m,h,c);Array.isArray(t)?(m=t[0],Object.assign(h,t[1])):m=t}return m},startOfWeek:(e,t)=>fu(e,{...t,weekStartsOn:1}),getDay:Lp,locales:Zp}),tf=(e,t,r=null)=>{const n={video:{bg:"#EF4444",border:"#DC2626",text:"#FFFFFF"},quiz:{bg:"#3B82F6",border:"#2563EB",text:"#FFFFFF"},test:{bg:"#3B82F6",border:"#2563EB",text:"#FFFFFF"},pdf:{bg:"#10B981",border:"#059669",text:"#FFFFFF"},note:{bg:r||"#8B5CF6",border:r||"#7C3AED",text:"#FFFFFF"},live_class:{bg:"#EF4444",border:"#DC2626",text:"#FFFFFF"},default:{bg:"#8B5CF6",border:"#7C3AED",text:"#FFFFFF"}};return n[e]||n.default},rf=({event:e})=>(0,be.jsx)("div",{className:"flex items-center gap-1 text-xs overflow-hidden px-1",children:(0,be.jsx)("span",{className:"truncate font-medium",children:e.title})}),nf=({date:e,events:t,pageColors:r,getColor:n,isDarkMode:s,t:o,onSelectEvent:a})=>{const i=fu(e,{weekStartsOn:1}),l=Array.from({length:7},(e,t)=>{const r=new Date(i);return r.setDate(i.getDate()+t),r}),c=Zp.es;return(0,be.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-2 p-4 rounded-xl border-2",style:{backgroundColor:r.bgCard,borderColor:n("borderColor","#e5e7eb")},children:l.map((e,o)=>{const i=(e=>t.filter(t=>Rp(new Date(t.start),e)))(e),l=$p(e);return(0,be.jsxs)("div",{className:"flex flex-col rounded-lg overflow-hidden border",style:{borderColor:l?r.accent:s?"rgba(255,255,255,0.1)":n("borderColor","#e5e7eb"),borderWidth:l?"2px":"1px"},children:[(0,be.jsxs)("div",{className:"px-2 py-2 text-center",style:{backgroundColor:l?r.accent:r.bgSubtle,color:l?"#ffffff":r.text},children:[(0,be.jsx)("div",{className:"text-xs font-medium uppercase",children:$u(e,"EEE",{locale:c})}),(0,be.jsx)("div",{className:"text-lg font-bold",children:$u(e,"d")})]}),(0,be.jsx)("div",{className:"flex-1 p-2 space-y-1 min-h-[60px] md:min-h-[120px]",style:{backgroundColor:r.bgCard},children:0===i.length?(0,be.jsx)("div",{className:"text-xs text-center py-4",style:{color:r.textMuted},children:"-"}):i.map((e,t)=>{const r=e.isNote?{bg:e.color,text:"#FFFFFF"}:tf(e.lessonType),n=e.isNote&&e.isLiveClass,s=e.isNote&&!e.isLiveClass;return(0,be.jsx)("div",{className:"text-xs p-1.5 truncate cursor-pointer hover:opacity-80 transition-opacity "+(s?"rounded-full":"rounded"),style:{backgroundColor:n?e.color+"20":r.bg,color:n?e.color:r.text,border:n?`2px dashed ${e.color}`:"none"},title:e.title,onClick:()=>a&&a(e),children:e.title},t)})})]},o)})})},sf=({date:e,events:t,pageColors:n,getColor:s,isDarkMode:o,t:a,onSelectEvent:i})=>{e.getFullYear();const l=function(e,t){const{start:r,end:n}=Fp(t?.in,e);let s=+r>+n;const o=s?+r:+n,a=s?n:r;a.setHours(0,0,0,0),a.setDate(1);let i=t?.step??1;if(!i)return[];i<0&&(i=-i,s=!s);const l=[];for(;+a<=o;)l.push(au(r,a)),a.setMonth(a.getMonth()+i);return s?l.reverse():l}({start:uu(e),end:Bp(e)}),c=Zp.es,d=(0,r.useMemo)(()=>{const e=new Map;return t.forEach(t=>{const r=$u(new Date(t.start),"yyyy-MM-dd");e.has(r)||e.set(r,[]),e.get(r).push(t)}),e},[t]),[u,p]=(0,r.useState)({show:!1,x:0,y:0,events:[],date:null}),f=()=>{p({show:!1,x:0,y:0,events:[],date:null})};return(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-4 rounded-xl border-2",style:{backgroundColor:n.bgCard,borderColor:s("borderColor","#e5e7eb")},children:l.map((e,t)=>{const r=function(e,t){const r=iu(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}(e),s=function(e,t){const{start:r,end:n}=Fp(t?.in,e);let s=+r>+n;const o=s?+r:+n,a=s?n:r;a.setHours(0,0,0,0);let i=t?.step??1;if(!i)return[];i<0&&(i=-i,s=!s);const l=[];for(;+a<=o;)l.push(au(r,a)),a.setDate(a.getDate()+i),a.setHours(0,0,0,0);return s?l.reverse():l}({start:r,end:Up(e)}),o=(Lp(r)+6)%7;return(0,be.jsxs)("div",{className:"p-2",children:[(0,be.jsx)("div",{className:"text-sm font-semibold mb-2 text-center capitalize",style:{color:n.text},children:$u(e,"MMMM",{locale:c})}),(0,be.jsx)("div",{className:"grid grid-cols-7 gap-0.5 mb-1",children:["L","M","X","J","V","S","D"].map((e,t)=>(0,be.jsx)("div",{className:"text-[9px] text-center font-medium",style:{color:n.textMuted},children:e},t))}),(0,be.jsxs)("div",{className:"grid grid-cols-7 gap-0.5",children:[Array.from({length:o}).map((e,t)=>(0,be.jsx)("div",{className:"w-5 h-5"},`empty-${t}`)),s.map((e,t)=>{const r=$u(e,"yyyy-MM-dd"),s=d.get(r)||[],o=s.length>0,a=$p(e);return(0,be.jsx)("div",{className:"w-5 h-5 flex items-center justify-center text-[10px] rounded relative "+(o?"cursor-pointer":"cursor-default"),style:{backgroundColor:a?n.accent:o?"#3B82F6":"transparent",color:a||o?"#ffffff":n.text},onMouseEnter:t=>((e,t,r)=>{if(r.length>0){const n=e.currentTarget.getBoundingClientRect();p({show:!0,x:n.left+n.width/2,y:n.top-10,events:r,date:t})}})(t,e,s),onMouseLeave:f,onClick:()=>{o&&i&&1===s.length&&i(s[0])},children:(0,be.jsx)("span",{style:{opacity:o||a?1:.6},children:Wp(e)})},t)})]})]},t)})}),u.show&&(0,be.jsxs)("div",{className:"fixed z-50 px-3 py-2 rounded-lg shadow-lg max-w-xs",style:{left:u.x,top:u.y,transform:"translate(-50%, -100%)",backgroundColor:o?"#1f2937":"#ffffff",border:`1px solid ${o?"rgba(255,255,255,0.1)":s("borderColor","#e5e7eb")}`},children:[(0,be.jsx)("div",{className:"text-xs font-semibold mb-1",style:{color:n.text},children:u.date&&$u(u.date,"d MMMM yyyy",{locale:c})}),u.events.map((e,t)=>{const r=e.isNote?{bg:e.color}:tf(e.lessonType);return(0,be.jsxs)("div",{className:"text-xs py-0.5 flex items-center gap-1 cursor-pointer hover:opacity-80",style:{color:n.text},onClick:()=>i&&i(e),children:[(0,be.jsx)("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.bg}}),(0,be.jsx)("span",{className:"truncate",children:e.title})]},t)})]})]})},of=({label:e,onNavigate:t,onView:r,view:n,views:s,pageColors:a,getColor:i,isDarkMode:l})=>{const{t:c}=(0,o.Bd)(),d={month:c("calendar.month","Mes"),week:c("calendar.week","Semana"),year:c("calendar.year","AÃ±o")};return(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-4 p-3 rounded-xl border-2",style:{backgroundColor:a.bgCard,borderColor:i("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("button",{onClick:()=>t("TODAY"),className:"px-4 py-2 text-sm font-medium rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:a.primaryBg,color:"#ffffff"},children:c("calendar.today","Hoy")}),(0,be.jsx)("button",{onClick:()=>t("PREV"),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:a.hoverBg},"aria-label":c("calendar.previous","Anterior"),children:(0,be.jsx)(We.A,{size:20,style:{color:a.text}})}),(0,be.jsx)("button",{onClick:()=>t("NEXT"),className:"p-2 rounded-lg transition-colors",style:{backgroundColor:a.hoverBg},"aria-label":c("calendar.next","Siguiente"),children:(0,be.jsx)(ur.A,{size:20,style:{color:a.text}})})]}),(0,be.jsx)("h2",{className:"text-lg font-semibold capitalize",style:{color:a.text},children:e}),(0,be.jsx)("div",{className:"flex rounded-lg overflow-hidden border-2",style:{borderColor:i("borderColor","#e5e7eb")},children:s.map(e=>(0,be.jsx)("button",{onClick:()=>r(e),className:"px-3 py-1.5 text-sm font-medium transition-colors",style:{backgroundColor:n===e?a.primaryBg:a.bgSubtle,color:n===e?"#ffffff":a.text},children:d[e]||e},e))})]})},af=({lessons:e=[],calendarNotes:t=[],onSelectLesson:n,onSelectNote:s,defaultView:a="month",pageColors:i,getColor:l,isDarkMode:c})=>{const{t:d,i18n:u}=(0,o.Bd)(),[p,f]=(0,r.useState)(a),[m,h]=(0,r.useState)(new Date),g=(0,r.useMemo)(()=>{const r=[];e.forEach(e=>{(e.meta?._lesson_steps||[]).forEach((t,n)=>{if(t.start_date){const s=new Date(t.start_date);s.setHours(0,0,0,0);const o=Hp(s,24),a=t.type||"default";if("default"===a)return;const i=tf(a),l=e.title?.rendered||e.title||"",c=t.title||`${d("calendar.step","Paso")} ${n+1}`;r.push({id:`step-${e.id}-${n}`,title:`${l}: ${c}`,start:s,end:o,allDay:!0,lessonType:a,lesson:e,step:t,stepIndex:n,isNote:!1,isStep:!0,color:i.bg,borderColor:i.border,textColor:i.text})}})});const n=e.filter(e=>{const t=(e.meta?._lesson_steps||[]).some(e=>e.start_date),r=e.meta?._lesson_type||"default";return e.meta?._start_date&&!t&&"default"!==r}).map(e=>{const t=new Date(e.meta._start_date);t.setHours(0,0,0,0);const r=Hp(t,24),n=e.meta?._lesson_type||"default",s=tf(n);return{id:`lesson-${e.id}`,title:e.title?.rendered||e.title||d("calendar.untitledLesson","LecciÃ³n sin tÃ­tulo"),start:t,end:r,allDay:!0,lessonType:n,lesson:e,isNote:!1,isStep:!1,color:s.bg,borderColor:s.border,textColor:s.text}}),s=t.map(e=>{const t=new Date(e.note_date);if("live_class"===e.type&&e.time){const[r,n]=e.time.split(":");t.setHours(parseInt(r,10),parseInt(n,10),0,0)}else t.setHours(0,0,0,0);const r="live_class"===e.type&&e.time?Hp(t,1):Hp(t,24),n="live_class"===e.type;return{id:`note-${e.id}`,title:e.title,start:t,end:r,allDay:!n||!e.time,lessonType:n?"live_class":"note",note:e,isNote:!0,isLiveClass:n,isStep:!1,color:e.color||(n?"#EF4444":"#8B5CF6"),borderColor:e.color||(n?"#DC2626":"#7C3AED"),textColor:"#FFFFFF"}});return[...r,...n,...s]},[e,t,d,c]),x=((0,r.useMemo)(()=>e.filter(e=>{const t=!!e.meta?._start_date,r=(e.meta?._lesson_steps||[]).some(e=>e.start_date);return!t&&!r}).length,[e]),(0,r.useCallback)(e=>{const t=e.isNote&&e.isLiveClass,r=e.isNote&&!e.isLiveClass;return t?{style:{backgroundColor:e.color+"20",color:e.color,borderRadius:"6px",border:`2px dashed ${e.color}`,fontSize:"12px",padding:"2px 6px",cursor:"pointer"}}:{style:{backgroundColor:e.color,borderColor:e.borderColor,color:e.textColor,borderRadius:r?"9999px":"6px",border:`2px solid ${e.borderColor}`,fontSize:"12px",padding:r?"2px 8px":"2px 6px",cursor:"pointer"}}},[])),y=(0,r.useCallback)(e=>{e.isNote&&s?s(e.note):!e.isNote&&n&&n(e)},[n,s]),b=(0,r.useMemo)(()=>({today:d("calendar.today","Hoy"),previous:d("calendar.previous","Anterior"),next:d("calendar.next","Siguiente"),month:d("calendar.month","Mes"),week:d("calendar.week","Semana"),year:d("calendar.year","AÃ±o"),date:d("calendar.date","Fecha"),time:d("calendar.time","Hora"),event:d("calendar.event","Evento"),noEventsInRange:d("calendar.noEventsInRange","No hay lecciones programadas en este perÃ­odo."),showMore:e=>d("calendar.showMore","+ {{count}} mÃ¡s",{count:e})}),[d]),v=u.language?.startsWith("es")?"es":"en",j=(0,r.useCallback)(e=>{f(e)},[]),w=(0,r.useCallback)(e=>{const t=new Date(m);if("TODAY"===e)return void h(new Date);const r="NEXT"===e?1:-1;"month"===p?t.setMonth(t.getMonth()+r):"week"===p?t.setDate(t.getDate()+7*r):"year"===p&&t.setFullYear(t.getFullYear()+r),h(t)},[m,p]),N=(0,r.useCallback)(()=>{const e=u.language?.startsWith("es")?Zp.es:Zp.en;if("month"===p)return $u(m,"MMMM yyyy",{locale:e});if("week"===p){const t=fu(m,{weekStartsOn:1}),r=new Date(t);return r.setDate(t.getDate()+6),`${$u(t,"d MMM",{locale:e})} - ${$u(r,"d MMM yyyy",{locale:e})}`}return"year"===p?$u(m,"yyyy",{locale:e}):""},[m,p,u.language]),k=(0,r.useCallback)(e=>(0,be.jsx)(of,{...e,label:N(),view:p,views:["week","month","year"],onView:j,onNavigate:w,pageColors:i,getColor:l,isDarkMode:c}),[i,l,c,p,j,w,N]);return(0,be.jsxs)("div",{className:"lesson-calendar",children:[(0,be.jsx)(k,{}),"month"===p&&(0,be.jsx)("div",{className:"rounded-xl border-2 p-4",style:{minHeight:"500px",backgroundColor:i.bgCard,borderColor:l("borderColor","#e5e7eb")},children:(0,be.jsx)(Fd,{localizer:ef,events:g,startAccessor:"start",endAccessor:"end",style:{height:500},view:"month",date:m,onNavigate:h,views:["month"],eventPropGetter:x,onSelectEvent:y,messages:b,culture:v,components:{toolbar:()=>null,event:rf},popup:!0,selectable:!1})}),"week"===p&&(0,be.jsx)(nf,{date:m,events:g,pageColors:i,getColor:l,isDarkMode:c,t:d,onSelectEvent:y}),"year"===p&&(0,be.jsx)(sf,{date:m,events:g,pageColors:i,getColor:l,isDarkMode:c,t:d,onSelectEvent:y}),(0,be.jsx)("style",{children:`\n        .rbc-calendar {\n          font-family: inherit;\n        }\n        .rbc-toolbar {\n          display: none;\n        }\n        .rbc-header {\n          padding: 10px 4px;\n          font-weight: 600;\n          font-size: 13px;\n          border-bottom: 1px solid ${c?"rgba(255,255,255,0.1)":l("borderColor","#e5e7eb")};\n          background: ${i.bgSubtle};\n          color: ${i.text};\n        }\n        .rbc-month-view {\n          border: 1px solid ${c?"rgba(255,255,255,0.1)":l("borderColor","#e5e7eb")};\n          border-radius: 8px;\n          overflow: hidden;\n        }\n        .rbc-month-row {\n          border-top: 1px solid ${c?"rgba(255,255,255,0.1)":l("borderColor","#e5e7eb")};\n        }\n        .rbc-day-bg {\n          background: ${i.bgCard};\n        }\n        .rbc-day-bg + .rbc-day-bg {\n          border-left: 1px solid ${c?"rgba(255,255,255,0.1)":l("borderColor","#e5e7eb")};\n        }\n        .rbc-today {\n          background-color: ${i.accent}20 !important;\n        }\n        .rbc-off-range-bg {\n          background-color: ${i.bgSubtle};\n        }\n        .rbc-date-cell {\n          padding: 4px 8px;\n          text-align: right;\n          font-size: 13px;\n          color: ${i.text};\n        }\n        .rbc-date-cell.rbc-off-range {\n          color: ${i.textMuted};\n        }\n        .rbc-date-cell.rbc-now {\n          font-weight: 700;\n        }\n        .rbc-date-cell.rbc-now > a,\n        .rbc-date-cell.rbc-now > button {\n          background-color: ${i.accent} !important;\n          background: ${i.accent} !important;\n          color: #ffffff !important;\n          padding: 2px 6px !important;\n          border-radius: 4px !important;\n          font-weight: 700 !important;\n        }\n        .rbc-date-cell > a,\n        .rbc-date-cell > button,\n        .rbc-date-cell a,\n        .rbc-date-cell button {\n          background-color: transparent !important;\n          background: transparent !important;\n          color: ${i.text} !important;\n          pointer-events: none !important;\n          cursor: default !important;\n          text-decoration: none !important;\n          font-weight: 600 !important;\n          border: none !important;\n          box-shadow: none !important;\n          outline: none !important;\n          padding: 0 !important;\n          margin: 0 !important;\n        }\n        .rbc-date-cell > a:hover,\n        .rbc-date-cell > a:focus,\n        .rbc-date-cell > a:active,\n        .rbc-date-cell > button:hover,\n        .rbc-date-cell > button:focus,\n        .rbc-date-cell > button:active,\n        .rbc-date-cell a:hover,\n        .rbc-date-cell button:hover {\n          background-color: transparent !important;\n          background: transparent !important;\n          color: ${i.text} !important;\n          text-decoration: none !important;\n          outline: none !important;\n          box-shadow: none !important;\n        }\n        .rbc-date-cell.rbc-off-range > a,\n        .rbc-date-cell.rbc-off-range > button {\n          color: ${i.textMuted} !important;\n        }\n        .rbc-event {\n          cursor: pointer;\n          pointer-events: auto;\n        }\n        .rbc-event:hover {\n          opacity: 0.85;\n        }\n        .rbc-day-bg {\n          cursor: default;\n        }\n        .rbc-show-more {\n          color: ${l("primary","#3b82f6")};\n          font-weight: 500;\n          font-size: 12px;\n          background: transparent;\n          cursor: pointer;\n          pointer-events: auto;\n        }\n        .rbc-row-content {\n          z-index: 1;\n        }\n        .rbc-overlay {\n          background: ${i.bgCard};\n          border: 1px solid ${c?"rgba(255,255,255,0.1)":l("borderColor","#e5e7eb")};\n          border-radius: 8px;\n          box-shadow: 0 10px 25px rgba(0,0,0,0.2);\n          padding: 8px;\n          z-index: 100;\n        }\n        .rbc-overlay-header {\n          color: ${i.text};\n          font-weight: 600;\n          padding: 4px 8px;\n          border-bottom: 1px solid ${c?"rgba(255,255,255,0.1)":l("borderColor","#e5e7eb")};\n          margin-bottom: 4px;\n        }\n      `})]})},lf=(0,le.A)("sticky-note",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]),cf=({lesson:e,onClose:t,pageColors:r,getColor:n,isDarkMode:s})=>{const{t:a}=(0,o.Bd)();if(!e)return null;const i=e.meta?._lesson_type||"default",l=e.meta?._start_date?new Date(e.meta._start_date).toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"}):a("calendar.noDate","Sin fecha"),c={video:a("lessons.types.video","Video"),test:a("lessons.types.test","Test"),pdf:a("lessons.types.pdf","PDF"),default:a("lessons.types.lesson","LecciÃ³n")},d="video"===i?Me.A:"test"===i?ce:ie.A;return(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t,children:(0,be.jsxs)("div",{className:"rounded-xl shadow-2xl max-w-md w-full p-6 transform transition-all",style:{backgroundColor:r.bgCard},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:r.hoverBg},children:(0,be.jsx)(d,{size:24,style:{color:r.text}})}),(0,be.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full",style:{backgroundColor:r.hoverBg,color:r.text},children:c[i]||c.default})]}),(0,be.jsx)("button",{onClick:t,className:"p-2 rounded-lg transition-colors",style:{backgroundColor:r.hoverBg},children:(0,be.jsx)(xe.A,{size:18,style:{color:r.text}})})]}),(0,be.jsx)("h3",{className:"text-xl font-bold mb-4",style:{color:r.text},children:e.title?.rendered||e.title||a("calendar.untitledLesson","LecciÃ³n sin tÃ­tulo")}),(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:r.bgSubtle},children:[(0,be.jsx)(sr.A,{size:18,style:{color:r.textMuted}}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-xs",style:{color:r.textMuted},children:a("calendar.startDate","Fecha de inicio")}),(0,be.jsx)("div",{className:"font-semibold",style:{color:r.text},children:l})]})]}),void 0!==e.meta?._lesson_order&&(0,be.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{backgroundColor:r.bgSubtle},children:[(0,be.jsx)("span",{className:"text-sm font-mono",style:{color:r.textMuted},children:"#"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-xs",style:{color:r.textMuted},children:a("calendar.order","Orden")}),(0,be.jsx)("div",{className:"font-semibold",style:{color:r.text},children:e.meta._lesson_order})]})]})]}),(0,be.jsx)("div",{className:"mt-6 pt-4 border-t",style:{borderColor:s?"rgba(255,255,255,0.1)":n("borderColor","#e5e7eb")},children:(0,be.jsx)("button",{onClick:t,className:"w-full py-2.5 px-4 font-medium rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:r.primaryBg,color:"#ffffff"},children:a("common.close","Cerrar")})})]})})},df=({note:e,onSave:t,onDelete:n,onClose:s,pageColors:o,getColor:a,isDarkMode:i,t:l,isEditing:c})=>{const[d,u]=(0,r.useState)(e?.title||""),[p,f]=(0,r.useState)(e?.description||""),[m,h]=(0,r.useState)(e?.note_date||(new Date).toISOString().split("T")[0]),[g,x]=(0,r.useState)(e?.color||"#8B5CF6"),[y,b]=(0,r.useState)(!1);return(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,children:(0,be.jsxs)("div",{className:"rounded-xl shadow-2xl max-w-md w-full p-6",style:{backgroundColor:o.bgCard},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:g+"20"},children:(0,be.jsx)(lf,{size:24,style:{color:g}})}),(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:o.text},children:c?l("calendar.editNote","Editar nota"):l("calendar.newNote","Nueva nota")})]}),(0,be.jsx)("button",{onClick:s,className:"p-2 rounded-lg transition-colors",style:{backgroundColor:o.hoverBg},children:(0,be.jsx)(xe.A,{size:18,style:{color:o.text}})})]}),(0,be.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d.trim()&&m){b(!0);try{await t({title:d.trim(),description:p.trim(),note_date:m,color:g})}finally{b(!1)}}},className:"space-y-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:o.text},children:[l("calendar.noteTitle","TÃ­tulo")," *"]}),(0,be.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 rounded-lg border-2 focus:outline-none transition-colors",style:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f9fafb",borderColor:i?"rgba(255,255,255,0.1)":a("borderColor","#e5e7eb"),color:o.text},placeholder:l("calendar.noteTitlePlaceholder","Ej: Examen parcial"),required:!0})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:o.text},children:l("calendar.noteDescription","DescripciÃ³n")}),(0,be.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),rows:3,className:"w-full px-3 py-2 rounded-lg border-2 focus:outline-none transition-colors resize-none",style:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f9fafb",borderColor:i?"rgba(255,255,255,0.1)":a("borderColor","#e5e7eb"),color:o.text},placeholder:l("calendar.noteDescriptionPlaceholder","AÃ±ade una descripciÃ³n opcional...")})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:o.text},children:[l("calendar.noteDate","Fecha")," *"]}),(0,be.jsx)("input",{type:"date",value:m,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 rounded-lg border-2 focus:outline-none transition-colors",style:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f9fafb",borderColor:i?"rgba(255,255,255,0.1)":a("borderColor","#e5e7eb"),color:o.text},required:!0})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:o.text},children:l("calendar.noteColor","Color")}),(0,be.jsx)("div",{className:"flex gap-2 flex-wrap",children:["#8B5CF6","#3B82F6","#10B981","#F59E0B","#EF4444","#EC4899","#6366F1","#14B8A6"].map(e=>(0,be.jsx)("button",{type:"button",onClick:()=>x(e),className:"w-8 h-8 rounded-full transition-transform "+(g===e?"scale-110 ring-2 ring-offset-2":""),style:{backgroundColor:e,ringColor:e,ringOffsetColor:o.bgCard}},e))})]}),(0,be.jsxs)("div",{className:"flex gap-3 pt-4",children:[c&&n&&(0,be.jsxs)("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",style:{backgroundColor:"#ef4444",color:"#fff"},children:[(0,be.jsx)(pr.A,{size:16}),l("common.delete","Eliminar")]}),(0,be.jsx)("button",{type:"button",onClick:s,className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors",style:{backgroundColor:o.hoverBg,color:o.text},children:l("common.cancel","Cancelar")}),(0,be.jsx)("button",{type:"submit",disabled:y||!d.trim(),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-opacity hover:opacity-90 disabled:opacity-50",style:{backgroundColor:o.primaryBg,color:"#fff"},children:y?l("common.saving","Guardando..."):l("common.save","Guardar")})]})]})]})})},uf=({liveClass:e,onSave:t,onDelete:n,onClose:s,pageColors:o,getColor:a,isDarkMode:i,t:l,isEditing:c})=>{const[d,u]=(0,r.useState)(e?.title||""),[p,f]=(0,r.useState)(e?.description||""),[m,h]=(0,r.useState)(e?.note_date||(new Date).toISOString().split("T")[0]),[g,x]=(0,r.useState)(e?.time?.substring(0,5)||""),[y,b]=(0,r.useState)(e?.link||""),[v,j]=(0,r.useState)(e?.color||"#EF4444"),[w,N]=(0,r.useState)(!1);return(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,children:(0,be.jsxs)("div",{className:"rounded-xl shadow-2xl max-w-md w-full p-6 max-h-[90vh] overflow-y-auto",style:{backgroundColor:o.bgCard},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:v+"20"},children:(0,be.jsx)(Me.A,{size:24,style:{color:v}})}),(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:o.text},children:c?l("calendar.editLiveClass","Editar clase"):l("calendar.newLiveClass","Nueva clase en directo")})]}),(0,be.jsx)("button",{onClick:s,className:"p-2 rounded-lg transition-colors",style:{backgroundColor:o.hoverBg},children:(0,be.jsx)(xe.A,{size:18,style:{color:o.text}})})]}),(0,be.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d.trim()&&m&&y.trim()){N(!0);try{await t({title:d.trim(),description:p.trim(),note_date:m,time:g||null,link:y.trim(),color:v,type:"live_class"})}finally{N(!1)}}},className:"space-y-4",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:o.text},children:[l("calendar.liveClassTitle","TÃ­tulo")," *"]}),(0,be.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 rounded-lg border-2 focus:outline-none transition-colors",style:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f9fafb",borderColor:i?"rgba(255,255,255,0.1)":a("borderColor","#e5e7eb"),color:o.text},placeholder:l("calendar.liveClassTitlePlaceholder","Ej: Clase de repaso tema 5"),required:!0})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:o.text},children:[l("calendar.liveClassLink","Enlace de la reuniÃ³n")," *"]}),(0,be.jsx)("input",{type:"url",value:y,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 rounded-lg border-2 focus:outline-none transition-colors",style:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f9fafb",borderColor:i?"rgba(255,255,255,0.1)":a("borderColor","#e5e7eb"),color:o.text},placeholder:"https://meet.google.com/... o https://teams.microsoft.com/...",required:!0})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:o.text},children:l("calendar.liveClassDescription","DescripciÃ³n")}),(0,be.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),rows:2,className:"w-full px-3 py-2 rounded-lg border-2 focus:outline-none transition-colors resize-none",style:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f9fafb",borderColor:i?"rgba(255,255,255,0.1)":a("borderColor","#e5e7eb"),color:o.text},placeholder:l("calendar.liveClassDescriptionPlaceholder","AÃ±ade una descripciÃ³n opcional...")})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{className:"block text-sm font-medium mb-1",style:{color:o.text},children:[l("calendar.liveClassDate","Fecha")," *"]}),(0,be.jsx)("input",{type:"date",value:m,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 rounded-lg border-2 focus:outline-none transition-colors",style:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f9fafb",borderColor:i?"rgba(255,255,255,0.1)":a("borderColor","#e5e7eb"),color:o.text},required:!0})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-1",style:{color:o.text},children:l("calendar.liveClassTime","Hora")}),(0,be.jsx)("input",{type:"time",value:g,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 rounded-lg border-2 focus:outline-none transition-colors",style:{backgroundColor:i?"rgba(255,255,255,0.05)":"#f9fafb",borderColor:i?"rgba(255,255,255,0.1)":a("borderColor","#e5e7eb"),color:o.text}})]})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:o.text},children:l("calendar.liveClassColor","Color")}),(0,be.jsx)("div",{className:"flex gap-2 flex-wrap",children:["#EF4444","#3B82F6","#10B981","#F59E0B","#8B5CF6","#EC4899","#6366F1","#14B8A6"].map(e=>(0,be.jsx)("button",{type:"button",onClick:()=>j(e),className:"w-8 h-8 rounded-full transition-transform "+(v===e?"scale-110 ring-2 ring-offset-2":""),style:{backgroundColor:e,ringColor:e,ringOffsetColor:o.bgCard}},e))})]}),(0,be.jsxs)("div",{className:"flex gap-3 pt-4",children:[c&&n&&(0,be.jsxs)("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2",style:{backgroundColor:"#ef4444",color:"#fff"},children:[(0,be.jsx)(pr.A,{size:16}),l("common.delete","Eliminar")]}),(0,be.jsx)("button",{type:"button",onClick:s,className:"flex-1 py-2 px-4 rounded-lg font-medium transition-colors",style:{backgroundColor:o.hoverBg,color:o.text},children:l("common.cancel","Cancelar")}),(0,be.jsx)("button",{type:"submit",disabled:w||!d.trim()||!y.trim(),className:"flex-1 py-2 px-4 rounded-lg font-medium transition-opacity hover:opacity-90 disabled:opacity-50",style:{backgroundColor:o.primaryBg,color:"#fff"},children:w?l("common.saving","Guardando..."):l("common.save","Guardar")})]})]})]})})},pf=({note:e,onClose:t,onEdit:r,pageColors:n,getColor:s,isDarkMode:o,t:a,isAdmin:i})=>{if(!e)return null;const l="live_class"===e.type,c=e.note_date?new Date(e.note_date).toLocaleDateString("es-ES",{day:"2-digit",month:"long",year:"numeric"}):"",d=e.time?e.time.substring(0,5):"";return(0,be.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t,children:(0,be.jsxs)("div",{className:"rounded-xl shadow-2xl max-w-md w-full p-6",style:{backgroundColor:n.bgCard},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:(e.color||"#8B5CF6")+"20"},children:l?(0,be.jsx)(Me.A,{size:24,style:{color:e.color||"#8B5CF6"}}):(0,be.jsx)(lf,{size:24,style:{color:e.color||"#8B5CF6"}})}),(0,be.jsx)("span",{className:"text-xs font-medium px-3 py-1 rounded-full",style:{backgroundColor:(e.color||"#8B5CF6")+"20",color:e.color||"#8B5CF6"},children:l?a("calendar.liveClass","Clase en directo"):a("calendar.note","Nota")})]}),(0,be.jsx)("button",{onClick:t,className:"p-2 rounded-lg transition-colors",style:{backgroundColor:n.hoverBg},children:(0,be.jsx)(xe.A,{size:18,style:{color:n.text}})})]}),(0,be.jsx)("h3",{className:"text-xl font-bold mb-4",style:{color:n.text},children:e.title}),e.description&&(0,be.jsx)("p",{className:"mb-4",style:{color:n.textMuted},children:e.description}),(0,be.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg mb-3",style:{backgroundColor:n.bgSubtle},children:[(0,be.jsx)(sr.A,{size:18,style:{color:n.textMuted}}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-xs",style:{color:n.textMuted},children:a("calendar.date","Fecha")}),(0,be.jsxs)("div",{className:"font-semibold",style:{color:n.text},children:[c,d&&` - ${d}`]})]})]}),l&&e.link&&(0,be.jsxs)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full p-3 rounded-lg font-medium transition-opacity hover:opacity-90",style:{backgroundColor:e.color||"#8B5CF6",color:"#fff"},children:[(0,be.jsx)(or.A,{size:18}),a("calendar.joinClass","Unirse a la clase")]}),(0,be.jsxs)("div",{className:"mt-6 pt-4 border-t flex gap-3",style:{borderColor:o?"rgba(255,255,255,0.1)":s("borderColor","#e5e7eb")},children:[i&&r&&(0,be.jsxs)("button",{onClick:r,className:"flex-1 py-2.5 px-4 font-medium rounded-lg transition-colors flex items-center justify-center gap-2",style:{backgroundColor:n.hoverBg,color:n.text},children:[(0,be.jsx)(rs.A,{size:16}),a("common.edit","Editar")]}),(0,be.jsx)("button",{onClick:t,className:(i&&r?"flex-1":"w-full")+" py-2.5 px-4 font-medium rounded-lg transition-opacity hover:opacity-90",style:{backgroundColor:n.primaryBg,color:"#ffffff"},children:a("common.close","Cerrar")})]})]})})},ff=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{lessons:a,loading:i,error:l}=(0,xt.H)({courseId:t,perPage:100}),c=(0,re.Zp)(),{isMobileMenuOpen:d,setIsMobileMenuOpen:u}=(0,re.KC)(),[p,f]=(0,r.useState)(null),m=xr(),[h,g]=(0,r.useState)([]),[x,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(null),[j,w]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[C,_]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(t){y(!0);try{const e=await xn(t);g(e)}catch(e){console.error("Error fetching calendar notes:",e)}finally{y(!1)}}})()},[t]);const S={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:n("textSecondary",s?"#9ca3af":"#6b7280"),accent:n("accent","#f59e0b"),bgCard:s?n("secondaryBackground","#1f2937"):"#ffffff",bgSubtle:s?"rgba(255,255,255,0.05)":`${n("primary","#1a202c")}05`,hoverBg:s?"rgba(255,255,255,0.1)":`${n("primary","#1a202c")}10`,hoverBgStrong:s?"rgba(255,255,255,0.15)":`${n("primary","#1a202c")}20`,primaryBg:n("primary","#1a202c")},E=(0,r.useCallback)(e=>{const{lesson:r,step:n,isStep:s,lessonType:o}=e;if(r)switch(s?n?.type||"default":o){case"quiz":case"test":n?.data?.quiz_id?c(`/courses/${t}/tests`,{state:{selectedQuizId:n.data.quiz_id,scrollToQuiz:!0,returnTo:`/courses/${t}/study-planner`}}):c(`/courses/${t}/tests`);break;case"video":c(`/courses/${t}/videos`,{state:{selectedLessonId:r.id,selectedStepIndex:e.stepIndex,returnTo:`/courses/${t}/study-planner`}});break;case"pdf":c(`/courses/${t}/material`,{state:{selectedLessonId:r.id,selectedStepIndex:e.stepIndex,returnTo:`/courses/${t}/study-planner`}});break;default:f(r)}},[t,c]),A=(0,r.useCallback)(()=>{f(null)},[]),M=(0,r.useCallback)(e=>{v(e)},[]),T=(0,r.useCallback)(()=>{v(null)},[]),P=(0,r.useCallback)(()=>{_(null),w(!0)},[]),O=((0,r.useCallback)(()=>{_(b),v(null),w(!0)},[b]),(0,r.useCallback)(async r=>{try{if(C){const e=await bn(t,C.id,r);g(t=>t.map(t=>t.id===C.id?e:t))}else{const n=await yn(t,r);g(e=>[...e,n]),Qt({course_id:parseInt(t),notification_type:"study_plan_note",title:e("studyPlanner.noteNotificationTitle","Nueva nota en el planificador"),message:r.title,related_object_id:n.id,related_object_type:"calendar_note"}).catch(()=>{})}w(!1),_(null)}catch(t){console.error("Error saving note:",t),alert(t.message||e("common.errorSaving","Error al guardar"))}},[C,t,e])),z=(0,r.useCallback)(async()=>{if(C&&confirm(e("calendar.confirmDeleteNote","Â¿Eliminar esta nota?")))try{await(async(e,t)=>{const r=`${(0,Ye.getApiConfig)().apiUrl}/quiz-extended/v1/courses/${e}/calendar-notes/${t}`;return gn(r,{method:"DELETE"})})(t,C.id),g(e=>e.filter(e=>e.id!==C.id)),w(!1),k(!1),_(null)}catch(t){console.error("Error deleting note:",t),alert(t.message||e("common.errorDeleting","Error al eliminar"))}},[C,t,e]),q=(0,r.useCallback)(()=>{_(null),k(!0)},[]),D=(0,r.useCallback)(()=>{"live_class"===b?.type?(_(b),v(null),k(!0)):(_(b),v(null),w(!0))},[b]),I=(0,r.useCallback)(async r=>{try{if(C){const e=await bn(t,C.id,r);g(t=>t.map(t=>t.id===C.id?e:t))}else{const n=await yn(t,r);g(e=>[...e,n]),Qt({course_id:parseInt(t),notification_type:"study_plan_live_class",title:e("studyPlanner.liveClassNotificationTitle","Nueva clase en directo"),message:r.title,related_object_id:n.id,related_object_type:"calendar_note"}).catch(()=>{})}k(!1),_(null)}catch(t){console.error("Error saving live class:",t),alert(t.message||e("common.errorSaving","Error al guardar"))}},[C,t,e]);return(0,be.jsxs)("div",{className:"flex h-full w-full",children:[(0,be.jsx)(vn,{isMobileMenuOpen:d,setIsMobileMenuOpen:u}),(0,be.jsxs)("div",{className:"flex-1 flex flex-col overflow-auto",style:{backgroundColor:n("secondaryBackground","#f3f4f6")},children:[(0,be.jsx)("header",{className:"px-6 py-3 border-b sticky top-0 z-[1] flex-shrink-0",style:{borderBottomColor:s?"rgba(255,255,255,0.1)":`${n("primary","#1a202c")}15`,backgroundColor:n("secondaryBackground","#f3f4f6")},children:(0,be.jsxs)("nav",{className:"flex items-center text-sm space-x-2",children:[(0,be.jsx)(re.N_,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:S.text},children:e("sidebar.courses","Cursos")}),(0,be.jsx)(ur.A,{size:16,style:{color:S.textMuted}}),(0,be.jsx)("span",{className:"font-medium",style:{color:S.text},children:e("courses.studyPlanner","Planificador")})]})}),(0,be.jsxs)("div",{className:"max-w-7xl w-full mx-auto px-4 py-6 pb-24",children:[(0,be.jsx)("div",{className:"mb-6",children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-3 rounded-xl",style:{backgroundColor:S.hoverBg},children:(0,be.jsx)(sr.A,{size:28,style:{color:S.text}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold",style:{color:S.text},children:e("courses.studyPlanner","Planificador")}),(0,be.jsx)("p",{className:"text-sm mt-1",style:{color:S.textMuted},children:e("calendar.description","Visualiza el calendario de lecciones del curso")})]})]}),m&&(0,be.jsxs)("div",{className:"flex gap-2",children:[(0,be.jsxs)("button",{onClick:q,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-opacity hover:opacity-90",style:{backgroundColor:"#EF4444",color:"#fff"},children:[(0,be.jsx)(Me.A,{size:18}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("calendar.addLiveClass","AÃ±adir clase")})]}),(0,be.jsxs)("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-opacity hover:opacity-90",style:{backgroundColor:"#8B5CF6",color:"#fff"},children:[(0,be.jsx)(Ie.A,{size:18}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("calendar.addNote","AÃ±adir nota")})]})]})]})}),(0,be.jsxs)("div",{className:"mb-6 p-4 rounded-xl border-2",style:{backgroundColor:S.bgCard,borderColor:s?"rgba(255,255,255,0.1)":n("borderColor","#e5e7eb")},children:[(0,be.jsx)("h3",{className:"text-sm font-semibold mb-3",style:{color:S.text},children:e("calendar.legend","Leyenda")}),(0,be.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#EF4444"}}),(0,be.jsx)(Me.A,{size:14,style:{color:S.textMuted}}),(0,be.jsx)("span",{className:"text-sm",style:{color:S.text},children:e("calendar.legendVideo","Video")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#3B82F6"}}),(0,be.jsx)(ce,{size:14,style:{color:S.textMuted}}),(0,be.jsx)("span",{className:"text-sm",style:{color:S.text},children:e("calendar.legendTest","Test")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#10B981"}}),(0,be.jsx)(on.A,{size:14,style:{color:S.textMuted}}),(0,be.jsx)("span",{className:"text-sm",style:{color:S.text},children:e("calendar.legendPdf","PDF")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:"#8B5CF6"}}),(0,be.jsx)(lf,{size:14,style:{color:S.textMuted}}),(0,be.jsx)("span",{className:"text-sm",style:{color:S.text},children:e("calendar.legendNote","Nota")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded border-2 border-dashed",style:{borderColor:"#EF4444",backgroundColor:"transparent"}}),(0,be.jsx)(Me.A,{size:14,style:{color:S.textMuted}}),(0,be.jsx)("span",{className:"text-sm",style:{color:S.text},children:e("calendar.legendLiveClass","Clase en directo")})]})]})]}),i&&(0,be.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,be.jsx)(et.A,{className:"w-8 h-8 animate-spin",style:{color:S.text}})}),l&&(0,be.jsx)("div",{className:"p-6 rounded-lg border-2",style:{backgroundColor:s?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderColor:"#ef4444",color:"#ef4444"},children:l.message}),!i&&!l&&0===a.length&&(0,be.jsxs)("div",{className:"p-12 text-center rounded-xl border-2",style:{backgroundColor:S.bgCard,borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsx)(sr.A,{size:64,className:"mx-auto mb-4",style:{color:S.textMuted}}),(0,be.jsx)("h3",{className:"text-xl font-semibold mb-2",style:{color:S.text},children:e("calendar.noLessons","No hay lecciones")}),(0,be.jsx)("p",{style:{color:S.textMuted},children:e("calendar.noLessonsDescription","Este curso aÃºn no tiene lecciones programadas.")})]}),!i&&!l&&a.length>0&&(0,be.jsx)(af,{lessons:a,onSelectLesson:E,defaultView:"week",pageColors:S,getColor:n,isDarkMode:s,calendarNotes:h,onSelectNote:M,isAdmin:m}),p&&(0,be.jsx)(cf,{lesson:p,onClose:A,pageColors:S,getColor:n,isDarkMode:s}),b&&(0,be.jsx)(pf,{note:b,onClose:T,onEdit:m?D:null,pageColors:S,getColor:n,isDarkMode:s,t:e,isAdmin:m}),j&&m&&(0,be.jsx)(df,{note:C,onSave:O,onDelete:C?z:null,onClose:()=>{w(!1),_(null)},pageColors:S,getColor:n,isDarkMode:s,t:e,isEditing:!!C}),N&&m&&(0,be.jsx)(uf,{liveClass:C,onSave:I,onDelete:C?z:null,onClose:()=>{k(!1),_(null)},pageColors:S,getColor:n,isDarkMode:s,t:e,isEditing:!!C})]})]})]})},mf=(0,le.A)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),hf=(0,le.A)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),gf=(0,le.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var xf=a(3540),yf=a(1464),bf=a(8245);const vf=({isOpen:e,onClose:t,mode:n="create",material:s=null,onSave:a,isLoading:i=!1})=>{const{t:l}=(0,o.Bd)(),{getColor:c,isDarkMode:d}=(0,se.DP)(),u="9999-12-31",[p,f]=(0,r.useState)({type:"pdf",title:"",start_date:"",data:{}}),m=p.start_date!==u,[h,g]=(0,r.useState)({}),[x,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)(0),N=(0,r.useRef)(null),k=(0,r.useRef)(!1),C=(0,r.useMemo)(()=>({text:d?c("textPrimary","#f9fafb"):c("primary","#1a202c"),textMuted:d?c("textSecondary","#9ca3af"):"#6b7280",accent:c("accent","#f59e0b"),primary:c("primary","#3b82f6"),background:d?c("background","#0f172a"):"#ffffff",secondaryBg:d?c("secondaryBackground","#1f2937"):"#f9fafb",border:d?"rgba(255,255,255,0.1)":c("borderColor","#e5e7eb"),inputBg:d?"rgba(255,255,255,0.05)":"#ffffff",inputBorder:d?"rgba(255,255,255,0.15)":"#d1d5db"}),[c,d]);(0,r.useEffect)(()=>{f(s&&"edit"===n?{type:s.type||"pdf",title:s.title||"",start_date:s.start_date||"",data:s.data||{}}:{type:"pdf",title:"",start_date:"",data:{}}),g({})},[s,n,e]);const _=(e,t)=>{f(r=>({...r,[e]:t})),h[e]&&g(t=>({...t,[e]:null}))},S=(e,t)=>{f(r=>({...r,data:{...r.data,[e]:t}}))},E=(0,r.useRef)(null),A=async()=>{try{const e=await(0,it.I)({title:l("supportMaterial.selectImage"),buttonText:l("common.select"),type:"image"});if(e&&e.url&&E.current){const t=E.current.getEditor(),r=t.getSelection(!0);t.insertEmbed(r.index,"image",e.url),t.setSelection(r.index+1)}}catch(e){console.error("Error selecting image:",e)}},M=(0,r.useMemo)(()=>({toolbar:{container:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{align:[]}],[{color:[]},{background:[]}],["link","image"],["clean"]],handlers:{image:A}}}),[l]);if(!e)return null;const T=(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("style",{children:`\n          .quill-editor-wrapper .ql-container {\n            border: none !important;\n            font-family: inherit;\n          }\n          \n          .quill-editor-wrapper .ql-editor {\n            min-height: 150px;\n            max-height: 250px;\n            overflow-y: auto;\n          }\n          \n          .quill-editor-wrapper .ql-toolbar {\n            border: none !important;\n            border-bottom: 1px solid ${C.inputBorder} !important;\n          }\n\n          .quill-editor-wrapper .ql-snow .ql-stroke {\n            stroke: ${C.text};\n          }\n\n          .quill-editor-wrapper .ql-snow .ql-fill {\n            fill: ${C.text};\n          }\n\n          .quill-editor-wrapper .ql-snow .ql-picker-label {\n            color: ${C.text};\n          }\n\n          .quill-editor-wrapper .ql-snow.ql-toolbar button:hover,\n          .quill-editor-wrapper .ql-snow .ql-toolbar button:hover,\n          .quill-editor-wrapper .ql-snow.ql-toolbar button:focus,\n          .quill-editor-wrapper .ql-snow .ql-toolbar button:focus,\n          .quill-editor-wrapper .ql-snow.ql-toolbar button.ql-active,\n          .quill-editor-wrapper .ql-snow .ql-toolbar button.ql-active {\n            background-color: ${C.accent}22;\n          }\n\n          .quill-editor-wrapper .ql-snow.ql-toolbar button:hover .ql-stroke,\n          .quill-editor-wrapper .ql-snow .ql-toolbar button:hover .ql-stroke,\n          .quill-editor-wrapper .ql-snow.ql-toolbar button.ql-active .ql-stroke,\n          .quill-editor-wrapper .ql-snow .ql-toolbar button.ql-active .ql-stroke {\n            stroke: ${C.accent};\n          }\n\n          .quill-editor-wrapper .ql-snow.ql-toolbar button:hover .ql-fill,\n          .quill-editor-wrapper .ql-snow .ql-toolbar button:hover .ql-fill,\n          .quill-editor-wrapper .ql-snow.ql-toolbar button.ql-active .ql-fill,\n          .quill-editor-wrapper .ql-snow .ql-toolbar button.ql-active .ql-fill {\n            fill: ${C.accent};\n          }\n\n          .quill-editor-wrapper .ql-editor.ql-blank::before {\n            color: ${C.textSecondary};\n            opacity: 0.5;\n          }\n        `}),(0,be.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e5},onMouseDown:e=>{k.current=e.target===e.currentTarget},onClick:e=>{e.target===e.currentTarget&&k.current&&t(),k.current=!1},children:(0,be.jsxs)("div",{style:{position:"relative",width:"100%",maxWidth:"672px",maxHeight:"90vh",borderRadius:"12px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",overflow:"hidden",display:"flex",flexDirection:"column",backgroundColor:C.background},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:`1px solid ${C.border}`},children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,be.jsx)("div",{style:{padding:"6px",borderRadius:"6px",backgroundColor:`${C.accent}15`},children:(0,be.jsx)(ie.A,{size:18,style:{color:C.accent}})}),(0,be.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:C.text,margin:0},children:l("create"===n?"supportMaterial.createMaterial":"supportMaterial.editMaterial")})]}),(0,be.jsx)("button",{type:"button",onClick:t,style:{padding:"6px",borderRadius:"6px",border:"none",background:"transparent",color:C.textMuted,cursor:"pointer",transition:"opacity 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>e.currentTarget.style.opacity="0.7",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:(0,be.jsx)(xe.A,{size:18})})]}),(0,be.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return p.title?.trim()||(e.title=l("supportMaterial.errors.titleRequired")),"pdf"!==p.type||p.data?.url||(e.pdfUrl=l("supportMaterial.errors.pdfRequired")),"text"!==p.type||p.data?.content?.trim()||(e.content=l("supportMaterial.errors.contentRequired")),g(e),0===Object.keys(e).length})()){y(!0);try{await a(p),t()}catch(e){console.error("Error saving material:",e),g({submit:e.message||l("supportMaterial.errors.saveFailed")})}finally{y(!1)}}},style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column"},children:[(0,be.jsxs)("div",{style:{padding:"16px",display:"flex",flexDirection:"column",gap:"14px"},children:[h.submit&&(0,be.jsxs)("div",{style:{padding:"12px",borderRadius:"8px",display:"flex",alignItems:"flex-start",gap:"8px",backgroundColor:"#fef2f2",border:"1px solid #fecaca"},children:[(0,be.jsx)(tt.A,{size:18,style:{color:"#ef4444",flexShrink:0,marginTop:"1px"}}),(0,be.jsx)("span",{style:{fontSize:"14px",color:"#991b1b"},children:h.submit})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:C.text},children:[l("supportMaterial.materialTitle")," *"]}),(0,be.jsx)("input",{type:"text",value:p.title,onChange:e=>_("title",e.target.value),placeholder:l("supportMaterial.materialTitlePlaceholder"),style:{width:"100%",padding:"10px 16px",borderRadius:"8px",fontSize:"14px",backgroundColor:C.inputBg,border:`1px solid ${h.title?"#ef4444":C.inputBorder}`,color:C.text,outline:"none",boxSizing:"border-box"}}),h.title&&(0,be.jsx)("span",{style:{fontSize:"12px",marginTop:"4px",display:"block",color:"#ef4444"},children:h.title})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:C.text},children:[l("supportMaterial.materialType")," *"]}),(0,be.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"12px"},children:[(0,be.jsxs)("button",{type:"button",onClick:()=>_("type","pdf"),style:{padding:"12px",borderRadius:"8px",border:`2px solid ${"pdf"===p.type?C.accent:C.border}`,backgroundColor:"pdf"===p.type?`${C.accent}10`:C.inputBg,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},children:[(0,be.jsx)(Fn,{size:18,style:{color:"pdf"===p.type?C.accent:C.textMuted}}),(0,be.jsxs)("div",{style:{textAlign:"left"},children:[(0,be.jsx)("div",{style:{fontWeight:"500",fontSize:"14px",color:C.text},children:"PDF"}),(0,be.jsx)("div",{style:{fontSize:"12px",color:C.textMuted},children:l("supportMaterial.pdfDescription")})]})]}),(0,be.jsxs)("button",{type:"button",onClick:()=>_("type","text"),style:{padding:"12px",borderRadius:"8px",border:`2px solid ${"text"===p.type?C.accent:C.border}`,backgroundColor:"text"===p.type?`${C.accent}10`:C.inputBg,cursor:"pointer",transition:"all 0.2s",display:"flex",alignItems:"center",gap:"8px"},children:[(0,be.jsx)(ie.A,{size:18,style:{color:"text"===p.type?C.accent:C.textMuted}}),(0,be.jsxs)("div",{style:{textAlign:"left"},children:[(0,be.jsx)("div",{style:{fontWeight:"500",fontSize:"14px",color:C.text},children:l("supportMaterial.textType")}),(0,be.jsx)("div",{style:{fontSize:"12px",color:C.textMuted},children:l("supportMaterial.textDescription")})]})]})]})]}),(0,be.jsxs)("div",{style:{padding:"14px",borderRadius:"8px",backgroundColor:C.secondaryBg,border:`1px solid ${C.border}`,display:"flex",flexDirection:"column",gap:"14px"},children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[m?(0,be.jsx)(cr.A,{size:16,style:{color:"#10b981"}}):(0,be.jsx)(xf.A,{size:16,style:{color:"#ef4444"}}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{style:{fontSize:"14px",fontWeight:"500",color:C.text},children:l("supportMaterial.visibility")}),(0,be.jsx)("div",{style:{fontSize:"12px",color:C.textMuted},children:l(m?"supportMaterial.visibleDescription":"supportMaterial.hiddenDescription")})]})]}),(0,be.jsx)("button",{type:"button",onClick:()=>_("start_date",m?u:""),style:{position:"relative",width:"44px",height:"24px",borderRadius:"12px",border:"none",backgroundColor:m?"#10b981":"#9ca3af",cursor:"pointer",transition:"background-color 0.2s",flexShrink:0},children:(0,be.jsx)("span",{style:{position:"absolute",top:"2px",left:m?"22px":"2px",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"#ffffff",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})})]}),m&&(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[(0,be.jsx)(sr.A,{size:14,style:{color:C.textMuted}}),(0,be.jsx)("label",{style:{fontSize:"14px",fontWeight:"500",color:C.text,margin:0},children:l("supportMaterial.unlockDate")})]}),(0,be.jsx)("input",{type:"date",value:(e=>{if(!e)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(e))return e;const t=new Date(e);return isNaN(t.getTime())?"":`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`})(p.start_date),onChange:e=>_("start_date",e.target.value||""),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",fontSize:"14px",backgroundColor:C.inputBg,border:`1px solid ${C.inputBorder}`,color:C.text,outline:"none",boxSizing:"border-box"}}),(0,be.jsx)("div",{style:{fontSize:"12px",color:C.textMuted,marginTop:"4px"},children:l("supportMaterial.unlockDateDescription")}),p.start_date&&(0,be.jsx)("button",{type:"button",onClick:()=>_("start_date",""),style:{marginTop:"6px",padding:"4px 10px",borderRadius:"4px",fontSize:"12px",backgroundColor:"transparent",border:`1px solid ${C.border}`,color:C.textMuted,cursor:"pointer",transition:"opacity 0.2s"},children:l("supportMaterial.clearDate")})]})]}),"pdf"===p.type&&(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:C.text},children:[l("supportMaterial.pdfFile")," *"]}),p.data?.url?(0,be.jsxs)("div",{style:{padding:"16px",borderRadius:"8px",border:`1px solid ${C.accent}`,backgroundColor:`${C.accent}10`,display:"flex",alignItems:"center",gap:"12px"},children:[(0,be.jsx)(Oe.A,{size:24,style:{color:C.accent,flexShrink:0}}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("div",{className:"font-medium text-sm mb-1",style:{color:C.text},children:l("supportMaterial.fileUploaded")}),(0,be.jsx)("a",{href:p.data.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs hover:underline block truncate",style:{color:C.accent},children:p.data.url})]}),(0,be.jsx)("button",{type:"button",onClick:()=>{S("url",""),N.current&&(N.current.value="")},className:"p-2 rounded-lg transition-colors flex-shrink-0",style:{backgroundColor:C.cardBg,border:`1px solid ${C.border}`},title:l("common.remove"),children:(0,be.jsx)(pr.A,{size:18,style:{color:"#ef4444"}})})]}):(0,be.jsxs)("div",{children:[(0,be.jsx)("input",{ref:N,type:"file",accept:"application/pdf",onChange:async e=>{const t=e.target.files?.[0];if(console.log("handleFileChange - file selected:",t),!t)return void console.log("No file selected");const r=(0,bf.nJ)(t,{maxSize:10485760,allowedTypes:["application/pdf"]});if(console.log("File validation result:",r),!r.isValid)return console.error("File validation failed:",r.error),void ne.oR.error(r.error||"Invalid file");v(!0),w(0);try{console.log("Starting upload for file:",t.name);const e=await(0,bf.o7)(t,{onProgress:e=>{console.log("Upload progress:",e),w(e)}});console.log("Upload result:",e),e&&e.url?(S("url",e.url),p.title||_("title",t.name.replace(".pdf","")),ne.oR.success(l("supportMaterial.fileUploaded")),console.log("PDF URL set to:",e.url)):(console.error("Upload completed but no URL in result"),ne.oR.error(l("supportMaterial.uploadError")))}catch(e){console.error("Error uploading file:",e),ne.oR.error(l("supportMaterial.uploadError"))}finally{v(!1),w(0),N.current&&(N.current.value="")}},style:{display:"none"}}),(0,be.jsxs)("button",{type:"button",onClick:()=>N.current?.click(),disabled:b,style:{width:"100%",padding:"32px 16px",borderRadius:"8px",border:`2px dashed ${h.pdfUrl?"#ef4444":C.border}`,backgroundColor:C.inputBg,opacity:b?.6:1,cursor:b?"not-allowed":"pointer",transition:"all 0.2s",display:"flex",flexDirection:"column",alignItems:"center",gap:"12px"},children:[(0,be.jsx)(yf.A,{size:32,style:{color:C.textMuted}}),(0,be.jsxs)("div",{style:{textAlign:"center"},children:[(0,be.jsx)("div",{style:{fontWeight:"500",fontSize:"14px",marginBottom:"4px",color:C.text},children:l(b?"supportMaterial.uploading":"supportMaterial.uploadPDF")}),(0,be.jsx)("div",{style:{fontSize:"12px",color:C.textMuted},children:l("supportMaterial.maxSize")})]})]}),b&&(0,be.jsxs)("div",{style:{marginTop:"12px"},children:[(0,be.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"12px",marginBottom:"4px",color:C.textMuted},children:[(0,be.jsx)("span",{children:l("supportMaterial.uploading")}),(0,be.jsxs)("span",{children:[j,"%"]})]}),(0,be.jsx)("div",{style:{width:"100%",height:"8px",borderRadius:"9999px",overflow:"hidden",backgroundColor:C.border},children:(0,be.jsx)("div",{style:{height:"100%",width:`${j}%`,backgroundColor:C.accent,transition:"width 0.3s"}})})]}),(0,be.jsx)("button",{type:"button",onClick:async()=>{try{const e=await(0,it.I)({title:l("supportMaterial.selectPDF"),buttonText:l("common.select"),type:"application/pdf"});e&&e.url&&(S("url",e.url),p.title||_("title",e.title||e.filename||""))}catch(e){console.error("Error selecting PDF:",e)}},disabled:b,style:{width:"100%",marginTop:"8px",padding:"10px 16px",borderRadius:"8px",fontWeight:"500",fontSize:"14px",backgroundColor:C.cardBg||C.inputBg,border:`1px solid ${C.border}`,color:C.text,opacity:b?.6:1,cursor:b?"not-allowed":"pointer",transition:"opacity 0.2s"},children:l("supportMaterial.selectFromLibrary")}),h.pdfUrl&&(0,be.jsx)("span",{style:{fontSize:"12px",marginTop:"4px",display:"block",color:"#ef4444"},children:h.pdfUrl})]})]}),"text"===p.type&&(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:C.text},children:[l("supportMaterial.textContent")," *"]}),(0,be.jsx)("div",{style:{borderRadius:"8px",border:`1px solid ${h.content?"#ef4444":C.inputBorder}`,backgroundColor:C.inputBg},className:"quill-editor-wrapper",children:(0,be.jsx)(st(),{ref:E,theme:"snow",value:p.data?.content||"",onChange:e=>S("content",e),modules:M,style:{backgroundColor:C.inputBg}})}),h.content&&(0,be.jsx)("span",{style:{fontSize:"12px",marginTop:"4px",display:"block",color:"#ef4444"},children:h.content})]})]}),(0,be.jsxs)("div",{style:{padding:"12px 16px",borderTop:`1px solid ${C.border}`,backgroundColor:C.secondaryBg,display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px"},children:[(0,be.jsx)("button",{type:"button",onClick:t,style:{padding:"7px 14px",borderRadius:"6px",fontWeight:"500",fontSize:"13px",backgroundColor:C.inputBg,border:`1px solid ${C.border}`,color:C.text,cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:e=>e.currentTarget.style.opacity="0.8",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:l("common.cancel")}),(0,be.jsxs)("button",{type:"submit",disabled:x||i,style:{padding:"7px 14px",borderRadius:"6px",fontWeight:"500",fontSize:"13px",backgroundColor:C.accent,border:"none",color:"#ffffff",opacity:x||i?.6:1,cursor:x||i?"not-allowed":"pointer",transition:"opacity 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{x||i||(e.currentTarget.style.opacity="0.9")},onMouseLeave:e=>{x||i||(e.currentTarget.style.opacity="1")},children:[(0,be.jsx)(Mt.A,{size:16}),l(x?"common.saving":"common.save")]})]})]})]})})]});return(0,Ir.createPortal)(T,document.body)};var jf=a(7414);const wf=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{course:a}=Gt(t),i=a?.title?.rendered||a?.title||"",l={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:s?n("textSecondary","#9ca3af"):`${n("primary","#1a202c")}70`,accent:n("accent","#f59e0b"),hoverBg:s?n("accent","#f59e0b"):n("primary","#1a202c"),buttonBg:s?n("accent","#f59e0b"):n("primary","#3b82f6"),buttonText:s?n("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:s?n("primary","#3b82f6"):n("accent","#f59e0b")},[c,d]=(0,r.useState)(new Set),[u,p]=(0,r.useState)([]),[f,m]=(0,r.useState)(!0),[h,g]=(0,r.useState)(null),[x,y]=(0,r.useState)(null),[b,v]=(0,r.useState)("undefined"!=typeof window?window.innerWidth:1024);(0,r.useEffect)(()=>{const e=()=>v(window.innerWidth);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const j=b<1024,w=(0,r.useMemo)(()=>"undefined"!=typeof navigator&&"undefined"!=typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0),[]),N=(0,r.useMemo)(()=>{if("undefined"==typeof navigator)return!1;const e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")&&!e.includes("chromium")},[]),k=j||w||N,C=xr(),_=(0,xt.A)({autoFetch:!1,courseId:t}),S=(0,yt.A)({autoFetch:!1,status:"publish,draft,private"}),[E,A]=(0,r.useState)({isOpen:!1,mode:"create",lesson:null}),[M,T]=(0,r.useState)({isOpen:!1,mode:"create",lessonId:null,materialIndex:null,material:null}),[P,O]=(0,r.useState)({isOpen:!1,lesson:null}),z=(0,r.useRef)(!1),[q,D]=(0,r.useState)(!1),[I,L]=(0,r.useState)([]),[R,$]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C&&0===S.courses.length&&!S.loading&&S.fetchCourses(!0,{perPage:100})},[C]);const{isCompleted:B,markComplete:F,loading:U,fetchCompletedContent:W}=gr(t,!1);(0,r.useEffect)(()=>{t&&W()},[t,W]);const H=async()=>{if(t){m(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=((await(0,Cn.getCourseLessons)(e,{perPage:100})).data||[]).map(e=>{const t=(e.meta?._lesson_steps||[]).filter(e=>"pdf"===e.type||"text"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,materialSteps:t}});p(r)}catch(e){console.error("Error fetching lessons:",e),p([])}finally{m(!1)}}};(0,r.useEffect)(()=>{H()},[t]);const Q=()=>{T({isOpen:!1,mode:"create",lessonId:null,materialIndex:null,material:null})},V=()=>{O({isOpen:!1,lesson:null})},Y="9999-12-31",K=e=>{if(!e.start_date||e.start_date===Y)return!1;const t=new Date;t.setHours(0,0,0,0);const r=new Date(e.start_date);return r.setHours(0,0,0,0),r>t},G=e=>e.start_date===Y,X=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})},J=q?I:u,Z=(0,r.useMemo)(()=>u.flatMap(e=>e.materialSteps.filter(e=>{if(C)return!0;if(e.start_date===Y)return!1;if(e.start_date){const t=new Date;t.setHours(0,0,0,0);const r=new Date(e.start_date);if(r.setHours(0,0,0,0),r>t)return!1}return!0}).map(t=>({step:t,lesson:e,originalStepIndex:(e.meta?._lesson_steps||[]).findIndex(e=>e.type===t.type&&e.title===t.title&&JSON.stringify(e.data)===JSON.stringify(t.data))}))),[u,C]),ee=()=>{g(null),y(null)};(0,r.useEffect)(()=>{(async()=>{if(!h||!x||!t)return;const e=Z.find(e=>e.step===h&&e.lesson.id===x.id);if(!e||-1===e.originalStepIndex)return;const{originalStepIndex:r}=e;if(!B(x.id,"step",x.id,r))try{await F(x.id,"step",x.id,r),await W(),window.dispatchEvent(new CustomEvent("courseProgressUpdated",{detail:{courseId:t}}))}catch(e){console.error("Error auto-marking material as accessed:",e)}})()},[h,x,t,Z,B,F,W]);const te=()=>h&&x?Z.findIndex(e=>e.step===h&&e.lesson.id===x.id):-1,oe=te(),ae=oe>0,le=oe<Z.length-1,ce=e=>{let t=null;if(e?.data?.url)t=e.data.url;else if(e?.data?.file_id)return null;return t&&"https:"===window.location.protocol&&(t=t.replace(/^http:\/\//i,"https://")),t};return(0,be.jsxs)(jn,{courseId:t,courseName:i,sectionName:e("courses.supportMaterial"),children:[(0,be.jsxs)("div",{className:"relative h-full",children:[(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(h?"-translate-x-full":"translate-x-0"),children:(0,be.jsxs)("div",{className:"h-full overflow-y-auto",children:[C&&(0,be.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-4 pb-2 flex items-center gap-3",children:q?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("button",{onClick:async()=>{$(!0);try{const r={};I.forEach((e,t)=>{r[e.id.toString()]=t+1}),await(0,Vt.updateLessonOrderMap)(parseInt(t,10),r),ne.oR.success(e("supportMaterial.orderSaved")),p(I),D(!1),L([])}catch(t){console.error("Error saving lesson order:",t),ne.oR.error(e("errors.saveOrder"))}finally{$(!1)}},disabled:R,className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg disabled:opacity-50",style:{backgroundColor:"#22c55e",color:"#ffffff"},onMouseEnter:e=>{R||(e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(Qn.A,{size:18}),e(R?"common.saving":"supportMaterial.saveOrder")]}),(0,be.jsxs)("button",{onClick:()=>{D(!1),L([])},disabled:R,className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg border disabled:opacity-50",style:{backgroundColor:"transparent",color:l.text,borderColor:n("borderColor","#e5e7eb")},onMouseEnter:e=>{R||(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(xe.A,{size:18}),e("common.cancel")]})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("button",{onClick:()=>{A({isOpen:!0,mode:"create",lesson:null})},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(Ie.A,{size:18}),e("supportMaterial.createTheme")]}),u.length>1&&(0,be.jsxs)("button",{onClick:()=>{L([...u]),D(!0)},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg border",style:{backgroundColor:"transparent",color:l.text,borderColor:n("borderColor","#e5e7eb")},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.backgroundColor=l.accent+"15"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(mf,{size:18}),e("supportMaterial.orderThemes")]})]})}),(0,be.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-8 pb-12",children:f?(0,be.jsx)("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:n("background","#ffffff"),borderColor:n("borderColor","#e5e7eb")},children:[1,2,3].map(e=>(0,be.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse",style:{borderBottom:e<3?`1px solid ${n("borderColor","#e5e7eb")}`:"none"},children:[(0,be.jsx)("div",{className:"w-5 h-5 rounded",style:{backgroundColor:l.text+"20"}}),(0,be.jsx)("div",{className:"h-4 rounded flex-1",style:{backgroundColor:l.text+"15",maxWidth:"200px"}}),(0,be.jsx)("div",{className:"h-5 w-8 rounded-full",style:{backgroundColor:l.text+"10"}})]},e))}):0===u.length?(0,be.jsxs)("div",{className:"text-center py-12 rounded-lg border",style:{backgroundColor:n("background","#ffffff"),borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsx)(hf,{size:40,className:"mx-auto mb-3",style:{color:l.text+"30"}}),(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:l.text},children:e("supportMaterial.noMaterials")}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:l.textMuted},children:e("supportMaterial.noMaterialsDescription")})]}):(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),borderColor:s?n("accent","#f59e0b"):n("borderColor","#e5e7eb")},children:J.map((r,o,a)=>{const i=c.has(r.id),f=C?r.materialSteps:r.materialSteps.filter(e=>!G(e)&&!K(e)),m=f.length,x=r.title?.rendered||r.title||e("courses.untitledLesson"),b=0===o,v=o===a.length-1;return(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200",style:{backgroundColor:s?"rgba(255,255,255,0.05)":`${n("primary","#1a202c")}05`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[q&&(0,be.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{if(0===e)return;const t=[...I];[t[e-1],t[e]]=[t[e],t[e-1]],L(t)})(o)},disabled:b||R,className:"p-0.5 rounded transition-all disabled:opacity-30",style:{color:b?l.textMuted:l.accent},title:e("supportMaterial.moveUp"),children:(0,be.jsx)($n.A,{size:16})}),(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{if(e>=I.length-1)return;const t=[...I];[t[e],t[e+1]]=[t[e+1],t[e]],L(t)})(o)},disabled:v||R,className:"p-0.5 rounded transition-all disabled:opacity-30",style:{color:v?l.textMuted:l.accent},title:e("supportMaterial.moveDown"),children:(0,be.jsx)(Ut.A,{size:16})})]}),(0,be.jsx)(ie.A,{size:20,style:{color:l.text},className:"flex-shrink-0"}),(0,be.jsx)("span",{className:"font-semibold text-left truncate",style:{color:l.text},dangerouslySetInnerHTML:{__html:x}})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-shrink-0",children:[C&&!q&&(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{A({isOpen:!0,mode:"edit",lesson:e})})(r)},className:"p-1 sm:p-1.5 rounded-lg transition-all",style:{backgroundColor:`${l.accent}15`},title:e("supportMaterial.editTheme"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${l.accent}25`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${l.accent}15`},children:(0,be.jsx)(rs.A,{size:14,className:"sm:w-4 sm:h-4",style:{color:l.accent}})}),C&&!q&&(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{O({isOpen:!0,lesson:e})})(r)},className:"p-1 sm:p-1.5 rounded-lg transition-all",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},title:e("supportMaterial.deleteTheme"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(pr.A,{size:14,className:"sm:w-4 sm:h-4",style:{color:"#ef4444"}})}),C&&!q&&(0,be.jsxs)("button",{onClick:e=>{var t;e.stopPropagation(),t=r.id,T({isOpen:!0,mode:"create",lessonId:t,materialIndex:null,material:null})},className:"p-1.5 sm:px-3 sm:py-1.5 rounded-lg transition-all text-xs font-medium flex items-center gap-1.5",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,be.jsx)(Ie.A,{size:14}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("supportMaterial.addMaterial")})]}),(0,be.jsxs)("span",{className:"hidden sm:inline-block text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",style:{backgroundColor:s?"rgba(255,255,255,0.1)":`${n("primary","#1a202c")}10`,color:l.text,minWidth:"90px",textAlign:"center"},children:[m," ",e(1===m?"supportMaterial.file":"supportMaterial.files")]}),(0,be.jsxs)("button",{onClick:()=>{return m>0&&(e=r.id,void d(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}));var e},disabled:0===m,className:"p-2 sm:py-2 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-1 sm:gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",style:{backgroundColor:l.buttonBg,color:l.buttonText},onMouseEnter:e=>{0!==m&&(s?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=l.buttonHoverBg)},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=l.buttonBg},children:[(0,be.jsx)("span",{className:"hidden sm:inline",children:e(i?"supportMaterial.hideLesson":"supportMaterial.showLesson")}),i?(0,be.jsx)($n.A,{size:16}):(0,be.jsx)(Ut.A,{size:16})]})]})]}),i&&(0,be.jsx)("div",{children:r.materialSteps.filter(e=>!!C||!G(e)&&!K(e)).map((o,a)=>{const i=(r.meta?._lesson_steps||[]).findIndex(e=>e.type===o.type&&e.title===o.title&&JSON.stringify(e.data)===JSON.stringify(o.data)),c=B(r.id,"step",r.id,i),d=K(o),f=G(o);return(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:a>0?"mx-6":"",style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,be.jsxs)("div",{className:"flex items-center gap-3 px-4 sm:px-6 py-4 transition-colors duration-150",style:{opacity:d||f?.6:1},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s?"rgba(255,255,255,0.05)":`${n("primary","#1a202c")}03`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[d?(0,be.jsx)(gf,{size:18,style:{color:l.accent},className:"flex-shrink-0"}):f?(0,be.jsx)(xf.A,{size:18,style:{color:"#ef4444"},className:"flex-shrink-0"}):(0,be.jsx)("div",{className:"flex-shrink-0 p-1",children:c?(0,be.jsx)(Oe.A,{size:28,style:{color:"#10b981"}}):(0,be.jsx)(Or,{size:28,style:{color:l.textMuted}})}),(0,be.jsx)("span",{className:"text-sm font-medium flex-1 truncate",style:{color:l.text},children:o.title}),C&&(d||f)&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[f&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1",style:{backgroundColor:"rgba(239, 68, 68, 0.12)",color:"#ef4444"},children:[(0,be.jsx)(xf.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("supportMaterial.hiddenBadge")})]}),d&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1",style:{backgroundColor:`${l.accent}15`,color:l.accent},children:[(0,be.jsx)(sr.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:X(o.start_date)})]})]}),C&&(0,be.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0 mr-2",children:[(0,be.jsx)("button",{onClick:e=>{var t,n;e.stopPropagation(),t=r.id,n=(r.meta?._lesson_steps||[]).findIndex(e=>e===o),T({isOpen:!0,mode:"edit",lessonId:t,materialIndex:n,material:o})},className:"p-1 rounded transition-all",style:{backgroundColor:`${l.primary}15`},title:e("common.edit"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${l.primary}25`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${l.primary}15`},children:(0,be.jsx)(rs.A,{size:14,style:{color:l.primary}})}),(0,be.jsx)("button",{onClick:n=>{n.stopPropagation(),(async(r,n)=>{if(window.confirm(e("supportMaterial.deleteConfirm")))try{const s=u.find(e=>e.id===r);if(!s)throw new Error("Lesson not found");const o=s.meta?._lesson_steps||[],a=o[n],i=o.filter((e,t)=>t!==n).map((e,t)=>({...e,order:t}));await _.updateLesson(r,{title:s.title?.rendered||s.title,courseId:s.meta?._course_id||t,meta:{_lesson_steps:i}}),h===a&&(g(null),y(null)),p(e=>e.map(e=>{if(e.id!==r)return e;const t=i.filter(e=>"pdf"===e.type||"text"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,meta:{...e.meta,_lesson_steps:i},materialSteps:t}})),ne.oR.success(e("supportMaterial.materialDeleted"))}catch(t){console.error("Error deleting material:",t),ne.oR.error(e("errors.deleteMaterial"))}})(r.id,(r.meta?._lesson_steps||[]).findIndex(e=>e===o))},className:"p-1 rounded transition-all",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},title:e("common.delete"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(pr.A,{size:14,style:{color:"#ef4444"}})})]}),(!d||C)&&(0,be.jsx)("button",{onClick:()=>((e,t)=>{g(e),y(t)})(o,r),className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex-shrink-0",style:{backgroundColor:l.buttonBg,color:l.buttonText},onMouseEnter:e=>{s?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=l.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=l.buttonBg},children:e("supportMaterial.available")})]})]},o.id||a)})}),!v&&(0,be.jsx)("div",{style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},r.id)})})})})]})}),(0,be.jsx)("div",{className:"absolute inset-0 w-full transition-transform duration-300 ease-in-out "+(h?"translate-x-0":"translate-x-full"),style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:h&&(0,be.jsxs)("div",{className:"h-full flex flex-col w-full overflow-hidden",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-3 sm:px-4 py-2 sm:py-1.5 border-b flex-shrink-0 gap-2",style:{backgroundColor:n("background","#ffffff"),borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden min-w-0 flex-1",children:[(0,be.jsx)("button",{onClick:ee,className:"sm:hidden p-2 -ml-1 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:s?`${l.accent}15`:`${l.text}10`},children:(0,be.jsx)(We.A,{size:20,style:{color:l.text}})}),(0,be.jsxs)("div",{className:"flex flex-col gap-0.5 overflow-hidden min-w-0",children:[(0,be.jsxs)("nav",{className:"hidden md:flex items-center text-xs space-x-1.5",children:[(0,be.jsx)(re.N_,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:l.text},children:e("sidebar.studyPlanner")}),(0,be.jsx)(ur.A,{size:12,style:{color:l.textMuted}}),(0,be.jsx)(re.N_,{to:`/courses/${t}/dashboard`,className:"transition-colors duration-200 hover:underline font-medium truncate max-w-[150px]",style:{color:l.text},dangerouslySetInnerHTML:{__html:i}}),(0,be.jsx)(ur.A,{size:12,style:{color:l.textMuted}}),(0,be.jsx)("span",{className:"font-medium",style:{color:l.textMuted},children:e("courses.supportMaterial")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(ie.A,{size:16,style:{color:l.accent},className:"flex-shrink-0 hidden sm:block"}),(0,be.jsx)("h2",{className:"text-sm sm:text-base font-medium leading-tight truncate",style:{color:l.text},children:h.title})]})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,be.jsxs)("button",{onClick:()=>{const e=te();if(e>0){const t=Z[e-1];g(t.step),y(t.lesson)}},disabled:!ae,className:"p-2 sm:px-3 sm:py-1.5 rounded-lg transition-all flex items-center gap-1 text-sm font-medium",style:{backgroundColor:s?`${l.accent}15`:`${l.text}10`,opacity:ae?1:.4,cursor:ae?"pointer":"not-allowed",color:l.text},onMouseEnter:e=>{ae&&(e.currentTarget.style.backgroundColor=s?`${l.accent}25`:`${l.text}20`)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}15`:`${l.text}10`},title:e("navigation.previous"),children:[(0,be.jsx)(We.A,{size:18,style:{color:l.text}}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("navigation.previous")})]}),(0,be.jsxs)("button",{onClick:()=>{const e=te();if(e<Z.length-1){const t=Z[e+1];g(t.step),y(t.lesson)}},disabled:!le,className:"p-2 sm:px-3 sm:py-1.5 rounded-lg transition-all flex items-center gap-1 text-sm font-medium",style:{backgroundColor:s?`${l.accent}15`:`${l.text}10`,opacity:le?1:.4,cursor:le?"pointer":"not-allowed",color:l.text},onMouseEnter:e=>{le&&(e.currentTarget.style.backgroundColor=s?`${l.accent}25`:`${l.text}20`)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}15`:`${l.text}10`},title:e("navigation.next"),children:[(0,be.jsx)("span",{className:"hidden sm:inline",children:e("navigation.next")}),(0,be.jsx)(ur.A,{size:18,style:{color:l.text}})]}),ce(h)&&(0,be.jsx)("a",{href:ce(h),target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg transition-all",style:{backgroundColor:s?`${l.accent}15`:`${l.text}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}25`:`${l.text}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}15`:`${l.text}10`},title:e("common.openInNewTab")||"Abrir en nueva pestaÃ±a",children:(0,be.jsx)(or.A,{size:18,style:{color:l.text}})}),(0,be.jsx)("button",{onClick:ee,className:"hidden sm:block p-2 rounded-lg transition-all",style:{backgroundColor:s?`${l.accent}15`:`${l.text}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}25`:`${l.text}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}15`:`${l.text}10`},title:e("common.close")||"Cerrar",children:(0,be.jsx)(xe.A,{size:18,style:{color:l.text}})})]})]}),(0,be.jsx)("div",{className:"flex-1 overflow-hidden relative",children:ce(h)?k?(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:[(0,be.jsx)("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-2xl flex items-center justify-center mb-6",style:{backgroundColor:s?`${l.accent}20`:`${l.text}10`},children:(0,be.jsx)(ie.A,{size:40,style:{color:l.accent}})}),(0,be.jsx)("h3",{className:"text-lg sm:text-xl font-semibold mb-2",style:{color:l.text},children:h.title}),(0,be.jsx)("p",{className:"text-sm mb-6 max-w-sm",style:{color:l.textMuted},children:N?e("supportMaterial.safariPdfNote")||"Safari no puede mostrar PDFs embebidos. Usa los botones para verlo.":e("supportMaterial.iosFallback")}),(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,be.jsxs)("a",{href:ce(h),target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all",style:{backgroundColor:l.buttonBg,color:l.buttonText},children:[(0,be.jsx)(or.A,{size:18}),e("common.openInNewTab")]}),(0,be.jsxs)("a",{href:ce(h),download:!0,className:"px-6 py-3 rounded-xl font-semibold flex items-center justify-center gap-2 transition-all",style:{backgroundColor:s?`${l.accent}20`:`${l.text}10`,color:l.text},children:[(0,be.jsx)(on.A,{size:18}),e("common.download")]})]})]}):(0,be.jsx)("iframe",{src:ce(h),className:"w-full h-full border-0",title:h.title,style:{minHeight:"100%"}}):"text"===h.type&&h.data?.content?(0,be.jsx)("div",{className:"px-6 md:px-24 py-6 overflow-y-auto h-full prose max-w-none",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),color:l.text},dangerouslySetInnerHTML:{__html:h.data.content}}):(0,be.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)(ie.A,{size:48,className:"mx-auto mb-3",style:{color:l.text+"30"}}),(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:l.text},children:e("supportMaterial.noPreview")}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:l.textMuted},children:e("supportMaterial.noPreviewDescription")})]})})})]})})]}),C&&(0,be.jsx)(jf.A,{isOpen:E.isOpen,onClose:()=>{A({isOpen:!1,mode:"create",lesson:null})},lesson:E.lesson,mode:E.mode,onSave:async(r,n="close")=>{try{"create"===E.mode?(await _.createLesson({...r,courseId:t}),ne.oR.success(e("admin.lessons.createSuccess")),await H(),A("reset"===n?{isOpen:!0,mode:"create",lesson:null}:{isOpen:!1,mode:"create",lesson:null})):(await _.updateLesson(E.lesson.id,r),ne.oR.success(e("admin.lessons.updateSuccess")),await H(),"reset"!==n&&A({isOpen:!1,mode:"create",lesson:null}))}catch(t){throw console.error("Error saving lesson:",t),ne.oR.error(e("errors.saveLesson")),t}},availableCourses:S.courses.map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),compact:!0,preselectedCourseId:t}),C&&(0,be.jsx)(vf,{isOpen:M.isOpen,onClose:Q,mode:M.mode,material:M.material,onSave:async r=>{try{const n=u.find(e=>e.id===M.lessonId);if(!n)throw new Error("Lesson not found");const s=n.meta?._lesson_steps||[];let o;o="create"===M.mode?[...s,{...r,start_date:r.start_date||"",order:s.length}]:s.map((e,t)=>t===M.materialIndex?{...r,start_date:r.start_date||"",order:e.order}:e),await _.updateLesson(M.lessonId,{title:n.title?.rendered||n.title,courseId:n.meta?._course_id||t,meta:{_lesson_steps:o}}),ne.oR.success(e("supportMaterial.materialSaved")),await H(),Q()}catch(t){throw console.error("Error saving material:",t),ne.oR.error(e("errors.saveMaterial")),t}}}),C&&P.isOpen&&(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999999},onMouseDown:e=>{z.current=e.target===e.currentTarget},onClick:e=>{e.target===e.currentTarget&&z.current&&V(),z.current=!1},children:(0,be.jsxs)("div",{className:"relative w-full max-w-md rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:n("background","#ffffff")},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 px-6 py-4 border-b",style:{borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(Te.A,{size:20,style:{color:"#ef4444"}})}),(0,be.jsx)("h2",{className:"text-lg font-semibold",style:{color:l.text},children:e("supportMaterial.deleteThemeTitle")})]}),(0,be.jsxs)("div",{className:"px-6 py-5",children:[(0,be.jsx)("p",{className:"text-sm mb-4",style:{color:l.text},children:e("supportMaterial.deleteThemeConfirm")}),(0,be.jsxs)("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:s?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",border:`1px solid ${n("borderColor","#e5e7eb")}`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,be.jsx)(ie.A,{size:18,style:{color:l.accent}}),(0,be.jsx)("span",{className:"font-medium",style:{color:l.text},dangerouslySetInnerHTML:{__html:P.lesson?.title?.rendered||P.lesson?.title||e("courses.untitledLesson")}})]}),(0,be.jsx)("p",{className:"text-sm",style:{color:l.textMuted},children:e("supportMaterial.associatedMaterials",{count:P.lesson?.materialSteps?.length||0})})]}),(0,be.jsx)("p",{className:"text-xs",style:{color:"#ef4444"},children:e("supportMaterial.deleteThemeWarning")})]}),(0,be.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t",style:{borderColor:n("borderColor","#e5e7eb"),backgroundColor:s?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)"},children:[(0,be.jsx)("button",{type:"button",onClick:V,className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors",style:{backgroundColor:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:l.text},children:e("common.cancel")}),(0,be.jsxs)("button",{type:"button",onClick:async()=>{if(P.lesson)try{await _.deleteLesson(P.lesson.id),ne.oR.success(e("supportMaterial.themeDeleted")),await H(),V()}catch(t){console.error("Error deleting theme:",t),ne.oR.error(e("errors.deleteTheme"))}},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2",style:{backgroundColor:"#ef4444",color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#dc2626"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#ef4444"},children:[(0,be.jsx)(pr.A,{size:16}),e("supportMaterial.confirmDelete")]})]})]})})]})},Nf=({isOpen:e,onClose:t,mode:n="create",video:s=null,onSave:a,isLoading:i=!1})=>{const{t:l}=(0,o.Bd)(),{getColor:c,isDarkMode:d}=(0,se.DP)(),u="9999-12-31",p={background:c("background","#ffffff"),secondaryBg:c("secondaryBackground","#f8f9fa"),text:d?c("textPrimary","#f9fafb"):c("primary","#1a202c"),textMuted:d?c("textSecondary","#9ca3af"):`${c("primary","#1a202c")}70`,textSecondary:c("textSecondary","#6b7280"),accent:c("accent","#f59e0b"),border:c("borderColor","#e5e7eb"),inputBg:d?c("inputBackground","#374151"):"#ffffff",inputBorder:c("inputBorder","#d1d5db")},[f,m]=(0,r.useState)({title:"",video_url:"",duration:"",start_date:""}),[h,g]=(0,r.useState)({}),[x,y]=(0,r.useState)(!1),b=(0,r.useRef)(!1),v=f.start_date!==u;(0,r.useEffect)(()=>{e&&s&&"edit"===n?m({title:s.title||"",video_url:s.data?.video_url||s.data?.url||"",duration:s.data?.duration||"",start_date:s.start_date||""}):e&&"create"===n&&m({title:"",video_url:"",duration:"",start_date:""}),g({})},[e,s,n]);const j=(e,t)=>{m(r=>({...r,[e]:t})),h[e]&&g(t=>({...t,[e]:""}))};if(!e)return null;const w=(0,be.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",padding:"16px",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e5},onMouseDown:e=>{b.current=e.target===e.currentTarget},onClick:e=>{e.target===e.currentTarget&&b.current&&t(),b.current=!1},children:(0,be.jsxs)("div",{style:{position:"relative",width:"100%",maxWidth:"600px",maxHeight:"90vh",borderRadius:"12px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",overflow:"hidden",display:"flex",flexDirection:"column",backgroundColor:p.background},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px 16px",borderBottom:`1px solid ${p.border}`},children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,be.jsx)("div",{style:{padding:"6px",borderRadius:"6px",backgroundColor:`${p.accent}15`},children:(0,be.jsx)(Me.A,{size:18,style:{color:p.accent}})}),(0,be.jsx)("h2",{style:{fontSize:"16px",fontWeight:"600",color:p.text,margin:0},children:l("create"===n?"videos.createVideo":"videos.editVideo")})]}),(0,be.jsx)("button",{type:"button",onClick:t,style:{padding:"6px",borderRadius:"6px",border:"none",background:"transparent",color:p.textMuted,cursor:"pointer",transition:"opacity 0.2s",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>e.currentTarget.style.opacity="0.7",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:(0,be.jsx)(xe.A,{size:18})})]}),(0,be.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(f.title.trim()||(e.title=l("videos.errors.titleRequired")),f.video_url.trim())try{new URL(f.video_url)}catch{e.video_url=l("videos.errors.invalidUrl")}else e.video_url=l("videos.errors.urlRequired");return g(e),0===Object.keys(e).length})()){y(!0);try{const e={type:"video",title:f.title.trim(),start_date:f.start_date||"",data:{video_url:f.video_url.trim(),url:f.video_url.trim(),duration:f.duration?parseInt(f.duration):void 0}};await a(e),t()}catch(e){console.error("Error saving video:",e),g({submit:e.message||l("videos.errors.saveFailed")})}finally{y(!1)}}},style:{flex:1,overflow:"auto",display:"flex",flexDirection:"column"},children:[(0,be.jsxs)("div",{style:{padding:"16px",display:"flex",flexDirection:"column",gap:"14px"},children:[h.submit&&(0,be.jsxs)("div",{style:{padding:"12px",borderRadius:"8px",display:"flex",alignItems:"flex-start",gap:"8px",backgroundColor:"#fef2f2",border:"1px solid #fecaca"},children:[(0,be.jsx)(tt.A,{size:18,style:{color:"#ef4444",flexShrink:0,marginTop:"1px"}}),(0,be.jsx)("span",{style:{fontSize:"14px",color:"#991b1b"},children:h.submit})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:p.text},children:[l("videos.videoTitle")," *"]}),(0,be.jsx)("input",{type:"text",value:f.title,onChange:e=>j("title",e.target.value),placeholder:l("videos.videoTitlePlaceholder"),style:{width:"100%",padding:"10px 16px",borderRadius:"8px",fontSize:"14px",backgroundColor:p.inputBg,border:`1px solid ${h.title?"#ef4444":p.inputBorder}`,color:p.text,outline:"none",boxSizing:"border-box"}}),h.title&&(0,be.jsx)("span",{style:{fontSize:"12px",marginTop:"4px",display:"block",color:"#ef4444"},children:h.title})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:p.text},children:[l("videos.videoUrl")," *"]}),(0,be.jsx)("input",{type:"url",value:f.video_url,onChange:e=>j("video_url",e.target.value),placeholder:l("videos.videoUrlPlaceholder"),style:{width:"100%",padding:"10px 16px",borderRadius:"8px",fontSize:"14px",backgroundColor:p.inputBg,border:`1px solid ${h.video_url?"#ef4444":p.inputBorder}`,color:p.text,outline:"none",boxSizing:"border-box"}}),h.video_url&&(0,be.jsx)("span",{style:{fontSize:"12px",marginTop:"4px",display:"block",color:"#ef4444"},children:h.video_url}),(0,be.jsx)("span",{style:{fontSize:"12px",marginTop:"4px",display:"block",color:p.textMuted},children:l("videos.urlHelp")})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",marginBottom:"8px",color:p.text},children:l("videos.duration")}),(0,be.jsx)("input",{type:"number",min:"1",value:f.duration,onChange:e=>j("duration",e.target.value),placeholder:l("videos.durationPlaceholder"),style:{width:"100%",padding:"10px 16px",borderRadius:"8px",fontSize:"14px",backgroundColor:p.inputBg,border:`1px solid ${p.inputBorder}`,color:p.text,outline:"none",boxSizing:"border-box"}}),(0,be.jsx)("span",{style:{fontSize:"12px",marginTop:"4px",display:"block",color:p.textMuted},children:l("videos.durationHelp")})]}),(0,be.jsxs)("div",{style:{padding:"14px",borderRadius:"8px",backgroundColor:d?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)",border:`1px solid ${p.inputBorder}`,display:"flex",flexDirection:"column",gap:"14px"},children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[v?(0,be.jsx)(cr.A,{size:16,style:{color:"#10b981"}}):(0,be.jsx)(xf.A,{size:16,style:{color:"#ef4444"}}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{style:{fontSize:"14px",fontWeight:"500",color:p.text},children:l("supportMaterial.visibility")}),(0,be.jsx)("div",{style:{fontSize:"12px",color:p.textMuted},children:l(v?"supportMaterial.visibleDescription":"supportMaterial.hiddenDescription")})]})]}),(0,be.jsx)("button",{type:"button",onClick:()=>j("start_date",v?u:""),style:{position:"relative",width:"44px",height:"24px",borderRadius:"12px",border:"none",backgroundColor:v?"#10b981":"#9ca3af",cursor:"pointer",transition:"background-color 0.2s",flexShrink:0},children:(0,be.jsx)("span",{style:{position:"absolute",top:"2px",left:v?"22px":"2px",width:"20px",height:"20px",borderRadius:"50%",backgroundColor:"#ffffff",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})})]}),v&&(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"8px"},children:[(0,be.jsx)(sr.A,{size:14,style:{color:p.textMuted}}),(0,be.jsx)("label",{style:{fontSize:"14px",fontWeight:"500",color:p.text,margin:0},children:l("supportMaterial.unlockDate")})]}),(0,be.jsx)("input",{type:"date",value:f.start_date||"",onChange:e=>j("start_date",e.target.value||""),style:{width:"100%",padding:"8px 16px",borderRadius:"8px",fontSize:"14px",backgroundColor:p.inputBg,border:`1px solid ${p.inputBorder}`,color:p.text,outline:"none",boxSizing:"border-box"}}),(0,be.jsx)("div",{style:{fontSize:"12px",color:p.textMuted,marginTop:"4px"},children:l("supportMaterial.unlockDateDescription")}),f.start_date&&(0,be.jsx)("button",{type:"button",onClick:()=>j("start_date",""),style:{marginTop:"6px",padding:"4px 10px",borderRadius:"4px",fontSize:"12px",backgroundColor:"transparent",border:`1px solid ${p.inputBorder}`,color:p.textMuted,cursor:"pointer"},children:l("supportMaterial.clearDate")})]})]})]}),(0,be.jsxs)("div",{style:{padding:"12px 16px",borderTop:`1px solid ${p.border}`,backgroundColor:p.secondaryBg,display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px"},children:[(0,be.jsx)("button",{type:"button",onClick:t,style:{padding:"7px 14px",borderRadius:"6px",fontWeight:"500",fontSize:"13px",backgroundColor:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",border:"none",color:p.text,cursor:"pointer",transition:"opacity 0.2s"},onMouseEnter:e=>e.currentTarget.style.opacity="0.8",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:l("common.cancel")}),(0,be.jsxs)("button",{type:"submit",disabled:x||i,style:{padding:"7px 14px",borderRadius:"6px",fontWeight:"500",fontSize:"13px",backgroundColor:p.accent,border:"none",color:"#ffffff",opacity:x||i?.6:1,cursor:x||i?"not-allowed":"pointer",transition:"opacity 0.2s",display:"flex",alignItems:"center",gap:"6px"},onMouseEnter:e=>{x||i||(e.currentTarget.style.opacity="0.9")},onMouseLeave:e=>{x||i||(e.currentTarget.style.opacity="1")},children:[(0,be.jsx)(Mt.A,{size:14}),l(x?"common.saving":"common.save")]})]})]})]})});return(0,Ir.createPortal)(w,document.body)},kf=(0,le.A)("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),Cf=({step:e,lesson:t,courseId:n=null,courseName:s=null,feedbackType:a="duda",onClose:i})=>{const[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(""),[m,h]=(0,r.useState)(!1),{t:g}=(0,o.Bd)(),{getColor:x,isDarkMode:y}=(0,se.DP)(),b=x("primary","#3b82f6"),v=x("accent","#f59e0b"),j=y?x("secondaryBackground","#1f2937"):"#ffffff",w=y?"rgba(255,255,255,0.05)":`${b}05`,N=y?"rgba(255,255,255,0.1)":`${b}15`,k=y?x("textPrimary","#f9fafb"):b,C=x("textSecondary","#6b7280"),_=e?.data?.video_url||e?.data?.url||null,S=_?(e=>{if(!e)return null;const t=e.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)/);if(t)return`https://player.vimeo.com/video/${t[1]}`;const r=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]+)/);return r?`https://www.youtube.com/embed/${r[1]}`:e})(_):null,E=e?.title||"",A=(M=s)?"string"==typeof M?M:"object"==typeof M&&M.rendered?M.rendered:"object"==typeof M&&M.raw?M.raw:String(M):null;var M;return(0,Ir.createPortal)((0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 bg-black/60 z-[10000] backdrop-blur-sm",onClick:i}),(0,be.jsx)("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center px-4 py-10 pointer-events-none",children:(0,be.jsxs)("div",{className:"rounded-2xl shadow-2xl max-w-lg w-full max-h-[calc(100vh-5rem)] overflow-y-auto pointer-events-auto",style:{backgroundColor:j,border:`1px solid ${N}`},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-5 py-3",style:{background:y?`linear-gradient(135deg, ${b}20 0%, ${v}10 100%)`:`linear-gradient(135deg, ${b}10 0%, ${v}08 100%)`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:"impugnacion"===a?`${v}15`:`${b}15`,border:`1px solid ${"impugnacion"===a?v:b}30`},children:"impugnacion"===a?(0,be.jsx)(Te.A,{size:18,style:{color:v}}):(0,be.jsx)(fe.A,{size:18,style:{color:b}})}),(0,be.jsx)("h3",{className:"text-base font-bold",style:{color:k},children:g("impugnacion"===a?"quizzes.feedbackModal.titleChallenge":"quizzes.feedbackModal.titleFeedback")})]}),(0,be.jsx)("button",{onClick:i,className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{color:C,backgroundColor:y?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=y?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=y?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"},children:(0,be.jsx)(xe.A,{size:20})})]}),m?(0,be.jsxs)("div",{className:"p-8 text-center",children:[(0,be.jsx)("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center mx-auto mb-5 shadow-lg",style:{background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)"},children:(0,be.jsx)(Oe.A,{size:40,style:{color:"#ffffff"}})}),(0,be.jsx)("h4",{className:"text-2xl font-bold mb-2",style:{color:k},children:g("quizzes.feedbackModal.successTitle")}),(0,be.jsx)("p",{className:"text-sm mb-6",style:{color:C},children:g("quizzes.feedbackModal.successMessage")}),(0,be.jsx)("button",{onClick:i,className:"px-8 py-3 rounded-xl font-semibold transition-all shadow-md",style:{background:`linear-gradient(135deg, ${b} 0%, ${b}dd 100%)`,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 8px 20px rgba(0,0,0,0.15)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:g("quizzes.feedbackModal.close")})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"p-6 space-y-4",children:[E&&(0,be.jsxs)("div",{className:"p-3 rounded-xl",style:{backgroundColor:w,border:`1px solid ${N}`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,be.jsx)(Me.A,{size:13,style:{color:C}}),(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide",style:{color:C},children:"Video"})]}),(0,be.jsx)("p",{className:"text-sm font-medium mb-3",style:{color:k},children:E}),S&&(0,be.jsx)("div",{className:"rounded-lg overflow-hidden",style:{aspectRatio:"16/9",backgroundColor:"#000"},children:(0,be.jsx)("iframe",{src:S,className:"w-full h-full border-0",title:E,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-sm font-semibold mb-2",style:{color:k},children:g("quizzes.feedbackModal.yourMessage")}),(0,be.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),rows:5,maxLength:5e3,className:"w-full px-4 py-3 rounded-xl transition-all focus:outline-none resize-none",style:{backgroundColor:w,border:`2px solid ${N}`,color:k},onFocus:e=>{e.currentTarget.style.borderColor=b,e.currentTarget.style.boxShadow=`0 0 0 3px ${b}20`},onBlur:e=>{e.currentTarget.style.borderColor=N,e.currentTarget.style.boxShadow="none"},placeholder:g("impugnacion"===a?"quizzes.feedbackModal.placeholderChallenge":"quizzes.feedbackModal.placeholderFeedback")})]}),p&&(0,be.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-xl text-sm",style:{backgroundColor:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.2)",color:"#ef4444"},children:[(0,be.jsx)(Te.A,{size:18}),(0,be.jsx)("span",{children:p})]})]}),(0,be.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t",style:{borderColor:N,backgroundColor:w},children:[(0,be.jsx)("button",{type:"button",onClick:i,className:"px-5 py-2.5 rounded-xl font-semibold transition-all duration-200",style:{color:C,backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=y?"rgba(255,255,255,0.1)":`${b}10`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:g("quizzes.feedbackModal.cancel")}),(0,be.jsx)("button",{type:"submit",onClick:async e=>{if(e?.preventDefault?.(),l.trim()){u(!0),f("");try{const e=(A||n?`(Curso: ${A||`ID ${n}`}) `:"")+(_?`(Video: ${_}) `:"")+l.trim();await(async e=>{try{const{endpoints:t}=(0,Ye.getApiConfig)(),r=`${t.custom_api}/feedback/video`;return(await(0,Ke.qb)(r,{method:"POST",body:JSON.stringify(e)})).data.data}catch(e){throw console.error("Error al enviar el feedback de video:",e),e}})({video_url:_,course_id:n,lesson_id:t?.id||null,video_title:E||null,feedback_type:a,message:e}),h(!0),c("")}catch(e){f(e.message||g("quizzes.feedbackModal.errorSending"))}finally{u(!1)}}else f(g("quizzes.feedbackModal.errorEmptyMessage"))},disabled:d||!l.trim(),className:"px-6 py-2.5 rounded-xl font-semibold flex items-center gap-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-md",style:{background:`linear-gradient(135deg, ${b} 0%, ${b}dd 100%)`,color:"#ffffff"},onMouseEnter:e=>{!d&&l.trim()&&(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 15px rgba(0,0,0,0.15)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},children:d?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(et.A,{className:"animate-spin",size:18}),g("quizzes.feedbackModal.sending")]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ve.A,{size:18}),g("quizzes.feedbackModal.send")]})})]})]})]})})]}),document.querySelector(".qe-lms-app")||document.body)},_f=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{course:a}=Gt(t),i=a?.title?.rendered||a?.title||"",l={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:s?n("textSecondary","#9ca3af"):`${n("primary","#1a202c")}70`,accent:n("accent","#f59e0b"),hoverBg:s?n("accent","#f59e0b"):n("primary","#1a202c"),buttonBg:s?n("accent","#f59e0b"):n("primary","#3b82f6"),buttonText:s?n("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:s?n("primary","#3b82f6"):n("accent","#f59e0b")},[c,d]=(0,r.useState)(new Set),[u,p]=(0,r.useState)([]),[f,m]=(0,r.useState)(!0),[h,g]=(0,r.useState)(null),[x,y]=(0,r.useState)(null),[b,v]=(0,r.useState)({isOpen:!1,step:null,lesson:null,feedbackType:"duda"}),j=xr(),w=(0,xt.A)({autoFetch:!1,courseId:t}),N=(0,yt.A)({autoFetch:!1,status:"publish,draft,private"}),[k,C]=(0,r.useState)({isOpen:!1,mode:"create",lesson:null}),[_,S]=(0,r.useState)({isOpen:!1,mode:"create",lessonId:null,videoIndex:null,video:null}),[E,A]=(0,r.useState)({isOpen:!1,lesson:null}),M=(0,r.useRef)(!1),[T,P]=(0,r.useState)(!1),[O,z]=(0,r.useState)([]),[q,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j&&0===N.courses.length&&!N.loading&&N.fetchCourses()},[j]);const{isCompleted:I,markComplete:L,loading:R,fetchCompletedContent:$}=gr(t,!1);(0,r.useEffect)(()=>{t&&$()},[t,$]);const B=async()=>{if(t){m(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=((await(0,Cn.getCourseLessons)(e,{perPage:100})).data||[]).map(e=>{const t=(e.meta?._lesson_steps||[]).filter(e=>"video"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,videoSteps:t}});p(r)}catch(e){console.error("Error fetching lessons:",e),p([])}finally{m(!1)}}};(0,r.useEffect)(()=>{B()},[t]);const F=()=>{C({isOpen:!1,mode:"create",lesson:null})},U=e=>{S({isOpen:!0,mode:"create",lessonId:e,videoIndex:null,video:null})},W=()=>{S({isOpen:!1,mode:"create",lessonId:null,videoIndex:null,video:null})},H=()=>{A({isOpen:!1,lesson:null})},Q="9999-12-31",V=e=>e.start_date===Q,Y=e=>{if(!e.start_date||e.start_date===Q)return!1;const t=new Date;t.setHours(0,0,0,0);const r=new Date(e.start_date);return r.setHours(0,0,0,0),r>t},K=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})},G=e=>e.meta?._start_date===Q,X=e=>{const t=e.meta?._start_date;if(!t||t===Q)return!1;const r=new Date;r.setHours(0,0,0,0);const n=new Date(t);return n.setHours(0,0,0,0),n>r},J=T?O:u,Z=(0,r.useMemo)(()=>u.filter(e=>!!j||!G(e)&&!X(e)).flatMap(e=>e.videoSteps.filter(e=>!!j||!V(e)&&!Y(e)).map(t=>({step:t,lesson:e,originalStepIndex:(e.meta?._lesson_steps||[]).findIndex(e=>e.type===t.type&&e.title===t.title&&JSON.stringify(e.data)===JSON.stringify(t.data))}))),[u,j]);(0,r.useEffect)(()=>{(async()=>{if(!h||!x||!t)return;const e=Z.find(e=>e.step===h&&e.lesson.id===x.id);if(!e||-1===e.originalStepIndex)return;const{originalStepIndex:r}=e;if(!I(x.id,"step",x.id,r))try{await L(x.id,"step",x.id,r),await $(),window.dispatchEvent(new CustomEvent("courseProgressUpdated",{detail:{courseId:t}}))}catch(e){console.error("Error auto-marking video as viewed:",e)}})()},[h,x,t,Z,I,L,$]);const ee=()=>h&&x?Z.findIndex(e=>e.step===h&&e.lesson.id===x.id):-1,te=ee(),oe=te>0,ae=te<Z.length-1,ie=e=>e.data?.video_url||e.data?.url?(e=>{if(!e)return null;const t=e.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)/);if(t)return`https://player.vimeo.com/video/${t[1]}`;const r=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]+)/);return r?`https://www.youtube.com/embed/${r[1]}`:e})(e.data.video_url||e.data.url):null;return(0,be.jsxs)(jn,{courseId:t,courseName:i,sectionName:e("courses.videosSection"),children:[(0,be.jsxs)("div",{className:"relative h-full",children:[(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(h?"-translate-x-full":"translate-x-0"),children:(0,be.jsxs)("div",{className:"h-full overflow-y-auto",children:[j&&(0,be.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-4 pb-2 flex items-center gap-3",children:T?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("button",{onClick:async()=>{D(!0);try{const r={};O.forEach((e,t)=>{r[e.id.toString()]=t+1}),await(0,Vt.updateLessonOrderMap)(parseInt(t,10),r),ne.oR.success(e("videos.orderSaved")),p(O),P(!1),z([])}catch(t){console.error("Error saving lesson order:",t),ne.oR.error(e("videos.errors.saveOrder"))}finally{D(!1)}},disabled:q,className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg disabled:opacity-50",style:{backgroundColor:"#22c55e",color:"#ffffff"},onMouseEnter:e=>{q||(e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(Qn.A,{size:18}),e(q?"common.saving":"videos.saveOrder")]}),(0,be.jsxs)("button",{onClick:()=>{P(!1),z([])},disabled:q,className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg border disabled:opacity-50",style:{backgroundColor:"transparent",color:l.text,borderColor:n("borderColor","#e5e7eb")},onMouseEnter:e=>{q||(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(xe.A,{size:18}),e("common.cancel")]})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("button",{onClick:()=>{C({isOpen:!0,mode:"create",lesson:null})},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(Ie.A,{size:18}),e("videos.createTheme")]}),u.length>1&&(0,be.jsxs)("button",{onClick:()=>{z([...u]),P(!0)},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg border",style:{backgroundColor:"transparent",color:l.text,borderColor:n("borderColor","#e5e7eb")},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.backgroundColor=l.accent+"15"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(mf,{size:18}),e("videos.orderThemes")]})]})}),(0,be.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-8 pb-12",children:f?(0,be.jsx)("div",{className:"rounded-lg border overflow-hidden",style:{backgroundColor:n("background","#ffffff"),borderColor:n("borderColor","#e5e7eb")},children:[1,2,3].map(e=>(0,be.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse",style:{borderBottom:e<3?`1px solid ${n("borderColor","#e5e7eb")}`:"none"},children:[(0,be.jsx)("div",{className:"w-5 h-5 rounded",style:{backgroundColor:l.text+"20"}}),(0,be.jsx)("div",{className:"h-4 rounded flex-1",style:{backgroundColor:l.text+"15",maxWidth:"200px"}}),(0,be.jsx)("div",{className:"h-5 w-8 rounded-full",style:{backgroundColor:l.text+"10"}})]},e))}):0===u.length?(0,be.jsxs)("div",{className:"text-center py-12 rounded-lg border",style:{backgroundColor:n("background","#ffffff"),borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsx)(kf,{size:40,className:"mx-auto mb-3",style:{color:l.text+"30"}}),(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:l.text},children:e("videos.noVideos")}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:l.textMuted},children:e("videos.noVideosDescription")})]}):(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),borderColor:s?n("accent","#f59e0b"):n("borderColor","#e5e7eb")},children:J.filter(e=>!!j||!G(e)&&!X(e)).map((r,o,a)=>{const i=c.has(r.id),f=j?r.videoSteps:r.videoSteps.filter(e=>!V(e)&&!Y(e)),m=f.length,x=r.title?.rendered||r.title||e("courses.untitledLesson"),b=0===o,N=o===a.length-1,k=G(r),_=X(r);return(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200",style:{backgroundColor:s?"rgba(255,255,255,0.05)":`${n("primary","#1a202c")}05`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[T&&(0,be.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{if(0===e)return;const t=[...O];[t[e-1],t[e]]=[t[e],t[e-1]],z(t)})(o)},disabled:b||q,className:"p-0.5 rounded transition-all disabled:opacity-30",style:{color:b?l.textMuted:l.accent},title:e("videos.moveUp"),children:(0,be.jsx)($n.A,{size:16})}),(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{if(e>=O.length-1)return;const t=[...O];[t[e],t[e+1]]=[t[e+1],t[e]],z(t)})(o)},disabled:N||q,className:"p-0.5 rounded transition-all disabled:opacity-30",style:{color:N?l.textMuted:l.accent},title:e("videos.moveDown"),children:(0,be.jsx)(Ut.A,{size:16})})]}),k?(0,be.jsx)(xf.A,{size:20,style:{color:"#ef4444"},className:"flex-shrink-0"}):_?(0,be.jsx)(gf,{size:20,style:{color:l.accent},className:"flex-shrink-0"}):(0,be.jsx)(Me.A,{size:20,style:{color:l.text},className:"flex-shrink-0"}),(0,be.jsx)("span",{className:"font-semibold text-left truncate",style:{color:l.text,opacity:k||_?.6:1},dangerouslySetInnerHTML:{__html:x}}),j&&k&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1 flex-shrink-0",style:{backgroundColor:"rgba(239, 68, 68, 0.12)",color:"#ef4444"},children:[(0,be.jsx)(xf.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("supportMaterial.hiddenBadge")})]}),j&&_&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1 flex-shrink-0",style:{backgroundColor:`${l.accent}15`,color:l.accent},children:[(0,be.jsx)(sr.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:K(r.meta?._start_date)})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-shrink-0",children:[j&&!T&&(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{C({isOpen:!0,mode:"edit",lesson:e})})(r)},className:"p-1 sm:p-1.5 rounded-lg transition-all",style:{backgroundColor:`${l.accent}15`},title:e("videos.editTheme"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${l.accent}25`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${l.accent}15`},children:(0,be.jsx)(rs.A,{size:14,className:"sm:w-4 sm:h-4",style:{color:l.accent}})}),j&&!T&&(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{A({isOpen:!0,lesson:e})})(r)},className:"p-1 sm:p-1.5 rounded-lg transition-all",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},title:e("videos.deleteTheme"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(pr.A,{size:14,className:"sm:w-4 sm:h-4",style:{color:"#ef4444"}})}),j&&!T&&(0,be.jsxs)("button",{onClick:e=>{e.stopPropagation(),U(r.id)},className:"p-1.5 sm:px-3 sm:py-1.5 rounded-lg transition-all text-xs font-medium flex items-center gap-1.5",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,be.jsx)(Ie.A,{size:14}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("videos.addVideo")})]}),(0,be.jsxs)("span",{className:"hidden sm:inline-block text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",style:{backgroundColor:s?"rgba(255,255,255,0.1)":`${n("primary","#1a202c")}10`,color:l.text,minWidth:"90px",textAlign:"center"},children:[m," ",e(1===m?"videos.video":"videos.videos")]}),(0,be.jsxs)("button",{onClick:()=>{return m>0&&(e=r.id,void d(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r}));var e},disabled:0===m,className:"p-2 sm:py-2 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-1 sm:gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",style:{backgroundColor:l.buttonBg,color:l.buttonText},onMouseEnter:e=>{0!==m&&(s?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=l.buttonHoverBg)},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=l.buttonBg},children:[(0,be.jsx)("span",{className:"hidden sm:inline",children:e(i?"videos.hideLesson":"videos.showLesson")}),i?(0,be.jsx)($n.A,{size:16}):(0,be.jsx)(Ut.A,{size:16})]})]})]}),i&&(0,be.jsx)("div",{children:r.videoSteps.filter(e=>!!j||!V(e)&&!Y(e)).map((o,a)=>{const i=(e=>{if(e.data?.duration){const t=parseInt(e.data.duration);return t>0?`${t} min`:null}return null})(o),c=(r.meta?._lesson_steps||[]).findIndex(e=>e.type===o.type&&e.title===o.title&&JSON.stringify(e.data)===JSON.stringify(o.data)),d=I(r.id,"step",r.id,c),f=Y(o),m=V(o);return(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:a>0?"mx-6":"",style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,be.jsxs)("div",{className:"flex items-center gap-3 px-4 sm:px-6 py-4 transition-colors duration-150",style:{opacity:f||m?.6:1},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s?"rgba(255,255,255,0.05)":`${n("primary","#1a202c")}03`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[f?(0,be.jsx)(gf,{size:18,style:{color:l.accent},className:"flex-shrink-0"}):m?(0,be.jsx)(xf.A,{size:18,style:{color:"#ef4444"},className:"flex-shrink-0"}):(0,be.jsx)("div",{className:"flex-shrink-0 p-1",children:d?(0,be.jsx)(Oe.A,{size:28,style:{color:"#10b981"}}):(0,be.jsx)(Or,{size:28,style:{color:l.textMuted}})}),(0,be.jsxs)("div",{className:"flex flex-col flex-1 min-w-0",children:[(0,be.jsx)("span",{className:"text-sm font-medium truncate",style:{color:l.text},children:o.title}),i&&(0,be.jsx)("span",{className:"text-xs",style:{color:l.textMuted},children:i})]}),j&&(f||m)&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[m&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1",style:{backgroundColor:"rgba(239, 68, 68, 0.12)",color:"#ef4444"},children:[(0,be.jsx)(xf.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("supportMaterial.hiddenBadge")})]}),f&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1",style:{backgroundColor:`${l.accent}15`,color:l.accent},children:[(0,be.jsx)(sr.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:K(o.start_date)})]})]}),j&&(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,be.jsx)("button",{onClick:e=>{var t;e.stopPropagation(),t=r.id,S({isOpen:!0,mode:"edit",lessonId:t,videoIndex:a,video:o})},className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:`${l.accent}15`},title:e("common.edit"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${l.accent}25`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${l.accent}15`},children:(0,be.jsx)(rs.A,{size:14,style:{color:l.accent}})}),(0,be.jsx)("button",{onClick:n=>{n.stopPropagation(),(async(r,n)=>{if(window.confirm(e("videos.deleteConfirm")))try{const s=u.find(e=>e.id===r);if(!s)throw new Error("Lesson not found");const o=s.meta?._lesson_steps||[],a=o.filter(e=>"video"===e.type),i=a[n],l=o.filter(e=>e!==i);await w.updateLesson(s.id,{title:s.title?.rendered||s.title,courseId:s.meta?._course_id||t,meta:{_lesson_steps:l}}),h===i&&(g(null),y(null)),p(e=>e.map(e=>{if(e.id!==r)return e;const t=l.filter(e=>"video"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,meta:{...e.meta,_lesson_steps:l},videoSteps:t}})),ne.oR.success(e("videos.videoDeleted"))}catch(t){console.error("Error deleting video:",t),ne.oR.error(e("videos.errors.deleteFailed"))}})(r.id,a)},className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},title:e("common.delete"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(pr.A,{size:14,style:{color:"#ef4444"}})})]}),!j&&!f&&!m&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),v({isOpen:!0,step:o,lesson:r,feedbackType:"duda"})},className:"p-2 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:`${l.accent}15`},title:e("quizzes.feedbackModal.titleFeedback"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${l.accent}25`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${l.accent}15`},children:(0,be.jsx)(fe.A,{size:16,style:{color:l.accent}})}),(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),v({isOpen:!0,step:o,lesson:r,feedbackType:"impugnacion"})},className:"p-2 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:"rgba(239,68,68,0.1)"},title:e("quizzes.feedbackModal.titleChallenge"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239,68,68,0.2)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(239,68,68,0.1)"},children:(0,be.jsx)(Te.A,{size:16,style:{color:"#ef4444"}})})]}),(!f||j)&&(0,be.jsx)("button",{onClick:()=>((e,t)=>{g(e),y(t)})(o,r),className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex-shrink-0",style:{backgroundColor:l.buttonBg,color:l.buttonText},onMouseEnter:e=>{s?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=l.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=l.buttonBg},children:e("videos.available")})]})]},o.id||a)})}),!N&&(0,be.jsx)("div",{style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},r.id)})})})})]})}),(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(h?"translate-x-0":"translate-x-full"),style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:h&&(0,be.jsxs)("div",{className:"h-full flex flex-col",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 sm:py-1.5 border-b flex-shrink-0 gap-2",style:{backgroundColor:n("background","#ffffff"),borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden",children:[(0,be.jsxs)("nav",{className:"hidden sm:flex items-center text-xs space-x-1.5",children:[(0,be.jsx)(re.N_,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:l.text},children:e("sidebar.studyPlanner")}),(0,be.jsx)(ur.A,{size:12,style:{color:l.textMuted}}),(0,be.jsx)(re.N_,{to:`/courses/${t}/dashboard`,className:"transition-colors duration-200 hover:underline font-medium",style:{color:l.text},dangerouslySetInnerHTML:{__html:i}}),(0,be.jsx)(ur.A,{size:12,style:{color:l.textMuted}}),(0,be.jsx)("span",{className:"font-medium",style:{color:l.textMuted},children:e("courses.videos")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Me.A,{size:16,style:{color:l.accent},className:"flex-shrink-0"}),(0,be.jsx)("h2",{className:"text-sm font-medium leading-tight truncate",style:{color:l.text},children:h.title})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,be.jsxs)("button",{onClick:()=>{const e=ee();if(e>0){const t=Z[e-1];g(t.step),y(t.lesson)}},disabled:!oe,className:"px-3 py-1.5 rounded-lg transition-all flex items-center gap-1.5 text-sm font-medium",style:{backgroundColor:s?`${l.accent}15`:`${l.text}10`,opacity:oe?1:.4,cursor:oe?"pointer":"not-allowed"},onMouseEnter:e=>{oe&&(e.currentTarget.style.backgroundColor=s?`${l.accent}25`:`${l.text}20`)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}15`:`${l.text}10`},children:[(0,be.jsx)(We.A,{size:16,style:{color:l.text}}),(0,be.jsx)("span",{children:e("navigation.previous")})]}),(0,be.jsxs)("button",{onClick:()=>{const e=ee();if(e<Z.length-1){const t=Z[e+1];g(t.step),y(t.lesson)}},disabled:!ae,className:"px-3 py-1.5 rounded-lg transition-all flex items-center gap-1.5 text-sm font-medium",style:{backgroundColor:s?`${l.accent}15`:`${l.text}10`,opacity:ae?1:.4,cursor:ae?"pointer":"not-allowed"},onMouseEnter:e=>{ae&&(e.currentTarget.style.backgroundColor=s?`${l.accent}25`:`${l.text}20`)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}15`:`${l.text}10`},children:[(0,be.jsx)("span",{children:e("navigation.next")}),(0,be.jsx)(ur.A,{size:16,style:{color:l.text}})]}),(0,be.jsx)("button",{onClick:()=>{g(null),y(null)},className:"p-1.5 rounded-lg transition-all ml-1",style:{backgroundColor:s?`${l.accent}15`:`${l.text}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}25`:`${l.text}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?`${l.accent}15`:`${l.text}10`},title:e("common.back"),children:(0,be.jsx)(xe.A,{size:18,style:{color:l.text}})})]})]}),(0,be.jsx)("div",{className:"flex-1 overflow-hidden flex items-center justify-center p-4 md:p-6",style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:ie(h)?(0,be.jsx)("div",{className:"w-full h-full max-w-5xl rounded-lg overflow-hidden shadow-lg",style:{backgroundColor:"#000000"},children:(0,be.jsx)("iframe",{src:ie(h),className:"w-full h-full border-0",title:h.title,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):(0,be.jsx)("div",{className:"flex items-center justify-center h-full w-full rounded-lg",style:{backgroundColor:n("background","#ffffff")},children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)(Me.A,{size:48,className:"mx-auto mb-3",style:{color:l.text+"30"}}),(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:l.text},children:e("videos.noVideoUrl")}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:l.textMuted},children:e("videos.noVideoUrlDescription")})]})})})]})})]}),j&&(0,be.jsx)(jf.A,{isOpen:k.isOpen,onClose:F,lesson:k.lesson,mode:k.mode,onSave:async(t,r="close")=>{try{if("create"===k.mode){const n=await w.createLesson(t);ne.oR.success(e("videos.lessonCreated")),await B(),"addVideo"===r&&U(n.id),F()}else await w.updateLesson(k.lesson.id,t),ne.oR.success(e("videos.lessonUpdated")),await B(),F()}catch(e){throw console.error("Error saving lesson:",e),e}},availableCourses:N.courses.map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),compact:!0,preselectedCourseId:t}),j&&(0,be.jsx)(Nf,{isOpen:_.isOpen,onClose:W,mode:_.mode,video:_.video,onSave:async r=>{try{const n=u.find(e=>e.id===_.lessonId);if(!n)throw new Error("Lesson not found");const s=n.meta?._lesson_steps||[];let o;if("create"===_.mode)o=[...s,r];else{const e=s.filter(e=>"video"===e.type),t=e[_.videoIndex];o=s.map(e=>e===t?r:e)}await w.updateLesson(n.id,{title:n.title?.rendered||n.title,courseId:n.meta?._course_id||t,meta:{_lesson_steps:o}}),p(e=>e.map(e=>{if(e.id!==_.lessonId)return e;const t=o.filter(e=>"video"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,meta:{...e.meta,_lesson_steps:o},videoSteps:t}})),ne.oR.success(e("videos.videoSaved")),W()}catch(e){throw console.error("Error saving video:",e),e}}}),j&&E.isOpen&&(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999999},onMouseDown:e=>{M.current=e.target===e.currentTarget},onClick:e=>{e.target===e.currentTarget&&M.current&&H(),M.current=!1},children:(0,be.jsxs)("div",{className:"relative w-full max-w-md rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:n("background","#ffffff")},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 px-6 py-4 border-b",style:{borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(Te.A,{size:20,style:{color:"#ef4444"}})}),(0,be.jsx)("h2",{className:"text-lg font-semibold",style:{color:l.text},children:e("videos.deleteThemeTitle")})]}),(0,be.jsxs)("div",{className:"px-6 py-5",children:[(0,be.jsx)("p",{className:"text-sm mb-4",style:{color:l.text},children:e("videos.deleteThemeConfirm")}),(0,be.jsxs)("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:s?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",border:`1px solid ${n("borderColor","#e5e7eb")}`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,be.jsx)(Me.A,{size:18,style:{color:l.accent}}),(0,be.jsx)("span",{className:"font-medium",style:{color:l.text},dangerouslySetInnerHTML:{__html:E.lesson?.title?.rendered||E.lesson?.title||e("courses.untitledLesson")}})]}),(0,be.jsx)("p",{className:"text-sm",style:{color:l.textMuted},children:e("videos.associatedVideos",{count:E.lesson?.videoSteps?.length||0})})]}),(0,be.jsx)("p",{className:"text-xs",style:{color:"#ef4444"},children:e("videos.deleteThemeWarning")})]}),(0,be.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t",style:{borderColor:n("borderColor","#e5e7eb"),backgroundColor:s?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)"},children:[(0,be.jsx)("button",{type:"button",onClick:H,className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors",style:{backgroundColor:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:l.text},children:e("common.cancel")}),(0,be.jsxs)("button",{type:"button",onClick:async()=>{if(E.lesson)try{await w.deleteLesson(E.lesson.id),await B(),ne.oR.success(e("videos.themeDeleted")),H()}catch(t){console.error("Error deleting theme:",t),ne.oR.error(e("videos.errors.deleteTheme"))}},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2",style:{backgroundColor:"#ef4444",color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,be.jsx)(pr.A,{size:16}),e("videos.confirmDelete")]})]})]})}),b.isOpen&&(0,be.jsx)(Cf,{step:b.step,lesson:b.lesson,courseId:t,courseName:i,feedbackType:b.feedbackType,onClose:()=>v({isOpen:!1,step:null,lesson:null,feedbackType:"duda"})})]})};var Sf=a(1436),Ef=a(4979),Af=a(5640),Mf=a(3197);const Tf=e=>{if(!e)return"";const t=document.createElement("textarea");return t.innerHTML=e,t.value},Pf=({selectedIds:e=[],onSelect:t,onToggleQuestion:s,multiSelect:a=!0,excludedIds:i=[],onEditQuestion:l=null,questionOverrides:c={},providerRefreshKey:d=0})=>{const{t:u}=(0,o.Bd)(),{getColor:p,isDarkMode:f}=(0,se.DP)(),[m,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(""),v=n().useRef(null),[j,w]=(0,r.useState)(new Set(e));(0,r.useEffect)(()=>{w(new Set(e))},[e]);const[N,k]=(0,r.useState)(!1),[C,_]=(0,r.useState)(new Set),[S,E]=(0,r.useState)(""),[A,M]=(0,r.useState)(!1),T=e=>{_(t=>{const r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},P=()=>{k(!1),_(new Set),E("")},O=(0,Af.A)({autoFetch:!0,perPage:20,debounceMs:300}),{options:z}=(0,ht.h)(["qe_category","qe_provider"]),[q,D]=(0,r.useState)([]),[I,L]=(0,r.useState)(null),[R,$]=(0,r.useState)(!1),[B,F]=(0,r.useState)(null),[U,W]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=O.questions.map(e=>e.id).filter(Boolean);if(0===e.length)return void W({});let t=!1;return(async()=>{try{const r=(0,Ye.getApiConfig)(),n=await(0,Ke.qb)(`${r.apiUrl}/qe/v1/questions/quiz-membership?ids=${e.join(",")}`);t||W(n.data||{})}catch{}})(),()=>{t=!0}},[O.questions.map(e=>e.id).join(",")]),(0,r.useEffect)(()=>{(async()=>{try{const e=(0,Ye.getApiConfig)(),t=await(0,Ke.qb)(`${e.apiUrl}/wp/v2/qe_provider?per_page=100&_fields=id,meta`),r=(Array.isArray(t.data)?t.data:[]).filter(e=>e.meta?._test_unlocked).map(e=>e.id);F(new Set(r))}catch(e){console.error("Error fetching allowed providers:",e),F(new Set)}})()},[d]);const H=(0,r.useMemo)(()=>({text:f?p("textPrimary","#f9fafb"):p("primary","#1a202c"),textMuted:f?p("textSecondary","#9ca3af"):"#6b7280",accent:p("accent","#f59e0b"),background:f?p("background","#0f172a"):"#ffffff",bgCard:f?p("secondaryBackground","#1f2937"):"#f9fafb",border:f?"#374151":"#e5e7eb",hoverBg:f?"#1f2937":"#f3f4f6",selectedBg:f?"#78350f":"#fef3c7"}),[p,f]);(0,r.useEffect)(()=>{(async()=>{try{const e=`${(0,Ye.getApiConfig)().apiUrl}/wp/v2/qe_lesson`,t=new URLSearchParams({per_page:"100",_fields:"id,title",status:"publish,draft,private"}),r=await(0,Ke.qb)(`${e}?${t}`);let n=Array.isArray(r.data)?r.data:[];const s=parseInt(r.headers?.["X-WP-TotalPages"]||"1",10);for(let r=2;r<=s;r++){t.set("page",r.toString());const s=await(0,Ke.qb)(`${e}?${t}`);Array.isArray(s.data)&&(n=n.concat(s.data))}D(n.map(e=>({value:e.id,label:Tf(e.title?.rendered||e.title||`Lesson #${e.id}`)})))}catch(e){console.error("Error fetching all lessons:",e)}})()},[]),(0,r.useEffect)(()=>{const e=O.filters?.provider,t=O.filters?.category;if(O.updateFilter("lessons",null),!e||"all"===e)return void L(null);let r=!1;return(async()=>{try{$(!0);let n=`${(0,Ye.getApiConfig)().apiUrl}/quiz-extended/v1/debug/provider-lessons?provider=${e}`;t&&"all"!==t&&(n+=`&category=${t}`);const s=await(0,Ke.qb)(n);if(r)return;const o=s.data?.data?.lessons||[];L(o.map(e=>({value:e.id,label:Tf(e.title||`Lesson #${e.id}`)})))}catch(e){r||(console.error("Error fetching provider lessons:",e),L([]))}finally{r||$(!1)}})(),()=>{r=!0}},[O.filters?.provider,O.filters?.category]);const Q=(0,r.useMemo)(()=>z.qe_category||[],[z]),V=(0,r.useMemo)(()=>z.qe_provider||[],[z]),Y=null!==I?I:q,K=(0,r.useMemo)(()=>{const e=Y.filter(e=>"all"!==e.value);if(!y.trim())return e;const t=y.toLowerCase().trim();return e.filter(e=>e.label.toLowerCase().includes(t))},[Y,y]);(0,r.useEffect)(()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&x(!1)};if(g)return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[g]);const G=(0,r.useMemo)(()=>{const e=O.filters?.lessons;if(!e||"all"===e||null===e)return"Temas";const t=Array.isArray(e)?e[0]:e,r=Y.find(e=>String(e.value)===String(t));return r?r.label:"Temas"},[O.filters?.lessons,Y]),X=(0,r.useCallback)(e=>null===B||0===B.size||(e.qe_provider||[]).some(e=>B.has(e)),[B]),J=e=>`${(window.qe_data?.api_url||"").replace(/\/wp-json\/?$/,"")}/wp-admin/post.php?post=${e}&action=edit`,Z=!O.filters||!O.computed;return(0,be.jsxs)("div",{className:"flex flex-col h-full bg-transparent",children:[(0,be.jsxs)("div",{className:"flex flex-col gap-3 p-4 border-b border-gray-200 dark:border-gray-800",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("div",{className:"relative flex-1",children:[(0,be.jsx)(Le.A,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-50",style:{color:H.text}}),(0,be.jsx)("input",{type:"text",value:O.filters?.search||"",onChange:e=>O.updateFilter("search",e.target.value),placeholder:u("tests.searchQuestions","Buscar preguntas..."),className:"w-full pl-9 pr-4 py-2 rounded-lg text-sm focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 transition-all outline-none shadow-sm",style:{border:`2px solid ${H.border}`,backgroundColor:f?"#1f2937":"#ffffff",color:H.text}})]}),(0,be.jsx)("button",{onClick:()=>h(!m),className:"p-2 rounded-lg border transition-colors shadow-sm",style:m?{backgroundColor:H.accent,borderColor:H.accent,color:"#ffffff"}:{backgroundColor:f?"#1f2937":"#ffffff",borderColor:H.border,color:H.text},title:"Filtros",children:(0,be.jsx)(Ms.A,{size:18})}),(0,be.jsx)("button",{onClick:()=>{k(e=>!e),_(new Set),E("")},className:"p-2 rounded-lg border transition-colors shadow-sm",style:N?{backgroundColor:"#3b82f6",borderColor:"#3b82f6",color:"#ffffff"}:{backgroundColor:f?"#1f2937":"#ffffff",borderColor:H.border,color:H.text},title:"Cambiar categorÃ­a en lote",children:(0,be.jsx)(Mf.A,{size:18})})]}),N&&(0,be.jsxs)("div",{className:"flex flex-col gap-2 animate-in fade-in slide-in-from-top-2",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5 text-xs font-medium",style:{color:"#3b82f6"},children:[(0,be.jsx)(Mf.A,{size:12}),(0,be.jsx)("span",{children:0===C.size?"Selecciona preguntas de la lista":`${C.size} pregunta${1!==C.size?"s":""} seleccionada${1!==C.size?"s":""}`})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("select",{value:S,onChange:e=>E(e.target.value),className:"flex-1 px-2 py-1.5 rounded-lg text-sm outline-none",style:{border:"2px solid #3b82f6",backgroundColor:f?"#1f2937":"#ffffff",color:H.text},children:[(0,be.jsx)("option",{value:"",children:"Seleccionar categorÃ­a..."}),Q.map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,be.jsx)("button",{onClick:async()=>{if(S&&0!==C.size){M(!0);try{const e=window.qe_data||{},t=e.endpoints?.questions;if(!t)throw new Error("No questions endpoint");await Promise.all(Array.from(C).map(r=>fetch(`${t}/${r}`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},credentials:"same-origin",body:JSON.stringify({qe_category:[parseInt(S)]})}))),ne.oR.success(`CategorÃ­a actualizada en ${C.size} pregunta${1!==C.size?"s":""}`,{autoClose:2e3,position:"bottom-right"}),P()}catch(e){console.error("Error updating batch categories:",e),ne.oR.error("Error al actualizar categorÃ­as",{position:"bottom-right"})}finally{M(!1)}}},disabled:!S||0===C.size||A,className:"px-3 py-1.5 rounded-lg text-xs font-bold text-white transition-all disabled:opacity-40 disabled:cursor-not-allowed",style:{backgroundColor:"#3b82f6"},children:A?"...":"Aplicar"}),(0,be.jsx)("button",{onClick:P,disabled:A,className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-all",style:{border:`1px solid ${H.border}`,color:H.textMuted,backgroundColor:"transparent"},children:"Cancelar"})]})]}),m&&(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm animate-in fade-in slide-in-from-top-2",children:[(0,be.jsxs)("select",{value:O.filters?.category||"all",onChange:e=>O.updateFilter("category",e.target.value),className:"px-2 py-2 rounded-lg outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 transition-all",style:{border:`2px solid ${H.border}`,backgroundColor:f?"#1f2937":"#ffffff",color:H.text},children:[(0,be.jsx)("option",{value:"all",children:"CategorÃ­as"}),Q.filter(e=>"all"!==e.value).map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,be.jsxs)("select",{value:O.filters?.provider||"all",onChange:e=>O.updateFilter("provider",e.target.value),className:"px-2 py-2 rounded-lg outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 transition-all",style:{border:`2px solid ${H.border}`,backgroundColor:f?"#1f2937":"#ffffff",color:H.text},children:[(0,be.jsx)("option",{value:"all",children:"Proveedores"}),V.filter(e=>"all"!==e.value).map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,be.jsxs)("div",{className:"relative",ref:v,children:[(0,be.jsxs)("button",{type:"button",onClick:()=>{x(!g),b("")},className:"w-full px-2 py-2 rounded-lg text-left flex items-center justify-between gap-1 outline-none focus:ring-2 focus:ring-amber-500/20 transition-all",style:{border:`2px solid ${g?H.accent:H.border}`,backgroundColor:f?"#1f2937":"#ffffff",color:O.filters?.lessons&&null!==O.filters.lessons?H.accent:H.text},children:[(0,be.jsx)("span",{className:"truncate text-sm",children:R?"Cargando temas...":G}),R?(0,be.jsx)(Xr.A,{size:14,className:"flex-shrink-0 animate-spin opacity-50"}):(0,be.jsx)(Ut.A,{size:14,className:"flex-shrink-0 transition-transform "+(g?"rotate-180":"")})]}),g&&(0,be.jsxs)("div",{className:"absolute z-50 left-0 right-0 mt-1 rounded-lg shadow-xl overflow-hidden",style:{backgroundColor:f?"#1f2937":"#ffffff",border:`1px solid ${H.border}`},children:[(0,be.jsx)("div",{className:"p-1.5",children:(0,be.jsx)("input",{type:"text",value:y,onChange:e=>b(e.target.value),placeholder:"Buscar tema...",autoFocus:!0,className:"w-full text-sm px-2 py-1.5 rounded outline-none",style:{backgroundColor:f?"#111827":"#f3f4f6",color:H.text}})}),(0,be.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[(0,be.jsx)("button",{type:"button",onClick:()=>{O.updateFilter("lessons",null),x(!1)},className:"w-full text-left px-3 py-1.5 text-sm transition-colors",style:{color:H.textMuted,fontStyle:"italic",backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=H.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:"Todos los temas"}),0===K.length?(0,be.jsx)("div",{className:"px-3 py-2 text-sm",style:{color:H.textMuted},children:null!==I&&0===I.length?"Sin temas para este proveedor":"Sin resultados"}):K.map(e=>{const t=O.filters?.lessons,r=Array.isArray(t)?t[0]:t,n=null!=r&&String(r)===String(e.value);return(0,be.jsxs)("button",{type:"button",onClick:()=>{O.updateFilter("lessons",[e.value]),x(!1)},className:"w-full text-left px-3 py-1.5 text-sm transition-colors flex items-center justify-between",style:{color:n?H.accent:H.text,fontWeight:n?600:400,backgroundColor:n?`${H.accent}15`:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=n?`${H.accent}25`:H.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=n?`${H.accent}15`:"transparent"},children:[(0,be.jsx)("span",{className:"truncate",children:e.label}),n&&(0,be.jsx)(Oe.A,{size:12,style:{color:H.accent,flexShrink:0}})]},e.value)})]})]})]}),(0,be.jsxs)("select",{value:O.filters?.difficulty||"all",onChange:e=>O.updateFilter("difficulty",e.target.value),className:"px-2 py-2 rounded-lg outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 transition-all",style:{border:`2px solid ${H.border}`,backgroundColor:f?"#1f2937":"#ffffff",color:H.text},children:[(0,be.jsx)("option",{value:"all",children:"Dificultad"}),[{value:"all",label:"Todas"},{value:"easy",label:"FÃ¡cil"},{value:"medium",label:"Media"},{value:"hard",label:"DifÃ­cil"}].filter(e=>"all"!==e.value).map(e=>(0,be.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),!Z&&O.pagination.total>0&&(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 py-1.5 text-xs border-b",style:{color:H.textMuted,borderColor:H.border},children:[(0,be.jsx)("span",{children:O.hasMore?`Mostrando ${O.questions.length} de ${O.pagination.total}`:`${O.pagination.total} pregunta${1!==O.pagination.total?"s":""}`}),O.loading&&(0,be.jsx)(Xr.A,{size:12,className:"animate-spin opacity-50",style:{color:H.textMuted}})]}),(0,be.jsxs)("div",{className:"flex-1 overflow-y-auto min-h-0",children:[Z?(0,be.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,be.jsx)(Xr.A,{className:"animate-spin opacity-50",size:24,style:{color:H.text}})}):0===O.questions.length?(0,be.jsx)("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center opacity-60",children:(0,be.jsx)("p",{style:{color:H.text},children:"No se encontraron preguntas"})}):(0,be.jsx)("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:O.questions.map(e=>{const r=c[e.id]?{...e,...c[e.id]}:e,n=j.has(r.id);if(i.includes(r.id))return null;const o=(O.filters?.search||"").toLowerCase().trim();let d=null;if(o){const e=[],t=(r.title?.rendered||r.title||"").toLowerCase(),n=(r.content?.rendered||r.content||"").replace(/<[^>]*>/g,"").toLowerCase(),s=(r.meta?._question_options||[]).filter(e=>(e.text||"").toLowerCase().includes(o));t.includes(o)&&e.push("tÃ­tulo"),n.includes(o)&&e.push("explicaciÃ³n"),s.length>0&&e.push(1===s.length?"1 opciÃ³n":`${s.length} opciones`),e.length>0&&(d=e)}return X(r)?(0,be.jsxs)("div",{onClick:()=>N?T(r.id):(e=>{const r=new Set(j);r.has(e.id)?r.delete(e.id):(a||r.clear(),r.add(e.id)),w(r),s&&s(e),t&&t(a?Array.from(r):e)})(r),className:"flex items-start gap-3 p-3 cursor-pointer transition-colors "+(N?C.has(r.id)?"":"hover:bg-blue-50/50 dark:hover:bg-blue-900/10":n?"":"hover:bg-gray-50 dark:hover:bg-gray-800/50"),style:{backgroundColor:N?C.has(r.id)?f?"rgba(59,130,246,0.15)":"#eff6ff":"transparent":n?H.selectedBg:"transparent"},children:[(0,be.jsx)("div",{className:"mt-0.5",children:N?C.has(r.id)?(0,be.jsx)(Be.A,{size:18,className:"text-blue-500"}):(0,be.jsx)(Re.A,{size:18,className:"text-gray-400 dark:text-gray-600"}):n?(0,be.jsx)(Oe.A,{size:18,className:"text-amber-500"}):(0,be.jsx)(Or,{size:18,className:"text-gray-400 dark:text-gray-600"})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("p",{className:"font-medium text-sm line-clamp-2 mb-0.5",style:{color:H.text},children:r.title?.rendered||r.title||"Sin tÃ­tulo"}),(0,be.jsxs)("div",{className:"flex items-center gap-2 text-xs opacity-70 flex-wrap",style:{color:H.textMuted},children:[r.difficulty&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("span",{children:"â€¢"}),(0,be.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[10px] "+("hard"===r.difficulty?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"medium"===r.difficulty?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"),children:"hard"===r.difficulty?"DifÃ­cil":"medium"===r.difficulty?"Media":"FÃ¡cil"})]}),d&&d.map((e,t)=>(0,be.jsx)("span",{className:"text-[9px] font-medium px-1.5 py-0.5 rounded-full leading-none",style:{backgroundColor:`${H.accent}20`,color:H.accent},children:e},t)),(U[r.id]||[]).map(e=>(0,be.jsx)("span",{className:"text-[9px] font-medium px-1.5 py-0.5 rounded-full leading-none border",style:f?{backgroundColor:`${H.accent}15`,color:H.accent,borderColor:`${H.accent}40`}:{backgroundColor:"#eff6ff",color:"#2563eb",borderColor:"#bfdbfe"},children:e.title},e.id))]})]}),l?(0,be.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),l(r)},className:"flex-shrink-0 flex items-center gap-1 text-xs font-medium px-2.5 py-1.5 rounded-lg transition-colors mt-0.5",style:{border:`1.5px solid ${H.accent}`,color:H.accent,backgroundColor:`${H.accent}10`},children:[(0,be.jsx)(or.A,{size:11}),"Editar"]}):(0,be.jsxs)("a",{href:J(r.id),target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"flex-shrink-0 flex items-center gap-1 text-xs font-medium px-2.5 py-1.5 rounded-lg transition-colors mt-0.5",style:{border:`1.5px solid ${H.accent}`,color:H.accent,backgroundColor:`${H.accent}10`,textDecoration:"none"},children:[(0,be.jsx)(or.A,{size:11}),"Editar"]})]},r.id):(0,be.jsxs)("div",{onClick:N?()=>T(r.id):void 0,className:"flex items-start gap-3 p-3 "+(N?"cursor-pointer":""),style:{opacity:N?1:.6,backgroundColor:N&&C.has(r.id)?f?"rgba(59,130,246,0.15)":"#eff6ff":"transparent"},children:[(0,be.jsx)("div",{className:"mt-0.5",children:N?C.has(r.id)?(0,be.jsx)(Be.A,{size:18,className:"text-blue-500"}):(0,be.jsx)(Re.A,{size:18,className:"text-gray-400 dark:text-gray-600"}):(0,be.jsx)(gf,{size:16,className:"text-gray-300 dark:text-gray-600"})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("p",{className:"font-medium text-sm line-clamp-2 mb-0.5",style:{color:H.text},children:r.title?.rendered||r.title||"Sin tÃ­tulo"}),(0,be.jsxs)("div",{className:"flex items-center gap-2 text-xs flex-wrap",style:{color:H.textMuted},children:[(0,be.jsx)("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded-full leading-none",style:{backgroundColor:"#dbeafe",color:"#1e40af"},children:(()=>{const e=(r.qe_provider||[]).map(e=>V.find(t=>t.value===e)?.label).filter(Boolean);return e.length>0?`Proveedor: ${e.join(", ")}`:"Sin proveedor"})()}),(U[r.id]||[]).map(e=>(0,be.jsx)("span",{className:"text-[10px] font-medium px-1.5 py-0.5 rounded-full leading-none border",style:f?{backgroundColor:`${H.accent}15`,color:H.accent,borderColor:`${H.accent}40`}:{backgroundColor:"#eff6ff",color:"#2563eb",borderColor:"#bfdbfe"},children:e.title},e.id)),r.difficulty&&(0,be.jsx)("span",{className:"px-1.5 py-0.5 rounded text-[10px] "+("hard"===r.difficulty?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"medium"===r.difficulty?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-400":"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400"),children:"hard"===r.difficulty?"DifÃ­cil":"medium"===r.difficulty?"Media":"FÃ¡cil"})]})]}),l?(0,be.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),l(r)},className:"flex-shrink-0 flex items-center gap-1 text-xs font-medium px-2.5 py-1.5 rounded-lg transition-colors mt-0.5",style:{border:`1.5px solid ${H.accent}`,color:H.accent,backgroundColor:`${H.accent}10`},children:[(0,be.jsx)(or.A,{size:11}),"Editar"]}):(0,be.jsxs)("a",{href:J(r.id),target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"flex-shrink-0 flex items-center gap-1 text-xs font-medium px-2.5 py-1.5 rounded-lg transition-colors mt-0.5",style:{border:`1.5px solid ${H.accent}`,color:H.accent,backgroundColor:`${H.accent}10`,textDecoration:"none"},children:[(0,be.jsx)(or.A,{size:11}),"Editar"]})]},r.id)})}),O.hasMore&&(0,be.jsx)("div",{className:"p-4 text-center",children:(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),O.loadMoreQuestions()},disabled:O.loading,className:"inline-flex items-center gap-2 text-xs font-semibold px-5 py-2 rounded-lg transition-opacity disabled:opacity-60",style:{backgroundColor:H.accent,color:"#ffffff"},children:O.loading?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Xr.A,{size:13,className:"animate-spin"})," Cargando..."]}):"Cargar mÃ¡s"})})]})]})};var Of=a(9354);const zf=({question:e,onRemove:t,onEdit:r,colors:n})=>{const{attributes:s,listeners:o,setNodeRef:a,transform:i,transition:l}=(0,at.gl)({id:e.id}),c={transform:Ef.Ks.Transform.toString(i),transition:l};return(0,be.jsxs)("div",{ref:a,style:{...c},className:"flex items-center justify-between p-2 mb-1 rounded-lg border bg-transparent border-gray-200 dark:border-gray-700 group hover:border-amber-400/50 transition-colors shadow-sm",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden flex-1",children:[(0,be.jsx)("button",{...s,...o,className:"cursor-grab p-1 flex items-center justify-center bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 rounded transition-colors",style:{color:n.text},children:(0,be.jsx)(Sf.A,{size:14})}),(0,be.jsxs)("div",{className:"flex flex-col min-w-0 flex-1 justify-center space-y-[2px]",children:[(0,be.jsx)("span",{className:"font-medium text-xs truncate leading-none cursor-pointer hover:text-amber-500 transition-colors",onClick:()=>r(e),style:{color:n.text},children:e.title?.rendered||e.title}),e._matches&&(0,be.jsx)("div",{className:"flex items-center gap-1 flex-wrap",children:e._matches.map((e,t)=>(0,be.jsx)("span",{className:"text-[9px] font-medium px-1.5 py-0.5 rounded-full leading-none",style:{backgroundColor:`${n.accent}20`,color:n.accent},children:e},t))})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1 transition-all",children:[(0,be.jsx)("button",{onClick:()=>r(e),className:"p-1.5 flex items-center justify-center hover:bg-amber-50 dark:hover:bg-amber-900/20 rounded-md transition-all bg-transparent",style:{color:n.accent},title:"Editar pregunta",children:(0,be.jsx)(rs.A,{size:12})}),(0,be.jsx)("button",{onClick:()=>t(e.id),className:"p-1.5 flex items-center justify-center text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-all bg-transparent",title:"Quitar pregunta",children:(0,be.jsx)(pr.A,{size:12})})]})]})},qf="9999-12-31",Df=({currentSelected:e,onSelectionChange:t,onEditQuestion:r,questionOverrides:n,providerRefreshKey:s})=>(0,be.jsx)(Pf,{selectedIds:e.map(e=>e.id),onSelect:()=>{},onToggleQuestion:r=>{e.find(e=>e.id===r.id)?(t(e=>e.filter(e=>e.id!==r.id)),ne.oR.info("Pregunta removida",{autoClose:1e3,position:"bottom-right"})):(t(e=>[...e,r]),ne.oR.success("Pregunta aÃ±adida al test",{autoClose:1e3,position:"bottom-right"}))},onEditQuestion:r,questionOverrides:n,providerRefreshKey:s}),If=({isOpen:e,onClose:t,mode:n="create",test:s=null,courseId:a,lessonId:i=null,onSave:l})=>{const{t:c}=(0,o.Bd)(),{getColor:d,isDarkMode:u}=(0,se.DP)(),[p,f]=(0,r.useState)("content"),[m,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[v,j]=((0,r.useRef)(!1),(0,r.useState)({isOpen:!1,mode:"create",question:null})),[w,N]=(0,r.useState)({title:"",description:"",difficulty_level:"medium",passing_score:"5.0",time_limit:"",max_attempts:"",randomize:!0,show_results:!0,start_date:""}),[k,C]=(0,r.useState)([]),[_,S]=(0,r.useState)(""),[E,A]=(0,r.useState)(0),[M,T]=(0,r.useState)({}),[P,O]=(0,r.useState)(0),z=(0,r.useMemo)(()=>{if(!_.trim())return k.map(e=>({...e,_matches:null}));const e=_.toLowerCase().trim();return k.reduce((t,r)=>{const n=(r.title?.rendered||r.title||"").toLowerCase(),s=(r.content?.rendered||r.content||"").replace(/<[^>]*>/g,"").toLowerCase(),o=(r.meta?._question_options||[]).filter(t=>(t.text||"").toLowerCase().includes(e)),a=[];return n.includes(e)&&a.push("tÃ­tulo"),s.includes(e)&&a.push("explicaciÃ³n"),o.length>0&&a.push(1===o.length?"1 opciÃ³n":`${o.length} opciones`),a.length>0&&t.push({...r,_matches:a}),t},[])},[k,_]),q=(0,gt.A)({autoFetch:!1}),D=(0,Af.A)({autoFetch:!1}),I=(0,r.useMemo)(()=>({text:u?d("textPrimary","#f9fafb"):d("primary","#1a202c"),textMuted:u?d("textSecondary","#9ca3af"):"#6b7280",accent:d("accent","#f59e0b"),bgCard:u?d("secondaryBackground","#1f2937"):"#ffffff",bg:u?d("background","#0f172a"):"#f9fafb",border:u?"#374151":"#e5e7eb"}),[d,u]);(0,r.useEffect)(()=>{e&&(async()=>{if(f("content"),S(""),N({title:"",description:"",difficulty_level:"medium",passing_score:"5.0",time_limit:"",max_attempts:"",randomize:!0,show_results:!0,start_date:""}),C([]),T({}),"edit"===n&&s){x(!0);try{const e=s.title||"",t=s.data?.quiz_id;if(t){const r=await(0,Vn.getOne)(t),n=r.meta||{};N({title:e,description:r.content?.rendered||r.content||"",difficulty_level:n._difficulty_level||"medium",passing_score:"5.0",time_limit:"",max_attempts:"",randomize:!0,show_results:!0,start_date:s.start_date||""});const o=n._quiz_question_ids||[];if(o.length>0){const e=await(0,Xe.getQuestionsByIds)(o);C(e)}}else N(t=>({...t,title:e,start_date:s.start_date||""}))}catch(e){console.error("Error loading test data:",e),ne.oR.error("Error al cargar datos del test")}finally{x(!1)}}})()},[e,n,s]);const L=()=>{j({isOpen:!0,mode:"create",question:null})},R=e=>{j({isOpen:!0,mode:"edit",question:e})},$=()=>{j(e=>({...e,isOpen:!1})),O(e=>e+1)};(0,r.useEffect)(()=>{if(e){const e=setTimeout(()=>b(!0),10);return()=>clearTimeout(e)}b(!1)},[e]);const B=()=>{b(!1),setTimeout(t,300)};if(!e)return null;const F=document.getElementById("wpadminbar"),U=document.getElementById("qe-topbar"),W=(F?F.offsetHeight:0)+(U?U.offsetHeight:0);return(0,be.jsxs)("div",{className:"fixed left-0 right-0 bottom-0",style:{zIndex:1e4,top:W},children:[(0,be.jsx)("div",{className:"absolute inset-0 transition-opacity duration-300",style:{backgroundColor:"rgba(0,0,0,0.4)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",opacity:y?1:0},onClick:B}),(0,be.jsxs)("div",{className:"absolute inset-0 w-full shadow-2xl flex flex-col transition-transform duration-300 ease-out",style:{backgroundColor:I.bg,transform:y?"translateX(0)":"translateX(100%)"},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-5 py-2 border-b flex-shrink-0",style:{borderColor:I.border,backgroundColor:I.bgCard},children:[(0,be.jsxs)("h2",{className:"text-sm font-bold",style:{color:I.text},children:["create"===n?"Nuevo Test":"Editar Test",(0,be.jsx)("span",{className:"font-normal ml-2 text-xs",style:{color:I.textMuted},children:"â€” Configura el contenido y las preguntas"})]}),(0,be.jsx)("button",{onClick:B,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",style:{color:I.textMuted},children:(0,be.jsx)(xe.A,{size:18})})]}),(0,be.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,be.jsx)("div",{className:"flex-1 flex flex-col min-w-0 transition-all "+("selector"===p?"hidden md:flex md:w-1/2":"w-full"),children:(0,be.jsx)("div",{className:"flex-1 overflow-y-auto p-5",children:g?(0,be.jsx)("div",{className:"flex justify-center p-10",children:(0,be.jsx)("span",{className:"animate-pulse",children:"Cargando..."})}):(0,be.jsxs)("div",{className:"space-y-4",children:[(0,be.jsxs)("div",{className:"flex items-end gap-3",children:[(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("label",{className:"block text-[10px] font-bold uppercase mb-1",style:{color:I.textMuted},children:"TÃ­tulo del Test"}),(0,be.jsx)("input",{type:"text",value:w.title,onChange:e=>N({...w,title:e.target.value}),className:"w-full text-sm font-medium p-2 rounded-lg focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 outline-none transition-all",placeholder:"Ej: EvaluaciÃ³n Final del MÃ³dulo 1",style:{border:`2px solid ${I.border}`,color:I.text,backgroundColor:u?"#1f2937":"#ffffff"},autoFocus:!0})]}),(0,be.jsxs)("div",{children:[(0,be.jsx)("label",{className:"block text-[10px] font-bold uppercase mb-1",style:{color:I.textMuted},children:"Dificultad"}),(0,be.jsxs)("select",{value:w.difficulty_level,onChange:e=>N({...w,difficulty_level:e.target.value}),className:"text-sm font-medium p-2 rounded-lg focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500 outline-none transition-all",style:{border:`2px solid ${I.border}`,color:"easy"===w.difficulty_level?"#10b981":"hard"===w.difficulty_level?"#ef4444":"#f59e0b",backgroundColor:u?"#1f2937":"#ffffff"},children:[(0,be.jsx)("option",{value:"easy",children:"FÃ¡cil"}),(0,be.jsx)("option",{value:"medium",children:"Media"}),(0,be.jsx)("option",{value:"hard",children:"DifÃ­cil"})]})]})]}),(0,be.jsxs)("div",{className:"rounded-lg border flex flex-col gap-3",style:{padding:"12px",borderColor:I.border,backgroundColor:u?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)"},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[w.start_date!==qf?(0,be.jsx)(cr.A,{size:14,style:{color:"#10b981"}}):(0,be.jsx)(xf.A,{size:14,style:{color:"#ef4444"}}),(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:"text-xs font-medium",style:{color:I.text},children:"Visibilidad"}),(0,be.jsx)("div",{className:"text-[10px]",style:{color:I.textMuted},children:w.start_date!==qf?"Los estudiantes pueden ver este test":"Oculto para los estudiantes"})]})]}),(0,be.jsx)("button",{type:"button",onClick:()=>N({...w,start_date:w.start_date===qf?"":qf}),style:{position:"relative",width:"36px",height:"20px",borderRadius:"10px",border:"none",backgroundColor:w.start_date!==qf?"#10b981":"#9ca3af",cursor:"pointer",transition:"background-color 0.2s",flexShrink:0},children:(0,be.jsx)("span",{style:{position:"absolute",top:"2px",left:w.start_date!==qf?"18px":"2px",width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"#ffffff",transition:"left 0.2s",boxShadow:"0 1px 3px rgba(0,0,0,0.2)"}})})]}),w.start_date!==qf&&(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5 mb-1.5",children:[(0,be.jsx)(sr.A,{size:11,style:{color:I.textMuted}}),(0,be.jsx)("label",{className:"text-[10px] font-bold uppercase",style:{color:I.textMuted},children:"Fecha de desbloqueo"})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("input",{type:"date",value:w.start_date&&w.start_date!==qf?w.start_date.split("T")[0]:"",onChange:e=>N({...w,start_date:e.target.value||""}),className:"flex-1 text-xs p-1.5 rounded-md outline-none",style:{border:`1px solid ${I.border}`,color:I.text,backgroundColor:u?"#1f2937":"#ffffff"}}),w.start_date&&w.start_date!==qf&&(0,be.jsx)("button",{type:"button",onClick:()=>N({...w,start_date:""}),className:"text-[10px] px-2 py-1 rounded bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",style:{color:I.textMuted,border:`1px solid ${I.border}`},children:"Quitar"})]}),(0,be.jsx)("div",{className:"text-[10px] mt-1",style:{color:I.textMuted},children:"Opcional. El test serÃ¡ visible a partir de esta fecha."})]})]}),(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,be.jsxs)("label",{className:"block text-[10px] font-bold uppercase",style:{color:I.textMuted},children:["Preguntas (",k.length,")"]}),(0,be.jsxs)("div",{className:"flex items-center gap-1",children:[(0,be.jsxs)("button",{onClick:L,className:"text-[10px] font-bold text-amber-600 dark:text-amber-500 flex items-center gap-1 hover:underline px-2 py-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[(0,be.jsx)(Ie.A,{size:12})," CREAR"]}),(0,be.jsxs)("button",{onClick:()=>f("selector"),className:"text-[10px] font-bold flex items-center gap-1 hover:underline px-2 py-1 rounded-md transition-colors "+("selector"===p?"text-white":"text-amber-600 dark:text-amber-500 hover:bg-gray-100 dark:hover:bg-gray-800"),style:"selector"===p?{backgroundColor:I.accent}:{},children:[(0,be.jsx)(He.A,{size:12})," BUSCAR"]})]})]}),k.length>0&&(0,be.jsxs)("div",{className:"relative mb-2",children:[(0,be.jsx)(Le.A,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 pointer-events-none",style:{color:I.textMuted}}),(0,be.jsx)("input",{type:"text",value:_,onChange:e=>S(e.target.value),placeholder:"Buscar en tÃ­tulo, contenido u opciones...",className:"w-full text-xs pl-8 pr-8 py-2 rounded-lg outline-none transition-all focus:ring-2 focus:ring-amber-500/20",style:{border:`1px solid ${I.border}`,color:I.text,backgroundColor:u?"#1f2937":"#ffffff"}}),_&&(0,be.jsx)("button",{onClick:()=>S(""),className:"absolute right-2 top-1/2 -translate-y-1/2 p-0.5 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors bg-transparent",style:{color:I.textMuted},children:(0,be.jsx)(xe.A,{size:12})})]}),0===k.length?(0,be.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-6 flex flex-col items-center justify-center text-center transition-colors group",style:{borderColor:I.border},children:[(0,be.jsx)("div",{className:"w-12 h-12 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-3",children:(0,be.jsx)(He.A,{className:"text-gray-600 dark:text-gray-400",size:24})}),(0,be.jsx)("p",{className:"text-xs font-medium mb-1",style:{color:I.text},children:"No hay preguntas seleccionadas"}),(0,be.jsx)("p",{className:"text-[10px] opacity-60 mb-3",style:{color:I.textMuted},children:"Empieza aÃ±adiendo preguntas al test"}),(0,be.jsxs)("div",{className:"flex gap-3",children:[(0,be.jsx)("button",{onClick:L,className:"text-xs font-bold text-amber-600 dark:text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 hover:underline bg-transparent border-0 p-0 hover:bg-transparent transition-colors",children:"Crear una"}),(0,be.jsx)("span",{className:"text-gray-300",children:"|"}),(0,be.jsx)("button",{onClick:()=>f("selector"),className:"text-xs font-bold text-amber-600 dark:text-amber-500 hover:text-amber-700 dark:hover:text-amber-400 hover:underline bg-transparent border-0 p-0 hover:bg-transparent transition-colors",children:"Buscar existentes"})]})]}):_&&0===z.length?(0,be.jsx)("div",{className:"text-center py-4",children:(0,be.jsxs)("p",{className:"text-xs",style:{color:I.textMuted},children:['Sin resultados para "',_,'"']})}):(0,be.jsx)("div",{className:"bg-transparent space-y-1",children:(0,be.jsx)(ot.Mp,{collisionDetection:ot.fp,onDragEnd:e=>{const{active:t,over:r}=e;t.id!==r.id&&C(e=>{const n=e.findIndex(e=>e.id===t.id),s=e.findIndex(e=>e.id===r.id);return(0,at.be)(e,n,s)})},children:(0,be.jsx)(at.gB,{items:_?z:k,strategy:at._G,children:(_?z:k).map(e=>(0,be.jsx)(zf,{question:e,onRemove:e=>C(t=>t.filter(t=>t.id!==e)),onEdit:R,colors:I},e.id))})})})]})]})})}),"selector"===p&&(0,be.jsxs)("div",{className:"absolute inset-0 md:static md:w-1/2 flex flex-col border-l shadow-xl z-20 animate-in slide-in-from-right-10 duration-200",style:{backgroundColor:I.bgCard,borderColor:I.border},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between p-3 border-b",style:{borderColor:I.border},children:[(0,be.jsxs)("h3",{className:"text-sm font-bold flex items-center gap-2",style:{color:I.text},children:[(0,be.jsx)(Ie.A,{size:16,className:"text-amber-500"})," Banco de Preguntas"]}),(0,be.jsx)("button",{onClick:()=>f("content"),className:"p-1.5 rounded-lg border transition-colors shadow-sm",style:{borderColor:I.border,backgroundColor:u?I.bgCard:"#ffffff",color:I.text},children:(0,be.jsx)(ur.A,{size:18})})]}),(0,be.jsx)("div",{className:"flex-1 overflow-hidden relative",children:(0,be.jsx)(Df,{currentSelected:k,onSelectionChange:C,colors:I,onEditQuestion:R,questionOverrides:M,providerRefreshKey:P},E)})]})]}),(0,be.jsxs)("div",{className:"px-5 py-4 border-t flex items-center justify-end gap-3 flex-shrink-0",style:{borderColor:I.border,backgroundColor:I.bgCard},children:[(0,be.jsxs)("div",{className:"mr-auto text-xs",style:{color:I.textMuted},children:[k.length," preguntas seleccionadas"]}),(0,be.jsx)("button",{onClick:B,className:"px-4 py-2 rounded-lg text-xs font-medium hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-white",children:"Cancelar"}),(0,be.jsxs)("button",{onClick:async()=>{if(w.title.trim()){h(!0);try{const e={title:w.title,content:w.description,status:"publish",qe_course:a?[parseInt(a)]:[],meta:{_course_id:a,_difficulty_level:w.difficulty_level,_passing_score:w.passing_score,_time_limit:w.time_limit,_max_attempts:w.max_attempts,_randomize_questions:w.randomize,_show_results:w.show_results,_quiz_question_ids:k.map(e=>e.id)}};let t;if("edit"===n&&s?.data?.quiz_id?(await q.updateQuiz(s.data.quiz_id,e),t=s.data.quiz_id):t=(await q.createQuiz(e)).id,i&&k.length>0)try{const{apiUrl:e}=(0,Ye.getApiConfig)();await fetch(`${e}/quiz-extended/v1/batch/sync-question-lessons`,{method:"POST",headers:(0,Ye.KZ)(),body:JSON.stringify({question_ids:k.map(e=>e.id),lesson_id:i})})}catch(e){console.warn("Could not sync question lesson associations:",e)}const r=w.difficulty_level;k.length>0&&await Promise.all(k.map(e=>(e.meta?._difficulty_level||e.difficulty)!==r?D.updateQuestion(e.id,{meta:{_difficulty_level:r}}):Promise.resolve()));const o=k.length,c=o>0?Math.max(1,Math.ceil(o/2)):null;await l({type:"quiz",title:w.title,start_date:w.start_date,data:{quiz_id:t,difficulty:r,question_count:o,time_limit:c,start_date:(new Date).toISOString()}}),B()}catch(e){console.error("Error saving:",e),ne.oR.error("Error al guardar el test")}finally{h(!1)}}else ne.oR.error("El tÃ­tulo es obligatorio")},disabled:m,className:"px-4 py-2 rounded-lg text-white text-xs font-bold shadow-lg shadow-amber-500/20 hover:shadow-amber-500/30 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center gap-2",style:{backgroundColor:I.accent},children:[m?(0,be.jsx)("span",{className:"animate-spin",children:"âŒ›"}):(0,be.jsx)(Mt.A,{size:14}),"create"===n?"Crear Test":"Guardar Cambios"]})]})]}),v.isOpen&&(0,be.jsx)(Of.A,{isOpen:v.isOpen,onClose:$,mode:v.mode,question:v.question,onSave:async(e,t)=>{try{if("create"===v.mode){const r=await D.createQuestion(e);C(e=>[...e,r]),ne.oR.success("Pregunta creada y aÃ±adida"),"create_another"!==t&&$()}else{const t=await D.updateQuestion(v.question.id,e);C(e=>e.map(e=>e.id===t.id?t:e)),T(e=>({...e,[t.id]:t})),ne.oR.success("Pregunta actualizada"),$()}}catch(e){console.error("Error saving question:",e),ne.oR.error("Error al guardar la pregunta")}},onDelete:"edit"===v.mode?e=>{C(t=>t.filter(t=>t.id!==e)),$(),ne.oR.success("Pregunta desasignada del test")}:void 0,onDeleteFromDB:"edit"===v.mode?async e=>{await D.deleteQuestion(e),C(t=>t.filter(t=>t.id!==e)),A(e=>e+1),$(),ne.oR.success("Pregunta borrada del campus")}:void 0,isSimplified:!0,parentQuizId:null})]})},Lf=()=>{const e=(0,r.useRef)(0);e.current++;const{t}=(0,o.Bd)(),{courseId:s}=(0,re.g)(),i=(0,re.zy)(),l=(0,re.Zp)(),{getColor:c,isDarkMode:d}=(0,se.DP)(),{formatScore:u}=qt(),{course:p}=Gt(s),f=p?.title?.rendered||p?.title||"",m={text:d?c("textPrimary","#f9fafb"):c("primary","#1a202c"),textMuted:d?"#ffffff":c("textSecondary","#6b7280"),accent:c("accent","#f59e0b"),bgCard:d?c("secondaryBackground","#1f2937"):"#ffffff",bgSubtle:d?"rgba(255,255,255,0.05)":`${c("primary","#1a202c")}05`,borderSubtle:d?"rgba(255,255,255,0.1)":`${c("primary","#1a202c")}15`,hoverBg:d?"rgba(255,255,255,0.1)":`${c("primary","#1a202c")}10`,hoverBgStrong:d?"rgba(255,255,255,0.15)":`${c("primary","#1a202c")}15`,buttonBg:d?c("accent","#f59e0b"):c("primary","#3b82f6"),buttonText:d?c("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:d?c("primary","#3b82f6"):c("accent","#f59e0b"),containerBorder:d?c("accent","#f59e0b"):c("borderColor","#e5e7eb")},h=n().useRef(!1),[g,x]=(0,r.useState)(new Set),[y,b]=(0,r.useState)([]),[v,j]=(0,r.useState)(!0),[w,N]=(0,r.useState)(null),[k,C]=(0,r.useState)(null),[_,S]=(0,r.useState)(!1),[E,A]=(0,r.useState)(null),[M,T]=(0,r.useState)(!1),[P,O]=(0,r.useState)(null),[z,q]=(0,r.useState)(null),[D,I]=(0,r.useState)(null),[L,R]=(0,r.useState)(!1),[$,B]=(0,r.useState)(!1),[F,U]=(0,r.useState)("loading"),[W,H]=(0,r.useState)(null),[Q,V]=(0,r.useState)(!1),[Y,K]=(0,r.useState)(!1),[G,X]=(0,r.useState)(!1),[J,Z]=(0,r.useState)("pen"),[ee,te]=(0,r.useState)("#000000"),[oe,ae]=(0,r.useState)(2);console.log(`ðŸ“„ TestsPage Render #${e.current}`,{isQuizRunning:M,hasQuizResults:!!P,quizResultsScore:P?.score,hasQuizToStart:!!E,isQuizFocusMode:L,viewingAttemptId:W});const ie=xr(),le=(0,xt.A)({autoFetch:!1,courseId:s}),ue=(0,yt.A)({autoFetch:!1,status:"publish,draft,private"}),[pe,fe]=(0,r.useState)([]),[me,he]=(0,r.useState)(!1),[ge,ye]=(0,r.useState)({isOpen:!1,mode:"create",lesson:null}),[ve,je]=(0,r.useState)({isOpen:!1,mode:"create",lessonId:null,testIndex:null,test:null}),[we,Ne]=(0,r.useState)({isOpen:!1,lesson:null}),ke=(0,r.useRef)(!1),[Ce,_e]=(0,r.useState)(!1),[Se,Ee]=(0,r.useState)([]),[Ae,Me]=(0,r.useState)(!1);(0,r.useEffect)(()=>{ie&&!1===me&&0===pe.length&&(async()=>{he(!0);try{const e=await(0,Vn.getQuizzes)({perPage:100,status:"publish,draft,private"});fe(e.data||[])}catch(e){console.error("Error loading quizzes:",e)}finally{he(!1)}})()},[ie]),(0,r.useEffect)(()=>{ie&&0===ue.courses.length&&!ue.loading&&ue.fetchCourses()},[ie]);const{isCompleted:Pe,markComplete:ze,loading:qe,fetchCompletedContent:De}=gr(s,!1),Le=w?.data?.quiz_id,{ranking:Re,loading:Be}=tr(Le,s),{attempts:Fe,loading:Ue,fetchAttempts:He}=Zt({quizId:Le,courseId:s,perPage:5,autoFetch:!1}),Qe=(0,r.useRef)(He),Ve=(0,r.useRef)(ze),Ye=(0,r.useRef)(De);(0,r.useEffect)(()=>{Qe.current=He,Ve.current=ze,Ye.current=De},[He,ze,De]);const Ke=(0,r.useCallback)((...e)=>Qe.current?.(...e),[]),Ge=(0,r.useCallback)((...e)=>Ve.current?.(...e),[]),Xe=(0,r.useCallback)((...e)=>Ye.current?.(...e),[]);n().useEffect(()=>{Le&&He(1)},[Le,He]);const{details:Je,loading:Ze,error:tt}=Ar(W),rt=(e,t)=>Re?.statistics?e-(t?Re.statistics.avg_score_with_risk:Re.statistics.avg_score_without_risk):0,nt=(0,r.useMemo)(()=>{if(!Re)return null;const e=Re.top||[],t=Re.relative||[],r=Re.currentUser,n=e.find(e=>e.user_id===r?.id),s=t.find(e=>e.user_id===r?.id);return n||s},[Re]),st=null!==nt&&Re?.statistics?.total_users>0;(0,r.useEffect)(()=>{s&&De()},[s,De]),(0,r.useEffect)(()=>{i.state||(N(null),C(null),A(null),O(null),q(null),I(null),T(!1),R(!1),H(null),h.current=!1)},[i.key]),(0,r.useEffect)(()=>(L?(document.body.style.overflow="hidden",document.body.classList.add("qe-quiz-focus-mode")):(document.body.style.overflow="",document.body.classList.remove("qe-quiz-focus-mode")),()=>{document.body.style.overflow="",document.body.classList.remove("qe-quiz-focus-mode")}),[L]);const ot=async()=>{if(s){j(!0);try{const e=parseInt(s,10);if(isNaN(e))throw new Error("Invalid course ID");const t=((await(0,Cn.getCourseLessons)(e,{perPage:100})).data||[]).map(e=>{const t=(e.meta?._lesson_steps||[]).filter(e=>"quiz"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...e,quizSteps:t}});b(t)}catch(e){console.error("Error fetching lessons:",e),b([])}finally{j(!1)}}};(0,r.useEffect)(()=>{ot()},[s]),(0,r.useEffect)(()=>{if(!h.current&&i.state&&0!==y.length){if(i.state?.openLessonId){const e=i.state.openLessonId;return console.log("TestsPage - received openLessonId from StatisticsPage:",e),x(new Set([e])),i.state.scrollToLesson&&setTimeout(()=>{const t=document.getElementById(`lesson-${e}`);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},100),h.current=!0,void window.history.replaceState({},document.title)}if(i.state?.viewAttemptId){const e=i.state.selectedQuizId;console.log("TestsPage - received navigation state:",i.state);for(const t of y){const r=t.quizSteps?.find(t=>t.data?.quiz_id===e);if(r){console.log("TestsPage - found quiz, opening test viewer"),N(r),C(t),H(i.state.viewAttemptId),O(null),q(null),I(null),T(!1),A(null),R(!1),j(!1),h.current=!0;break}}}else if(i.state?.selectedQuizId&&i.state?.scrollToQuiz){const e=i.state.selectedQuizId,t=i.state?.resumeAutosave;console.log("TestsPage - scrolling to quiz:",e,"type:",typeof e,"resumeAutosave:",t),console.log("TestsPage - available lessons:",y.length);let r=!1;for(const n of y){console.log("TestsPage - checking lesson:",n.id,"quizSteps:",n.quizSteps?.length);const s=n.quizSteps?.find(t=>{const r=t.data?.quiz_id;return console.log("TestsPage - comparing stepQuizId:",r,"with quizId:",e),String(r)===String(e)});if(s){if(console.log("TestsPage - Found quiz step:",s),r=!0,N(s),C(n),O(null),q(null),I(null),H(null),t){const e=s.data?.quiz_id;e?(async()=>{try{const{getQuiz:t}=await Promise.resolve().then(a.bind(a,8766)),r=await t(e);console.log("âœ… Quiz loaded for resume:",r),A(r),T(!0),R(!0),j(!1)}catch(e){console.error("âŒ Error loading quiz for resume:",e),j(!1)}})():j(!1)}else j(!1),T(!1),A(null),R(!1);h.current=!0;break}}r||console.warn("TestsPage - Quiz not found in any lesson! quizId:",e)}}},[i.state,y]);const at="9999-12-31",it=e=>e.start_date===at,lt=e=>{if(!e.start_date||e.start_date===at)return!1;const t=new Date;t.setHours(0,0,0,0);const r=new Date(e.start_date);return r.setHours(0,0,0,0),r>t},ct=e=>{if(!e)return"";const t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})},dt=e=>e.meta?._start_date===at,ut=e=>{const t=e.meta?._start_date;if(!t||t===at)return!1;const r=new Date;r.setHours(0,0,0,0);const n=new Date(t);return n.setHours(0,0,0,0),n>r},pt=(0,r.useMemo)(()=>y.filter(e=>!!ie||!dt(e)&&!ut(e)).flatMap(e=>e.quizSteps.filter(e=>!!ie||!it(e)&&!lt(e)).map(t=>({step:t,lesson:e,originalStepIndex:(e.meta?._lesson_steps||[]).findIndex(e=>e.type===t.type&&e.title===t.title&&JSON.stringify(e.data)===JSON.stringify(t.data))}))),[y,ie]),ft=e=>{H(e),T(!1),A(null),O(null),R(!1)},mt=()=>{i.state?.returnTo&&i.state?.viewAttemptId?l(i.state.returnTo):H(null)},ht=(0,r.useRef)(Le),gt=(0,r.useRef)(E),bt=(0,r.useRef)(w),vt=(0,r.useRef)(k),jt=(0,r.useRef)(pt),wt=(0,r.useRef)(s);(0,r.useEffect)(()=>{ht.current=Le,gt.current=E,bt.current=w,vt.current=k,jt.current=pt,wt.current=s},[Le,E,w,k,pt,s]);const Nt=(0,r.useCallback)(async(e,t,r)=>{if(console.log("ðŸŽ¯ TestsPage: handleQuizComplete called",{hasResult:!!e,resultScore:e?.score,questionsCount:t?.length,quizInfoTitle:r?.title}),O(e),q(t),I(r),console.log("âœ… TestsPage: Results state set",{isQuizRunningBefore:M,willSetToFalse:!0}),ht.current&&setTimeout(()=>Ke(1),500),gt.current?.id&&vt.current)try{const e=jt.current.findIndex(e=>e.step?.id===bt.current?.id&&e.lesson.id===vt.current.id);if(-1!==e){const{originalStepIndex:t}=jt.current[e];await Ge(vt.current.id,"step",vt.current.id,t),await Xe(),window.dispatchEvent(new CustomEvent("courseProgressUpdated",{detail:{courseId:wt.current}})),T(!1),R(!1),console.log("âœ… TestsPage: Quiz marked complete, states updated")}}catch(e){console.error("âŒ TestsPage: Error marking quiz as complete:",e),T(!1),R(!1)}else T(!1),R(!1),console.log("âœ… TestsPage: No test to mark, states updated");console.log("ðŸ TestsPage: handleQuizComplete finished",{isQuizRunningAfter:!1,quizResultsSet:!!e})},[Ke,Ge,Xe]),kt=(0,r.useCallback)(()=>{T(!1),A(null),R(!1)},[]),_t=(0,r.useCallback)(()=>{},[]),St=(0,r.useCallback)(e=>{console.log("ðŸ“Š TestsPage: Quiz state changed to:",e),U(e)},[]);(0,r.useEffect)(()=>{E&&(console.log("ðŸ†• TestsPage: New quiz starting, resetting state to loading"),U("loading"))},[E]);const Et=(0,r.useRef)({});(0,r.useEffect)(()=>{const t={handleQuizComplete:Nt,handleExitQuiz:kt,handleClearCanvas:_t,handleQuizStateChange:St,stableRefetchAttempts:Ke,stableMarkComplete:Ge,stableFetchCompletedContent:Xe,setDrawingTool:Z,setDrawingColor:te,setDrawingLineWidth:ae,setIsDrawingMode:V,setIsDrawingEnabled:K,setShowDrawingToolbar:X},r={};let n=!1;Object.keys(t).forEach(e=>{const s=Et.current[e],o=t[e];s!==o&&(r[e]={changed:!0,wasDefined:void 0!==s,isDefined:void 0!==o},n=!0)}),n&&e.current>1&&(console.log(`ðŸš¨ TestsPage: CALLBACK REFERENCES CHANGED in render #${e.current}:`,r),console.warn("âš ï¸ Unstable callbacks detected in TestsPage! This will cause infinite re-renders in Quiz.")),Et.current=t});const At=()=>w&&k?pt.findIndex(e=>e.step?.data?.quiz_id===w?.data?.quiz_id&&e.lesson.id===k.id):-1,Mt=(e,t)=>Pe(e.id,"step",e.id,t),Tt=()=>{if(!k||!w)return!1;const e=At();if(-1===e)return!1;const{originalStepIndex:t}=pt[e];return Pe(k.id,"step",k.id,t)},Pt=()=>{ye({isOpen:!1,mode:"create",lesson:null})},Ot=e=>{je({isOpen:!0,mode:"create",lessonId:e,testIndex:null,test:null})},zt=()=>{je({isOpen:!1,mode:"create",lessonId:null,testIndex:null,test:null})},Dt=()=>{Ne({isOpen:!1,lesson:null})},It=Ce?Se:y,Lt=At(),Rt=Lt>0,$t=Lt<pt.length-1,Bt=!(!i.state?.viewAttemptId&&!i.state?.selectedQuizId);return(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(jn,{courseId:s,courseName:f,sectionName:t("courses.tests"),children:(0,be.jsx)(qn,{courseId:s,courseName:f,isOpen:$,onOpen:()=>B(!0),onClose:()=>B(!1),children:(0,be.jsxs)("div",{className:"relative h-full",children:[!Bt&&(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(w||$?"-translate-x-full":"translate-x-0"),children:(0,be.jsxs)("div",{className:"h-full overflow-y-auto",children:[ie&&(0,be.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-4 pb-2 flex items-center gap-3",children:Ce?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("button",{onClick:async()=>{Me(!0);try{const e={};Se.forEach((t,r)=>{e[t.id.toString()]=r+1}),await(0,Vt.updateLessonOrderMap)(parseInt(s,10),e),ne.oR.success(t("tests.orderSaved")),b(Se),_e(!1),Ee([])}catch(e){console.error("Error saving lesson order:",e),ne.oR.error(t("tests.errors.saveOrder"))}finally{Me(!1)}},disabled:Ae,className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg disabled:opacity-50",style:{backgroundColor:"#22c55e",color:"#ffffff"},onMouseEnter:e=>{Ae||(e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(Qn.A,{size:18}),t(Ae?"common.saving":"tests.saveOrder")]}),(0,be.jsxs)("button",{onClick:()=>{_e(!1),Ee([])},disabled:Ae,className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg border disabled:opacity-50",style:{backgroundColor:"transparent",color:m.text,borderColor:c("borderColor","#e5e7eb")},onMouseEnter:e=>{Ae||(e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)")},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(xe.A,{size:18}),t("common.cancel")]})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("button",{onClick:()=>{ye({isOpen:!0,mode:"create",lesson:null})},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg",style:{backgroundColor:m.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(Ie.A,{size:18}),t("tests.createTheme")]}),y.length>1&&(0,be.jsxs)("button",{onClick:()=>{Ee([...y]),_e(!0)},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg border",style:{backgroundColor:"transparent",color:m.text,borderColor:c("borderColor","#e5e7eb")},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.backgroundColor=m.accent+"15"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)(mf,{size:18}),t("tests.orderThemes")]})]})}),(0,be.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-6 pb-12",children:v?(0,be.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,be.jsx)("div",{className:"rounded-lg p-4 animate-pulse",style:{backgroundColor:c("background","#ffffff")},children:(0,be.jsx)("div",{className:"h-6 rounded",style:{backgroundColor:`${c("primary","#1a202c")}20`,width:"60%"}})},e))}):0===y.length?(0,be.jsxs)("div",{className:"text-center py-12 rounded-lg",style:{backgroundColor:m.bgCard},children:[(0,be.jsx)(ce,{size:48,className:"mx-auto mb-4",style:{color:`${m.text}40`}}),(0,be.jsx)("p",{className:"text-lg font-medium",style:{color:m.text},children:t("tests.noTests")}),(0,be.jsx)("p",{className:"text-sm mt-2",style:{color:m.textMuted},children:t("tests.noTestsDescription")})]}):(0,be.jsxs)("div",{className:"py-4",children:[(0,be.jsx)(Dn,{}),(0,be.jsx)("div",{className:"rounded-xl overflow-hidden border-2",style:{backgroundColor:c("secondaryBackground","#f8f9fa"),borderColor:d?c("accent","#f59e0b"):c("borderColor","#e5e7eb")},children:It.filter(e=>!!ie||!dt(e)&&!ut(e)).map((e,r,n)=>{const o=g.has(e.id),a=ie?e.quizSteps:e.quizSteps.filter(e=>!it(e)&&!lt(e)),i=a.length,l=e.title?.rendered||e.title||t("courses.untitledLesson"),c=0===r,u=r===n.length-1,p=dt(e),f=ut(e);return(0,be.jsxs)("div",{id:`lesson-${e.id}`,children:[(0,be.jsxs)("div",{className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200",style:{backgroundColor:m.bgSubtle},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[Ce&&(0,be.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{if(0===e)return;const t=[...Se];[t[e-1],t[e]]=[t[e],t[e-1]],Ee(t)})(r)},disabled:c||Ae,className:"p-0.5 rounded transition-all disabled:opacity-30",style:{color:c?m.textMuted:m.accent},title:t("tests.moveUp"),children:(0,be.jsx)($n.A,{size:16})}),(0,be.jsx)("button",{onClick:e=>{e.stopPropagation(),(e=>{if(e>=Se.length-1)return;const t=[...Se];[t[e],t[e+1]]=[t[e+1],t[e]],Ee(t)})(r)},disabled:u||Ae,className:"p-0.5 rounded transition-all disabled:opacity-30",style:{color:u?m.textMuted:m.accent},title:t("tests.moveDown"),children:(0,be.jsx)(Ut.A,{size:16})})]}),p?(0,be.jsx)(xf.A,{size:20,style:{color:"#ef4444"},className:"flex-shrink-0"}):f?(0,be.jsx)(gf,{size:20,style:{color:m.accent},className:"flex-shrink-0"}):(0,be.jsx)(ce,{size:20,style:{color:m.text},className:"flex-shrink-0"}),(0,be.jsx)("span",{className:"font-semibold text-left truncate",style:{color:m.text,opacity:p||f?.6:1},dangerouslySetInnerHTML:{__html:l}}),ie&&p&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1 flex-shrink-0",style:{backgroundColor:"rgba(239, 68, 68, 0.12)",color:"#ef4444"},children:[(0,be.jsx)(xf.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:t("supportMaterial.hiddenBadge")})]}),ie&&f&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1 flex-shrink-0",style:{backgroundColor:`${m.accent}15`,color:m.accent},children:[(0,be.jsx)(sr.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:ct(e.meta?._start_date)})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5 sm:gap-3 flex-shrink-0",children:[ie&&!Ce&&(0,be.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{ye({isOpen:!0,mode:"edit",lesson:e})})(e)},className:"p-1 sm:p-1.5 rounded-lg transition-all",style:{backgroundColor:`${m.accent}15`},title:t("tests.editTheme")||"Edit Theme",onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${m.accent}25`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${m.accent}15`},children:(0,be.jsx)(rs.A,{size:14,className:"sm:w-4 sm:h-4",style:{color:m.accent}})}),ie&&!Ce&&(0,be.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{Ne({isOpen:!0,lesson:e})})(e)},className:"p-1 sm:p-1.5 rounded-lg transition-all",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},title:t("tests.deleteTheme")||"Delete Theme",onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(pr.A,{size:14,className:"sm:w-4 sm:h-4",style:{color:"#ef4444"}})}),ie&&!Ce&&(0,be.jsxs)("button",{onClick:t=>{t.stopPropagation(),Ot(e.id)},className:"p-1.5 sm:px-3 sm:py-1.5 rounded-lg transition-all text-xs font-medium flex items-center gap-1.5",style:{backgroundColor:m.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:[(0,be.jsx)(Ie.A,{size:14}),(0,be.jsx)("span",{className:"hidden sm:inline",children:t("tests.addTest")||"Add Test"})]}),(0,be.jsxs)("span",{className:"hidden sm:inline-block text-xs sm:text-sm font-medium px-2 sm:px-3 py-1 rounded-full",style:{backgroundColor:m.hoverBg,color:m.text},children:[i," ",t(1===i?"tests.test":"tests.tests")]}),(0,be.jsxs)("button",{onClick:()=>{return i>0&&(t=e.id,void x(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r}));var t},disabled:0===i,className:"p-2 sm:py-2 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-1 sm:gap-1.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",style:{backgroundColor:m.buttonBg,color:m.buttonText},onMouseEnter:e=>{0!==i&&(d?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=m.buttonHoverBg)},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=m.buttonBg},children:[(0,be.jsx)("span",{className:"hidden sm:inline",children:t(o?"tests.hideLesson":"tests.showLesson")}),o?(0,be.jsx)($n.A,{size:16}):(0,be.jsx)(Ut.A,{size:16})]})]})]}),o&&(0,be.jsx)("div",{children:e.quizSteps.filter(e=>!!ie||!it(e)&&!lt(e)).map((r,n)=>{const o=(e.meta?._lesson_steps||[]).findIndex(e=>e.type===r.type&&e.title===r.title&&JSON.stringify(e.data)===JSON.stringify(r.data)),a=Mt(e,o),i=it(r),l=lt(r),c=r.data?.difficulty||"medium",u=r.data?.time_limit||null,p=r.data?.start_date||null,f=r.data?.question_count||null,h={easy:t("tests.difficultyEasy")||"FÃ¡cil",medium:t("tests.difficultyMedium")||"Medio",hard:t("tests.difficultyHard")||"DifÃ­cil"},g={easy:"#10b981",medium:"#f59e0b",hard:"#ef4444"};return(0,be.jsxs)("div",{children:[(0,be.jsx)("div",{className:n>0?"mx-6":"",style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}}),(0,be.jsxs)("div",{className:"px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200",style:{opacity:i||l?.6:1},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 flex-1 mr-2 overflow-hidden",children:[l?(0,be.jsx)(gf,{size:18,style:{color:m.accent},className:"flex-shrink-0"}):i?(0,be.jsx)(xf.A,{size:18,style:{color:"#ef4444"},className:"flex-shrink-0"}):(0,be.jsx)("div",{className:"flex-shrink-0 p-1",children:a?(0,be.jsx)(Oe.A,{size:28,style:{color:"#10b981"}}):(0,be.jsx)(Or,{size:28,style:{color:m.textMuted}})}),(0,be.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden min-w-0",children:[(0,be.jsx)("span",{className:"text-sm font-medium mb-1.5 truncate",style:{color:m.text},children:r.title}),(0,be.jsxs)("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-3",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1 px-1.5 sm:px-2 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:`${g[c]}15`},children:[(0,be.jsx)(Mr,{size:10,className:"sm:w-3 sm:h-3",style:{color:g[c]}}),(0,be.jsx)("span",{className:"text-[10px] sm:text-xs font-medium",style:{color:g[c]},children:h[c]})]}),f&&(0,be.jsxs)("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[(0,be.jsx)(de.A,{size:10,className:"sm:w-3 sm:h-3",style:{color:m.textMuted}}),(0,be.jsx)("span",{className:"text-[10px] sm:text-xs",style:{color:m.textMuted},children:f})]}),u&&(0,be.jsxs)("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0",children:[(0,be.jsx)($e.A,{size:10,className:"sm:w-3 sm:h-3",style:{color:m.textMuted}}),(0,be.jsxs)("span",{className:"text-[10px] sm:text-xs",style:{color:m.textMuted},children:[u,(0,be.jsx)("span",{className:"hidden sm:inline",children:" min"}),(0,be.jsx)("span",{className:"sm:hidden",children:"'"})]})]}),(0,be.jsxs)("div",{className:"hidden sm:flex items-center gap-1 flex-shrink-0",children:[(0,be.jsx)(sr.A,{size:12,style:{color:m.textMuted}}),(0,be.jsxs)("span",{className:"text-xs",style:{color:m.textMuted},children:[t("tests.startDate"),": ",(e=>{if(!e)return"--/--/----";try{return new Date(e).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return"--/--/----"}})(p)]})]})]})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[ie&&(i||l)&&(0,be.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[i&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1",style:{backgroundColor:"rgba(239, 68, 68, 0.12)",color:"#ef4444"},children:[(0,be.jsx)(xf.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:t("supportMaterial.hiddenBadge")})]}),l&&(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1",style:{backgroundColor:`${m.accent}15`,color:m.accent},children:[(0,be.jsx)(sr.A,{size:10}),(0,be.jsx)("span",{className:"hidden sm:inline",children:ct(r.start_date)})]})]}),ie&&(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(0,be.jsx)("button",{onClick:t=>{var s;t.stopPropagation(),s=e.id,je({isOpen:!0,mode:"edit",lessonId:s,testIndex:n,test:r})},className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:`${m.accent}15`},title:t("common.edit"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor=`${m.accent}25`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${m.accent}15`},children:(0,be.jsx)(rs.A,{size:14,style:{color:m.accent}})}),(0,be.jsx)("button",{onClick:r=>{r.stopPropagation(),(async(e,r)=>{if(window.confirm(t("tests.deleteConfirm")))try{const n=y.find(t=>t.id===e);if(!n)throw new Error("Lesson not found");const o=n.meta?._lesson_steps||[],a=o.filter(e=>"quiz"===e.type),i=a[r],l=o.filter(e=>e!==i);await le.updateLesson(n.id,{title:n.title?.rendered||n.title,courseId:n.meta?._course_id||s,meta:{_lesson_steps:l}}),b(t=>t.map(t=>{if(t.id!==e)return t;const r=l.filter(e=>"quiz"===e.type).sort((e,t)=>(parseInt(e.order)||0)-(parseInt(t.order)||0));return{...t,meta:{...t.meta,_lesson_steps:l},quizSteps:r}})),ne.oR.success(t("tests.testDeleted"))}catch(e){console.error("Error deleting test:",e),ne.oR.error(t("tests.deleteError"))}})(e.id,n)},className:"p-1.5 rounded-lg transition-all",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},title:t("common.delete"),onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(pr.A,{size:14,style:{color:"#ef4444"}})})]}),(!l||ie)&&(0,be.jsx)("button",{onClick:()=>((e,t)=>{N(e),C(t),O(null),q(null),I(null),T(!1),A(null),R(!1)})(r,e),className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex-shrink-0",style:{backgroundColor:m.buttonBg,color:m.buttonText},onMouseEnter:e=>{d?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=m.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=m.buttonBg},children:t("tests.available")})]})]})]},r.id||n)})}),!u&&(0,be.jsx)("div",{style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},e.id)})})]})})]})}),(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(w?"translate-x-0":"translate-x-full"),style:{backgroundColor:c("secondaryBackground","#f8f9fa")},children:w&&(0,be.jsxs)("div",{className:"h-full flex flex-col",children:[!W&&!M&&!P&&(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 sm:py-1.5 border-b flex-shrink-0 gap-2",style:{backgroundColor:m.bgCard,borderColor:m.borderSubtle},children:[(0,be.jsxs)("div",{className:"flex flex-col gap-1 overflow-hidden",children:[(0,be.jsxs)("nav",{className:"hidden sm:flex items-center text-xs space-x-1.5",children:[(0,be.jsx)(re.N_,{to:"/courses",className:"transition-colors duration-200 hover:underline font-medium",style:{color:m.text},children:t("sidebar.studyPlanner")}),(0,be.jsx)(ur.A,{size:12,style:{color:m.textMuted}}),(0,be.jsx)(re.N_,{to:`/courses/${s}/dashboard`,className:"transition-colors duration-200 hover:underline font-medium",style:{color:m.text},dangerouslySetInnerHTML:{__html:f}}),(0,be.jsx)(ur.A,{size:12,style:{color:m.textMuted}}),(0,be.jsx)("span",{className:"font-medium",style:{color:m.textMuted},children:t("courses.tests")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(ce,{size:18,style:{color:m.text},className:"flex-shrink-0"}),(0,be.jsx)("h2",{className:"text-sm sm:text-base font-semibold leading-tight truncate",style:{color:m.text},children:w.title})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[(0,be.jsxs)("button",{onClick:()=>{const e=At();if(e>0){const t=pt[e-1];N(t.step),C(t.lesson)}},disabled:!Rt,className:"px-3 py-1.5 rounded-lg transition-all flex items-center gap-1.5 text-sm font-medium",style:{backgroundColor:m.hoverBg,opacity:Rt?1:.4,cursor:Rt?"pointer":"not-allowed",color:m.text},onMouseEnter:e=>{Rt&&(e.currentTarget.style.backgroundColor=m.hoverBgStrong)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=m.hoverBg},children:[(0,be.jsx)(We.A,{size:16,style:{color:m.text}}),(0,be.jsx)("span",{children:t("navigation.previous")})]}),(0,be.jsxs)("button",{onClick:()=>{const e=At();if(e<pt.length-1){const t=pt[e+1];N(t.step),C(t.lesson)}},disabled:!$t,className:"px-3 py-1.5 rounded-lg transition-all flex items-center gap-1.5 text-sm font-medium",style:{backgroundColor:m.hoverBg,opacity:$t?1:.4,cursor:$t?"pointer":"not-allowed",color:m.text},onMouseEnter:e=>{$t&&(e.currentTarget.style.backgroundColor=m.hoverBgStrong)},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=m.hoverBg},children:[(0,be.jsx)("span",{children:t("navigation.next")}),(0,be.jsx)(ur.A,{size:16,style:{color:m.text}})]}),(0,be.jsx)("button",{onClick:()=>{i.state?.returnTo?l(i.state.returnTo):(N(null),C(null),T(!1),A(null),R(!1),H(null))},className:"p-1.5 rounded-lg transition-all ml-1 sm:ml-2",style:{backgroundColor:m.hoverBg},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=m.hoverBgStrong},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=m.hoverBg},title:t("common.back"),children:(0,be.jsx)(xe.A,{size:20,style:{color:m.text}})})]})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto",children:W?Ze?(0,be.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)(et.A,{className:"w-12 h-12 mx-auto mb-4 animate-spin",style:{color:m.text}}),(0,be.jsx)("p",{className:"text-lg font-medium",style:{color:m.text},children:t("tests.loadingAttemptDetails")})]})}):tt?(0,be.jsx)("div",{className:"flex items-center justify-center h-full p-8",children:(0,be.jsxs)("div",{className:"text-center p-6 rounded-lg border-2",style:{backgroundColor:d?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderColor:"#ef4444"},children:[(0,be.jsx)(lr.A,{className:"w-12 h-12 mx-auto mb-4",style:{color:"#ef4444"}}),(0,be.jsx)("p",{className:"text-lg font-medium mb-2",style:{color:"#ef4444"},children:t("tests.errorLoadingAttempt")}),(0,be.jsx)("p",{className:"text-sm",style:{color:m.textMuted},children:tt}),(0,be.jsx)("button",{onClick:mt,className:"mt-4 px-4 py-2 rounded-lg font-medium",style:{backgroundColor:c("primary","#1a202c"),color:"#ffffff"},children:t("common.back")})]})}):Je?(0,be.jsx)("div",{className:"h-full overflow-hidden",children:(0,be.jsx)(Hr,{result:{...Je.attempt,detailed_results:Je.detailed_results},quizTitle:Je.attempt.quizTitle||w?.title,questions:Je.questions,noPadding:!0,difficulty:w?.data?.difficulty||"medium",onBack:mt,courseId:s,courseName:f})}):null:M||P?P?(0,be.jsx)("div",{className:"h-full overflow-hidden",children:(0,be.jsx)(Hr,{result:P,quizTitle:D?.title?.rendered||D?.title||w?.data?.title,questions:z,noPadding:!0,difficulty:w?.data?.difficulty||"medium",onBack:()=>{O(null),q(null),I(null),A(null),N(null),C(null),R(!1)},courseId:s,courseName:f})}):E&&!L&&(0,be.jsx)(is,{quizId:E.id,lessonId:k?.id,courseId:s,onQuizComplete:Nt,onExit:kt,isDrawingMode:Q,setIsDrawingMode:V,isDrawingEnabled:Y,setIsDrawingEnabled:K,showDrawingToolbar:G,setShowDrawingToolbar:X,drawingTool:J,drawingColor:ee,drawingLineWidth:oe,onDrawingToolChange:Z,onDrawingColorChange:te,onDrawingLineWidthChange:ae,onClearCanvas:_t}):(0,be.jsx)("div",{className:"h-full flex flex-col p-4 overflow-y-auto",children:(0,be.jsxs)("div",{className:"flex-1 flex flex-col p-4 max-w-7xl mx-auto w-full rounded-2xl",style:{backgroundColor:c("background","#ffffff")},children:[(0,be.jsx)("div",{className:"px-4 py-2 flex-shrink-0 rounded-xl mb-3",style:{backgroundColor:d?c("secondaryBackground","#1F2937"):c("primary","#1a202c")},children:(0,be.jsxs)("div",{className:"flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("h3",{className:"text-base font-bold truncate",style:{color:c("textColorContrast","#ffffff")},children:w.title}),w.data?.description&&(0,be.jsx)("p",{className:"text-xs truncate mt-0.5",style:{color:c("textColorContrast","#ffffff"),opacity:.8},children:w.data.description})]}),Tt()&&(0,be.jsxs)("div",{className:"flex items-center gap-1 px-2 py-0.5 rounded-full ml-3 flex-shrink-0",style:{backgroundColor:"rgba(255, 255, 255, 0.2)"},children:[(0,be.jsx)(Oe.A,{size:14,style:{color:c("textColorContrast","#ffffff")}}),(0,be.jsx)("span",{className:"text-[10px] font-medium",style:{color:c("textColorContrast","#ffffff")},children:t("progress.completed")})]})]})}),(0,be.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 mb-3 py-2",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("span",{className:"text-base",style:{color:m.textMuted},children:[t("tests.difficulty"),":"]}),(0,be.jsx)("span",{className:"text-base font-bold px-2 py-0.5 rounded-full",style:{backgroundColor:(()=>{const e=w.data?.difficulty||"medium";return"easy"===e?"#10b98120":"hard"===e?"#ef444420":"#f59e0b20"})(),color:(()=>{const e=w.data?.difficulty||"medium";return"easy"===e?"#10b981":"hard"===e?"#ef4444":"#f59e0b"})()},children:(()=>{const e=w.data?.difficulty||"medium";return t("easy"===e?"tests.easy":"hard"===e?"tests.hard":"tests.medium")})()})]}),(0,be.jsx)("div",{className:"h-4 w-px",style:{backgroundColor:m.borderSubtle}}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(de.A,{size:14,style:{color:m.textMuted}}),(0,be.jsxs)("span",{className:"text-base",style:{color:m.textMuted},children:[t("tests.questions"),":"]}),(0,be.jsx)("span",{className:"text-lg font-bold",style:{color:m.text},children:w.data?.question_count||"?"})]}),(0,be.jsx)("div",{className:"h-4 w-px",style:{backgroundColor:m.borderSubtle}}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)($e.A,{size:14,style:{color:m.textMuted}}),(0,be.jsxs)("span",{className:"text-base",style:{color:m.textMuted},children:[t("tests.time"),":"]}),(0,be.jsx)("span",{className:"text-lg font-bold",style:{color:m.text},children:w.data?.time_limit?`${w.data.time_limit} min`:"âˆž"})]})]}),st&&(0,be.jsxs)("div",{className:"mb-3",children:[(0,be.jsx)("p",{className:"text-base font-semibold uppercase tracking-wide mb-2",style:{color:d?"#ffffff":c("primary","#1a202c")},children:t("tests.withoutRisk")}),(0,be.jsx)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:d?c("secondaryBackground","#1F2937"):c("primary","#1a202c"),border:d?"1px solid #ffffff":"none"},children:(0,be.jsxs)("div",{className:"grid grid-cols-3",children:[(0,be.jsxs)("div",{className:"py-2 text-center",children:[(0,be.jsx)("div",{className:"text-sm uppercase mb-1 font-bold",style:{color:d?c("accent","#f59e0b"):"#ffffff"},children:t("tests.avgScore")}),(0,be.jsx)("div",{className:"text-2xl font-bold",style:{color:"#ffffff"},children:u(Re?.statistics?.avg_score_without_risk||0)})]}),(0,be.jsxs)("div",{className:"py-2 text-center",children:[(0,be.jsx)("div",{className:"text-sm uppercase mb-1 font-bold",style:{color:d?c("accent","#f59e0b"):"#ffffff"},children:t("tests.myScore")}),(0,be.jsx)("div",{className:"text-2xl font-bold",style:{color:"#ffffff"},children:u(nt?.score||0)})]}),(0,be.jsxs)("div",{className:"py-2 text-center",children:[(0,be.jsx)("div",{className:"text-sm uppercase mb-1 font-bold",style:{color:d?c("accent","#f59e0b"):"#ffffff"},children:t("tests.percentile")}),(0,be.jsxs)("div",{className:"text-2xl font-bold",style:{color:"#ffffff"},children:[rt(nt?.score||0,!1)>=0?"+":"",u(rt(nt?.score||0,!1))]})]})]})})]}),st&&(0,be.jsxs)("div",{className:"mb-3",children:[(0,be.jsx)("p",{className:"text-base font-semibold uppercase tracking-wide mb-2",style:{color:d?"#ffffff":c("primary","#1a202c")},children:t("tests.withRisk")}),(0,be.jsx)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:d?c("secondaryBackground","#1F2937"):c("primary","#1a202c"),border:d?"1px solid #ffffff":"none"},children:(0,be.jsxs)("div",{className:"grid grid-cols-3",children:[(0,be.jsxs)("div",{className:"py-2 text-center",children:[(0,be.jsx)("div",{className:"text-sm uppercase mb-1 font-bold",style:{color:d?c("accent","#f59e0b"):"#ffffff"},children:t("tests.avgScore")}),(0,be.jsx)("div",{className:"text-2xl font-bold",style:{color:"#ffffff"},children:u(Re?.statistics?.avg_score_with_risk||0)})]}),(0,be.jsxs)("div",{className:"py-2 text-center",children:[(0,be.jsx)("div",{className:"text-sm uppercase mb-1 font-bold",style:{color:d?c("accent","#f59e0b"):"#ffffff"},children:t("tests.myScore")}),(0,be.jsx)("div",{className:"text-2xl font-bold",style:{color:"#ffffff"},children:u(nt?.score_with_risk||0)})]}),(0,be.jsxs)("div",{className:"py-2 text-center",children:[(0,be.jsx)("div",{className:"text-sm uppercase mb-1 font-bold",style:{color:d?c("accent","#f59e0b"):"#ffffff"},children:t("tests.percentile")}),(0,be.jsxs)("div",{className:"text-2xl font-bold",style:{color:"#ffffff"},children:[rt(nt?.score_with_risk||0,!0)>=0?"+":"",u(rt(nt?.score_with_risk||0,!0))]})]})]})})]}),Fe.length>0&&!Ue&&(0,be.jsxs)("div",{className:"mb-3 flex-1 flex flex-col min-h-0",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,be.jsx)("p",{className:"text-base font-semibold uppercase tracking-wide",style:{color:m.text},children:t("tests.recentAttempts")}),(0,be.jsxs)("span",{className:"text-sm px-2 py-0.5 rounded-full",style:{backgroundColor:m.hoverBg,color:m.textMuted},children:[Fe.slice(0,5).length,"/5"]})]}),(0,be.jsxs)("div",{className:"rounded-xl overflow-hidden flex-1 flex flex-col",style:{backgroundColor:d?"#000000":"#ffffff",border:d?"2px solid #ffffff":`2px solid ${c("primary","#1a202c")}`},children:[(0,be.jsxs)("div",{className:"hidden sm:block",children:[(0,be.jsxs)("div",{className:"grid grid-cols-9 text-sm uppercase tracking-wide font-bold border-b-2",style:{color:d?c("accent","#f59e0b"):"#ffffff",borderColor:d?"#ffffff":c("primary","#1a202c"),backgroundColor:d?c("primary","#1a202c"):"#000000"},children:[(0,be.jsx)("div",{className:"py-2 px-3",children:t("tests.attempt")}),(0,be.jsx)("div",{className:"py-2 px-1",children:t("tests.date")}),(0,be.jsx)("div",{className:"text-center py-2 px-1 border-l-2",style:{borderColor:d?"#ffffff":c("primary","#1a202c")},children:t("tests.score")}),(0,be.jsx)("div",{className:"text-center py-2 px-1",children:t("tests.percentile")}),(0,be.jsx)("div",{className:"text-center py-2 px-1",children:t("tests.cutoffScore")}),(0,be.jsx)("div",{className:"text-center py-2 px-1 border-l-2",style:{borderColor:d?"#ffffff":c("primary","#1a202c"),color:c("accent","#f59e0b")},children:t("tests.withRisk")}),(0,be.jsx)("div",{className:"text-center py-2 px-1",children:t("tests.percentile")}),(0,be.jsx)("div",{className:"text-center py-2 px-1",children:t("tests.cutoffScore")}),(0,be.jsx)("div",{className:"text-center py-2 px-1 border-l-2",style:{borderColor:d?"#ffffff":c("primary","#1a202c")},children:t("tests.viewCorrection")})]}),Fe.slice(0,5).map((e,t)=>{const r=rt(e.score||0,!1),n=rt(e.score_with_risk||0,!0),s=Re?.statistics?.top_20_cutoff_without_risk||0,o=Re?.statistics?.top_20_cutoff_with_risk||0,a=d?"#ffffff":c("primary","#1a202c");return(0,be.jsxs)("div",{className:"grid grid-cols-9 border-b transition-colors",style:{borderColor:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)",color:d?"#ffffff":"#000000"},children:[(0,be.jsxs)("div",{className:"text-base font-medium flex items-center py-2 px-3",style:{color:m.text},children:["#",t+1]}),(0,be.jsx)("div",{className:"text-sm font-bold flex items-center py-2 px-1",style:{color:m.text,fontSize:"0.963rem"},children:new Date(e.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})}),(0,be.jsx)("div",{className:"flex items-center justify-center py-2 px-1 border-l-2",style:{borderColor:a},children:(0,be.jsx)("span",{className:"text-lg font-bold",style:{color:m.text},children:u(e.score||0)})}),(0,be.jsx)("div",{className:"flex items-center justify-center py-2 px-1",children:(0,be.jsxs)("span",{className:"text-base font-medium",style:{color:r>=0?"#10b981":"#ef4444"},children:[r>=0?"+":"",r.toFixed(1)]})}),(0,be.jsx)("div",{className:"flex items-center justify-center py-2 px-1",children:(0,be.jsx)("span",{className:"text-base font-medium",style:{color:m.text},children:u(s)})}),(0,be.jsx)("div",{className:"flex items-center justify-center py-2 px-1 border-l-2",style:{borderColor:a},children:(0,be.jsx)("span",{className:"text-lg font-bold",style:{color:c("accent","#f59e0b")},children:u(e.score_with_risk||0)})}),(0,be.jsx)("div",{className:"flex items-center justify-center py-2 px-1",children:(0,be.jsxs)("span",{className:"text-base font-medium",style:{color:n>=0?"#10b981":"#ef4444"},children:[n>=0?"+":"",n.toFixed(1)]})}),(0,be.jsx)("div",{className:"flex items-center justify-center py-2 px-1",children:(0,be.jsx)("span",{className:"text-base font-medium",style:{color:m.text},children:u(o)})}),(0,be.jsx)("div",{className:"flex justify-center items-center py-2 px-1 border-l-2",style:{borderColor:a},children:(0,be.jsx)("button",{onClick:()=>ft(e.attempt_id||e.id),className:"flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-lg transition-all",style:{backgroundColor:c("primary","#1a202c"),color:"#ffffff"},onMouseEnter:e=>e.currentTarget.style.opacity="0.8",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:(0,be.jsx)(cr.A,{size:12})})})]},e.attempt_id||e.id||t)})]}),(0,be.jsxs)("div",{className:"sm:hidden",children:[(0,be.jsxs)("div",{className:"grid grid-cols-4 text-xs uppercase tracking-wide font-bold border-b-2 px-3 py-2",style:{color:d?c("accent","#f59e0b"):"#ffffff",borderColor:d?"#ffffff":c("primary","#1a202c"),backgroundColor:d?c("primary","#1a202c"):"#000000"},children:[(0,be.jsx)("div",{children:"#"}),(0,be.jsx)("div",{className:"text-center",children:"Sin"}),(0,be.jsx)("div",{className:"text-center",style:{color:c("accent","#f59e0b")},children:"Con"}),(0,be.jsx)("div",{className:"flex justify-center",children:(0,be.jsx)(cr.A,{size:12})})]}),Fe.slice(0,5).map((e,t)=>{const r=rt(e.score||0,!1),n=rt(e.score_with_risk||0,!0),s=Re?.statistics?.top_20_cutoff_without_risk||0,o=Re?.statistics?.top_20_cutoff_with_risk||0;return(0,be.jsxs)("div",{className:"grid grid-cols-4 items-center border-b px-3 py-2",style:{borderColor:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"},children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"text-sm font-bold",style:{color:m.text},children:["#",t+1]}),(0,be.jsx)("div",{className:"text-xs font-bold",style:{color:m.text,fontSize:"0.825rem"},children:new Date(e.end_time?.replace(" ","T")).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"text-base font-bold",style:{color:m.text},children:u(e.score||0)}),(0,be.jsxs)("div",{className:"text-xs",style:{color:r>=0?"#10b981":"#ef4444"},children:[r>=0?"+":"",r.toFixed(1)]}),(0,be.jsxs)("div",{className:"text-xs",style:{color:m.textMuted},children:["/",u(s)]})]}),(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"text-base font-bold",style:{color:c("accent","#f59e0b")},children:u(e.score_with_risk||0)}),(0,be.jsxs)("div",{className:"text-xs",style:{color:n>=0?"#10b981":"#ef4444"},children:[n>=0?"+":"",n.toFixed(1)]}),(0,be.jsxs)("div",{className:"text-xs",style:{color:m.textMuted},children:["/",u(o)]})]}),(0,be.jsx)("div",{className:"flex justify-center",children:(0,be.jsx)("button",{onClick:()=>ft(e.attempt_id||e.id),className:"flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-lg transition-all",style:{backgroundColor:c("primary","#1a202c"),color:"#ffffff"},onMouseEnter:e=>e.currentTarget.style.opacity="0.8",onMouseLeave:e=>e.currentTarget.style.opacity="1",children:(0,be.jsx)(cr.A,{size:14})})})]},e.attempt_id||e.id||t)})]})]})]}),(0,be.jsx)("div",{className:"flex-shrink-0 mt-auto pt-3",children:(0,be.jsxs)("button",{onClick:async()=>{if(Le)try{const{getQuiz:e}=await Promise.resolve().then(a.bind(a,8766)),t=await e(Le);A(t),T(!0),R(!0)}catch(e){console.error("âŒ Error loading quiz:",e)}},className:"w-full py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2",style:{backgroundColor:d?c("accent","#f59e0b"):c("primary","#1a202c"),color:d?"#000000":"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.opacity="1",e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(Ct,{size:18}),(0,be.jsx)("span",{children:Tt()?t("tests.retakeQuiz"):t("tests.startQuiz")})]})})]})})})]})}),(0,be.jsx)(In,{})]})})}),ie&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(jf.A,{isOpen:ge.isOpen,onClose:Pt,lesson:ge.lesson,mode:ge.mode,onSave:async(e,r="close")=>{try{if("create"===ge.mode){const n=await le.createLesson({...e,courseId:s});ne.oR.success(t("admin.lessons.createSuccess")),await ot(),"addTest"===r&&Ot(n.id),Pt()}else await le.updateLesson(ge.lesson.id,e),ne.oR.success(t("admin.lessons.updateSuccess")),await ot(),Pt()}catch(e){throw console.error("Error saving lesson:",e),ne.oR.error(t("errors.saveLesson")),e}},availableCourses:ue.courses.map(e=>({value:e.id.toString(),label:e.title?.rendered||e.title})),compact:!0,preselectedCourseId:s}),(0,be.jsx)(If,{isOpen:ve.isOpen,onClose:zt,mode:ve.mode,test:ve.test,onSave:async e=>{try{const r=y.find(e=>e.id===ve.lessonId);if(!r)throw new Error("Lesson not found");const n=r.meta?._lesson_steps||[];let o;if("create"===ve.mode)o=[...n,e];else{const t=n.filter(e=>"quiz"===e.type),r=t[ve.testIndex];o=n.map(t=>t===r?e:t)}await le.updateLesson(r.id,{title:r.title?.rendered||r.title,courseId:r.meta?._lesson_course?.[0]||s,meta:{_lesson_steps:o}}),await ot(),ne.oR.success(t("tests.testSaved")),zt()}catch(e){throw console.error("Error saving test:",e),e}},courseId:s,lessonId:ve.lessonId}),we.isOpen&&(0,be.jsx)("div",{className:"fixed inset-0 flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:999999},onMouseDown:e=>{ke.current=e.target===e.currentTarget},onClick:e=>{e.target===e.currentTarget&&ke.current&&Dt(),ke.current=!1},children:(0,be.jsxs)("div",{className:"relative w-full max-w-md rounded-xl shadow-2xl overflow-hidden",style:{backgroundColor:c("background","#ffffff")},onClick:e=>e.stopPropagation(),children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 px-6 py-4 border-b",style:{borderColor:c("borderColor","#e5e7eb")},children:[(0,be.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:"rgba(239, 68, 68, 0.15)"},children:(0,be.jsx)(Te.A,{size:20,style:{color:"#ef4444"}})}),(0,be.jsx)("h2",{className:"text-lg font-semibold",style:{color:m.text},children:t("tests.deleteThemeTitle")})]}),(0,be.jsxs)("div",{className:"px-6 py-5",children:[(0,be.jsx)("p",{className:"text-sm mb-4",style:{color:m.text},children:t("tests.deleteThemeConfirm")}),(0,be.jsxs)("div",{className:"p-4 rounded-lg mb-4",style:{backgroundColor:d?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.03)",border:`1px solid ${c("borderColor","#e5e7eb")}`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,be.jsx)(ce,{size:18,style:{color:m.accent}}),(0,be.jsx)("span",{className:"font-medium",style:{color:m.text},dangerouslySetInnerHTML:{__html:we.lesson?.title?.rendered||we.lesson?.title||t("courses.untitledLesson")}})]}),(0,be.jsx)("p",{className:"text-sm",style:{color:m.textMuted},children:t("tests.associatedTests",{count:we.lesson?.quizSteps?.length||0})})]}),(0,be.jsx)("p",{className:"text-xs",style:{color:"#ef4444"},children:t("tests.deleteThemeWarning")})]}),(0,be.jsxs)("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t",style:{borderColor:c("borderColor","#e5e7eb"),backgroundColor:d?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.02)"},children:[(0,be.jsx)("button",{type:"button",onClick:Dt,className:"px-4 py-2 rounded-lg font-medium text-sm transition-colors",style:{backgroundColor:d?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",color:m.text},children:t("common.cancel")}),(0,be.jsxs)("button",{type:"button",onClick:async()=>{if(we.lesson)try{await le.deleteLesson(we.lesson.id),await ot(),ne.oR.success(t("tests.themeDeleted")),Dt()}catch(e){console.error("Error deleting theme:",e),ne.oR.error(t("tests.deleteThemeError"))}},className:"px-4 py-2 rounded-lg font-medium text-sm transition-all flex items-center gap-2",style:{backgroundColor:"#ef4444",color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(pr.A,{size:16}),t("tests.confirmDelete")]})]})]})})]}),L&&E&&!P&&(0,be.jsx)("div",{className:"fixed inset-0 z-[9999] flex flex-col pt-10",style:{backgroundColor:c("background","#ffffff")},children:(0,be.jsx)("div",{className:"w-full flex-1 overflow-hidden",children:(0,be.jsx)(is,{quizId:E.id,lessonId:k?.id,courseId:s,onQuizComplete:Nt,onExit:kt,isDrawingMode:Q,setIsDrawingMode:V,isDrawingEnabled:Y,setIsDrawingEnabled:K,showDrawingToolbar:G,setShowDrawingToolbar:X,drawingTool:J,drawingColor:ee,drawingLineWidth:oe,onDrawingToolChange:Z,onDrawingColorChange:te,onDrawingLineWidthChange:ae,onClearCanvas:_t},`quiz-${E.id}-${k?.id||"no-lesson"}`)})},`quiz-focus-${E.id}`)]})};var Rf=a(4164),$f=a(4297),Bf=a.n($f),Ff=a(305),Uf=a.n(Ff),Wf=e=>0===e?0:e>0?1:-1,Hf=e=>"number"==typeof e&&e!=+e,Qf=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,Vf=e=>("number"==typeof e||e instanceof Number)&&!Hf(e),Yf=e=>Vf(e)||"string"==typeof e,Kf=0,Gf=e=>{var t=++Kf;return"".concat(e||"").concat(t)},Xf=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Vf(e)&&"string"!=typeof e)return n;if(Qf(e)){if(null==t)return n;var o=e.indexOf("%");r=t*parseFloat(e.slice(0,o))/100}else r=+e;return Hf(r)&&(r=n),s&&null!=t&&r>t&&(r=t),r},Jf=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++){if(r[e[n]])return!0;r[e[n]]=!0}return!1};function Zf(e,t,r){return Vf(e)&&Vf(t)?e+r*(t-e):t}function em(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):Uf()(e,t))===r)}var tm=e=>null==e,rm=e=>tm(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function nm(e){return null!=e}function sm(){}var om=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];if("undefined"!=typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(t.replace(/%s/g,()=>n[o++]))}},am=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:o,maxHeight:a}=r,i=Qf(n)?e:Number(n),l=Qf(s)?t:Number(s);return o&&o>0&&(i?l=i/o:l&&(i=l*o),a&&null!=l&&l>a&&(l=a)),{calculatedWidth:i,calculatedHeight:l}},im={width:0,height:0,overflow:"visible"},lm={width:0,overflowX:"visible"},cm={height:0,overflowY:"visible"},dm={},um=e=>{var{width:t,height:r}=e,n=Qf(t),s=Qf(r);return n&&s?im:n?lm:s?cm:dm};function pm(e){return Number.isFinite(e)}function fm(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mm.apply(null,arguments)}function hm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hm(Object(r),!0).forEach(function(t){xm(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function xm(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ym=(0,r.createContext)({width:-1,height:-1});function bm(e){var{children:t,width:n,height:s}=e,o=(0,r.useMemo)(()=>({width:n,height:s}),[n,s]);return function(e){return fm(e.width)&&fm(e.height)}(o)?r.createElement(ym.Provider,{value:o},t):null}var vm=()=>(0,r.useContext)(ym),jm=(0,r.forwardRef)((e,t)=>{var{aspect:n,initialDimension:s={width:-1,height:-1},width:o,height:a,minWidth:i=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:p,className:f,onResize:m,style:h={}}=e,g=(0,r.useRef)(null),x=(0,r.useRef)();x.current=m,(0,r.useImperativeHandle)(t,()=>g.current);var[y,b]=(0,r.useState)({containerWidth:s.width,containerHeight:s.height}),v=(0,r.useCallback)((e,t)=>{b(r=>{var n=Math.round(e),s=Math.round(t);return r.containerWidth===n&&r.containerHeight===s?r:{containerWidth:n,containerHeight:s}})},[]);(0,r.useEffect)(()=>{if(null==g.current||"undefined"==typeof ResizeObserver)return sm;var e=e=>{var t,{width:r,height:n}=e[0].contentRect;v(r,n),null===(t=x.current)||void 0===t||t.call(x,r,n)};u>0&&(e=Bf()(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=g.current.getBoundingClientRect();return v(r,n),t.observe(g.current),()=>{t.disconnect()}},[v,u]);var{containerWidth:j,containerHeight:w}=y;om(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:N,calculatedHeight:k}=am(j,w,{width:o,height:a,aspect:n,maxHeight:c});return om(null!=N&&N>0||null!=k&&k>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",N,k,o,a,i,l,n),r.createElement("div",{id:p?"".concat(p):void 0,className:(0,Rf.$)("recharts-responsive-container",f),style:gm(gm({},h),{},{width:o,height:a,minWidth:i,minHeight:l,maxHeight:c}),ref:g},r.createElement("div",{style:um({width:o,height:a})},r.createElement(bm,{width:N,height:k},d)))}),wm=(0,r.forwardRef)((e,t)=>{var n=vm();if(fm(n.width)&&fm(n.height))return e.children;var{width:s,height:o}=function(e){var{width:t,height:r,aspect:n}=e,s=t,o=r;return void 0===s&&void 0===o?(s="100%",o="100%"):void 0===s?s=n&&n>0?void 0:"100%":void 0===o&&(o=n&&n>0?void 0:"100%"),{width:s,height:o}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:i}=am(void 0,void 0,{width:s,height:o,aspect:e.aspect,maxHeight:e.maxHeight});return Vf(a)&&Vf(i)?r.createElement(bm,{width:a,height:i},e.children):r.createElement(jm,mm({},e,{width:s,height:o,ref:t}))}),Nm=Symbol.for("immer-nothing"),km=Symbol.for("immer-draftable"),Cm=Symbol.for("immer-state");function _m(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Sm=Object,Em=Sm.getPrototypeOf,Am="constructor",Mm="prototype",Tm="configurable",Pm="enumerable",Om="writable",zm="value",qm=e=>!!e&&!!e[Cm];function Dm(e){return!!e&&(Rm(e)||Hm(e)||!!e[km]||!!e[Am]?.[km]||Qm(e)||Vm(e))}var Im=Sm[Mm][Am].toString(),Lm=new WeakMap;function Rm(e){if(!e||!Ym(e))return!1;const t=Em(e);if(null===t||t===Sm[Mm])return!0;const r=Sm.hasOwnProperty.call(t,Am)&&t[Am];if(r===Object)return!0;if(!Km(r))return!1;let n=Lm.get(r);return void 0===n&&(n=Function.toString.call(r),Lm.set(r,n)),n===Im}function $m(e,t,r=!0){0===Bm(e)?(r?Reflect.ownKeys(e):Sm.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Bm(e){const t=e[Cm];return t?t.type_:Hm(e)?1:Qm(e)?2:Vm(e)?3:0}var Fm=(e,t,r=Bm(e))=>2===r?e.has(t):Sm[Mm].hasOwnProperty.call(e,t),Um=(e,t,r=Bm(e))=>2===r?e.get(t):e[t],Wm=(e,t,r,n=Bm(e))=>{2===n?e.set(t,r):3===n?e.add(r):e[t]=r},Hm=Array.isArray,Qm=e=>e instanceof Map,Vm=e=>e instanceof Set,Ym=e=>"object"==typeof e,Km=e=>"function"==typeof e,Gm=e=>"boolean"==typeof e,Xm=e=>e.copy_||e.base_,Jm=e=>e.modified_?e.copy_:e.base_;function Zm(e,t){if(Qm(e))return new Map(e);if(Vm(e))return new Set(e);if(Hm(e))return Array[Mm].slice.call(e);const r=Rm(e);if(!0===t||"class_only"===t&&!r){const t=Sm.getOwnPropertyDescriptors(e);delete t[Cm];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const s=r[n],o=t[s];!1===o[Om]&&(o[Om]=!0,o[Tm]=!0),(o.get||o.set)&&(t[s]={[Tm]:!0,[Om]:!0,[Pm]:o[Pm],[zm]:e[s]})}return Sm.create(Em(e),t)}{const t=Em(e);if(null!==t&&r)return{...e};const n=Sm.create(t);return Sm.assign(n,e)}}function eh(e,t=!1){return rh(e)||qm(e)||(Bm(e)>1&&Sm.defineProperties(e,{set:th,add:th,clear:th,delete:th}),Sm.freeze(e),t&&$m(e,(e,t)=>{eh(t,!0)},!1)),e}var th={[zm]:function(){_m(2)}};function rh(e){return null===e||!Ym(e)||Sm.isFrozen(e)}var nh,sh="MapSet",oh="Patches",ah={};function ih(e){const t=ah[e];return t||_m(0),t}var lh=()=>nh;function ch(e,t){t&&(e.patchPlugin_=ih(oh),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function dh(e){uh(e),e.drafts_.forEach(fh),e.drafts_=null}function uh(e){e===nh&&(nh=e.parent_)}var ph=e=>{return nh={drafts_:[],parent_:nh,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:(t=sh,ah[t]?ih(sh):void 0)};var t};function fh(e){const t=e[Cm];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function mh(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(void 0!==e&&e!==r){r[Cm].modified_&&(dh(t),_m(4)),Dm(e)&&(e=hh(t,e));const{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(r[Cm].base_,e,t)}else e=hh(t,r);return function(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&eh(t,r)}(t,e,!0),dh(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Nm?e:void 0}function hh(e,t){if(rh(t))return t;const r=t[Cm];if(!r)return jh(t,e.handledSet_,e);if(!xh(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:t}=r;if(t)for(;t.length>0;)t.pop()(e);vh(r,e)}return r.copy_}function gh(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var xh=(e,t)=>e.scope_===t,yh=[];function bh(e,t,r,n){const s=Xm(e),o=e.type_;if(void 0!==n&&Um(s,n,o)===t)return void Wm(s,n,r,o);if(!e.draftLocations_){const t=e.draftLocations_=new Map;$m(s,(e,r)=>{if(qm(r)){const n=t.get(r)||[];n.push(e),t.set(r,n)}})}const a=e.draftLocations_.get(t)??yh;for(const e of a)Wm(s,e,r,o)}function vh(e,t){if(e.modified_&&!e.finalized_&&(3===e.type_||(e.assigned_?.size??0)>0)){const{patchPlugin_:r}=t;if(r){const n=r.getPath(e);n&&r.generatePatches_(e,n,t)}gh(e)}}function jh(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||qm(e)||t.has(e)||!Dm(e)||rh(e)||(t.add(e),$m(e,(n,s)=>{if(qm(s)){const t=s[Cm];if(xh(t,r)){const r=Jm(t);Wm(e,n,r,e.type_),gh(t)}}else Dm(s)&&jh(s,t,r)})),e}var wh={get(e,t){if(t===Cm)return e;const r=Xm(e);if(!Fm(r,t,e.type_))return function(e,t,r){const n=Ch(t,r);return n?zm in n?n[zm]:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];if(e.finalized_||!Dm(n))return n;if(n===kh(e.base_,t)){Sh(e);const r=1===e.type_?+t:t,s=Eh(e.scope_,n,e,r);return e.copy_[r]=s}return n},has:(e,t)=>t in Xm(e),ownKeys:e=>Reflect.ownKeys(Xm(e)),set(e,t,r){const n=Ch(Xm(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=kh(Xm(e),t),s=n?.[Cm];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||Fm(e.base_,t,e.type_)))return!0;Sh(e),_h(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),function(e,t,r){const{scope_:n}=e;if(qm(r)){const s=r[Cm];xh(s,n)&&s.callbacks_.push(function(){Sh(e);const n=Jm(s);bh(e,r,n,t)})}else Dm(r)&&e.callbacks_.push(function(){const s=Xm(e);Um(s,t,e.type_)===r&&n.drafts_.length>1&&!0===(e.assigned_.get(t)??!1)&&e.copy_&&jh(Um(e.copy_,t,e.type_),n.handledSet_,n)})}(e,t,r)),!0},deleteProperty:(e,t)=>(Sh(e),void 0!==kh(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),_h(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=Xm(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{[Om]:!0,[Tm]:1!==e.type_||"length"!==t,[Pm]:n[Pm],[zm]:r[t]}:n},defineProperty(){_m(11)},getPrototypeOf:e=>Em(e.base_),setPrototypeOf(){_m(12)}},Nh={};function kh(e,t){const r=e[Cm];return(r?Xm(r):e)[t]}function Ch(e,t){if(!(t in e))return;let r=Em(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Em(r)}}function _h(e){e.modified_||(e.modified_=!0,e.parent_&&_h(e.parent_))}function Sh(e){e.copy_||(e.assigned_=new Map,e.copy_=Zm(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Eh(e,t,r,n){const[s,o]=Qm(t)?ih(sh).proxyMap_(t,r):Vm(t)?ih(sh).proxySet_(t,r):function(e,t){const r=Hm(e),n={type_:r?1:0,scope_:t?t.scope_:lh(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=n,o=wh;r&&(s=[n],o=Nh);const{revoke:a,proxy:i}=Proxy.revocable(s,o);return n.draft_=i,n.revoke_=a,[i,n]}(t,r);return(r?.scope_??lh()).drafts_.push(s),o.callbacks_=r?.callbacks_??[],o.key_=n,r&&void 0!==n?function(e,t,r){e.callbacks_.push(function(n){const s=t;if(!s||!xh(s,n))return;n.mapSetPlugin_?.fixSetContents(s);const o=Jm(s);bh(e,s.draft_??s,o,r),vh(s,n)})}(r,o,n):o.callbacks_.push(function(e){e.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:t}=e;o.modified_&&t&&t.generatePatches_(o,[],e)}),s}function Ah(e){return qm(e)||_m(10),Mh(e)}function Mh(e){if(!Dm(e)||rh(e))return e;const t=e[Cm];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Zm(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Zm(e,!0);return $m(r,(e,t)=>{Wm(r,e,Mh(t))},n),t&&(t.finalized_=!1),r}$m(wh,(e,t)=>{Nh[e]=function(){const e=arguments;return e[0]=e[0][0],t.apply(this,e)}}),Nh.deleteProperty=function(e,t){return Nh.set.call(this,e,t,void 0)},Nh.set=function(e,t,r){return wh.set.call(this,e[0],t,r,e[0])};var Th=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,r)=>{if(Km(e)&&!Km(t)){const r=t;t=e;const n=this;return function(e=r,...s){return n.produce(e,e=>t.call(this,e,...s))}}let n;if(Km(t)||_m(6),void 0===r||Km(r)||_m(7),Dm(e)){const s=ph(this),o=Eh(0,e,void 0);let a=!0;try{n=t(o),a=!1}finally{a?dh(s):uh(s)}return ch(s,r),mh(n,s)}if(!e||!Ym(e)){if(n=t(e),void 0===n&&(n=e),n===Nm&&(n=void 0),this.autoFreeze_&&eh(n,!0),r){const t=[],s=[];ih(oh).generateReplacementPatches_(e,n,{patches_:t,inversePatches_:s}),r(t,s)}return n}_m(1)},this.produceWithPatches=(e,t)=>{if(Km(e))return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},Gm(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),Gm(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),Gm(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Dm(e)||_m(8),qm(e)&&(e=Ah(e));const t=ph(this),r=Eh(0,e,void 0);return r[Cm].isManual_=!0,uh(t),r}finishDraft(e,t){const r=e&&e[Cm];r&&r.isManual_||_m(9);const{scope_:n}=r;return ch(n,t),mh(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=ih(oh).applyPatches_;return qm(e)?n(e,t):this.produce(e,e=>n(e,t))}},Ph=Th.produce;function Oh(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var zh=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),qh=()=>Math.random().toString(36).substring(7).split("").join("."),Dh={INIT:`@@redux/INIT${qh()}`,REPLACE:`@@redux/REPLACE${qh()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${qh()}`};function Ih(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Lh(e,t,r){if("function"!=typeof e)throw new Error(Oh(2));if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(Oh(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(Oh(1));return r(Lh)(e,t)}let n=e,s=t,o=new Map,a=o,i=0,l=!1;function c(){a===o&&(a=new Map,o.forEach((e,t)=>{a.set(t,e)}))}function d(){if(l)throw new Error(Oh(3));return s}function u(e){if("function"!=typeof e)throw new Error(Oh(4));if(l)throw new Error(Oh(5));let t=!0;c();const r=i++;return a.set(r,e),function(){if(t){if(l)throw new Error(Oh(6));t=!1,c(),a.delete(r),o=null}}}function p(e){if(!Ih(e))throw new Error(Oh(7));if(void 0===e.type)throw new Error(Oh(8));if("string"!=typeof e.type)throw new Error(Oh(17));if(l)throw new Error(Oh(9));try{l=!0,s=n(s,e)}finally{l=!1}return(o=a).forEach(e=>{e()}),e}return p({type:Dh.INIT}),{dispatch:p,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Oh(10));n=e,p({type:Dh.REPLACE})},[zh]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(Oh(11));function r(){const e=t;e.next&&e.next(d())}return r(),{unsubscribe:e(r)}},[zh](){return this}}}}}function Rh(e){const t=Object.keys(e),r={};for(let n=0;n<t.length;n++){const s=t[n];"function"==typeof e[s]&&(r[s]=e[s])}const n=Object.keys(r);let s;try{!function(e){Object.keys(e).forEach(t=>{const r=e[t];if(void 0===r(void 0,{type:Dh.INIT}))throw new Error(Oh(12));if(void 0===r(void 0,{type:Dh.PROBE_UNKNOWN_ACTION()}))throw new Error(Oh(13))})}(r)}catch(e){s=e}return function(e={},t){if(s)throw s;let o=!1;const a={};for(let s=0;s<n.length;s++){const i=n[s],l=r[i],c=e[i],d=l(c,t);if(void 0===d)throw t&&t.type,new Error(Oh(14));a[i]=d,o=o||d!==c}return o=o||n.length!==Object.keys(e).length,o?a:e}}function $h(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function Bh(e){return Ih(e)&&"type"in e&&"string"==typeof e.type}function Fh(e){return({dispatch:t,getState:r})=>n=>s=>"function"==typeof s?s(t,r,e):n(s)}var Uh=Fh(),Wh=Fh,Hh="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?$h:$h.apply(null,arguments)};function Qh(e,t){function r(...r){if(t){let n=t(...r);if(!n)throw new Error(Rg(0));return{type:e,payload:n.payload,..."meta"in n&&{meta:n.meta},..."error"in n&&{error:n.error}}}return{type:e,payload:r[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>Bh(t)&&t.type===e,r}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var Vh=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Yh(e){return Dm(e)?Ph(e,()=>{}):e}function Kh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var Gh="RTK_autoBatch",Xh=()=>e=>({payload:e,meta:{[Gh]:!0}}),Jh=e=>t=>{setTimeout(t,e)},Zh=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,o=!1,a=!1;const i=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Jh(10):"callback"===e.type?e.queueNotification:Jh(e.timeout),c=()=>{a=!1,o&&(o=!1,i.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>s&&e());return i.add(e),()=>{t(),i.delete(e)}},dispatch(e){try{return s=!e?.meta?.[Gh],o=!s,o&&(a||(a=!0,l(c))),n.dispatch(e)}finally{s=!0}}})};function eg(e){const t={},r=[];let n;const s={addCase(e,r){const n="string"==typeof e?e:e.type;if(!n)throw new Error(Rg(28));if(n in t)throw new Error(Rg(29));return t[n]=r,s},addAsyncThunk:(e,n)=>(n.pending&&(t[e.pending.type]=n.pending),n.rejected&&(t[e.rejected.type]=n.rejected),n.fulfilled&&(t[e.fulfilled.type]=n.fulfilled),n.settled&&r.push({matcher:e.settled,reducer:n.settled}),s),addMatcher:(e,t)=>(r.push({matcher:e,reducer:t}),s),addDefaultCase:e=>(n=e,s)};return e(s),[t,r,n]}var tg=(e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},rg=Symbol.for("rtk-slice-createasyncthunk");function ng(e,t){return`${e}/${t}`}function sg({creators:e}={}){const t=e?.asyncThunk?.[rg];return function(e){const{name:r,reducerPath:n=r}=e;if(!r)throw new Error(Rg(11));const s=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(s),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},i={addCase(e,t){const r="string"==typeof e?e:e.type;if(!r)throw new Error(Rg(12));if(r in a.sliceCaseReducersByType)throw new Error(Rg(13));return a.sliceCaseReducersByType[r]=t,i},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),i),exposeAction:(e,t)=>(a.actionCreators[e]=t,i),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,i)};function l(){const[t={},r=[],n]="function"==typeof e.extraReducers?eg(e.extraReducers):[e.extraReducers],s={...t,...a.sliceCaseReducersByType};return function(e){let t,[o,i,l]=eg(e=>{for(let t in s)e.addCase(t,s[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)});if(function(e){return"function"==typeof e}(e))t=()=>Yh(e());else{const r=Yh(e);t=()=>r}function c(e=t(),r){let n=[o[r.type],...i.filter(({matcher:e})=>e(r)).map(({reducer:e})=>e)];return 0===n.filter(e=>!!e).length&&(n=[l]),n.reduce((e,t)=>{if(t){if(qm(e)){const n=t(e,r);return void 0===n?e:n}if(Dm(e))return Ph(e,e=>t(e,r));{const n=t(e,r);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}}return e},e)}return c.getInitialState=t,c}(e.initialState)}o.forEach(n=>{const o=s[n],a={reducerName:n,type:ng(r,n),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(o)?function({type:e,reducerName:t,createNotation:r},n,s){let o,a;if("reducer"in n){if(r&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(n))throw new Error(Rg(17));o=n.reducer,a=n.prepare}else o=n;s.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,a?Qh(e,a):Qh(e))}(a,o,i):function({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Rg(18));const{payloadCreator:o,fulfilled:a,pending:i,rejected:l,settled:c,options:d}=r,u=s(e,o,d);n.exposeAction(t,u),a&&n.addCase(u.fulfilled,a),i&&n.addCase(u.pending,i),l&&n.addCase(u.rejected,l),c&&n.addMatcher(u.settled,c),n.exposeCaseReducer(t,{fulfilled:a||ig,pending:i||ig,rejected:l||ig,settled:c||ig})}(a,o,i,t)});const c=e=>e,d=new Map,u=new WeakMap;let p;function f(e,t){return p||(p=l()),p(e,t)}function m(){return p||(p=l()),p.getInitialState()}function h(t,r=!1){function n(e){let s=e[t];return void 0===s&&r&&(s=Kh(u,n,m)),s}function s(t=c){const n=Kh(d,r,()=>new WeakMap);return Kh(n,t,()=>{const n={};for(const[s,o]of Object.entries(e.selectors??{}))n[s]=og(o,t,()=>Kh(u,t,m),r);return n})}return{reducerPath:t,getSelectors:s,get selectors(){return s(n)},selectSlice:n}}const g={name:r,reducer:f,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:m,...h(n),injectInto(e,{reducerPath:t,...r}={}){const s=t??n;return e.inject({reducerPath:s,reducer:f},r),{...g,...h(s,!0)}}};return g}}function og(e,t,r,n){function s(s,...o){let a=t(s);return void 0===a&&n&&(a=r()),e(a,...o)}return s.unwrapped=e,s}var ag=sg();function ig(){}var lg="listener",cg="completed",dg="cancelled",ug=`task-${dg}`,pg=`task-${cg}`,fg=`${lg}-${dg}`,mg=`${lg}-${cg}`,hg=class{constructor(e){this.code=e,this.message=`task ${dg} (reason: ${e})`}name="TaskAbortError";message},gg=(e,t)=>{if("function"!=typeof e)throw new TypeError(Rg(32))},xg=()=>{},yg=(e,t=xg)=>(e.catch(t),e),bg=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),vg=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},jg=e=>{if(e.aborted){const{reason:t}=e;throw new hg(t)}};function wg(e,t){let r=xg;return new Promise((n,s)=>{const o=()=>s(new hg(e.reason));e.aborted?o():(r=bg(e,o),t.finally(()=>r()).then(n,s))}).finally(()=>{r=xg})}var Ng=e=>t=>yg(wg(e,t).then(t=>(jg(e),t))),kg=e=>{const t=Ng(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:Cg}=Object,_g={},Sg="listenerMiddleware",Eg=(e,t)=>(r,n)=>{gg(r);const s=new AbortController;var o;o=s,bg(e,()=>vg(o,e.reason));const a=(async()=>{try{return await Promise.resolve(),{status:"ok",value:await(async()=>{jg(e),jg(s.signal);const t=await r({pause:Ng(s.signal),delay:kg(s.signal),signal:s.signal});return jg(s.signal),t})()}}catch(e){return{status:e instanceof hg?"cancelled":"rejected",error:e}}finally{vg(s,pg)}})();return n?.autoJoin&&t.push(a.catch(xg)),{result:Ng(e)(a),cancel(){vg(s,ug)}}},Ag=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:o}=e;if(t)s=Qh(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Rg(21));return gg(o),{predicate:s,type:t,effect:o}},Mg=Cg(e=>{const{type:t,predicate:r,effect:n}=Ag(e);return{id:tg(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Rg(22))}}},{withTypes:()=>Mg}),Tg=(e,t)=>{const{type:r,effect:n,predicate:s}=Ag(t);return Array.from(e.values()).find(e=>("string"==typeof r?e.type===r:e.predicate===s)&&e.effect===n)},Pg=e=>{e.pending.forEach(e=>{vg(e,fg)})},Og=(e,t,r)=>{try{e(t,r)}catch(e){setTimeout(()=>{throw e},0)}},zg=Cg(Qh(`${Sg}/add`),{withTypes:()=>zg}),qg=Qh(`${Sg}/removeAll`),Dg=Cg(Qh(`${Sg}/remove`),{withTypes:()=>Dg}),Ig=(...e)=>{console.error(`${Sg}/error`,...e)},Lg=(e={})=>{const t=new Map,r=new Map,{extra:n,onError:s=Ig}=e;gg(s);const o=e=>{return(r=Tg(t,e)??Mg(e)).unsubscribe=()=>t.delete(r.id),t.set(r.id,r),e=>{r.unsubscribe(),e?.cancelActive&&Pg(r)};var r};Cg(o,{withTypes:()=>o});const a=e=>{const r=Tg(t,e);return r&&(r.unsubscribe(),e.cancelActive&&Pg(r)),!!r};Cg(a,{withTypes:()=>a});const i=async(e,a,i,l)=>{const c=new AbortController,d=((e,t)=>(r,n)=>yg((async(r,n)=>{jg(t);let s=()=>{};const o=[new Promise((t,n)=>{let o=e({predicate:r,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});s=()=>{o(),n()}})];null!=n&&o.push(new Promise(e=>setTimeout(e,n,null)));try{const e=await wg(t,Promise.race(o));return jg(t),e}finally{s()}})(r,n)))(o,c.signal),u=[];try{e.pending.add(c),(e=>{const t=r.get(e)??0;r.set(e,t+1)})(e),await Promise.resolve(e.effect(a,Cg({},i,{getOriginalState:l,condition:(e,t)=>d(e,t).then(Boolean),take:d,delay:kg(c.signal),pause:Ng(c.signal),extra:n,signal:c.signal,fork:Eg(c.signal,u),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==c&&(vg(e,fg),r.delete(e))})},cancel:()=>{vg(c,fg),e.pending.delete(c)},throwIfCancelled:()=>{jg(c.signal)}})))}catch(e){e instanceof hg||Og(s,e,{raisedBy:"effect"})}finally{await Promise.all(u),vg(c,mg),(e=>{const t=r.get(e)??1;1===t?r.delete(e):r.set(e,t-1)})(e),e.pending.delete(c)}},l=((e,t)=>()=>{for(const e of t.keys())Pg(e);e.clear()})(t,r);return{middleware:e=>r=>n=>{if(!Bh(n))return r(n);if(zg.match(n))return o(n.payload);if(qg.match(n))return void l();if(Dg.match(n))return a(n.payload);let c=e.getState();const d=()=>{if(c===_g)throw new Error(Rg(23));return c};let u;try{if(u=r(n),t.size>0){const r=e.getState(),o=Array.from(t.values());for(const t of o){let o=!1;try{o=t.predicate(n,r,c)}catch(e){o=!1,Og(s,e,{raisedBy:"predicate"})}o&&i(t,n,e,d)}}}finally{c=_g}return u},startListening:o,stopListening:a,clearListeners:l}};function Rg(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function $g(e,t){if(t){var r=Number.parseInt(t,10);if(!Hf(r))return null==e?void 0:e[r]}}Symbol.for("rtk-state-proxy-original");var Bg=ag({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Fg=Bg.reducer,{createEventEmitter:Ug}=Bg.actions;a(8418);var Wg={notify(){},get:()=>[]};var Hg=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),Qg=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),Vg=(()=>Hg||Qg?r.useLayoutEffect:r.useEffect)();function Yg(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function Kg(e,t){if(Yg(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!Yg(e[r[n]],t[r[n]]))return!1;return!0}Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var Gg=Symbol.for("react-redux-context"),Xg="undefined"!=typeof globalThis?globalThis:{};function Jg(){if(!r.createContext)return{};const e=Xg[Gg]??=new Map;let t=e.get(r.createContext);return t||(t=r.createContext(null),e.set(r.createContext,t)),t}var Zg=Jg(),ex=function(e){const{children:t,context:n,serverState:s,store:o}=e,a=r.useMemo(()=>{const e=function(e,t){let r,n=Wg,s=0,o=!1;function a(){c.onStateChange&&c.onStateChange()}function i(){s++,r||(r=t?t.addNestedSub(a):e.subscribe(a),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){var t;t=()=>{let t=e;for(;t;)t.callback(),t=t.next},t()},get(){const t=[];let r=e;for(;r;)t.push(r),r=r.next;return t},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){n&&null!==e&&(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}())}function l(){s--,r&&0===s&&(r(),r=void 0,n.clear(),n=Wg)}const c={addNestedSub:function(e){i();const t=n.subscribe(e);let r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:a,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,i())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>n};return c}(o);return{store:o,subscription:e,getServerState:s?()=>s:void 0}},[o,s]),i=r.useMemo(()=>o.getState(),[o]);Vg(()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),i!==o.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[a,i]);const l=n||Zg;return r.createElement(l.Provider,{value:a},t)},tx=Symbol.for("immer-nothing"),rx=Symbol.for("immer-draftable"),nx=Symbol.for("immer-state");function sx(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ox=Object.getPrototypeOf;function ax(e){return!!e&&!!e[nx]}function ix(e){return!!e&&(dx(e)||Array.isArray(e)||!!e[rx]||!!e.constructor?.[rx]||hx(e)||gx(e))}var lx=Object.prototype.constructor.toString(),cx=new WeakMap;function dx(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!=typeof r)return!1;let n=cx.get(r);return void 0===n&&(n=Function.toString.call(r),cx.set(r,n)),n===lx}function ux(e,t,r=!0){0===px(e)?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function px(e){const t=e[nx];return t?t.type_:Array.isArray(e)?1:hx(e)?2:gx(e)?3:0}function fx(e,t){return 2===px(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function mx(e,t,r){const n=px(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function hx(e){return e instanceof Map}function gx(e){return e instanceof Set}function xx(e){return e.copy_||e.base_}function yx(e,t){if(hx(e))return new Map(e);if(gx(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=dx(e);if(!0===t||"class_only"===t&&!r){const t=Object.getOwnPropertyDescriptors(e);delete t[nx];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){const s=r[n],o=t[s];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(ox(e),t)}{const t=ox(e);if(null!==t&&r)return{...e};const n=Object.create(t);return Object.assign(n,e)}}function bx(e,t=!1){return jx(e)||ax(e)||!ix(e)||(px(e)>1&&Object.defineProperties(e,{set:vx,add:vx,clear:vx,delete:vx}),Object.freeze(e),t&&Object.values(e).forEach(e=>bx(e,!0))),e}var vx={value:function(){sx(2)}};function jx(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var wx,Nx={};function kx(e){const t=Nx[e];return t||sx(0),t}function Cx(){return wx}function Sx(e,t){t&&(kx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ex(e){Ax(e),e.drafts_.forEach(Tx),e.drafts_=null}function Ax(e){e===wx&&(wx=e.parent_)}function Mx(e){return wx={drafts_:[],parent_:wx,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Tx(e){const t=e[nx];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Px(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return void 0!==e&&e!==r?(r[nx].modified_&&(Ex(t),sx(4)),ix(e)&&(e=Ox(t,e),t.parent_||qx(t,e)),t.patches_&&kx("Patches").generateReplacementPatches_(r[nx].base_,e,t.patches_,t.inversePatches_)):e=Ox(t,r,[]),Ex(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==tx?e:void 0}function Ox(e,t,r){if(jx(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[nx];if(!s)return ux(t,(n,o)=>zx(e,s,t,n,o,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return qx(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const t=s.copy_;let o=t,a=!1;3===s.type_&&(o=new Set(t),t.clear(),a=!0),ux(o,(n,o)=>zx(e,s,t,n,o,r,a),n),qx(e,t,!1),r&&e.patches_&&kx("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function zx(e,t,r,n,s,o,a){if(null==s)return;if("object"!=typeof s&&!a)return;const i=jx(s);if(!i||a){if(ax(s)){const a=Ox(e,s,o&&t&&3!==t.type_&&!fx(t.assigned_,n)?o.concat(n):void 0);if(mx(r,n,a),!ax(a))return;e.canAutoFreeze_=!1}else a&&r.add(s);if(ix(s)&&!i){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;if(t&&t.base_&&t.base_[n]===s&&i)return;Ox(e,s),t&&t.scope_.parent_||"symbol"==typeof n||!(hx(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))||qx(e,s)}}}function qx(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&bx(t,r)}var Dx={get(e,t){if(t===nx)return e;const r=xx(e);if(!fx(r,t))return function(e,t,r){const n=Rx(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}(e,r,t);const n=r[t];return e.finalized_||!ix(n)?n:n===Lx(e.base_,t)?(Bx(e),e.copy_[t]=Fx(n,e)):n},has:(e,t)=>t in xx(e),ownKeys:e=>Reflect.ownKeys(xx(e)),set(e,t,r){const n=Rx(xx(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const n=Lx(xx(e),t),s=n?.[nx];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,n)&&(void 0!==r||fx(e.base_,t)))return!0;Bx(e),$x(e)}return e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Lx(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Bx(e),$x(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const r=xx(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){sx(11)},getPrototypeOf:e=>ox(e.base_),setPrototypeOf(){sx(12)}},Ix={};function Lx(e,t){const r=e[nx];return(r?xx(r):e)[t]}function Rx(e,t){if(!(t in e))return;let r=ox(e);for(;r;){const e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=ox(r)}}function $x(e){e.modified_||(e.modified_=!0,e.parent_&&$x(e.parent_))}function Bx(e){e.copy_||(e.copy_=yx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function Fx(e,t){const r=hx(e)?kx("MapSet").proxyMap_(e,t):gx(e)?kx("MapSet").proxySet_(e,t):function(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Cx(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,o=Dx;r&&(s=[n],o=Ix);const{revoke:a,proxy:i}=Proxy.revocable(s,o);return n.draft_=i,n.revoke_=a,i}(e,t);return(t?t.scope_:Cx()).drafts_.push(r),r}function Ux(e){if(!ix(e)||jx(e))return e;const t=e[nx];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=yx(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=yx(e,!0);return ux(r,(e,t)=>{mx(r,e,Ux(t))},n),t&&(t.finalized_=!1),r}ux(Dx,(e,t)=>{Ix[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ix.deleteProperty=function(e,t){return Ix.set.call(this,e,t,void 0)},Ix.set=function(e,t,r){return Dx.set.call(this,e[0],t,r,e[0])};var Wx=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{if("function"==typeof e&&"function"!=typeof t){const r=t;t=e;const n=this;return function(e=r,...s){return n.produce(e,e=>t.call(this,e,...s))}}let n;if("function"!=typeof t&&sx(6),void 0!==r&&"function"!=typeof r&&sx(7),ix(e)){const s=Mx(this),o=Fx(e,void 0);let a=!0;try{n=t(o),a=!1}finally{a?Ex(s):Ax(s)}return Sx(s,r),Px(n,s)}if(!e||"object"!=typeof e){if(n=t(e),void 0===n&&(n=e),n===tx&&(n=void 0),this.autoFreeze_&&bx(n,!0),r){const t=[],s=[];kx("Patches").generateReplacementPatches_(e,n,t,s),r(t,s)}return n}sx(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...r)=>this.produceWithPatches(t,t=>e(t,...r));let r,n;return[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof e?.useStrictIteration&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ix(e)||sx(8),ax(e)&&(e=function(e){return ax(e)||sx(10),Ux(e)}(e));const t=Mx(this),r=Fx(e,void 0);return r[nx].isManual_=!0,Ax(t),r}finishDraft(e,t){const r=e&&e[nx];r&&r.isManual_||sx(9);const{scope_:n}=r;return Sx(n,t),Px(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));const n=kx("Patches").applyPatches_;return ax(e)?n(e,t):this.produce(e,e=>n(e,t))}};Wx.produce;var Hx={active:!1,index:null,dataKey:void 0,coordinate:void 0},Qx=ag({name:"tooltip",initialState:{itemInteraction:{click:Hx,hover:Hx},axisInteraction:{click:Hx,hover:Hx},keyboardInteraction:Hx,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Xh()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Ah(e).tooltipItemPayloads.indexOf(r);s>-1&&(e.tooltipItemPayloads[s]=n)},prepare:Xh()},removeTooltipEntrySettings:{reducer(e,t){var r=Ah(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Xh()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Vx,replaceTooltipEntrySettings:Yx,removeTooltipEntrySettings:Kx,setTooltipSettingsState:Gx,setActiveMouseOverItemIndex:Xx,mouseLeaveItem:Jx,mouseLeaveChart:Zx,setActiveClickItemIndex:ey,setMouseOverAxisIndex:ty,setMouseClickAxisIndex:ry,setSyncInteraction:ny,setKeyboardInteraction:sy}=Qx.actions,oy=Qx.reducer,ay=ag({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:iy,setDataStartEndIndexes:ly,setComputedData:cy}=ay.actions,dy=ay.reducer,uy=ag({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,o;e.margin.top=null!==(r=t.payload.top)&&void 0!==r?r:0,e.margin.right=null!==(n=t.payload.right)&&void 0!==n?n:0,e.margin.bottom=null!==(s=t.payload.bottom)&&void 0!==s?s:0,e.margin.left=null!==(o=t.payload.left)&&void 0!==o?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:py,setLayout:fy,setChartSize:my,setScale:hy}=uy.actions,gy=uy.reducer;var xy=e=>Array.isArray(e)?e:[e];Symbol(),Object.getPrototypeOf({});var yy="undefined"!=typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function by(){return{s:0,v:void 0,o:null,p:null}}function vy(e,t={}){let r={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:n}=t;let s,o=0;function a(){let t=r;const{length:a}=arguments;for(let e=0,r=a;e<r;e++){const r=arguments[e];if("function"==typeof r||"object"==typeof r&&null!==r){let e=t.o;null===e&&(t.o=e=new WeakMap);const n=e.get(r);void 0===n?(t=by(),e.set(r,t)):t=n}else{let e=t.p;null===e&&(t.p=e=new Map);const n=e.get(r);void 0===n?(t=by(),e.set(r,t)):t=n}}const i=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),o++,n){const e=s?.deref?.()??s;null!=e&&n(e,l)&&(l=e,0!==o&&o--),s="object"==typeof l&&null!==l||"function"==typeof l?new yy(l):l}return i.s=1,i.v=l,l}return a.clearCache=()=>{r={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>o,a.resetResultsCount=()=>{o=0},a}function jy(e,...t){const r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n=0,s=0,o={},a=e.pop();"object"==typeof a&&(o=a,a=e.pop()),function(e,t="expected a function, instead received "+typeof e){if("function"!=typeof e)throw new TypeError(t)}(a,`createSelector expects an output function after the inputs, but received: [${typeof a}]`);const i={...r,...o},{memoize:l,memoizeOptions:c=[],argsMemoize:d=vy,argsMemoizeOptions:u=[],devModeChecks:p={}}=i,f=xy(c),m=xy(u),h=function(e){const t=Array.isArray(e[0])?e[0]:e;return function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){const r=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${t}[${r}]`)}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}(e),g=l(function(){return n++,a.apply(null,arguments)},...f),x=d(function(){s++;const e=function(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}(h,arguments);return t=g.apply(null,e),t},...m);return Object.assign(x,{resultFunc:a,memoizedResultFunc:g,dependencies:h,dependencyRecomputations:()=>s,resetDependencyRecomputations:()=>{s=0},lastResult:()=>t,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:l,argsMemoize:d})};return Object.assign(n,{withTypes:()=>n}),n}var wy=jy(vy),Ny=Object.assign((e,t=wy)=>{!function(e,t="expected an object, instead received "+typeof e){if("object"!=typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);const r=Object.keys(e),n=t(r.map(t=>e[t]),(...e)=>e.reduce((e,t,n)=>(e[r[n]]=t,e),{}));return n},{withTypes:()=>Ny}),ky=a(9242),Cy=(0,r.createContext)(null),_y=e=>e,Sy=()=>{var e=(0,r.useContext)(Cy);return e?e.store.dispatch:_y},Ey=()=>{},Ay=()=>Ey,My=(e,t)=>e===t;function Ty(e){var t=(0,r.useContext)(Cy);return(0,ky.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:Ay,t?t.store.getState:Ey,t?t.store.getState:Ey,t?e:Ey,My)}var Py=a(184),Oy=a.n(Py),zy=e=>e.legend.settings;function qy(e,t){if((s=e.length)>1)for(var r,n,s,o=1,a=e[t[0]],i=a.length;o<s;++o)for(n=a,a=e[t[o]],r=0;r<i;++r)a[r][1]+=a[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function Dy(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Iy(e){return function(){return e}}function Ly(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Ry(e,t){return e[t]}function $y(e){const t=[];return t.key=e,t}function By(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Fy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Uy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fy(Object(r),!0).forEach(function(t){Wy(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fy(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Wy(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hy(e,t,r){return tm(e)||tm(t)?r:Yf(t)?Uf()(e,t,r):"function"==typeof t?t(e):r}wy([e=>e.legend.payload,zy],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Oy()(n,r):n}),Array.prototype.slice;var Qy=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,Vy=(e,t,r,n)=>{if(n)return e.map(e=>e.coordinate);var s,o,a=e.map(e=>(e.coordinate===t&&(s=!0),e.coordinate===r&&(o=!0),e.coordinate));return s||a.push(t),o||a.push(r),a},Yy=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:o,scale:a,realScaleType:i,isCategorical:l,categoricalDomain:c,tickCount:d,ticks:u,niceTicks:p,axisType:f}=e;if(!a)return null;var m="scaleBand"===i&&a.bandwidth?a.bandwidth()/2:2,h=(t||r)&&"category"===s&&a.bandwidth?a.bandwidth()/m:0;return h="angleAxis"===f&&o&&o.length>=2?2*Wf(o[0]-o[1])*h:h,t&&(u||p)?(u||p||[]).map((e,t)=>{var r=n?n.indexOf(e):e;return{coordinate:a(r)+h,value:e,offset:h,index:t}}).filter(e=>!Hf(e.coordinate)):l&&c?c.map((e,t)=>({coordinate:a(e)+h,value:e,index:t,offset:h})):a.ticks&&!r&&null!=d?a.ticks(d).map((e,t)=>({coordinate:a(e)+h,value:e,offset:h,index:t})):a.domain().map((e,t)=>({coordinate:a(e)+h,value:n?n[e]:e,index:t,offset:h}))},Ky=1e-4,Gy={sign:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,o=0,a=0;a<t;++a){var i=Hf(e[a][r][1])?e[a][r][0]:e[a][r][1];i>=0?(e[a][r][0]=s,e[a][r][1]=s+i,s=e[a][r][1]):(e[a][r][0]=o,e[a][r][1]=o+i,o=e[a][r][1])}},expand:function(e,t){if((n=e.length)>0){for(var r,n,s,o=0,a=e[0].length;o<a;++o){for(s=r=0;r<n;++r)s+=e[r][o][1]||0;if(s)for(r=0;r<n;++r)e[r][o][1]/=s}qy(e,t)}},none:qy,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,s=e[t[0]],o=s.length;n<o;++n){for(var a=0,i=0;a<r;++a)i+=e[a][n][1]||0;s[n][1]+=s[n][0]=-i/2}qy(e,t)}},wiggle:function(e,t){if((s=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,s,o=0,a=1;a<n;++a){for(var i=0,l=0,c=0;i<s;++i){for(var d=e[t[i]],u=d[a][1]||0,p=(u-(d[a-1][1]||0))/2,f=0;f<i;++f){var m=e[t[f]];p+=(m[a][1]||0)-(m[a-1][1]||0)}l+=u,c+=p*u}r[a-1][1]+=r[a-1][0]=o,l&&(o-=c/l)}r[a-1][1]+=r[a-1][0]=o,qy(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,o=0;o<t;++o){var a=Hf(e[o][r][1])?e[o][r][0]:e[o][r][1];a>=0?(e[o][r][0]=s,e[o][r][1]=s+a,s=e[o][r][1]):(e[o][r][0]=0,e[o][r][1]=0)}}},Xy=(e,t,r)=>{var n=Gy[r],s=function(){var e=Iy([]),t=Ly,r=qy,n=Ry;function s(s){var o,a,i=Array.from(e.apply(this,arguments),$y),l=i.length,c=-1;for(const e of s)for(o=0,++c;o<l;++o)(i[o][c]=[0,+n(e,i[o].key,c,s)]).data=e;for(o=0,a=Dy(t(i));o<l;++o)i[a[o]].index=o;return r(i,a),i}return s.keys=function(t){return arguments.length?(e="function"==typeof t?t:Iy(Array.from(t)),s):e},s.value=function(e){return arguments.length?(n="function"==typeof e?e:Iy(+e),s):n},s.order=function(e){return arguments.length?(t=null==e?Ly:"function"==typeof e?e:Iy(Array.from(e)),s):t},s.offset=function(e){return arguments.length?(r=null==e?qy:e,s):r},s}().keys(t).value((e,t)=>Number(Hy(e,t,0))).order(Ly).offset(n);return s(e)};function Jy(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:o,dataKey:a}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&!tm(s[t.dataKey])){var i=em(r,"value",s[t.dataKey]);if(i)return i.coordinate+n/2}return r[o]?r[o].coordinate+n/2:null}var l=Hy(s,tm(a)?t.dataKey:a);return tm(l)?null:t.scale(l)}var Zy=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,eb=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,tb=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=Oy()(t,e=>e.coordinate),o=1/0,a=1,i=s.length;a<i;a++){var l=s[a],c=s[a-1];o=Math.min((l.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return r?void 0:0};function rb(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:o}=e;return Uy(Uy({},t),{},{dataKey:r,payload:n,value:s,name:o})}function nb(e,t){return e?String(e):"string"==typeof t?t:void 0}var sb=e=>e.layout.width,ob=e=>e.layout.height,ab=e=>e.layout.scale,ib=e=>e.layout.margin,lb=wy(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),cb=wy(e=>e.cartesianAxis.yAxis,e=>Object.values(e));function db(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ub(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?db(Object(r),!0).forEach(function(t){pb(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):db(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function pb(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fb=wy([sb,ob,ib,e=>e.brush.height,function(e){return cb(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return cb(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return lb(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return lb(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},zy,e=>e.legend.size],(e,t,r,n,s,o,a,i,l,c)=>{var d={left:(r.left||0)+s,right:(r.right||0)+o},u=ub(ub({},{top:(r.top||0)+a,bottom:(r.bottom||0)+i}),d),p=u.bottom;u.bottom+=n,u=((e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:o,verticalAlign:a,layout:i}=t;if(("vertical"===i||"horizontal"===i&&"middle"===a)&&"center"!==o&&Vf(e[o]))return Uy(Uy({},e),{},{[o]:e[o]+(n||0)});if(("horizontal"===i||"vertical"===i&&"center"===o)&&"middle"!==a&&Vf(e[a]))return Uy(Uy({},e),{},{[a]:e[a]+(s||0)})}return e})(u,l,c);var f=e-u.left-u.right,m=t-u.top-u.bottom;return ub(ub({brushBottom:p},u),{},{width:Math.max(f,0),height:Math.max(m,0)})}),mb=wy(fb,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),hb=wy(sb,ob,(e,t)=>({x:0,y:0,width:e,height:t})),gb=(0,r.createContext)(null),xb=()=>null!=(0,r.useContext)(gb),yb=e=>e.brush,bb=wy([yb,fb,ib],(e,t,r)=>({height:e.height,x:Vf(e.x)?e.x:t.left,y:Vf(e.y)?e.y:t.top+t.height+t.brushBottom-((null==r?void 0:r.bottom)||0),width:Vf(e.width)?e.width:t.width}));function vb(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var jb=()=>{var e,t=xb(),r=Ty(mb),n=Ty(bb),s=null===(e=Ty(yb))||void 0===e?void 0:e.padding;return t&&n&&s?{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}:r},wb={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Nb=()=>{var e;return null!==(e=Ty(fb))&&void 0!==e?e:wb},kb=()=>Ty(sb),Cb=()=>Ty(ob),_b=e=>e.layout.layoutType,Sb=()=>Ty(_b),Eb=e=>{var t=Sy(),n=xb(),{width:s,height:o}=e,a=vm(),i=s,l=o;return a&&(i=a.width>0?a.width:s,l=a.height>0?a.height:o),(0,r.useEffect)(()=>{!n&&fm(i)&&fm(l)&&t(my({width:i,height:l}))},[t,n,i,l]),null},Ab=a(3412),Mb=a.n(Ab);function Tb(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Pb(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}class Ob extends Map{constructor(e,t=qb){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,r]of e)this.set(t,r)}get(e){return super.get(zb(this,e))}has(e){return super.has(zb(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}(this,e))}}function zb({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function qb(e){return null!==e&&"object"==typeof e?e.valueOf():e}Set;const Db=Symbol("implicit");function Ib(){var e=new Ob,t=[],r=[],n=Db;function s(s){let o=e.get(s);if(void 0===o){if(n!==Db)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return s.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Ob;for(const n of r)e.has(n)||e.set(n,t.push(n)-1);return s},s.range=function(e){return arguments.length?(r=Array.from(e),s):r.slice()},s.unknown=function(e){return arguments.length?(n=e,s):n},s.copy=function(){return Ib(t,r).unknown(n)},Tb.apply(s,arguments),s}function Lb(){var e,t,r=Ib().unknown(void 0),n=r.domain,s=r.range,o=0,a=1,i=!1,l=0,c=0,d=.5;function u(){var r=n().length,u=a<o,p=u?a:o,f=u?o:a;e=(f-p)/Math.max(1,r-l+2*c),i&&(e=Math.floor(e)),p+=(f-p-e*(r-l))*d,t=e*(1-l),i&&(p=Math.round(p),t=Math.round(t));var m=function(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=0|Math.max(0,Math.ceil((t-e)/r)),o=new Array(s);++n<s;)o[n]=e+n*r;return o}(r).map(function(t){return p+e*t});return s(u?m.reverse():m)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),u()):n()},r.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,u()):[o,a]},r.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,i=!0,u()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(i=!!e,u()):i},r.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},r.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},r.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},r.copy=function(){return Lb(n(),[o,a]).round(i).paddingInner(l).paddingOuter(c).align(d)},Tb.apply(u(),arguments)}function Rb(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Rb(t())},e}function $b(){return Rb(Lb.apply(null,arguments).paddingInner(1))}const Bb=Math.sqrt(50),Fb=Math.sqrt(10),Ub=Math.sqrt(2);function Wb(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),o=n/Math.pow(10,s),a=o>=Bb?10:o>=Fb?5:o>=Ub?2:1;let i,l,c;return s<0?(c=Math.pow(10,-s)/a,i=Math.round(e*c),l=Math.round(t*c),i/c<e&&++i,l/c>t&&--l,c=-c):(c=Math.pow(10,s)*a,i=Math.round(e/c),l=Math.round(t/c),i*c<e&&++i,l*c>t&&--l),l<i&&.5<=r&&r<2?Wb(e,t,2*r):[i,l,c]}function Hb(e,t,r){if(!((r=+r)>0))return[];if((e=+e)===(t=+t))return[e];const n=t<e,[s,o,a]=n?Wb(t,e,r):Wb(e,t,r);if(!(o>=s))return[];const i=o-s+1,l=new Array(i);if(n)if(a<0)for(let e=0;e<i;++e)l[e]=(o-e)/-a;else for(let e=0;e<i;++e)l[e]=(o-e)*a;else if(a<0)for(let e=0;e<i;++e)l[e]=(s+e)/-a;else for(let e=0;e<i;++e)l[e]=(s+e)*a;return l}function Qb(e,t,r){return Wb(e=+e,t=+t,r=+r)[2]}function Vb(e,t,r){r=+r;const n=(t=+t)<(e=+e),s=n?Qb(t,e,r):Qb(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Yb(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Kb(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Gb(e){let t,r,n;function s(e,n,s=0,o=e.length){if(s<o){if(0!==t(n,n))return o;do{const t=s+o>>>1;r(e[t],n)<0?s=t+1:o=t}while(s<o)}return s}return 2!==e.length?(t=Yb,r=(t,r)=>Yb(e(t),r),n=(t,r)=>e(t)-r):(t=e===Yb||e===Kb?e:Xb,r=e,n=e),{left:s,center:function(e,t,r=0,o=e.length){const a=s(e,t,r,o-1);return a>r&&n(e[a-1],t)>-n(e[a],t)?a-1:a},right:function(e,n,s=0,o=e.length){if(s<o){if(0!==t(n,n))return o;do{const t=s+o>>>1;r(e[t],n)<=0?s=t+1:o=t}while(s<o)}return s}}}function Xb(){return 0}function Jb(e){return null===e?NaN:+e}const Zb=Gb(Yb),ev=Zb.right,tv=(Zb.left,Gb(Jb).center,ev);function rv(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function nv(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function sv(){}var ov=.7,av=1/ov,iv="\\s*([+-]?\\d+)\\s*",lv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",cv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dv=/^#([0-9a-f]{3,8})$/,uv=new RegExp(`^rgb\\(${iv},${iv},${iv}\\)$`),pv=new RegExp(`^rgb\\(${cv},${cv},${cv}\\)$`),fv=new RegExp(`^rgba\\(${iv},${iv},${iv},${lv}\\)$`),mv=new RegExp(`^rgba\\(${cv},${cv},${cv},${lv}\\)$`),hv=new RegExp(`^hsl\\(${lv},${cv},${cv}\\)$`),gv=new RegExp(`^hsla\\(${lv},${cv},${cv},${lv}\\)$`),xv={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function yv(){return this.rgb().formatHex()}function bv(){return this.rgb().formatRgb()}function vv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=dv.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?jv(t):3===r?new kv(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?wv(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?wv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=uv.exec(e))?new kv(t[1],t[2],t[3],1):(t=pv.exec(e))?new kv(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=fv.exec(e))?wv(t[1],t[2],t[3],t[4]):(t=mv.exec(e))?wv(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=hv.exec(e))?Mv(t[1],t[2]/100,t[3]/100,1):(t=gv.exec(e))?Mv(t[1],t[2]/100,t[3]/100,t[4]):xv.hasOwnProperty(e)?jv(xv[e]):"transparent"===e?new kv(NaN,NaN,NaN,0):null}function jv(e){return new kv(e>>16&255,e>>8&255,255&e,1)}function wv(e,t,r,n){return n<=0&&(e=t=r=NaN),new kv(e,t,r,n)}function Nv(e,t,r,n){return 1===arguments.length?((s=e)instanceof sv||(s=vv(s)),s?new kv((s=s.rgb()).r,s.g,s.b,s.opacity):new kv):new kv(e,t,r,null==n?1:n);var s}function kv(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function Cv(){return`#${Av(this.r)}${Av(this.g)}${Av(this.b)}`}function _v(){const e=Sv(this.opacity);return`${1===e?"rgb(":"rgba("}${Ev(this.r)}, ${Ev(this.g)}, ${Ev(this.b)}${1===e?")":`, ${e})`}`}function Sv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ev(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Av(e){return((e=Ev(e))<16?"0":"")+e.toString(16)}function Mv(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Pv(e,t,r,n)}function Tv(e){if(e instanceof Pv)return new Pv(e.h,e.s,e.l,e.opacity);if(e instanceof sv||(e=vv(e)),!e)return new Pv;if(e instanceof Pv)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),o=Math.max(t,r,n),a=NaN,i=o-s,l=(o+s)/2;return i?(a=t===o?(r-n)/i+6*(r<n):r===o?(n-t)/i+2:(t-r)/i+4,i/=l<.5?o+s:2-o-s,a*=60):i=l>0&&l<1?0:a,new Pv(a,i,l,e.opacity)}function Pv(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function Ov(e){return(e=(e||0)%360)<0?e+360:e}function zv(e){return Math.max(0,Math.min(1,e||0))}function qv(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function Dv(e,t,r,n,s){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*r+(1+3*e+3*o-3*a)*n+a*s)/6}rv(sv,vv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:yv,formatHex:yv,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Tv(this).formatHsl()},formatRgb:bv,toString:bv}),rv(kv,Nv,nv(sv,{brighter(e){return e=null==e?av:Math.pow(av,e),new kv(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?ov:Math.pow(ov,e),new kv(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kv(Ev(this.r),Ev(this.g),Ev(this.b),Sv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cv,formatHex:Cv,formatHex8:function(){return`#${Av(this.r)}${Av(this.g)}${Av(this.b)}${Av(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:_v,toString:_v})),rv(Pv,function(e,t,r,n){return 1===arguments.length?Tv(e):new Pv(e,t,r,null==n?1:n)},nv(sv,{brighter(e){return e=null==e?av:Math.pow(av,e),new Pv(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?ov:Math.pow(ov,e),new Pv(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new kv(qv(e>=240?e-240:e+120,s,n),qv(e,s,n),qv(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Pv(Ov(this.h),zv(this.s),zv(this.l),Sv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Sv(this.opacity);return`${1===e?"hsl(":"hsla("}${Ov(this.h)}, ${100*zv(this.s)}%, ${100*zv(this.l)}%${1===e?")":`, ${e})`}`}}));const Iv=e=>()=>e;function Lv(e,t){var r=t-e;return r?function(e,t){return function(r){return e+r*t}}(e,r):Iv(isNaN(e)?t:e)}const Rv=function e(t){var r=function(e){return 1===(e=+e)?Lv:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}(t,r,e):Iv(isNaN(t)?r:t)}}(t);function n(e,t){var n=r((e=Nv(e)).r,(t=Nv(t)).r),s=r(e.g,t.g),o=r(e.b,t.b),a=Lv(e.opacity,t.opacity);return function(t){return e.r=n(t),e.g=s(t),e.b=o(t),e.opacity=a(t),e+""}}return n.gamma=e,n}(1);function $v(e){return function(t){var r,n,s=t.length,o=new Array(s),a=new Array(s),i=new Array(s);for(r=0;r<s;++r)n=Nv(t[r]),o[r]=n.r||0,a[r]=n.g||0,i[r]=n.b||0;return o=e(o),a=e(a),i=e(i),n.opacity=1,function(e){return n.r=o(e),n.g=a(e),n.b=i(e),n+""}}}function Bv(e,t){var r,n=t?t.length:0,s=e?Math.min(n,e.length):0,o=new Array(s),a=new Array(n);for(r=0;r<s;++r)o[r]=Kv(e[r],t[r]);for(;r<n;++r)a[r]=t[r];return function(e){for(r=0;r<s;++r)a[r]=o[r](e);return a}}function Fv(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Uv(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Wv(e,t){var r,n={},s={};for(r in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)r in e?n[r]=Kv(e[r],t[r]):s[r]=t[r];return function(e){for(r in n)s[r]=n[r](e);return s}}$v(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),s=e[n],o=e[n+1],a=n>0?e[n-1]:2*s-o,i=n<t-1?e[n+2]:2*o-s;return Dv((r-n/t)*t,a,s,o,i)}}),$v(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),s=e[(n+t-1)%t],o=e[n%t],a=e[(n+1)%t],i=e[(n+2)%t];return Dv((r-n/t)*t,s,o,a,i)}});var Hv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qv=new RegExp(Hv.source,"g");function Vv(e,t){var r,n,s,o=Hv.lastIndex=Qv.lastIndex=0,a=-1,i=[],l=[];for(e+="",t+="";(r=Hv.exec(e))&&(n=Qv.exec(t));)(s=n.index)>o&&(s=t.slice(o,s),i[a]?i[a]+=s:i[++a]=s),(r=r[0])===(n=n[0])?i[a]?i[a]+=n:i[++a]=n:(i[++a]=null,l.push({i:a,x:Uv(r,n)})),o=Qv.lastIndex;return o<t.length&&(s=t.slice(o),i[a]?i[a]+=s:i[++a]=s),i.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var r,n=0;n<t;++n)i[(r=l[n]).i]=r.x(e);return i.join("")})}function Yv(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,s=t.slice();return function(o){for(r=0;r<n;++r)s[r]=e[r]*(1-o)+t[r]*o;return s}}function Kv(e,t){var r,n=typeof t;return null==t||"boolean"===n?Iv(t):("number"===n?Uv:"string"===n?(r=vv(t))?(t=r,Rv):Vv:t instanceof vv?Rv:t instanceof Date?Fv:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?Yv:Array.isArray(t)?Bv:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Wv:Uv)(e,t)}function Gv(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Xv(e){return+e}var Jv=[0,1];function Zv(e){return e}function ej(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function tj(e,t,r){var n=e[0],s=e[1],o=t[0],a=t[1];return s<n?(n=ej(s,n),o=r(a,o)):(n=ej(n,s),o=r(o,a)),function(e){return o(n(e))}}function rj(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),o=new Array(n),a=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<n;)s[a]=ej(e[a],e[a+1]),o[a]=r(t[a],t[a+1]);return function(t){var r=tv(e,t,1,n)-1;return o[r](s[r](t))}}function nj(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function sj(){var e,t,r,n,s,o,a=Jv,i=Jv,l=Kv,c=Zv;function d(){var e=Math.min(a.length,i.length);return c!==Zv&&(c=function(e,t){var r;return e>t&&(r=e,e=t,t=r),function(r){return Math.max(e,Math.min(t,r))}}(a[0],a[e-1])),n=e>2?rj:tj,s=o=null,u}function u(t){return null==t||isNaN(t=+t)?r:(s||(s=n(a.map(e),i,l)))(e(c(t)))}return u.invert=function(r){return c(t((o||(o=n(i,a.map(e),Uv)))(r)))},u.domain=function(e){return arguments.length?(a=Array.from(e,Xv),d()):a.slice()},u.range=function(e){return arguments.length?(i=Array.from(e),d()):i.slice()},u.rangeRound=function(e){return i=Array.from(e),l=Gv,d()},u.clamp=function(e){return arguments.length?(c=!!e||Zv,d()):c!==Zv},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(r=e,u):r},function(r,n){return e=r,t=n,d()}}function oj(){return sj()(Zv,Zv)}var aj,ij=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lj(e){if(!(t=ij.exec(e)))throw new Error("invalid format: "+e);var t;return new cj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function cj(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function dj(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function uj(e){return(e=dj(Math.abs(e)))?e[1]:NaN}function pj(e,t){var r=dj(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}lj.prototype=cj.prototype,cj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const fj={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>pj(100*e,t),r:pj,s:function(e,t){var r=dj(e,t);if(!r)return e+"";var n=r[0],s=r[1],o=s-(aj=3*Math.max(-8,Math.min(8,Math.floor(s/3))))+1,a=n.length;return o===a?n:o>a?n+new Array(o-a+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+dj(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function mj(e){return e}var hj,gj,xj,yj=Array.prototype.map,bj=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function vj(e,t,r,n){var s,o=Vb(e,t,r);switch((n=lj(null==n?",f":n)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(s=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(uj(t)/3)))-uj(Math.abs(e)))}(o,a))||(n.precision=s),xj(n,a);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(s=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,uj(t)-uj(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(n.precision=s-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(s=function(e){return Math.max(0,-uj(Math.abs(e)))}(o))||(n.precision=s-2*("%"===n.type))}return gj(n)}function jj(e){var t=e.domain;return e.ticks=function(e){var r=t();return Hb(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return vj(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,s,o=t(),a=0,i=o.length-1,l=o[a],c=o[i],d=10;for(c<l&&(s=l,l=c,c=s,s=a,a=i,i=s);d-- >0;){if((s=Qb(l,c,r))===n)return o[a]=l,o[i]=c,t(o);if(s>0)l=Math.floor(l/s)*s,c=Math.ceil(c/s)*s;else{if(!(s<0))break;l=Math.ceil(l*s)/s,c=Math.floor(c*s)/s}n=s}return e},e}function wj(){var e=oj();return e.copy=function(){return nj(e,wj())},Tb.apply(e,arguments),jj(e)}function Nj(e){var t;function r(e){return null==e||isNaN(e=+e)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,Xv),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return Nj(e).unknown(t)},e=arguments.length?Array.from(e,Xv):[0,1],jj(r)}function kj(e,t){var r,n=0,s=(e=e.slice()).length-1,o=e[n],a=e[s];return a<o&&(r=n,n=s,s=r,r=o,o=a,a=r),e[n]=t.floor(o),e[s]=t.ceil(a),e}function Cj(e){return Math.log(e)}function _j(e){return Math.exp(e)}function Sj(e){return-Math.log(-e)}function Ej(e){return-Math.exp(-e)}function Aj(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Mj(e){return(t,r)=>-e(-t,r)}function Tj(e){const t=e(Cj,_j),r=t.domain;let n,s,o=10;function a(){return n=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),s=function(e){return 10===e?Aj:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),r()[0]<0?(n=Mj(n),s=Mj(s),e(Sj,Ej)):e(Cj,_j),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(r(e),a()):r()},t.ticks=e=>{const t=r();let a=t[0],i=t[t.length-1];const l=i<a;l&&([a,i]=[i,a]);let c,d,u=n(a),p=n(i);const f=null==e?10:+e;let m=[];if(!(o%1)&&p-u<f){if(u=Math.floor(u),p=Math.ceil(p),a>0){for(;u<=p;++u)for(c=1;c<o;++c)if(d=u<0?c/s(-u):c*s(u),!(d<a)){if(d>i)break;m.push(d)}}else for(;u<=p;++u)for(c=o-1;c>=1;--c)if(d=u>0?c/s(-u):c*s(u),!(d<a)){if(d>i)break;m.push(d)}2*m.length<f&&(m=Hb(a,i,f))}else m=Hb(u,p,Math.min(p-u,f)).map(s);return l?m.reverse():m},t.tickFormat=(e,r)=>{if(null==e&&(e=10),null==r&&(r=10===o?"s":","),"function"!=typeof r&&(o%1||null!=(r=lj(r)).precision||(r.trim=!0),r=gj(r)),e===1/0)return r;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/s(Math.round(n(e)));return t*o<o-.5&&(t*=o),t<=a?r(e):""}},t.nice=()=>r(kj(r(),{floor:e=>s(Math.floor(n(e))),ceil:e=>s(Math.ceil(n(e)))})),t}function Pj(){const e=Tj(sj()).domain([1,10]);return e.copy=()=>nj(e,Pj()).base(e.base()),Tb.apply(e,arguments),e}function Oj(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function qj(e){var t=1,r=e(Oj(t),zj(t));return r.constant=function(r){return arguments.length?e(Oj(t=+r),zj(t)):t},jj(r)}function Dj(){var e=qj(sj());return e.copy=function(){return nj(e,Dj()).constant(e.constant())},Tb.apply(e,arguments)}function Ij(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Lj(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Rj(e){return e<0?-e*e:e*e}function $j(e){var t=e(Zv,Zv),r=1;return t.exponent=function(t){return arguments.length?1===(r=+t)?e(Zv,Zv):.5===r?e(Lj,Rj):e(Ij(r),Ij(1/r)):r},jj(t)}function Bj(){var e=$j(sj());return e.copy=function(){return nj(e,Bj()).exponent(e.exponent())},Tb.apply(e,arguments),e}function Fj(){return Bj.apply(null,arguments).exponent(.5)}function Uj(e){return Math.sign(e)*e*e}function Wj(){var e,t=oj(),r=[0,1],n=!1;function s(r){var s=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(r));return isNaN(s)?e:n?Math.round(s):s}return s.invert=function(e){return t.invert(Uj(e))},s.domain=function(e){return arguments.length?(t.domain(e),s):t.domain()},s.range=function(e){return arguments.length?(t.range((r=Array.from(e,Xv)).map(Uj)),s):r.slice()},s.rangeRound=function(e){return s.range(e).round(!0)},s.round=function(e){return arguments.length?(n=!!e,s):n},s.clamp=function(e){return arguments.length?(t.clamp(e),s):t.clamp()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return Wj(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},Tb.apply(s,arguments),jj(s)}function Hj(e,t){let r;if(void 0===t)for(const t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let s of e)null!=(s=t(s,++n,e))&&(r<s||void 0===r&&s>=s)&&(r=s)}return r}function Qj(e,t){let r;if(void 0===t)for(const t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let s of e)null!=(s=t(s,++n,e))&&(r>s||void 0===r&&s>=s)&&(r=s)}return r}function Vj(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function Yj(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=void 0===s?Vj:function(e=Yb){if(e===Yb)return Vj;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(s);n>r;){if(n-r>600){const o=n-r+1,a=t-r+1,i=Math.log(o),l=.5*Math.exp(2*i/3),c=.5*Math.sqrt(i*l*(o-l)/o)*(a-o/2<0?-1:1);Yj(e,t,Math.max(r,Math.floor(t-a*l/o+c)),Math.min(n,Math.floor(t+(o-a)*l/o+c)),s)}const o=e[t];let a=r,i=n;for(Kj(e,r,t),s(e[n],o)>0&&Kj(e,r,n);a<i;){for(Kj(e,a,i),++a,--i;s(e[a],o)<0;)++a;for(;s(e[i],o)>0;)--i}0===s(e[r],o)?Kj(e,r,i):(++i,Kj(e,i,n)),i<=t&&(r=i+1),t<=i&&(n=i-1)}return e}function Kj(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Gj(e,t,r=Jb){if((n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,o=Math.floor(s),a=+r(e[o],o,e);return a+(+r(e[o+1],o+1,e)-a)*(s-o)}}function Xj(){var e,t=[],r=[],n=[];function s(){var e=0,s=Math.max(1,r.length);for(n=new Array(s-1);++e<s;)n[e-1]=Gj(t,e/s);return o}function o(t){return null==t||isNaN(t=+t)?e:r[tv(n,t)]}return o.invertExtent=function(e){var s=r.indexOf(e);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let r of e)null==r||isNaN(r=+r)||t.push(r);return t.sort(Yb),s()},o.range=function(e){return arguments.length?(r=Array.from(e),s()):r.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return n.slice()},o.copy=function(){return Xj().domain(t).range(r).unknown(e)},Tb.apply(o,arguments)}function Jj(){var e,t=0,r=1,n=1,s=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[tv(s,t,0,n)]:e}function i(){var e=-1;for(s=new Array(n);++e<n;)s[e]=((e+1)*r-(e-n)*t)/(n+1);return a}return a.domain=function(e){return arguments.length?([t,r]=e,t=+t,r=+r,i()):[t,r]},a.range=function(e){return arguments.length?(n=(o=Array.from(e)).length-1,i()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,s[0]]:a>=n?[s[n-1],r]:[s[a-1],s[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return s.slice()},a.copy=function(){return Jj().domain([t,r]).range(o).unknown(e)},Tb.apply(jj(a),arguments)}function Zj(){var e,t=[.5],r=[0,1],n=1;function s(s){return null!=s&&s<=s?r[tv(t,s,0,n)]:e}return s.domain=function(e){return arguments.length?(t=Array.from(e),n=Math.min(t.length,r.length-1),s):t.slice()},s.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),s):r.slice()},s.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return Zj().domain(t).range(r).unknown(e)},Tb.apply(s,arguments)}hj=function(e){var t,r,n=void 0===e.grouping||void 0===e.thousands?mj:(t=yj.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var s=e.length,o=[],a=0,i=t[0],l=0;s>0&&i>0&&(l+i+1>n&&(i=Math.max(1,n-l)),o.push(e.substring(s-=i,s+i)),!((l+=i+1)>n));)i=t[a=(a+1)%t.length];return o.reverse().join(r)}),s=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",i=void 0===e.numerals?mj:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(yj.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"âˆ’":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=lj(e)).fill,r=e.align,u=e.sign,p=e.symbol,f=e.zero,m=e.width,h=e.comma,g=e.precision,x=e.trim,y=e.type;"n"===y?(h=!0,y="g"):fj[y]||(void 0===g&&(g=12),x=!0,y="g"),(f||"0"===t&&"="===r)&&(f=!0,t="0",r="=");var b="$"===p?s:"#"===p&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===p?o:/[%p]/.test(y)?l:"",j=fj[y],w=/[defgprs%]/.test(y);function N(e){var s,o,l,p=b,N=v;if("c"===y)N=j(e)+N,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:j(Math.abs(e),g),x&&(e=function(e){e:for(var t,r=e.length,n=1,s=-1;n<r;++n)switch(e[n]){case".":s=t=n;break;case"0":0===s&&(s=n),t=n;break;default:if(!+e[n])break e;s>0&&(s=0)}return s>0?e.slice(0,s)+e.slice(t+1):e}(e)),k&&0===+e&&"+"!==u&&(k=!1),p=(k?"("===u?u:c:"-"===u||"("===u?"":u)+p,N=("s"===y?bj[8+aj/3]:"")+N+(k&&"("===u?")":""),w)for(s=-1,o=e.length;++s<o;)if(48>(l=e.charCodeAt(s))||l>57){N=(46===l?a+e.slice(s+1):e.slice(s))+N,e=e.slice(0,s);break}}h&&!f&&(e=n(e,1/0));var C=p.length+e.length+N.length,_=C<m?new Array(m-C+1).join(t):"";switch(h&&f&&(e=n(_+e,_.length?m-N.length:1/0),_=""),r){case"<":e=p+e+N+_;break;case"=":e=p+_+e+N;break;case"^":e=_.slice(0,C=_.length>>1)+p+e+N+_.slice(C);break;default:e=_+p+e+N}return i(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var r=u(((e=lj(e)).type="f",e)),n=3*Math.max(-8,Math.min(8,Math.floor(uj(t)/3))),s=Math.pow(10,-n),o=bj[8+n/3];return function(e){return r(s*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),gj=hj.format,xj=hj.formatPrefix;const ew=1e3,tw=6e4,rw=36e5,nw=864e5,sw=6048e5,ow=31536e6,aw=new Date,iw=new Date;function lw(e,t,r,n){function s(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return s.floor=t=>(e(t=new Date(+t)),t),s.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),s.round=e=>{const t=s(e),r=s.ceil(e);return e-t<r-e?t:r},s.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),s.range=(r,n,o)=>{const a=[];if(r=s.ceil(r),o=null==o?1:Math.floor(o),!(r<n&&o>0))return a;let i;do{a.push(i=new Date(+r)),t(r,o),e(r)}while(i<r&&r<n);return a},s.filter=r=>lw(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(s.count=(t,n)=>(aw.setTime(+t),iw.setTime(+n),e(aw),e(iw),Math.floor(r(aw,iw))),s.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?s.filter(n?t=>n(t)%e===0:t=>s.count(0,t)%e===0):s:null)),s}const cw=lw(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);cw.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?lw(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):cw:null),cw.range;const dw=lw(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ew)},(e,t)=>(t-e)/ew,e=>e.getUTCSeconds()),uw=(dw.range,lw(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ew)},(e,t)=>{e.setTime(+e+t*tw)},(e,t)=>(t-e)/tw,e=>e.getMinutes())),pw=(uw.range,lw(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*tw)},(e,t)=>(t-e)/tw,e=>e.getUTCMinutes())),fw=(pw.range,lw(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ew-e.getMinutes()*tw)},(e,t)=>{e.setTime(+e+t*rw)},(e,t)=>(t-e)/rw,e=>e.getHours())),mw=(fw.range,lw(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*rw)},(e,t)=>(t-e)/rw,e=>e.getUTCHours())),hw=(mw.range,lw(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*tw)/nw,e=>e.getDate()-1)),gw=(hw.range,lw(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nw,e=>e.getUTCDate()-1)),xw=(gw.range,lw(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/nw,e=>Math.floor(e/nw)));function yw(e){return lw(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*tw)/sw)}xw.range;const bw=yw(0),vw=yw(1),jw=yw(2),ww=yw(3),Nw=yw(4),kw=yw(5),Cw=yw(6);function _w(e){return lw(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/sw)}bw.range,vw.range,jw.range,ww.range,Nw.range,kw.range,Cw.range;const Sw=_w(0),Ew=_w(1),Aw=_w(2),Mw=_w(3),Tw=_w(4),Pw=_w(5),Ow=_w(6),zw=(Sw.range,Ew.range,Aw.range,Mw.range,Tw.range,Pw.range,Ow.range,lw(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),qw=(zw.range,lw(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),Dw=(qw.range,lw(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));Dw.every=e=>isFinite(e=Math.floor(e))&&e>0?lw(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,Dw.range;const Iw=lw(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function Lw(e,t,r,n,s,o){const a=[[dw,1,ew],[dw,5,5e3],[dw,15,15e3],[dw,30,3e4],[o,1,tw],[o,5,3e5],[o,15,9e5],[o,30,18e5],[s,1,rw],[s,3,108e5],[s,6,216e5],[s,12,432e5],[n,1,nw],[n,2,1728e5],[r,1,sw],[t,1,2592e6],[t,3,7776e6],[e,1,ow]];function i(t,r,n){const s=Math.abs(r-t)/n,o=Gb(([,,e])=>e).right(a,s);if(o===a.length)return e.every(Vb(t/ow,r/ow,n));if(0===o)return cw.every(Math.max(Vb(t,r,n),1));const[i,l]=a[s/a[o-1][2]<a[o][2]/s?o-1:o];return i.every(l)}return[function(e,t,r){const n=t<e;n&&([e,t]=[t,e]);const s=r&&"function"==typeof r.range?r:i(e,t,r),o=s?s.range(e,+t+1):[];return n?o.reverse():o},i]}Iw.every=e=>isFinite(e=Math.floor(e))&&e>0?lw(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,Iw.range;const[Rw,$w]=Lw(Iw,qw,Sw,xw,mw,pw),[Bw,Fw]=Lw(Dw,zw,bw,hw,fw,uw);function Uw(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ww(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Hw(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var Qw,Vw,Yw,Kw={"-":"",_:" ",0:"0"},Gw=/^\s*\d+/,Xw=/^%/,Jw=/[\\^$*+?|[\]().{}]/g;function Zw(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",o=s.length;return n+(o<r?new Array(r-o+1).join(t)+s:s)}function eN(e){return e.replace(Jw,"\\$&")}function tN(e){return new RegExp("^(?:"+e.map(eN).join("|")+")","i")}function rN(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function nN(e,t,r){var n=Gw.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function sN(e,t,r){var n=Gw.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function oN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function aN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function iN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function lN(e,t,r){var n=Gw.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function cN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function dN(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function uN(e,t,r){var n=Gw.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function pN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function fN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function mN(e,t,r){var n=Gw.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function hN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function gN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function xN(e,t,r){var n=Gw.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function yN(e,t,r){var n=Gw.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function bN(e,t,r){var n=Gw.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vN(e,t,r){var n=Xw.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function jN(e,t,r){var n=Gw.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function wN(e,t,r){var n=Gw.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function NN(e,t){return Zw(e.getDate(),t,2)}function kN(e,t){return Zw(e.getHours(),t,2)}function CN(e,t){return Zw(e.getHours()%12||12,t,2)}function _N(e,t){return Zw(1+hw.count(Dw(e),e),t,3)}function SN(e,t){return Zw(e.getMilliseconds(),t,3)}function EN(e,t){return SN(e,t)+"000"}function AN(e,t){return Zw(e.getMonth()+1,t,2)}function MN(e,t){return Zw(e.getMinutes(),t,2)}function TN(e,t){return Zw(e.getSeconds(),t,2)}function PN(e){var t=e.getDay();return 0===t?7:t}function ON(e,t){return Zw(bw.count(Dw(e)-1,e),t,2)}function zN(e){var t=e.getDay();return t>=4||0===t?Nw(e):Nw.ceil(e)}function qN(e,t){return e=zN(e),Zw(Nw.count(Dw(e),e)+(4===Dw(e).getDay()),t,2)}function DN(e){return e.getDay()}function IN(e,t){return Zw(vw.count(Dw(e)-1,e),t,2)}function LN(e,t){return Zw(e.getFullYear()%100,t,2)}function RN(e,t){return Zw((e=zN(e)).getFullYear()%100,t,2)}function $N(e,t){return Zw(e.getFullYear()%1e4,t,4)}function BN(e,t){var r=e.getDay();return Zw((e=r>=4||0===r?Nw(e):Nw.ceil(e)).getFullYear()%1e4,t,4)}function FN(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zw(t/60|0,"0",2)+Zw(t%60,"0",2)}function UN(e,t){return Zw(e.getUTCDate(),t,2)}function WN(e,t){return Zw(e.getUTCHours(),t,2)}function HN(e,t){return Zw(e.getUTCHours()%12||12,t,2)}function QN(e,t){return Zw(1+gw.count(Iw(e),e),t,3)}function VN(e,t){return Zw(e.getUTCMilliseconds(),t,3)}function YN(e,t){return VN(e,t)+"000"}function KN(e,t){return Zw(e.getUTCMonth()+1,t,2)}function GN(e,t){return Zw(e.getUTCMinutes(),t,2)}function XN(e,t){return Zw(e.getUTCSeconds(),t,2)}function JN(e){var t=e.getUTCDay();return 0===t?7:t}function ZN(e,t){return Zw(Sw.count(Iw(e)-1,e),t,2)}function ek(e){var t=e.getUTCDay();return t>=4||0===t?Tw(e):Tw.ceil(e)}function tk(e,t){return e=ek(e),Zw(Tw.count(Iw(e),e)+(4===Iw(e).getUTCDay()),t,2)}function rk(e){return e.getUTCDay()}function nk(e,t){return Zw(Ew.count(Iw(e)-1,e),t,2)}function sk(e,t){return Zw(e.getUTCFullYear()%100,t,2)}function ok(e,t){return Zw((e=ek(e)).getUTCFullYear()%100,t,2)}function ak(e,t){return Zw(e.getUTCFullYear()%1e4,t,4)}function ik(e,t){var r=e.getUTCDay();return Zw((e=r>=4||0===r?Tw(e):Tw.ceil(e)).getUTCFullYear()%1e4,t,4)}function lk(){return"+0000"}function ck(){return"%"}function dk(e){return+e}function uk(e){return Math.floor(+e/1e3)}function pk(e){return new Date(e)}function fk(e){return e instanceof Date?+e:+new Date(+e)}function mk(e,t,r,n,s,o,a,i,l,c){var d=oj(),u=d.invert,p=d.domain,f=c(".%L"),m=c(":%S"),h=c("%I:%M"),g=c("%I %p"),x=c("%a %d"),y=c("%b %d"),b=c("%B"),v=c("%Y");function j(e){return(l(e)<e?f:i(e)<e?m:a(e)<e?h:o(e)<e?g:n(e)<e?s(e)<e?x:y:r(e)<e?b:v)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?p(Array.from(e,fk)):p().map(pk)},d.ticks=function(t){var r=p();return e(r[0],r[r.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?j:c(t)},d.nice=function(e){var r=p();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?p(kj(r,e)):d},d.copy=function(){return nj(d,mk(e,t,r,n,s,o,a,i,l,c))},d}function hk(){return Tb.apply(mk(Bw,Fw,Dw,zw,bw,hw,fw,uw,dw,Vw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gk(){return Tb.apply(mk(Rw,$w,Iw,qw,Sw,gw,mw,pw,dw,Yw).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function xk(){var e,t,r,n,s,o=0,a=1,i=Zv,l=!1;function c(t){return null==t||isNaN(t=+t)?s:i(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var r,n;return arguments.length?([r,n]=t,i=e(r,n),c):[i(0),i(1)]}}return c.domain=function(s){return arguments.length?([o,a]=s,e=n(o=+o),t=n(a=+a),r=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(i=e,c):i},c.range=d(Kv),c.rangeRound=d(Gv),c.unknown=function(e){return arguments.length?(s=e,c):s},function(s){return n=s,e=s(o),t=s(a),r=e===t?0:1/(t-e),c}}function yk(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function bk(){var e=jj(xk()(Zv));return e.copy=function(){return yk(e,bk())},Pb.apply(e,arguments)}function vk(){var e=Tj(xk()).domain([1,10]);return e.copy=function(){return yk(e,vk()).base(e.base())},Pb.apply(e,arguments)}function jk(){var e=qj(xk());return e.copy=function(){return yk(e,jk()).constant(e.constant())},Pb.apply(e,arguments)}function wk(){var e=$j(xk());return e.copy=function(){return yk(e,wk()).exponent(e.exponent())},Pb.apply(e,arguments)}function Nk(){return wk.apply(null,arguments).exponent(.5)}function kk(){var e=[],t=Zv;function r(r){if(null!=r&&!isNaN(r=+r))return t((tv(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let r of t)null==r||isNaN(r=+r)||e.push(r);return e.sort(Yb),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>function(e,t,r){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n=+n)>=n&&(yield n)}}(e,r)),(n=e.length)&&!isNaN(t=+t)){if(t<=0||n<2)return Qj(e);if(t>=1)return Hj(e);var n,s=(n-1)*t,o=Math.floor(s),a=Hj(Yj(e,o).subarray(0,o+1));return a+(Qj(e.subarray(o+1))-a)*(s-o)}}(e,n/t))},r.copy=function(){return kk(t).domain(e)},Pb.apply(r,arguments)}function Ck(){var e,t,r,n,s,o,a,i=0,l=.5,c=1,d=1,u=Zv,p=!1;function f(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(d*e<d*t?n:s),u(p?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var r,n,s;return arguments.length?([r,n,s]=t,u=function(e,t){void 0===t&&(t=e,e=Kv);for(var r=0,n=t.length-1,s=t[0],o=new Array(n<0?0:n);r<n;)o[r]=e(s,s=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return o[t](e-t)}}(e,[r,n,s]),f):[u(0),u(.5),u(1)]}}return f.domain=function(a){return arguments.length?([i,l,c]=a,e=o(i=+i),t=o(l=+l),r=o(c=+c),n=e===t?0:.5/(t-e),s=t===r?0:.5/(r-t),d=t<e?-1:1,f):[i,l,c]},f.clamp=function(e){return arguments.length?(p=!!e,f):p},f.interpolator=function(e){return arguments.length?(u=e,f):u},f.range=m(Kv),f.rangeRound=m(Gv),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return o=a,e=a(i),t=a(l),r=a(c),n=e===t?0:.5/(t-e),s=t===r?0:.5/(r-t),d=t<e?-1:1,f}}function _k(){var e=jj(Ck()(Zv));return e.copy=function(){return yk(e,_k())},Pb.apply(e,arguments)}function Sk(){var e=Tj(Ck()).domain([.1,1,10]);return e.copy=function(){return yk(e,Sk()).base(e.base())},Pb.apply(e,arguments)}function Ek(){var e=qj(Ck());return e.copy=function(){return yk(e,Ek()).constant(e.constant())},Pb.apply(e,arguments)}function Ak(){var e=$j(Ck());return e.copy=function(){return yk(e,Ak()).exponent(e.exponent())},Pb.apply(e,arguments)}function Mk(){return Ak.apply(null,arguments).exponent(.5)}Qw=function(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,o=e.days,a=e.shortDays,i=e.months,l=e.shortMonths,c=tN(s),d=rN(s),u=tN(o),p=rN(o),f=tN(a),m=rN(a),h=tN(i),g=rN(i),x=tN(l),y=rN(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return i[e.getMonth()]},c:null,d:NN,e:NN,f:EN,g:RN,G:BN,H:kN,I:CN,j:_N,L:SN,m:AN,M:MN,p:function(e){return s[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:dk,s:uk,S:TN,u:PN,U:ON,V:qN,w:DN,W:IN,x:null,X:null,y:LN,Y:$N,Z:FN,"%":ck},v={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return i[e.getUTCMonth()]},c:null,d:UN,e:UN,f:YN,g:ok,G:ik,H:WN,I:HN,j:QN,L:VN,m:KN,M:GN,p:function(e){return s[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:dk,s:uk,S:XN,u:JN,U:ZN,V:tk,w:rk,W:nk,x:null,X:null,y:sk,Y:ak,Z:lk,"%":ck},j={a:function(e,t,r){var n=f.exec(t.slice(r));return n?(e.w=m.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=x.exec(t.slice(r));return n?(e.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=h.exec(t.slice(r));return n?(e.m=g.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return k(e,t,r,n)},d:fN,e:fN,f:bN,g:cN,G:lN,H:hN,I:hN,j:mN,L:yN,m:pN,M:gN,p:function(e,t,r){var n=c.exec(t.slice(r));return n?(e.p=d.get(n[0].toLowerCase()),r+n[0].length):-1},q:uN,Q:jN,s:wN,S:xN,u:sN,U:oN,V:aN,w:nN,W:iN,x:function(e,t,n){return k(e,r,t,n)},X:function(e,t,r){return k(e,n,t,r)},y:cN,Y:lN,Z:dN,"%":vN};function w(e,t){return function(r){var n,s,o,a=[],i=-1,l=0,c=e.length;for(r instanceof Date||(r=new Date(+r));++i<c;)37===e.charCodeAt(i)&&(a.push(e.slice(l,i)),null!=(s=Kw[n=e.charAt(++i)])?n=e.charAt(++i):s="e"===n?" ":"0",(o=t[n])&&(n=o(r,s)),a.push(n),l=i+1);return a.push(e.slice(l,i)),a.join("")}}function N(e,t){return function(r){var n,s,o=Hw(1900,void 0,1);if(k(o,e,r+="",0)!=r.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(s=(n=Ww(Hw(o.y,0,1))).getUTCDay(),n=s>4||0===s?Ew.ceil(n):Ew(n),n=gw.offset(n,7*(o.V-1)),o.y=n.getUTCFullYear(),o.m=n.getUTCMonth(),o.d=n.getUTCDate()+(o.w+6)%7):(s=(n=Uw(Hw(o.y,0,1))).getDay(),n=s>4||0===s?vw.ceil(n):vw(n),n=hw.offset(n,7*(o.V-1)),o.y=n.getFullYear(),o.m=n.getMonth(),o.d=n.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),s="Z"in o?Ww(Hw(o.y,0,1)).getUTCDay():Uw(Hw(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(s+5)%7:o.w+7*o.U-(s+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ww(o)):Uw(o)}}function k(e,t,r,n){for(var s,o,a=0,i=t.length,l=r.length;a<i;){if(n>=l)return-1;if(37===(s=t.charCodeAt(a++))){if(s=t.charAt(a++),!(o=j[s in Kw?t.charAt(a++):s])||(n=o(e,r,n))<0)return-1}else if(s!=r.charCodeAt(n++))return-1}return n}return b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),v.x=w(r,v),v.X=w(n,v),v.c=w(t,v),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",v);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Vw=Qw.format,Qw.parse,Yw=Qw.utcFormat,Qw.utcParse;var Tk=e=>e.chartData,Pk=wy([Tk],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Ok=(e,t,r,n)=>n?Pk(e):Tk(e);function zk(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(pm(t)&&pm(r))return!0}return!1}function qk(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function Dk(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var r,n,[s,o]=e;if(pm(s))r=s;else if("function"==typeof s)return;if(pm(o))n=o;else if("function"==typeof o)return;var a=[r,n];if(zk(a))return a}}var Ik,Lk=a(8351),Rk=a.n(Lk),$k=e=>e,Bk={"@@functional/placeholder":!0},Fk=e=>e===Bk,Uk=e=>function t(){return 0===arguments.length||1===arguments.length&&Fk(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Wk=(e,t)=>1===e?t:Uk(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var o=n.filter(e=>e!==Bk).length;return o>=e?t(...n):Wk(e-o,Uk(function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];var o=n.map(e=>Fk(e)?r.shift():e);return t(...o,...r)}))}),Hk=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},Qk=Wk((Ik=(e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)).length,Ik),Vk=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join("");function Yk(e){return 0===e?1:Math.floor(new(Rk())(e).abs().log(10).toNumber())+1}function Kk(e,t,r){for(var n=new(Rk())(e),s=0,o=[];n.lt(t)&&s<1e5;)o.push(n.toNumber()),n=n.add(r),s++;return o}var Gk=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},Xk=(e,t,r)=>{if(e.lte(0))return new(Rk())(0);var n=Yk(e.toNumber()),s=new(Rk())(10).pow(n),o=e.div(s),a=1!==n?.05:.1,i=new(Rk())(Math.ceil(o.div(a).toNumber())).add(r).mul(a).mul(s);return t?new(Rk())(i.toNumber()):new(Rk())(Math.ceil(i.toNumber()))},Jk=function(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new(Rk())(0),tickMin:new(Rk())(0),tickMax:new(Rk())(0)};var o,a=Xk(new(Rk())(t).sub(e).div(r-1),n,s);o=e<=0&&t>=0?new(Rk())(0):(o=new(Rk())(e).add(t).div(2)).sub(new(Rk())(o).mod(a));var i=Math.ceil(o.sub(e).div(a).toNumber()),l=Math.ceil(new(Rk())(t).sub(o).div(a).toNumber()),c=i+l+1;return c>r?Jk(e,t,r,n,s+1):(c<r&&(l=t>0?l+(r-c):l,i=t>0?i:i+(r-c)),{step:a,tickMin:o.sub(new(Rk())(i).mul(a)),tickMax:o.add(new(Rk())(l).mul(a))})},Zk=e=>e.rootProps.stackOffset,eC=e=>e.rootProps.reverseStackOrder,tC=e=>e.options.chartName,rC=e=>e.rootProps.syncId,nC=e=>e.rootProps.syncMethod,sC=e=>e.options.eventEmitter;function oC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function aC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oC(Object(r),!0).forEach(function(t){iC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function iC(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lC=Math.PI/180,cC=e=>180*e/Math.PI,dC=(e,t,r,n)=>({x:e+Math.cos(-lC*n)*r,y:t+Math.sin(-lC*n)*r}),uC=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),o=Math.floor(n/360);return e+360*Math.min(s,o)},pC=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:o}=((e,t)=>{var{x:r,y:n}=e,{cx:s,cy:o}=t,a=((e,t)=>{var{x:r,y:n}=e,{x:s,y:o}=t;return Math.sqrt((r-s)**2+(n-o)**2)})({x:r,y:n},{x:s,y:o});if(a<=0)return{radius:a,angle:0};var i=(r-s)/a,l=Math.acos(i);return n>o&&(l=2*Math.PI-l),{radius:a,angle:cC(l),angleInRadian:l}})({x:r,y:n},t),{innerRadius:a,outerRadius:i}=t;if(s<a||s>i)return null;if(0===s)return null;var l,{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),o=Math.min(n,s);return{startAngle:t-360*o,endAngle:r-360*o}})(t),u=o;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;l=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;l=u>=d&&u<=c}return l?aC(aC({},t),{},{radius:s,angle:uC(u,t)}):null},fC={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},mC="auto",hC=!0,gC=(fC.axis,!1),xC=!0,yC="auto",bC=!0,vC=(fC.axis,(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t}),jC={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:mC,tick:hC,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},wC={allowDataOverflow:gC,allowDecimals:!1,allowDuplicatedCategory:xC,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:yC,tick:bC,tickCount:5,ticks:void 0,type:"number",unit:void 0},NC={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:mC,tick:hC,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},kC={allowDataOverflow:gC,allowDecimals:!1,allowDuplicatedCategory:xC,dataKey:void 0,domain:void 0,id:0,includeHidden:!1,name:void 0,reversed:!1,scale:yC,tick:bC,tickCount:5,ticks:void 0,type:"category",unit:void 0},CC=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?NC:jC,_C=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?kC:wC,SC=e=>e.polarOptions,EC=wy([sb,ob,fb],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2}),AC=wy([SC,EC],(e,t)=>{if(null!=e)return Xf(e.innerRadius,t,0)}),MC=wy([SC,EC],(e,t)=>{if(null!=e)return Xf(e.outerRadius,t,.8*t)}),TC=wy([SC],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]}),PC=(wy([CC,TC],vC),wy([EC,AC,MC],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]})),OC=(wy([_C,PC],vC),wy([_b,SC,AC,MC,sb,ob],(e,t,r,n,s,o)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:a,cy:i,startAngle:l,endAngle:c}=t;return{cx:Xf(a,s,s/2),cy:Xf(i,o,o/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:c,clockWise:!1}}})),zC=(e,t)=>t,qC=(e,t,r)=>r;function DC(e){return null==e?void 0:e.id}function IC(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:o}=r,a=new Map;return e.forEach(e=>{var t,r=null!==(t=e.data)&&void 0!==t?t:n;if(null!=r&&0!==r.length){var i=DC(e);r.forEach((t,r)=>{var n,l=null==o||s?r:String(Hy(t,o,null)),c=Hy(t,e.dataKey,0);n=a.has(l)?a.get(l):{},Object.assign(n,{[i]:c}),a.set(l,n)})}}),Array.from(a.values())}function LC(e){return null!=e.stackId&&null!=e.dataKey}var RC=(e,t)=>e===t||null!=e&&null!=t&&e[0]===t[0]&&e[1]===t[1];function $C(e,t){return!(!Array.isArray(e)||!Array.isArray(t)||0!==e.length||0!==t.length)||e===t}var BC=e=>{var t=_b(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},FC=e=>e.tooltip.settings.axisId;function UC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function WC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?UC(Object(r),!0).forEach(function(t){HC(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UC(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function HC(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QC=[0,"auto"],VC={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},YC=(e,t)=>e.cartesianAxis.xAxis[t],KC=(e,t)=>{var r=YC(e,t);return null==r?VC:r},GC={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:QC,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},XC=(e,t)=>e.cartesianAxis.yAxis[t],JC=(e,t)=>{var r=XC(e,t);return null==r?GC:r},ZC={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},e_=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?ZC:r},t_=(e,t,r)=>{switch(t){case"xAxis":return KC(e,r);case"yAxis":return JC(e,r);case"zAxis":return e_(e,r);case"angleAxis":return CC(e,r);case"radiusAxis":return _C(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},r_=(e,t,r)=>{switch(t){case"xAxis":return KC(e,r);case"yAxis":return JC(e,r);case"angleAxis":return CC(e,r);case"radiusAxis":return _C(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},n_=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function s_(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var o_=e=>e.graphicalItems.cartesianItems,a_=wy([zC,qC],s_),i_=(e,t,r)=>e.filter(r).filter(e=>!0===(null==t?void 0:t.includeHidden)||!e.hide),l_=wy([o_,t_,a_],i_,{memoizeOptions:{resultEqualityCheck:$C}}),c_=wy([l_],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(LC)),d_=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),u_=wy([l_],d_),p_=e=>e.map(e=>e.data).filter(Boolean).flat(1),f_=wy([l_],p_,{memoizeOptions:{resultEqualityCheck:$C}}),m_=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},h_=wy([f_,Ok],m_),g_=(e,t,r)=>null!=(null==t?void 0:t.dataKey)?e.map(e=>({value:Hy(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:Hy(e,t)}))):e.map(e=>({value:e})),x_=wy([h_,t_,l_],g_);function y_(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function b_(e){if(Yf(e)||e instanceof Date){var t=Number(e);if(pm(t))return t}}function v_(e){if(Array.isArray(e)){var t=[b_(e[0]),b_(e[1])];return zk(t)?t:void 0}var r=b_(e);if(null!=r)return[r,r]}function j_(e){return e.map(b_).filter(nm)}var w_=e=>{var t=BC(e),r=FC(e);return r_(e,t,r)},N_=wy([w_],e=>null==e?void 0:e.dataKey),k_=wy([c_,Ok,w_],IC),C_=(e,t,r,n)=>{var s=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(s).map(t=>{var[s,o]=t,a=n?[...o].reverse():o,i=a.map(DC);return[s,{stackedData:Xy(e,i,r),graphicalItems:a}]}))},S_=wy([k_,c_,Zk,eC],C_),E_=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:o}=t;if(null==n&&"zAxis"!==r){var a=((e,t,r)=>{var n;if(null!=e)return n=Object.keys(e).reduce((n,s)=>{var o=e[s],{stackedData:a}=o,i=a.reduce((e,n)=>{var s,o=(s=By(n,t,r).flat(2).filter(Vf),[Math.min(...s),Math.max(...s)]);return[Math.min(e[0],o[0]),Math.max(e[1],o[1])]},[1/0,-1/0]);return[Math.min(i[0],n[0]),Math.max(i[1],n[1])]},[1/0,-1/0]),[n[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]})(e,s,o);if(null==a||0!==a[0]||0!==a[1])return a}},A_=wy([t_],e=>e.allowDataOverflow),M_=e=>{var t;if(null==e||!("domain"in e))return QC;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var r=j_(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null==e?void 0:e.domain)&&void 0!==t?t:QC},T_=wy([t_],M_),P_=wy([T_,A_],Dk),O_=wy([S_,Tk,zC,P_],E_,{memoizeOptions:{resultEqualityCheck:RC}}),z_=e=>e.errorBars,q_=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var s=n.flat();return[Math.min(...s),Math.max(...s)]}},D_=(e,t,r,n,s)=>{var o,a;if(r.length>0&&e.forEach(e=>{r.forEach(r=>{var i,l,c=null===(i=n[r.id])||void 0===i?void 0:i.filter(e=>y_(s,e)),d=Hy(e,null!==(l=t.dataKey)&&void 0!==l?l:r.dataKey),u=function(e,t,r){return!r||"number"!=typeof t||Hf(t)?[]:r.length?j_(r.flatMap(r=>{var n,s,o=Hy(e,r.dataKey);if(Array.isArray(o)?[n,s]=o:n=s=o,pm(n)&&pm(s))return[t-n,t+s]})):[]}(e,d,c);if(u.length>=2){var p=Math.min(...u),f=Math.max(...u);(null==o||p<o)&&(o=p),(null==a||f>a)&&(a=f)}var m=v_(d);null!=m&&(o=null==o?m[0]:Math.min(o,m[0]),a=null==a?m[1]:Math.max(a,m[1]))})}),null!=(null==t?void 0:t.dataKey)&&e.forEach(e=>{var r=v_(Hy(e,t.dataKey));null!=r&&(o=null==o?r[0]:Math.min(o,r[0]),a=null==a?r[1]:Math.max(a,r[1]))}),pm(o)&&pm(a))return[o,a]},I_=wy([h_,t_,u_,z_,zC],D_,{memoizeOptions:{resultEqualityCheck:RC}});function L_(e){var{value:t}=e;if(Yf(t)||t instanceof Date)return t}var R_=e=>e.referenceElements.dots,$_=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),B_=wy([R_,zC,qC],$_),F_=e=>e.referenceElements.areas,U_=wy([F_,zC,qC],$_),W_=e=>e.referenceElements.lines,H_=wy([W_,zC,qC],$_),Q_=(e,t)=>{var r=j_(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},V_=wy(B_,zC,Q_),Y_=(e,t)=>{var r=j_(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},K_=wy([U_,zC],Y_),G_=(e,t)=>{var r=e.flatMap(e=>"xAxis"===t?function(e){var t;if(null!=e.x)return j_([e.x]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.x);return null==r||0===r.length?[]:j_(r)}(e):function(e){var t;if(null!=e.y)return j_([e.y]);var r=null===(t=e.segment)||void 0===t?void 0:t.map(e=>e.y);return null==r||0===r.length?[]:j_(r)}(e));if(0!==r.length)return[Math.min(...r),Math.max(...r)]},X_=wy([H_,zC],G_),J_=wy(V_,X_,K_,(e,t,r)=>q_(e,r,t)),Z_=(e,t,r,n,s,o,a,i)=>null!=r?r:function(e,t,r){if(r||null!=t){if("function"==typeof e&&null!=t)try{var n=e(t,r);if(zk(n))return qk(n,t,r)}catch(e){}if(Array.isArray(e)&&2===e.length){var s,o,[a,i]=e;if("auto"===a)null!=t&&(s=Math.min(...t));else if(Vf(a))s=a;else if("function"==typeof a)try{null!=t&&(s=a(null==t?void 0:t[0]))}catch(e){}else if("string"==typeof a&&Zy.test(a)){var l=Zy.exec(a);if(null==l||null==t)s=void 0;else{var c=+l[1];s=t[0]-c}}else s=null==t?void 0:t[0];if("auto"===i)null!=t&&(o=Math.max(...t));else if(Vf(i))o=i;else if("function"==typeof i)try{null!=t&&(o=i(null==t?void 0:t[1]))}catch(e){}else if("string"==typeof i&&eb.test(i)){var d=eb.exec(i);if(null==d||null==t)o=void 0;else{var u=+d[1];o=t[1]+u}}else o=null==t?void 0:t[1];var p=[s,o];if(zk(p))return null==t?p:qk(p,t,r)}}}(t,"vertical"===a&&"xAxis"===i||"horizontal"===a&&"yAxis"===i?q_(n,o,s):q_(o,s),e.allowDataOverflow),eS=wy([t_,T_,P_,O_,I_,J_,_b,zC],Z_,{memoizeOptions:{resultEqualityCheck:RC}}),tS=[0,1],rS=(e,t,r,n,s,o,a)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==a){var i,{dataKey:l,type:c}=e,d=Qy(t,o);return d&&null==l?Mb()(0,null!==(i=null==r?void 0:r.length)&&void 0!==i?i:0):"category"===c?((e,t,r)=>{var n=e.map(L_).filter(e=>null!=e);return r&&(null==t.dataKey||t.allowDuplicatedCategory&&Jf(n))?Mb()(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))})(n,e,d):"expand"===s?tS:a}},nS=wy([t_,_b,h_,x_,Zk,zC,eS],rS),sS=(e,r,n,s,o)=>{if(null!=e){var{scale:a,type:i}=e;if("auto"===a)return"radial"===r&&"radiusAxis"===o?"band":"radial"===r&&"angleAxis"===o?"linear":"category"===i&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!n)?"point":"category"===i?"band":"linear";if("string"==typeof a){var l="scale".concat(rm(a));return l in t?l:"point"}}},oS=wy([t_,_b,n_,tC,zC],sS);function aS(e,r,n,s){if(null!=n&&null!=s){if("function"==typeof e.scale)return e.scale.copy().domain(n).range(s);var o=function(e){if(null!=e){if(e in t)return t[e]();var r="scale".concat(rm(e));return r in t?t[r]():void 0}}(r);if(null!=o){var a=o.domain(n).range(s);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-Ky,o=Math.max(n[0],n[1])+Ky,a=e(t[0]),i=e(t[r-1]);(a<s||a>o||i<s||i>o)&&e.domain([t[0],t[r-1]])}})(a),a}}}var iS=(e,t,r)=>{var n=M_(t);if("auto"===r||"linear"===r)return null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&zk(e)?function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=Math.max(n,2),[a,i]=Gk([t,r]);if(a===-1/0||i===1/0){var l=i===1/0?[a,...Hk(0,n-1).map(()=>1/0)]:[...Hk(0,n-1).map(()=>-1/0),i];return t>r?Vk(l):l}if(a===i)return((e,t,r)=>{var n=new(Rk())(1),s=new(Rk())(e);if(!s.isint()&&r){var o=Math.abs(e);o<1?(n=new(Rk())(10).pow(Yk(e)-1),s=new(Rk())(Math.floor(s.div(n).toNumber())).mul(n)):o>1&&(s=new(Rk())(Math.floor(e)))}else 0===e?s=new(Rk())(Math.floor((t-1)/2)):r||(s=new(Rk())(Math.floor(e)));var a=Math.floor((t-1)/2);return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!t.length)return $k;var n=t.reverse(),s=n[0],o=n.slice(1);return function(){return o.reduce((e,t)=>t(e),s(...arguments))}}(Qk(e=>s.add(new(Rk())(e-a).mul(n)).toNumber()),Hk)(0,t)})(a,n,s);var{step:c,tickMin:d,tickMax:u}=Jk(a,i,o,s,0),p=Kk(d,u.add(new(Rk())(.1).mul(c)),c);return t>r?Vk(p):p}(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&zk(e)?function(e,t){var[r,n]=e,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[o,a]=Gk([r,n]);if(o===-1/0||a===1/0)return[r,n];if(o===a)return[o];var i=Math.max(t,2),l=Xk(new(Rk())(a).sub(o).div(i-1),s,0),c=[...Kk(new(Rk())(o),new(Rk())(a),l),a];return!1===s&&(c=c.map(e=>Math.round(e))),r>n?Vk(c):c}(e,t.tickCount,t.allowDecimals):void 0},lS=wy([nS,r_,oS],iS),cS=(e,t,r,n)=>{if("angleAxis"!==n&&"number"===(null==e?void 0:e.type)&&zk(t)&&Array.isArray(r)&&r.length>0){var s=t[0],o=r[0],a=t[1],i=r[r.length-1];return[Math.min(s,o),Math.max(a,i)]}return t},dS=wy([t_,nS,lS,zC],cS),uS=wy(x_,t_,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(j_(e.map(e=>e.value))).sort((e,t)=>e-t);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(0===s)return 1/0;for(var o=0;o<n.length-1;o++){var a=n[o+1]-n[o];r=Math.min(r,a)}return r/s}}),pS=wy(uS,_b,e=>e.rootProps.barCategoryGap,fb,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!pm(e))return 0;var o="vertical"===t?n.height:n.width;if("gap"===s)return e*o/2;if("no-gap"===s){var a=Xf(r,e*o),i=e*o/2;return i-a-(i-a)/o*a}return 0}),fS=wy(KC,(e,t)=>{var r=KC(e,t);return null==r||"string"!=typeof r.padding?0:pS(e,"xAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{left:0,right:0};var{padding:s}=e;return"string"==typeof s?{left:t,right:t}:{left:(null!==(r=s.left)&&void 0!==r?r:0)+t,right:(null!==(n=s.right)&&void 0!==n?n:0)+t}}),mS=wy(JC,(e,t)=>{var r=JC(e,t);return null==r||"string"!=typeof r.padding?0:pS(e,"yAxis",t,r.padding)},(e,t)=>{var r,n;if(null==e)return{top:0,bottom:0};var{padding:s}=e;return"string"==typeof s?{top:t,bottom:t}:{top:(null!==(r=s.top)&&void 0!==r?r:0)+t,bottom:(null!==(n=s.bottom)&&void 0!==n?n:0)+t}}),hS=wy([fb,fS,bb,yb,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:o}=n;return s?[o.left,r.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),gS=wy([fb,_b,mS,bb,yb,(e,t,r)=>r],(e,t,r,n,s,o)=>{var{padding:a}=s;return o?[n.height-a.bottom,a.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),xS=(e,t,r,n)=>{var s;switch(t){case"xAxis":return hS(e,r,n);case"yAxis":return gS(e,r,n);case"zAxis":return null===(s=e_(e,r))||void 0===s?void 0:s.range;case"angleAxis":return TC(e);case"radiusAxis":return PC(e,r);default:return}},yS=wy([t_,xS],vC),bS=wy([t_,oS,dS,yS],aS);function vS(e,t){return e.id<t.id?-1:e.id>t.id?1:0}wy([l_,z_,zC],(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>y_(r,e)));var jS=(e,t)=>t,wS=(e,t,r)=>r,NS=wy(lb,jS,wS,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(vS)),kS=wy(cb,jS,wS,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(vS)),CS=(e,t)=>({width:e.width,height:t.height}),_S=wy(fb,KC,CS),SS=wy(ob,fb,NS,jS,wS,(e,t,r,n,s)=>{var o,a={};return r.forEach(r=>{var i=CS(t,r);null==o&&(o=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!s||"bottom"===n&&s;a[r.id]=o-Number(l)*i.height,o+=(l?-1:1)*i.height}),a}),ES=wy(sb,fb,kS,jS,wS,(e,t,r,n,s)=>{var o,a={};return r.forEach(r=>{var i=((e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height}))(t,r);null==o&&(o=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!s||"right"===n&&s;a[r.id]=o-Number(l)*i.width,o+=(l?-1:1)*i.width}),a}),AS=wy([fb,KC,(e,t)=>{var r=KC(e,t);if(null!=r)return SS(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var s=null==r?void 0:r[n];return null==s?{x:e.left,y:0}:{x:e.left,y:s}}}),MS=wy([fb,JC,(e,t)=>{var r=JC(e,t);if(null!=r)return ES(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var s=null==r?void 0:r[n];return null==s?{x:0,y:e.top}:{x:s,y:e.top}}}),TS=wy(fb,JC,(e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height})),PS=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:s,type:o,dataKey:a}=r,i=Qy(e,n),l=t.map(e=>e.value);return a&&i&&"category"===o&&s&&Jf(l)?l:void 0}},OS=wy([_b,x_,t_,zC],PS),zS=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:s,scale:o}=r;return!Qy(e,n)||"number"!==s&&"auto"===o?void 0:t.map(e=>e.value)}},qS=wy([_b,x_,r_,zC],zS),DS=wy([_b,(e,t,r)=>{switch(t){case"xAxis":return KC(e,r);case"yAxis":return JC(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},oS,bS,OS,qS,xS,lS,zC],(e,t,r,n,s,o,a,i,l)=>{if(null!=t){var c=Qy(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:o,duplicateDomain:s,isCategorical:c,niceTicks:i,range:a,realScaleType:r,scale:n}}}),IS=wy([_b,r_,oS,bS,lS,xS,OS,qS,zC],(e,t,r,n,s,o,a,i,l)=>{if(null!=t&&null!=n){var c=Qy(e,l),{type:d,ticks:u,tickCount:p}=t,f="scaleBand"===r&&"function"==typeof n.bandwidth?n.bandwidth()/2:2,m="category"===d&&n.bandwidth?n.bandwidth()/f:0;m="angleAxis"===l&&null!=o&&o.length>=2?2*Wf(o[0]-o[1])*m:m;var h=u||s;return h?h.map((e,t)=>{var r=a?a.indexOf(e):e;return{index:t,coordinate:n(r)+m,value:e,offset:m}}).filter(e=>pm(e.coordinate)):c&&i?i.map((e,t)=>({coordinate:n(e)+m,value:e,index:t,offset:m})).filter(e=>pm(e.coordinate)):n.ticks?n.ticks(p).map(e=>({coordinate:n(e)+m,value:e,offset:m})):n.domain().map((e,t)=>({coordinate:n(e)+m,value:a?a[e]:e,index:t,offset:m}))}}),LS=wy([_b,r_,bS,xS,OS,qS,zC],(e,t,r,n,s,o,a)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var i=Qy(e,a),{tickCount:l}=t,c=0;return c="angleAxis"===a&&(null==n?void 0:n.length)>=2?2*Wf(n[0]-n[1])*c:c,i&&o?o.map((e,t)=>({coordinate:r(e)+c,value:e,index:t,offset:c})):r.ticks?r.ticks(l).map(e=>({coordinate:r(e)+c,value:e,offset:c})):r.domain().map((e,t)=>({coordinate:r(e)+c,value:s?s[e]:e,index:t,offset:c}))}}),RS=wy(t_,bS,(e,t)=>{if(null!=e&&null!=t)return WC(WC({},e),{},{scale:t})}),$S=wy([t_,oS,nS,yS],aS),BS=(wy((e,t,r)=>e_(e,r),$S,(e,t)=>{if(null!=e&&null!=t)return WC(WC({},e),{},{scale:t})}),wy([_b,lb,cb],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),FS=e=>e.options.defaultTooltipEventType,US=e=>e.options.validateTooltipEventTypes;function WS(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function HS(e,t){return WS(t,FS(e),US(e))}var QS=(e,t)=>{var r,n=Number(t);if(!Hf(n)&&null!=t)return n>=0?null==e||null===(r=e[n])||void 0===r?void 0:r.value:void 0};function VS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function YS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VS(Object(r),!0).forEach(function(t){KS(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VS(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function KS(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GS=(e,t,r,n)=>{if(null==t)return Hx;var s=function(e,t,r){return"axis"===t?"click"===r?e.axisInteraction.click:e.axisInteraction.hover:"click"===r?e.itemInteraction.click:e.itemInteraction.hover}(e,t,r);if(null==s)return Hx;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var o=!0===e.settings.active;if(null!=s.index){if(o)return YS(YS({},s),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return YS(YS({},Hx),{},{coordinate:s.coordinate})};var XS=(e,t,r,n)=>{var s=null==e?void 0:e.index;if(null==s)return null;var o=Number(s);if(!pm(o))return s;var a=1/0;t.length>0&&(a=t.length-1);var i=Math.max(0,Math.min(o,a)),l=t[i];return null==l||function(e,t,r){if(null==r||null==t)return!0;var n=Hy(e,t);return null==n||!zk(r)||function(e,t){var r=function(e){if("number"==typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}(e),n=t[0],s=t[1];if(void 0===r)return!1;var o=Math.min(n,s),a=Math.max(n,s);return r>=o&&r<=a}(n,r)}(l,r,n)?String(i):null},JS=(e,t,r,n,s,o,a,i)=>{if(null!=o&&null!=i){var l=a[0],c=null==l?void 0:i(l.positions,o);if(null!=c)return c;var d=null==s?void 0:s[Number(o)];if(d)return"horizontal"===r?{x:d.coordinate,y:(n.top+t)/2}:{x:(n.left+e)/2,y:d.coordinate}}},ZS=(e,t,r,n)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(s="hover"===r?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=n?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===s});var s},eE=e=>e.options.tooltipPayloadSearcher,tE=e=>e.tooltip;function rE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rE(Object(r),!0).forEach(function(t){sE(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sE(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oE=(e,t,r,n,s,o,a)=>{if(null!=t&&null!=o){var{chartData:i,computedData:l,dataStartIndex:c,dataEndIndex:d}=r;return e.reduce((e,r)=>{var u,p,f,{dataDefinedOnItem:m,settings:h}=r,g=function(e,t){return null!=e?e:t}(m,i),x=Array.isArray(g)?By(g,c,d):g,y=null!==(u=null==h?void 0:h.dataKey)&&void 0!==u?u:n,b=null==h?void 0:h.nameKey;return p=n&&Array.isArray(x)&&!Array.isArray(x[0])&&"axis"===a?em(x,n,s):o(x,t,l,b),Array.isArray(p)?p.forEach(t=>{var r=nE(nE({},h),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(rb({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:Hy(t.payload,t.dataKey),name:t.name}))}):e.push(rb({tooltipEntrySettings:h,dataKey:y,payload:p,value:Hy(p,y),name:null!==(f=Hy(p,b))&&void 0!==f?f:null==h?void 0:h.name})),e},[])}},aE=wy([w_,_b,n_,tC,BC],sS),iE=wy([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),lE=wy([BC,FC],s_),cE=wy([iE,w_,lE],i_,{memoizeOptions:{resultEqualityCheck:$C}}),dE=wy([cE],e=>e.filter(LC)),uE=wy([cE],p_,{memoizeOptions:{resultEqualityCheck:$C}}),pE=wy([uE,Tk],m_),fE=wy([dE,Tk,w_],IC),mE=wy([pE,w_,cE],g_),hE=wy([w_],M_),gE=wy([w_],e=>e.allowDataOverflow),xE=wy([hE,gE],Dk),yE=wy([cE],e=>e.filter(LC)),bE=wy([fE,yE,Zk,eC],C_),vE=wy([bE,Tk,BC,xE],E_),jE=wy([cE],d_),wE=wy([pE,w_,jE,z_,BC],D_,{memoizeOptions:{resultEqualityCheck:RC}}),NE=wy([R_,BC,FC],$_),kE=wy([NE,BC],Q_),CE=wy([F_,BC,FC],$_),_E=wy([CE,BC],Y_),SE=wy([W_,BC,FC],$_),EE=wy([SE,BC],G_),AE=wy([kE,EE,_E],q_),ME=wy([w_,hE,xE,vE,wE,AE,_b,BC],Z_),TE=wy([w_,_b,pE,mE,Zk,BC,ME],rS),PE=wy([TE,w_,aE],iS),OE=wy([w_,TE,PE,BC],cS),zE=e=>{var t=BC(e),r=FC(e);return xS(e,t,r,!1)},qE=wy([w_,zE],vC),DE=wy([w_,aE,OE,qE],aS),IE=wy([_b,mE,w_,BC],PS),LE=wy([_b,mE,w_,BC],zS),RE=wy([_b,w_,aE,DE,zE,IE,LE,BC],(e,t,r,n,s,o,a,i)=>{if(t){var{type:l}=t,c=Qy(e,i);if(n){var d="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,u="category"===l&&n.bandwidth?n.bandwidth()/d:0;return u="angleAxis"===i&&null!=s&&(null==s?void 0:s.length)>=2?2*Wf(s[0]-s[1])*u:u,c&&a?a.map((e,t)=>({coordinate:n(e)+u,value:e,index:t,offset:u})):n.domain().map((e,t)=>({coordinate:n(e)+u,value:o?o[e]:e,index:t,offset:u}))}}}),$E=wy([FS,US,e=>e.tooltip.settings],(e,t,r)=>WS(r.shared,e,t)),BE=e=>e.tooltip.settings.trigger,FE=e=>e.tooltip.settings.defaultIndex,UE=wy([tE,$E,BE,FE],GS),WE=wy([UE,pE,N_,TE],XS),HE=wy([RE,WE],QS),QE=wy([UE],e=>{if(e)return e.dataKey}),VE=wy([tE,$E,BE,FE],ZS),YE=wy([sb,ob,_b,fb,RE,FE,VE,eE],JS),KE=wy([UE,YE],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),GE=wy([UE],e=>e.active),XE=wy([VE,WE,Tk,N_,HE,eE,$E],oE),JE=wy([XE],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}});function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(t){tA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function tA(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rA=(e,t,r,n,s)=>{var o,a=-1,i=null!==(o=null==t?void 0:t.length)&&void 0!==o?o:0;if(i<=1||null==e)return 0;if("angleAxis"===n&&null!=s&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<i;l++){var c=l>0?r[l-1].coordinate:r[i-1].coordinate,d=r[l].coordinate,u=l>=i-1?r[0].coordinate:r[l+1].coordinate,p=void 0;if(Wf(d-c)!==Wf(u-d)){var f=[];if(Wf(u-d)===Wf(s[1]-s[0])){p=u;var m=d+s[1]-s[0];f[0]=Math.min(m,(m+c)/2),f[1]=Math.max(m,(m+c)/2)}else{p=c;var h=u+s[1]-s[0];f[0]=Math.min(d,(h+d)/2),f[1]=Math.max(d,(h+d)/2)}var g=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){({index:a}=r[l]);break}}else{var x=Math.min(c,u),y=Math.max(c,u);if(e>(x+d)/2&&e<=(y+d)/2){({index:a}=r[l]);break}}}else if(t)for(var b=0;b<i;b++)if(0===b&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b>0&&b<i-1&&e>(t[b].coordinate+t[b-1].coordinate)/2&&e<=(t[b].coordinate+t[b+1].coordinate)/2||b===i-1&&e>(t[b].coordinate+t[b-1].coordinate)/2){({index:a}=t[b]);break}return a},nA=(e,t)=>t,sA=(e,t,r)=>r,oA=(e,t,r,n)=>n,aA=wy(RE,e=>Oy()(e,e=>e.coordinate)),iA=wy([tE,nA,sA,oA],GS),lA=wy([iA,pE,N_,TE],XS),cA=wy([tE,nA,sA,oA],ZS),dA=wy([sb,ob,_b,fb,RE,oA,cA,eE],JS),uA=wy([iA,dA],(e,t)=>{var r;return null!==(r=e.coordinate)&&void 0!==r?r:t}),pA=wy([RE,lA],QS),fA=wy([cA,lA,Tk,N_,pA,eE,nA],oE),mA=wy([iA,lA],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),hA=wy([(e,t)=>t,_b,OC,BC,qE,RE,aA,fb],(e,t,r,n,s,o,a,i)=>{if(e&&t&&n&&s&&o)return"horizontal"===t||"vertical"===t?((e,t,r,n,s,o,a)=>{if(e&&r&&n&&s&&function(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}(e,a)){var i=((e,t)=>"horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0)(e,t),l=rA(i,o,s,r,n),c=((e,t,r,n)=>{var s=t.find(e=>e&&e.index===r);if(s){if("horizontal"===e)return{x:s.coordinate,y:n.chartY};if("vertical"===e)return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}})(t,s,l,e);return{activeIndex:String(l),activeCoordinate:c}}})(e,t,n,s,o,a,i):((e,t,r,n,s,o,a)=>{if(e&&n&&s&&o&&r){var i=pC(e,r);if(i){var l=((e,t)=>"centric"===t?e.angle:e.radius)(i,t),c=rA(l,a,o,n,s),d=((e,t,r,n)=>{var s=t.find(e=>e&&e.index===r);if(s){if("centric"===e){var o=s.coordinate,{radius:a}=n;return eA(eA(eA({},n),dC(n.cx,n.cy,a,o)),{},{angle:o,radius:a})}var i=s.coordinate,{angle:l}=n;return eA(eA(eA({},n),dC(n.cx,n.cy,i,l)),{},{angle:l,radius:i})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,o,c,i);return{activeIndex:String(c),activeCoordinate:d}}}})(e,t,r,n,s,o,a)}),gA=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},xA=Qh("mouseClick"),yA=Lg();yA.startListening({actionCreator:xA,effect:(e,t)=>{var r=e.payload,n=hA(t.getState(),gA(r));null!=(null==n?void 0:n.activeIndex)&&t.dispatch(ry({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var bA=Qh("mouseMove"),vA=Lg(),jA=null;function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(t){kA(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kA(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}vA.startListening({actionCreator:bA,effect:(e,t)=>{var r=e.payload;null!==jA&&cancelAnimationFrame(jA);var n=gA(r);jA=requestAnimationFrame(()=>{var e=t.getState();if("axis"===HS(e,e.tooltip.settings.shared)){var r=hA(e,n);null!=(null==r?void 0:r.activeIndex)?t.dispatch(ty({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate})):t.dispatch(Zx())}jA=null})}});var CA=ag({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Xh()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.xAxis[r.id]&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Xh()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Xh()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Xh()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.yAxis[r.id]&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Xh()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Xh()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Xh()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.zAxis[r.id]&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Xh()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Xh()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var o=s.widthHistory||[];if(3===o.length&&o[0]===o[2]&&n===o[1]&&n!==s.width&&Math.abs(n-o[0])<=1)return;var a=[...o,n].slice(-3);e.yAxis[r]=NA(NA({},e.yAxis[r]),{},{width:n,widthHistory:a})}}}}),{addXAxis:_A,replaceXAxis:SA,removeXAxis:EA,addYAxis:AA,replaceYAxis:MA,removeYAxis:TA,addZAxis:PA,replaceZAxis:OA,removeZAxis:zA,updateYAxisWidth:qA}=CA.actions,DA=CA.reducer,IA=ag({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Xh()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Ah(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:Xh()},removeCartesianGraphicalItem:{reducer(e,t){var r=Ah(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Xh()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Xh()},removePolarGraphicalItem:{reducer(e,t){var r=Ah(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Xh()}}}),{addCartesianGraphicalItem:LA,replaceCartesianGraphicalItem:RA,removeCartesianGraphicalItem:$A,addPolarGraphicalItem:BA,removePolarGraphicalItem:FA}=IA.actions,UA=IA.reducer,WA=ag({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Ah(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Ah(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Ah(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:HA,removeDot:QA,addArea:VA,removeArea:YA,addLine:KA,removeLine:GA}=WA.actions,XA=WA.reducer,JA={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},ZA=ag({name:"brush",initialState:JA,reducers:{setBrushSettings:(e,t)=>null==t.payload?JA:t.payload}}),{setBrushSettings:eM}=ZA.actions,tM=ZA.reducer,rM=ag({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Xh()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Ah(e).payload.indexOf(r);s>-1&&(e.payload[s]=n)},prepare:Xh()},removeLegendPayload:{reducer(e,t){var r=Ah(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Xh()}}}),{setLegendSize:nM,setLegendSettings:sM,addLegendPayload:oM,replaceLegendPayload:aM,removeLegendPayload:iM}=rM.actions,lM=rM.reducer,cM={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},dM=ag({name:"rootProps",initialState:cM,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(r=t.payload.barGap)&&void 0!==r?r:cM.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),uM=dM.reducer,{updateOptions:pM}=dM.actions,fM=ag({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:mM,removeRadiusAxis:hM,addAngleAxis:gM,removeAngleAxis:xM}=fM.actions,yM=fM.reducer,bM=ag({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:vM}=bM.actions,jM=bM.reducer,wM=Qh("keyDown"),NM=Qh("focus"),kM=Lg();kM.startListening({actionCreator:wM,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip,s=e.payload;if("ArrowRight"===s||"ArrowLeft"===s||"Enter"===s){var o=XS(n,pE(r),N_(r),TE(r)),a=null==o?-1:Number(o);if(Number.isFinite(a)&&!(a<0)){var i=RE(r);if("Enter"!==s){var l=a+("ArrowRight"===s?1:-1)*("left-to-right"===BS(r)?1:-1);if(!(null==i||l>=i.length||l<0)){var c=dA(r,"axis","hover",String(l));t.dispatch(sy({active:!0,activeIndex:l.toString(),activeDataKey:void 0,activeCoordinate:c}))}}else{var d=dA(r,"axis","hover",String(n.index));t.dispatch(sy({active:!n.active,activeIndex:n.index,activeDataKey:n.dataKey,activeCoordinate:d}))}}}}}}),kM.startListening({actionCreator:NM,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var s=dA(r,"axis","hover",String("0"));t.dispatch(sy({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:s}))}}}});var CM=Qh("externalEvent"),_M=Lg(),SM=new Map;_M.startListening({actionCreator:CM,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(null!=r){n.persist();var s=n.type,o=SM.get(s);void 0!==o&&cancelAnimationFrame(o);var a=requestAnimationFrame(()=>{try{var e=t.getState(),o={activeCoordinate:KE(e),activeDataKey:QE(e),activeIndex:WE(e),activeLabel:HE(e),activeTooltipIndex:WE(e),isTooltipActive:GE(e)};r(o,n)}finally{SM.delete(s)}});SM.set(s,a)}}});var EM=wy([tE],e=>e.tooltipItemPayloads),AM=wy([EM,eE,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(e=>e.settings.dataKey===n);if(null!=s){var{positions:o}=s;if(null!=o)return t(o,r)}}),MM=Qh("touchMove"),TM=Lg();TM.startListening({actionCreator:MM,effect:(e,t)=>{var r=e.payload;if(null!=r.touches&&0!==r.touches.length){var n=t.getState(),s=HS(n,n.tooltip.settings.shared);if("axis"===s){var o=hA(n,gA({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));null!=(null==o?void 0:o.activeIndex)&&t.dispatch(ty({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if("item"===s){var a,i=r.touches[0];if(null==document.elementFromPoint)return;var l=document.elementFromPoint(i.clientX,i.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute("data-recharts-item-index"),d=null!==(a=l.getAttribute("data-recharts-item-data-key"))&&void 0!==a?a:void 0,u=AM(t.getState(),c,d);t.dispatch(Xx({activeDataKey:d,activeIndex:c,activeCoordinate:u}))}}}});var PM=ag({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===n.dataKey&&e.direction===n.direction?s:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:OM,replaceErrorBar:zM,removeErrorBar:qM}=PM.actions,DM=PM.reducer,IM=!("undefined"!=typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function LM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function RM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?LM(Object(r),!0).forEach(function(t){$M(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $M(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var BM={zIndexMap:Object.values(fC).reduce((e,t)=>RM(RM({},e),{},{[t]:{elementId:void 0,panoramaElementId:void 0,consumers:0}}),{})},FM=new Set(Object.values(fC)),UM=ag({name:"zIndex",initialState:BM,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,elementId:void 0,panoramaElementId:void 0}},prepare:Xh()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!function(e){return FM.has(e)}(r)&&delete e.zIndexMap[r])},prepare:Xh()},registerZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r,elementId:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElementId=n:e.zIndexMap[r].elementId=n:e.zIndexMap[r]={consumers:0,elementId:s?void 0:n,panoramaElementId:s?n:void 0}},prepare:Xh()},unregisterZIndexPortalId:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElementId=void 0:e.zIndexMap[r].elementId=void 0)},prepare:Xh()}}}),{registerZIndexPortal:WM,unregisterZIndexPortal:HM,registerZIndexPortalId:QM,unregisterZIndexPortalId:VM}=UM.actions,YM=Rh({brush:tM,cartesianAxis:DA,chartData:dy,errorBars:DM,graphicalItems:UA,layout:gy,legend:lM,options:Fg,polarAxis:yM,polarOptions:jM,referenceElements:XA,rootProps:uM,tooltip:oy,zIndex:UM.reducer});function KM(e){var{preloadedState:t,children:n,reduxStoreName:s}=e,o=xb(),a=(0,r.useRef)(null);if(o)return n;null==a.current&&(a.current=function(e){return function(e){const t=function(e){const{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:s=!0}=e??{};let o=new Vh;return t&&(function(e){return"boolean"==typeof e}(t)?o.push(Uh):o.push(Wh(t.extraArgument))),o},{reducer:r,middleware:n,devTools:s=!0,duplicateMiddlewareCheck:o=!0,preloadedState:a,enhancers:i}=e||{};let l,c;if("function"==typeof r)l=r;else{if(!Ih(r))throw new Error(Rg(1));l=Rh(r)}c="function"==typeof n?n(t):t();let d=$h;s&&(d=Hh({trace:!1,..."object"==typeof s&&s}));const u=function(...e){return t=>(r,n)=>{const s=t(r,n);let o=()=>{throw new Error(Oh(15))};const a={getState:s.getState,dispatch:(e,...t)=>o(e,...t)},i=e.map(e=>e(a));return o=$h(...i)(s.dispatch),{...s,dispatch:o}}}(...c),p=(e=>function(t){const{autoBatch:r=!0}=t??{};let n=new Vh(e);return r&&n.push(Zh("object"==typeof r?r:void 0)),n})(u);return Lh(l,a,d(..."function"==typeof i?i(p):p()))}({reducer:YM,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([yA.middleware,vA.middleware,kM.middleware,_M.middleware,TM.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(Zh({type:"raf"}))},devTools:false})}(t,s));var i=Cy;return r.createElement(ex,{context:i,store:a.current},n)}var GM=e=>{var{chartData:t}=e,n=Sy(),s=xb();return(0,r.useEffect)(()=>s?()=>{}:(n(iy(t)),()=>{n(iy(void 0))}),[t,n,s]),null},XM=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle"]);function JM(e,t){return null==e&&null==t||("number"==typeof e&&"number"==typeof t?e===t||e!=e&&t!=t:e===t)}function ZM(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(XM.has(n)){if(null==e[n]&&null==t[n])continue;if(!Kg(e[n],t[n]))return!1}else if(!JM(e[n],t[n]))return!1;return!0}function eT(e){var{layout:t,margin:n}=e,s=Sy(),o=xb();return(0,r.useEffect)(()=>{o||(s(fy(t)),s(py(n)))},[s,o,t,n]),null}var tT=(0,r.memo)(eT,ZM);function rT(e){var t=Sy();return(0,r.useEffect)(()=>{t(pM(e))},[t,e]),null}var nT=()=>{var e;return null===(e=Ty(e=>e.rootProps.accessibilityLayer))||void 0===e||e},sT=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function oT(e){return"string"==typeof e&&sT.includes(e)}var aT=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function iT(e){return"string"==typeof e&&aT.has(e)}function lT(e){return"string"==typeof e&&e.startsWith("data-")}function cT(e){if("object"!=typeof e||null===e)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(iT(r)||lT(r))&&(t[r]=e[r]);return t}function dT(e){return null==e?null:(0,r.isValidElement)(e)&&"object"==typeof e.props&&null!==e.props?cT(e.props):"object"!=typeof e||Array.isArray(e)?null:cT(e)}function uT(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(iT(r)||lT(r)||oT(r))&&(t[r]=e[r]);return t}var pT=["children","width","height","viewBox","className","style","title","desc"];function fT(){return fT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fT.apply(null,arguments)}var mT,hT=(0,r.forwardRef)((e,t)=>{var{children:n,width:s,height:o,viewBox:a,className:i,style:l,title:c,desc:d}=e,u=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,pT),p=a||{width:s,height:o,x:0,y:0},f=(0,Rf.$)("recharts-surface",i);return r.createElement("svg",fT({},uT(u),{className:f,width:s,height:o,style:l,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),r.createElement("title",null,c),r.createElement("desc",null,d),n)}),gT=null!==(mT=r["useId".toString()])&&void 0!==mT?mT:()=>{var[e]=r.useState(()=>Gf("uid-"));return e};function xT(e,t){var r=gT();return t||(e?"".concat(e,"-").concat(r):r)}var yT=wy(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(null!=t){var n=e[t];if(null!=n)return r?n.panoramaElementId:n.elementId}}),bT=wy(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(fC));return Array.from(new Set(t)).sort((e,t)=>e-t)},{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}}});function vT(e){var{zIndex:t,isPanorama:n}=e,s=xT("".concat(n?"recharts-zindex-panorama-":"recharts-zindex-").concat(t)),o=Sy();return(0,r.useLayoutEffect)(()=>(o(QM({zIndex:t,elementId:s,isPanorama:n})),()=>{o(VM({zIndex:t,isPanorama:n}))}),[o,t,s,n]),r.createElement("g",{id:s})}function jT(e){var{children:t,isPanorama:n}=e,s=Ty(bT);if(!s||0===s.length)return t;var o=s.filter(e=>e<0),a=s.filter(e=>e>0);return r.createElement(r.Fragment,null,o.map(e=>r.createElement(vT,{key:e,zIndex:e,isPanorama:n})),t,a.map(e=>r.createElement(vT,{key:e,zIndex:e,isPanorama:n})))}var wT=["children"];function NT(){return NT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NT.apply(null,arguments)}var kT={width:"100%",height:"100%",display:"block"},CT=(0,r.forwardRef)((e,t)=>{var n=kb(),s=Cb(),o=nT();if(!fm(n)||!fm(s))return null;var a,i,{children:l,otherAttributes:c,title:d,desc:u}=e;return null!=c&&(a="number"==typeof c.tabIndex?c.tabIndex:o?0:void 0,i="string"==typeof c.role?c.role:o?"application":void 0),r.createElement(hT,NT({},c,{title:d,desc:u,role:i,tabIndex:a,width:n,height:s,style:kT,ref:t}),l)}),_T=e=>{var{children:t}=e,n=Ty(bb);if(!n)return null;var{width:s,height:o,y:a,x:i}=n;return r.createElement(hT,{width:s,height:o,x:i,y:a},t)},ST=(0,r.forwardRef)((e,t)=>{var{children:n}=e,s=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,wT);return xb()?r.createElement(_T,null,r.createElement(jT,{isPanorama:!0},n)):r.createElement(CT,NT({ref:t},s),r.createElement(jT,{isPanorama:!1},n))}),ET=new(a(1747)),AT="recharts.syncEvent.tooltip",MT="recharts.syncEvent.brush";function TT(e){return e.tooltip.syncInteraction}var PT=["x","y"];function OT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function zT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?OT(Object(r),!0).forEach(function(t){qT(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function qT(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DT(){var e=Sy();(0,r.useEffect)(()=>{e(Ug())},[e]),function(){var e=Ty(rC),t=Ty(sC),n=Sy(),s=Ty(nC),o=Ty(RE),a=Sb(),i=jb(),l=Ty(e=>e.rootProps.className);(0,r.useEffect)(()=>{if(null==e)return sm;var r=(r,l,c)=>{var d;if(t!==c&&e===r)if("index"!==s){if(null!=o){var u;if("function"==typeof s){var p={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},f=s(o,p);u=o[f]}else"value"===s&&(u=o.find(e=>String(e.value)===l.payload.label));var{coordinate:m}=l.payload;if(null!=u&&!1!==l.payload.active&&null!=m&&null!=i){var{x:h,y:g}=m,x=Math.min(h,i.x+i.width),y=Math.min(g,i.y+i.height),b={x:"horizontal"===a?u.coordinate:x,y:"horizontal"===a?y:u.coordinate},v=ny({active:l.payload.active,coordinate:b,dataKey:l.payload.dataKey,index:String(u.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox});n(v)}else n(ny({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}))}}else if(i&&null!=l&&null!==(d=l.payload)&&void 0!==d&&d.coordinate&&l.payload.sourceViewBox){var j=l.payload.coordinate,{x:_x,y:w}=j,N=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(j,PT),{x:k,y:C,width:_,height:S}=l.payload.sourceViewBox,E=zT(zT({},N),{},{x:i.x+(_?(_x-k)/_:0)*i.width,y:i.y+(S?(w-C)/S:0)*i.height});n(zT(zT({},l),{},{payload:zT(zT({},l.payload),{},{coordinate:E})}))}else n(l)};return ET.on(AT,r),()=>{ET.off(AT,r)}},[l,n,t,e,s,o,a,i])}(),function(){var e=Ty(rC),t=Ty(sC),n=Sy();(0,r.useEffect)(()=>{if(null==e)return sm;var r=(r,s,o)=>{t!==o&&e===r&&n(ly(s))};return ET.on(MT,r),()=>{ET.off(MT,r)}},[n,t,e])}()}var IT=(0,r.createContext)(null),LT=(0,r.createContext)(null);function RT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function $T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?RT(Object(r),!0).forEach(function(t){BT(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function BT(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FT(){return FT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FT.apply(null,arguments)}var UT=()=>(DT(),null);function WT(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var HT=(0,r.forwardRef)((e,t)=>{var n,s,o=(0,r.useRef)(null),[a,i]=(0,r.useState)({containerWidth:WT(null===(n=e.style)||void 0===n?void 0:n.width),containerHeight:WT(null===(s=e.style)||void 0===s?void 0:s.height)}),l=(0,r.useCallback)((e,t)=>{i(r=>{var n=Math.round(e),s=Math.round(t);return r.containerWidth===n&&r.containerHeight===s?r:{containerWidth:n,containerHeight:s}})},[]),c=(0,r.useCallback)(e=>{if("function"==typeof t&&t(e),null!=e&&"undefined"!=typeof ResizeObserver){var{width:r,height:n}=e.getBoundingClientRect();l(r,n);var s=new ResizeObserver(e=>{var{width:t,height:r}=e[0].contentRect;l(t,r)});s.observe(e),o.current=s}},[t,l]);return(0,r.useEffect)(()=>()=>{var e=o.current;null!=e&&e.disconnect()},[l]),r.createElement(r.Fragment,null,r.createElement(Eb,{width:a.containerWidth,height:a.containerHeight}),r.createElement("div",FT({ref:c},e)))}),QT=(0,r.forwardRef)((e,t)=>{var{width:n,height:s}=e,[o,a]=(0,r.useState)({containerWidth:WT(n),containerHeight:WT(s)}),i=(0,r.useCallback)((e,t)=>{a(r=>{var n=Math.round(e),s=Math.round(t);return r.containerWidth===n&&r.containerHeight===s?r:{containerWidth:n,containerHeight:s}})},[]),l=(0,r.useCallback)(e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();i(r,n)}},[t,i]);return r.createElement(r.Fragment,null,r.createElement(Eb,{width:o.containerWidth,height:o.containerHeight}),r.createElement("div",FT({ref:l},e)))}),VT=(0,r.forwardRef)((e,t)=>{var{width:n,height:s}=e;return r.createElement(r.Fragment,null,r.createElement(Eb,{width:n,height:s}),r.createElement("div",FT({ref:t},e)))}),YT=(0,r.forwardRef)((e,t)=>{var{width:n,height:s}=e;return Qf(n)||Qf(s)?r.createElement(QT,FT({},e,{ref:t})):r.createElement(VT,FT({},e,{ref:t}))}),KT=(0,r.forwardRef)((e,t)=>{var{children:n,className:s,height:o,onClick:a,onContextMenu:i,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:p,onMouseUp:f,onTouchEnd:m,onTouchMove:h,onTouchStart:g,style:x,width:y,responsive:b,dispatchTouchEvents:v=!0}=e,j=(0,r.useRef)(null),w=Sy(),[N,k]=(0,r.useState)(null),[C,_]=(0,r.useState)(null),S=function(){var e=Sy(),[t,n]=(0,r.useState)(null),s=Ty(ab);return(0,r.useEffect)(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;pm(r)&&r!==s&&e(hy(r))}},[t,e,s]),n}(),E=vm(),A=(null==E?void 0:E.width)>0?E.width:y,M=(null==E?void 0:E.height)>0?E.height:o,T=(0,r.useCallback)(e=>{S(e),"function"==typeof t&&t(e),k(e),_(e),null!=e&&(j.current=e)},[S,t,k,_]),P=(0,r.useCallback)(e=>{w(xA(e)),w(CM({handler:a,reactEvent:e}))},[w,a]),O=(0,r.useCallback)(e=>{w(bA(e)),w(CM({handler:d,reactEvent:e}))},[w,d]),z=(0,r.useCallback)(e=>{w(Zx()),w(CM({handler:u,reactEvent:e}))},[w,u]),q=(0,r.useCallback)(e=>{w(bA(e)),w(CM({handler:p,reactEvent:e}))},[w,p]),D=(0,r.useCallback)(()=>{w(NM())},[w]),I=(0,r.useCallback)(e=>{w(wM(e.key))},[w]),L=(0,r.useCallback)(e=>{w(CM({handler:i,reactEvent:e}))},[w,i]),R=(0,r.useCallback)(e=>{w(CM({handler:l,reactEvent:e}))},[w,l]),$=(0,r.useCallback)(e=>{w(CM({handler:c,reactEvent:e}))},[w,c]),B=(0,r.useCallback)(e=>{w(CM({handler:f,reactEvent:e}))},[w,f]),F=(0,r.useCallback)(e=>{w(CM({handler:g,reactEvent:e}))},[w,g]),U=(0,r.useCallback)(e=>{v&&w(MM(e)),w(CM({handler:h,reactEvent:e}))},[w,v,h]),W=(0,r.useCallback)(e=>{w(CM({handler:m,reactEvent:e}))},[w,m]),H=function(e){return!0===e?HT:YT}(b);return r.createElement(IT.Provider,{value:N},r.createElement(LT.Provider,{value:C},r.createElement(H,{width:null!=A?A:null==x?void 0:x.width,height:null!=M?M:null==x?void 0:x.height,className:(0,Rf.$)("recharts-wrapper",s),style:$T({position:"relative",cursor:"default",width:A,height:M},x),onClick:P,onContextMenu:L,onDoubleClick:R,onFocus:D,onKeyDown:I,onMouseDown:$,onMouseEnter:O,onMouseLeave:z,onMouseMove:q,onMouseUp:B,onTouchEnd:W,onTouchMove:U,onTouchStart:F,ref:T},r.createElement(UT,null),n)))}),GT=wy([fb],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),XT=wy([GT,sb,ob],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),JT=()=>Ty(XT),ZT=(0,r.createContext)(void 0),eP=e=>{var{children:t}=e,[n]=(0,r.useState)("".concat(Gf("recharts"),"-clip")),s=JT();if(null==s)return null;var{x:o,y:a,width:i,height:l}=s;return r.createElement(ZT.Provider,{value:n},r.createElement("defs",null,r.createElement("clipPath",{id:n},r.createElement("rect",{x:o,y:a,height:l,width:i}))),t)},tP=["width","height","responsive","children","className","style","compact","title","desc"],rP=(0,r.forwardRef)((e,t)=>{var{width:n,height:s,responsive:o,children:a,className:i,style:l,compact:c,title:d,desc:u}=e,p=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,tP),f=cT(p);return c?r.createElement(r.Fragment,null,r.createElement(Eb,{width:n,height:s}),r.createElement(ST,{otherAttributes:f,title:d,desc:u},a)):r.createElement(KT,{className:i,style:l,width:n,height:s,responsive:null!=o&&o,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},r.createElement(ST,{otherAttributes:f,title:d,desc:u,ref:t},r.createElement(eP,null,a)))});function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function sP(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oP(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(t){sP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e),n=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==n[t]&&(e[t]=n[t]),e),r)}function aP(){return aP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aP.apply(null,arguments)}var iP={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",responsive:!1},lP=(0,r.forwardRef)(function(e,t){var n,s=oP(e.categoricalChartProps,iP),{chartName:o,defaultTooltipEventType:a,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,categoricalChartProps:c}=e,d={chartName:o,defaultTooltipEventType:a,validateTooltipEventTypes:i,tooltipPayloadSearcher:l,eventEmitter:void 0};return r.createElement(KM,{preloadedState:{options:d},reduxStoreName:null!==(n=c.id)&&void 0!==n?n:o},r.createElement(GM,{chartData:c.data}),r.createElement(tT,{layout:s.layout,margin:s.margin}),r.createElement(rT,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),r.createElement(rP,aP({},s,{ref:t})))}),cP=["axis"],dP=(0,r.forwardRef)((e,t)=>r.createElement(lP,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:cP,tooltipPayloadSearcher:$g,categoricalChartProps:e,ref:t}));function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pP(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fP=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(t){pP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{cacheSize:2e3,enableCache:!0}),mP=new class{constructor(e){(function(e,t,r){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;null!=r&&this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(fP.cacheSize),hP={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gP="recharts_measurement_span",xP=(e,t)=>{try{var r=document.getElementById(gP);r||((r=document.createElement("span")).setAttribute("id",gP),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,hP,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(e){return{width:0,height:0}}},yP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||IM)return{width:0,height:0};if(!fP.enableCache)return xP(e,t);var r=function(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",o=t.fontStyle||"",a=t.letterSpacing||"",i=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(o,"|").concat(a,"|").concat(i)}(e,t),n=mP.get(r);if(n)return n;var s=xP(e,t);return mP.set(r,s),s};class bP{static create(e){return new bP(e)}constructor(e){this.scale=e}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(e){var{bandAware:t,position:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var n=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+n;case"end":var s=this.bandwidth?this.bandwidth():0;return this.scale(e)+s}if(t){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+o}return this.scale(e)}}isInRange(e){var t=this.range(),r=t[0],n=t[t.length-1];return r<=n?e>=r&&e<=n:e>=n&&e<=r}}function vP(e,t){if(t<1)return[];if(1===t)return e;for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r}function jP(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var o=r();return e*(t-e*o/2-n)>=0&&e*(t+e*o/2-s)<=0}function wP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function NP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wP(Object(r),!0).forEach(function(t){kP(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kP(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CP(e,t,r){var n,{tick:s,ticks:o,viewBox:a,minTickGap:i,orientation:l,interval:c,tickFormatter:d,unit:u,angle:p}=e;if(!o||!o.length||!s)return[];if(Vf(c)||IM)return null!==(n=function(e,t){return vP(e,t+1)}(o,Vf(c)?c:0))&&void 0!==n?n:[];var f=[],m="top"===l||"bottom"===l?"width":"height",h=u&&"width"===m?yP(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(e,n)=>{var s="function"==typeof d?d(e.value,n):e.value;return"width"===m?function(e,t,r){return function(e){var{width:t,height:r}=e,n=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),s=n*Math.PI/180,o=Math.atan(r/t),a=s>o&&s<Math.PI-o?r/Math.sin(s):t/Math.cos(s);return Math.abs(a)}({width:e.width+t.width,height:e.height+t.height},r)}(yP(s,{fontSize:t,letterSpacing:r}),h,p):yP(s,{fontSize:t,letterSpacing:r})[m]},x=o.length>=2?Wf(o[1].coordinate-o[0].coordinate):1,y=function(e,t,r){var n="width"===r,{x:s,y:o,width:a,height:i}=e;return 1===t?{start:n?s:o,end:n?s+a:o+i}:{start:n?s+a:o+i,end:n?s:o}}(a,x,m);return"equidistantPreserveStart"===c?function(e,t,r,n,s){for(var o,a=(n||[]).slice(),{start:i,end:l}=t,c=0,d=1,u=i,p=function(){var t=null==n?void 0:n[c];if(void 0===t)return{v:vP(n,d)};var o,a=c,p=()=>(void 0===o&&(o=r(t,a)),o),f=t.coordinate,m=0===c||jP(e,f,p,u,l);m||(c=0,u=i,d+=1),m&&(u=f+e*(p()/2+s),c+=d)};d<=a.length;)if(o=p())return o.v;return[]}(x,y,g,o,i):(f="preserveStart"===c||"preserveStartEnd"===c?function(e,t,r,n,s,o){var a=(n||[]).slice(),i=a.length,{start:l,end:c}=t;if(o){var d=n[i-1],u=r(d,i-1),p=e*(d.coordinate+e*u/2-c);a[i-1]=d=NP(NP({},d),{},{tickCoord:p>0?d.coordinate-p*e:d.coordinate}),null!=d.tickCoord&&jP(e,d.tickCoord,()=>u,l,c)&&(c=d.tickCoord-e*(u/2+s),a[i-1]=NP(NP({},d),{},{isShow:!0}))}for(var f=o?i-1:i,m=function(t){var n,o=a[t],i=()=>(void 0===n&&(n=r(o,t)),n);if(0===t){var d=e*(o.coordinate-e*i()/2-l);a[t]=o=NP(NP({},o),{},{tickCoord:d<0?o.coordinate-d*e:o.coordinate})}else a[t]=o=NP(NP({},o),{},{tickCoord:o.coordinate});null!=o.tickCoord&&jP(e,o.tickCoord,i,l,c)&&(l=o.tickCoord+e*(i()/2+s),a[t]=NP(NP({},o),{},{isShow:!0}))},h=0;h<f;h++)m(h);return a}(x,y,g,o,i,"preserveStartEnd"===c):function(e,t,r,n,s){for(var o=(n||[]).slice(),a=o.length,{start:i}=t,{end:l}=t,c=function(t){var n,c=o[t],d=()=>(void 0===n&&(n=r(c,t)),n);if(t===a-1){var u=e*(c.coordinate+e*d()/2-l);o[t]=c=NP(NP({},c),{},{tickCoord:u>0?c.coordinate-u*e:c.coordinate})}else o[t]=c=NP(NP({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&jP(e,c.tickCoord,d,i,l)&&(l=c.tickCoord-e*(d()/2+s),o[t]=NP(NP({},c),{},{isShow:!0}))},d=a-1;d>=0;d--)c(d);return o}(x,y,g,o,i),f.filter(e=>e.isShow))}!function(e,t,r){(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(bP,"EPS",1e-4);var _P=["children","className"];function SP(){return SP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SP.apply(null,arguments)}var EP=r.forwardRef((e,t)=>{var{children:n,className:s}=e,o=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,_P),a=(0,Rf.$)("recharts-layer",s);return r.createElement("g",SP({className:a},uT(o),{ref:t}),n)}),AP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MP=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TP=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,PP=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,OP={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},zP=Object.keys(OP),qP="NaN";class DP{static parse(e){var t,[,r,n]=null!==(t=PP.exec(e))&&void 0!==t?t:[];return new DP(parseFloat(r),null!=n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,Hf(e)&&(this.unit=""),""===t||TP.test(t)||(this.num=NaN,this.unit=""),zP.includes(t)&&(this.num=function(e,t){return e*OP[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new DP(NaN,""):new DP(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new DP(NaN,""):new DP(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new DP(NaN,""):new DP(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new DP(NaN,""):new DP(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Hf(this.num)}}function IP(e){if(e.includes(qP))return qP;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,o]=null!==(r=AP.exec(t))&&void 0!==r?r:[],a=DP.parse(null!=n?n:""),i=DP.parse(null!=o?o:""),l="*"===s?a.multiply(i):a.divide(i);if(l.isNaN())return qP;t=t.replace(AP,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,p]=null!==(c=MP.exec(t))&&void 0!==c?c:[],f=DP.parse(null!=d?d:""),m=DP.parse(null!=p?p:""),h="+"===u?f.add(m):f.subtract(m);if(h.isNaN())return qP;t=t.replace(MP,h.toString())}return t}var LP=/\(([^()]*)\)/;function RP(e){var t=function(e){try{return function(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,r=e;null!=(t=LP.exec(r));){var[,n]=t;r=r.replace(LP,IP(n))}return r}(t),IP(t)}(e)}catch(e){return qP}}(e.slice(5,-1));return t===qP?"":t}var $P=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],BP=["dx","dy","angle","className","breakAll"];function FP(){return FP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FP.apply(null,arguments)}function UP(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var WP=/[ \f\n\r\t\v\u2028\u2029]+/,HP=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];return tm(t)||(s=r?t.toString().split(""):t.toString().split(WP)),{wordsWithComputedWidth:s.map(e=>({word:e,width:yP(e,n).width})),spaceWidth:r?0:yP("Â ",n).width}}catch(e){return null}};function QP(e){return"start"===e||"middle"===e||"end"===e||"inherit"===e}var VP=(e,t,r,n)=>e.reduce((e,s)=>{var{word:o,width:a}=s,i=e[e.length-1];if(i&&null!=a&&(null==t||n||i.width+a+r<Number(t)))i.words.push(o),i.width+=a+r;else{var l={words:[o],width:a};e.push(l)}return e},[]),YP=e=>e.reduce((e,t)=>e.width>t.width?e:t),KP=(e,t,r,n,s,o,a,i)=>{var l=e.slice(0,t),c=HP({breakAll:r,style:n,children:l+"â€¦"});if(!c)return[!1,[]];var d=VP(c.wordsWithComputedWidth,o,a,i);return[d.length>s||YP(d).width>Number(o),d]},GP=e=>[{words:tm(e)?[]:e.toString().split(WP),width:void 0}],XP="#808080",JP={angle:0,breakAll:!1,capHeight:"0.71em",fill:XP,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},ZP=(0,r.forwardRef)((e,t)=>{var n=oP(e,JP),{x:s,y:o,lineHeight:a,capHeight:i,fill:l,scaleToFit:c,textAnchor:d,verticalAnchor:u}=n,p=UP(n,$P),f=(0,r.useMemo)(()=>(e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:o,maxLines:a}=e;if((t||r)&&!IM){var i=HP({breakAll:o,children:n,style:s});if(!i)return GP(n);var{wordsWithComputedWidth:l,spaceWidth:c}=i;return((e,t,r,n,s)=>{var{maxLines:o,children:a,style:i,breakAll:l}=e,c=Vf(o),d=String(a),u=VP(t,n,r,s);if(!c||s)return u;if(!(u.length>o||YP(u).width>Number(n)))return u;for(var p,f=0,m=d.length-1,h=0;f<=m&&h<=d.length-1;){var g=Math.floor((f+m)/2),x=g-1,[y,b]=KP(d,x,l,i,o,n,r,s),[v]=KP(d,g,l,i,o,n,r,s);if(y||v||(f=g+1),y&&v&&(m=g-1),!y&&v){p=b;break}h++}return p||u})({breakAll:o,children:n,maxLines:a,style:s},l,c,t,Boolean(r))}return GP(n)})({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:c,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,c,p.style,p.width]),{dx:m,dy:h,angle:g,className:x,breakAll:y}=p,b=UP(p,BP);if(!Yf(s)||!Yf(o)||0===f.length)return null;var v,j=Number(s)+(Vf(m)?m:0),w=Number(o)+(Vf(h)?h:0);if(!pm(j)||!pm(w))return null;switch(u){case"start":v=RP("calc(".concat(i,")"));break;case"middle":v=RP("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(i," / 2))"));break;default:v=RP("calc(".concat(f.length-1," * -").concat(a,")"))}var N=[];if(c){var k=f[0].width,{width:C}=p;N.push("scale(".concat(Vf(C)&&Vf(k)?C/k:1,")"))}return g&&N.push("rotate(".concat(g,", ").concat(j,", ").concat(w,")")),N.length&&(b.transform=N.join(" ")),r.createElement("text",FP({},uT(b),{ref:t,x:j,y:w,className:(0,Rf.$)("recharts-text",x),textAnchor:d,fill:l.includes("url")?XP:l}),f.map((e,t)=>{var n=e.words.join(y?"":" ");return r.createElement("tspan",{x:j,dy:0===t?v:a,key:"".concat(n,"-").concat(t)},n)}))});function eO(e){var{zIndex:t,children:n}=e,s=void 0!==Sb()&&void 0!==t&&0!==t,o=xb(),a=Sy();(0,r.useLayoutEffect)(()=>s?(a(WM({zIndex:t})),()=>{a(HM({zIndex:t}))}):sm,[a,t,s]);var i=Ty(e=>yT(e,t,o));if(!s)return n;if(!i)return null;var l=document.getElementById(i);return l?(0,Ir.createPortal)(n,l):null}ZP.displayName="Text";var tO=["labelRef"];function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(t){sO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sO(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oO(){return oO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oO.apply(null,arguments)}var aO=(0,r.createContext)(null),iO=e=>{var{x:t,y:n,upperWidth:s,lowerWidth:o,width:a,height:i,children:l}=e,c=(0,r.useMemo)(()=>({x:t,y:n,upperWidth:s,lowerWidth:o,width:a,height:i}),[t,n,s,o,a,i]);return r.createElement(aO.Provider,{value:c},l)},lO=()=>{var e=(0,r.useContext)(aO),t=jb();return e||vb(t)},cO=(0,r.createContext)(null),dO=e=>null!=e&&"function"==typeof e,uO=e=>"cx"in e&&Vf(e.cx),pO={angle:0,offset:5,zIndex:fC.label,position:"middle",textBreakAll:!1};function fO(e){var t,n,s,o,a,i=oP(e,pO),{viewBox:l,position:c,value:d,children:u,content:p,className:f="",textBreakAll:m,labelRef:h}=i,g=(o=(0,r.useContext)(cO),a=Ty(OC),o||a),x=lO();if(!(t=null==l?"center"===c?x:null!=g?g:x:uO(l)?l:vb(l))||tm(d)&&tm(u)&&!(0,r.isValidElement)(p)&&"function"!=typeof p)return null;var y=nO(nO({},i),{},{viewBox:t});if((0,r.isValidElement)(p)){var{labelRef:b}=y,v=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(y,tO);return(0,r.cloneElement)(p,v)}if("function"==typeof p){if(n=(0,r.createElement)(p,y),(0,r.isValidElement)(n))return n}else n=(e=>{var{value:t,formatter:r}=e,n=tm(e.children)?t:e.children;return"function"==typeof r?r(n):n})(i);var j=uT(i);if(uO(t)){if("insideStart"===c||"insideEnd"===c||"end"===c)return((e,t,n,s,o)=>{var a,i,{offset:l,className:c}=e,{cx:d,cy:u,innerRadius:p,outerRadius:f,startAngle:m,endAngle:h,clockWise:g}=o,x=(p+f)/2,y=((e,t)=>Wf(t-e)*Math.min(Math.abs(t-e),360))(m,h),b=y>=0?1:-1;switch(t){case"insideStart":a=m+b*l,i=g;break;case"insideEnd":a=h-b*l,i=!g;break;case"end":a=h+b*l,i=g;break;default:throw new Error("Unsupported position ".concat(t))}i=y<=0?i:!i;var v=dC(d,u,x,a),j=dC(d,u,x,a+359*(i?1:-1)),w="M".concat(v.x,",").concat(v.y,"\n    A").concat(x,",").concat(x,",0,1,").concat(i?0:1,",\n    ").concat(j.x,",").concat(j.y),N=tm(e.id)?Gf("recharts-radial-line-"):e.id;return r.createElement("text",oO({},s,{dominantBaseline:"central",className:(0,Rf.$)("recharts-radial-bar-label",c)}),r.createElement("defs",null,r.createElement("path",{id:N,d:w})),r.createElement("textPath",{xlinkHref:"#".concat(N)},n))})(i,c,n,j,t);s=((e,t,r)=>{var{cx:n,cy:s,innerRadius:o,outerRadius:a,startAngle:i,endAngle:l}=e,c=(i+l)/2;if("outside"===r){var{x:_x,y:d}=dC(n,s,a+t,c);return{x:_x,y:d,textAnchor:_x>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var u=(o+a)/2,{x:p,y:f}=dC(n,s,u,c);return{x:p,y:f,textAnchor:"middle",verticalAnchor:"middle"}})(t,i.offset,i.position)}else s=((e,t)=>{var r,{parentViewBox:n,offset:s,position:o}=e;null==n||uO(n)||(r=n);var{x:a,y:i,upperWidth:l,lowerWidth:c,height:d}=t,u=a,p=a+(l-c)/2,f=(u+p)/2,m=(l+c)/2,h=u+l/2,g=d>=0?1:-1,x=g*s,y=g>0?"end":"start",b=g>0?"start":"end",v=l>=0?1:-1,j=v*s,w=v>0?"end":"start",N=v>0?"start":"end";if("top"===o)return nO(nO({},{x:u+l/2,y:i-x,textAnchor:"middle",verticalAnchor:y}),r?{height:Math.max(i-r.y,0),width:l}:{});if("bottom"===o)return nO(nO({},{x:p+c/2,y:i+d+x,textAnchor:"middle",verticalAnchor:b}),r?{height:Math.max(r.y+r.height-(i+d),0),width:c}:{});if("left"===o){var k={x:f-j,y:i+d/2,textAnchor:w,verticalAnchor:"middle"};return nO(nO({},k),r?{width:Math.max(k.x-r.x,0),height:d}:{})}if("right"===o){var C={x:f+m+j,y:i+d/2,textAnchor:N,verticalAnchor:"middle"};return nO(nO({},C),r?{width:Math.max(r.x+r.width-C.x,0),height:d}:{})}var _=r?{width:m,height:d}:{};return"insideLeft"===o?nO({x:f+j,y:i+d/2,textAnchor:N,verticalAnchor:"middle"},_):"insideRight"===o?nO({x:f+m-j,y:i+d/2,textAnchor:w,verticalAnchor:"middle"},_):"insideTop"===o?nO({x:u+l/2,y:i+x,textAnchor:"middle",verticalAnchor:b},_):"insideBottom"===o?nO({x:p+c/2,y:i+d-x,textAnchor:"middle",verticalAnchor:y},_):"insideTopLeft"===o?nO({x:u+j,y:i+x,textAnchor:N,verticalAnchor:b},_):"insideTopRight"===o?nO({x:u+l-j,y:i+x,textAnchor:w,verticalAnchor:b},_):"insideBottomLeft"===o?nO({x:p+j,y:i+d-x,textAnchor:N,verticalAnchor:y},_):"insideBottomRight"===o?nO({x:p+c-j,y:i+d-x,textAnchor:w,verticalAnchor:y},_):o&&"object"==typeof o&&(Vf(o.x)||Qf(o.x))&&(Vf(o.y)||Qf(o.y))?nO({x:a+Xf(o.x,m),y:i+Xf(o.y,d),textAnchor:"end",verticalAnchor:"end"},_):nO({x:h,y:i+d/2,textAnchor:"middle",verticalAnchor:"middle"},_)})(i,t);return r.createElement(eO,{zIndex:i.zIndex},r.createElement(ZP,oO({ref:h,className:(0,Rf.$)("recharts-label",f)},j,s,{textAnchor:QP(j.textAnchor)?j.textAnchor:s.textAnchor,breakAll:m}),n))}fO.displayName="Label";function mO(e){var{label:t,labelRef:n}=e;return((e,t,n)=>{if(!e)return null;var s={viewBox:t,labelRef:n};return!0===e?r.createElement(fO,oO({key:"label-implicit"},s)):Yf(e)?r.createElement(fO,oO({key:"label-implicit",value:e},s)):(0,r.isValidElement)(e)?e.type===fO?(0,r.cloneElement)(e,nO({key:"label-implicit"},s)):r.createElement(fO,oO({key:"label-implicit",content:e},s)):dO(e)?r.createElement(fO,oO({key:"label-implicit",content:e},s)):e&&"object"==typeof e?r.createElement(fO,oO({},e,{key:"label-implicit"},s)):null})(t,lO(),n)||null}var hO=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,gO=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var n=e;if((0,r.isValidElement)(e)&&(n=e.props),"object"!=typeof n&&"function"!=typeof n)return null;var s={};return Object.keys(n).forEach(e=>{oT(e)&&(s[e]=t||(t=>n[e](n,t)))}),s},xO=["axisLine","width","height","className","hide","ticks","axisType"];function yO(){return yO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yO.apply(null,arguments)}function bO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bO(Object(r),!0).forEach(function(t){jO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function jO(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wO={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:fC.axis};function NO(e){var{x:t,y:n,width:s,height:o,orientation:a,mirror:i,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var d=vO(vO(vO({},c),cT(l)),{},{fill:"none"});if("top"===a||"bottom"===a){var u=+("top"===a&&!i||"bottom"===a&&i);d=vO(vO({},d),{},{x1:t,y1:n+u*o,x2:t+s,y2:n+u*o})}else{var p=+("left"===a&&!i||"right"===a&&i);d=vO(vO({},d),{},{x1:t+p*s,y1:n,x2:t+p*s,y2:n+o})}return r.createElement("line",yO({},d,{className:(0,Rf.$)("recharts-cartesian-axis-line",Uf()(l,"className"))}))}function kO(e){var t,{option:n,tickProps:s,value:o}=e,a=(0,Rf.$)(s.className,"recharts-cartesian-axis-tick-value");if(r.isValidElement(n))t=r.cloneElement(n,vO(vO({},s),{},{className:a}));else if("function"==typeof n)t=n(vO(vO({},s),{},{className:a}));else{var i="recharts-cartesian-axis-tick-value";"boolean"!=typeof n&&(i=(0,Rf.$)(i,null==n?void 0:n.className)),t=r.createElement(ZP,yO({},s,{className:i}),o)}return t}var CO=(0,r.forwardRef)((e,t)=>{var{ticks:n=[],tick:s,tickLine:o,stroke:a,tickFormatter:i,unit:l,padding:c,tickTextProps:d,orientation:u,mirror:p,x:f,y:m,width:h,height:g,tickSize:x,tickMargin:y,fontSize:b,letterSpacing:v,getTicksConfig:j,events:w,axisType:N}=e,k=CP(vO(vO({},j),{},{ticks:n}),b,v),C=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(u,p),_=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(u,p),S=cT(j),E=dT(s),A={};"object"==typeof o&&(A=o);var M=vO(vO({},S),{},{fill:"none"},A),T=k.map(e=>vO({entry:e},function(e,t,r,n,s,o,a,i,l){var c,d,u,p,f,m,h=i?-1:1,g=e.tickSize||a,x=Vf(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":c=d=e.coordinate,m=(u=(p=r+ +!i*s)-h*g)-h*l,f=x;break;case"left":u=p=e.coordinate,f=(c=(d=t+ +!i*n)-h*g)-h*l,m=x;break;case"right":u=p=e.coordinate,f=(c=(d=t+ +i*n)+h*g)+h*l,m=x;break;default:c=d=e.coordinate,m=(u=(p=r+ +i*s)+h*g)+h*l,f=x}return{line:{x1:c,y1:u,x2:d,y2:p},tick:{x:f,y:m}}}(e,f,m,h,g,u,x,p,y))),P=T.map(e=>{var{entry:t,line:n}=e;return r.createElement(EP,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},o&&r.createElement("line",yO({},M,n,{className:(0,Rf.$)("recharts-cartesian-axis-tick-line",Uf()(o,"className"))})))}),O=T.map((e,t)=>{var{entry:n,tick:o}=e,u=vO(vO(vO(vO({textAnchor:C,verticalAnchor:_},S),{},{stroke:"none",fill:a},E),o),{},{index:t,payload:n,visibleTicksCount:k.length,tickFormatter:i,padding:c},d);return r.createElement(EP,yO({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(n.value,"-").concat(n.coordinate,"-").concat(n.tickCoord)},((e,t,r)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var n=null;return Object.keys(e).forEach(s=>{var o=e[s];oT(s)&&"function"==typeof o&&(n||(n={}),n[s]=((e,t,r)=>n=>(e(t,r,n),null))(o,t,r))}),n})(w,n,t)),s&&r.createElement(kO,{option:s,tickProps:u,value:"".concat("function"==typeof i?i(n.value,t):n.value).concat(l||"")}))});return r.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},O.length>0&&r.createElement(eO,{zIndex:fC.label},r.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},O)),P.length>0&&r.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},P))}),_O=(0,r.forwardRef)((e,t)=>{var{axisLine:n,width:s,height:o,className:a,hide:i,ticks:l,axisType:c}=e,d=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,xO),[u,p]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),h=(0,r.useRef)(null);(0,r.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:o=0}=e,a=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>a&&(a=t.width)}});var i=r?r.getBoundingClientRect().width:0,l=a+(s+o)+i+(r?n:0);return Math.round(l)}return 0})({ticks:h.current,label:null===(t=e.labelRef)||void 0===t?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=(0,r.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");h.current=t;var r=t[0];if(r){var n=window.getComputedStyle(r),s=n.fontSize,o=n.letterSpacing;s===u&&o===f||(p(s),m(o))}}},[u,f]);return i||null!=s&&s<=0||null!=o&&o<=0?null:r.createElement(eO,{zIndex:e.zIndex},r.createElement(EP,{className:(0,Rf.$)("recharts-cartesian-axis",a)},r.createElement(NO,{x:e.x,y:e.y,width:s,height:o,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:cT(e)}),r.createElement(CO,{ref:g,axisType:c,events:d,fontSize:u,getTicksConfig:e,height:e.height,letterSpacing:f,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),r.createElement(iO,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},r.createElement(mO,{label:e.label,labelRef:e.labelRef}),e.children)))}),SO=r.forwardRef((e,t)=>{var n=oP(e,wO);return r.createElement(_O,yO({},n,{ref:t}))});SO.displayName="CartesianAxis";var EO=["x1","y1","x2","y2","key"],AO=["offset"],MO=["xAxisId","yAxisId"],TO=["xAxisId","yAxisId"];function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function OO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?PO(Object(r),!0).forEach(function(t){zO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zO(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qO(){return qO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qO.apply(null,arguments)}function DO(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var IO=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:n,x:s,y:o,width:a,height:i,ry:l}=e;return r.createElement("rect",{x:s,y:o,ry:l,width:a,height:i,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function LO(e){var t,{option:n,lineItemProps:s}=e;if(r.isValidElement(n))t=r.cloneElement(n,s);else if("function"==typeof n)t=n(s);else{var o,{x1:a,y1:i,x2:l,y2:c,key:d}=s,u=null!==(o=cT(DO(s,EO)))&&void 0!==o?o:{},{offset:__}=u,p=DO(u,AO);t=r.createElement("line",qO({},p,{x1:a,y1:i,x2:l,y2:c,fill:"none",key:d}))}return t}function RO(e){var{x:t,width:n,horizontal:s=!0,horizontalPoints:o}=e;if(!s||!o||!o.length)return null;var{xAxisId:a,yAxisId:i}=e,l=DO(e,MO),c=o.map((e,o)=>{var a=OO(OO({},l),{},{x1:t,y1:e,x2:t+n,y2:e,key:"line-".concat(o),index:o});return r.createElement(LO,{key:"line-".concat(o),option:s,lineItemProps:a})});return r.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function $O(e){var{y:t,height:n,vertical:s=!0,verticalPoints:o}=e;if(!s||!o||!o.length)return null;var{xAxisId:a,yAxisId:i}=e,l=DO(e,TO),c=o.map((e,o)=>{var a=OO(OO({},l),{},{x1:e,y1:t,x2:e,y2:t+n,key:"line-".concat(o),index:o});return r.createElement(LO,{option:s,lineItemProps:a,key:"line-".concat(o)})});return r.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function BO(e){var{horizontalFill:t,fillOpacity:n,x:s,y:o,width:a,height:i,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||null==l)return null;var d=l.map(e=>Math.round(e+o-o)).sort((e,t)=>e-t);o!==d[0]&&d.unshift(0);var u=d.map((e,l)=>{var c=d[l+1]?d[l+1]-e:o+i-e;if(c<=0)return null;var u=l%t.length;return r.createElement("rect",{key:"react-".concat(l),y:e,x:s,height:c,width:a,stroke:"none",fill:t[u],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return r.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function FO(e){var{vertical:t=!0,verticalFill:n,fillOpacity:s,x:o,y:a,width:i,height:l,verticalPoints:c}=e;if(!t||!n||!n.length)return null;var d=c.map(e=>Math.round(e+o-o)).sort((e,t)=>e-t);o!==d[0]&&d.unshift(0);var u=d.map((e,t)=>{var c=d[t+1]?d[t+1]-e:o+i-e;if(c<=0)return null;var u=t%n.length;return r.createElement("rect",{key:"react-".concat(t),x:e,y:a,width:c,height:l,stroke:"none",fill:n[u],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return r.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var UO=(e,t)=>{var{xAxis:r,width:n,height:s,offset:o}=e;return Vy(CP(OO(OO(OO({},wO),r),{},{ticks:Yy(r,!0),viewBox:{x:0,y:0,width:n,height:s}})),o.left,o.left+o.width,t)},WO=(e,t)=>{var{yAxis:r,width:n,height:s,offset:o}=e;return Vy(CP(OO(OO(OO({},wO),r),{},{ticks:Yy(r,!0),viewBox:{x:0,y:0,width:n,height:s}})),o.top,o.top+o.height,t)},HO={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:fC.grid};function QO(e){var t=kb(),n=Cb(),s=Nb(),o=OO(OO({},oP(e,HO)),{},{x:Vf(e.x)?e.x:s.left,y:Vf(e.y)?e.y:s.top,width:Vf(e.width)?e.width:s.width,height:Vf(e.height)?e.height:s.height}),{xAxisId:a,yAxisId:i,x:l,y:c,width:d,height:u,syncWithTicks:p,horizontalValues:f,verticalValues:m}=o,h=xb(),g=Ty(e=>DS(e,"xAxis",a,h)),x=Ty(e=>DS(e,"yAxis",i,h));if(!(fm(d)&&fm(u)&&Vf(l)&&Vf(c)))return null;var y=o.verticalCoordinatesGenerator||UO,b=o.horizontalCoordinatesGenerator||WO,{horizontalPoints:v,verticalPoints:j}=o;if(!(v&&v.length||"function"!=typeof b)){var w=f&&f.length,N=b({yAxis:x?OO(OO({},x),{},{ticks:w?f:x.ticks}):void 0,width:null!=t?t:d,height:null!=n?n:u,offset:s},!!w||p);om(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(v=N)}if(!(j&&j.length||"function"!=typeof y)){var k=m&&m.length,C=y({xAxis:g?OO(OO({},g),{},{ticks:k?m:g.ticks}):void 0,width:null!=t?t:d,height:null!=n?n:u,offset:s},!!k||p);om(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(j=C)}return r.createElement(eO,{zIndex:o.zIndex},r.createElement("g",{className:"recharts-cartesian-grid"},r.createElement(IO,{fill:o.fill,fillOpacity:o.fillOpacity,x:o.x,y:o.y,width:o.width,height:o.height,ry:o.ry}),r.createElement(BO,qO({},o,{horizontalPoints:v})),r.createElement(FO,qO({},o,{verticalPoints:j})),r.createElement(RO,qO({},o,{offset:s,horizontalPoints:v,xAxis:g,yAxis:x})),r.createElement($O,qO({},o,{offset:s,verticalPoints:j,xAxis:g,yAxis:x}))))}QO.displayName="CartesianGrid";var VO=["domain","range"],YO=["domain","range"];function KO(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function GO(e,t){return e===t||!(!Array.isArray(e)||2!==e.length||!Array.isArray(t)||2!==t.length)&&e[0]===t[0]&&e[1]===t[1]}function XO(e,t){if(e===t)return!0;var{domain:r,range:n}=e,s=KO(e,VO),{domain:o,range:a}=t,i=KO(t,YO);return!!GO(r,o)&&!!GO(n,a)&&ZM(s,i)}var JO=["dangerouslySetInnerHTML","ticks"],ZO=["id"];function ez(){return ez=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ez.apply(null,arguments)}function tz(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function rz(e){var t=Sy(),n=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{null===n.current?t(_A(e)):n.current!==e&&t(SA({prev:n.current,next:e})),n.current=e},[e,t]),(0,r.useLayoutEffect)(()=>()=>{n.current&&(t(EA(n.current)),n.current=null)},[t]),null}var nz=e=>{var{xAxisId:t,className:n}=e,s=Ty(hb),o=xb(),a="xAxis",i=Ty(e=>bS(e,a,t,o)),l=Ty(e=>IS(e,a,t,o)),c=Ty(e=>_S(e,t)),d=Ty(e=>AS(e,t)),u=Ty(e=>YC(e,t));if(null==c||null==d||null==u)return null;var{dangerouslySetInnerHTML:p,ticks:f}=e,m=tz(e,JO),{id:h}=u,g=tz(u,ZO);return r.createElement(SO,ez({},m,g,{scale:i,x:d.x,y:d.y,width:c.width,height:c.height,className:(0,Rf.$)("recharts-".concat(a," ").concat(a),n),viewBox:s,ticks:l,axisType:a}))},sz={allowDataOverflow:VC.allowDataOverflow,allowDecimals:VC.allowDecimals,allowDuplicatedCategory:VC.allowDuplicatedCategory,angle:VC.angle,axisLine:wO.axisLine,height:VC.height,hide:!1,includeHidden:VC.includeHidden,interval:VC.interval,minTickGap:VC.minTickGap,mirror:VC.mirror,orientation:VC.orientation,padding:VC.padding,reversed:VC.reversed,scale:VC.scale,tick:VC.tick,tickCount:VC.tickCount,tickLine:wO.tickLine,tickSize:wO.tickSize,type:VC.type,xAxisId:0},oz=e=>{var t=oP(e,sz);return r.createElement(r.Fragment,null,r.createElement(rz,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),r.createElement(nz,t))},az=r.memo(oz,XO);az.displayName="XAxis";var iz=["dangerouslySetInnerHTML","ticks"],lz=["id"];function cz(){return cz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cz.apply(null,arguments)}function dz(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function uz(e){var t=Sy(),n=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{null===n.current?t(AA(e)):n.current!==e&&t(MA({prev:n.current,next:e})),n.current=e},[e,t]),(0,r.useLayoutEffect)(()=>()=>{n.current&&(t(TA(n.current)),n.current=null)},[t]),null}var pz=e=>{var{yAxisId:t,className:n,width:s,label:o}=e,a=(0,r.useRef)(null),i=(0,r.useRef)(null),l=Ty(hb),c=xb(),d=Sy(),u="yAxis",p=Ty(e=>bS(e,u,t,c)),f=Ty(e=>TS(e,t)),m=Ty(e=>MS(e,t)),h=Ty(e=>IS(e,u,t,c)),g=Ty(e=>XC(e,t));if((0,r.useLayoutEffect)(()=>{if("auto"===s&&f&&!dO(o)&&!(0,r.isValidElement)(o)&&null!=g){var e=a.current;if(e){var n=e.getCalculatedWidth();Math.round(f.width)!==Math.round(n)&&d(qA({id:t,width:n}))}}},[h,f,d,o,t,s,g]),null==f||null==m||null==g)return null;var{dangerouslySetInnerHTML:x,ticks:y}=e,b=dz(e,iz),{id:v}=g,j=dz(g,lz);return r.createElement(SO,cz({},b,j,{ref:a,labelRef:i,scale:p,x:m.x,y:m.y,tickTextProps:"auto"===s?{width:void 0}:{width:s},width:f.width,height:f.height,className:(0,Rf.$)("recharts-".concat(u," ").concat(u),n),viewBox:l,ticks:h,axisType:u}))},fz={allowDataOverflow:GC.allowDataOverflow,allowDecimals:GC.allowDecimals,allowDuplicatedCategory:GC.allowDuplicatedCategory,angle:GC.angle,axisLine:wO.axisLine,hide:!1,includeHidden:GC.includeHidden,interval:GC.interval,minTickGap:GC.minTickGap,mirror:GC.mirror,orientation:GC.orientation,padding:GC.padding,reversed:GC.reversed,scale:GC.scale,tick:GC.tick,tickCount:GC.tickCount,tickLine:wO.tickLine,tickSize:wO.tickSize,type:GC.type,width:GC.width,yAxisId:0},mz=e=>{var t=oP(e,fz);return r.createElement(r.Fragment,null,r.createElement(uz,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),r.createElement(pz,t))},hz=r.memo(mz,XO);function gz(){return gz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},gz.apply(null,arguments)}function xz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xz(Object(r),!0).forEach(function(t){bz(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bz(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vz(e){return Array.isArray(e)&&Yf(e[0])&&Yf(e[1])?e.join(" ~ "):e}hz.displayName="YAxis";var jz=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:s={},labelStyle:o={},payload:a,formatter:i,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:p,accessibilityLayer:f=!1}=e,m=yz({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),h=yz({margin:0},o),g=!tm(u),x=g?u:"",y=(0,Rf.$)("recharts-default-tooltip",c),b=(0,Rf.$)("recharts-tooltip-label",d);g&&p&&null!=a&&(x=p(u,a));var v=f?{role:"status","aria-live":"assertive"}:{};return r.createElement("div",gz({className:y,style:m},v),r.createElement("p",{className:b,style:h},r.isValidElement(x)?x:"".concat(x)),(()=>{if(a&&a.length){var e=(l?Oy()(a,l):a).map((e,n)=>{if("none"===e.type)return null;var o=e.formatter||i||vz,{value:l,name:c}=e,d=l,u=c;if(o){var p=o(l,c,e,n,a);if(Array.isArray(p))[d,u]=p;else{if(null==p)return null;d=p}}var f=yz({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},s);return r.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:f},Yf(u)?r.createElement("span",{className:"recharts-tooltip-item-name"},u):null,Yf(u)?r.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,r.createElement("span",{className:"recharts-tooltip-item-value"},d),r.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return r.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},wz="recharts-tooltip-wrapper",Nz={visibility:"hidden"};function kz(e){var{coordinate:t,translateX:r,translateY:n}=e;return(0,Rf.$)(wz,{["".concat(wz,"-right")]:Vf(r)&&t&&Vf(t.x)&&r>=t.x,["".concat(wz,"-left")]:Vf(r)&&t&&Vf(t.x)&&r<t.x,["".concat(wz,"-bottom")]:Vf(n)&&t&&Vf(t.y)&&n>=t.y,["".concat(wz,"-top")]:Vf(n)&&t&&Vf(t.y)&&n<t.y})}function Cz(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:o,reverseDirection:a,tooltipDimension:i,viewBox:l,viewBoxDimension:c}=e;if(o&&Vf(o[n]))return o[n];var d=r[n]-i-(s>0?s:0),u=r[n]+s;if(t[n])return a[n]?d:u;var p=l[n];return null==p?0:a[n]?d<p?Math.max(u,p):Math.max(d,p):null==c?0:u+i>p+c?Math.max(d,p):Math.max(u,p)}function _z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Sz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_z(Object(r),!0).forEach(function(t){Ez(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_z(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ez(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Az extends r.PureComponent{constructor(){super(...arguments),Ez(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Ez(this,"handleKeyDown",e=>{var t,r,n,s;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(r=this.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==t?t:0,y:null!==(n=null===(s=this.props.coordinate)||void 0===s?void 0:s.y)&&void 0!==n?n:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:s,children:o,coordinate:a,hasPayload:i,isAnimationActive:l,offset:c,position:d,reverseDirection:u,useTranslate3d:p,viewBox:f,wrapperStyle:m,lastBoundingBox:h,innerRef:g,hasPortalFromProps:x}=this.props,{cssClasses:y,cssProperties:b}=function(e){var t,r,n,{allowEscapeViewBox:s,coordinate:o,offsetTopLeft:a,position:i,reverseDirection:l,tooltipBox:c,useTranslate3d:d,viewBox:u}=e;return t=c.height>0&&c.width>0&&o?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=Cz({allowEscapeViewBox:s,coordinate:o,key:"x",offsetTopLeft:a,position:i,reverseDirection:l,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=Cz({allowEscapeViewBox:s,coordinate:o,key:"y",offsetTopLeft:a,position:i,reverseDirection:l,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:d}):Nz,{cssProperties:t,cssClasses:kz({translateX:r,translateY:n,coordinate:o})}}({allowEscapeViewBox:t,coordinate:a,offsetTopLeft:c,position:d,reverseDirection:u,tooltipBox:{height:h.height,width:h.width},useTranslate3d:p,viewBox:f}),v=x?{}:Sz(Sz({transition:l&&e?"transform ".concat(n,"ms ").concat(s):void 0},b),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&i?"visible":"hidden",position:"absolute",top:0,left:0}),j=Sz(Sz({},v),{},{visibility:!this.state.dismissed&&e&&i?"visible":"hidden"},m);return r.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:j,ref:g},o)}}var Mz=a(1081),Tz=a.n(Mz);function Pz(){}function Oz(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function zz(e){this._context=e}function qz(e){this._context=e}function Dz(e){this._context=e}zz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Oz(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Oz(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},qz.prototype={areaStart:Pz,areaEnd:Pz,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Oz(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Dz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Oz(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class Iz{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function Lz(e){this._context=e}function Rz(e){this._context=e}function $z(e){return new Rz(e)}function Bz(e){return e<0?-1:1}function Fz(e,t,r){var n=e._x1-e._x0,s=t-e._x1,o=(e._y1-e._y0)/(n||s<0&&-0),a=(r-e._y1)/(s||n<0&&-0),i=(o*s+a*n)/(n+s);return(Bz(o)+Bz(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(i))||0}function Uz(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Wz(e,t,r){var n=e._x0,s=e._y0,o=e._x1,a=e._y1,i=(o-n)/3;e._context.bezierCurveTo(n+i,s+i*t,o-i,a-i*r,o,a)}function Hz(e){this._context=e}function Qz(e){this._context=new Vz(e)}function Vz(e){this._context=e}function Yz(e){this._context=e}function Kz(e){var t,r,n=e.length-1,s=new Array(n),o=new Array(n),a=new Array(n);for(s[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(s[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)s[t]=(a[t]-s[t+1])/o[t];for(o[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-s[t+1];return[s,o]}function Gz(e,t){this._context=e,this._t=t}Lz.prototype={areaStart:Pz,areaEnd:Pz,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},Rz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Hz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Wz(this,this._t0,Uz(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Wz(this,Uz(this,r=Fz(this,e,t)),r);break;default:Wz(this,this._t0,r=Fz(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(Qz.prototype=Object.create(Hz.prototype)).point=function(e,t){Hz.prototype.point.call(this,t,e)},Vz.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,o){this._context.bezierCurveTo(t,e,n,r,o,s)}},Yz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=Kz(e),s=Kz(t),o=0,a=1;a<r;++o,++a)this._context.bezierCurveTo(n[0][o],s[0][o],n[1][o],s[1][o],e[a],t[a]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Gz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};const Xz=Math.PI,Jz=2*Xz,Zz=1e-6,eq=Jz-Zz;function tq(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class rq{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?tq:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return tq;const r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,s,o){this._append`C${+e},${+t},${+r},${+n},${this._x1=+s},${this._y1=+o}`}arcTo(e,t,r,n,s){if(e=+e,t=+t,r=+r,n=+n,(s=+s)<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,i=r-e,l=n-t,c=o-e,d=a-t,u=c*c+d*d;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(u>Zz)if(Math.abs(d*i-l*c)>Zz&&s){let p=r-o,f=n-a,m=i*i+l*l,h=p*p+f*f,g=Math.sqrt(m),x=Math.sqrt(u),y=s*Math.tan((Xz-Math.acos((m+u-h)/(2*g*x)))/2),b=y/x,v=y/g;Math.abs(b-1)>Zz&&this._append`L${e+b*c},${t+b*d}`,this._append`A${s},${s},0,0,${+(d*p>c*f)},${this._x1=e+v*i},${this._y1=t+v*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,r,n,s,o){if(e=+e,t=+t,o=!!o,(r=+r)<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(n),i=r*Math.sin(n),l=e+a,c=t+i,d=1^o,u=o?n-s:s-n;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Zz||Math.abs(this._y1-c)>Zz)&&this._append`L${l},${c}`,r&&(u<0&&(u=u%Jz+Jz),u>eq?this._append`A${r},${r},0,1,${d},${e-a},${t-i}A${r},${r},0,1,${d},${this._x1=l},${this._y1=c}`:u>Zz&&this._append`A${r},${r},0,${+(u>=Xz)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=t+r*Math.sin(s)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function nq(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{const e=Math.floor(r);if(!(e>=0))throw new RangeError(`invalid digits: ${r}`);t=e}return e},()=>new rq(t)}function sq(e){return e[0]}function oq(e){return e[1]}function aq(e,t){var r=Iy(!0),n=null,s=$z,o=null,a=nq(i);function i(i){var l,c,d,u=(i=Dy(i)).length,p=!1;for(null==n&&(o=s(d=a())),l=0;l<=u;++l)!(l<u&&r(c=i[l],l,i))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(c,l,i),+t(c,l,i));if(d)return o=null,d+""||null}return e="function"==typeof e?e:void 0===e?sq:Iy(e),t="function"==typeof t?t:void 0===t?oq:Iy(t),i.x=function(t){return arguments.length?(e="function"==typeof t?t:Iy(+t),i):e},i.y=function(e){return arguments.length?(t="function"==typeof e?e:Iy(+e),i):t},i.defined=function(e){return arguments.length?(r="function"==typeof e?e:Iy(!!e),i):r},i.curve=function(e){return arguments.length?(s=e,null!=n&&(o=s(n)),i):s},i.context=function(e){return arguments.length?(null==e?n=o=null:o=s(n=e),i):n},i}function iq(e,t,r){var n=null,s=Iy(!0),o=null,a=$z,i=null,l=nq(c);function c(c){var d,u,p,f,m,h=(c=Dy(c)).length,g=!1,x=new Array(h),y=new Array(h);for(null==o&&(i=a(m=l())),d=0;d<=h;++d){if(!(d<h&&s(f=c[d],d,c))===g)if(g=!g)u=d,i.areaStart(),i.lineStart();else{for(i.lineEnd(),i.lineStart(),p=d-1;p>=u;--p)i.point(x[p],y[p]);i.lineEnd(),i.areaEnd()}g&&(x[d]=+e(f,d,c),y[d]=+t(f,d,c),i.point(n?+n(f,d,c):x[d],r?+r(f,d,c):y[d]))}if(m)return i=null,m+""||null}function d(){return aq().defined(s).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?sq:Iy(+e),t="function"==typeof t?t:Iy(void 0===t?0:+t),r="function"==typeof r?r:void 0===r?oq:Iy(+r),c.x=function(t){return arguments.length?(e="function"==typeof t?t:Iy(+t),n=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:Iy(+t),c):e},c.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:Iy(+e),c):n},c.y=function(e){return arguments.length?(t="function"==typeof e?e:Iy(+e),r=null,c):t},c.y0=function(e){return arguments.length?(t="function"==typeof e?e:Iy(+e),c):t},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Iy(+e),c):r},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(r)},c.lineX1=function(){return d().x(n).y(t)},c.defined=function(e){return arguments.length?(s="function"==typeof e?e:Iy(!!e),c):s},c.curve=function(e){return arguments.length?(a=e,null!=o&&(i=a(o)),c):a},c.context=function(e){return arguments.length?(null==e?o=i=null:i=a(o=e),c):o},c}function lq(){return lq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lq.apply(null,arguments)}function cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?cq(Object(r),!0).forEach(function(t){uq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function uq(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pq={curveBasisClosed:function(e){return new qz(e)},curveBasisOpen:function(e){return new Dz(e)},curveBasis:function(e){return new zz(e)},curveBumpX:function(e){return new Iz(e,!0)},curveBumpY:function(e){return new Iz(e,!1)},curveLinearClosed:function(e){return new Lz(e)},curveLinear:$z,curveMonotoneX:function(e){return new Hz(e)},curveMonotoneY:function(e){return new Qz(e)},curveNatural:function(e){return new Yz(e)},curveStep:function(e){return new Gz(e,.5)},curveStepAfter:function(e){return new Gz(e,1)},curveStepBefore:function(e){return new Gz(e,0)}},fq=e=>pm(e.x)&&pm(e.y),mq=e=>null!=e.base&&fq(e.base)&&fq(e),hq=e=>e.x,gq=e=>e.y,xq=e=>{var{className:t,points:n,path:s,pathRef:o}=e;if(!(n&&n.length||s))return null;var a=n&&n.length?(e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:o=!1}=e,a=((e,t)=>{if("function"==typeof e)return e;var r="curve".concat(rm(e));return"curveMonotone"!==r&&"curveBump"!==r||!t?pq[r]||$z:pq["".concat(r).concat("vertical"===t?"Y":"X")]})(t,s),i=o?r.filter(fq):r;if(Array.isArray(n)){var l=r.map((e,t)=>dq(dq({},e),{},{base:n[t]}));return("vertical"===s?iq().y(gq).x1(hq).x0(e=>e.base.x):iq().x(hq).y1(gq).y0(e=>e.base.y)).defined(mq).curve(a)(o?l.filter(mq):l)}return("vertical"===s&&Vf(n)?iq().y(gq).x1(hq).x0(n):Vf(n)?iq().x(hq).y1(gq).y0(n):aq().x(hq).y(gq)).defined(fq).curve(a)(i)})(e):s;return r.createElement("path",lq({},cT(e),gO(e),{className:(0,Rf.$)("recharts-curve",t),d:null===a?void 0:a,ref:o}))},yq=["x","y","top","left","width","height","className"];function bq(){return bq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bq.apply(null,arguments)}function vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function jq(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wq=(e,t,r,n,s,o)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(o,",").concat(t,"h").concat(r),Nq=e=>{var{x:t=0,y:n=0,top:s=0,left:o=0,width:a=0,height:i=0,className:l}=e,c=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,yq),d=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vq(Object(r),!0).forEach(function(t){jq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:t,y:n,top:s,left:o,width:a,height:i},c);return Vf(t)&&Vf(n)&&Vf(a)&&Vf(i)&&Vf(s)&&Vf(o)?r.createElement("path",bq({},uT(d),{className:(0,Rf.$)("recharts-cross",l),d:wq(t,n,a,i,s,o)})):null};function kq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Cq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kq(Object(r),!0).forEach(function(t){_q(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _q(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Sq=(e,t,r)=>e.map(e=>{return"".concat((n=e,n.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(r);var n}).join(","),Eq=(e,t)=>Object.keys(t).reduce((r,n)=>Cq(Cq({},r),{},{[n]:e(n,t[n])}),{});function Aq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Mq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Aq(Object(r),!0).forEach(function(t){Tq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Tq(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pq=(e,t,r)=>e+(t-e)*r,Oq=e=>{var{from:t,to:r}=e;return t!==r},zq=(e,t,r)=>{var n=Eq((t,r)=>{if(Oq(r)){var[n,s]=e(r.from,r.to,r.velocity);return Mq(Mq({},r),{},{from:n,velocity:s})}return r},t);return r<1?Eq((e,t)=>Oq(t)?Mq(Mq({},t),{},{velocity:Pq(t.velocity,n[e].velocity,r),from:Pq(t.from,n[e].from,r)}):t,t):zq(e,n,r-1)};const qq=(e,t,r,n,s,o)=>{var a,i,l=(a=e,i=t,[Object.keys(a),Object.keys(i)].reduce((e,t)=>e.filter(e=>t.includes(e))));return null==r?()=>(s(Mq(Mq({},e),t)),()=>{}):!0===r.isStepper?function(e,t,r,n,s,o){var a,i=n.reduce((r,n)=>Mq(Mq({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),l=null,c=n=>{a||(a=n);var d=(n-a)/r.dt;i=zq(r,i,d),s(Mq(Mq(Mq({},e),t),Eq((e,t)=>t.from,i))),a=n,Object.values(i).filter(Oq).length&&(l=o.setTimeout(c))};return()=>(l=o.setTimeout(c),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,r,l,s,o):function(e,t,r,n,s,o,a){var i,l=null,c=s.reduce((r,n)=>Mq(Mq({},r),{},{[n]:[e[n],t[n]]}),{}),d=s=>{i||(i=s);var u=(s-i)/n,p=Eq((e,t)=>Pq(...t,r(u)),c);if(o(Mq(Mq(Mq({},e),t),p)),u<1)l=a.setTimeout(d);else{var f=Eq((e,t)=>Pq(...t,r(1)),c);o(Mq(Mq(Mq({},e),t),f))}};return()=>(l=a.setTimeout(d),()=>{var e;null===(e=l)||void 0===e||e()})}(e,t,r,n,l,s,o)};var Dq=1e-4,Iq=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Lq=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),Rq=(e,t)=>r=>{var n=Iq(e,t);return Lq(n,r)},$q=function(){return((e,t,r,n)=>{var s,o,a=Rq(e,r),i=Rq(t,n),l=(s=e,o=r,e=>{var t=[...Iq(s,o).map((e,t)=>e*t).slice(1),0];return Lq(t,e)}),c=e=>e>1?1:e<0?0:e,d=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var s=a(r)-t,o=l(r);if(Math.abs(s-t)<Dq||o<Dq)return i(r);r=c(r-s/o)}return i(r)};return d.isStepper=!1,d})(...function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var n,s=t[0].split("(");if("cubic-bezier"===s[0]&&4===(null===(n=s[1])||void 0===n?void 0:n.split(")")[0].split(",").length)){var o=s[1].split(")")[0].split(",").map(e=>parseFloat(e));return[o[0],o[1],o[2],o[3]]}}return 4===t.length?t:[0,0,1,1]}(...arguments))};class Bq{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,s=o=>{o-r>=t?e(o):"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(s))};return n=requestAnimationFrame(s),()=>{null!=n&&cancelAnimationFrame(n)}}}function Fq(){return e=new Bq,t=()=>null,r=!1,n=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var a=o,[i,...l]=a;return"number"==typeof i?void(n=e.setTimeout(s.bind(null,l),i)):(s(i),void(n=e.setTimeout(s.bind(null,l))))}"string"==typeof o&&t(o),"object"==typeof o&&t(o),"function"==typeof o&&o()}},{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),s(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e};var e,t,r,n,s}var Uq=(0,r.createContext)(Fq),Wq={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},Hq={t:0},Qq={t:1};function Vq(e){var t,n,s,o=oP(e,Wq),{isActive:a,canBegin:i,duration:l,easing:c,begin:d,onAnimationEnd:u,onAnimationStart:p,children:f}=o,m="auto"===a?!IM:a,h=(t=o.animationId,n=o.animationManager,s=(0,r.useContext)(Uq),(0,r.useMemo)(()=>null!=n?n:s(t),[t,n,s])),[g,x]=(0,r.useState)(m?Hq:Qq),y=(0,r.useRef)(null);return(0,r.useEffect)(()=>{m||x(Qq)},[m]),(0,r.useEffect)(()=>{if(!m||!i)return sm;var e=qq(Hq,Qq,(e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $q(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,s=(e,s,o)=>{var a=o+(-(e-s)*t-o*r)*n/1e3,i=o*n/1e3+e;return Math.abs(i-s)<Dq&&Math.abs(a)<Dq?[s,0]:[i,a]};return s.isStepper=!0,s.dt=n,s}();default:if("cubic-bezier"===e.split("(")[0])return $q(e)}return"function"==typeof e?e:null})(c),l,x,h.getTimeoutController());return h.start([p,d,()=>{y.current=e()},l,u]),()=>{h.stop(),y.current&&y.current(),u()}},[m,i,l,c,d,p,u,h]),f(g.t)}function Yq(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,r.useRef)(Gf(t)),s=(0,r.useRef)(e);return s.current!==e&&(n.current=Gf(t),s.current=e),n.current}var Kq=["radius"],Gq=["radius"];function Xq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Jq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xq(Object(r),!0).forEach(function(t){Zq(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xq(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zq(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eD(){return eD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eD.apply(null,arguments)}function tD(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var rD=(e,t,r,n,s)=>{var o,a=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0;if(a>0&&s instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=s[u]>a?a:s[u];o="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(o+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),o+="L ".concat(e+r-l*d[1],",").concat(t),d[1]>0&&(o+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+r,",").concat(t+i*d[1])),o+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(o+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+r-l*d[2],",").concat(t+n)),o+="L ".concat(e+l*d[3],",").concat(t+n),d[3]>0&&(o+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+n-i*d[3])),o+="Z"}else if(a>0&&s===+s&&s>0){var p=Math.min(a,s);o="M ".concat(e,",").concat(t+i*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(t,"\n            L ").concat(e+r-l*p,",").concat(t,"\n            A ").concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*p,"\n            L ").concat(e+r,",").concat(t+n-i*p,"\n            A ").concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(t+n,"\n            L ").concat(e+l*p,",").concat(t+n,"\n            A ").concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*p," Z")}else o="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return o},nD={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sD=e=>{var t=oP(e,nD),n=(0,r.useRef)(null),[s,o]=(0,r.useState)(-1);(0,r.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(e){}},[]);var{x:a,y:i,width:l,height:c,radius:d,className:u}=t,{animationEasing:p,animationDuration:f,animationBegin:m,isAnimationActive:h,isUpdateAnimationActive:g}=t,x=(0,r.useRef)(l),y=(0,r.useRef)(c),b=(0,r.useRef)(a),v=(0,r.useRef)(i),j=Yq((0,r.useMemo)(()=>({x:a,y:i,width:l,height:c,radius:d}),[a,i,l,c,d]),"rectangle-");if(a!==+a||i!==+i||l!==+l||c!==+c||0===l||0===c)return null;var w=(0,Rf.$)("recharts-rectangle",u);if(!g){var N=uT(t),{radius:k}=N,C=tD(N,Kq);return r.createElement("path",eD({},C,{radius:"number"==typeof d?d:void 0,className:w,d:rD(a,i,l,c,d)}))}var _=x.current,S=y.current,E=b.current,A=v.current,M="0px ".concat(-1===s?1:s,"px"),T="".concat(s,"px 0px"),P=Sq(["strokeDasharray"],f,"string"==typeof p?p:nD.animationEasing);return r.createElement(Vq,{animationId:j,key:j,canBegin:s>0,duration:f,easing:p,isActive:g,begin:m},e=>{var s,o=Zf(_,l,e),u=Zf(S,c,e),p=Zf(E,a,e),f=Zf(A,i,e);n.current&&(x.current=o,y.current=u,b.current=p,v.current=f),s=h?e>0?{transition:P,strokeDasharray:T}:{strokeDasharray:M}:{strokeDasharray:T};var m=uT(t),{radius:g}=m,j=tD(m,Gq);return r.createElement("path",eD({},j,{radius:"number"==typeof d?d:void 0,className:w,d:rD(p,f,o,u,d),ref:n,style:Jq(Jq({},s),t.style)}))})};function oD(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:o}=e;return{points:[dC(t,r,n,s),dC(t,r,n,o)],cx:t,cy:r,radius:n,startAngle:s,endAngle:o}}function aD(){return aD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aD.apply(null,arguments)}var iD=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:o,isExternal:a,cornerRadius:i,cornerIsExternal:l}=e,c=i*(a?1:-1)+n,d=Math.asin(i/c)/lC,u=l?s:s+o*d,p=l?s-o*d:s;return{center:dC(t,r,c,u),circleTangency:dC(t,r,n,u),lineTangency:dC(t,r,c*Math.cos(d*lC),p),theta:d}},lD=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:o,endAngle:a}=e,i=((e,t)=>Wf(t-e)*Math.min(Math.abs(t-e),359.999))(o,a),l=o+i,c=dC(t,r,s,o),d=dC(t,r,s,l),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(s,",").concat(s,",0,\n    ").concat(+(Math.abs(i)>180),",").concat(+(o>l),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(n>0){var p=dC(t,r,n,o),f=dC(t,r,n,l);u+="L ".concat(f.x,",").concat(f.y,"\n            A ").concat(n,",").concat(n,",0,\n            ").concat(+(Math.abs(i)>180),",").concat(+(o<=l),",\n            ").concat(p.x,",").concat(p.y," Z")}else u+="L ".concat(t,",").concat(r," Z");return u},cD={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},dD=e=>{var t=oP(e,cD),{cx:n,cy:s,innerRadius:o,outerRadius:a,cornerRadius:i,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:p}=t;if(a<o||d===u)return null;var f,m=(0,Rf.$)("recharts-sector",p),h=a-o,g=Xf(i,h,0,!0);return f=g>0&&Math.abs(d-u)<360?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:o,forceCornerRadius:a,cornerIsExternal:i,startAngle:l,endAngle:c}=e,d=Wf(c-l),{circleTangency:u,lineTangency:p,theta:f}=iD({cx:t,cy:r,radius:s,angle:l,sign:d,cornerRadius:o,cornerIsExternal:i}),{circleTangency:m,lineTangency:h,theta:g}=iD({cx:t,cy:r,radius:s,angle:c,sign:-d,cornerRadius:o,cornerIsExternal:i}),x=i?Math.abs(l-c):Math.abs(l-c)-f-g;if(x<0)return a?"M ".concat(p.x,",").concat(p.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):lD({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:l,endAngle:c});var y="M ".concat(p.x,",").concat(p.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(u.x,",").concat(u.y,"\n    A").concat(s,",").concat(s,",0,").concat(+(x>180),",").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(h.x,",").concat(h.y,"\n  ");if(n>0){var{circleTangency:b,lineTangency:v,theta:j}=iD({cx:t,cy:r,radius:n,angle:l,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:i}),{circleTangency:w,lineTangency:N,theta:k}=iD({cx:t,cy:r,radius:n,angle:c,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:i}),C=i?Math.abs(l-c):Math.abs(l-c)-j-k;if(C<0&&0===o)return"".concat(y,"L").concat(t,",").concat(r,"Z");y+="L".concat(N.x,",").concat(N.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(w.x,",").concat(w.y,"\n      A").concat(n,",").concat(n,",0,").concat(+(C>180),",").concat(+(d>0),",").concat(b.x,",").concat(b.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,"Z")}else y+="L".concat(t,",").concat(r,"Z");return y})({cx:n,cy:s,innerRadius:o,outerRadius:a,cornerRadius:Math.min(g,h/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):lD({cx:n,cy:s,innerRadius:o,outerRadius:a,startAngle:d,endAngle:u}),r.createElement("path",aD({},uT(t),{className:m,d:f}))};function uD(e,t,r){if("horizontal"===e)return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if("vertical"===e)return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(hO(t)){if("centric"===e){var{cx:n,cy:s,innerRadius:o,outerRadius:a,angle:i}=t,l=dC(n,s,o,i),c=dC(n,s,a,i);return[{x:l.x,y:l.y},{x:c.x,y:c.y}]}return oD(t)}}function pD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pD(Object(r),!0).forEach(function(t){mD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mD(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hD(){return hD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hD.apply(null,arguments)}function gD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function xD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gD(Object(r),!0).forEach(function(t){yD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yD(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bD(e){var{cursor:t,cursorComp:n,cursorProps:s}=e;return(0,r.isValidElement)(t)?(0,r.cloneElement)(t,s):(0,r.createElement)(n,s)}function vD(e){var t,n,s,o,{coordinate:a,payload:i,index:l,offset:c,tooltipAxisBandSize:d,layout:u,cursor:p,tooltipEventType:f,chartName:m}=e,h=a,g=i,x=l;if(!p||!h||"ScatterChart"!==m&&"axis"!==f)return null;if("ScatterChart"===m)n=h,s=Nq,o=fC.cursorLine;else if("BarChart"===m)n=function(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-s:r.left+.5,y:"horizontal"===e?r.top+.5:t.y-s,width:"horizontal"===e?n:r.width-1,height:"horizontal"===e?r.height-1:n}}(u,h,c,d),s=sD,o=fC.cursorRectangle;else if("radial"===u&&hO(h)){var{cx:y,cy:b,radius:v,startAngle:j,endAngle:w}=oD(h);n={cx:y,cy:b,startAngle:j,endAngle:w,innerRadius:v,outerRadius:v},s=dD,o=fC.cursorLine}else n={points:uD(u,h,c)},s=xq,o=fC.cursorLine;var N="object"==typeof p&&"className"in p?p.className:void 0,k=xD(xD(xD(xD({stroke:"#ccc",pointerEvents:"none"},c),n),dT(p)),{},{payload:g,payloadIndex:x,className:(0,Rf.$)("recharts-tooltip-cursor",N)});return r.createElement(eO,{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:o},r.createElement(bD,{cursor:p,cursorComp:s,cursorProps:k}))}function jD(e){var t,n,s,o=(t=Ty(w_),n=Ty(RE),s=Ty(DE),tb(t&&s?fD(fD({},t),{},{scale:s}):void 0,n)),a=Nb(),i=Sb(),l=Ty(tC);return null==o||null==a||null==i||null==l?null:r.createElement(vD,hD({},e,{offset:a,layout:i,tooltipAxisBandSize:o,chartName:l}))}function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ND(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(t){kD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kD(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CD(e){return e.dataKey}var _D=[],SD={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!IM,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function ED(e){var t,n,s=oP(e,SD),{active:o,allowEscapeViewBox:a,animationDuration:i,animationEasing:l,content:c,filterNull:d,isAnimationActive:u,offset:p,payloadUniqBy:f,position:m,reverseDirection:h,useTranslate3d:g,wrapperStyle:x,cursor:y,shared:b,trigger:v,defaultIndex:j,portal:w,axisId:N}=s,k=Sy(),C="number"==typeof j?String(j):j;(0,r.useEffect)(()=>{k(Gx({shared:b,trigger:v,axisId:N,active:o,defaultIndex:C}))},[k,b,v,N,o,C]);var _=jb(),S=nT(),E=function(e){return Ty(t=>HS(t,e))}(b),{activeIndex:A,isActive:M}=null!==(t=Ty(e=>mA(e,E,v,C)))&&void 0!==t?t:{},T=Ty(e=>fA(e,E,v,C)),P=Ty(e=>pA(e,E,v,C)),O=Ty(e=>uA(e,E,v,C)),z=T,q=(0,r.useContext)(IT),D=null!==(n=null!=o?o:M)&&void 0!==n&&n,[I,L]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,r.useState)({height:0,left:0,top:0,width:0}),s=(0,r.useCallback)(e=>{if(null!=e){var r=e.getBoundingClientRect(),s={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(s.height-t.height)>1||Math.abs(s.left-t.left)>1||Math.abs(s.top-t.top)>1||Math.abs(s.width-t.width)>1)&&n({height:s.height,left:s.left,top:s.top,width:s.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,s]}([z,D]),R="axis"===E?P:void 0;!function(e,t,n,s,o,a){var i=Ty(r=>((e,t,r)=>{if(null!=t){var n=tE(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(r,e,t)),l=Ty(sC),c=Ty(rC),d=Ty(nC),u=Ty(TT),p=null==u?void 0:u.active,f=jb();(0,r.useEffect)(()=>{if(!p&&null!=c&&null!=l){var e=ny({active:a,coordinate:n,dataKey:i,index:o,label:"number"==typeof s?String(s):s,sourceViewBox:f});ET.emit(AT,c,e,l)}},[p,n,i,o,s,l,c,d,a,f])}(E,v,O,R,A,D);var $=null!=w?w:q;if(null==$||null==_||null==E)return null;var B=null!=z?z:_D;D||(B=_D),d&&B.length&&(B=function(e,t,r){return!0===t?Tz()(e,r):"function"==typeof t?Tz()(e,t):e}(B.filter(e=>null!=e.value&&(!0!==e.hide||s.includeHidden)),f,CD));var F=B.length>0,U=r.createElement(Az,{allowEscapeViewBox:a,animationDuration:i,animationEasing:l,isAnimationActive:u,active:D,coordinate:O,hasPayload:F,offset:p,position:m,reverseDirection:h,useTranslate3d:g,viewBox:_,wrapperStyle:x,lastBoundingBox:I,innerRef:L,hasPortalFromProps:Boolean(w)},function(e,t){return r.isValidElement(e)?r.cloneElement(e,t):"function"==typeof e?r.createElement(e,t):r.createElement(jz,t)}(c,ND(ND({},s),{},{payload:B,label:R,active:D,activeIndex:A,coordinate:O,accessibilityLayer:S})));return r.createElement(r.Fragment,null,(0,Ir.createPortal)(U,$),D&&r.createElement(jD,{cursor:y,tooltipEventType:E,coordinate:O,payload:B,index:A}))}var AD=a(25),MD=a.n(AD),TD=["valueAccessor"],PD=["dataKey","clockWise","id","textBreakAll","zIndex"];function OD(){return OD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},OD.apply(null,arguments)}function zD(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var qD=e=>Array.isArray(e.value)?MD()(e.value):e.value,DD=(0,r.createContext)(void 0),ID=DD.Provider,LD=(0,r.createContext)(void 0);function RD(e){var{valueAccessor:t=qD}=e,n=zD(e,TD),{dataKey:s,clockWise:o,id:a,textBreakAll:i,zIndex:l}=n,c=zD(n,PD),d=(0,r.useContext)(DD),u=(0,r.useContext)(LD),p=d||u;return p&&p.length?r.createElement(eO,{zIndex:null!=l?l:fC.label},r.createElement(EP,{className:"recharts-label-list"},p.map((e,o)=>{var l,d=tm(s)?t(e,o):Hy(e&&e.payload,s),u=tm(a)?{}:{id:"".concat(a,"-").concat(o)};return r.createElement(fO,OD({key:"label-".concat(o)},uT(e),c,u,{fill:null!==(l=n.fill)&&void 0!==l?l:e.fill,parentViewBox:e.parentViewBox,value:d,textBreakAll:i,viewBox:e.viewBox,index:o,zIndex:0}))}))):null}function $D(e){var{label:t}=e;return t?!0===t?r.createElement(RD,{key:"labelList-implicit"}):r.isValidElement(t)||dO(t)?r.createElement(RD,{key:"labelList-implicit",content:t}):"object"==typeof t?r.createElement(RD,OD({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function BD(){return BD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BD.apply(null,arguments)}LD.Provider,RD.displayName="LabelList";var FD=e=>{var{cx:t,cy:n,r:s,className:o}=e,a=(0,Rf.$)("recharts-dot",o);return Vf(t)&&Vf(n)&&Vf(s)?r.createElement("circle",BD({},cT(e),gO(e),{className:a,cx:t,cy:n,r:s})):null};a(4363);var UD=e=>!e||"object"!=typeof e||!("clipDot"in e)||Boolean(e.clipDot),WD=["points"];function HD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function QD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?HD(Object(r),!0).forEach(function(t){VD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function VD(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YD(){return YD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},YD.apply(null,arguments)}function KD(e){var{option:t,dotProps:n,className:s}=e;if((0,r.isValidElement)(t))return(0,r.cloneElement)(t,n);if("function"==typeof t)return t(n);var o=(0,Rf.$)(s,"boolean"!=typeof t?t.className:""),a=null!=n?n:{},{points:i}=a,l=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(a,WD);return r.createElement(FD,YD({},l,{className:o}))}function GD(e){var{points:t,dot:n,className:s,dotClassName:o,dataKey:a,baseProps:i,needClip:l,clipPathId:c,zIndex:d=fC.scatter}=e;if(!function(e,t){return null!=e&&(!!t||1===e.length)}(t,n))return null;var u,p=UD(n),f=null==(u=n)?null:(0,r.isValidElement)(u)?uT(u.props):"object"!=typeof u||Array.isArray(u)?null:uT(u),m=t.map((e,s)=>{var l,c,d=QD(QD(QD({r:3},i),f),{},{index:s,cx:null!==(l=e.x)&&void 0!==l?l:void 0,cy:null!==(c=e.y)&&void 0!==c?c:void 0,dataKey:a,value:e.value,payload:e.payload,points:t});return r.createElement(KD,{key:"dot-".concat(s),option:n,dotProps:d,className:o})}),h={};return l&&null!=c&&(h.clipPath="url(#clipPath-".concat(p?"":"dots-").concat(c,")")),r.createElement(eO,{zIndex:d},r.createElement(EP,YD({className:s},h),m))}function XD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function JD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?XD(Object(r),!0).forEach(function(t){ZD(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ZD(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eI=e=>{var{point:t,childIndex:n,mainColor:s,activeDot:o,dataKey:a,clipPath:i}=e;if(!1===o||null==t.x||null==t.y)return null;var l,c=JD(JD(JD({},{index:n,dataKey:a,cx:t.x,cy:t.y,r:4,fill:null!=s?s:"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value}),dT(o)),gO(o));return l=(0,r.isValidElement)(o)?(0,r.cloneElement)(o,c):"function"==typeof o?o(c):r.createElement(FD,c),r.createElement(EP,{className:"recharts-active-dot",clipPath:i},l)};function tI(e){var{points:t,mainColor:n,activeDot:s,itemDataKey:o,clipPath:a,zIndex:i=fC.activeDot}=e,l=Ty(WE),c=Ty(JE);if(null==t||null==c)return null;var d=t.find(e=>c.includes(e.payload));return tm(d)?null:r.createElement(eO,{zIndex:i},r.createElement(eI,{point:d,childIndex:Number(l),mainColor:n,dataKey:o,activeDot:s,clipPath:a}))}function rI(e){var{tooltipEntrySettings:t}=e,n=Sy(),s=xb(),o=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{s||(null===o.current?n(Vx(t)):o.current!==t&&n(Yx({prev:o.current,next:t})),o.current=t)},[t,n,s]),(0,r.useLayoutEffect)(()=>()=>{o.current&&(n(Kx(o.current)),o.current=null)},[n]),null}var nI=["children"],sI={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},oI=(0,r.createContext)(sI);function aI(e){var{children:t}=e,n=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,nI);return r.createElement(oI.Provider,{value:n},t)}function iI(e,t){var r,n,s=Ty(t=>KC(t,e)),o=Ty(e=>JC(e,t)),a=null!==(r=null==s?void 0:s.allowDataOverflow)&&void 0!==r?r:VC.allowDataOverflow,i=null!==(n=null==o?void 0:o.allowDataOverflow)&&void 0!==n?n:GC.allowDataOverflow;return{needClip:a||i,needClipX:a,needClipY:i}}function lI(e){var{xAxisId:t,yAxisId:n,clipPathId:s}=e,o=JT(),{needClipX:a,needClipY:i,needClip:l}=iI(t,n);if(!l||!o)return null;var{x:c,y:d,width:u,height:p}=o;return r.createElement("clipPath",{id:"clipPath-".concat(s)},r.createElement("rect",{x:a?c:c-u/2,y:i?d:d-p/2,width:a?u:2*u,height:i?p:2*p}))}var cI=(e,t,r,n)=>RS(e,"xAxis",t,n),dI=(e,t,r,n)=>LS(e,"xAxis",t,n),uI=(e,t,r,n)=>RS(e,"yAxis",r,n),pI=(e,t,r,n)=>LS(e,"yAxis",r,n),fI=wy([_b,cI,uI,dI,pI],(e,t,r,n,s)=>Qy(e,"xAxis")?tb(t,n,!1):tb(r,s,!1));function mI(e){return"line"===e.type}var hI=wy([o_,(e,t,r,n,s)=>s],(e,t)=>e.filter(mI).find(e=>e.id===t)),gI=wy([_b,cI,uI,dI,pI,hI,fI,Ok],(e,t,r,n,s,o,a,i)=>{var{chartData:l,dataStartIndex:c,dataEndIndex:d}=i;if(null!=o&&null!=t&&null!=r&&null!=n&&null!=s&&0!==n.length&&0!==s.length&&null!=a&&("horizontal"===e||"vertical"===e)){var u,{dataKey:p,data:f}=o;if(null!=(u=null!=f&&f.length>0?f:null==l?void 0:l.slice(c,d+1)))return function(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:o,dataKey:a,bandSize:i,displayedData:l}=e;return l.map((e,l)=>{var c=Hy(e,a);if("horizontal"===t)return{x:Jy({axis:r,ticks:s,bandSize:i,entry:e,index:l}),y:tm(c)?null:n.scale(c),value:c,payload:e};var d=tm(c)?null:r.scale(c),u=Jy({axis:n,ticks:o,bandSize:i,entry:e,index:l});return null==d||null==u?null:{x:d,y:u,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataKey:p,bandSize:a,displayedData:u})}});function xI(e){var{legendPayload:t}=e,n=Sy(),s=xb(),o=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{s||(null===o.current?n(oM(t)):o.current!==t&&n(aM({prev:o.current,next:t})),o.current=t)},[n,s,t]),(0,r.useLayoutEffect)(()=>()=>{o.current&&(n(iM(o.current)),o.current=null)},[n]),null}var yI=(0,r.createContext)(void 0),bI=e=>{var{id:t,type:n,children:s}=e,o=xT("recharts-".concat(n),t);return r.createElement(yI.Provider,{value:o},s(o))},vI=e=>{var t=Sy(),n=(0,r.useRef)(null);return(0,r.useLayoutEffect)(()=>{null===n.current?t(LA(e)):n.current!==e&&t(RA({prev:n.current,next:e})),n.current=e},[t,e]),(0,r.useLayoutEffect)(()=>()=>{n.current&&(t($A(n.current)),n.current=null)},[t]),null},jI=(0,r.memo)(vI),wI=a(2938),NI=a.n(wI);function kI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function CI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kI(Object(r),!0).forEach(function(t){_I(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _I(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SI(){return SI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SI.apply(null,arguments)}var EI=(e,t,r,n,s)=>{var o,a=r-n;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+r,",").concat(t),o+="L ".concat(e+r-a/2,",").concat(t+s),(o+="L ".concat(e+r-a/2-n,",").concat(t+s))+"L ".concat(e,",").concat(t," Z")},AI={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},MI=e=>{var t=oP(e,AI),{x:n,y:s,upperWidth:o,lowerWidth:a,height:i,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:p}=t,f=(0,r.useRef)(null),[m,h]=(0,r.useState)(-1),g=(0,r.useRef)(o),x=(0,r.useRef)(a),y=(0,r.useRef)(i),b=(0,r.useRef)(n),v=(0,r.useRef)(s),j=Yq(e,"trapezoid-");if((0,r.useEffect)(()=>{if(f.current&&f.current.getTotalLength)try{var e=f.current.getTotalLength();e&&h(e)}catch(e){}},[]),n!==+n||s!==+s||o!==+o||a!==+a||i!==+i||0===o&&0===a||0===i)return null;var w=(0,Rf.$)("recharts-trapezoid",l);if(!p)return r.createElement("g",null,r.createElement("path",SI({},uT(t),{className:w,d:EI(n,s,o,a,i)})));var N=g.current,k=x.current,C=y.current,_=b.current,S=v.current,E="0px ".concat(-1===m?1:m,"px"),A="".concat(m,"px 0px"),M=Sq(["strokeDasharray"],d,c);return r.createElement(Vq,{animationId:j,key:j,canBegin:m>0,duration:d,easing:c,isActive:p,begin:u},e=>{var l=Zf(N,o,e),c=Zf(k,a,e),d=Zf(C,i,e),u=Zf(_,n,e),p=Zf(S,s,e);f.current&&(g.current=l,x.current=c,y.current=d,b.current=u,v.current=p);var m=e>0?{transition:M,strokeDasharray:A}:{strokeDasharray:E};return r.createElement("path",SI({},uT(t),{className:w,d:EI(u,p,l,c,d),ref:f,style:CI(CI({},m),t.style)}))})};Math.abs,Math.atan2;const TI=Math.cos,PI=(Math.max,Math.min,Math.sin),OI=Math.sqrt,zI=Math.PI,qI=2*zI,DI={draw(e,t){const r=OI(t/zI);e.moveTo(r,0),e.arc(0,0,r,0,qI)}},II={draw(e,t){const r=OI(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},LI=OI(1/3),RI=2*LI,$I={draw(e,t){const r=OI(t/RI),n=r*LI;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},BI={draw(e,t){const r=OI(t),n=-r/2;e.rect(n,n,r,r)}},FI=PI(zI/10)/PI(7*zI/10),UI=PI(qI/10)*FI,WI=-TI(qI/10)*FI,HI={draw(e,t){const r=OI(.8908130915292852*t),n=UI*r,s=WI*r;e.moveTo(0,-r),e.lineTo(n,s);for(let t=1;t<5;++t){const o=qI*t/5,a=TI(o),i=PI(o);e.lineTo(i*r,-a*r),e.lineTo(a*n-i*s,i*n+a*s)}e.closePath()}},QI=OI(3),VI={draw(e,t){const r=-OI(t/(3*QI));e.moveTo(0,2*r),e.lineTo(-QI*r,-r),e.lineTo(QI*r,-r),e.closePath()}},YI=-.5,KI=OI(3)/2,GI=1/OI(12),XI=3*(GI/2+1),JI={draw(e,t){const r=OI(t/XI),n=r/2,s=r*GI,o=n,a=r*GI+r,i=-o,l=a;e.moveTo(n,s),e.lineTo(o,a),e.lineTo(i,l),e.lineTo(YI*n-KI*s,KI*n+YI*s),e.lineTo(YI*o-KI*a,KI*o+YI*a),e.lineTo(YI*i-KI*l,KI*i+YI*l),e.lineTo(YI*n+KI*s,YI*s-KI*n),e.lineTo(YI*o+KI*a,YI*a-KI*o),e.lineTo(YI*i+KI*l,YI*l-KI*i),e.closePath()}};OI(3),OI(3);var ZI=["type","size","sizeType"];function eL(){return eL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},eL.apply(null,arguments)}function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(t){nL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nL(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sL={symbolCircle:DI,symbolCross:II,symbolDiamond:$I,symbolSquare:BI,symbolStar:HI,symbolTriangle:VI,symbolWye:JI},oL=Math.PI/180,aL=e=>{var{type:t="circle",size:n=64,sizeType:s="area"}=e,o=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,ZI),a=rL(rL({},o),{},{type:t,size:n,sizeType:s}),i="circle";"string"==typeof t&&(i=t);var{className:l,cx:c,cy:d}=a,u=uT(a);return Vf(c)&&Vf(d)&&Vf(n)?r.createElement("path",eL({},u,{className:(0,Rf.$)("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:(()=>{var e=(e=>{var t="symbol".concat(rm(e));return sL[t]||DI})(i),t=function(e,t){let r=null,n=nq(s);function s(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return e="function"==typeof e?e:Iy(e||DI),t="function"==typeof t?t:Iy(void 0===t?64:+t),s.type=function(t){return arguments.length?(e="function"==typeof t?t:Iy(t),s):e},s.size=function(e){return arguments.length?(t="function"==typeof e?e:Iy(+e),s):t},s.context=function(e){return arguments.length?(r=null==e?null:e,s):r},s}().type(e).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*oL;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,s,i)),r=t();if(null!==r)return r})()})):null};aL.registerSymbol=(e,t)=>{sL["symbol".concat(rm(e))]=t};var iL=["option","shapeType","propTransformer","activeClassName"];function lL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function cL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lL(Object(r),!0).forEach(function(t){dL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function dL(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uL(e,t){return cL(cL({},t),e)}function pL(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return r.createElement(sD,n);case"trapezoid":return r.createElement(MI,n);case"sector":return r.createElement(dD,n);case"symbols":if(function(e){return"symbols"===e}(t))return r.createElement(aL,n);break;case"curve":return r.createElement(xq,n);default:return null}}function fL(e){var t,{option:n,shapeType:s,propTransformer:o=uL,activeClassName:a="recharts-active-shape"}=e,i=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,iL);if((0,r.isValidElement)(n))t=(0,r.cloneElement)(n,cL(cL({},i),function(e){return(0,r.isValidElement)(e)?e.props:e}(n)));else if("function"==typeof n)t=n(i);else if(NI()(n)&&"boolean"!=typeof n){var l=o(n,i);t=r.createElement(pL,{shapeType:s,elementProps:l})}else{var c=i;t=r.createElement(pL,{shapeType:s,elementProps:c})}return i.isActive?r.createElement(EP,{className:a},t):t}var mL=["id"],hL=["type","layout","connectNulls","needClip","shape"],gL=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function xL(){return xL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xL.apply(null,arguments)}function yL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yL(Object(r),!0).forEach(function(t){vL(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yL(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vL(e,t,r){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jL(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var wL=e=>{var{dataKey:t,name:r,stroke:n,legendType:s,hide:o}=e;return[{inactive:o,dataKey:t,type:s,color:n,value:nb(r,t),payload:e}]},NL=r.memo(e=>{var{dataKey:t,data:n,stroke:s,strokeWidth:o,fill:a,name:i,hide:l,unit:c,tooltipType:d}=e,u={dataDefinedOnItem:n,positions:void 0,settings:{stroke:s,strokeWidth:o,fill:a,dataKey:t,nameKey:void 0,name:nb(i,t),hide:l,type:d,color:s,unit:c}};return r.createElement(rI,{tooltipEntrySettings:u})}),kL=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function CL(e,t){for(var r=e.length%2!=0?[...e,0]:e,n=[],s=0;s<t;++s)n=[...n,...r];return n}function _L(e){var{clipPathId:t,points:n,props:s}=e,{dot:o,dataKey:a,needClip:i}=s,{id:l}=s,c=cT(jL(s,mL));return r.createElement(GD,{points:n,dot:o,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:c,needClip:i,clipPathId:t})}function SL(e){var{showLabels:t,children:n,points:s}=e,o=(0,r.useMemo)(()=>null==s?void 0:s.map(e=>{var t,r,n={x:null!==(t=e.x)&&void 0!==t?t:0,y:null!==(r=e.y)&&void 0!==r?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return bL(bL({},n),{},{value:e.value,payload:e.payload,viewBox:n,parentViewBox:void 0,fill:void 0})}),[s]);return r.createElement(ID,{value:t?o:void 0},n)}function EL(e){var{clipPathId:t,pathRef:n,points:s,strokeDasharray:o,props:a}=e,{type:i,layout:l,connectNulls:c,needClip:d,shape:u}=a,p=bL(bL({},uT(jL(a,hL))),{},{fill:"none",className:"recharts-line-curve",clipPath:d?"url(#clipPath-".concat(t,")"):void 0,points:s,type:i,layout:l,connectNulls:c,strokeDasharray:null!=o?o:a.strokeDasharray});return r.createElement(r.Fragment,null,(null==s?void 0:s.length)>1&&r.createElement(fL,xL({shapeType:"curve",option:u},p,{pathRef:n})),r.createElement(_L,{points:s,clipPathId:t,props:a}))}function AL(e){var{clipPathId:t,props:n,pathRef:s,previousPointsRef:o,longestAnimatedLengthRef:a}=e,{points:i,strokeDasharray:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:p,animateNewValues:f,width:m,height:h,onAnimationEnd:g,onAnimationStart:x}=n,y=o.current,b=Yq(i,"recharts-line-"),v=(0,r.useRef)(b),[j,w]=(0,r.useState)(!1),N=!j,k=(0,r.useCallback)(()=>{"function"==typeof g&&g(),w(!1)},[g]),C=(0,r.useCallback)(()=>{"function"==typeof x&&x(),w(!0)},[x]),_=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(s.current),S=(0,r.useRef)(0);v.current!==b&&(S.current=a.current,v.current=b);var E=S.current;return r.createElement(SL,{points:i,showLabels:N},n.children,r.createElement(Vq,{animationId:b,begin:d,duration:u,isActive:c,easing:p,onAnimationEnd:k,onAnimationStart:C,key:b},e=>{var d,u=Zf(E,_+E,e),p=Math.min(u,_);if(c)if(l){var g="".concat(l).split(/[,\s]+/gim).map(e=>parseFloat(e));d=((e,t,r)=>{var n=r.reduce((e,t)=>e+t);if(!n)return kL(t,e);for(var s=Math.floor(e/n),o=e%n,a=t-e,i=[],l=0,c=0;l<r.length;c+=r[l],++l)if(c+r[l]>o){i=[...r.slice(0,l),o-c];break}var d=i.length%2==0?[0,a]:[a];return[...CL(r,s),...i,...d].map(e=>"".concat(e,"px")).join(", ")})(p,_,g)}else d=kL(_,p);else d=null==l?void 0:String(l);if(e>0&&_>0&&(o.current=i,a.current=Math.max(a.current,p)),y){var x=y.length/i.length,b=1===e?i:i.map((t,r)=>{var n=Math.floor(r*x);if(y[n]){var s=y[n];return bL(bL({},t),{},{x:Zf(s.x,t.x,e),y:Zf(s.y,t.y,e)})}return bL(bL({},t),{},f?{x:Zf(2*m,t.x,e),y:Zf(h/2,t.y,e)}:{x:t.x,y:t.y})});return o.current=b,r.createElement(EL,{props:n,points:b,clipPathId:t,pathRef:s,strokeDasharray:d})}return r.createElement(EL,{props:n,points:i,clipPathId:t,pathRef:s,strokeDasharray:d})}),r.createElement($D,{label:n.label}))}function ML(e){var{clipPathId:t,props:n}=e,s=(0,r.useRef)(null),o=(0,r.useRef)(0),a=(0,r.useRef)(null);return r.createElement(AL,{props:n,clipPathId:t,previousPointsRef:s,longestAnimatedLengthRef:o,pathRef:a})}var TL=(e,t)=>{var r,n;return{x:null!==(r=e.x)&&void 0!==r?r:void 0,y:null!==(n=e.y)&&void 0!==n?n:void 0,value:e.value,errorVal:Hy(e.payload,t)}};class PL extends r.Component{render(){var{hide:e,dot:t,points:n,className:s,xAxisId:o,yAxisId:a,top:i,left:l,width:c,height:d,id:u,needClip:p,zIndex:f}=this.props;if(e)return null;var m=(0,Rf.$)("recharts-line",s),h=u,{r:g,strokeWidth:x}=function(e){var t=dT(e);if(null!=t){var{r,strokeWidth:n}=t,s=Number(r),o=Number(n);return(Number.isNaN(s)||s<0)&&(s=3),(Number.isNaN(o)||o<0)&&(o=2),{r:s,strokeWidth:o}}return{r:3,strokeWidth:2}}(t),y=UD(t),b=2*g+x,v=p?"url(#clipPath-".concat(y?"":"dots-").concat(h,")"):void 0;return r.createElement(eO,{zIndex:f},r.createElement(EP,{className:m},p&&r.createElement("defs",null,r.createElement(lI,{clipPathId:h,xAxisId:o,yAxisId:a}),!y&&r.createElement("clipPath",{id:"clipPath-dots-".concat(h)},r.createElement("rect",{x:l-b/2,y:i-b/2,width:c+b,height:d+b}))),r.createElement(aI,{xAxisId:o,yAxisId:a,data:n,dataPointFormatter:TL,errorBarOffset:0},r.createElement(ML,{props:this.props,clipPathId:h}))),r.createElement(tI,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:v}))}}var OL={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:fC.line,type:"linear"};function zL(e){var t=oP(e,OL),{activeDot:n,animateNewValues:s,animationBegin:o,animationDuration:a,animationEasing:i,connectNulls:l,dot:c,hide:d,isAnimationActive:u,label:p,legendType:f,xAxisId:m,yAxisId:h,id:g}=t,x=jL(t,gL),{needClip:y}=iI(m,h),b=JT(),v=Sb(),j=xb(),w=Ty(e=>gI(e,m,h,j,g));if("horizontal"!==v&&"vertical"!==v||null==w||null==b)return null;var{height:N,width:k,x:C,y:_}=b;return r.createElement(PL,xL({},x,{id:g,connectNulls:l,dot:c,activeDot:n,animateNewValues:s,animationBegin:o,animationDuration:a,animationEasing:i,isAnimationActive:u,hide:d,label:p,legendType:f,xAxisId:m,yAxisId:h,points:w,layout:v,height:N,width:k,left:C,top:_,needClip:y}))}function qL(e){var t=oP(e,OL),n=xb();return r.createElement(bI,{id:t.id,type:"line"},e=>r.createElement(r.Fragment,null,r.createElement(xI,{legendPayload:wL(t)}),r.createElement(NL,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),r.createElement(jI,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),r.createElement(zL,xL({},t,{id:e}))))}var DL=r.memo(qL,ZM);DL.displayName="Line";const IL=()=>{const e=(0,Ye.getApiConfig)();return e.endpoints?.custom_api||`${e.api_url}/quiz-extended/v1`},LL=async(e,t=null,r=null)=>{let n=`${IL()}/user-stats/questions?course_id=${e}`;t&&(n+=`&lesson_id=${t}`),r&&(n+=`&difficulty=${r}`);const{data:s}=await(0,Ke.qb)(n);return s},RL=async e=>{const t=IL(),{data:r}=await(0,Ke.qb)(`${t}/user-stats/performance-by-lesson?course_id=${e}`);return r},$L=async e=>{const t=IL(),{data:r}=await(0,Ke.qb)(`${t}/user-stats/weak-spots?course_id=${e}`);return r},BL=async e=>{const t=IL(),{data:r}=await(0,Ke.qb)(`${t}/user-stats/difficulty-matrix?course_id=${e}`);return r},FL=({courseId:e,lessonId:t=null,compact:n=!1,isDarkMode:s,pageColors:a})=>{const{t:i}=(0,o.Bd)(),{getColor:l,isDarkMode:c}=(0,se.DP)(),{formatScore:d,isPercentage:u}=qt(),p=null!=s?s:c,f=a||{text:p?"#f9fafb":"#1a202c",textMuted:p?"#9ca3af":"#6b7280",background:p?"#1f2937":"#ffffff",border:p?"#374151":"#e5e7eb",cardBg:p?"#1f2937":"#ffffff"},[m,h]=(0,r.useState)("week"),[g,x]=(0,r.useState)([]),[y,b]=(0,r.useState)(!0),[v,j]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(e){b(!0),j(null);try{console.log(`ðŸ“ˆ Fetching evolution for course ${e}, lesson ${t}, period: ${m}`);const r=await(async(e,t="week",r=null)=>{let n=`${IL()}/user-stats/score-evolution?course_id=${e}&period=${t}`;r&&(n+=`&lesson_id=${r}`);const{data:s}=await(0,Ke.qb)(n);return s})(e,m,t);console.log("ðŸ“ˆ Evolution API Response:",r);const n=(r.data||[]).map(e=>({date:new Date(e.date).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit"}),fullDate:e.date,score:e.score,attempts:e.attempts}));x(n)}catch(e){console.error("Error fetching score evolution:",e),j(e.message)}finally{b(!1)}}})()},[e,m,t]);const w=(0,r.useMemo)(()=>{if(g.length<2)return null;const e=g[0].score,t=g[g.length-1].score-e;return Math.abs(t)<.1?"stable":t>0?"up":"down"},[g]),N=({active:e,payload:t})=>{if(e&&t&&t.length){const e=t[0].payload;return(0,be.jsxs)("div",{className:"rounded-lg shadow-lg p-3 border",style:{backgroundColor:l("background","#ffffff"),borderColor:l("primary","#3b82f6")},children:[(0,be.jsx)("p",{className:"text-sm font-medium mb-1",style:{color:l("primary","#1a202c")},children:e.fullDate}),(0,be.jsxs)("p",{className:"text-lg font-bold",style:{color:l("primary","#3b82f6")},children:[i("statistics.score"),": ",d(e.score)]}),(0,be.jsxs)("p",{className:"text-xs",style:{color:`${l("primary","#1a202c")}80`},children:[e.attempts," ",1===e.attempts?i("statistics.attempt"):i("statistics.attempts")]})]})}return null};return y?(0,be.jsx)("div",{className:"rounded-lg border "+(n?"p-3":"shadow-sm p-6"),style:{backgroundColor:f.cardBg,borderColor:f.border},children:(0,be.jsx)("div",{className:"flex items-center justify-center "+(n?"h-48":"h-64"),children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2",style:{borderColor:l("primary","#3b82f6")}})})}):v?(0,be.jsx)("div",{className:"rounded-lg border "+(n?"p-3":"shadow-sm p-6"),style:{backgroundColor:f.cardBg,borderColor:f.border},children:(0,be.jsx)("p",{className:"text-red-500 text-center text-xs",children:i("statistics.chart.error")})}):0===g.length?(0,be.jsxs)("div",{className:"rounded-lg border "+(n?"p-3":"shadow-sm p-6"),style:{backgroundColor:f.cardBg,borderColor:f.border},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,be.jsx)(sr.A,{size:n?16:24,style:{color:f.text}}),(0,be.jsx)("h3",{className:"font-bold "+(n?"text-sm":"text-xl"),style:{color:f.text},children:i("statistics.chart.title")})]}),(0,be.jsx)("p",{className:"text-center "+(n?"py-4 text-xs":"py-8"),style:{color:f.textMuted},children:i("statistics.chart.noData")})]}):(0,be.jsxs)("div",{className:"rounded-lg border "+(n?"p-3":"shadow-sm p-4 sm:p-6"),style:{backgroundColor:f.cardBg,borderColor:f.border},children:[(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between "+(n?"gap-2 mb-3":"gap-4 mb-6"),children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(sr.A,{size:n?14:24,style:{color:f.text}}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h3",{className:"font-bold "+(n?"text-xs":"text-lg sm:text-xl"),style:{color:f.text},children:i("statistics.chart.title")}),w&&!n&&(0,be.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(()=>{switch(w){case"up":return(0,be.jsx)(ar.A,{size:18,className:"text-green-500"});case"down":return(0,be.jsx)(ir,{size:18,className:"text-red-500"});case"stable":return(0,be.jsx)(jr.A,{size:18,className:"text-yellow-500"});default:return null}})(),(0,be.jsx)("span",{className:"text-xs sm:text-sm",style:{color:f.textMuted},children:(()=>{if(!w||g.length<2)return"";const e=g[0].score,t=g[g.length-1].score,r=Math.abs(t-e);switch(w){case"up":return i("statistics.chart.trendUp",{diff:d(r)});case"down":return i("statistics.chart.trendDown",{diff:d(r)});case"stable":return i("statistics.chart.trendStable");default:return""}})()})]})]})]}),(0,be.jsx)("div",{className:"flex "+(n?"gap-1":"gap-2"),children:["week","month","all"].map(e=>(0,be.jsx)("button",{onClick:()=>h(e),className:`${n?"px-2 py-1 text-xs":"px-3 py-1.5 text-sm"} rounded-lg font-medium transition-all ${m===e?"shadow-sm":"opacity-60 hover:opacity-100"}`,style:{backgroundColor:m===e?l("primary","#3b82f6"):"transparent",color:m===e?"#ffffff":f.text,border:m===e?"none":`1px solid ${f.border}`},children:i(`statistics.chart.period.${e}`)},e))})]}),(0,be.jsx)(wm,{width:"100%",height:n?180:300,children:(0,be.jsxs)(dP,{data:g,margin:{top:5,right:n?10:20,left:0,bottom:5},children:[(0,be.jsx)(QO,{strokeDasharray:"3 3",stroke:f.border}),(0,be.jsx)(az,{dataKey:"date",stroke:f.textMuted,style:{fontSize:n?"10px":"12px"},tick:{fill:f.textMuted}}),(0,be.jsx)(hz,{stroke:f.textMuted,style:{fontSize:n?"10px":"12px"},domain:[0,u?100:10],tickFormatter:e=>d(e),tick:{fill:f.textMuted},width:n?30:40}),(0,be.jsx)(ED,{content:(0,be.jsx)(N,{})}),(0,be.jsx)(DL,{type:"monotone",dataKey:"score",stroke:p?l("accent","#f59e0b"):l("primary","#3b82f6"),strokeWidth:n?2:3,dot:{fill:p?l("accent","#f59e0b"):l("primary","#3b82f6"),r:n?3:4},activeDot:{r:n?4:6}})]})})]})};var UL=a(6844);const WL=(0,le.A)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),HL=(0,le.A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),QL=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),n=(0,re.Zp)(),{getColor:s,isDarkMode:i}=(0,se.DP)(),{formatScore:l,convertScore:c,format:d,isPercentage:u}=qt(),{course:p}=Gt(t),f=p?.title?.rendered||p?.title||"",m={text:i?"#f9fafb":"#1a202c",textMuted:i?"#9ca3af":"#6b7280",background:i?"#1f2937":"#ffffff",secondaryBg:i?"#111827":"#f3f4f6",border:i?s("accent","#f59e0b")+"60":s("primary","#3b82f6")+"40",borderSubtle:i?"#374151":"#e5e7eb",cardBg:i?"#1f2937":"#ffffff",accent:s("accent","#f59e0b"),primary:s("primary","#3b82f6"),headerBg:i?s("accent","#f59e0b"):s("primary","#3b82f6"),labelColor:i?"#ffffff":s("primary","#3b82f6")},[h,g]=(0,r.useState)(!1),[x,y]=(0,r.useState)(!0),[b,v]=(0,r.useState)([]),[j,w]=(0,r.useState)([]),[N,k]=(0,r.useState)(null),[C,_]=(0,r.useState)(null),[S,E]=(0,r.useState)(null),[A,M]=(0,r.useState)(null),[T,P]=(0,r.useState)(!1),[O,z]=(0,r.useState)("easy"),[q,D]=(0,r.useState)("desc"),[I,L]=(0,r.useState)("without"),[R,$]=(0,r.useState)(null),[B,F]=(0,r.useState)(!1),[U,W]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(t){y(!0);try{const[e,r,n,s,o,a]=await Promise.all([RL(t),$L(t),BL(t),kn(t),Nn(t,{page:1,perPage:20,withRisk:!1}),LL(t,R,O)]);console.log("ðŸ“Š Question Stats API Response:",a);const i=e.data?.lessons||e.data||[];v(i),w(r.data||[]),k(n.data||{}),_(s.data),E(o?.data?.statistics||null),M(a?.data||a||null)}catch(e){console.error("âŒ Error fetching statistics:",e)}finally{y(!1)}}})()},[t]),(0,r.useEffect)(()=>{(async()=>{if(t)try{console.log("ðŸ” Refetching Question Stats with filters:",{courseId:t,lessonId:R,difficulty:O});const e=await LL(t,R,O);console.log("ðŸ“Š Question Stats Response (filtered):",e),M(e?.data||e||null)}catch(e){console.error("âŒ Error refetching question stats:",e)}})()},[t,R,O]);const H=(0,r.useMemo)(()=>{const e=b?.reduce((e,t)=>e+(t.quizzes_completed||0),0)||0,t=b?.reduce((e,t)=>e+(t.total_quizzes||0),0)||0;if(!b||0===b.length)return null;let r=0;if(void 0!==C?.average_score)r=C.average_score;else if(b.length>0){const e=b.filter(e=>e.avg_score>0);e.length>0&&(r=e.reduce((e,t)=>e+t.avg_score,0)/e.length)}const n=t>0?e/t*100:0,s=b?.filter(e=>e.quizzes_completed>0).length||0;let o=null,a=null;return b.length>0&&(o=b.reduce((e,t)=>t.avg_score>e.avg_score?t:e),a=b.reduce((e,t)=>t.avg_score<e.avg_score?t:e)),{avgScore:r,completedQuizzes:e,completedLessons:s,totalQuizzes:t,progressPercentage:n,bestLesson:o,worstLesson:a}},[C,b]),Q=(0,r.useMemo)(()=>b&&0!==b.length?[...b.filter(e=>e.total_quizzes>0)].sort((e,t)=>"desc"===q?t.avg_score-e.avg_score:e.avg_score-t.avg_score):[],[b,q]),V=(0,r.useMemo)(()=>b&&0!==b.length?[...b.filter(e=>e.total_quizzes>0)].sort((e,t)=>e.avg_score-t.avg_score):[],[b]),Y=((0,r.useMemo)(()=>b&&0!==b.length?[...b.filter(e=>e.total_quizzes>0)].sort((e,t)=>e.avg_score-t.avg_score).slice(0,5):[],[b]),({value:e,color:t,height:r="h-2",showPercentage:n=!1})=>(0,be.jsxs)("div",{className:"w-full",children:[(0,be.jsx)("div",{className:`w-full rounded-full ${r} overflow-hidden`,style:{backgroundColor:`${t}20`},children:(0,be.jsx)("div",{className:"h-full rounded-full transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,e))}%`,backgroundColor:t}})}),n&&(0,be.jsx)("div",{className:"flex justify-end mt-1",children:(0,be.jsxs)("span",{className:"text-xs font-medium",style:{color:t},children:[e.toFixed(0),"%"]})})]})),K=e=>e>=8?"#22c55e":e>=6?"#eab308":"#ef4444";return x?(0,be.jsx)(jn,{courseId:t,courseName:f,sectionName:e("statistics.title"),children:(0,be.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2",style:{borderColor:s("primary","#3b82f6")}})})}):(0,be.jsxs)(jn,{courseId:t,courseName:f,sectionName:e("statistics.title"),children:[(0,be.jsxs)("div",{className:"relative h-full",children:[(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(T?"-translate-x-full":"translate-x-0"),children:(0,be.jsx)("div",{className:"h-full overflow-y-auto",children:(0,be.jsxs)("div",{className:"max-w-7xl mx-auto px-3 py-4",children:[(0,be.jsxs)("div",{className:"space-y-3",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(UL.A,{size:16,style:{color:m.text}}),(0,be.jsx)("h2",{className:"text-sm font-bold uppercase tracking-wide",style:{color:m.text},children:e("statistics.title")})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2",children:[(()=>{const t=S?.top_20_cutoff_without_risk,r=S?.top_20_cutoff_with_risk,n=U?r:t,s=null!=t&&t>0&&(H?.avgScore||0)>=t,o=U?S?.avg_score_with_risk||0:S?.avg_score_without_risk||0;return(0,be.jsxs)("div",{className:"col-span-2 rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:m.cardBg,borderColor:m.border},children:[(0,be.jsxs)("div",{className:"px-3 py-1.5 flex items-center justify-between",style:{backgroundColor:m.headerBg},children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[s?(0,be.jsx)(nr.A,{size:14,style:{color:"#ffffff"}}):(0,be.jsx)(ar.A,{size:14,style:{color:"#ffffff"}}),(0,be.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider",style:{color:"#ffffff"},children:e("statistics.averageScore")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("button",{onClick:()=>W(!U),className:"px-2 py-0.5 text-[10px] font-bold rounded-full transition-all duration-200 shadow-sm",style:{backgroundColor:i?"#ffffff":U?m.accent:"#ffffff",color:i?m.secondaryBg:U?"#ffffff":m.primary},children:U?"Con riesgo":"Sin riesgo"}),(0,be.jsxs)("button",{onClick:()=>g(!0),className:"flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-bold transition-all duration-200 shadow-sm",style:{backgroundColor:"#ffffff",color:i?m.secondaryBg:m.accent},title:e("statistics.ranking"),children:[(0,be.jsx)(Tr.A,{size:12,style:{color:i?m.secondaryBg:m.accent}}),(0,be.jsxs)("span",{children:["#",C?.position||"-"]}),C?.total_users&&(0,be.jsxs)("span",{style:{color:i?m.secondaryBg:m.primary},children:["/",C.total_users]})]})]})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2",children:[(0,be.jsxs)("div",{className:"p-3",style:{borderRight:`1px solid ${m.border}`},children:[(0,be.jsx)("p",{className:"text-xs mb-1 font-medium",style:{color:m.labelColor},children:"Mi nota"}),(0,be.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,be.jsx)("span",{className:"text-2xl font-bold",style:{color:s?"#22c55e":m.text},children:H?l(H.avgScore):"-"}),(0,be.jsxs)("span",{className:"text-xs",style:{color:m.labelColor},children:["/ ",u?"100":"10"]})]}),s?(0,be.jsxs)("div",{className:"flex items-center gap-1 mt-1",children:[(0,be.jsx)(Oe.A,{size:11,style:{color:"#22c55e"}}),(0,be.jsx)("span",{className:"text-xs font-medium",style:{color:"#22c55e"},children:"Top 20%"})]}):(0,be.jsx)("div",{className:"mt-1 h-4"})]}),(0,be.jsxs)("div",{className:"p-3",children:[(0,be.jsx)("p",{className:"text-xs font-medium mb-1",style:{color:m.labelColor},children:"Media del curso"}),(0,be.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,be.jsx)("span",{className:"text-2xl font-bold",style:{color:m.text},children:S?l(o):"-"}),(0,be.jsxs)("span",{className:"text-xs",style:{color:m.labelColor},children:["/ ",u?"100":"10"]})]}),n>0&&(0,be.jsxs)("div",{className:"flex items-center gap-1 mt-1 px-1.5 py-0.5 rounded text-xs",style:{backgroundColor:i?"#92400e":"#fef3c7"},children:[(0,be.jsx)(Mr,{size:10,style:{color:i?"#fcd34d":"#d97706"}}),(0,be.jsxs)("span",{style:{color:i?"#fcd34d":"#92400e"},children:["Nota de corte: ",(0,be.jsx)("strong",{children:l(n)})]})]})]})]})]})})(),(0,be.jsxs)("div",{className:"rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:m.cardBg,borderColor:m.border},children:[(0,be.jsxs)("div",{className:"px-3 py-1.5 flex items-center justify-between",style:{backgroundColor:m.headerBg},children:[(0,be.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-white",children:e("statistics.completedQuizzes")}),(0,be.jsx)(Mr,{size:14,className:"text-white"})]}),(0,be.jsxs)("div",{className:"p-3",children:[(0,be.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,be.jsx)("span",{className:"text-2xl font-bold",style:{color:i?"#ffffff":"#475569"},children:H?.completedQuizzes||0}),(0,be.jsxs)("span",{className:"text-xs font-medium",style:{color:m.labelColor},children:["/ ",H?.totalQuizzes||0]})]}),H&&H.totalQuizzes>0&&(0,be.jsx)("div",{className:"mt-2",children:(0,be.jsx)(Y,{value:H.progressPercentage,color:"#64748b",height:"h-1"})})]})]}),(0,be.jsxs)("div",{className:"rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:m.cardBg,borderColor:m.border},children:[(0,be.jsxs)("div",{className:"px-3 py-1.5 flex items-center justify-between",style:{backgroundColor:m.headerBg},children:[(0,be.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-white",children:e("statistics.bestPerformance")}),(0,be.jsx)(nr.A,{size:14,className:"text-white"})]}),(0,be.jsx)("div",{className:"p-3",children:H?.bestLesson?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,be.jsx)("span",{className:"text-2xl font-bold",style:{color:i?"#34d399":"#059669"},children:l(H.bestLesson.avg_score)}),(0,be.jsxs)("span",{className:"text-xs font-medium",style:{color:m.labelColor},children:["/ ",u?"100":"10"]})]}),(0,be.jsx)("p",{className:"text-xs mt-1 truncate font-medium",style:{color:m.labelColor},children:H.bestLesson.lesson_title})]}):(0,be.jsx)("p",{className:"text-xs",style:{color:m.labelColor},children:e("statistics.noDataYet")})})]})]})]}),b&&b.length>0&&(0,be.jsxs)("div",{className:"mt-3 flex items-center gap-2 flex-wrap",children:[(0,be.jsx)(Ms.A,{size:14,style:{color:m.textMuted}}),(0,be.jsx)("span",{className:"text-xs font-medium",style:{color:m.textMuted},children:"Filtrar:"}),(0,be.jsxs)("select",{value:R||"",onChange:e=>$(e.target.value?parseInt(e.target.value):null),className:"text-xs px-2 py-1 rounded border focus:outline-none focus:ring-1",style:{backgroundColor:m.cardBg,borderColor:m.border,color:m.text},children:[(0,be.jsx)("option",{value:"",children:"Todos los temas"}),b.filter(e=>e.total_quizzes>0).map(e=>(0,be.jsx)("option",{value:e.lesson_id,children:e.lesson_title},e.lesson_id))]}),R&&(0,be.jsx)("button",{onClick:()=>$(null),className:"text-xs px-1.5 py-0.5 rounded transition-all",style:{backgroundColor:i?"#7f1d1d":"#fee2e2",color:i?"#fca5a5":"#dc2626"},children:"âœ•"})]}),(0,be.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 mt-3",children:[(0,be.jsxs)("div",{className:"rounded-lg overflow-hidden border flex flex-col",style:{backgroundColor:m.cardBg,borderColor:m.border,minHeight:"280px"},children:[(0,be.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between",style:{backgroundColor:m.headerBg},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(ae.A,{size:14,className:"text-white"}),(0,be.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-white",children:e("statistics.performanceByLesson","Rendimiento temas")})]}),(0,be.jsxs)("button",{onClick:()=>P(!0),className:"text-xs font-bold flex items-center gap-1 px-3 py-1 rounded-full transition-all duration-200 shadow-sm",style:{backgroundColor:"#ffffff",color:i?m.secondaryBg:m.primary},children:[e("statistics.viewAll","Ver todos"),(0,be.jsx)(ur.A,{size:12,style:{color:i?m.secondaryBg:m.primary}})]})]}),(0,be.jsx)("div",{className:"px-3 py-1.5 border-b",style:{borderColor:m.border},children:(0,be.jsx)("span",{className:"text-xs font-medium",style:{color:m.labelColor},children:"Ordenados por nota (peor â†’ mejor)"})}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:V.length>0?(0,be.jsx)("div",{className:"space-y-1.5",children:V.slice(0,5).map((e,r)=>{const s=K(e.avg_score);return(0,be.jsx)("div",{className:"p-2 rounded border transition-all hover:shadow-sm cursor-pointer",style:{backgroundColor:i?"#111827":"#fafafa",borderColor:m.border},onClick:()=>(async e=>{try{const{getCourseLessons:r}=await Promise.resolve().then(a.bind(a,6416)),s=await r(parseInt(t)),o=s.data?.find(t=>t.id===e.lesson_id);if(o){const e=o.meta?._lesson_steps?.find(e=>"quiz"===e.type),r=e?.data?.quiz_id;if(r)return void n(`/courses/${t}/tests`,{state:{selectedQuizId:parseInt(r),scrollToQuiz:!0,returnTo:`/courses/${t}/statistics`}})}n(`/courses/${t}/tests`)}catch(e){console.error("Error navigating to lesson:",e),n(`/courses/${t}/tests`)}})(e),children:(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,be.jsx)("span",{className:"text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${s}20`,color:s},children:r+1}),(0,be.jsx)("span",{className:"font-medium text-xs truncate",style:{color:m.text},children:e.lesson_title})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:[(0,be.jsx)("span",{className:"font-bold text-xs",style:{color:s},children:l(e.avg_score)}),(0,be.jsx)(ur.A,{size:12,style:{color:m.textMuted}})]})]})},e.lesson_id)})}):(0,be.jsxs)("div",{className:"text-center py-6",children:[(0,be.jsx)(ae.A,{size:24,className:"mx-auto mb-2",style:{color:m.textMuted}}),(0,be.jsx)("p",{className:"text-xs",style:{color:m.textMuted},children:e("statistics.noLessonsData")})]})})]}),(0,be.jsxs)("div",{className:"rounded-lg overflow-hidden border flex flex-col",style:{backgroundColor:m.cardBg,borderColor:m.border,minHeight:"280px"},children:[(0,be.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between",style:{backgroundColor:m.headerBg},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Mr,{size:14,className:"text-white"}),(0,be.jsx)("span",{className:"text-xs font-bold uppercase tracking-wider text-white",children:"AnÃ¡lisis Preguntas"})]}),(0,be.jsxs)("button",{onClick:()=>F(e=>!e),className:"flex items-center gap-1 px-3 py-1 rounded-full text-xs font-bold transition-all duration-200 shadow-sm",style:{backgroundColor:"#ffffff",color:i?m.secondaryBg:B?m.accent:m.primary},children:[(0,be.jsx)(ks,{size:10,style:{color:i?m.secondaryBg:B?m.accent:m.primary}}),B?"Con riesgo":"Sin riesgo"]})]}),(0,be.jsxs)("div",{className:"px-3 py-1.5 border-b flex items-center justify-between gap-2",style:{borderColor:m.border},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[A?.global_stats?.total_users>0&&(0,be.jsxs)("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded",style:{backgroundColor:i?"#374151":"#f3f4f6"},children:[(0,be.jsx)(pe.A,{size:10,style:{color:m.labelColor}}),(0,be.jsx)("span",{className:"text-xs font-medium",style:{color:m.labelColor},children:A.global_stats.total_users})]}),A?.total_questions>0&&(0,be.jsxs)("span",{className:"text-xs font-medium",style:{color:m.labelColor},children:[A.total_questions," respondidas"]})]}),(0,be.jsx)("div",{className:"flex items-center gap-1",children:["easy","medium","hard"].map(e=>(0,be.jsx)("button",{onClick:()=>z(e),className:"px-2 py-0.5 rounded text-xs font-medium transition-all",style:{backgroundColor:O===e?"easy"===e?"#22c55e":"medium"===e?"#f59e0b":"#ef4444":i?"#374151":"#f3f4f6",color:O===e?"#ffffff":m.textMuted},children:"easy"===e?"FÃ¡cil":"medium"===e?"Media":"DifÃ­cil"},e))})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto p-2",children:A?(0,be.jsx)("div",{className:"space-y-2",children:B?(0,be.jsxs)(be.Fragment,{children:[(()=>{const e=A.correct_with_risk||0,t=A.total_questions||0,r=t>0?Math.round(e/t*100):0,n=A.global_stats?.correct_with_risk_pct||0,s=r-n,o=s>.5,a=s<-.5;return(0,be.jsxs)("div",{className:"p-2 rounded border",style:{backgroundColor:i?"#111827":"#fafafa",borderColor:m.border},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Oe.A,{size:12,style:{color:"#10b981"}}),(0,be.jsx)("span",{className:"text-xs font-semibold",style:{color:m.text},children:"Correctas"})]}),t>0&&(0,be.jsxs)("span",{className:"text-xs font-bold",style:{color:o?"#16a34a":a?"#dc2626":m.textMuted},children:[s>0?"+":"",s,"%"]})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.text},children:"TÃº"}),(0,be.jsxs)("span",{className:"text-xs w-8 font-bold",style:{color:"#10b981"},children:[r,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${r}%`,backgroundColor:"#10b981"}})})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.textMuted},children:"Media"}),(0,be.jsxs)("span",{className:"text-xs w-8",style:{color:m.textMuted},children:[n,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${n}%`,backgroundColor:"#9ca3af"}})})]})]})]})})(),(()=>{const e=A.incorrect_with_risk||0,t=A.total_questions||0,r=t>0?Math.round(e/t*100):0,n=A.global_stats?.incorrect_with_risk_pct||0,s=r-n,o=s<-.5,a=s>.5;return(0,be.jsxs)("div",{className:"p-2 rounded border",style:{backgroundColor:i?"#111827":"#fafafa",borderColor:m.border},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(xe.A,{size:12,style:{color:"#ef4444"}}),(0,be.jsx)("span",{className:"text-xs font-semibold",style:{color:m.text},children:"Incorrectas"})]}),t>0&&(0,be.jsxs)("span",{className:"text-xs font-bold",style:{color:o?"#16a34a":a?"#dc2626":m.textMuted},children:[s>0?"+":"",s,"%"]})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.text},children:"TÃº"}),(0,be.jsxs)("span",{className:"text-xs w-8 font-bold",style:{color:"#ef4444"},children:[r,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${r}%`,backgroundColor:"#ef4444"}})})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.textMuted},children:"Media"}),(0,be.jsxs)("span",{className:"text-xs w-8",style:{color:m.textMuted},children:[n,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${n}%`,backgroundColor:"#9ca3af"}})})]})]})]})})()]}):(0,be.jsxs)(be.Fragment,{children:[(()=>{const e=A.user_correct_pct||0,t=A.global_stats?.correct_pct||0,r=A.comparison?.correct_diff||0,n=r>.5,s=r<-.5;return(0,be.jsxs)("div",{className:"p-2 rounded border",style:{backgroundColor:i?"#111827":"#fafafa",borderColor:m.border},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(Oe.A,{size:12,style:{color:"#10b981"}}),(0,be.jsx)("span",{className:"text-xs font-semibold",style:{color:m.text},children:"Correctas"})]}),A.total_questions>0&&(0,be.jsxs)("span",{className:"text-xs font-bold",style:{color:n?"#16a34a":s?"#dc2626":m.textMuted},children:[r>0?"+":"",r,"%"]})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.text},children:"TÃº"}),(0,be.jsxs)("span",{className:"text-xs w-8 font-bold",style:{color:"#10b981"},children:[e,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${e}%`,backgroundColor:"#10b981"}})})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.textMuted},children:"Media"}),(0,be.jsxs)("span",{className:"text-xs w-8",style:{color:m.textMuted},children:[t,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${t}%`,backgroundColor:"#9ca3af"}})})]})]})]})})(),(()=>{const e=A.user_incorrect_pct||0,t=A.global_stats?.incorrect_pct||0,r=A.comparison?.incorrect_diff||0,n=r<-.5,s=r>.5;return(0,be.jsxs)("div",{className:"p-2 rounded border",style:{backgroundColor:i?"#111827":"#fafafa",borderColor:m.border},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-1.5",children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,be.jsx)(xe.A,{size:12,style:{color:"#ef4444"}}),(0,be.jsx)("span",{className:"text-xs font-semibold",style:{color:m.text},children:"Incorrectas"})]}),A.total_questions>0&&(0,be.jsxs)("span",{className:"text-xs font-bold",style:{color:n?"#16a34a":s?"#dc2626":m.textMuted},children:[r>0?"+":"",r,"%"]})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.text},children:"TÃº"}),(0,be.jsxs)("span",{className:"text-xs w-8 font-bold",style:{color:"#ef4444"},children:[e,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${e}%`,backgroundColor:"#ef4444"}})})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.textMuted},children:"Media"}),(0,be.jsxs)("span",{className:"text-xs w-8",style:{color:m.textMuted},children:[t,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${t}%`,backgroundColor:"#9ca3af"}})})]})]})]})})(),(A.user_unanswered_pct>0||A.global_stats?.unanswered_pct>0)&&(()=>{const e=A.user_unanswered_pct||0,t=A.global_stats?.unanswered_pct||0;return(0,be.jsxs)("div",{className:"p-2 rounded border",style:{backgroundColor:i?"#111827":"#fafafa",borderColor:m.border},children:[(0,be.jsxs)("div",{className:"flex items-center gap-1.5 mb-1.5",children:[(0,be.jsx)(tt.A,{size:12,style:{color:"#6b7280"}}),(0,be.jsx)("span",{className:"text-xs font-semibold",style:{color:m.text},children:"Sin contestar"})]}),(0,be.jsxs)("div",{className:"space-y-1",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.text},children:"TÃº"}),(0,be.jsxs)("span",{className:"text-xs w-8 font-bold",style:{color:"#6b7280"},children:[e,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-2 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${e}%`,backgroundColor:"#94a3b8"}})})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)("span",{className:"text-xs w-10",style:{color:m.textMuted},children:"Media"}),(0,be.jsxs)("span",{className:"text-xs w-8",style:{color:m.textMuted},children:[t,"%"]}),(0,be.jsx)("div",{className:"flex-1 h-1.5 rounded-full overflow-hidden",style:{backgroundColor:i?"#374151":"#e5e7eb"},children:(0,be.jsx)("div",{className:"h-full rounded-full",style:{width:`${t}%`,backgroundColor:"#9ca3af"}})})]})]})]})})()]})}):0===A?.total_questions?(0,be.jsxs)("div",{className:"text-center py-6",children:[(0,be.jsx)(tt.A,{size:24,className:"mx-auto mb-2",style:{color:"#f59e0b"}}),(0,be.jsx)("p",{className:"text-xs",style:{color:m.textMuted},children:"AÃºn no has respondido preguntas"})]}):(0,be.jsxs)("div",{className:"text-center py-6",children:[(0,be.jsx)(Mr,{size:24,className:"mx-auto mb-2",style:{color:m.textMuted}}),(0,be.jsx)("p",{className:"text-xs",style:{color:m.textMuted},children:"Cargando..."})]})})]})]}),(0,be.jsx)("div",{className:"mt-3 flex justify-center",children:(0,be.jsx)("div",{className:"w-full lg:w-1/2",children:(0,be.jsx)(FL,{courseId:t,lessonId:R,compact:!0,isDarkMode:i,pageColors:m})})})]})})}),(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(T?"translate-x-0":"translate-x-full"),style:{backgroundColor:m.secondaryBg},children:T&&(0,be.jsxs)("div",{className:"h-full flex flex-col",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 border-b flex-shrink-0 gap-2",style:{backgroundColor:s("primary","#1a202c"),borderColor:m.border},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,be.jsx)(vr.A,{size:16,style:{color:"#ffffff"},className:"flex-shrink-0"}),(0,be.jsx)("h2",{className:"text-xs sm:text-sm font-bold leading-tight truncate uppercase tracking-wide",style:{color:"#ffffff"},children:e("statistics.performanceByLesson")}),(0,be.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.2)",color:s("textColorContrast","#ffffff")},children:Q.length})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("button",{onClick:()=>D(e=>"desc"===e?"asc":"desc"),className:"text-xs font-medium flex items-center gap-1 px-3 py-1.5 rounded-lg transition-all",style:{color:s("textColorContrast","#ffffff"),backgroundColor:"rgba(255, 255, 255, 0.15)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.15)"},children:["desc"===q?(0,be.jsx)(WL,{size:14}):(0,be.jsx)(HL,{size:14}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("desc"===q?"statistics.sortHighToLow":"statistics.sortLowToHigh")})]}),(0,be.jsx)("button",{onClick:()=>P(!1),className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:"rgba(255,255,255,0.15)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(255,255,255,0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(255,255,255,0.15)"},title:e("common.back"),children:(0,be.jsx)(xe.A,{size:20,style:{color:s("textColorContrast","#ffffff")}})})]})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,be.jsx)("div",{className:"p-4 max-w-5xl mx-auto",children:Q.length>0?(0,be.jsx)("div",{className:"space-y-2",children:Q.map((t,r)=>{const n=t.avg_score,s=K(t.avg_score);return(0,be.jsxs)("div",{className:"rounded-lg overflow-hidden border transition-all duration-200 hover:shadow-md",style:{backgroundColor:m.cardBg,borderColor:`${s}40`},children:[(0,be.jsx)("div",{className:"px-3 py-1.5",style:{backgroundColor:`${s}10`},children:(0,be.jsxs)("div",{className:"flex justify-between items-center",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0 mr-2",children:[(0,be.jsx)("span",{className:"text-xs font-bold w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${s}20`,color:s},children:r+1}),(0,be.jsx)("span",{className:"font-bold text-xs truncate",style:{color:m.text},children:t.lesson_title})]}),(0,be.jsxs)("div",{className:"flex items-baseline gap-1 flex-shrink-0",children:[(0,be.jsx)("span",{className:"font-bold text-sm",style:{color:s},children:l(n)}),(0,be.jsxs)("span",{className:"text-xs",style:{color:m.textMuted},children:["/ ",u?"100":"10"]})]})]})}),(0,be.jsxs)("div",{className:"p-3",children:[(0,be.jsx)(Y,{value:t.avg_score,color:s,height:"h-1.5"}),(0,be.jsxs)("div",{className:"flex justify-between mt-1.5 text-xs",style:{color:m.textMuted},children:[(0,be.jsxs)("span",{children:[t.quizzes_completed," ",e("statistics.quizzesCompleted")]}),(0,be.jsxs)("span",{children:[t.total_attempts," ",e("statistics.attempts")]})]})]})]},t.lesson_id)})}):(0,be.jsxs)("div",{className:"text-center py-8",children:[(0,be.jsx)(vr.A,{size:32,className:"mx-auto mb-2",style:{color:m.textMuted}}),(0,be.jsx)("p",{className:"text-xs",style:{color:m.textMuted},children:e("statistics.noDataAvailable")})]})})})]})})]}),(0,be.jsx)(qn,{courseId:t,courseName:f,isOpen:h,onOpen:()=>g(!0),onClose:()=>g(!1),children:(0,be.jsx)(In,{})})]})};var VL=a(1770),YL=a(4953),KL=a(7164),GL=a(1999),XL=a(4570),JL=a(2871);const ZL=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{course:a}=Gt(t),i=a?.title?.rendered||a?.title||"",l={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:s?n("textSecondary","#9ca3af"):`${n("primary","#1a202c")}70`,accent:n("accent","#f59e0b"),primary:n("primary","#3b82f6"),hoverBg:s?n("accent","#f59e0b"):n("primary","#1a202c"),buttonBg:s?n("accent","#f59e0b"):n("primary","#3b82f6"),buttonText:s?n("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:s?n("primary","#3b82f6"):n("accent","#f59e0b"),dangerBg:"#ef4444",dangerHover:"#dc2626"},[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(!0),[f,m]=(0,r.useState)({}),[h,g]=(0,r.useState)(null),[x,y]=(0,r.useState)(!1),[b,v]=(0,r.useState)(""),[j,w]=(0,r.useState)(null),[N,k]=(0,r.useState)(null),[C,_]=(0,r.useState)(!1),[S,E]=(0,r.useState)(20),[A,M]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[O,z]=(0,r.useState)(!1),{users:q,fetchUsers:D,loading:I}=(0,VL.k)({autoFetch:!1}),L=xr();(0,r.useEffect)(()=>{L||(window.location.hash="#/courses")},[L]);const R=(0,r.useCallback)(async()=>{if(t){p(!0);try{console.log("ðŸ“š Fetching enrolled students for course:",t);const e=await(0,YL.i9)(parseInt(t,10),{perPage:100,includeGhosts:!0});console.log("ðŸ“š Enrolled students result:",e),console.log("ðŸ“š Students data:",e.data),console.log("ðŸ“š Meta info:",e.meta),d(e.data||[]),m(e.meta||{})}catch(t){console.error("Error fetching enrolled students:",t),ne.oR.error(e("courses.students.errors.loadStudents"))}finally{p(!1)}}},[t,e]);(0,r.useEffect)(()=>{R()},[R]);const $=(0,r.useCallback)(async e=>{if(e&&!(e.length<2))try{await D({reset:!0,search:e,perPage:50})}catch(e){console.error("Error searching users:",e)}},[D]),B=(0,r.useMemo)(()=>{const e=new Set(c.map(e=>e.id));return q.filter(t=>!e.has(t.id))},[q,c]);(0,r.useEffect)(()=>{const e=setTimeout(()=>{x&&b.length>=2&&$(b)},300);return()=>clearTimeout(e)},[b,x,$]);const F=(0,r.useMemo)(()=>c.filter(e=>e.is_ghost).length,[c]);return L?(0,be.jsxs)(jn,{courseId:t,courseName:i,sectionName:e("courses.students.title"),children:[(0,be.jsxs)("div",{className:"h-full overflow-y-auto",children:[(0,be.jsxs)("div",{className:"max-w-5xl mx-auto px-4 pt-4 pb-2 flex items-center justify-between",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)(pe.A,{size:20,style:{color:l.accent}}),(0,be.jsxs)("span",{className:"text-sm font-medium",style:{color:l.textMuted},children:[f.total||c.length," ",e("courses.students.enrolledCount")]})]}),(0,be.jsxs)("button",{onClick:()=>y(!0),className:"px-4 py-2 rounded-lg font-medium text-sm transition-all duration-200 flex items-center gap-2 hover:shadow-lg",style:{backgroundColor:l.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,be.jsx)(GL.A,{size:18}),e("courses.students.addStudent")]})]}),(0,be.jsx)("div",{className:"max-w-5xl mx-auto px-4 pb-2",children:(0,be.jsxs)("div",{className:"flex items-center justify-between gap-3 px-4 py-3 rounded-lg",style:{backgroundColor:s?"rgba(156, 163, 175, 0.1)":"rgba(107, 114, 128, 0.08)",border:"1px dashed "+(s?"rgba(156, 163, 175, 0.3)":"rgba(107, 114, 128, 0.25)")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(XL.A,{size:18,style:{color:l.textMuted}}),(0,be.jsx)("span",{className:"text-sm",style:{color:l.textMuted},children:F>0?`${F} ${e("courses.students.ghostUsers.title").toLowerCase()}`:e("courses.students.ghostUsers.noGhosts")})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("button",{onClick:()=>_(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200",style:{backgroundColor:s?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.15)",color:s?"#d1d5db":"#4b5563"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s?"rgba(156, 163, 175, 0.3)":"rgba(107, 114, 128, 0.25)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.15)"},children:[(0,be.jsx)(mn.A,{size:14}),e("courses.students.ghostUsers.generate")]}),F>0&&(0,be.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200",style:{backgroundColor:`${l.dangerBg}15`,color:l.dangerBg},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l.dangerBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${l.dangerBg}15`,e.currentTarget.style.color=l.dangerBg},children:[(0,be.jsx)(pr.A,{size:14}),e("courses.students.ghostUsers.deleteAll")]})]})]})}),(0,be.jsx)("div",{className:"max-w-5xl mx-auto px-4 pt-4 pb-12",children:u?(0,be.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),borderColor:s?n("accent","#f59e0b"):n("borderColor","#e5e7eb")},children:[1,2,3].map(e=>(0,be.jsxs)("div",{className:"px-4 sm:px-6 py-4 flex items-center gap-4 animate-pulse",style:{borderBottom:e<3?`1px solid ${n("borderColor","#e5e7eb")}`:"none"},children:[(0,be.jsx)("div",{className:"w-10 h-10 rounded-full",style:{backgroundColor:l.text+"20"}}),(0,be.jsxs)("div",{className:"flex-1",children:[(0,be.jsx)("div",{className:"h-4 rounded w-32 mb-2",style:{backgroundColor:l.text+"15"}}),(0,be.jsx)("div",{className:"h-3 rounded w-48",style:{backgroundColor:l.text+"10"}})]}),(0,be.jsx)("div",{className:"h-6 w-16 rounded",style:{backgroundColor:l.text+"10"}})]},e))}):0===c.length?(0,be.jsxs)("div",{className:"text-center py-12 rounded-xl border-2",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),borderColor:s?n("accent","#f59e0b"):n("borderColor","#e5e7eb")},children:[(0,be.jsx)(pe.A,{size:40,className:"mx-auto mb-3",style:{color:l.text+"30"}}),(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:l.text},children:e("courses.students.noStudents")}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:l.textMuted},children:e("courses.students.noStudentsDescription")})]}):(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),borderColor:s?n("accent","#f59e0b"):n("borderColor","#e5e7eb")},children:c.map((t,r)=>{const o=r===c.length-1;return(0,be.jsxs)("div",{className:"px-4 sm:px-6 py-4 flex items-center gap-4 transition-all duration-200",style:{backgroundColor:s?"rgba(255,255,255,0.05)":`${n("primary","#1a202c")}05`,borderBottom:o?"none":`1px solid ${n("borderColor","#e5e7eb")}`},children:[(0,be.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",style:{backgroundColor:t.is_ghost?`${l.textMuted}30`:`${l.accent}20`,color:t.is_ghost?l.textMuted:l.accent},children:t.is_ghost?(0,be.jsx)(XL.A,{size:18}):t.display_name?.charAt(0)?.toUpperCase()||"?"}),(0,be.jsxs)("div",{className:"flex-1 min-w-0 flex items-center gap-3",children:[(0,be.jsx)("span",{className:"font-medium text-sm",style:{color:l.text},children:t.display_name}),(0,be.jsx)("span",{style:{color:l.textMuted},children:"Â·"}),(0,be.jsx)("span",{className:"text-sm truncate",style:{color:l.textMuted},children:t.email}),t.is_ghost&&(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs font-medium px-2 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:s?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.15)",color:s?"#9ca3af":"#6b7280"},children:[(0,be.jsx)(XL.A,{size:10}),e("courses.students.ghost")]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg flex-shrink-0",style:{backgroundColor:`${l.accent}15`},children:[(0,be.jsx)(Tr.A,{size:14,style:{color:l.accent}}),(0,be.jsx)("span",{className:"font-semibold text-sm",style:{color:l.accent},children:(a=t.avg_score,null==a?"-":Math.round(10*a)/10)})]}),(0,be.jsxs)("button",{onClick:()=>k(t),disabled:h===t.id,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex-shrink-0",style:{backgroundColor:`${l.dangerBg}15`,color:l.dangerBg},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l.dangerBg,e.currentTarget.style.color="#ffffff"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=`${l.dangerBg}15`,e.currentTarget.style.color=l.dangerBg},children:[h===t.id?(0,be.jsx)(Xr.A,{size:14,className:"animate-spin"}):(0,be.jsx)(JL.A,{size:14}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("courses.students.remove")})]})]},t.id);var a})})})})]}),x&&(0,be.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,be.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>{y(!1),v("")}}),(0,be.jsxs)("div",{className:"relative w-full max-w-lg rounded-xl shadow-xl max-h-[80vh] overflow-hidden flex flex-col",style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b",style:{borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsxs)("h2",{className:"text-lg font-bold flex items-center gap-2",style:{color:l.text},children:[(0,be.jsx)(GL.A,{size:20,style:{color:l.accent}}),e("courses.students.addStudent")]}),(0,be.jsx)("button",{onClick:()=>{y(!1),v("")},className:"p-1.5 rounded-lg transition-colors",style:{color:l.text,backgroundColor:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},onMouseEnter:e=>e.currentTarget.style.backgroundColor=s?"rgba(255,255,255,0.2)":"rgba(0,0,0,0.1)",onMouseLeave:e=>e.currentTarget.style.backgroundColor=s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)",children:(0,be.jsx)(xe.A,{size:20})})]}),(0,be.jsxs)("div",{className:"px-5 py-4 border-b",style:{borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 rounded-lg",style:{backgroundColor:s?"#111827":"#ffffff",border:`1px solid ${n("borderColor","#e5e7eb")}`},children:[(0,be.jsx)(Le.A,{size:18,style:{color:l.textMuted}}),(0,be.jsx)("input",{type:"text",value:b,onChange:e=>v(e.target.value),placeholder:e("courses.students.searchPlaceholder"),className:"flex-1 bg-transparent outline-none text-sm",style:{color:l.text},autoFocus:!0}),I&&(0,be.jsx)(Xr.A,{size:18,className:"animate-spin",style:{color:l.accent}})]}),(0,be.jsx)("p",{className:"text-xs mt-2",style:{color:l.textMuted},children:e("courses.students.searchHint")})]}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto px-5 py-4",style:{maxHeight:"400px"},children:b.length>0&&b.length<2?(0,be.jsx)("p",{className:"text-center py-8 text-sm",style:{color:l.textMuted},children:e("courses.students.minSearchChars")}):0===b.length?(0,be.jsx)("p",{className:"text-center py-8 text-sm",style:{color:l.textMuted},children:e("courses.students.searchHint")}):0===B.length?(0,be.jsx)("p",{className:"text-center py-8 text-sm",style:{color:l.textMuted},children:e(I?"common.loading":"courses.students.noResults")}):(0,be.jsx)("div",{className:"space-y-2",children:B.map(r=>(0,be.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg transition-colors",style:{backgroundColor:s?"rgba(255,255,255,0.05)":"#ffffff",border:`1px solid ${n("borderColor","#e5e7eb")}`},children:[(0,be.jsx)("div",{className:"w-9 h-9 rounded-full flex items-center justify-center font-semibold text-sm flex-shrink-0",style:{backgroundColor:`${l.primary}20`,color:l.primary},children:r.displayName?.charAt(0)?.toUpperCase()||r.name?.charAt(0)?.toUpperCase()||"?"}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("p",{className:"font-medium text-sm truncate",style:{color:l.text},children:r.displayName||r.name}),(0,be.jsx)("p",{className:"text-xs truncate",style:{color:l.textMuted},children:r.email})]}),(0,be.jsxs)("button",{onClick:()=>(async r=>{w(r);try{console.log("ðŸŽ“ Enrolling user:",r,"in course:",t);const n=await(0,YL.enrollUserInCourse)(r,parseInt(t,10));console.log("ðŸŽ“ Enroll result:",n),!1!==n?.success?(ne.oR.success(e("courses.students.enrollSuccess")),await R(),v("")):ne.oR.error(n?.error||e("courses.students.errors.enroll"))}catch(t){console.error("Error enrolling user:",t),ne.oR.error(e("courses.students.errors.enroll"))}finally{w(null)}})(r.id),disabled:j===r.id,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200 flex-shrink-0",style:{backgroundColor:l.buttonBg,color:l.buttonText},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[j===r.id?(0,be.jsx)(Xr.A,{size:14,className:"animate-spin"}):(0,be.jsx)(GL.A,{size:14}),e("courses.students.enroll")]})]},r.id))})})]})]}),N&&(0,be.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,be.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>k(null)}),(0,be.jsxs)("div",{className:"relative w-full max-w-md rounded-xl shadow-xl p-6",style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,be.jsx)("div",{className:"p-2.5 rounded-full",style:{backgroundColor:`${l.dangerBg}15`},children:(0,be.jsx)(Te.A,{size:24,style:{color:l.dangerBg}})}),(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:l.text},children:e("courses.students.confirmUnenroll")})]}),(0,be.jsx)("p",{className:"mb-6",style:{color:l.textMuted},children:e("courses.students.confirmUnenrollMessage",{name:N.display_name})}),(0,be.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,be.jsx)("button",{onClick:()=>k(null),className:"px-4 py-2 rounded-lg font-medium transition-colors",style:{backgroundColor:s?"#374151":"#e5e7eb",color:l.text},children:e("common.cancel")}),(0,be.jsxs)("button",{onClick:()=>(async r=>{g(r);try{const n=await(0,YL.unenrollUserFromCourse)(r,parseInt(t,10));!1!==n?.success?(ne.oR.success(e("courses.students.unenrollSuccess")),d(e=>e.filter(e=>e.id!==r)),k(null)):ne.oR.error(n?.error||e("courses.students.errors.unenroll"))}catch(t){console.error("Error unenrolling user:",t),ne.oR.error(e("courses.students.errors.unenroll"))}finally{g(null)}})(N.id),disabled:h===N.id,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white transition-colors",style:{backgroundColor:l.dangerBg},onMouseEnter:e=>e.currentTarget.style.backgroundColor=l.dangerHover,onMouseLeave:e=>e.currentTarget.style.backgroundColor=l.dangerBg,children:[h===N.id?(0,be.jsx)(Xr.A,{size:16,className:"animate-spin"}):(0,be.jsx)(Qn.A,{size:16}),e("common.delete")]})]})]})]}),C&&(0,be.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,be.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>!A&&_(!1)}),(0,be.jsxs)("div",{className:"relative w-full max-w-md rounded-xl shadow-xl p-6",style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,be.jsx)("div",{className:"p-2.5 rounded-full",style:{backgroundColor:s?"rgba(156, 163, 175, 0.2)":"rgba(107, 114, 128, 0.15)"},children:(0,be.jsx)(mn.A,{size:24,style:{color:s?"#9ca3af":"#6b7280"}})}),(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:l.text},children:e("courses.students.ghostUsers.generate")})]}),(0,be.jsx)("p",{className:"mb-4 text-sm",style:{color:l.textMuted},children:e("courses.students.ghostUsers.generateDescription")}),(0,be.jsxs)("div",{className:"mb-6",children:[(0,be.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:l.text},children:e("courses.students.ghostUsers.count")}),(0,be.jsx)("input",{type:"number",min:"1",max:"50",value:S,onChange:e=>E(Math.min(50,Math.max(1,parseInt(e.target.value)||1))),className:"w-full px-4 py-2 rounded-lg text-sm outline-none transition-colors",style:{backgroundColor:s?"#111827":"#ffffff",border:`1px solid ${n("borderColor","#e5e7eb")}`,color:l.text}}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:l.textMuted},children:"MÃ¡ximo: 50"})]}),(0,be.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,be.jsx)("button",{onClick:()=>_(!1),disabled:A,className:"px-4 py-2 rounded-lg font-medium transition-colors",style:{backgroundColor:s?"#374151":"#e5e7eb",color:l.text},children:e("common.cancel")}),(0,be.jsx)("button",{onClick:async()=>{if(t&&!(S<1)){M(!0);try{const r=await(0,KL.zU)(parseInt(t,10),S);if(!1!==r?.success){const t=r?.created_users?.length||r?.count||S;ne.oR.success(e("courses.students.ghostUsers.generateSuccess",{count:t})),_(!1),E(20),await R()}else ne.oR.error(r?.error||e("courses.students.ghostUsers.errors.generate"))}catch(t){console.error("Error generating ghost users:",t),ne.oR.error(e("courses.students.ghostUsers.errors.generate"))}finally{M(!1)}}},disabled:A||S<1,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white transition-colors",style:{backgroundColor:s?"#6b7280":"#4b5563"},children:A?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Xr.A,{size:16,className:"animate-spin"}),e("courses.students.ghostUsers.generating")]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(mn.A,{size:16}),e("courses.students.ghostUsers.generate")]})})]})]})]}),T&&(0,be.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,be.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>!O&&P(!1)}),(0,be.jsxs)("div",{className:"relative w-full max-w-md rounded-xl shadow-xl p-6",style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,be.jsx)("div",{className:"p-2.5 rounded-full",style:{backgroundColor:`${l.dangerBg}15`},children:(0,be.jsx)(Te.A,{size:24,style:{color:l.dangerBg}})}),(0,be.jsx)("h3",{className:"text-lg font-bold",style:{color:l.text},children:e("courses.students.ghostUsers.deleteAllConfirm")})]}),(0,be.jsx)("p",{className:"mb-6",style:{color:l.textMuted},children:e("courses.students.ghostUsers.deleteConfirmMessage")}),(0,be.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,be.jsx)("button",{onClick:()=>P(!1),disabled:O,className:"px-4 py-2 rounded-lg font-medium transition-colors",style:{backgroundColor:s?"#374151":"#e5e7eb",color:l.text},children:e("common.cancel")}),(0,be.jsx)("button",{onClick:async()=>{if(t){z(!0);try{const r=await(0,KL.H_)(parseInt(t,10));if(!1!==r?.success){const t=r?.deleted_count||r?.count||0;ne.oR.success(e("courses.students.ghostUsers.deleteSuccess",{count:t})),P(!1),await R()}else ne.oR.error(r?.error||e("courses.students.ghostUsers.errors.delete"))}catch(t){console.error("Error deleting ghost users:",t),ne.oR.error(e("courses.students.ghostUsers.errors.delete"))}finally{z(!1)}}},disabled:O,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium text-white transition-colors",style:{backgroundColor:l.dangerBg},onMouseEnter:e=>!O&&(e.currentTarget.style.backgroundColor=l.dangerHover),onMouseLeave:e=>!O&&(e.currentTarget.style.backgroundColor=l.dangerBg),children:O?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Xr.A,{size:16,className:"animate-spin"}),e("courses.students.ghostUsers.deleting")]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(pr.A,{size:16}),e("common.delete")]})})]})]})]})]}):null},eR=(0,le.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),tR=(0,le.A)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),rR=(0,le.A)("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]),nR=({questions:e=[],currentIndex:t=0,onNavigate:n,onClose:s,onAnswered:a})=>{const{t:i}=(0,o.Bd)(),{getColor:l,isDarkMode:c}=(0,se.DP)(),d={text:l("textPrimary",c?"#f9fafb":"#1f2937"),textMuted:l("textSecondary",c?"#9ca3af":"#6b7280"),bg:c?l("secondaryBackground","#1f2937"):l("background","#ffffff"),border:c?"#ffffff":l("borderColor","#e5e7eb"),primary:l("primary","#3b82f6")},u=e[t],[p,f]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f(null),h(!1)},[t,u?.id]);const y=u?.is_favorite||!1;if(!u)return(0,be.jsx)("div",{className:"flex items-center justify-center h-full p-8",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)(tt.A,{size:48,style:{color:l("error","#ef4444"),margin:"0 auto 1rem"}}),(0,be.jsx)("p",{className:"text-lg font-medium",style:{color:l("textPrimary","#1f2937")},children:i("tests.noQuestionsAvailable")})]})});u.meta;const b=u.meta?._question_options||[],v=b.find(e=>!0===e.isCorrect),j=v?.id,w=u.meta?._explanation||"",N=u.meta?._difficulty_level||"medium",k=m&&p===j,C=()=>{t<e.length-1&&n(t+1)},_=()=>{switch(N){case"easy":return"#10b981";case"medium":return"#f59e0b";case"hard":return"#ef4444";default:return l("textSecondary","#6b7280")}},S=e=>{const t={border:"2px solid",transition:"all 0.2s",cursor:m?"default":"pointer"};return m?e.id===j?{...t,borderColor:"#10b981",backgroundColor:"#10b98110"}:e.id===p&&p!==j?{...t,borderColor:"#ef4444",backgroundColor:"#ef444410"}:{...t,borderColor:d.border,backgroundColor:d.bg,opacity:.5}:p===e.id?{...t,borderColor:d.primary,backgroundColor:`${d.primary}10`}:{...t,borderColor:d.border,backgroundColor:d.bg}};return(0,be.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 mb-6 rounded-lg border",style:{backgroundColor:d.bg,borderColor:d.border},children:[(0,be.jsxs)("div",{className:"flex items-center gap-4",children:[(0,be.jsxs)("span",{className:"text-sm font-medium",style:{color:d.text},children:[t+1," / ",e.length]}),(0,be.jsx)("div",{className:"px-2 py-1 rounded text-xs font-medium",style:{backgroundColor:`${_()}20`,color:_()},children:i(`common.${N}`)})]}),(0,be.jsx)("button",{onClick:async()=>{if(!g){x(!0);try{const e=await Dr(u.id);u.is_favorite=e.is_favorited,h(e=>e)}catch(e){console.error("Error toggling favorite:",e)}finally{x(!1)}}},disabled:g,className:"p-2 rounded-lg transition-all hover:bg-gray-100",title:i(y?"common.removeFromFavorites":"common.addToFavorites"),children:(0,be.jsx)(eR,{size:20,style:{color:"#fbbf24"},fill:y?"#fbbf24":"none"})})]}),(0,be.jsxs)("div",{className:"space-y-6",children:[(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,be.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:`${d.primary}20`},children:(0,be.jsx)(ae.A,{size:16,style:{color:c?"#ffffff":d.primary}})}),(0,be.jsx)("h3",{className:"text-lg font-semibold flex-1",style:{color:d.text},children:u.title?.rendered||u.title})]}),u.content?.rendered&&(0,be.jsx)("div",{className:"prose max-w-none ml-11",dangerouslySetInnerHTML:{__html:u.content.rendered},style:{color:d.textMuted}})]}),(0,be.jsx)("div",{className:"space-y-3",children:b.map((e,t)=>(0,be.jsxs)("button",{onClick:()=>(e=>{if(!m){f(e),h(!0);const t=e===j;a&&a(u.id,t)}})(e.id),disabled:m,className:"w-full px-4 py-3 rounded-lg text-left flex items-center gap-3",style:S(e),children:[(0,be.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 font-semibold",style:{backgroundColor:m&&e.id===j?"#10b981":m&&e.id===p?"#ef4444":p===e.id?d.primary:`${d.textMuted}30`,color:m&&(e.id===j||e.id===p)||p===e.id?"#ffffff":d.text},children:String.fromCharCode(65+t)}),(0,be.jsx)("span",{className:"flex-1 text-sm",style:{color:d.text},children:e.text}),m&&e.id===j&&(0,be.jsx)(Qn.A,{size:20,style:{color:"#10b981"}}),m&&e.id===p&&p!==j&&(0,be.jsx)(xe.A,{size:20,style:{color:"#ef4444"}})]},e.id))}),m&&(0,be.jsxs)("div",{className:"rounded-lg p-4 border-2",style:{borderColor:k?"#10b981":"#ef4444",backgroundColor:k?"#10b98110":"#ef444410"},children:[(0,be.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[k?(0,be.jsx)(Qn.A,{size:24,style:{color:"#10b981"},className:"flex-shrink-0"}):(0,be.jsx)(xe.A,{size:24,style:{color:"#ef4444"},className:"flex-shrink-0"}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h4",{className:"font-bold text-base mb-1",style:{color:k?"#10b981":"#ef4444"},children:i(k?"tests.correctAnswer":"tests.incorrectAnswer")}),(0,be.jsx)("p",{className:"text-sm",style:{color:d.textMuted},children:i(k?"tests.wellDone":"tests.keepPracticing")})]})]}),w&&(0,be.jsxs)("div",{className:"mt-3 pt-3 border-t",style:{borderColor:k?"#10b98130":"#ef444430"},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,be.jsx)(tR,{size:16,style:{color:l("primary","#3b82f6")}}),(0,be.jsx)("span",{className:"text-xs font-semibold uppercase",style:{color:d.textMuted},children:i("tests.explanation")})]}),(0,be.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:w},style:{color:d.text}})]})]})]}),(0,be.jsxs)("div",{className:"mt-6 flex flex-wrap items-center justify-center gap-2",children:[(0,be.jsxs)("button",{onClick:()=>{t>0&&n(t-1)},disabled:0===t,className:"px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg font-medium flex items-center gap-2 transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-sm text-sm",style:{backgroundColor:d.bg,color:c?"#ffffff":d.primary,border:`2px solid ${c?"#ffffff":d.primary}`},children:[(0,be.jsx)(We.A,{size:18}),(0,be.jsx)("span",{children:i("common.previous")})]}),!m&&(0,be.jsxs)("button",{onClick:()=>{C()},className:"px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg font-medium flex items-center gap-2 transition-all shadow-sm text-sm",style:{backgroundColor:d.bg,color:c?"#ffffff":d.textMuted,border:`2px solid ${d.border}`},children:[(0,be.jsx)(rR,{size:18}),(0,be.jsx)("span",{children:i("common.skip")})]}),(0,be.jsxs)("button",{onClick:C,disabled:t===e.length-1,className:"px-4 sm:px-6 py-2.5 sm:py-3 rounded-lg font-bold flex items-center gap-2 transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-sm text-sm",style:{backgroundColor:l("accent","#f59e0b"),color:"#ffffff"},children:[(0,be.jsx)("span",{children:t===e.length-1?i("common.finish"):i("common.next")}),(0,be.jsx)(ur.A,{size:18})]})]})]})},sR=({label:e,options:t,value:n,onChange:s,pageColors:o,isDarkMode:a})=>{var i;const{getColor:l}=(0,se.DP)(),[c,d]=(0,r.useState)(!1),u=t.find(e=>e.value===n);return(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:o.text},children:e}),(0,be.jsxs)("button",{type:"button",onClick:()=>d(!c),className:"w-full px-3 py-2 text-left rounded-lg flex items-center justify-between transition-all text-sm",style:{border:`2px solid ${c?o.accent:o.inputBorder}`,backgroundColor:o.inputBg,color:o.text},children:[(0,be.jsx)("span",{children:null!==(i=u?.label)&&void 0!==i?i:""}),(0,be.jsx)(Ut.A,{size:14,className:"transition-transform flex-shrink-0 "+(c?"rotate-180":""),style:{color:o.textMuted}})]}),c&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>d(!1)}),(0,be.jsx)("div",{className:"absolute z-20 w-full mt-1 max-h-48 overflow-auto rounded-lg shadow-lg border-2",style:{backgroundColor:a?l("secondaryBackground","#1f2937"):"#ffffff",borderColor:a?o.accent:o.inputBorder},children:t.map(e=>(0,be.jsxs)("div",{onClick:()=>{s(e.value),d(!1)},className:"px-3 py-2 cursor-pointer flex items-center justify-between transition-colors",style:{backgroundColor:e.value===n?a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)":"transparent"},onMouseEnter:t=>{e.value!==n&&(t.currentTarget.style.backgroundColor=a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)")},onMouseLeave:t=>{e.value!==n&&(t.currentTarget.style.backgroundColor="transparent")},children:[(0,be.jsx)("span",{className:"text-sm",style:{color:o.text},children:e.label}),e.value===n&&(0,be.jsx)(Qn.A,{size:12,style:{color:o.accent}})]},e.value))})]})]})},oR=({label:e,options:t,selected:n,onChange:s,placeholder:a="Seleccionar...",pageColors:i,isDarkMode:l,selectAllLabel:c})=>{const{t:d}=(0,o.Bd)(),{getColor:u}=(0,se.DP)(),[p,f]=(0,r.useState)(!1),m=t.map(e=>e.value),h=m.length>0&&m.every(e=>n.includes(e)),g=e=>{const t=n.includes(e)?n.filter(t=>t!==e):[...n,e];s(t)},x=t.filter(e=>n.includes(e.value)).map(e=>e.label);return(0,be.jsxs)("div",{className:"relative",children:[(0,be.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:i.text},children:e}),(0,be.jsxs)("button",{type:"button",onClick:()=>f(!p),className:"w-full px-3 py-2 text-left rounded-lg flex items-center justify-between transition-all text-sm",style:{border:`2px solid ${p?i.accent:i.inputBorder}`,backgroundColor:i.inputBg,color:i.text},children:[(0,be.jsx)("span",{className:"block truncate",children:0===n.length?(0,be.jsx)("span",{style:{color:i.textMuted},children:a}):h?(0,be.jsx)("span",{children:c||d("common.allSelected")}):`${n.length} seleccionados`}),(0,be.jsx)(Ut.A,{size:14,className:"transition-transform "+(p?"rotate-180":""),style:{color:i.textMuted}})]}),p&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>f(!1)}),(0,be.jsxs)("div",{className:"absolute z-20 w-full mt-1 max-h-48 overflow-auto rounded-lg shadow-lg border-2",style:{backgroundColor:l?u("secondaryBackground","#1f2937"):"#ffffff",borderColor:l?i.accent:i.inputBorder},children:[(0,be.jsxs)("div",{onClick:()=>{s(h?[]:m)},className:"px-3 py-2 cursor-pointer flex items-center gap-2 transition-colors border-b",style:{backgroundColor:"transparent",borderColor:i.inputBorder},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0",style:{backgroundColor:h?i.accent:"transparent",borderColor:h?i.accent:i.inputBorder},children:h&&(0,be.jsx)(Qn.A,{size:10,className:"text-white"})}),(0,be.jsx)("span",{className:"text-sm font-medium",style:{color:i.text},children:c||d("common.selectAll")})]}),t.map(e=>(0,be.jsxs)("div",{onClick:()=>g(e.value),className:"px-3 py-2 cursor-pointer flex items-center gap-2 transition-colors",style:{backgroundColor:"transparent"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=l?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsx)("div",{className:"w-4 h-4 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0",style:{backgroundColor:n.includes(e.value)?i.accent:"transparent",borderColor:n.includes(e.value)?i.accent:i.inputBorder},children:n.includes(e.value)&&(0,be.jsx)(Qn.A,{size:10,className:"text-white"})}),(0,be.jsx)("span",{className:"text-sm truncate",style:{color:i.text},children:e.label})]},e.value))]})]}),n.length>0&&!h&&(0,be.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-2",children:x.map((e,r)=>(0,be.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:{backgroundColor:l?`${i.accent}30`:`${i.text}15`,color:l?"#ffffff":i.text},children:[e,(0,be.jsx)("button",{onClick:r=>{r.stopPropagation(),g(t.find(t=>t.label===e).value)},className:"ml-1 hover:opacity-70",children:(0,be.jsx)(xe.A,{size:10})})]},r))})]})},aR=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{course:a,loading:i}=Gt(t),l=a?.title?.rendered||a?.title||"",c={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:s?n("textSecondary","#9ca3af"):`${n("primary","#1a202c")}60`,accent:n("accent","#f59e0b"),primary:n("primary","#1a202c"),hoverBg:s?n("accent","#f59e0b"):n("primary","#1a202c"),inputBg:s?"rgba(0,0,0,0.2)":"#ffffff",inputBorder:s?"#ffffff":n("primary","#1a202c"),cardBg:s?n("secondaryBackground","#1f2937"):"#ffffff"},[d,u]=(0,r.useState)(!1),[p,f]=(0,r.useState)(0),[m,h]=(0,r.useState)({}),[g,x]=(0,r.useState)([]),[y,b]=(0,r.useState)(!0),[v,j]=(0,r.useState)({lessons:[],difficulty:"all",numQuestions:10,statusFilters:[]}),{questions:w,loading:N,fetchQuestions:k}=(0,xs.A)({autoFetch:!1});(0,r.useEffect)(()=>{(async()=>{if(t){b(!0);try{const e=parseInt(t,10);if(isNaN(e))throw new Error("Invalid course ID");const r=await(0,Cn.getCourseLessons)(e,{perPage:100});x(r.data||[])}catch(e){console.error("Error fetching lessons:",e),x([])}finally{b(!1)}}})()},[t]);const C=(e,t)=>{j(r=>({...r,[e]:t}))},_=e=>{j(t=>{const r=t.statusFilters.includes(e)?t.statusFilters.filter(t=>t!==e):[...t.statusFilters,e];return{...t,statusFilters:r}})},S=()=>{u(!1),f(0),h({})},E=e=>{f(e)},A=g.map(t=>({value:t.id,label:t.title?.rendered||t.title||e("courses.untitledLesson")})),M=[{value:"all",label:e("courses.difficulty.all")},{value:"easy",label:e("common.easy")},{value:"medium",label:e("common.medium")},{value:"hard",label:e("common.hard")}],T=i||y;return(0,be.jsx)(jn,{courseId:t,courseName:l,sectionName:e("courses.selfPacedTests"),children:(0,be.jsxs)("div",{className:"relative h-full",children:[(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(d?"-translate-x-full":"translate-x-0"),children:(0,be.jsx)("div",{className:"h-full overflow-y-auto",children:(0,be.jsx)("div",{className:"mx-auto pt-8 pb-24 px-4 sm:px-12",children:T?(0,be.jsx)("div",{className:"rounded-lg border",style:{backgroundColor:c.cardBg,borderColor:c.inputBorder},children:[1,2,3].map(e=>(0,be.jsxs)("div",{className:"px-4 py-3 flex items-center gap-3 animate-pulse",style:{borderBottom:e<3?`1px solid ${c.inputBorder}`:"none"},children:[(0,be.jsx)("div",{className:"w-5 h-5 rounded",style:{backgroundColor:c.text+"20"}}),(0,be.jsx)("div",{className:"h-4 rounded flex-1",style:{backgroundColor:c.text+"15",maxWidth:"200px"}})]},e))}):(0,be.jsxs)("div",{className:"rounded-lg border",style:{backgroundColor:c.cardBg,borderColor:c.inputBorder},children:[(0,be.jsx)("div",{className:"px-4 py-3",style:{backgroundColor:c.primary},children:(0,be.jsx)("h3",{className:"text-base font-bold text-white",children:e("courses.selfPacedTests")})}),(0,be.jsxs)("div",{className:"p-4 space-y-4",children:[(0,be.jsx)("div",{className:"rounded-lg p-3",style:{border:`1px solid ${c.inputBorder}`},children:(0,be.jsx)(oR,{label:e("lessons.title"),options:A,selected:v.lessons,onChange:e=>C("lessons",e),placeholder:e("common.all"),pageColors:c,isDarkMode:s,selectAllLabel:e("common.allLessons")})}),(0,be.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,be.jsx)("div",{className:"rounded-lg p-3",style:{border:`1px solid ${c.inputBorder}`},children:(0,be.jsx)(sR,{label:e("courses.difficulty.label"),options:M,value:v.difficulty,onChange:e=>C("difficulty",e),pageColors:c,isDarkMode:s})}),(0,be.jsxs)("div",{className:"rounded-lg p-3",style:{border:`1px solid ${c.inputBorder}`},children:[(0,be.jsx)("label",{className:"block text-xs font-medium mb-1.5",style:{color:c.text},children:e("courses.questionTypes")}),(0,be.jsx)("div",{className:"grid grid-cols-2 gap-x-3 gap-y-1",children:[{id:"favorites",label:e("courses.favorites")},{id:"failed",label:e("courses.failed")},{id:"risked",label:e("courses.atRisk")},{id:"unanswered",label:e("courses.notAnswered")}].map(e=>{const t=v.statusFilters.includes(e.id);return(0,be.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer py-1",children:[(0,be.jsx)("div",{className:"w-5 h-5 rounded border-2 flex items-center justify-center transition-colors flex-shrink-0",style:{backgroundColor:t?c.accent:"transparent",borderColor:t?c.accent:c.inputBorder},onClick:()=>_(e.id),children:t&&(0,be.jsx)(Qn.A,{size:12,className:"text-white"})}),(0,be.jsx)("span",{className:"text-sm",style:{color:c.text},onClick:()=>_(e.id),children:e.label})]},e.id)})})]})]}),(0,be.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,be.jsx)("div",{className:"rounded-lg p-3",style:{border:`1px solid ${c.inputBorder}`},children:(0,be.jsx)(sR,{label:e("common.questions"),options:Array.from({length:20},(e,t)=>5*(t+1)).map(e=>({value:e,label:String(e)})),value:v.numQuestions,onChange:e=>C("numQuestions",e),pageColors:c,isDarkMode:s})}),(0,be.jsx)("div",{})]}),(0,be.jsx)("button",{onClick:async()=>{const e=g.map(e=>e.id).filter(Boolean),t=v.lessons.length>0,r=t&&v.lessons.length===e.length,n=t&&!r?v.lessons:null;await k(!0,{course_id:null,lessons:n,difficulty:"all"!==v.difficulty?v.difficulty:null,status:"publish",perPage:v.numQuestions,status_filters:v.statusFilters.length>0?v.statusFilters:null}),f(0),h({}),u(!0)},disabled:N,className:"w-full py-2.5 rounded-lg font-medium text-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",style:{backgroundColor:c.accent,color:"#ffffff"},onMouseEnter:e=>{N||(e.currentTarget.style.opacity="0.9")},onMouseLeave:e=>{N||(e.currentTarget.style.opacity="1")},children:N?(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,be.jsx)("span",{children:e("common.loading")})]}):(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(Ue.A,{size:16}),(0,be.jsx)("span",{children:e("tests.startPractice")})]})})]})]})})})}),(0,be.jsx)("div",{className:"absolute inset-0 transition-transform duration-300 ease-in-out "+(d?"translate-x-0":"translate-x-full"),style:{backgroundColor:n("secondaryBackground","#f8f9fa")},children:d&&(0,be.jsxs)("div",{className:"h-full flex flex-col",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between px-4 py-2 border-b flex-shrink-0 gap-2",style:{backgroundColor:c.cardBg,borderColor:c.inputBorder},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[(0,be.jsx)(mn.A,{size:16,style:{color:c.accent},className:"flex-shrink-0"}),(0,be.jsx)("h2",{className:"text-sm font-medium leading-tight truncate",style:{color:c.text},children:e("courses.selfPacedPractice")}),(0,be.jsxs)("span",{className:"text-xs px-2 py-0.5 rounded-full flex-shrink-0",style:{backgroundColor:s?`${c.accent}20`:`${c.text}10`,color:s?c.accent:c.text},children:[w.length," ",e("common.questions").toLowerCase()]})]}),(0,be.jsx)("button",{onClick:S,className:"p-1.5 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:s?`${c.accent}15`:`${c.text}10`},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=s?`${c.accent}25`:`${c.text}20`},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=s?`${c.accent}15`:`${c.text}10`},title:e("common.back"),children:(0,be.jsx)(xe.A,{size:18,style:{color:c.text}})})]}),w.length>0&&(0,be.jsx)("div",{className:"px-4 py-2.5 border-b",style:{backgroundColor:c.cardBg,borderColor:c.inputBorder},children:(0,be.jsx)("div",{className:"flex flex-wrap gap-1.5 justify-center",children:w.map((e,t)=>{const r=m.hasOwnProperty(e.id),n=m[e.id],s=t===p;return(0,be.jsx)("button",{onClick:()=>E(t),className:"w-8 h-8 rounded-lg font-medium text-xs transition-all flex items-center justify-center",style:{backgroundColor:s?c.accent:r?n?"#10b981":"#ef4444":"transparent",color:s||r?"#ffffff":c.text,border:`1px solid ${s?c.accent:r?n?"#10b981":"#ef4444":c.inputBorder}`,transform:s?"scale(1.1)":"scale(1)"},children:t+1},e.id)})})}),(0,be.jsx)("div",{className:"flex-1 overflow-y-auto",children:w.length>0?(0,be.jsx)(nR,{questions:w,currentIndex:p,onNavigate:E,onClose:S,onAnswered:(e,t)=>{h(r=>({...r,[e]:t}))}}):(0,be.jsx)("div",{className:"h-full flex items-center justify-center p-8",children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)("div",{className:"w-14 h-14 rounded-full flex items-center justify-center mb-4 mx-auto",style:{backgroundColor:s?`${c.accent}15`:`${c.text}10`},children:(0,be.jsx)(Te.A,{size:28,style:{color:c.textMuted}})}),(0,be.jsx)("h3",{className:"text-base font-bold mb-2",style:{color:c.text},children:e("tests.noQuestionsFound")}),(0,be.jsx)("p",{className:"text-sm mb-5",style:{color:c.textMuted},children:e("tests.adjustFilters")}),(0,be.jsx)("button",{onClick:S,className:"px-5 py-2 rounded-lg font-medium text-sm transition-all",style:{backgroundColor:c.accent,color:"#ffffff"},onMouseEnter:e=>{e.currentTarget.style.opacity="0.9"},onMouseLeave:e=>{e.currentTarget.style.opacity="1"},children:e("common.back")})]})})})]})})]})})},iR=(e,t,r)=>{const n=new Date(e+"T"+(t?t.substring(0,5):"00:00"))-new Date;if(n<0&&n>-54e5)return{text:r("liveClasses.inProgress","En curso"),urgent:!0,live:!0};if(n<0)return{text:r("liveClasses.finished","Finalizada"),urgent:!1,live:!1,past:!0};const s=Math.floor(n/6e4),o=Math.floor(s/60),a=Math.floor(o/24);if(a>0){const e=o%24;return{text:e>0?r("liveClasses.countdownDaysHours","En {{days}}d {{hours}}h",{days:a,hours:e}):r("liveClasses.countdownDays","En {{days}} dÃ­a{{s}}",{days:a,s:a>1?"s":""}),urgent:!1,live:!1}}return o>0?{text:r("liveClasses.countdownHoursMin","En {{hours}}h {{min}}min",{hours:o,min:s%60}),urgent:o<1,live:!1}:{text:r("liveClasses.countdownMin","Empieza en {{min}} min",{min:s}),urgent:!0,live:!1}},lR=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{course:a}=Gt(t),i=a?.title?.rendered||a?.title||"",l={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:s?n("textSecondary","#9ca3af"):`${n("primary","#1a202c")}70`,accent:n("accent","#f59e0b"),hoverBg:s?n("accent","#f59e0b"):n("primary","#1a202c"),buttonBg:s?n("accent","#f59e0b"):n("primary","#3b82f6"),buttonText:s?n("secondaryBackground","#1f2937"):"#ffffff",buttonHoverBg:s?n("primary","#3b82f6"):n("accent","#f59e0b")},[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(!0),[,f]=(0,r.useState)(0);(0,r.useEffect)(()=>{t&&(p(!0),xn(t).then(e=>{const t=new Date;t.setHours(0,0,0,0);const r=e.filter(e=>"live_class"===e.type).filter(e=>{const r=new Date(e.note_date),n=new Date(t);return n.setDate(n.getDate()-1),r>=n}).sort((e,t)=>new Date(e.note_date)-new Date(t.note_date));d(r)}).catch(()=>d([])).finally(()=>p(!1)))},[t]),(0,r.useEffect)(()=>{const e=setInterval(()=>f(e=>e+1),6e4);return()=>clearInterval(e)},[]);const m=(0,r.useMemo)(()=>c.filter(t=>!iR(t.note_date,t.time,e).past),[c,e]),h=(e,t)=>{const r=new Date(e+"T00:00:00").toLocaleDateString(void 0,{weekday:"long",day:"2-digit",month:"long"}),n=r.charAt(0).toUpperCase()+r.slice(1);return t?`${n} - ${t.substring(0,5)}`:n};return(0,be.jsx)(jn,{courseId:t,courseName:i,sectionName:e("courses.liveClasses"),children:(0,be.jsx)("div",{className:"h-full overflow-y-auto",children:(0,be.jsxs)("div",{className:"max-w-5xl mx-auto px-4 pt-8 pb-12",children:[u&&(0,be.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),borderColor:s?l.accent:n("borderColor","#e5e7eb")},children:[1,2,3].map(e=>(0,be.jsxs)("div",{className:"px-4 sm:px-6 py-5 flex items-center gap-4 animate-pulse",style:{borderBottom:e<3?"1px solid rgba(156, 163, 175, 0.2)":"none"},children:[(0,be.jsx)("div",{className:"w-10 h-10 rounded-lg flex-shrink-0",style:{backgroundColor:l.text+"15"}}),(0,be.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,be.jsx)("div",{className:"h-4 rounded",style:{backgroundColor:l.text+"15",maxWidth:"250px"}}),(0,be.jsx)("div",{className:"h-3 rounded",style:{backgroundColor:l.text+"10",maxWidth:"180px"}})]}),(0,be.jsx)("div",{className:"h-8 w-24 rounded-lg",style:{backgroundColor:l.text+"10"}})]},e))}),!u&&0===m.length&&(0,be.jsxs)("div",{className:"text-center py-12 rounded-lg border",style:{backgroundColor:n("background","#ffffff"),borderColor:n("borderColor","#e5e7eb")},children:[(0,be.jsx)(hn,{size:40,className:"mx-auto mb-3",style:{color:l.text+"30"}}),(0,be.jsx)("p",{className:"text-sm font-medium",style:{color:l.text},children:e("dashboard.noLiveClasses","Sin clases programadas")}),(0,be.jsx)("p",{className:"text-xs mt-1",style:{color:l.textMuted},children:e("dashboard.noLiveClassesDescription","No hay clases en directo prÃ³ximas")})]}),!u&&m.length>0&&(0,be.jsx)("div",{className:"py-4",children:(0,be.jsx)("div",{className:"rounded-xl border-2 overflow-hidden",style:{backgroundColor:n("secondaryBackground","#f8f9fa"),borderColor:s?l.accent:n("borderColor","#e5e7eb")},children:m.map((t,r)=>{const o=iR(t.note_date,t.time,e),a=t.color||"#EF4444",i=r===m.length-1;return(0,be.jsxs)("div",{children:[(0,be.jsxs)("div",{className:"w-full px-4 sm:px-6 py-4 flex items-center justify-between transition-all duration-200 gap-3",style:{backgroundColor:s?"rgba(255,255,255,0.05)":`${n("primary","#1a202c")}05`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 overflow-hidden min-w-0 flex-1",children:[(0,be.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:a+"20"},children:(0,be.jsx)(hn,{size:20,style:{color:a}})}),(0,be.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,be.jsx)("span",{className:"font-semibold text-left block truncate",style:{color:l.text},children:t.title}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(0,be.jsx)(sr.A,{size:12,style:{color:l.textMuted}}),(0,be.jsx)("span",{className:"text-xs",style:{color:l.textMuted},children:h(t.note_date,t.time)})]}),t.description&&(0,be.jsx)("p",{className:"text-xs mt-1 line-clamp-1 hidden sm:block",style:{color:l.textMuted},children:t.description})]})]}),(0,be.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[(0,be.jsxs)("span",{className:"hidden sm:inline-block text-xs font-semibold px-3 py-1 rounded-full",style:{backgroundColor:o.live?"#EF4444":o.urgent?s?`${l.accent}30`:`${l.accent}15`:s?"rgba(255,255,255,0.1)":`${n("primary","#1a202c")}10`,color:o.live?"#ffffff":o.urgent?l.accent:l.text,minWidth:"90px",textAlign:"center"},children:[o.live&&(0,be.jsxs)("span",{className:"relative inline-flex h-2 w-2 mr-1.5 align-middle",children:[(0,be.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),(0,be.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]}),!o.live&&o.urgent&&(0,be.jsx)($e.A,{size:11,className:"inline mr-1 align-middle",style:{marginTop:"-1px"}}),o.text]}),t.link&&(0,be.jsxs)("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"py-2 px-3 sm:px-4 text-xs sm:text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow-md flex items-center gap-1.5 flex-shrink-0",style:{backgroundColor:o.live?"#EF4444":l.buttonBg,color:o.live?"#ffffff":l.buttonText},onMouseEnter:e=>{o.live?e.currentTarget.style.backgroundColor="#dc2626":s?e.currentTarget.style.filter="brightness(1.15)":e.currentTarget.style.backgroundColor=l.buttonHoverBg},onMouseLeave:e=>{e.currentTarget.style.filter="none",e.currentTarget.style.backgroundColor=o.live?"#EF4444":l.buttonBg},children:[(0,be.jsx)(or.A,{size:14}),(0,be.jsx)("span",{className:"hidden sm:inline",children:e("calendar.joinClass","Unirse a la clase")})]})]})]}),!i&&(0,be.jsx)("div",{style:{height:"2px",backgroundColor:"rgba(156, 163, 175, 0.2)"}})]},t.id)})})})]})})})},cR=(0,le.A)("mail-open",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]),dR=e=>e?e.replace(/\(Curso:[^)]+\)\s*/gi,"").replace(/\(LecciÃ³n:[^)]+\)\s*/gi,"").replace(/\(Pregunta ID:[^)]+\)\s*/gi,"").replace(/\(Video:[^)]+\)\s*/gi,"").replace(/<p>\s*<\/p>/gi,"").trim():"",uR=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:s,isDarkMode:a}=(0,se.DP)(),{course:i,loading:l}=Gt(t),c=i?.title?.rendered||i?.title||"",d=!0===window.qe_data?.user?.capabilities?.manage_options||!0===window.qe_data?.user?.is_admin,u=(0,r.useMemo)(()=>({text:a?s("textPrimary","#f9fafb"):s("primary","#1a202c"),textMuted:a?s("textSecondary","#9ca3af"):"#6b7280",accent:s("accent","#f59e0b"),primary:s("primary","#3b82f6"),bgCard:a?s("secondaryBackground","#1f2937"):"#ffffff",bgPage:a?s("secondaryBackground","#111827"):"#f5f7fa",border:a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.06)",inputBg:a?"rgba(255,255,255,0.05)":"#ffffff",hoverBg:a?"rgba(255,255,255,0.08)":"rgba(0,0,0,0.03)",success:"#10b981",error:"#ef4444",info:"#3b82f6",shadow:a?"0 4px 20px rgba(0,0,0,0.4)":"0 4px 20px rgba(0,0,0,0.08)",shadowSm:a?"0 2px 8px rgba(0,0,0,0.3)":"0 2px 8px rgba(0,0,0,0.05)",cardBorder:a?"rgba(255,255,255,0.06)":"rgba(0,0,0,0.04)"}),[s,a]),{messages:p,loading:f,pagination:m,computed:h,updateMessageStatus:g,fetchMessages:x}=(()=>{const e=(0,r.useContext)(It);if(!e)throw new Error("useMessagesContext must be used within a MessagesProvider");return e})(),[y,b]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),[_,S]=(0,r.useState)(null),[E,A]=(0,r.useState)([]),[M,T]=(0,r.useState)(!1),P=(0,r.useMemo)(()=>(console.log("ðŸ“¬ MessagesPage: Showing all messages (no course filter available):",p.length),p),[p]),O=(0,r.useMemo)(()=>P.filter(e=>"unread"===e.status).length,[P]);(0,r.useEffect)(()=>{(async()=>{if(y?.parent_id){T(!0);try{const e=(0,Ye.getApiConfig)(),t=await(0,Ke.qb)(`${e.endpoints.custom_api}/messages/${y.id}/parent`),r=t.data?.data||t.data||{};S(r.parent||null),A(r.thread_messages||[])}catch(e){console.error("Error loading parent message:",e),S(null),A([])}finally{T(!1)}}else S(null),A([])})()},[y]),(0,r.useEffect)(()=>{(async()=>{const e=_?.type||y?.type;if(y?.related_object_id&&"video_feedback"!==e&&"video_challenge"!==e){N(!0);try{const e=(0,Ye.getApiConfig)(),t=await(0,Ke.qb)(`${e.endpoints.questions}/${y.related_object_id}?context=view`);j(t.data||t)}catch(e){console.error("Error loading question:",e),j(null)}finally{N(!1)}}else j(null)})(),C(!1)},[y,_]),(0,r.useEffect)(()=>{y&&!P.find(e=>e.id===y.id)&&b(null)},[P,y]);const z=(0,r.useCallback)(e=>{b(e),"unread"===e.status&&g(e.id,"read")},[g]),q=(0,r.useCallback)(()=>{b(null)},[]),D=t=>{const r=new Date(t),n=new Date-r,s=Math.floor(n/864e5);return 0===s?r.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"}):1===s?e("messages.yesterday")||"Ayer":s<7?r.toLocaleDateString("es-ES",{weekday:"short"}):r.toLocaleDateString("es-ES",{day:"numeric",month:"short"})},I=l||f,L=!!y;if(d&&i&&!l){const r=i.title?.rendered||i.title;return(0,be.jsx)(jn,{courseId:t,courseName:c,sectionName:e("header.messages"),icon:fe.A,loading:l,children:(0,be.jsx)("div",{className:"flex flex-col relative",style:{backgroundColor:u.bgPage,height:"calc(100dvh - 84px)",maxHeight:"calc(100dvh - 84px)",overflow:"hidden"},children:(0,be.jsx)(wt,{initialSearch:r?`(Curso: ${r})`:"",courseMode:!0})})})}const R=e=>"question_feedback"===e?{icon:Ee,label:"Duda",color:u.info,bgColor:a?"rgba(59, 130, 246, 0.2)":"#dbeafe"}:"question_challenge"===e?{icon:Ae,label:"ImpugnaciÃ³n",color:u.error,bgColor:a?"rgba(239, 68, 68, 0.2)":"#fee2e2"}:"video_feedback"===e?{icon:Me.A,label:"Duda (Video)",color:u.info,bgColor:a?"rgba(59, 130, 246, 0.2)":"#dbeafe"}:"video_challenge"===e?{icon:Ae,label:"ImpugnaciÃ³n (Video)",color:u.error,bgColor:a?"rgba(239, 68, 68, 0.2)":"#fee2e2"}:"admin_reply"===e?{icon:Ve.A,label:"Respuesta",color:a?"#93c5fd":u.primary,bgColor:a?"rgba(59, 130, 246, 0.15)":"#eff6ff"}:e?.startsWith("admin_")?{icon:Pe.A,label:"Aviso",color:u.accent,bgColor:a?"rgba(245, 158, 11, 0.2)":"#fef3c7"}:{icon:Pe.A,label:"Mensaje",color:u.textMuted,bgColor:a?"rgba(255,255,255,0.1)":"#f3f4f6"},$=(e,t=null)=>t?.parent_id?{label:"Respondido",color:u.success,bgColor:a?"rgba(16, 185, 129, 0.2)":"#d1fae5",icon:Oe.A}:"resolved"===e?{label:"Resuelto",color:u.success,bgColor:a?"rgba(16, 185, 129, 0.2)":"#d1fae5",icon:Oe.A}:"unread"===e?{label:"Nuevo",color:u.accent,bgColor:a?"rgba(245, 158, 11, 0.2)":"#fef3c7",icon:Pe.A}:"read"===e?{label:"LeÃ­do",color:u.textMuted,bgColor:a?"rgba(255,255,255,0.1)":"#f3f4f6",icon:cR}:{label:e||"Archivado",color:u.textMuted,bgColor:a?"rgba(255,255,255,0.1)":"#f3f4f6",icon:ze},B=e=>new Date(e).toLocaleString("es-ES",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return(0,be.jsx)(jn,{courseId:t,courseName:c,sectionName:e("header.messages"),icon:fe.A,loading:l,children:(0,be.jsx)("div",{className:"flex flex-col relative",style:{backgroundColor:u.bgPage,height:"calc(100dvh - 68px)",maxHeight:"calc(100dvh - 68px)",overflow:"hidden"},children:(0,be.jsxs)("div",{className:"flex-1 relative overflow-hidden min-h-0",style:{overflowX:"hidden"},children:[(0,be.jsxs)("div",{className:"absolute inset-0 flex flex-col transition-transform duration-300 ease-in-out "+(L?"-translate-x-full":"translate-x-0"),children:[(0,be.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between flex-shrink-0",style:{backgroundColor:u.bgCard,borderBottom:`1px solid ${u.cardBorder}`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:u.textMuted},children:[(0,be.jsx)(qe,{size:16}),(0,be.jsx)("span",{className:"font-medium",children:e("header.messages")}),O>0&&(0,be.jsxs)("span",{className:"px-2 py-0.5 text-xs font-bold rounded-full text-white",style:{backgroundColor:u.error},children:[O," sin leer"]})]}),(0,be.jsx)("button",{onClick:()=>x?.(),disabled:f,className:"p-2 rounded-lg transition-all duration-200",style:{backgroundColor:u.inputBg,border:`1px solid ${u.cardBorder}`,color:u.textMuted},children:(0,be.jsx)(De.A,{size:18,className:f?"animate-spin":""})})]}),(0,be.jsx)("div",{className:"flex-1 overflow-hidden p-2 sm:p-4",children:(0,be.jsxs)("div",{className:"h-full rounded-xl overflow-hidden flex flex-col",style:{backgroundColor:u.bgCard,border:`1px solid ${u.cardBorder}`,boxShadow:u.shadow},children:[(0,be.jsxs)("div",{className:"hidden md:grid qe-msg-grid-user gap-4 px-4 py-3 text-xs font-semibold uppercase tracking-wider flex-shrink-0",style:{backgroundColor:u.inputBg,color:u.textMuted,borderBottom:`1px solid ${u.cardBorder}`},children:[(0,be.jsx)("div",{children:"Remitente"}),(0,be.jsx)("div",{children:"Mensaje"}),(0,be.jsx)("div",{children:"Tipo"}),(0,be.jsx)("div",{children:"Estado"}),(0,be.jsxs)("div",{className:"hidden lg:flex items-center gap-1",children:[(0,be.jsx)($e.A,{size:12}),"Fecha"]})]}),(0,be.jsxs)("div",{className:"flex-1 overflow-y-auto pb-4",children:[I&&0===P.length&&(0,be.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,be.jsx)("div",{className:"w-6 h-6 border-2 rounded-full animate-spin",style:{borderColor:`${u.accent}30`,borderTopColor:u.accent}})}),!I&&0===P.length&&(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center h-48",children:[(0,be.jsx)(qe,{size:40,style:{color:u.textMuted,opacity:.3}}),(0,be.jsx)("p",{className:"text-sm mt-3",style:{color:u.textMuted},children:e("messages.emptyInbox")})]}),P.map(t=>{const r="unread"===t.status,s=R(t.type),o=$(t.status,t),a=s.icon,i=o.icon;return(0,be.jsxs)(n().Fragment,{children:[(0,be.jsxs)("div",{className:"hidden md:grid qe-msg-grid-user gap-4 px-4 py-3 items-center cursor-pointer transition-all duration-150",style:{backgroundColor:"transparent",borderBottom:`1px solid ${u.cardBorder}`},onClick:()=>z(t),onMouseEnter:e=>{e.currentTarget.style.backgroundColor=u.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,be.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{backgroundColor:u.inputBg},children:(0,be.jsx)(Fe.A,{size:14,style:{color:u.textMuted}})}),(0,be.jsx)("span",{className:"text-sm truncate "+(r?"font-semibold":""),style:{color:r?u.text:u.textMuted},children:t.sender_name||e("messages.system")}),r&&(0,be.jsx)("span",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:u.error}})]}),(0,be.jsx)("div",{className:"min-w-0",children:(0,be.jsx)("p",{className:"text-sm truncate "+(r?"font-medium":""),style:{color:u.text},children:dR(t.message)?dR(t.message).replace(/<[^>]*>/g,"").substring(0,100):"(Sin mensaje)"})}),(0,be.jsx)("div",{children:(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full font-medium",style:{backgroundColor:s.bgColor,color:s.color},children:[(0,be.jsx)(a,{size:12}),s.label]})}),(0,be.jsx)("div",{children:(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-1 rounded-full font-medium",style:{backgroundColor:o.bgColor,color:o.color},children:[(0,be.jsx)(i,{size:12}),o.label]})}),(0,be.jsx)("div",{className:"hidden lg:block text-xs",style:{color:u.textMuted},children:(l=t.created_at,new Date(l).toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,be.jsx)("div",{className:"md:hidden p-3 cursor-pointer transition-all duration-150 active:scale-[0.99]",style:{backgroundColor:"transparent",borderBottom:`1px solid ${u.cardBorder}`},onClick:()=>z(t),children:(0,be.jsxs)("div",{className:"flex items-start gap-3",children:[(0,be.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,be.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:u.inputBg},children:(0,be.jsx)(Fe.A,{size:16,style:{color:u.textMuted}})}),r&&(0,be.jsx)("span",{className:"absolute -top-0.5 -right-0.5 w-3 h-3 rounded-full border-2",style:{backgroundColor:u.error,borderColor:u.bgCard}})]}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,be.jsx)("span",{className:"text-sm truncate "+(r?"font-semibold":"font-medium"),style:{color:u.text},children:t.sender_name||e("messages.system")}),(0,be.jsx)("span",{className:"text-xs flex-shrink-0",style:{color:u.textMuted},children:D(t.created_at)})]}),(0,be.jsx)("p",{className:"text-sm line-clamp-2 mb-2 "+(r?"font-medium":""),style:{color:r?u.text:u.textMuted},children:dR(t.message)?dR(t.message).replace(/<[^>]*>/g,"").substring(0,120):"(Sin mensaje)"}),(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:s.bgColor,color:s.color},children:[(0,be.jsx)(a,{size:10}),s.label]}),(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full font-medium",style:{backgroundColor:o.bgColor,color:o.color},children:[(0,be.jsx)(i,{size:10}),o.label]})]})]}),(0,be.jsx)(Ue.A,{size:16,className:"flex-shrink-0 mt-3",style:{color:u.textMuted,opacity:.5}})]})})]},t.id);var l}),m.hasMore&&(0,be.jsx)("div",{className:"flex justify-center py-4",children:(0,be.jsx)("button",{onClick:()=>x(!1),disabled:f,className:"px-4 py-2 text-sm font-medium rounded-lg transition-all duration-200",style:{backgroundColor:u.inputBg,border:`1px solid ${u.cardBorder}`,color:u.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=u.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor=u.inputBg},children:f?(0,be.jsxs)("span",{className:"flex items-center gap-2",children:[(0,be.jsx)(De.A,{size:14,className:"animate-spin"}),"Cargando..."]}):`Cargar mÃ¡s mensajes (${P.length} visibles de ${m.total} totales)`})})]})]})})]}),(0,be.jsx)("div",{className:"absolute inset-0 flex flex-col transition-transform duration-300 ease-in-out "+(L?"translate-x-0":"translate-x-full"),style:{backgroundColor:u.bgPage},children:y&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)("div",{className:"px-3 sm:px-4 py-3 flex items-center justify-between flex-shrink-0",style:{backgroundColor:u.bgCard,borderBottom:`1px solid ${u.cardBorder}`},children:(0,be.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 flex-1 min-w-0",children:[(0,be.jsx)("button",{onClick:q,className:"p-2 rounded-lg transition-all flex-shrink-0",style:{backgroundColor:u.inputBg,color:u.text},children:(0,be.jsx)(We.A,{size:18})}),(0,be.jsxs)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex items-center justify-center flex-shrink-0",style:{background:`linear-gradient(135deg, ${u.accent}, ${u.accent}dd)`},children:[(0,be.jsx)(Fe.A,{size:14,className:"text-white sm:hidden"}),(0,be.jsx)(Fe.A,{size:16,className:"text-white hidden sm:block"})]}),(0,be.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-0.5 sm:gap-2 min-w-0 flex-1",children:[(0,be.jsx)("span",{className:"font-bold text-sm truncate",style:{color:u.text},children:y.sender_name||e("messages.system")}),(0,be.jsxs)("div",{className:"flex items-center gap-1.5",children:[(()=>{const e=R(y.type),t=e.icon;return(0,be.jsxs)("span",{className:"inline-flex items-center gap-1 text-xs px-1.5 py-0.5 rounded font-medium flex-shrink-0",style:{backgroundColor:e.bgColor,color:e.color},children:[(0,be.jsx)(t,{size:10}),e.label]})})(),(()=>{const e=$(y.status,y);return(0,be.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded font-medium flex-shrink-0",style:{backgroundColor:e.bgColor,color:e.color},children:e.label})})()]})]})]})}),(0,be.jsxs)("div",{className:"flex-1 overflow-y-auto p-3 sm:p-6 space-y-3 sm:space-y-4 min-h-0",children:[M&&(0,be.jsx)("div",{className:"flex items-center justify-center py-4",children:(0,be.jsx)("div",{className:"w-5 h-5 border-2 rounded-full animate-spin",style:{borderColor:`${u.accent}30`,borderTopColor:u.accent}})}),_?(0,be.jsxs)("div",{className:"flex gap-2 sm:gap-4 max-w-4xl",children:[(0,be.jsxs)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${u.accent}, ${u.accent}dd)`},children:[(0,be.jsx)(Fe.A,{size:14,className:"text-white sm:hidden"}),(0,be.jsx)(Fe.A,{size:16,className:"text-white hidden sm:block"})]}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("div",{className:"rounded-2xl rounded-tl-sm p-3 sm:p-4",style:{backgroundColor:u.bgCard,border:`1px solid ${u.cardBorder}`,boxShadow:u.shadowSm},children:(0,be.jsx)("div",{className:"text-sm prose prose-sm max-w-none leading-relaxed break-words",style:{color:u.text,wordBreak:"break-word",overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:dR(_.message)}})}),(0,be.jsxs)("p",{className:"text-xs mt-1.5 sm:mt-2 ml-2 sm:ml-3",style:{color:u.textMuted},children:[e("messages.you")||"TÃº"," â€¢ ",B(_.created_at)]})]})]}):(0,be.jsxs)("div",{className:"flex gap-2 sm:gap-4 max-w-4xl",children:[(0,be.jsxs)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${u.accent}, ${u.accent}dd)`},children:[(0,be.jsx)(Fe.A,{size:14,className:"text-white sm:hidden"}),(0,be.jsx)(Fe.A,{size:16,className:"text-white hidden sm:block"})]}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsx)("div",{className:"rounded-2xl rounded-tl-sm p-3 sm:p-4",style:{backgroundColor:u.bgCard,border:`1px solid ${u.cardBorder}`,boxShadow:u.shadowSm},children:(0,be.jsx)("div",{className:"text-sm prose prose-sm max-w-none leading-relaxed break-words",style:{color:u.text,wordBreak:"break-word",overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:dR(y.message)}})}),(0,be.jsxs)("p",{className:"text-xs mt-1.5 sm:mt-2 ml-2 sm:ml-3",style:{color:u.textMuted},children:[y.sender_name||e("messages.system")," â€¢ ",B(y.created_at)]})]})]}),(()=>{const e=_?.type||y.type;if("video_feedback"!==e&&"video_challenge"!==e)return null;const t=(e=>{if(!e)return null;const t=e.match(/\(Video:\s*([^)]+)\)/i);return t?t[1].trim():null})(_?.message||y.message),r=t?(e=>{if(!e)return null;const t=e.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(\d+)/);if(t)return`https://player.vimeo.com/video/${t[1]}`;const r=e.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:watch\?v=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]+)/);return r?`https://www.youtube.com/embed/${r[1]}`:e})(t):null;return r?(0,be.jsx)("div",{className:"ml-10 sm:ml-14 max-w-2xl",children:(0,be.jsxs)("div",{className:"rounded-xl overflow-hidden p-3 sm:p-4",style:{backgroundColor:u.inputBg,border:`1px solid ${u.cardBorder}`},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,be.jsx)(Me.A,{size:15,style:{color:u.accent}}),(0,be.jsx)("span",{className:"font-medium text-sm",style:{color:u.text},children:"Video de la duda"})]}),(0,be.jsx)("div",{className:"rounded-lg overflow-hidden",style:{aspectRatio:"16/9",backgroundColor:"#000"},children:(0,be.jsx)("iframe",{src:r,className:"w-full h-full border-0",title:"Video",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]})}):null})(),y.related_object_id&&"video_feedback"!==(_?.type||y.type)&&"video_challenge"!==(_?.type||y.type)&&(0,be.jsx)("div",{className:"ml-10 sm:ml-14 max-w-2xl",children:(0,be.jsxs)("div",{className:"rounded-xl overflow-hidden",style:{backgroundColor:u.inputBg,border:`1px solid ${u.cardBorder}`},children:[(0,be.jsxs)("button",{onClick:()=>C(!k),className:"w-full flex items-center justify-between p-3 sm:p-4 transition-all rounded-xl",style:{color:u.text},onMouseEnter:e=>{e.currentTarget.style.backgroundColor=u.hoverBg},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(He.A,{size:16,style:{color:u.accent}}),(0,be.jsx)("span",{className:"font-medium text-sm",children:w?"Cargando pregunta...":"Ver pregunta relacionada"})]}),k?(0,be.jsx)($n.A,{size:18}):(0,be.jsx)(Ut.A,{size:18})]}),k&&v&&(0,be.jsxs)("div",{className:"p-3 sm:p-4 pt-0 space-y-4",children:[(0,be.jsxs)("div",{className:"p-3 sm:p-4 rounded-xl",style:{backgroundColor:u.bgCard,border:`1px solid ${u.cardBorder}`},children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:u.textMuted},children:"Enunciado"}),(0,be.jsx)("div",{className:"explanation-content text-sm leading-relaxed break-words",style:{color:u.text,overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:v.title?.rendered||v.title||""}})]}),v.meta?._question_options&&v.meta._question_options.length>0&&(0,be.jsxs)("div",{children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:u.textMuted},children:"Respuestas"}),(0,be.jsx)("div",{className:"space-y-2",children:v.meta._question_options.map((e,t)=>(0,be.jsxs)("div",{className:"flex items-start gap-3 p-3 rounded-lg",style:{backgroundColor:e.isCorrect?a?"rgba(16, 185, 129, 0.15)":"#ecfdf5":u.bgCard,border:`1px solid ${e.isCorrect?a?"rgba(16, 185, 129, 0.3)":"#a7f3d0":u.cardBorder}`},children:[(0,be.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:e.isCorrect?(0,be.jsx)(Oe.A,{size:16,style:{color:u.success}}):(0,be.jsx)(lr.A,{size:16,style:{color:u.textMuted}})}),(0,be.jsx)("span",{className:"text-sm break-words",style:{color:e.isCorrect?u.success:u.text,overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:e.text||""}})]},t))})]}),(v.content?.rendered||v.meta?._explanation)&&(0,be.jsxs)("div",{className:"p-3 sm:p-4 rounded-xl",style:{backgroundColor:a?"rgba(59, 130, 246, 0.1)":"#eff6ff",border:"1px solid "+(a?"rgba(59, 130, 246, 0.2)":"#bfdbfe")},children:[(0,be.jsx)("p",{className:"text-xs font-semibold uppercase tracking-wide mb-2",style:{color:u.info},children:"ExplicaciÃ³n"}),(0,be.jsx)("div",{className:"explanation-content text-xs leading-relaxed break-words",style:{color:a?"#ffffff":u.textMuted,overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:v.content?.rendered||v.meta?._explanation||""}})]})]})]})}),_&&E.length>0?E.map(t=>(0,be.jsxs)("div",{className:"flex gap-2 sm:gap-4 justify-end max-w-4xl ml-auto",children:[(0,be.jsxs)("div",{className:"max-w-[85%] sm:max-w-[80%]",children:[(0,be.jsx)("div",{className:"rounded-2xl rounded-tr-sm p-3 sm:p-4",style:{background:`linear-gradient(135deg, ${u.primary}, ${u.primary}dd)`,color:"#fff",boxShadow:"0 2px 12px rgba(59, 130, 246, 0.2)"},children:(0,be.jsx)("div",{className:"text-sm prose prose-sm prose-invert max-w-none leading-relaxed break-words",style:{wordBreak:"break-word",overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:dR(t.message)}})}),(0,be.jsxs)("p",{className:"text-xs mt-1.5 sm:mt-2 mr-2 sm:mr-3 text-right",style:{color:u.textMuted},children:[t.sender_name||e("messages.adminResponse")||"Respuesta"," â€¢ ",B(t.created_at)]})]}),(0,be.jsxs)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${u.primary}, ${u.primary}dd)`},children:[(0,be.jsx)(Ve.A,{size:12,className:"text-white sm:hidden"}),(0,be.jsx)(Ve.A,{size:14,className:"text-white hidden sm:block"})]})]},t.id)):_&&(0,be.jsxs)("div",{className:"flex gap-2 sm:gap-4 justify-end max-w-4xl ml-auto",children:[(0,be.jsxs)("div",{className:"max-w-[85%] sm:max-w-[80%]",children:[(0,be.jsx)("div",{className:"rounded-2xl rounded-tr-sm p-3 sm:p-4",style:{background:`linear-gradient(135deg, ${u.primary}, ${u.primary}dd)`,color:"#fff",boxShadow:"0 2px 12px rgba(59, 130, 246, 0.2)"},children:(0,be.jsx)("div",{className:"text-sm prose prose-sm prose-invert max-w-none leading-relaxed break-words",style:{wordBreak:"break-word",overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:dR(y.message)}})}),(0,be.jsxs)("p",{className:"text-xs mt-1.5 sm:mt-2 mr-2 sm:mr-3 text-right",style:{color:u.textMuted},children:[e("messages.adminResponse")||"Respuesta"," â€¢ ",B(y.created_at)]})]}),(0,be.jsxs)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full flex-shrink-0 flex items-center justify-center",style:{background:`linear-gradient(135deg, ${u.primary}, ${u.primary}dd)`},children:[(0,be.jsx)(Ve.A,{size:12,className:"text-white sm:hidden"}),(0,be.jsx)(Ve.A,{size:14,className:"text-white hidden sm:block"})]})]}),(0,be.jsx)("div",{className:"mt-4 p-3 sm:p-4 rounded-xl text-center",style:{backgroundColor:u.inputBg,border:`1px solid ${u.cardBorder}`},children:(0,be.jsx)("p",{className:"text-sm",style:{color:u.textMuted},children:e("messages.contactSupport")||"Para responder a este mensaje, contacta al soporte del curso."})})]})]})})]})})})},pR=(0,le.A)("check-check",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),fR=(0,le.A)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),mR=()=>{const{t:e}=(0,o.Bd)(),{courseId:t}=(0,re.g)(),{getColor:n,isDarkMode:s}=(0,se.DP)(),{course:a,loading:i}=Gt(t),l=a?.title?.rendered||a?.title||e("courses.title"),[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(!0),[f,m]=(0,r.useState)(!1),[h,g]=(0,r.useState)({page:1,total_pages:1,total:0}),[x,y]=(0,r.useState)(0),[b,v]=(0,r.useState)(!1),j={text:s?n("textPrimary","#f9fafb"):n("primary","#1a202c"),textMuted:n("textSecondary","#6b7280"),accent:n("accent","#f59e0b"),primary:n("primary","#1a202c"),background:n("background","#ffffff"),secondaryBg:n("secondaryBackground","#f3f4f6"),cardBg:s?n("secondaryBackground","#1f2937"):"#ffffff",border:s?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.08)"},w=(0,r.useCallback)(async(e=1,r=!1)=>{1===e?p(!0):m(!0);try{const n=await(async(e,t={})=>{const{page:r=1,per_page:n=20}=t,s=`${Ht()}/courses/${e}/notifications?page=${r}&per_page=${n}`;try{return await(0,Ke.qb)(s,{method:"GET"})}catch(e){throw console.error("Error fetching notifications:",e),e}})(t,{page:e,per_page:20});if(n.data?.success){const{notifications:e,pagination:t}=n.data.data,s=e.filter(e=>"question_updated"!==e.type),o=s.filter(e=>!e.is_read).length;r?(d(e=>[...e,...s]),y(e=>e+o)):(d(s),y(o)),g(t)}}catch(e){console.error("Error fetching notifications:",e)}finally{p(!1),m(!1)}},[t]);(0,r.useEffect)(()=>{t&&w(1)},[t,w]);const N=({notification:e})=>{const t=(r=e.type,{new_lesson:ae.A,new_quiz:ce,new_video:Me.A,new_pdf:ie.A,new_text:Fn,lesson_updated:De.A,course_updated:me.A,quiz_updated:ce,question_updated:De.A,study_plan_note:ie.A,study_plan_live_class:Me.A}[r]||Ze.A);var r;const n=(e=>({new_lesson:"#10b981",new_quiz:"#8b5cf6",new_video:"#3b82f6",new_pdf:"#ef4444",new_text:"#6b7280",lesson_updated:"#f59e0b",course_updated:"#6366f1",quiz_updated:"#8b5cf6",question_updated:"#f59e0b",study_plan_note:"#8b5cf6",study_plan_live_class:"#ef4444"}[e]||j.primary))(e.type),o=!e.is_read;return(0,be.jsx)("div",{className:"p-4 rounded-xl border transition-all duration-200 "+(o?"cursor-pointer":""),style:{backgroundColor:o?s?"rgba(255,255,255,0.05)":`${j.primary}05`:j.cardBg,borderColor:o?`${j.primary}30`:j.border},onClick:()=>o&&(async e=>{try{await(async e=>{const t=`${Ht()}/notifications/${e}/read`;try{return await(0,Ke.qb)(t,{method:"POST"})}catch(e){throw console.error("Error marking notification as read:",e),e}})(e),d(t=>t.map(t=>t.id===e?{...t,is_read:!0}:t)),y(e=>Math.max(0,e-1)),window.dispatchEvent(new CustomEvent("notificationRead"))}catch(e){console.error("Error marking notification as read:",e)}})(e.id),children:(0,be.jsxs)("div",{className:"flex items-start gap-4",children:[(0,be.jsx)("div",{className:"flex-shrink-0 p-3 rounded-xl",style:{backgroundColor:s?`${n}20`:`${n}15`},children:(0,be.jsx)(t,{size:22,style:{color:n}})}),(0,be.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between gap-2 mb-1",children:[(0,be.jsx)("h3",{className:"font-semibold text-sm "+(o?"":"opacity-80"),style:{color:j.text},children:e.title}),o&&(0,be.jsx)("span",{className:"flex-shrink-0 w-2 h-2 rounded-full",style:{backgroundColor:j.accent}})]}),(0,be.jsx)("p",{className:"text-sm mb-2",style:{color:j.textMuted},children:e.message}),(0,be.jsx)("span",{className:"text-xs",style:{color:j.textMuted,opacity:.7},children:e.time_ago})]})]})})};return i||u?(0,be.jsx)(jn,{courseId:t,courseName:l,sectionName:e("courseNotifications.title"),children:(0,be.jsx)("div",{className:"flex items-center justify-center h-64",style:{backgroundColor:j.secondaryBg},children:(0,be.jsxs)("div",{className:"text-center",children:[(0,be.jsx)(Xr.A,{className:"animate-spin h-10 w-10 mx-auto mb-3",style:{color:j.primary}}),(0,be.jsx)("p",{style:{color:j.textMuted},children:e("common.loading")})]})})}):(0,be.jsx)(jn,{courseId:t,courseName:l,sectionName:e("courseNotifications.title"),children:(0,be.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-6 pb-24",children:[(0,be.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,be.jsxs)("div",{className:"flex items-center gap-3",children:[(0,be.jsx)("div",{className:"p-2 rounded-lg",style:{backgroundColor:s?`${j.primary}20`:`${j.primary}10`},children:(0,be.jsx)(Ze.A,{size:20,style:{color:j.primary}})}),(0,be.jsxs)("div",{children:[(0,be.jsx)("h1",{className:"text-lg font-bold",style:{color:j.text},children:e("courseNotifications.title")}),x>0&&(0,be.jsxs)("p",{className:"text-xs",style:{color:j.textMuted},children:[x," ",e("courseNotifications.unread")]})]})]}),x>0&&(0,be.jsxs)("button",{onClick:async()=>{v(!0);try{await(async e=>{const t=`${Ht()}/courses/${e}/notifications/read-all`;try{return await(0,Ke.qb)(t,{method:"POST"})}catch(e){throw console.error("Error marking all notifications as read:",e),e}})(t),d(e=>e.map(e=>({...e,is_read:!0}))),y(0),window.dispatchEvent(new CustomEvent("notificationsMarkedAllRead"))}catch(e){console.error("Error marking all notifications as read:",e)}finally{v(!1)}},disabled:b,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",style:{backgroundColor:s?`${j.primary}20`:`${j.primary}10`,color:j.primary},children:[b?(0,be.jsx)(Xr.A,{className:"w-4 h-4 animate-spin"}):(0,be.jsx)(pR,{className:"w-4 h-4"}),e("courseNotifications.markAllRead")]})]}),c.length>0?(0,be.jsxs)("div",{className:"space-y-3",children:[c.map(e=>(0,be.jsx)(N,{notification:e},e.id)),h.page<h.total_pages&&(0,be.jsx)("div",{className:"text-center pt-4",children:(0,be.jsxs)("button",{onClick:()=>{h.page<h.total_pages&&!f&&w(h.page+1,!0)},disabled:f,className:"px-6 py-2 rounded-lg text-sm font-medium transition-all duration-200",style:{backgroundColor:j.cardBg,color:j.text,border:`1px solid ${j.border}`},children:[f?(0,be.jsx)(Xr.A,{className:"w-4 h-4 animate-spin inline mr-2"}):null,e("courseNotifications.loadMore")]})})]}):(0,be.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 rounded-xl border",style:{backgroundColor:j.cardBg,borderColor:j.border},children:[(0,be.jsx)("div",{className:"p-4 rounded-full mb-4",style:{backgroundColor:s?"rgba(255,255,255,0.05)":"#f3f4f6"},children:(0,be.jsx)(fR,{size:48,style:{color:j.textMuted}})}),(0,be.jsx)("h3",{className:"text-lg font-semibold mb-2",style:{color:j.text},children:e("courseNotifications.empty")}),(0,be.jsx)("p",{className:"text-sm text-center max-w-sm",style:{color:j.textMuted},children:e("courseNotifications.emptyDescription")})]})]})})},hR=(0,r.lazy)(()=>Promise.resolve().then(a.bind(a,6669))),gR=(0,r.lazy)(()=>Promise.resolve().then(a.bind(a,6981))),xR=(0,r.lazy)(()=>Promise.resolve().then(a.bind(a,7117))),yR=(0,r.lazy)(()=>Promise.resolve().then(a.bind(a,7690))),bR=(0,r.lazy)(()=>Promise.resolve().then(a.bind(a,7122))),vR=(0,r.lazy)(()=>Promise.resolve().then(a.bind(a,1963))),jR=(0,r.lazy)(()=>Promise.resolve().then(a.bind(a,2203))),wR=(0,r.lazy)(()=>Promise.resolve().then(a.bind(a,7194))),NR=()=>(0,be.jsx)("div",{className:"flex items-center justify-center h-full min-h-[400px]",children:(0,be.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-amber-500"})}),kR=()=>{const e=(0,re.Zp)(),t=(0,re.zy)();return(0,r.useEffect)(()=>{const r=sessionStorage.getItem("qe_pending_hash");if(r&&"/"===t.pathname){sessionStorage.removeItem("qe_pending_hash");const t=r.startsWith("#")?r.substring(1):r;t&&"/"!==t&&!t.startsWith("/login")&&e(t,{replace:!0})}},[e,t.pathname]),null},CR=()=>window.qe_data?.user?.id>0?(0,be.jsx)(re.C5,{to:"/",replace:!0}):(_R(""),null),_R=e=>{e&&"#/"!==e&&"#/login"!==e&&sessionStorage.setItem("qe_pending_hash",e);const t=window.qe_data?.lms_url||window.location.origin+window.location.pathname,r=(window.qe_data?.login_url||window.location.origin+"/mi-cuenta/")+"?redirect_to="+encodeURIComponent(t);window.location.replace(r)},SR=({children:e})=>{const t=window.qe_data?.user?.id>0,r=(0,re.zy)();if(!t){const e="#"+r.pathname+(r.search||"");return _R(e),null}return e},ER=({children:e})=>{const t=window.qe_data?.user?.id>0,r=!0===window.qe_data?.user?.capabilities?.manage_options||!0===window.qe_data?.user?.is_admin,n=(0,re.zy)();if(!t){const e="#"+n.pathname+(n.search||"");return _R(e),null}return r?e:(0,be.jsx)(re.C5,{to:"/",replace:!0})},AR=(0,r.lazy)(()=>a.e(327).then(a.bind(a,5327))),MR=function(){return(0,be.jsx)(se.NP,{children:(0,be.jsx)(Dt,{children:(0,be.jsx)(Lt,{enablePolling:!0,pollingInterval:3e4,children:(0,be.jsxs)(re.I9,{children:[(0,be.jsx)(kR,{}),(0,be.jsx)(r.Suspense,{fallback:(0,be.jsx)(NR,{}),children:(0,be.jsxs)(re.BV,{children:[(0,be.jsx)(re.qh,{path:"/login",element:(0,be.jsx)(CR,{})}),(0,be.jsx)(re.qh,{path:"/admin",element:(0,be.jsx)(ER,{children:(0,be.jsx)(Jt,{})}),children:(0,be.jsxs)(re.qh,{element:(0,be.jsx)(AR,{}),children:[(0,be.jsx)(re.qh,{index:!0,element:(0,be.jsx)(hR,{})}),(0,be.jsx)(re.qh,{path:"courses",element:(0,be.jsx)(gR,{})}),(0,be.jsx)(re.qh,{path:"lessons",element:(0,be.jsx)(xR,{})}),(0,be.jsx)(re.qh,{path:"quizzes",element:(0,be.jsx)(yR,{})}),(0,be.jsx)(re.qh,{path:"questions",element:(0,be.jsx)(vR,{})}),(0,be.jsx)(re.qh,{path:"students",element:(0,be.jsx)(bR,{})}),(0,be.jsx)(re.qh,{path:"books",element:(0,be.jsx)(jR,{})}),(0,be.jsx)(re.qh,{path:"settings",element:(0,be.jsx)(wR,{})})]})}),(0,be.jsxs)(re.qh,{path:"/",element:(0,be.jsx)(SR,{children:(0,be.jsx)(Jt,{})}),children:[(0,be.jsx)(re.qh,{index:!0,element:(0,be.jsx)(tn,{})}),(0,be.jsx)(re.qh,{path:"messages",element:(0,be.jsx)(wt,{})}),(0,be.jsx)(re.qh,{path:"dashboard",element:(0,be.jsx)(Er,{})}),(0,be.jsx)(re.qh,{path:"/dashboard/attempts/:attemptId",element:(0,be.jsx)(Vr,{})}),(0,be.jsx)(re.qh,{path:"courses",element:(0,be.jsx)(tn,{})}),(0,be.jsx)(re.qh,{path:"books",element:(0,be.jsx)(fn,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/dashboard",element:(0,be.jsx)(Ln,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/study-planner",element:(0,be.jsx)(ff,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/lessons",element:(0,be.jsx)(gs,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/material",element:(0,be.jsx)(wf,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/videos",element:(0,be.jsx)(_f,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/live-classes",element:(0,be.jsx)(lR,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/statistics",element:(0,be.jsx)(QL,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/students",element:(0,be.jsx)(ZL,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/messages",element:(0,be.jsx)(uR,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/notifications",element:(0,be.jsx)(mR,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/test-generator",element:(0,be.jsx)(vs,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/self-paced-tests",element:(0,be.jsx)(aR,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/tests",element:(0,be.jsx)(Lf,{})}),(0,be.jsx)(re.qh,{path:"courses/:courseId/test-history",element:(0,be.jsx)(Ts,{})}),(0,be.jsx)(re.qh,{path:"test/practice",element:(0,be.jsx)(As,{})}),(0,be.jsx)(re.qh,{path:"test/library",element:(0,be.jsx)(Ns,{})}),(0,be.jsx)(re.qh,{path:"test/history",element:(0,be.jsx)(Ts,{})}),(0,be.jsx)(re.qh,{path:"statistics",element:(0,be.jsx)(Is,{})}),(0,be.jsx)(re.qh,{path:"quiz/:quizId",element:(0,be.jsx)(js,{})}),(0,be.jsx)(re.qh,{path:"quiz-generator",element:(0,be.jsx)(vs,{})})]})]})}),(0,be.jsx)(ne.N9,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0})]})})})})},TR=document.getElementById("root"),PR=document.getElementById("qe-frontend-root");TR&&s.createRoot(TR).render((0,be.jsx)(n().StrictMode,{children:(0,be.jsx)(o.xC,{i18n:te,children:(0,be.jsx)(Ot,{})})})),PR&&s.createRoot(PR).render((0,be.jsx)(n().StrictMode,{children:(0,be.jsx)(o.xC,{i18n:te,children:(0,be.jsx)(MR,{})})}))})()})();